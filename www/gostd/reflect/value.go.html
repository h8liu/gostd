<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2867687">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2867742">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2867796">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2867847">package</span>&nbsp;<span class="ident" id="2867855">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2867864">import</span>&nbsp;<span class="op" id="2867871">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2867874">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2867882">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2867893">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2867902">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2867905">const</span>&nbsp;<span class="ident" id="2867911">ptrSize</span>&nbsp;<span class="op" id="2867919">=</span>&nbsp;<span class="ident" id="2867921">unsafe</span><span class="op" id="2867927">.</span><span class="ident" id="2867928">Sizeof</span><span class="op" id="2867934">(</span><span class="op" id="2867935">(</span><span class="op" id="2867936">*</span><span class="builtintype" id="2867937">byte</span><span class="op" id="2867941">)</span><span class="op" id="2867942">(</span><span class="builtintype" id="2867943">nil</span><span class="op" id="2867946">)</span><span class="op" id="2867947">)</span><br>
<span class="lineno"></span><span class="keyword" id="2867949">const</span>&nbsp;<span class="ident" id="2867955">cannotSet</span>&nbsp;<span class="op" id="2867965">=</span>&nbsp;<span class="string" id="2867967">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2868025">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2868077">//</span><br>
<span class="lineno"></span><span class="comment" id="2868080">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2868144">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2868203">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2868263">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2868315">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2868377">//</span><br>
<span class="lineno"></span><span class="comment" id="2868380">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2868419">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2868489">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2868566">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2868627">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2868695">//</span><br>
<span class="lineno">30</span><span class="comment" id="2868698">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2868771">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2868842">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2868864">type</span>&nbsp;<span class="ident" id="2868869">Value</span>&nbsp;<span class="keyword" id="2868875">struct</span>&nbsp;<span class="op" id="2868882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2868885">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868945">typ</span>&nbsp;<span class="op" id="2868949">*</span><span class="ident" id="2868950">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2868958">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869024">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869090">ptr</span>&nbsp;<span class="ident" id="2869094">unsafe</span><span class="op" id="2869100">.</span><span class="ident" id="2869101">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869111">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869152">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869187">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869245">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869294">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869348">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869387">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869438">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869492">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869559">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869629">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869692">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869699">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869757">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869826">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869893">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869961">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2869992">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2869995">type</span>&nbsp;<span class="ident" id="2870000">flag</span>&nbsp;<span class="builtintype" id="2870005">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2870014">const</span>&nbsp;<span class="op" id="2870020">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870023">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870044">=</span>&nbsp;<span class="num" id="2870046">5</span>&nbsp;<span class="comment" id="2870048">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870071">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870087">flag</span>&nbsp;<span class="op" id="2870092">=</span>&nbsp;<span class="num" id="2870094">1</span><span class="op" id="2870095">&lt;&lt;</span><span class="ident" id="2870097">flagKindWidth</span>&nbsp;<span class="op" id="2870111">-</span>&nbsp;<span class="num" id="2870113">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870116">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870132">flag</span>&nbsp;<span class="op" id="2870137">=</span>&nbsp;<span class="num" id="2870139">1</span>&nbsp;<span class="op" id="2870141">&lt;&lt;</span>&nbsp;<span class="num" id="2870144">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870147">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870163">flag</span>&nbsp;<span class="op" id="2870168">=</span>&nbsp;<span class="num" id="2870170">1</span>&nbsp;<span class="op" id="2870172">&lt;&lt;</span>&nbsp;<span class="num" id="2870175">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870178">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870194">flag</span>&nbsp;<span class="op" id="2870199">=</span>&nbsp;<span class="num" id="2870201">1</span>&nbsp;<span class="op" id="2870203">&lt;&lt;</span>&nbsp;<span class="num" id="2870206">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870209">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870225">flag</span>&nbsp;<span class="op" id="2870230">=</span>&nbsp;<span class="num" id="2870232">1</span>&nbsp;<span class="op" id="2870234">&lt;&lt;</span>&nbsp;<span class="num" id="2870237">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870240">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870261">=</span>&nbsp;<span class="num" id="2870263">9</span><br>
<span class="lineno"></span><span class="op" id="2870265">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2870268">func</span>&nbsp;<span class="op" id="2870273">(</span><span class="ident" id="2870274">f</span>&nbsp;<span class="ident" id="2870276">flag</span><span class="op" id="2870280">)</span>&nbsp;<span class="ident" id="2870282">kind</span><span class="op" id="2870286">(</span><span class="op" id="2870287">)</span>&nbsp;<span class="ident" id="2870289">Kind</span>&nbsp;<span class="op" id="2870294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870297">return</span>&nbsp;<span class="ident" id="2870304">Kind</span><span class="op" id="2870308">(</span><span class="ident" id="2870309">f</span>&nbsp;<span class="op" id="2870311">&amp;</span>&nbsp;<span class="ident" id="2870313">flagKindMask</span><span class="op" id="2870325">)</span><br>
<span class="lineno">75</span><span class="op" id="2870327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2870330">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2870390">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2870449">func</span>&nbsp;<span class="op" id="2870454">(</span><span class="ident" id="2870455">v</span>&nbsp;<span class="ident" id="2870457">Value</span><span class="op" id="2870462">)</span>&nbsp;<span class="ident" id="2870464">pointer</span><span class="op" id="2870471">(</span><span class="op" id="2870472">)</span>&nbsp;<span class="ident" id="2870474">unsafe</span><span class="op" id="2870480">.</span><span class="ident" id="2870481">Pointer</span>&nbsp;<span class="op" id="2870489">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870492">if</span>&nbsp;<span class="ident" id="2870495">v</span><span class="op" id="2870496">.</span><span class="ident" id="2870497">typ</span><span class="op" id="2870500">.</span><span class="ident" id="2870501">size</span>&nbsp;<span class="op" id="2870506">!=</span>&nbsp;<span class="ident" id="2870509">ptrSize</span>&nbsp;<span class="op" id="2870517">||</span>&nbsp;<span class="op" id="2870520">!</span><span class="ident" id="2870521">v</span><span class="op" id="2870522">.</span><span class="ident" id="2870523">typ</span><span class="op" id="2870526">.</span><span class="ident" id="2870527">pointers</span><span class="op" id="2870535">(</span><span class="op" id="2870536">)</span>&nbsp;<span class="op" id="2870538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2870542">panic</span><span class="op" id="2870547">(</span><span class="string" id="2870548">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2870591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870597">if</span>&nbsp;<span class="ident" id="2870600">v</span><span class="op" id="2870601">.</span><span class="ident" id="2870602">flag</span><span class="op" id="2870606">&amp;</span><span class="ident" id="2870607">flagIndir</span>&nbsp;<span class="op" id="2870617">!=</span>&nbsp;<span class="num" id="2870620">0</span>&nbsp;<span class="op" id="2870622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870626">return</span>&nbsp;<span class="op" id="2870633">*</span><span class="op" id="2870634">(</span><span class="op" id="2870635">*</span><span class="ident" id="2870636">unsafe</span><span class="op" id="2870642">.</span><span class="ident" id="2870643">Pointer</span><span class="op" id="2870650">)</span><span class="op" id="2870651">(</span><span class="ident" id="2870652">v</span><span class="op" id="2870653">.</span><span class="ident" id="2870654">ptr</span><span class="op" id="2870657">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870663">return</span>&nbsp;<span class="ident" id="2870670">v</span><span class="op" id="2870671">.</span><span class="ident" id="2870672">ptr</span><br>
<span class="lineno"></span><span class="op" id="2870676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2870679">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2870727">func</span>&nbsp;<span class="ident" id="2870732">packEface</span><span class="op" id="2870741">(</span><span class="ident" id="2870742">v</span>&nbsp;<span class="ident" id="2870744">Value</span><span class="op" id="2870749">)</span>&nbsp;<span class="keyword" id="2870751">interface</span><span class="op" id="2870760">{</span><span class="op" id="2870761">}</span>&nbsp;<span class="op" id="2870763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870766">t</span>&nbsp;<span class="op" id="2870768">:=</span>&nbsp;<span class="ident" id="2870771">v</span><span class="op" id="2870772">.</span><span class="ident" id="2870773">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870778">var</span>&nbsp;<span class="ident" id="2870782">i</span>&nbsp;<span class="keyword" id="2870784">interface</span><span class="op" id="2870793">{</span><span class="op" id="2870794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870797">e</span>&nbsp;<span class="op" id="2870799">:=</span>&nbsp;<span class="op" id="2870802">(</span><span class="op" id="2870803">*</span><span class="ident" id="2870804">emptyInterface</span><span class="op" id="2870818">)</span><span class="op" id="2870819">(</span><span class="ident" id="2870820">unsafe</span><span class="op" id="2870826">.</span><span class="ident" id="2870827">Pointer</span><span class="op" id="2870834">(</span><span class="op" id="2870835">&amp;</span><span class="ident" id="2870836">i</span><span class="op" id="2870837">)</span><span class="op" id="2870838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2870841">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870895">switch</span>&nbsp;<span class="op" id="2870902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870905">case</span>&nbsp;<span class="ident" id="2870910">ifaceIndir</span><span class="op" id="2870920">(</span><span class="ident" id="2870921">t</span><span class="op" id="2870922">)</span><span class="op" id="2870923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870927">if</span>&nbsp;<span class="ident" id="2870930">v</span><span class="op" id="2870931">.</span><span class="ident" id="2870932">flag</span><span class="op" id="2870936">&amp;</span><span class="ident" id="2870937">flagIndir</span>&nbsp;<span class="op" id="2870947">==</span>&nbsp;<span class="num" id="2870950">0</span>&nbsp;<span class="op" id="2870952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2870957">panic</span><span class="op" id="2870962">(</span><span class="string" id="2870963">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2870974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870978">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2870982">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871044">ptr</span>&nbsp;<span class="op" id="2871048">:=</span>&nbsp;<span class="ident" id="2871051">v</span><span class="op" id="2871052">.</span><span class="ident" id="2871053">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871059">if</span>&nbsp;<span class="ident" id="2871062">v</span><span class="op" id="2871063">.</span><span class="ident" id="2871064">flag</span><span class="op" id="2871068">&amp;</span><span class="ident" id="2871069">flagAddr</span>&nbsp;<span class="op" id="2871078">!=</span>&nbsp;<span class="num" id="2871081">0</span>&nbsp;<span class="op" id="2871083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871088">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871141">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871184">c</span>&nbsp;<span class="op" id="2871186">:=</span>&nbsp;<span class="ident" id="2871189">unsafe_New</span><span class="op" id="2871199">(</span><span class="ident" id="2871200">t</span><span class="op" id="2871201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871206">memmove</span><span class="op" id="2871213">(</span><span class="ident" id="2871214">c</span><span class="op" id="2871215">,</span>&nbsp;<span class="ident" id="2871217">ptr</span><span class="op" id="2871220">,</span>&nbsp;<span class="ident" id="2871222">t</span><span class="op" id="2871223">.</span><span class="ident" id="2871224">size</span><span class="op" id="2871228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871233">ptr</span>&nbsp;<span class="op" id="2871237">=</span>&nbsp;<span class="ident" id="2871239">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2871243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871247">e</span><span class="op" id="2871248">.</span><span class="ident" id="2871249">word</span>&nbsp;<span class="op" id="2871254">=</span>&nbsp;<span class="ident" id="2871256">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871261">case</span>&nbsp;<span class="ident" id="2871266">v</span><span class="op" id="2871267">.</span><span class="ident" id="2871268">flag</span><span class="op" id="2871272">&amp;</span><span class="ident" id="2871273">flagIndir</span>&nbsp;<span class="op" id="2871283">!=</span>&nbsp;<span class="num" id="2871286">0</span><span class="op" id="2871287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871291">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871349">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871410">e</span><span class="op" id="2871411">.</span><span class="ident" id="2871412">word</span>&nbsp;<span class="op" id="2871417">=</span>&nbsp;<span class="op" id="2871419">*</span><span class="op" id="2871420">(</span><span class="op" id="2871421">*</span><span class="ident" id="2871422">unsafe</span><span class="op" id="2871428">.</span><span class="ident" id="2871429">Pointer</span><span class="op" id="2871436">)</span><span class="op" id="2871437">(</span><span class="ident" id="2871438">v</span><span class="op" id="2871439">.</span><span class="ident" id="2871440">ptr</span><span class="op" id="2871443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871446">default</span><span class="op" id="2871453">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871457">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871504">e</span><span class="op" id="2871505">.</span><span class="ident" id="2871506">word</span>&nbsp;<span class="op" id="2871511">=</span>&nbsp;<span class="ident" id="2871513">v</span><span class="op" id="2871514">.</span><span class="ident" id="2871515">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2871520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871523">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871587">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871654">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871723">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871744">e</span><span class="op" id="2871745">.</span><span class="ident" id="2871746">typ</span>&nbsp;<span class="op" id="2871750">=</span>&nbsp;<span class="ident" id="2871752">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871755">return</span>&nbsp;<span class="ident" id="2871762">i</span><br>
<span class="lineno"></span><span class="op" id="2871764">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2871767">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2871825">func</span>&nbsp;<span class="ident" id="2871830">unpackEface</span><span class="op" id="2871841">(</span><span class="ident" id="2871842">i</span>&nbsp;<span class="keyword" id="2871844">interface</span><span class="op" id="2871853">{</span><span class="op" id="2871854">}</span><span class="op" id="2871855">)</span>&nbsp;<span class="ident" id="2871857">Value</span>&nbsp;<span class="op" id="2871863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871866">e</span>&nbsp;<span class="op" id="2871868">:=</span>&nbsp;<span class="op" id="2871871">(</span><span class="op" id="2871872">*</span><span class="ident" id="2871873">emptyInterface</span><span class="op" id="2871887">)</span><span class="op" id="2871888">(</span><span class="ident" id="2871889">unsafe</span><span class="op" id="2871895">.</span><span class="ident" id="2871896">Pointer</span><span class="op" id="2871903">(</span><span class="op" id="2871904">&amp;</span><span class="ident" id="2871905">i</span><span class="op" id="2871906">)</span><span class="op" id="2871907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871910">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871991">t</span>&nbsp;<span class="op" id="2871993">:=</span>&nbsp;<span class="ident" id="2871996">e</span><span class="op" id="2871997">.</span><span class="ident" id="2871998">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872003">if</span>&nbsp;<span class="ident" id="2872006">t</span>&nbsp;<span class="op" id="2872008">==</span>&nbsp;<span class="builtintype" id="2872011">nil</span>&nbsp;<span class="op" id="2872015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872019">return</span>&nbsp;<span class="ident" id="2872026">Value</span><span class="op" id="2872031">{</span><span class="op" id="2872032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872038">f</span>&nbsp;<span class="op" id="2872040">:=</span>&nbsp;<span class="ident" id="2872043">flag</span><span class="op" id="2872047">(</span><span class="ident" id="2872048">t</span><span class="op" id="2872049">.</span><span class="ident" id="2872050">Kind</span><span class="op" id="2872054">(</span><span class="op" id="2872055">)</span><span class="op" id="2872056">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872059">if</span>&nbsp;<span class="ident" id="2872062">ifaceIndir</span><span class="op" id="2872072">(</span><span class="ident" id="2872073">t</span><span class="op" id="2872074">)</span>&nbsp;<span class="op" id="2872076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872080">f</span>&nbsp;<span class="op" id="2872082">|=</span>&nbsp;<span class="ident" id="2872085">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872099">return</span>&nbsp;<span class="ident" id="2872106">Value</span><span class="op" id="2872111">{</span><span class="ident" id="2872112">t</span><span class="op" id="2872113">,</span>&nbsp;<span class="ident" id="2872115">unsafe</span><span class="op" id="2872121">.</span><span class="ident" id="2872122">Pointer</span><span class="op" id="2872129">(</span><span class="ident" id="2872130">e</span><span class="op" id="2872131">.</span><span class="ident" id="2872132">word</span><span class="op" id="2872136">)</span><span class="op" id="2872137">,</span>&nbsp;<span class="ident" id="2872139">f</span><span class="op" id="2872140">}</span><br>
<span class="lineno"></span><span class="op" id="2872142">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2872145">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2872202">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2872266">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2872304">type</span>&nbsp;<span class="ident" id="2872309">ValueError</span>&nbsp;<span class="keyword" id="2872320">struct</span>&nbsp;<span class="op" id="2872327">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872330">Method</span>&nbsp;<span class="builtintype" id="2872337">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872345">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2872352">Kind</span><br>
<span class="lineno"></span><span class="op" id="2872357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2872360">func</span>&nbsp;<span class="op" id="2872365">(</span><span class="ident" id="2872366">e</span>&nbsp;<span class="op" id="2872368">*</span><span class="ident" id="2872369">ValueError</span><span class="op" id="2872379">)</span>&nbsp;<span class="ident" id="2872381">Error</span><span class="op" id="2872386">(</span><span class="op" id="2872387">)</span>&nbsp;<span class="builtintype" id="2872389">string</span>&nbsp;<span class="op" id="2872396">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872399">if</span>&nbsp;<span class="ident" id="2872402">e</span><span class="op" id="2872403">.</span><span class="ident" id="2872404">Kind</span>&nbsp;<span class="op" id="2872409">==</span>&nbsp;<span class="num" id="2872412">0</span>&nbsp;<span class="op" id="2872414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872418">return</span>&nbsp;<span class="string" id="2872425">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2872445">+</span>&nbsp;<span class="ident" id="2872447">e</span><span class="op" id="2872448">.</span><span class="ident" id="2872449">Method</span>&nbsp;<span class="op" id="2872456">+</span>&nbsp;<span class="string" id="2872458">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872479">return</span>&nbsp;<span class="string" id="2872486">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2872506">+</span>&nbsp;<span class="ident" id="2872508">e</span><span class="op" id="2872509">.</span><span class="ident" id="2872510">Method</span>&nbsp;<span class="op" id="2872517">+</span>&nbsp;<span class="string" id="2872519">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2872526">+</span>&nbsp;<span class="ident" id="2872528">e</span><span class="op" id="2872529">.</span><span class="ident" id="2872530">Kind</span><span class="op" id="2872534">.</span><span class="ident" id="2872535">String</span><span class="op" id="2872541">(</span><span class="op" id="2872542">)</span>&nbsp;<span class="op" id="2872544">+</span>&nbsp;<span class="string" id="2872546">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2872555">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2872558">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2872612">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2872653">func</span>&nbsp;<span class="ident" id="2872658">methodName</span><span class="op" id="2872668">(</span><span class="op" id="2872669">)</span>&nbsp;<span class="builtintype" id="2872671">string</span>&nbsp;<span class="op" id="2872678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872681">pc</span><span class="op" id="2872683">,</span>&nbsp;<span class="ident" id="2872685">_</span><span class="op" id="2872686">,</span>&nbsp;<span class="ident" id="2872688">_</span><span class="op" id="2872689">,</span>&nbsp;<span class="ident" id="2872691">_</span>&nbsp;<span class="op" id="2872693">:=</span>&nbsp;<span class="ident" id="2872696">runtime</span><span class="op" id="2872703">.</span><span class="ident" id="2872704">Caller</span><span class="op" id="2872710">(</span><span class="num" id="2872711">2</span><span class="op" id="2872712">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872715">f</span>&nbsp;<span class="op" id="2872717">:=</span>&nbsp;<span class="ident" id="2872720">runtime</span><span class="op" id="2872727">.</span><span class="ident" id="2872728">FuncForPC</span><span class="op" id="2872737">(</span><span class="ident" id="2872738">pc</span><span class="op" id="2872740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872743">if</span>&nbsp;<span class="ident" id="2872746">f</span>&nbsp;<span class="op" id="2872748">==</span>&nbsp;<span class="builtintype" id="2872751">nil</span>&nbsp;<span class="op" id="2872755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872759">return</span>&nbsp;<span class="string" id="2872766">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872787">return</span>&nbsp;<span class="ident" id="2872794">f</span><span class="op" id="2872795">.</span><span class="ident" id="2872796">Name</span><span class="op" id="2872800">(</span><span class="op" id="2872801">)</span><br>
<span class="lineno">165</span><span class="op" id="2872803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2872806">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2872864">type</span>&nbsp;<span class="ident" id="2872869">emptyInterface</span>&nbsp;<span class="keyword" id="2872884">struct</span>&nbsp;<span class="op" id="2872891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872894">typ</span>&nbsp;&nbsp;<span class="op" id="2872899">*</span><span class="ident" id="2872900">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872907">word</span>&nbsp;<span class="ident" id="2872912">unsafe</span><span class="op" id="2872918">.</span><span class="ident" id="2872919">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2872927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2872930">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2873001">type</span>&nbsp;<span class="ident" id="2873006">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2873024">struct</span>&nbsp;<span class="op" id="2873031">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2873034">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873067">itab</span>&nbsp;<span class="op" id="2873072">*</span><span class="keyword" id="2873073">struct</span>&nbsp;<span class="op" id="2873080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873084">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2873091">*</span><span class="ident" id="2873092">rtype</span>&nbsp;<span class="comment" id="2873098">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873125">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873132">*</span><span class="ident" id="2873133">rtype</span>&nbsp;<span class="comment" id="2873139">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873166">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2873173">unsafe</span><span class="op" id="2873179">.</span><span class="ident" id="2873180">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873190">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2873197">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873205">unused</span>&nbsp;<span class="builtintype" id="2873212">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873220">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873227">[</span><span class="num" id="2873228">100000</span><span class="op" id="2873234">]</span><span class="ident" id="2873235">unsafe</span><span class="op" id="2873241">.</span><span class="ident" id="2873242">Pointer</span>&nbsp;<span class="comment" id="2873250">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873270">word</span>&nbsp;<span class="ident" id="2873275">unsafe</span><span class="op" id="2873281">.</span><span class="ident" id="2873282">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2873290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873293">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2873339">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2873391">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2873448">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2873506">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2873565">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2873608">func</span>&nbsp;<span class="op" id="2873613">(</span><span class="ident" id="2873614">f</span>&nbsp;<span class="ident" id="2873616">flag</span><span class="op" id="2873620">)</span>&nbsp;<span class="ident" id="2873622">mustBe</span><span class="op" id="2873628">(</span><span class="ident" id="2873629">expected</span>&nbsp;<span class="ident" id="2873638">Kind</span><span class="op" id="2873642">)</span>&nbsp;<span class="op" id="2873644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873647">if</span>&nbsp;<span class="ident" id="2873650">f</span><span class="op" id="2873651">.</span><span class="ident" id="2873652">kind</span><span class="op" id="2873656">(</span><span class="op" id="2873657">)</span>&nbsp;<span class="op" id="2873659">!=</span>&nbsp;<span class="ident" id="2873662">expected</span>&nbsp;<span class="op" id="2873671">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2873675">panic</span><span class="op" id="2873680">(</span><span class="op" id="2873681">&amp;</span><span class="ident" id="2873682">ValueError</span><span class="op" id="2873692">{</span><span class="ident" id="2873693">methodName</span><span class="op" id="2873703">(</span><span class="op" id="2873704">)</span><span class="op" id="2873705">,</span>&nbsp;<span class="ident" id="2873707">f</span><span class="op" id="2873708">.</span><span class="ident" id="2873709">kind</span><span class="op" id="2873713">(</span><span class="op" id="2873714">)</span><span class="op" id="2873715">}</span><span class="op" id="2873716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873719">}</span><br>
<span class="lineno"></span><span class="op" id="2873721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873724">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2873796">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2873820">func</span>&nbsp;<span class="op" id="2873825">(</span><span class="ident" id="2873826">f</span>&nbsp;<span class="ident" id="2873828">flag</span><span class="op" id="2873832">)</span>&nbsp;<span class="ident" id="2873834">mustBeExported</span><span class="op" id="2873848">(</span><span class="op" id="2873849">)</span>&nbsp;<span class="op" id="2873851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873854">if</span>&nbsp;<span class="ident" id="2873857">f</span>&nbsp;<span class="op" id="2873859">==</span>&nbsp;<span class="num" id="2873862">0</span>&nbsp;<span class="op" id="2873864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2873868">panic</span><span class="op" id="2873873">(</span><span class="op" id="2873874">&amp;</span><span class="ident" id="2873875">ValueError</span><span class="op" id="2873885">{</span><span class="ident" id="2873886">methodName</span><span class="op" id="2873896">(</span><span class="op" id="2873897">)</span><span class="op" id="2873898">,</span>&nbsp;<span class="num" id="2873900">0</span><span class="op" id="2873901">}</span><span class="op" id="2873902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873905">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873908">if</span>&nbsp;<span class="ident" id="2873911">f</span><span class="op" id="2873912">&amp;</span><span class="ident" id="2873913">flagRO</span>&nbsp;<span class="op" id="2873920">!=</span>&nbsp;<span class="num" id="2873923">0</span>&nbsp;<span class="op" id="2873925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2873929">panic</span><span class="op" id="2873934">(</span><span class="string" id="2873935">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2873947">+</span>&nbsp;<span class="ident" id="2873949">methodName</span><span class="op" id="2873959">(</span><span class="op" id="2873960">)</span>&nbsp;<span class="op" id="2873962">+</span>&nbsp;<span class="string" id="2873964">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2874010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874013">}</span><br>
<span class="lineno"></span><span class="op" id="2874015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2874018">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2874092">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2874165">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2874194">func</span>&nbsp;<span class="op" id="2874199">(</span><span class="ident" id="2874200">f</span>&nbsp;<span class="ident" id="2874202">flag</span><span class="op" id="2874206">)</span>&nbsp;<span class="ident" id="2874208">mustBeAssignable</span><span class="op" id="2874224">(</span><span class="op" id="2874225">)</span>&nbsp;<span class="op" id="2874227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874230">if</span>&nbsp;<span class="ident" id="2874233">f</span>&nbsp;<span class="op" id="2874235">==</span>&nbsp;<span class="num" id="2874238">0</span>&nbsp;<span class="op" id="2874240">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874244">panic</span><span class="op" id="2874249">(</span><span class="op" id="2874250">&amp;</span><span class="ident" id="2874251">ValueError</span><span class="op" id="2874261">{</span><span class="ident" id="2874262">methodName</span><span class="op" id="2874272">(</span><span class="op" id="2874273">)</span><span class="op" id="2874274">,</span>&nbsp;<span class="ident" id="2874276">Invalid</span><span class="op" id="2874283">}</span><span class="op" id="2874284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2874290">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874339">if</span>&nbsp;<span class="ident" id="2874342">f</span><span class="op" id="2874343">&amp;</span><span class="ident" id="2874344">flagRO</span>&nbsp;<span class="op" id="2874351">!=</span>&nbsp;<span class="num" id="2874354">0</span>&nbsp;<span class="op" id="2874356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874360">panic</span><span class="op" id="2874365">(</span><span class="string" id="2874366">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2874378">+</span>&nbsp;<span class="ident" id="2874380">methodName</span><span class="op" id="2874390">(</span><span class="op" id="2874391">)</span>&nbsp;<span class="op" id="2874393">+</span>&nbsp;<span class="string" id="2874395">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2874441">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874447">if</span>&nbsp;<span class="ident" id="2874450">f</span><span class="op" id="2874451">&amp;</span><span class="ident" id="2874452">flagAddr</span>&nbsp;<span class="op" id="2874461">==</span>&nbsp;<span class="num" id="2874464">0</span>&nbsp;<span class="op" id="2874466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874470">panic</span><span class="op" id="2874475">(</span><span class="string" id="2874476">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2874488">+</span>&nbsp;<span class="ident" id="2874490">methodName</span><span class="op" id="2874500">(</span><span class="op" id="2874501">)</span>&nbsp;<span class="op" id="2874503">+</span>&nbsp;<span class="string" id="2874505">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2874533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874536">}</span><br>
<span class="lineno"></span><span class="op" id="2874538">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2874541">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2874604">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2874645">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2874709">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2874771">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2874792">func</span>&nbsp;<span class="op" id="2874797">(</span><span class="ident" id="2874798">v</span>&nbsp;<span class="ident" id="2874800">Value</span><span class="op" id="2874805">)</span>&nbsp;<span class="ident" id="2874807">Addr</span><span class="op" id="2874811">(</span><span class="op" id="2874812">)</span>&nbsp;<span class="ident" id="2874814">Value</span>&nbsp;<span class="op" id="2874820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874823">if</span>&nbsp;<span class="ident" id="2874826">v</span><span class="op" id="2874827">.</span><span class="ident" id="2874828">flag</span><span class="op" id="2874832">&amp;</span><span class="ident" id="2874833">flagAddr</span>&nbsp;<span class="op" id="2874842">==</span>&nbsp;<span class="num" id="2874845">0</span>&nbsp;<span class="op" id="2874847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874851">panic</span><span class="op" id="2874856">(</span><span class="string" id="2874857">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2874900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874903">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874906">return</span>&nbsp;<span class="ident" id="2874913">Value</span><span class="op" id="2874918">{</span><span class="ident" id="2874919">v</span><span class="op" id="2874920">.</span><span class="ident" id="2874921">typ</span><span class="op" id="2874924">.</span><span class="ident" id="2874925">ptrTo</span><span class="op" id="2874930">(</span><span class="op" id="2874931">)</span><span class="op" id="2874932">,</span>&nbsp;<span class="ident" id="2874934">v</span><span class="op" id="2874935">.</span><span class="ident" id="2874936">ptr</span><span class="op" id="2874939">,</span>&nbsp;<span class="op" id="2874941">(</span><span class="ident" id="2874942">v</span><span class="op" id="2874943">.</span><span class="ident" id="2874944">flag</span>&nbsp;<span class="op" id="2874949">&amp;</span>&nbsp;<span class="ident" id="2874951">flagRO</span><span class="op" id="2874957">)</span>&nbsp;<span class="op" id="2874959">|</span>&nbsp;<span class="ident" id="2874961">flag</span><span class="op" id="2874965">(</span><span class="ident" id="2874966">Ptr</span><span class="op" id="2874969">)</span><span class="op" id="2874970">}</span><br>
<span class="lineno"></span><span class="op" id="2874972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2874975">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2875013">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2875051">func</span>&nbsp;<span class="op" id="2875056">(</span><span class="ident" id="2875057">v</span>&nbsp;<span class="ident" id="2875059">Value</span><span class="op" id="2875064">)</span>&nbsp;<span class="ident" id="2875066">Bool</span><span class="op" id="2875070">(</span><span class="op" id="2875071">)</span>&nbsp;<span class="builtintype" id="2875073">bool</span>&nbsp;<span class="op" id="2875078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875081">v</span><span class="op" id="2875082">.</span><span class="ident" id="2875083">mustBe</span><span class="op" id="2875089">(</span><span class="ident" id="2875090">Bool</span><span class="op" id="2875094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875097">return</span>&nbsp;<span class="op" id="2875104">*</span><span class="op" id="2875105">(</span><span class="op" id="2875106">*</span><span class="builtintype" id="2875107">bool</span><span class="op" id="2875111">)</span><span class="op" id="2875112">(</span><span class="ident" id="2875113">v</span><span class="op" id="2875114">.</span><span class="ident" id="2875115">ptr</span><span class="op" id="2875118">)</span><br>
<span class="lineno"></span><span class="op" id="2875120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2875123">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2875162">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2875224">func</span>&nbsp;<span class="op" id="2875229">(</span><span class="ident" id="2875230">v</span>&nbsp;<span class="ident" id="2875232">Value</span><span class="op" id="2875237">)</span>&nbsp;<span class="ident" id="2875239">Bytes</span><span class="op" id="2875244">(</span><span class="op" id="2875245">)</span>&nbsp;<span class="op" id="2875247">[</span><span class="op" id="2875248">]</span><span class="builtintype" id="2875249">byte</span>&nbsp;<span class="op" id="2875254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875257">v</span><span class="op" id="2875258">.</span><span class="ident" id="2875259">mustBe</span><span class="op" id="2875265">(</span><span class="ident" id="2875266">Slice</span><span class="op" id="2875271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875274">if</span>&nbsp;<span class="ident" id="2875277">v</span><span class="op" id="2875278">.</span><span class="ident" id="2875279">typ</span><span class="op" id="2875282">.</span><span class="ident" id="2875283">Elem</span><span class="op" id="2875287">(</span><span class="op" id="2875288">)</span><span class="op" id="2875289">.</span><span class="ident" id="2875290">Kind</span><span class="op" id="2875294">(</span><span class="op" id="2875295">)</span>&nbsp;<span class="op" id="2875297">!=</span>&nbsp;<span class="ident" id="2875300">Uint8</span>&nbsp;<span class="op" id="2875306">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2875310">panic</span><span class="op" id="2875315">(</span><span class="string" id="2875316">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2875355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2875361">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875419">return</span>&nbsp;<span class="op" id="2875426">*</span><span class="op" id="2875427">(</span><span class="op" id="2875428">*</span><span class="op" id="2875429">[</span><span class="op" id="2875430">]</span><span class="builtintype" id="2875431">byte</span><span class="op" id="2875435">)</span><span class="op" id="2875436">(</span><span class="ident" id="2875437">v</span><span class="op" id="2875438">.</span><span class="ident" id="2875439">ptr</span><span class="op" id="2875442">)</span><br>
<span class="lineno"></span><span class="op" id="2875444">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2875447">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2875486">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2875557">func</span>&nbsp;<span class="op" id="2875562">(</span><span class="ident" id="2875563">v</span>&nbsp;<span class="ident" id="2875565">Value</span><span class="op" id="2875570">)</span>&nbsp;<span class="ident" id="2875572">runes</span><span class="op" id="2875577">(</span><span class="op" id="2875578">)</span>&nbsp;<span class="op" id="2875580">[</span><span class="op" id="2875581">]</span><span class="builtintype" id="2875582">rune</span>&nbsp;<span class="op" id="2875587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875590">v</span><span class="op" id="2875591">.</span><span class="ident" id="2875592">mustBe</span><span class="op" id="2875598">(</span><span class="ident" id="2875599">Slice</span><span class="op" id="2875604">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875607">if</span>&nbsp;<span class="ident" id="2875610">v</span><span class="op" id="2875611">.</span><span class="ident" id="2875612">typ</span><span class="op" id="2875615">.</span><span class="ident" id="2875616">Elem</span><span class="op" id="2875620">(</span><span class="op" id="2875621">)</span><span class="op" id="2875622">.</span><span class="ident" id="2875623">Kind</span><span class="op" id="2875627">(</span><span class="op" id="2875628">)</span>&nbsp;<span class="op" id="2875630">!=</span>&nbsp;<span class="ident" id="2875633">Int32</span>&nbsp;<span class="op" id="2875639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2875643">panic</span><span class="op" id="2875648">(</span><span class="string" id="2875649">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2875688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2875694">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875752">return</span>&nbsp;<span class="op" id="2875759">*</span><span class="op" id="2875760">(</span><span class="op" id="2875761">*</span><span class="op" id="2875762">[</span><span class="op" id="2875763">]</span><span class="builtintype" id="2875764">rune</span><span class="op" id="2875768">)</span><span class="op" id="2875769">(</span><span class="ident" id="2875770">v</span><span class="op" id="2875771">.</span><span class="ident" id="2875772">ptr</span><span class="op" id="2875775">)</span><br>
<span class="lineno">265</span><span class="op" id="2875777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2875780">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2875854">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2875926">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2875988">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2876067">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2876121">func</span>&nbsp;<span class="op" id="2876126">(</span><span class="ident" id="2876127">v</span>&nbsp;<span class="ident" id="2876129">Value</span><span class="op" id="2876134">)</span>&nbsp;<span class="ident" id="2876136">CanAddr</span><span class="op" id="2876143">(</span><span class="op" id="2876144">)</span>&nbsp;<span class="builtintype" id="2876146">bool</span>&nbsp;<span class="op" id="2876151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876154">return</span>&nbsp;<span class="ident" id="2876161">v</span><span class="op" id="2876162">.</span><span class="ident" id="2876163">flag</span><span class="op" id="2876167">&amp;</span><span class="ident" id="2876168">flagAddr</span>&nbsp;<span class="op" id="2876177">!=</span>&nbsp;<span class="num" id="2876180">0</span><br>
<span class="lineno"></span><span class="op" id="2876182">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2876185">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2876242">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2876306">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2876358">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2876419">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2876467">func</span>&nbsp;<span class="op" id="2876472">(</span><span class="ident" id="2876473">v</span>&nbsp;<span class="ident" id="2876475">Value</span><span class="op" id="2876480">)</span>&nbsp;<span class="ident" id="2876482">CanSet</span><span class="op" id="2876488">(</span><span class="op" id="2876489">)</span>&nbsp;<span class="builtintype" id="2876491">bool</span>&nbsp;<span class="op" id="2876496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876499">return</span>&nbsp;<span class="ident" id="2876506">v</span><span class="op" id="2876507">.</span><span class="ident" id="2876508">flag</span><span class="op" id="2876512">&amp;</span><span class="op" id="2876513">(</span><span class="ident" id="2876514">flagAddr</span><span class="op" id="2876522">|</span><span class="ident" id="2876523">flagRO</span><span class="op" id="2876529">)</span>&nbsp;<span class="op" id="2876531">==</span>&nbsp;<span class="ident" id="2876534">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2876543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2876546">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2876604">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2876695">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2876735">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2876779">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2876838">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2876895">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2876969">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2877017">func</span>&nbsp;<span class="op" id="2877022">(</span><span class="ident" id="2877023">v</span>&nbsp;<span class="ident" id="2877025">Value</span><span class="op" id="2877030">)</span>&nbsp;<span class="ident" id="2877032">Call</span><span class="op" id="2877036">(</span><span class="ident" id="2877037">in</span>&nbsp;<span class="op" id="2877040">[</span><span class="op" id="2877041">]</span><span class="ident" id="2877042">Value</span><span class="op" id="2877047">)</span>&nbsp;<span class="op" id="2877049">[</span><span class="op" id="2877050">]</span><span class="ident" id="2877051">Value</span>&nbsp;<span class="op" id="2877057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877060">v</span><span class="op" id="2877061">.</span><span class="ident" id="2877062">mustBe</span><span class="op" id="2877068">(</span><span class="ident" id="2877069">Func</span><span class="op" id="2877073">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877076">v</span><span class="op" id="2877077">.</span><span class="ident" id="2877078">mustBeExported</span><span class="op" id="2877092">(</span><span class="op" id="2877093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2877096">return</span>&nbsp;<span class="ident" id="2877103">v</span><span class="op" id="2877104">.</span><span class="ident" id="2877105">call</span><span class="op" id="2877109">(</span><span class="string" id="2877110">&#34;Call&#34;</span><span class="op" id="2877116">,</span>&nbsp;<span class="ident" id="2877118">in</span><span class="op" id="2877120">)</span><br>
<span class="lineno"></span><span class="op" id="2877122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2877125">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2877197">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2877266">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2877360">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2877424">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2877468">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2877527">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2877584">func</span>&nbsp;<span class="op" id="2877589">(</span><span class="ident" id="2877590">v</span>&nbsp;<span class="ident" id="2877592">Value</span><span class="op" id="2877597">)</span>&nbsp;<span class="ident" id="2877599">CallSlice</span><span class="op" id="2877608">(</span><span class="ident" id="2877609">in</span>&nbsp;<span class="op" id="2877612">[</span><span class="op" id="2877613">]</span><span class="ident" id="2877614">Value</span><span class="op" id="2877619">)</span>&nbsp;<span class="op" id="2877621">[</span><span class="op" id="2877622">]</span><span class="ident" id="2877623">Value</span>&nbsp;<span class="op" id="2877629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877632">v</span><span class="op" id="2877633">.</span><span class="ident" id="2877634">mustBe</span><span class="op" id="2877640">(</span><span class="ident" id="2877641">Func</span><span class="op" id="2877645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877648">v</span><span class="op" id="2877649">.</span><span class="ident" id="2877650">mustBeExported</span><span class="op" id="2877664">(</span><span class="op" id="2877665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2877668">return</span>&nbsp;<span class="ident" id="2877675">v</span><span class="op" id="2877676">.</span><span class="ident" id="2877677">call</span><span class="op" id="2877681">(</span><span class="string" id="2877682">&#34;CallSlice&#34;</span><span class="op" id="2877693">,</span>&nbsp;<span class="ident" id="2877695">in</span><span class="op" id="2877697">)</span><br>
<span class="lineno">310</span><span class="op" id="2877699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2877702">var</span>&nbsp;<span class="ident" id="2877706">callGC</span>&nbsp;<span class="builtintype" id="2877713">bool</span>&nbsp;<span class="comment" id="2877718">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2877758">func</span>&nbsp;<span class="op" id="2877763">(</span><span class="ident" id="2877764">v</span>&nbsp;<span class="ident" id="2877766">Value</span><span class="op" id="2877771">)</span>&nbsp;<span class="ident" id="2877773">call</span><span class="op" id="2877777">(</span><span class="ident" id="2877778">op</span>&nbsp;<span class="builtintype" id="2877781">string</span><span class="op" id="2877787">,</span>&nbsp;<span class="ident" id="2877789">in</span>&nbsp;<span class="op" id="2877792">[</span><span class="op" id="2877793">]</span><span class="ident" id="2877794">Value</span><span class="op" id="2877799">)</span>&nbsp;<span class="op" id="2877801">[</span><span class="op" id="2877802">]</span><span class="ident" id="2877803">Value</span>&nbsp;<span class="op" id="2877809">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877812">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877844">t</span>&nbsp;<span class="op" id="2877846">:=</span>&nbsp;<span class="ident" id="2877849">v</span><span class="op" id="2877850">.</span><span class="ident" id="2877851">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2877856">var</span>&nbsp;<span class="op" id="2877860">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877864">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877873">unsafe</span><span class="op" id="2877879">.</span><span class="ident" id="2877880">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877890">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877899">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877907">rcvrtype</span>&nbsp;<span class="op" id="2877916">*</span><span class="ident" id="2877917">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2877924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2877927">if</span>&nbsp;<span class="ident" id="2877930">v</span><span class="op" id="2877931">.</span><span class="ident" id="2877932">flag</span><span class="op" id="2877936">&amp;</span><span class="ident" id="2877937">flagMethod</span>&nbsp;<span class="op" id="2877948">!=</span>&nbsp;<span class="num" id="2877951">0</span>&nbsp;<span class="op" id="2877953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877957">rcvr</span>&nbsp;<span class="op" id="2877962">=</span>&nbsp;<span class="ident" id="2877964">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877968">rcvrtype</span><span class="op" id="2877976">,</span>&nbsp;<span class="ident" id="2877978">t</span><span class="op" id="2877979">,</span>&nbsp;<span class="ident" id="2877981">fn</span>&nbsp;<span class="op" id="2877984">=</span>&nbsp;<span class="ident" id="2877986">methodReceiver</span><span class="op" id="2878000">(</span><span class="ident" id="2878001">op</span><span class="op" id="2878003">,</span>&nbsp;<span class="ident" id="2878005">v</span><span class="op" id="2878006">,</span>&nbsp;<span class="builtintype" id="2878008">int</span><span class="op" id="2878011">(</span><span class="ident" id="2878012">v</span><span class="op" id="2878013">.</span><span class="ident" id="2878014">flag</span><span class="op" id="2878018">)</span><span class="op" id="2878019">&gt;&gt;</span><span class="ident" id="2878021">flagMethodShift</span><span class="op" id="2878036">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878039">}</span>&nbsp;<span class="keyword" id="2878041">else</span>&nbsp;<span class="keyword" id="2878046">if</span>&nbsp;<span class="ident" id="2878049">v</span><span class="op" id="2878050">.</span><span class="ident" id="2878051">flag</span><span class="op" id="2878055">&amp;</span><span class="ident" id="2878056">flagIndir</span>&nbsp;<span class="op" id="2878066">!=</span>&nbsp;<span class="num" id="2878069">0</span>&nbsp;<span class="op" id="2878071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878075">fn</span>&nbsp;<span class="op" id="2878078">=</span>&nbsp;<span class="op" id="2878080">*</span><span class="op" id="2878081">(</span><span class="op" id="2878082">*</span><span class="ident" id="2878083">unsafe</span><span class="op" id="2878089">.</span><span class="ident" id="2878090">Pointer</span><span class="op" id="2878097">)</span><span class="op" id="2878098">(</span><span class="ident" id="2878099">v</span><span class="op" id="2878100">.</span><span class="ident" id="2878101">ptr</span><span class="op" id="2878104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878107">}</span>&nbsp;<span class="keyword" id="2878109">else</span>&nbsp;<span class="op" id="2878114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878118">fn</span>&nbsp;<span class="op" id="2878121">=</span>&nbsp;<span class="ident" id="2878123">v</span><span class="op" id="2878124">.</span><span class="ident" id="2878125">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878130">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878134">if</span>&nbsp;<span class="ident" id="2878137">fn</span>&nbsp;<span class="op" id="2878140">==</span>&nbsp;<span class="builtintype" id="2878143">nil</span>&nbsp;<span class="op" id="2878147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878151">panic</span><span class="op" id="2878156">(</span><span class="string" id="2878157">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2878199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878206">isSlice</span>&nbsp;<span class="op" id="2878214">:=</span>&nbsp;<span class="ident" id="2878217">op</span>&nbsp;<span class="op" id="2878220">==</span>&nbsp;<span class="string" id="2878223">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878236">n</span>&nbsp;<span class="op" id="2878238">:=</span>&nbsp;<span class="ident" id="2878241">t</span><span class="op" id="2878242">.</span><span class="ident" id="2878243">NumIn</span><span class="op" id="2878248">(</span><span class="op" id="2878249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878252">if</span>&nbsp;<span class="ident" id="2878255">isSlice</span>&nbsp;<span class="op" id="2878263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878267">if</span>&nbsp;<span class="op" id="2878270">!</span><span class="ident" id="2878271">t</span><span class="op" id="2878272">.</span><span class="ident" id="2878273">IsVariadic</span><span class="op" id="2878283">(</span><span class="op" id="2878284">)</span>&nbsp;<span class="op" id="2878286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878291">panic</span><span class="op" id="2878296">(</span><span class="string" id="2878297">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2878342">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878350">if</span>&nbsp;<span class="builtinfunc" id="2878353">len</span><span class="op" id="2878356">(</span><span class="ident" id="2878357">in</span><span class="op" id="2878359">)</span>&nbsp;<span class="op" id="2878361">&lt;</span>&nbsp;<span class="ident" id="2878363">n</span>&nbsp;<span class="op" id="2878365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878370">panic</span><span class="op" id="2878375">(</span><span class="string" id="2878376">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2878425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878433">if</span>&nbsp;<span class="builtinfunc" id="2878436">len</span><span class="op" id="2878439">(</span><span class="ident" id="2878440">in</span><span class="op" id="2878442">)</span>&nbsp;<span class="op" id="2878444">&gt;</span>&nbsp;<span class="ident" id="2878446">n</span>&nbsp;<span class="op" id="2878448">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878453">panic</span><span class="op" id="2878458">(</span><span class="string" id="2878459">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2878509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878516">}</span>&nbsp;<span class="keyword" id="2878518">else</span>&nbsp;<span class="op" id="2878523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878527">if</span>&nbsp;<span class="ident" id="2878530">t</span><span class="op" id="2878531">.</span><span class="ident" id="2878532">IsVariadic</span><span class="op" id="2878542">(</span><span class="op" id="2878543">)</span>&nbsp;<span class="op" id="2878545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878550">n</span><span class="op" id="2878551">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878560">if</span>&nbsp;<span class="builtinfunc" id="2878563">len</span><span class="op" id="2878566">(</span><span class="ident" id="2878567">in</span><span class="op" id="2878569">)</span>&nbsp;<span class="op" id="2878571">&lt;</span>&nbsp;<span class="ident" id="2878573">n</span>&nbsp;<span class="op" id="2878575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878580">panic</span><span class="op" id="2878585">(</span><span class="string" id="2878586">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2878630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878638">if</span>&nbsp;<span class="op" id="2878641">!</span><span class="ident" id="2878642">t</span><span class="op" id="2878643">.</span><span class="ident" id="2878644">IsVariadic</span><span class="op" id="2878654">(</span><span class="op" id="2878655">)</span>&nbsp;<span class="op" id="2878657">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2878660">len</span><span class="op" id="2878663">(</span><span class="ident" id="2878664">in</span><span class="op" id="2878666">)</span>&nbsp;<span class="op" id="2878668">&gt;</span>&nbsp;<span class="ident" id="2878670">n</span>&nbsp;<span class="op" id="2878672">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878677">panic</span><span class="op" id="2878682">(</span><span class="string" id="2878683">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2878728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878738">for</span>&nbsp;<span class="ident" id="2878742">_</span><span class="op" id="2878743">,</span>&nbsp;<span class="ident" id="2878745">x</span>&nbsp;<span class="op" id="2878747">:=</span>&nbsp;<span class="keyword" id="2878750">range</span>&nbsp;<span class="ident" id="2878756">in</span>&nbsp;<span class="op" id="2878759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878763">if</span>&nbsp;<span class="ident" id="2878766">x</span><span class="op" id="2878767">.</span><span class="ident" id="2878768">Kind</span><span class="op" id="2878772">(</span><span class="op" id="2878773">)</span>&nbsp;<span class="op" id="2878775">==</span>&nbsp;<span class="ident" id="2878778">Invalid</span>&nbsp;<span class="op" id="2878786">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878791">panic</span><span class="op" id="2878796">(</span><span class="string" id="2878797">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2878809">+</span>&nbsp;<span class="ident" id="2878811">op</span>&nbsp;<span class="op" id="2878814">+</span>&nbsp;<span class="string" id="2878816">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2878844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2878851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878854">for</span>&nbsp;<span class="ident" id="2878858">i</span>&nbsp;<span class="op" id="2878860">:=</span>&nbsp;<span class="num" id="2878863">0</span><span class="op" id="2878864">;</span>&nbsp;<span class="ident" id="2878866">i</span>&nbsp;<span class="op" id="2878868">&lt;</span>&nbsp;<span class="ident" id="2878870">n</span><span class="op" id="2878871">;</span>&nbsp;<span class="ident" id="2878873">i</span><span class="op" id="2878874">++</span>&nbsp;<span class="op" id="2878877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2878881">if</span>&nbsp;<span class="ident" id="2878884">xt</span><span class="op" id="2878886">,</span>&nbsp;<span class="ident" id="2878888">targ</span>&nbsp;<span class="op" id="2878893">:=</span>&nbsp;<span class="ident" id="2878896">in</span><span class="op" id="2878898">[</span><span class="ident" id="2878899">i</span><span class="op" id="2878900">]</span><span class="op" id="2878901">.</span><span class="ident" id="2878902">Type</span><span class="op" id="2878906">(</span><span class="op" id="2878907">)</span><span class="op" id="2878908">,</span>&nbsp;<span class="ident" id="2878910">t</span><span class="op" id="2878911">.</span><span class="ident" id="2878912">In</span><span class="op" id="2878914">(</span><span class="ident" id="2878915">i</span><span class="op" id="2878916">)</span><span class="op" id="2878917">;</span>&nbsp;<span class="op" id="2878919">!</span><span class="ident" id="2878920">xt</span><span class="op" id="2878922">.</span><span class="ident" id="2878923">AssignableTo</span><span class="op" id="2878935">(</span><span class="ident" id="2878936">targ</span><span class="op" id="2878940">)</span>&nbsp;<span class="op" id="2878942">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2878947">panic</span><span class="op" id="2878952">(</span><span class="string" id="2878953">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2878965">+</span>&nbsp;<span class="ident" id="2878967">op</span>&nbsp;<span class="op" id="2878970">+</span>&nbsp;<span class="string" id="2878972">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2878982">+</span>&nbsp;<span class="ident" id="2878984">xt</span><span class="op" id="2878986">.</span><span class="ident" id="2878987">String</span><span class="op" id="2878993">(</span><span class="op" id="2878994">)</span>&nbsp;<span class="op" id="2878996">+</span>&nbsp;<span class="string" id="2878998">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2879010">+</span>&nbsp;<span class="ident" id="2879012">targ</span><span class="op" id="2879016">.</span><span class="ident" id="2879017">String</span><span class="op" id="2879023">(</span><span class="op" id="2879024">)</span><span class="op" id="2879025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879035">if</span>&nbsp;<span class="op" id="2879038">!</span><span class="ident" id="2879039">isSlice</span>&nbsp;<span class="op" id="2879047">&amp;&amp;</span>&nbsp;<span class="ident" id="2879050">t</span><span class="op" id="2879051">.</span><span class="ident" id="2879052">IsVariadic</span><span class="op" id="2879062">(</span><span class="op" id="2879063">)</span>&nbsp;<span class="op" id="2879065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879069">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879109">m</span>&nbsp;<span class="op" id="2879111">:=</span>&nbsp;<span class="builtinfunc" id="2879114">len</span><span class="op" id="2879117">(</span><span class="ident" id="2879118">in</span><span class="op" id="2879120">)</span>&nbsp;<span class="op" id="2879122">-</span>&nbsp;<span class="ident" id="2879124">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879128">slice</span>&nbsp;<span class="op" id="2879134">:=</span>&nbsp;<span class="ident" id="2879137">MakeSlice</span><span class="op" id="2879146">(</span><span class="ident" id="2879147">t</span><span class="op" id="2879148">.</span><span class="ident" id="2879149">In</span><span class="op" id="2879151">(</span><span class="ident" id="2879152">n</span><span class="op" id="2879153">)</span><span class="op" id="2879154">,</span>&nbsp;<span class="ident" id="2879156">m</span><span class="op" id="2879157">,</span>&nbsp;<span class="ident" id="2879159">m</span><span class="op" id="2879160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879164">elem</span>&nbsp;<span class="op" id="2879169">:=</span>&nbsp;<span class="ident" id="2879172">t</span><span class="op" id="2879173">.</span><span class="ident" id="2879174">In</span><span class="op" id="2879176">(</span><span class="ident" id="2879177">n</span><span class="op" id="2879178">)</span><span class="op" id="2879179">.</span><span class="ident" id="2879180">Elem</span><span class="op" id="2879184">(</span><span class="op" id="2879185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879189">for</span>&nbsp;<span class="ident" id="2879193">i</span>&nbsp;<span class="op" id="2879195">:=</span>&nbsp;<span class="num" id="2879198">0</span><span class="op" id="2879199">;</span>&nbsp;<span class="ident" id="2879201">i</span>&nbsp;<span class="op" id="2879203">&lt;</span>&nbsp;<span class="ident" id="2879205">m</span><span class="op" id="2879206">;</span>&nbsp;<span class="ident" id="2879208">i</span><span class="op" id="2879209">++</span>&nbsp;<span class="op" id="2879212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879217">x</span>&nbsp;<span class="op" id="2879219">:=</span>&nbsp;<span class="ident" id="2879222">in</span><span class="op" id="2879224">[</span><span class="ident" id="2879225">n</span><span class="op" id="2879226">+</span><span class="ident" id="2879227">i</span><span class="op" id="2879228">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879233">if</span>&nbsp;<span class="ident" id="2879236">xt</span>&nbsp;<span class="op" id="2879239">:=</span>&nbsp;<span class="ident" id="2879242">x</span><span class="op" id="2879243">.</span><span class="ident" id="2879244">Type</span><span class="op" id="2879248">(</span><span class="op" id="2879249">)</span><span class="op" id="2879250">;</span>&nbsp;<span class="op" id="2879252">!</span><span class="ident" id="2879253">xt</span><span class="op" id="2879255">.</span><span class="ident" id="2879256">AssignableTo</span><span class="op" id="2879268">(</span><span class="ident" id="2879269">elem</span><span class="op" id="2879273">)</span>&nbsp;<span class="op" id="2879275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2879281">panic</span><span class="op" id="2879286">(</span><span class="string" id="2879287">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2879310">+</span>&nbsp;<span class="ident" id="2879312">xt</span><span class="op" id="2879314">.</span><span class="ident" id="2879315">String</span><span class="op" id="2879321">(</span><span class="op" id="2879322">)</span>&nbsp;<span class="op" id="2879324">+</span>&nbsp;<span class="string" id="2879326">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2879338">+</span>&nbsp;<span class="ident" id="2879340">elem</span><span class="op" id="2879344">.</span><span class="ident" id="2879345">String</span><span class="op" id="2879351">(</span><span class="op" id="2879352">)</span>&nbsp;<span class="op" id="2879354">+</span>&nbsp;<span class="string" id="2879356">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2879363">+</span>&nbsp;<span class="ident" id="2879365">op</span><span class="op" id="2879367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879377">slice</span><span class="op" id="2879382">.</span><span class="ident" id="2879383">Index</span><span class="op" id="2879388">(</span><span class="ident" id="2879389">i</span><span class="op" id="2879390">)</span><span class="op" id="2879391">.</span><span class="ident" id="2879392">Set</span><span class="op" id="2879395">(</span><span class="ident" id="2879396">x</span><span class="op" id="2879397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879401">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879405">origIn</span>&nbsp;<span class="op" id="2879412">:=</span>&nbsp;<span class="ident" id="2879415">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879420">in</span>&nbsp;<span class="op" id="2879423">=</span>&nbsp;<span class="builtinfunc" id="2879425">make</span><span class="op" id="2879429">(</span><span class="op" id="2879430">[</span><span class="op" id="2879431">]</span><span class="ident" id="2879432">Value</span><span class="op" id="2879437">,</span>&nbsp;<span class="ident" id="2879439">n</span><span class="op" id="2879440">+</span><span class="num" id="2879441">1</span><span class="op" id="2879442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2879446">copy</span><span class="op" id="2879450">(</span><span class="ident" id="2879451">in</span><span class="op" id="2879453">[</span><span class="op" id="2879454">:</span><span class="ident" id="2879455">n</span><span class="op" id="2879456">]</span><span class="op" id="2879457">,</span>&nbsp;<span class="ident" id="2879459">origIn</span><span class="op" id="2879465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879469">in</span><span class="op" id="2879471">[</span><span class="ident" id="2879472">n</span><span class="op" id="2879473">]</span>&nbsp;<span class="op" id="2879475">=</span>&nbsp;<span class="ident" id="2879477">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879484">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879488">nin</span>&nbsp;<span class="op" id="2879492">:=</span>&nbsp;<span class="builtinfunc" id="2879495">len</span><span class="op" id="2879498">(</span><span class="ident" id="2879499">in</span><span class="op" id="2879501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879504">if</span>&nbsp;<span class="ident" id="2879507">nin</span>&nbsp;<span class="op" id="2879511">!=</span>&nbsp;<span class="ident" id="2879514">t</span><span class="op" id="2879515">.</span><span class="ident" id="2879516">NumIn</span><span class="op" id="2879521">(</span><span class="op" id="2879522">)</span>&nbsp;<span class="op" id="2879524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2879528">panic</span><span class="op" id="2879533">(</span><span class="string" id="2879534">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2879576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879579">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879582">nout</span>&nbsp;<span class="op" id="2879587">:=</span>&nbsp;<span class="ident" id="2879590">t</span><span class="op" id="2879591">.</span><span class="ident" id="2879592">NumOut</span><span class="op" id="2879598">(</span><span class="op" id="2879599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879603">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879664">frametype</span><span class="op" id="2879673">,</span>&nbsp;<span class="ident" id="2879675">_</span><span class="op" id="2879676">,</span>&nbsp;<span class="ident" id="2879678">retOffset</span><span class="op" id="2879687">,</span>&nbsp;<span class="ident" id="2879689">_</span>&nbsp;<span class="op" id="2879691">:=</span>&nbsp;<span class="ident" id="2879694">funcLayout</span><span class="op" id="2879704">(</span><span class="ident" id="2879705">t</span><span class="op" id="2879706">,</span>&nbsp;<span class="ident" id="2879708">rcvrtype</span><span class="op" id="2879716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879719">args</span>&nbsp;<span class="op" id="2879724">:=</span>&nbsp;<span class="ident" id="2879727">unsafe_New</span><span class="op" id="2879737">(</span><span class="ident" id="2879738">frametype</span><span class="op" id="2879747">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879750">off</span>&nbsp;<span class="op" id="2879754">:=</span>&nbsp;<span class="builtintype" id="2879757">uintptr</span><span class="op" id="2879764">(</span><span class="num" id="2879765">0</span><span class="op" id="2879766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879770">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879797">if</span>&nbsp;<span class="ident" id="2879800">rcvrtype</span>&nbsp;<span class="op" id="2879809">!=</span>&nbsp;<span class="builtintype" id="2879812">nil</span>&nbsp;<span class="op" id="2879816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879820">storeRcvr</span><span class="op" id="2879829">(</span><span class="ident" id="2879830">rcvr</span><span class="op" id="2879834">,</span>&nbsp;<span class="ident" id="2879836">args</span><span class="op" id="2879840">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879844">off</span>&nbsp;<span class="op" id="2879848">=</span>&nbsp;<span class="ident" id="2879850">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879862">for</span>&nbsp;<span class="ident" id="2879866">i</span><span class="op" id="2879867">,</span>&nbsp;<span class="ident" id="2879869">v</span>&nbsp;<span class="op" id="2879871">:=</span>&nbsp;<span class="keyword" id="2879874">range</span>&nbsp;<span class="ident" id="2879880">in</span>&nbsp;<span class="op" id="2879883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879887">v</span><span class="op" id="2879888">.</span><span class="ident" id="2879889">mustBeExported</span><span class="op" id="2879903">(</span><span class="op" id="2879904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879908">targ</span>&nbsp;<span class="op" id="2879913">:=</span>&nbsp;<span class="ident" id="2879916">t</span><span class="op" id="2879917">.</span><span class="ident" id="2879918">In</span><span class="op" id="2879920">(</span><span class="ident" id="2879921">i</span><span class="op" id="2879922">)</span><span class="op" id="2879923">.</span><span class="op" id="2879924">(</span><span class="op" id="2879925">*</span><span class="ident" id="2879926">rtype</span><span class="op" id="2879931">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879935">a</span>&nbsp;<span class="op" id="2879937">:=</span>&nbsp;<span class="builtintype" id="2879940">uintptr</span><span class="op" id="2879947">(</span><span class="ident" id="2879948">targ</span><span class="op" id="2879952">.</span><span class="ident" id="2879953">align</span><span class="op" id="2879958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879962">off</span>&nbsp;<span class="op" id="2879966">=</span>&nbsp;<span class="op" id="2879968">(</span><span class="ident" id="2879969">off</span>&nbsp;<span class="op" id="2879973">+</span>&nbsp;<span class="ident" id="2879975">a</span>&nbsp;<span class="op" id="2879977">-</span>&nbsp;<span class="num" id="2879979">1</span><span class="op" id="2879980">)</span>&nbsp;<span class="op" id="2879982">&amp;^</span>&nbsp;<span class="op" id="2879985">(</span><span class="ident" id="2879986">a</span>&nbsp;<span class="op" id="2879988">-</span>&nbsp;<span class="num" id="2879990">1</span><span class="op" id="2879991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879995">n</span>&nbsp;<span class="op" id="2879997">:=</span>&nbsp;<span class="ident" id="2880000">targ</span><span class="op" id="2880004">.</span><span class="ident" id="2880005">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880012">addr</span>&nbsp;<span class="op" id="2880017">:=</span>&nbsp;<span class="ident" id="2880020">unsafe</span><span class="op" id="2880026">.</span><span class="ident" id="2880027">Pointer</span><span class="op" id="2880034">(</span><span class="builtintype" id="2880035">uintptr</span><span class="op" id="2880042">(</span><span class="ident" id="2880043">args</span><span class="op" id="2880047">)</span>&nbsp;<span class="op" id="2880049">+</span>&nbsp;<span class="ident" id="2880051">off</span><span class="op" id="2880054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880058">v</span>&nbsp;<span class="op" id="2880060">=</span>&nbsp;<span class="ident" id="2880062">v</span><span class="op" id="2880063">.</span><span class="ident" id="2880064">assignTo</span><span class="op" id="2880072">(</span><span class="string" id="2880073">&#34;reflect.Value.Call&#34;</span><span class="op" id="2880093">,</span>&nbsp;<span class="ident" id="2880095">targ</span><span class="op" id="2880099">,</span>&nbsp;<span class="ident" id="2880101">addr</span><span class="op" id="2880105">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880109">if</span>&nbsp;<span class="ident" id="2880112">v</span><span class="op" id="2880113">.</span><span class="ident" id="2880114">flag</span><span class="op" id="2880118">&amp;</span><span class="ident" id="2880119">flagIndir</span>&nbsp;<span class="op" id="2880129">!=</span>&nbsp;<span class="num" id="2880132">0</span>&nbsp;<span class="op" id="2880134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880139">memmove</span><span class="op" id="2880146">(</span><span class="ident" id="2880147">addr</span><span class="op" id="2880151">,</span>&nbsp;<span class="ident" id="2880153">v</span><span class="op" id="2880154">.</span><span class="ident" id="2880155">ptr</span><span class="op" id="2880158">,</span>&nbsp;<span class="ident" id="2880160">n</span><span class="op" id="2880161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880165">}</span>&nbsp;<span class="keyword" id="2880167">else</span>&nbsp;<span class="op" id="2880172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880177">*</span><span class="op" id="2880178">(</span><span class="op" id="2880179">*</span><span class="ident" id="2880180">unsafe</span><span class="op" id="2880186">.</span><span class="ident" id="2880187">Pointer</span><span class="op" id="2880194">)</span><span class="op" id="2880195">(</span><span class="ident" id="2880196">addr</span><span class="op" id="2880200">)</span>&nbsp;<span class="op" id="2880202">=</span>&nbsp;<span class="ident" id="2880204">v</span><span class="op" id="2880205">.</span><span class="ident" id="2880206">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880212">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880216">off</span>&nbsp;<span class="op" id="2880220">+=</span>&nbsp;<span class="ident" id="2880223">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2880230">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880240">call</span><span class="op" id="2880244">(</span><span class="ident" id="2880245">fn</span><span class="op" id="2880247">,</span>&nbsp;<span class="ident" id="2880249">args</span><span class="op" id="2880253">,</span>&nbsp;<span class="builtintype" id="2880255">uint32</span><span class="op" id="2880261">(</span><span class="ident" id="2880262">frametype</span><span class="op" id="2880271">.</span><span class="ident" id="2880272">size</span><span class="op" id="2880276">)</span><span class="op" id="2880277">,</span>&nbsp;<span class="builtintype" id="2880279">uint32</span><span class="op" id="2880285">(</span><span class="ident" id="2880286">retOffset</span><span class="op" id="2880295">)</span><span class="op" id="2880296">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2880300">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880341">if</span>&nbsp;<span class="ident" id="2880344">callGC</span>&nbsp;<span class="op" id="2880351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880355">runtime</span><span class="op" id="2880362">.</span><span class="ident" id="2880363">GC</span><span class="op" id="2880365">(</span><span class="op" id="2880366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880369">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2880373">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880409">ret</span>&nbsp;<span class="op" id="2880413">:=</span>&nbsp;<span class="builtinfunc" id="2880416">make</span><span class="op" id="2880420">(</span><span class="op" id="2880421">[</span><span class="op" id="2880422">]</span><span class="ident" id="2880423">Value</span><span class="op" id="2880428">,</span>&nbsp;<span class="ident" id="2880430">nout</span><span class="op" id="2880434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880437">off</span>&nbsp;<span class="op" id="2880441">=</span>&nbsp;<span class="ident" id="2880443">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880454">for</span>&nbsp;<span class="ident" id="2880458">i</span>&nbsp;<span class="op" id="2880460">:=</span>&nbsp;<span class="num" id="2880463">0</span><span class="op" id="2880464">;</span>&nbsp;<span class="ident" id="2880466">i</span>&nbsp;<span class="op" id="2880468">&lt;</span>&nbsp;<span class="ident" id="2880470">nout</span><span class="op" id="2880474">;</span>&nbsp;<span class="ident" id="2880476">i</span><span class="op" id="2880477">++</span>&nbsp;<span class="op" id="2880480">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880484">tv</span>&nbsp;<span class="op" id="2880487">:=</span>&nbsp;<span class="ident" id="2880490">t</span><span class="op" id="2880491">.</span><span class="ident" id="2880492">Out</span><span class="op" id="2880495">(</span><span class="ident" id="2880496">i</span><span class="op" id="2880497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880501">a</span>&nbsp;<span class="op" id="2880503">:=</span>&nbsp;<span class="builtintype" id="2880506">uintptr</span><span class="op" id="2880513">(</span><span class="ident" id="2880514">tv</span><span class="op" id="2880516">.</span><span class="ident" id="2880517">Align</span><span class="op" id="2880522">(</span><span class="op" id="2880523">)</span><span class="op" id="2880524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880528">off</span>&nbsp;<span class="op" id="2880532">=</span>&nbsp;<span class="op" id="2880534">(</span><span class="ident" id="2880535">off</span>&nbsp;<span class="op" id="2880539">+</span>&nbsp;<span class="ident" id="2880541">a</span>&nbsp;<span class="op" id="2880543">-</span>&nbsp;<span class="num" id="2880545">1</span><span class="op" id="2880546">)</span>&nbsp;<span class="op" id="2880548">&amp;^</span>&nbsp;<span class="op" id="2880551">(</span><span class="ident" id="2880552">a</span>&nbsp;<span class="op" id="2880554">-</span>&nbsp;<span class="num" id="2880556">1</span><span class="op" id="2880557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880561">fl</span>&nbsp;<span class="op" id="2880564">:=</span>&nbsp;<span class="ident" id="2880567">flagIndir</span>&nbsp;<span class="op" id="2880577">|</span>&nbsp;<span class="ident" id="2880579">flag</span><span class="op" id="2880583">(</span><span class="ident" id="2880584">tv</span><span class="op" id="2880586">.</span><span class="ident" id="2880587">Kind</span><span class="op" id="2880591">(</span><span class="op" id="2880592">)</span><span class="op" id="2880593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880597">ret</span><span class="op" id="2880600">[</span><span class="ident" id="2880601">i</span><span class="op" id="2880602">]</span>&nbsp;<span class="op" id="2880604">=</span>&nbsp;<span class="ident" id="2880606">Value</span><span class="op" id="2880611">{</span><span class="ident" id="2880612">tv</span><span class="op" id="2880614">.</span><span class="ident" id="2880615">common</span><span class="op" id="2880621">(</span><span class="op" id="2880622">)</span><span class="op" id="2880623">,</span>&nbsp;<span class="ident" id="2880625">unsafe</span><span class="op" id="2880631">.</span><span class="ident" id="2880632">Pointer</span><span class="op" id="2880639">(</span><span class="builtintype" id="2880640">uintptr</span><span class="op" id="2880647">(</span><span class="ident" id="2880648">args</span><span class="op" id="2880652">)</span>&nbsp;<span class="op" id="2880654">+</span>&nbsp;<span class="ident" id="2880656">off</span><span class="op" id="2880659">)</span><span class="op" id="2880660">,</span>&nbsp;<span class="ident" id="2880662">fl</span><span class="op" id="2880664">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880668">off</span>&nbsp;<span class="op" id="2880672">+=</span>&nbsp;<span class="ident" id="2880675">tv</span><span class="op" id="2880677">.</span><span class="ident" id="2880678">Size</span><span class="op" id="2880682">(</span><span class="op" id="2880683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880690">return</span>&nbsp;<span class="ident" id="2880697">ret</span><br>
<span class="lineno"></span><span class="op" id="2880701">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2880704">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2880765">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2880829">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2880903">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2880970">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2881040">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2881075">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2881146">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2881213">//</span><br>
<span class="lineno">450</span><span class="comment" id="2881216">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2881292">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2881364">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2881436">func</span>&nbsp;<span class="ident" id="2881441">callReflect</span><span class="op" id="2881452">(</span><span class="ident" id="2881453">ctxt</span>&nbsp;<span class="op" id="2881458">*</span><span class="ident" id="2881459">makeFuncImpl</span><span class="op" id="2881471">,</span>&nbsp;<span class="ident" id="2881473">frame</span>&nbsp;<span class="ident" id="2881479">unsafe</span><span class="op" id="2881485">.</span><span class="ident" id="2881486">Pointer</span><span class="op" id="2881493">)</span>&nbsp;<span class="op" id="2881495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881498">ftyp</span>&nbsp;<span class="op" id="2881503">:=</span>&nbsp;<span class="ident" id="2881506">ctxt</span><span class="op" id="2881510">.</span><span class="ident" id="2881511">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881516">f</span>&nbsp;<span class="op" id="2881518">:=</span>&nbsp;<span class="ident" id="2881521">ctxt</span><span class="op" id="2881525">.</span><span class="ident" id="2881526">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2881531">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881568">ptr</span>&nbsp;<span class="op" id="2881572">:=</span>&nbsp;<span class="ident" id="2881575">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881582">off</span>&nbsp;<span class="op" id="2881586">:=</span>&nbsp;<span class="builtintype" id="2881589">uintptr</span><span class="op" id="2881596">(</span><span class="num" id="2881597">0</span><span class="op" id="2881598">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881601">in</span>&nbsp;<span class="op" id="2881604">:=</span>&nbsp;<span class="builtinfunc" id="2881607">make</span><span class="op" id="2881611">(</span><span class="op" id="2881612">[</span><span class="op" id="2881613">]</span><span class="ident" id="2881614">Value</span><span class="op" id="2881619">,</span>&nbsp;<span class="num" id="2881621">0</span><span class="op" id="2881622">,</span>&nbsp;<span class="builtinfunc" id="2881624">len</span><span class="op" id="2881627">(</span><span class="ident" id="2881628">ftyp</span><span class="op" id="2881632">.</span><span class="ident" id="2881633">in</span><span class="op" id="2881635">)</span><span class="op" id="2881636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881639">for</span>&nbsp;<span class="ident" id="2881643">_</span><span class="op" id="2881644">,</span>&nbsp;<span class="ident" id="2881646">arg</span>&nbsp;<span class="op" id="2881650">:=</span>&nbsp;<span class="keyword" id="2881653">range</span>&nbsp;<span class="ident" id="2881659">ftyp</span><span class="op" id="2881663">.</span><span class="ident" id="2881664">in</span>&nbsp;<span class="op" id="2881667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881671">typ</span>&nbsp;<span class="op" id="2881675">:=</span>&nbsp;<span class="ident" id="2881678">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881684">off</span>&nbsp;<span class="op" id="2881688">+=</span>&nbsp;<span class="op" id="2881691">-</span><span class="ident" id="2881692">off</span>&nbsp;<span class="op" id="2881696">&amp;</span>&nbsp;<span class="builtintype" id="2881698">uintptr</span><span class="op" id="2881705">(</span><span class="ident" id="2881706">typ</span><span class="op" id="2881709">.</span><span class="ident" id="2881710">align</span><span class="op" id="2881715">-</span><span class="num" id="2881716">1</span><span class="op" id="2881717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881721">addr</span>&nbsp;<span class="op" id="2881726">:=</span>&nbsp;<span class="ident" id="2881729">unsafe</span><span class="op" id="2881735">.</span><span class="ident" id="2881736">Pointer</span><span class="op" id="2881743">(</span><span class="builtintype" id="2881744">uintptr</span><span class="op" id="2881751">(</span><span class="ident" id="2881752">ptr</span><span class="op" id="2881755">)</span>&nbsp;<span class="op" id="2881757">+</span>&nbsp;<span class="ident" id="2881759">off</span><span class="op" id="2881762">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881766">v</span>&nbsp;<span class="op" id="2881768">:=</span>&nbsp;<span class="ident" id="2881771">Value</span><span class="op" id="2881776">{</span><span class="ident" id="2881777">typ</span><span class="op" id="2881780">,</span>&nbsp;<span class="builtintype" id="2881782">nil</span><span class="op" id="2881785">,</span>&nbsp;<span class="ident" id="2881787">flag</span><span class="op" id="2881791">(</span><span class="ident" id="2881792">typ</span><span class="op" id="2881795">.</span><span class="ident" id="2881796">Kind</span><span class="op" id="2881800">(</span><span class="op" id="2881801">)</span><span class="op" id="2881802">)</span><span class="op" id="2881803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881807">if</span>&nbsp;<span class="ident" id="2881810">ifaceIndir</span><span class="op" id="2881820">(</span><span class="ident" id="2881821">typ</span><span class="op" id="2881824">)</span>&nbsp;<span class="op" id="2881826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2881831">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2881880">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2881944">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2882006">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882073">v</span><span class="op" id="2882074">.</span><span class="ident" id="2882075">ptr</span>&nbsp;<span class="op" id="2882079">=</span>&nbsp;<span class="ident" id="2882081">unsafe_New</span><span class="op" id="2882091">(</span><span class="ident" id="2882092">typ</span><span class="op" id="2882095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882100">memmove</span><span class="op" id="2882107">(</span><span class="ident" id="2882108">v</span><span class="op" id="2882109">.</span><span class="ident" id="2882110">ptr</span><span class="op" id="2882113">,</span>&nbsp;<span class="ident" id="2882115">addr</span><span class="op" id="2882119">,</span>&nbsp;<span class="ident" id="2882121">typ</span><span class="op" id="2882124">.</span><span class="ident" id="2882125">size</span><span class="op" id="2882129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882134">v</span><span class="op" id="2882135">.</span><span class="ident" id="2882136">flag</span>&nbsp;<span class="op" id="2882141">|=</span>&nbsp;<span class="ident" id="2882144">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882156">}</span>&nbsp;<span class="keyword" id="2882158">else</span>&nbsp;<span class="op" id="2882163">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882168">v</span><span class="op" id="2882169">.</span><span class="ident" id="2882170">ptr</span>&nbsp;<span class="op" id="2882174">=</span>&nbsp;<span class="op" id="2882176">*</span><span class="op" id="2882177">(</span><span class="op" id="2882178">*</span><span class="ident" id="2882179">unsafe</span><span class="op" id="2882185">.</span><span class="ident" id="2882186">Pointer</span><span class="op" id="2882193">)</span><span class="op" id="2882194">(</span><span class="ident" id="2882195">addr</span><span class="op" id="2882199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882207">in</span>&nbsp;<span class="op" id="2882210">=</span>&nbsp;<span class="builtinfunc" id="2882212">append</span><span class="op" id="2882218">(</span><span class="ident" id="2882219">in</span><span class="op" id="2882221">,</span>&nbsp;<span class="ident" id="2882223">v</span><span class="op" id="2882224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882228">off</span>&nbsp;<span class="op" id="2882232">+=</span>&nbsp;<span class="ident" id="2882235">typ</span><span class="op" id="2882238">.</span><span class="ident" id="2882239">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882245">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2882249">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882279">out</span>&nbsp;<span class="op" id="2882283">:=</span>&nbsp;<span class="ident" id="2882286">f</span><span class="op" id="2882287">(</span><span class="ident" id="2882288">in</span><span class="op" id="2882290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882293">if</span>&nbsp;<span class="builtinfunc" id="2882296">len</span><span class="op" id="2882299">(</span><span class="ident" id="2882300">out</span><span class="op" id="2882303">)</span>&nbsp;<span class="op" id="2882305">!=</span>&nbsp;<span class="builtinfunc" id="2882308">len</span><span class="op" id="2882311">(</span><span class="ident" id="2882312">ftyp</span><span class="op" id="2882316">.</span><span class="ident" id="2882317">out</span><span class="op" id="2882320">)</span>&nbsp;<span class="op" id="2882322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882326">panic</span><span class="op" id="2882331">(</span><span class="string" id="2882332">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2882395">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2882402">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882445">if</span>&nbsp;<span class="builtinfunc" id="2882448">len</span><span class="op" id="2882451">(</span><span class="ident" id="2882452">ftyp</span><span class="op" id="2882456">.</span><span class="ident" id="2882457">out</span><span class="op" id="2882460">)</span>&nbsp;<span class="op" id="2882462">&gt;</span>&nbsp;<span class="num" id="2882464">0</span>&nbsp;<span class="op" id="2882466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882470">off</span>&nbsp;<span class="op" id="2882474">+=</span>&nbsp;<span class="op" id="2882477">-</span><span class="ident" id="2882478">off</span>&nbsp;<span class="op" id="2882482">&amp;</span>&nbsp;<span class="op" id="2882484">(</span><span class="ident" id="2882485">ptrSize</span>&nbsp;<span class="op" id="2882493">-</span>&nbsp;<span class="num" id="2882495">1</span><span class="op" id="2882496">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882500">if</span>&nbsp;<span class="ident" id="2882503">runtime</span><span class="op" id="2882510">.</span><span class="ident" id="2882511">GOARCH</span>&nbsp;<span class="op" id="2882518">==</span>&nbsp;<span class="string" id="2882521">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2882532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882537">off</span>&nbsp;<span class="op" id="2882541">=</span>&nbsp;<span class="ident" id="2882543">align</span><span class="op" id="2882548">(</span><span class="ident" id="2882549">off</span><span class="op" id="2882552">,</span>&nbsp;<span class="num" id="2882554">8</span><span class="op" id="2882555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882563">for</span>&nbsp;<span class="ident" id="2882567">i</span><span class="op" id="2882568">,</span>&nbsp;<span class="ident" id="2882570">arg</span>&nbsp;<span class="op" id="2882574">:=</span>&nbsp;<span class="keyword" id="2882577">range</span>&nbsp;<span class="ident" id="2882583">ftyp</span><span class="op" id="2882587">.</span><span class="ident" id="2882588">out</span>&nbsp;<span class="op" id="2882592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882597">typ</span>&nbsp;<span class="op" id="2882601">:=</span>&nbsp;<span class="ident" id="2882604">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882611">v</span>&nbsp;<span class="op" id="2882613">:=</span>&nbsp;<span class="ident" id="2882616">out</span><span class="op" id="2882619">[</span><span class="ident" id="2882620">i</span><span class="op" id="2882621">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882626">if</span>&nbsp;<span class="ident" id="2882629">v</span><span class="op" id="2882630">.</span><span class="ident" id="2882631">typ</span>&nbsp;<span class="op" id="2882635">!=</span>&nbsp;<span class="ident" id="2882638">typ</span>&nbsp;<span class="op" id="2882642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882648">panic</span><span class="op" id="2882653">(</span><span class="string" id="2882654">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2882701">+</span>&nbsp;<span class="ident" id="2882703">funcName</span><span class="op" id="2882711">(</span><span class="ident" id="2882712">f</span><span class="op" id="2882713">)</span>&nbsp;<span class="op" id="2882715">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2882722">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2882752">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882759">out</span><span class="op" id="2882762">[</span><span class="ident" id="2882763">i</span><span class="op" id="2882764">]</span><span class="op" id="2882765">.</span><span class="ident" id="2882766">typ</span><span class="op" id="2882769">.</span><span class="ident" id="2882770">String</span><span class="op" id="2882776">(</span><span class="op" id="2882777">)</span>&nbsp;<span class="op" id="2882779">+</span>&nbsp;<span class="string" id="2882781">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2882789">+</span>&nbsp;<span class="ident" id="2882791">typ</span><span class="op" id="2882794">.</span><span class="ident" id="2882795">String</span><span class="op" id="2882801">(</span><span class="op" id="2882802">)</span><span class="op" id="2882803">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882813">if</span>&nbsp;<span class="ident" id="2882816">v</span><span class="op" id="2882817">.</span><span class="ident" id="2882818">flag</span><span class="op" id="2882822">&amp;</span><span class="ident" id="2882823">flagRO</span>&nbsp;<span class="op" id="2882830">!=</span>&nbsp;<span class="num" id="2882833">0</span>&nbsp;<span class="op" id="2882835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882841">panic</span><span class="op" id="2882846">(</span><span class="string" id="2882847">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2882894">+</span>&nbsp;<span class="ident" id="2882896">funcName</span><span class="op" id="2882904">(</span><span class="ident" id="2882905">f</span><span class="op" id="2882906">)</span>&nbsp;<span class="op" id="2882908">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2882915">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2882963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882968">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882973">off</span>&nbsp;<span class="op" id="2882977">+=</span>&nbsp;<span class="op" id="2882980">-</span><span class="ident" id="2882981">off</span>&nbsp;<span class="op" id="2882985">&amp;</span>&nbsp;<span class="builtintype" id="2882987">uintptr</span><span class="op" id="2882994">(</span><span class="ident" id="2882995">typ</span><span class="op" id="2882998">.</span><span class="ident" id="2882999">align</span><span class="op" id="2883004">-</span><span class="num" id="2883005">1</span><span class="op" id="2883006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883011">addr</span>&nbsp;<span class="op" id="2883016">:=</span>&nbsp;<span class="ident" id="2883019">unsafe</span><span class="op" id="2883025">.</span><span class="ident" id="2883026">Pointer</span><span class="op" id="2883033">(</span><span class="builtintype" id="2883034">uintptr</span><span class="op" id="2883041">(</span><span class="ident" id="2883042">ptr</span><span class="op" id="2883045">)</span>&nbsp;<span class="op" id="2883047">+</span>&nbsp;<span class="ident" id="2883049">off</span><span class="op" id="2883052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883057">if</span>&nbsp;<span class="ident" id="2883060">v</span><span class="op" id="2883061">.</span><span class="ident" id="2883062">flag</span><span class="op" id="2883066">&amp;</span><span class="ident" id="2883067">flagIndir</span>&nbsp;<span class="op" id="2883077">!=</span>&nbsp;<span class="num" id="2883080">0</span>&nbsp;<span class="op" id="2883082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883088">memmove</span><span class="op" id="2883095">(</span><span class="ident" id="2883096">addr</span><span class="op" id="2883100">,</span>&nbsp;<span class="ident" id="2883102">v</span><span class="op" id="2883103">.</span><span class="ident" id="2883104">ptr</span><span class="op" id="2883107">,</span>&nbsp;<span class="ident" id="2883109">typ</span><span class="op" id="2883112">.</span><span class="ident" id="2883113">size</span><span class="op" id="2883117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883122">}</span>&nbsp;<span class="keyword" id="2883124">else</span>&nbsp;<span class="op" id="2883129">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883135">*</span><span class="op" id="2883136">(</span><span class="op" id="2883137">*</span><span class="ident" id="2883138">unsafe</span><span class="op" id="2883144">.</span><span class="ident" id="2883145">Pointer</span><span class="op" id="2883152">)</span><span class="op" id="2883153">(</span><span class="ident" id="2883154">addr</span><span class="op" id="2883158">)</span>&nbsp;<span class="op" id="2883160">=</span>&nbsp;<span class="ident" id="2883162">v</span><span class="op" id="2883163">.</span><span class="ident" id="2883164">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883176">off</span>&nbsp;<span class="op" id="2883180">+=</span>&nbsp;<span class="ident" id="2883183">typ</span><span class="op" id="2883186">.</span><span class="ident" id="2883187">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883197">}</span><br>
<span class="lineno">515</span><span class="op" id="2883199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883202">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2883259">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2883314">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2883373">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2883389">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2883459">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2883537">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2883593">func</span>&nbsp;<span class="ident" id="2883598">methodReceiver</span><span class="op" id="2883612">(</span><span class="ident" id="2883613">op</span>&nbsp;<span class="builtintype" id="2883616">string</span><span class="op" id="2883622">,</span>&nbsp;<span class="ident" id="2883624">v</span>&nbsp;<span class="ident" id="2883626">Value</span><span class="op" id="2883631">,</span>&nbsp;<span class="ident" id="2883633">methodIndex</span>&nbsp;<span class="builtintype" id="2883645">int</span><span class="op" id="2883648">)</span>&nbsp;<span class="op" id="2883650">(</span><span class="ident" id="2883651">rcvrtype</span><span class="op" id="2883659">,</span>&nbsp;<span class="ident" id="2883661">t</span>&nbsp;<span class="op" id="2883663">*</span><span class="ident" id="2883664">rtype</span><span class="op" id="2883669">,</span>&nbsp;<span class="ident" id="2883671">fn</span>&nbsp;<span class="ident" id="2883674">unsafe</span><span class="op" id="2883680">.</span><span class="ident" id="2883681">Pointer</span><span class="op" id="2883688">)</span>&nbsp;<span class="op" id="2883690">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883693">i</span>&nbsp;<span class="op" id="2883695">:=</span>&nbsp;<span class="ident" id="2883698">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883711">if</span>&nbsp;<span class="ident" id="2883714">v</span><span class="op" id="2883715">.</span><span class="ident" id="2883716">typ</span><span class="op" id="2883719">.</span><span class="ident" id="2883720">Kind</span><span class="op" id="2883724">(</span><span class="op" id="2883725">)</span>&nbsp;<span class="op" id="2883727">==</span>&nbsp;<span class="ident" id="2883730">Interface</span>&nbsp;<span class="op" id="2883740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883744">tt</span>&nbsp;<span class="op" id="2883747">:=</span>&nbsp;<span class="op" id="2883750">(</span><span class="op" id="2883751">*</span><span class="ident" id="2883752">interfaceType</span><span class="op" id="2883765">)</span><span class="op" id="2883766">(</span><span class="ident" id="2883767">unsafe</span><span class="op" id="2883773">.</span><span class="ident" id="2883774">Pointer</span><span class="op" id="2883781">(</span><span class="ident" id="2883782">v</span><span class="op" id="2883783">.</span><span class="ident" id="2883784">typ</span><span class="op" id="2883787">)</span><span class="op" id="2883788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883792">if</span>&nbsp;<span class="builtintype" id="2883795">uint</span><span class="op" id="2883799">(</span><span class="ident" id="2883800">i</span><span class="op" id="2883801">)</span>&nbsp;<span class="op" id="2883803">&gt;=</span>&nbsp;<span class="builtintype" id="2883806">uint</span><span class="op" id="2883810">(</span><span class="builtinfunc" id="2883811">len</span><span class="op" id="2883814">(</span><span class="ident" id="2883815">tt</span><span class="op" id="2883817">.</span><span class="ident" id="2883818">methods</span><span class="op" id="2883825">)</span><span class="op" id="2883826">)</span>&nbsp;<span class="op" id="2883828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2883833">panic</span><span class="op" id="2883838">(</span><span class="string" id="2883839">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2883886">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883894">m</span>&nbsp;<span class="op" id="2883896">:=</span>&nbsp;<span class="op" id="2883899">&amp;</span><span class="ident" id="2883900">tt</span><span class="op" id="2883902">.</span><span class="ident" id="2883903">methods</span><span class="op" id="2883910">[</span><span class="ident" id="2883911">i</span><span class="op" id="2883912">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883916">if</span>&nbsp;<span class="ident" id="2883919">m</span><span class="op" id="2883920">.</span><span class="ident" id="2883921">pkgPath</span>&nbsp;<span class="op" id="2883929">!=</span>&nbsp;<span class="builtintype" id="2883932">nil</span>&nbsp;<span class="op" id="2883936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2883941">panic</span><span class="op" id="2883946">(</span><span class="string" id="2883947">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2883959">+</span>&nbsp;<span class="ident" id="2883961">op</span>&nbsp;<span class="op" id="2883964">+</span>&nbsp;<span class="string" id="2883966">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2883989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883993">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883997">iface</span>&nbsp;<span class="op" id="2884003">:=</span>&nbsp;<span class="op" id="2884006">(</span><span class="op" id="2884007">*</span><span class="ident" id="2884008">nonEmptyInterface</span><span class="op" id="2884025">)</span><span class="op" id="2884026">(</span><span class="ident" id="2884027">v</span><span class="op" id="2884028">.</span><span class="ident" id="2884029">ptr</span><span class="op" id="2884032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884036">if</span>&nbsp;<span class="ident" id="2884039">iface</span><span class="op" id="2884044">.</span><span class="ident" id="2884045">itab</span>&nbsp;<span class="op" id="2884050">==</span>&nbsp;<span class="builtintype" id="2884053">nil</span>&nbsp;<span class="op" id="2884057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2884062">panic</span><span class="op" id="2884067">(</span><span class="string" id="2884068">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2884080">+</span>&nbsp;<span class="ident" id="2884082">op</span>&nbsp;<span class="op" id="2884085">+</span>&nbsp;<span class="string" id="2884087">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2884122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884130">rcvrtype</span>&nbsp;<span class="op" id="2884139">=</span>&nbsp;<span class="ident" id="2884141">iface</span><span class="op" id="2884146">.</span><span class="ident" id="2884147">itab</span><span class="op" id="2884151">.</span><span class="ident" id="2884152">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884158">fn</span>&nbsp;<span class="op" id="2884161">=</span>&nbsp;<span class="ident" id="2884163">unsafe</span><span class="op" id="2884169">.</span><span class="ident" id="2884170">Pointer</span><span class="op" id="2884177">(</span><span class="op" id="2884178">&amp;</span><span class="ident" id="2884179">iface</span><span class="op" id="2884184">.</span><span class="ident" id="2884185">itab</span><span class="op" id="2884189">.</span><span class="ident" id="2884190">fun</span><span class="op" id="2884193">[</span><span class="ident" id="2884194">i</span><span class="op" id="2884195">]</span><span class="op" id="2884196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884200">t</span>&nbsp;<span class="op" id="2884202">=</span>&nbsp;<span class="ident" id="2884204">m</span><span class="op" id="2884205">.</span><span class="ident" id="2884206">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884211">}</span>&nbsp;<span class="keyword" id="2884213">else</span>&nbsp;<span class="op" id="2884218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884222">rcvrtype</span>&nbsp;<span class="op" id="2884231">=</span>&nbsp;<span class="ident" id="2884233">v</span><span class="op" id="2884234">.</span><span class="ident" id="2884235">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884241">ut</span>&nbsp;<span class="op" id="2884244">:=</span>&nbsp;<span class="ident" id="2884247">v</span><span class="op" id="2884248">.</span><span class="ident" id="2884249">typ</span><span class="op" id="2884252">.</span><span class="ident" id="2884253">uncommon</span><span class="op" id="2884261">(</span><span class="op" id="2884262">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884266">if</span>&nbsp;<span class="ident" id="2884269">ut</span>&nbsp;<span class="op" id="2884272">==</span>&nbsp;<span class="builtintype" id="2884275">nil</span>&nbsp;<span class="op" id="2884279">||</span>&nbsp;<span class="builtintype" id="2884282">uint</span><span class="op" id="2884286">(</span><span class="ident" id="2884287">i</span><span class="op" id="2884288">)</span>&nbsp;<span class="op" id="2884290">&gt;=</span>&nbsp;<span class="builtintype" id="2884293">uint</span><span class="op" id="2884297">(</span><span class="builtinfunc" id="2884298">len</span><span class="op" id="2884301">(</span><span class="ident" id="2884302">ut</span><span class="op" id="2884304">.</span><span class="ident" id="2884305">methods</span><span class="op" id="2884312">)</span><span class="op" id="2884313">)</span>&nbsp;<span class="op" id="2884315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2884320">panic</span><span class="op" id="2884325">(</span><span class="string" id="2884326">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2884373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884381">m</span>&nbsp;<span class="op" id="2884383">:=</span>&nbsp;<span class="op" id="2884386">&amp;</span><span class="ident" id="2884387">ut</span><span class="op" id="2884389">.</span><span class="ident" id="2884390">methods</span><span class="op" id="2884397">[</span><span class="ident" id="2884398">i</span><span class="op" id="2884399">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884403">if</span>&nbsp;<span class="ident" id="2884406">m</span><span class="op" id="2884407">.</span><span class="ident" id="2884408">pkgPath</span>&nbsp;<span class="op" id="2884416">!=</span>&nbsp;<span class="builtintype" id="2884419">nil</span>&nbsp;<span class="op" id="2884423">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2884428">panic</span><span class="op" id="2884433">(</span><span class="string" id="2884434">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2884446">+</span>&nbsp;<span class="ident" id="2884448">op</span>&nbsp;<span class="op" id="2884451">+</span>&nbsp;<span class="string" id="2884453">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2884476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884484">fn</span>&nbsp;<span class="op" id="2884487">=</span>&nbsp;<span class="ident" id="2884489">unsafe</span><span class="op" id="2884495">.</span><span class="ident" id="2884496">Pointer</span><span class="op" id="2884503">(</span><span class="op" id="2884504">&amp;</span><span class="ident" id="2884505">m</span><span class="op" id="2884506">.</span><span class="ident" id="2884507">ifn</span><span class="op" id="2884510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884514">t</span>&nbsp;<span class="op" id="2884516">=</span>&nbsp;<span class="ident" id="2884518">m</span><span class="op" id="2884519">.</span><span class="ident" id="2884520">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884526">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884529">return</span><br>
<span class="lineno"></span><span class="op" id="2884536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2884539">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2884604">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2884663">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2884718">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2884781">func</span>&nbsp;<span class="ident" id="2884786">storeRcvr</span><span class="op" id="2884795">(</span><span class="ident" id="2884796">v</span>&nbsp;<span class="ident" id="2884798">Value</span><span class="op" id="2884803">,</span>&nbsp;<span class="ident" id="2884805">p</span>&nbsp;<span class="ident" id="2884807">unsafe</span><span class="op" id="2884813">.</span><span class="ident" id="2884814">Pointer</span><span class="op" id="2884821">)</span>&nbsp;<span class="op" id="2884823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884826">t</span>&nbsp;<span class="op" id="2884828">:=</span>&nbsp;<span class="ident" id="2884831">v</span><span class="op" id="2884832">.</span><span class="ident" id="2884833">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884838">if</span>&nbsp;<span class="ident" id="2884841">t</span><span class="op" id="2884842">.</span><span class="ident" id="2884843">Kind</span><span class="op" id="2884847">(</span><span class="op" id="2884848">)</span>&nbsp;<span class="op" id="2884850">==</span>&nbsp;<span class="ident" id="2884853">Interface</span>&nbsp;<span class="op" id="2884863">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2884867">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884922">iface</span>&nbsp;<span class="op" id="2884928">:=</span>&nbsp;<span class="op" id="2884931">(</span><span class="op" id="2884932">*</span><span class="ident" id="2884933">nonEmptyInterface</span><span class="op" id="2884950">)</span><span class="op" id="2884951">(</span><span class="ident" id="2884952">v</span><span class="op" id="2884953">.</span><span class="ident" id="2884954">ptr</span><span class="op" id="2884957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884961">*</span><span class="op" id="2884962">(</span><span class="op" id="2884963">*</span><span class="ident" id="2884964">unsafe</span><span class="op" id="2884970">.</span><span class="ident" id="2884971">Pointer</span><span class="op" id="2884978">)</span><span class="op" id="2884979">(</span><span class="ident" id="2884980">p</span><span class="op" id="2884981">)</span>&nbsp;<span class="op" id="2884983">=</span>&nbsp;<span class="ident" id="2884985">unsafe</span><span class="op" id="2884991">.</span><span class="ident" id="2884992">Pointer</span><span class="op" id="2884999">(</span><span class="ident" id="2885000">iface</span><span class="op" id="2885005">.</span><span class="ident" id="2885006">word</span><span class="op" id="2885010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885013">}</span>&nbsp;<span class="keyword" id="2885015">else</span>&nbsp;<span class="keyword" id="2885020">if</span>&nbsp;<span class="ident" id="2885023">v</span><span class="op" id="2885024">.</span><span class="ident" id="2885025">flag</span><span class="op" id="2885029">&amp;</span><span class="ident" id="2885030">flagIndir</span>&nbsp;<span class="op" id="2885040">!=</span>&nbsp;<span class="num" id="2885043">0</span>&nbsp;<span class="op" id="2885045">&amp;&amp;</span>&nbsp;<span class="op" id="2885048">!</span><span class="ident" id="2885049">ifaceIndir</span><span class="op" id="2885059">(</span><span class="ident" id="2885060">t</span><span class="op" id="2885061">)</span>&nbsp;<span class="op" id="2885063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885067">*</span><span class="op" id="2885068">(</span><span class="op" id="2885069">*</span><span class="ident" id="2885070">unsafe</span><span class="op" id="2885076">.</span><span class="ident" id="2885077">Pointer</span><span class="op" id="2885084">)</span><span class="op" id="2885085">(</span><span class="ident" id="2885086">p</span><span class="op" id="2885087">)</span>&nbsp;<span class="op" id="2885089">=</span>&nbsp;<span class="op" id="2885091">*</span><span class="op" id="2885092">(</span><span class="op" id="2885093">*</span><span class="ident" id="2885094">unsafe</span><span class="op" id="2885100">.</span><span class="ident" id="2885101">Pointer</span><span class="op" id="2885108">)</span><span class="op" id="2885109">(</span><span class="ident" id="2885110">v</span><span class="op" id="2885111">.</span><span class="ident" id="2885112">ptr</span><span class="op" id="2885115">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885118">}</span>&nbsp;<span class="keyword" id="2885120">else</span>&nbsp;<span class="op" id="2885125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885129">*</span><span class="op" id="2885130">(</span><span class="op" id="2885131">*</span><span class="ident" id="2885132">unsafe</span><span class="op" id="2885138">.</span><span class="ident" id="2885139">Pointer</span><span class="op" id="2885146">)</span><span class="op" id="2885147">(</span><span class="ident" id="2885148">p</span><span class="op" id="2885149">)</span>&nbsp;<span class="op" id="2885151">=</span>&nbsp;<span class="ident" id="2885153">v</span><span class="op" id="2885154">.</span><span class="ident" id="2885155">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885160">}</span><br>
<span class="lineno"></span><span class="op" id="2885162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2885165">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2885230">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2885259">func</span>&nbsp;<span class="ident" id="2885264">align</span><span class="op" id="2885269">(</span><span class="ident" id="2885270">x</span><span class="op" id="2885271">,</span>&nbsp;<span class="ident" id="2885273">n</span>&nbsp;<span class="builtintype" id="2885275">uintptr</span><span class="op" id="2885282">)</span>&nbsp;<span class="builtintype" id="2885284">uintptr</span>&nbsp;<span class="op" id="2885292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885295">return</span>&nbsp;<span class="op" id="2885302">(</span><span class="ident" id="2885303">x</span>&nbsp;<span class="op" id="2885305">+</span>&nbsp;<span class="ident" id="2885307">n</span>&nbsp;<span class="op" id="2885309">-</span>&nbsp;<span class="num" id="2885311">1</span><span class="op" id="2885312">)</span>&nbsp;<span class="op" id="2885314">&amp;^</span>&nbsp;<span class="op" id="2885317">(</span><span class="ident" id="2885318">n</span>&nbsp;<span class="op" id="2885320">-</span>&nbsp;<span class="num" id="2885322">1</span><span class="op" id="2885323">)</span><br>
<span class="lineno"></span><span class="op" id="2885325">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2885328">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2885397">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2885454">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2885527">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2885591">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2885644">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2885725">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2885799">//</span><br>
<span class="lineno"></span><span class="comment" id="2885802">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2885878">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2885950">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2886021">func</span>&nbsp;<span class="ident" id="2886026">callMethod</span><span class="op" id="2886036">(</span><span class="ident" id="2886037">ctxt</span>&nbsp;<span class="op" id="2886042">*</span><span class="ident" id="2886043">methodValue</span><span class="op" id="2886054">,</span>&nbsp;<span class="ident" id="2886056">frame</span>&nbsp;<span class="ident" id="2886062">unsafe</span><span class="op" id="2886068">.</span><span class="ident" id="2886069">Pointer</span><span class="op" id="2886076">)</span>&nbsp;<span class="op" id="2886078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886081">rcvr</span>&nbsp;<span class="op" id="2886086">:=</span>&nbsp;<span class="ident" id="2886089">ctxt</span><span class="op" id="2886093">.</span><span class="ident" id="2886094">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886100">rcvrtype</span><span class="op" id="2886108">,</span>&nbsp;<span class="ident" id="2886110">t</span><span class="op" id="2886111">,</span>&nbsp;<span class="ident" id="2886113">fn</span>&nbsp;<span class="op" id="2886116">:=</span>&nbsp;<span class="ident" id="2886119">methodReceiver</span><span class="op" id="2886133">(</span><span class="string" id="2886134">&#34;call&#34;</span><span class="op" id="2886140">,</span>&nbsp;<span class="ident" id="2886142">rcvr</span><span class="op" id="2886146">,</span>&nbsp;<span class="ident" id="2886148">ctxt</span><span class="op" id="2886152">.</span><span class="ident" id="2886153">method</span><span class="op" id="2886159">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886162">frametype</span><span class="op" id="2886171">,</span>&nbsp;<span class="ident" id="2886173">argSize</span><span class="op" id="2886180">,</span>&nbsp;<span class="ident" id="2886182">retOffset</span><span class="op" id="2886191">,</span>&nbsp;<span class="ident" id="2886193">_</span>&nbsp;<span class="op" id="2886195">:=</span>&nbsp;<span class="ident" id="2886198">funcLayout</span><span class="op" id="2886208">(</span><span class="ident" id="2886209">t</span><span class="op" id="2886210">,</span>&nbsp;<span class="ident" id="2886212">rcvrtype</span><span class="op" id="2886220">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886224">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886299">args</span>&nbsp;<span class="op" id="2886304">:=</span>&nbsp;<span class="ident" id="2886307">unsafe_New</span><span class="op" id="2886317">(</span><span class="ident" id="2886318">frametype</span><span class="op" id="2886327">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886331">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886370">storeRcvr</span><span class="op" id="2886379">(</span><span class="ident" id="2886380">rcvr</span><span class="op" id="2886384">,</span>&nbsp;<span class="ident" id="2886386">args</span><span class="op" id="2886390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886393">memmove</span><span class="op" id="2886400">(</span><span class="ident" id="2886401">unsafe</span><span class="op" id="2886407">.</span><span class="ident" id="2886408">Pointer</span><span class="op" id="2886415">(</span><span class="builtintype" id="2886416">uintptr</span><span class="op" id="2886423">(</span><span class="ident" id="2886424">args</span><span class="op" id="2886428">)</span><span class="op" id="2886429">+</span><span class="ident" id="2886430">ptrSize</span><span class="op" id="2886437">)</span><span class="op" id="2886438">,</span>&nbsp;<span class="ident" id="2886440">frame</span><span class="op" id="2886445">,</span>&nbsp;<span class="ident" id="2886447">argSize</span><span class="op" id="2886454">-</span><span class="ident" id="2886455">ptrSize</span><span class="op" id="2886462">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886466">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886476">call</span><span class="op" id="2886480">(</span><span class="ident" id="2886481">fn</span><span class="op" id="2886483">,</span>&nbsp;<span class="ident" id="2886485">args</span><span class="op" id="2886489">,</span>&nbsp;<span class="builtintype" id="2886491">uint32</span><span class="op" id="2886497">(</span><span class="ident" id="2886498">frametype</span><span class="op" id="2886507">.</span><span class="ident" id="2886508">size</span><span class="op" id="2886512">)</span><span class="op" id="2886513">,</span>&nbsp;<span class="builtintype" id="2886515">uint32</span><span class="op" id="2886521">(</span><span class="ident" id="2886522">retOffset</span><span class="op" id="2886531">)</span><span class="op" id="2886532">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886536">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886604">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886676">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886747">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2886763">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886823">callerRetOffset</span>&nbsp;<span class="op" id="2886839">:=</span>&nbsp;<span class="ident" id="2886842">retOffset</span>&nbsp;<span class="op" id="2886852">-</span>&nbsp;<span class="ident" id="2886854">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886863">if</span>&nbsp;<span class="ident" id="2886866">runtime</span><span class="op" id="2886873">.</span><span class="ident" id="2886874">GOARCH</span>&nbsp;<span class="op" id="2886881">==</span>&nbsp;<span class="string" id="2886884">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2886895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886899">callerRetOffset</span>&nbsp;<span class="op" id="2886915">=</span>&nbsp;<span class="ident" id="2886917">align</span><span class="op" id="2886922">(</span><span class="ident" id="2886923">argSize</span><span class="op" id="2886930">-</span><span class="ident" id="2886931">ptrSize</span><span class="op" id="2886938">,</span>&nbsp;<span class="num" id="2886940">8</span><span class="op" id="2886941">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2886944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886947">memmove</span><span class="op" id="2886954">(</span><span class="ident" id="2886955">unsafe</span><span class="op" id="2886961">.</span><span class="ident" id="2886962">Pointer</span><span class="op" id="2886969">(</span><span class="builtintype" id="2886970">uintptr</span><span class="op" id="2886977">(</span><span class="ident" id="2886978">frame</span><span class="op" id="2886983">)</span><span class="op" id="2886984">+</span><span class="ident" id="2886985">callerRetOffset</span><span class="op" id="2887000">)</span><span class="op" id="2887001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887005">unsafe</span><span class="op" id="2887011">.</span><span class="ident" id="2887012">Pointer</span><span class="op" id="2887019">(</span><span class="builtintype" id="2887020">uintptr</span><span class="op" id="2887027">(</span><span class="ident" id="2887028">args</span><span class="op" id="2887032">)</span><span class="op" id="2887033">+</span><span class="ident" id="2887034">retOffset</span><span class="op" id="2887043">)</span><span class="op" id="2887044">,</span>&nbsp;<span class="ident" id="2887046">frametype</span><span class="op" id="2887055">.</span><span class="ident" id="2887056">size</span><span class="op" id="2887060">-</span><span class="ident" id="2887061">retOffset</span><span class="op" id="2887070">)</span><br>
<span class="lineno"></span><span class="op" id="2887072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2887075">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2887137">func</span>&nbsp;<span class="ident" id="2887142">funcName</span><span class="op" id="2887150">(</span><span class="ident" id="2887151">f</span>&nbsp;<span class="keyword" id="2887153">func</span><span class="op" id="2887157">(</span><span class="op" id="2887158">[</span><span class="op" id="2887159">]</span><span class="ident" id="2887160">Value</span><span class="op" id="2887165">)</span>&nbsp;<span class="op" id="2887167">[</span><span class="op" id="2887168">]</span><span class="ident" id="2887169">Value</span><span class="op" id="2887174">)</span>&nbsp;<span class="builtintype" id="2887176">string</span>&nbsp;<span class="op" id="2887183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887186">pc</span>&nbsp;<span class="op" id="2887189">:=</span>&nbsp;<span class="op" id="2887192">*</span><span class="op" id="2887193">(</span><span class="op" id="2887194">*</span><span class="builtintype" id="2887195">uintptr</span><span class="op" id="2887202">)</span><span class="op" id="2887203">(</span><span class="ident" id="2887204">unsafe</span><span class="op" id="2887210">.</span><span class="ident" id="2887211">Pointer</span><span class="op" id="2887218">(</span><span class="op" id="2887219">&amp;</span><span class="ident" id="2887220">f</span><span class="op" id="2887221">)</span><span class="op" id="2887222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887225">rf</span>&nbsp;<span class="op" id="2887228">:=</span>&nbsp;<span class="ident" id="2887231">runtime</span><span class="op" id="2887238">.</span><span class="ident" id="2887239">FuncForPC</span><span class="op" id="2887248">(</span><span class="ident" id="2887249">pc</span><span class="op" id="2887251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887254">if</span>&nbsp;<span class="ident" id="2887257">rf</span>&nbsp;<span class="op" id="2887260">!=</span>&nbsp;<span class="builtintype" id="2887263">nil</span>&nbsp;<span class="op" id="2887267">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887271">return</span>&nbsp;<span class="ident" id="2887278">rf</span><span class="op" id="2887280">.</span><span class="ident" id="2887281">Name</span><span class="op" id="2887285">(</span><span class="op" id="2887286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887292">return</span>&nbsp;<span class="string" id="2887299">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2887309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2887312">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2887341">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2887396">func</span>&nbsp;<span class="op" id="2887401">(</span><span class="ident" id="2887402">v</span>&nbsp;<span class="ident" id="2887404">Value</span><span class="op" id="2887409">)</span>&nbsp;<span class="ident" id="2887411">Cap</span><span class="op" id="2887414">(</span><span class="op" id="2887415">)</span>&nbsp;<span class="builtintype" id="2887417">int</span>&nbsp;<span class="op" id="2887421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887424">k</span>&nbsp;<span class="op" id="2887426">:=</span>&nbsp;<span class="ident" id="2887429">v</span><span class="op" id="2887430">.</span><span class="ident" id="2887431">kind</span><span class="op" id="2887435">(</span><span class="op" id="2887436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887439">switch</span>&nbsp;<span class="ident" id="2887446">k</span>&nbsp;<span class="op" id="2887448">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887451">case</span>&nbsp;<span class="ident" id="2887456">Array</span><span class="op" id="2887461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887465">return</span>&nbsp;<span class="ident" id="2887472">v</span><span class="op" id="2887473">.</span><span class="ident" id="2887474">typ</span><span class="op" id="2887477">.</span><span class="ident" id="2887478">Len</span><span class="op" id="2887481">(</span><span class="op" id="2887482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887485">case</span>&nbsp;<span class="ident" id="2887490">Chan</span><span class="op" id="2887494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887498">return</span>&nbsp;<span class="builtintype" id="2887505">int</span><span class="op" id="2887508">(</span><span class="ident" id="2887509">chancap</span><span class="op" id="2887516">(</span><span class="ident" id="2887517">v</span><span class="op" id="2887518">.</span><span class="ident" id="2887519">pointer</span><span class="op" id="2887526">(</span><span class="op" id="2887527">)</span><span class="op" id="2887528">)</span><span class="op" id="2887529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887532">case</span>&nbsp;<span class="ident" id="2887537">Slice</span><span class="op" id="2887542">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2887546">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887605">return</span>&nbsp;<span class="op" id="2887612">(</span><span class="op" id="2887613">*</span><span class="ident" id="2887614">sliceHeader</span><span class="op" id="2887625">)</span><span class="op" id="2887626">(</span><span class="ident" id="2887627">v</span><span class="op" id="2887628">.</span><span class="ident" id="2887629">ptr</span><span class="op" id="2887632">)</span><span class="op" id="2887633">.</span><span class="ident" id="2887634">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2887642">panic</span><span class="op" id="2887647">(</span><span class="op" id="2887648">&amp;</span><span class="ident" id="2887649">ValueError</span><span class="op" id="2887659">{</span><span class="string" id="2887660">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2887679">,</span>&nbsp;<span class="ident" id="2887681">v</span><span class="op" id="2887682">.</span><span class="ident" id="2887683">kind</span><span class="op" id="2887687">(</span><span class="op" id="2887688">)</span><span class="op" id="2887689">}</span><span class="op" id="2887690">)</span><br>
<span class="lineno"></span><span class="op" id="2887692">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2887695">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2887726">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2887764">func</span>&nbsp;<span class="op" id="2887769">(</span><span class="ident" id="2887770">v</span>&nbsp;<span class="ident" id="2887772">Value</span><span class="op" id="2887777">)</span>&nbsp;<span class="ident" id="2887779">Close</span><span class="op" id="2887784">(</span><span class="op" id="2887785">)</span>&nbsp;<span class="op" id="2887787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887790">v</span><span class="op" id="2887791">.</span><span class="ident" id="2887792">mustBe</span><span class="op" id="2887798">(</span><span class="ident" id="2887799">Chan</span><span class="op" id="2887803">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887806">v</span><span class="op" id="2887807">.</span><span class="ident" id="2887808">mustBeExported</span><span class="op" id="2887822">(</span><span class="op" id="2887823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887826">chanclose</span><span class="op" id="2887835">(</span><span class="ident" id="2887836">v</span><span class="op" id="2887837">.</span><span class="ident" id="2887838">pointer</span><span class="op" id="2887845">(</span><span class="op" id="2887846">)</span><span class="op" id="2887847">)</span><br>
<span class="lineno"></span><span class="op" id="2887849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2887852">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2887910">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2887966">func</span>&nbsp;<span class="op" id="2887971">(</span><span class="ident" id="2887972">v</span>&nbsp;<span class="ident" id="2887974">Value</span><span class="op" id="2887979">)</span>&nbsp;<span class="ident" id="2887981">Complex</span><span class="op" id="2887988">(</span><span class="op" id="2887989">)</span>&nbsp;<span class="builtintype" id="2887991">complex128</span>&nbsp;<span class="op" id="2888002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888005">k</span>&nbsp;<span class="op" id="2888007">:=</span>&nbsp;<span class="ident" id="2888010">v</span><span class="op" id="2888011">.</span><span class="ident" id="2888012">kind</span><span class="op" id="2888016">(</span><span class="op" id="2888017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888020">switch</span>&nbsp;<span class="ident" id="2888027">k</span>&nbsp;<span class="op" id="2888029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888032">case</span>&nbsp;<span class="ident" id="2888037">Complex64</span><span class="op" id="2888046">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888050">return</span>&nbsp;<span class="builtintype" id="2888057">complex128</span><span class="op" id="2888067">(</span><span class="op" id="2888068">*</span><span class="op" id="2888069">(</span><span class="op" id="2888070">*</span><span class="builtintype" id="2888071">complex64</span><span class="op" id="2888080">)</span><span class="op" id="2888081">(</span><span class="ident" id="2888082">v</span><span class="op" id="2888083">.</span><span class="ident" id="2888084">ptr</span><span class="op" id="2888087">)</span><span class="op" id="2888088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888091">case</span>&nbsp;<span class="ident" id="2888096">Complex128</span><span class="op" id="2888106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888110">return</span>&nbsp;<span class="op" id="2888117">*</span><span class="op" id="2888118">(</span><span class="op" id="2888119">*</span><span class="builtintype" id="2888120">complex128</span><span class="op" id="2888130">)</span><span class="op" id="2888131">(</span><span class="ident" id="2888132">v</span><span class="op" id="2888133">.</span><span class="ident" id="2888134">ptr</span><span class="op" id="2888137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2888143">panic</span><span class="op" id="2888148">(</span><span class="op" id="2888149">&amp;</span><span class="ident" id="2888150">ValueError</span><span class="op" id="2888160">{</span><span class="string" id="2888161">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2888184">,</span>&nbsp;<span class="ident" id="2888186">v</span><span class="op" id="2888187">.</span><span class="ident" id="2888188">kind</span><span class="op" id="2888192">(</span><span class="op" id="2888193">)</span><span class="op" id="2888194">}</span><span class="op" id="2888195">)</span><br>
<span class="lineno">665</span><span class="op" id="2888197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2888200">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2888256">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2888292">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2888342">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2888384">func</span>&nbsp;<span class="op" id="2888389">(</span><span class="ident" id="2888390">v</span>&nbsp;<span class="ident" id="2888392">Value</span><span class="op" id="2888397">)</span>&nbsp;<span class="ident" id="2888399">Elem</span><span class="op" id="2888403">(</span><span class="op" id="2888404">)</span>&nbsp;<span class="ident" id="2888406">Value</span>&nbsp;<span class="op" id="2888412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888415">k</span>&nbsp;<span class="op" id="2888417">:=</span>&nbsp;<span class="ident" id="2888420">v</span><span class="op" id="2888421">.</span><span class="ident" id="2888422">kind</span><span class="op" id="2888426">(</span><span class="op" id="2888427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888430">switch</span>&nbsp;<span class="ident" id="2888437">k</span>&nbsp;<span class="op" id="2888439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888442">case</span>&nbsp;<span class="ident" id="2888447">Interface</span><span class="op" id="2888456">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888460">var</span>&nbsp;<span class="ident" id="2888464">eface</span>&nbsp;<span class="keyword" id="2888470">interface</span><span class="op" id="2888479">{</span><span class="op" id="2888480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888484">if</span>&nbsp;<span class="ident" id="2888487">v</span><span class="op" id="2888488">.</span><span class="ident" id="2888489">typ</span><span class="op" id="2888492">.</span><span class="ident" id="2888493">NumMethod</span><span class="op" id="2888502">(</span><span class="op" id="2888503">)</span>&nbsp;<span class="op" id="2888505">==</span>&nbsp;<span class="num" id="2888508">0</span>&nbsp;<span class="op" id="2888510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888515">eface</span>&nbsp;<span class="op" id="2888521">=</span>&nbsp;<span class="op" id="2888523">*</span><span class="op" id="2888524">(</span><span class="op" id="2888525">*</span><span class="keyword" id="2888526">interface</span><span class="op" id="2888535">{</span><span class="op" id="2888536">}</span><span class="op" id="2888537">)</span><span class="op" id="2888538">(</span><span class="ident" id="2888539">v</span><span class="op" id="2888540">.</span><span class="ident" id="2888541">ptr</span><span class="op" id="2888544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888548">}</span>&nbsp;<span class="keyword" id="2888550">else</span>&nbsp;<span class="op" id="2888555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888560">eface</span>&nbsp;<span class="op" id="2888566">=</span>&nbsp;<span class="op" id="2888568">(</span><span class="keyword" id="2888569">interface</span><span class="op" id="2888578">{</span><span class="op" id="2888579">}</span><span class="op" id="2888580">)</span><span class="op" id="2888581">(</span><span class="op" id="2888582">*</span><span class="op" id="2888583">(</span><span class="op" id="2888584">*</span><span class="keyword" id="2888585">interface</span>&nbsp;<span class="op" id="2888595">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888601">M</span><span class="op" id="2888602">(</span><span class="op" id="2888603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888608">}</span><span class="op" id="2888609">)</span><span class="op" id="2888610">(</span><span class="ident" id="2888611">v</span><span class="op" id="2888612">.</span><span class="ident" id="2888613">ptr</span><span class="op" id="2888616">)</span><span class="op" id="2888617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888625">x</span>&nbsp;<span class="op" id="2888627">:=</span>&nbsp;<span class="ident" id="2888630">unpackEface</span><span class="op" id="2888641">(</span><span class="ident" id="2888642">eface</span><span class="op" id="2888647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888651">if</span>&nbsp;<span class="ident" id="2888654">x</span><span class="op" id="2888655">.</span><span class="ident" id="2888656">flag</span>&nbsp;<span class="op" id="2888661">!=</span>&nbsp;<span class="num" id="2888664">0</span>&nbsp;<span class="op" id="2888666">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888671">x</span><span class="op" id="2888672">.</span><span class="ident" id="2888673">flag</span>&nbsp;<span class="op" id="2888678">|=</span>&nbsp;<span class="ident" id="2888681">v</span><span class="op" id="2888682">.</span><span class="ident" id="2888683">flag</span>&nbsp;<span class="op" id="2888688">&amp;</span>&nbsp;<span class="ident" id="2888690">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888703">return</span>&nbsp;<span class="ident" id="2888710">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888713">case</span>&nbsp;<span class="ident" id="2888718">Ptr</span><span class="op" id="2888721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888725">ptr</span>&nbsp;<span class="op" id="2888729">:=</span>&nbsp;<span class="ident" id="2888732">v</span><span class="op" id="2888733">.</span><span class="ident" id="2888734">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888740">if</span>&nbsp;<span class="ident" id="2888743">v</span><span class="op" id="2888744">.</span><span class="ident" id="2888745">flag</span><span class="op" id="2888749">&amp;</span><span class="ident" id="2888750">flagIndir</span>&nbsp;<span class="op" id="2888760">!=</span>&nbsp;<span class="num" id="2888763">0</span>&nbsp;<span class="op" id="2888765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888770">ptr</span>&nbsp;<span class="op" id="2888774">=</span>&nbsp;<span class="op" id="2888776">*</span><span class="op" id="2888777">(</span><span class="op" id="2888778">*</span><span class="ident" id="2888779">unsafe</span><span class="op" id="2888785">.</span><span class="ident" id="2888786">Pointer</span><span class="op" id="2888793">)</span><span class="op" id="2888794">(</span><span class="ident" id="2888795">ptr</span><span class="op" id="2888798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2888806">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888854">if</span>&nbsp;<span class="ident" id="2888857">ptr</span>&nbsp;<span class="op" id="2888861">==</span>&nbsp;<span class="builtintype" id="2888864">nil</span>&nbsp;<span class="op" id="2888868">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888873">return</span>&nbsp;<span class="ident" id="2888880">Value</span><span class="op" id="2888885">{</span><span class="op" id="2888886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888894">tt</span>&nbsp;<span class="op" id="2888897">:=</span>&nbsp;<span class="op" id="2888900">(</span><span class="op" id="2888901">*</span><span class="ident" id="2888902">ptrType</span><span class="op" id="2888909">)</span><span class="op" id="2888910">(</span><span class="ident" id="2888911">unsafe</span><span class="op" id="2888917">.</span><span class="ident" id="2888918">Pointer</span><span class="op" id="2888925">(</span><span class="ident" id="2888926">v</span><span class="op" id="2888927">.</span><span class="ident" id="2888928">typ</span><span class="op" id="2888931">)</span><span class="op" id="2888932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888936">typ</span>&nbsp;<span class="op" id="2888940">:=</span>&nbsp;<span class="ident" id="2888943">tt</span><span class="op" id="2888945">.</span><span class="ident" id="2888946">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888953">fl</span>&nbsp;<span class="op" id="2888956">:=</span>&nbsp;<span class="ident" id="2888959">v</span><span class="op" id="2888960">.</span><span class="ident" id="2888961">flag</span><span class="op" id="2888965">&amp;</span><span class="ident" id="2888966">flagRO</span>&nbsp;<span class="op" id="2888973">|</span>&nbsp;<span class="ident" id="2888975">flagIndir</span>&nbsp;<span class="op" id="2888985">|</span>&nbsp;<span class="ident" id="2888987">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888998">fl</span>&nbsp;<span class="op" id="2889001">|=</span>&nbsp;<span class="ident" id="2889004">flag</span><span class="op" id="2889008">(</span><span class="ident" id="2889009">typ</span><span class="op" id="2889012">.</span><span class="ident" id="2889013">Kind</span><span class="op" id="2889017">(</span><span class="op" id="2889018">)</span><span class="op" id="2889019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889023">return</span>&nbsp;<span class="ident" id="2889030">Value</span><span class="op" id="2889035">{</span><span class="ident" id="2889036">typ</span><span class="op" id="2889039">,</span>&nbsp;<span class="ident" id="2889041">ptr</span><span class="op" id="2889044">,</span>&nbsp;<span class="ident" id="2889046">fl</span><span class="op" id="2889048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2889054">panic</span><span class="op" id="2889059">(</span><span class="op" id="2889060">&amp;</span><span class="ident" id="2889061">ValueError</span><span class="op" id="2889071">{</span><span class="string" id="2889072">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2889092">,</span>&nbsp;<span class="ident" id="2889094">v</span><span class="op" id="2889095">.</span><span class="ident" id="2889096">kind</span><span class="op" id="2889100">(</span><span class="op" id="2889101">)</span><span class="op" id="2889102">}</span><span class="op" id="2889103">)</span><br>
<span class="lineno"></span><span class="op" id="2889105">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2889108">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2889157">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2889218">func</span>&nbsp;<span class="op" id="2889223">(</span><span class="ident" id="2889224">v</span>&nbsp;<span class="ident" id="2889226">Value</span><span class="op" id="2889231">)</span>&nbsp;<span class="ident" id="2889233">Field</span><span class="op" id="2889238">(</span><span class="ident" id="2889239">i</span>&nbsp;<span class="builtintype" id="2889241">int</span><span class="op" id="2889244">)</span>&nbsp;<span class="ident" id="2889246">Value</span>&nbsp;<span class="op" id="2889252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889255">if</span>&nbsp;<span class="ident" id="2889258">v</span><span class="op" id="2889259">.</span><span class="ident" id="2889260">kind</span><span class="op" id="2889264">(</span><span class="op" id="2889265">)</span>&nbsp;<span class="op" id="2889267">!=</span>&nbsp;<span class="ident" id="2889270">Struct</span>&nbsp;<span class="op" id="2889277">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2889281">panic</span><span class="op" id="2889286">(</span><span class="op" id="2889287">&amp;</span><span class="ident" id="2889288">ValueError</span><span class="op" id="2889298">{</span><span class="string" id="2889299">&#34;reflect.Value.Field&#34;</span><span class="op" id="2889320">,</span>&nbsp;<span class="ident" id="2889322">v</span><span class="op" id="2889323">.</span><span class="ident" id="2889324">kind</span><span class="op" id="2889328">(</span><span class="op" id="2889329">)</span><span class="op" id="2889330">}</span><span class="op" id="2889331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889337">tt</span>&nbsp;<span class="op" id="2889340">:=</span>&nbsp;<span class="op" id="2889343">(</span><span class="op" id="2889344">*</span><span class="ident" id="2889345">structType</span><span class="op" id="2889355">)</span><span class="op" id="2889356">(</span><span class="ident" id="2889357">unsafe</span><span class="op" id="2889363">.</span><span class="ident" id="2889364">Pointer</span><span class="op" id="2889371">(</span><span class="ident" id="2889372">v</span><span class="op" id="2889373">.</span><span class="ident" id="2889374">typ</span><span class="op" id="2889377">)</span><span class="op" id="2889378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889381">if</span>&nbsp;<span class="builtintype" id="2889384">uint</span><span class="op" id="2889388">(</span><span class="ident" id="2889389">i</span><span class="op" id="2889390">)</span>&nbsp;<span class="op" id="2889392">&gt;=</span>&nbsp;<span class="builtintype" id="2889395">uint</span><span class="op" id="2889399">(</span><span class="builtinfunc" id="2889400">len</span><span class="op" id="2889403">(</span><span class="ident" id="2889404">tt</span><span class="op" id="2889406">.</span><span class="ident" id="2889407">fields</span><span class="op" id="2889413">)</span><span class="op" id="2889414">)</span>&nbsp;<span class="op" id="2889416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2889420">panic</span><span class="op" id="2889425">(</span><span class="string" id="2889426">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2889461">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889467">field</span>&nbsp;<span class="op" id="2889473">:=</span>&nbsp;<span class="op" id="2889476">&amp;</span><span class="ident" id="2889477">tt</span><span class="op" id="2889479">.</span><span class="ident" id="2889480">fields</span><span class="op" id="2889486">[</span><span class="ident" id="2889487">i</span><span class="op" id="2889488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889491">typ</span>&nbsp;<span class="op" id="2889495">:=</span>&nbsp;<span class="ident" id="2889498">field</span><span class="op" id="2889503">.</span><span class="ident" id="2889504">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889510">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889546">fl</span>&nbsp;<span class="op" id="2889549">:=</span>&nbsp;<span class="ident" id="2889552">v</span><span class="op" id="2889553">.</span><span class="ident" id="2889554">flag</span><span class="op" id="2889558">&amp;</span><span class="op" id="2889559">(</span><span class="ident" id="2889560">flagRO</span><span class="op" id="2889566">|</span><span class="ident" id="2889567">flagIndir</span><span class="op" id="2889576">|</span><span class="ident" id="2889577">flagAddr</span><span class="op" id="2889585">)</span>&nbsp;<span class="op" id="2889587">|</span>&nbsp;<span class="ident" id="2889589">flag</span><span class="op" id="2889593">(</span><span class="ident" id="2889594">typ</span><span class="op" id="2889597">.</span><span class="ident" id="2889598">Kind</span><span class="op" id="2889602">(</span><span class="op" id="2889603">)</span><span class="op" id="2889604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889607">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889652">if</span>&nbsp;<span class="ident" id="2889655">field</span><span class="op" id="2889660">.</span><span class="ident" id="2889661">pkgPath</span>&nbsp;<span class="op" id="2889669">!=</span>&nbsp;<span class="builtintype" id="2889672">nil</span>&nbsp;<span class="op" id="2889676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889680">fl</span>&nbsp;<span class="op" id="2889683">|=</span>&nbsp;<span class="ident" id="2889686">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889694">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889697">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889753">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889818">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889866">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2889924">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889967">ptr</span>&nbsp;<span class="op" id="2889971">:=</span>&nbsp;<span class="ident" id="2889974">unsafe</span><span class="op" id="2889980">.</span><span class="ident" id="2889981">Pointer</span><span class="op" id="2889988">(</span><span class="builtintype" id="2889989">uintptr</span><span class="op" id="2889996">(</span><span class="ident" id="2889997">v</span><span class="op" id="2889998">.</span><span class="ident" id="2889999">ptr</span><span class="op" id="2890002">)</span>&nbsp;<span class="op" id="2890004">+</span>&nbsp;<span class="ident" id="2890006">field</span><span class="op" id="2890011">.</span><span class="ident" id="2890012">offset</span><span class="op" id="2890018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890021">return</span>&nbsp;<span class="ident" id="2890028">Value</span><span class="op" id="2890033">{</span><span class="ident" id="2890034">typ</span><span class="op" id="2890037">,</span>&nbsp;<span class="ident" id="2890039">ptr</span><span class="op" id="2890042">,</span>&nbsp;<span class="ident" id="2890044">fl</span><span class="op" id="2890046">}</span><br>
<span class="lineno"></span><span class="op" id="2890048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890051">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2890116">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2890156">func</span>&nbsp;<span class="op" id="2890161">(</span><span class="ident" id="2890162">v</span>&nbsp;<span class="ident" id="2890164">Value</span><span class="op" id="2890169">)</span>&nbsp;<span class="ident" id="2890171">FieldByIndex</span><span class="op" id="2890183">(</span><span class="ident" id="2890184">index</span>&nbsp;<span class="op" id="2890190">[</span><span class="op" id="2890191">]</span><span class="builtintype" id="2890192">int</span><span class="op" id="2890195">)</span>&nbsp;<span class="ident" id="2890197">Value</span>&nbsp;<span class="op" id="2890203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890206">if</span>&nbsp;<span class="builtinfunc" id="2890209">len</span><span class="op" id="2890212">(</span><span class="ident" id="2890213">index</span><span class="op" id="2890218">)</span>&nbsp;<span class="op" id="2890220">==</span>&nbsp;<span class="num" id="2890223">1</span>&nbsp;<span class="op" id="2890225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890229">return</span>&nbsp;<span class="ident" id="2890236">v</span><span class="op" id="2890237">.</span><span class="ident" id="2890238">Field</span><span class="op" id="2890243">(</span><span class="ident" id="2890244">index</span><span class="op" id="2890249">[</span><span class="num" id="2890250">0</span><span class="op" id="2890251">]</span><span class="op" id="2890252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890255">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2890258">v</span><span class="op" id="2890259">.</span><span class="ident" id="2890260">mustBe</span><span class="op" id="2890266">(</span><span class="ident" id="2890267">Struct</span><span class="op" id="2890273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890276">for</span>&nbsp;<span class="ident" id="2890280">i</span><span class="op" id="2890281">,</span>&nbsp;<span class="ident" id="2890283">x</span>&nbsp;<span class="op" id="2890285">:=</span>&nbsp;<span class="keyword" id="2890288">range</span>&nbsp;<span class="ident" id="2890294">index</span>&nbsp;<span class="op" id="2890300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890304">if</span>&nbsp;<span class="ident" id="2890307">i</span>&nbsp;<span class="op" id="2890309">&gt;</span>&nbsp;<span class="num" id="2890311">0</span>&nbsp;<span class="op" id="2890313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890318">if</span>&nbsp;<span class="ident" id="2890321">v</span><span class="op" id="2890322">.</span><span class="ident" id="2890323">Kind</span><span class="op" id="2890327">(</span><span class="op" id="2890328">)</span>&nbsp;<span class="op" id="2890330">==</span>&nbsp;<span class="ident" id="2890333">Ptr</span>&nbsp;<span class="op" id="2890337">&amp;&amp;</span>&nbsp;<span class="ident" id="2890340">v</span><span class="op" id="2890341">.</span><span class="ident" id="2890342">typ</span><span class="op" id="2890345">.</span><span class="ident" id="2890346">Elem</span><span class="op" id="2890350">(</span><span class="op" id="2890351">)</span><span class="op" id="2890352">.</span><span class="ident" id="2890353">Kind</span><span class="op" id="2890357">(</span><span class="op" id="2890358">)</span>&nbsp;<span class="op" id="2890360">==</span>&nbsp;<span class="ident" id="2890363">Struct</span>&nbsp;<span class="op" id="2890370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890376">if</span>&nbsp;<span class="ident" id="2890379">v</span><span class="op" id="2890380">.</span><span class="ident" id="2890381">IsNil</span><span class="op" id="2890386">(</span><span class="op" id="2890387">)</span>&nbsp;<span class="op" id="2890389">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2890396">panic</span><span class="op" id="2890401">(</span><span class="string" id="2890402">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2890463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2890475">v</span>&nbsp;<span class="op" id="2890477">=</span>&nbsp;<span class="ident" id="2890479">v</span><span class="op" id="2890480">.</span><span class="ident" id="2890481">Elem</span><span class="op" id="2890485">(</span><span class="op" id="2890486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890495">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2890499">v</span>&nbsp;<span class="op" id="2890501">=</span>&nbsp;<span class="ident" id="2890503">v</span><span class="op" id="2890504">.</span><span class="ident" id="2890505">Field</span><span class="op" id="2890510">(</span><span class="ident" id="2890511">x</span><span class="op" id="2890512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890518">return</span>&nbsp;<span class="ident" id="2890525">v</span><br>
<span class="lineno"></span><span class="op" id="2890527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2890530">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2890591">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2890643">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2890683">func</span>&nbsp;<span class="op" id="2890688">(</span><span class="ident" id="2890689">v</span>&nbsp;<span class="ident" id="2890691">Value</span><span class="op" id="2890696">)</span>&nbsp;<span class="ident" id="2890698">FieldByName</span><span class="op" id="2890709">(</span><span class="ident" id="2890710">name</span>&nbsp;<span class="builtintype" id="2890715">string</span><span class="op" id="2890721">)</span>&nbsp;<span class="ident" id="2890723">Value</span>&nbsp;<span class="op" id="2890729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2890732">v</span><span class="op" id="2890733">.</span><span class="ident" id="2890734">mustBe</span><span class="op" id="2890740">(</span><span class="ident" id="2890741">Struct</span><span class="op" id="2890747">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890750">if</span>&nbsp;<span class="ident" id="2890753">f</span><span class="op" id="2890754">,</span>&nbsp;<span class="ident" id="2890756">ok</span>&nbsp;<span class="op" id="2890759">:=</span>&nbsp;<span class="ident" id="2890762">v</span><span class="op" id="2890763">.</span><span class="ident" id="2890764">typ</span><span class="op" id="2890767">.</span><span class="ident" id="2890768">FieldByName</span><span class="op" id="2890779">(</span><span class="ident" id="2890780">name</span><span class="op" id="2890784">)</span><span class="op" id="2890785">;</span>&nbsp;<span class="ident" id="2890787">ok</span>&nbsp;<span class="op" id="2890790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890794">return</span>&nbsp;<span class="ident" id="2890801">v</span><span class="op" id="2890802">.</span><span class="ident" id="2890803">FieldByIndex</span><span class="op" id="2890815">(</span><span class="ident" id="2890816">f</span><span class="op" id="2890817">.</span><span class="ident" id="2890818">Index</span><span class="op" id="2890823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2890826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890829">return</span>&nbsp;<span class="ident" id="2890836">Value</span><span class="op" id="2890841">{</span><span class="op" id="2890842">}</span><br>
<span class="lineno"></span><span class="op" id="2890844">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2890847">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2890903">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2890941">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2890981">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2891033">func</span>&nbsp;<span class="op" id="2891038">(</span><span class="ident" id="2891039">v</span>&nbsp;<span class="ident" id="2891041">Value</span><span class="op" id="2891046">)</span>&nbsp;<span class="ident" id="2891048">FieldByNameFunc</span><span class="op" id="2891063">(</span><span class="ident" id="2891064">match</span>&nbsp;<span class="keyword" id="2891070">func</span><span class="op" id="2891074">(</span><span class="builtintype" id="2891075">string</span><span class="op" id="2891081">)</span>&nbsp;<span class="builtintype" id="2891083">bool</span><span class="op" id="2891087">)</span>&nbsp;<span class="ident" id="2891089">Value</span>&nbsp;<span class="op" id="2891095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891098">if</span>&nbsp;<span class="ident" id="2891101">f</span><span class="op" id="2891102">,</span>&nbsp;<span class="ident" id="2891104">ok</span>&nbsp;<span class="op" id="2891107">:=</span>&nbsp;<span class="ident" id="2891110">v</span><span class="op" id="2891111">.</span><span class="ident" id="2891112">typ</span><span class="op" id="2891115">.</span><span class="ident" id="2891116">FieldByNameFunc</span><span class="op" id="2891131">(</span><span class="ident" id="2891132">match</span><span class="op" id="2891137">)</span><span class="op" id="2891138">;</span>&nbsp;<span class="ident" id="2891140">ok</span>&nbsp;<span class="op" id="2891143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891147">return</span>&nbsp;<span class="ident" id="2891154">v</span><span class="op" id="2891155">.</span><span class="ident" id="2891156">FieldByIndex</span><span class="op" id="2891168">(</span><span class="ident" id="2891169">f</span><span class="op" id="2891170">.</span><span class="ident" id="2891171">Index</span><span class="op" id="2891176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2891179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891182">return</span>&nbsp;<span class="ident" id="2891189">Value</span><span class="op" id="2891194">{</span><span class="op" id="2891195">}</span><br>
<span class="lineno">775</span><span class="op" id="2891197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891200">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2891253">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2891304">func</span>&nbsp;<span class="op" id="2891309">(</span><span class="ident" id="2891310">v</span>&nbsp;<span class="ident" id="2891312">Value</span><span class="op" id="2891317">)</span>&nbsp;<span class="ident" id="2891319">Float</span><span class="op" id="2891324">(</span><span class="op" id="2891325">)</span>&nbsp;<span class="builtintype" id="2891327">float64</span>&nbsp;<span class="op" id="2891335">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2891338">k</span>&nbsp;<span class="op" id="2891340">:=</span>&nbsp;<span class="ident" id="2891343">v</span><span class="op" id="2891344">.</span><span class="ident" id="2891345">kind</span><span class="op" id="2891349">(</span><span class="op" id="2891350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891353">switch</span>&nbsp;<span class="ident" id="2891360">k</span>&nbsp;<span class="op" id="2891362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891365">case</span>&nbsp;<span class="ident" id="2891370">Float32</span><span class="op" id="2891377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891381">return</span>&nbsp;<span class="builtintype" id="2891388">float64</span><span class="op" id="2891395">(</span><span class="op" id="2891396">*</span><span class="op" id="2891397">(</span><span class="op" id="2891398">*</span><span class="builtintype" id="2891399">float32</span><span class="op" id="2891406">)</span><span class="op" id="2891407">(</span><span class="ident" id="2891408">v</span><span class="op" id="2891409">.</span><span class="ident" id="2891410">ptr</span><span class="op" id="2891413">)</span><span class="op" id="2891414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891417">case</span>&nbsp;<span class="ident" id="2891422">Float64</span><span class="op" id="2891429">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891433">return</span>&nbsp;<span class="op" id="2891440">*</span><span class="op" id="2891441">(</span><span class="op" id="2891442">*</span><span class="builtintype" id="2891443">float64</span><span class="op" id="2891450">)</span><span class="op" id="2891451">(</span><span class="ident" id="2891452">v</span><span class="op" id="2891453">.</span><span class="ident" id="2891454">ptr</span><span class="op" id="2891457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2891460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2891463">panic</span><span class="op" id="2891468">(</span><span class="op" id="2891469">&amp;</span><span class="ident" id="2891470">ValueError</span><span class="op" id="2891480">{</span><span class="string" id="2891481">&#34;reflect.Value.Float&#34;</span><span class="op" id="2891502">,</span>&nbsp;<span class="ident" id="2891504">v</span><span class="op" id="2891505">.</span><span class="ident" id="2891506">kind</span><span class="op" id="2891510">(</span><span class="op" id="2891511">)</span><span class="op" id="2891512">}</span><span class="op" id="2891513">)</span><br>
<span class="lineno"></span><span class="op" id="2891515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2891518">var</span>&nbsp;<span class="ident" id="2891522">uint8Type</span>&nbsp;<span class="op" id="2891532">=</span>&nbsp;<span class="ident" id="2891534">TypeOf</span><span class="op" id="2891540">(</span><span class="builtintype" id="2891541">uint8</span><span class="op" id="2891546">(</span><span class="num" id="2891547">0</span><span class="op" id="2891548">)</span><span class="op" id="2891549">)</span><span class="op" id="2891550">.</span><span class="op" id="2891551">(</span><span class="op" id="2891552">*</span><span class="ident" id="2891553">rtype</span><span class="op" id="2891558">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891561">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2891596">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2891674">func</span>&nbsp;<span class="op" id="2891679">(</span><span class="ident" id="2891680">v</span>&nbsp;<span class="ident" id="2891682">Value</span><span class="op" id="2891687">)</span>&nbsp;<span class="ident" id="2891689">Index</span><span class="op" id="2891694">(</span><span class="ident" id="2891695">i</span>&nbsp;<span class="builtintype" id="2891697">int</span><span class="op" id="2891700">)</span>&nbsp;<span class="ident" id="2891702">Value</span>&nbsp;<span class="op" id="2891708">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891711">switch</span>&nbsp;<span class="ident" id="2891718">v</span><span class="op" id="2891719">.</span><span class="ident" id="2891720">kind</span><span class="op" id="2891724">(</span><span class="op" id="2891725">)</span>&nbsp;<span class="op" id="2891727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891730">case</span>&nbsp;<span class="ident" id="2891735">Array</span><span class="op" id="2891740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2891744">tt</span>&nbsp;<span class="op" id="2891747">:=</span>&nbsp;<span class="op" id="2891750">(</span><span class="op" id="2891751">*</span><span class="ident" id="2891752">arrayType</span><span class="op" id="2891761">)</span><span class="op" id="2891762">(</span><span class="ident" id="2891763">unsafe</span><span class="op" id="2891769">.</span><span class="ident" id="2891770">Pointer</span><span class="op" id="2891777">(</span><span class="ident" id="2891778">v</span><span class="op" id="2891779">.</span><span class="ident" id="2891780">typ</span><span class="op" id="2891783">)</span><span class="op" id="2891784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891788">if</span>&nbsp;<span class="builtintype" id="2891791">uint</span><span class="op" id="2891795">(</span><span class="ident" id="2891796">i</span><span class="op" id="2891797">)</span>&nbsp;<span class="op" id="2891799">&gt;=</span>&nbsp;<span class="builtintype" id="2891802">uint</span><span class="op" id="2891806">(</span><span class="ident" id="2891807">tt</span><span class="op" id="2891809">.</span><span class="builtinfunc" id="2891810">len</span><span class="op" id="2891813">)</span>&nbsp;<span class="op" id="2891815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2891820">panic</span><span class="op" id="2891825">(</span><span class="string" id="2891826">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2891861">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2891865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2891869">typ</span>&nbsp;<span class="op" id="2891873">:=</span>&nbsp;<span class="ident" id="2891876">tt</span><span class="op" id="2891878">.</span><span class="ident" id="2891879">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2891886">offset</span>&nbsp;<span class="op" id="2891893">:=</span>&nbsp;<span class="builtintype" id="2891896">uintptr</span><span class="op" id="2891903">(</span><span class="ident" id="2891904">i</span><span class="op" id="2891905">)</span>&nbsp;<span class="op" id="2891907">*</span>&nbsp;<span class="ident" id="2891909">typ</span><span class="op" id="2891912">.</span><span class="ident" id="2891913">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2891921">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2891977">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892042">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892091">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892158">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892196">val</span>&nbsp;<span class="op" id="2892200">:=</span>&nbsp;<span class="ident" id="2892203">unsafe</span><span class="op" id="2892209">.</span><span class="ident" id="2892210">Pointer</span><span class="op" id="2892217">(</span><span class="builtintype" id="2892218">uintptr</span><span class="op" id="2892225">(</span><span class="ident" id="2892226">v</span><span class="op" id="2892227">.</span><span class="ident" id="2892228">ptr</span><span class="op" id="2892231">)</span>&nbsp;<span class="op" id="2892233">+</span>&nbsp;<span class="ident" id="2892235">offset</span><span class="op" id="2892241">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892245">fl</span>&nbsp;<span class="op" id="2892248">:=</span>&nbsp;<span class="ident" id="2892251">v</span><span class="op" id="2892252">.</span><span class="ident" id="2892253">flag</span><span class="op" id="2892257">&amp;</span><span class="op" id="2892258">(</span><span class="ident" id="2892259">flagRO</span><span class="op" id="2892265">|</span><span class="ident" id="2892266">flagIndir</span><span class="op" id="2892275">|</span><span class="ident" id="2892276">flagAddr</span><span class="op" id="2892284">)</span>&nbsp;<span class="op" id="2892286">|</span>&nbsp;<span class="ident" id="2892288">flag</span><span class="op" id="2892292">(</span><span class="ident" id="2892293">typ</span><span class="op" id="2892296">.</span><span class="ident" id="2892297">Kind</span><span class="op" id="2892301">(</span><span class="op" id="2892302">)</span><span class="op" id="2892303">)</span>&nbsp;<span class="comment" id="2892305">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892337">return</span>&nbsp;<span class="ident" id="2892344">Value</span><span class="op" id="2892349">{</span><span class="ident" id="2892350">typ</span><span class="op" id="2892353">,</span>&nbsp;<span class="ident" id="2892355">val</span><span class="op" id="2892358">,</span>&nbsp;<span class="ident" id="2892360">fl</span><span class="op" id="2892362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892366">case</span>&nbsp;<span class="ident" id="2892371">Slice</span><span class="op" id="2892376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892380">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892419">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892467">s</span>&nbsp;<span class="op" id="2892469">:=</span>&nbsp;<span class="op" id="2892472">(</span><span class="op" id="2892473">*</span><span class="ident" id="2892474">sliceHeader</span><span class="op" id="2892485">)</span><span class="op" id="2892486">(</span><span class="ident" id="2892487">v</span><span class="op" id="2892488">.</span><span class="ident" id="2892489">ptr</span><span class="op" id="2892492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892496">if</span>&nbsp;<span class="builtintype" id="2892499">uint</span><span class="op" id="2892503">(</span><span class="ident" id="2892504">i</span><span class="op" id="2892505">)</span>&nbsp;<span class="op" id="2892507">&gt;=</span>&nbsp;<span class="builtintype" id="2892510">uint</span><span class="op" id="2892514">(</span><span class="ident" id="2892515">s</span><span class="op" id="2892516">.</span><span class="ident" id="2892517">Len</span><span class="op" id="2892520">)</span>&nbsp;<span class="op" id="2892522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2892527">panic</span><span class="op" id="2892532">(</span><span class="string" id="2892533">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2892568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892572">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892576">tt</span>&nbsp;<span class="op" id="2892579">:=</span>&nbsp;<span class="op" id="2892582">(</span><span class="op" id="2892583">*</span><span class="ident" id="2892584">sliceType</span><span class="op" id="2892593">)</span><span class="op" id="2892594">(</span><span class="ident" id="2892595">unsafe</span><span class="op" id="2892601">.</span><span class="ident" id="2892602">Pointer</span><span class="op" id="2892609">(</span><span class="ident" id="2892610">v</span><span class="op" id="2892611">.</span><span class="ident" id="2892612">typ</span><span class="op" id="2892615">)</span><span class="op" id="2892616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892620">typ</span>&nbsp;<span class="op" id="2892624">:=</span>&nbsp;<span class="ident" id="2892627">tt</span><span class="op" id="2892629">.</span><span class="ident" id="2892630">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892637">val</span>&nbsp;<span class="op" id="2892641">:=</span>&nbsp;<span class="ident" id="2892644">unsafe</span><span class="op" id="2892650">.</span><span class="ident" id="2892651">Pointer</span><span class="op" id="2892658">(</span><span class="builtintype" id="2892659">uintptr</span><span class="op" id="2892666">(</span><span class="ident" id="2892667">s</span><span class="op" id="2892668">.</span><span class="ident" id="2892669">Data</span><span class="op" id="2892673">)</span>&nbsp;<span class="op" id="2892675">+</span>&nbsp;<span class="builtintype" id="2892677">uintptr</span><span class="op" id="2892684">(</span><span class="ident" id="2892685">i</span><span class="op" id="2892686">)</span><span class="op" id="2892687">*</span><span class="ident" id="2892688">typ</span><span class="op" id="2892691">.</span><span class="ident" id="2892692">size</span><span class="op" id="2892696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892700">fl</span>&nbsp;<span class="op" id="2892703">:=</span>&nbsp;<span class="ident" id="2892706">flagAddr</span>&nbsp;<span class="op" id="2892715">|</span>&nbsp;<span class="ident" id="2892717">flagIndir</span>&nbsp;<span class="op" id="2892727">|</span>&nbsp;<span class="ident" id="2892729">v</span><span class="op" id="2892730">.</span><span class="ident" id="2892731">flag</span><span class="op" id="2892735">&amp;</span><span class="ident" id="2892736">flagRO</span>&nbsp;<span class="op" id="2892743">|</span>&nbsp;<span class="ident" id="2892745">flag</span><span class="op" id="2892749">(</span><span class="ident" id="2892750">typ</span><span class="op" id="2892753">.</span><span class="ident" id="2892754">Kind</span><span class="op" id="2892758">(</span><span class="op" id="2892759">)</span><span class="op" id="2892760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892764">return</span>&nbsp;<span class="ident" id="2892771">Value</span><span class="op" id="2892776">{</span><span class="ident" id="2892777">typ</span><span class="op" id="2892780">,</span>&nbsp;<span class="ident" id="2892782">val</span><span class="op" id="2892785">,</span>&nbsp;<span class="ident" id="2892787">fl</span><span class="op" id="2892789">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892793">case</span>&nbsp;<span class="ident" id="2892798">String</span><span class="op" id="2892804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892808">s</span>&nbsp;<span class="op" id="2892810">:=</span>&nbsp;<span class="op" id="2892813">(</span><span class="op" id="2892814">*</span><span class="ident" id="2892815">stringHeader</span><span class="op" id="2892827">)</span><span class="op" id="2892828">(</span><span class="ident" id="2892829">v</span><span class="op" id="2892830">.</span><span class="ident" id="2892831">ptr</span><span class="op" id="2892834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892838">if</span>&nbsp;<span class="builtintype" id="2892841">uint</span><span class="op" id="2892845">(</span><span class="ident" id="2892846">i</span><span class="op" id="2892847">)</span>&nbsp;<span class="op" id="2892849">&gt;=</span>&nbsp;<span class="builtintype" id="2892852">uint</span><span class="op" id="2892856">(</span><span class="ident" id="2892857">s</span><span class="op" id="2892858">.</span><span class="ident" id="2892859">Len</span><span class="op" id="2892862">)</span>&nbsp;<span class="op" id="2892864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2892869">panic</span><span class="op" id="2892874">(</span><span class="string" id="2892875">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2892911">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892919">p</span>&nbsp;<span class="op" id="2892921">:=</span>&nbsp;<span class="ident" id="2892924">unsafe</span><span class="op" id="2892930">.</span><span class="ident" id="2892931">Pointer</span><span class="op" id="2892938">(</span><span class="builtintype" id="2892939">uintptr</span><span class="op" id="2892946">(</span><span class="ident" id="2892947">s</span><span class="op" id="2892948">.</span><span class="ident" id="2892949">Data</span><span class="op" id="2892953">)</span>&nbsp;<span class="op" id="2892955">+</span>&nbsp;<span class="builtintype" id="2892957">uintptr</span><span class="op" id="2892964">(</span><span class="ident" id="2892965">i</span><span class="op" id="2892966">)</span><span class="op" id="2892967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892971">fl</span>&nbsp;<span class="op" id="2892974">:=</span>&nbsp;<span class="ident" id="2892977">v</span><span class="op" id="2892978">.</span><span class="ident" id="2892979">flag</span><span class="op" id="2892983">&amp;</span><span class="ident" id="2892984">flagRO</span>&nbsp;<span class="op" id="2892991">|</span>&nbsp;<span class="ident" id="2892993">flag</span><span class="op" id="2892997">(</span><span class="ident" id="2892998">Uint8</span><span class="op" id="2893003">)</span>&nbsp;<span class="op" id="2893005">|</span>&nbsp;<span class="ident" id="2893007">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893019">return</span>&nbsp;<span class="ident" id="2893026">Value</span><span class="op" id="2893031">{</span><span class="ident" id="2893032">uint8Type</span><span class="op" id="2893041">,</span>&nbsp;<span class="ident" id="2893043">p</span><span class="op" id="2893044">,</span>&nbsp;<span class="ident" id="2893046">fl</span><span class="op" id="2893048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2893051">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2893054">panic</span><span class="op" id="2893059">(</span><span class="op" id="2893060">&amp;</span><span class="ident" id="2893061">ValueError</span><span class="op" id="2893071">{</span><span class="string" id="2893072">&#34;reflect.Value.Index&#34;</span><span class="op" id="2893093">,</span>&nbsp;<span class="ident" id="2893095">v</span><span class="op" id="2893096">.</span><span class="ident" id="2893097">kind</span><span class="op" id="2893101">(</span><span class="op" id="2893102">)</span><span class="op" id="2893103">}</span><span class="op" id="2893104">)</span><br>
<span class="lineno"></span><span class="op" id="2893106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893109">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2893159">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2893226">func</span>&nbsp;<span class="op" id="2893231">(</span><span class="ident" id="2893232">v</span>&nbsp;<span class="ident" id="2893234">Value</span><span class="op" id="2893239">)</span>&nbsp;<span class="ident" id="2893241">Int</span><span class="op" id="2893244">(</span><span class="op" id="2893245">)</span>&nbsp;<span class="builtintype" id="2893247">int64</span>&nbsp;<span class="op" id="2893253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2893256">k</span>&nbsp;<span class="op" id="2893258">:=</span>&nbsp;<span class="ident" id="2893261">v</span><span class="op" id="2893262">.</span><span class="ident" id="2893263">kind</span><span class="op" id="2893267">(</span><span class="op" id="2893268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2893271">p</span>&nbsp;<span class="op" id="2893273">:=</span>&nbsp;<span class="ident" id="2893276">v</span><span class="op" id="2893277">.</span><span class="ident" id="2893278">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893283">switch</span>&nbsp;<span class="ident" id="2893290">k</span>&nbsp;<span class="op" id="2893292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893295">case</span>&nbsp;<span class="ident" id="2893300">Int</span><span class="op" id="2893303">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893307">return</span>&nbsp;<span class="builtintype" id="2893314">int64</span><span class="op" id="2893319">(</span><span class="op" id="2893320">*</span><span class="op" id="2893321">(</span><span class="op" id="2893322">*</span><span class="builtintype" id="2893323">int</span><span class="op" id="2893326">)</span><span class="op" id="2893327">(</span><span class="ident" id="2893328">p</span><span class="op" id="2893329">)</span><span class="op" id="2893330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893333">case</span>&nbsp;<span class="ident" id="2893338">Int8</span><span class="op" id="2893342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893346">return</span>&nbsp;<span class="builtintype" id="2893353">int64</span><span class="op" id="2893358">(</span><span class="op" id="2893359">*</span><span class="op" id="2893360">(</span><span class="op" id="2893361">*</span><span class="builtintype" id="2893362">int8</span><span class="op" id="2893366">)</span><span class="op" id="2893367">(</span><span class="ident" id="2893368">p</span><span class="op" id="2893369">)</span><span class="op" id="2893370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893373">case</span>&nbsp;<span class="ident" id="2893378">Int16</span><span class="op" id="2893383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893387">return</span>&nbsp;<span class="builtintype" id="2893394">int64</span><span class="op" id="2893399">(</span><span class="op" id="2893400">*</span><span class="op" id="2893401">(</span><span class="op" id="2893402">*</span><span class="builtintype" id="2893403">int16</span><span class="op" id="2893408">)</span><span class="op" id="2893409">(</span><span class="ident" id="2893410">p</span><span class="op" id="2893411">)</span><span class="op" id="2893412">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893415">case</span>&nbsp;<span class="ident" id="2893420">Int32</span><span class="op" id="2893425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893429">return</span>&nbsp;<span class="builtintype" id="2893436">int64</span><span class="op" id="2893441">(</span><span class="op" id="2893442">*</span><span class="op" id="2893443">(</span><span class="op" id="2893444">*</span><span class="builtintype" id="2893445">int32</span><span class="op" id="2893450">)</span><span class="op" id="2893451">(</span><span class="ident" id="2893452">p</span><span class="op" id="2893453">)</span><span class="op" id="2893454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893457">case</span>&nbsp;<span class="ident" id="2893462">Int64</span><span class="op" id="2893467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893471">return</span>&nbsp;<span class="builtintype" id="2893478">int64</span><span class="op" id="2893483">(</span><span class="op" id="2893484">*</span><span class="op" id="2893485">(</span><span class="op" id="2893486">*</span><span class="builtintype" id="2893487">int64</span><span class="op" id="2893492">)</span><span class="op" id="2893493">(</span><span class="ident" id="2893494">p</span><span class="op" id="2893495">)</span><span class="op" id="2893496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2893499">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2893502">panic</span><span class="op" id="2893507">(</span><span class="op" id="2893508">&amp;</span><span class="ident" id="2893509">ValueError</span><span class="op" id="2893519">{</span><span class="string" id="2893520">&#34;reflect.Value.Int&#34;</span><span class="op" id="2893539">,</span>&nbsp;<span class="ident" id="2893541">v</span><span class="op" id="2893542">.</span><span class="ident" id="2893543">kind</span><span class="op" id="2893547">(</span><span class="op" id="2893548">)</span><span class="op" id="2893549">}</span><span class="op" id="2893550">)</span><br>
<span class="lineno"></span><span class="op" id="2893552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893555">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2893628">func</span>&nbsp;<span class="op" id="2893633">(</span><span class="ident" id="2893634">v</span>&nbsp;<span class="ident" id="2893636">Value</span><span class="op" id="2893641">)</span>&nbsp;<span class="ident" id="2893643">CanInterface</span><span class="op" id="2893655">(</span><span class="op" id="2893656">)</span>&nbsp;<span class="builtintype" id="2893658">bool</span>&nbsp;<span class="op" id="2893663">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893666">if</span>&nbsp;<span class="ident" id="2893669">v</span><span class="op" id="2893670">.</span><span class="ident" id="2893671">flag</span>&nbsp;<span class="op" id="2893676">==</span>&nbsp;<span class="num" id="2893679">0</span>&nbsp;<span class="op" id="2893681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2893685">panic</span><span class="op" id="2893690">(</span><span class="op" id="2893691">&amp;</span><span class="ident" id="2893692">ValueError</span><span class="op" id="2893702">{</span><span class="string" id="2893703">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2893731">,</span>&nbsp;<span class="ident" id="2893733">Invalid</span><span class="op" id="2893740">}</span><span class="op" id="2893741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2893744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2893747">return</span>&nbsp;<span class="ident" id="2893754">v</span><span class="op" id="2893755">.</span><span class="ident" id="2893756">flag</span><span class="op" id="2893760">&amp;</span><span class="ident" id="2893761">flagRO</span>&nbsp;<span class="op" id="2893768">==</span>&nbsp;<span class="num" id="2893771">0</span><br>
<span class="lineno"></span><span class="op" id="2893773">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2893776">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2893834">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2893858">//&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2893904">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2893956">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2893985">func</span>&nbsp;<span class="op" id="2893990">(</span><span class="ident" id="2893991">v</span>&nbsp;<span class="ident" id="2893993">Value</span><span class="op" id="2893998">)</span>&nbsp;<span class="ident" id="2894000">Interface</span><span class="op" id="2894009">(</span><span class="op" id="2894010">)</span>&nbsp;<span class="op" id="2894012">(</span><span class="ident" id="2894013">i</span>&nbsp;<span class="keyword" id="2894015">interface</span><span class="op" id="2894024">{</span><span class="op" id="2894025">}</span><span class="op" id="2894026">)</span>&nbsp;<span class="op" id="2894028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894031">return</span>&nbsp;<span class="ident" id="2894038">valueInterface</span><span class="op" id="2894052">(</span><span class="ident" id="2894053">v</span><span class="op" id="2894054">,</span>&nbsp;<span class="builtintype" id="2894056">true</span><span class="op" id="2894060">)</span><br>
<span class="lineno"></span><span class="op" id="2894062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2894065">func</span>&nbsp;<span class="ident" id="2894070">valueInterface</span><span class="op" id="2894084">(</span><span class="ident" id="2894085">v</span>&nbsp;<span class="ident" id="2894087">Value</span><span class="op" id="2894092">,</span>&nbsp;<span class="ident" id="2894094">safe</span>&nbsp;<span class="builtintype" id="2894099">bool</span><span class="op" id="2894103">)</span>&nbsp;<span class="keyword" id="2894105">interface</span><span class="op" id="2894114">{</span><span class="op" id="2894115">}</span>&nbsp;<span class="op" id="2894117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894120">if</span>&nbsp;<span class="ident" id="2894123">v</span><span class="op" id="2894124">.</span><span class="ident" id="2894125">flag</span>&nbsp;<span class="op" id="2894130">==</span>&nbsp;<span class="num" id="2894133">0</span>&nbsp;<span class="op" id="2894135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2894139">panic</span><span class="op" id="2894144">(</span><span class="op" id="2894145">&amp;</span><span class="ident" id="2894146">ValueError</span><span class="op" id="2894156">{</span><span class="string" id="2894157">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2894182">,</span>&nbsp;<span class="num" id="2894184">0</span><span class="op" id="2894185">}</span><span class="op" id="2894186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894192">if</span>&nbsp;<span class="ident" id="2894195">safe</span>&nbsp;<span class="op" id="2894200">&amp;&amp;</span>&nbsp;<span class="ident" id="2894203">v</span><span class="op" id="2894204">.</span><span class="ident" id="2894205">flag</span><span class="op" id="2894209">&amp;</span><span class="ident" id="2894210">flagRO</span>&nbsp;<span class="op" id="2894217">!=</span>&nbsp;<span class="num" id="2894220">0</span>&nbsp;<span class="op" id="2894222">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894226">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894287">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894342">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2894408">panic</span><span class="op" id="2894413">(</span><span class="string" id="2894414">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2894501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894504">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894507">if</span>&nbsp;<span class="ident" id="2894510">v</span><span class="op" id="2894511">.</span><span class="ident" id="2894512">flag</span><span class="op" id="2894516">&amp;</span><span class="ident" id="2894517">flagMethod</span>&nbsp;<span class="op" id="2894528">!=</span>&nbsp;<span class="num" id="2894531">0</span>&nbsp;<span class="op" id="2894533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2894537">v</span>&nbsp;<span class="op" id="2894539">=</span>&nbsp;<span class="ident" id="2894541">makeMethodValue</span><span class="op" id="2894556">(</span><span class="string" id="2894557">&#34;Interface&#34;</span><span class="op" id="2894568">,</span>&nbsp;<span class="ident" id="2894570">v</span><span class="op" id="2894571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894578">if</span>&nbsp;<span class="ident" id="2894581">v</span><span class="op" id="2894582">.</span><span class="ident" id="2894583">kind</span><span class="op" id="2894587">(</span><span class="op" id="2894588">)</span>&nbsp;<span class="op" id="2894590">==</span>&nbsp;<span class="ident" id="2894593">Interface</span>&nbsp;<span class="op" id="2894603">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894607">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894667">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894724">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894759">if</span>&nbsp;<span class="ident" id="2894762">v</span><span class="op" id="2894763">.</span><span class="ident" id="2894764">NumMethod</span><span class="op" id="2894773">(</span><span class="op" id="2894774">)</span>&nbsp;<span class="op" id="2894776">==</span>&nbsp;<span class="num" id="2894779">0</span>&nbsp;<span class="op" id="2894781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894786">return</span>&nbsp;<span class="op" id="2894793">*</span><span class="op" id="2894794">(</span><span class="op" id="2894795">*</span><span class="keyword" id="2894796">interface</span><span class="op" id="2894805">{</span><span class="op" id="2894806">}</span><span class="op" id="2894807">)</span><span class="op" id="2894808">(</span><span class="ident" id="2894809">v</span><span class="op" id="2894810">.</span><span class="ident" id="2894811">ptr</span><span class="op" id="2894814">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894822">return</span>&nbsp;<span class="op" id="2894829">*</span><span class="op" id="2894830">(</span><span class="op" id="2894831">*</span><span class="keyword" id="2894832">interface</span>&nbsp;<span class="op" id="2894842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2894847">M</span><span class="op" id="2894848">(</span><span class="op" id="2894849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894853">}</span><span class="op" id="2894854">)</span><span class="op" id="2894855">(</span><span class="ident" id="2894856">v</span><span class="op" id="2894857">.</span><span class="ident" id="2894858">ptr</span><span class="op" id="2894861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894864">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2894868">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894941">return</span>&nbsp;<span class="ident" id="2894948">packEface</span><span class="op" id="2894957">(</span><span class="ident" id="2894958">v</span><span class="op" id="2894959">)</span><br>
<span class="lineno"></span><span class="op" id="2894961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2894964">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2895032">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2895075">func</span>&nbsp;<span class="op" id="2895080">(</span><span class="ident" id="2895081">v</span>&nbsp;<span class="ident" id="2895083">Value</span><span class="op" id="2895088">)</span>&nbsp;<span class="ident" id="2895090">InterfaceData</span><span class="op" id="2895103">(</span><span class="op" id="2895104">)</span>&nbsp;<span class="op" id="2895106">[</span><span class="num" id="2895107">2</span><span class="op" id="2895108">]</span><span class="builtintype" id="2895109">uintptr</span>&nbsp;<span class="op" id="2895117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895120">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2895145">v</span><span class="op" id="2895146">.</span><span class="ident" id="2895147">mustBe</span><span class="op" id="2895153">(</span><span class="ident" id="2895154">Interface</span><span class="op" id="2895163">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895166">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895217">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895269">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895322">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2895346">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2895414">return</span>&nbsp;<span class="op" id="2895421">*</span><span class="op" id="2895422">(</span><span class="op" id="2895423">*</span><span class="op" id="2895424">[</span><span class="num" id="2895425">2</span><span class="op" id="2895426">]</span><span class="builtintype" id="2895427">uintptr</span><span class="op" id="2895434">)</span><span class="op" id="2895435">(</span><span class="ident" id="2895436">v</span><span class="op" id="2895437">.</span><span class="ident" id="2895438">ptr</span><span class="op" id="2895441">)</span><br>
<span class="lineno"></span><span class="op" id="2895443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2895446">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2895515">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2895582">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2895650">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2895718">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2895784">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2895852">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2895862">func</span>&nbsp;<span class="op" id="2895867">(</span><span class="ident" id="2895868">v</span>&nbsp;<span class="ident" id="2895870">Value</span><span class="op" id="2895875">)</span>&nbsp;<span class="ident" id="2895877">IsNil</span><span class="op" id="2895882">(</span><span class="op" id="2895883">)</span>&nbsp;<span class="builtintype" id="2895885">bool</span>&nbsp;<span class="op" id="2895890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2895893">k</span>&nbsp;<span class="op" id="2895895">:=</span>&nbsp;<span class="ident" id="2895898">v</span><span class="op" id="2895899">.</span><span class="ident" id="2895900">kind</span><span class="op" id="2895904">(</span><span class="op" id="2895905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2895908">switch</span>&nbsp;<span class="ident" id="2895915">k</span>&nbsp;<span class="op" id="2895917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2895920">case</span>&nbsp;<span class="ident" id="2895925">Chan</span><span class="op" id="2895929">,</span>&nbsp;<span class="ident" id="2895931">Func</span><span class="op" id="2895935">,</span>&nbsp;<span class="ident" id="2895937">Map</span><span class="op" id="2895940">,</span>&nbsp;<span class="ident" id="2895942">Ptr</span><span class="op" id="2895945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2895949">if</span>&nbsp;<span class="ident" id="2895952">v</span><span class="op" id="2895953">.</span><span class="ident" id="2895954">flag</span><span class="op" id="2895958">&amp;</span><span class="ident" id="2895959">flagMethod</span>&nbsp;<span class="op" id="2895970">!=</span>&nbsp;<span class="num" id="2895973">0</span>&nbsp;<span class="op" id="2895975">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2895980">return</span>&nbsp;<span class="builtintype" id="2895987">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2895995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2895999">ptr</span>&nbsp;<span class="op" id="2896003">:=</span>&nbsp;<span class="ident" id="2896006">v</span><span class="op" id="2896007">.</span><span class="ident" id="2896008">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896014">if</span>&nbsp;<span class="ident" id="2896017">v</span><span class="op" id="2896018">.</span><span class="ident" id="2896019">flag</span><span class="op" id="2896023">&amp;</span><span class="ident" id="2896024">flagIndir</span>&nbsp;<span class="op" id="2896034">!=</span>&nbsp;<span class="num" id="2896037">0</span>&nbsp;<span class="op" id="2896039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2896044">ptr</span>&nbsp;<span class="op" id="2896048">=</span>&nbsp;<span class="op" id="2896050">*</span><span class="op" id="2896051">(</span><span class="op" id="2896052">*</span><span class="ident" id="2896053">unsafe</span><span class="op" id="2896059">.</span><span class="ident" id="2896060">Pointer</span><span class="op" id="2896067">)</span><span class="op" id="2896068">(</span><span class="ident" id="2896069">ptr</span><span class="op" id="2896072">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2896076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896080">return</span>&nbsp;<span class="ident" id="2896087">ptr</span>&nbsp;<span class="op" id="2896091">==</span>&nbsp;<span class="builtintype" id="2896094">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896099">case</span>&nbsp;<span class="ident" id="2896104">Interface</span><span class="op" id="2896113">,</span>&nbsp;<span class="ident" id="2896115">Slice</span><span class="op" id="2896120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2896124">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2896182">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896241">return</span>&nbsp;<span class="op" id="2896248">*</span><span class="op" id="2896249">(</span><span class="op" id="2896250">*</span><span class="ident" id="2896251">unsafe</span><span class="op" id="2896257">.</span><span class="ident" id="2896258">Pointer</span><span class="op" id="2896265">)</span><span class="op" id="2896266">(</span><span class="ident" id="2896267">v</span><span class="op" id="2896268">.</span><span class="ident" id="2896269">ptr</span><span class="op" id="2896272">)</span>&nbsp;<span class="op" id="2896274">==</span>&nbsp;<span class="builtintype" id="2896277">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2896282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2896285">panic</span><span class="op" id="2896290">(</span><span class="op" id="2896291">&amp;</span><span class="ident" id="2896292">ValueError</span><span class="op" id="2896302">{</span><span class="string" id="2896303">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2896324">,</span>&nbsp;<span class="ident" id="2896326">v</span><span class="op" id="2896327">.</span><span class="ident" id="2896328">kind</span><span class="op" id="2896332">(</span><span class="op" id="2896333">)</span><span class="op" id="2896334">}</span><span class="op" id="2896335">)</span><br>
<span class="lineno"></span><span class="op" id="2896337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2896340">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2896389">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2896433">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2896501">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2896562">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2896630">func</span>&nbsp;<span class="op" id="2896635">(</span><span class="ident" id="2896636">v</span>&nbsp;<span class="ident" id="2896638">Value</span><span class="op" id="2896643">)</span>&nbsp;<span class="ident" id="2896645">IsValid</span><span class="op" id="2896652">(</span><span class="op" id="2896653">)</span>&nbsp;<span class="builtintype" id="2896655">bool</span>&nbsp;<span class="op" id="2896660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896663">return</span>&nbsp;<span class="ident" id="2896670">v</span><span class="op" id="2896671">.</span><span class="ident" id="2896672">flag</span>&nbsp;<span class="op" id="2896677">!=</span>&nbsp;<span class="num" id="2896680">0</span><br>
<span class="lineno"></span><span class="op" id="2896682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2896685">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2896711">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2896784">func</span>&nbsp;<span class="op" id="2896789">(</span><span class="ident" id="2896790">v</span>&nbsp;<span class="ident" id="2896792">Value</span><span class="op" id="2896797">)</span>&nbsp;<span class="ident" id="2896799">Kind</span><span class="op" id="2896803">(</span><span class="op" id="2896804">)</span>&nbsp;<span class="ident" id="2896806">Kind</span>&nbsp;<span class="op" id="2896811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896814">return</span>&nbsp;<span class="ident" id="2896821">v</span><span class="op" id="2896822">.</span><span class="ident" id="2896823">kind</span><span class="op" id="2896827">(</span><span class="op" id="2896828">)</span><br>
<span class="lineno"></span><span class="op" id="2896830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2896833">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2896860">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2896928">func</span>&nbsp;<span class="op" id="2896933">(</span><span class="ident" id="2896934">v</span>&nbsp;<span class="ident" id="2896936">Value</span><span class="op" id="2896941">)</span>&nbsp;<span class="ident" id="2896943">Len</span><span class="op" id="2896946">(</span><span class="op" id="2896947">)</span>&nbsp;<span class="builtintype" id="2896949">int</span>&nbsp;<span class="op" id="2896953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2896956">k</span>&nbsp;<span class="op" id="2896958">:=</span>&nbsp;<span class="ident" id="2896961">v</span><span class="op" id="2896962">.</span><span class="ident" id="2896963">kind</span><span class="op" id="2896967">(</span><span class="op" id="2896968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896971">switch</span>&nbsp;<span class="ident" id="2896978">k</span>&nbsp;<span class="op" id="2896980">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2896983">case</span>&nbsp;<span class="ident" id="2896988">Array</span><span class="op" id="2896993">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2896997">tt</span>&nbsp;<span class="op" id="2897000">:=</span>&nbsp;<span class="op" id="2897003">(</span><span class="op" id="2897004">*</span><span class="ident" id="2897005">arrayType</span><span class="op" id="2897014">)</span><span class="op" id="2897015">(</span><span class="ident" id="2897016">unsafe</span><span class="op" id="2897022">.</span><span class="ident" id="2897023">Pointer</span><span class="op" id="2897030">(</span><span class="ident" id="2897031">v</span><span class="op" id="2897032">.</span><span class="ident" id="2897033">typ</span><span class="op" id="2897036">)</span><span class="op" id="2897037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897041">return</span>&nbsp;<span class="builtintype" id="2897048">int</span><span class="op" id="2897051">(</span><span class="ident" id="2897052">tt</span><span class="op" id="2897054">.</span><span class="builtinfunc" id="2897055">len</span><span class="op" id="2897058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897061">case</span>&nbsp;<span class="ident" id="2897066">Chan</span><span class="op" id="2897070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897074">return</span>&nbsp;<span class="ident" id="2897081">chanlen</span><span class="op" id="2897088">(</span><span class="ident" id="2897089">v</span><span class="op" id="2897090">.</span><span class="ident" id="2897091">pointer</span><span class="op" id="2897098">(</span><span class="op" id="2897099">)</span><span class="op" id="2897100">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897103">case</span>&nbsp;<span class="ident" id="2897108">Map</span><span class="op" id="2897111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897115">return</span>&nbsp;<span class="ident" id="2897122">maplen</span><span class="op" id="2897128">(</span><span class="ident" id="2897129">v</span><span class="op" id="2897130">.</span><span class="ident" id="2897131">pointer</span><span class="op" id="2897138">(</span><span class="op" id="2897139">)</span><span class="op" id="2897140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897143">case</span>&nbsp;<span class="ident" id="2897148">Slice</span><span class="op" id="2897153">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897157">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897209">return</span>&nbsp;<span class="op" id="2897216">(</span><span class="op" id="2897217">*</span><span class="ident" id="2897218">sliceHeader</span><span class="op" id="2897229">)</span><span class="op" id="2897230">(</span><span class="ident" id="2897231">v</span><span class="op" id="2897232">.</span><span class="ident" id="2897233">ptr</span><span class="op" id="2897236">)</span><span class="op" id="2897237">.</span><span class="ident" id="2897238">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897243">case</span>&nbsp;<span class="ident" id="2897248">String</span><span class="op" id="2897254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897258">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2897311">return</span>&nbsp;<span class="op" id="2897318">(</span><span class="op" id="2897319">*</span><span class="ident" id="2897320">stringHeader</span><span class="op" id="2897332">)</span><span class="op" id="2897333">(</span><span class="ident" id="2897334">v</span><span class="op" id="2897335">.</span><span class="ident" id="2897336">ptr</span><span class="op" id="2897339">)</span><span class="op" id="2897340">.</span><span class="ident" id="2897341">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2897346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2897349">panic</span><span class="op" id="2897354">(</span><span class="op" id="2897355">&amp;</span><span class="ident" id="2897356">ValueError</span><span class="op" id="2897366">{</span><span class="string" id="2897367">&#34;reflect.Value.Len&#34;</span><span class="op" id="2897386">,</span>&nbsp;<span class="ident" id="2897388">v</span><span class="op" id="2897389">.</span><span class="ident" id="2897390">kind</span><span class="op" id="2897394">(</span><span class="op" id="2897395">)</span><span class="op" id="2897396">}</span><span class="op" id="2897397">)</span><br>
<span class="lineno">980</span><span class="op" id="2897399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2897402">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2897466">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2897503">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2897593">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2897664">func</span>&nbsp;<span class="op" id="2897669">(</span><span class="ident" id="2897670">v</span>&nbsp;<span class="ident" id="2897672">Value</span><span class="op" id="2897677">)</span>&nbsp;<span class="ident" id="2897679">MapIndex</span><span class="op" id="2897687">(</span><span class="ident" id="2897688">key</span>&nbsp;<span class="ident" id="2897692">Value</span><span class="op" id="2897697">)</span>&nbsp;<span class="ident" id="2897699">Value</span>&nbsp;<span class="op" id="2897705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2897708">v</span><span class="op" id="2897709">.</span><span class="ident" id="2897710">mustBe</span><span class="op" id="2897716">(</span><span class="ident" id="2897717">Map</span><span class="op" id="2897720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2897723">tt</span>&nbsp;<span class="op" id="2897726">:=</span>&nbsp;<span class="op" id="2897729">(</span><span class="op" id="2897730">*</span><span class="ident" id="2897731">mapType</span><span class="op" id="2897738">)</span><span class="op" id="2897739">(</span><span class="ident" id="2897740">unsafe</span><span class="op" id="2897746">.</span><span class="ident" id="2897747">Pointer</span><span class="op" id="2897754">(</span><span class="ident" id="2897755">v</span><span class="op" id="2897756">.</span><span class="ident" id="2897757">typ</span><span class="op" id="2897760">)</span><span class="op" id="2897761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897765">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897822">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897878">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897935">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2897992">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2898048">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2898105">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898131">key</span>&nbsp;<span class="op" id="2898135">=</span>&nbsp;<span class="ident" id="2898137">key</span><span class="op" id="2898140">.</span><span class="ident" id="2898141">assignTo</span><span class="op" id="2898149">(</span><span class="string" id="2898150">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2898174">,</span>&nbsp;<span class="ident" id="2898176">tt</span><span class="op" id="2898178">.</span><span class="ident" id="2898179">key</span><span class="op" id="2898182">,</span>&nbsp;<span class="builtintype" id="2898184">nil</span><span class="op" id="2898187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898191">var</span>&nbsp;<span class="ident" id="2898195">k</span>&nbsp;<span class="ident" id="2898197">unsafe</span><span class="op" id="2898203">.</span><span class="ident" id="2898204">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898213">if</span>&nbsp;<span class="ident" id="2898216">key</span><span class="op" id="2898219">.</span><span class="ident" id="2898220">flag</span><span class="op" id="2898224">&amp;</span><span class="ident" id="2898225">flagIndir</span>&nbsp;<span class="op" id="2898235">!=</span>&nbsp;<span class="num" id="2898238">0</span>&nbsp;<span class="op" id="2898240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898244">k</span>&nbsp;<span class="op" id="2898246">=</span>&nbsp;<span class="ident" id="2898248">key</span><span class="op" id="2898251">.</span><span class="ident" id="2898252">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2898257">}</span>&nbsp;<span class="keyword" id="2898259">else</span>&nbsp;<span class="op" id="2898264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898268">k</span>&nbsp;<span class="op" id="2898270">=</span>&nbsp;<span class="ident" id="2898272">unsafe</span><span class="op" id="2898278">.</span><span class="ident" id="2898279">Pointer</span><span class="op" id="2898286">(</span><span class="op" id="2898287">&amp;</span><span class="ident" id="2898288">key</span><span class="op" id="2898291">.</span><span class="ident" id="2898292">ptr</span><span class="op" id="2898295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2898298">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898301">e</span>&nbsp;<span class="op" id="2898303">:=</span>&nbsp;<span class="ident" id="2898306">mapaccess</span><span class="op" id="2898315">(</span><span class="ident" id="2898316">v</span><span class="op" id="2898317">.</span><span class="ident" id="2898318">typ</span><span class="op" id="2898321">,</span>&nbsp;<span class="ident" id="2898323">v</span><span class="op" id="2898324">.</span><span class="ident" id="2898325">pointer</span><span class="op" id="2898332">(</span><span class="op" id="2898333">)</span><span class="op" id="2898334">,</span>&nbsp;<span class="ident" id="2898336">k</span><span class="op" id="2898337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898340">if</span>&nbsp;<span class="ident" id="2898343">e</span>&nbsp;<span class="op" id="2898345">==</span>&nbsp;<span class="builtintype" id="2898348">nil</span>&nbsp;<span class="op" id="2898352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898356">return</span>&nbsp;<span class="ident" id="2898363">Value</span><span class="op" id="2898368">{</span><span class="op" id="2898369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2898372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898375">typ</span>&nbsp;<span class="op" id="2898379">:=</span>&nbsp;<span class="ident" id="2898382">tt</span><span class="op" id="2898384">.</span><span class="ident" id="2898385">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898391">fl</span>&nbsp;<span class="op" id="2898394">:=</span>&nbsp;<span class="op" id="2898397">(</span><span class="ident" id="2898398">v</span><span class="op" id="2898399">.</span><span class="ident" id="2898400">flag</span>&nbsp;<span class="op" id="2898405">|</span>&nbsp;<span class="ident" id="2898407">key</span><span class="op" id="2898410">.</span><span class="ident" id="2898411">flag</span><span class="op" id="2898415">)</span>&nbsp;<span class="op" id="2898417">&amp;</span>&nbsp;<span class="ident" id="2898419">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898427">fl</span>&nbsp;<span class="op" id="2898430">|=</span>&nbsp;<span class="ident" id="2898433">flag</span><span class="op" id="2898437">(</span><span class="ident" id="2898438">typ</span><span class="op" id="2898441">.</span><span class="ident" id="2898442">Kind</span><span class="op" id="2898446">(</span><span class="op" id="2898447">)</span><span class="op" id="2898448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898451">if</span>&nbsp;<span class="ident" id="2898454">ifaceIndir</span><span class="op" id="2898464">(</span><span class="ident" id="2898465">typ</span><span class="op" id="2898468">)</span>&nbsp;<span class="op" id="2898470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2898474">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2898520">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898560">c</span>&nbsp;<span class="op" id="2898562">:=</span>&nbsp;<span class="ident" id="2898565">unsafe_New</span><span class="op" id="2898575">(</span><span class="ident" id="2898576">typ</span><span class="op" id="2898579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898583">memmove</span><span class="op" id="2898590">(</span><span class="ident" id="2898591">c</span><span class="op" id="2898592">,</span>&nbsp;<span class="ident" id="2898594">e</span><span class="op" id="2898595">,</span>&nbsp;<span class="ident" id="2898597">typ</span><span class="op" id="2898600">.</span><span class="ident" id="2898601">size</span><span class="op" id="2898605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898609">return</span>&nbsp;<span class="ident" id="2898616">Value</span><span class="op" id="2898621">{</span><span class="ident" id="2898622">typ</span><span class="op" id="2898625">,</span>&nbsp;<span class="ident" id="2898627">c</span><span class="op" id="2898628">,</span>&nbsp;<span class="ident" id="2898630">fl</span>&nbsp;<span class="op" id="2898633">|</span>&nbsp;<span class="ident" id="2898635">flagIndir</span><span class="op" id="2898644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2898647">}</span>&nbsp;<span class="keyword" id="2898649">else</span>&nbsp;<span class="op" id="2898654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2898658">return</span>&nbsp;<span class="ident" id="2898665">Value</span><span class="op" id="2898670">{</span><span class="ident" id="2898671">typ</span><span class="op" id="2898674">,</span>&nbsp;<span class="op" id="2898676">*</span><span class="op" id="2898677">(</span><span class="op" id="2898678">*</span><span class="ident" id="2898679">unsafe</span><span class="op" id="2898685">.</span><span class="ident" id="2898686">Pointer</span><span class="op" id="2898693">)</span><span class="op" id="2898694">(</span><span class="ident" id="2898695">e</span><span class="op" id="2898696">)</span><span class="op" id="2898697">,</span>&nbsp;<span class="ident" id="2898699">fl</span><span class="op" id="2898701">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2898704">}</span><br>
<span class="lineno"></span><span class="op" id="2898706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2898709">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2898780">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2898805">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2898842">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2898898">func</span>&nbsp;<span class="op" id="2898903">(</span><span class="ident" id="2898904">v</span>&nbsp;<span class="ident" id="2898906">Value</span><span class="op" id="2898911">)</span>&nbsp;<span class="ident" id="2898913">MapKeys</span><span class="op" id="2898920">(</span><span class="op" id="2898921">)</span>&nbsp;<span class="op" id="2898923">[</span><span class="op" id="2898924">]</span><span class="ident" id="2898925">Value</span>&nbsp;<span class="op" id="2898931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898934">v</span><span class="op" id="2898935">.</span><span class="ident" id="2898936">mustBe</span><span class="op" id="2898942">(</span><span class="ident" id="2898943">Map</span><span class="op" id="2898946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898949">tt</span>&nbsp;<span class="op" id="2898952">:=</span>&nbsp;<span class="op" id="2898955">(</span><span class="op" id="2898956">*</span><span class="ident" id="2898957">mapType</span><span class="op" id="2898964">)</span><span class="op" id="2898965">(</span><span class="ident" id="2898966">unsafe</span><span class="op" id="2898972">.</span><span class="ident" id="2898973">Pointer</span><span class="op" id="2898980">(</span><span class="ident" id="2898981">v</span><span class="op" id="2898982">.</span><span class="ident" id="2898983">typ</span><span class="op" id="2898986">)</span><span class="op" id="2898987">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2898990">keyType</span>&nbsp;<span class="op" id="2898998">:=</span>&nbsp;<span class="ident" id="2899001">tt</span><span class="op" id="2899003">.</span><span class="ident" id="2899004">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899010">fl</span>&nbsp;<span class="op" id="2899013">:=</span>&nbsp;<span class="ident" id="2899016">v</span><span class="op" id="2899017">.</span><span class="ident" id="2899018">flag</span><span class="op" id="2899022">&amp;</span><span class="ident" id="2899023">flagRO</span>&nbsp;<span class="op" id="2899030">|</span>&nbsp;<span class="ident" id="2899032">flag</span><span class="op" id="2899036">(</span><span class="ident" id="2899037">keyType</span><span class="op" id="2899044">.</span><span class="ident" id="2899045">Kind</span><span class="op" id="2899049">(</span><span class="op" id="2899050">)</span><span class="op" id="2899051">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899055">m</span>&nbsp;<span class="op" id="2899057">:=</span>&nbsp;<span class="ident" id="2899060">v</span><span class="op" id="2899061">.</span><span class="ident" id="2899062">pointer</span><span class="op" id="2899069">(</span><span class="op" id="2899070">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899073">mlen</span>&nbsp;<span class="op" id="2899078">:=</span>&nbsp;<span class="builtintype" id="2899081">int</span><span class="op" id="2899084">(</span><span class="num" id="2899085">0</span><span class="op" id="2899086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899089">if</span>&nbsp;<span class="ident" id="2899092">m</span>&nbsp;<span class="op" id="2899094">!=</span>&nbsp;<span class="builtintype" id="2899097">nil</span>&nbsp;<span class="op" id="2899101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899105">mlen</span>&nbsp;<span class="op" id="2899110">=</span>&nbsp;<span class="ident" id="2899112">maplen</span><span class="op" id="2899118">(</span><span class="ident" id="2899119">m</span><span class="op" id="2899120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2899123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899126">it</span>&nbsp;<span class="op" id="2899129">:=</span>&nbsp;<span class="ident" id="2899132">mapiterinit</span><span class="op" id="2899143">(</span><span class="ident" id="2899144">v</span><span class="op" id="2899145">.</span><span class="ident" id="2899146">typ</span><span class="op" id="2899149">,</span>&nbsp;<span class="ident" id="2899151">m</span><span class="op" id="2899152">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899155">a</span>&nbsp;<span class="op" id="2899157">:=</span>&nbsp;<span class="builtinfunc" id="2899160">make</span><span class="op" id="2899164">(</span><span class="op" id="2899165">[</span><span class="op" id="2899166">]</span><span class="ident" id="2899167">Value</span><span class="op" id="2899172">,</span>&nbsp;<span class="ident" id="2899174">mlen</span><span class="op" id="2899178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899181">var</span>&nbsp;<span class="ident" id="2899185">i</span>&nbsp;<span class="builtintype" id="2899187">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899192">for</span>&nbsp;<span class="ident" id="2899196">i</span>&nbsp;<span class="op" id="2899198">=</span>&nbsp;<span class="num" id="2899200">0</span><span class="op" id="2899201">;</span>&nbsp;<span class="ident" id="2899203">i</span>&nbsp;<span class="op" id="2899205">&lt;</span>&nbsp;<span class="builtinfunc" id="2899207">len</span><span class="op" id="2899210">(</span><span class="ident" id="2899211">a</span><span class="op" id="2899212">)</span><span class="op" id="2899213">;</span>&nbsp;<span class="ident" id="2899215">i</span><span class="op" id="2899216">++</span>&nbsp;<span class="op" id="2899219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899223">key</span>&nbsp;<span class="op" id="2899227">:=</span>&nbsp;<span class="ident" id="2899230">mapiterkey</span><span class="op" id="2899240">(</span><span class="ident" id="2899241">it</span><span class="op" id="2899243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899247">if</span>&nbsp;<span class="ident" id="2899250">key</span>&nbsp;<span class="op" id="2899254">==</span>&nbsp;<span class="builtintype" id="2899257">nil</span>&nbsp;<span class="op" id="2899261">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2899266">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2899319">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2899377">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899403">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2899411">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899415">if</span>&nbsp;<span class="ident" id="2899418">ifaceIndir</span><span class="op" id="2899428">(</span><span class="ident" id="2899429">keyType</span><span class="op" id="2899436">)</span>&nbsp;<span class="op" id="2899438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2899443">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2899490">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899531">c</span>&nbsp;<span class="op" id="2899533">:=</span>&nbsp;<span class="ident" id="2899536">unsafe_New</span><span class="op" id="2899546">(</span><span class="ident" id="2899547">keyType</span><span class="op" id="2899554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899559">memmove</span><span class="op" id="2899566">(</span><span class="ident" id="2899567">c</span><span class="op" id="2899568">,</span>&nbsp;<span class="ident" id="2899570">key</span><span class="op" id="2899573">,</span>&nbsp;<span class="ident" id="2899575">keyType</span><span class="op" id="2899582">.</span><span class="ident" id="2899583">size</span><span class="op" id="2899587">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899592">a</span><span class="op" id="2899593">[</span><span class="ident" id="2899594">i</span><span class="op" id="2899595">]</span>&nbsp;<span class="op" id="2899597">=</span>&nbsp;<span class="ident" id="2899599">Value</span><span class="op" id="2899604">{</span><span class="ident" id="2899605">keyType</span><span class="op" id="2899612">,</span>&nbsp;<span class="ident" id="2899614">c</span><span class="op" id="2899615">,</span>&nbsp;<span class="ident" id="2899617">fl</span>&nbsp;<span class="op" id="2899620">|</span>&nbsp;<span class="ident" id="2899622">flagIndir</span><span class="op" id="2899631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2899635">}</span>&nbsp;<span class="keyword" id="2899637">else</span>&nbsp;<span class="op" id="2899642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899647">a</span><span class="op" id="2899648">[</span><span class="ident" id="2899649">i</span><span class="op" id="2899650">]</span>&nbsp;<span class="op" id="2899652">=</span>&nbsp;<span class="ident" id="2899654">Value</span><span class="op" id="2899659">{</span><span class="ident" id="2899660">keyType</span><span class="op" id="2899667">,</span>&nbsp;<span class="op" id="2899669">*</span><span class="op" id="2899670">(</span><span class="op" id="2899671">*</span><span class="ident" id="2899672">unsafe</span><span class="op" id="2899678">.</span><span class="ident" id="2899679">Pointer</span><span class="op" id="2899686">)</span><span class="op" id="2899687">(</span><span class="ident" id="2899688">key</span><span class="op" id="2899691">)</span><span class="op" id="2899692">,</span>&nbsp;<span class="ident" id="2899694">fl</span><span class="op" id="2899696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2899700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2899704">mapiternext</span><span class="op" id="2899715">(</span><span class="ident" id="2899716">it</span><span class="op" id="2899718">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2899721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2899724">return</span>&nbsp;<span class="ident" id="2899731">a</span><span class="op" id="2899732">[</span><span class="op" id="2899733">:</span><span class="ident" id="2899734">i</span><span class="op" id="2899735">]</span><br>
<span class="lineno"></span><span class="op" id="2899737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2899740">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2899809">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2899880">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2899952">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2900024">func</span>&nbsp;<span class="op" id="2900029">(</span><span class="ident" id="2900030">v</span>&nbsp;<span class="ident" id="2900032">Value</span><span class="op" id="2900037">)</span>&nbsp;<span class="ident" id="2900039">Method</span><span class="op" id="2900045">(</span><span class="ident" id="2900046">i</span>&nbsp;<span class="builtintype" id="2900048">int</span><span class="op" id="2900051">)</span>&nbsp;<span class="ident" id="2900053">Value</span>&nbsp;<span class="op" id="2900059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900062">if</span>&nbsp;<span class="ident" id="2900065">v</span><span class="op" id="2900066">.</span><span class="ident" id="2900067">typ</span>&nbsp;<span class="op" id="2900071">==</span>&nbsp;<span class="builtintype" id="2900074">nil</span>&nbsp;<span class="op" id="2900078">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2900082">panic</span><span class="op" id="2900087">(</span><span class="op" id="2900088">&amp;</span><span class="ident" id="2900089">ValueError</span><span class="op" id="2900099">{</span><span class="string" id="2900100">&#34;reflect.Value.Method&#34;</span><span class="op" id="2900122">,</span>&nbsp;<span class="ident" id="2900124">Invalid</span><span class="op" id="2900131">}</span><span class="op" id="2900132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2900135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900138">if</span>&nbsp;<span class="ident" id="2900141">v</span><span class="op" id="2900142">.</span><span class="ident" id="2900143">flag</span><span class="op" id="2900147">&amp;</span><span class="ident" id="2900148">flagMethod</span>&nbsp;<span class="op" id="2900159">!=</span>&nbsp;<span class="num" id="2900162">0</span>&nbsp;<span class="op" id="2900164">||</span>&nbsp;<span class="builtintype" id="2900167">uint</span><span class="op" id="2900171">(</span><span class="ident" id="2900172">i</span><span class="op" id="2900173">)</span>&nbsp;<span class="op" id="2900175">&gt;=</span>&nbsp;<span class="builtintype" id="2900178">uint</span><span class="op" id="2900182">(</span><span class="ident" id="2900183">v</span><span class="op" id="2900184">.</span><span class="ident" id="2900185">typ</span><span class="op" id="2900188">.</span><span class="ident" id="2900189">NumMethod</span><span class="op" id="2900198">(</span><span class="op" id="2900199">)</span><span class="op" id="2900200">)</span>&nbsp;<span class="op" id="2900202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2900206">panic</span><span class="op" id="2900211">(</span><span class="string" id="2900212">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2900248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2900251">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900254">if</span>&nbsp;<span class="ident" id="2900257">v</span><span class="op" id="2900258">.</span><span class="ident" id="2900259">typ</span><span class="op" id="2900262">.</span><span class="ident" id="2900263">Kind</span><span class="op" id="2900267">(</span><span class="op" id="2900268">)</span>&nbsp;<span class="op" id="2900270">==</span>&nbsp;<span class="ident" id="2900273">Interface</span>&nbsp;<span class="op" id="2900283">&amp;&amp;</span>&nbsp;<span class="ident" id="2900286">v</span><span class="op" id="2900287">.</span><span class="ident" id="2900288">IsNil</span><span class="op" id="2900293">(</span><span class="op" id="2900294">)</span>&nbsp;<span class="op" id="2900296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2900300">panic</span><span class="op" id="2900305">(</span><span class="string" id="2900306">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2900346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2900349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2900352">fl</span>&nbsp;<span class="op" id="2900355">:=</span>&nbsp;<span class="ident" id="2900358">v</span><span class="op" id="2900359">.</span><span class="ident" id="2900360">flag</span>&nbsp;<span class="op" id="2900365">&amp;</span>&nbsp;<span class="op" id="2900367">(</span><span class="ident" id="2900368">flagRO</span>&nbsp;<span class="op" id="2900375">|</span>&nbsp;<span class="ident" id="2900377">flagIndir</span><span class="op" id="2900386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2900389">fl</span>&nbsp;<span class="op" id="2900392">|=</span>&nbsp;<span class="ident" id="2900395">flag</span><span class="op" id="2900399">(</span><span class="ident" id="2900400">Func</span><span class="op" id="2900404">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2900407">fl</span>&nbsp;<span class="op" id="2900410">|=</span>&nbsp;<span class="ident" id="2900413">flag</span><span class="op" id="2900417">(</span><span class="ident" id="2900418">i</span><span class="op" id="2900419">)</span><span class="op" id="2900420">&lt;&lt;</span><span class="ident" id="2900422">flagMethodShift</span>&nbsp;<span class="op" id="2900438">|</span>&nbsp;<span class="ident" id="2900440">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900452">return</span>&nbsp;<span class="ident" id="2900459">Value</span><span class="op" id="2900464">{</span><span class="ident" id="2900465">v</span><span class="op" id="2900466">.</span><span class="ident" id="2900467">typ</span><span class="op" id="2900470">,</span>&nbsp;<span class="ident" id="2900472">v</span><span class="op" id="2900473">.</span><span class="ident" id="2900474">ptr</span><span class="op" id="2900477">,</span>&nbsp;<span class="ident" id="2900479">fl</span><span class="op" id="2900481">}</span><br>
<span class="lineno"></span><span class="op" id="2900483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2900486">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2900556">func</span>&nbsp;<span class="op" id="2900561">(</span><span class="ident" id="2900562">v</span>&nbsp;<span class="ident" id="2900564">Value</span><span class="op" id="2900569">)</span>&nbsp;<span class="ident" id="2900571">NumMethod</span><span class="op" id="2900580">(</span><span class="op" id="2900581">)</span>&nbsp;<span class="builtintype" id="2900583">int</span>&nbsp;<span class="op" id="2900587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900590">if</span>&nbsp;<span class="ident" id="2900593">v</span><span class="op" id="2900594">.</span><span class="ident" id="2900595">typ</span>&nbsp;<span class="op" id="2900599">==</span>&nbsp;<span class="builtintype" id="2900602">nil</span>&nbsp;<span class="op" id="2900606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2900610">panic</span><span class="op" id="2900615">(</span><span class="op" id="2900616">&amp;</span><span class="ident" id="2900617">ValueError</span><span class="op" id="2900627">{</span><span class="string" id="2900628">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2900653">,</span>&nbsp;<span class="ident" id="2900655">Invalid</span><span class="op" id="2900662">}</span><span class="op" id="2900663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2900666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900669">if</span>&nbsp;<span class="ident" id="2900672">v</span><span class="op" id="2900673">.</span><span class="ident" id="2900674">flag</span><span class="op" id="2900678">&amp;</span><span class="ident" id="2900679">flagMethod</span>&nbsp;<span class="op" id="2900690">!=</span>&nbsp;<span class="num" id="2900693">0</span>&nbsp;<span class="op" id="2900695">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900699">return</span>&nbsp;<span class="num" id="2900706">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2900709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2900712">return</span>&nbsp;<span class="ident" id="2900719">v</span><span class="op" id="2900720">.</span><span class="ident" id="2900721">typ</span><span class="op" id="2900724">.</span><span class="ident" id="2900725">NumMethod</span><span class="op" id="2900734">(</span><span class="op" id="2900735">)</span><br>
<span class="lineno"></span><span class="op" id="2900737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2900740">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2900809">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2900838">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2900909">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2900981">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2901034">func</span>&nbsp;<span class="op" id="2901039">(</span><span class="ident" id="2901040">v</span>&nbsp;<span class="ident" id="2901042">Value</span><span class="op" id="2901047">)</span>&nbsp;<span class="ident" id="2901049">MethodByName</span><span class="op" id="2901061">(</span><span class="ident" id="2901062">name</span>&nbsp;<span class="builtintype" id="2901067">string</span><span class="op" id="2901073">)</span>&nbsp;<span class="ident" id="2901075">Value</span>&nbsp;<span class="op" id="2901081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901084">if</span>&nbsp;<span class="ident" id="2901087">v</span><span class="op" id="2901088">.</span><span class="ident" id="2901089">typ</span>&nbsp;<span class="op" id="2901093">==</span>&nbsp;<span class="builtintype" id="2901096">nil</span>&nbsp;<span class="op" id="2901100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2901104">panic</span><span class="op" id="2901109">(</span><span class="op" id="2901110">&amp;</span><span class="ident" id="2901111">ValueError</span><span class="op" id="2901121">{</span><span class="string" id="2901122">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2901150">,</span>&nbsp;<span class="ident" id="2901152">Invalid</span><span class="op" id="2901159">}</span><span class="op" id="2901160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901166">if</span>&nbsp;<span class="ident" id="2901169">v</span><span class="op" id="2901170">.</span><span class="ident" id="2901171">flag</span><span class="op" id="2901175">&amp;</span><span class="ident" id="2901176">flagMethod</span>&nbsp;<span class="op" id="2901187">!=</span>&nbsp;<span class="num" id="2901190">0</span>&nbsp;<span class="op" id="2901192">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901196">return</span>&nbsp;<span class="ident" id="2901203">Value</span><span class="op" id="2901208">{</span><span class="op" id="2901209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901215">m</span><span class="op" id="2901216">,</span>&nbsp;<span class="ident" id="2901218">ok</span>&nbsp;<span class="op" id="2901221">:=</span>&nbsp;<span class="ident" id="2901224">v</span><span class="op" id="2901225">.</span><span class="ident" id="2901226">typ</span><span class="op" id="2901229">.</span><span class="ident" id="2901230">MethodByName</span><span class="op" id="2901242">(</span><span class="ident" id="2901243">name</span><span class="op" id="2901247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901250">if</span>&nbsp;<span class="op" id="2901253">!</span><span class="ident" id="2901254">ok</span>&nbsp;<span class="op" id="2901257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901261">return</span>&nbsp;<span class="ident" id="2901268">Value</span><span class="op" id="2901273">{</span><span class="op" id="2901274">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901280">return</span>&nbsp;<span class="ident" id="2901287">v</span><span class="op" id="2901288">.</span><span class="ident" id="2901289">Method</span><span class="op" id="2901295">(</span><span class="ident" id="2901296">m</span><span class="op" id="2901297">.</span><span class="ident" id="2901298">Index</span><span class="op" id="2901303">)</span><br>
<span class="lineno"></span><span class="op" id="2901305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901308">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2901366">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2901406">func</span>&nbsp;<span class="op" id="2901411">(</span><span class="ident" id="2901412">v</span>&nbsp;<span class="ident" id="2901414">Value</span><span class="op" id="2901419">)</span>&nbsp;<span class="ident" id="2901421">NumField</span><span class="op" id="2901429">(</span><span class="op" id="2901430">)</span>&nbsp;<span class="builtintype" id="2901432">int</span>&nbsp;<span class="op" id="2901436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901439">v</span><span class="op" id="2901440">.</span><span class="ident" id="2901441">mustBe</span><span class="op" id="2901447">(</span><span class="ident" id="2901448">Struct</span><span class="op" id="2901454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901457">tt</span>&nbsp;<span class="op" id="2901460">:=</span>&nbsp;<span class="op" id="2901463">(</span><span class="op" id="2901464">*</span><span class="ident" id="2901465">structType</span><span class="op" id="2901475">)</span><span class="op" id="2901476">(</span><span class="ident" id="2901477">unsafe</span><span class="op" id="2901483">.</span><span class="ident" id="2901484">Pointer</span><span class="op" id="2901491">(</span><span class="ident" id="2901492">v</span><span class="op" id="2901493">.</span><span class="ident" id="2901494">typ</span><span class="op" id="2901497">)</span><span class="op" id="2901498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901501">return</span>&nbsp;<span class="builtinfunc" id="2901508">len</span><span class="op" id="2901511">(</span><span class="ident" id="2901512">tt</span><span class="op" id="2901514">.</span><span class="ident" id="2901515">fields</span><span class="op" id="2901521">)</span><br>
<span class="lineno">1120</span><span class="op" id="2901523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901526">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2901613">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2901670">func</span>&nbsp;<span class="op" id="2901675">(</span><span class="ident" id="2901676">v</span>&nbsp;<span class="ident" id="2901678">Value</span><span class="op" id="2901683">)</span>&nbsp;<span class="ident" id="2901685">OverflowComplex</span><span class="op" id="2901700">(</span><span class="ident" id="2901701">x</span>&nbsp;<span class="builtintype" id="2901703">complex128</span><span class="op" id="2901713">)</span>&nbsp;<span class="builtintype" id="2901715">bool</span>&nbsp;<span class="op" id="2901720">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901723">k</span>&nbsp;<span class="op" id="2901725">:=</span>&nbsp;<span class="ident" id="2901728">v</span><span class="op" id="2901729">.</span><span class="ident" id="2901730">kind</span><span class="op" id="2901734">(</span><span class="op" id="2901735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901738">switch</span>&nbsp;<span class="ident" id="2901745">k</span>&nbsp;<span class="op" id="2901747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901750">case</span>&nbsp;<span class="ident" id="2901755">Complex64</span><span class="op" id="2901764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901768">return</span>&nbsp;<span class="ident" id="2901775">overflowFloat32</span><span class="op" id="2901790">(</span><span class="builtinfunc" id="2901791">real</span><span class="op" id="2901795">(</span><span class="ident" id="2901796">x</span><span class="op" id="2901797">)</span><span class="op" id="2901798">)</span>&nbsp;<span class="op" id="2901800">||</span>&nbsp;<span class="ident" id="2901803">overflowFloat32</span><span class="op" id="2901818">(</span><span class="builtinfunc" id="2901819">imag</span><span class="op" id="2901823">(</span><span class="ident" id="2901824">x</span><span class="op" id="2901825">)</span><span class="op" id="2901826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901829">case</span>&nbsp;<span class="ident" id="2901834">Complex128</span><span class="op" id="2901844">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901848">return</span>&nbsp;<span class="builtintype" id="2901855">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2901865">panic</span><span class="op" id="2901870">(</span><span class="op" id="2901871">&amp;</span><span class="ident" id="2901872">ValueError</span><span class="op" id="2901882">{</span><span class="string" id="2901883">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2901914">,</span>&nbsp;<span class="ident" id="2901916">v</span><span class="op" id="2901917">.</span><span class="ident" id="2901918">kind</span><span class="op" id="2901922">(</span><span class="op" id="2901923">)</span><span class="op" id="2901924">}</span><span class="op" id="2901925">)</span><br>
<span class="lineno"></span><span class="op" id="2901927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2901930">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2902012">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2902064">func</span>&nbsp;<span class="op" id="2902069">(</span><span class="ident" id="2902070">v</span>&nbsp;<span class="ident" id="2902072">Value</span><span class="op" id="2902077">)</span>&nbsp;<span class="ident" id="2902079">OverflowFloat</span><span class="op" id="2902092">(</span><span class="ident" id="2902093">x</span>&nbsp;<span class="builtintype" id="2902095">float64</span><span class="op" id="2902102">)</span>&nbsp;<span class="builtintype" id="2902104">bool</span>&nbsp;<span class="op" id="2902109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902112">k</span>&nbsp;<span class="op" id="2902114">:=</span>&nbsp;<span class="ident" id="2902117">v</span><span class="op" id="2902118">.</span><span class="ident" id="2902119">kind</span><span class="op" id="2902123">(</span><span class="op" id="2902124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902127">switch</span>&nbsp;<span class="ident" id="2902134">k</span>&nbsp;<span class="op" id="2902136">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902139">case</span>&nbsp;<span class="ident" id="2902144">Float32</span><span class="op" id="2902151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902155">return</span>&nbsp;<span class="ident" id="2902162">overflowFloat32</span><span class="op" id="2902177">(</span><span class="ident" id="2902178">x</span><span class="op" id="2902179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902182">case</span>&nbsp;<span class="ident" id="2902187">Float64</span><span class="op" id="2902194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902198">return</span>&nbsp;<span class="builtintype" id="2902205">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902212">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2902215">panic</span><span class="op" id="2902220">(</span><span class="op" id="2902221">&amp;</span><span class="ident" id="2902222">ValueError</span><span class="op" id="2902232">{</span><span class="string" id="2902233">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2902262">,</span>&nbsp;<span class="ident" id="2902264">v</span><span class="op" id="2902265">.</span><span class="ident" id="2902266">kind</span><span class="op" id="2902270">(</span><span class="op" id="2902271">)</span><span class="op" id="2902272">}</span><span class="op" id="2902273">)</span><br>
<span class="lineno"></span><span class="op" id="2902275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2902278">func</span>&nbsp;<span class="ident" id="2902283">overflowFloat32</span><span class="op" id="2902298">(</span><span class="ident" id="2902299">x</span>&nbsp;<span class="builtintype" id="2902301">float64</span><span class="op" id="2902308">)</span>&nbsp;<span class="builtintype" id="2902310">bool</span>&nbsp;<span class="op" id="2902315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902318">if</span>&nbsp;<span class="ident" id="2902321">x</span>&nbsp;<span class="op" id="2902323">&lt;</span>&nbsp;<span class="num" id="2902325">0</span>&nbsp;<span class="op" id="2902327">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902331">x</span>&nbsp;<span class="op" id="2902333">=</span>&nbsp;<span class="op" id="2902335">-</span><span class="ident" id="2902336">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902342">return</span>&nbsp;<span class="ident" id="2902349">math</span><span class="op" id="2902353">.</span><span class="ident" id="2902354">MaxFloat32</span>&nbsp;<span class="op" id="2902365">&lt;</span>&nbsp;<span class="ident" id="2902367">x</span>&nbsp;<span class="op" id="2902369">&amp;&amp;</span>&nbsp;<span class="ident" id="2902372">x</span>&nbsp;<span class="op" id="2902374">&lt;=</span>&nbsp;<span class="ident" id="2902377">math</span><span class="op" id="2902381">.</span><span class="ident" id="2902382">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2902393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2902396">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2902474">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2902541">func</span>&nbsp;<span class="op" id="2902546">(</span><span class="ident" id="2902547">v</span>&nbsp;<span class="ident" id="2902549">Value</span><span class="op" id="2902554">)</span>&nbsp;<span class="ident" id="2902556">OverflowInt</span><span class="op" id="2902567">(</span><span class="ident" id="2902568">x</span>&nbsp;<span class="builtintype" id="2902570">int64</span><span class="op" id="2902575">)</span>&nbsp;<span class="builtintype" id="2902577">bool</span>&nbsp;<span class="op" id="2902582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902585">k</span>&nbsp;<span class="op" id="2902587">:=</span>&nbsp;<span class="ident" id="2902590">v</span><span class="op" id="2902591">.</span><span class="ident" id="2902592">kind</span><span class="op" id="2902596">(</span><span class="op" id="2902597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902600">switch</span>&nbsp;<span class="ident" id="2902607">k</span>&nbsp;<span class="op" id="2902609">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902612">case</span>&nbsp;<span class="ident" id="2902617">Int</span><span class="op" id="2902620">,</span>&nbsp;<span class="ident" id="2902622">Int8</span><span class="op" id="2902626">,</span>&nbsp;<span class="ident" id="2902628">Int16</span><span class="op" id="2902633">,</span>&nbsp;<span class="ident" id="2902635">Int32</span><span class="op" id="2902640">,</span>&nbsp;<span class="ident" id="2902642">Int64</span><span class="op" id="2902647">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902651">bitSize</span>&nbsp;<span class="op" id="2902659">:=</span>&nbsp;<span class="ident" id="2902662">v</span><span class="op" id="2902663">.</span><span class="ident" id="2902664">typ</span><span class="op" id="2902667">.</span><span class="ident" id="2902668">size</span>&nbsp;<span class="op" id="2902673">*</span>&nbsp;<span class="num" id="2902675">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902679">trunc</span>&nbsp;<span class="op" id="2902685">:=</span>&nbsp;<span class="op" id="2902688">(</span><span class="ident" id="2902689">x</span>&nbsp;<span class="op" id="2902691">&lt;&lt;</span>&nbsp;<span class="op" id="2902694">(</span><span class="num" id="2902695">64</span>&nbsp;<span class="op" id="2902698">-</span>&nbsp;<span class="ident" id="2902700">bitSize</span><span class="op" id="2902707">)</span><span class="op" id="2902708">)</span>&nbsp;<span class="op" id="2902710">&gt;&gt;</span>&nbsp;<span class="op" id="2902713">(</span><span class="num" id="2902714">64</span>&nbsp;<span class="op" id="2902717">-</span>&nbsp;<span class="ident" id="2902719">bitSize</span><span class="op" id="2902726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902730">return</span>&nbsp;<span class="ident" id="2902737">x</span>&nbsp;<span class="op" id="2902739">!=</span>&nbsp;<span class="ident" id="2902742">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902749">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2902752">panic</span><span class="op" id="2902757">(</span><span class="op" id="2902758">&amp;</span><span class="ident" id="2902759">ValueError</span><span class="op" id="2902769">{</span><span class="string" id="2902770">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2902797">,</span>&nbsp;<span class="ident" id="2902799">v</span><span class="op" id="2902800">.</span><span class="ident" id="2902801">kind</span><span class="op" id="2902805">(</span><span class="op" id="2902806">)</span><span class="op" id="2902807">}</span><span class="op" id="2902808">)</span><br>
<span class="lineno"></span><span class="op" id="2902810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902813">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2902893">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2902974">func</span>&nbsp;<span class="op" id="2902979">(</span><span class="ident" id="2902980">v</span>&nbsp;<span class="ident" id="2902982">Value</span><span class="op" id="2902987">)</span>&nbsp;<span class="ident" id="2902989">OverflowUint</span><span class="op" id="2903001">(</span><span class="ident" id="2903002">x</span>&nbsp;<span class="builtintype" id="2903004">uint64</span><span class="op" id="2903010">)</span>&nbsp;<span class="builtintype" id="2903012">bool</span>&nbsp;<span class="op" id="2903017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903020">k</span>&nbsp;<span class="op" id="2903022">:=</span>&nbsp;<span class="ident" id="2903025">v</span><span class="op" id="2903026">.</span><span class="ident" id="2903027">kind</span><span class="op" id="2903031">(</span><span class="op" id="2903032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903035">switch</span>&nbsp;<span class="ident" id="2903042">k</span>&nbsp;<span class="op" id="2903044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903047">case</span>&nbsp;<span class="ident" id="2903052">Uint</span><span class="op" id="2903056">,</span>&nbsp;<span class="ident" id="2903058">Uintptr</span><span class="op" id="2903065">,</span>&nbsp;<span class="ident" id="2903067">Uint8</span><span class="op" id="2903072">,</span>&nbsp;<span class="ident" id="2903074">Uint16</span><span class="op" id="2903080">,</span>&nbsp;<span class="ident" id="2903082">Uint32</span><span class="op" id="2903088">,</span>&nbsp;<span class="ident" id="2903090">Uint64</span><span class="op" id="2903096">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903100">bitSize</span>&nbsp;<span class="op" id="2903108">:=</span>&nbsp;<span class="ident" id="2903111">v</span><span class="op" id="2903112">.</span><span class="ident" id="2903113">typ</span><span class="op" id="2903116">.</span><span class="ident" id="2903117">size</span>&nbsp;<span class="op" id="2903122">*</span>&nbsp;<span class="num" id="2903124">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903128">trunc</span>&nbsp;<span class="op" id="2903134">:=</span>&nbsp;<span class="op" id="2903137">(</span><span class="ident" id="2903138">x</span>&nbsp;<span class="op" id="2903140">&lt;&lt;</span>&nbsp;<span class="op" id="2903143">(</span><span class="num" id="2903144">64</span>&nbsp;<span class="op" id="2903147">-</span>&nbsp;<span class="ident" id="2903149">bitSize</span><span class="op" id="2903156">)</span><span class="op" id="2903157">)</span>&nbsp;<span class="op" id="2903159">&gt;&gt;</span>&nbsp;<span class="op" id="2903162">(</span><span class="num" id="2903163">64</span>&nbsp;<span class="op" id="2903166">-</span>&nbsp;<span class="ident" id="2903168">bitSize</span><span class="op" id="2903175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903179">return</span>&nbsp;<span class="ident" id="2903186">x</span>&nbsp;<span class="op" id="2903188">!=</span>&nbsp;<span class="ident" id="2903191">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2903201">panic</span><span class="op" id="2903206">(</span><span class="op" id="2903207">&amp;</span><span class="ident" id="2903208">ValueError</span><span class="op" id="2903218">{</span><span class="string" id="2903219">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2903247">,</span>&nbsp;<span class="ident" id="2903249">v</span><span class="op" id="2903250">.</span><span class="ident" id="2903251">kind</span><span class="op" id="2903255">(</span><span class="op" id="2903256">)</span><span class="op" id="2903257">}</span><span class="op" id="2903258">)</span><br>
<span class="lineno"></span><span class="op" id="2903260">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2903263">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2903306">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2903362">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2903414">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2903466">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2903545">//</span><br>
<span class="lineno"></span><span class="comment" id="2903548">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2903610">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2903668">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2903728">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2903784">//</span><br>
<span class="lineno"></span><span class="comment" id="2903787">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2903849">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2903914">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2903988">func</span>&nbsp;<span class="op" id="2903993">(</span><span class="ident" id="2903994">v</span>&nbsp;<span class="ident" id="2903996">Value</span><span class="op" id="2904001">)</span>&nbsp;<span class="ident" id="2904003">Pointer</span><span class="op" id="2904010">(</span><span class="op" id="2904011">)</span>&nbsp;<span class="builtintype" id="2904013">uintptr</span>&nbsp;<span class="op" id="2904021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904024">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904044">k</span>&nbsp;<span class="op" id="2904046">:=</span>&nbsp;<span class="ident" id="2904049">v</span><span class="op" id="2904050">.</span><span class="ident" id="2904051">kind</span><span class="op" id="2904055">(</span><span class="op" id="2904056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904059">switch</span>&nbsp;<span class="ident" id="2904066">k</span>&nbsp;<span class="op" id="2904068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904071">case</span>&nbsp;<span class="ident" id="2904076">Chan</span><span class="op" id="2904080">,</span>&nbsp;<span class="ident" id="2904082">Map</span><span class="op" id="2904085">,</span>&nbsp;<span class="ident" id="2904087">Ptr</span><span class="op" id="2904090">,</span>&nbsp;<span class="ident" id="2904092">UnsafePointer</span><span class="op" id="2904105">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904109">return</span>&nbsp;<span class="builtintype" id="2904116">uintptr</span><span class="op" id="2904123">(</span><span class="ident" id="2904124">v</span><span class="op" id="2904125">.</span><span class="ident" id="2904126">pointer</span><span class="op" id="2904133">(</span><span class="op" id="2904134">)</span><span class="op" id="2904135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904138">case</span>&nbsp;<span class="ident" id="2904143">Func</span><span class="op" id="2904147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904151">if</span>&nbsp;<span class="ident" id="2904154">v</span><span class="op" id="2904155">.</span><span class="ident" id="2904156">flag</span><span class="op" id="2904160">&amp;</span><span class="ident" id="2904161">flagMethod</span>&nbsp;<span class="op" id="2904172">!=</span>&nbsp;<span class="num" id="2904175">0</span>&nbsp;<span class="op" id="2904177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904182">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904240">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904300">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904366">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904431">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904494">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904539">f</span>&nbsp;<span class="op" id="2904541">:=</span>&nbsp;<span class="ident" id="2904544">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904563">return</span>&nbsp;<span class="op" id="2904570">*</span><span class="op" id="2904571">*</span><span class="op" id="2904572">(</span><span class="op" id="2904573">*</span><span class="op" id="2904574">*</span><span class="builtintype" id="2904575">uintptr</span><span class="op" id="2904582">)</span><span class="op" id="2904583">(</span><span class="ident" id="2904584">unsafe</span><span class="op" id="2904590">.</span><span class="ident" id="2904591">Pointer</span><span class="op" id="2904598">(</span><span class="op" id="2904599">&amp;</span><span class="ident" id="2904600">f</span><span class="op" id="2904601">)</span><span class="op" id="2904602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904610">p</span>&nbsp;<span class="op" id="2904612">:=</span>&nbsp;<span class="ident" id="2904615">v</span><span class="op" id="2904616">.</span><span class="ident" id="2904617">pointer</span><span class="op" id="2904624">(</span><span class="op" id="2904625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904629">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904675">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904721">if</span>&nbsp;<span class="ident" id="2904724">p</span>&nbsp;<span class="op" id="2904726">!=</span>&nbsp;<span class="builtintype" id="2904729">nil</span>&nbsp;<span class="op" id="2904733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904738">p</span>&nbsp;<span class="op" id="2904740">=</span>&nbsp;<span class="op" id="2904742">*</span><span class="op" id="2904743">(</span><span class="op" id="2904744">*</span><span class="ident" id="2904745">unsafe</span><span class="op" id="2904751">.</span><span class="ident" id="2904752">Pointer</span><span class="op" id="2904759">)</span><span class="op" id="2904760">(</span><span class="ident" id="2904761">p</span><span class="op" id="2904762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904770">return</span>&nbsp;<span class="builtintype" id="2904777">uintptr</span><span class="op" id="2904784">(</span><span class="ident" id="2904785">p</span><span class="op" id="2904786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904790">case</span>&nbsp;<span class="ident" id="2904795">Slice</span><span class="op" id="2904800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904804">return</span>&nbsp;<span class="op" id="2904811">(</span><span class="op" id="2904812">*</span><span class="ident" id="2904813">SliceHeader</span><span class="op" id="2904824">)</span><span class="op" id="2904825">(</span><span class="ident" id="2904826">v</span><span class="op" id="2904827">.</span><span class="ident" id="2904828">ptr</span><span class="op" id="2904831">)</span><span class="op" id="2904832">.</span><span class="ident" id="2904833">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2904842">panic</span><span class="op" id="2904847">(</span><span class="op" id="2904848">&amp;</span><span class="ident" id="2904849">ValueError</span><span class="op" id="2904859">{</span><span class="string" id="2904860">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2904883">,</span>&nbsp;<span class="ident" id="2904885">v</span><span class="op" id="2904886">.</span><span class="ident" id="2904887">kind</span><span class="op" id="2904891">(</span><span class="op" id="2904892">)</span><span class="op" id="2904893">}</span><span class="op" id="2904894">)</span><br>
<span class="lineno"></span><span class="op" id="2904896">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2904899">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2904956">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2904994">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2905040">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2905109">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2905196">func</span>&nbsp;<span class="op" id="2905201">(</span><span class="ident" id="2905202">v</span>&nbsp;<span class="ident" id="2905204">Value</span><span class="op" id="2905209">)</span>&nbsp;<span class="ident" id="2905211">Recv</span><span class="op" id="2905215">(</span><span class="op" id="2905216">)</span>&nbsp;<span class="op" id="2905218">(</span><span class="ident" id="2905219">x</span>&nbsp;<span class="ident" id="2905221">Value</span><span class="op" id="2905226">,</span>&nbsp;<span class="ident" id="2905228">ok</span>&nbsp;<span class="builtintype" id="2905231">bool</span><span class="op" id="2905235">)</span>&nbsp;<span class="op" id="2905237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905240">v</span><span class="op" id="2905241">.</span><span class="ident" id="2905242">mustBe</span><span class="op" id="2905248">(</span><span class="ident" id="2905249">Chan</span><span class="op" id="2905253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905256">v</span><span class="op" id="2905257">.</span><span class="ident" id="2905258">mustBeExported</span><span class="op" id="2905272">(</span><span class="op" id="2905273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905276">return</span>&nbsp;<span class="ident" id="2905283">v</span><span class="op" id="2905284">.</span><span class="ident" id="2905285">recv</span><span class="op" id="2905289">(</span><span class="builtintype" id="2905290">false</span><span class="op" id="2905295">)</span><br>
<span class="lineno">1235</span><span class="op" id="2905297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905300">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2905346">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2905377">func</span>&nbsp;<span class="op" id="2905382">(</span><span class="ident" id="2905383">v</span>&nbsp;<span class="ident" id="2905385">Value</span><span class="op" id="2905390">)</span>&nbsp;<span class="ident" id="2905392">recv</span><span class="op" id="2905396">(</span><span class="ident" id="2905397">nb</span>&nbsp;<span class="builtintype" id="2905400">bool</span><span class="op" id="2905404">)</span>&nbsp;<span class="op" id="2905406">(</span><span class="ident" id="2905407">val</span>&nbsp;<span class="ident" id="2905411">Value</span><span class="op" id="2905416">,</span>&nbsp;<span class="ident" id="2905418">ok</span>&nbsp;<span class="builtintype" id="2905421">bool</span><span class="op" id="2905425">)</span>&nbsp;<span class="op" id="2905427">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905430">tt</span>&nbsp;<span class="op" id="2905433">:=</span>&nbsp;<span class="op" id="2905436">(</span><span class="op" id="2905437">*</span><span class="ident" id="2905438">chanType</span><span class="op" id="2905446">)</span><span class="op" id="2905447">(</span><span class="ident" id="2905448">unsafe</span><span class="op" id="2905454">.</span><span class="ident" id="2905455">Pointer</span><span class="op" id="2905462">(</span><span class="ident" id="2905463">v</span><span class="op" id="2905464">.</span><span class="ident" id="2905465">typ</span><span class="op" id="2905468">)</span><span class="op" id="2905469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905472">if</span>&nbsp;<span class="ident" id="2905475">ChanDir</span><span class="op" id="2905482">(</span><span class="ident" id="2905483">tt</span><span class="op" id="2905485">.</span><span class="ident" id="2905486">dir</span><span class="op" id="2905489">)</span><span class="op" id="2905490">&amp;</span><span class="ident" id="2905491">RecvDir</span>&nbsp;<span class="op" id="2905499">==</span>&nbsp;<span class="num" id="2905502">0</span>&nbsp;<span class="op" id="2905504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2905508">panic</span><span class="op" id="2905513">(</span><span class="string" id="2905514">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2905550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905556">t</span>&nbsp;<span class="op" id="2905558">:=</span>&nbsp;<span class="ident" id="2905561">tt</span><span class="op" id="2905563">.</span><span class="ident" id="2905564">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905570">val</span>&nbsp;<span class="op" id="2905574">=</span>&nbsp;<span class="ident" id="2905576">Value</span><span class="op" id="2905581">{</span><span class="ident" id="2905582">t</span><span class="op" id="2905583">,</span>&nbsp;<span class="builtintype" id="2905585">nil</span><span class="op" id="2905588">,</span>&nbsp;<span class="ident" id="2905590">flag</span><span class="op" id="2905594">(</span><span class="ident" id="2905595">t</span><span class="op" id="2905596">.</span><span class="ident" id="2905597">Kind</span><span class="op" id="2905601">(</span><span class="op" id="2905602">)</span><span class="op" id="2905603">)</span><span class="op" id="2905604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905607">var</span>&nbsp;<span class="ident" id="2905611">p</span>&nbsp;<span class="ident" id="2905613">unsafe</span><span class="op" id="2905619">.</span><span class="ident" id="2905620">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905629">if</span>&nbsp;<span class="ident" id="2905632">ifaceIndir</span><span class="op" id="2905642">(</span><span class="ident" id="2905643">t</span><span class="op" id="2905644">)</span>&nbsp;<span class="op" id="2905646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905650">p</span>&nbsp;<span class="op" id="2905652">=</span>&nbsp;<span class="ident" id="2905654">unsafe_New</span><span class="op" id="2905664">(</span><span class="ident" id="2905665">t</span><span class="op" id="2905666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905670">val</span><span class="op" id="2905673">.</span><span class="ident" id="2905674">ptr</span>&nbsp;<span class="op" id="2905678">=</span>&nbsp;<span class="ident" id="2905680">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905684">val</span><span class="op" id="2905687">.</span><span class="ident" id="2905688">flag</span>&nbsp;<span class="op" id="2905693">|=</span>&nbsp;<span class="ident" id="2905696">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905707">}</span>&nbsp;<span class="keyword" id="2905709">else</span>&nbsp;<span class="op" id="2905714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905718">p</span>&nbsp;<span class="op" id="2905720">=</span>&nbsp;<span class="ident" id="2905722">unsafe</span><span class="op" id="2905728">.</span><span class="ident" id="2905729">Pointer</span><span class="op" id="2905736">(</span><span class="op" id="2905737">&amp;</span><span class="ident" id="2905738">val</span><span class="op" id="2905741">.</span><span class="ident" id="2905742">ptr</span><span class="op" id="2905745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905751">selected</span><span class="op" id="2905759">,</span>&nbsp;<span class="ident" id="2905761">ok</span>&nbsp;<span class="op" id="2905764">:=</span>&nbsp;<span class="ident" id="2905767">chanrecv</span><span class="op" id="2905775">(</span><span class="ident" id="2905776">v</span><span class="op" id="2905777">.</span><span class="ident" id="2905778">typ</span><span class="op" id="2905781">,</span>&nbsp;<span class="ident" id="2905783">v</span><span class="op" id="2905784">.</span><span class="ident" id="2905785">pointer</span><span class="op" id="2905792">(</span><span class="op" id="2905793">)</span><span class="op" id="2905794">,</span>&nbsp;<span class="ident" id="2905796">nb</span><span class="op" id="2905798">,</span>&nbsp;<span class="ident" id="2905800">p</span><span class="op" id="2905801">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905804">if</span>&nbsp;<span class="op" id="2905807">!</span><span class="ident" id="2905808">selected</span>&nbsp;<span class="op" id="2905817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905821">val</span>&nbsp;<span class="op" id="2905825">=</span>&nbsp;<span class="ident" id="2905827">Value</span><span class="op" id="2905832">{</span><span class="op" id="2905833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905839">return</span><br>
<span class="lineno"></span><span class="op" id="2905846">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2905849">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2905883">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2905977">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2906050">func</span>&nbsp;<span class="op" id="2906055">(</span><span class="ident" id="2906056">v</span>&nbsp;<span class="ident" id="2906058">Value</span><span class="op" id="2906063">)</span>&nbsp;<span class="ident" id="2906065">Send</span><span class="op" id="2906069">(</span><span class="ident" id="2906070">x</span>&nbsp;<span class="ident" id="2906072">Value</span><span class="op" id="2906077">)</span>&nbsp;<span class="op" id="2906079">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906082">v</span><span class="op" id="2906083">.</span><span class="ident" id="2906084">mustBe</span><span class="op" id="2906090">(</span><span class="ident" id="2906091">Chan</span><span class="op" id="2906095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906098">v</span><span class="op" id="2906099">.</span><span class="ident" id="2906100">mustBeExported</span><span class="op" id="2906114">(</span><span class="op" id="2906115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906118">v</span><span class="op" id="2906119">.</span><span class="ident" id="2906120">send</span><span class="op" id="2906124">(</span><span class="ident" id="2906125">x</span><span class="op" id="2906126">,</span>&nbsp;<span class="builtintype" id="2906128">false</span><span class="op" id="2906133">)</span><br>
<span class="lineno"></span><span class="op" id="2906135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2906138">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2906179">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2906210">func</span>&nbsp;<span class="op" id="2906215">(</span><span class="ident" id="2906216">v</span>&nbsp;<span class="ident" id="2906218">Value</span><span class="op" id="2906223">)</span>&nbsp;<span class="ident" id="2906225">send</span><span class="op" id="2906229">(</span><span class="ident" id="2906230">x</span>&nbsp;<span class="ident" id="2906232">Value</span><span class="op" id="2906237">,</span>&nbsp;<span class="ident" id="2906239">nb</span>&nbsp;<span class="builtintype" id="2906242">bool</span><span class="op" id="2906246">)</span>&nbsp;<span class="op" id="2906248">(</span><span class="ident" id="2906249">selected</span>&nbsp;<span class="builtintype" id="2906258">bool</span><span class="op" id="2906262">)</span>&nbsp;<span class="op" id="2906264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906267">tt</span>&nbsp;<span class="op" id="2906270">:=</span>&nbsp;<span class="op" id="2906273">(</span><span class="op" id="2906274">*</span><span class="ident" id="2906275">chanType</span><span class="op" id="2906283">)</span><span class="op" id="2906284">(</span><span class="ident" id="2906285">unsafe</span><span class="op" id="2906291">.</span><span class="ident" id="2906292">Pointer</span><span class="op" id="2906299">(</span><span class="ident" id="2906300">v</span><span class="op" id="2906301">.</span><span class="ident" id="2906302">typ</span><span class="op" id="2906305">)</span><span class="op" id="2906306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906309">if</span>&nbsp;<span class="ident" id="2906312">ChanDir</span><span class="op" id="2906319">(</span><span class="ident" id="2906320">tt</span><span class="op" id="2906322">.</span><span class="ident" id="2906323">dir</span><span class="op" id="2906326">)</span><span class="op" id="2906327">&amp;</span><span class="ident" id="2906328">SendDir</span>&nbsp;<span class="op" id="2906336">==</span>&nbsp;<span class="num" id="2906339">0</span>&nbsp;<span class="op" id="2906341">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2906345">panic</span><span class="op" id="2906350">(</span><span class="string" id="2906351">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2906387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906393">x</span><span class="op" id="2906394">.</span><span class="ident" id="2906395">mustBeExported</span><span class="op" id="2906409">(</span><span class="op" id="2906410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906413">x</span>&nbsp;<span class="op" id="2906415">=</span>&nbsp;<span class="ident" id="2906417">x</span><span class="op" id="2906418">.</span><span class="ident" id="2906419">assignTo</span><span class="op" id="2906427">(</span><span class="string" id="2906428">&#34;reflect.Value.Send&#34;</span><span class="op" id="2906448">,</span>&nbsp;<span class="ident" id="2906450">tt</span><span class="op" id="2906452">.</span><span class="ident" id="2906453">elem</span><span class="op" id="2906457">,</span>&nbsp;<span class="builtintype" id="2906459">nil</span><span class="op" id="2906462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906465">var</span>&nbsp;<span class="ident" id="2906469">p</span>&nbsp;<span class="ident" id="2906471">unsafe</span><span class="op" id="2906477">.</span><span class="ident" id="2906478">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906487">if</span>&nbsp;<span class="ident" id="2906490">x</span><span class="op" id="2906491">.</span><span class="ident" id="2906492">flag</span><span class="op" id="2906496">&amp;</span><span class="ident" id="2906497">flagIndir</span>&nbsp;<span class="op" id="2906507">!=</span>&nbsp;<span class="num" id="2906510">0</span>&nbsp;<span class="op" id="2906512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906516">p</span>&nbsp;<span class="op" id="2906518">=</span>&nbsp;<span class="ident" id="2906520">x</span><span class="op" id="2906521">.</span><span class="ident" id="2906522">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906527">}</span>&nbsp;<span class="keyword" id="2906529">else</span>&nbsp;<span class="op" id="2906534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906538">p</span>&nbsp;<span class="op" id="2906540">=</span>&nbsp;<span class="ident" id="2906542">unsafe</span><span class="op" id="2906548">.</span><span class="ident" id="2906549">Pointer</span><span class="op" id="2906556">(</span><span class="op" id="2906557">&amp;</span><span class="ident" id="2906558">x</span><span class="op" id="2906559">.</span><span class="ident" id="2906560">ptr</span><span class="op" id="2906563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906566">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906569">return</span>&nbsp;<span class="ident" id="2906576">chansend</span><span class="op" id="2906584">(</span><span class="ident" id="2906585">v</span><span class="op" id="2906586">.</span><span class="ident" id="2906587">typ</span><span class="op" id="2906590">,</span>&nbsp;<span class="ident" id="2906592">v</span><span class="op" id="2906593">.</span><span class="ident" id="2906594">pointer</span><span class="op" id="2906601">(</span><span class="op" id="2906602">)</span><span class="op" id="2906603">,</span>&nbsp;<span class="ident" id="2906605">p</span><span class="op" id="2906606">,</span>&nbsp;<span class="ident" id="2906608">nb</span><span class="op" id="2906610">)</span><br>
<span class="lineno"></span><span class="op" id="2906612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906615">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2906648">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2906686">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2906741">func</span>&nbsp;<span class="op" id="2906746">(</span><span class="ident" id="2906747">v</span>&nbsp;<span class="ident" id="2906749">Value</span><span class="op" id="2906754">)</span>&nbsp;<span class="ident" id="2906756">Set</span><span class="op" id="2906759">(</span><span class="ident" id="2906760">x</span>&nbsp;<span class="ident" id="2906762">Value</span><span class="op" id="2906767">)</span>&nbsp;<span class="op" id="2906769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906772">v</span><span class="op" id="2906773">.</span><span class="ident" id="2906774">mustBeAssignable</span><span class="op" id="2906790">(</span><span class="op" id="2906791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906794">x</span><span class="op" id="2906795">.</span><span class="ident" id="2906796">mustBeExported</span><span class="op" id="2906810">(</span><span class="op" id="2906811">)</span>&nbsp;<span class="comment" id="2906813">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906846">var</span>&nbsp;<span class="ident" id="2906850">target</span>&nbsp;<span class="ident" id="2906857">unsafe</span><span class="op" id="2906863">.</span><span class="ident" id="2906864">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906873">if</span>&nbsp;<span class="ident" id="2906876">v</span><span class="op" id="2906877">.</span><span class="ident" id="2906878">kind</span><span class="op" id="2906882">(</span><span class="op" id="2906883">)</span>&nbsp;<span class="op" id="2906885">==</span>&nbsp;<span class="ident" id="2906888">Interface</span>&nbsp;<span class="op" id="2906898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906902">target</span>&nbsp;<span class="op" id="2906909">=</span>&nbsp;<span class="ident" id="2906911">v</span><span class="op" id="2906912">.</span><span class="ident" id="2906913">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906921">x</span>&nbsp;<span class="op" id="2906923">=</span>&nbsp;<span class="ident" id="2906925">x</span><span class="op" id="2906926">.</span><span class="ident" id="2906927">assignTo</span><span class="op" id="2906935">(</span><span class="string" id="2906936">&#34;reflect.Set&#34;</span><span class="op" id="2906949">,</span>&nbsp;<span class="ident" id="2906951">v</span><span class="op" id="2906952">.</span><span class="ident" id="2906953">typ</span><span class="op" id="2906956">,</span>&nbsp;<span class="ident" id="2906958">target</span><span class="op" id="2906964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906967">if</span>&nbsp;<span class="ident" id="2906970">x</span><span class="op" id="2906971">.</span><span class="ident" id="2906972">flag</span><span class="op" id="2906976">&amp;</span><span class="ident" id="2906977">flagIndir</span>&nbsp;<span class="op" id="2906987">!=</span>&nbsp;<span class="num" id="2906990">0</span>&nbsp;<span class="op" id="2906992">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906996">memmove</span><span class="op" id="2907003">(</span><span class="ident" id="2907004">v</span><span class="op" id="2907005">.</span><span class="ident" id="2907006">ptr</span><span class="op" id="2907009">,</span>&nbsp;<span class="ident" id="2907011">x</span><span class="op" id="2907012">.</span><span class="ident" id="2907013">ptr</span><span class="op" id="2907016">,</span>&nbsp;<span class="ident" id="2907018">v</span><span class="op" id="2907019">.</span><span class="ident" id="2907020">typ</span><span class="op" id="2907023">.</span><span class="ident" id="2907024">size</span><span class="op" id="2907028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907031">}</span>&nbsp;<span class="keyword" id="2907033">else</span>&nbsp;<span class="op" id="2907038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907042">*</span><span class="op" id="2907043">(</span><span class="op" id="2907044">*</span><span class="ident" id="2907045">unsafe</span><span class="op" id="2907051">.</span><span class="ident" id="2907052">Pointer</span><span class="op" id="2907059">)</span><span class="op" id="2907060">(</span><span class="ident" id="2907061">v</span><span class="op" id="2907062">.</span><span class="ident" id="2907063">ptr</span><span class="op" id="2907066">)</span>&nbsp;<span class="op" id="2907068">=</span>&nbsp;<span class="ident" id="2907070">x</span><span class="op" id="2907071">.</span><span class="ident" id="2907072">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907077">}</span><br>
<span class="lineno"></span><span class="op" id="2907079">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2907082">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2907120">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2907182">func</span>&nbsp;<span class="op" id="2907187">(</span><span class="ident" id="2907188">v</span>&nbsp;<span class="ident" id="2907190">Value</span><span class="op" id="2907195">)</span>&nbsp;<span class="ident" id="2907197">SetBool</span><span class="op" id="2907204">(</span><span class="ident" id="2907205">x</span>&nbsp;<span class="builtintype" id="2907207">bool</span><span class="op" id="2907211">)</span>&nbsp;<span class="op" id="2907213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907216">v</span><span class="op" id="2907217">.</span><span class="ident" id="2907218">mustBeAssignable</span><span class="op" id="2907234">(</span><span class="op" id="2907235">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907238">v</span><span class="op" id="2907239">.</span><span class="ident" id="2907240">mustBe</span><span class="op" id="2907246">(</span><span class="ident" id="2907247">Bool</span><span class="op" id="2907251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907254">*</span><span class="op" id="2907255">(</span><span class="op" id="2907256">*</span><span class="builtintype" id="2907257">bool</span><span class="op" id="2907261">)</span><span class="op" id="2907262">(</span><span class="ident" id="2907263">v</span><span class="op" id="2907264">.</span><span class="ident" id="2907265">ptr</span><span class="op" id="2907268">)</span>&nbsp;<span class="op" id="2907270">=</span>&nbsp;<span class="ident" id="2907272">x</span><br>
<span class="lineno"></span><span class="op" id="2907274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907277">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2907316">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2907378">func</span>&nbsp;<span class="op" id="2907383">(</span><span class="ident" id="2907384">v</span>&nbsp;<span class="ident" id="2907386">Value</span><span class="op" id="2907391">)</span>&nbsp;<span class="ident" id="2907393">SetBytes</span><span class="op" id="2907401">(</span><span class="ident" id="2907402">x</span>&nbsp;<span class="op" id="2907404">[</span><span class="op" id="2907405">]</span><span class="builtintype" id="2907406">byte</span><span class="op" id="2907410">)</span>&nbsp;<span class="op" id="2907412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907415">v</span><span class="op" id="2907416">.</span><span class="ident" id="2907417">mustBeAssignable</span><span class="op" id="2907433">(</span><span class="op" id="2907434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907437">v</span><span class="op" id="2907438">.</span><span class="ident" id="2907439">mustBe</span><span class="op" id="2907445">(</span><span class="ident" id="2907446">Slice</span><span class="op" id="2907451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907454">if</span>&nbsp;<span class="ident" id="2907457">v</span><span class="op" id="2907458">.</span><span class="ident" id="2907459">typ</span><span class="op" id="2907462">.</span><span class="ident" id="2907463">Elem</span><span class="op" id="2907467">(</span><span class="op" id="2907468">)</span><span class="op" id="2907469">.</span><span class="ident" id="2907470">Kind</span><span class="op" id="2907474">(</span><span class="op" id="2907475">)</span>&nbsp;<span class="op" id="2907477">!=</span>&nbsp;<span class="ident" id="2907480">Uint8</span>&nbsp;<span class="op" id="2907486">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2907490">panic</span><span class="op" id="2907495">(</span><span class="string" id="2907496">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2907538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907544">*</span><span class="op" id="2907545">(</span><span class="op" id="2907546">*</span><span class="op" id="2907547">[</span><span class="op" id="2907548">]</span><span class="builtintype" id="2907549">byte</span><span class="op" id="2907553">)</span><span class="op" id="2907554">(</span><span class="ident" id="2907555">v</span><span class="op" id="2907556">.</span><span class="ident" id="2907557">ptr</span><span class="op" id="2907560">)</span>&nbsp;<span class="op" id="2907562">=</span>&nbsp;<span class="ident" id="2907564">x</span><br>
<span class="lineno"></span><span class="op" id="2907566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2907569">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2907608">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2907679">func</span>&nbsp;<span class="op" id="2907684">(</span><span class="ident" id="2907685">v</span>&nbsp;<span class="ident" id="2907687">Value</span><span class="op" id="2907692">)</span>&nbsp;<span class="ident" id="2907694">setRunes</span><span class="op" id="2907702">(</span><span class="ident" id="2907703">x</span>&nbsp;<span class="op" id="2907705">[</span><span class="op" id="2907706">]</span><span class="builtintype" id="2907707">rune</span><span class="op" id="2907711">)</span>&nbsp;<span class="op" id="2907713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907716">v</span><span class="op" id="2907717">.</span><span class="ident" id="2907718">mustBeAssignable</span><span class="op" id="2907734">(</span><span class="op" id="2907735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2907738">v</span><span class="op" id="2907739">.</span><span class="ident" id="2907740">mustBe</span><span class="op" id="2907746">(</span><span class="ident" id="2907747">Slice</span><span class="op" id="2907752">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907755">if</span>&nbsp;<span class="ident" id="2907758">v</span><span class="op" id="2907759">.</span><span class="ident" id="2907760">typ</span><span class="op" id="2907763">.</span><span class="ident" id="2907764">Elem</span><span class="op" id="2907768">(</span><span class="op" id="2907769">)</span><span class="op" id="2907770">.</span><span class="ident" id="2907771">Kind</span><span class="op" id="2907775">(</span><span class="op" id="2907776">)</span>&nbsp;<span class="op" id="2907778">!=</span>&nbsp;<span class="ident" id="2907781">Int32</span>&nbsp;<span class="op" id="2907787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2907791">panic</span><span class="op" id="2907796">(</span><span class="string" id="2907797">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2907839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907845">*</span><span class="op" id="2907846">(</span><span class="op" id="2907847">*</span><span class="op" id="2907848">[</span><span class="op" id="2907849">]</span><span class="builtintype" id="2907850">rune</span><span class="op" id="2907854">)</span><span class="op" id="2907855">(</span><span class="ident" id="2907856">v</span><span class="op" id="2907857">.</span><span class="ident" id="2907858">ptr</span><span class="op" id="2907861">)</span>&nbsp;<span class="op" id="2907863">=</span>&nbsp;<span class="ident" id="2907865">x</span><br>
<span class="lineno"></span><span class="op" id="2907867">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2907870">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2907916">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2907998">func</span>&nbsp;<span class="op" id="2908003">(</span><span class="ident" id="2908004">v</span>&nbsp;<span class="ident" id="2908006">Value</span><span class="op" id="2908011">)</span>&nbsp;<span class="ident" id="2908013">SetComplex</span><span class="op" id="2908023">(</span><span class="ident" id="2908024">x</span>&nbsp;<span class="builtintype" id="2908026">complex128</span><span class="op" id="2908036">)</span>&nbsp;<span class="op" id="2908038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2908041">v</span><span class="op" id="2908042">.</span><span class="ident" id="2908043">mustBeAssignable</span><span class="op" id="2908059">(</span><span class="op" id="2908060">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908063">switch</span>&nbsp;<span class="ident" id="2908070">k</span>&nbsp;<span class="op" id="2908072">:=</span>&nbsp;<span class="ident" id="2908075">v</span><span class="op" id="2908076">.</span><span class="ident" id="2908077">kind</span><span class="op" id="2908081">(</span><span class="op" id="2908082">)</span><span class="op" id="2908083">;</span>&nbsp;<span class="ident" id="2908085">k</span>&nbsp;<span class="op" id="2908087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908090">default</span><span class="op" id="2908097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2908101">panic</span><span class="op" id="2908106">(</span><span class="op" id="2908107">&amp;</span><span class="ident" id="2908108">ValueError</span><span class="op" id="2908118">{</span><span class="string" id="2908119">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2908145">,</span>&nbsp;<span class="ident" id="2908147">v</span><span class="op" id="2908148">.</span><span class="ident" id="2908149">kind</span><span class="op" id="2908153">(</span><span class="op" id="2908154">)</span><span class="op" id="2908155">}</span><span class="op" id="2908156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908159">case</span>&nbsp;<span class="ident" id="2908164">Complex64</span><span class="op" id="2908173">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908177">*</span><span class="op" id="2908178">(</span><span class="op" id="2908179">*</span><span class="builtintype" id="2908180">complex64</span><span class="op" id="2908189">)</span><span class="op" id="2908190">(</span><span class="ident" id="2908191">v</span><span class="op" id="2908192">.</span><span class="ident" id="2908193">ptr</span><span class="op" id="2908196">)</span>&nbsp;<span class="op" id="2908198">=</span>&nbsp;<span class="builtintype" id="2908200">complex64</span><span class="op" id="2908209">(</span><span class="ident" id="2908210">x</span><span class="op" id="2908211">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908214">case</span>&nbsp;<span class="ident" id="2908219">Complex128</span><span class="op" id="2908229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908233">*</span><span class="op" id="2908234">(</span><span class="op" id="2908235">*</span><span class="builtintype" id="2908236">complex128</span><span class="op" id="2908246">)</span><span class="op" id="2908247">(</span><span class="ident" id="2908248">v</span><span class="op" id="2908249">.</span><span class="ident" id="2908250">ptr</span><span class="op" id="2908253">)</span>&nbsp;<span class="op" id="2908255">=</span>&nbsp;<span class="ident" id="2908257">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908260">}</span><br>
<span class="lineno"></span><span class="op" id="2908262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2908265">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2908309">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2908386">func</span>&nbsp;<span class="op" id="2908391">(</span><span class="ident" id="2908392">v</span>&nbsp;<span class="ident" id="2908394">Value</span><span class="op" id="2908399">)</span>&nbsp;<span class="ident" id="2908401">SetFloat</span><span class="op" id="2908409">(</span><span class="ident" id="2908410">x</span>&nbsp;<span class="builtintype" id="2908412">float64</span><span class="op" id="2908419">)</span>&nbsp;<span class="op" id="2908421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2908424">v</span><span class="op" id="2908425">.</span><span class="ident" id="2908426">mustBeAssignable</span><span class="op" id="2908442">(</span><span class="op" id="2908443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908446">switch</span>&nbsp;<span class="ident" id="2908453">k</span>&nbsp;<span class="op" id="2908455">:=</span>&nbsp;<span class="ident" id="2908458">v</span><span class="op" id="2908459">.</span><span class="ident" id="2908460">kind</span><span class="op" id="2908464">(</span><span class="op" id="2908465">)</span><span class="op" id="2908466">;</span>&nbsp;<span class="ident" id="2908468">k</span>&nbsp;<span class="op" id="2908470">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908473">default</span><span class="op" id="2908480">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2908484">panic</span><span class="op" id="2908489">(</span><span class="op" id="2908490">&amp;</span><span class="ident" id="2908491">ValueError</span><span class="op" id="2908501">{</span><span class="string" id="2908502">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2908526">,</span>&nbsp;<span class="ident" id="2908528">v</span><span class="op" id="2908529">.</span><span class="ident" id="2908530">kind</span><span class="op" id="2908534">(</span><span class="op" id="2908535">)</span><span class="op" id="2908536">}</span><span class="op" id="2908537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908540">case</span>&nbsp;<span class="ident" id="2908545">Float32</span><span class="op" id="2908552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908556">*</span><span class="op" id="2908557">(</span><span class="op" id="2908558">*</span><span class="builtintype" id="2908559">float32</span><span class="op" id="2908566">)</span><span class="op" id="2908567">(</span><span class="ident" id="2908568">v</span><span class="op" id="2908569">.</span><span class="ident" id="2908570">ptr</span><span class="op" id="2908573">)</span>&nbsp;<span class="op" id="2908575">=</span>&nbsp;<span class="builtintype" id="2908577">float32</span><span class="op" id="2908584">(</span><span class="ident" id="2908585">x</span><span class="op" id="2908586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908589">case</span>&nbsp;<span class="ident" id="2908594">Float64</span><span class="op" id="2908601">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908605">*</span><span class="op" id="2908606">(</span><span class="op" id="2908607">*</span><span class="builtintype" id="2908608">float64</span><span class="op" id="2908615">)</span><span class="op" id="2908616">(</span><span class="ident" id="2908617">v</span><span class="op" id="2908618">.</span><span class="ident" id="2908619">ptr</span><span class="op" id="2908622">)</span>&nbsp;<span class="op" id="2908624">=</span>&nbsp;<span class="ident" id="2908626">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908629">}</span><br>
<span class="lineno"></span><span class="op" id="2908631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908634">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2908676">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2908768">func</span>&nbsp;<span class="op" id="2908773">(</span><span class="ident" id="2908774">v</span>&nbsp;<span class="ident" id="2908776">Value</span><span class="op" id="2908781">)</span>&nbsp;<span class="ident" id="2908783">SetInt</span><span class="op" id="2908789">(</span><span class="ident" id="2908790">x</span>&nbsp;<span class="builtintype" id="2908792">int64</span><span class="op" id="2908797">)</span>&nbsp;<span class="op" id="2908799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2908802">v</span><span class="op" id="2908803">.</span><span class="ident" id="2908804">mustBeAssignable</span><span class="op" id="2908820">(</span><span class="op" id="2908821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908824">switch</span>&nbsp;<span class="ident" id="2908831">k</span>&nbsp;<span class="op" id="2908833">:=</span>&nbsp;<span class="ident" id="2908836">v</span><span class="op" id="2908837">.</span><span class="ident" id="2908838">kind</span><span class="op" id="2908842">(</span><span class="op" id="2908843">)</span><span class="op" id="2908844">;</span>&nbsp;<span class="ident" id="2908846">k</span>&nbsp;<span class="op" id="2908848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908851">default</span><span class="op" id="2908858">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2908862">panic</span><span class="op" id="2908867">(</span><span class="op" id="2908868">&amp;</span><span class="ident" id="2908869">ValueError</span><span class="op" id="2908879">{</span><span class="string" id="2908880">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2908902">,</span>&nbsp;<span class="ident" id="2908904">v</span><span class="op" id="2908905">.</span><span class="ident" id="2908906">kind</span><span class="op" id="2908910">(</span><span class="op" id="2908911">)</span><span class="op" id="2908912">}</span><span class="op" id="2908913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908916">case</span>&nbsp;<span class="ident" id="2908921">Int</span><span class="op" id="2908924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908928">*</span><span class="op" id="2908929">(</span><span class="op" id="2908930">*</span><span class="builtintype" id="2908931">int</span><span class="op" id="2908934">)</span><span class="op" id="2908935">(</span><span class="ident" id="2908936">v</span><span class="op" id="2908937">.</span><span class="ident" id="2908938">ptr</span><span class="op" id="2908941">)</span>&nbsp;<span class="op" id="2908943">=</span>&nbsp;<span class="builtintype" id="2908945">int</span><span class="op" id="2908948">(</span><span class="ident" id="2908949">x</span><span class="op" id="2908950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908953">case</span>&nbsp;<span class="ident" id="2908958">Int8</span><span class="op" id="2908962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2908966">*</span><span class="op" id="2908967">(</span><span class="op" id="2908968">*</span><span class="builtintype" id="2908969">int8</span><span class="op" id="2908973">)</span><span class="op" id="2908974">(</span><span class="ident" id="2908975">v</span><span class="op" id="2908976">.</span><span class="ident" id="2908977">ptr</span><span class="op" id="2908980">)</span>&nbsp;<span class="op" id="2908982">=</span>&nbsp;<span class="builtintype" id="2908984">int8</span><span class="op" id="2908988">(</span><span class="ident" id="2908989">x</span><span class="op" id="2908990">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2908993">case</span>&nbsp;<span class="ident" id="2908998">Int16</span><span class="op" id="2909003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909007">*</span><span class="op" id="2909008">(</span><span class="op" id="2909009">*</span><span class="builtintype" id="2909010">int16</span><span class="op" id="2909015">)</span><span class="op" id="2909016">(</span><span class="ident" id="2909017">v</span><span class="op" id="2909018">.</span><span class="ident" id="2909019">ptr</span><span class="op" id="2909022">)</span>&nbsp;<span class="op" id="2909024">=</span>&nbsp;<span class="builtintype" id="2909026">int16</span><span class="op" id="2909031">(</span><span class="ident" id="2909032">x</span><span class="op" id="2909033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909036">case</span>&nbsp;<span class="ident" id="2909041">Int32</span><span class="op" id="2909046">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909050">*</span><span class="op" id="2909051">(</span><span class="op" id="2909052">*</span><span class="builtintype" id="2909053">int32</span><span class="op" id="2909058">)</span><span class="op" id="2909059">(</span><span class="ident" id="2909060">v</span><span class="op" id="2909061">.</span><span class="ident" id="2909062">ptr</span><span class="op" id="2909065">)</span>&nbsp;<span class="op" id="2909067">=</span>&nbsp;<span class="builtintype" id="2909069">int32</span><span class="op" id="2909074">(</span><span class="ident" id="2909075">x</span><span class="op" id="2909076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909079">case</span>&nbsp;<span class="ident" id="2909084">Int64</span><span class="op" id="2909089">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909093">*</span><span class="op" id="2909094">(</span><span class="op" id="2909095">*</span><span class="builtintype" id="2909096">int64</span><span class="op" id="2909101">)</span><span class="op" id="2909102">(</span><span class="ident" id="2909103">v</span><span class="op" id="2909104">.</span><span class="ident" id="2909105">ptr</span><span class="op" id="2909108">)</span>&nbsp;<span class="op" id="2909110">=</span>&nbsp;<span class="ident" id="2909112">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909115">}</span><br>
<span class="lineno"></span><span class="op" id="2909117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909120">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2909152">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2909213">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2909256">func</span>&nbsp;<span class="op" id="2909261">(</span><span class="ident" id="2909262">v</span>&nbsp;<span class="ident" id="2909264">Value</span><span class="op" id="2909269">)</span>&nbsp;<span class="ident" id="2909271">SetLen</span><span class="op" id="2909277">(</span><span class="ident" id="2909278">n</span>&nbsp;<span class="builtintype" id="2909280">int</span><span class="op" id="2909283">)</span>&nbsp;<span class="op" id="2909285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909288">v</span><span class="op" id="2909289">.</span><span class="ident" id="2909290">mustBeAssignable</span><span class="op" id="2909306">(</span><span class="op" id="2909307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909310">v</span><span class="op" id="2909311">.</span><span class="ident" id="2909312">mustBe</span><span class="op" id="2909318">(</span><span class="ident" id="2909319">Slice</span><span class="op" id="2909324">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909327">s</span>&nbsp;<span class="op" id="2909329">:=</span>&nbsp;<span class="op" id="2909332">(</span><span class="op" id="2909333">*</span><span class="ident" id="2909334">sliceHeader</span><span class="op" id="2909345">)</span><span class="op" id="2909346">(</span><span class="ident" id="2909347">v</span><span class="op" id="2909348">.</span><span class="ident" id="2909349">ptr</span><span class="op" id="2909352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909355">if</span>&nbsp;<span class="builtintype" id="2909358">uint</span><span class="op" id="2909362">(</span><span class="ident" id="2909363">n</span><span class="op" id="2909364">)</span>&nbsp;<span class="op" id="2909366">&gt;</span>&nbsp;<span class="builtintype" id="2909368">uint</span><span class="op" id="2909372">(</span><span class="ident" id="2909373">s</span><span class="op" id="2909374">.</span><span class="ident" id="2909375">Cap</span><span class="op" id="2909378">)</span>&nbsp;<span class="op" id="2909380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2909384">panic</span><span class="op" id="2909389">(</span><span class="string" id="2909390">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2909436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909442">s</span><span class="op" id="2909443">.</span><span class="ident" id="2909444">Len</span>&nbsp;<span class="op" id="2909448">=</span>&nbsp;<span class="ident" id="2909450">n</span><br>
<span class="lineno">1395</span><span class="op" id="2909452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2909455">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2909489">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2909565">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2909608">func</span>&nbsp;<span class="op" id="2909613">(</span><span class="ident" id="2909614">v</span>&nbsp;<span class="ident" id="2909616">Value</span><span class="op" id="2909621">)</span>&nbsp;<span class="ident" id="2909623">SetCap</span><span class="op" id="2909629">(</span><span class="ident" id="2909630">n</span>&nbsp;<span class="builtintype" id="2909632">int</span><span class="op" id="2909635">)</span>&nbsp;<span class="op" id="2909637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909640">v</span><span class="op" id="2909641">.</span><span class="ident" id="2909642">mustBeAssignable</span><span class="op" id="2909658">(</span><span class="op" id="2909659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909662">v</span><span class="op" id="2909663">.</span><span class="ident" id="2909664">mustBe</span><span class="op" id="2909670">(</span><span class="ident" id="2909671">Slice</span><span class="op" id="2909676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909679">s</span>&nbsp;<span class="op" id="2909681">:=</span>&nbsp;<span class="op" id="2909684">(</span><span class="op" id="2909685">*</span><span class="ident" id="2909686">sliceHeader</span><span class="op" id="2909697">)</span><span class="op" id="2909698">(</span><span class="ident" id="2909699">v</span><span class="op" id="2909700">.</span><span class="ident" id="2909701">ptr</span><span class="op" id="2909704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2909707">if</span>&nbsp;<span class="ident" id="2909710">n</span>&nbsp;<span class="op" id="2909712">&lt;</span>&nbsp;<span class="builtintype" id="2909714">int</span><span class="op" id="2909717">(</span><span class="ident" id="2909718">s</span><span class="op" id="2909719">.</span><span class="ident" id="2909720">Len</span><span class="op" id="2909723">)</span>&nbsp;<span class="op" id="2909725">||</span>&nbsp;<span class="ident" id="2909728">n</span>&nbsp;<span class="op" id="2909730">&gt;</span>&nbsp;<span class="builtintype" id="2909732">int</span><span class="op" id="2909735">(</span><span class="ident" id="2909736">s</span><span class="op" id="2909737">.</span><span class="ident" id="2909738">Cap</span><span class="op" id="2909741">)</span>&nbsp;<span class="op" id="2909743">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2909747">panic</span><span class="op" id="2909752">(</span><span class="string" id="2909753">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2909801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2909804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2909807">s</span><span class="op" id="2909808">.</span><span class="ident" id="2909809">Cap</span>&nbsp;<span class="op" id="2909813">=</span>&nbsp;<span class="ident" id="2909815">n</span><br>
<span class="lineno"></span><span class="op" id="2909817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2909820">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2909891">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2909928">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2909999">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2910058">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2910125">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2910188">func</span>&nbsp;<span class="op" id="2910193">(</span><span class="ident" id="2910194">v</span>&nbsp;<span class="ident" id="2910196">Value</span><span class="op" id="2910201">)</span>&nbsp;<span class="ident" id="2910203">SetMapIndex</span><span class="op" id="2910214">(</span><span class="ident" id="2910215">key</span><span class="op" id="2910218">,</span>&nbsp;<span class="ident" id="2910220">val</span>&nbsp;<span class="ident" id="2910224">Value</span><span class="op" id="2910229">)</span>&nbsp;<span class="op" id="2910231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910234">v</span><span class="op" id="2910235">.</span><span class="ident" id="2910236">mustBe</span><span class="op" id="2910242">(</span><span class="ident" id="2910243">Map</span><span class="op" id="2910246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910249">v</span><span class="op" id="2910250">.</span><span class="ident" id="2910251">mustBeExported</span><span class="op" id="2910265">(</span><span class="op" id="2910266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910269">key</span><span class="op" id="2910272">.</span><span class="ident" id="2910273">mustBeExported</span><span class="op" id="2910287">(</span><span class="op" id="2910288">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910291">tt</span>&nbsp;<span class="op" id="2910294">:=</span>&nbsp;<span class="op" id="2910297">(</span><span class="op" id="2910298">*</span><span class="ident" id="2910299">mapType</span><span class="op" id="2910306">)</span><span class="op" id="2910307">(</span><span class="ident" id="2910308">unsafe</span><span class="op" id="2910314">.</span><span class="ident" id="2910315">Pointer</span><span class="op" id="2910322">(</span><span class="ident" id="2910323">v</span><span class="op" id="2910324">.</span><span class="ident" id="2910325">typ</span><span class="op" id="2910328">)</span><span class="op" id="2910329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910332">key</span>&nbsp;<span class="op" id="2910336">=</span>&nbsp;<span class="ident" id="2910338">key</span><span class="op" id="2910341">.</span><span class="ident" id="2910342">assignTo</span><span class="op" id="2910350">(</span><span class="string" id="2910351">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2910378">,</span>&nbsp;<span class="ident" id="2910380">tt</span><span class="op" id="2910382">.</span><span class="ident" id="2910383">key</span><span class="op" id="2910386">,</span>&nbsp;<span class="builtintype" id="2910388">nil</span><span class="op" id="2910391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910394">var</span>&nbsp;<span class="ident" id="2910398">k</span>&nbsp;<span class="ident" id="2910400">unsafe</span><span class="op" id="2910406">.</span><span class="ident" id="2910407">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910416">if</span>&nbsp;<span class="ident" id="2910419">key</span><span class="op" id="2910422">.</span><span class="ident" id="2910423">flag</span><span class="op" id="2910427">&amp;</span><span class="ident" id="2910428">flagIndir</span>&nbsp;<span class="op" id="2910438">!=</span>&nbsp;<span class="num" id="2910441">0</span>&nbsp;<span class="op" id="2910443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910447">k</span>&nbsp;<span class="op" id="2910449">=</span>&nbsp;<span class="ident" id="2910451">key</span><span class="op" id="2910454">.</span><span class="ident" id="2910455">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910460">}</span>&nbsp;<span class="keyword" id="2910462">else</span>&nbsp;<span class="op" id="2910467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910471">k</span>&nbsp;<span class="op" id="2910473">=</span>&nbsp;<span class="ident" id="2910475">unsafe</span><span class="op" id="2910481">.</span><span class="ident" id="2910482">Pointer</span><span class="op" id="2910489">(</span><span class="op" id="2910490">&amp;</span><span class="ident" id="2910491">key</span><span class="op" id="2910494">.</span><span class="ident" id="2910495">ptr</span><span class="op" id="2910498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910504">if</span>&nbsp;<span class="ident" id="2910507">val</span><span class="op" id="2910510">.</span><span class="ident" id="2910511">typ</span>&nbsp;<span class="op" id="2910515">==</span>&nbsp;<span class="builtintype" id="2910518">nil</span>&nbsp;<span class="op" id="2910522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910526">mapdelete</span><span class="op" id="2910535">(</span><span class="ident" id="2910536">v</span><span class="op" id="2910537">.</span><span class="ident" id="2910538">typ</span><span class="op" id="2910541">,</span>&nbsp;<span class="ident" id="2910543">v</span><span class="op" id="2910544">.</span><span class="ident" id="2910545">pointer</span><span class="op" id="2910552">(</span><span class="op" id="2910553">)</span><span class="op" id="2910554">,</span>&nbsp;<span class="ident" id="2910556">k</span><span class="op" id="2910557">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910561">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910572">val</span><span class="op" id="2910575">.</span><span class="ident" id="2910576">mustBeExported</span><span class="op" id="2910590">(</span><span class="op" id="2910591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910594">val</span>&nbsp;<span class="op" id="2910598">=</span>&nbsp;<span class="ident" id="2910600">val</span><span class="op" id="2910603">.</span><span class="ident" id="2910604">assignTo</span><span class="op" id="2910612">(</span><span class="string" id="2910613">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2910640">,</span>&nbsp;<span class="ident" id="2910642">tt</span><span class="op" id="2910644">.</span><span class="ident" id="2910645">elem</span><span class="op" id="2910649">,</span>&nbsp;<span class="builtintype" id="2910651">nil</span><span class="op" id="2910654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910657">var</span>&nbsp;<span class="ident" id="2910661">e</span>&nbsp;<span class="ident" id="2910663">unsafe</span><span class="op" id="2910669">.</span><span class="ident" id="2910670">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910679">if</span>&nbsp;<span class="ident" id="2910682">val</span><span class="op" id="2910685">.</span><span class="ident" id="2910686">flag</span><span class="op" id="2910690">&amp;</span><span class="ident" id="2910691">flagIndir</span>&nbsp;<span class="op" id="2910701">!=</span>&nbsp;<span class="num" id="2910704">0</span>&nbsp;<span class="op" id="2910706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910710">e</span>&nbsp;<span class="op" id="2910712">=</span>&nbsp;<span class="ident" id="2910714">val</span><span class="op" id="2910717">.</span><span class="ident" id="2910718">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910723">}</span>&nbsp;<span class="keyword" id="2910725">else</span>&nbsp;<span class="op" id="2910730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910734">e</span>&nbsp;<span class="op" id="2910736">=</span>&nbsp;<span class="ident" id="2910738">unsafe</span><span class="op" id="2910744">.</span><span class="ident" id="2910745">Pointer</span><span class="op" id="2910752">(</span><span class="op" id="2910753">&amp;</span><span class="ident" id="2910754">val</span><span class="op" id="2910757">.</span><span class="ident" id="2910758">ptr</span><span class="op" id="2910761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910764">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910767">mapassign</span><span class="op" id="2910776">(</span><span class="ident" id="2910777">v</span><span class="op" id="2910778">.</span><span class="ident" id="2910779">typ</span><span class="op" id="2910782">,</span>&nbsp;<span class="ident" id="2910784">v</span><span class="op" id="2910785">.</span><span class="ident" id="2910786">pointer</span><span class="op" id="2910793">(</span><span class="op" id="2910794">)</span><span class="op" id="2910795">,</span>&nbsp;<span class="ident" id="2910797">k</span><span class="op" id="2910798">,</span>&nbsp;<span class="ident" id="2910800">e</span><span class="op" id="2910801">)</span><br>
<span class="lineno"></span><span class="op" id="2910803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2910806">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2910849">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2910955">func</span>&nbsp;<span class="op" id="2910960">(</span><span class="ident" id="2910961">v</span>&nbsp;<span class="ident" id="2910963">Value</span><span class="op" id="2910968">)</span>&nbsp;<span class="ident" id="2910970">SetUint</span><span class="op" id="2910977">(</span><span class="ident" id="2910978">x</span>&nbsp;<span class="builtintype" id="2910980">uint64</span><span class="op" id="2910986">)</span>&nbsp;<span class="op" id="2910988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910991">v</span><span class="op" id="2910992">.</span><span class="ident" id="2910993">mustBeAssignable</span><span class="op" id="2911009">(</span><span class="op" id="2911010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911013">switch</span>&nbsp;<span class="ident" id="2911020">k</span>&nbsp;<span class="op" id="2911022">:=</span>&nbsp;<span class="ident" id="2911025">v</span><span class="op" id="2911026">.</span><span class="ident" id="2911027">kind</span><span class="op" id="2911031">(</span><span class="op" id="2911032">)</span><span class="op" id="2911033">;</span>&nbsp;<span class="ident" id="2911035">k</span>&nbsp;<span class="op" id="2911037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911040">default</span><span class="op" id="2911047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2911051">panic</span><span class="op" id="2911056">(</span><span class="op" id="2911057">&amp;</span><span class="ident" id="2911058">ValueError</span><span class="op" id="2911068">{</span><span class="string" id="2911069">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2911092">,</span>&nbsp;<span class="ident" id="2911094">v</span><span class="op" id="2911095">.</span><span class="ident" id="2911096">kind</span><span class="op" id="2911100">(</span><span class="op" id="2911101">)</span><span class="op" id="2911102">}</span><span class="op" id="2911103">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911106">case</span>&nbsp;<span class="ident" id="2911111">Uint</span><span class="op" id="2911115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911119">*</span><span class="op" id="2911120">(</span><span class="op" id="2911121">*</span><span class="builtintype" id="2911122">uint</span><span class="op" id="2911126">)</span><span class="op" id="2911127">(</span><span class="ident" id="2911128">v</span><span class="op" id="2911129">.</span><span class="ident" id="2911130">ptr</span><span class="op" id="2911133">)</span>&nbsp;<span class="op" id="2911135">=</span>&nbsp;<span class="builtintype" id="2911137">uint</span><span class="op" id="2911141">(</span><span class="ident" id="2911142">x</span><span class="op" id="2911143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911146">case</span>&nbsp;<span class="ident" id="2911151">Uint8</span><span class="op" id="2911156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911160">*</span><span class="op" id="2911161">(</span><span class="op" id="2911162">*</span><span class="builtintype" id="2911163">uint8</span><span class="op" id="2911168">)</span><span class="op" id="2911169">(</span><span class="ident" id="2911170">v</span><span class="op" id="2911171">.</span><span class="ident" id="2911172">ptr</span><span class="op" id="2911175">)</span>&nbsp;<span class="op" id="2911177">=</span>&nbsp;<span class="builtintype" id="2911179">uint8</span><span class="op" id="2911184">(</span><span class="ident" id="2911185">x</span><span class="op" id="2911186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911189">case</span>&nbsp;<span class="ident" id="2911194">Uint16</span><span class="op" id="2911200">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911204">*</span><span class="op" id="2911205">(</span><span class="op" id="2911206">*</span><span class="builtintype" id="2911207">uint16</span><span class="op" id="2911213">)</span><span class="op" id="2911214">(</span><span class="ident" id="2911215">v</span><span class="op" id="2911216">.</span><span class="ident" id="2911217">ptr</span><span class="op" id="2911220">)</span>&nbsp;<span class="op" id="2911222">=</span>&nbsp;<span class="builtintype" id="2911224">uint16</span><span class="op" id="2911230">(</span><span class="ident" id="2911231">x</span><span class="op" id="2911232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911235">case</span>&nbsp;<span class="ident" id="2911240">Uint32</span><span class="op" id="2911246">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911250">*</span><span class="op" id="2911251">(</span><span class="op" id="2911252">*</span><span class="builtintype" id="2911253">uint32</span><span class="op" id="2911259">)</span><span class="op" id="2911260">(</span><span class="ident" id="2911261">v</span><span class="op" id="2911262">.</span><span class="ident" id="2911263">ptr</span><span class="op" id="2911266">)</span>&nbsp;<span class="op" id="2911268">=</span>&nbsp;<span class="builtintype" id="2911270">uint32</span><span class="op" id="2911276">(</span><span class="ident" id="2911277">x</span><span class="op" id="2911278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911281">case</span>&nbsp;<span class="ident" id="2911286">Uint64</span><span class="op" id="2911292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911296">*</span><span class="op" id="2911297">(</span><span class="op" id="2911298">*</span><span class="builtintype" id="2911299">uint64</span><span class="op" id="2911305">)</span><span class="op" id="2911306">(</span><span class="ident" id="2911307">v</span><span class="op" id="2911308">.</span><span class="ident" id="2911309">ptr</span><span class="op" id="2911312">)</span>&nbsp;<span class="op" id="2911314">=</span>&nbsp;<span class="ident" id="2911316">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911319">case</span>&nbsp;<span class="ident" id="2911324">Uintptr</span><span class="op" id="2911331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911335">*</span><span class="op" id="2911336">(</span><span class="op" id="2911337">*</span><span class="builtintype" id="2911338">uintptr</span><span class="op" id="2911345">)</span><span class="op" id="2911346">(</span><span class="ident" id="2911347">v</span><span class="op" id="2911348">.</span><span class="ident" id="2911349">ptr</span><span class="op" id="2911352">)</span>&nbsp;<span class="op" id="2911354">=</span>&nbsp;<span class="builtintype" id="2911356">uintptr</span><span class="op" id="2911363">(</span><span class="ident" id="2911364">x</span><span class="op" id="2911365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911368">}</span><br>
<span class="lineno"></span><span class="op" id="2911370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2911373">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2911425">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2911472">func</span>&nbsp;<span class="op" id="2911477">(</span><span class="ident" id="2911478">v</span>&nbsp;<span class="ident" id="2911480">Value</span><span class="op" id="2911485">)</span>&nbsp;<span class="ident" id="2911487">SetPointer</span><span class="op" id="2911497">(</span><span class="ident" id="2911498">x</span>&nbsp;<span class="ident" id="2911500">unsafe</span><span class="op" id="2911506">.</span><span class="ident" id="2911507">Pointer</span><span class="op" id="2911514">)</span>&nbsp;<span class="op" id="2911516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911519">v</span><span class="op" id="2911520">.</span><span class="ident" id="2911521">mustBeAssignable</span><span class="op" id="2911537">(</span><span class="op" id="2911538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911541">v</span><span class="op" id="2911542">.</span><span class="ident" id="2911543">mustBe</span><span class="op" id="2911549">(</span><span class="ident" id="2911550">UnsafePointer</span><span class="op" id="2911563">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911566">*</span><span class="op" id="2911567">(</span><span class="op" id="2911568">*</span><span class="ident" id="2911569">unsafe</span><span class="op" id="2911575">.</span><span class="ident" id="2911576">Pointer</span><span class="op" id="2911583">)</span><span class="op" id="2911584">(</span><span class="ident" id="2911585">v</span><span class="op" id="2911586">.</span><span class="ident" id="2911587">ptr</span><span class="op" id="2911590">)</span>&nbsp;<span class="op" id="2911592">=</span>&nbsp;<span class="ident" id="2911594">x</span><br>
<span class="lineno"></span><span class="op" id="2911596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2911599">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2911644">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2911708">func</span>&nbsp;<span class="op" id="2911713">(</span><span class="ident" id="2911714">v</span>&nbsp;<span class="ident" id="2911716">Value</span><span class="op" id="2911721">)</span>&nbsp;<span class="ident" id="2911723">SetString</span><span class="op" id="2911732">(</span><span class="ident" id="2911733">x</span>&nbsp;<span class="builtintype" id="2911735">string</span><span class="op" id="2911741">)</span>&nbsp;<span class="op" id="2911743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911746">v</span><span class="op" id="2911747">.</span><span class="ident" id="2911748">mustBeAssignable</span><span class="op" id="2911764">(</span><span class="op" id="2911765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911768">v</span><span class="op" id="2911769">.</span><span class="ident" id="2911770">mustBe</span><span class="op" id="2911776">(</span><span class="ident" id="2911777">String</span><span class="op" id="2911783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911786">*</span><span class="op" id="2911787">(</span><span class="op" id="2911788">*</span><span class="builtintype" id="2911789">string</span><span class="op" id="2911795">)</span><span class="op" id="2911796">(</span><span class="ident" id="2911797">v</span><span class="op" id="2911798">.</span><span class="ident" id="2911799">ptr</span><span class="op" id="2911802">)</span>&nbsp;<span class="op" id="2911804">=</span>&nbsp;<span class="ident" id="2911806">x</span><br>
<span class="lineno"></span><span class="op" id="2911808">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2911811">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2911836">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2911927">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2911967">func</span>&nbsp;<span class="op" id="2911972">(</span><span class="ident" id="2911973">v</span>&nbsp;<span class="ident" id="2911975">Value</span><span class="op" id="2911980">)</span>&nbsp;<span class="ident" id="2911982">Slice</span><span class="op" id="2911987">(</span><span class="ident" id="2911988">i</span><span class="op" id="2911989">,</span>&nbsp;<span class="ident" id="2911991">j</span>&nbsp;<span class="builtintype" id="2911993">int</span><span class="op" id="2911996">)</span>&nbsp;<span class="ident" id="2911998">Value</span>&nbsp;<span class="op" id="2912004">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912007">var</span>&nbsp;<span class="op" id="2912011">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912015">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2912020">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912026">typ</span>&nbsp;&nbsp;<span class="op" id="2912031">*</span><span class="ident" id="2912032">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912044">base</span>&nbsp;<span class="ident" id="2912049">unsafe</span><span class="op" id="2912055">.</span><span class="ident" id="2912056">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912065">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912068">switch</span>&nbsp;<span class="ident" id="2912075">kind</span>&nbsp;<span class="op" id="2912080">:=</span>&nbsp;<span class="ident" id="2912083">v</span><span class="op" id="2912084">.</span><span class="ident" id="2912085">kind</span><span class="op" id="2912089">(</span><span class="op" id="2912090">)</span><span class="op" id="2912091">;</span>&nbsp;<span class="ident" id="2912093">kind</span>&nbsp;<span class="op" id="2912098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912101">default</span><span class="op" id="2912108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912112">panic</span><span class="op" id="2912117">(</span><span class="op" id="2912118">&amp;</span><span class="ident" id="2912119">ValueError</span><span class="op" id="2912129">{</span><span class="string" id="2912130">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2912151">,</span>&nbsp;<span class="ident" id="2912153">v</span><span class="op" id="2912154">.</span><span class="ident" id="2912155">kind</span><span class="op" id="2912159">(</span><span class="op" id="2912160">)</span><span class="op" id="2912161">}</span><span class="op" id="2912162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912166">case</span>&nbsp;<span class="ident" id="2912171">Array</span><span class="op" id="2912176">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912180">if</span>&nbsp;<span class="ident" id="2912183">v</span><span class="op" id="2912184">.</span><span class="ident" id="2912185">flag</span><span class="op" id="2912189">&amp;</span><span class="ident" id="2912190">flagAddr</span>&nbsp;<span class="op" id="2912199">==</span>&nbsp;<span class="num" id="2912202">0</span>&nbsp;<span class="op" id="2912204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912209">panic</span><span class="op" id="2912214">(</span><span class="string" id="2912215">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2912266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912274">tt</span>&nbsp;<span class="op" id="2912277">:=</span>&nbsp;<span class="op" id="2912280">(</span><span class="op" id="2912281">*</span><span class="ident" id="2912282">arrayType</span><span class="op" id="2912291">)</span><span class="op" id="2912292">(</span><span class="ident" id="2912293">unsafe</span><span class="op" id="2912299">.</span><span class="ident" id="2912300">Pointer</span><span class="op" id="2912307">(</span><span class="ident" id="2912308">v</span><span class="op" id="2912309">.</span><span class="ident" id="2912310">typ</span><span class="op" id="2912313">)</span><span class="op" id="2912314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912318">cap</span>&nbsp;<span class="op" id="2912322">=</span>&nbsp;<span class="builtintype" id="2912324">int</span><span class="op" id="2912327">(</span><span class="ident" id="2912328">tt</span><span class="op" id="2912330">.</span><span class="builtinfunc" id="2912331">len</span><span class="op" id="2912334">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912338">typ</span>&nbsp;<span class="op" id="2912342">=</span>&nbsp;<span class="op" id="2912344">(</span><span class="op" id="2912345">*</span><span class="ident" id="2912346">sliceType</span><span class="op" id="2912355">)</span><span class="op" id="2912356">(</span><span class="ident" id="2912357">unsafe</span><span class="op" id="2912363">.</span><span class="ident" id="2912364">Pointer</span><span class="op" id="2912371">(</span><span class="ident" id="2912372">tt</span><span class="op" id="2912374">.</span><span class="ident" id="2912375">slice</span><span class="op" id="2912380">)</span><span class="op" id="2912381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912385">base</span>&nbsp;<span class="op" id="2912390">=</span>&nbsp;<span class="ident" id="2912392">v</span><span class="op" id="2912393">.</span><span class="ident" id="2912394">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912400">case</span>&nbsp;<span class="ident" id="2912405">Slice</span><span class="op" id="2912410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912414">typ</span>&nbsp;<span class="op" id="2912418">=</span>&nbsp;<span class="op" id="2912420">(</span><span class="op" id="2912421">*</span><span class="ident" id="2912422">sliceType</span><span class="op" id="2912431">)</span><span class="op" id="2912432">(</span><span class="ident" id="2912433">unsafe</span><span class="op" id="2912439">.</span><span class="ident" id="2912440">Pointer</span><span class="op" id="2912447">(</span><span class="ident" id="2912448">v</span><span class="op" id="2912449">.</span><span class="ident" id="2912450">typ</span><span class="op" id="2912453">)</span><span class="op" id="2912454">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912458">s</span>&nbsp;<span class="op" id="2912460">:=</span>&nbsp;<span class="op" id="2912463">(</span><span class="op" id="2912464">*</span><span class="ident" id="2912465">sliceHeader</span><span class="op" id="2912476">)</span><span class="op" id="2912477">(</span><span class="ident" id="2912478">v</span><span class="op" id="2912479">.</span><span class="ident" id="2912480">ptr</span><span class="op" id="2912483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912487">base</span>&nbsp;<span class="op" id="2912492">=</span>&nbsp;<span class="ident" id="2912494">unsafe</span><span class="op" id="2912500">.</span><span class="ident" id="2912501">Pointer</span><span class="op" id="2912508">(</span><span class="ident" id="2912509">s</span><span class="op" id="2912510">.</span><span class="ident" id="2912511">Data</span><span class="op" id="2912515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912519">cap</span>&nbsp;<span class="op" id="2912523">=</span>&nbsp;<span class="ident" id="2912525">s</span><span class="op" id="2912526">.</span><span class="ident" id="2912527">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912533">case</span>&nbsp;<span class="ident" id="2912538">String</span><span class="op" id="2912544">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912548">s</span>&nbsp;<span class="op" id="2912550">:=</span>&nbsp;<span class="op" id="2912553">(</span><span class="op" id="2912554">*</span><span class="ident" id="2912555">stringHeader</span><span class="op" id="2912567">)</span><span class="op" id="2912568">(</span><span class="ident" id="2912569">v</span><span class="op" id="2912570">.</span><span class="ident" id="2912571">ptr</span><span class="op" id="2912574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912578">if</span>&nbsp;<span class="ident" id="2912581">i</span>&nbsp;<span class="op" id="2912583">&lt;</span>&nbsp;<span class="num" id="2912585">0</span>&nbsp;<span class="op" id="2912587">||</span>&nbsp;<span class="ident" id="2912590">j</span>&nbsp;<span class="op" id="2912592">&lt;</span>&nbsp;<span class="ident" id="2912594">i</span>&nbsp;<span class="op" id="2912596">||</span>&nbsp;<span class="ident" id="2912599">j</span>&nbsp;<span class="op" id="2912601">&gt;</span>&nbsp;<span class="ident" id="2912603">s</span><span class="op" id="2912604">.</span><span class="ident" id="2912605">Len</span>&nbsp;<span class="op" id="2912609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912614">panic</span><span class="op" id="2912619">(</span><span class="string" id="2912620">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2912675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912683">t</span>&nbsp;<span class="op" id="2912685">:=</span>&nbsp;<span class="ident" id="2912688">stringHeader</span><span class="op" id="2912700">{</span><span class="ident" id="2912701">unsafe</span><span class="op" id="2912707">.</span><span class="ident" id="2912708">Pointer</span><span class="op" id="2912715">(</span><span class="builtintype" id="2912716">uintptr</span><span class="op" id="2912723">(</span><span class="ident" id="2912724">s</span><span class="op" id="2912725">.</span><span class="ident" id="2912726">Data</span><span class="op" id="2912730">)</span>&nbsp;<span class="op" id="2912732">+</span>&nbsp;<span class="builtintype" id="2912734">uintptr</span><span class="op" id="2912741">(</span><span class="ident" id="2912742">i</span><span class="op" id="2912743">)</span><span class="op" id="2912744">)</span><span class="op" id="2912745">,</span>&nbsp;<span class="ident" id="2912747">j</span>&nbsp;<span class="op" id="2912749">-</span>&nbsp;<span class="ident" id="2912751">i</span><span class="op" id="2912752">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912756">return</span>&nbsp;<span class="ident" id="2912763">Value</span><span class="op" id="2912768">{</span><span class="ident" id="2912769">v</span><span class="op" id="2912770">.</span><span class="ident" id="2912771">typ</span><span class="op" id="2912774">,</span>&nbsp;<span class="ident" id="2912776">unsafe</span><span class="op" id="2912782">.</span><span class="ident" id="2912783">Pointer</span><span class="op" id="2912790">(</span><span class="op" id="2912791">&amp;</span><span class="ident" id="2912792">t</span><span class="op" id="2912793">)</span><span class="op" id="2912794">,</span>&nbsp;<span class="ident" id="2912796">v</span><span class="op" id="2912797">.</span><span class="ident" id="2912798">flag</span><span class="op" id="2912802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912809">if</span>&nbsp;<span class="ident" id="2912812">i</span>&nbsp;<span class="op" id="2912814">&lt;</span>&nbsp;<span class="num" id="2912816">0</span>&nbsp;<span class="op" id="2912818">||</span>&nbsp;<span class="ident" id="2912821">j</span>&nbsp;<span class="op" id="2912823">&lt;</span>&nbsp;<span class="ident" id="2912825">i</span>&nbsp;<span class="op" id="2912827">||</span>&nbsp;<span class="ident" id="2912830">j</span>&nbsp;<span class="op" id="2912832">&gt;</span>&nbsp;<span class="builtinfunc" id="2912834">cap</span>&nbsp;<span class="op" id="2912838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2912842">panic</span><span class="op" id="2912847">(</span><span class="string" id="2912848">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2912896">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2912903">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912964">var</span>&nbsp;<span class="ident" id="2912968">x</span>&nbsp;<span class="op" id="2912970">[</span><span class="op" id="2912971">]</span><span class="ident" id="2912972">unsafe</span><span class="op" id="2912978">.</span><span class="ident" id="2912979">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2912989">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913030">s</span>&nbsp;<span class="op" id="2913032">:=</span>&nbsp;<span class="op" id="2913035">(</span><span class="op" id="2913036">*</span><span class="ident" id="2913037">sliceHeader</span><span class="op" id="2913048">)</span><span class="op" id="2913049">(</span><span class="ident" id="2913050">unsafe</span><span class="op" id="2913056">.</span><span class="ident" id="2913057">Pointer</span><span class="op" id="2913064">(</span><span class="op" id="2913065">&amp;</span><span class="ident" id="2913066">x</span><span class="op" id="2913067">)</span><span class="op" id="2913068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913071">s</span><span class="op" id="2913072">.</span><span class="ident" id="2913073">Len</span>&nbsp;<span class="op" id="2913077">=</span>&nbsp;<span class="ident" id="2913079">j</span>&nbsp;<span class="op" id="2913081">-</span>&nbsp;<span class="ident" id="2913083">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913086">s</span><span class="op" id="2913087">.</span><span class="ident" id="2913088">Cap</span>&nbsp;<span class="op" id="2913092">=</span>&nbsp;<span class="builtinfunc" id="2913094">cap</span>&nbsp;<span class="op" id="2913098">-</span>&nbsp;<span class="ident" id="2913100">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913103">if</span>&nbsp;<span class="builtinfunc" id="2913106">cap</span><span class="op" id="2913109">-</span><span class="ident" id="2913110">i</span>&nbsp;<span class="op" id="2913112">&gt;</span>&nbsp;<span class="num" id="2913114">0</span>&nbsp;<span class="op" id="2913116">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913120">s</span><span class="op" id="2913121">.</span><span class="ident" id="2913122">Data</span>&nbsp;<span class="op" id="2913127">=</span>&nbsp;<span class="ident" id="2913129">unsafe</span><span class="op" id="2913135">.</span><span class="ident" id="2913136">Pointer</span><span class="op" id="2913143">(</span><span class="builtintype" id="2913144">uintptr</span><span class="op" id="2913151">(</span><span class="ident" id="2913152">base</span><span class="op" id="2913156">)</span>&nbsp;<span class="op" id="2913158">+</span>&nbsp;<span class="builtintype" id="2913160">uintptr</span><span class="op" id="2913167">(</span><span class="ident" id="2913168">i</span><span class="op" id="2913169">)</span><span class="op" id="2913170">*</span><span class="ident" id="2913171">typ</span><span class="op" id="2913174">.</span><span class="ident" id="2913175">elem</span><span class="op" id="2913179">.</span><span class="ident" id="2913180">Size</span><span class="op" id="2913184">(</span><span class="op" id="2913185">)</span><span class="op" id="2913186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2913189">}</span>&nbsp;<span class="keyword" id="2913191">else</span>&nbsp;<span class="op" id="2913196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2913200">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913267">s</span><span class="op" id="2913268">.</span><span class="ident" id="2913269">Data</span>&nbsp;<span class="op" id="2913274">=</span>&nbsp;<span class="ident" id="2913276">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2913282">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913286">fl</span>&nbsp;<span class="op" id="2913289">:=</span>&nbsp;<span class="ident" id="2913292">v</span><span class="op" id="2913293">.</span><span class="ident" id="2913294">flag</span><span class="op" id="2913298">&amp;</span><span class="ident" id="2913299">flagRO</span>&nbsp;<span class="op" id="2913306">|</span>&nbsp;<span class="ident" id="2913308">flagIndir</span>&nbsp;<span class="op" id="2913318">|</span>&nbsp;<span class="ident" id="2913320">flag</span><span class="op" id="2913324">(</span><span class="ident" id="2913325">Slice</span><span class="op" id="2913330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913333">return</span>&nbsp;<span class="ident" id="2913340">Value</span><span class="op" id="2913345">{</span><span class="ident" id="2913346">typ</span><span class="op" id="2913349">.</span><span class="ident" id="2913350">common</span><span class="op" id="2913356">(</span><span class="op" id="2913357">)</span><span class="op" id="2913358">,</span>&nbsp;<span class="ident" id="2913360">unsafe</span><span class="op" id="2913366">.</span><span class="ident" id="2913367">Pointer</span><span class="op" id="2913374">(</span><span class="op" id="2913375">&amp;</span><span class="ident" id="2913376">x</span><span class="op" id="2913377">)</span><span class="op" id="2913378">,</span>&nbsp;<span class="ident" id="2913380">fl</span><span class="op" id="2913382">}</span><br>
<span class="lineno"></span><span class="op" id="2913384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2913387">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2913462">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2913545">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2913585">func</span>&nbsp;<span class="op" id="2913590">(</span><span class="ident" id="2913591">v</span>&nbsp;<span class="ident" id="2913593">Value</span><span class="op" id="2913598">)</span>&nbsp;<span class="ident" id="2913600">Slice3</span><span class="op" id="2913606">(</span><span class="ident" id="2913607">i</span><span class="op" id="2913608">,</span>&nbsp;<span class="ident" id="2913610">j</span><span class="op" id="2913611">,</span>&nbsp;<span class="ident" id="2913613">k</span>&nbsp;<span class="builtintype" id="2913615">int</span><span class="op" id="2913618">)</span>&nbsp;<span class="ident" id="2913620">Value</span>&nbsp;<span class="op" id="2913626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913629">var</span>&nbsp;<span class="op" id="2913633">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2913637">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2913642">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913648">typ</span>&nbsp;&nbsp;<span class="op" id="2913653">*</span><span class="ident" id="2913654">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913666">base</span>&nbsp;<span class="ident" id="2913671">unsafe</span><span class="op" id="2913677">.</span><span class="ident" id="2913678">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2913687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913690">switch</span>&nbsp;<span class="ident" id="2913697">kind</span>&nbsp;<span class="op" id="2913702">:=</span>&nbsp;<span class="ident" id="2913705">v</span><span class="op" id="2913706">.</span><span class="ident" id="2913707">kind</span><span class="op" id="2913711">(</span><span class="op" id="2913712">)</span><span class="op" id="2913713">;</span>&nbsp;<span class="ident" id="2913715">kind</span>&nbsp;<span class="op" id="2913720">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913723">default</span><span class="op" id="2913730">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2913734">panic</span><span class="op" id="2913739">(</span><span class="op" id="2913740">&amp;</span><span class="ident" id="2913741">ValueError</span><span class="op" id="2913751">{</span><span class="string" id="2913752">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2913774">,</span>&nbsp;<span class="ident" id="2913776">v</span><span class="op" id="2913777">.</span><span class="ident" id="2913778">kind</span><span class="op" id="2913782">(</span><span class="op" id="2913783">)</span><span class="op" id="2913784">}</span><span class="op" id="2913785">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913789">case</span>&nbsp;<span class="ident" id="2913794">Array</span><span class="op" id="2913799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2913803">if</span>&nbsp;<span class="ident" id="2913806">v</span><span class="op" id="2913807">.</span><span class="ident" id="2913808">flag</span><span class="op" id="2913812">&amp;</span><span class="ident" id="2913813">flagAddr</span>&nbsp;<span class="op" id="2913822">==</span>&nbsp;<span class="num" id="2913825">0</span>&nbsp;<span class="op" id="2913827">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2913832">panic</span><span class="op" id="2913837">(</span><span class="string" id="2913838">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2913890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2913894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913898">tt</span>&nbsp;<span class="op" id="2913901">:=</span>&nbsp;<span class="op" id="2913904">(</span><span class="op" id="2913905">*</span><span class="ident" id="2913906">arrayType</span><span class="op" id="2913915">)</span><span class="op" id="2913916">(</span><span class="ident" id="2913917">unsafe</span><span class="op" id="2913923">.</span><span class="ident" id="2913924">Pointer</span><span class="op" id="2913931">(</span><span class="ident" id="2913932">v</span><span class="op" id="2913933">.</span><span class="ident" id="2913934">typ</span><span class="op" id="2913937">)</span><span class="op" id="2913938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2913942">cap</span>&nbsp;<span class="op" id="2913946">=</span>&nbsp;<span class="builtintype" id="2913948">int</span><span class="op" id="2913951">(</span><span class="ident" id="2913952">tt</span><span class="op" id="2913954">.</span><span class="builtinfunc" id="2913955">len</span><span class="op" id="2913958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2913962">typ</span>&nbsp;<span class="op" id="2913966">=</span>&nbsp;<span class="op" id="2913968">(</span><span class="op" id="2913969">*</span><span class="ident" id="2913970">sliceType</span><span class="op" id="2913979">)</span><span class="op" id="2913980">(</span><span class="ident" id="2913981">unsafe</span><span class="op" id="2913987">.</span><span class="ident" id="2913988">Pointer</span><span class="op" id="2913995">(</span><span class="ident" id="2913996">tt</span><span class="op" id="2913998">.</span><span class="ident" id="2913999">slice</span><span class="op" id="2914004">)</span><span class="op" id="2914005">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914009">base</span>&nbsp;<span class="op" id="2914014">=</span>&nbsp;<span class="ident" id="2914016">v</span><span class="op" id="2914017">.</span><span class="ident" id="2914018">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914024">case</span>&nbsp;<span class="ident" id="2914029">Slice</span><span class="op" id="2914034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914038">typ</span>&nbsp;<span class="op" id="2914042">=</span>&nbsp;<span class="op" id="2914044">(</span><span class="op" id="2914045">*</span><span class="ident" id="2914046">sliceType</span><span class="op" id="2914055">)</span><span class="op" id="2914056">(</span><span class="ident" id="2914057">unsafe</span><span class="op" id="2914063">.</span><span class="ident" id="2914064">Pointer</span><span class="op" id="2914071">(</span><span class="ident" id="2914072">v</span><span class="op" id="2914073">.</span><span class="ident" id="2914074">typ</span><span class="op" id="2914077">)</span><span class="op" id="2914078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914082">s</span>&nbsp;<span class="op" id="2914084">:=</span>&nbsp;<span class="op" id="2914087">(</span><span class="op" id="2914088">*</span><span class="ident" id="2914089">sliceHeader</span><span class="op" id="2914100">)</span><span class="op" id="2914101">(</span><span class="ident" id="2914102">v</span><span class="op" id="2914103">.</span><span class="ident" id="2914104">ptr</span><span class="op" id="2914107">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914111">base</span>&nbsp;<span class="op" id="2914116">=</span>&nbsp;<span class="ident" id="2914118">s</span><span class="op" id="2914119">.</span><span class="ident" id="2914120">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2914127">cap</span>&nbsp;<span class="op" id="2914131">=</span>&nbsp;<span class="ident" id="2914133">s</span><span class="op" id="2914134">.</span><span class="ident" id="2914135">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914144">if</span>&nbsp;<span class="ident" id="2914147">i</span>&nbsp;<span class="op" id="2914149">&lt;</span>&nbsp;<span class="num" id="2914151">0</span>&nbsp;<span class="op" id="2914153">||</span>&nbsp;<span class="ident" id="2914156">j</span>&nbsp;<span class="op" id="2914158">&lt;</span>&nbsp;<span class="ident" id="2914160">i</span>&nbsp;<span class="op" id="2914162">||</span>&nbsp;<span class="ident" id="2914165">k</span>&nbsp;<span class="op" id="2914167">&lt;</span>&nbsp;<span class="ident" id="2914169">j</span>&nbsp;<span class="op" id="2914171">||</span>&nbsp;<span class="ident" id="2914174">k</span>&nbsp;<span class="op" id="2914176">&gt;</span>&nbsp;<span class="builtinfunc" id="2914178">cap</span>&nbsp;<span class="op" id="2914182">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2914186">panic</span><span class="op" id="2914191">(</span><span class="string" id="2914192">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2914241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914248">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914296">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914332">var</span>&nbsp;<span class="ident" id="2914336">x</span>&nbsp;<span class="op" id="2914338">[</span><span class="op" id="2914339">]</span><span class="ident" id="2914340">unsafe</span><span class="op" id="2914346">.</span><span class="ident" id="2914347">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914357">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914398">s</span>&nbsp;<span class="op" id="2914400">:=</span>&nbsp;<span class="op" id="2914403">(</span><span class="op" id="2914404">*</span><span class="ident" id="2914405">sliceHeader</span><span class="op" id="2914416">)</span><span class="op" id="2914417">(</span><span class="ident" id="2914418">unsafe</span><span class="op" id="2914424">.</span><span class="ident" id="2914425">Pointer</span><span class="op" id="2914432">(</span><span class="op" id="2914433">&amp;</span><span class="ident" id="2914434">x</span><span class="op" id="2914435">)</span><span class="op" id="2914436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914439">s</span><span class="op" id="2914440">.</span><span class="ident" id="2914441">Len</span>&nbsp;<span class="op" id="2914445">=</span>&nbsp;<span class="ident" id="2914447">j</span>&nbsp;<span class="op" id="2914449">-</span>&nbsp;<span class="ident" id="2914451">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914454">s</span><span class="op" id="2914455">.</span><span class="ident" id="2914456">Cap</span>&nbsp;<span class="op" id="2914460">=</span>&nbsp;<span class="ident" id="2914462">k</span>&nbsp;<span class="op" id="2914464">-</span>&nbsp;<span class="ident" id="2914466">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914469">if</span>&nbsp;<span class="ident" id="2914472">k</span><span class="op" id="2914473">-</span><span class="ident" id="2914474">i</span>&nbsp;<span class="op" id="2914476">&gt;</span>&nbsp;<span class="num" id="2914478">0</span>&nbsp;<span class="op" id="2914480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914484">s</span><span class="op" id="2914485">.</span><span class="ident" id="2914486">Data</span>&nbsp;<span class="op" id="2914491">=</span>&nbsp;<span class="ident" id="2914493">unsafe</span><span class="op" id="2914499">.</span><span class="ident" id="2914500">Pointer</span><span class="op" id="2914507">(</span><span class="builtintype" id="2914508">uintptr</span><span class="op" id="2914515">(</span><span class="ident" id="2914516">base</span><span class="op" id="2914520">)</span>&nbsp;<span class="op" id="2914522">+</span>&nbsp;<span class="builtintype" id="2914524">uintptr</span><span class="op" id="2914531">(</span><span class="ident" id="2914532">i</span><span class="op" id="2914533">)</span><span class="op" id="2914534">*</span><span class="ident" id="2914535">typ</span><span class="op" id="2914538">.</span><span class="ident" id="2914539">elem</span><span class="op" id="2914543">.</span><span class="ident" id="2914544">Size</span><span class="op" id="2914548">(</span><span class="op" id="2914549">)</span><span class="op" id="2914550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914553">}</span>&nbsp;<span class="keyword" id="2914555">else</span>&nbsp;<span class="op" id="2914560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2914564">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914631">s</span><span class="op" id="2914632">.</span><span class="ident" id="2914633">Data</span>&nbsp;<span class="op" id="2914638">=</span>&nbsp;<span class="ident" id="2914640">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2914646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2914650">fl</span>&nbsp;<span class="op" id="2914653">:=</span>&nbsp;<span class="ident" id="2914656">v</span><span class="op" id="2914657">.</span><span class="ident" id="2914658">flag</span><span class="op" id="2914662">&amp;</span><span class="ident" id="2914663">flagRO</span>&nbsp;<span class="op" id="2914670">|</span>&nbsp;<span class="ident" id="2914672">flagIndir</span>&nbsp;<span class="op" id="2914682">|</span>&nbsp;<span class="ident" id="2914684">flag</span><span class="op" id="2914688">(</span><span class="ident" id="2914689">Slice</span><span class="op" id="2914694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2914697">return</span>&nbsp;<span class="ident" id="2914704">Value</span><span class="op" id="2914709">{</span><span class="ident" id="2914710">typ</span><span class="op" id="2914713">.</span><span class="ident" id="2914714">common</span><span class="op" id="2914720">(</span><span class="op" id="2914721">)</span><span class="op" id="2914722">,</span>&nbsp;<span class="ident" id="2914724">unsafe</span><span class="op" id="2914730">.</span><span class="ident" id="2914731">Pointer</span><span class="op" id="2914738">(</span><span class="op" id="2914739">&amp;</span><span class="ident" id="2914740">x</span><span class="op" id="2914741">)</span><span class="op" id="2914742">,</span>&nbsp;<span class="ident" id="2914744">fl</span><span class="op" id="2914746">}</span><br>
<span class="lineno">1590</span><span class="op" id="2914748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2914751">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2914815">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2914885">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2914959">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2915036">func</span>&nbsp;<span class="op" id="2915041">(</span><span class="ident" id="2915042">v</span>&nbsp;<span class="ident" id="2915044">Value</span><span class="op" id="2915049">)</span>&nbsp;<span class="ident" id="2915051">String</span><span class="op" id="2915057">(</span><span class="op" id="2915058">)</span>&nbsp;<span class="builtintype" id="2915060">string</span>&nbsp;<span class="op" id="2915067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915070">switch</span>&nbsp;<span class="ident" id="2915077">k</span>&nbsp;<span class="op" id="2915079">:=</span>&nbsp;<span class="ident" id="2915082">v</span><span class="op" id="2915083">.</span><span class="ident" id="2915084">kind</span><span class="op" id="2915088">(</span><span class="op" id="2915089">)</span><span class="op" id="2915090">;</span>&nbsp;<span class="ident" id="2915092">k</span>&nbsp;<span class="op" id="2915094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915097">case</span>&nbsp;<span class="ident" id="2915102">Invalid</span><span class="op" id="2915109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915113">return</span>&nbsp;<span class="string" id="2915120">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915139">case</span>&nbsp;<span class="ident" id="2915144">String</span><span class="op" id="2915150">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915154">return</span>&nbsp;<span class="op" id="2915161">*</span><span class="op" id="2915162">(</span><span class="op" id="2915163">*</span><span class="builtintype" id="2915164">string</span><span class="op" id="2915170">)</span><span class="op" id="2915171">(</span><span class="ident" id="2915172">v</span><span class="op" id="2915173">.</span><span class="ident" id="2915174">ptr</span><span class="op" id="2915177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2915180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2915183">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2915255">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915311">return</span>&nbsp;<span class="string" id="2915318">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2915322">+</span>&nbsp;<span class="ident" id="2915324">v</span><span class="op" id="2915325">.</span><span class="ident" id="2915326">Type</span><span class="op" id="2915330">(</span><span class="op" id="2915331">)</span><span class="op" id="2915332">.</span><span class="ident" id="2915333">String</span><span class="op" id="2915339">(</span><span class="op" id="2915340">)</span>&nbsp;<span class="op" id="2915342">+</span>&nbsp;<span class="string" id="2915344">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2915354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915357">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2915435">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2915473">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2915552">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2915639">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2915736">func</span>&nbsp;<span class="op" id="2915741">(</span><span class="ident" id="2915742">v</span>&nbsp;<span class="ident" id="2915744">Value</span><span class="op" id="2915749">)</span>&nbsp;<span class="ident" id="2915751">TryRecv</span><span class="op" id="2915758">(</span><span class="op" id="2915759">)</span>&nbsp;<span class="op" id="2915761">(</span><span class="ident" id="2915762">x</span>&nbsp;<span class="ident" id="2915764">Value</span><span class="op" id="2915769">,</span>&nbsp;<span class="ident" id="2915771">ok</span>&nbsp;<span class="builtintype" id="2915774">bool</span><span class="op" id="2915778">)</span>&nbsp;<span class="op" id="2915780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915783">v</span><span class="op" id="2915784">.</span><span class="ident" id="2915785">mustBe</span><span class="op" id="2915791">(</span><span class="ident" id="2915792">Chan</span><span class="op" id="2915796">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2915799">v</span><span class="op" id="2915800">.</span><span class="ident" id="2915801">mustBeExported</span><span class="op" id="2915815">(</span><span class="op" id="2915816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2915819">return</span>&nbsp;<span class="ident" id="2915826">v</span><span class="op" id="2915827">.</span><span class="ident" id="2915828">recv</span><span class="op" id="2915832">(</span><span class="builtintype" id="2915833">true</span><span class="op" id="2915837">)</span><br>
<span class="lineno"></span><span class="op" id="2915839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2915842">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2915909">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2915947">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2916006">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2916079">func</span>&nbsp;<span class="op" id="2916084">(</span><span class="ident" id="2916085">v</span>&nbsp;<span class="ident" id="2916087">Value</span><span class="op" id="2916092">)</span>&nbsp;<span class="ident" id="2916094">TrySend</span><span class="op" id="2916101">(</span><span class="ident" id="2916102">x</span>&nbsp;<span class="ident" id="2916104">Value</span><span class="op" id="2916109">)</span>&nbsp;<span class="builtintype" id="2916111">bool</span>&nbsp;<span class="op" id="2916116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916119">v</span><span class="op" id="2916120">.</span><span class="ident" id="2916121">mustBe</span><span class="op" id="2916127">(</span><span class="ident" id="2916128">Chan</span><span class="op" id="2916132">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916135">v</span><span class="op" id="2916136">.</span><span class="ident" id="2916137">mustBeExported</span><span class="op" id="2916151">(</span><span class="op" id="2916152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916155">return</span>&nbsp;<span class="ident" id="2916162">v</span><span class="op" id="2916163">.</span><span class="ident" id="2916164">send</span><span class="op" id="2916168">(</span><span class="ident" id="2916169">x</span><span class="op" id="2916170">,</span>&nbsp;<span class="builtintype" id="2916172">true</span><span class="op" id="2916176">)</span><br>
<span class="lineno"></span><span class="op" id="2916178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2916181">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2916207">func</span>&nbsp;<span class="op" id="2916212">(</span><span class="ident" id="2916213">v</span>&nbsp;<span class="ident" id="2916215">Value</span><span class="op" id="2916220">)</span>&nbsp;<span class="ident" id="2916222">Type</span><span class="op" id="2916226">(</span><span class="op" id="2916227">)</span>&nbsp;<span class="ident" id="2916229">Type</span>&nbsp;<span class="op" id="2916234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916237">f</span>&nbsp;<span class="op" id="2916239">:=</span>&nbsp;<span class="ident" id="2916242">v</span><span class="op" id="2916243">.</span><span class="ident" id="2916244">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916250">if</span>&nbsp;<span class="ident" id="2916253">f</span>&nbsp;<span class="op" id="2916255">==</span>&nbsp;<span class="num" id="2916258">0</span>&nbsp;<span class="op" id="2916260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2916264">panic</span><span class="op" id="2916269">(</span><span class="op" id="2916270">&amp;</span><span class="ident" id="2916271">ValueError</span><span class="op" id="2916281">{</span><span class="string" id="2916282">&#34;reflect.Value.Type&#34;</span><span class="op" id="2916302">,</span>&nbsp;<span class="ident" id="2916304">Invalid</span><span class="op" id="2916311">}</span><span class="op" id="2916312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916315">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916318">if</span>&nbsp;<span class="ident" id="2916321">f</span><span class="op" id="2916322">&amp;</span><span class="ident" id="2916323">flagMethod</span>&nbsp;<span class="op" id="2916334">==</span>&nbsp;<span class="num" id="2916337">0</span>&nbsp;<span class="op" id="2916339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2916343">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916358">return</span>&nbsp;<span class="ident" id="2916365">v</span><span class="op" id="2916366">.</span><span class="ident" id="2916367">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2916376">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2916394">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916449">i</span>&nbsp;<span class="op" id="2916451">:=</span>&nbsp;<span class="builtintype" id="2916454">int</span><span class="op" id="2916457">(</span><span class="ident" id="2916458">v</span><span class="op" id="2916459">.</span><span class="ident" id="2916460">flag</span><span class="op" id="2916464">)</span>&nbsp;<span class="op" id="2916466">&gt;&gt;</span>&nbsp;<span class="ident" id="2916469">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916486">if</span>&nbsp;<span class="ident" id="2916489">v</span><span class="op" id="2916490">.</span><span class="ident" id="2916491">typ</span><span class="op" id="2916494">.</span><span class="ident" id="2916495">Kind</span><span class="op" id="2916499">(</span><span class="op" id="2916500">)</span>&nbsp;<span class="op" id="2916502">==</span>&nbsp;<span class="ident" id="2916505">Interface</span>&nbsp;<span class="op" id="2916515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2916519">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916545">tt</span>&nbsp;<span class="op" id="2916548">:=</span>&nbsp;<span class="op" id="2916551">(</span><span class="op" id="2916552">*</span><span class="ident" id="2916553">interfaceType</span><span class="op" id="2916566">)</span><span class="op" id="2916567">(</span><span class="ident" id="2916568">unsafe</span><span class="op" id="2916574">.</span><span class="ident" id="2916575">Pointer</span><span class="op" id="2916582">(</span><span class="ident" id="2916583">v</span><span class="op" id="2916584">.</span><span class="ident" id="2916585">typ</span><span class="op" id="2916588">)</span><span class="op" id="2916589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916593">if</span>&nbsp;<span class="builtintype" id="2916596">uint</span><span class="op" id="2916600">(</span><span class="ident" id="2916601">i</span><span class="op" id="2916602">)</span>&nbsp;<span class="op" id="2916604">&gt;=</span>&nbsp;<span class="builtintype" id="2916607">uint</span><span class="op" id="2916611">(</span><span class="builtinfunc" id="2916612">len</span><span class="op" id="2916615">(</span><span class="ident" id="2916616">tt</span><span class="op" id="2916618">.</span><span class="ident" id="2916619">methods</span><span class="op" id="2916626">)</span><span class="op" id="2916627">)</span>&nbsp;<span class="op" id="2916629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2916634">panic</span><span class="op" id="2916639">(</span><span class="string" id="2916640">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2916687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916695">m</span>&nbsp;<span class="op" id="2916697">:=</span>&nbsp;<span class="op" id="2916700">&amp;</span><span class="ident" id="2916701">tt</span><span class="op" id="2916703">.</span><span class="ident" id="2916704">methods</span><span class="op" id="2916711">[</span><span class="ident" id="2916712">i</span><span class="op" id="2916713">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916717">return</span>&nbsp;<span class="ident" id="2916724">m</span><span class="op" id="2916725">.</span><span class="ident" id="2916726">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2916734">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916763">ut</span>&nbsp;<span class="op" id="2916766">:=</span>&nbsp;<span class="ident" id="2916769">v</span><span class="op" id="2916770">.</span><span class="ident" id="2916771">typ</span><span class="op" id="2916774">.</span><span class="ident" id="2916775">uncommon</span><span class="op" id="2916783">(</span><span class="op" id="2916784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916787">if</span>&nbsp;<span class="ident" id="2916790">ut</span>&nbsp;<span class="op" id="2916793">==</span>&nbsp;<span class="builtintype" id="2916796">nil</span>&nbsp;<span class="op" id="2916800">||</span>&nbsp;<span class="builtintype" id="2916803">uint</span><span class="op" id="2916807">(</span><span class="ident" id="2916808">i</span><span class="op" id="2916809">)</span>&nbsp;<span class="op" id="2916811">&gt;=</span>&nbsp;<span class="builtintype" id="2916814">uint</span><span class="op" id="2916818">(</span><span class="builtinfunc" id="2916819">len</span><span class="op" id="2916822">(</span><span class="ident" id="2916823">ut</span><span class="op" id="2916825">.</span><span class="ident" id="2916826">methods</span><span class="op" id="2916833">)</span><span class="op" id="2916834">)</span>&nbsp;<span class="op" id="2916836">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2916840">panic</span><span class="op" id="2916845">(</span><span class="string" id="2916846">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2916893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2916896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2916899">m</span>&nbsp;<span class="op" id="2916901">:=</span>&nbsp;<span class="op" id="2916904">&amp;</span><span class="ident" id="2916905">ut</span><span class="op" id="2916907">.</span><span class="ident" id="2916908">methods</span><span class="op" id="2916915">[</span><span class="ident" id="2916916">i</span><span class="op" id="2916917">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2916920">return</span>&nbsp;<span class="ident" id="2916927">m</span><span class="op" id="2916928">.</span><span class="ident" id="2916929">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2916934">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2916937">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2916988">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2917069">func</span>&nbsp;<span class="op" id="2917074">(</span><span class="ident" id="2917075">v</span>&nbsp;<span class="ident" id="2917077">Value</span><span class="op" id="2917082">)</span>&nbsp;<span class="ident" id="2917084">Uint</span><span class="op" id="2917088">(</span><span class="op" id="2917089">)</span>&nbsp;<span class="builtintype" id="2917091">uint64</span>&nbsp;<span class="op" id="2917098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2917101">k</span>&nbsp;<span class="op" id="2917103">:=</span>&nbsp;<span class="ident" id="2917106">v</span><span class="op" id="2917107">.</span><span class="ident" id="2917108">kind</span><span class="op" id="2917112">(</span><span class="op" id="2917113">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2917116">p</span>&nbsp;<span class="op" id="2917118">:=</span>&nbsp;<span class="ident" id="2917121">v</span><span class="op" id="2917122">.</span><span class="ident" id="2917123">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917128">switch</span>&nbsp;<span class="ident" id="2917135">k</span>&nbsp;<span class="op" id="2917137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917140">case</span>&nbsp;<span class="ident" id="2917145">Uint</span><span class="op" id="2917149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917153">return</span>&nbsp;<span class="builtintype" id="2917160">uint64</span><span class="op" id="2917166">(</span><span class="op" id="2917167">*</span><span class="op" id="2917168">(</span><span class="op" id="2917169">*</span><span class="builtintype" id="2917170">uint</span><span class="op" id="2917174">)</span><span class="op" id="2917175">(</span><span class="ident" id="2917176">p</span><span class="op" id="2917177">)</span><span class="op" id="2917178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917181">case</span>&nbsp;<span class="ident" id="2917186">Uint8</span><span class="op" id="2917191">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917195">return</span>&nbsp;<span class="builtintype" id="2917202">uint64</span><span class="op" id="2917208">(</span><span class="op" id="2917209">*</span><span class="op" id="2917210">(</span><span class="op" id="2917211">*</span><span class="builtintype" id="2917212">uint8</span><span class="op" id="2917217">)</span><span class="op" id="2917218">(</span><span class="ident" id="2917219">p</span><span class="op" id="2917220">)</span><span class="op" id="2917221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917224">case</span>&nbsp;<span class="ident" id="2917229">Uint16</span><span class="op" id="2917235">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917239">return</span>&nbsp;<span class="builtintype" id="2917246">uint64</span><span class="op" id="2917252">(</span><span class="op" id="2917253">*</span><span class="op" id="2917254">(</span><span class="op" id="2917255">*</span><span class="builtintype" id="2917256">uint16</span><span class="op" id="2917262">)</span><span class="op" id="2917263">(</span><span class="ident" id="2917264">p</span><span class="op" id="2917265">)</span><span class="op" id="2917266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917269">case</span>&nbsp;<span class="ident" id="2917274">Uint32</span><span class="op" id="2917280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917284">return</span>&nbsp;<span class="builtintype" id="2917291">uint64</span><span class="op" id="2917297">(</span><span class="op" id="2917298">*</span><span class="op" id="2917299">(</span><span class="op" id="2917300">*</span><span class="builtintype" id="2917301">uint32</span><span class="op" id="2917307">)</span><span class="op" id="2917308">(</span><span class="ident" id="2917309">p</span><span class="op" id="2917310">)</span><span class="op" id="2917311">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917314">case</span>&nbsp;<span class="ident" id="2917319">Uint64</span><span class="op" id="2917325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917329">return</span>&nbsp;<span class="builtintype" id="2917336">uint64</span><span class="op" id="2917342">(</span><span class="op" id="2917343">*</span><span class="op" id="2917344">(</span><span class="op" id="2917345">*</span><span class="builtintype" id="2917346">uint64</span><span class="op" id="2917352">)</span><span class="op" id="2917353">(</span><span class="ident" id="2917354">p</span><span class="op" id="2917355">)</span><span class="op" id="2917356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917359">case</span>&nbsp;<span class="ident" id="2917364">Uintptr</span><span class="op" id="2917371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917375">return</span>&nbsp;<span class="builtintype" id="2917382">uint64</span><span class="op" id="2917388">(</span><span class="op" id="2917389">*</span><span class="op" id="2917390">(</span><span class="op" id="2917391">*</span><span class="builtintype" id="2917392">uintptr</span><span class="op" id="2917399">)</span><span class="op" id="2917400">(</span><span class="ident" id="2917401">p</span><span class="op" id="2917402">)</span><span class="op" id="2917403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917406">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2917409">panic</span><span class="op" id="2917414">(</span><span class="op" id="2917415">&amp;</span><span class="ident" id="2917416">ValueError</span><span class="op" id="2917426">{</span><span class="string" id="2917427">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2917447">,</span>&nbsp;<span class="ident" id="2917449">v</span><span class="op" id="2917450">.</span><span class="ident" id="2917451">kind</span><span class="op" id="2917455">(</span><span class="op" id="2917456">)</span><span class="op" id="2917457">}</span><span class="op" id="2917458">)</span><br>
<span class="lineno"></span><span class="op" id="2917460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917463">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2917508">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2917577">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2917615">func</span>&nbsp;<span class="op" id="2917620">(</span><span class="ident" id="2917621">v</span>&nbsp;<span class="ident" id="2917623">Value</span><span class="op" id="2917628">)</span>&nbsp;<span class="ident" id="2917630">UnsafeAddr</span><span class="op" id="2917640">(</span><span class="op" id="2917641">)</span>&nbsp;<span class="builtintype" id="2917643">uintptr</span>&nbsp;<span class="op" id="2917651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2917654">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917674">if</span>&nbsp;<span class="ident" id="2917677">v</span><span class="op" id="2917678">.</span><span class="ident" id="2917679">typ</span>&nbsp;<span class="op" id="2917683">==</span>&nbsp;<span class="builtintype" id="2917686">nil</span>&nbsp;<span class="op" id="2917690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2917694">panic</span><span class="op" id="2917699">(</span><span class="op" id="2917700">&amp;</span><span class="ident" id="2917701">ValueError</span><span class="op" id="2917711">{</span><span class="string" id="2917712">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2917738">,</span>&nbsp;<span class="ident" id="2917740">Invalid</span><span class="op" id="2917747">}</span><span class="op" id="2917748">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917754">if</span>&nbsp;<span class="ident" id="2917757">v</span><span class="op" id="2917758">.</span><span class="ident" id="2917759">flag</span><span class="op" id="2917763">&amp;</span><span class="ident" id="2917764">flagAddr</span>&nbsp;<span class="op" id="2917773">==</span>&nbsp;<span class="num" id="2917776">0</span>&nbsp;<span class="op" id="2917778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2917782">panic</span><span class="op" id="2917787">(</span><span class="string" id="2917788">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2917837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2917840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2917843">return</span>&nbsp;<span class="builtintype" id="2917850">uintptr</span><span class="op" id="2917857">(</span><span class="ident" id="2917858">v</span><span class="op" id="2917859">.</span><span class="ident" id="2917860">ptr</span><span class="op" id="2917863">)</span><br>
<span class="lineno">1695</span><span class="op" id="2917865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2917868">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2917927">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2917994">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2918024">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2918092">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2918162">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2918225">type</span>&nbsp;<span class="ident" id="2918230">StringHeader</span>&nbsp;<span class="keyword" id="2918243">struct</span>&nbsp;<span class="op" id="2918250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918253">Data</span>&nbsp;<span class="builtintype" id="2918258">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918267">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2918272">int</span><br>
<span class="lineno"></span><span class="op" id="2918276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2918279">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2918355">type</span>&nbsp;<span class="ident" id="2918360">stringHeader</span>&nbsp;<span class="keyword" id="2918373">struct</span>&nbsp;<span class="op" id="2918380">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918383">Data</span>&nbsp;<span class="ident" id="2918388">unsafe</span><span class="op" id="2918394">.</span><span class="ident" id="2918395">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918404">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2918409">int</span><br>
<span class="lineno"></span><span class="op" id="2918413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2918416">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2918473">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2918540">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2918570">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2918638">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2918708">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2918771">type</span>&nbsp;<span class="ident" id="2918776">SliceHeader</span>&nbsp;<span class="keyword" id="2918788">struct</span>&nbsp;<span class="op" id="2918795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918798">Data</span>&nbsp;<span class="builtintype" id="2918803">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918812">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2918817">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918822">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2918827">int</span><br>
<span class="lineno"></span><span class="op" id="2918831">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2918834">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2918908">type</span>&nbsp;<span class="ident" id="2918913">sliceHeader</span>&nbsp;<span class="keyword" id="2918925">struct</span>&nbsp;<span class="op" id="2918932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918935">Data</span>&nbsp;<span class="ident" id="2918940">unsafe</span><span class="op" id="2918946">.</span><span class="ident" id="2918947">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918956">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2918961">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2918966">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2918971">int</span><br>
<span class="lineno"></span><span class="op" id="2918975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2918978">func</span>&nbsp;<span class="ident" id="2918983">typesMustMatch</span><span class="op" id="2918997">(</span><span class="ident" id="2918998">what</span>&nbsp;<span class="builtintype" id="2919003">string</span><span class="op" id="2919009">,</span>&nbsp;<span class="ident" id="2919011">t1</span><span class="op" id="2919013">,</span>&nbsp;<span class="ident" id="2919015">t2</span>&nbsp;<span class="ident" id="2919018">Type</span><span class="op" id="2919022">)</span>&nbsp;<span class="op" id="2919024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919027">if</span>&nbsp;<span class="ident" id="2919030">t1</span>&nbsp;<span class="op" id="2919033">!=</span>&nbsp;<span class="ident" id="2919036">t2</span>&nbsp;<span class="op" id="2919039">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2919043">panic</span><span class="op" id="2919048">(</span><span class="ident" id="2919049">what</span>&nbsp;<span class="op" id="2919054">+</span>&nbsp;<span class="string" id="2919056">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2919061">+</span>&nbsp;<span class="ident" id="2919063">t1</span><span class="op" id="2919065">.</span><span class="ident" id="2919066">String</span><span class="op" id="2919072">(</span><span class="op" id="2919073">)</span>&nbsp;<span class="op" id="2919075">+</span>&nbsp;<span class="string" id="2919077">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2919084">+</span>&nbsp;<span class="ident" id="2919086">t2</span><span class="op" id="2919088">.</span><span class="ident" id="2919089">String</span><span class="op" id="2919095">(</span><span class="op" id="2919096">)</span><span class="op" id="2919097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919100">}</span><br>
<span class="lineno"></span><span class="op" id="2919102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919105">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2919181">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2919256">func</span>&nbsp;<span class="ident" id="2919261">grow</span><span class="op" id="2919265">(</span><span class="ident" id="2919266">s</span>&nbsp;<span class="ident" id="2919268">Value</span><span class="op" id="2919273">,</span>&nbsp;<span class="ident" id="2919275">extra</span>&nbsp;<span class="builtintype" id="2919281">int</span><span class="op" id="2919284">)</span>&nbsp;<span class="op" id="2919286">(</span><span class="ident" id="2919287">Value</span><span class="op" id="2919292">,</span>&nbsp;<span class="builtintype" id="2919294">int</span><span class="op" id="2919297">,</span>&nbsp;<span class="builtintype" id="2919299">int</span><span class="op" id="2919302">)</span>&nbsp;<span class="op" id="2919304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919307">i0</span>&nbsp;<span class="op" id="2919310">:=</span>&nbsp;<span class="ident" id="2919313">s</span><span class="op" id="2919314">.</span><span class="ident" id="2919315">Len</span><span class="op" id="2919318">(</span><span class="op" id="2919319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919322">i1</span>&nbsp;<span class="op" id="2919325">:=</span>&nbsp;<span class="ident" id="2919328">i0</span>&nbsp;<span class="op" id="2919331">+</span>&nbsp;<span class="ident" id="2919333">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919340">if</span>&nbsp;<span class="ident" id="2919343">i1</span>&nbsp;<span class="op" id="2919346">&lt;</span>&nbsp;<span class="ident" id="2919348">i0</span>&nbsp;<span class="op" id="2919351">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2919355">panic</span><span class="op" id="2919360">(</span><span class="string" id="2919361">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2919393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919399">m</span>&nbsp;<span class="op" id="2919401">:=</span>&nbsp;<span class="ident" id="2919404">s</span><span class="op" id="2919405">.</span><span class="ident" id="2919406">Cap</span><span class="op" id="2919409">(</span><span class="op" id="2919410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919413">if</span>&nbsp;<span class="ident" id="2919416">i1</span>&nbsp;<span class="op" id="2919419">&lt;=</span>&nbsp;<span class="ident" id="2919422">m</span>&nbsp;<span class="op" id="2919424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919428">return</span>&nbsp;<span class="ident" id="2919435">s</span><span class="op" id="2919436">.</span><span class="ident" id="2919437">Slice</span><span class="op" id="2919442">(</span><span class="num" id="2919443">0</span><span class="op" id="2919444">,</span>&nbsp;<span class="ident" id="2919446">i1</span><span class="op" id="2919448">)</span><span class="op" id="2919449">,</span>&nbsp;<span class="ident" id="2919451">i0</span><span class="op" id="2919453">,</span>&nbsp;<span class="ident" id="2919455">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919462">if</span>&nbsp;<span class="ident" id="2919465">m</span>&nbsp;<span class="op" id="2919467">==</span>&nbsp;<span class="num" id="2919470">0</span>&nbsp;<span class="op" id="2919472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919476">m</span>&nbsp;<span class="op" id="2919478">=</span>&nbsp;<span class="ident" id="2919480">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919487">}</span>&nbsp;<span class="keyword" id="2919489">else</span>&nbsp;<span class="op" id="2919494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919498">for</span>&nbsp;<span class="ident" id="2919502">m</span>&nbsp;<span class="op" id="2919504">&lt;</span>&nbsp;<span class="ident" id="2919506">i1</span>&nbsp;<span class="op" id="2919509">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919514">if</span>&nbsp;<span class="ident" id="2919517">i0</span>&nbsp;<span class="op" id="2919520">&lt;</span>&nbsp;<span class="num" id="2919522">1024</span>&nbsp;<span class="op" id="2919527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919533">m</span>&nbsp;<span class="op" id="2919535">+=</span>&nbsp;<span class="ident" id="2919538">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919543">}</span>&nbsp;<span class="keyword" id="2919545">else</span>&nbsp;<span class="op" id="2919550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919556">m</span>&nbsp;<span class="op" id="2919558">+=</span>&nbsp;<span class="ident" id="2919561">m</span>&nbsp;<span class="op" id="2919563">/</span>&nbsp;<span class="num" id="2919565">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919570">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919580">t</span>&nbsp;<span class="op" id="2919582">:=</span>&nbsp;<span class="ident" id="2919585">MakeSlice</span><span class="op" id="2919594">(</span><span class="ident" id="2919595">s</span><span class="op" id="2919596">.</span><span class="ident" id="2919597">Type</span><span class="op" id="2919601">(</span><span class="op" id="2919602">)</span><span class="op" id="2919603">,</span>&nbsp;<span class="ident" id="2919605">i1</span><span class="op" id="2919607">,</span>&nbsp;<span class="ident" id="2919609">m</span><span class="op" id="2919610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919613">Copy</span><span class="op" id="2919617">(</span><span class="ident" id="2919618">t</span><span class="op" id="2919619">,</span>&nbsp;<span class="ident" id="2919621">s</span><span class="op" id="2919622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919625">return</span>&nbsp;<span class="ident" id="2919632">t</span><span class="op" id="2919633">,</span>&nbsp;<span class="ident" id="2919635">i0</span><span class="op" id="2919637">,</span>&nbsp;<span class="ident" id="2919639">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2919642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919645">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2919722">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2919798">func</span>&nbsp;<span class="ident" id="2919803">Append</span><span class="op" id="2919809">(</span><span class="ident" id="2919810">s</span>&nbsp;<span class="ident" id="2919812">Value</span><span class="op" id="2919817">,</span>&nbsp;<span class="ident" id="2919819">x</span>&nbsp;<span class="op" id="2919821">...</span><span class="ident" id="2919824">Value</span><span class="op" id="2919829">)</span>&nbsp;<span class="ident" id="2919831">Value</span>&nbsp;<span class="op" id="2919837">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919840">s</span><span class="op" id="2919841">.</span><span class="ident" id="2919842">mustBe</span><span class="op" id="2919848">(</span><span class="ident" id="2919849">Slice</span><span class="op" id="2919854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919857">s</span><span class="op" id="2919858">,</span>&nbsp;<span class="ident" id="2919860">i0</span><span class="op" id="2919862">,</span>&nbsp;<span class="ident" id="2919864">i1</span>&nbsp;<span class="op" id="2919867">:=</span>&nbsp;<span class="ident" id="2919870">grow</span><span class="op" id="2919874">(</span><span class="ident" id="2919875">s</span><span class="op" id="2919876">,</span>&nbsp;<span class="builtinfunc" id="2919878">len</span><span class="op" id="2919881">(</span><span class="ident" id="2919882">x</span><span class="op" id="2919883">)</span><span class="op" id="2919884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919887">for</span>&nbsp;<span class="ident" id="2919891">i</span><span class="op" id="2919892">,</span>&nbsp;<span class="ident" id="2919894">j</span>&nbsp;<span class="op" id="2919896">:=</span>&nbsp;<span class="ident" id="2919899">i0</span><span class="op" id="2919901">,</span>&nbsp;<span class="num" id="2919903">0</span><span class="op" id="2919904">;</span>&nbsp;<span class="ident" id="2919906">i</span>&nbsp;<span class="op" id="2919908">&lt;</span>&nbsp;<span class="ident" id="2919910">i1</span><span class="op" id="2919912">;</span>&nbsp;<span class="ident" id="2919914">i</span><span class="op" id="2919915">,</span>&nbsp;<span class="ident" id="2919917">j</span>&nbsp;<span class="op" id="2919919">=</span>&nbsp;<span class="ident" id="2919921">i</span><span class="op" id="2919922">+</span><span class="num" id="2919923">1</span><span class="op" id="2919924">,</span>&nbsp;<span class="ident" id="2919926">j</span><span class="op" id="2919927">+</span><span class="num" id="2919928">1</span>&nbsp;<span class="op" id="2919930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2919934">s</span><span class="op" id="2919935">.</span><span class="ident" id="2919936">Index</span><span class="op" id="2919941">(</span><span class="ident" id="2919942">i</span><span class="op" id="2919943">)</span><span class="op" id="2919944">.</span><span class="ident" id="2919945">Set</span><span class="op" id="2919948">(</span><span class="ident" id="2919949">x</span><span class="op" id="2919950">[</span><span class="ident" id="2919951">j</span><span class="op" id="2919952">]</span><span class="op" id="2919953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2919956">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2919959">return</span>&nbsp;<span class="ident" id="2919966">s</span><br>
<span class="lineno"></span><span class="op" id="2919968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2919971">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2920050">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2920105">func</span>&nbsp;<span class="ident" id="2920110">AppendSlice</span><span class="op" id="2920121">(</span><span class="ident" id="2920122">s</span><span class="op" id="2920123">,</span>&nbsp;<span class="ident" id="2920125">t</span>&nbsp;<span class="ident" id="2920127">Value</span><span class="op" id="2920132">)</span>&nbsp;<span class="ident" id="2920134">Value</span>&nbsp;<span class="op" id="2920140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920143">s</span><span class="op" id="2920144">.</span><span class="ident" id="2920145">mustBe</span><span class="op" id="2920151">(</span><span class="ident" id="2920152">Slice</span><span class="op" id="2920157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920160">t</span><span class="op" id="2920161">.</span><span class="ident" id="2920162">mustBe</span><span class="op" id="2920168">(</span><span class="ident" id="2920169">Slice</span><span class="op" id="2920174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920177">typesMustMatch</span><span class="op" id="2920191">(</span><span class="string" id="2920192">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2920213">,</span>&nbsp;<span class="ident" id="2920215">s</span><span class="op" id="2920216">.</span><span class="ident" id="2920217">Type</span><span class="op" id="2920221">(</span><span class="op" id="2920222">)</span><span class="op" id="2920223">.</span><span class="ident" id="2920224">Elem</span><span class="op" id="2920228">(</span><span class="op" id="2920229">)</span><span class="op" id="2920230">,</span>&nbsp;<span class="ident" id="2920232">t</span><span class="op" id="2920233">.</span><span class="ident" id="2920234">Type</span><span class="op" id="2920238">(</span><span class="op" id="2920239">)</span><span class="op" id="2920240">.</span><span class="ident" id="2920241">Elem</span><span class="op" id="2920245">(</span><span class="op" id="2920246">)</span><span class="op" id="2920247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920250">s</span><span class="op" id="2920251">,</span>&nbsp;<span class="ident" id="2920253">i0</span><span class="op" id="2920255">,</span>&nbsp;<span class="ident" id="2920257">i1</span>&nbsp;<span class="op" id="2920260">:=</span>&nbsp;<span class="ident" id="2920263">grow</span><span class="op" id="2920267">(</span><span class="ident" id="2920268">s</span><span class="op" id="2920269">,</span>&nbsp;<span class="ident" id="2920271">t</span><span class="op" id="2920272">.</span><span class="ident" id="2920273">Len</span><span class="op" id="2920276">(</span><span class="op" id="2920277">)</span><span class="op" id="2920278">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920281">Copy</span><span class="op" id="2920285">(</span><span class="ident" id="2920286">s</span><span class="op" id="2920287">.</span><span class="ident" id="2920288">Slice</span><span class="op" id="2920293">(</span><span class="ident" id="2920294">i0</span><span class="op" id="2920296">,</span>&nbsp;<span class="ident" id="2920298">i1</span><span class="op" id="2920300">)</span><span class="op" id="2920301">,</span>&nbsp;<span class="ident" id="2920303">t</span><span class="op" id="2920304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920307">return</span>&nbsp;<span class="ident" id="2920314">s</span><br>
<span class="lineno"></span><span class="op" id="2920316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2920319">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2920376">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2920426">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2920471">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2920526">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2920574">func</span>&nbsp;<span class="ident" id="2920579">Copy</span><span class="op" id="2920583">(</span><span class="ident" id="2920584">dst</span><span class="op" id="2920587">,</span>&nbsp;<span class="ident" id="2920589">src</span>&nbsp;<span class="ident" id="2920593">Value</span><span class="op" id="2920598">)</span>&nbsp;<span class="builtintype" id="2920600">int</span>&nbsp;<span class="op" id="2920604">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920607">dk</span>&nbsp;<span class="op" id="2920610">:=</span>&nbsp;<span class="ident" id="2920613">dst</span><span class="op" id="2920616">.</span><span class="ident" id="2920617">kind</span><span class="op" id="2920621">(</span><span class="op" id="2920622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920625">if</span>&nbsp;<span class="ident" id="2920628">dk</span>&nbsp;<span class="op" id="2920631">!=</span>&nbsp;<span class="ident" id="2920634">Array</span>&nbsp;<span class="op" id="2920640">&amp;&amp;</span>&nbsp;<span class="ident" id="2920643">dk</span>&nbsp;<span class="op" id="2920646">!=</span>&nbsp;<span class="ident" id="2920649">Slice</span>&nbsp;<span class="op" id="2920655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2920659">panic</span><span class="op" id="2920664">(</span><span class="op" id="2920665">&amp;</span><span class="ident" id="2920666">ValueError</span><span class="op" id="2920676">{</span><span class="string" id="2920677">&#34;reflect.Copy&#34;</span><span class="op" id="2920691">,</span>&nbsp;<span class="ident" id="2920693">dk</span><span class="op" id="2920695">}</span><span class="op" id="2920696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920702">if</span>&nbsp;<span class="ident" id="2920705">dk</span>&nbsp;<span class="op" id="2920708">==</span>&nbsp;<span class="ident" id="2920711">Array</span>&nbsp;<span class="op" id="2920717">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920721">dst</span><span class="op" id="2920724">.</span><span class="ident" id="2920725">mustBeAssignable</span><span class="op" id="2920741">(</span><span class="op" id="2920742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920748">dst</span><span class="op" id="2920751">.</span><span class="ident" id="2920752">mustBeExported</span><span class="op" id="2920766">(</span><span class="op" id="2920767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920771">sk</span>&nbsp;<span class="op" id="2920774">:=</span>&nbsp;<span class="ident" id="2920777">src</span><span class="op" id="2920780">.</span><span class="ident" id="2920781">kind</span><span class="op" id="2920785">(</span><span class="op" id="2920786">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920789">if</span>&nbsp;<span class="ident" id="2920792">sk</span>&nbsp;<span class="op" id="2920795">!=</span>&nbsp;<span class="ident" id="2920798">Array</span>&nbsp;<span class="op" id="2920804">&amp;&amp;</span>&nbsp;<span class="ident" id="2920807">sk</span>&nbsp;<span class="op" id="2920810">!=</span>&nbsp;<span class="ident" id="2920813">Slice</span>&nbsp;<span class="op" id="2920819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2920823">panic</span><span class="op" id="2920828">(</span><span class="op" id="2920829">&amp;</span><span class="ident" id="2920830">ValueError</span><span class="op" id="2920840">{</span><span class="string" id="2920841">&#34;reflect.Copy&#34;</span><span class="op" id="2920855">,</span>&nbsp;<span class="ident" id="2920857">sk</span><span class="op" id="2920859">}</span><span class="op" id="2920860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2920863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920866">src</span><span class="op" id="2920869">.</span><span class="ident" id="2920870">mustBeExported</span><span class="op" id="2920884">(</span><span class="op" id="2920885">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920889">de</span>&nbsp;<span class="op" id="2920892">:=</span>&nbsp;<span class="ident" id="2920895">dst</span><span class="op" id="2920898">.</span><span class="ident" id="2920899">typ</span><span class="op" id="2920902">.</span><span class="ident" id="2920903">Elem</span><span class="op" id="2920907">(</span><span class="op" id="2920908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920911">se</span>&nbsp;<span class="op" id="2920914">:=</span>&nbsp;<span class="ident" id="2920917">src</span><span class="op" id="2920920">.</span><span class="ident" id="2920921">typ</span><span class="op" id="2920924">.</span><span class="ident" id="2920925">Elem</span><span class="op" id="2920929">(</span><span class="op" id="2920930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920933">typesMustMatch</span><span class="op" id="2920947">(</span><span class="string" id="2920948">&#34;reflect.Copy&#34;</span><span class="op" id="2920962">,</span>&nbsp;<span class="ident" id="2920964">de</span><span class="op" id="2920966">,</span>&nbsp;<span class="ident" id="2920968">se</span><span class="op" id="2920970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2920974">n</span>&nbsp;<span class="op" id="2920976">:=</span>&nbsp;<span class="ident" id="2920979">dst</span><span class="op" id="2920982">.</span><span class="ident" id="2920983">Len</span><span class="op" id="2920986">(</span><span class="op" id="2920987">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2920990">if</span>&nbsp;<span class="ident" id="2920993">sn</span>&nbsp;<span class="op" id="2920996">:=</span>&nbsp;<span class="ident" id="2920999">src</span><span class="op" id="2921002">.</span><span class="ident" id="2921003">Len</span><span class="op" id="2921006">(</span><span class="op" id="2921007">)</span><span class="op" id="2921008">;</span>&nbsp;<span class="ident" id="2921010">n</span>&nbsp;<span class="op" id="2921012">&gt;</span>&nbsp;<span class="ident" id="2921014">sn</span>&nbsp;<span class="op" id="2921017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921021">n</span>&nbsp;<span class="op" id="2921023">=</span>&nbsp;<span class="ident" id="2921025">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2921033">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921055">var</span>&nbsp;<span class="ident" id="2921059">da</span><span class="op" id="2921061">,</span>&nbsp;<span class="ident" id="2921063">sa</span>&nbsp;<span class="ident" id="2921066">unsafe</span><span class="op" id="2921072">.</span><span class="ident" id="2921073">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921082">if</span>&nbsp;<span class="ident" id="2921085">dk</span>&nbsp;<span class="op" id="2921088">==</span>&nbsp;<span class="ident" id="2921091">Array</span>&nbsp;<span class="op" id="2921097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921101">da</span>&nbsp;<span class="op" id="2921104">=</span>&nbsp;<span class="ident" id="2921106">dst</span><span class="op" id="2921109">.</span><span class="ident" id="2921110">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921115">}</span>&nbsp;<span class="keyword" id="2921117">else</span>&nbsp;<span class="op" id="2921122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921126">da</span>&nbsp;<span class="op" id="2921129">=</span>&nbsp;<span class="op" id="2921131">(</span><span class="op" id="2921132">*</span><span class="ident" id="2921133">sliceHeader</span><span class="op" id="2921144">)</span><span class="op" id="2921145">(</span><span class="ident" id="2921146">dst</span><span class="op" id="2921149">.</span><span class="ident" id="2921150">ptr</span><span class="op" id="2921153">)</span><span class="op" id="2921154">.</span><span class="ident" id="2921155">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921164">if</span>&nbsp;<span class="ident" id="2921167">src</span><span class="op" id="2921170">.</span><span class="ident" id="2921171">flag</span><span class="op" id="2921175">&amp;</span><span class="ident" id="2921176">flagIndir</span>&nbsp;<span class="op" id="2921186">==</span>&nbsp;<span class="num" id="2921189">0</span>&nbsp;<span class="op" id="2921191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921195">sa</span>&nbsp;<span class="op" id="2921198">=</span>&nbsp;<span class="ident" id="2921200">unsafe</span><span class="op" id="2921206">.</span><span class="ident" id="2921207">Pointer</span><span class="op" id="2921214">(</span><span class="op" id="2921215">&amp;</span><span class="ident" id="2921216">src</span><span class="op" id="2921219">.</span><span class="ident" id="2921220">ptr</span><span class="op" id="2921223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921226">}</span>&nbsp;<span class="keyword" id="2921228">else</span>&nbsp;<span class="keyword" id="2921233">if</span>&nbsp;<span class="ident" id="2921236">sk</span>&nbsp;<span class="op" id="2921239">==</span>&nbsp;<span class="ident" id="2921242">Array</span>&nbsp;<span class="op" id="2921248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921252">sa</span>&nbsp;<span class="op" id="2921255">=</span>&nbsp;<span class="ident" id="2921257">src</span><span class="op" id="2921260">.</span><span class="ident" id="2921261">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921266">}</span>&nbsp;<span class="keyword" id="2921268">else</span>&nbsp;<span class="op" id="2921273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921277">sa</span>&nbsp;<span class="op" id="2921280">=</span>&nbsp;<span class="op" id="2921282">(</span><span class="op" id="2921283">*</span><span class="ident" id="2921284">sliceHeader</span><span class="op" id="2921295">)</span><span class="op" id="2921296">(</span><span class="ident" id="2921297">src</span><span class="op" id="2921300">.</span><span class="ident" id="2921301">ptr</span><span class="op" id="2921304">)</span><span class="op" id="2921305">.</span><span class="ident" id="2921306">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2921312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921315">memmove</span><span class="op" id="2921322">(</span><span class="ident" id="2921323">da</span><span class="op" id="2921325">,</span>&nbsp;<span class="ident" id="2921327">sa</span><span class="op" id="2921329">,</span>&nbsp;<span class="builtintype" id="2921331">uintptr</span><span class="op" id="2921338">(</span><span class="ident" id="2921339">n</span><span class="op" id="2921340">)</span><span class="op" id="2921341">*</span><span class="ident" id="2921342">de</span><span class="op" id="2921344">.</span><span class="ident" id="2921345">Size</span><span class="op" id="2921349">(</span><span class="op" id="2921350">)</span><span class="op" id="2921351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2921354">return</span>&nbsp;<span class="ident" id="2921361">n</span><br>
<span class="lineno">1835</span><span class="op" id="2921363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2921366">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2921421">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2921476">type</span>&nbsp;<span class="ident" id="2921481">runtimeSelect</span>&nbsp;<span class="keyword" id="2921495">struct</span>&nbsp;<span class="op" id="2921502">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921505">dir</span>&nbsp;<span class="builtintype" id="2921509">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2921524">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921551">typ</span>&nbsp;<span class="op" id="2921555">*</span><span class="ident" id="2921556">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2921570">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921587">ch</span>&nbsp;&nbsp;<span class="ident" id="2921591">unsafe</span><span class="op" id="2921597">.</span><span class="ident" id="2921598">Pointer</span>&nbsp;<span class="comment" id="2921606">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2921618">val</span>&nbsp;<span class="ident" id="2921622">unsafe</span><span class="op" id="2921628">.</span><span class="ident" id="2921629">Pointer</span>&nbsp;<span class="comment" id="2921637">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2921697">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2921700">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2921768">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2921840">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2921910">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2921930">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2921944">func</span>&nbsp;<span class="ident" id="2921949">rselect</span><span class="op" id="2921956">(</span><span class="op" id="2921957">[</span><span class="op" id="2921958">]</span><span class="ident" id="2921959">runtimeSelect</span><span class="op" id="2921972">)</span>&nbsp;<span class="op" id="2921974">(</span><span class="ident" id="2921975">chosen</span>&nbsp;<span class="builtintype" id="2921982">int</span><span class="op" id="2921985">,</span>&nbsp;<span class="ident" id="2921987">recvOK</span>&nbsp;<span class="builtintype" id="2921994">bool</span><span class="op" id="2921998">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2922001">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2922072">type</span>&nbsp;<span class="ident" id="2922077">SelectDir</span>&nbsp;<span class="builtintype" id="2922087">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2922092">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2922159">const</span>&nbsp;<span class="op" id="2922165">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922168">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922182">SelectDir</span>&nbsp;<span class="op" id="2922192">=</span>&nbsp;<span class="ident" id="2922194">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922200">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922224">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922246">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922270">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2922287">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2922311">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2922322">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2922325">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2922388">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2922453">//</span><br>
<span class="lineno"></span><span class="comment" id="2922456">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2922520">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2922558">//</span><br>
<span class="lineno"></span><span class="comment" id="2922561">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2922624">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2922715">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2922804">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2922896">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2922912">//</span><br>
<span class="lineno"></span><span class="comment" id="2922915">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2922981">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2923066">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2923157">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2923240">//</span><br>
<span class="lineno"></span><span class="keyword" id="2923243">type</span>&nbsp;<span class="ident" id="2923248">SelectCase</span>&nbsp;<span class="keyword" id="2923259">struct</span>&nbsp;<span class="op" id="2923266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923269">Dir</span>&nbsp;&nbsp;<span class="ident" id="2923274">SelectDir</span>&nbsp;<span class="comment" id="2923284">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923306">Chan</span>&nbsp;<span class="ident" id="2923311">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923321">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2923362">Send</span>&nbsp;<span class="ident" id="2923367">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923377">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2923405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2923408">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2923478">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2923553">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2923607">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2923679">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2923750">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2923827">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2923899">func</span>&nbsp;<span class="ident" id="2923904">Select</span><span class="op" id="2923910">(</span><span class="ident" id="2923911">cases</span>&nbsp;<span class="op" id="2923917">[</span><span class="op" id="2923918">]</span><span class="ident" id="2923919">SelectCase</span><span class="op" id="2923929">)</span>&nbsp;<span class="op" id="2923931">(</span><span class="ident" id="2923932">chosen</span>&nbsp;<span class="builtintype" id="2923939">int</span><span class="op" id="2923942">,</span>&nbsp;<span class="ident" id="2923944">recv</span>&nbsp;<span class="ident" id="2923949">Value</span><span class="op" id="2923954">,</span>&nbsp;<span class="ident" id="2923956">recvOK</span>&nbsp;<span class="builtintype" id="2923963">bool</span><span class="op" id="2923967">)</span>&nbsp;<span class="op" id="2923969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2923972">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2924046">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2924121">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924179">runcases</span>&nbsp;<span class="op" id="2924188">:=</span>&nbsp;<span class="builtinfunc" id="2924191">make</span><span class="op" id="2924195">(</span><span class="op" id="2924196">[</span><span class="op" id="2924197">]</span><span class="ident" id="2924198">runtimeSelect</span><span class="op" id="2924211">,</span>&nbsp;<span class="builtinfunc" id="2924213">len</span><span class="op" id="2924216">(</span><span class="ident" id="2924217">cases</span><span class="op" id="2924222">)</span><span class="op" id="2924223">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924226">haveDefault</span>&nbsp;<span class="op" id="2924238">:=</span>&nbsp;<span class="builtintype" id="2924241">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924248">for</span>&nbsp;<span class="ident" id="2924252">i</span><span class="op" id="2924253">,</span>&nbsp;<span class="ident" id="2924255">c</span>&nbsp;<span class="op" id="2924257">:=</span>&nbsp;<span class="keyword" id="2924260">range</span>&nbsp;<span class="ident" id="2924266">cases</span>&nbsp;<span class="op" id="2924272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924276">rc</span>&nbsp;<span class="op" id="2924279">:=</span>&nbsp;<span class="op" id="2924282">&amp;</span><span class="ident" id="2924283">runcases</span><span class="op" id="2924291">[</span><span class="ident" id="2924292">i</span><span class="op" id="2924293">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924297">rc</span><span class="op" id="2924299">.</span><span class="ident" id="2924300">dir</span>&nbsp;<span class="op" id="2924304">=</span>&nbsp;<span class="builtintype" id="2924306">uintptr</span><span class="op" id="2924313">(</span><span class="ident" id="2924314">c</span><span class="op" id="2924315">.</span><span class="ident" id="2924316">Dir</span><span class="op" id="2924319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924323">switch</span>&nbsp;<span class="ident" id="2924330">c</span><span class="op" id="2924331">.</span><span class="ident" id="2924332">Dir</span>&nbsp;<span class="op" id="2924336">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924340">default</span><span class="op" id="2924347">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2924352">panic</span><span class="op" id="2924357">(</span><span class="string" id="2924358">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2924387">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924392">case</span>&nbsp;<span class="ident" id="2924397">SelectDefault</span><span class="op" id="2924410">:</span>&nbsp;<span class="comment" id="2924412">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924426">if</span>&nbsp;<span class="ident" id="2924429">haveDefault</span>&nbsp;<span class="op" id="2924441">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2924447">panic</span><span class="op" id="2924452">(</span><span class="string" id="2924453">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2924493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924503">haveDefault</span>&nbsp;<span class="op" id="2924515">=</span>&nbsp;<span class="builtintype" id="2924517">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924525">if</span>&nbsp;<span class="ident" id="2924528">c</span><span class="op" id="2924529">.</span><span class="ident" id="2924530">Chan</span><span class="op" id="2924534">.</span><span class="ident" id="2924535">IsValid</span><span class="op" id="2924542">(</span><span class="op" id="2924543">)</span>&nbsp;<span class="op" id="2924545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2924551">panic</span><span class="op" id="2924556">(</span><span class="string" id="2924557">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2924602">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924612">if</span>&nbsp;<span class="ident" id="2924615">c</span><span class="op" id="2924616">.</span><span class="ident" id="2924617">Send</span><span class="op" id="2924621">.</span><span class="ident" id="2924622">IsValid</span><span class="op" id="2924629">(</span><span class="op" id="2924630">)</span>&nbsp;<span class="op" id="2924632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2924638">panic</span><span class="op" id="2924643">(</span><span class="string" id="2924644">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2924689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924699">case</span>&nbsp;<span class="ident" id="2924704">SelectSend</span><span class="op" id="2924714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924719">ch</span>&nbsp;<span class="op" id="2924722">:=</span>&nbsp;<span class="ident" id="2924725">c</span><span class="op" id="2924726">.</span><span class="ident" id="2924727">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924735">if</span>&nbsp;<span class="op" id="2924738">!</span><span class="ident" id="2924739">ch</span><span class="op" id="2924741">.</span><span class="ident" id="2924742">IsValid</span><span class="op" id="2924749">(</span><span class="op" id="2924750">)</span>&nbsp;<span class="op" id="2924752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924758">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924767">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924772">ch</span><span class="op" id="2924774">.</span><span class="ident" id="2924775">mustBe</span><span class="op" id="2924781">(</span><span class="ident" id="2924782">Chan</span><span class="op" id="2924786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924791">ch</span><span class="op" id="2924793">.</span><span class="ident" id="2924794">mustBeExported</span><span class="op" id="2924808">(</span><span class="op" id="2924809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924814">tt</span>&nbsp;<span class="op" id="2924817">:=</span>&nbsp;<span class="op" id="2924820">(</span><span class="op" id="2924821">*</span><span class="ident" id="2924822">chanType</span><span class="op" id="2924830">)</span><span class="op" id="2924831">(</span><span class="ident" id="2924832">unsafe</span><span class="op" id="2924838">.</span><span class="ident" id="2924839">Pointer</span><span class="op" id="2924846">(</span><span class="ident" id="2924847">ch</span><span class="op" id="2924849">.</span><span class="ident" id="2924850">typ</span><span class="op" id="2924853">)</span><span class="op" id="2924854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2924859">if</span>&nbsp;<span class="ident" id="2924862">ChanDir</span><span class="op" id="2924869">(</span><span class="ident" id="2924870">tt</span><span class="op" id="2924872">.</span><span class="ident" id="2924873">dir</span><span class="op" id="2924876">)</span><span class="op" id="2924877">&amp;</span><span class="ident" id="2924878">SendDir</span>&nbsp;<span class="op" id="2924886">==</span>&nbsp;<span class="num" id="2924889">0</span>&nbsp;<span class="op" id="2924891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2924897">panic</span><span class="op" id="2924902">(</span><span class="string" id="2924903">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2924957">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2924962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924967">rc</span><span class="op" id="2924969">.</span><span class="ident" id="2924970">ch</span>&nbsp;<span class="op" id="2924973">=</span>&nbsp;<span class="ident" id="2924975">ch</span><span class="op" id="2924977">.</span><span class="ident" id="2924978">pointer</span><span class="op" id="2924985">(</span><span class="op" id="2924986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2924991">rc</span><span class="op" id="2924993">.</span><span class="ident" id="2924994">typ</span>&nbsp;<span class="op" id="2924998">=</span>&nbsp;<span class="op" id="2925000">&amp;</span><span class="ident" id="2925001">tt</span><span class="op" id="2925003">.</span><span class="ident" id="2925004">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925013">v</span>&nbsp;<span class="op" id="2925015">:=</span>&nbsp;<span class="ident" id="2925018">c</span><span class="op" id="2925019">.</span><span class="ident" id="2925020">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925028">if</span>&nbsp;<span class="op" id="2925031">!</span><span class="ident" id="2925032">v</span><span class="op" id="2925033">.</span><span class="ident" id="2925034">IsValid</span><span class="op" id="2925041">(</span><span class="op" id="2925042">)</span>&nbsp;<span class="op" id="2925044">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2925050">panic</span><span class="op" id="2925055">(</span><span class="string" id="2925056">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2925105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925115">v</span><span class="op" id="2925116">.</span><span class="ident" id="2925117">mustBeExported</span><span class="op" id="2925131">(</span><span class="op" id="2925132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925137">v</span>&nbsp;<span class="op" id="2925139">=</span>&nbsp;<span class="ident" id="2925141">v</span><span class="op" id="2925142">.</span><span class="ident" id="2925143">assignTo</span><span class="op" id="2925151">(</span><span class="string" id="2925152">&#34;reflect.Select&#34;</span><span class="op" id="2925168">,</span>&nbsp;<span class="ident" id="2925170">tt</span><span class="op" id="2925172">.</span><span class="ident" id="2925173">elem</span><span class="op" id="2925177">,</span>&nbsp;<span class="builtintype" id="2925179">nil</span><span class="op" id="2925182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925187">if</span>&nbsp;<span class="ident" id="2925190">v</span><span class="op" id="2925191">.</span><span class="ident" id="2925192">flag</span><span class="op" id="2925196">&amp;</span><span class="ident" id="2925197">flagIndir</span>&nbsp;<span class="op" id="2925207">!=</span>&nbsp;<span class="num" id="2925210">0</span>&nbsp;<span class="op" id="2925212">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925218">rc</span><span class="op" id="2925220">.</span><span class="ident" id="2925221">val</span>&nbsp;<span class="op" id="2925225">=</span>&nbsp;<span class="ident" id="2925227">v</span><span class="op" id="2925228">.</span><span class="ident" id="2925229">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925236">}</span>&nbsp;<span class="keyword" id="2925238">else</span>&nbsp;<span class="op" id="2925243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925249">rc</span><span class="op" id="2925251">.</span><span class="ident" id="2925252">val</span>&nbsp;<span class="op" id="2925256">=</span>&nbsp;<span class="ident" id="2925258">unsafe</span><span class="op" id="2925264">.</span><span class="ident" id="2925265">Pointer</span><span class="op" id="2925272">(</span><span class="op" id="2925273">&amp;</span><span class="ident" id="2925274">v</span><span class="op" id="2925275">.</span><span class="ident" id="2925276">ptr</span><span class="op" id="2925279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925289">case</span>&nbsp;<span class="ident" id="2925294">SelectRecv</span><span class="op" id="2925304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925309">if</span>&nbsp;<span class="ident" id="2925312">c</span><span class="op" id="2925313">.</span><span class="ident" id="2925314">Send</span><span class="op" id="2925318">.</span><span class="ident" id="2925319">IsValid</span><span class="op" id="2925326">(</span><span class="op" id="2925327">)</span>&nbsp;<span class="op" id="2925329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2925335">panic</span><span class="op" id="2925340">(</span><span class="string" id="2925341">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2925386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925396">ch</span>&nbsp;<span class="op" id="2925399">:=</span>&nbsp;<span class="ident" id="2925402">c</span><span class="op" id="2925403">.</span><span class="ident" id="2925404">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925412">if</span>&nbsp;<span class="op" id="2925415">!</span><span class="ident" id="2925416">ch</span><span class="op" id="2925418">.</span><span class="ident" id="2925419">IsValid</span><span class="op" id="2925426">(</span><span class="op" id="2925427">)</span>&nbsp;<span class="op" id="2925429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925435">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925449">ch</span><span class="op" id="2925451">.</span><span class="ident" id="2925452">mustBe</span><span class="op" id="2925458">(</span><span class="ident" id="2925459">Chan</span><span class="op" id="2925463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925468">ch</span><span class="op" id="2925470">.</span><span class="ident" id="2925471">mustBeExported</span><span class="op" id="2925485">(</span><span class="op" id="2925486">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925491">tt</span>&nbsp;<span class="op" id="2925494">:=</span>&nbsp;<span class="op" id="2925497">(</span><span class="op" id="2925498">*</span><span class="ident" id="2925499">chanType</span><span class="op" id="2925507">)</span><span class="op" id="2925508">(</span><span class="ident" id="2925509">unsafe</span><span class="op" id="2925515">.</span><span class="ident" id="2925516">Pointer</span><span class="op" id="2925523">(</span><span class="ident" id="2925524">ch</span><span class="op" id="2925526">.</span><span class="ident" id="2925527">typ</span><span class="op" id="2925530">)</span><span class="op" id="2925531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925536">if</span>&nbsp;<span class="ident" id="2925539">ChanDir</span><span class="op" id="2925546">(</span><span class="ident" id="2925547">tt</span><span class="op" id="2925549">.</span><span class="ident" id="2925550">dir</span><span class="op" id="2925553">)</span><span class="op" id="2925554">&amp;</span><span class="ident" id="2925555">RecvDir</span>&nbsp;<span class="op" id="2925563">==</span>&nbsp;<span class="num" id="2925566">0</span>&nbsp;<span class="op" id="2925568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2925574">panic</span><span class="op" id="2925579">(</span><span class="string" id="2925580">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2925634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925644">rc</span><span class="op" id="2925646">.</span><span class="ident" id="2925647">ch</span>&nbsp;<span class="op" id="2925650">=</span>&nbsp;<span class="ident" id="2925652">ch</span><span class="op" id="2925654">.</span><span class="ident" id="2925655">pointer</span><span class="op" id="2925662">(</span><span class="op" id="2925663">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925668">rc</span><span class="op" id="2925670">.</span><span class="ident" id="2925671">typ</span>&nbsp;<span class="op" id="2925675">=</span>&nbsp;<span class="op" id="2925677">&amp;</span><span class="ident" id="2925678">tt</span><span class="op" id="2925680">.</span><span class="ident" id="2925681">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925690">rc</span><span class="op" id="2925692">.</span><span class="ident" id="2925693">val</span>&nbsp;<span class="op" id="2925697">=</span>&nbsp;<span class="ident" id="2925699">unsafe_New</span><span class="op" id="2925709">(</span><span class="ident" id="2925710">tt</span><span class="op" id="2925712">.</span><span class="ident" id="2925713">elem</span><span class="op" id="2925717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925728">chosen</span><span class="op" id="2925734">,</span>&nbsp;<span class="ident" id="2925736">recvOK</span>&nbsp;<span class="op" id="2925743">=</span>&nbsp;<span class="ident" id="2925745">rselect</span><span class="op" id="2925752">(</span><span class="ident" id="2925753">runcases</span><span class="op" id="2925761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925764">if</span>&nbsp;<span class="ident" id="2925767">runcases</span><span class="op" id="2925775">[</span><span class="ident" id="2925776">chosen</span><span class="op" id="2925782">]</span><span class="op" id="2925783">.</span><span class="ident" id="2925784">dir</span>&nbsp;<span class="op" id="2925788">==</span>&nbsp;<span class="builtintype" id="2925791">uintptr</span><span class="op" id="2925798">(</span><span class="ident" id="2925799">SelectRecv</span><span class="op" id="2925809">)</span>&nbsp;<span class="op" id="2925811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925815">tt</span>&nbsp;<span class="op" id="2925818">:=</span>&nbsp;<span class="op" id="2925821">(</span><span class="op" id="2925822">*</span><span class="ident" id="2925823">chanType</span><span class="op" id="2925831">)</span><span class="op" id="2925832">(</span><span class="ident" id="2925833">unsafe</span><span class="op" id="2925839">.</span><span class="ident" id="2925840">Pointer</span><span class="op" id="2925847">(</span><span class="ident" id="2925848">runcases</span><span class="op" id="2925856">[</span><span class="ident" id="2925857">chosen</span><span class="op" id="2925863">]</span><span class="op" id="2925864">.</span><span class="ident" id="2925865">typ</span><span class="op" id="2925868">)</span><span class="op" id="2925869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925873">t</span>&nbsp;<span class="op" id="2925875">:=</span>&nbsp;<span class="ident" id="2925878">tt</span><span class="op" id="2925880">.</span><span class="ident" id="2925881">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925888">p</span>&nbsp;<span class="op" id="2925890">:=</span>&nbsp;<span class="ident" id="2925893">runcases</span><span class="op" id="2925901">[</span><span class="ident" id="2925902">chosen</span><span class="op" id="2925908">]</span><span class="op" id="2925909">.</span><span class="ident" id="2925910">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925916">fl</span>&nbsp;<span class="op" id="2925919">:=</span>&nbsp;<span class="ident" id="2925922">flag</span><span class="op" id="2925926">(</span><span class="ident" id="2925927">t</span><span class="op" id="2925928">.</span><span class="ident" id="2925929">Kind</span><span class="op" id="2925933">(</span><span class="op" id="2925934">)</span><span class="op" id="2925935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2925939">if</span>&nbsp;<span class="ident" id="2925942">ifaceIndir</span><span class="op" id="2925952">(</span><span class="ident" id="2925953">t</span><span class="op" id="2925954">)</span>&nbsp;<span class="op" id="2925956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2925961">recv</span>&nbsp;<span class="op" id="2925966">=</span>&nbsp;<span class="ident" id="2925968">Value</span><span class="op" id="2925973">{</span><span class="ident" id="2925974">t</span><span class="op" id="2925975">,</span>&nbsp;<span class="ident" id="2925977">p</span><span class="op" id="2925978">,</span>&nbsp;<span class="ident" id="2925980">fl</span>&nbsp;<span class="op" id="2925983">|</span>&nbsp;<span class="ident" id="2925985">flagIndir</span><span class="op" id="2925994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2925998">}</span>&nbsp;<span class="keyword" id="2926000">else</span>&nbsp;<span class="op" id="2926005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926010">recv</span>&nbsp;<span class="op" id="2926015">=</span>&nbsp;<span class="ident" id="2926017">Value</span><span class="op" id="2926022">{</span><span class="ident" id="2926023">t</span><span class="op" id="2926024">,</span>&nbsp;<span class="op" id="2926026">*</span><span class="op" id="2926027">(</span><span class="op" id="2926028">*</span><span class="ident" id="2926029">unsafe</span><span class="op" id="2926035">.</span><span class="ident" id="2926036">Pointer</span><span class="op" id="2926043">)</span><span class="op" id="2926044">(</span><span class="ident" id="2926045">p</span><span class="op" id="2926046">)</span><span class="op" id="2926047">,</span>&nbsp;<span class="ident" id="2926049">fl</span><span class="op" id="2926051">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926061">return</span>&nbsp;<span class="ident" id="2926068">chosen</span><span class="op" id="2926074">,</span>&nbsp;<span class="ident" id="2926076">recv</span><span class="op" id="2926080">,</span>&nbsp;<span class="ident" id="2926082">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2926089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2926092">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926116">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2926150">func</span>&nbsp;<span class="ident" id="2926155">unsafe_New</span><span class="op" id="2926165">(</span><span class="op" id="2926166">*</span><span class="ident" id="2926167">rtype</span><span class="op" id="2926172">)</span>&nbsp;<span class="ident" id="2926174">unsafe</span><span class="op" id="2926180">.</span><span class="ident" id="2926181">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2926189">func</span>&nbsp;<span class="ident" id="2926194">unsafe_NewArray</span><span class="op" id="2926209">(</span><span class="op" id="2926210">*</span><span class="ident" id="2926211">rtype</span><span class="op" id="2926216">,</span>&nbsp;<span class="builtintype" id="2926218">int</span><span class="op" id="2926221">)</span>&nbsp;<span class="ident" id="2926223">unsafe</span><span class="op" id="2926229">.</span><span class="ident" id="2926230">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926239">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2926295">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2926350">func</span>&nbsp;<span class="ident" id="2926355">MakeSlice</span><span class="op" id="2926364">(</span><span class="ident" id="2926365">typ</span>&nbsp;<span class="ident" id="2926369">Type</span><span class="op" id="2926373">,</span>&nbsp;<span class="builtinfunc" id="2926375">len</span><span class="op" id="2926378">,</span>&nbsp;<span class="builtinfunc" id="2926380">cap</span>&nbsp;<span class="builtintype" id="2926384">int</span><span class="op" id="2926387">)</span>&nbsp;<span class="ident" id="2926389">Value</span>&nbsp;<span class="op" id="2926395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926398">if</span>&nbsp;<span class="ident" id="2926401">typ</span><span class="op" id="2926404">.</span><span class="ident" id="2926405">Kind</span><span class="op" id="2926409">(</span><span class="op" id="2926410">)</span>&nbsp;<span class="op" id="2926412">!=</span>&nbsp;<span class="ident" id="2926415">Slice</span>&nbsp;<span class="op" id="2926421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2926425">panic</span><span class="op" id="2926430">(</span><span class="string" id="2926431">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2926468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926474">if</span>&nbsp;<span class="builtinfunc" id="2926477">len</span>&nbsp;<span class="op" id="2926481">&lt;</span>&nbsp;<span class="num" id="2926483">0</span>&nbsp;<span class="op" id="2926485">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2926489">panic</span><span class="op" id="2926494">(</span><span class="string" id="2926495">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2926528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926534">if</span>&nbsp;<span class="builtinfunc" id="2926537">cap</span>&nbsp;<span class="op" id="2926541">&lt;</span>&nbsp;<span class="num" id="2926543">0</span>&nbsp;<span class="op" id="2926545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2926549">panic</span><span class="op" id="2926554">(</span><span class="string" id="2926555">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2926588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926591">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926594">if</span>&nbsp;<span class="builtinfunc" id="2926597">len</span>&nbsp;<span class="op" id="2926601">&gt;</span>&nbsp;<span class="builtinfunc" id="2926603">cap</span>&nbsp;<span class="op" id="2926607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2926611">panic</span><span class="op" id="2926616">(</span><span class="string" id="2926617">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2926647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926654">s</span>&nbsp;<span class="op" id="2926656">:=</span>&nbsp;<span class="ident" id="2926659">sliceHeader</span><span class="op" id="2926670">{</span><span class="ident" id="2926671">unsafe_NewArray</span><span class="op" id="2926686">(</span><span class="ident" id="2926687">typ</span><span class="op" id="2926690">.</span><span class="ident" id="2926691">Elem</span><span class="op" id="2926695">(</span><span class="op" id="2926696">)</span><span class="op" id="2926697">.</span><span class="op" id="2926698">(</span><span class="op" id="2926699">*</span><span class="ident" id="2926700">rtype</span><span class="op" id="2926705">)</span><span class="op" id="2926706">,</span>&nbsp;<span class="builtinfunc" id="2926708">cap</span><span class="op" id="2926711">)</span><span class="op" id="2926712">,</span>&nbsp;<span class="builtinfunc" id="2926714">len</span><span class="op" id="2926717">,</span>&nbsp;<span class="builtinfunc" id="2926719">cap</span><span class="op" id="2926722">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926725">return</span>&nbsp;<span class="ident" id="2926732">Value</span><span class="op" id="2926737">{</span><span class="ident" id="2926738">typ</span><span class="op" id="2926741">.</span><span class="ident" id="2926742">common</span><span class="op" id="2926748">(</span><span class="op" id="2926749">)</span><span class="op" id="2926750">,</span>&nbsp;<span class="ident" id="2926752">unsafe</span><span class="op" id="2926758">.</span><span class="ident" id="2926759">Pointer</span><span class="op" id="2926766">(</span><span class="op" id="2926767">&amp;</span><span class="ident" id="2926768">s</span><span class="op" id="2926769">)</span><span class="op" id="2926770">,</span>&nbsp;<span class="ident" id="2926772">flagIndir</span>&nbsp;<span class="op" id="2926782">|</span>&nbsp;<span class="ident" id="2926784">flag</span><span class="op" id="2926788">(</span><span class="ident" id="2926789">Slice</span><span class="op" id="2926794">)</span><span class="op" id="2926795">}</span><br>
<span class="lineno"></span><span class="op" id="2926797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926800">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2926875">func</span>&nbsp;<span class="ident" id="2926880">MakeChan</span><span class="op" id="2926888">(</span><span class="ident" id="2926889">typ</span>&nbsp;<span class="ident" id="2926893">Type</span><span class="op" id="2926897">,</span>&nbsp;<span class="ident" id="2926899">buffer</span>&nbsp;<span class="builtintype" id="2926906">int</span><span class="op" id="2926909">)</span>&nbsp;<span class="ident" id="2926911">Value</span>&nbsp;<span class="op" id="2926917">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926920">if</span>&nbsp;<span class="ident" id="2926923">typ</span><span class="op" id="2926926">.</span><span class="ident" id="2926927">Kind</span><span class="op" id="2926931">(</span><span class="op" id="2926932">)</span>&nbsp;<span class="op" id="2926934">!=</span>&nbsp;<span class="ident" id="2926937">Chan</span>&nbsp;<span class="op" id="2926942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2926946">panic</span><span class="op" id="2926951">(</span><span class="string" id="2926952">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2926987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926993">if</span>&nbsp;<span class="ident" id="2926996">buffer</span>&nbsp;<span class="op" id="2927003">&lt;</span>&nbsp;<span class="num" id="2927005">0</span>&nbsp;<span class="op" id="2927007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2927011">panic</span><span class="op" id="2927016">(</span><span class="string" id="2927017">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2927057">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927063">if</span>&nbsp;<span class="ident" id="2927066">typ</span><span class="op" id="2927069">.</span><span class="ident" id="2927070">ChanDir</span><span class="op" id="2927077">(</span><span class="op" id="2927078">)</span>&nbsp;<span class="op" id="2927080">!=</span>&nbsp;<span class="ident" id="2927083">BothDir</span>&nbsp;<span class="op" id="2927091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2927095">panic</span><span class="op" id="2927100">(</span><span class="string" id="2927101">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2927148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927154">ch</span>&nbsp;<span class="op" id="2927157">:=</span>&nbsp;<span class="ident" id="2927160">makechan</span><span class="op" id="2927168">(</span><span class="ident" id="2927169">typ</span><span class="op" id="2927172">.</span><span class="op" id="2927173">(</span><span class="op" id="2927174">*</span><span class="ident" id="2927175">rtype</span><span class="op" id="2927180">)</span><span class="op" id="2927181">,</span>&nbsp;<span class="builtintype" id="2927183">uint64</span><span class="op" id="2927189">(</span><span class="ident" id="2927190">buffer</span><span class="op" id="2927196">)</span><span class="op" id="2927197">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927200">return</span>&nbsp;<span class="ident" id="2927207">Value</span><span class="op" id="2927212">{</span><span class="ident" id="2927213">typ</span><span class="op" id="2927216">.</span><span class="ident" id="2927217">common</span><span class="op" id="2927223">(</span><span class="op" id="2927224">)</span><span class="op" id="2927225">,</span>&nbsp;<span class="ident" id="2927227">ch</span><span class="op" id="2927229">,</span>&nbsp;<span class="ident" id="2927231">flag</span><span class="op" id="2927235">(</span><span class="ident" id="2927236">Chan</span><span class="op" id="2927240">)</span><span class="op" id="2927241">}</span><br>
<span class="lineno"></span><span class="op" id="2927243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2927246">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2927298">func</span>&nbsp;<span class="ident" id="2927303">MakeMap</span><span class="op" id="2927310">(</span><span class="ident" id="2927311">typ</span>&nbsp;<span class="ident" id="2927315">Type</span><span class="op" id="2927319">)</span>&nbsp;<span class="ident" id="2927321">Value</span>&nbsp;<span class="op" id="2927327">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927330">if</span>&nbsp;<span class="ident" id="2927333">typ</span><span class="op" id="2927336">.</span><span class="ident" id="2927337">Kind</span><span class="op" id="2927341">(</span><span class="op" id="2927342">)</span>&nbsp;<span class="op" id="2927344">!=</span>&nbsp;<span class="ident" id="2927347">Map</span>&nbsp;<span class="op" id="2927351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2927355">panic</span><span class="op" id="2927360">(</span><span class="string" id="2927361">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2927394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927400">m</span>&nbsp;<span class="op" id="2927402">:=</span>&nbsp;<span class="ident" id="2927405">makemap</span><span class="op" id="2927412">(</span><span class="ident" id="2927413">typ</span><span class="op" id="2927416">.</span><span class="op" id="2927417">(</span><span class="op" id="2927418">*</span><span class="ident" id="2927419">rtype</span><span class="op" id="2927424">)</span><span class="op" id="2927425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927428">return</span>&nbsp;<span class="ident" id="2927435">Value</span><span class="op" id="2927440">{</span><span class="ident" id="2927441">typ</span><span class="op" id="2927444">.</span><span class="ident" id="2927445">common</span><span class="op" id="2927451">(</span><span class="op" id="2927452">)</span><span class="op" id="2927453">,</span>&nbsp;<span class="ident" id="2927455">m</span><span class="op" id="2927456">,</span>&nbsp;<span class="ident" id="2927458">flag</span><span class="op" id="2927462">(</span><span class="ident" id="2927463">Map</span><span class="op" id="2927466">)</span><span class="op" id="2927467">}</span><br>
<span class="lineno">2030</span><span class="op" id="2927469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2927472">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2927520">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2927577">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2927623">func</span>&nbsp;<span class="ident" id="2927628">Indirect</span><span class="op" id="2927636">(</span><span class="ident" id="2927637">v</span>&nbsp;<span class="ident" id="2927639">Value</span><span class="op" id="2927644">)</span>&nbsp;<span class="ident" id="2927646">Value</span>&nbsp;<span class="op" id="2927652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927655">if</span>&nbsp;<span class="ident" id="2927658">v</span><span class="op" id="2927659">.</span><span class="ident" id="2927660">Kind</span><span class="op" id="2927664">(</span><span class="op" id="2927665">)</span>&nbsp;<span class="op" id="2927667">!=</span>&nbsp;<span class="ident" id="2927670">Ptr</span>&nbsp;<span class="op" id="2927674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927678">return</span>&nbsp;<span class="ident" id="2927685">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927691">return</span>&nbsp;<span class="ident" id="2927698">v</span><span class="op" id="2927699">.</span><span class="ident" id="2927700">Elem</span><span class="op" id="2927704">(</span><span class="op" id="2927705">)</span><br>
<span class="lineno">2040</span><span class="op" id="2927707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2927710">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2927775">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2927843">func</span>&nbsp;<span class="ident" id="2927848">ValueOf</span><span class="op" id="2927855">(</span><span class="ident" id="2927856">i</span>&nbsp;<span class="keyword" id="2927858">interface</span><span class="op" id="2927867">{</span><span class="op" id="2927868">}</span><span class="op" id="2927869">)</span>&nbsp;<span class="ident" id="2927871">Value</span>&nbsp;<span class="op" id="2927877">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927880">if</span>&nbsp;<span class="ident" id="2927883">i</span>&nbsp;<span class="op" id="2927885">==</span>&nbsp;<span class="builtintype" id="2927888">nil</span>&nbsp;<span class="op" id="2927892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927896">return</span>&nbsp;<span class="ident" id="2927903">Value</span><span class="op" id="2927908">{</span><span class="op" id="2927909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2927916">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2927961">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2928015">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2928063">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2928106">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928148">escapes</span><span class="op" id="2928155">(</span><span class="ident" id="2928156">i</span><span class="op" id="2928157">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928161">return</span>&nbsp;<span class="ident" id="2928168">unpackEface</span><span class="op" id="2928179">(</span><span class="ident" id="2928180">i</span><span class="op" id="2928181">)</span><br>
<span class="lineno"></span><span class="op" id="2928183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2928186">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2928262">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2928330">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2928367">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2928443">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2928502">func</span>&nbsp;<span class="ident" id="2928507">Zero</span><span class="op" id="2928511">(</span><span class="ident" id="2928512">typ</span>&nbsp;<span class="ident" id="2928516">Type</span><span class="op" id="2928520">)</span>&nbsp;<span class="ident" id="2928522">Value</span>&nbsp;<span class="op" id="2928528">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928531">if</span>&nbsp;<span class="ident" id="2928534">typ</span>&nbsp;<span class="op" id="2928538">==</span>&nbsp;<span class="builtintype" id="2928541">nil</span>&nbsp;<span class="op" id="2928545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2928549">panic</span><span class="op" id="2928554">(</span><span class="string" id="2928555">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2928575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928581">t</span>&nbsp;<span class="op" id="2928583">:=</span>&nbsp;<span class="ident" id="2928586">typ</span><span class="op" id="2928589">.</span><span class="ident" id="2928590">common</span><span class="op" id="2928596">(</span><span class="op" id="2928597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928600">fl</span>&nbsp;<span class="op" id="2928603">:=</span>&nbsp;<span class="ident" id="2928606">flag</span><span class="op" id="2928610">(</span><span class="ident" id="2928611">t</span><span class="op" id="2928612">.</span><span class="ident" id="2928613">Kind</span><span class="op" id="2928617">(</span><span class="op" id="2928618">)</span><span class="op" id="2928619">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928622">if</span>&nbsp;<span class="ident" id="2928625">ifaceIndir</span><span class="op" id="2928635">(</span><span class="ident" id="2928636">t</span><span class="op" id="2928637">)</span>&nbsp;<span class="op" id="2928639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928643">return</span>&nbsp;<span class="ident" id="2928650">Value</span><span class="op" id="2928655">{</span><span class="ident" id="2928656">t</span><span class="op" id="2928657">,</span>&nbsp;<span class="ident" id="2928659">unsafe_New</span><span class="op" id="2928669">(</span><span class="ident" id="2928670">typ</span><span class="op" id="2928673">.</span><span class="op" id="2928674">(</span><span class="op" id="2928675">*</span><span class="ident" id="2928676">rtype</span><span class="op" id="2928681">)</span><span class="op" id="2928682">)</span><span class="op" id="2928683">,</span>&nbsp;<span class="ident" id="2928685">fl</span>&nbsp;<span class="op" id="2928688">|</span>&nbsp;<span class="ident" id="2928690">flagIndir</span><span class="op" id="2928699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928705">return</span>&nbsp;<span class="ident" id="2928712">Value</span><span class="op" id="2928717">{</span><span class="ident" id="2928718">t</span><span class="op" id="2928719">,</span>&nbsp;<span class="builtintype" id="2928721">nil</span><span class="op" id="2928724">,</span>&nbsp;<span class="ident" id="2928726">fl</span><span class="op" id="2928728">}</span><br>
<span class="lineno"></span><span class="op" id="2928730">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2928733">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2928799">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2928877">func</span>&nbsp;<span class="ident" id="2928882">New</span><span class="op" id="2928885">(</span><span class="ident" id="2928886">typ</span>&nbsp;<span class="ident" id="2928890">Type</span><span class="op" id="2928894">)</span>&nbsp;<span class="ident" id="2928896">Value</span>&nbsp;<span class="op" id="2928902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928905">if</span>&nbsp;<span class="ident" id="2928908">typ</span>&nbsp;<span class="op" id="2928912">==</span>&nbsp;<span class="builtintype" id="2928915">nil</span>&nbsp;<span class="op" id="2928919">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2928923">panic</span><span class="op" id="2928928">(</span><span class="string" id="2928929">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2928948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928954">ptr</span>&nbsp;<span class="op" id="2928958">:=</span>&nbsp;<span class="ident" id="2928961">unsafe_New</span><span class="op" id="2928971">(</span><span class="ident" id="2928972">typ</span><span class="op" id="2928975">.</span><span class="op" id="2928976">(</span><span class="op" id="2928977">*</span><span class="ident" id="2928978">rtype</span><span class="op" id="2928983">)</span><span class="op" id="2928984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928987">fl</span>&nbsp;<span class="op" id="2928990">:=</span>&nbsp;<span class="ident" id="2928993">flag</span><span class="op" id="2928997">(</span><span class="ident" id="2928998">Ptr</span><span class="op" id="2929001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929004">return</span>&nbsp;<span class="ident" id="2929011">Value</span><span class="op" id="2929016">{</span><span class="ident" id="2929017">typ</span><span class="op" id="2929020">.</span><span class="ident" id="2929021">common</span><span class="op" id="2929027">(</span><span class="op" id="2929028">)</span><span class="op" id="2929029">.</span><span class="ident" id="2929030">ptrTo</span><span class="op" id="2929035">(</span><span class="op" id="2929036">)</span><span class="op" id="2929037">,</span>&nbsp;<span class="ident" id="2929039">ptr</span><span class="op" id="2929042">,</span>&nbsp;<span class="ident" id="2929044">fl</span><span class="op" id="2929046">}</span><br>
<span class="lineno">2085</span><span class="op" id="2929048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2929051">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2929117">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2929161">func</span>&nbsp;<span class="ident" id="2929166">NewAt</span><span class="op" id="2929171">(</span><span class="ident" id="2929172">typ</span>&nbsp;<span class="ident" id="2929176">Type</span><span class="op" id="2929180">,</span>&nbsp;<span class="ident" id="2929182">p</span>&nbsp;<span class="ident" id="2929184">unsafe</span><span class="op" id="2929190">.</span><span class="ident" id="2929191">Pointer</span><span class="op" id="2929198">)</span>&nbsp;<span class="ident" id="2929200">Value</span>&nbsp;<span class="op" id="2929206">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929209">fl</span>&nbsp;<span class="op" id="2929212">:=</span>&nbsp;<span class="ident" id="2929215">flag</span><span class="op" id="2929219">(</span><span class="ident" id="2929220">Ptr</span><span class="op" id="2929223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929226">return</span>&nbsp;<span class="ident" id="2929233">Value</span><span class="op" id="2929238">{</span><span class="ident" id="2929239">typ</span><span class="op" id="2929242">.</span><span class="ident" id="2929243">common</span><span class="op" id="2929249">(</span><span class="op" id="2929250">)</span><span class="op" id="2929251">.</span><span class="ident" id="2929252">ptrTo</span><span class="op" id="2929257">(</span><span class="op" id="2929258">)</span><span class="op" id="2929259">,</span>&nbsp;<span class="ident" id="2929261">p</span><span class="op" id="2929262">,</span>&nbsp;<span class="ident" id="2929264">fl</span><span class="op" id="2929266">}</span><br>
<span class="lineno"></span><span class="op" id="2929268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2929271">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2929339">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2929383">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2929469">func</span>&nbsp;<span class="op" id="2929474">(</span><span class="ident" id="2929475">v</span>&nbsp;<span class="ident" id="2929477">Value</span><span class="op" id="2929482">)</span>&nbsp;<span class="ident" id="2929484">assignTo</span><span class="op" id="2929492">(</span><span class="ident" id="2929493">context</span>&nbsp;<span class="builtintype" id="2929501">string</span><span class="op" id="2929507">,</span>&nbsp;<span class="ident" id="2929509">dst</span>&nbsp;<span class="op" id="2929513">*</span><span class="ident" id="2929514">rtype</span><span class="op" id="2929519">,</span>&nbsp;<span class="ident" id="2929521">target</span>&nbsp;<span class="ident" id="2929528">unsafe</span><span class="op" id="2929534">.</span><span class="ident" id="2929535">Pointer</span><span class="op" id="2929542">)</span>&nbsp;<span class="ident" id="2929544">Value</span>&nbsp;<span class="op" id="2929550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929553">if</span>&nbsp;<span class="ident" id="2929556">v</span><span class="op" id="2929557">.</span><span class="ident" id="2929558">flag</span><span class="op" id="2929562">&amp;</span><span class="ident" id="2929563">flagMethod</span>&nbsp;<span class="op" id="2929574">!=</span>&nbsp;<span class="num" id="2929577">0</span>&nbsp;<span class="op" id="2929579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929583">v</span>&nbsp;<span class="op" id="2929585">=</span>&nbsp;<span class="ident" id="2929587">makeMethodValue</span><span class="op" id="2929602">(</span><span class="ident" id="2929603">context</span><span class="op" id="2929610">,</span>&nbsp;<span class="ident" id="2929612">v</span><span class="op" id="2929613">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2929616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929620">switch</span>&nbsp;<span class="op" id="2929627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929630">case</span>&nbsp;<span class="ident" id="2929635">directlyAssignable</span><span class="op" id="2929653">(</span><span class="ident" id="2929654">dst</span><span class="op" id="2929657">,</span>&nbsp;<span class="ident" id="2929659">v</span><span class="op" id="2929660">.</span><span class="ident" id="2929661">typ</span><span class="op" id="2929664">)</span><span class="op" id="2929665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2929669">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2929709">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929751">v</span><span class="op" id="2929752">.</span><span class="ident" id="2929753">typ</span>&nbsp;<span class="op" id="2929757">=</span>&nbsp;<span class="ident" id="2929759">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929765">fl</span>&nbsp;<span class="op" id="2929768">:=</span>&nbsp;<span class="ident" id="2929771">v</span><span class="op" id="2929772">.</span><span class="ident" id="2929773">flag</span>&nbsp;<span class="op" id="2929778">&amp;</span>&nbsp;<span class="op" id="2929780">(</span><span class="ident" id="2929781">flagRO</span>&nbsp;<span class="op" id="2929788">|</span>&nbsp;<span class="ident" id="2929790">flagAddr</span>&nbsp;<span class="op" id="2929799">|</span>&nbsp;<span class="ident" id="2929801">flagIndir</span><span class="op" id="2929810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929814">fl</span>&nbsp;<span class="op" id="2929817">|=</span>&nbsp;<span class="ident" id="2929820">flag</span><span class="op" id="2929824">(</span><span class="ident" id="2929825">dst</span><span class="op" id="2929828">.</span><span class="ident" id="2929829">Kind</span><span class="op" id="2929833">(</span><span class="op" id="2929834">)</span><span class="op" id="2929835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929839">return</span>&nbsp;<span class="ident" id="2929846">Value</span><span class="op" id="2929851">{</span><span class="ident" id="2929852">dst</span><span class="op" id="2929855">,</span>&nbsp;<span class="ident" id="2929857">v</span><span class="op" id="2929858">.</span><span class="ident" id="2929859">ptr</span><span class="op" id="2929862">,</span>&nbsp;<span class="ident" id="2929864">fl</span><span class="op" id="2929866">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929870">case</span>&nbsp;<span class="ident" id="2929875">implements</span><span class="op" id="2929885">(</span><span class="ident" id="2929886">dst</span><span class="op" id="2929889">,</span>&nbsp;<span class="ident" id="2929891">v</span><span class="op" id="2929892">.</span><span class="ident" id="2929893">typ</span><span class="op" id="2929896">)</span><span class="op" id="2929897">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929901">if</span>&nbsp;<span class="ident" id="2929904">target</span>&nbsp;<span class="op" id="2929911">==</span>&nbsp;<span class="builtintype" id="2929914">nil</span>&nbsp;<span class="op" id="2929918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929923">target</span>&nbsp;<span class="op" id="2929930">=</span>&nbsp;<span class="ident" id="2929932">unsafe_New</span><span class="op" id="2929942">(</span><span class="ident" id="2929943">dst</span><span class="op" id="2929946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2929950">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2929954">x</span>&nbsp;<span class="op" id="2929956">:=</span>&nbsp;<span class="ident" id="2929959">valueInterface</span><span class="op" id="2929973">(</span><span class="ident" id="2929974">v</span><span class="op" id="2929975">,</span>&nbsp;<span class="builtintype" id="2929977">false</span><span class="op" id="2929982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2929986">if</span>&nbsp;<span class="ident" id="2929989">dst</span><span class="op" id="2929992">.</span><span class="ident" id="2929993">NumMethod</span><span class="op" id="2930002">(</span><span class="op" id="2930003">)</span>&nbsp;<span class="op" id="2930005">==</span>&nbsp;<span class="num" id="2930008">0</span>&nbsp;<span class="op" id="2930010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930015">*</span><span class="op" id="2930016">(</span><span class="op" id="2930017">*</span><span class="keyword" id="2930018">interface</span><span class="op" id="2930027">{</span><span class="op" id="2930028">}</span><span class="op" id="2930029">)</span><span class="op" id="2930030">(</span><span class="ident" id="2930031">target</span><span class="op" id="2930037">)</span>&nbsp;<span class="op" id="2930039">=</span>&nbsp;<span class="ident" id="2930041">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930045">}</span>&nbsp;<span class="keyword" id="2930047">else</span>&nbsp;<span class="op" id="2930052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2930057">ifaceE2I</span><span class="op" id="2930065">(</span><span class="ident" id="2930066">dst</span><span class="op" id="2930069">,</span>&nbsp;<span class="ident" id="2930071">x</span><span class="op" id="2930072">,</span>&nbsp;<span class="ident" id="2930074">target</span><span class="op" id="2930080">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930088">return</span>&nbsp;<span class="ident" id="2930095">Value</span><span class="op" id="2930100">{</span><span class="ident" id="2930101">dst</span><span class="op" id="2930104">,</span>&nbsp;<span class="ident" id="2930106">target</span><span class="op" id="2930112">,</span>&nbsp;<span class="ident" id="2930114">flagIndir</span>&nbsp;<span class="op" id="2930124">|</span>&nbsp;<span class="ident" id="2930126">flag</span><span class="op" id="2930130">(</span><span class="ident" id="2930131">Interface</span><span class="op" id="2930140">)</span><span class="op" id="2930141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2930148">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2930160">panic</span><span class="op" id="2930165">(</span><span class="ident" id="2930166">context</span>&nbsp;<span class="op" id="2930174">+</span>&nbsp;<span class="string" id="2930176">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2930195">+</span>&nbsp;<span class="ident" id="2930197">v</span><span class="op" id="2930198">.</span><span class="ident" id="2930199">typ</span><span class="op" id="2930202">.</span><span class="ident" id="2930203">String</span><span class="op" id="2930209">(</span><span class="op" id="2930210">)</span>&nbsp;<span class="op" id="2930212">+</span>&nbsp;<span class="string" id="2930214">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2930244">+</span>&nbsp;<span class="ident" id="2930246">dst</span><span class="op" id="2930249">.</span><span class="ident" id="2930250">String</span><span class="op" id="2930256">(</span><span class="op" id="2930257">)</span><span class="op" id="2930258">)</span><br>
<span class="lineno"></span><span class="op" id="2930260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930263">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2930315">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2930375">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2930420">func</span>&nbsp;<span class="op" id="2930425">(</span><span class="ident" id="2930426">v</span>&nbsp;<span class="ident" id="2930428">Value</span><span class="op" id="2930433">)</span>&nbsp;<span class="ident" id="2930435">Convert</span><span class="op" id="2930442">(</span><span class="ident" id="2930443">t</span>&nbsp;<span class="ident" id="2930445">Type</span><span class="op" id="2930449">)</span>&nbsp;<span class="ident" id="2930451">Value</span>&nbsp;<span class="op" id="2930457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930460">if</span>&nbsp;<span class="ident" id="2930463">v</span><span class="op" id="2930464">.</span><span class="ident" id="2930465">flag</span><span class="op" id="2930469">&amp;</span><span class="ident" id="2930470">flagMethod</span>&nbsp;<span class="op" id="2930481">!=</span>&nbsp;<span class="num" id="2930484">0</span>&nbsp;<span class="op" id="2930486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2930490">v</span>&nbsp;<span class="op" id="2930492">=</span>&nbsp;<span class="ident" id="2930494">makeMethodValue</span><span class="op" id="2930509">(</span><span class="string" id="2930510">&#34;Convert&#34;</span><span class="op" id="2930519">,</span>&nbsp;<span class="ident" id="2930521">v</span><span class="op" id="2930522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930525">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2930528">op</span>&nbsp;<span class="op" id="2930531">:=</span>&nbsp;<span class="ident" id="2930534">convertOp</span><span class="op" id="2930543">(</span><span class="ident" id="2930544">t</span><span class="op" id="2930545">.</span><span class="ident" id="2930546">common</span><span class="op" id="2930552">(</span><span class="op" id="2930553">)</span><span class="op" id="2930554">,</span>&nbsp;<span class="ident" id="2930556">v</span><span class="op" id="2930557">.</span><span class="ident" id="2930558">typ</span><span class="op" id="2930561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930564">if</span>&nbsp;<span class="ident" id="2930567">op</span>&nbsp;<span class="op" id="2930570">==</span>&nbsp;<span class="builtintype" id="2930573">nil</span>&nbsp;<span class="op" id="2930577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2930581">panic</span><span class="op" id="2930586">(</span><span class="string" id="2930587">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2930627">+</span>&nbsp;<span class="ident" id="2930629">v</span><span class="op" id="2930630">.</span><span class="ident" id="2930631">typ</span><span class="op" id="2930634">.</span><span class="ident" id="2930635">String</span><span class="op" id="2930641">(</span><span class="op" id="2930642">)</span>&nbsp;<span class="op" id="2930644">+</span>&nbsp;<span class="string" id="2930646">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2930678">+</span>&nbsp;<span class="ident" id="2930680">t</span><span class="op" id="2930681">.</span><span class="ident" id="2930682">String</span><span class="op" id="2930688">(</span><span class="op" id="2930689">)</span><span class="op" id="2930690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2930693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930696">return</span>&nbsp;<span class="ident" id="2930703">op</span><span class="op" id="2930705">(</span><span class="ident" id="2930706">v</span><span class="op" id="2930707">,</span>&nbsp;<span class="ident" id="2930709">t</span><span class="op" id="2930710">)</span><br>
<span class="lineno">2140</span><span class="op" id="2930712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2930715">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2930780">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2930860">func</span>&nbsp;<span class="ident" id="2930865">convertOp</span><span class="op" id="2930874">(</span><span class="ident" id="2930875">dst</span><span class="op" id="2930878">,</span>&nbsp;<span class="ident" id="2930880">src</span>&nbsp;<span class="op" id="2930884">*</span><span class="ident" id="2930885">rtype</span><span class="op" id="2930890">)</span>&nbsp;<span class="keyword" id="2930892">func</span><span class="op" id="2930896">(</span><span class="ident" id="2930897">Value</span><span class="op" id="2930902">,</span>&nbsp;<span class="ident" id="2930904">Type</span><span class="op" id="2930908">)</span>&nbsp;<span class="ident" id="2930910">Value</span>&nbsp;<span class="op" id="2930916">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930919">switch</span>&nbsp;<span class="ident" id="2930926">src</span><span class="op" id="2930929">.</span><span class="ident" id="2930930">Kind</span><span class="op" id="2930934">(</span><span class="op" id="2930935">)</span>&nbsp;<span class="op" id="2930937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930940">case</span>&nbsp;<span class="ident" id="2930945">Int</span><span class="op" id="2930948">,</span>&nbsp;<span class="ident" id="2930950">Int8</span><span class="op" id="2930954">,</span>&nbsp;<span class="ident" id="2930956">Int16</span><span class="op" id="2930961">,</span>&nbsp;<span class="ident" id="2930963">Int32</span><span class="op" id="2930968">,</span>&nbsp;<span class="ident" id="2930970">Int64</span><span class="op" id="2930975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2930979">switch</span>&nbsp;<span class="ident" id="2930986">dst</span><span class="op" id="2930989">.</span><span class="ident" id="2930990">Kind</span><span class="op" id="2930994">(</span><span class="op" id="2930995">)</span>&nbsp;<span class="op" id="2930997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931001">case</span>&nbsp;<span class="ident" id="2931006">Int</span><span class="op" id="2931009">,</span>&nbsp;<span class="ident" id="2931011">Int8</span><span class="op" id="2931015">,</span>&nbsp;<span class="ident" id="2931017">Int16</span><span class="op" id="2931022">,</span>&nbsp;<span class="ident" id="2931024">Int32</span><span class="op" id="2931029">,</span>&nbsp;<span class="ident" id="2931031">Int64</span><span class="op" id="2931036">,</span>&nbsp;<span class="ident" id="2931038">Uint</span><span class="op" id="2931042">,</span>&nbsp;<span class="ident" id="2931044">Uint8</span><span class="op" id="2931049">,</span>&nbsp;<span class="ident" id="2931051">Uint16</span><span class="op" id="2931057">,</span>&nbsp;<span class="ident" id="2931059">Uint32</span><span class="op" id="2931065">,</span>&nbsp;<span class="ident" id="2931067">Uint64</span><span class="op" id="2931073">,</span>&nbsp;<span class="ident" id="2931075">Uintptr</span><span class="op" id="2931082">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931087">return</span>&nbsp;<span class="ident" id="2931094">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931103">case</span>&nbsp;<span class="ident" id="2931108">Float32</span><span class="op" id="2931115">,</span>&nbsp;<span class="ident" id="2931117">Float64</span><span class="op" id="2931124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931129">return</span>&nbsp;<span class="ident" id="2931136">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931150">case</span>&nbsp;<span class="ident" id="2931155">String</span><span class="op" id="2931161">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931166">return</span>&nbsp;<span class="ident" id="2931173">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931188">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931192">case</span>&nbsp;<span class="ident" id="2931197">Uint</span><span class="op" id="2931201">,</span>&nbsp;<span class="ident" id="2931203">Uint8</span><span class="op" id="2931208">,</span>&nbsp;<span class="ident" id="2931210">Uint16</span><span class="op" id="2931216">,</span>&nbsp;<span class="ident" id="2931218">Uint32</span><span class="op" id="2931224">,</span>&nbsp;<span class="ident" id="2931226">Uint64</span><span class="op" id="2931232">,</span>&nbsp;<span class="ident" id="2931234">Uintptr</span><span class="op" id="2931241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931245">switch</span>&nbsp;<span class="ident" id="2931252">dst</span><span class="op" id="2931255">.</span><span class="ident" id="2931256">Kind</span><span class="op" id="2931260">(</span><span class="op" id="2931261">)</span>&nbsp;<span class="op" id="2931263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931267">case</span>&nbsp;<span class="ident" id="2931272">Int</span><span class="op" id="2931275">,</span>&nbsp;<span class="ident" id="2931277">Int8</span><span class="op" id="2931281">,</span>&nbsp;<span class="ident" id="2931283">Int16</span><span class="op" id="2931288">,</span>&nbsp;<span class="ident" id="2931290">Int32</span><span class="op" id="2931295">,</span>&nbsp;<span class="ident" id="2931297">Int64</span><span class="op" id="2931302">,</span>&nbsp;<span class="ident" id="2931304">Uint</span><span class="op" id="2931308">,</span>&nbsp;<span class="ident" id="2931310">Uint8</span><span class="op" id="2931315">,</span>&nbsp;<span class="ident" id="2931317">Uint16</span><span class="op" id="2931323">,</span>&nbsp;<span class="ident" id="2931325">Uint32</span><span class="op" id="2931331">,</span>&nbsp;<span class="ident" id="2931333">Uint64</span><span class="op" id="2931339">,</span>&nbsp;<span class="ident" id="2931341">Uintptr</span><span class="op" id="2931348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931353">return</span>&nbsp;<span class="ident" id="2931360">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931370">case</span>&nbsp;<span class="ident" id="2931375">Float32</span><span class="op" id="2931382">,</span>&nbsp;<span class="ident" id="2931384">Float64</span><span class="op" id="2931391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931396">return</span>&nbsp;<span class="ident" id="2931403">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931418">case</span>&nbsp;<span class="ident" id="2931423">String</span><span class="op" id="2931429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931434">return</span>&nbsp;<span class="ident" id="2931441">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931457">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931461">case</span>&nbsp;<span class="ident" id="2931466">Float32</span><span class="op" id="2931473">,</span>&nbsp;<span class="ident" id="2931475">Float64</span><span class="op" id="2931482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931486">switch</span>&nbsp;<span class="ident" id="2931493">dst</span><span class="op" id="2931496">.</span><span class="ident" id="2931497">Kind</span><span class="op" id="2931501">(</span><span class="op" id="2931502">)</span>&nbsp;<span class="op" id="2931504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931508">case</span>&nbsp;<span class="ident" id="2931513">Int</span><span class="op" id="2931516">,</span>&nbsp;<span class="ident" id="2931518">Int8</span><span class="op" id="2931522">,</span>&nbsp;<span class="ident" id="2931524">Int16</span><span class="op" id="2931529">,</span>&nbsp;<span class="ident" id="2931531">Int32</span><span class="op" id="2931536">,</span>&nbsp;<span class="ident" id="2931538">Int64</span><span class="op" id="2931543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931548">return</span>&nbsp;<span class="ident" id="2931555">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931569">case</span>&nbsp;<span class="ident" id="2931574">Uint</span><span class="op" id="2931578">,</span>&nbsp;<span class="ident" id="2931580">Uint8</span><span class="op" id="2931585">,</span>&nbsp;<span class="ident" id="2931587">Uint16</span><span class="op" id="2931593">,</span>&nbsp;<span class="ident" id="2931595">Uint32</span><span class="op" id="2931601">,</span>&nbsp;<span class="ident" id="2931603">Uint64</span><span class="op" id="2931609">,</span>&nbsp;<span class="ident" id="2931611">Uintptr</span><span class="op" id="2931618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931623">return</span>&nbsp;<span class="ident" id="2931630">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931645">case</span>&nbsp;<span class="ident" id="2931650">Float32</span><span class="op" id="2931657">,</span>&nbsp;<span class="ident" id="2931659">Float64</span><span class="op" id="2931666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931671">return</span>&nbsp;<span class="ident" id="2931678">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931689">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931693">case</span>&nbsp;<span class="ident" id="2931698">Complex64</span><span class="op" id="2931707">,</span>&nbsp;<span class="ident" id="2931709">Complex128</span><span class="op" id="2931719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931723">switch</span>&nbsp;<span class="ident" id="2931730">dst</span><span class="op" id="2931733">.</span><span class="ident" id="2931734">Kind</span><span class="op" id="2931738">(</span><span class="op" id="2931739">)</span>&nbsp;<span class="op" id="2931741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931745">case</span>&nbsp;<span class="ident" id="2931750">Complex64</span><span class="op" id="2931759">,</span>&nbsp;<span class="ident" id="2931761">Complex128</span><span class="op" id="2931771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931776">return</span>&nbsp;<span class="ident" id="2931783">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931800">case</span>&nbsp;<span class="ident" id="2931805">String</span><span class="op" id="2931811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931815">if</span>&nbsp;<span class="ident" id="2931818">dst</span><span class="op" id="2931821">.</span><span class="ident" id="2931822">Kind</span><span class="op" id="2931826">(</span><span class="op" id="2931827">)</span>&nbsp;<span class="op" id="2931829">==</span>&nbsp;<span class="ident" id="2931832">Slice</span>&nbsp;<span class="op" id="2931838">&amp;&amp;</span>&nbsp;<span class="ident" id="2931841">dst</span><span class="op" id="2931844">.</span><span class="ident" id="2931845">Elem</span><span class="op" id="2931849">(</span><span class="op" id="2931850">)</span><span class="op" id="2931851">.</span><span class="ident" id="2931852">PkgPath</span><span class="op" id="2931859">(</span><span class="op" id="2931860">)</span>&nbsp;<span class="op" id="2931862">==</span>&nbsp;<span class="string" id="2931865">&#34;&#34;</span>&nbsp;<span class="op" id="2931868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931873">switch</span>&nbsp;<span class="ident" id="2931880">dst</span><span class="op" id="2931883">.</span><span class="ident" id="2931884">Elem</span><span class="op" id="2931888">(</span><span class="op" id="2931889">)</span><span class="op" id="2931890">.</span><span class="ident" id="2931891">Kind</span><span class="op" id="2931895">(</span><span class="op" id="2931896">)</span>&nbsp;<span class="op" id="2931898">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931903">case</span>&nbsp;<span class="ident" id="2931908">Uint8</span><span class="op" id="2931913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931919">return</span>&nbsp;<span class="ident" id="2931926">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931944">case</span>&nbsp;<span class="ident" id="2931949">Int32</span><span class="op" id="2931954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931960">return</span>&nbsp;<span class="ident" id="2931967">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931985">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2931989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2931993">case</span>&nbsp;<span class="ident" id="2931998">Slice</span><span class="op" id="2932003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932007">if</span>&nbsp;<span class="ident" id="2932010">dst</span><span class="op" id="2932013">.</span><span class="ident" id="2932014">Kind</span><span class="op" id="2932018">(</span><span class="op" id="2932019">)</span>&nbsp;<span class="op" id="2932021">==</span>&nbsp;<span class="ident" id="2932024">String</span>&nbsp;<span class="op" id="2932031">&amp;&amp;</span>&nbsp;<span class="ident" id="2932034">src</span><span class="op" id="2932037">.</span><span class="ident" id="2932038">Elem</span><span class="op" id="2932042">(</span><span class="op" id="2932043">)</span><span class="op" id="2932044">.</span><span class="ident" id="2932045">PkgPath</span><span class="op" id="2932052">(</span><span class="op" id="2932053">)</span>&nbsp;<span class="op" id="2932055">==</span>&nbsp;<span class="string" id="2932058">&#34;&#34;</span>&nbsp;<span class="op" id="2932061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932066">switch</span>&nbsp;<span class="ident" id="2932073">src</span><span class="op" id="2932076">.</span><span class="ident" id="2932077">Elem</span><span class="op" id="2932081">(</span><span class="op" id="2932082">)</span><span class="op" id="2932083">.</span><span class="ident" id="2932084">Kind</span><span class="op" id="2932088">(</span><span class="op" id="2932089">)</span>&nbsp;<span class="op" id="2932091">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932096">case</span>&nbsp;<span class="ident" id="2932101">Uint8</span><span class="op" id="2932106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932112">return</span>&nbsp;<span class="ident" id="2932119">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932137">case</span>&nbsp;<span class="ident" id="2932142">Int32</span><span class="op" id="2932147">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932153">return</span>&nbsp;<span class="ident" id="2932160">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932178">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2932189">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932232">if</span>&nbsp;<span class="ident" id="2932235">haveIdenticalUnderlyingType</span><span class="op" id="2932262">(</span><span class="ident" id="2932263">dst</span><span class="op" id="2932266">,</span>&nbsp;<span class="ident" id="2932268">src</span><span class="op" id="2932271">)</span>&nbsp;<span class="op" id="2932273">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932277">return</span>&nbsp;<span class="ident" id="2932284">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2932299">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932373">if</span>&nbsp;<span class="ident" id="2932376">dst</span><span class="op" id="2932379">.</span><span class="ident" id="2932380">Kind</span><span class="op" id="2932384">(</span><span class="op" id="2932385">)</span>&nbsp;<span class="op" id="2932387">==</span>&nbsp;<span class="ident" id="2932390">Ptr</span>&nbsp;<span class="op" id="2932394">&amp;&amp;</span>&nbsp;<span class="ident" id="2932397">dst</span><span class="op" id="2932400">.</span><span class="ident" id="2932401">Name</span><span class="op" id="2932405">(</span><span class="op" id="2932406">)</span>&nbsp;<span class="op" id="2932408">==</span>&nbsp;<span class="string" id="2932411">&#34;&#34;</span>&nbsp;<span class="op" id="2932414">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2932419">src</span><span class="op" id="2932422">.</span><span class="ident" id="2932423">Kind</span><span class="op" id="2932427">(</span><span class="op" id="2932428">)</span>&nbsp;<span class="op" id="2932430">==</span>&nbsp;<span class="ident" id="2932433">Ptr</span>&nbsp;<span class="op" id="2932437">&amp;&amp;</span>&nbsp;<span class="ident" id="2932440">src</span><span class="op" id="2932443">.</span><span class="ident" id="2932444">Name</span><span class="op" id="2932448">(</span><span class="op" id="2932449">)</span>&nbsp;<span class="op" id="2932451">==</span>&nbsp;<span class="string" id="2932454">&#34;&#34;</span>&nbsp;<span class="op" id="2932457">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2932462">haveIdenticalUnderlyingType</span><span class="op" id="2932489">(</span><span class="ident" id="2932490">dst</span><span class="op" id="2932493">.</span><span class="ident" id="2932494">Elem</span><span class="op" id="2932498">(</span><span class="op" id="2932499">)</span><span class="op" id="2932500">.</span><span class="ident" id="2932501">common</span><span class="op" id="2932507">(</span><span class="op" id="2932508">)</span><span class="op" id="2932509">,</span>&nbsp;<span class="ident" id="2932511">src</span><span class="op" id="2932514">.</span><span class="ident" id="2932515">Elem</span><span class="op" id="2932519">(</span><span class="op" id="2932520">)</span><span class="op" id="2932521">.</span><span class="ident" id="2932522">common</span><span class="op" id="2932528">(</span><span class="op" id="2932529">)</span><span class="op" id="2932530">)</span>&nbsp;<span class="op" id="2932532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932536">return</span>&nbsp;<span class="ident" id="2932543">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932558">if</span>&nbsp;<span class="ident" id="2932561">implements</span><span class="op" id="2932571">(</span><span class="ident" id="2932572">dst</span><span class="op" id="2932575">,</span>&nbsp;<span class="ident" id="2932577">src</span><span class="op" id="2932580">)</span>&nbsp;<span class="op" id="2932582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932586">if</span>&nbsp;<span class="ident" id="2932589">src</span><span class="op" id="2932592">.</span><span class="ident" id="2932593">Kind</span><span class="op" id="2932597">(</span><span class="op" id="2932598">)</span>&nbsp;<span class="op" id="2932600">==</span>&nbsp;<span class="ident" id="2932603">Interface</span>&nbsp;<span class="op" id="2932613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932618">return</span>&nbsp;<span class="ident" id="2932625">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932638">return</span>&nbsp;<span class="ident" id="2932645">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932657">return</span>&nbsp;<span class="builtintype" id="2932664">nil</span><br>
<span class="lineno"></span><span class="op" id="2932668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2932671">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2932744">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2932789">func</span>&nbsp;<span class="ident" id="2932794">makeInt</span><span class="op" id="2932801">(</span><span class="ident" id="2932802">f</span>&nbsp;<span class="ident" id="2932804">flag</span><span class="op" id="2932808">,</span>&nbsp;<span class="ident" id="2932810">bits</span>&nbsp;<span class="builtintype" id="2932815">uint64</span><span class="op" id="2932821">,</span>&nbsp;<span class="ident" id="2932823">t</span>&nbsp;<span class="ident" id="2932825">Type</span><span class="op" id="2932829">)</span>&nbsp;<span class="ident" id="2932831">Value</span>&nbsp;<span class="op" id="2932837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2932840">typ</span>&nbsp;<span class="op" id="2932844">:=</span>&nbsp;<span class="ident" id="2932847">t</span><span class="op" id="2932848">.</span><span class="ident" id="2932849">common</span><span class="op" id="2932855">(</span><span class="op" id="2932856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2932859">ptr</span>&nbsp;<span class="op" id="2932863">:=</span>&nbsp;<span class="ident" id="2932866">unsafe_New</span><span class="op" id="2932876">(</span><span class="ident" id="2932877">typ</span><span class="op" id="2932880">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932883">switch</span>&nbsp;<span class="ident" id="2932890">typ</span><span class="op" id="2932893">.</span><span class="ident" id="2932894">size</span>&nbsp;<span class="op" id="2932899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932902">case</span>&nbsp;<span class="num" id="2932907">1</span><span class="op" id="2932908">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932912">*</span><span class="op" id="2932913">(</span><span class="op" id="2932914">*</span><span class="builtintype" id="2932915">uint8</span><span class="op" id="2932920">)</span><span class="op" id="2932921">(</span><span class="ident" id="2932922">unsafe</span><span class="op" id="2932928">.</span><span class="ident" id="2932929">Pointer</span><span class="op" id="2932936">(</span><span class="ident" id="2932937">ptr</span><span class="op" id="2932940">)</span><span class="op" id="2932941">)</span>&nbsp;<span class="op" id="2932943">=</span>&nbsp;<span class="builtintype" id="2932945">uint8</span><span class="op" id="2932950">(</span><span class="ident" id="2932951">bits</span><span class="op" id="2932955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2932958">case</span>&nbsp;<span class="num" id="2932963">2</span><span class="op" id="2932964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2932968">*</span><span class="op" id="2932969">(</span><span class="op" id="2932970">*</span><span class="builtintype" id="2932971">uint16</span><span class="op" id="2932977">)</span><span class="op" id="2932978">(</span><span class="ident" id="2932979">unsafe</span><span class="op" id="2932985">.</span><span class="ident" id="2932986">Pointer</span><span class="op" id="2932993">(</span><span class="ident" id="2932994">ptr</span><span class="op" id="2932997">)</span><span class="op" id="2932998">)</span>&nbsp;<span class="op" id="2933000">=</span>&nbsp;<span class="builtintype" id="2933002">uint16</span><span class="op" id="2933008">(</span><span class="ident" id="2933009">bits</span><span class="op" id="2933013">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933016">case</span>&nbsp;<span class="num" id="2933021">4</span><span class="op" id="2933022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933026">*</span><span class="op" id="2933027">(</span><span class="op" id="2933028">*</span><span class="builtintype" id="2933029">uint32</span><span class="op" id="2933035">)</span><span class="op" id="2933036">(</span><span class="ident" id="2933037">unsafe</span><span class="op" id="2933043">.</span><span class="ident" id="2933044">Pointer</span><span class="op" id="2933051">(</span><span class="ident" id="2933052">ptr</span><span class="op" id="2933055">)</span><span class="op" id="2933056">)</span>&nbsp;<span class="op" id="2933058">=</span>&nbsp;<span class="builtintype" id="2933060">uint32</span><span class="op" id="2933066">(</span><span class="ident" id="2933067">bits</span><span class="op" id="2933071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933074">case</span>&nbsp;<span class="num" id="2933079">8</span><span class="op" id="2933080">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933084">*</span><span class="op" id="2933085">(</span><span class="op" id="2933086">*</span><span class="builtintype" id="2933087">uint64</span><span class="op" id="2933093">)</span><span class="op" id="2933094">(</span><span class="ident" id="2933095">unsafe</span><span class="op" id="2933101">.</span><span class="ident" id="2933102">Pointer</span><span class="op" id="2933109">(</span><span class="ident" id="2933110">ptr</span><span class="op" id="2933113">)</span><span class="op" id="2933114">)</span>&nbsp;<span class="op" id="2933116">=</span>&nbsp;<span class="ident" id="2933118">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933124">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933127">return</span>&nbsp;<span class="ident" id="2933134">Value</span><span class="op" id="2933139">{</span><span class="ident" id="2933140">typ</span><span class="op" id="2933143">,</span>&nbsp;<span class="ident" id="2933145">ptr</span><span class="op" id="2933148">,</span>&nbsp;<span class="ident" id="2933150">f</span>&nbsp;<span class="op" id="2933152">|</span>&nbsp;<span class="ident" id="2933154">flagIndir</span>&nbsp;<span class="op" id="2933164">|</span>&nbsp;<span class="ident" id="2933166">flag</span><span class="op" id="2933170">(</span><span class="ident" id="2933171">typ</span><span class="op" id="2933174">.</span><span class="ident" id="2933175">Kind</span><span class="op" id="2933179">(</span><span class="op" id="2933180">)</span><span class="op" id="2933181">)</span><span class="op" id="2933182">}</span><br>
<span class="lineno"></span><span class="op" id="2933184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933187">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2933270">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2933311">func</span>&nbsp;<span class="ident" id="2933316">makeFloat</span><span class="op" id="2933325">(</span><span class="ident" id="2933326">f</span>&nbsp;<span class="ident" id="2933328">flag</span><span class="op" id="2933332">,</span>&nbsp;<span class="ident" id="2933334">v</span>&nbsp;<span class="builtintype" id="2933336">float64</span><span class="op" id="2933343">,</span>&nbsp;<span class="ident" id="2933345">t</span>&nbsp;<span class="ident" id="2933347">Type</span><span class="op" id="2933351">)</span>&nbsp;<span class="ident" id="2933353">Value</span>&nbsp;<span class="op" id="2933359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933362">typ</span>&nbsp;<span class="op" id="2933366">:=</span>&nbsp;<span class="ident" id="2933369">t</span><span class="op" id="2933370">.</span><span class="ident" id="2933371">common</span><span class="op" id="2933377">(</span><span class="op" id="2933378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933381">ptr</span>&nbsp;<span class="op" id="2933385">:=</span>&nbsp;<span class="ident" id="2933388">unsafe_New</span><span class="op" id="2933398">(</span><span class="ident" id="2933399">typ</span><span class="op" id="2933402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933405">switch</span>&nbsp;<span class="ident" id="2933412">typ</span><span class="op" id="2933415">.</span><span class="ident" id="2933416">size</span>&nbsp;<span class="op" id="2933421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933424">case</span>&nbsp;<span class="num" id="2933429">4</span><span class="op" id="2933430">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933434">*</span><span class="op" id="2933435">(</span><span class="op" id="2933436">*</span><span class="builtintype" id="2933437">float32</span><span class="op" id="2933444">)</span><span class="op" id="2933445">(</span><span class="ident" id="2933446">unsafe</span><span class="op" id="2933452">.</span><span class="ident" id="2933453">Pointer</span><span class="op" id="2933460">(</span><span class="ident" id="2933461">ptr</span><span class="op" id="2933464">)</span><span class="op" id="2933465">)</span>&nbsp;<span class="op" id="2933467">=</span>&nbsp;<span class="builtintype" id="2933469">float32</span><span class="op" id="2933476">(</span><span class="ident" id="2933477">v</span><span class="op" id="2933478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933481">case</span>&nbsp;<span class="num" id="2933486">8</span><span class="op" id="2933487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933491">*</span><span class="op" id="2933492">(</span><span class="op" id="2933493">*</span><span class="builtintype" id="2933494">float64</span><span class="op" id="2933501">)</span><span class="op" id="2933502">(</span><span class="ident" id="2933503">unsafe</span><span class="op" id="2933509">.</span><span class="ident" id="2933510">Pointer</span><span class="op" id="2933517">(</span><span class="ident" id="2933518">ptr</span><span class="op" id="2933521">)</span><span class="op" id="2933522">)</span>&nbsp;<span class="op" id="2933524">=</span>&nbsp;<span class="ident" id="2933526">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933532">return</span>&nbsp;<span class="ident" id="2933539">Value</span><span class="op" id="2933544">{</span><span class="ident" id="2933545">typ</span><span class="op" id="2933548">,</span>&nbsp;<span class="ident" id="2933550">ptr</span><span class="op" id="2933553">,</span>&nbsp;<span class="ident" id="2933555">f</span>&nbsp;<span class="op" id="2933557">|</span>&nbsp;<span class="ident" id="2933559">flagIndir</span>&nbsp;<span class="op" id="2933569">|</span>&nbsp;<span class="ident" id="2933571">flag</span><span class="op" id="2933575">(</span><span class="ident" id="2933576">typ</span><span class="op" id="2933579">.</span><span class="ident" id="2933580">Kind</span><span class="op" id="2933584">(</span><span class="op" id="2933585">)</span><span class="op" id="2933586">)</span><span class="op" id="2933587">}</span><br>
<span class="lineno">2255</span><span class="op" id="2933589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2933592">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2933679">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2933725">func</span>&nbsp;<span class="ident" id="2933730">makeComplex</span><span class="op" id="2933741">(</span><span class="ident" id="2933742">f</span>&nbsp;<span class="ident" id="2933744">flag</span><span class="op" id="2933748">,</span>&nbsp;<span class="ident" id="2933750">v</span>&nbsp;<span class="builtintype" id="2933752">complex128</span><span class="op" id="2933762">,</span>&nbsp;<span class="ident" id="2933764">t</span>&nbsp;<span class="ident" id="2933766">Type</span><span class="op" id="2933770">)</span>&nbsp;<span class="ident" id="2933772">Value</span>&nbsp;<span class="op" id="2933778">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933781">typ</span>&nbsp;<span class="op" id="2933785">:=</span>&nbsp;<span class="ident" id="2933788">t</span><span class="op" id="2933789">.</span><span class="ident" id="2933790">common</span><span class="op" id="2933796">(</span><span class="op" id="2933797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2933800">ptr</span>&nbsp;<span class="op" id="2933804">:=</span>&nbsp;<span class="ident" id="2933807">unsafe_New</span><span class="op" id="2933817">(</span><span class="ident" id="2933818">typ</span><span class="op" id="2933821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933824">switch</span>&nbsp;<span class="ident" id="2933831">typ</span><span class="op" id="2933834">.</span><span class="ident" id="2933835">size</span>&nbsp;<span class="op" id="2933840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933843">case</span>&nbsp;<span class="num" id="2933848">8</span><span class="op" id="2933849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933853">*</span><span class="op" id="2933854">(</span><span class="op" id="2933855">*</span><span class="builtintype" id="2933856">complex64</span><span class="op" id="2933865">)</span><span class="op" id="2933866">(</span><span class="ident" id="2933867">unsafe</span><span class="op" id="2933873">.</span><span class="ident" id="2933874">Pointer</span><span class="op" id="2933881">(</span><span class="ident" id="2933882">ptr</span><span class="op" id="2933885">)</span><span class="op" id="2933886">)</span>&nbsp;<span class="op" id="2933888">=</span>&nbsp;<span class="builtintype" id="2933890">complex64</span><span class="op" id="2933899">(</span><span class="ident" id="2933900">v</span><span class="op" id="2933901">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933904">case</span>&nbsp;<span class="num" id="2933909">16</span><span class="op" id="2933911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933915">*</span><span class="op" id="2933916">(</span><span class="op" id="2933917">*</span><span class="builtintype" id="2933918">complex128</span><span class="op" id="2933928">)</span><span class="op" id="2933929">(</span><span class="ident" id="2933930">unsafe</span><span class="op" id="2933936">.</span><span class="ident" id="2933937">Pointer</span><span class="op" id="2933944">(</span><span class="ident" id="2933945">ptr</span><span class="op" id="2933948">)</span><span class="op" id="2933949">)</span>&nbsp;<span class="op" id="2933951">=</span>&nbsp;<span class="ident" id="2933953">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2933956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2933959">return</span>&nbsp;<span class="ident" id="2933966">Value</span><span class="op" id="2933971">{</span><span class="ident" id="2933972">typ</span><span class="op" id="2933975">,</span>&nbsp;<span class="ident" id="2933977">ptr</span><span class="op" id="2933980">,</span>&nbsp;<span class="ident" id="2933982">f</span>&nbsp;<span class="op" id="2933984">|</span>&nbsp;<span class="ident" id="2933986">flagIndir</span>&nbsp;<span class="op" id="2933996">|</span>&nbsp;<span class="ident" id="2933998">flag</span><span class="op" id="2934002">(</span><span class="ident" id="2934003">typ</span><span class="op" id="2934006">.</span><span class="ident" id="2934007">Kind</span><span class="op" id="2934011">(</span><span class="op" id="2934012">)</span><span class="op" id="2934013">)</span><span class="op" id="2934014">}</span><br>
<span class="lineno"></span><span class="op" id="2934016">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2934019">func</span>&nbsp;<span class="ident" id="2934024">makeString</span><span class="op" id="2934034">(</span><span class="ident" id="2934035">f</span>&nbsp;<span class="ident" id="2934037">flag</span><span class="op" id="2934041">,</span>&nbsp;<span class="ident" id="2934043">v</span>&nbsp;<span class="builtintype" id="2934045">string</span><span class="op" id="2934051">,</span>&nbsp;<span class="ident" id="2934053">t</span>&nbsp;<span class="ident" id="2934055">Type</span><span class="op" id="2934059">)</span>&nbsp;<span class="ident" id="2934061">Value</span>&nbsp;<span class="op" id="2934067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934070">ret</span>&nbsp;<span class="op" id="2934074">:=</span>&nbsp;<span class="ident" id="2934077">New</span><span class="op" id="2934080">(</span><span class="ident" id="2934081">t</span><span class="op" id="2934082">)</span><span class="op" id="2934083">.</span><span class="ident" id="2934084">Elem</span><span class="op" id="2934088">(</span><span class="op" id="2934089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934092">ret</span><span class="op" id="2934095">.</span><span class="ident" id="2934096">SetString</span><span class="op" id="2934105">(</span><span class="ident" id="2934106">v</span><span class="op" id="2934107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934110">ret</span><span class="op" id="2934113">.</span><span class="ident" id="2934114">flag</span>&nbsp;<span class="op" id="2934119">=</span>&nbsp;<span class="ident" id="2934121">ret</span><span class="op" id="2934124">.</span><span class="ident" id="2934125">flag</span><span class="op" id="2934129">&amp;^</span><span class="ident" id="2934131">flagAddr</span>&nbsp;<span class="op" id="2934140">|</span>&nbsp;<span class="ident" id="2934142">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934145">return</span>&nbsp;<span class="ident" id="2934152">ret</span><br>
<span class="lineno"></span><span class="op" id="2934156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2934159">func</span>&nbsp;<span class="ident" id="2934164">makeBytes</span><span class="op" id="2934173">(</span><span class="ident" id="2934174">f</span>&nbsp;<span class="ident" id="2934176">flag</span><span class="op" id="2934180">,</span>&nbsp;<span class="ident" id="2934182">v</span>&nbsp;<span class="op" id="2934184">[</span><span class="op" id="2934185">]</span><span class="builtintype" id="2934186">byte</span><span class="op" id="2934190">,</span>&nbsp;<span class="ident" id="2934192">t</span>&nbsp;<span class="ident" id="2934194">Type</span><span class="op" id="2934198">)</span>&nbsp;<span class="ident" id="2934200">Value</span>&nbsp;<span class="op" id="2934206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934209">ret</span>&nbsp;<span class="op" id="2934213">:=</span>&nbsp;<span class="ident" id="2934216">New</span><span class="op" id="2934219">(</span><span class="ident" id="2934220">t</span><span class="op" id="2934221">)</span><span class="op" id="2934222">.</span><span class="ident" id="2934223">Elem</span><span class="op" id="2934227">(</span><span class="op" id="2934228">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934231">ret</span><span class="op" id="2934234">.</span><span class="ident" id="2934235">SetBytes</span><span class="op" id="2934243">(</span><span class="ident" id="2934244">v</span><span class="op" id="2934245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934248">ret</span><span class="op" id="2934251">.</span><span class="ident" id="2934252">flag</span>&nbsp;<span class="op" id="2934257">=</span>&nbsp;<span class="ident" id="2934259">ret</span><span class="op" id="2934262">.</span><span class="ident" id="2934263">flag</span><span class="op" id="2934267">&amp;^</span><span class="ident" id="2934269">flagAddr</span>&nbsp;<span class="op" id="2934278">|</span>&nbsp;<span class="ident" id="2934280">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934283">return</span>&nbsp;<span class="ident" id="2934290">ret</span><br>
<span class="lineno"></span><span class="op" id="2934294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2934297">func</span>&nbsp;<span class="ident" id="2934302">makeRunes</span><span class="op" id="2934311">(</span><span class="ident" id="2934312">f</span>&nbsp;<span class="ident" id="2934314">flag</span><span class="op" id="2934318">,</span>&nbsp;<span class="ident" id="2934320">v</span>&nbsp;<span class="op" id="2934322">[</span><span class="op" id="2934323">]</span><span class="builtintype" id="2934324">rune</span><span class="op" id="2934328">,</span>&nbsp;<span class="ident" id="2934330">t</span>&nbsp;<span class="ident" id="2934332">Type</span><span class="op" id="2934336">)</span>&nbsp;<span class="ident" id="2934338">Value</span>&nbsp;<span class="op" id="2934344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934347">ret</span>&nbsp;<span class="op" id="2934351">:=</span>&nbsp;<span class="ident" id="2934354">New</span><span class="op" id="2934357">(</span><span class="ident" id="2934358">t</span><span class="op" id="2934359">)</span><span class="op" id="2934360">.</span><span class="ident" id="2934361">Elem</span><span class="op" id="2934365">(</span><span class="op" id="2934366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934369">ret</span><span class="op" id="2934372">.</span><span class="ident" id="2934373">setRunes</span><span class="op" id="2934381">(</span><span class="ident" id="2934382">v</span><span class="op" id="2934383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2934386">ret</span><span class="op" id="2934389">.</span><span class="ident" id="2934390">flag</span>&nbsp;<span class="op" id="2934395">=</span>&nbsp;<span class="ident" id="2934397">ret</span><span class="op" id="2934400">.</span><span class="ident" id="2934401">flag</span><span class="op" id="2934405">&amp;^</span><span class="ident" id="2934407">flagAddr</span>&nbsp;<span class="op" id="2934416">|</span>&nbsp;<span class="ident" id="2934418">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934421">return</span>&nbsp;<span class="ident" id="2934428">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2934432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934435">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2934491">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2934563">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2934635">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934694">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2934726">func</span>&nbsp;<span class="ident" id="2934731">cvtInt</span><span class="op" id="2934737">(</span><span class="ident" id="2934738">v</span>&nbsp;<span class="ident" id="2934740">Value</span><span class="op" id="2934745">,</span>&nbsp;<span class="ident" id="2934747">t</span>&nbsp;<span class="ident" id="2934749">Type</span><span class="op" id="2934753">)</span>&nbsp;<span class="ident" id="2934755">Value</span>&nbsp;<span class="op" id="2934761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934764">return</span>&nbsp;<span class="ident" id="2934771">makeInt</span><span class="op" id="2934778">(</span><span class="ident" id="2934779">v</span><span class="op" id="2934780">.</span><span class="ident" id="2934781">flag</span><span class="op" id="2934785">&amp;</span><span class="ident" id="2934786">flagRO</span><span class="op" id="2934792">,</span>&nbsp;<span class="builtintype" id="2934794">uint64</span><span class="op" id="2934800">(</span><span class="ident" id="2934801">v</span><span class="op" id="2934802">.</span><span class="ident" id="2934803">Int</span><span class="op" id="2934806">(</span><span class="op" id="2934807">)</span><span class="op" id="2934808">)</span><span class="op" id="2934809">,</span>&nbsp;<span class="ident" id="2934811">t</span><span class="op" id="2934812">)</span><br>
<span class="lineno">2300</span><span class="op" id="2934814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934817">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2934850">func</span>&nbsp;<span class="ident" id="2934855">cvtUint</span><span class="op" id="2934862">(</span><span class="ident" id="2934863">v</span>&nbsp;<span class="ident" id="2934865">Value</span><span class="op" id="2934870">,</span>&nbsp;<span class="ident" id="2934872">t</span>&nbsp;<span class="ident" id="2934874">Type</span><span class="op" id="2934878">)</span>&nbsp;<span class="ident" id="2934880">Value</span>&nbsp;<span class="op" id="2934886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2934889">return</span>&nbsp;<span class="ident" id="2934896">makeInt</span><span class="op" id="2934903">(</span><span class="ident" id="2934904">v</span><span class="op" id="2934905">.</span><span class="ident" id="2934906">flag</span><span class="op" id="2934910">&amp;</span><span class="ident" id="2934911">flagRO</span><span class="op" id="2934917">,</span>&nbsp;<span class="ident" id="2934919">v</span><span class="op" id="2934920">.</span><span class="ident" id="2934921">Uint</span><span class="op" id="2934925">(</span><span class="op" id="2934926">)</span><span class="op" id="2934927">,</span>&nbsp;<span class="ident" id="2934929">t</span><span class="op" id="2934930">)</span><br>
<span class="lineno">2305</span><span class="op" id="2934932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2934935">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2934966">func</span>&nbsp;<span class="ident" id="2934971">cvtFloatInt</span><span class="op" id="2934982">(</span><span class="ident" id="2934983">v</span>&nbsp;<span class="ident" id="2934985">Value</span><span class="op" id="2934990">,</span>&nbsp;<span class="ident" id="2934992">t</span>&nbsp;<span class="ident" id="2934994">Type</span><span class="op" id="2934998">)</span>&nbsp;<span class="ident" id="2935000">Value</span>&nbsp;<span class="op" id="2935006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935009">return</span>&nbsp;<span class="ident" id="2935016">makeInt</span><span class="op" id="2935023">(</span><span class="ident" id="2935024">v</span><span class="op" id="2935025">.</span><span class="ident" id="2935026">flag</span><span class="op" id="2935030">&amp;</span><span class="ident" id="2935031">flagRO</span><span class="op" id="2935037">,</span>&nbsp;<span class="builtintype" id="2935039">uint64</span><span class="op" id="2935045">(</span><span class="builtintype" id="2935046">int64</span><span class="op" id="2935051">(</span><span class="ident" id="2935052">v</span><span class="op" id="2935053">.</span><span class="ident" id="2935054">Float</span><span class="op" id="2935059">(</span><span class="op" id="2935060">)</span><span class="op" id="2935061">)</span><span class="op" id="2935062">)</span><span class="op" id="2935063">,</span>&nbsp;<span class="ident" id="2935065">t</span><span class="op" id="2935066">)</span><br>
<span class="lineno">2310</span><span class="op" id="2935068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935071">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2935103">func</span>&nbsp;<span class="ident" id="2935108">cvtFloatUint</span><span class="op" id="2935120">(</span><span class="ident" id="2935121">v</span>&nbsp;<span class="ident" id="2935123">Value</span><span class="op" id="2935128">,</span>&nbsp;<span class="ident" id="2935130">t</span>&nbsp;<span class="ident" id="2935132">Type</span><span class="op" id="2935136">)</span>&nbsp;<span class="ident" id="2935138">Value</span>&nbsp;<span class="op" id="2935144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935147">return</span>&nbsp;<span class="ident" id="2935154">makeInt</span><span class="op" id="2935161">(</span><span class="ident" id="2935162">v</span><span class="op" id="2935163">.</span><span class="ident" id="2935164">flag</span><span class="op" id="2935168">&amp;</span><span class="ident" id="2935169">flagRO</span><span class="op" id="2935175">,</span>&nbsp;<span class="builtintype" id="2935177">uint64</span><span class="op" id="2935183">(</span><span class="ident" id="2935184">v</span><span class="op" id="2935185">.</span><span class="ident" id="2935186">Float</span><span class="op" id="2935191">(</span><span class="op" id="2935192">)</span><span class="op" id="2935193">)</span><span class="op" id="2935194">,</span>&nbsp;<span class="ident" id="2935196">t</span><span class="op" id="2935197">)</span><br>
<span class="lineno">2315</span><span class="op" id="2935199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935202">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2935233">func</span>&nbsp;<span class="ident" id="2935238">cvtIntFloat</span><span class="op" id="2935249">(</span><span class="ident" id="2935250">v</span>&nbsp;<span class="ident" id="2935252">Value</span><span class="op" id="2935257">,</span>&nbsp;<span class="ident" id="2935259">t</span>&nbsp;<span class="ident" id="2935261">Type</span><span class="op" id="2935265">)</span>&nbsp;<span class="ident" id="2935267">Value</span>&nbsp;<span class="op" id="2935273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935276">return</span>&nbsp;<span class="ident" id="2935283">makeFloat</span><span class="op" id="2935292">(</span><span class="ident" id="2935293">v</span><span class="op" id="2935294">.</span><span class="ident" id="2935295">flag</span><span class="op" id="2935299">&amp;</span><span class="ident" id="2935300">flagRO</span><span class="op" id="2935306">,</span>&nbsp;<span class="builtintype" id="2935308">float64</span><span class="op" id="2935315">(</span><span class="ident" id="2935316">v</span><span class="op" id="2935317">.</span><span class="ident" id="2935318">Int</span><span class="op" id="2935321">(</span><span class="op" id="2935322">)</span><span class="op" id="2935323">)</span><span class="op" id="2935324">,</span>&nbsp;<span class="ident" id="2935326">t</span><span class="op" id="2935327">)</span><br>
<span class="lineno">2320</span><span class="op" id="2935329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935332">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2935364">func</span>&nbsp;<span class="ident" id="2935369">cvtUintFloat</span><span class="op" id="2935381">(</span><span class="ident" id="2935382">v</span>&nbsp;<span class="ident" id="2935384">Value</span><span class="op" id="2935389">,</span>&nbsp;<span class="ident" id="2935391">t</span>&nbsp;<span class="ident" id="2935393">Type</span><span class="op" id="2935397">)</span>&nbsp;<span class="ident" id="2935399">Value</span>&nbsp;<span class="op" id="2935405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935408">return</span>&nbsp;<span class="ident" id="2935415">makeFloat</span><span class="op" id="2935424">(</span><span class="ident" id="2935425">v</span><span class="op" id="2935426">.</span><span class="ident" id="2935427">flag</span><span class="op" id="2935431">&amp;</span><span class="ident" id="2935432">flagRO</span><span class="op" id="2935438">,</span>&nbsp;<span class="builtintype" id="2935440">float64</span><span class="op" id="2935447">(</span><span class="ident" id="2935448">v</span><span class="op" id="2935449">.</span><span class="ident" id="2935450">Uint</span><span class="op" id="2935454">(</span><span class="op" id="2935455">)</span><span class="op" id="2935456">)</span><span class="op" id="2935457">,</span>&nbsp;<span class="ident" id="2935459">t</span><span class="op" id="2935460">)</span><br>
<span class="lineno">2325</span><span class="op" id="2935462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935465">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2935498">func</span>&nbsp;<span class="ident" id="2935503">cvtFloat</span><span class="op" id="2935511">(</span><span class="ident" id="2935512">v</span>&nbsp;<span class="ident" id="2935514">Value</span><span class="op" id="2935519">,</span>&nbsp;<span class="ident" id="2935521">t</span>&nbsp;<span class="ident" id="2935523">Type</span><span class="op" id="2935527">)</span>&nbsp;<span class="ident" id="2935529">Value</span>&nbsp;<span class="op" id="2935535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935538">return</span>&nbsp;<span class="ident" id="2935545">makeFloat</span><span class="op" id="2935554">(</span><span class="ident" id="2935555">v</span><span class="op" id="2935556">.</span><span class="ident" id="2935557">flag</span><span class="op" id="2935561">&amp;</span><span class="ident" id="2935562">flagRO</span><span class="op" id="2935568">,</span>&nbsp;<span class="ident" id="2935570">v</span><span class="op" id="2935571">.</span><span class="ident" id="2935572">Float</span><span class="op" id="2935577">(</span><span class="op" id="2935578">)</span><span class="op" id="2935579">,</span>&nbsp;<span class="ident" id="2935581">t</span><span class="op" id="2935582">)</span><br>
<span class="lineno">2330</span><span class="op" id="2935584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935587">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2935624">func</span>&nbsp;<span class="ident" id="2935629">cvtComplex</span><span class="op" id="2935639">(</span><span class="ident" id="2935640">v</span>&nbsp;<span class="ident" id="2935642">Value</span><span class="op" id="2935647">,</span>&nbsp;<span class="ident" id="2935649">t</span>&nbsp;<span class="ident" id="2935651">Type</span><span class="op" id="2935655">)</span>&nbsp;<span class="ident" id="2935657">Value</span>&nbsp;<span class="op" id="2935663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935666">return</span>&nbsp;<span class="ident" id="2935673">makeComplex</span><span class="op" id="2935684">(</span><span class="ident" id="2935685">v</span><span class="op" id="2935686">.</span><span class="ident" id="2935687">flag</span><span class="op" id="2935691">&amp;</span><span class="ident" id="2935692">flagRO</span><span class="op" id="2935698">,</span>&nbsp;<span class="ident" id="2935700">v</span><span class="op" id="2935701">.</span><span class="ident" id="2935702">Complex</span><span class="op" id="2935709">(</span><span class="op" id="2935710">)</span><span class="op" id="2935711">,</span>&nbsp;<span class="ident" id="2935713">t</span><span class="op" id="2935714">)</span><br>
<span class="lineno">2335</span><span class="op" id="2935716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935719">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2935749">func</span>&nbsp;<span class="ident" id="2935754">cvtIntString</span><span class="op" id="2935766">(</span><span class="ident" id="2935767">v</span>&nbsp;<span class="ident" id="2935769">Value</span><span class="op" id="2935774">,</span>&nbsp;<span class="ident" id="2935776">t</span>&nbsp;<span class="ident" id="2935778">Type</span><span class="op" id="2935782">)</span>&nbsp;<span class="ident" id="2935784">Value</span>&nbsp;<span class="op" id="2935790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935793">return</span>&nbsp;<span class="ident" id="2935800">makeString</span><span class="op" id="2935810">(</span><span class="ident" id="2935811">v</span><span class="op" id="2935812">.</span><span class="ident" id="2935813">flag</span><span class="op" id="2935817">&amp;</span><span class="ident" id="2935818">flagRO</span><span class="op" id="2935824">,</span>&nbsp;<span class="builtintype" id="2935826">string</span><span class="op" id="2935832">(</span><span class="ident" id="2935833">v</span><span class="op" id="2935834">.</span><span class="ident" id="2935835">Int</span><span class="op" id="2935838">(</span><span class="op" id="2935839">)</span><span class="op" id="2935840">)</span><span class="op" id="2935841">,</span>&nbsp;<span class="ident" id="2935843">t</span><span class="op" id="2935844">)</span><br>
<span class="lineno">2340</span><span class="op" id="2935846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935849">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2935880">func</span>&nbsp;<span class="ident" id="2935885">cvtUintString</span><span class="op" id="2935898">(</span><span class="ident" id="2935899">v</span>&nbsp;<span class="ident" id="2935901">Value</span><span class="op" id="2935906">,</span>&nbsp;<span class="ident" id="2935908">t</span>&nbsp;<span class="ident" id="2935910">Type</span><span class="op" id="2935914">)</span>&nbsp;<span class="ident" id="2935916">Value</span>&nbsp;<span class="op" id="2935922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2935925">return</span>&nbsp;<span class="ident" id="2935932">makeString</span><span class="op" id="2935942">(</span><span class="ident" id="2935943">v</span><span class="op" id="2935944">.</span><span class="ident" id="2935945">flag</span><span class="op" id="2935949">&amp;</span><span class="ident" id="2935950">flagRO</span><span class="op" id="2935956">,</span>&nbsp;<span class="builtintype" id="2935958">string</span><span class="op" id="2935964">(</span><span class="ident" id="2935965">v</span><span class="op" id="2935966">.</span><span class="ident" id="2935967">Uint</span><span class="op" id="2935971">(</span><span class="op" id="2935972">)</span><span class="op" id="2935973">)</span><span class="op" id="2935974">,</span>&nbsp;<span class="ident" id="2935976">t</span><span class="op" id="2935977">)</span><br>
<span class="lineno">2345</span><span class="op" id="2935979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2935982">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2936013">func</span>&nbsp;<span class="ident" id="2936018">cvtBytesString</span><span class="op" id="2936032">(</span><span class="ident" id="2936033">v</span>&nbsp;<span class="ident" id="2936035">Value</span><span class="op" id="2936040">,</span>&nbsp;<span class="ident" id="2936042">t</span>&nbsp;<span class="ident" id="2936044">Type</span><span class="op" id="2936048">)</span>&nbsp;<span class="ident" id="2936050">Value</span>&nbsp;<span class="op" id="2936056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936059">return</span>&nbsp;<span class="ident" id="2936066">makeString</span><span class="op" id="2936076">(</span><span class="ident" id="2936077">v</span><span class="op" id="2936078">.</span><span class="ident" id="2936079">flag</span><span class="op" id="2936083">&amp;</span><span class="ident" id="2936084">flagRO</span><span class="op" id="2936090">,</span>&nbsp;<span class="builtintype" id="2936092">string</span><span class="op" id="2936098">(</span><span class="ident" id="2936099">v</span><span class="op" id="2936100">.</span><span class="ident" id="2936101">Bytes</span><span class="op" id="2936106">(</span><span class="op" id="2936107">)</span><span class="op" id="2936108">)</span><span class="op" id="2936109">,</span>&nbsp;<span class="ident" id="2936111">t</span><span class="op" id="2936112">)</span><br>
<span class="lineno">2350</span><span class="op" id="2936114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936117">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2936148">func</span>&nbsp;<span class="ident" id="2936153">cvtStringBytes</span><span class="op" id="2936167">(</span><span class="ident" id="2936168">v</span>&nbsp;<span class="ident" id="2936170">Value</span><span class="op" id="2936175">,</span>&nbsp;<span class="ident" id="2936177">t</span>&nbsp;<span class="ident" id="2936179">Type</span><span class="op" id="2936183">)</span>&nbsp;<span class="ident" id="2936185">Value</span>&nbsp;<span class="op" id="2936191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936194">return</span>&nbsp;<span class="ident" id="2936201">makeBytes</span><span class="op" id="2936210">(</span><span class="ident" id="2936211">v</span><span class="op" id="2936212">.</span><span class="ident" id="2936213">flag</span><span class="op" id="2936217">&amp;</span><span class="ident" id="2936218">flagRO</span><span class="op" id="2936224">,</span>&nbsp;<span class="op" id="2936226">[</span><span class="op" id="2936227">]</span><span class="builtintype" id="2936228">byte</span><span class="op" id="2936232">(</span><span class="ident" id="2936233">v</span><span class="op" id="2936234">.</span><span class="ident" id="2936235">String</span><span class="op" id="2936241">(</span><span class="op" id="2936242">)</span><span class="op" id="2936243">)</span><span class="op" id="2936244">,</span>&nbsp;<span class="ident" id="2936246">t</span><span class="op" id="2936247">)</span><br>
<span class="lineno">2355</span><span class="op" id="2936249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936252">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2936283">func</span>&nbsp;<span class="ident" id="2936288">cvtRunesString</span><span class="op" id="2936302">(</span><span class="ident" id="2936303">v</span>&nbsp;<span class="ident" id="2936305">Value</span><span class="op" id="2936310">,</span>&nbsp;<span class="ident" id="2936312">t</span>&nbsp;<span class="ident" id="2936314">Type</span><span class="op" id="2936318">)</span>&nbsp;<span class="ident" id="2936320">Value</span>&nbsp;<span class="op" id="2936326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936329">return</span>&nbsp;<span class="ident" id="2936336">makeString</span><span class="op" id="2936346">(</span><span class="ident" id="2936347">v</span><span class="op" id="2936348">.</span><span class="ident" id="2936349">flag</span><span class="op" id="2936353">&amp;</span><span class="ident" id="2936354">flagRO</span><span class="op" id="2936360">,</span>&nbsp;<span class="builtintype" id="2936362">string</span><span class="op" id="2936368">(</span><span class="ident" id="2936369">v</span><span class="op" id="2936370">.</span><span class="ident" id="2936371">runes</span><span class="op" id="2936376">(</span><span class="op" id="2936377">)</span><span class="op" id="2936378">)</span><span class="op" id="2936379">,</span>&nbsp;<span class="ident" id="2936381">t</span><span class="op" id="2936382">)</span><br>
<span class="lineno">2360</span><span class="op" id="2936384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936387">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2936418">func</span>&nbsp;<span class="ident" id="2936423">cvtStringRunes</span><span class="op" id="2936437">(</span><span class="ident" id="2936438">v</span>&nbsp;<span class="ident" id="2936440">Value</span><span class="op" id="2936445">,</span>&nbsp;<span class="ident" id="2936447">t</span>&nbsp;<span class="ident" id="2936449">Type</span><span class="op" id="2936453">)</span>&nbsp;<span class="ident" id="2936455">Value</span>&nbsp;<span class="op" id="2936461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936464">return</span>&nbsp;<span class="ident" id="2936471">makeRunes</span><span class="op" id="2936480">(</span><span class="ident" id="2936481">v</span><span class="op" id="2936482">.</span><span class="ident" id="2936483">flag</span><span class="op" id="2936487">&amp;</span><span class="ident" id="2936488">flagRO</span><span class="op" id="2936494">,</span>&nbsp;<span class="op" id="2936496">[</span><span class="op" id="2936497">]</span><span class="builtintype" id="2936498">rune</span><span class="op" id="2936502">(</span><span class="ident" id="2936503">v</span><span class="op" id="2936504">.</span><span class="ident" id="2936505">String</span><span class="op" id="2936511">(</span><span class="op" id="2936512">)</span><span class="op" id="2936513">)</span><span class="op" id="2936514">,</span>&nbsp;<span class="ident" id="2936516">t</span><span class="op" id="2936517">)</span><br>
<span class="lineno">2365</span><span class="op" id="2936519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936522">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2936548">func</span>&nbsp;<span class="ident" id="2936553">cvtDirect</span><span class="op" id="2936562">(</span><span class="ident" id="2936563">v</span>&nbsp;<span class="ident" id="2936565">Value</span><span class="op" id="2936570">,</span>&nbsp;<span class="ident" id="2936572">typ</span>&nbsp;<span class="ident" id="2936576">Type</span><span class="op" id="2936580">)</span>&nbsp;<span class="ident" id="2936582">Value</span>&nbsp;<span class="op" id="2936588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936591">f</span>&nbsp;<span class="op" id="2936593">:=</span>&nbsp;<span class="ident" id="2936596">v</span><span class="op" id="2936597">.</span><span class="ident" id="2936598">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936604">t</span>&nbsp;<span class="op" id="2936606">:=</span>&nbsp;<span class="ident" id="2936609">typ</span><span class="op" id="2936612">.</span><span class="ident" id="2936613">common</span><span class="op" id="2936619">(</span><span class="op" id="2936620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936623">ptr</span>&nbsp;<span class="op" id="2936627">:=</span>&nbsp;<span class="ident" id="2936630">v</span><span class="op" id="2936631">.</span><span class="ident" id="2936632">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936637">if</span>&nbsp;<span class="ident" id="2936640">f</span><span class="op" id="2936641">&amp;</span><span class="ident" id="2936642">flagAddr</span>&nbsp;<span class="op" id="2936651">!=</span>&nbsp;<span class="num" id="2936654">0</span>&nbsp;<span class="op" id="2936656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2936660">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936702">c</span>&nbsp;<span class="op" id="2936704">:=</span>&nbsp;<span class="ident" id="2936707">unsafe_New</span><span class="op" id="2936717">(</span><span class="ident" id="2936718">t</span><span class="op" id="2936719">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936723">memmove</span><span class="op" id="2936730">(</span><span class="ident" id="2936731">c</span><span class="op" id="2936732">,</span>&nbsp;<span class="ident" id="2936734">ptr</span><span class="op" id="2936737">,</span>&nbsp;<span class="ident" id="2936739">t</span><span class="op" id="2936740">.</span><span class="ident" id="2936741">size</span><span class="op" id="2936745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936749">ptr</span>&nbsp;<span class="op" id="2936753">=</span>&nbsp;<span class="ident" id="2936755">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936759">f</span>&nbsp;<span class="op" id="2936761">&amp;^=</span>&nbsp;<span class="ident" id="2936765">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2936775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936778">return</span>&nbsp;<span class="ident" id="2936785">Value</span><span class="op" id="2936790">{</span><span class="ident" id="2936791">t</span><span class="op" id="2936792">,</span>&nbsp;<span class="ident" id="2936794">ptr</span><span class="op" id="2936797">,</span>&nbsp;<span class="ident" id="2936799">v</span><span class="op" id="2936800">.</span><span class="ident" id="2936801">flag</span><span class="op" id="2936805">&amp;</span><span class="ident" id="2936806">flagRO</span>&nbsp;<span class="op" id="2936813">|</span>&nbsp;<span class="ident" id="2936815">f</span><span class="op" id="2936816">}</span>&nbsp;<span class="comment" id="2936818">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2936843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2936846">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2936882">func</span>&nbsp;<span class="ident" id="2936887">cvtT2I</span><span class="op" id="2936893">(</span><span class="ident" id="2936894">v</span>&nbsp;<span class="ident" id="2936896">Value</span><span class="op" id="2936901">,</span>&nbsp;<span class="ident" id="2936903">typ</span>&nbsp;<span class="ident" id="2936907">Type</span><span class="op" id="2936911">)</span>&nbsp;<span class="ident" id="2936913">Value</span>&nbsp;<span class="op" id="2936919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936922">target</span>&nbsp;<span class="op" id="2936929">:=</span>&nbsp;<span class="ident" id="2936932">unsafe_New</span><span class="op" id="2936942">(</span><span class="ident" id="2936943">typ</span><span class="op" id="2936946">.</span><span class="ident" id="2936947">common</span><span class="op" id="2936953">(</span><span class="op" id="2936954">)</span><span class="op" id="2936955">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2936958">x</span>&nbsp;<span class="op" id="2936960">:=</span>&nbsp;<span class="ident" id="2936963">valueInterface</span><span class="op" id="2936977">(</span><span class="ident" id="2936978">v</span><span class="op" id="2936979">,</span>&nbsp;<span class="builtintype" id="2936981">false</span><span class="op" id="2936986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2936989">if</span>&nbsp;<span class="ident" id="2936992">typ</span><span class="op" id="2936995">.</span><span class="ident" id="2936996">NumMethod</span><span class="op" id="2937005">(</span><span class="op" id="2937006">)</span>&nbsp;<span class="op" id="2937008">==</span>&nbsp;<span class="num" id="2937011">0</span>&nbsp;<span class="op" id="2937013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937017">*</span><span class="op" id="2937018">(</span><span class="op" id="2937019">*</span><span class="keyword" id="2937020">interface</span><span class="op" id="2937029">{</span><span class="op" id="2937030">}</span><span class="op" id="2937031">)</span><span class="op" id="2937032">(</span><span class="ident" id="2937033">target</span><span class="op" id="2937039">)</span>&nbsp;<span class="op" id="2937041">=</span>&nbsp;<span class="ident" id="2937043">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937046">}</span>&nbsp;<span class="keyword" id="2937048">else</span>&nbsp;<span class="op" id="2937053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2937057">ifaceE2I</span><span class="op" id="2937065">(</span><span class="ident" id="2937066">typ</span><span class="op" id="2937069">.</span><span class="op" id="2937070">(</span><span class="op" id="2937071">*</span><span class="ident" id="2937072">rtype</span><span class="op" id="2937077">)</span><span class="op" id="2937078">,</span>&nbsp;<span class="ident" id="2937080">x</span><span class="op" id="2937081">,</span>&nbsp;<span class="ident" id="2937083">target</span><span class="op" id="2937089">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937095">return</span>&nbsp;<span class="ident" id="2937102">Value</span><span class="op" id="2937107">{</span><span class="ident" id="2937108">typ</span><span class="op" id="2937111">.</span><span class="ident" id="2937112">common</span><span class="op" id="2937118">(</span><span class="op" id="2937119">)</span><span class="op" id="2937120">,</span>&nbsp;<span class="ident" id="2937122">target</span><span class="op" id="2937128">,</span>&nbsp;<span class="ident" id="2937130">v</span><span class="op" id="2937131">.</span><span class="ident" id="2937132">flag</span><span class="op" id="2937136">&amp;</span><span class="ident" id="2937137">flagRO</span>&nbsp;<span class="op" id="2937144">|</span>&nbsp;<span class="ident" id="2937146">flagIndir</span>&nbsp;<span class="op" id="2937156">|</span>&nbsp;<span class="ident" id="2937158">flag</span><span class="op" id="2937162">(</span><span class="ident" id="2937163">Interface</span><span class="op" id="2937172">)</span><span class="op" id="2937173">}</span><br>
<span class="lineno"></span><span class="op" id="2937175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937178">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2937215">func</span>&nbsp;<span class="ident" id="2937220">cvtI2I</span><span class="op" id="2937226">(</span><span class="ident" id="2937227">v</span>&nbsp;<span class="ident" id="2937229">Value</span><span class="op" id="2937234">,</span>&nbsp;<span class="ident" id="2937236">typ</span>&nbsp;<span class="ident" id="2937240">Type</span><span class="op" id="2937244">)</span>&nbsp;<span class="ident" id="2937246">Value</span>&nbsp;<span class="op" id="2937252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937255">if</span>&nbsp;<span class="ident" id="2937258">v</span><span class="op" id="2937259">.</span><span class="ident" id="2937260">IsNil</span><span class="op" id="2937265">(</span><span class="op" id="2937266">)</span>&nbsp;<span class="op" id="2937268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2937272">ret</span>&nbsp;<span class="op" id="2937276">:=</span>&nbsp;<span class="ident" id="2937279">Zero</span><span class="op" id="2937283">(</span><span class="ident" id="2937284">typ</span><span class="op" id="2937287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2937291">ret</span><span class="op" id="2937294">.</span><span class="ident" id="2937295">flag</span>&nbsp;<span class="op" id="2937300">|=</span>&nbsp;<span class="ident" id="2937303">v</span><span class="op" id="2937304">.</span><span class="ident" id="2937305">flag</span>&nbsp;<span class="op" id="2937310">&amp;</span>&nbsp;<span class="ident" id="2937312">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937321">return</span>&nbsp;<span class="ident" id="2937328">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2937333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2937336">return</span>&nbsp;<span class="ident" id="2937343">cvtT2I</span><span class="op" id="2937349">(</span><span class="ident" id="2937350">v</span><span class="op" id="2937351">.</span><span class="ident" id="2937352">Elem</span><span class="op" id="2937356">(</span><span class="op" id="2937357">)</span><span class="op" id="2937358">,</span>&nbsp;<span class="ident" id="2937360">typ</span><span class="op" id="2937363">)</span><br>
<span class="lineno"></span><span class="op" id="2937365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937368">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2937397">func</span>&nbsp;<span class="ident" id="2937402">chancap</span><span class="op" id="2937409">(</span><span class="ident" id="2937410">ch</span>&nbsp;<span class="ident" id="2937413">unsafe</span><span class="op" id="2937419">.</span><span class="ident" id="2937420">Pointer</span><span class="op" id="2937427">)</span>&nbsp;<span class="builtintype" id="2937429">int</span><br>
<span class="lineno"></span><span class="keyword" id="2937433">func</span>&nbsp;<span class="ident" id="2937438">chanclose</span><span class="op" id="2937447">(</span><span class="ident" id="2937448">ch</span>&nbsp;<span class="ident" id="2937451">unsafe</span><span class="op" id="2937457">.</span><span class="ident" id="2937458">Pointer</span><span class="op" id="2937465">)</span><br>
<span class="lineno"></span><span class="keyword" id="2937467">func</span>&nbsp;<span class="ident" id="2937472">chanlen</span><span class="op" id="2937479">(</span><span class="ident" id="2937480">ch</span>&nbsp;<span class="ident" id="2937483">unsafe</span><span class="op" id="2937489">.</span><span class="ident" id="2937490">Pointer</span><span class="op" id="2937497">)</span>&nbsp;<span class="builtintype" id="2937499">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937504">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2937518">func</span>&nbsp;<span class="ident" id="2937523">chanrecv</span><span class="op" id="2937531">(</span><span class="ident" id="2937532">t</span>&nbsp;<span class="op" id="2937534">*</span><span class="ident" id="2937535">rtype</span><span class="op" id="2937540">,</span>&nbsp;<span class="ident" id="2937542">ch</span>&nbsp;<span class="ident" id="2937545">unsafe</span><span class="op" id="2937551">.</span><span class="ident" id="2937552">Pointer</span><span class="op" id="2937559">,</span>&nbsp;<span class="ident" id="2937561">nb</span>&nbsp;<span class="builtintype" id="2937564">bool</span><span class="op" id="2937568">,</span>&nbsp;<span class="ident" id="2937570">val</span>&nbsp;<span class="ident" id="2937574">unsafe</span><span class="op" id="2937580">.</span><span class="ident" id="2937581">Pointer</span><span class="op" id="2937588">)</span>&nbsp;<span class="op" id="2937590">(</span><span class="ident" id="2937591">selected</span><span class="op" id="2937599">,</span>&nbsp;<span class="ident" id="2937601">received</span>&nbsp;<span class="builtintype" id="2937610">bool</span><span class="op" id="2937614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2937617">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2937631">func</span>&nbsp;<span class="ident" id="2937636">chansend</span><span class="op" id="2937644">(</span><span class="ident" id="2937645">t</span>&nbsp;<span class="op" id="2937647">*</span><span class="ident" id="2937648">rtype</span><span class="op" id="2937653">,</span>&nbsp;<span class="ident" id="2937655">ch</span>&nbsp;<span class="ident" id="2937658">unsafe</span><span class="op" id="2937664">.</span><span class="ident" id="2937665">Pointer</span><span class="op" id="2937672">,</span>&nbsp;<span class="ident" id="2937674">val</span>&nbsp;<span class="ident" id="2937678">unsafe</span><span class="op" id="2937684">.</span><span class="ident" id="2937685">Pointer</span><span class="op" id="2937692">,</span>&nbsp;<span class="ident" id="2937694">nb</span>&nbsp;<span class="builtintype" id="2937697">bool</span><span class="op" id="2937701">)</span>&nbsp;<span class="builtintype" id="2937703">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2937709">func</span>&nbsp;<span class="ident" id="2937714">makechan</span><span class="op" id="2937722">(</span><span class="ident" id="2937723">typ</span>&nbsp;<span class="op" id="2937727">*</span><span class="ident" id="2937728">rtype</span><span class="op" id="2937733">,</span>&nbsp;<span class="ident" id="2937735">size</span>&nbsp;<span class="builtintype" id="2937740">uint64</span><span class="op" id="2937746">)</span>&nbsp;<span class="op" id="2937748">(</span><span class="ident" id="2937749">ch</span>&nbsp;<span class="ident" id="2937752">unsafe</span><span class="op" id="2937758">.</span><span class="ident" id="2937759">Pointer</span><span class="op" id="2937766">)</span><br>
<span class="lineno"></span><span class="keyword" id="2937768">func</span>&nbsp;<span class="ident" id="2937773">makemap</span><span class="op" id="2937780">(</span><span class="ident" id="2937781">t</span>&nbsp;<span class="op" id="2937783">*</span><span class="ident" id="2937784">rtype</span><span class="op" id="2937789">)</span>&nbsp;<span class="op" id="2937791">(</span><span class="ident" id="2937792">m</span>&nbsp;<span class="ident" id="2937794">unsafe</span><span class="op" id="2937800">.</span><span class="ident" id="2937801">Pointer</span><span class="op" id="2937808">)</span><br>
<span class="lineno"></span><span class="keyword" id="2937810">func</span>&nbsp;<span class="ident" id="2937815">mapaccess</span><span class="op" id="2937824">(</span><span class="ident" id="2937825">t</span>&nbsp;<span class="op" id="2937827">*</span><span class="ident" id="2937828">rtype</span><span class="op" id="2937833">,</span>&nbsp;<span class="ident" id="2937835">m</span>&nbsp;<span class="ident" id="2937837">unsafe</span><span class="op" id="2937843">.</span><span class="ident" id="2937844">Pointer</span><span class="op" id="2937851">,</span>&nbsp;<span class="ident" id="2937853">key</span>&nbsp;<span class="ident" id="2937857">unsafe</span><span class="op" id="2937863">.</span><span class="ident" id="2937864">Pointer</span><span class="op" id="2937871">)</span>&nbsp;<span class="op" id="2937873">(</span><span class="ident" id="2937874">val</span>&nbsp;<span class="ident" id="2937878">unsafe</span><span class="op" id="2937884">.</span><span class="ident" id="2937885">Pointer</span><span class="op" id="2937892">)</span><br>
<span class="lineno"></span><span class="keyword" id="2937894">func</span>&nbsp;<span class="ident" id="2937899">mapassign</span><span class="op" id="2937908">(</span><span class="ident" id="2937909">t</span>&nbsp;<span class="op" id="2937911">*</span><span class="ident" id="2937912">rtype</span><span class="op" id="2937917">,</span>&nbsp;<span class="ident" id="2937919">m</span>&nbsp;<span class="ident" id="2937921">unsafe</span><span class="op" id="2937927">.</span><span class="ident" id="2937928">Pointer</span><span class="op" id="2937935">,</span>&nbsp;<span class="ident" id="2937937">key</span><span class="op" id="2937940">,</span>&nbsp;<span class="ident" id="2937942">val</span>&nbsp;<span class="ident" id="2937946">unsafe</span><span class="op" id="2937952">.</span><span class="ident" id="2937953">Pointer</span><span class="op" id="2937960">)</span><br>
<span class="lineno"></span><span class="keyword" id="2937962">func</span>&nbsp;<span class="ident" id="2937967">mapdelete</span><span class="op" id="2937976">(</span><span class="ident" id="2937977">t</span>&nbsp;<span class="op" id="2937979">*</span><span class="ident" id="2937980">rtype</span><span class="op" id="2937985">,</span>&nbsp;<span class="ident" id="2937987">m</span>&nbsp;<span class="ident" id="2937989">unsafe</span><span class="op" id="2937995">.</span><span class="ident" id="2937996">Pointer</span><span class="op" id="2938003">,</span>&nbsp;<span class="ident" id="2938005">key</span>&nbsp;<span class="ident" id="2938009">unsafe</span><span class="op" id="2938015">.</span><span class="ident" id="2938016">Pointer</span><span class="op" id="2938023">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2938025">func</span>&nbsp;<span class="ident" id="2938030">mapiterinit</span><span class="op" id="2938041">(</span><span class="ident" id="2938042">t</span>&nbsp;<span class="op" id="2938044">*</span><span class="ident" id="2938045">rtype</span><span class="op" id="2938050">,</span>&nbsp;<span class="ident" id="2938052">m</span>&nbsp;<span class="ident" id="2938054">unsafe</span><span class="op" id="2938060">.</span><span class="ident" id="2938061">Pointer</span><span class="op" id="2938068">)</span>&nbsp;<span class="ident" id="2938070">unsafe</span><span class="op" id="2938076">.</span><span class="ident" id="2938077">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2938085">func</span>&nbsp;<span class="ident" id="2938090">mapiterkey</span><span class="op" id="2938100">(</span><span class="ident" id="2938101">it</span>&nbsp;<span class="ident" id="2938104">unsafe</span><span class="op" id="2938110">.</span><span class="ident" id="2938111">Pointer</span><span class="op" id="2938118">)</span>&nbsp;<span class="op" id="2938120">(</span><span class="ident" id="2938121">key</span>&nbsp;<span class="ident" id="2938125">unsafe</span><span class="op" id="2938131">.</span><span class="ident" id="2938132">Pointer</span><span class="op" id="2938139">)</span><br>
<span class="lineno"></span><span class="keyword" id="2938141">func</span>&nbsp;<span class="ident" id="2938146">mapiternext</span><span class="op" id="2938157">(</span><span class="ident" id="2938158">it</span>&nbsp;<span class="ident" id="2938161">unsafe</span><span class="op" id="2938167">.</span><span class="ident" id="2938168">Pointer</span><span class="op" id="2938175">)</span><br>
<span class="lineno"></span><span class="keyword" id="2938177">func</span>&nbsp;<span class="ident" id="2938182">maplen</span><span class="op" id="2938188">(</span><span class="ident" id="2938189">m</span>&nbsp;<span class="ident" id="2938191">unsafe</span><span class="op" id="2938197">.</span><span class="ident" id="2938198">Pointer</span><span class="op" id="2938205">)</span>&nbsp;<span class="builtintype" id="2938207">int</span><br>
<span class="lineno"></span><span class="keyword" id="2938211">func</span>&nbsp;<span class="ident" id="2938216">call</span><span class="op" id="2938220">(</span><span class="ident" id="2938221">fn</span><span class="op" id="2938223">,</span>&nbsp;<span class="ident" id="2938225">arg</span>&nbsp;<span class="ident" id="2938229">unsafe</span><span class="op" id="2938235">.</span><span class="ident" id="2938236">Pointer</span><span class="op" id="2938243">,</span>&nbsp;<span class="ident" id="2938245">n</span>&nbsp;<span class="builtintype" id="2938247">uint32</span><span class="op" id="2938253">,</span>&nbsp;<span class="ident" id="2938255">retoffset</span>&nbsp;<span class="builtintype" id="2938265">uint32</span><span class="op" id="2938271">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2938274">func</span>&nbsp;<span class="ident" id="2938279">ifaceE2I</span><span class="op" id="2938287">(</span><span class="ident" id="2938288">t</span>&nbsp;<span class="op" id="2938290">*</span><span class="ident" id="2938291">rtype</span><span class="op" id="2938296">,</span>&nbsp;<span class="ident" id="2938298">src</span>&nbsp;<span class="keyword" id="2938302">interface</span><span class="op" id="2938311">{</span><span class="op" id="2938312">}</span><span class="op" id="2938313">,</span>&nbsp;<span class="ident" id="2938315">dst</span>&nbsp;<span class="ident" id="2938319">unsafe</span><span class="op" id="2938325">.</span><span class="ident" id="2938326">Pointer</span><span class="op" id="2938333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938336">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2938350">func</span>&nbsp;<span class="ident" id="2938355">memmove</span><span class="op" id="2938362">(</span><span class="ident" id="2938363">adst</span><span class="op" id="2938367">,</span>&nbsp;<span class="ident" id="2938369">asrc</span>&nbsp;<span class="ident" id="2938374">unsafe</span><span class="op" id="2938380">.</span><span class="ident" id="2938381">Pointer</span><span class="op" id="2938388">,</span>&nbsp;<span class="ident" id="2938390">n</span>&nbsp;<span class="builtintype" id="2938392">uintptr</span><span class="op" id="2938399">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2938402">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2938456">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2938517">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2938548">func</span>&nbsp;<span class="ident" id="2938553">escapes</span><span class="op" id="2938560">(</span><span class="ident" id="2938561">x</span>&nbsp;<span class="keyword" id="2938563">interface</span><span class="op" id="2938572">{</span><span class="op" id="2938573">}</span><span class="op" id="2938574">)</span>&nbsp;<span class="op" id="2938576">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2938579">if</span>&nbsp;<span class="ident" id="2938582">dummy</span><span class="op" id="2938587">.</span><span class="ident" id="2938588">b</span>&nbsp;<span class="op" id="2938590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938594">dummy</span><span class="op" id="2938599">.</span><span class="ident" id="2938600">x</span>&nbsp;<span class="op" id="2938602">=</span>&nbsp;<span class="ident" id="2938604">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938607">}</span><br>
<span class="lineno"></span><span class="op" id="2938609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2938612">var</span>&nbsp;<span class="ident" id="2938616">dummy</span>&nbsp;<span class="keyword" id="2938622">struct</span>&nbsp;<span class="op" id="2938629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938632">b</span>&nbsp;<span class="builtintype" id="2938634">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938640">x</span>&nbsp;<span class="keyword" id="2938642">interface</span><span class="op" id="2938651">{</span><span class="op" id="2938652">}</span><br>
<span class="lineno"></span><span class="op" id="2938654">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
