<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8545105">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8545161">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8545215">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8545266">package</span>&nbsp;<span class="ident" id="8545274">gosym</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8545281">import</span>&nbsp;<span class="op" id="8545288">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545291">&#34;debug/elf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545304">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545311">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545324">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545330">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545341">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545358">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545369">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8545380">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8545390">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8545393">var</span>&nbsp;<span class="op" id="8545397">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8545400">pclineTempDir</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8545417">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8545425">pclinetestBinary</span>&nbsp;<span class="builtintype" id="8545442">string</span><br>
<span class="lineno"></span><span class="op" id="8545449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8545452">func</span>&nbsp;<span class="ident" id="8545457">dotest</span><span class="op" id="8545463">(</span><span class="ident" id="8545464">self</span>&nbsp;<span class="builtintype" id="8545469">bool</span><span class="op" id="8545473">)</span>&nbsp;<span class="builtintype" id="8545475">bool</span>&nbsp;<span class="op" id="8545480">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8545483">//&nbsp;For&nbsp;now,&nbsp;only&nbsp;works&nbsp;on&nbsp;amd64&nbsp;platforms.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545527">if</span>&nbsp;<span class="ident" id="8545530">runtime</span><span class="op" id="8545537">.</span><span class="ident" id="8545538">GOARCH</span>&nbsp;<span class="op" id="8545545">!=</span>&nbsp;<span class="string" id="8545548">&#34;amd64&#34;</span>&nbsp;<span class="op" id="8545556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545560">return</span>&nbsp;<span class="builtintype" id="8545567">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8545577">//&nbsp;Self&nbsp;test&nbsp;reads&nbsp;test&nbsp;binary;&nbsp;only&nbsp;works&nbsp;on&nbsp;Linux.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545631">if</span>&nbsp;<span class="ident" id="8545634">self</span>&nbsp;<span class="op" id="8545639">&amp;&amp;</span>&nbsp;<span class="ident" id="8545642">runtime</span><span class="op" id="8545649">.</span><span class="ident" id="8545650">GOOS</span>&nbsp;<span class="op" id="8545655">!=</span>&nbsp;<span class="string" id="8545658">&#34;linux&#34;</span>&nbsp;<span class="op" id="8545666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545670">return</span>&nbsp;<span class="builtintype" id="8545677">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8545687">//&nbsp;Command&nbsp;below&nbsp;expects&nbsp;&#34;sh&#34;,&nbsp;so&nbsp;Unix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545728">if</span>&nbsp;<span class="ident" id="8545731">runtime</span><span class="op" id="8545738">.</span><span class="ident" id="8545739">GOOS</span>&nbsp;<span class="op" id="8545744">==</span>&nbsp;<span class="string" id="8545747">&#34;windows&#34;</span>&nbsp;<span class="op" id="8545757">||</span>&nbsp;<span class="ident" id="8545760">runtime</span><span class="op" id="8545767">.</span><span class="ident" id="8545768">GOOS</span>&nbsp;<span class="op" id="8545773">==</span>&nbsp;<span class="string" id="8545776">&#34;plan9&#34;</span>&nbsp;<span class="op" id="8545784">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545788">return</span>&nbsp;<span class="builtintype" id="8545795">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545805">if</span>&nbsp;<span class="ident" id="8545808">pclinetestBinary</span>&nbsp;<span class="op" id="8545825">!=</span>&nbsp;<span class="string" id="8545828">&#34;&#34;</span>&nbsp;<span class="op" id="8545831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545835">return</span>&nbsp;<span class="builtintype" id="8545842">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545848">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545851">var</span>&nbsp;<span class="ident" id="8545855">err</span>&nbsp;<span class="builtintype" id="8545859">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8545866">pclineTempDir</span><span class="op" id="8545879">,</span>&nbsp;<span class="ident" id="8545881">err</span>&nbsp;<span class="op" id="8545885">=</span>&nbsp;<span class="ident" id="8545887">ioutil</span><span class="op" id="8545893">.</span><span class="ident" id="8545894">TempDir</span><span class="op" id="8545901">(</span><span class="string" id="8545902">&#34;&#34;</span><span class="op" id="8545904">,</span>&nbsp;<span class="string" id="8545906">&#34;pclinetest&#34;</span><span class="op" id="8545918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545921">if</span>&nbsp;<span class="ident" id="8545924">err</span>&nbsp;<span class="op" id="8545928">!=</span>&nbsp;<span class="ident" id="8545931">nil</span>&nbsp;<span class="op" id="8545935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8545939">panic</span><span class="op" id="8545944">(</span><span class="ident" id="8545945">err</span><span class="op" id="8545948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8545951">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8545954">if</span>&nbsp;<span class="ident" id="8545957">strings</span><span class="op" id="8545964">.</span><span class="ident" id="8545965">Contains</span><span class="op" id="8545973">(</span><span class="ident" id="8545974">pclineTempDir</span><span class="op" id="8545987">,</span>&nbsp;<span class="string" id="8545989">&#34;&nbsp;&#34;</span><span class="op" id="8545992">)</span>&nbsp;<span class="op" id="8545994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8545998">panic</span><span class="op" id="8546003">(</span><span class="string" id="8546004">&#34;unexpected&nbsp;space&nbsp;in&nbsp;tempdir&#34;</span><span class="op" id="8546033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8546036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8546039">//&nbsp;This&nbsp;command&nbsp;builds&nbsp;pclinetest&nbsp;from&nbsp;pclinetest.asm;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8546095">//&nbsp;the&nbsp;resulting&nbsp;binary&nbsp;looks&nbsp;like&nbsp;it&nbsp;was&nbsp;built&nbsp;from&nbsp;pclinetest.s,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8546163">//&nbsp;but&nbsp;we&nbsp;have&nbsp;renamed&nbsp;it&nbsp;to&nbsp;keep&nbsp;it&nbsp;away&nbsp;from&nbsp;the&nbsp;go&nbsp;tool.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546224">pclinetestBinary</span>&nbsp;<span class="op" id="8546241">=</span>&nbsp;<span class="ident" id="8546243">filepath</span><span class="op" id="8546251">.</span><span class="ident" id="8546252">Join</span><span class="op" id="8546256">(</span><span class="ident" id="8546257">pclineTempDir</span><span class="op" id="8546270">,</span>&nbsp;<span class="string" id="8546272">&#34;pclinetest&#34;</span><span class="op" id="8546284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546287">command</span>&nbsp;<span class="op" id="8546295">:=</span>&nbsp;<span class="ident" id="8546298">fmt</span><span class="op" id="8546301">.</span><span class="ident" id="8546302">Sprintf</span><span class="op" id="8546309">(</span><span class="string" id="8546310">&#34;go&nbsp;tool&nbsp;6a&nbsp;-o&nbsp;%s.6&nbsp;pclinetest.asm&nbsp;&amp;&amp;&nbsp;go&nbsp;tool&nbsp;6l&nbsp;-H&nbsp;linux&nbsp;-E&nbsp;main&nbsp;-o&nbsp;%s&nbsp;%s.6&#34;</span><span class="op" id="8546387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546391">pclinetestBinary</span><span class="op" id="8546407">,</span>&nbsp;<span class="ident" id="8546409">pclinetestBinary</span><span class="op" id="8546425">,</span>&nbsp;<span class="ident" id="8546427">pclinetestBinary</span><span class="op" id="8546443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546446">cmd</span>&nbsp;<span class="op" id="8546450">:=</span>&nbsp;<span class="ident" id="8546453">exec</span><span class="op" id="8546457">.</span><span class="ident" id="8546458">Command</span><span class="op" id="8546465">(</span><span class="string" id="8546466">&#34;sh&#34;</span><span class="op" id="8546470">,</span>&nbsp;<span class="string" id="8546472">&#34;-c&#34;</span><span class="op" id="8546476">,</span>&nbsp;<span class="ident" id="8546478">command</span><span class="op" id="8546485">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546488">cmd</span><span class="op" id="8546491">.</span><span class="ident" id="8546492">Stdout</span>&nbsp;<span class="op" id="8546499">=</span>&nbsp;<span class="ident" id="8546501">os</span><span class="op" id="8546503">.</span><span class="ident" id="8546504">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546512">cmd</span><span class="op" id="8546515">.</span><span class="ident" id="8546516">Stderr</span>&nbsp;<span class="op" id="8546523">=</span>&nbsp;<span class="ident" id="8546525">os</span><span class="op" id="8546527">.</span><span class="ident" id="8546528">Stderr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546536">if</span>&nbsp;<span class="ident" id="8546539">err</span>&nbsp;<span class="op" id="8546543">:=</span>&nbsp;<span class="ident" id="8546546">cmd</span><span class="op" id="8546549">.</span><span class="ident" id="8546550">Run</span><span class="op" id="8546553">(</span><span class="op" id="8546554">)</span><span class="op" id="8546555">;</span>&nbsp;<span class="ident" id="8546557">err</span>&nbsp;<span class="op" id="8546561">!=</span>&nbsp;<span class="ident" id="8546564">nil</span>&nbsp;<span class="op" id="8546568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8546572">panic</span><span class="op" id="8546577">(</span><span class="ident" id="8546578">err</span><span class="op" id="8546581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8546584">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546587">return</span>&nbsp;<span class="builtintype" id="8546594">true</span><br>
<span class="lineno"></span><span class="op" id="8546599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8546602">func</span>&nbsp;<span class="ident" id="8546607">endtest</span><span class="op" id="8546614">(</span><span class="op" id="8546615">)</span>&nbsp;<span class="op" id="8546617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546620">if</span>&nbsp;<span class="ident" id="8546623">pclineTempDir</span>&nbsp;<span class="op" id="8546637">!=</span>&nbsp;<span class="string" id="8546640">&#34;&#34;</span>&nbsp;<span class="op" id="8546643">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546647">os</span><span class="op" id="8546649">.</span><span class="ident" id="8546650">RemoveAll</span><span class="op" id="8546659">(</span><span class="ident" id="8546660">pclineTempDir</span><span class="op" id="8546673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546677">pclineTempDir</span>&nbsp;<span class="op" id="8546691">=</span>&nbsp;<span class="string" id="8546693">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546698">pclinetestBinary</span>&nbsp;<span class="op" id="8546715">=</span>&nbsp;<span class="string" id="8546717">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8546721">}</span><br>
<span class="lineno"></span><span class="op" id="8546723">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8546726">func</span>&nbsp;<span class="ident" id="8546731">getTable</span><span class="op" id="8546739">(</span><span class="ident" id="8546740">t</span>&nbsp;<span class="op" id="8546742">*</span><span class="ident" id="8546743">testing</span><span class="op" id="8546750">.</span><span class="ident" id="8546751">T</span><span class="op" id="8546752">)</span>&nbsp;<span class="op" id="8546754">*</span><span class="ident" id="8546755">Table</span>&nbsp;<span class="op" id="8546761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546764">f</span><span class="op" id="8546765">,</span>&nbsp;<span class="ident" id="8546767">tab</span>&nbsp;<span class="op" id="8546771">:=</span>&nbsp;<span class="ident" id="8546774">crack</span><span class="op" id="8546779">(</span><span class="ident" id="8546780">os</span><span class="op" id="8546782">.</span><span class="ident" id="8546783">Args</span><span class="op" id="8546787">[</span><span class="num" id="8546788">0</span><span class="op" id="8546789">]</span><span class="op" id="8546790">,</span>&nbsp;<span class="ident" id="8546792">t</span><span class="op" id="8546793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546796">f</span><span class="op" id="8546797">.</span><span class="ident" id="8546798">Close</span><span class="op" id="8546803">(</span><span class="op" id="8546804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546807">return</span>&nbsp;<span class="ident" id="8546814">tab</span><br>
<span class="lineno">75</span><span class="op" id="8546818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8546821">func</span>&nbsp;<span class="ident" id="8546826">crack</span><span class="op" id="8546831">(</span><span class="ident" id="8546832">file</span>&nbsp;<span class="builtintype" id="8546837">string</span><span class="op" id="8546843">,</span>&nbsp;<span class="ident" id="8546845">t</span>&nbsp;<span class="op" id="8546847">*</span><span class="ident" id="8546848">testing</span><span class="op" id="8546855">.</span><span class="ident" id="8546856">T</span><span class="op" id="8546857">)</span>&nbsp;<span class="op" id="8546859">(</span><span class="op" id="8546860">*</span><span class="ident" id="8546861">elf</span><span class="op" id="8546864">.</span><span class="ident" id="8546865">File</span><span class="op" id="8546869">,</span>&nbsp;<span class="op" id="8546871">*</span><span class="ident" id="8546872">Table</span><span class="op" id="8546877">)</span>&nbsp;<span class="op" id="8546879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8546882">//&nbsp;Open&nbsp;self</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546896">f</span><span class="op" id="8546897">,</span>&nbsp;<span class="ident" id="8546899">err</span>&nbsp;<span class="op" id="8546903">:=</span>&nbsp;<span class="ident" id="8546906">elf</span><span class="op" id="8546909">.</span><span class="ident" id="8546910">Open</span><span class="op" id="8546914">(</span><span class="ident" id="8546915">file</span><span class="op" id="8546919">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546922">if</span>&nbsp;<span class="ident" id="8546925">err</span>&nbsp;<span class="op" id="8546929">!=</span>&nbsp;<span class="ident" id="8546932">nil</span>&nbsp;<span class="op" id="8546936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8546940">t</span><span class="op" id="8546941">.</span><span class="ident" id="8546942">Fatal</span><span class="op" id="8546947">(</span><span class="ident" id="8546948">err</span><span class="op" id="8546951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8546954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8546957">return</span>&nbsp;<span class="ident" id="8546964">parse</span><span class="op" id="8546969">(</span><span class="ident" id="8546970">file</span><span class="op" id="8546974">,</span>&nbsp;<span class="ident" id="8546976">f</span><span class="op" id="8546977">,</span>&nbsp;<span class="ident" id="8546979">t</span><span class="op" id="8546980">)</span><br>
<span class="lineno"></span><span class="op" id="8546982">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="8546985">func</span>&nbsp;<span class="ident" id="8546990">parse</span><span class="op" id="8546995">(</span><span class="ident" id="8546996">file</span>&nbsp;<span class="builtintype" id="8547001">string</span><span class="op" id="8547007">,</span>&nbsp;<span class="ident" id="8547009">f</span>&nbsp;<span class="op" id="8547011">*</span><span class="ident" id="8547012">elf</span><span class="op" id="8547015">.</span><span class="ident" id="8547016">File</span><span class="op" id="8547020">,</span>&nbsp;<span class="ident" id="8547022">t</span>&nbsp;<span class="op" id="8547024">*</span><span class="ident" id="8547025">testing</span><span class="op" id="8547032">.</span><span class="ident" id="8547033">T</span><span class="op" id="8547034">)</span>&nbsp;<span class="op" id="8547036">(</span><span class="op" id="8547037">*</span><span class="ident" id="8547038">elf</span><span class="op" id="8547041">.</span><span class="ident" id="8547042">File</span><span class="op" id="8547046">,</span>&nbsp;<span class="op" id="8547048">*</span><span class="ident" id="8547049">Table</span><span class="op" id="8547054">)</span>&nbsp;<span class="op" id="8547056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547059">symdat</span><span class="op" id="8547065">,</span>&nbsp;<span class="ident" id="8547067">err</span>&nbsp;<span class="op" id="8547071">:=</span>&nbsp;<span class="ident" id="8547074">f</span><span class="op" id="8547075">.</span><span class="ident" id="8547076">Section</span><span class="op" id="8547083">(</span><span class="string" id="8547084">&#34;.gosymtab&#34;</span><span class="op" id="8547095">)</span><span class="op" id="8547096">.</span><span class="ident" id="8547097">Data</span><span class="op" id="8547101">(</span><span class="op" id="8547102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547105">if</span>&nbsp;<span class="ident" id="8547108">err</span>&nbsp;<span class="op" id="8547112">!=</span>&nbsp;<span class="ident" id="8547115">nil</span>&nbsp;<span class="op" id="8547119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547123">f</span><span class="op" id="8547124">.</span><span class="ident" id="8547125">Close</span><span class="op" id="8547130">(</span><span class="op" id="8547131">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547135">t</span><span class="op" id="8547136">.</span><span class="ident" id="8547137">Fatalf</span><span class="op" id="8547143">(</span><span class="string" id="8547144">&#34;reading&nbsp;%s&nbsp;gosymtab:&nbsp;%v&#34;</span><span class="op" id="8547169">,</span>&nbsp;<span class="ident" id="8547171">file</span><span class="op" id="8547175">,</span>&nbsp;<span class="ident" id="8547177">err</span><span class="op" id="8547180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547186">pclndat</span><span class="op" id="8547193">,</span>&nbsp;<span class="ident" id="8547195">err</span>&nbsp;<span class="op" id="8547199">:=</span>&nbsp;<span class="ident" id="8547202">f</span><span class="op" id="8547203">.</span><span class="ident" id="8547204">Section</span><span class="op" id="8547211">(</span><span class="string" id="8547212">&#34;.gopclntab&#34;</span><span class="op" id="8547224">)</span><span class="op" id="8547225">.</span><span class="ident" id="8547226">Data</span><span class="op" id="8547230">(</span><span class="op" id="8547231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547234">if</span>&nbsp;<span class="ident" id="8547237">err</span>&nbsp;<span class="op" id="8547241">!=</span>&nbsp;<span class="ident" id="8547244">nil</span>&nbsp;<span class="op" id="8547248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547252">f</span><span class="op" id="8547253">.</span><span class="ident" id="8547254">Close</span><span class="op" id="8547259">(</span><span class="op" id="8547260">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547264">t</span><span class="op" id="8547265">.</span><span class="ident" id="8547266">Fatalf</span><span class="op" id="8547272">(</span><span class="string" id="8547273">&#34;reading&nbsp;%s&nbsp;gopclntab:&nbsp;%v&#34;</span><span class="op" id="8547299">,</span>&nbsp;<span class="ident" id="8547301">file</span><span class="op" id="8547305">,</span>&nbsp;<span class="ident" id="8547307">err</span><span class="op" id="8547310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547317">pcln</span>&nbsp;<span class="op" id="8547322">:=</span>&nbsp;<span class="ident" id="8547325">NewLineTable</span><span class="op" id="8547337">(</span><span class="ident" id="8547338">pclndat</span><span class="op" id="8547345">,</span>&nbsp;<span class="ident" id="8547347">f</span><span class="op" id="8547348">.</span><span class="ident" id="8547349">Section</span><span class="op" id="8547356">(</span><span class="string" id="8547357">&#34;.text&#34;</span><span class="op" id="8547364">)</span><span class="op" id="8547365">.</span><span class="ident" id="8547366">Addr</span><span class="op" id="8547370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547373">tab</span><span class="op" id="8547376">,</span>&nbsp;<span class="ident" id="8547378">err</span>&nbsp;<span class="op" id="8547382">:=</span>&nbsp;<span class="ident" id="8547385">NewTable</span><span class="op" id="8547393">(</span><span class="ident" id="8547394">symdat</span><span class="op" id="8547400">,</span>&nbsp;<span class="ident" id="8547402">pcln</span><span class="op" id="8547406">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547409">if</span>&nbsp;<span class="ident" id="8547412">err</span>&nbsp;<span class="op" id="8547416">!=</span>&nbsp;<span class="ident" id="8547419">nil</span>&nbsp;<span class="op" id="8547423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547427">f</span><span class="op" id="8547428">.</span><span class="ident" id="8547429">Close</span><span class="op" id="8547434">(</span><span class="op" id="8547435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547439">t</span><span class="op" id="8547440">.</span><span class="ident" id="8547441">Fatalf</span><span class="op" id="8547447">(</span><span class="string" id="8547448">&#34;parsing&nbsp;%s&nbsp;gosymtab:&nbsp;%v&#34;</span><span class="op" id="8547473">,</span>&nbsp;<span class="ident" id="8547475">file</span><span class="op" id="8547479">,</span>&nbsp;<span class="ident" id="8547481">err</span><span class="op" id="8547484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547491">return</span>&nbsp;<span class="ident" id="8547498">f</span><span class="op" id="8547499">,</span>&nbsp;<span class="ident" id="8547501">tab</span><br>
<span class="lineno"></span><span class="op" id="8547505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8547508">var</span>&nbsp;<span class="ident" id="8547512">goarch</span>&nbsp;<span class="op" id="8547519">=</span>&nbsp;<span class="ident" id="8547521">os</span><span class="op" id="8547523">.</span><span class="ident" id="8547524">Getenv</span><span class="op" id="8547530">(</span><span class="string" id="8547531">&#34;O&#34;</span><span class="op" id="8547534">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="8547537">func</span>&nbsp;<span class="ident" id="8547542">TestLineFromAline</span><span class="op" id="8547559">(</span><span class="ident" id="8547560">t</span>&nbsp;<span class="op" id="8547562">*</span><span class="ident" id="8547563">testing</span><span class="op" id="8547570">.</span><span class="ident" id="8547571">T</span><span class="op" id="8547572">)</span>&nbsp;<span class="op" id="8547574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547577">if</span>&nbsp;<span class="op" id="8547580">!</span><span class="ident" id="8547581">dotest</span><span class="op" id="8547587">(</span><span class="builtintype" id="8547588">true</span><span class="op" id="8547592">)</span>&nbsp;<span class="op" id="8547594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547598">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547609">defer</span>&nbsp;<span class="ident" id="8547615">endtest</span><span class="op" id="8547622">(</span><span class="op" id="8547623">)</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547627">tab</span>&nbsp;<span class="op" id="8547631">:=</span>&nbsp;<span class="ident" id="8547634">getTable</span><span class="op" id="8547642">(</span><span class="ident" id="8547643">t</span><span class="op" id="8547644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547647">if</span>&nbsp;<span class="ident" id="8547650">tab</span><span class="op" id="8547653">.</span><span class="ident" id="8547654">go12line</span>&nbsp;<span class="op" id="8547663">!=</span>&nbsp;<span class="ident" id="8547666">nil</span>&nbsp;<span class="op" id="8547670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8547674">//&nbsp;aline&#39;s&nbsp;don&#39;t&nbsp;exist&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547720">t</span><span class="op" id="8547721">.</span><span class="ident" id="8547722">Skip</span><span class="op" id="8547726">(</span><span class="string" id="8547727">&#34;not&nbsp;relevant&nbsp;to&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="8547764">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8547771">//&nbsp;Find&nbsp;the&nbsp;sym&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547796">pkg</span>&nbsp;<span class="op" id="8547800">:=</span>&nbsp;<span class="ident" id="8547803">tab</span><span class="op" id="8547806">.</span><span class="ident" id="8547807">LookupFunc</span><span class="op" id="8547817">(</span><span class="string" id="8547818">&#34;debug/gosym.TestLineFromAline&#34;</span><span class="op" id="8547849">)</span><span class="op" id="8547850">.</span><span class="ident" id="8547851">Obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8547856">if</span>&nbsp;<span class="ident" id="8547859">pkg</span>&nbsp;<span class="op" id="8547863">==</span>&nbsp;<span class="ident" id="8547866">nil</span>&nbsp;<span class="op" id="8547870">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547874">t</span><span class="op" id="8547875">.</span><span class="ident" id="8547876">Fatalf</span><span class="op" id="8547882">(</span><span class="string" id="8547883">&#34;nil&nbsp;pkg&#34;</span><span class="op" id="8547892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8547895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8547899">//&nbsp;Walk&nbsp;every&nbsp;absolute&nbsp;line&nbsp;and&nbsp;ensure&nbsp;that&nbsp;we&nbsp;hit&nbsp;every</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8547957">//&nbsp;source&nbsp;line&nbsp;monotonically</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8547987">lastline</span>&nbsp;<span class="op" id="8547996">:=</span>&nbsp;<span class="builtinfunc" id="8547999">make</span><span class="op" id="8548003">(</span><span class="keyword" id="8548004">map</span><span class="op" id="8548007">[</span><span class="builtintype" id="8548008">string</span><span class="op" id="8548014">]</span><span class="builtintype" id="8548015">int</span><span class="op" id="8548018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548021">final</span>&nbsp;<span class="op" id="8548027">:=</span>&nbsp;<span class="op" id="8548030">-</span><span class="num" id="8548031">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548034">for</span>&nbsp;<span class="ident" id="8548038">i</span>&nbsp;<span class="op" id="8548040">:=</span>&nbsp;<span class="num" id="8548043">0</span><span class="op" id="8548044">;</span>&nbsp;<span class="ident" id="8548046">i</span>&nbsp;<span class="op" id="8548048">&lt;</span>&nbsp;<span class="num" id="8548050">10000</span><span class="op" id="8548055">;</span>&nbsp;<span class="ident" id="8548057">i</span><span class="op" id="8548058">++</span>&nbsp;<span class="op" id="8548061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548065">path</span><span class="op" id="8548069">,</span>&nbsp;<span class="ident" id="8548071">line</span>&nbsp;<span class="op" id="8548076">:=</span>&nbsp;<span class="ident" id="8548079">pkg</span><span class="op" id="8548082">.</span><span class="ident" id="8548083">lineFromAline</span><span class="op" id="8548096">(</span><span class="ident" id="8548097">i</span><span class="op" id="8548098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8548102">//&nbsp;Check&nbsp;for&nbsp;end&nbsp;of&nbsp;object</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548131">if</span>&nbsp;<span class="ident" id="8548134">path</span>&nbsp;<span class="op" id="8548139">==</span>&nbsp;<span class="string" id="8548142">&#34;&#34;</span>&nbsp;<span class="op" id="8548145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548150">if</span>&nbsp;<span class="ident" id="8548153">final</span>&nbsp;<span class="op" id="8548159">==</span>&nbsp;<span class="op" id="8548162">-</span><span class="num" id="8548163">1</span>&nbsp;<span class="op" id="8548165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548171">final</span>&nbsp;<span class="op" id="8548177">=</span>&nbsp;<span class="ident" id="8548179">i</span>&nbsp;<span class="op" id="8548181">-</span>&nbsp;<span class="num" id="8548183">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548193">continue</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548204">}</span>&nbsp;<span class="keyword" id="8548206">else</span>&nbsp;<span class="keyword" id="8548211">if</span>&nbsp;<span class="ident" id="8548214">final</span>&nbsp;<span class="op" id="8548220">!=</span>&nbsp;<span class="op" id="8548223">-</span><span class="num" id="8548224">1</span>&nbsp;<span class="op" id="8548226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548231">t</span><span class="op" id="8548232">.</span><span class="ident" id="8548233">Fatalf</span><span class="op" id="8548239">(</span><span class="string" id="8548240">&#34;reached&nbsp;end&nbsp;of&nbsp;package&nbsp;at&nbsp;absolute&nbsp;line&nbsp;%d,&nbsp;but&nbsp;absolute&nbsp;line&nbsp;%d&nbsp;mapped&nbsp;to&nbsp;%s:%d&#34;</span><span class="op" id="8548322">,</span>&nbsp;<span class="ident" id="8548324">final</span><span class="op" id="8548329">,</span>&nbsp;<span class="ident" id="8548331">i</span><span class="op" id="8548332">,</span>&nbsp;<span class="ident" id="8548334">path</span><span class="op" id="8548338">,</span>&nbsp;<span class="ident" id="8548340">line</span><span class="op" id="8548344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8548352">//&nbsp;It&#39;s&nbsp;okay&nbsp;to&nbsp;see&nbsp;files&nbsp;multiple&nbsp;times&nbsp;(e.g.,&nbsp;sys.a)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548409">if</span>&nbsp;<span class="ident" id="8548412">line</span>&nbsp;<span class="op" id="8548417">==</span>&nbsp;<span class="num" id="8548420">1</span>&nbsp;<span class="op" id="8548422">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548427">lastline</span><span class="op" id="8548435">[</span><span class="ident" id="8548436">path</span><span class="op" id="8548440">]</span>&nbsp;<span class="op" id="8548442">=</span>&nbsp;<span class="num" id="8548444">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548449">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8548464">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;is&nbsp;the&nbsp;next&nbsp;line&nbsp;in&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548509">ll</span><span class="op" id="8548511">,</span>&nbsp;<span class="ident" id="8548513">ok</span>&nbsp;<span class="op" id="8548516">:=</span>&nbsp;<span class="ident" id="8548519">lastline</span><span class="op" id="8548527">[</span><span class="ident" id="8548528">path</span><span class="op" id="8548532">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548536">if</span>&nbsp;<span class="op" id="8548539">!</span><span class="ident" id="8548540">ok</span>&nbsp;<span class="op" id="8548543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548548">t</span><span class="op" id="8548549">.</span><span class="ident" id="8548550">Errorf</span><span class="op" id="8548556">(</span><span class="string" id="8548557">&#34;file&nbsp;%s&nbsp;starts&nbsp;on&nbsp;line&nbsp;%d&#34;</span><span class="op" id="8548584">,</span>&nbsp;<span class="ident" id="8548586">path</span><span class="op" id="8548590">,</span>&nbsp;<span class="ident" id="8548592">line</span><span class="op" id="8548596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548600">}</span>&nbsp;<span class="keyword" id="8548602">else</span>&nbsp;<span class="keyword" id="8548607">if</span>&nbsp;<span class="ident" id="8548610">line</span>&nbsp;<span class="op" id="8548615">!=</span>&nbsp;<span class="ident" id="8548618">ll</span><span class="op" id="8548620">+</span><span class="num" id="8548621">1</span>&nbsp;<span class="op" id="8548623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548628">t</span><span class="op" id="8548629">.</span><span class="ident" id="8548630">Fatalf</span><span class="op" id="8548636">(</span><span class="string" id="8548637">&#34;expected&nbsp;next&nbsp;line&nbsp;of&nbsp;file&nbsp;%s&nbsp;to&nbsp;be&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8548685">,</span>&nbsp;<span class="ident" id="8548687">path</span><span class="op" id="8548691">,</span>&nbsp;<span class="ident" id="8548693">ll</span><span class="op" id="8548695">+</span><span class="num" id="8548696">1</span><span class="op" id="8548697">,</span>&nbsp;<span class="ident" id="8548699">line</span><span class="op" id="8548703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548707">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548711">lastline</span><span class="op" id="8548719">[</span><span class="ident" id="8548720">path</span><span class="op" id="8548724">]</span>&nbsp;<span class="op" id="8548726">=</span>&nbsp;<span class="ident" id="8548728">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548737">if</span>&nbsp;<span class="ident" id="8548740">final</span>&nbsp;<span class="op" id="8548746">==</span>&nbsp;<span class="op" id="8548749">-</span><span class="num" id="8548750">1</span>&nbsp;<span class="op" id="8548752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548756">t</span><span class="op" id="8548757">.</span><span class="ident" id="8548758">Errorf</span><span class="op" id="8548764">(</span><span class="string" id="8548765">&#34;never&nbsp;reached&nbsp;end&nbsp;of&nbsp;object&#34;</span><span class="op" id="8548794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548797">}</span><br>
<span class="lineno">160</span><span class="op" id="8548799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8548802">func</span>&nbsp;<span class="ident" id="8548807">TestLineAline</span><span class="op" id="8548820">(</span><span class="ident" id="8548821">t</span>&nbsp;<span class="op" id="8548823">*</span><span class="ident" id="8548824">testing</span><span class="op" id="8548831">.</span><span class="ident" id="8548832">T</span><span class="op" id="8548833">)</span>&nbsp;<span class="op" id="8548835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548838">if</span>&nbsp;<span class="op" id="8548841">!</span><span class="ident" id="8548842">dotest</span><span class="op" id="8548848">(</span><span class="builtintype" id="8548849">true</span><span class="op" id="8548853">)</span>&nbsp;<span class="op" id="8548855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548859">return</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8548867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548870">defer</span>&nbsp;<span class="ident" id="8548876">endtest</span><span class="op" id="8548883">(</span><span class="op" id="8548884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548888">tab</span>&nbsp;<span class="op" id="8548892">:=</span>&nbsp;<span class="ident" id="8548895">getTable</span><span class="op" id="8548903">(</span><span class="ident" id="8548904">t</span><span class="op" id="8548905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8548908">if</span>&nbsp;<span class="ident" id="8548911">tab</span><span class="op" id="8548914">.</span><span class="ident" id="8548915">go12line</span>&nbsp;<span class="op" id="8548924">!=</span>&nbsp;<span class="ident" id="8548927">nil</span>&nbsp;<span class="op" id="8548931">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8548935">//&nbsp;aline&#39;s&nbsp;don&#39;t&nbsp;exist&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8548981">t</span><span class="op" id="8548982">.</span><span class="ident" id="8548983">Skip</span><span class="op" id="8548987">(</span><span class="string" id="8548988">&#34;not&nbsp;relevant&nbsp;to&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="8549025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549032">for</span>&nbsp;<span class="ident" id="8549036">_</span><span class="op" id="8549037">,</span>&nbsp;<span class="ident" id="8549039">o</span>&nbsp;<span class="op" id="8549041">:=</span>&nbsp;<span class="keyword" id="8549044">range</span>&nbsp;<span class="ident" id="8549050">tab</span><span class="op" id="8549053">.</span><span class="ident" id="8549054">Files</span>&nbsp;<span class="op" id="8549060">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8549064">//&nbsp;A&nbsp;source&nbsp;file&nbsp;can&nbsp;appear&nbsp;multiple&nbsp;times&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8549114">//&nbsp;object.&nbsp;&nbsp;alineFromLine&nbsp;will&nbsp;always&nbsp;return&nbsp;alines&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8549171">//&nbsp;the&nbsp;first&nbsp;file,&nbsp;so&nbsp;track&nbsp;which&nbsp;lines&nbsp;we&#39;ve&nbsp;seen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549225">found</span>&nbsp;<span class="op" id="8549231">:=</span>&nbsp;<span class="builtinfunc" id="8549234">make</span><span class="op" id="8549238">(</span><span class="keyword" id="8549239">map</span><span class="op" id="8549242">[</span><span class="builtintype" id="8549243">string</span><span class="op" id="8549249">]</span><span class="builtintype" id="8549250">int</span><span class="op" id="8549253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549257">for</span>&nbsp;<span class="ident" id="8549261">i</span>&nbsp;<span class="op" id="8549263">:=</span>&nbsp;<span class="num" id="8549266">0</span><span class="op" id="8549267">;</span>&nbsp;<span class="ident" id="8549269">i</span>&nbsp;<span class="op" id="8549271">&lt;</span>&nbsp;<span class="num" id="8549273">1000</span><span class="op" id="8549277">;</span>&nbsp;<span class="ident" id="8549279">i</span><span class="op" id="8549280">++</span>&nbsp;<span class="op" id="8549283">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549288">path</span><span class="op" id="8549292">,</span>&nbsp;<span class="ident" id="8549294">line</span>&nbsp;<span class="op" id="8549299">:=</span>&nbsp;<span class="ident" id="8549302">o</span><span class="op" id="8549303">.</span><span class="ident" id="8549304">lineFromAline</span><span class="op" id="8549317">(</span><span class="ident" id="8549318">i</span><span class="op" id="8549319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549324">if</span>&nbsp;<span class="ident" id="8549327">path</span>&nbsp;<span class="op" id="8549332">==</span>&nbsp;<span class="string" id="8549335">&#34;&#34;</span>&nbsp;<span class="op" id="8549338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549344">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8549359">//&nbsp;cgo&nbsp;files&nbsp;are&nbsp;full&nbsp;of&nbsp;&#39;Z&#39;&nbsp;symbols,&nbsp;which&nbsp;we&nbsp;don&#39;t&nbsp;handle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549422">if</span>&nbsp;<span class="builtinfunc" id="8549425">len</span><span class="op" id="8549428">(</span><span class="ident" id="8549429">path</span><span class="op" id="8549433">)</span>&nbsp;<span class="op" id="8549435">&gt;</span>&nbsp;<span class="num" id="8549437">4</span>&nbsp;<span class="op" id="8549439">&amp;&amp;</span>&nbsp;<span class="ident" id="8549442">path</span><span class="op" id="8549446">[</span><span class="builtinfunc" id="8549447">len</span><span class="op" id="8549450">(</span><span class="ident" id="8549451">path</span><span class="op" id="8549455">)</span><span class="op" id="8549456">-</span><span class="num" id="8549457">4</span><span class="op" id="8549458">:</span><span class="op" id="8549459">]</span>&nbsp;<span class="op" id="8549461">==</span>&nbsp;<span class="string" id="8549464">&#34;.cgo&#34;</span>&nbsp;<span class="op" id="8549471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549477">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549495">if</span>&nbsp;<span class="ident" id="8549498">minline</span><span class="op" id="8549505">,</span>&nbsp;<span class="ident" id="8549507">ok</span>&nbsp;<span class="op" id="8549510">:=</span>&nbsp;<span class="ident" id="8549513">found</span><span class="op" id="8549518">[</span><span class="ident" id="8549519">path</span><span class="op" id="8549523">]</span><span class="op" id="8549524">;</span>&nbsp;<span class="ident" id="8549526">path</span>&nbsp;<span class="op" id="8549531">!=</span>&nbsp;<span class="string" id="8549534">&#34;&#34;</span>&nbsp;<span class="op" id="8549537">&amp;&amp;</span>&nbsp;<span class="ident" id="8549540">ok</span>&nbsp;<span class="op" id="8549543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549549">if</span>&nbsp;<span class="ident" id="8549552">minline</span>&nbsp;<span class="op" id="8549560">&gt;=</span>&nbsp;<span class="ident" id="8549563">line</span>&nbsp;<span class="op" id="8549568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8549575">//&nbsp;We&#39;ve&nbsp;already&nbsp;covered&nbsp;this&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549615">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549628">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549638">found</span><span class="op" id="8549643">[</span><span class="ident" id="8549644">path</span><span class="op" id="8549648">]</span>&nbsp;<span class="op" id="8549650">=</span>&nbsp;<span class="ident" id="8549652">line</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549661">a</span><span class="op" id="8549662">,</span>&nbsp;<span class="ident" id="8549664">err</span>&nbsp;<span class="op" id="8549668">:=</span>&nbsp;<span class="ident" id="8549671">o</span><span class="op" id="8549672">.</span><span class="ident" id="8549673">alineFromLine</span><span class="op" id="8549686">(</span><span class="ident" id="8549687">path</span><span class="op" id="8549691">,</span>&nbsp;<span class="ident" id="8549693">line</span><span class="op" id="8549697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8549702">if</span>&nbsp;<span class="ident" id="8549705">err</span>&nbsp;<span class="op" id="8549709">!=</span>&nbsp;<span class="ident" id="8549712">nil</span>&nbsp;<span class="op" id="8549716">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549722">t</span><span class="op" id="8549723">.</span><span class="ident" id="8549724">Errorf</span><span class="op" id="8549730">(</span><span class="string" id="8549731">&#34;absolute&nbsp;line&nbsp;%d&nbsp;in&nbsp;object&nbsp;%s&nbsp;maps&nbsp;to&nbsp;%s:%d,&nbsp;but&nbsp;mapping&nbsp;that&nbsp;back&nbsp;gives&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8549814">,</span>&nbsp;<span class="ident" id="8549816">i</span><span class="op" id="8549817">,</span>&nbsp;<span class="ident" id="8549819">o</span><span class="op" id="8549820">.</span><span class="ident" id="8549821">Paths</span><span class="op" id="8549826">[</span><span class="num" id="8549827">0</span><span class="op" id="8549828">]</span><span class="op" id="8549829">.</span><span class="ident" id="8549830">Name</span><span class="op" id="8549834">,</span>&nbsp;<span class="ident" id="8549836">path</span><span class="op" id="8549840">,</span>&nbsp;<span class="ident" id="8549842">line</span><span class="op" id="8549846">,</span>&nbsp;<span class="ident" id="8549848">err</span><span class="op" id="8549851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8549856">}</span>&nbsp;<span class="keyword" id="8549858">else</span>&nbsp;<span class="keyword" id="8549863">if</span>&nbsp;<span class="ident" id="8549866">a</span>&nbsp;<span class="op" id="8549868">!=</span>&nbsp;<span class="ident" id="8549871">i</span>&nbsp;<span class="op" id="8549873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8549879">t</span><span class="op" id="8549880">.</span><span class="ident" id="8549881">Errorf</span><span class="op" id="8549887">(</span><span class="string" id="8549888">&#34;absolute&nbsp;line&nbsp;%d&nbsp;in&nbsp;object&nbsp;%s&nbsp;maps&nbsp;to&nbsp;%s:%d,&nbsp;which&nbsp;maps&nbsp;back&nbsp;to&nbsp;absolute&nbsp;line&nbsp;%d\n&#34;</span><span class="op" id="8549972">,</span>&nbsp;<span class="ident" id="8549974">i</span><span class="op" id="8549975">,</span>&nbsp;<span class="ident" id="8549977">o</span><span class="op" id="8549978">.</span><span class="ident" id="8549979">Paths</span><span class="op" id="8549984">[</span><span class="num" id="8549985">0</span><span class="op" id="8549986">]</span><span class="op" id="8549987">.</span><span class="ident" id="8549988">Name</span><span class="op" id="8549992">,</span>&nbsp;<span class="ident" id="8549994">path</span><span class="op" id="8549998">,</span>&nbsp;<span class="ident" id="8550000">line</span><span class="op" id="8550004">,</span>&nbsp;<span class="ident" id="8550006">a</span><span class="op" id="8550007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550016">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550019">}</span><br>
<span class="lineno"></span><span class="op" id="8550021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8550024">func</span>&nbsp;<span class="ident" id="8550029">TestPCLine</span><span class="op" id="8550039">(</span><span class="ident" id="8550040">t</span>&nbsp;<span class="op" id="8550042">*</span><span class="ident" id="8550043">testing</span><span class="op" id="8550050">.</span><span class="ident" id="8550051">T</span><span class="op" id="8550052">)</span>&nbsp;<span class="op" id="8550054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550057">if</span>&nbsp;<span class="op" id="8550060">!</span><span class="ident" id="8550061">dotest</span><span class="op" id="8550067">(</span><span class="builtintype" id="8550068">false</span><span class="op" id="8550073">)</span>&nbsp;<span class="op" id="8550075">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550079">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550090">defer</span>&nbsp;<span class="ident" id="8550096">endtest</span><span class="op" id="8550103">(</span><span class="op" id="8550104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550108">f</span><span class="op" id="8550109">,</span>&nbsp;<span class="ident" id="8550111">tab</span>&nbsp;<span class="op" id="8550115">:=</span>&nbsp;<span class="ident" id="8550118">crack</span><span class="op" id="8550123">(</span><span class="ident" id="8550124">pclinetestBinary</span><span class="op" id="8550140">,</span>&nbsp;<span class="ident" id="8550142">t</span><span class="op" id="8550143">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550146">text</span>&nbsp;<span class="op" id="8550151">:=</span>&nbsp;<span class="ident" id="8550154">f</span><span class="op" id="8550155">.</span><span class="ident" id="8550156">Section</span><span class="op" id="8550163">(</span><span class="string" id="8550164">&#34;.text&#34;</span><span class="op" id="8550171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550174">textdat</span><span class="op" id="8550181">,</span>&nbsp;<span class="ident" id="8550183">err</span>&nbsp;<span class="op" id="8550187">:=</span>&nbsp;<span class="ident" id="8550190">text</span><span class="op" id="8550194">.</span><span class="ident" id="8550195">Data</span><span class="op" id="8550199">(</span><span class="op" id="8550200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550203">if</span>&nbsp;<span class="ident" id="8550206">err</span>&nbsp;<span class="op" id="8550210">!=</span>&nbsp;<span class="ident" id="8550213">nil</span>&nbsp;<span class="op" id="8550217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550221">t</span><span class="op" id="8550222">.</span><span class="ident" id="8550223">Fatalf</span><span class="op" id="8550229">(</span><span class="string" id="8550230">&#34;reading&nbsp;.text:&nbsp;%v&#34;</span><span class="op" id="8550249">,</span>&nbsp;<span class="ident" id="8550251">err</span><span class="op" id="8550254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550257">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8550261">//&nbsp;Test&nbsp;PCToLine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550279">sym</span>&nbsp;<span class="op" id="8550283">:=</span>&nbsp;<span class="ident" id="8550286">tab</span><span class="op" id="8550289">.</span><span class="ident" id="8550290">LookupFunc</span><span class="op" id="8550300">(</span><span class="string" id="8550301">&#34;linefrompc&#34;</span><span class="op" id="8550313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550316">wantLine</span>&nbsp;<span class="op" id="8550325">:=</span>&nbsp;<span class="num" id="8550328">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550331">for</span>&nbsp;<span class="ident" id="8550335">pc</span>&nbsp;<span class="op" id="8550338">:=</span>&nbsp;<span class="ident" id="8550341">sym</span><span class="op" id="8550344">.</span><span class="ident" id="8550345">Entry</span><span class="op" id="8550350">;</span>&nbsp;<span class="ident" id="8550352">pc</span>&nbsp;<span class="op" id="8550355">&lt;</span>&nbsp;<span class="ident" id="8550357">sym</span><span class="op" id="8550360">.</span><span class="ident" id="8550361">End</span><span class="op" id="8550364">;</span>&nbsp;<span class="ident" id="8550366">pc</span><span class="op" id="8550368">++</span>&nbsp;<span class="op" id="8550371">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550375">off</span>&nbsp;<span class="op" id="8550379">:=</span>&nbsp;<span class="ident" id="8550382">pc</span>&nbsp;<span class="op" id="8550385">-</span>&nbsp;<span class="ident" id="8550387">text</span><span class="op" id="8550391">.</span><span class="ident" id="8550392">Addr</span>&nbsp;<span class="comment" id="8550397">//&nbsp;TODO(rsc):&nbsp;should&nbsp;not&nbsp;need&nbsp;off;&nbsp;bug&nbsp;in&nbsp;8g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550444">if</span>&nbsp;<span class="ident" id="8550447">textdat</span><span class="op" id="8550454">[</span><span class="ident" id="8550455">off</span><span class="op" id="8550458">]</span>&nbsp;<span class="op" id="8550460">==</span>&nbsp;<span class="num" id="8550463">255</span>&nbsp;<span class="op" id="8550467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550472">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550484">wantLine</span>&nbsp;<span class="op" id="8550493">+=</span>&nbsp;<span class="builtintype" id="8550496">int</span><span class="op" id="8550499">(</span><span class="ident" id="8550500">textdat</span><span class="op" id="8550507">[</span><span class="ident" id="8550508">off</span><span class="op" id="8550511">]</span><span class="op" id="8550512">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550516">t</span><span class="op" id="8550517">.</span><span class="ident" id="8550518">Logf</span><span class="op" id="8550522">(</span><span class="string" id="8550523">&#34;off&nbsp;is&nbsp;%d&nbsp;%#x&nbsp;(max&nbsp;%d)&#34;</span><span class="op" id="8550547">,</span>&nbsp;<span class="ident" id="8550549">off</span><span class="op" id="8550552">,</span>&nbsp;<span class="ident" id="8550554">textdat</span><span class="op" id="8550561">[</span><span class="ident" id="8550562">off</span><span class="op" id="8550565">]</span><span class="op" id="8550566">,</span>&nbsp;<span class="ident" id="8550568">sym</span><span class="op" id="8550571">.</span><span class="ident" id="8550572">End</span><span class="op" id="8550575">-</span><span class="ident" id="8550576">pc</span><span class="op" id="8550578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550582">file</span><span class="op" id="8550586">,</span>&nbsp;<span class="ident" id="8550588">line</span><span class="op" id="8550592">,</span>&nbsp;<span class="ident" id="8550594">fn</span>&nbsp;<span class="op" id="8550597">:=</span>&nbsp;<span class="ident" id="8550600">tab</span><span class="op" id="8550603">.</span><span class="ident" id="8550604">PCToLine</span><span class="op" id="8550612">(</span><span class="ident" id="8550613">pc</span><span class="op" id="8550615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8550619">if</span>&nbsp;<span class="ident" id="8550622">fn</span>&nbsp;<span class="op" id="8550625">==</span>&nbsp;<span class="ident" id="8550628">nil</span>&nbsp;<span class="op" id="8550632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550637">t</span><span class="op" id="8550638">.</span><span class="ident" id="8550639">Errorf</span><span class="op" id="8550645">(</span><span class="string" id="8550646">&#34;failed&nbsp;to&nbsp;get&nbsp;line&nbsp;of&nbsp;PC&nbsp;%#x&#34;</span><span class="op" id="8550676">,</span>&nbsp;<span class="ident" id="8550678">pc</span><span class="op" id="8550680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550684">}</span>&nbsp;<span class="keyword" id="8550686">else</span>&nbsp;<span class="keyword" id="8550691">if</span>&nbsp;<span class="op" id="8550694">!</span><span class="ident" id="8550695">strings</span><span class="op" id="8550702">.</span><span class="ident" id="8550703">HasSuffix</span><span class="op" id="8550712">(</span><span class="ident" id="8550713">file</span><span class="op" id="8550717">,</span>&nbsp;<span class="string" id="8550719">&#34;pclinetest.asm&#34;</span><span class="op" id="8550735">)</span>&nbsp;<span class="op" id="8550737">||</span>&nbsp;<span class="ident" id="8550740">line</span>&nbsp;<span class="op" id="8550745">!=</span>&nbsp;<span class="ident" id="8550748">wantLine</span>&nbsp;<span class="op" id="8550757">||</span>&nbsp;<span class="ident" id="8550760">fn</span>&nbsp;<span class="op" id="8550763">!=</span>&nbsp;<span class="ident" id="8550766">sym</span>&nbsp;<span class="op" id="8550770">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550775">t</span><span class="op" id="8550776">.</span><span class="ident" id="8550777">Errorf</span><span class="op" id="8550783">(</span><span class="string" id="8550784">&#34;PCToLine(%#x)&nbsp;=&nbsp;%s:%d&nbsp;(%s),&nbsp;want&nbsp;%s:%d&nbsp;(%s)&#34;</span><span class="op" id="8550829">,</span>&nbsp;<span class="ident" id="8550831">pc</span><span class="op" id="8550833">,</span>&nbsp;<span class="ident" id="8550835">file</span><span class="op" id="8550839">,</span>&nbsp;<span class="ident" id="8550841">line</span><span class="op" id="8550845">,</span>&nbsp;<span class="ident" id="8550847">fn</span><span class="op" id="8550849">.</span><span class="ident" id="8550850">Name</span><span class="op" id="8550854">,</span>&nbsp;<span class="string" id="8550856">&#34;pclinetest.asm&#34;</span><span class="op" id="8550872">,</span>&nbsp;<span class="ident" id="8550874">wantLine</span><span class="op" id="8550882">,</span>&nbsp;<span class="ident" id="8550884">sym</span><span class="op" id="8550887">.</span><span class="ident" id="8550888">Name</span><span class="op" id="8550892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8550899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8550903">//&nbsp;Test&nbsp;LineToPC</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550921">sym</span>&nbsp;<span class="op" id="8550925">=</span>&nbsp;<span class="ident" id="8550927">tab</span><span class="op" id="8550930">.</span><span class="ident" id="8550931">LookupFunc</span><span class="op" id="8550941">(</span><span class="string" id="8550942">&#34;pcfromline&#34;</span><span class="op" id="8550954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550957">lookupline</span>&nbsp;<span class="op" id="8550968">:=</span>&nbsp;<span class="op" id="8550971">-</span><span class="num" id="8550972">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550975">wantLine</span>&nbsp;<span class="op" id="8550984">=</span>&nbsp;<span class="num" id="8550986">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8550989">off</span>&nbsp;<span class="op" id="8550993">:=</span>&nbsp;<span class="ident" id="8550996">uint64</span><span class="op" id="8551002">(</span><span class="num" id="8551003">0</span><span class="op" id="8551004">)</span>&nbsp;<span class="comment" id="8551006">//&nbsp;TODO(rsc):&nbsp;should&nbsp;not&nbsp;need&nbsp;off;&nbsp;bug&nbsp;in&nbsp;8g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551052">for</span>&nbsp;<span class="ident" id="8551056">pc</span>&nbsp;<span class="op" id="8551059">:=</span>&nbsp;<span class="ident" id="8551062">sym</span><span class="op" id="8551065">.</span><span class="ident" id="8551066">Value</span><span class="op" id="8551071">;</span>&nbsp;<span class="ident" id="8551073">pc</span>&nbsp;<span class="op" id="8551076">&lt;</span>&nbsp;<span class="ident" id="8551078">sym</span><span class="op" id="8551081">.</span><span class="ident" id="8551082">End</span><span class="op" id="8551085">;</span>&nbsp;<span class="ident" id="8551087">pc</span>&nbsp;<span class="op" id="8551090">+=</span>&nbsp;<span class="num" id="8551093">2</span>&nbsp;<span class="op" id="8551095">+</span>&nbsp;<span class="ident" id="8551097">uint64</span><span class="op" id="8551103">(</span><span class="ident" id="8551104">textdat</span><span class="op" id="8551111">[</span><span class="ident" id="8551112">off</span><span class="op" id="8551115">]</span><span class="op" id="8551116">)</span>&nbsp;<span class="op" id="8551118">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551122">file</span><span class="op" id="8551126">,</span>&nbsp;<span class="ident" id="8551128">line</span><span class="op" id="8551132">,</span>&nbsp;<span class="ident" id="8551134">fn</span>&nbsp;<span class="op" id="8551137">:=</span>&nbsp;<span class="ident" id="8551140">tab</span><span class="op" id="8551143">.</span><span class="ident" id="8551144">PCToLine</span><span class="op" id="8551152">(</span><span class="ident" id="8551153">pc</span><span class="op" id="8551155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551159">off</span>&nbsp;<span class="op" id="8551163">=</span>&nbsp;<span class="ident" id="8551165">pc</span>&nbsp;<span class="op" id="8551168">-</span>&nbsp;<span class="ident" id="8551170">text</span><span class="op" id="8551174">.</span><span class="ident" id="8551175">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551182">if</span>&nbsp;<span class="ident" id="8551185">textdat</span><span class="op" id="8551192">[</span><span class="ident" id="8551193">off</span><span class="op" id="8551196">]</span>&nbsp;<span class="op" id="8551198">==</span>&nbsp;<span class="num" id="8551201">255</span>&nbsp;<span class="op" id="8551205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551210">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551218">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551222">wantLine</span>&nbsp;<span class="op" id="8551231">+=</span>&nbsp;<span class="builtintype" id="8551234">int</span><span class="op" id="8551237">(</span><span class="ident" id="8551238">textdat</span><span class="op" id="8551245">[</span><span class="ident" id="8551246">off</span><span class="op" id="8551249">]</span><span class="op" id="8551250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551254">if</span>&nbsp;<span class="ident" id="8551257">line</span>&nbsp;<span class="op" id="8551262">!=</span>&nbsp;<span class="ident" id="8551265">wantLine</span>&nbsp;<span class="op" id="8551274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551279">t</span><span class="op" id="8551280">.</span><span class="ident" id="8551281">Errorf</span><span class="op" id="8551287">(</span><span class="string" id="8551288">&#34;expected&nbsp;line&nbsp;%d&nbsp;at&nbsp;PC&nbsp;%#x&nbsp;in&nbsp;pcfromline,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8551338">,</span>&nbsp;<span class="ident" id="8551340">wantLine</span><span class="op" id="8551348">,</span>&nbsp;<span class="ident" id="8551350">pc</span><span class="op" id="8551352">,</span>&nbsp;<span class="ident" id="8551354">line</span><span class="op" id="8551358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551363">off</span>&nbsp;<span class="op" id="8551367">=</span>&nbsp;<span class="ident" id="8551369">pc</span>&nbsp;<span class="op" id="8551372">+</span>&nbsp;<span class="num" id="8551374">1</span>&nbsp;<span class="op" id="8551376">-</span>&nbsp;<span class="ident" id="8551378">text</span><span class="op" id="8551382">.</span><span class="ident" id="8551383">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551391">continue</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551406">if</span>&nbsp;<span class="ident" id="8551409">lookupline</span>&nbsp;<span class="op" id="8551420">==</span>&nbsp;<span class="op" id="8551423">-</span><span class="num" id="8551424">1</span>&nbsp;<span class="op" id="8551426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551431">lookupline</span>&nbsp;<span class="op" id="8551442">=</span>&nbsp;<span class="ident" id="8551444">line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551455">for</span>&nbsp;<span class="op" id="8551459">;</span>&nbsp;<span class="ident" id="8551461">lookupline</span>&nbsp;<span class="op" id="8551472">&lt;=</span>&nbsp;<span class="ident" id="8551475">line</span><span class="op" id="8551479">;</span>&nbsp;<span class="ident" id="8551481">lookupline</span><span class="op" id="8551491">++</span>&nbsp;<span class="op" id="8551494">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551499">pc2</span><span class="op" id="8551502">,</span>&nbsp;<span class="ident" id="8551504">fn2</span><span class="op" id="8551507">,</span>&nbsp;<span class="ident" id="8551509">err</span>&nbsp;<span class="op" id="8551513">:=</span>&nbsp;<span class="ident" id="8551516">tab</span><span class="op" id="8551519">.</span><span class="ident" id="8551520">LineToPC</span><span class="op" id="8551528">(</span><span class="ident" id="8551529">file</span><span class="op" id="8551533">,</span>&nbsp;<span class="ident" id="8551535">lookupline</span><span class="op" id="8551545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551550">if</span>&nbsp;<span class="ident" id="8551553">lookupline</span>&nbsp;<span class="op" id="8551564">!=</span>&nbsp;<span class="ident" id="8551567">line</span>&nbsp;<span class="op" id="8551572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8551578">//&nbsp;Should&nbsp;be&nbsp;nothing&nbsp;on&nbsp;this&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8551616">if</span>&nbsp;<span class="ident" id="8551619">err</span>&nbsp;<span class="op" id="8551623">==</span>&nbsp;<span class="ident" id="8551626">nil</span>&nbsp;<span class="op" id="8551630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551637">t</span><span class="op" id="8551638">.</span><span class="ident" id="8551639">Errorf</span><span class="op" id="8551645">(</span><span class="string" id="8551646">&#34;expected&nbsp;no&nbsp;PC&nbsp;at&nbsp;line&nbsp;%d,&nbsp;got&nbsp;%#x&nbsp;(%s)&#34;</span><span class="op" id="8551687">,</span>&nbsp;<span class="ident" id="8551689">lookupline</span><span class="op" id="8551699">,</span>&nbsp;<span class="ident" id="8551701">pc2</span><span class="op" id="8551704">,</span>&nbsp;<span class="ident" id="8551706">fn2</span><span class="op" id="8551709">.</span><span class="ident" id="8551710">Name</span><span class="op" id="8551714">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551725">}</span>&nbsp;<span class="keyword" id="8551727">else</span>&nbsp;<span class="keyword" id="8551732">if</span>&nbsp;<span class="ident" id="8551735">err</span>&nbsp;<span class="op" id="8551739">!=</span>&nbsp;<span class="ident" id="8551742">nil</span>&nbsp;<span class="op" id="8551746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551752">t</span><span class="op" id="8551753">.</span><span class="ident" id="8551754">Errorf</span><span class="op" id="8551760">(</span><span class="string" id="8551761">&#34;failed&nbsp;to&nbsp;get&nbsp;PC&nbsp;of&nbsp;line&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="8551794">,</span>&nbsp;<span class="ident" id="8551796">lookupline</span><span class="op" id="8551806">,</span>&nbsp;<span class="ident" id="8551808">err</span><span class="op" id="8551811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551816">}</span>&nbsp;<span class="keyword" id="8551818">else</span>&nbsp;<span class="keyword" id="8551823">if</span>&nbsp;<span class="ident" id="8551826">pc</span>&nbsp;<span class="op" id="8551829">!=</span>&nbsp;<span class="ident" id="8551832">pc2</span>&nbsp;<span class="op" id="8551836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551842">t</span><span class="op" id="8551843">.</span><span class="ident" id="8551844">Errorf</span><span class="op" id="8551850">(</span><span class="string" id="8551851">&#34;expected&nbsp;PC&nbsp;%#x&nbsp;(%s)&nbsp;at&nbsp;line&nbsp;%d,&nbsp;got&nbsp;PC&nbsp;%#x&nbsp;(%s)&#34;</span><span class="op" id="8551901">,</span>&nbsp;<span class="ident" id="8551903">pc</span><span class="op" id="8551905">,</span>&nbsp;<span class="ident" id="8551907">fn</span><span class="op" id="8551909">.</span><span class="ident" id="8551910">Name</span><span class="op" id="8551914">,</span>&nbsp;<span class="ident" id="8551916">line</span><span class="op" id="8551920">,</span>&nbsp;<span class="ident" id="8551922">pc2</span><span class="op" id="8551925">,</span>&nbsp;<span class="ident" id="8551927">fn2</span><span class="op" id="8551930">.</span><span class="ident" id="8551931">Name</span><span class="op" id="8551935">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8551948">off</span>&nbsp;<span class="op" id="8551952">=</span>&nbsp;<span class="ident" id="8551954">pc</span>&nbsp;<span class="op" id="8551957">+</span>&nbsp;<span class="num" id="8551959">1</span>&nbsp;<span class="op" id="8551961">-</span>&nbsp;<span class="ident" id="8551963">text</span><span class="op" id="8551967">.</span><span class="ident" id="8551968">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8551974">}</span><br>
<span class="lineno"></span><span class="op" id="8551976">}</span>
</div>
</body>
</html>
