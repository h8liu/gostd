<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html" class="current">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7146058">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7146113">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7146167">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7146218">package</span>&nbsp;<span class="ident" id="7146226">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146234">import</span>&nbsp;<span class="op" id="7146241">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7146244">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7146253">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7146270">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7146291">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7146302">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7146312">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7146315">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7146360">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7146387">func</span>&nbsp;<span class="ident" id="7146392">RemoveAll</span><span class="op" id="7146401">(</span><span class="op" id="7146402">)</span>&nbsp;<span class="op" id="7146404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146407">mutex</span><span class="op" id="7146412">.</span><span class="ident" id="7146413">Lock</span><span class="op" id="7146417">(</span><span class="op" id="7146418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146421">defer</span>&nbsp;<span class="ident" id="7146427">mutex</span><span class="op" id="7146432">.</span><span class="ident" id="7146433">Unlock</span><span class="op" id="7146439">(</span><span class="op" id="7146440">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146443">vars</span>&nbsp;<span class="op" id="7146448">=</span>&nbsp;<span class="builtinfunc" id="7146450">make</span><span class="op" id="7146454">(</span><span class="keyword" id="7146455">map</span><span class="op" id="7146458">[</span><span class="builtintype" id="7146459">string</span><span class="op" id="7146465">]</span><span class="ident" id="7146466">Var</span><span class="op" id="7146469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146472">varKeys</span>&nbsp;<span class="op" id="7146480">=</span>&nbsp;<span class="builtintype" id="7146482">nil</span><br>
<span class="lineno"></span><span class="op" id="7146486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146489">func</span>&nbsp;<span class="ident" id="7146494">TestInt</span><span class="op" id="7146501">(</span><span class="ident" id="7146502">t</span>&nbsp;<span class="op" id="7146504">*</span><span class="ident" id="7146505">testing</span><span class="op" id="7146512">.</span><span class="ident" id="7146513">T</span><span class="op" id="7146514">)</span>&nbsp;<span class="op" id="7146516">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146519">RemoveAll</span><span class="op" id="7146528">(</span><span class="op" id="7146529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146532">reqs</span>&nbsp;<span class="op" id="7146537">:=</span>&nbsp;<span class="ident" id="7146540">NewInt</span><span class="op" id="7146546">(</span><span class="string" id="7146547">&#34;requests&#34;</span><span class="op" id="7146557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146560">if</span>&nbsp;<span class="ident" id="7146563">reqs</span><span class="op" id="7146567">.</span><span class="ident" id="7146568">i</span>&nbsp;<span class="op" id="7146570">!=</span>&nbsp;<span class="num" id="7146573">0</span>&nbsp;<span class="op" id="7146575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146579">t</span><span class="op" id="7146580">.</span><span class="ident" id="7146581">Errorf</span><span class="op" id="7146587">(</span><span class="string" id="7146588">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7146609">,</span>&nbsp;<span class="ident" id="7146611">reqs</span><span class="op" id="7146615">.</span><span class="ident" id="7146616">i</span><span class="op" id="7146617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7146620">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146623">if</span>&nbsp;<span class="ident" id="7146626">reqs</span>&nbsp;<span class="op" id="7146631">!=</span>&nbsp;<span class="ident" id="7146634">Get</span><span class="op" id="7146637">(</span><span class="string" id="7146638">&#34;requests&#34;</span><span class="op" id="7146648">)</span><span class="op" id="7146649">.</span><span class="op" id="7146650">(</span><span class="op" id="7146651">*</span><span class="ident" id="7146652">Int</span><span class="op" id="7146655">)</span>&nbsp;<span class="op" id="7146657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146661">t</span><span class="op" id="7146662">.</span><span class="ident" id="7146663">Errorf</span><span class="op" id="7146669">(</span><span class="string" id="7146670">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7146685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7146688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146692">reqs</span><span class="op" id="7146696">.</span><span class="ident" id="7146697">Add</span><span class="op" id="7146700">(</span><span class="num" id="7146701">1</span><span class="op" id="7146702">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146705">reqs</span><span class="op" id="7146709">.</span><span class="ident" id="7146710">Add</span><span class="op" id="7146713">(</span><span class="num" id="7146714">3</span><span class="op" id="7146715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146718">if</span>&nbsp;<span class="ident" id="7146721">reqs</span><span class="op" id="7146725">.</span><span class="ident" id="7146726">i</span>&nbsp;<span class="op" id="7146728">!=</span>&nbsp;<span class="num" id="7146731">4</span>&nbsp;<span class="op" id="7146733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146737">t</span><span class="op" id="7146738">.</span><span class="ident" id="7146739">Errorf</span><span class="op" id="7146745">(</span><span class="string" id="7146746">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7146767">,</span>&nbsp;<span class="ident" id="7146769">reqs</span><span class="op" id="7146773">.</span><span class="ident" id="7146774">i</span><span class="op" id="7146775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7146778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146782">if</span>&nbsp;<span class="ident" id="7146785">s</span>&nbsp;<span class="op" id="7146787">:=</span>&nbsp;<span class="ident" id="7146790">reqs</span><span class="op" id="7146794">.</span><span class="ident" id="7146795">String</span><span class="op" id="7146801">(</span><span class="op" id="7146802">)</span><span class="op" id="7146803">;</span>&nbsp;<span class="ident" id="7146805">s</span>&nbsp;<span class="op" id="7146807">!=</span>&nbsp;<span class="string" id="7146810">&#34;4&#34;</span>&nbsp;<span class="op" id="7146814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146818">t</span><span class="op" id="7146819">.</span><span class="ident" id="7146820">Errorf</span><span class="op" id="7146826">(</span><span class="string" id="7146827">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7146859">,</span>&nbsp;<span class="ident" id="7146861">s</span><span class="op" id="7146862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7146865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146869">reqs</span><span class="op" id="7146873">.</span><span class="ident" id="7146874">Set</span><span class="op" id="7146877">(</span><span class="op" id="7146878">-</span><span class="num" id="7146879">2</span><span class="op" id="7146880">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7146883">if</span>&nbsp;<span class="ident" id="7146886">reqs</span><span class="op" id="7146890">.</span><span class="ident" id="7146891">i</span>&nbsp;<span class="op" id="7146893">!=</span>&nbsp;<span class="op" id="7146896">-</span><span class="num" id="7146897">2</span>&nbsp;<span class="op" id="7146899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146903">t</span><span class="op" id="7146904">.</span><span class="ident" id="7146905">Errorf</span><span class="op" id="7146911">(</span><span class="string" id="7146912">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7146934">,</span>&nbsp;<span class="ident" id="7146936">reqs</span><span class="op" id="7146940">.</span><span class="ident" id="7146941">i</span><span class="op" id="7146942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7146945">}</span><br>
<span class="lineno"></span><span class="op" id="7146947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7146950">func</span>&nbsp;<span class="ident" id="7146955">TestFloat</span><span class="op" id="7146964">(</span><span class="ident" id="7146965">t</span>&nbsp;<span class="op" id="7146967">*</span><span class="ident" id="7146968">testing</span><span class="op" id="7146975">.</span><span class="ident" id="7146976">T</span><span class="op" id="7146977">)</span>&nbsp;<span class="op" id="7146979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146982">RemoveAll</span><span class="op" id="7146991">(</span><span class="op" id="7146992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7146995">reqs</span>&nbsp;<span class="op" id="7147000">:=</span>&nbsp;<span class="ident" id="7147003">NewFloat</span><span class="op" id="7147011">(</span><span class="string" id="7147012">&#34;requests-float&#34;</span><span class="op" id="7147028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147031">if</span>&nbsp;<span class="ident" id="7147034">reqs</span><span class="op" id="7147038">.</span><span class="ident" id="7147039">f</span>&nbsp;<span class="op" id="7147041">!=</span>&nbsp;<span class="num" id="7147044">0.0</span>&nbsp;<span class="op" id="7147048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147052">t</span><span class="op" id="7147053">.</span><span class="ident" id="7147054">Errorf</span><span class="op" id="7147060">(</span><span class="string" id="7147061">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7147082">,</span>&nbsp;<span class="ident" id="7147084">reqs</span><span class="op" id="7147088">.</span><span class="ident" id="7147089">f</span><span class="op" id="7147090">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147096">if</span>&nbsp;<span class="ident" id="7147099">reqs</span>&nbsp;<span class="op" id="7147104">!=</span>&nbsp;<span class="ident" id="7147107">Get</span><span class="op" id="7147110">(</span><span class="string" id="7147111">&#34;requests-float&#34;</span><span class="op" id="7147127">)</span><span class="op" id="7147128">.</span><span class="op" id="7147129">(</span><span class="op" id="7147130">*</span><span class="ident" id="7147131">Float</span><span class="op" id="7147136">)</span>&nbsp;<span class="op" id="7147138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147142">t</span><span class="op" id="7147143">.</span><span class="ident" id="7147144">Errorf</span><span class="op" id="7147150">(</span><span class="string" id="7147151">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7147166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147173">reqs</span><span class="op" id="7147177">.</span><span class="ident" id="7147178">Add</span><span class="op" id="7147181">(</span><span class="num" id="7147182">1.5</span><span class="op" id="7147185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147188">reqs</span><span class="op" id="7147192">.</span><span class="ident" id="7147193">Add</span><span class="op" id="7147196">(</span><span class="num" id="7147197">1.25</span><span class="op" id="7147201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147204">if</span>&nbsp;<span class="ident" id="7147207">reqs</span><span class="op" id="7147211">.</span><span class="ident" id="7147212">f</span>&nbsp;<span class="op" id="7147214">!=</span>&nbsp;<span class="num" id="7147217">2.75</span>&nbsp;<span class="op" id="7147222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147226">t</span><span class="op" id="7147227">.</span><span class="ident" id="7147228">Errorf</span><span class="op" id="7147234">(</span><span class="string" id="7147235">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7147259">,</span>&nbsp;<span class="ident" id="7147261">reqs</span><span class="op" id="7147265">.</span><span class="ident" id="7147266">f</span><span class="op" id="7147267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147270">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147274">if</span>&nbsp;<span class="ident" id="7147277">s</span>&nbsp;<span class="op" id="7147279">:=</span>&nbsp;<span class="ident" id="7147282">reqs</span><span class="op" id="7147286">.</span><span class="ident" id="7147287">String</span><span class="op" id="7147293">(</span><span class="op" id="7147294">)</span><span class="op" id="7147295">;</span>&nbsp;<span class="ident" id="7147297">s</span>&nbsp;<span class="op" id="7147299">!=</span>&nbsp;<span class="string" id="7147302">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7147309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147313">t</span><span class="op" id="7147314">.</span><span class="ident" id="7147315">Errorf</span><span class="op" id="7147321">(</span><span class="string" id="7147322">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7147357">,</span>&nbsp;<span class="ident" id="7147359">s</span><span class="op" id="7147360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147367">reqs</span><span class="op" id="7147371">.</span><span class="ident" id="7147372">Add</span><span class="op" id="7147375">(</span><span class="op" id="7147376">-</span><span class="num" id="7147377">2</span><span class="op" id="7147378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147381">if</span>&nbsp;<span class="ident" id="7147384">reqs</span><span class="op" id="7147388">.</span><span class="ident" id="7147389">f</span>&nbsp;<span class="op" id="7147391">!=</span>&nbsp;<span class="num" id="7147394">0.75</span>&nbsp;<span class="op" id="7147399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147403">t</span><span class="op" id="7147404">.</span><span class="ident" id="7147405">Errorf</span><span class="op" id="7147411">(</span><span class="string" id="7147412">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7147436">,</span>&nbsp;<span class="ident" id="7147438">reqs</span><span class="op" id="7147442">.</span><span class="ident" id="7147443">f</span><span class="op" id="7147444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147447">}</span><br>
<span class="lineno"></span><span class="op" id="7147449">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7147452">func</span>&nbsp;<span class="ident" id="7147457">TestString</span><span class="op" id="7147467">(</span><span class="ident" id="7147468">t</span>&nbsp;<span class="op" id="7147470">*</span><span class="ident" id="7147471">testing</span><span class="op" id="7147478">.</span><span class="ident" id="7147479">T</span><span class="op" id="7147480">)</span>&nbsp;<span class="op" id="7147482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147485">RemoveAll</span><span class="op" id="7147494">(</span><span class="op" id="7147495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147498">name</span>&nbsp;<span class="op" id="7147503">:=</span>&nbsp;<span class="ident" id="7147506">NewString</span><span class="op" id="7147515">(</span><span class="string" id="7147516">&#34;my-name&#34;</span><span class="op" id="7147525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147528">if</span>&nbsp;<span class="ident" id="7147531">name</span><span class="op" id="7147535">.</span><span class="ident" id="7147536">s</span>&nbsp;<span class="op" id="7147538">!=</span>&nbsp;<span class="string" id="7147541">&#34;&#34;</span>&nbsp;<span class="op" id="7147544">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147548">t</span><span class="op" id="7147549">.</span><span class="ident" id="7147550">Errorf</span><span class="op" id="7147556">(</span><span class="string" id="7147557">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7147581">,</span>&nbsp;<span class="ident" id="7147583">name</span><span class="op" id="7147587">.</span><span class="ident" id="7147588">s</span><span class="op" id="7147589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147596">name</span><span class="op" id="7147600">.</span><span class="ident" id="7147601">Set</span><span class="op" id="7147604">(</span><span class="string" id="7147605">&#34;Mike&#34;</span><span class="op" id="7147611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147614">if</span>&nbsp;<span class="ident" id="7147617">name</span><span class="op" id="7147621">.</span><span class="ident" id="7147622">s</span>&nbsp;<span class="op" id="7147624">!=</span>&nbsp;<span class="string" id="7147627">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7147634">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147638">t</span><span class="op" id="7147639">.</span><span class="ident" id="7147640">Errorf</span><span class="op" id="7147646">(</span><span class="string" id="7147647">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7147675">,</span>&nbsp;<span class="ident" id="7147677">name</span><span class="op" id="7147681">.</span><span class="ident" id="7147682">s</span><span class="op" id="7147683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147690">if</span>&nbsp;<span class="ident" id="7147693">s</span>&nbsp;<span class="op" id="7147695">:=</span>&nbsp;<span class="ident" id="7147698">name</span><span class="op" id="7147702">.</span><span class="ident" id="7147703">String</span><span class="op" id="7147709">(</span><span class="op" id="7147710">)</span><span class="op" id="7147711">;</span>&nbsp;<span class="ident" id="7147713">s</span>&nbsp;<span class="op" id="7147715">!=</span>&nbsp;<span class="string" id="7147718">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7147729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147733">t</span><span class="op" id="7147734">.</span><span class="ident" id="7147735">Errorf</span><span class="op" id="7147741">(</span><span class="string" id="7147742">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7147781">,</span>&nbsp;<span class="ident" id="7147783">s</span><span class="op" id="7147784">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7147787">}</span><br>
<span class="lineno"></span><span class="op" id="7147789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7147792">func</span>&nbsp;<span class="ident" id="7147797">TestMapCounter</span><span class="op" id="7147811">(</span><span class="ident" id="7147812">t</span>&nbsp;<span class="op" id="7147814">*</span><span class="ident" id="7147815">testing</span><span class="op" id="7147822">.</span><span class="ident" id="7147823">T</span><span class="op" id="7147824">)</span>&nbsp;<span class="op" id="7147826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147829">RemoveAll</span><span class="op" id="7147838">(</span><span class="op" id="7147839">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147842">colors</span>&nbsp;<span class="op" id="7147849">:=</span>&nbsp;<span class="ident" id="7147852">NewMap</span><span class="op" id="7147858">(</span><span class="string" id="7147859">&#34;bike-shed-colors&#34;</span><span class="op" id="7147877">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147881">colors</span><span class="op" id="7147887">.</span><span class="ident" id="7147888">Add</span><span class="op" id="7147891">(</span><span class="string" id="7147892">&#34;red&#34;</span><span class="op" id="7147897">,</span>&nbsp;<span class="num" id="7147899">1</span><span class="op" id="7147900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147903">colors</span><span class="op" id="7147909">.</span><span class="ident" id="7147910">Add</span><span class="op" id="7147913">(</span><span class="string" id="7147914">&#34;red&#34;</span><span class="op" id="7147919">,</span>&nbsp;<span class="num" id="7147921">2</span><span class="op" id="7147922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147925">colors</span><span class="op" id="7147931">.</span><span class="ident" id="7147932">Add</span><span class="op" id="7147935">(</span><span class="string" id="7147936">&#34;blue&#34;</span><span class="op" id="7147942">,</span>&nbsp;<span class="num" id="7147944">4</span><span class="op" id="7147945">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7147948">colors</span><span class="op" id="7147954">.</span><span class="ident" id="7147955">AddFloat</span><span class="op" id="7147963">(</span><span class="string" id="7147964">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7147980">,</span>&nbsp;<span class="num" id="7147982">4.125</span><span class="op" id="7147987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7147990">if</span>&nbsp;<span class="ident" id="7147993">x</span>&nbsp;<span class="op" id="7147995">:=</span>&nbsp;<span class="ident" id="7147998">colors</span><span class="op" id="7148004">.</span><span class="ident" id="7148005">m</span><span class="op" id="7148006">[</span><span class="string" id="7148007">&#34;red&#34;</span><span class="op" id="7148012">]</span><span class="op" id="7148013">.</span><span class="op" id="7148014">(</span><span class="op" id="7148015">*</span><span class="ident" id="7148016">Int</span><span class="op" id="7148019">)</span><span class="op" id="7148020">.</span><span class="ident" id="7148021">i</span><span class="op" id="7148022">;</span>&nbsp;<span class="ident" id="7148024">x</span>&nbsp;<span class="op" id="7148026">!=</span>&nbsp;<span class="num" id="7148029">3</span>&nbsp;<span class="op" id="7148031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148035">t</span><span class="op" id="7148036">.</span><span class="ident" id="7148037">Errorf</span><span class="op" id="7148043">(</span><span class="string" id="7148044">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7148076">,</span>&nbsp;<span class="ident" id="7148078">x</span><span class="op" id="7148079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148085">if</span>&nbsp;<span class="ident" id="7148088">x</span>&nbsp;<span class="op" id="7148090">:=</span>&nbsp;<span class="ident" id="7148093">colors</span><span class="op" id="7148099">.</span><span class="ident" id="7148100">m</span><span class="op" id="7148101">[</span><span class="string" id="7148102">&#34;blue&#34;</span><span class="op" id="7148108">]</span><span class="op" id="7148109">.</span><span class="op" id="7148110">(</span><span class="op" id="7148111">*</span><span class="ident" id="7148112">Int</span><span class="op" id="7148115">)</span><span class="op" id="7148116">.</span><span class="ident" id="7148117">i</span><span class="op" id="7148118">;</span>&nbsp;<span class="ident" id="7148120">x</span>&nbsp;<span class="op" id="7148122">!=</span>&nbsp;<span class="num" id="7148125">4</span>&nbsp;<span class="op" id="7148127">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148131">t</span><span class="op" id="7148132">.</span><span class="ident" id="7148133">Errorf</span><span class="op" id="7148139">(</span><span class="string" id="7148140">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7148173">,</span>&nbsp;<span class="ident" id="7148175">x</span><span class="op" id="7148176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148182">if</span>&nbsp;<span class="ident" id="7148185">x</span>&nbsp;<span class="op" id="7148187">:=</span>&nbsp;<span class="ident" id="7148190">colors</span><span class="op" id="7148196">.</span><span class="ident" id="7148197">m</span><span class="op" id="7148198">[</span><span class="string" id="7148199">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7148215">]</span><span class="op" id="7148216">.</span><span class="op" id="7148217">(</span><span class="op" id="7148218">*</span><span class="ident" id="7148219">Float</span><span class="op" id="7148224">)</span><span class="op" id="7148225">.</span><span class="ident" id="7148226">f</span><span class="op" id="7148227">;</span>&nbsp;<span class="ident" id="7148229">x</span>&nbsp;<span class="op" id="7148231">!=</span>&nbsp;<span class="num" id="7148234">4.125</span>&nbsp;<span class="op" id="7148240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148244">t</span><span class="op" id="7148245">.</span><span class="ident" id="7148246">Errorf</span><span class="op" id="7148252">(</span><span class="string" id="7148253">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7148298">,</span>&nbsp;<span class="ident" id="7148300">x</span><span class="op" id="7148301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148304">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7148308">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7148361">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148410">s</span>&nbsp;<span class="op" id="7148412">:=</span>&nbsp;<span class="ident" id="7148415">colors</span><span class="op" id="7148421">.</span><span class="ident" id="7148422">String</span><span class="op" id="7148428">(</span><span class="op" id="7148429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148432">var</span>&nbsp;<span class="ident" id="7148436">j</span>&nbsp;<span class="keyword" id="7148438">interface</span><span class="op" id="7148447">{</span><span class="op" id="7148448">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148451">err</span>&nbsp;<span class="op" id="7148455">:=</span>&nbsp;<span class="ident" id="7148458">json</span><span class="op" id="7148462">.</span><span class="ident" id="7148463">Unmarshal</span><span class="op" id="7148472">(</span><span class="op" id="7148473">[</span><span class="op" id="7148474">]</span><span class="builtintype" id="7148475">byte</span><span class="op" id="7148479">(</span><span class="ident" id="7148480">s</span><span class="op" id="7148481">)</span><span class="op" id="7148482">,</span>&nbsp;<span class="op" id="7148484">&amp;</span><span class="ident" id="7148485">j</span><span class="op" id="7148486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148489">if</span>&nbsp;<span class="ident" id="7148492">err</span>&nbsp;<span class="op" id="7148496">!=</span>&nbsp;<span class="builtintype" id="7148499">nil</span>&nbsp;<span class="op" id="7148503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148507">t</span><span class="op" id="7148508">.</span><span class="ident" id="7148509">Errorf</span><span class="op" id="7148515">(</span><span class="string" id="7148516">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7148554">,</span>&nbsp;<span class="ident" id="7148556">err</span><span class="op" id="7148559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148565">m</span><span class="op" id="7148566">,</span>&nbsp;<span class="ident" id="7148568">ok</span>&nbsp;<span class="op" id="7148571">:=</span>&nbsp;<span class="ident" id="7148574">j</span><span class="op" id="7148575">.</span><span class="op" id="7148576">(</span><span class="keyword" id="7148577">map</span><span class="op" id="7148580">[</span><span class="builtintype" id="7148581">string</span><span class="op" id="7148587">]</span><span class="keyword" id="7148588">interface</span><span class="op" id="7148597">{</span><span class="op" id="7148598">}</span><span class="op" id="7148599">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148602">if</span>&nbsp;<span class="op" id="7148605">!</span><span class="ident" id="7148606">ok</span>&nbsp;<span class="op" id="7148609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148613">t</span><span class="op" id="7148614">.</span><span class="ident" id="7148615">Error</span><span class="op" id="7148620">(</span><span class="string" id="7148621">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7148660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148666">red</span>&nbsp;<span class="op" id="7148670">:=</span>&nbsp;<span class="ident" id="7148673">m</span><span class="op" id="7148674">[</span><span class="string" id="7148675">&#34;red&#34;</span><span class="op" id="7148680">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148683">x</span><span class="op" id="7148684">,</span>&nbsp;<span class="ident" id="7148686">ok</span>&nbsp;<span class="op" id="7148689">:=</span>&nbsp;<span class="ident" id="7148692">red</span><span class="op" id="7148695">.</span><span class="op" id="7148696">(</span><span class="builtintype" id="7148697">float64</span><span class="op" id="7148704">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148707">if</span>&nbsp;<span class="op" id="7148710">!</span><span class="ident" id="7148711">ok</span>&nbsp;<span class="op" id="7148714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148718">t</span><span class="op" id="7148719">.</span><span class="ident" id="7148720">Error</span><span class="op" id="7148725">(</span><span class="string" id="7148726">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7148755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148761">if</span>&nbsp;<span class="ident" id="7148764">x</span>&nbsp;<span class="op" id="7148766">!=</span>&nbsp;<span class="num" id="7148769">3</span>&nbsp;<span class="op" id="7148771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148775">t</span><span class="op" id="7148776">.</span><span class="ident" id="7148777">Errorf</span><span class="op" id="7148783">(</span><span class="string" id="7148784">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7148802">,</span>&nbsp;<span class="ident" id="7148804">x</span><span class="op" id="7148805">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7148808">}</span><br>
<span class="lineno"></span><span class="op" id="7148810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7148813">func</span>&nbsp;<span class="ident" id="7148818">TestFunc</span><span class="op" id="7148826">(</span><span class="ident" id="7148827">t</span>&nbsp;<span class="op" id="7148829">*</span><span class="ident" id="7148830">testing</span><span class="op" id="7148837">.</span><span class="ident" id="7148838">T</span><span class="op" id="7148839">)</span>&nbsp;<span class="op" id="7148841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148844">RemoveAll</span><span class="op" id="7148853">(</span><span class="op" id="7148854">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148857">var</span>&nbsp;<span class="ident" id="7148861">x</span>&nbsp;<span class="keyword" id="7148863">interface</span><span class="op" id="7148872">{</span><span class="op" id="7148873">}</span>&nbsp;<span class="op" id="7148875">=</span>&nbsp;<span class="op" id="7148877">[</span><span class="op" id="7148878">]</span><span class="builtintype" id="7148879">string</span><span class="op" id="7148885">{</span><span class="string" id="7148886">&#34;a&#34;</span><span class="op" id="7148889">,</span>&nbsp;<span class="string" id="7148891">&#34;b&#34;</span><span class="op" id="7148894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148897">f</span>&nbsp;<span class="op" id="7148899">:=</span>&nbsp;<span class="ident" id="7148902">Func</span><span class="op" id="7148906">(</span><span class="keyword" id="7148907">func</span><span class="op" id="7148911">(</span><span class="op" id="7148912">)</span>&nbsp;<span class="keyword" id="7148914">interface</span><span class="op" id="7148923">{</span><span class="op" id="7148924">}</span>&nbsp;<span class="op" id="7148926">{</span>&nbsp;<span class="keyword" id="7148928">return</span>&nbsp;<span class="ident" id="7148935">x</span>&nbsp;<span class="op" id="7148937">}</span><span class="op" id="7148938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7148941">if</span>&nbsp;<span class="ident" id="7148944">s</span><span class="op" id="7148945">,</span>&nbsp;<span class="ident" id="7148947">exp</span>&nbsp;<span class="op" id="7148951">:=</span>&nbsp;<span class="ident" id="7148954">f</span><span class="op" id="7148955">.</span><span class="ident" id="7148956">String</span><span class="op" id="7148962">(</span><span class="op" id="7148963">)</span><span class="op" id="7148964">,</span>&nbsp;<span class="string" id="7148966">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7148977">;</span>&nbsp;<span class="ident" id="7148979">s</span>&nbsp;<span class="op" id="7148981">!=</span>&nbsp;<span class="ident" id="7148984">exp</span>&nbsp;<span class="op" id="7148988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7148992">t</span><span class="op" id="7148993">.</span><span class="ident" id="7148994">Errorf</span><span class="op" id="7149000">(</span><span class="string" id="7149001">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7149027">,</span>&nbsp;<span class="ident" id="7149029">s</span><span class="op" id="7149030">,</span>&nbsp;<span class="ident" id="7149032">exp</span><span class="op" id="7149035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7149038">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149042">x</span>&nbsp;<span class="op" id="7149044">=</span>&nbsp;<span class="num" id="7149046">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7149050">if</span>&nbsp;<span class="ident" id="7149053">s</span><span class="op" id="7149054">,</span>&nbsp;<span class="ident" id="7149056">exp</span>&nbsp;<span class="op" id="7149060">:=</span>&nbsp;<span class="ident" id="7149063">f</span><span class="op" id="7149064">.</span><span class="ident" id="7149065">String</span><span class="op" id="7149071">(</span><span class="op" id="7149072">)</span><span class="op" id="7149073">,</span>&nbsp;<span class="string" id="7149075">`17`</span><span class="op" id="7149079">;</span>&nbsp;<span class="ident" id="7149081">s</span>&nbsp;<span class="op" id="7149083">!=</span>&nbsp;<span class="ident" id="7149086">exp</span>&nbsp;<span class="op" id="7149090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149094">t</span><span class="op" id="7149095">.</span><span class="ident" id="7149096">Errorf</span><span class="op" id="7149102">(</span><span class="string" id="7149103">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7149129">,</span>&nbsp;<span class="ident" id="7149131">s</span><span class="op" id="7149132">,</span>&nbsp;<span class="ident" id="7149134">exp</span><span class="op" id="7149137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7149140">}</span><br>
<span class="lineno">145</span><span class="op" id="7149142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7149145">func</span>&nbsp;<span class="ident" id="7149150">TestHandler</span><span class="op" id="7149161">(</span><span class="ident" id="7149162">t</span>&nbsp;<span class="op" id="7149164">*</span><span class="ident" id="7149165">testing</span><span class="op" id="7149172">.</span><span class="ident" id="7149173">T</span><span class="op" id="7149174">)</span>&nbsp;<span class="op" id="7149176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149179">RemoveAll</span><span class="op" id="7149188">(</span><span class="op" id="7149189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149192">m</span>&nbsp;<span class="op" id="7149194">:=</span>&nbsp;<span class="ident" id="7149197">NewMap</span><span class="op" id="7149203">(</span><span class="string" id="7149204">&#34;map1&#34;</span><span class="op" id="7149210">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149213">m</span><span class="op" id="7149214">.</span><span class="ident" id="7149215">Add</span><span class="op" id="7149218">(</span><span class="string" id="7149219">&#34;a&#34;</span><span class="op" id="7149222">,</span>&nbsp;<span class="num" id="7149224">1</span><span class="op" id="7149225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149228">m</span><span class="op" id="7149229">.</span><span class="ident" id="7149230">Add</span><span class="op" id="7149233">(</span><span class="string" id="7149234">&#34;z&#34;</span><span class="op" id="7149237">,</span>&nbsp;<span class="num" id="7149239">2</span><span class="op" id="7149240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149243">m2</span>&nbsp;<span class="op" id="7149246">:=</span>&nbsp;<span class="ident" id="7149249">NewMap</span><span class="op" id="7149255">(</span><span class="string" id="7149256">&#34;map2&#34;</span><span class="op" id="7149262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7149265">for</span>&nbsp;<span class="ident" id="7149269">i</span>&nbsp;<span class="op" id="7149271">:=</span>&nbsp;<span class="num" id="7149274">0</span><span class="op" id="7149275">;</span>&nbsp;<span class="ident" id="7149277">i</span>&nbsp;<span class="op" id="7149279">&lt;</span>&nbsp;<span class="num" id="7149281">9</span><span class="op" id="7149282">;</span>&nbsp;<span class="ident" id="7149284">i</span><span class="op" id="7149285">++</span>&nbsp;<span class="op" id="7149288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149292">m2</span><span class="op" id="7149294">.</span><span class="ident" id="7149295">Add</span><span class="op" id="7149298">(</span><span class="ident" id="7149299">strconv</span><span class="op" id="7149306">.</span><span class="ident" id="7149307">Itoa</span><span class="op" id="7149311">(</span><span class="ident" id="7149312">i</span><span class="op" id="7149313">)</span><span class="op" id="7149314">,</span>&nbsp;<span class="ident" id="7149316">int64</span><span class="op" id="7149321">(</span><span class="ident" id="7149322">i</span><span class="op" id="7149323">)</span><span class="op" id="7149324">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7149327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149330">rr</span>&nbsp;<span class="op" id="7149333">:=</span>&nbsp;<span class="ident" id="7149336">httptest</span><span class="op" id="7149344">.</span><span class="ident" id="7149345">NewRecorder</span><span class="op" id="7149356">(</span><span class="op" id="7149357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149360">rr</span><span class="op" id="7149362">.</span><span class="ident" id="7149363">Body</span>&nbsp;<span class="op" id="7149368">=</span>&nbsp;<span class="builtinfunc" id="7149370">new</span><span class="op" id="7149373">(</span><span class="ident" id="7149374">bytes</span><span class="op" id="7149379">.</span><span class="ident" id="7149380">Buffer</span><span class="op" id="7149386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149389">expvarHandler</span><span class="op" id="7149402">(</span><span class="ident" id="7149403">rr</span><span class="op" id="7149405">,</span>&nbsp;<span class="builtintype" id="7149407">nil</span><span class="op" id="7149410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149413">want</span>&nbsp;<span class="op" id="7149418">:=</span>&nbsp;<span class="string" id="7149421">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7149536">if</span>&nbsp;<span class="ident" id="7149539">got</span>&nbsp;<span class="op" id="7149543">:=</span>&nbsp;<span class="ident" id="7149546">rr</span><span class="op" id="7149548">.</span><span class="ident" id="7149549">Body</span><span class="op" id="7149553">.</span><span class="ident" id="7149554">String</span><span class="op" id="7149560">(</span><span class="op" id="7149561">)</span><span class="op" id="7149562">;</span>&nbsp;<span class="ident" id="7149564">got</span>&nbsp;<span class="op" id="7149568">!=</span>&nbsp;<span class="ident" id="7149571">want</span>&nbsp;<span class="op" id="7149576">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7149580">t</span><span class="op" id="7149581">.</span><span class="ident" id="7149582">Errorf</span><span class="op" id="7149588">(</span><span class="string" id="7149589">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7149625">,</span>&nbsp;<span class="ident" id="7149627">got</span><span class="op" id="7149630">,</span>&nbsp;<span class="ident" id="7149632">want</span><span class="op" id="7149636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7149639">}</span><br>
<span class="lineno"></span><span class="op" id="7149641">}</span>
</div>
</body>
</html>
