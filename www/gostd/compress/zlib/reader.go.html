<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5974052">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5974107">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5974161">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5974212">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;w.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;r,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;io.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;r.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5974655">package</span>&nbsp;<span class="ident" id="5974663">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5974669">import</span>&nbsp;<span class="op" id="5974676">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974679">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974688">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974706">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974716">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974724">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5974740">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5974745">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5974748">const</span>&nbsp;<span class="ident" id="5974754">zlibDeflate</span>&nbsp;<span class="op" id="5974766">=</span>&nbsp;<span class="num" id="5974768">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5974771">var</span>&nbsp;<span class="op" id="5974775">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974778">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5974859">ErrChecksum</span>&nbsp;<span class="op" id="5974871">=</span>&nbsp;<span class="ident" id="5974873">errors</span><span class="op" id="5974879">.</span><span class="ident" id="5974880">New</span><span class="op" id="5974883">(</span><span class="string" id="5974884">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5974908">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974911">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5974996">ErrDictionary</span>&nbsp;<span class="op" id="5975010">=</span>&nbsp;<span class="ident" id="5975012">errors</span><span class="op" id="5975018">.</span><span class="ident" id="5975019">New</span><span class="op" id="5975022">(</span><span class="string" id="5975023">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5975049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5975052">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975129">ErrHeader</span>&nbsp;<span class="op" id="5975139">=</span>&nbsp;<span class="ident" id="5975141">errors</span><span class="op" id="5975147">.</span><span class="ident" id="5975148">New</span><span class="op" id="5975151">(</span><span class="string" id="5975152">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5975174">)</span><br>
<span class="lineno"></span><span class="op" id="5975176">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5975179">type</span>&nbsp;<span class="ident" id="5975184">reader</span>&nbsp;<span class="keyword" id="5975191">struct</span>&nbsp;<span class="op" id="5975198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975201">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975214">flate</span><span class="op" id="5975219">.</span><span class="ident" id="5975220">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975228">decompressor</span>&nbsp;<span class="ident" id="5975241">io</span><span class="op" id="5975243">.</span><span class="ident" id="5975244">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975256">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975269">hash</span><span class="op" id="5975273">.</span><span class="ident" id="5975274">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975282">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5975295">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975302">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975315">[</span><span class="num" id="5975316">4</span><span class="op" id="5975317">]</span><span class="builtintype" id="5975318">byte</span><br>
<span class="lineno"></span><span class="op" id="5975323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5975326">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5975400">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5975475">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5975511">type</span>&nbsp;<span class="ident" id="5975516">Resetter</span>&nbsp;<span class="keyword" id="5975525">interface</span>&nbsp;<span class="op" id="5975535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5975538">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5975612">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975657">Reset</span><span class="op" id="5975662">(</span><span class="ident" id="5975663">r</span>&nbsp;<span class="ident" id="5975665">io</span><span class="op" id="5975667">.</span><span class="ident" id="5975668">Reader</span><span class="op" id="5975674">,</span>&nbsp;<span class="ident" id="5975676">dict</span>&nbsp;<span class="op" id="5975681">[</span><span class="op" id="5975682">]</span><span class="builtintype" id="5975683">byte</span><span class="op" id="5975687">)</span>&nbsp;<span class="builtintype" id="5975689">error</span><br>
<span class="lineno"></span><span class="op" id="5975695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5975698">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5975737">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5975808">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5975890">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5975970">//</span><br>
<span class="lineno"></span><span class="comment" id="5975973">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5976039">func</span>&nbsp;<span class="ident" id="5976044">NewReader</span><span class="op" id="5976053">(</span><span class="ident" id="5976054">r</span>&nbsp;<span class="ident" id="5976056">io</span><span class="op" id="5976058">.</span><span class="ident" id="5976059">Reader</span><span class="op" id="5976065">)</span>&nbsp;<span class="op" id="5976067">(</span><span class="ident" id="5976068">io</span><span class="op" id="5976070">.</span><span class="ident" id="5976071">ReadCloser</span><span class="op" id="5976081">,</span>&nbsp;<span class="builtintype" id="5976083">error</span><span class="op" id="5976088">)</span>&nbsp;<span class="op" id="5976090">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976093">return</span>&nbsp;<span class="ident" id="5976100">NewReaderDict</span><span class="op" id="5976113">(</span><span class="ident" id="5976114">r</span><span class="op" id="5976115">,</span>&nbsp;<span class="builtintype" id="5976117">nil</span><span class="op" id="5976120">)</span><br>
<span class="lineno"></span><span class="op" id="5976122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976125">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5976190">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5976275">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5976372">//</span><br>
<span class="lineno"></span><span class="comment" id="5976375">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5976445">func</span>&nbsp;<span class="ident" id="5976450">NewReaderDict</span><span class="op" id="5976463">(</span><span class="ident" id="5976464">r</span>&nbsp;<span class="ident" id="5976466">io</span><span class="op" id="5976468">.</span><span class="ident" id="5976469">Reader</span><span class="op" id="5976475">,</span>&nbsp;<span class="ident" id="5976477">dict</span>&nbsp;<span class="op" id="5976482">[</span><span class="op" id="5976483">]</span><span class="builtintype" id="5976484">byte</span><span class="op" id="5976488">)</span>&nbsp;<span class="op" id="5976490">(</span><span class="ident" id="5976491">io</span><span class="op" id="5976493">.</span><span class="ident" id="5976494">ReadCloser</span><span class="op" id="5976504">,</span>&nbsp;<span class="builtintype" id="5976506">error</span><span class="op" id="5976511">)</span>&nbsp;<span class="op" id="5976513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976516">z</span>&nbsp;<span class="op" id="5976518">:=</span>&nbsp;<span class="builtinfunc" id="5976521">new</span><span class="op" id="5976524">(</span><span class="ident" id="5976525">reader</span><span class="op" id="5976531">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976534">err</span>&nbsp;<span class="op" id="5976538">:=</span>&nbsp;<span class="ident" id="5976541">z</span><span class="op" id="5976542">.</span><span class="ident" id="5976543">Reset</span><span class="op" id="5976548">(</span><span class="ident" id="5976549">r</span><span class="op" id="5976550">,</span>&nbsp;<span class="ident" id="5976552">dict</span><span class="op" id="5976556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976559">if</span>&nbsp;<span class="ident" id="5976562">err</span>&nbsp;<span class="op" id="5976566">!=</span>&nbsp;<span class="builtintype" id="5976569">nil</span>&nbsp;<span class="op" id="5976573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976577">return</span>&nbsp;<span class="builtintype" id="5976584">nil</span><span class="op" id="5976587">,</span>&nbsp;<span class="ident" id="5976589">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976597">return</span>&nbsp;<span class="ident" id="5976604">z</span><span class="op" id="5976605">,</span>&nbsp;<span class="builtintype" id="5976607">nil</span><br>
<span class="lineno">85</span><span class="op" id="5976611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5976614">func</span>&nbsp;<span class="op" id="5976619">(</span><span class="ident" id="5976620">z</span>&nbsp;<span class="op" id="5976622">*</span><span class="ident" id="5976623">reader</span><span class="op" id="5976629">)</span>&nbsp;<span class="ident" id="5976631">Read</span><span class="op" id="5976635">(</span><span class="ident" id="5976636">p</span>&nbsp;<span class="op" id="5976638">[</span><span class="op" id="5976639">]</span><span class="builtintype" id="5976640">byte</span><span class="op" id="5976644">)</span>&nbsp;<span class="op" id="5976646">(</span><span class="ident" id="5976647">n</span>&nbsp;<span class="builtintype" id="5976649">int</span><span class="op" id="5976652">,</span>&nbsp;<span class="ident" id="5976654">err</span>&nbsp;<span class="builtintype" id="5976658">error</span><span class="op" id="5976663">)</span>&nbsp;<span class="op" id="5976665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976668">if</span>&nbsp;<span class="ident" id="5976671">z</span><span class="op" id="5976672">.</span><span class="ident" id="5976673">err</span>&nbsp;<span class="op" id="5976677">!=</span>&nbsp;<span class="builtintype" id="5976680">nil</span>&nbsp;<span class="op" id="5976684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976688">return</span>&nbsp;<span class="num" id="5976695">0</span><span class="op" id="5976696">,</span>&nbsp;<span class="ident" id="5976698">z</span><span class="op" id="5976699">.</span><span class="ident" id="5976700">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976708">if</span>&nbsp;<span class="builtinfunc" id="5976711">len</span><span class="op" id="5976714">(</span><span class="ident" id="5976715">p</span><span class="op" id="5976716">)</span>&nbsp;<span class="op" id="5976718">==</span>&nbsp;<span class="num" id="5976721">0</span>&nbsp;<span class="op" id="5976723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976727">return</span>&nbsp;<span class="num" id="5976734">0</span><span class="op" id="5976735">,</span>&nbsp;<span class="builtintype" id="5976737">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976746">n</span><span class="op" id="5976747">,</span>&nbsp;<span class="ident" id="5976749">err</span>&nbsp;<span class="op" id="5976753">=</span>&nbsp;<span class="ident" id="5976755">z</span><span class="op" id="5976756">.</span><span class="ident" id="5976757">decompressor</span><span class="op" id="5976769">.</span><span class="ident" id="5976770">Read</span><span class="op" id="5976774">(</span><span class="ident" id="5976775">p</span><span class="op" id="5976776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976779">z</span><span class="op" id="5976780">.</span><span class="ident" id="5976781">digest</span><span class="op" id="5976787">.</span><span class="ident" id="5976788">Write</span><span class="op" id="5976793">(</span><span class="ident" id="5976794">p</span><span class="op" id="5976795">[</span><span class="num" id="5976796">0</span><span class="op" id="5976797">:</span><span class="ident" id="5976798">n</span><span class="op" id="5976799">]</span><span class="op" id="5976800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976803">if</span>&nbsp;<span class="ident" id="5976806">n</span>&nbsp;<span class="op" id="5976808">!=</span>&nbsp;<span class="num" id="5976811">0</span>&nbsp;<span class="op" id="5976813">||</span>&nbsp;<span class="ident" id="5976816">err</span>&nbsp;<span class="op" id="5976820">!=</span>&nbsp;<span class="ident" id="5976823">io</span><span class="op" id="5976825">.</span><span class="ident" id="5976826">EOF</span>&nbsp;<span class="op" id="5976830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976834">z</span><span class="op" id="5976835">.</span><span class="ident" id="5976836">err</span>&nbsp;<span class="op" id="5976840">=</span>&nbsp;<span class="ident" id="5976842">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976848">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5976860">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976895">if</span>&nbsp;<span class="ident" id="5976898">_</span><span class="op" id="5976899">,</span>&nbsp;<span class="ident" id="5976901">err</span>&nbsp;<span class="op" id="5976905">:=</span>&nbsp;<span class="ident" id="5976908">io</span><span class="op" id="5976910">.</span><span class="ident" id="5976911">ReadFull</span><span class="op" id="5976919">(</span><span class="ident" id="5976920">z</span><span class="op" id="5976921">.</span><span class="ident" id="5976922">r</span><span class="op" id="5976923">,</span>&nbsp;<span class="ident" id="5976925">z</span><span class="op" id="5976926">.</span><span class="ident" id="5976927">scratch</span><span class="op" id="5976934">[</span><span class="num" id="5976935">0</span><span class="op" id="5976936">:</span><span class="num" id="5976937">4</span><span class="op" id="5976938">]</span><span class="op" id="5976939">)</span><span class="op" id="5976940">;</span>&nbsp;<span class="ident" id="5976942">err</span>&nbsp;<span class="op" id="5976946">!=</span>&nbsp;<span class="builtintype" id="5976949">nil</span>&nbsp;<span class="op" id="5976953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976957">z</span><span class="op" id="5976958">.</span><span class="ident" id="5976959">err</span>&nbsp;<span class="op" id="5976963">=</span>&nbsp;<span class="ident" id="5976965">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976971">return</span>&nbsp;<span class="num" id="5976978">0</span><span class="op" id="5976979">,</span>&nbsp;<span class="ident" id="5976981">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5976989">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977048">checksum</span>&nbsp;<span class="op" id="5977057">:=</span>&nbsp;<span class="builtintype" id="5977060">uint32</span><span class="op" id="5977066">(</span><span class="ident" id="5977067">z</span><span class="op" id="5977068">.</span><span class="ident" id="5977069">scratch</span><span class="op" id="5977076">[</span><span class="num" id="5977077">0</span><span class="op" id="5977078">]</span><span class="op" id="5977079">)</span><span class="op" id="5977080">&lt;&lt;</span><span class="num" id="5977082">24</span>&nbsp;<span class="op" id="5977085">|</span>&nbsp;<span class="builtintype" id="5977087">uint32</span><span class="op" id="5977093">(</span><span class="ident" id="5977094">z</span><span class="op" id="5977095">.</span><span class="ident" id="5977096">scratch</span><span class="op" id="5977103">[</span><span class="num" id="5977104">1</span><span class="op" id="5977105">]</span><span class="op" id="5977106">)</span><span class="op" id="5977107">&lt;&lt;</span><span class="num" id="5977109">16</span>&nbsp;<span class="op" id="5977112">|</span>&nbsp;<span class="builtintype" id="5977114">uint32</span><span class="op" id="5977120">(</span><span class="ident" id="5977121">z</span><span class="op" id="5977122">.</span><span class="ident" id="5977123">scratch</span><span class="op" id="5977130">[</span><span class="num" id="5977131">2</span><span class="op" id="5977132">]</span><span class="op" id="5977133">)</span><span class="op" id="5977134">&lt;&lt;</span><span class="num" id="5977136">8</span>&nbsp;<span class="op" id="5977138">|</span>&nbsp;<span class="builtintype" id="5977140">uint32</span><span class="op" id="5977146">(</span><span class="ident" id="5977147">z</span><span class="op" id="5977148">.</span><span class="ident" id="5977149">scratch</span><span class="op" id="5977156">[</span><span class="num" id="5977157">3</span><span class="op" id="5977158">]</span><span class="op" id="5977159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977162">if</span>&nbsp;<span class="ident" id="5977165">checksum</span>&nbsp;<span class="op" id="5977174">!=</span>&nbsp;<span class="ident" id="5977177">z</span><span class="op" id="5977178">.</span><span class="ident" id="5977179">digest</span><span class="op" id="5977185">.</span><span class="ident" id="5977186">Sum32</span><span class="op" id="5977191">(</span><span class="op" id="5977192">)</span>&nbsp;<span class="op" id="5977194">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977198">z</span><span class="op" id="5977199">.</span><span class="ident" id="5977200">err</span>&nbsp;<span class="op" id="5977204">=</span>&nbsp;<span class="ident" id="5977206">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977220">return</span>&nbsp;<span class="num" id="5977227">0</span><span class="op" id="5977228">,</span>&nbsp;<span class="ident" id="5977230">z</span><span class="op" id="5977231">.</span><span class="ident" id="5977232">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977240">return</span><br>
<span class="lineno"></span><span class="op" id="5977247">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5977250">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5977336">func</span>&nbsp;<span class="op" id="5977341">(</span><span class="ident" id="5977342">z</span>&nbsp;<span class="op" id="5977344">*</span><span class="ident" id="5977345">reader</span><span class="op" id="5977351">)</span>&nbsp;<span class="ident" id="5977353">Close</span><span class="op" id="5977358">(</span><span class="op" id="5977359">)</span>&nbsp;<span class="builtintype" id="5977361">error</span>&nbsp;<span class="op" id="5977367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977370">if</span>&nbsp;<span class="ident" id="5977373">z</span><span class="op" id="5977374">.</span><span class="ident" id="5977375">err</span>&nbsp;<span class="op" id="5977379">!=</span>&nbsp;<span class="builtintype" id="5977382">nil</span>&nbsp;<span class="op" id="5977386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977390">return</span>&nbsp;<span class="ident" id="5977397">z</span><span class="op" id="5977398">.</span><span class="ident" id="5977399">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977407">z</span><span class="op" id="5977408">.</span><span class="ident" id="5977409">err</span>&nbsp;<span class="op" id="5977413">=</span>&nbsp;<span class="ident" id="5977415">z</span><span class="op" id="5977416">.</span><span class="ident" id="5977417">decompressor</span><span class="op" id="5977429">.</span><span class="ident" id="5977430">Close</span><span class="op" id="5977435">(</span><span class="op" id="5977436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977439">return</span>&nbsp;<span class="ident" id="5977446">z</span><span class="op" id="5977447">.</span><span class="ident" id="5977448">err</span><br>
<span class="lineno"></span><span class="op" id="5977452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5977455">func</span>&nbsp;<span class="op" id="5977460">(</span><span class="ident" id="5977461">z</span>&nbsp;<span class="op" id="5977463">*</span><span class="ident" id="5977464">reader</span><span class="op" id="5977470">)</span>&nbsp;<span class="ident" id="5977472">Reset</span><span class="op" id="5977477">(</span><span class="ident" id="5977478">r</span>&nbsp;<span class="ident" id="5977480">io</span><span class="op" id="5977482">.</span><span class="ident" id="5977483">Reader</span><span class="op" id="5977489">,</span>&nbsp;<span class="ident" id="5977491">dict</span>&nbsp;<span class="op" id="5977496">[</span><span class="op" id="5977497">]</span><span class="builtintype" id="5977498">byte</span><span class="op" id="5977502">)</span>&nbsp;<span class="builtintype" id="5977504">error</span>&nbsp;<span class="op" id="5977510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977513">if</span>&nbsp;<span class="ident" id="5977516">fr</span><span class="op" id="5977518">,</span>&nbsp;<span class="ident" id="5977520">ok</span>&nbsp;<span class="op" id="5977523">:=</span>&nbsp;<span class="ident" id="5977526">r</span><span class="op" id="5977527">.</span><span class="op" id="5977528">(</span><span class="ident" id="5977529">flate</span><span class="op" id="5977534">.</span><span class="ident" id="5977535">Reader</span><span class="op" id="5977541">)</span><span class="op" id="5977542">;</span>&nbsp;<span class="ident" id="5977544">ok</span>&nbsp;<span class="op" id="5977547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977551">z</span><span class="op" id="5977552">.</span><span class="ident" id="5977553">r</span>&nbsp;<span class="op" id="5977555">=</span>&nbsp;<span class="ident" id="5977557">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977561">}</span>&nbsp;<span class="keyword" id="5977563">else</span>&nbsp;<span class="op" id="5977568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977572">z</span><span class="op" id="5977573">.</span><span class="ident" id="5977574">r</span>&nbsp;<span class="op" id="5977576">=</span>&nbsp;<span class="ident" id="5977578">bufio</span><span class="op" id="5977583">.</span><span class="ident" id="5977584">NewReader</span><span class="op" id="5977593">(</span><span class="ident" id="5977594">r</span><span class="op" id="5977595">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977601">_</span><span class="op" id="5977602">,</span>&nbsp;<span class="ident" id="5977604">err</span>&nbsp;<span class="op" id="5977608">:=</span>&nbsp;<span class="ident" id="5977611">io</span><span class="op" id="5977613">.</span><span class="ident" id="5977614">ReadFull</span><span class="op" id="5977622">(</span><span class="ident" id="5977623">z</span><span class="op" id="5977624">.</span><span class="ident" id="5977625">r</span><span class="op" id="5977626">,</span>&nbsp;<span class="ident" id="5977628">z</span><span class="op" id="5977629">.</span><span class="ident" id="5977630">scratch</span><span class="op" id="5977637">[</span><span class="num" id="5977638">0</span><span class="op" id="5977639">:</span><span class="num" id="5977640">2</span><span class="op" id="5977641">]</span><span class="op" id="5977642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977645">if</span>&nbsp;<span class="ident" id="5977648">err</span>&nbsp;<span class="op" id="5977652">!=</span>&nbsp;<span class="builtintype" id="5977655">nil</span>&nbsp;<span class="op" id="5977659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977663">return</span>&nbsp;<span class="ident" id="5977670">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977675">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977678">h</span>&nbsp;<span class="op" id="5977680">:=</span>&nbsp;<span class="builtintype" id="5977683">uint</span><span class="op" id="5977687">(</span><span class="ident" id="5977688">z</span><span class="op" id="5977689">.</span><span class="ident" id="5977690">scratch</span><span class="op" id="5977697">[</span><span class="num" id="5977698">0</span><span class="op" id="5977699">]</span><span class="op" id="5977700">)</span><span class="op" id="5977701">&lt;&lt;</span><span class="num" id="5977703">8</span>&nbsp;<span class="op" id="5977705">|</span>&nbsp;<span class="builtintype" id="5977707">uint</span><span class="op" id="5977711">(</span><span class="ident" id="5977712">z</span><span class="op" id="5977713">.</span><span class="ident" id="5977714">scratch</span><span class="op" id="5977721">[</span><span class="num" id="5977722">1</span><span class="op" id="5977723">]</span><span class="op" id="5977724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977727">if</span>&nbsp;<span class="op" id="5977730">(</span><span class="ident" id="5977731">z</span><span class="op" id="5977732">.</span><span class="ident" id="5977733">scratch</span><span class="op" id="5977740">[</span><span class="num" id="5977741">0</span><span class="op" id="5977742">]</span><span class="op" id="5977743">&amp;</span><span class="num" id="5977744">0x0f</span>&nbsp;<span class="op" id="5977749">!=</span>&nbsp;<span class="ident" id="5977752">zlibDeflate</span><span class="op" id="5977763">)</span>&nbsp;<span class="op" id="5977765">||</span>&nbsp;<span class="op" id="5977768">(</span><span class="ident" id="5977769">h</span><span class="op" id="5977770">%</span><span class="num" id="5977771">31</span>&nbsp;<span class="op" id="5977774">!=</span>&nbsp;<span class="num" id="5977777">0</span><span class="op" id="5977778">)</span>&nbsp;<span class="op" id="5977780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977784">return</span>&nbsp;<span class="ident" id="5977791">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977805">haveDict</span>&nbsp;<span class="op" id="5977814">:=</span>&nbsp;<span class="ident" id="5977817">z</span><span class="op" id="5977818">.</span><span class="ident" id="5977819">scratch</span><span class="op" id="5977826">[</span><span class="num" id="5977827">1</span><span class="op" id="5977828">]</span><span class="op" id="5977829">&amp;</span><span class="num" id="5977830">0x20</span>&nbsp;<span class="op" id="5977835">!=</span>&nbsp;<span class="num" id="5977838">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977841">if</span>&nbsp;<span class="ident" id="5977844">haveDict</span>&nbsp;<span class="op" id="5977853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977857">_</span><span class="op" id="5977858">,</span>&nbsp;<span class="ident" id="5977860">err</span>&nbsp;<span class="op" id="5977864">=</span>&nbsp;<span class="ident" id="5977866">io</span><span class="op" id="5977868">.</span><span class="ident" id="5977869">ReadFull</span><span class="op" id="5977877">(</span><span class="ident" id="5977878">z</span><span class="op" id="5977879">.</span><span class="ident" id="5977880">r</span><span class="op" id="5977881">,</span>&nbsp;<span class="ident" id="5977883">z</span><span class="op" id="5977884">.</span><span class="ident" id="5977885">scratch</span><span class="op" id="5977892">[</span><span class="num" id="5977893">0</span><span class="op" id="5977894">:</span><span class="num" id="5977895">4</span><span class="op" id="5977896">]</span><span class="op" id="5977897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977901">if</span>&nbsp;<span class="ident" id="5977904">err</span>&nbsp;<span class="op" id="5977908">!=</span>&nbsp;<span class="builtintype" id="5977911">nil</span>&nbsp;<span class="op" id="5977915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5977920">return</span>&nbsp;<span class="ident" id="5977927">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5977933">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5977937">checksum</span>&nbsp;<span class="op" id="5977946">:=</span>&nbsp;<span class="builtintype" id="5977949">uint32</span><span class="op" id="5977955">(</span><span class="ident" id="5977956">z</span><span class="op" id="5977957">.</span><span class="ident" id="5977958">scratch</span><span class="op" id="5977965">[</span><span class="num" id="5977966">0</span><span class="op" id="5977967">]</span><span class="op" id="5977968">)</span><span class="op" id="5977969">&lt;&lt;</span><span class="num" id="5977971">24</span>&nbsp;<span class="op" id="5977974">|</span>&nbsp;<span class="builtintype" id="5977976">uint32</span><span class="op" id="5977982">(</span><span class="ident" id="5977983">z</span><span class="op" id="5977984">.</span><span class="ident" id="5977985">scratch</span><span class="op" id="5977992">[</span><span class="num" id="5977993">1</span><span class="op" id="5977994">]</span><span class="op" id="5977995">)</span><span class="op" id="5977996">&lt;&lt;</span><span class="num" id="5977998">16</span>&nbsp;<span class="op" id="5978001">|</span>&nbsp;<span class="builtintype" id="5978003">uint32</span><span class="op" id="5978009">(</span><span class="ident" id="5978010">z</span><span class="op" id="5978011">.</span><span class="ident" id="5978012">scratch</span><span class="op" id="5978019">[</span><span class="num" id="5978020">2</span><span class="op" id="5978021">]</span><span class="op" id="5978022">)</span><span class="op" id="5978023">&lt;&lt;</span><span class="num" id="5978025">8</span>&nbsp;<span class="op" id="5978027">|</span>&nbsp;<span class="builtintype" id="5978029">uint32</span><span class="op" id="5978035">(</span><span class="ident" id="5978036">z</span><span class="op" id="5978037">.</span><span class="ident" id="5978038">scratch</span><span class="op" id="5978045">[</span><span class="num" id="5978046">3</span><span class="op" id="5978047">]</span><span class="op" id="5978048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5978052">if</span>&nbsp;<span class="ident" id="5978055">checksum</span>&nbsp;<span class="op" id="5978064">!=</span>&nbsp;<span class="ident" id="5978067">adler32</span><span class="op" id="5978074">.</span><span class="ident" id="5978075">Checksum</span><span class="op" id="5978083">(</span><span class="ident" id="5978084">dict</span><span class="op" id="5978088">)</span>&nbsp;<span class="op" id="5978090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5978095">return</span>&nbsp;<span class="ident" id="5978102">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978121">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5978124">if</span>&nbsp;<span class="ident" id="5978127">z</span><span class="op" id="5978128">.</span><span class="ident" id="5978129">decompressor</span>&nbsp;<span class="op" id="5978142">==</span>&nbsp;<span class="builtintype" id="5978145">nil</span>&nbsp;<span class="op" id="5978149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5978153">if</span>&nbsp;<span class="ident" id="5978156">haveDict</span>&nbsp;<span class="op" id="5978165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5978170">z</span><span class="op" id="5978171">.</span><span class="ident" id="5978172">decompressor</span>&nbsp;<span class="op" id="5978185">=</span>&nbsp;<span class="ident" id="5978187">flate</span><span class="op" id="5978192">.</span><span class="ident" id="5978193">NewReaderDict</span><span class="op" id="5978206">(</span><span class="ident" id="5978207">z</span><span class="op" id="5978208">.</span><span class="ident" id="5978209">r</span><span class="op" id="5978210">,</span>&nbsp;<span class="ident" id="5978212">dict</span><span class="op" id="5978216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978220">}</span>&nbsp;<span class="keyword" id="5978222">else</span>&nbsp;<span class="op" id="5978227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5978232">z</span><span class="op" id="5978233">.</span><span class="ident" id="5978234">decompressor</span>&nbsp;<span class="op" id="5978247">=</span>&nbsp;<span class="ident" id="5978249">flate</span><span class="op" id="5978254">.</span><span class="ident" id="5978255">NewReader</span><span class="op" id="5978264">(</span><span class="ident" id="5978265">z</span><span class="op" id="5978266">.</span><span class="ident" id="5978267">r</span><span class="op" id="5978268">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978275">}</span>&nbsp;<span class="keyword" id="5978277">else</span>&nbsp;<span class="op" id="5978282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5978286">z</span><span class="op" id="5978287">.</span><span class="ident" id="5978288">decompressor</span><span class="op" id="5978300">.</span><span class="op" id="5978301">(</span><span class="ident" id="5978302">flate</span><span class="op" id="5978307">.</span><span class="ident" id="5978308">Resetter</span><span class="op" id="5978316">)</span><span class="op" id="5978317">.</span><span class="ident" id="5978318">Reset</span><span class="op" id="5978323">(</span><span class="ident" id="5978324">z</span><span class="op" id="5978325">.</span><span class="ident" id="5978326">r</span><span class="op" id="5978327">,</span>&nbsp;<span class="ident" id="5978329">dict</span><span class="op" id="5978333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5978336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5978339">z</span><span class="op" id="5978340">.</span><span class="ident" id="5978341">digest</span>&nbsp;<span class="op" id="5978348">=</span>&nbsp;<span class="ident" id="5978350">adler32</span><span class="op" id="5978357">.</span><span class="ident" id="5978358">New</span><span class="op" id="5978361">(</span><span class="op" id="5978362">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5978365">return</span>&nbsp;<span class="builtintype" id="5978372">nil</span><br>
<span class="lineno"></span><span class="op" id="5978376">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
