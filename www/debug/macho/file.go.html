<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6088934">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6088990">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6089044">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6089095">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6089154">package</span>&nbsp;<span class="ident" id="6089162">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6089169">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6089221">import</span>&nbsp;<span class="op" id="6089228">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089231">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089240">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089255">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089274">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089281">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6089287">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6089292">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6089295">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6089337">type</span>&nbsp;<span class="ident" id="6089342">File</span>&nbsp;<span class="keyword" id="6089347">struct</span>&nbsp;<span class="op" id="6089354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089357">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089369">ByteOrder</span>&nbsp;<span class="ident" id="6089379">binary</span><span class="op" id="6089385">.</span><span class="ident" id="6089386">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089397">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6089407">[</span><span class="op" id="6089408">]</span><span class="ident" id="6089409">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089415">Sections</span>&nbsp;&nbsp;<span class="op" id="6089425">[</span><span class="op" id="6089426">]</span><span class="op" id="6089427">*</span><span class="ident" id="6089428">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089438">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6089447">*</span><span class="ident" id="6089448">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089456">Dysymtab</span>&nbsp;<span class="op" id="6089465">*</span><span class="ident" id="6089466">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089477">closer</span>&nbsp;<span class="ident" id="6089484">io</span><span class="op" id="6089486">.</span><span class="ident" id="6089487">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6089494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6089497">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6089543">type</span>&nbsp;<span class="ident" id="6089548">Load</span>&nbsp;<span class="keyword" id="6089553">interface</span>&nbsp;<span class="op" id="6089563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089566">Raw</span><span class="op" id="6089569">(</span><span class="op" id="6089570">)</span>&nbsp;<span class="op" id="6089572">[</span><span class="op" id="6089573">]</span><span class="builtintype" id="6089574">byte</span><br>
<span class="lineno">35</span><span class="op" id="6089579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6089582">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6089650">type</span>&nbsp;<span class="ident" id="6089655">LoadBytes</span>&nbsp;<span class="op" id="6089665">[</span><span class="op" id="6089666">]</span><span class="builtintype" id="6089667">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6089673">func</span>&nbsp;<span class="op" id="6089678">(</span><span class="ident" id="6089679">b</span>&nbsp;<span class="ident" id="6089681">LoadBytes</span><span class="op" id="6089690">)</span>&nbsp;<span class="ident" id="6089692">Raw</span><span class="op" id="6089695">(</span><span class="op" id="6089696">)</span>&nbsp;<span class="op" id="6089698">[</span><span class="op" id="6089699">]</span><span class="builtintype" id="6089700">byte</span>&nbsp;<span class="op" id="6089705">{</span>&nbsp;<span class="keyword" id="6089707">return</span>&nbsp;<span class="ident" id="6089714">b</span>&nbsp;<span class="op" id="6089716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6089719">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6089804">type</span>&nbsp;<span class="ident" id="6089809">SegmentHeader</span>&nbsp;<span class="keyword" id="6089823">struct</span>&nbsp;<span class="op" id="6089830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089833">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6089841">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089850">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6089858">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089866">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6089874">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089882">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6089890">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089898">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6089906">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089914">Offset</span>&nbsp;&nbsp;<span class="ident" id="6089922">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089930">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6089938">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089946">Maxprot</span>&nbsp;<span class="builtintype" id="6089954">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089962">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6089970">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089978">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6089986">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089994">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6090002">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6090009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6090012">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6090084">type</span>&nbsp;<span class="ident" id="6090089">Segment</span>&nbsp;<span class="keyword" id="6090097">struct</span>&nbsp;<span class="op" id="6090104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090107">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090118">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090134">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090172">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090212">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090247">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090295">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090345">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090369">io</span><span class="op" id="6090371">.</span><span class="ident" id="6090372">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090382">sr</span>&nbsp;<span class="op" id="6090385">*</span><span class="ident" id="6090386">io</span><span class="op" id="6090388">.</span><span class="ident" id="6090389">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6090403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6090406">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6090461">func</span>&nbsp;<span class="op" id="6090466">(</span><span class="ident" id="6090467">s</span>&nbsp;<span class="op" id="6090469">*</span><span class="ident" id="6090470">Segment</span><span class="op" id="6090477">)</span>&nbsp;<span class="ident" id="6090479">Data</span><span class="op" id="6090483">(</span><span class="op" id="6090484">)</span>&nbsp;<span class="op" id="6090486">(</span><span class="op" id="6090487">[</span><span class="op" id="6090488">]</span><span class="builtintype" id="6090489">byte</span><span class="op" id="6090493">,</span>&nbsp;<span class="builtintype" id="6090495">error</span><span class="op" id="6090500">)</span>&nbsp;<span class="op" id="6090502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090505">dat</span>&nbsp;<span class="op" id="6090509">:=</span>&nbsp;<span class="builtinfunc" id="6090512">make</span><span class="op" id="6090516">(</span><span class="op" id="6090517">[</span><span class="op" id="6090518">]</span><span class="builtintype" id="6090519">byte</span><span class="op" id="6090523">,</span>&nbsp;<span class="ident" id="6090525">s</span><span class="op" id="6090526">.</span><span class="ident" id="6090527">sr</span><span class="op" id="6090529">.</span><span class="ident" id="6090530">Size</span><span class="op" id="6090534">(</span><span class="op" id="6090535">)</span><span class="op" id="6090536">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090539">n</span><span class="op" id="6090540">,</span>&nbsp;<span class="ident" id="6090542">err</span>&nbsp;<span class="op" id="6090546">:=</span>&nbsp;<span class="ident" id="6090549">s</span><span class="op" id="6090550">.</span><span class="ident" id="6090551">sr</span><span class="op" id="6090553">.</span><span class="ident" id="6090554">ReadAt</span><span class="op" id="6090560">(</span><span class="ident" id="6090561">dat</span><span class="op" id="6090564">,</span>&nbsp;<span class="num" id="6090566">0</span><span class="op" id="6090567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090570">if</span>&nbsp;<span class="ident" id="6090573">n</span>&nbsp;<span class="op" id="6090575">==</span>&nbsp;<span class="builtinfunc" id="6090578">len</span><span class="op" id="6090581">(</span><span class="ident" id="6090582">dat</span><span class="op" id="6090585">)</span>&nbsp;<span class="op" id="6090587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090591">err</span>&nbsp;<span class="op" id="6090595">=</span>&nbsp;<span class="ident" id="6090597">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090605">return</span>&nbsp;<span class="ident" id="6090612">dat</span><span class="op" id="6090615">[</span><span class="num" id="6090616">0</span><span class="op" id="6090617">:</span><span class="ident" id="6090618">n</span><span class="op" id="6090619">]</span><span class="op" id="6090620">,</span>&nbsp;<span class="ident" id="6090622">err</span><br>
<span class="lineno">80</span><span class="op" id="6090626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6090629">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6090683">func</span>&nbsp;<span class="op" id="6090688">(</span><span class="ident" id="6090689">s</span>&nbsp;<span class="op" id="6090691">*</span><span class="ident" id="6090692">Segment</span><span class="op" id="6090699">)</span>&nbsp;<span class="ident" id="6090701">Open</span><span class="op" id="6090705">(</span><span class="op" id="6090706">)</span>&nbsp;<span class="ident" id="6090708">io</span><span class="op" id="6090710">.</span><span class="ident" id="6090711">ReadSeeker</span>&nbsp;<span class="op" id="6090722">{</span>&nbsp;<span class="keyword" id="6090724">return</span>&nbsp;<span class="ident" id="6090731">io</span><span class="op" id="6090733">.</span><span class="ident" id="6090734">NewSectionReader</span><span class="op" id="6090750">(</span><span class="ident" id="6090751">s</span><span class="op" id="6090752">.</span><span class="ident" id="6090753">sr</span><span class="op" id="6090755">,</span>&nbsp;<span class="num" id="6090757">0</span><span class="op" id="6090758">,</span>&nbsp;<span class="num" id="6090760">1</span><span class="op" id="6090761">&lt;&lt;</span><span class="num" id="6090763">63</span><span class="op" id="6090765">-</span><span class="num" id="6090766">1</span><span class="op" id="6090767">)</span>&nbsp;<span class="op" id="6090769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6090772">type</span>&nbsp;<span class="ident" id="6090777">SectionHeader</span>&nbsp;<span class="keyword" id="6090791">struct</span>&nbsp;<span class="op" id="6090798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090801">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6090808">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090816">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6090823">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090831">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6090838">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090846">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6090853">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090861">Offset</span>&nbsp;<span class="builtintype" id="6090868">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090876">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6090883">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090891">Reloff</span>&nbsp;<span class="builtintype" id="6090898">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090906">Nreloc</span>&nbsp;<span class="builtintype" id="6090913">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090921">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6090928">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6090935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6090938">type</span>&nbsp;<span class="ident" id="6090943">Section</span>&nbsp;<span class="keyword" id="6090951">struct</span>&nbsp;<span class="op" id="6090958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090961">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090977">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091015">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091055">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091090">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091138">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091188">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091212">io</span><span class="op" id="6091214">.</span><span class="ident" id="6091215">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091225">sr</span>&nbsp;<span class="op" id="6091228">*</span><span class="ident" id="6091229">io</span><span class="op" id="6091231">.</span><span class="ident" id="6091232">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6091246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6091249">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6091311">func</span>&nbsp;<span class="op" id="6091316">(</span><span class="ident" id="6091317">s</span>&nbsp;<span class="op" id="6091319">*</span><span class="ident" id="6091320">Section</span><span class="op" id="6091327">)</span>&nbsp;<span class="ident" id="6091329">Data</span><span class="op" id="6091333">(</span><span class="op" id="6091334">)</span>&nbsp;<span class="op" id="6091336">(</span><span class="op" id="6091337">[</span><span class="op" id="6091338">]</span><span class="builtintype" id="6091339">byte</span><span class="op" id="6091343">,</span>&nbsp;<span class="builtintype" id="6091345">error</span><span class="op" id="6091350">)</span>&nbsp;<span class="op" id="6091352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091355">dat</span>&nbsp;<span class="op" id="6091359">:=</span>&nbsp;<span class="builtinfunc" id="6091362">make</span><span class="op" id="6091366">(</span><span class="op" id="6091367">[</span><span class="op" id="6091368">]</span><span class="builtintype" id="6091369">byte</span><span class="op" id="6091373">,</span>&nbsp;<span class="ident" id="6091375">s</span><span class="op" id="6091376">.</span><span class="ident" id="6091377">sr</span><span class="op" id="6091379">.</span><span class="ident" id="6091380">Size</span><span class="op" id="6091384">(</span><span class="op" id="6091385">)</span><span class="op" id="6091386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091389">n</span><span class="op" id="6091390">,</span>&nbsp;<span class="ident" id="6091392">err</span>&nbsp;<span class="op" id="6091396">:=</span>&nbsp;<span class="ident" id="6091399">s</span><span class="op" id="6091400">.</span><span class="ident" id="6091401">sr</span><span class="op" id="6091403">.</span><span class="ident" id="6091404">ReadAt</span><span class="op" id="6091410">(</span><span class="ident" id="6091411">dat</span><span class="op" id="6091414">,</span>&nbsp;<span class="num" id="6091416">0</span><span class="op" id="6091417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091420">if</span>&nbsp;<span class="ident" id="6091423">n</span>&nbsp;<span class="op" id="6091425">==</span>&nbsp;<span class="builtinfunc" id="6091428">len</span><span class="op" id="6091431">(</span><span class="ident" id="6091432">dat</span><span class="op" id="6091435">)</span>&nbsp;<span class="op" id="6091437">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091441">err</span>&nbsp;<span class="op" id="6091445">=</span>&nbsp;<span class="ident" id="6091447">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6091452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091455">return</span>&nbsp;<span class="ident" id="6091462">dat</span><span class="op" id="6091465">[</span><span class="num" id="6091466">0</span><span class="op" id="6091467">:</span><span class="ident" id="6091468">n</span><span class="op" id="6091469">]</span><span class="op" id="6091470">,</span>&nbsp;<span class="ident" id="6091472">err</span><br>
<span class="lineno"></span><span class="op" id="6091476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6091479">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6091540">func</span>&nbsp;<span class="op" id="6091545">(</span><span class="ident" id="6091546">s</span>&nbsp;<span class="op" id="6091548">*</span><span class="ident" id="6091549">Section</span><span class="op" id="6091556">)</span>&nbsp;<span class="ident" id="6091558">Open</span><span class="op" id="6091562">(</span><span class="op" id="6091563">)</span>&nbsp;<span class="ident" id="6091565">io</span><span class="op" id="6091567">.</span><span class="ident" id="6091568">ReadSeeker</span>&nbsp;<span class="op" id="6091579">{</span>&nbsp;<span class="keyword" id="6091581">return</span>&nbsp;<span class="ident" id="6091588">io</span><span class="op" id="6091590">.</span><span class="ident" id="6091591">NewSectionReader</span><span class="op" id="6091607">(</span><span class="ident" id="6091608">s</span><span class="op" id="6091609">.</span><span class="ident" id="6091610">sr</span><span class="op" id="6091612">,</span>&nbsp;<span class="num" id="6091614">0</span><span class="op" id="6091615">,</span>&nbsp;<span class="num" id="6091617">1</span><span class="op" id="6091618">&lt;&lt;</span><span class="num" id="6091620">63</span><span class="op" id="6091622">-</span><span class="num" id="6091623">1</span><span class="op" id="6091624">)</span>&nbsp;<span class="op" id="6091626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6091629">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6091690">type</span>&nbsp;<span class="ident" id="6091695">Dylib</span>&nbsp;<span class="keyword" id="6091701">struct</span>&nbsp;<span class="op" id="6091708">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091711">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091722">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6091737">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091745">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6091760">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091768">CurrentVersion</span>&nbsp;<span class="builtintype" id="6091783">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091791">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6091806">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6091813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6091816">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6091870">type</span>&nbsp;<span class="ident" id="6091875">Symtab</span>&nbsp;<span class="keyword" id="6091882">struct</span>&nbsp;<span class="op" id="6091889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091892">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091903">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091914">Syms</span>&nbsp;<span class="op" id="6091919">[</span><span class="op" id="6091920">]</span><span class="ident" id="6091921">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6091928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6091931">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6091995">type</span>&nbsp;<span class="ident" id="6092000">Dysymtab</span>&nbsp;<span class="keyword" id="6092009">struct</span>&nbsp;<span class="op" id="6092016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092019">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092030">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092043">IndirectSyms</span>&nbsp;<span class="op" id="6092056">[</span><span class="op" id="6092057">]</span><span class="builtintype" id="6092058">uint32</span>&nbsp;<span class="comment" id="6092065">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6092093">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6092096">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6092121">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6092184">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6092235">type</span>&nbsp;<span class="ident" id="6092240">FormatError</span>&nbsp;<span class="keyword" id="6092252">struct</span>&nbsp;<span class="op" id="6092259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092262">off</span>&nbsp;<span class="ident" id="6092266">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092273">msg</span>&nbsp;<span class="builtintype" id="6092277">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092285">val</span>&nbsp;<span class="keyword" id="6092289">interface</span><span class="op" id="6092298">{</span><span class="op" id="6092299">}</span><br>
<span class="lineno"></span><span class="op" id="6092301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6092304">func</span>&nbsp;<span class="op" id="6092309">(</span><span class="ident" id="6092310">e</span>&nbsp;<span class="op" id="6092312">*</span><span class="ident" id="6092313">FormatError</span><span class="op" id="6092324">)</span>&nbsp;<span class="ident" id="6092326">Error</span><span class="op" id="6092331">(</span><span class="op" id="6092332">)</span>&nbsp;<span class="builtintype" id="6092334">string</span>&nbsp;<span class="op" id="6092341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092344">msg</span>&nbsp;<span class="op" id="6092348">:=</span>&nbsp;<span class="ident" id="6092351">e</span><span class="op" id="6092352">.</span><span class="ident" id="6092353">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092358">if</span>&nbsp;<span class="ident" id="6092361">e</span><span class="op" id="6092362">.</span><span class="ident" id="6092363">val</span>&nbsp;<span class="op" id="6092367">!=</span>&nbsp;<span class="ident" id="6092370">nil</span>&nbsp;<span class="op" id="6092374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092378">msg</span>&nbsp;<span class="op" id="6092382">+=</span>&nbsp;<span class="ident" id="6092385">fmt</span><span class="op" id="6092388">.</span><span class="ident" id="6092389">Sprintf</span><span class="op" id="6092396">(</span><span class="string" id="6092397">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6092404">,</span>&nbsp;<span class="ident" id="6092406">e</span><span class="op" id="6092407">.</span><span class="ident" id="6092408">val</span><span class="op" id="6092411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6092414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092417">msg</span>&nbsp;<span class="op" id="6092421">+=</span>&nbsp;<span class="ident" id="6092424">fmt</span><span class="op" id="6092427">.</span><span class="ident" id="6092428">Sprintf</span><span class="op" id="6092435">(</span><span class="string" id="6092436">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6092460">,</span>&nbsp;<span class="ident" id="6092462">e</span><span class="op" id="6092463">.</span><span class="ident" id="6092464">off</span><span class="op" id="6092467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092470">return</span>&nbsp;<span class="ident" id="6092477">msg</span><br>
<span class="lineno">165</span><span class="op" id="6092481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6092484">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6092571">func</span>&nbsp;<span class="ident" id="6092576">Open</span><span class="op" id="6092580">(</span><span class="ident" id="6092581">name</span>&nbsp;<span class="builtintype" id="6092586">string</span><span class="op" id="6092592">)</span>&nbsp;<span class="op" id="6092594">(</span><span class="op" id="6092595">*</span><span class="ident" id="6092596">File</span><span class="op" id="6092600">,</span>&nbsp;<span class="builtintype" id="6092602">error</span><span class="op" id="6092607">)</span>&nbsp;<span class="op" id="6092609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092612">f</span><span class="op" id="6092613">,</span>&nbsp;<span class="ident" id="6092615">err</span>&nbsp;<span class="op" id="6092619">:=</span>&nbsp;<span class="ident" id="6092622">os</span><span class="op" id="6092624">.</span><span class="ident" id="6092625">Open</span><span class="op" id="6092629">(</span><span class="ident" id="6092630">name</span><span class="op" id="6092634">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092637">if</span>&nbsp;<span class="ident" id="6092640">err</span>&nbsp;<span class="op" id="6092644">!=</span>&nbsp;<span class="ident" id="6092647">nil</span>&nbsp;<span class="op" id="6092651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092655">return</span>&nbsp;<span class="ident" id="6092662">nil</span><span class="op" id="6092665">,</span>&nbsp;<span class="ident" id="6092667">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6092672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092675">ff</span><span class="op" id="6092677">,</span>&nbsp;<span class="ident" id="6092679">err</span>&nbsp;<span class="op" id="6092683">:=</span>&nbsp;<span class="ident" id="6092686">NewFile</span><span class="op" id="6092693">(</span><span class="ident" id="6092694">f</span><span class="op" id="6092695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092698">if</span>&nbsp;<span class="ident" id="6092701">err</span>&nbsp;<span class="op" id="6092705">!=</span>&nbsp;<span class="ident" id="6092708">nil</span>&nbsp;<span class="op" id="6092712">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092716">f</span><span class="op" id="6092717">.</span><span class="ident" id="6092718">Close</span><span class="op" id="6092723">(</span><span class="op" id="6092724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092728">return</span>&nbsp;<span class="ident" id="6092735">nil</span><span class="op" id="6092738">,</span>&nbsp;<span class="ident" id="6092740">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6092745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092748">ff</span><span class="op" id="6092750">.</span><span class="ident" id="6092751">closer</span>&nbsp;<span class="op" id="6092758">=</span>&nbsp;<span class="ident" id="6092760">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092763">return</span>&nbsp;<span class="ident" id="6092770">ff</span><span class="op" id="6092772">,</span>&nbsp;<span class="ident" id="6092774">nil</span><br>
<span class="lineno">180</span><span class="op" id="6092778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6092781">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6092807">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6092874">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6092898">func</span>&nbsp;<span class="op" id="6092903">(</span><span class="ident" id="6092904">f</span>&nbsp;<span class="op" id="6092906">*</span><span class="ident" id="6092907">File</span><span class="op" id="6092911">)</span>&nbsp;<span class="ident" id="6092913">Close</span><span class="op" id="6092918">(</span><span class="op" id="6092919">)</span>&nbsp;<span class="builtintype" id="6092921">error</span>&nbsp;<span class="op" id="6092927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092930">var</span>&nbsp;<span class="ident" id="6092934">err</span>&nbsp;<span class="builtintype" id="6092938">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092945">if</span>&nbsp;<span class="ident" id="6092948">f</span><span class="op" id="6092949">.</span><span class="ident" id="6092950">closer</span>&nbsp;<span class="op" id="6092957">!=</span>&nbsp;<span class="ident" id="6092960">nil</span>&nbsp;<span class="op" id="6092964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092968">err</span>&nbsp;<span class="op" id="6092972">=</span>&nbsp;<span class="ident" id="6092974">f</span><span class="op" id="6092975">.</span><span class="ident" id="6092976">closer</span><span class="op" id="6092982">.</span><span class="ident" id="6092983">Close</span><span class="op" id="6092988">(</span><span class="op" id="6092989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092993">f</span><span class="op" id="6092994">.</span><span class="ident" id="6092995">closer</span>&nbsp;<span class="op" id="6093002">=</span>&nbsp;<span class="ident" id="6093004">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093012">return</span>&nbsp;<span class="ident" id="6093019">err</span><br>
<span class="lineno"></span><span class="op" id="6093023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6093026">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6093111">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6093184">func</span>&nbsp;<span class="ident" id="6093189">NewFile</span><span class="op" id="6093196">(</span><span class="ident" id="6093197">r</span>&nbsp;<span class="ident" id="6093199">io</span><span class="op" id="6093201">.</span><span class="ident" id="6093202">ReaderAt</span><span class="op" id="6093210">)</span>&nbsp;<span class="op" id="6093212">(</span><span class="op" id="6093213">*</span><span class="ident" id="6093214">File</span><span class="op" id="6093218">,</span>&nbsp;<span class="builtintype" id="6093220">error</span><span class="op" id="6093225">)</span>&nbsp;<span class="op" id="6093227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093230">f</span>&nbsp;<span class="op" id="6093232">:=</span>&nbsp;<span class="builtinfunc" id="6093235">new</span><span class="op" id="6093238">(</span><span class="ident" id="6093239">File</span><span class="op" id="6093243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093246">sr</span>&nbsp;<span class="op" id="6093249">:=</span>&nbsp;<span class="ident" id="6093252">io</span><span class="op" id="6093254">.</span><span class="ident" id="6093255">NewSectionReader</span><span class="op" id="6093271">(</span><span class="ident" id="6093272">r</span><span class="op" id="6093273">,</span>&nbsp;<span class="num" id="6093275">0</span><span class="op" id="6093276">,</span>&nbsp;<span class="num" id="6093278">1</span><span class="op" id="6093279">&lt;&lt;</span><span class="num" id="6093281">63</span><span class="op" id="6093283">-</span><span class="num" id="6093284">1</span><span class="op" id="6093285">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6093289">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6093351">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093406">var</span>&nbsp;<span class="ident" id="6093410">ident</span>&nbsp;<span class="op" id="6093416">[</span><span class="num" id="6093417">4</span><span class="op" id="6093418">]</span><span class="builtintype" id="6093419">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093425">if</span>&nbsp;<span class="ident" id="6093428">_</span><span class="op" id="6093429">,</span>&nbsp;<span class="ident" id="6093431">err</span>&nbsp;<span class="op" id="6093435">:=</span>&nbsp;<span class="ident" id="6093438">r</span><span class="op" id="6093439">.</span><span class="ident" id="6093440">ReadAt</span><span class="op" id="6093446">(</span><span class="ident" id="6093447">ident</span><span class="op" id="6093452">[</span><span class="num" id="6093453">0</span><span class="op" id="6093454">:</span><span class="op" id="6093455">]</span><span class="op" id="6093456">,</span>&nbsp;<span class="num" id="6093458">0</span><span class="op" id="6093459">)</span><span class="op" id="6093460">;</span>&nbsp;<span class="ident" id="6093462">err</span>&nbsp;<span class="op" id="6093466">!=</span>&nbsp;<span class="ident" id="6093469">nil</span>&nbsp;<span class="op" id="6093473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093477">return</span>&nbsp;<span class="ident" id="6093484">nil</span><span class="op" id="6093487">,</span>&nbsp;<span class="ident" id="6093489">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093497">be</span>&nbsp;<span class="op" id="6093500">:=</span>&nbsp;<span class="ident" id="6093503">binary</span><span class="op" id="6093509">.</span><span class="ident" id="6093510">BigEndian</span><span class="op" id="6093519">.</span><span class="ident" id="6093520">Uint32</span><span class="op" id="6093526">(</span><span class="ident" id="6093527">ident</span><span class="op" id="6093532">[</span><span class="num" id="6093533">0</span><span class="op" id="6093534">:</span><span class="op" id="6093535">]</span><span class="op" id="6093536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093539">le</span>&nbsp;<span class="op" id="6093542">:=</span>&nbsp;<span class="ident" id="6093545">binary</span><span class="op" id="6093551">.</span><span class="ident" id="6093552">LittleEndian</span><span class="op" id="6093564">.</span><span class="ident" id="6093565">Uint32</span><span class="op" id="6093571">(</span><span class="ident" id="6093572">ident</span><span class="op" id="6093577">[</span><span class="num" id="6093578">0</span><span class="op" id="6093579">:</span><span class="op" id="6093580">]</span><span class="op" id="6093581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093584">switch</span>&nbsp;<span class="ident" id="6093591">Magic32</span>&nbsp;<span class="op" id="6093599">&amp;^</span>&nbsp;<span class="num" id="6093602">1</span>&nbsp;<span class="op" id="6093604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093607">case</span>&nbsp;<span class="ident" id="6093612">be</span>&nbsp;<span class="op" id="6093615">&amp;^</span>&nbsp;<span class="num" id="6093618">1</span><span class="op" id="6093619">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093623">f</span><span class="op" id="6093624">.</span><span class="ident" id="6093625">ByteOrder</span>&nbsp;<span class="op" id="6093635">=</span>&nbsp;<span class="ident" id="6093637">binary</span><span class="op" id="6093643">.</span><span class="ident" id="6093644">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093656">f</span><span class="op" id="6093657">.</span><span class="ident" id="6093658">Magic</span>&nbsp;<span class="op" id="6093664">=</span>&nbsp;<span class="ident" id="6093666">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093670">case</span>&nbsp;<span class="ident" id="6093675">le</span>&nbsp;<span class="op" id="6093678">&amp;^</span>&nbsp;<span class="num" id="6093681">1</span><span class="op" id="6093682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093686">f</span><span class="op" id="6093687">.</span><span class="ident" id="6093688">ByteOrder</span>&nbsp;<span class="op" id="6093698">=</span>&nbsp;<span class="ident" id="6093700">binary</span><span class="op" id="6093706">.</span><span class="ident" id="6093707">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093722">f</span><span class="op" id="6093723">.</span><span class="ident" id="6093724">Magic</span>&nbsp;<span class="op" id="6093730">=</span>&nbsp;<span class="ident" id="6093732">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093736">default</span><span class="op" id="6093743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093747">return</span>&nbsp;<span class="ident" id="6093754">nil</span><span class="op" id="6093757">,</span>&nbsp;<span class="op" id="6093759">&amp;</span><span class="ident" id="6093760">FormatError</span><span class="op" id="6093771">{</span><span class="num" id="6093772">0</span><span class="op" id="6093773">,</span>&nbsp;<span class="string" id="6093775">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6093797">,</span>&nbsp;<span class="ident" id="6093799">nil</span><span class="op" id="6093802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6093809">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093838">if</span>&nbsp;<span class="ident" id="6093841">err</span>&nbsp;<span class="op" id="6093845">:=</span>&nbsp;<span class="ident" id="6093848">binary</span><span class="op" id="6093854">.</span><span class="ident" id="6093855">Read</span><span class="op" id="6093859">(</span><span class="ident" id="6093860">sr</span><span class="op" id="6093862">,</span>&nbsp;<span class="ident" id="6093864">f</span><span class="op" id="6093865">.</span><span class="ident" id="6093866">ByteOrder</span><span class="op" id="6093875">,</span>&nbsp;<span class="op" id="6093877">&amp;</span><span class="ident" id="6093878">f</span><span class="op" id="6093879">.</span><span class="ident" id="6093880">FileHeader</span><span class="op" id="6093890">)</span><span class="op" id="6093891">;</span>&nbsp;<span class="ident" id="6093893">err</span>&nbsp;<span class="op" id="6093897">!=</span>&nbsp;<span class="ident" id="6093900">nil</span>&nbsp;<span class="op" id="6093904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093908">return</span>&nbsp;<span class="ident" id="6093915">nil</span><span class="op" id="6093918">,</span>&nbsp;<span class="ident" id="6093920">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6093929">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093953">offset</span>&nbsp;<span class="op" id="6093960">:=</span>&nbsp;<span class="ident" id="6093963">int64</span><span class="op" id="6093968">(</span><span class="ident" id="6093969">fileHeaderSize32</span><span class="op" id="6093985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093988">if</span>&nbsp;<span class="ident" id="6093991">f</span><span class="op" id="6093992">.</span><span class="ident" id="6093993">Magic</span>&nbsp;<span class="op" id="6093999">==</span>&nbsp;<span class="ident" id="6094002">Magic64</span>&nbsp;<span class="op" id="6094010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094014">offset</span>&nbsp;<span class="op" id="6094021">=</span>&nbsp;<span class="ident" id="6094023">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094044">dat</span>&nbsp;<span class="op" id="6094048">:=</span>&nbsp;<span class="builtinfunc" id="6094051">make</span><span class="op" id="6094055">(</span><span class="op" id="6094056">[</span><span class="op" id="6094057">]</span><span class="builtintype" id="6094058">byte</span><span class="op" id="6094062">,</span>&nbsp;<span class="ident" id="6094064">f</span><span class="op" id="6094065">.</span><span class="ident" id="6094066">Cmdsz</span><span class="op" id="6094071">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094074">if</span>&nbsp;<span class="ident" id="6094077">_</span><span class="op" id="6094078">,</span>&nbsp;<span class="ident" id="6094080">err</span>&nbsp;<span class="op" id="6094084">:=</span>&nbsp;<span class="ident" id="6094087">r</span><span class="op" id="6094088">.</span><span class="ident" id="6094089">ReadAt</span><span class="op" id="6094095">(</span><span class="ident" id="6094096">dat</span><span class="op" id="6094099">,</span>&nbsp;<span class="ident" id="6094101">offset</span><span class="op" id="6094107">)</span><span class="op" id="6094108">;</span>&nbsp;<span class="ident" id="6094110">err</span>&nbsp;<span class="op" id="6094114">!=</span>&nbsp;<span class="ident" id="6094117">nil</span>&nbsp;<span class="op" id="6094121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094125">return</span>&nbsp;<span class="ident" id="6094132">nil</span><span class="op" id="6094135">,</span>&nbsp;<span class="ident" id="6094137">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094145">f</span><span class="op" id="6094146">.</span><span class="ident" id="6094147">Loads</span>&nbsp;<span class="op" id="6094153">=</span>&nbsp;<span class="builtinfunc" id="6094155">make</span><span class="op" id="6094159">(</span><span class="op" id="6094160">[</span><span class="op" id="6094161">]</span><span class="ident" id="6094162">Load</span><span class="op" id="6094166">,</span>&nbsp;<span class="ident" id="6094168">f</span><span class="op" id="6094169">.</span><span class="ident" id="6094170">Ncmd</span><span class="op" id="6094174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094177">bo</span>&nbsp;<span class="op" id="6094180">:=</span>&nbsp;<span class="ident" id="6094183">f</span><span class="op" id="6094184">.</span><span class="ident" id="6094185">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094196">for</span>&nbsp;<span class="ident" id="6094200">i</span>&nbsp;<span class="op" id="6094202">:=</span>&nbsp;<span class="keyword" id="6094205">range</span>&nbsp;<span class="ident" id="6094211">f</span><span class="op" id="6094212">.</span><span class="ident" id="6094213">Loads</span>&nbsp;<span class="op" id="6094219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094223">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094285">if</span>&nbsp;<span class="builtinfunc" id="6094288">len</span><span class="op" id="6094291">(</span><span class="ident" id="6094292">dat</span><span class="op" id="6094295">)</span>&nbsp;<span class="op" id="6094297">&lt;</span>&nbsp;<span class="num" id="6094299">8</span>&nbsp;<span class="op" id="6094301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094306">return</span>&nbsp;<span class="ident" id="6094313">nil</span><span class="op" id="6094316">,</span>&nbsp;<span class="op" id="6094318">&amp;</span><span class="ident" id="6094319">FormatError</span><span class="op" id="6094330">{</span><span class="ident" id="6094331">offset</span><span class="op" id="6094337">,</span>&nbsp;<span class="string" id="6094339">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6094364">,</span>&nbsp;<span class="ident" id="6094366">nil</span><span class="op" id="6094369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094373">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094377">cmd</span><span class="op" id="6094380">,</span>&nbsp;<span class="ident" id="6094382">siz</span>&nbsp;<span class="op" id="6094386">:=</span>&nbsp;<span class="ident" id="6094389">LoadCmd</span><span class="op" id="6094396">(</span><span class="ident" id="6094397">bo</span><span class="op" id="6094399">.</span><span class="ident" id="6094400">Uint32</span><span class="op" id="6094406">(</span><span class="ident" id="6094407">dat</span><span class="op" id="6094410">[</span><span class="num" id="6094411">0</span><span class="op" id="6094412">:</span><span class="num" id="6094413">4</span><span class="op" id="6094414">]</span><span class="op" id="6094415">)</span><span class="op" id="6094416">)</span><span class="op" id="6094417">,</span>&nbsp;<span class="ident" id="6094419">bo</span><span class="op" id="6094421">.</span><span class="ident" id="6094422">Uint32</span><span class="op" id="6094428">(</span><span class="ident" id="6094429">dat</span><span class="op" id="6094432">[</span><span class="num" id="6094433">4</span><span class="op" id="6094434">:</span><span class="num" id="6094435">8</span><span class="op" id="6094436">]</span><span class="op" id="6094437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094441">if</span>&nbsp;<span class="ident" id="6094444">siz</span>&nbsp;<span class="op" id="6094448">&lt;</span>&nbsp;<span class="num" id="6094450">8</span>&nbsp;<span class="op" id="6094452">||</span>&nbsp;<span class="ident" id="6094455">siz</span>&nbsp;<span class="op" id="6094459">&gt;</span>&nbsp;<span class="builtintype" id="6094461">uint32</span><span class="op" id="6094467">(</span><span class="builtinfunc" id="6094468">len</span><span class="op" id="6094471">(</span><span class="ident" id="6094472">dat</span><span class="op" id="6094475">)</span><span class="op" id="6094476">)</span>&nbsp;<span class="op" id="6094478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094483">return</span>&nbsp;<span class="ident" id="6094490">nil</span><span class="op" id="6094493">,</span>&nbsp;<span class="op" id="6094495">&amp;</span><span class="ident" id="6094496">FormatError</span><span class="op" id="6094507">{</span><span class="ident" id="6094508">offset</span><span class="op" id="6094514">,</span>&nbsp;<span class="string" id="6094516">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6094544">,</span>&nbsp;<span class="ident" id="6094546">nil</span><span class="op" id="6094549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094557">var</span>&nbsp;<span class="ident" id="6094561">cmddat</span>&nbsp;<span class="op" id="6094568">[</span><span class="op" id="6094569">]</span><span class="builtintype" id="6094570">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094577">cmddat</span><span class="op" id="6094583">,</span>&nbsp;<span class="ident" id="6094585">dat</span>&nbsp;<span class="op" id="6094589">=</span>&nbsp;<span class="ident" id="6094591">dat</span><span class="op" id="6094594">[</span><span class="num" id="6094595">0</span><span class="op" id="6094596">:</span><span class="ident" id="6094597">siz</span><span class="op" id="6094600">]</span><span class="op" id="6094601">,</span>&nbsp;<span class="ident" id="6094603">dat</span><span class="op" id="6094606">[</span><span class="ident" id="6094607">siz</span><span class="op" id="6094610">:</span><span class="op" id="6094611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094615">offset</span>&nbsp;<span class="op" id="6094622">+=</span>&nbsp;<span class="ident" id="6094625">int64</span><span class="op" id="6094630">(</span><span class="ident" id="6094631">siz</span><span class="op" id="6094634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094638">var</span>&nbsp;<span class="ident" id="6094642">s</span>&nbsp;<span class="op" id="6094644">*</span><span class="ident" id="6094645">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094655">switch</span>&nbsp;<span class="ident" id="6094662">cmd</span>&nbsp;<span class="op" id="6094666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094670">default</span><span class="op" id="6094677">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094682">f</span><span class="op" id="6094683">.</span><span class="ident" id="6094684">Loads</span><span class="op" id="6094689">[</span><span class="ident" id="6094690">i</span><span class="op" id="6094691">]</span>&nbsp;<span class="op" id="6094693">=</span>&nbsp;<span class="ident" id="6094695">LoadBytes</span><span class="op" id="6094704">(</span><span class="ident" id="6094705">cmddat</span><span class="op" id="6094711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094716">case</span>&nbsp;<span class="ident" id="6094721">LoadCmdDylib</span><span class="op" id="6094733">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094738">var</span>&nbsp;<span class="ident" id="6094742">hdr</span>&nbsp;<span class="ident" id="6094746">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094758">b</span>&nbsp;<span class="op" id="6094760">:=</span>&nbsp;<span class="ident" id="6094763">bytes</span><span class="op" id="6094768">.</span><span class="ident" id="6094769">NewReader</span><span class="op" id="6094778">(</span><span class="ident" id="6094779">cmddat</span><span class="op" id="6094785">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094790">if</span>&nbsp;<span class="ident" id="6094793">err</span>&nbsp;<span class="op" id="6094797">:=</span>&nbsp;<span class="ident" id="6094800">binary</span><span class="op" id="6094806">.</span><span class="ident" id="6094807">Read</span><span class="op" id="6094811">(</span><span class="ident" id="6094812">b</span><span class="op" id="6094813">,</span>&nbsp;<span class="ident" id="6094815">bo</span><span class="op" id="6094817">,</span>&nbsp;<span class="op" id="6094819">&amp;</span><span class="ident" id="6094820">hdr</span><span class="op" id="6094823">)</span><span class="op" id="6094824">;</span>&nbsp;<span class="ident" id="6094826">err</span>&nbsp;<span class="op" id="6094830">!=</span>&nbsp;<span class="ident" id="6094833">nil</span>&nbsp;<span class="op" id="6094837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094843">return</span>&nbsp;<span class="ident" id="6094850">nil</span><span class="op" id="6094853">,</span>&nbsp;<span class="ident" id="6094855">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094867">l</span>&nbsp;<span class="op" id="6094869">:=</span>&nbsp;<span class="builtinfunc" id="6094872">new</span><span class="op" id="6094875">(</span><span class="ident" id="6094876">Dylib</span><span class="op" id="6094881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094886">if</span>&nbsp;<span class="ident" id="6094889">hdr</span><span class="op" id="6094892">.</span><span class="ident" id="6094893">Name</span>&nbsp;<span class="op" id="6094898">&gt;=</span>&nbsp;<span class="builtintype" id="6094901">uint32</span><span class="op" id="6094907">(</span><span class="builtinfunc" id="6094908">len</span><span class="op" id="6094911">(</span><span class="ident" id="6094912">cmddat</span><span class="op" id="6094918">)</span><span class="op" id="6094919">)</span>&nbsp;<span class="op" id="6094921">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094927">return</span>&nbsp;<span class="ident" id="6094934">nil</span><span class="op" id="6094937">,</span>&nbsp;<span class="op" id="6094939">&amp;</span><span class="ident" id="6094940">FormatError</span><span class="op" id="6094951">{</span><span class="ident" id="6094952">offset</span><span class="op" id="6094958">,</span>&nbsp;<span class="string" id="6094960">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6095001">,</span>&nbsp;<span class="ident" id="6095003">hdr</span><span class="op" id="6095006">.</span><span class="ident" id="6095007">Name</span><span class="op" id="6095011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095021">l</span><span class="op" id="6095022">.</span><span class="ident" id="6095023">Name</span>&nbsp;<span class="op" id="6095028">=</span>&nbsp;<span class="ident" id="6095030">cstring</span><span class="op" id="6095037">(</span><span class="ident" id="6095038">cmddat</span><span class="op" id="6095044">[</span><span class="ident" id="6095045">hdr</span><span class="op" id="6095048">.</span><span class="ident" id="6095049">Name</span><span class="op" id="6095053">:</span><span class="op" id="6095054">]</span><span class="op" id="6095055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095060">l</span><span class="op" id="6095061">.</span><span class="ident" id="6095062">Time</span>&nbsp;<span class="op" id="6095067">=</span>&nbsp;<span class="ident" id="6095069">hdr</span><span class="op" id="6095072">.</span><span class="ident" id="6095073">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095081">l</span><span class="op" id="6095082">.</span><span class="ident" id="6095083">CurrentVersion</span>&nbsp;<span class="op" id="6095098">=</span>&nbsp;<span class="ident" id="6095100">hdr</span><span class="op" id="6095103">.</span><span class="ident" id="6095104">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095122">l</span><span class="op" id="6095123">.</span><span class="ident" id="6095124">CompatVersion</span>&nbsp;<span class="op" id="6095138">=</span>&nbsp;<span class="ident" id="6095140">hdr</span><span class="op" id="6095143">.</span><span class="ident" id="6095144">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095161">l</span><span class="op" id="6095162">.</span><span class="ident" id="6095163">LoadBytes</span>&nbsp;<span class="op" id="6095173">=</span>&nbsp;<span class="ident" id="6095175">LoadBytes</span><span class="op" id="6095184">(</span><span class="ident" id="6095185">cmddat</span><span class="op" id="6095191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095196">f</span><span class="op" id="6095197">.</span><span class="ident" id="6095198">Loads</span><span class="op" id="6095203">[</span><span class="ident" id="6095204">i</span><span class="op" id="6095205">]</span>&nbsp;<span class="op" id="6095207">=</span>&nbsp;<span class="ident" id="6095209">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095214">case</span>&nbsp;<span class="ident" id="6095219">LoadCmdSymtab</span><span class="op" id="6095232">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095237">var</span>&nbsp;<span class="ident" id="6095241">hdr</span>&nbsp;<span class="ident" id="6095245">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095258">b</span>&nbsp;<span class="op" id="6095260">:=</span>&nbsp;<span class="ident" id="6095263">bytes</span><span class="op" id="6095268">.</span><span class="ident" id="6095269">NewReader</span><span class="op" id="6095278">(</span><span class="ident" id="6095279">cmddat</span><span class="op" id="6095285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095290">if</span>&nbsp;<span class="ident" id="6095293">err</span>&nbsp;<span class="op" id="6095297">:=</span>&nbsp;<span class="ident" id="6095300">binary</span><span class="op" id="6095306">.</span><span class="ident" id="6095307">Read</span><span class="op" id="6095311">(</span><span class="ident" id="6095312">b</span><span class="op" id="6095313">,</span>&nbsp;<span class="ident" id="6095315">bo</span><span class="op" id="6095317">,</span>&nbsp;<span class="op" id="6095319">&amp;</span><span class="ident" id="6095320">hdr</span><span class="op" id="6095323">)</span><span class="op" id="6095324">;</span>&nbsp;<span class="ident" id="6095326">err</span>&nbsp;<span class="op" id="6095330">!=</span>&nbsp;<span class="ident" id="6095333">nil</span>&nbsp;<span class="op" id="6095337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095343">return</span>&nbsp;<span class="ident" id="6095350">nil</span><span class="op" id="6095353">,</span>&nbsp;<span class="ident" id="6095355">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095362">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095367">strtab</span>&nbsp;<span class="op" id="6095374">:=</span>&nbsp;<span class="builtinfunc" id="6095377">make</span><span class="op" id="6095381">(</span><span class="op" id="6095382">[</span><span class="op" id="6095383">]</span><span class="builtintype" id="6095384">byte</span><span class="op" id="6095388">,</span>&nbsp;<span class="ident" id="6095390">hdr</span><span class="op" id="6095393">.</span><span class="ident" id="6095394">Strsize</span><span class="op" id="6095401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095406">if</span>&nbsp;<span class="ident" id="6095409">_</span><span class="op" id="6095410">,</span>&nbsp;<span class="ident" id="6095412">err</span>&nbsp;<span class="op" id="6095416">:=</span>&nbsp;<span class="ident" id="6095419">r</span><span class="op" id="6095420">.</span><span class="ident" id="6095421">ReadAt</span><span class="op" id="6095427">(</span><span class="ident" id="6095428">strtab</span><span class="op" id="6095434">,</span>&nbsp;<span class="ident" id="6095436">int64</span><span class="op" id="6095441">(</span><span class="ident" id="6095442">hdr</span><span class="op" id="6095445">.</span><span class="ident" id="6095446">Stroff</span><span class="op" id="6095452">)</span><span class="op" id="6095453">)</span><span class="op" id="6095454">;</span>&nbsp;<span class="ident" id="6095456">err</span>&nbsp;<span class="op" id="6095460">!=</span>&nbsp;<span class="ident" id="6095463">nil</span>&nbsp;<span class="op" id="6095467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095473">return</span>&nbsp;<span class="ident" id="6095480">nil</span><span class="op" id="6095483">,</span>&nbsp;<span class="ident" id="6095485">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095497">var</span>&nbsp;<span class="ident" id="6095501">symsz</span>&nbsp;<span class="builtintype" id="6095507">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095514">if</span>&nbsp;<span class="ident" id="6095517">f</span><span class="op" id="6095518">.</span><span class="ident" id="6095519">Magic</span>&nbsp;<span class="op" id="6095525">==</span>&nbsp;<span class="ident" id="6095528">Magic64</span>&nbsp;<span class="op" id="6095536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095542">symsz</span>&nbsp;<span class="op" id="6095548">=</span>&nbsp;<span class="num" id="6095550">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095556">}</span>&nbsp;<span class="keyword" id="6095558">else</span>&nbsp;<span class="op" id="6095563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095569">symsz</span>&nbsp;<span class="op" id="6095575">=</span>&nbsp;<span class="num" id="6095577">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095583">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095588">symdat</span>&nbsp;<span class="op" id="6095595">:=</span>&nbsp;<span class="builtinfunc" id="6095598">make</span><span class="op" id="6095602">(</span><span class="op" id="6095603">[</span><span class="op" id="6095604">]</span><span class="builtintype" id="6095605">byte</span><span class="op" id="6095609">,</span>&nbsp;<span class="builtintype" id="6095611">int</span><span class="op" id="6095614">(</span><span class="ident" id="6095615">hdr</span><span class="op" id="6095618">.</span><span class="ident" id="6095619">Nsyms</span><span class="op" id="6095624">)</span><span class="op" id="6095625">*</span><span class="ident" id="6095626">symsz</span><span class="op" id="6095631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095636">if</span>&nbsp;<span class="ident" id="6095639">_</span><span class="op" id="6095640">,</span>&nbsp;<span class="ident" id="6095642">err</span>&nbsp;<span class="op" id="6095646">:=</span>&nbsp;<span class="ident" id="6095649">r</span><span class="op" id="6095650">.</span><span class="ident" id="6095651">ReadAt</span><span class="op" id="6095657">(</span><span class="ident" id="6095658">symdat</span><span class="op" id="6095664">,</span>&nbsp;<span class="ident" id="6095666">int64</span><span class="op" id="6095671">(</span><span class="ident" id="6095672">hdr</span><span class="op" id="6095675">.</span><span class="ident" id="6095676">Symoff</span><span class="op" id="6095682">)</span><span class="op" id="6095683">)</span><span class="op" id="6095684">;</span>&nbsp;<span class="ident" id="6095686">err</span>&nbsp;<span class="op" id="6095690">!=</span>&nbsp;<span class="ident" id="6095693">nil</span>&nbsp;<span class="op" id="6095697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095703">return</span>&nbsp;<span class="ident" id="6095710">nil</span><span class="op" id="6095713">,</span>&nbsp;<span class="ident" id="6095715">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095727">st</span><span class="op" id="6095729">,</span>&nbsp;<span class="ident" id="6095731">err</span>&nbsp;<span class="op" id="6095735">:=</span>&nbsp;<span class="ident" id="6095738">f</span><span class="op" id="6095739">.</span><span class="ident" id="6095740">parseSymtab</span><span class="op" id="6095751">(</span><span class="ident" id="6095752">symdat</span><span class="op" id="6095758">,</span>&nbsp;<span class="ident" id="6095760">strtab</span><span class="op" id="6095766">,</span>&nbsp;<span class="ident" id="6095768">cmddat</span><span class="op" id="6095774">,</span>&nbsp;<span class="op" id="6095776">&amp;</span><span class="ident" id="6095777">hdr</span><span class="op" id="6095780">,</span>&nbsp;<span class="ident" id="6095782">offset</span><span class="op" id="6095788">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095793">if</span>&nbsp;<span class="ident" id="6095796">err</span>&nbsp;<span class="op" id="6095800">!=</span>&nbsp;<span class="ident" id="6095803">nil</span>&nbsp;<span class="op" id="6095807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095813">return</span>&nbsp;<span class="ident" id="6095820">nil</span><span class="op" id="6095823">,</span>&nbsp;<span class="ident" id="6095825">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095837">f</span><span class="op" id="6095838">.</span><span class="ident" id="6095839">Loads</span><span class="op" id="6095844">[</span><span class="ident" id="6095845">i</span><span class="op" id="6095846">]</span>&nbsp;<span class="op" id="6095848">=</span>&nbsp;<span class="ident" id="6095850">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095856">f</span><span class="op" id="6095857">.</span><span class="ident" id="6095858">Symtab</span>&nbsp;<span class="op" id="6095865">=</span>&nbsp;<span class="ident" id="6095867">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095873">case</span>&nbsp;<span class="ident" id="6095878">LoadCmdDysymtab</span><span class="op" id="6095893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095898">var</span>&nbsp;<span class="ident" id="6095902">hdr</span>&nbsp;<span class="ident" id="6095906">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095921">b</span>&nbsp;<span class="op" id="6095923">:=</span>&nbsp;<span class="ident" id="6095926">bytes</span><span class="op" id="6095931">.</span><span class="ident" id="6095932">NewReader</span><span class="op" id="6095941">(</span><span class="ident" id="6095942">cmddat</span><span class="op" id="6095948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095953">if</span>&nbsp;<span class="ident" id="6095956">err</span>&nbsp;<span class="op" id="6095960">:=</span>&nbsp;<span class="ident" id="6095963">binary</span><span class="op" id="6095969">.</span><span class="ident" id="6095970">Read</span><span class="op" id="6095974">(</span><span class="ident" id="6095975">b</span><span class="op" id="6095976">,</span>&nbsp;<span class="ident" id="6095978">bo</span><span class="op" id="6095980">,</span>&nbsp;<span class="op" id="6095982">&amp;</span><span class="ident" id="6095983">hdr</span><span class="op" id="6095986">)</span><span class="op" id="6095987">;</span>&nbsp;<span class="ident" id="6095989">err</span>&nbsp;<span class="op" id="6095993">!=</span>&nbsp;<span class="ident" id="6095996">nil</span>&nbsp;<span class="op" id="6096000">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096006">return</span>&nbsp;<span class="ident" id="6096013">nil</span><span class="op" id="6096016">,</span>&nbsp;<span class="ident" id="6096018">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096030">dat</span>&nbsp;<span class="op" id="6096034">:=</span>&nbsp;<span class="builtinfunc" id="6096037">make</span><span class="op" id="6096041">(</span><span class="op" id="6096042">[</span><span class="op" id="6096043">]</span><span class="builtintype" id="6096044">byte</span><span class="op" id="6096048">,</span>&nbsp;<span class="ident" id="6096050">hdr</span><span class="op" id="6096053">.</span><span class="ident" id="6096054">Nindirectsyms</span><span class="op" id="6096067">*</span><span class="num" id="6096068">4</span><span class="op" id="6096069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096074">if</span>&nbsp;<span class="ident" id="6096077">_</span><span class="op" id="6096078">,</span>&nbsp;<span class="ident" id="6096080">err</span>&nbsp;<span class="op" id="6096084">:=</span>&nbsp;<span class="ident" id="6096087">r</span><span class="op" id="6096088">.</span><span class="ident" id="6096089">ReadAt</span><span class="op" id="6096095">(</span><span class="ident" id="6096096">dat</span><span class="op" id="6096099">,</span>&nbsp;<span class="ident" id="6096101">int64</span><span class="op" id="6096106">(</span><span class="ident" id="6096107">hdr</span><span class="op" id="6096110">.</span><span class="ident" id="6096111">Indirectsymoff</span><span class="op" id="6096125">)</span><span class="op" id="6096126">)</span><span class="op" id="6096127">;</span>&nbsp;<span class="ident" id="6096129">err</span>&nbsp;<span class="op" id="6096133">!=</span>&nbsp;<span class="ident" id="6096136">nil</span>&nbsp;<span class="op" id="6096140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096146">return</span>&nbsp;<span class="ident" id="6096153">nil</span><span class="op" id="6096156">,</span>&nbsp;<span class="ident" id="6096158">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096170">x</span>&nbsp;<span class="op" id="6096172">:=</span>&nbsp;<span class="builtinfunc" id="6096175">make</span><span class="op" id="6096179">(</span><span class="op" id="6096180">[</span><span class="op" id="6096181">]</span><span class="builtintype" id="6096182">uint32</span><span class="op" id="6096188">,</span>&nbsp;<span class="ident" id="6096190">hdr</span><span class="op" id="6096193">.</span><span class="ident" id="6096194">Nindirectsyms</span><span class="op" id="6096207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096212">if</span>&nbsp;<span class="ident" id="6096215">err</span>&nbsp;<span class="op" id="6096219">:=</span>&nbsp;<span class="ident" id="6096222">binary</span><span class="op" id="6096228">.</span><span class="ident" id="6096229">Read</span><span class="op" id="6096233">(</span><span class="ident" id="6096234">bytes</span><span class="op" id="6096239">.</span><span class="ident" id="6096240">NewReader</span><span class="op" id="6096249">(</span><span class="ident" id="6096250">dat</span><span class="op" id="6096253">)</span><span class="op" id="6096254">,</span>&nbsp;<span class="ident" id="6096256">bo</span><span class="op" id="6096258">,</span>&nbsp;<span class="ident" id="6096260">x</span><span class="op" id="6096261">)</span><span class="op" id="6096262">;</span>&nbsp;<span class="ident" id="6096264">err</span>&nbsp;<span class="op" id="6096268">!=</span>&nbsp;<span class="ident" id="6096271">nil</span>&nbsp;<span class="op" id="6096275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096281">return</span>&nbsp;<span class="ident" id="6096288">nil</span><span class="op" id="6096291">,</span>&nbsp;<span class="ident" id="6096293">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096300">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096305">st</span>&nbsp;<span class="op" id="6096308">:=</span>&nbsp;<span class="builtinfunc" id="6096311">new</span><span class="op" id="6096314">(</span><span class="ident" id="6096315">Dysymtab</span><span class="op" id="6096323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096328">st</span><span class="op" id="6096330">.</span><span class="ident" id="6096331">LoadBytes</span>&nbsp;<span class="op" id="6096341">=</span>&nbsp;<span class="ident" id="6096343">LoadBytes</span><span class="op" id="6096352">(</span><span class="ident" id="6096353">cmddat</span><span class="op" id="6096359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096364">st</span><span class="op" id="6096366">.</span><span class="ident" id="6096367">DysymtabCmd</span>&nbsp;<span class="op" id="6096379">=</span>&nbsp;<span class="ident" id="6096381">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096388">st</span><span class="op" id="6096390">.</span><span class="ident" id="6096391">IndirectSyms</span>&nbsp;<span class="op" id="6096404">=</span>&nbsp;<span class="ident" id="6096406">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096411">f</span><span class="op" id="6096412">.</span><span class="ident" id="6096413">Loads</span><span class="op" id="6096418">[</span><span class="ident" id="6096419">i</span><span class="op" id="6096420">]</span>&nbsp;<span class="op" id="6096422">=</span>&nbsp;<span class="ident" id="6096424">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096430">f</span><span class="op" id="6096431">.</span><span class="ident" id="6096432">Dysymtab</span>&nbsp;<span class="op" id="6096441">=</span>&nbsp;<span class="ident" id="6096443">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096449">case</span>&nbsp;<span class="ident" id="6096454">LoadCmdSegment</span><span class="op" id="6096468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096473">var</span>&nbsp;<span class="ident" id="6096477">seg32</span>&nbsp;<span class="ident" id="6096483">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096496">b</span>&nbsp;<span class="op" id="6096498">:=</span>&nbsp;<span class="ident" id="6096501">bytes</span><span class="op" id="6096506">.</span><span class="ident" id="6096507">NewReader</span><span class="op" id="6096516">(</span><span class="ident" id="6096517">cmddat</span><span class="op" id="6096523">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096528">if</span>&nbsp;<span class="ident" id="6096531">err</span>&nbsp;<span class="op" id="6096535">:=</span>&nbsp;<span class="ident" id="6096538">binary</span><span class="op" id="6096544">.</span><span class="ident" id="6096545">Read</span><span class="op" id="6096549">(</span><span class="ident" id="6096550">b</span><span class="op" id="6096551">,</span>&nbsp;<span class="ident" id="6096553">bo</span><span class="op" id="6096555">,</span>&nbsp;<span class="op" id="6096557">&amp;</span><span class="ident" id="6096558">seg32</span><span class="op" id="6096563">)</span><span class="op" id="6096564">;</span>&nbsp;<span class="ident" id="6096566">err</span>&nbsp;<span class="op" id="6096570">!=</span>&nbsp;<span class="ident" id="6096573">nil</span>&nbsp;<span class="op" id="6096577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096583">return</span>&nbsp;<span class="ident" id="6096590">nil</span><span class="op" id="6096593">,</span>&nbsp;<span class="ident" id="6096595">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096607">s</span>&nbsp;<span class="op" id="6096609">=</span>&nbsp;<span class="builtinfunc" id="6096611">new</span><span class="op" id="6096614">(</span><span class="ident" id="6096615">Segment</span><span class="op" id="6096622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096627">s</span><span class="op" id="6096628">.</span><span class="ident" id="6096629">LoadBytes</span>&nbsp;<span class="op" id="6096639">=</span>&nbsp;<span class="ident" id="6096641">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096651">s</span><span class="op" id="6096652">.</span><span class="ident" id="6096653">Cmd</span>&nbsp;<span class="op" id="6096657">=</span>&nbsp;<span class="ident" id="6096659">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096666">s</span><span class="op" id="6096667">.</span><span class="ident" id="6096668">Len</span>&nbsp;<span class="op" id="6096672">=</span>&nbsp;<span class="ident" id="6096674">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096681">s</span><span class="op" id="6096682">.</span><span class="ident" id="6096683">Name</span>&nbsp;<span class="op" id="6096688">=</span>&nbsp;<span class="ident" id="6096690">cstring</span><span class="op" id="6096697">(</span><span class="ident" id="6096698">seg32</span><span class="op" id="6096703">.</span><span class="ident" id="6096704">Name</span><span class="op" id="6096708">[</span><span class="num" id="6096709">0</span><span class="op" id="6096710">:</span><span class="op" id="6096711">]</span><span class="op" id="6096712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096717">s</span><span class="op" id="6096718">.</span><span class="ident" id="6096719">Addr</span>&nbsp;<span class="op" id="6096724">=</span>&nbsp;<span class="ident" id="6096726">uint64</span><span class="op" id="6096732">(</span><span class="ident" id="6096733">seg32</span><span class="op" id="6096738">.</span><span class="ident" id="6096739">Addr</span><span class="op" id="6096743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096748">s</span><span class="op" id="6096749">.</span><span class="ident" id="6096750">Memsz</span>&nbsp;<span class="op" id="6096756">=</span>&nbsp;<span class="ident" id="6096758">uint64</span><span class="op" id="6096764">(</span><span class="ident" id="6096765">seg32</span><span class="op" id="6096770">.</span><span class="ident" id="6096771">Memsz</span><span class="op" id="6096776">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096781">s</span><span class="op" id="6096782">.</span><span class="ident" id="6096783">Offset</span>&nbsp;<span class="op" id="6096790">=</span>&nbsp;<span class="ident" id="6096792">uint64</span><span class="op" id="6096798">(</span><span class="ident" id="6096799">seg32</span><span class="op" id="6096804">.</span><span class="ident" id="6096805">Offset</span><span class="op" id="6096811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096816">s</span><span class="op" id="6096817">.</span><span class="ident" id="6096818">Filesz</span>&nbsp;<span class="op" id="6096825">=</span>&nbsp;<span class="ident" id="6096827">uint64</span><span class="op" id="6096833">(</span><span class="ident" id="6096834">seg32</span><span class="op" id="6096839">.</span><span class="ident" id="6096840">Filesz</span><span class="op" id="6096846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096851">s</span><span class="op" id="6096852">.</span><span class="ident" id="6096853">Maxprot</span>&nbsp;<span class="op" id="6096861">=</span>&nbsp;<span class="ident" id="6096863">seg32</span><span class="op" id="6096868">.</span><span class="ident" id="6096869">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096880">s</span><span class="op" id="6096881">.</span><span class="ident" id="6096882">Prot</span>&nbsp;<span class="op" id="6096887">=</span>&nbsp;<span class="ident" id="6096889">seg32</span><span class="op" id="6096894">.</span><span class="ident" id="6096895">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096903">s</span><span class="op" id="6096904">.</span><span class="ident" id="6096905">Nsect</span>&nbsp;<span class="op" id="6096911">=</span>&nbsp;<span class="ident" id="6096913">seg32</span><span class="op" id="6096918">.</span><span class="ident" id="6096919">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096928">s</span><span class="op" id="6096929">.</span><span class="ident" id="6096930">Flag</span>&nbsp;<span class="op" id="6096935">=</span>&nbsp;<span class="ident" id="6096937">seg32</span><span class="op" id="6096942">.</span><span class="ident" id="6096943">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096951">f</span><span class="op" id="6096952">.</span><span class="ident" id="6096953">Loads</span><span class="op" id="6096958">[</span><span class="ident" id="6096959">i</span><span class="op" id="6096960">]</span>&nbsp;<span class="op" id="6096962">=</span>&nbsp;<span class="ident" id="6096964">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096969">for</span>&nbsp;<span class="ident" id="6096973">i</span>&nbsp;<span class="op" id="6096975">:=</span>&nbsp;<span class="num" id="6096978">0</span><span class="op" id="6096979">;</span>&nbsp;<span class="ident" id="6096981">i</span>&nbsp;<span class="op" id="6096983">&lt;</span>&nbsp;<span class="builtintype" id="6096985">int</span><span class="op" id="6096988">(</span><span class="ident" id="6096989">s</span><span class="op" id="6096990">.</span><span class="ident" id="6096991">Nsect</span><span class="op" id="6096996">)</span><span class="op" id="6096997">;</span>&nbsp;<span class="ident" id="6096999">i</span><span class="op" id="6097000">++</span>&nbsp;<span class="op" id="6097003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097009">var</span>&nbsp;<span class="ident" id="6097013">sh32</span>&nbsp;<span class="ident" id="6097018">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097032">if</span>&nbsp;<span class="ident" id="6097035">err</span>&nbsp;<span class="op" id="6097039">:=</span>&nbsp;<span class="ident" id="6097042">binary</span><span class="op" id="6097048">.</span><span class="ident" id="6097049">Read</span><span class="op" id="6097053">(</span><span class="ident" id="6097054">b</span><span class="op" id="6097055">,</span>&nbsp;<span class="ident" id="6097057">bo</span><span class="op" id="6097059">,</span>&nbsp;<span class="op" id="6097061">&amp;</span><span class="ident" id="6097062">sh32</span><span class="op" id="6097066">)</span><span class="op" id="6097067">;</span>&nbsp;<span class="ident" id="6097069">err</span>&nbsp;<span class="op" id="6097073">!=</span>&nbsp;<span class="ident" id="6097076">nil</span>&nbsp;<span class="op" id="6097080">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097087">return</span>&nbsp;<span class="ident" id="6097094">nil</span><span class="op" id="6097097">,</span>&nbsp;<span class="ident" id="6097099">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097113">sh</span>&nbsp;<span class="op" id="6097116">:=</span>&nbsp;<span class="builtinfunc" id="6097119">new</span><span class="op" id="6097122">(</span><span class="ident" id="6097123">Section</span><span class="op" id="6097130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097136">sh</span><span class="op" id="6097138">.</span><span class="ident" id="6097139">Name</span>&nbsp;<span class="op" id="6097144">=</span>&nbsp;<span class="ident" id="6097146">cstring</span><span class="op" id="6097153">(</span><span class="ident" id="6097154">sh32</span><span class="op" id="6097158">.</span><span class="ident" id="6097159">Name</span><span class="op" id="6097163">[</span><span class="num" id="6097164">0</span><span class="op" id="6097165">:</span><span class="op" id="6097166">]</span><span class="op" id="6097167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097173">sh</span><span class="op" id="6097175">.</span><span class="ident" id="6097176">Seg</span>&nbsp;<span class="op" id="6097180">=</span>&nbsp;<span class="ident" id="6097182">cstring</span><span class="op" id="6097189">(</span><span class="ident" id="6097190">sh32</span><span class="op" id="6097194">.</span><span class="ident" id="6097195">Seg</span><span class="op" id="6097198">[</span><span class="num" id="6097199">0</span><span class="op" id="6097200">:</span><span class="op" id="6097201">]</span><span class="op" id="6097202">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097208">sh</span><span class="op" id="6097210">.</span><span class="ident" id="6097211">Addr</span>&nbsp;<span class="op" id="6097216">=</span>&nbsp;<span class="ident" id="6097218">uint64</span><span class="op" id="6097224">(</span><span class="ident" id="6097225">sh32</span><span class="op" id="6097229">.</span><span class="ident" id="6097230">Addr</span><span class="op" id="6097234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097240">sh</span><span class="op" id="6097242">.</span><span class="ident" id="6097243">Size</span>&nbsp;<span class="op" id="6097248">=</span>&nbsp;<span class="ident" id="6097250">uint64</span><span class="op" id="6097256">(</span><span class="ident" id="6097257">sh32</span><span class="op" id="6097261">.</span><span class="ident" id="6097262">Size</span><span class="op" id="6097266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097272">sh</span><span class="op" id="6097274">.</span><span class="ident" id="6097275">Offset</span>&nbsp;<span class="op" id="6097282">=</span>&nbsp;<span class="ident" id="6097284">sh32</span><span class="op" id="6097288">.</span><span class="ident" id="6097289">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097300">sh</span><span class="op" id="6097302">.</span><span class="ident" id="6097303">Align</span>&nbsp;<span class="op" id="6097309">=</span>&nbsp;<span class="ident" id="6097311">sh32</span><span class="op" id="6097315">.</span><span class="ident" id="6097316">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097326">sh</span><span class="op" id="6097328">.</span><span class="ident" id="6097329">Reloff</span>&nbsp;<span class="op" id="6097336">=</span>&nbsp;<span class="ident" id="6097338">sh32</span><span class="op" id="6097342">.</span><span class="ident" id="6097343">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097354">sh</span><span class="op" id="6097356">.</span><span class="ident" id="6097357">Nreloc</span>&nbsp;<span class="op" id="6097364">=</span>&nbsp;<span class="ident" id="6097366">sh32</span><span class="op" id="6097370">.</span><span class="ident" id="6097371">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097382">sh</span><span class="op" id="6097384">.</span><span class="ident" id="6097385">Flags</span>&nbsp;<span class="op" id="6097391">=</span>&nbsp;<span class="ident" id="6097393">sh32</span><span class="op" id="6097397">.</span><span class="ident" id="6097398">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097408">f</span><span class="op" id="6097409">.</span><span class="ident" id="6097410">pushSection</span><span class="op" id="6097421">(</span><span class="ident" id="6097422">sh</span><span class="op" id="6097424">,</span>&nbsp;<span class="ident" id="6097426">r</span><span class="op" id="6097427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097437">case</span>&nbsp;<span class="ident" id="6097442">LoadCmdSegment64</span><span class="op" id="6097458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097463">var</span>&nbsp;<span class="ident" id="6097467">seg64</span>&nbsp;<span class="ident" id="6097473">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097486">b</span>&nbsp;<span class="op" id="6097488">:=</span>&nbsp;<span class="ident" id="6097491">bytes</span><span class="op" id="6097496">.</span><span class="ident" id="6097497">NewReader</span><span class="op" id="6097506">(</span><span class="ident" id="6097507">cmddat</span><span class="op" id="6097513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097518">if</span>&nbsp;<span class="ident" id="6097521">err</span>&nbsp;<span class="op" id="6097525">:=</span>&nbsp;<span class="ident" id="6097528">binary</span><span class="op" id="6097534">.</span><span class="ident" id="6097535">Read</span><span class="op" id="6097539">(</span><span class="ident" id="6097540">b</span><span class="op" id="6097541">,</span>&nbsp;<span class="ident" id="6097543">bo</span><span class="op" id="6097545">,</span>&nbsp;<span class="op" id="6097547">&amp;</span><span class="ident" id="6097548">seg64</span><span class="op" id="6097553">)</span><span class="op" id="6097554">;</span>&nbsp;<span class="ident" id="6097556">err</span>&nbsp;<span class="op" id="6097560">!=</span>&nbsp;<span class="ident" id="6097563">nil</span>&nbsp;<span class="op" id="6097567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097573">return</span>&nbsp;<span class="ident" id="6097580">nil</span><span class="op" id="6097583">,</span>&nbsp;<span class="ident" id="6097585">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097597">s</span>&nbsp;<span class="op" id="6097599">=</span>&nbsp;<span class="builtinfunc" id="6097601">new</span><span class="op" id="6097604">(</span><span class="ident" id="6097605">Segment</span><span class="op" id="6097612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097617">s</span><span class="op" id="6097618">.</span><span class="ident" id="6097619">LoadBytes</span>&nbsp;<span class="op" id="6097629">=</span>&nbsp;<span class="ident" id="6097631">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097641">s</span><span class="op" id="6097642">.</span><span class="ident" id="6097643">Cmd</span>&nbsp;<span class="op" id="6097647">=</span>&nbsp;<span class="ident" id="6097649">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097656">s</span><span class="op" id="6097657">.</span><span class="ident" id="6097658">Len</span>&nbsp;<span class="op" id="6097662">=</span>&nbsp;<span class="ident" id="6097664">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097671">s</span><span class="op" id="6097672">.</span><span class="ident" id="6097673">Name</span>&nbsp;<span class="op" id="6097678">=</span>&nbsp;<span class="ident" id="6097680">cstring</span><span class="op" id="6097687">(</span><span class="ident" id="6097688">seg64</span><span class="op" id="6097693">.</span><span class="ident" id="6097694">Name</span><span class="op" id="6097698">[</span><span class="num" id="6097699">0</span><span class="op" id="6097700">:</span><span class="op" id="6097701">]</span><span class="op" id="6097702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097707">s</span><span class="op" id="6097708">.</span><span class="ident" id="6097709">Addr</span>&nbsp;<span class="op" id="6097714">=</span>&nbsp;<span class="ident" id="6097716">seg64</span><span class="op" id="6097721">.</span><span class="ident" id="6097722">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097730">s</span><span class="op" id="6097731">.</span><span class="ident" id="6097732">Memsz</span>&nbsp;<span class="op" id="6097738">=</span>&nbsp;<span class="ident" id="6097740">seg64</span><span class="op" id="6097745">.</span><span class="ident" id="6097746">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097755">s</span><span class="op" id="6097756">.</span><span class="ident" id="6097757">Offset</span>&nbsp;<span class="op" id="6097764">=</span>&nbsp;<span class="ident" id="6097766">seg64</span><span class="op" id="6097771">.</span><span class="ident" id="6097772">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097782">s</span><span class="op" id="6097783">.</span><span class="ident" id="6097784">Filesz</span>&nbsp;<span class="op" id="6097791">=</span>&nbsp;<span class="ident" id="6097793">seg64</span><span class="op" id="6097798">.</span><span class="ident" id="6097799">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097809">s</span><span class="op" id="6097810">.</span><span class="ident" id="6097811">Maxprot</span>&nbsp;<span class="op" id="6097819">=</span>&nbsp;<span class="ident" id="6097821">seg64</span><span class="op" id="6097826">.</span><span class="ident" id="6097827">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097838">s</span><span class="op" id="6097839">.</span><span class="ident" id="6097840">Prot</span>&nbsp;<span class="op" id="6097845">=</span>&nbsp;<span class="ident" id="6097847">seg64</span><span class="op" id="6097852">.</span><span class="ident" id="6097853">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097861">s</span><span class="op" id="6097862">.</span><span class="ident" id="6097863">Nsect</span>&nbsp;<span class="op" id="6097869">=</span>&nbsp;<span class="ident" id="6097871">seg64</span><span class="op" id="6097876">.</span><span class="ident" id="6097877">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097886">s</span><span class="op" id="6097887">.</span><span class="ident" id="6097888">Flag</span>&nbsp;<span class="op" id="6097893">=</span>&nbsp;<span class="ident" id="6097895">seg64</span><span class="op" id="6097900">.</span><span class="ident" id="6097901">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097909">f</span><span class="op" id="6097910">.</span><span class="ident" id="6097911">Loads</span><span class="op" id="6097916">[</span><span class="ident" id="6097917">i</span><span class="op" id="6097918">]</span>&nbsp;<span class="op" id="6097920">=</span>&nbsp;<span class="ident" id="6097922">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097927">for</span>&nbsp;<span class="ident" id="6097931">i</span>&nbsp;<span class="op" id="6097933">:=</span>&nbsp;<span class="num" id="6097936">0</span><span class="op" id="6097937">;</span>&nbsp;<span class="ident" id="6097939">i</span>&nbsp;<span class="op" id="6097941">&lt;</span>&nbsp;<span class="builtintype" id="6097943">int</span><span class="op" id="6097946">(</span><span class="ident" id="6097947">s</span><span class="op" id="6097948">.</span><span class="ident" id="6097949">Nsect</span><span class="op" id="6097954">)</span><span class="op" id="6097955">;</span>&nbsp;<span class="ident" id="6097957">i</span><span class="op" id="6097958">++</span>&nbsp;<span class="op" id="6097961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097967">var</span>&nbsp;<span class="ident" id="6097971">sh64</span>&nbsp;<span class="ident" id="6097976">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097990">if</span>&nbsp;<span class="ident" id="6097993">err</span>&nbsp;<span class="op" id="6097997">:=</span>&nbsp;<span class="ident" id="6098000">binary</span><span class="op" id="6098006">.</span><span class="ident" id="6098007">Read</span><span class="op" id="6098011">(</span><span class="ident" id="6098012">b</span><span class="op" id="6098013">,</span>&nbsp;<span class="ident" id="6098015">bo</span><span class="op" id="6098017">,</span>&nbsp;<span class="op" id="6098019">&amp;</span><span class="ident" id="6098020">sh64</span><span class="op" id="6098024">)</span><span class="op" id="6098025">;</span>&nbsp;<span class="ident" id="6098027">err</span>&nbsp;<span class="op" id="6098031">!=</span>&nbsp;<span class="ident" id="6098034">nil</span>&nbsp;<span class="op" id="6098038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098045">return</span>&nbsp;<span class="ident" id="6098052">nil</span><span class="op" id="6098055">,</span>&nbsp;<span class="ident" id="6098057">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098065">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098071">sh</span>&nbsp;<span class="op" id="6098074">:=</span>&nbsp;<span class="builtinfunc" id="6098077">new</span><span class="op" id="6098080">(</span><span class="ident" id="6098081">Section</span><span class="op" id="6098088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098094">sh</span><span class="op" id="6098096">.</span><span class="ident" id="6098097">Name</span>&nbsp;<span class="op" id="6098102">=</span>&nbsp;<span class="ident" id="6098104">cstring</span><span class="op" id="6098111">(</span><span class="ident" id="6098112">sh64</span><span class="op" id="6098116">.</span><span class="ident" id="6098117">Name</span><span class="op" id="6098121">[</span><span class="num" id="6098122">0</span><span class="op" id="6098123">:</span><span class="op" id="6098124">]</span><span class="op" id="6098125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098131">sh</span><span class="op" id="6098133">.</span><span class="ident" id="6098134">Seg</span>&nbsp;<span class="op" id="6098138">=</span>&nbsp;<span class="ident" id="6098140">cstring</span><span class="op" id="6098147">(</span><span class="ident" id="6098148">sh64</span><span class="op" id="6098152">.</span><span class="ident" id="6098153">Seg</span><span class="op" id="6098156">[</span><span class="num" id="6098157">0</span><span class="op" id="6098158">:</span><span class="op" id="6098159">]</span><span class="op" id="6098160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098166">sh</span><span class="op" id="6098168">.</span><span class="ident" id="6098169">Addr</span>&nbsp;<span class="op" id="6098174">=</span>&nbsp;<span class="ident" id="6098176">sh64</span><span class="op" id="6098180">.</span><span class="ident" id="6098181">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098190">sh</span><span class="op" id="6098192">.</span><span class="ident" id="6098193">Size</span>&nbsp;<span class="op" id="6098198">=</span>&nbsp;<span class="ident" id="6098200">sh64</span><span class="op" id="6098204">.</span><span class="ident" id="6098205">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098214">sh</span><span class="op" id="6098216">.</span><span class="ident" id="6098217">Offset</span>&nbsp;<span class="op" id="6098224">=</span>&nbsp;<span class="ident" id="6098226">sh64</span><span class="op" id="6098230">.</span><span class="ident" id="6098231">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098242">sh</span><span class="op" id="6098244">.</span><span class="ident" id="6098245">Align</span>&nbsp;<span class="op" id="6098251">=</span>&nbsp;<span class="ident" id="6098253">sh64</span><span class="op" id="6098257">.</span><span class="ident" id="6098258">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098268">sh</span><span class="op" id="6098270">.</span><span class="ident" id="6098271">Reloff</span>&nbsp;<span class="op" id="6098278">=</span>&nbsp;<span class="ident" id="6098280">sh64</span><span class="op" id="6098284">.</span><span class="ident" id="6098285">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098296">sh</span><span class="op" id="6098298">.</span><span class="ident" id="6098299">Nreloc</span>&nbsp;<span class="op" id="6098306">=</span>&nbsp;<span class="ident" id="6098308">sh64</span><span class="op" id="6098312">.</span><span class="ident" id="6098313">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098324">sh</span><span class="op" id="6098326">.</span><span class="ident" id="6098327">Flags</span>&nbsp;<span class="op" id="6098333">=</span>&nbsp;<span class="ident" id="6098335">sh64</span><span class="op" id="6098339">.</span><span class="ident" id="6098340">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098350">f</span><span class="op" id="6098351">.</span><span class="ident" id="6098352">pushSection</span><span class="op" id="6098363">(</span><span class="ident" id="6098364">sh</span><span class="op" id="6098366">,</span>&nbsp;<span class="ident" id="6098368">r</span><span class="op" id="6098369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098382">if</span>&nbsp;<span class="ident" id="6098385">s</span>&nbsp;<span class="op" id="6098387">!=</span>&nbsp;<span class="ident" id="6098390">nil</span>&nbsp;<span class="op" id="6098394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098399">s</span><span class="op" id="6098400">.</span><span class="ident" id="6098401">sr</span>&nbsp;<span class="op" id="6098404">=</span>&nbsp;<span class="ident" id="6098406">io</span><span class="op" id="6098408">.</span><span class="ident" id="6098409">NewSectionReader</span><span class="op" id="6098425">(</span><span class="ident" id="6098426">r</span><span class="op" id="6098427">,</span>&nbsp;<span class="ident" id="6098429">int64</span><span class="op" id="6098434">(</span><span class="ident" id="6098435">s</span><span class="op" id="6098436">.</span><span class="ident" id="6098437">Offset</span><span class="op" id="6098443">)</span><span class="op" id="6098444">,</span>&nbsp;<span class="ident" id="6098446">int64</span><span class="op" id="6098451">(</span><span class="ident" id="6098452">s</span><span class="op" id="6098453">.</span><span class="ident" id="6098454">Filesz</span><span class="op" id="6098460">)</span><span class="op" id="6098461">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098466">s</span><span class="op" id="6098467">.</span><span class="ident" id="6098468">ReaderAt</span>&nbsp;<span class="op" id="6098477">=</span>&nbsp;<span class="ident" id="6098479">s</span><span class="op" id="6098480">.</span><span class="ident" id="6098481">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098492">return</span>&nbsp;<span class="ident" id="6098499">f</span><span class="op" id="6098500">,</span>&nbsp;<span class="ident" id="6098502">nil</span><br>
<span class="lineno"></span><span class="op" id="6098506">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6098509">func</span>&nbsp;<span class="op" id="6098514">(</span><span class="ident" id="6098515">f</span>&nbsp;<span class="op" id="6098517">*</span><span class="ident" id="6098518">File</span><span class="op" id="6098522">)</span>&nbsp;<span class="ident" id="6098524">parseSymtab</span><span class="op" id="6098535">(</span><span class="ident" id="6098536">symdat</span><span class="op" id="6098542">,</span>&nbsp;<span class="ident" id="6098544">strtab</span><span class="op" id="6098550">,</span>&nbsp;<span class="ident" id="6098552">cmddat</span>&nbsp;<span class="op" id="6098559">[</span><span class="op" id="6098560">]</span><span class="builtintype" id="6098561">byte</span><span class="op" id="6098565">,</span>&nbsp;<span class="ident" id="6098567">hdr</span>&nbsp;<span class="op" id="6098571">*</span><span class="ident" id="6098572">SymtabCmd</span><span class="op" id="6098581">,</span>&nbsp;<span class="ident" id="6098583">offset</span>&nbsp;<span class="ident" id="6098590">int64</span><span class="op" id="6098595">)</span>&nbsp;<span class="op" id="6098597">(</span><span class="op" id="6098598">*</span><span class="ident" id="6098599">Symtab</span><span class="op" id="6098605">,</span>&nbsp;<span class="builtintype" id="6098607">error</span><span class="op" id="6098612">)</span>&nbsp;<span class="op" id="6098614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098617">bo</span>&nbsp;<span class="op" id="6098620">:=</span>&nbsp;<span class="ident" id="6098623">f</span><span class="op" id="6098624">.</span><span class="ident" id="6098625">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098636">symtab</span>&nbsp;<span class="op" id="6098643">:=</span>&nbsp;<span class="builtinfunc" id="6098646">make</span><span class="op" id="6098650">(</span><span class="op" id="6098651">[</span><span class="op" id="6098652">]</span><span class="ident" id="6098653">Symbol</span><span class="op" id="6098659">,</span>&nbsp;<span class="ident" id="6098661">hdr</span><span class="op" id="6098664">.</span><span class="ident" id="6098665">Nsyms</span><span class="op" id="6098670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098673">b</span>&nbsp;<span class="op" id="6098675">:=</span>&nbsp;<span class="ident" id="6098678">bytes</span><span class="op" id="6098683">.</span><span class="ident" id="6098684">NewReader</span><span class="op" id="6098693">(</span><span class="ident" id="6098694">symdat</span><span class="op" id="6098700">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098703">for</span>&nbsp;<span class="ident" id="6098707">i</span>&nbsp;<span class="op" id="6098709">:=</span>&nbsp;<span class="keyword" id="6098712">range</span>&nbsp;<span class="ident" id="6098718">symtab</span>&nbsp;<span class="op" id="6098725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098729">var</span>&nbsp;<span class="ident" id="6098733">n</span>&nbsp;<span class="ident" id="6098735">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098745">if</span>&nbsp;<span class="ident" id="6098748">f</span><span class="op" id="6098749">.</span><span class="ident" id="6098750">Magic</span>&nbsp;<span class="op" id="6098756">==</span>&nbsp;<span class="ident" id="6098759">Magic64</span>&nbsp;<span class="op" id="6098767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098772">if</span>&nbsp;<span class="ident" id="6098775">err</span>&nbsp;<span class="op" id="6098779">:=</span>&nbsp;<span class="ident" id="6098782">binary</span><span class="op" id="6098788">.</span><span class="ident" id="6098789">Read</span><span class="op" id="6098793">(</span><span class="ident" id="6098794">b</span><span class="op" id="6098795">,</span>&nbsp;<span class="ident" id="6098797">bo</span><span class="op" id="6098799">,</span>&nbsp;<span class="op" id="6098801">&amp;</span><span class="ident" id="6098802">n</span><span class="op" id="6098803">)</span><span class="op" id="6098804">;</span>&nbsp;<span class="ident" id="6098806">err</span>&nbsp;<span class="op" id="6098810">!=</span>&nbsp;<span class="ident" id="6098813">nil</span>&nbsp;<span class="op" id="6098817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098823">return</span>&nbsp;<span class="ident" id="6098830">nil</span><span class="op" id="6098833">,</span>&nbsp;<span class="ident" id="6098835">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098846">}</span>&nbsp;<span class="keyword" id="6098848">else</span>&nbsp;<span class="op" id="6098853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098858">var</span>&nbsp;<span class="ident" id="6098862">n32</span>&nbsp;<span class="ident" id="6098866">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098877">if</span>&nbsp;<span class="ident" id="6098880">err</span>&nbsp;<span class="op" id="6098884">:=</span>&nbsp;<span class="ident" id="6098887">binary</span><span class="op" id="6098893">.</span><span class="ident" id="6098894">Read</span><span class="op" id="6098898">(</span><span class="ident" id="6098899">b</span><span class="op" id="6098900">,</span>&nbsp;<span class="ident" id="6098902">bo</span><span class="op" id="6098904">,</span>&nbsp;<span class="op" id="6098906">&amp;</span><span class="ident" id="6098907">n32</span><span class="op" id="6098910">)</span><span class="op" id="6098911">;</span>&nbsp;<span class="ident" id="6098913">err</span>&nbsp;<span class="op" id="6098917">!=</span>&nbsp;<span class="ident" id="6098920">nil</span>&nbsp;<span class="op" id="6098924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098930">return</span>&nbsp;<span class="ident" id="6098937">nil</span><span class="op" id="6098940">,</span>&nbsp;<span class="ident" id="6098942">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098954">n</span><span class="op" id="6098955">.</span><span class="ident" id="6098956">Name</span>&nbsp;<span class="op" id="6098961">=</span>&nbsp;<span class="ident" id="6098963">n32</span><span class="op" id="6098966">.</span><span class="ident" id="6098967">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098975">n</span><span class="op" id="6098976">.</span><span class="ident" id="6098977">Type</span>&nbsp;<span class="op" id="6098982">=</span>&nbsp;<span class="ident" id="6098984">n32</span><span class="op" id="6098987">.</span><span class="ident" id="6098988">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098996">n</span><span class="op" id="6098997">.</span><span class="ident" id="6098998">Sect</span>&nbsp;<span class="op" id="6099003">=</span>&nbsp;<span class="ident" id="6099005">n32</span><span class="op" id="6099008">.</span><span class="ident" id="6099009">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099017">n</span><span class="op" id="6099018">.</span><span class="ident" id="6099019">Desc</span>&nbsp;<span class="op" id="6099024">=</span>&nbsp;<span class="ident" id="6099026">n32</span><span class="op" id="6099029">.</span><span class="ident" id="6099030">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099038">n</span><span class="op" id="6099039">.</span><span class="ident" id="6099040">Value</span>&nbsp;<span class="op" id="6099046">=</span>&nbsp;<span class="ident" id="6099048">uint64</span><span class="op" id="6099054">(</span><span class="ident" id="6099055">n32</span><span class="op" id="6099058">.</span><span class="ident" id="6099059">Value</span><span class="op" id="6099064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099072">sym</span>&nbsp;<span class="op" id="6099076">:=</span>&nbsp;<span class="op" id="6099079">&amp;</span><span class="ident" id="6099080">symtab</span><span class="op" id="6099086">[</span><span class="ident" id="6099087">i</span><span class="op" id="6099088">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099092">if</span>&nbsp;<span class="ident" id="6099095">n</span><span class="op" id="6099096">.</span><span class="ident" id="6099097">Name</span>&nbsp;<span class="op" id="6099102">&gt;=</span>&nbsp;<span class="builtintype" id="6099105">uint32</span><span class="op" id="6099111">(</span><span class="builtinfunc" id="6099112">len</span><span class="op" id="6099115">(</span><span class="ident" id="6099116">strtab</span><span class="op" id="6099122">)</span><span class="op" id="6099123">)</span>&nbsp;<span class="op" id="6099125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099130">return</span>&nbsp;<span class="ident" id="6099137">nil</span><span class="op" id="6099140">,</span>&nbsp;<span class="op" id="6099142">&amp;</span><span class="ident" id="6099143">FormatError</span><span class="op" id="6099154">{</span><span class="ident" id="6099155">offset</span><span class="op" id="6099161">,</span>&nbsp;<span class="string" id="6099163">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6099193">,</span>&nbsp;<span class="ident" id="6099195">n</span><span class="op" id="6099196">.</span><span class="ident" id="6099197">Name</span><span class="op" id="6099201">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099209">sym</span><span class="op" id="6099212">.</span><span class="ident" id="6099213">Name</span>&nbsp;<span class="op" id="6099218">=</span>&nbsp;<span class="ident" id="6099220">cstring</span><span class="op" id="6099227">(</span><span class="ident" id="6099228">strtab</span><span class="op" id="6099234">[</span><span class="ident" id="6099235">n</span><span class="op" id="6099236">.</span><span class="ident" id="6099237">Name</span><span class="op" id="6099241">:</span><span class="op" id="6099242">]</span><span class="op" id="6099243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099247">sym</span><span class="op" id="6099250">.</span><span class="ident" id="6099251">Type</span>&nbsp;<span class="op" id="6099256">=</span>&nbsp;<span class="ident" id="6099258">n</span><span class="op" id="6099259">.</span><span class="ident" id="6099260">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099267">sym</span><span class="op" id="6099270">.</span><span class="ident" id="6099271">Sect</span>&nbsp;<span class="op" id="6099276">=</span>&nbsp;<span class="ident" id="6099278">n</span><span class="op" id="6099279">.</span><span class="ident" id="6099280">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099287">sym</span><span class="op" id="6099290">.</span><span class="ident" id="6099291">Desc</span>&nbsp;<span class="op" id="6099296">=</span>&nbsp;<span class="ident" id="6099298">n</span><span class="op" id="6099299">.</span><span class="ident" id="6099300">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099307">sym</span><span class="op" id="6099310">.</span><span class="ident" id="6099311">Value</span>&nbsp;<span class="op" id="6099317">=</span>&nbsp;<span class="ident" id="6099319">n</span><span class="op" id="6099320">.</span><span class="ident" id="6099321">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099331">st</span>&nbsp;<span class="op" id="6099334">:=</span>&nbsp;<span class="builtinfunc" id="6099337">new</span><span class="op" id="6099340">(</span><span class="ident" id="6099341">Symtab</span><span class="op" id="6099347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099350">st</span><span class="op" id="6099352">.</span><span class="ident" id="6099353">LoadBytes</span>&nbsp;<span class="op" id="6099363">=</span>&nbsp;<span class="ident" id="6099365">LoadBytes</span><span class="op" id="6099374">(</span><span class="ident" id="6099375">cmddat</span><span class="op" id="6099381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099384">st</span><span class="op" id="6099386">.</span><span class="ident" id="6099387">Syms</span>&nbsp;<span class="op" id="6099392">=</span>&nbsp;<span class="ident" id="6099394">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099402">return</span>&nbsp;<span class="ident" id="6099409">st</span><span class="op" id="6099411">,</span>&nbsp;<span class="ident" id="6099413">nil</span><br>
<span class="lineno"></span><span class="op" id="6099417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6099420">func</span>&nbsp;<span class="op" id="6099425">(</span><span class="ident" id="6099426">f</span>&nbsp;<span class="op" id="6099428">*</span><span class="ident" id="6099429">File</span><span class="op" id="6099433">)</span>&nbsp;<span class="ident" id="6099435">pushSection</span><span class="op" id="6099446">(</span><span class="ident" id="6099447">sh</span>&nbsp;<span class="op" id="6099450">*</span><span class="ident" id="6099451">Section</span><span class="op" id="6099458">,</span>&nbsp;<span class="ident" id="6099460">r</span>&nbsp;<span class="ident" id="6099462">io</span><span class="op" id="6099464">.</span><span class="ident" id="6099465">ReaderAt</span><span class="op" id="6099473">)</span>&nbsp;<span class="op" id="6099475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099478">f</span><span class="op" id="6099479">.</span><span class="ident" id="6099480">Sections</span>&nbsp;<span class="op" id="6099489">=</span>&nbsp;<span class="builtinfunc" id="6099491">append</span><span class="op" id="6099497">(</span><span class="ident" id="6099498">f</span><span class="op" id="6099499">.</span><span class="ident" id="6099500">Sections</span><span class="op" id="6099508">,</span>&nbsp;<span class="ident" id="6099510">sh</span><span class="op" id="6099512">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099515">sh</span><span class="op" id="6099517">.</span><span class="ident" id="6099518">sr</span>&nbsp;<span class="op" id="6099521">=</span>&nbsp;<span class="ident" id="6099523">io</span><span class="op" id="6099525">.</span><span class="ident" id="6099526">NewSectionReader</span><span class="op" id="6099542">(</span><span class="ident" id="6099543">r</span><span class="op" id="6099544">,</span>&nbsp;<span class="ident" id="6099546">int64</span><span class="op" id="6099551">(</span><span class="ident" id="6099552">sh</span><span class="op" id="6099554">.</span><span class="ident" id="6099555">Offset</span><span class="op" id="6099561">)</span><span class="op" id="6099562">,</span>&nbsp;<span class="ident" id="6099564">int64</span><span class="op" id="6099569">(</span><span class="ident" id="6099570">sh</span><span class="op" id="6099572">.</span><span class="ident" id="6099573">Size</span><span class="op" id="6099577">)</span><span class="op" id="6099578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099581">sh</span><span class="op" id="6099583">.</span><span class="ident" id="6099584">ReaderAt</span>&nbsp;<span class="op" id="6099593">=</span>&nbsp;<span class="ident" id="6099595">sh</span><span class="op" id="6099597">.</span><span class="ident" id="6099598">sr</span><br>
<span class="lineno"></span><span class="op" id="6099601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6099604">func</span>&nbsp;<span class="ident" id="6099609">cstring</span><span class="op" id="6099616">(</span><span class="ident" id="6099617">b</span>&nbsp;<span class="op" id="6099619">[</span><span class="op" id="6099620">]</span><span class="builtintype" id="6099621">byte</span><span class="op" id="6099625">)</span>&nbsp;<span class="builtintype" id="6099627">string</span>&nbsp;<span class="op" id="6099634">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099637">var</span>&nbsp;<span class="ident" id="6099641">i</span>&nbsp;<span class="builtintype" id="6099643">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099648">for</span>&nbsp;<span class="ident" id="6099652">i</span>&nbsp;<span class="op" id="6099654">=</span>&nbsp;<span class="num" id="6099656">0</span><span class="op" id="6099657">;</span>&nbsp;<span class="ident" id="6099659">i</span>&nbsp;<span class="op" id="6099661">&lt;</span>&nbsp;<span class="builtinfunc" id="6099663">len</span><span class="op" id="6099666">(</span><span class="ident" id="6099667">b</span><span class="op" id="6099668">)</span>&nbsp;<span class="op" id="6099670">&amp;&amp;</span>&nbsp;<span class="ident" id="6099673">b</span><span class="op" id="6099674">[</span><span class="ident" id="6099675">i</span><span class="op" id="6099676">]</span>&nbsp;<span class="op" id="6099678">!=</span>&nbsp;<span class="num" id="6099681">0</span><span class="op" id="6099682">;</span>&nbsp;<span class="ident" id="6099684">i</span><span class="op" id="6099685">++</span>&nbsp;<span class="op" id="6099688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099694">return</span>&nbsp;<span class="builtintype" id="6099701">string</span><span class="op" id="6099707">(</span><span class="ident" id="6099708">b</span><span class="op" id="6099709">[</span><span class="num" id="6099710">0</span><span class="op" id="6099711">:</span><span class="ident" id="6099712">i</span><span class="op" id="6099713">]</span><span class="op" id="6099714">)</span><br>
<span class="lineno"></span><span class="op" id="6099716">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6099719">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6099811">func</span>&nbsp;<span class="op" id="6099816">(</span><span class="ident" id="6099817">f</span>&nbsp;<span class="op" id="6099819">*</span><span class="ident" id="6099820">File</span><span class="op" id="6099824">)</span>&nbsp;<span class="ident" id="6099826">Segment</span><span class="op" id="6099833">(</span><span class="ident" id="6099834">name</span>&nbsp;<span class="builtintype" id="6099839">string</span><span class="op" id="6099845">)</span>&nbsp;<span class="op" id="6099847">*</span><span class="ident" id="6099848">Segment</span>&nbsp;<span class="op" id="6099856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099859">for</span>&nbsp;<span class="ident" id="6099863">_</span><span class="op" id="6099864">,</span>&nbsp;<span class="ident" id="6099866">l</span>&nbsp;<span class="op" id="6099868">:=</span>&nbsp;<span class="keyword" id="6099871">range</span>&nbsp;<span class="ident" id="6099877">f</span><span class="op" id="6099878">.</span><span class="ident" id="6099879">Loads</span>&nbsp;<span class="op" id="6099885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099889">if</span>&nbsp;<span class="ident" id="6099892">s</span><span class="op" id="6099893">,</span>&nbsp;<span class="ident" id="6099895">ok</span>&nbsp;<span class="op" id="6099898">:=</span>&nbsp;<span class="ident" id="6099901">l</span><span class="op" id="6099902">.</span><span class="op" id="6099903">(</span><span class="op" id="6099904">*</span><span class="ident" id="6099905">Segment</span><span class="op" id="6099912">)</span><span class="op" id="6099913">;</span>&nbsp;<span class="ident" id="6099915">ok</span>&nbsp;<span class="op" id="6099918">&amp;&amp;</span>&nbsp;<span class="ident" id="6099921">s</span><span class="op" id="6099922">.</span><span class="ident" id="6099923">Name</span>&nbsp;<span class="op" id="6099928">==</span>&nbsp;<span class="ident" id="6099931">name</span>&nbsp;<span class="op" id="6099936">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099941">return</span>&nbsp;<span class="ident" id="6099948">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099958">return</span>&nbsp;<span class="ident" id="6099965">nil</span><br>
<span class="lineno"></span><span class="op" id="6099969">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6099972">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6100048">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6100067">func</span>&nbsp;<span class="op" id="6100072">(</span><span class="ident" id="6100073">f</span>&nbsp;<span class="op" id="6100075">*</span><span class="ident" id="6100076">File</span><span class="op" id="6100080">)</span>&nbsp;<span class="ident" id="6100082">Section</span><span class="op" id="6100089">(</span><span class="ident" id="6100090">name</span>&nbsp;<span class="builtintype" id="6100095">string</span><span class="op" id="6100101">)</span>&nbsp;<span class="op" id="6100103">*</span><span class="ident" id="6100104">Section</span>&nbsp;<span class="op" id="6100112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100115">for</span>&nbsp;<span class="ident" id="6100119">_</span><span class="op" id="6100120">,</span>&nbsp;<span class="ident" id="6100122">s</span>&nbsp;<span class="op" id="6100124">:=</span>&nbsp;<span class="keyword" id="6100127">range</span>&nbsp;<span class="ident" id="6100133">f</span><span class="op" id="6100134">.</span><span class="ident" id="6100135">Sections</span>&nbsp;<span class="op" id="6100144">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100148">if</span>&nbsp;<span class="ident" id="6100151">s</span><span class="op" id="6100152">.</span><span class="ident" id="6100153">Name</span>&nbsp;<span class="op" id="6100158">==</span>&nbsp;<span class="ident" id="6100161">name</span>&nbsp;<span class="op" id="6100166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100171">return</span>&nbsp;<span class="ident" id="6100178">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6100182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6100185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100188">return</span>&nbsp;<span class="ident" id="6100195">nil</span><br>
<span class="lineno">470</span><span class="op" id="6100199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6100202">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6100268">func</span>&nbsp;<span class="op" id="6100273">(</span><span class="ident" id="6100274">f</span>&nbsp;<span class="op" id="6100276">*</span><span class="ident" id="6100277">File</span><span class="op" id="6100281">)</span>&nbsp;<span class="ident" id="6100283">DWARF</span><span class="op" id="6100288">(</span><span class="op" id="6100289">)</span>&nbsp;<span class="op" id="6100291">(</span><span class="op" id="6100292">*</span><span class="ident" id="6100293">dwarf</span><span class="op" id="6100298">.</span><span class="ident" id="6100299">Data</span><span class="op" id="6100303">,</span>&nbsp;<span class="builtintype" id="6100305">error</span><span class="op" id="6100310">)</span>&nbsp;<span class="op" id="6100312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6100315">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6100366">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6100421">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100480">var</span>&nbsp;<span class="ident" id="6100484">names</span>&nbsp;<span class="op" id="6100490">=</span>&nbsp;<span class="op" id="6100492">[</span><span class="op" id="6100493">...</span><span class="op" id="6100496">]</span><span class="builtintype" id="6100497">string</span><span class="op" id="6100503">{</span><span class="string" id="6100504">&#34;abbrev&#34;</span><span class="op" id="6100512">,</span>&nbsp;<span class="string" id="6100514">&#34;info&#34;</span><span class="op" id="6100520">,</span>&nbsp;<span class="string" id="6100522">&#34;str&#34;</span><span class="op" id="6100527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100530">var</span>&nbsp;<span class="ident" id="6100534">dat</span>&nbsp;<span class="op" id="6100538">[</span><span class="builtinfunc" id="6100539">len</span><span class="op" id="6100542">(</span><span class="ident" id="6100543">names</span><span class="op" id="6100548">)</span><span class="op" id="6100549">]</span><span class="op" id="6100550">[</span><span class="op" id="6100551">]</span><span class="builtintype" id="6100552">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100558">for</span>&nbsp;<span class="ident" id="6100562">i</span><span class="op" id="6100563">,</span>&nbsp;<span class="ident" id="6100565">name</span>&nbsp;<span class="op" id="6100570">:=</span>&nbsp;<span class="keyword" id="6100573">range</span>&nbsp;<span class="ident" id="6100579">names</span>&nbsp;<span class="op" id="6100585">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6100589">name</span>&nbsp;<span class="op" id="6100594">=</span>&nbsp;<span class="string" id="6100596">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6100607">+</span>&nbsp;<span class="ident" id="6100609">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6100616">s</span>&nbsp;<span class="op" id="6100618">:=</span>&nbsp;<span class="ident" id="6100621">f</span><span class="op" id="6100622">.</span><span class="ident" id="6100623">Section</span><span class="op" id="6100630">(</span><span class="ident" id="6100631">name</span><span class="op" id="6100635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100639">if</span>&nbsp;<span class="ident" id="6100642">s</span>&nbsp;<span class="op" id="6100644">==</span>&nbsp;<span class="ident" id="6100647">nil</span>&nbsp;<span class="op" id="6100651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100656">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6100667">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6100671">b</span><span class="op" id="6100672">,</span>&nbsp;<span class="ident" id="6100674">err</span>&nbsp;<span class="op" id="6100678">:=</span>&nbsp;<span class="ident" id="6100681">s</span><span class="op" id="6100682">.</span><span class="ident" id="6100683">Data</span><span class="op" id="6100687">(</span><span class="op" id="6100688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100692">if</span>&nbsp;<span class="ident" id="6100695">err</span>&nbsp;<span class="op" id="6100699">!=</span>&nbsp;<span class="ident" id="6100702">nil</span>&nbsp;<span class="op" id="6100706">&amp;&amp;</span>&nbsp;<span class="ident" id="6100709">uint64</span><span class="op" id="6100715">(</span><span class="builtinfunc" id="6100716">len</span><span class="op" id="6100719">(</span><span class="ident" id="6100720">b</span><span class="op" id="6100721">)</span><span class="op" id="6100722">)</span>&nbsp;<span class="op" id="6100724">&lt;</span>&nbsp;<span class="ident" id="6100726">s</span><span class="op" id="6100727">.</span><span class="ident" id="6100728">Size</span>&nbsp;<span class="op" id="6100733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100738">return</span>&nbsp;<span class="ident" id="6100745">nil</span><span class="op" id="6100748">,</span>&nbsp;<span class="ident" id="6100750">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6100756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6100760">dat</span><span class="op" id="6100763">[</span><span class="ident" id="6100764">i</span><span class="op" id="6100765">]</span>&nbsp;<span class="op" id="6100767">=</span>&nbsp;<span class="ident" id="6100769">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6100772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6100776">abbrev</span><span class="op" id="6100782">,</span>&nbsp;<span class="ident" id="6100784">info</span><span class="op" id="6100788">,</span>&nbsp;<span class="ident" id="6100790">str</span>&nbsp;<span class="op" id="6100794">:=</span>&nbsp;<span class="ident" id="6100797">dat</span><span class="op" id="6100800">[</span><span class="num" id="6100801">0</span><span class="op" id="6100802">]</span><span class="op" id="6100803">,</span>&nbsp;<span class="ident" id="6100805">dat</span><span class="op" id="6100808">[</span><span class="num" id="6100809">1</span><span class="op" id="6100810">]</span><span class="op" id="6100811">,</span>&nbsp;<span class="ident" id="6100813">dat</span><span class="op" id="6100816">[</span><span class="num" id="6100817">2</span><span class="op" id="6100818">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6100821">return</span>&nbsp;<span class="ident" id="6100828">dwarf</span><span class="op" id="6100833">.</span><span class="ident" id="6100834">New</span><span class="op" id="6100837">(</span><span class="ident" id="6100838">abbrev</span><span class="op" id="6100844">,</span>&nbsp;<span class="ident" id="6100846">nil</span><span class="op" id="6100849">,</span>&nbsp;<span class="ident" id="6100851">nil</span><span class="op" id="6100854">,</span>&nbsp;<span class="ident" id="6100856">info</span><span class="op" id="6100860">,</span>&nbsp;<span class="ident" id="6100862">nil</span><span class="op" id="6100865">,</span>&nbsp;<span class="ident" id="6100867">nil</span><span class="op" id="6100870">,</span>&nbsp;<span class="ident" id="6100872">nil</span><span class="op" id="6100875">,</span>&nbsp;<span class="ident" id="6100877">str</span><span class="op" id="6100880">)</span><br>
<span class="lineno"></span><span class="op" id="6100882">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6100885">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6100937">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6100992">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6101046">func</span>&nbsp;<span class="op" id="6101051">(</span><span class="ident" id="6101052">f</span>&nbsp;<span class="op" id="6101054">*</span><span class="ident" id="6101055">File</span><span class="op" id="6101059">)</span>&nbsp;<span class="ident" id="6101061">ImportedSymbols</span><span class="op" id="6101076">(</span><span class="op" id="6101077">)</span>&nbsp;<span class="op" id="6101079">(</span><span class="op" id="6101080">[</span><span class="op" id="6101081">]</span><span class="builtintype" id="6101082">string</span><span class="op" id="6101088">,</span>&nbsp;<span class="builtintype" id="6101090">error</span><span class="op" id="6101095">)</span>&nbsp;<span class="op" id="6101097">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101100">if</span>&nbsp;<span class="ident" id="6101103">f</span><span class="op" id="6101104">.</span><span class="ident" id="6101105">Dysymtab</span>&nbsp;<span class="op" id="6101114">==</span>&nbsp;<span class="ident" id="6101117">nil</span>&nbsp;<span class="op" id="6101121">||</span>&nbsp;<span class="ident" id="6101124">f</span><span class="op" id="6101125">.</span><span class="ident" id="6101126">Symtab</span>&nbsp;<span class="op" id="6101133">==</span>&nbsp;<span class="ident" id="6101136">nil</span>&nbsp;<span class="op" id="6101140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101144">return</span>&nbsp;<span class="ident" id="6101151">nil</span><span class="op" id="6101154">,</span>&nbsp;<span class="op" id="6101156">&amp;</span><span class="ident" id="6101157">FormatError</span><span class="op" id="6101168">{</span><span class="num" id="6101169">0</span><span class="op" id="6101170">,</span>&nbsp;<span class="string" id="6101172">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6101194">,</span>&nbsp;<span class="ident" id="6101196">nil</span><span class="op" id="6101199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6101202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6101206">st</span>&nbsp;<span class="op" id="6101209">:=</span>&nbsp;<span class="ident" id="6101212">f</span><span class="op" id="6101213">.</span><span class="ident" id="6101214">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6101222">dt</span>&nbsp;<span class="op" id="6101225">:=</span>&nbsp;<span class="ident" id="6101228">f</span><span class="op" id="6101229">.</span><span class="ident" id="6101230">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101240">var</span>&nbsp;<span class="ident" id="6101244">all</span>&nbsp;<span class="op" id="6101248">[</span><span class="op" id="6101249">]</span><span class="builtintype" id="6101250">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101258">for</span>&nbsp;<span class="ident" id="6101262">_</span><span class="op" id="6101263">,</span>&nbsp;<span class="ident" id="6101265">s</span>&nbsp;<span class="op" id="6101267">:=</span>&nbsp;<span class="keyword" id="6101270">range</span>&nbsp;<span class="ident" id="6101276">st</span><span class="op" id="6101278">.</span><span class="ident" id="6101279">Syms</span><span class="op" id="6101283">[</span><span class="ident" id="6101284">dt</span><span class="op" id="6101286">.</span><span class="ident" id="6101287">Iundefsym</span>&nbsp;<span class="op" id="6101297">:</span>&nbsp;<span class="ident" id="6101299">dt</span><span class="op" id="6101301">.</span><span class="ident" id="6101302">Iundefsym</span><span class="op" id="6101311">+</span><span class="ident" id="6101312">dt</span><span class="op" id="6101314">.</span><span class="ident" id="6101315">Nundefsym</span><span class="op" id="6101324">]</span>&nbsp;<span class="op" id="6101326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6101330">all</span>&nbsp;<span class="op" id="6101334">=</span>&nbsp;<span class="builtinfunc" id="6101336">append</span><span class="op" id="6101342">(</span><span class="ident" id="6101343">all</span><span class="op" id="6101346">,</span>&nbsp;<span class="ident" id="6101348">s</span><span class="op" id="6101349">.</span><span class="ident" id="6101350">Name</span><span class="op" id="6101354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6101357">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101360">return</span>&nbsp;<span class="ident" id="6101367">all</span><span class="op" id="6101370">,</span>&nbsp;<span class="ident" id="6101372">nil</span><br>
<span class="lineno"></span><span class="op" id="6101376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6101379">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6101435">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6101490">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6101538">func</span>&nbsp;<span class="op" id="6101543">(</span><span class="ident" id="6101544">f</span>&nbsp;<span class="op" id="6101546">*</span><span class="ident" id="6101547">File</span><span class="op" id="6101551">)</span>&nbsp;<span class="ident" id="6101553">ImportedLibraries</span><span class="op" id="6101570">(</span><span class="op" id="6101571">)</span>&nbsp;<span class="op" id="6101573">(</span><span class="op" id="6101574">[</span><span class="op" id="6101575">]</span><span class="builtintype" id="6101576">string</span><span class="op" id="6101582">,</span>&nbsp;<span class="builtintype" id="6101584">error</span><span class="op" id="6101589">)</span>&nbsp;<span class="op" id="6101591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101594">var</span>&nbsp;<span class="ident" id="6101598">all</span>&nbsp;<span class="op" id="6101602">[</span><span class="op" id="6101603">]</span><span class="builtintype" id="6101604">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101612">for</span>&nbsp;<span class="ident" id="6101616">_</span><span class="op" id="6101617">,</span>&nbsp;<span class="ident" id="6101619">l</span>&nbsp;<span class="op" id="6101621">:=</span>&nbsp;<span class="keyword" id="6101624">range</span>&nbsp;<span class="ident" id="6101630">f</span><span class="op" id="6101631">.</span><span class="ident" id="6101632">Loads</span>&nbsp;<span class="op" id="6101638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101642">if</span>&nbsp;<span class="ident" id="6101645">lib</span><span class="op" id="6101648">,</span>&nbsp;<span class="ident" id="6101650">ok</span>&nbsp;<span class="op" id="6101653">:=</span>&nbsp;<span class="ident" id="6101656">l</span><span class="op" id="6101657">.</span><span class="op" id="6101658">(</span><span class="op" id="6101659">*</span><span class="ident" id="6101660">Dylib</span><span class="op" id="6101665">)</span><span class="op" id="6101666">;</span>&nbsp;<span class="ident" id="6101668">ok</span>&nbsp;<span class="op" id="6101671">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6101676">all</span>&nbsp;<span class="op" id="6101680">=</span>&nbsp;<span class="builtinfunc" id="6101682">append</span><span class="op" id="6101688">(</span><span class="ident" id="6101689">all</span><span class="op" id="6101692">,</span>&nbsp;<span class="ident" id="6101694">lib</span><span class="op" id="6101697">.</span><span class="ident" id="6101698">Name</span><span class="op" id="6101702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6101706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6101709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6101712">return</span>&nbsp;<span class="ident" id="6101719">all</span><span class="op" id="6101722">,</span>&nbsp;<span class="ident" id="6101724">nil</span><br>
<span class="lineno"></span><span class="op" id="6101728">}</span>
</div>
</body>
</html>
