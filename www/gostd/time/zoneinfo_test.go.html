<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1287030">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1287085">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1287139">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1287190">package</span>&nbsp;<span class="ident" id="1287198">time_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1287209">import</span>&nbsp;<span class="op" id="1287216">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287219">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287230">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="1287237">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1287240">func</span>&nbsp;<span class="ident" id="1287245">TestVersion3</span><span class="op" id="1287257">(</span><span class="ident" id="1287258">t</span>&nbsp;<span class="op" id="1287260">*</span><span class="ident" id="1287261">testing</span><span class="op" id="1287268">.</span><span class="ident" id="1287269">T</span><span class="op" id="1287270">)</span>&nbsp;<span class="op" id="1287272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287275">time</span><span class="op" id="1287279">.</span><span class="ident" id="1287280">ForceZipFileForTesting</span><span class="op" id="1287302">(</span><span class="builtintype" id="1287303">true</span><span class="op" id="1287307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1287310">defer</span>&nbsp;<span class="ident" id="1287316">time</span><span class="op" id="1287320">.</span><span class="ident" id="1287321">ForceZipFileForTesting</span><span class="op" id="1287343">(</span><span class="builtintype" id="1287344">false</span><span class="op" id="1287349">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287352">_</span><span class="op" id="1287353">,</span>&nbsp;<span class="ident" id="1287355">err</span>&nbsp;<span class="op" id="1287359">:=</span>&nbsp;<span class="ident" id="1287362">time</span><span class="op" id="1287366">.</span><span class="ident" id="1287367">LoadLocation</span><span class="op" id="1287379">(</span><span class="string" id="1287380">&#34;Asia/Jerusalem&#34;</span><span class="op" id="1287396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1287399">if</span>&nbsp;<span class="ident" id="1287402">err</span>&nbsp;<span class="op" id="1287406">!=</span>&nbsp;<span class="ident" id="1287409">nil</span>&nbsp;<span class="op" id="1287413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287417">t</span><span class="op" id="1287418">.</span><span class="ident" id="1287419">Fatal</span><span class="op" id="1287424">(</span><span class="ident" id="1287425">err</span><span class="op" id="1287428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287431">}</span><br>
<span class="lineno"></span><span class="op" id="1287433">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="1287436">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;get&nbsp;the&nbsp;correct&nbsp;results&nbsp;for&nbsp;times&nbsp;before&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="1287503">//&nbsp;transition&nbsp;time.&nbsp;&nbsp;To&nbsp;do&nbsp;this&nbsp;we&nbsp;explicitly&nbsp;check&nbsp;early&nbsp;dates&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1287572">//&nbsp;couple&nbsp;of&nbsp;specific&nbsp;timezones.</span><br>
<span class="lineno"></span><span class="keyword" id="1287605">func</span>&nbsp;<span class="ident" id="1287610">TestFirstZone</span><span class="op" id="1287623">(</span><span class="ident" id="1287624">t</span>&nbsp;<span class="op" id="1287626">*</span><span class="ident" id="1287627">testing</span><span class="op" id="1287634">.</span><span class="ident" id="1287635">T</span><span class="op" id="1287636">)</span>&nbsp;<span class="op" id="1287638">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287641">time</span><span class="op" id="1287645">.</span><span class="ident" id="1287646">ForceZipFileForTesting</span><span class="op" id="1287668">(</span><span class="builtintype" id="1287669">true</span><span class="op" id="1287673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1287676">defer</span>&nbsp;<span class="ident" id="1287682">time</span><span class="op" id="1287686">.</span><span class="ident" id="1287687">ForceZipFileForTesting</span><span class="op" id="1287709">(</span><span class="builtintype" id="1287710">false</span><span class="op" id="1287715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1287719">const</span>&nbsp;<span class="ident" id="1287725">format</span>&nbsp;<span class="op" id="1287732">=</span>&nbsp;<span class="string" id="1287734">&#34;Mon,&nbsp;02&nbsp;Jan&nbsp;2006&nbsp;15:04:05&nbsp;-0700&nbsp;(MST)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1287775">var</span>&nbsp;<span class="ident" id="1287779">tests</span>&nbsp;<span class="op" id="1287785">=</span>&nbsp;<span class="op" id="1287787">[</span><span class="op" id="1287788">]</span><span class="keyword" id="1287789">struct</span>&nbsp;<span class="op" id="1287796">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287800">zone</span>&nbsp;&nbsp;<span class="builtintype" id="1287806">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287815">unix</span>&nbsp;&nbsp;<span class="ident" id="1287821">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287829">want1</span>&nbsp;<span class="builtintype" id="1287835">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1287844">want2</span>&nbsp;<span class="builtintype" id="1287850">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287858">}</span><span class="op" id="1287859">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287868">&#34;PST8PDT&#34;</span><span class="op" id="1287877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287882">-</span><span class="num" id="1287883">1633269601</span><span class="op" id="1287893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287898">&#34;Sun,&nbsp;31&nbsp;Mar&nbsp;1918&nbsp;01:59:59&nbsp;-0800&nbsp;(PST)&#34;</span><span class="op" id="1287937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287942">&#34;Sun,&nbsp;31&nbsp;Mar&nbsp;1918&nbsp;03:00:00&nbsp;-0700&nbsp;(PDT)&#34;</span><span class="op" id="1287981">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287985">}</span><span class="op" id="1287986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1287990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1287995">&#34;Pacific/Fakaofo&#34;</span><span class="op" id="1288012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1288017">1325242799</span><span class="op" id="1288027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1288032">&#34;Thu,&nbsp;29&nbsp;Dec&nbsp;2011&nbsp;23:59:59&nbsp;-1100&nbsp;(TKT)&#34;</span><span class="op" id="1288071">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1288076">&#34;Sat,&nbsp;31&nbsp;Dec&nbsp;2011&nbsp;00:00:00&nbsp;+1300&nbsp;(TKT)&#34;</span><span class="op" id="1288115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288119">}</span><span class="op" id="1288120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1288127">for</span>&nbsp;<span class="ident" id="1288131">_</span><span class="op" id="1288132">,</span>&nbsp;<span class="ident" id="1288134">test</span>&nbsp;<span class="op" id="1288139">:=</span>&nbsp;<span class="keyword" id="1288142">range</span>&nbsp;<span class="ident" id="1288148">tests</span>&nbsp;<span class="op" id="1288154">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288158">z</span><span class="op" id="1288159">,</span>&nbsp;<span class="ident" id="1288161">err</span>&nbsp;<span class="op" id="1288165">:=</span>&nbsp;<span class="ident" id="1288168">time</span><span class="op" id="1288172">.</span><span class="ident" id="1288173">LoadLocation</span><span class="op" id="1288185">(</span><span class="ident" id="1288186">test</span><span class="op" id="1288190">.</span><span class="ident" id="1288191">zone</span><span class="op" id="1288195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1288199">if</span>&nbsp;<span class="ident" id="1288202">err</span>&nbsp;<span class="op" id="1288206">!=</span>&nbsp;<span class="ident" id="1288209">nil</span>&nbsp;<span class="op" id="1288213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288218">t</span><span class="op" id="1288219">.</span><span class="ident" id="1288220">Fatal</span><span class="op" id="1288225">(</span><span class="ident" id="1288226">err</span><span class="op" id="1288229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288237">s</span>&nbsp;<span class="op" id="1288239">:=</span>&nbsp;<span class="ident" id="1288242">time</span><span class="op" id="1288246">.</span><span class="ident" id="1288247">Unix</span><span class="op" id="1288251">(</span><span class="ident" id="1288252">test</span><span class="op" id="1288256">.</span><span class="ident" id="1288257">unix</span><span class="op" id="1288261">,</span>&nbsp;<span class="num" id="1288263">0</span><span class="op" id="1288264">)</span><span class="op" id="1288265">.</span><span class="ident" id="1288266">In</span><span class="op" id="1288268">(</span><span class="ident" id="1288269">z</span><span class="op" id="1288270">)</span><span class="op" id="1288271">.</span><span class="ident" id="1288272">Format</span><span class="op" id="1288278">(</span><span class="ident" id="1288279">format</span><span class="op" id="1288285">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1288289">if</span>&nbsp;<span class="ident" id="1288292">s</span>&nbsp;<span class="op" id="1288294">!=</span>&nbsp;<span class="ident" id="1288297">test</span><span class="op" id="1288301">.</span><span class="ident" id="1288302">want1</span>&nbsp;<span class="op" id="1288308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288313">t</span><span class="op" id="1288314">.</span><span class="ident" id="1288315">Errorf</span><span class="op" id="1288321">(</span><span class="string" id="1288322">&#34;for&nbsp;%s&nbsp;%d&nbsp;got&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="1288348">,</span>&nbsp;<span class="ident" id="1288350">test</span><span class="op" id="1288354">.</span><span class="ident" id="1288355">zone</span><span class="op" id="1288359">,</span>&nbsp;<span class="ident" id="1288361">test</span><span class="op" id="1288365">.</span><span class="ident" id="1288366">unix</span><span class="op" id="1288370">,</span>&nbsp;<span class="ident" id="1288372">s</span><span class="op" id="1288373">,</span>&nbsp;<span class="ident" id="1288375">test</span><span class="op" id="1288379">.</span><span class="ident" id="1288380">want1</span><span class="op" id="1288385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288393">s</span>&nbsp;<span class="op" id="1288395">=</span>&nbsp;<span class="ident" id="1288397">time</span><span class="op" id="1288401">.</span><span class="ident" id="1288402">Unix</span><span class="op" id="1288406">(</span><span class="ident" id="1288407">test</span><span class="op" id="1288411">.</span><span class="ident" id="1288412">unix</span><span class="op" id="1288416">+</span><span class="num" id="1288417">1</span><span class="op" id="1288418">,</span>&nbsp;<span class="num" id="1288420">0</span><span class="op" id="1288421">)</span><span class="op" id="1288422">.</span><span class="ident" id="1288423">In</span><span class="op" id="1288425">(</span><span class="ident" id="1288426">z</span><span class="op" id="1288427">)</span><span class="op" id="1288428">.</span><span class="ident" id="1288429">Format</span><span class="op" id="1288435">(</span><span class="ident" id="1288436">format</span><span class="op" id="1288442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1288446">if</span>&nbsp;<span class="ident" id="1288449">s</span>&nbsp;<span class="op" id="1288451">!=</span>&nbsp;<span class="ident" id="1288454">test</span><span class="op" id="1288458">.</span><span class="ident" id="1288459">want2</span>&nbsp;<span class="op" id="1288465">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1288470">t</span><span class="op" id="1288471">.</span><span class="ident" id="1288472">Errorf</span><span class="op" id="1288478">(</span><span class="string" id="1288479">&#34;for&nbsp;%s&nbsp;%d&nbsp;got&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="1288505">,</span>&nbsp;<span class="ident" id="1288507">test</span><span class="op" id="1288511">.</span><span class="ident" id="1288512">zone</span><span class="op" id="1288516">,</span>&nbsp;<span class="ident" id="1288518">test</span><span class="op" id="1288522">.</span><span class="ident" id="1288523">unix</span><span class="op" id="1288527">,</span>&nbsp;<span class="ident" id="1288529">s</span><span class="op" id="1288530">,</span>&nbsp;<span class="ident" id="1288532">test</span><span class="op" id="1288536">.</span><span class="ident" id="1288537">want2</span><span class="op" id="1288542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1288549">}</span><br>
<span class="lineno"></span><span class="op" id="1288551">}</span>
</div>
</body>
</html>
