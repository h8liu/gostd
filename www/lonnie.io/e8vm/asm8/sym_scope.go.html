<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5356795">package</span>&nbsp;<span class="ident" id="5356803">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5356809">//&nbsp;SymScope&nbsp;is&nbsp;a&nbsp;stack&nbsp;of&nbsp;symbol&nbsp;tables.</span><br>
<span class="lineno"></span><span class="keyword" id="5356850">type</span>&nbsp;<span class="ident" id="5356855">symScope</span>&nbsp;<span class="keyword" id="5356864">struct</span>&nbsp;<span class="op" id="5356871">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356874">stack</span>&nbsp;<span class="op" id="5356880">[</span><span class="op" id="5356881">]</span><span class="op" id="5356882">*</span><span class="ident" id="5356883"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#5358159">symTabel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356893">top</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5356899">*</span><span class="ident" id="5356900"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#5358159">symTabel</a></span>&nbsp;<span class="comment" id="5356909">//&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span><span class="op" id="5356920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5356923">//&nbsp;NewSymScope&nbsp;creates&nbsp;a&nbsp;new&nbsp;symbole&nbsp;scope&nbsp;with&nbsp;one&nbsp;symbol&nbsp;table&nbsp;at&nbsp;the</span><br>
<span class="lineno">10</span><span class="comment" id="5356995">//&nbsp;bottom.</span><br>
<span class="lineno"></span><span class="keyword" id="5357006">func</span>&nbsp;<span class="ident" id="5357011">newSymScope</span><span class="op" id="5357022">(</span><span class="op" id="5357023">)</span>&nbsp;<span class="op" id="5357025">*</span><span class="ident" id="5357026"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span>&nbsp;<span class="op" id="5357035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357038">ret</span>&nbsp;<span class="op" id="5357042">:=</span>&nbsp;<span class="builtinfunc" id="5357045">new</span><span class="op" id="5357048">(</span><span class="ident" id="5357049"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5357057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357060"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357038">ret</a></span><span class="op" id="5357063">.</span><span class="ident" id="5357064">Push</span><span class="op" id="5357068">(</span><span class="op" id="5357069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357073">return</span>&nbsp;<span class="ident" id="5357080"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357038">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5357084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5357087">//&nbsp;Push&nbsp;adds&nbsp;a&nbsp;new&nbsp;symbol&nbsp;table&nbsp;on&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="5357144">func</span>&nbsp;<span class="op" id="5357149">(</span><span class="ident" id="5357150">s</span>&nbsp;<span class="op" id="5357152">*</span><span class="ident" id="5357153"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5357161">)</span>&nbsp;<span class="ident" id="5357163">Push</span><span class="op" id="5357167">(</span><span class="op" id="5357168">)</span>&nbsp;<span class="op" id="5357170">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357173">tab</span>&nbsp;<span class="op" id="5357177">:=</span>&nbsp;<span class="ident" id="5357180"><a href="/lonnie.io/e8vm/asm8/sym_table.go.html#5358252">newSymTable</a></span><span class="op" id="5357191">(</span><span class="op" id="5357192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357195"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357150">s</a></span><span class="op" id="5357196">.</span><span class="ident" id="5357197">top</span>&nbsp;<span class="op" id="5357201">=</span>&nbsp;<span class="ident" id="5357203"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357173">tab</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357208"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357150">s</a></span><span class="op" id="5357209">.</span><span class="ident" id="5357210">stack</span>&nbsp;<span class="op" id="5357216">=</span>&nbsp;<span class="builtinfunc" id="5357218">append</span><span class="op" id="5357224">(</span><span class="ident" id="5357225"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357150">s</a></span><span class="op" id="5357226">.</span><span class="ident" id="5357227">stack</span><span class="op" id="5357232">,</span>&nbsp;<span class="ident" id="5357234"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357173">tab</a></span><span class="op" id="5357237">)</span><br>
<span class="lineno"></span><span class="op" id="5357239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5357242">//&nbsp;Pop&nbsp;removes&nbsp;a&nbsp;symbol&nbsp;table&nbsp;from&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="5357299">//&nbsp;It&nbsp;panics&nbsp;when&nbsp;the&nbsp;stack&nbsp;is&nbsp;empty&nbsp;after&nbsp;the&nbsp;pop.</span><br>
<span class="lineno"></span><span class="keyword" id="5357351">func</span>&nbsp;<span class="op" id="5357356">(</span><span class="ident" id="5357357">s</span>&nbsp;<span class="op" id="5357359">*</span><span class="ident" id="5357360"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5357368">)</span>&nbsp;<span class="ident" id="5357370">Pop</span><span class="op" id="5357373">(</span><span class="op" id="5357374">)</span>&nbsp;<span class="op" id="5357376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357379">n</span>&nbsp;<span class="op" id="5357381">:=</span>&nbsp;<span class="builtinfunc" id="5357384">len</span><span class="op" id="5357387">(</span><span class="ident" id="5357388"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357357">s</a></span><span class="op" id="5357389">.</span><span class="ident" id="5357390">stack</span><span class="op" id="5357395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357398">if</span>&nbsp;<span class="ident" id="5357401"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357379">n</a></span>&nbsp;<span class="op" id="5357403">&lt;</span>&nbsp;<span class="num" id="5357405">2</span>&nbsp;<span class="op" id="5357407">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5357411">panic</span><span class="op" id="5357416">(</span><span class="string" id="5357417">&#34;stack&nbsp;empty&nbsp;after&nbsp;pop&#34;</span><span class="op" id="5357440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357447"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357357">s</a></span><span class="op" id="5357448">.</span><span class="ident" id="5357449">stack</span>&nbsp;<span class="op" id="5357455">=</span>&nbsp;<span class="ident" id="5357457"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357357">s</a></span><span class="op" id="5357458">.</span><span class="ident" id="5357459">stack</span><span class="op" id="5357464">[</span><span class="op" id="5357465">:</span><span class="ident" id="5357466"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357379">n</a></span><span class="op" id="5357467">-</span><span class="num" id="5357468">1</span><span class="op" id="5357469">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357472"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357357">s</a></span><span class="op" id="5357473">.</span><span class="ident" id="5357474">top</span>&nbsp;<span class="op" id="5357478">=</span>&nbsp;<span class="ident" id="5357480"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357357">s</a></span><span class="op" id="5357481">.</span><span class="ident" id="5357482">stack</span><span class="op" id="5357487">[</span><span class="ident" id="5357488"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357379">n</a></span><span class="op" id="5357489">-</span><span class="num" id="5357490">2</span><span class="op" id="5357491">]</span><br>
<span class="lineno">35</span><span class="op" id="5357493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5357496">//&nbsp;Depth&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;scopes&nbsp;on&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="5357548">func</span>&nbsp;<span class="op" id="5357553">(</span><span class="ident" id="5357554">s</span>&nbsp;<span class="op" id="5357556">*</span><span class="ident" id="5357557"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5357565">)</span>&nbsp;<span class="ident" id="5357567">Depth</span><span class="op" id="5357572">(</span><span class="op" id="5357573">)</span>&nbsp;<span class="builtintype" id="5357575">int</span>&nbsp;<span class="op" id="5357579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357582">return</span>&nbsp;<span class="builtinfunc" id="5357589">len</span><span class="op" id="5357592">(</span><span class="ident" id="5357593"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357554">s</a></span><span class="op" id="5357594">.</span><span class="ident" id="5357595">stack</span><span class="op" id="5357600">)</span><br>
<span class="lineno">40</span><span class="op" id="5357602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5357605">//&nbsp;Query&nbsp;searches&nbsp;for&nbsp;the&nbsp;top&nbsp;visible&nbsp;symbol&nbsp;with&nbsp;a&nbsp;particular&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5357674">func</span>&nbsp;<span class="op" id="5357679">(</span><span class="ident" id="5357680">s</span>&nbsp;<span class="op" id="5357682">*</span><span class="ident" id="5357683"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5357691">)</span>&nbsp;<span class="ident" id="5357693">Query</span><span class="op" id="5357698">(</span><span class="ident" id="5357699">n</span>&nbsp;<span class="builtintype" id="5357701">string</span><span class="op" id="5357707">)</span>&nbsp;<span class="op" id="5357709">*</span><span class="ident" id="5357710"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#5358916">symbol</a></span>&nbsp;<span class="op" id="5357717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357720">d</span>&nbsp;<span class="op" id="5357722">:=</span>&nbsp;<span class="builtinfunc" id="5357725">len</span><span class="op" id="5357728">(</span><span class="ident" id="5357729"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357680">s</a></span><span class="op" id="5357730">.</span><span class="ident" id="5357731">stack</span><span class="op" id="5357736">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357740">for</span>&nbsp;<span class="ident" id="5357744">i</span>&nbsp;<span class="op" id="5357746">:=</span>&nbsp;<span class="ident" id="5357749"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357720">d</a></span>&nbsp;<span class="op" id="5357751">-</span>&nbsp;<span class="num" id="5357753">1</span><span class="op" id="5357754">;</span>&nbsp;<span class="ident" id="5357756"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357744">i</a></span>&nbsp;<span class="op" id="5357758">&gt;=</span>&nbsp;<span class="num" id="5357761">0</span><span class="op" id="5357762">;</span>&nbsp;<span class="ident" id="5357764"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357744">i</a></span><span class="op" id="5357765">--</span>&nbsp;<span class="op" id="5357768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357772">tab</span>&nbsp;<span class="op" id="5357776">:=</span>&nbsp;<span class="ident" id="5357779"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357680">s</a></span><span class="op" id="5357780">.</span><span class="ident" id="5357781">stack</span><span class="op" id="5357786">[</span><span class="ident" id="5357787"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357744">i</a></span><span class="op" id="5357788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357792">ret</span>&nbsp;<span class="op" id="5357796">:=</span>&nbsp;<span class="ident" id="5357799"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357772">tab</a></span><span class="op" id="5357802">.</span><span class="ident" id="5357803">Query</span><span class="op" id="5357808">(</span><span class="ident" id="5357809"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357699">n</a></span><span class="op" id="5357810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357814">if</span>&nbsp;<span class="ident" id="5357817"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357792">ret</a></span>&nbsp;<span class="op" id="5357821">!=</span>&nbsp;<span class="ident" id="5357824">nil</span>&nbsp;<span class="op" id="5357828">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357833">return</span>&nbsp;<span class="ident" id="5357840"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5357792">ret</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357853">return</span>&nbsp;<span class="ident" id="5357860">nil</span><br>
<span class="lineno">55</span><span class="op" id="5357864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5357867">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbole&nbsp;on&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;symbol&nbsp;table&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="5357935">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;on&nbsp;successful,&nbsp;and&nbsp;returns&nbsp;the&nbsp;conflict&nbsp;symbol&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5358005">//&nbsp;it&nbsp;is&nbsp;already&nbsp;declared.</span><br>
<span class="lineno">60</span><span class="keyword" id="5358032">func</span>&nbsp;<span class="op" id="5358037">(</span><span class="ident" id="5358038">s</span>&nbsp;<span class="op" id="5358040">*</span><span class="ident" id="5358041"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5356855">symScope</a></span><span class="op" id="5358049">)</span>&nbsp;<span class="ident" id="5358051">Declare</span><span class="op" id="5358058">(</span><span class="ident" id="5358059">sym</span>&nbsp;<span class="op" id="5358063">*</span><span class="ident" id="5358064"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#5358916">symbol</a></span><span class="op" id="5358070">)</span>&nbsp;<span class="op" id="5358072">*</span><span class="ident" id="5358073"><a href="/lonnie.io/e8vm/asm8/symbol.go.html#5358916">symbol</a></span>&nbsp;<span class="op" id="5358080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5358083">return</span>&nbsp;<span class="ident" id="5358090"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5358038">s</a></span><span class="op" id="5358091">.</span><span class="ident" id="5358092">top</span><span class="op" id="5358095">.</span><span class="ident" id="5358096">Declare</span><span class="op" id="5358103">(</span><span class="ident" id="5358104"><a href="/lonnie.io/e8vm/asm8/sym_scope.go.html#5358059">sym</a></span><span class="op" id="5358107">)</span><br>
<span class="lineno"></span><span class="op" id="5358109">}</span>
</div>
</body>
</html>
