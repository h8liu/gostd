<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8190634">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8190690">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8190744">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8190795">package</span>&nbsp;<span class="ident" id="8190803">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8190809">import</span>&nbsp;<span class="op" id="8190816">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8190819">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8190828">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8190839">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8190850">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8190857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8190860">var</span>&nbsp;<span class="ident" id="8190864">headerWriteTests</span>&nbsp;<span class="op" id="8190881">=</span>&nbsp;<span class="op" id="8190883">[</span><span class="op" id="8190884">]</span><span class="keyword" id="8190885">struct</span>&nbsp;<span class="op" id="8190892">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8190895">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8190904">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8190912">exclude</span>&nbsp;&nbsp;<span class="keyword" id="8190921">map</span><span class="op" id="8190924">[</span><span class="builtintype" id="8190925">string</span><span class="op" id="8190931">]</span><span class="builtintype" id="8190932">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8190938">expected</span>&nbsp;<span class="builtintype" id="8190947">string</span><br>
<span class="lineno"></span><span class="op" id="8190954">}</span><span class="op" id="8190955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8190958">{</span><span class="ident" id="8190959">Header</span><span class="op" id="8190965">{</span><span class="op" id="8190966">}</span><span class="op" id="8190967">,</span>&nbsp;<span class="ident" id="8190969">nil</span><span class="op" id="8190972">,</span>&nbsp;<span class="string" id="8190974">&#34;&#34;</span><span class="op" id="8190976">}</span><span class="op" id="8190977">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8190980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8190984">Header</span><span class="op" id="8190990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8190995">&#34;Content-Type&#34;</span><span class="op" id="8191009">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8191013">{</span><span class="string" id="8191014">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="8191040">}</span><span class="op" id="8191041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191046">&#34;Content-Length&#34;</span><span class="op" id="8191062">:</span>&nbsp;<span class="op" id="8191064">{</span><span class="string" id="8191065">&#34;0&#34;</span><span class="op" id="8191068">}</span><span class="op" id="8191069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191073">}</span><span class="op" id="8191074">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191078">nil</span><span class="op" id="8191081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191085">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="8191150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191153">}</span><span class="op" id="8191154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191161">Header</span><span class="op" id="8191167">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191172">&#34;Content-Length&#34;</span><span class="op" id="8191188">:</span>&nbsp;<span class="op" id="8191190">{</span><span class="string" id="8191191">&#34;0&#34;</span><span class="op" id="8191194">,</span>&nbsp;<span class="string" id="8191196">&#34;1&#34;</span><span class="op" id="8191199">,</span>&nbsp;<span class="string" id="8191201">&#34;2&#34;</span><span class="op" id="8191204">}</span><span class="op" id="8191205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191209">}</span><span class="op" id="8191210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191214">nil</span><span class="op" id="8191217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191221">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="8191286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191289">}</span><span class="op" id="8191290">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191297">Header</span><span class="op" id="8191303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191308">&#34;Expires&#34;</span><span class="op" id="8191317">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8191328">{</span><span class="string" id="8191329">&#34;-1&#34;</span><span class="op" id="8191333">}</span><span class="op" id="8191334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191339">&#34;Content-Length&#34;</span><span class="op" id="8191355">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8191359">{</span><span class="string" id="8191360">&#34;0&#34;</span><span class="op" id="8191363">}</span><span class="op" id="8191364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191369">&#34;Content-Encoding&#34;</span><span class="op" id="8191387">:</span>&nbsp;<span class="op" id="8191389">{</span><span class="string" id="8191390">&#34;gzip&#34;</span><span class="op" id="8191396">}</span><span class="op" id="8191397">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191401">}</span><span class="op" id="8191402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8191406">map</span><span class="op" id="8191409">[</span><span class="builtintype" id="8191410">string</span><span class="op" id="8191416">]</span><span class="builtintype" id="8191417">bool</span><span class="op" id="8191421">{</span><span class="string" id="8191422">&#34;Content-Length&#34;</span><span class="op" id="8191438">:</span>&nbsp;<span class="builtintype" id="8191440">true</span><span class="op" id="8191444">}</span><span class="op" id="8191445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191449">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8191492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191495">}</span><span class="op" id="8191496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191499">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191503">Header</span><span class="op" id="8191509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191514">&#34;Expires&#34;</span><span class="op" id="8191523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8191534">{</span><span class="string" id="8191535">&#34;-1&#34;</span><span class="op" id="8191539">}</span><span class="op" id="8191540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191545">&#34;Content-Length&#34;</span><span class="op" id="8191561">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8191565">{</span><span class="string" id="8191566">&#34;0&#34;</span><span class="op" id="8191569">,</span>&nbsp;<span class="string" id="8191571">&#34;1&#34;</span><span class="op" id="8191574">,</span>&nbsp;<span class="string" id="8191576">&#34;2&#34;</span><span class="op" id="8191579">}</span><span class="op" id="8191580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191585">&#34;Content-Encoding&#34;</span><span class="op" id="8191603">:</span>&nbsp;<span class="op" id="8191605">{</span><span class="string" id="8191606">&#34;gzip&#34;</span><span class="op" id="8191612">}</span><span class="op" id="8191613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191617">}</span><span class="op" id="8191618">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8191622">map</span><span class="op" id="8191625">[</span><span class="builtintype" id="8191626">string</span><span class="op" id="8191632">]</span><span class="builtintype" id="8191633">bool</span><span class="op" id="8191637">{</span><span class="string" id="8191638">&#34;Content-Length&#34;</span><span class="op" id="8191654">:</span>&nbsp;<span class="builtintype" id="8191656">true</span><span class="op" id="8191660">}</span><span class="op" id="8191661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191665">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8191708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191711">}</span><span class="op" id="8191712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191719">Header</span><span class="op" id="8191725">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191730">&#34;Expires&#34;</span><span class="op" id="8191739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8191750">{</span><span class="string" id="8191751">&#34;-1&#34;</span><span class="op" id="8191755">}</span><span class="op" id="8191756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191761">&#34;Content-Length&#34;</span><span class="op" id="8191777">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8191781">{</span><span class="string" id="8191782">&#34;0&#34;</span><span class="op" id="8191785">}</span><span class="op" id="8191786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191791">&#34;Content-Encoding&#34;</span><span class="op" id="8191809">:</span>&nbsp;<span class="op" id="8191811">{</span><span class="string" id="8191812">&#34;gzip&#34;</span><span class="op" id="8191818">}</span><span class="op" id="8191819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191823">}</span><span class="op" id="8191824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8191828">map</span><span class="op" id="8191831">[</span><span class="builtintype" id="8191832">string</span><span class="op" id="8191838">]</span><span class="builtintype" id="8191839">bool</span><span class="op" id="8191843">{</span><span class="string" id="8191844">&#34;Content-Length&#34;</span><span class="op" id="8191860">:</span>&nbsp;<span class="builtintype" id="8191862">true</span><span class="op" id="8191866">,</span>&nbsp;<span class="string" id="8191868">&#34;Expires&#34;</span><span class="op" id="8191877">:</span>&nbsp;<span class="builtintype" id="8191879">true</span><span class="op" id="8191883">,</span>&nbsp;<span class="string" id="8191885">&#34;Content-Encoding&#34;</span><span class="op" id="8191903">:</span>&nbsp;<span class="builtintype" id="8191905">true</span><span class="op" id="8191909">}</span><span class="op" id="8191910">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191914">&#34;&#34;</span><span class="op" id="8191916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191919">}</span><span class="op" id="8191920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8191923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8191927">Header</span><span class="op" id="8191933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191938">&#34;Nil&#34;</span><span class="op" id="8191943">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8191954">nil</span><span class="op" id="8191957">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191962">&#34;Empty&#34;</span><span class="op" id="8191969">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8191978">{</span><span class="op" id="8191979">}</span><span class="op" id="8191980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8191985">&#34;Blank&#34;</span><span class="op" id="8191992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8192001">{</span><span class="string" id="8192002">&#34;&#34;</span><span class="op" id="8192004">}</span><span class="op" id="8192005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192010">&#34;Double-Blank&#34;</span><span class="op" id="8192024">:</span>&nbsp;<span class="op" id="8192026">{</span><span class="string" id="8192027">&#34;&#34;</span><span class="op" id="8192029">,</span>&nbsp;<span class="string" id="8192031">&#34;&#34;</span><span class="op" id="8192033">}</span><span class="op" id="8192034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192038">}</span><span class="op" id="8192039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192043">nil</span><span class="op" id="8192046">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192050">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="8192099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192102">}</span><span class="op" id="8192103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8192106">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192180">Header</span><span class="op" id="8192186">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192191">&#34;k1&#34;</span><span class="op" id="8192195">:</span>&nbsp;<span class="op" id="8192197">{</span><span class="string" id="8192198">&#34;1a&#34;</span><span class="op" id="8192202">,</span>&nbsp;<span class="string" id="8192204">&#34;1b&#34;</span><span class="op" id="8192208">}</span><span class="op" id="8192209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192214">&#34;k2&#34;</span><span class="op" id="8192218">:</span>&nbsp;<span class="op" id="8192220">{</span><span class="string" id="8192221">&#34;2a&#34;</span><span class="op" id="8192225">,</span>&nbsp;<span class="string" id="8192227">&#34;2b&#34;</span><span class="op" id="8192231">}</span><span class="op" id="8192232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192237">&#34;k3&#34;</span><span class="op" id="8192241">:</span>&nbsp;<span class="op" id="8192243">{</span><span class="string" id="8192244">&#34;3a&#34;</span><span class="op" id="8192248">,</span>&nbsp;<span class="string" id="8192250">&#34;3b&#34;</span><span class="op" id="8192254">}</span><span class="op" id="8192255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192260">&#34;k4&#34;</span><span class="op" id="8192264">:</span>&nbsp;<span class="op" id="8192266">{</span><span class="string" id="8192267">&#34;4a&#34;</span><span class="op" id="8192271">,</span>&nbsp;<span class="string" id="8192273">&#34;4b&#34;</span><span class="op" id="8192277">}</span><span class="op" id="8192278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192283">&#34;k5&#34;</span><span class="op" id="8192287">:</span>&nbsp;<span class="op" id="8192289">{</span><span class="string" id="8192290">&#34;5a&#34;</span><span class="op" id="8192294">,</span>&nbsp;<span class="string" id="8192296">&#34;5b&#34;</span><span class="op" id="8192300">}</span><span class="op" id="8192301">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192306">&#34;k6&#34;</span><span class="op" id="8192310">:</span>&nbsp;<span class="op" id="8192312">{</span><span class="string" id="8192313">&#34;6a&#34;</span><span class="op" id="8192317">,</span>&nbsp;<span class="string" id="8192319">&#34;6b&#34;</span><span class="op" id="8192323">}</span><span class="op" id="8192324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192329">&#34;k7&#34;</span><span class="op" id="8192333">:</span>&nbsp;<span class="op" id="8192335">{</span><span class="string" id="8192336">&#34;7a&#34;</span><span class="op" id="8192340">,</span>&nbsp;<span class="string" id="8192342">&#34;7b&#34;</span><span class="op" id="8192346">}</span><span class="op" id="8192347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192352">&#34;k8&#34;</span><span class="op" id="8192356">:</span>&nbsp;<span class="op" id="8192358">{</span><span class="string" id="8192359">&#34;8a&#34;</span><span class="op" id="8192363">,</span>&nbsp;<span class="string" id="8192365">&#34;8b&#34;</span><span class="op" id="8192369">}</span><span class="op" id="8192370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192375">&#34;k9&#34;</span><span class="op" id="8192379">:</span>&nbsp;<span class="op" id="8192381">{</span><span class="string" id="8192382">&#34;9a&#34;</span><span class="op" id="8192386">,</span>&nbsp;<span class="string" id="8192388">&#34;9b&#34;</span><span class="op" id="8192392">}</span><span class="op" id="8192393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192397">}</span><span class="op" id="8192398">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8192402">map</span><span class="op" id="8192405">[</span><span class="builtintype" id="8192406">string</span><span class="op" id="8192412">]</span><span class="builtintype" id="8192413">bool</span><span class="op" id="8192417">{</span><span class="string" id="8192418">&#34;k5&#34;</span><span class="op" id="8192422">:</span>&nbsp;<span class="builtintype" id="8192424">true</span><span class="op" id="8192428">}</span><span class="op" id="8192429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192433">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="8192496">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192501">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="8192544">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8192549">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="8192611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192614">}</span><span class="op" id="8192615">,</span><br>
<span class="lineno">90</span><span class="op" id="8192617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8192620">func</span>&nbsp;<span class="ident" id="8192625">TestHeaderWrite</span><span class="op" id="8192640">(</span><span class="ident" id="8192641">t</span>&nbsp;<span class="op" id="8192643">*</span><span class="ident" id="8192644">testing</span><span class="op" id="8192651">.</span><span class="ident" id="8192652">T</span><span class="op" id="8192653">)</span>&nbsp;<span class="op" id="8192655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8192658">var</span>&nbsp;<span class="ident" id="8192662">buf</span>&nbsp;<span class="ident" id="8192666">bytes</span><span class="op" id="8192671">.</span><span class="ident" id="8192672">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8192680">for</span>&nbsp;<span class="ident" id="8192684">i</span><span class="op" id="8192685">,</span>&nbsp;<span class="ident" id="8192687">test</span>&nbsp;<span class="op" id="8192692">:=</span>&nbsp;<span class="keyword" id="8192695">range</span>&nbsp;<span class="ident" id="8192701">headerWriteTests</span>&nbsp;<span class="op" id="8192718">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192722">test</span><span class="op" id="8192726">.</span><span class="ident" id="8192727">h</span><span class="op" id="8192728">.</span><span class="ident" id="8192729">WriteSubset</span><span class="op" id="8192740">(</span><span class="op" id="8192741">&amp;</span><span class="ident" id="8192742">buf</span><span class="op" id="8192745">,</span>&nbsp;<span class="ident" id="8192747">test</span><span class="op" id="8192751">.</span><span class="ident" id="8192752">exclude</span><span class="op" id="8192759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8192763">if</span>&nbsp;<span class="ident" id="8192766">buf</span><span class="op" id="8192769">.</span><span class="ident" id="8192770">String</span><span class="op" id="8192776">(</span><span class="op" id="8192777">)</span>&nbsp;<span class="op" id="8192779">!=</span>&nbsp;<span class="ident" id="8192782">test</span><span class="op" id="8192786">.</span><span class="ident" id="8192787">expected</span>&nbsp;<span class="op" id="8192796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192801">t</span><span class="op" id="8192802">.</span><span class="ident" id="8192803">Errorf</span><span class="op" id="8192809">(</span><span class="string" id="8192810">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="8192836">,</span>&nbsp;<span class="ident" id="8192838">i</span><span class="op" id="8192839">,</span>&nbsp;<span class="ident" id="8192841">buf</span><span class="op" id="8192844">.</span><span class="ident" id="8192845">String</span><span class="op" id="8192851">(</span><span class="op" id="8192852">)</span><span class="op" id="8192853">,</span>&nbsp;<span class="ident" id="8192855">test</span><span class="op" id="8192859">.</span><span class="ident" id="8192860">expected</span><span class="op" id="8192868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192876">buf</span><span class="op" id="8192879">.</span><span class="ident" id="8192880">Reset</span><span class="op" id="8192885">(</span><span class="op" id="8192886">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192889">}</span><br>
<span class="lineno"></span><span class="op" id="8192891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8192894">var</span>&nbsp;<span class="ident" id="8192898">parseTimeTests</span>&nbsp;<span class="op" id="8192913">=</span>&nbsp;<span class="op" id="8192915">[</span><span class="op" id="8192916">]</span><span class="keyword" id="8192917">struct</span>&nbsp;<span class="op" id="8192924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192927">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8192931">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8192939">err</span>&nbsp;<span class="builtintype" id="8192943">bool</span><br>
<span class="lineno"></span><span class="op" id="8192948">}</span><span class="op" id="8192949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192952">{</span><span class="ident" id="8192953">Header</span><span class="op" id="8192959">{</span><span class="string" id="8192960">&#34;Date&#34;</span><span class="op" id="8192966">:</span>&nbsp;<span class="op" id="8192968">{</span><span class="string" id="8192969">&#34;&#34;</span><span class="op" id="8192971">}</span><span class="op" id="8192972">}</span><span class="op" id="8192973">,</span>&nbsp;<span class="builtintype" id="8192975">true</span><span class="op" id="8192979">}</span><span class="op" id="8192980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8192983">{</span><span class="ident" id="8192984">Header</span><span class="op" id="8192990">{</span><span class="string" id="8192991">&#34;Date&#34;</span><span class="op" id="8192997">:</span>&nbsp;<span class="op" id="8192999">{</span><span class="string" id="8193000">&#34;invalid&#34;</span><span class="op" id="8193009">}</span><span class="op" id="8193010">}</span><span class="op" id="8193011">,</span>&nbsp;<span class="builtintype" id="8193013">true</span><span class="op" id="8193017">}</span><span class="op" id="8193018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193021">{</span><span class="ident" id="8193022">Header</span><span class="op" id="8193028">{</span><span class="string" id="8193029">&#34;Date&#34;</span><span class="op" id="8193035">:</span>&nbsp;<span class="op" id="8193037">{</span><span class="string" id="8193038">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="8193065">}</span><span class="op" id="8193066">}</span><span class="op" id="8193067">,</span>&nbsp;<span class="builtintype" id="8193069">true</span><span class="op" id="8193073">}</span><span class="op" id="8193074">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193077">{</span><span class="ident" id="8193078">Header</span><span class="op" id="8193084">{</span><span class="string" id="8193085">&#34;Date&#34;</span><span class="op" id="8193091">:</span>&nbsp;<span class="op" id="8193093">{</span><span class="string" id="8193094">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8193125">}</span><span class="op" id="8193126">}</span><span class="op" id="8193127">,</span>&nbsp;<span class="builtintype" id="8193129">false</span><span class="op" id="8193134">}</span><span class="op" id="8193135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193138">{</span><span class="ident" id="8193139">Header</span><span class="op" id="8193145">{</span><span class="string" id="8193146">&#34;Date&#34;</span><span class="op" id="8193152">:</span>&nbsp;<span class="op" id="8193154">{</span><span class="string" id="8193155">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8193187">}</span><span class="op" id="8193188">}</span><span class="op" id="8193189">,</span>&nbsp;<span class="builtintype" id="8193191">false</span><span class="op" id="8193196">}</span><span class="op" id="8193197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193200">{</span><span class="ident" id="8193201">Header</span><span class="op" id="8193207">{</span><span class="string" id="8193208">&#34;Date&#34;</span><span class="op" id="8193214">:</span>&nbsp;<span class="op" id="8193216">{</span><span class="string" id="8193217">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="8193243">}</span><span class="op" id="8193244">}</span><span class="op" id="8193245">,</span>&nbsp;<span class="builtintype" id="8193247">false</span><span class="op" id="8193252">}</span><span class="op" id="8193253">,</span><br>
<span class="lineno"></span><span class="op" id="8193255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8193258">func</span>&nbsp;<span class="ident" id="8193263">TestParseTime</span><span class="op" id="8193276">(</span><span class="ident" id="8193277">t</span>&nbsp;<span class="op" id="8193279">*</span><span class="ident" id="8193280">testing</span><span class="op" id="8193287">.</span><span class="ident" id="8193288">T</span><span class="op" id="8193289">)</span>&nbsp;<span class="op" id="8193291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193294">expect</span>&nbsp;<span class="op" id="8193301">:=</span>&nbsp;<span class="ident" id="8193304">time</span><span class="op" id="8193308">.</span><span class="ident" id="8193309">Date</span><span class="op" id="8193313">(</span><span class="num" id="8193314">1994</span><span class="op" id="8193318">,</span>&nbsp;<span class="num" id="8193320">11</span><span class="op" id="8193322">,</span>&nbsp;<span class="num" id="8193324">6</span><span class="op" id="8193325">,</span>&nbsp;<span class="num" id="8193327">8</span><span class="op" id="8193328">,</span>&nbsp;<span class="num" id="8193330">49</span><span class="op" id="8193332">,</span>&nbsp;<span class="num" id="8193334">37</span><span class="op" id="8193336">,</span>&nbsp;<span class="num" id="8193338">0</span><span class="op" id="8193339">,</span>&nbsp;<span class="ident" id="8193341">time</span><span class="op" id="8193345">.</span><span class="ident" id="8193346">UTC</span><span class="op" id="8193349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193352">for</span>&nbsp;<span class="ident" id="8193356">i</span><span class="op" id="8193357">,</span>&nbsp;<span class="ident" id="8193359">test</span>&nbsp;<span class="op" id="8193364">:=</span>&nbsp;<span class="keyword" id="8193367">range</span>&nbsp;<span class="ident" id="8193373">parseTimeTests</span>&nbsp;<span class="op" id="8193388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193392">d</span><span class="op" id="8193393">,</span>&nbsp;<span class="ident" id="8193395">err</span>&nbsp;<span class="op" id="8193399">:=</span>&nbsp;<span class="ident" id="8193402">ParseTime</span><span class="op" id="8193411">(</span><span class="ident" id="8193412">test</span><span class="op" id="8193416">.</span><span class="ident" id="8193417">h</span><span class="op" id="8193418">.</span><span class="ident" id="8193419">Get</span><span class="op" id="8193422">(</span><span class="string" id="8193423">&#34;Date&#34;</span><span class="op" id="8193429">)</span><span class="op" id="8193430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193434">if</span>&nbsp;<span class="ident" id="8193437">err</span>&nbsp;<span class="op" id="8193441">!=</span>&nbsp;<span class="ident" id="8193444">nil</span>&nbsp;<span class="op" id="8193448">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193453">if</span>&nbsp;<span class="op" id="8193456">!</span><span class="ident" id="8193457">test</span><span class="op" id="8193461">.</span><span class="ident" id="8193462">err</span>&nbsp;<span class="op" id="8193466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193472">t</span><span class="op" id="8193473">.</span><span class="ident" id="8193474">Errorf</span><span class="op" id="8193480">(</span><span class="string" id="8193481">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="8193501">,</span>&nbsp;<span class="ident" id="8193503">i</span><span class="op" id="8193504">,</span>&nbsp;<span class="ident" id="8193506">err</span><span class="op" id="8193509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193519">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193530">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193534">if</span>&nbsp;<span class="ident" id="8193537">test</span><span class="op" id="8193541">.</span><span class="ident" id="8193542">err</span>&nbsp;<span class="op" id="8193546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193551">t</span><span class="op" id="8193552">.</span><span class="ident" id="8193553">Errorf</span><span class="op" id="8193559">(</span><span class="string" id="8193560">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="8193580">,</span>&nbsp;<span class="ident" id="8193582">i</span><span class="op" id="8193583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193588">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8193603">if</span>&nbsp;<span class="op" id="8193606">!</span><span class="ident" id="8193607">expect</span><span class="op" id="8193613">.</span><span class="ident" id="8193614">Equal</span><span class="op" id="8193619">(</span><span class="ident" id="8193620">d</span><span class="op" id="8193621">)</span>&nbsp;<span class="op" id="8193623">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193628">t</span><span class="op" id="8193629">.</span><span class="ident" id="8193630">Errorf</span><span class="op" id="8193636">(</span><span class="string" id="8193637">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8193663">,</span>&nbsp;<span class="ident" id="8193665">i</span><span class="op" id="8193666">,</span>&nbsp;<span class="ident" id="8193668">d</span><span class="op" id="8193669">,</span>&nbsp;<span class="ident" id="8193671">expect</span><span class="op" id="8193677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193684">}</span><br>
<span class="lineno"></span><span class="op" id="8193686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8193689">type</span>&nbsp;<span class="ident" id="8193694">hasTokenTest</span>&nbsp;<span class="keyword" id="8193707">struct</span>&nbsp;<span class="op" id="8193714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193717">header</span>&nbsp;<span class="builtintype" id="8193724">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193732">token</span>&nbsp;&nbsp;<span class="builtintype" id="8193739">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8193747">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8193754">bool</span><br>
<span class="lineno"></span><span class="op" id="8193759">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8193762">var</span>&nbsp;<span class="ident" id="8193766">hasTokenTests</span>&nbsp;<span class="op" id="8193780">=</span>&nbsp;<span class="op" id="8193782">[</span><span class="op" id="8193783">]</span><span class="ident" id="8193784">hasTokenTest</span><span class="op" id="8193796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193799">{</span><span class="string" id="8193800">&#34;&#34;</span><span class="op" id="8193802">,</span>&nbsp;<span class="string" id="8193804">&#34;&#34;</span><span class="op" id="8193806">,</span>&nbsp;<span class="builtintype" id="8193808">false</span><span class="op" id="8193813">}</span><span class="op" id="8193814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193817">{</span><span class="string" id="8193818">&#34;&#34;</span><span class="op" id="8193820">,</span>&nbsp;<span class="string" id="8193822">&#34;foo&#34;</span><span class="op" id="8193827">,</span>&nbsp;<span class="builtintype" id="8193829">false</span><span class="op" id="8193834">}</span><span class="op" id="8193835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193838">{</span><span class="string" id="8193839">&#34;foo&#34;</span><span class="op" id="8193844">,</span>&nbsp;<span class="string" id="8193846">&#34;foo&#34;</span><span class="op" id="8193851">,</span>&nbsp;<span class="builtintype" id="8193853">true</span><span class="op" id="8193857">}</span><span class="op" id="8193858">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193861">{</span><span class="string" id="8193862">&#34;foo&nbsp;&#34;</span><span class="op" id="8193868">,</span>&nbsp;<span class="string" id="8193870">&#34;foo&#34;</span><span class="op" id="8193875">,</span>&nbsp;<span class="builtintype" id="8193877">true</span><span class="op" id="8193881">}</span><span class="op" id="8193882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193885">{</span><span class="string" id="8193886">&#34;&nbsp;foo&#34;</span><span class="op" id="8193892">,</span>&nbsp;<span class="string" id="8193894">&#34;foo&#34;</span><span class="op" id="8193899">,</span>&nbsp;<span class="builtintype" id="8193901">true</span><span class="op" id="8193905">}</span><span class="op" id="8193906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193909">{</span><span class="string" id="8193910">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="8193917">,</span>&nbsp;<span class="string" id="8193919">&#34;foo&#34;</span><span class="op" id="8193924">,</span>&nbsp;<span class="builtintype" id="8193926">true</span><span class="op" id="8193930">}</span><span class="op" id="8193931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193934">{</span><span class="string" id="8193935">&#34;foo,bar&#34;</span><span class="op" id="8193944">,</span>&nbsp;<span class="string" id="8193946">&#34;foo&#34;</span><span class="op" id="8193951">,</span>&nbsp;<span class="builtintype" id="8193953">true</span><span class="op" id="8193957">}</span><span class="op" id="8193958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193961">{</span><span class="string" id="8193962">&#34;bar,foo&#34;</span><span class="op" id="8193971">,</span>&nbsp;<span class="string" id="8193973">&#34;foo&#34;</span><span class="op" id="8193978">,</span>&nbsp;<span class="builtintype" id="8193980">true</span><span class="op" id="8193984">}</span><span class="op" id="8193985">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8193988">{</span><span class="string" id="8193989">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="8193999">,</span>&nbsp;<span class="string" id="8194001">&#34;foo&#34;</span><span class="op" id="8194006">,</span>&nbsp;<span class="builtintype" id="8194008">true</span><span class="op" id="8194012">}</span><span class="op" id="8194013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194016">{</span><span class="string" id="8194017">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8194031">,</span>&nbsp;<span class="string" id="8194033">&#34;foo&#34;</span><span class="op" id="8194038">,</span>&nbsp;<span class="builtintype" id="8194040">true</span><span class="op" id="8194044">}</span><span class="op" id="8194045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194048">{</span><span class="string" id="8194049">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="8194063">,</span>&nbsp;<span class="string" id="8194065">&#34;foo&#34;</span><span class="op" id="8194070">,</span>&nbsp;<span class="builtintype" id="8194072">true</span><span class="op" id="8194076">}</span><span class="op" id="8194077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194080">{</span><span class="string" id="8194081">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8194095">,</span>&nbsp;<span class="string" id="8194097">&#34;foo&#34;</span><span class="op" id="8194102">,</span>&nbsp;<span class="builtintype" id="8194104">true</span><span class="op" id="8194108">}</span><span class="op" id="8194109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194112">{</span><span class="string" id="8194113">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="8194128">,</span>&nbsp;<span class="string" id="8194130">&#34;foo&#34;</span><span class="op" id="8194135">,</span>&nbsp;<span class="builtintype" id="8194137">true</span><span class="op" id="8194141">}</span><span class="op" id="8194142">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194145">{</span><span class="string" id="8194146">&#34;FOO&#34;</span><span class="op" id="8194151">,</span>&nbsp;<span class="string" id="8194153">&#34;foo&#34;</span><span class="op" id="8194158">,</span>&nbsp;<span class="builtintype" id="8194160">true</span><span class="op" id="8194164">}</span><span class="op" id="8194165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194168">{</span><span class="string" id="8194169">&#34;FOO&nbsp;&#34;</span><span class="op" id="8194175">,</span>&nbsp;<span class="string" id="8194177">&#34;foo&#34;</span><span class="op" id="8194182">,</span>&nbsp;<span class="builtintype" id="8194184">true</span><span class="op" id="8194188">}</span><span class="op" id="8194189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194192">{</span><span class="string" id="8194193">&#34;&nbsp;FOO&#34;</span><span class="op" id="8194199">,</span>&nbsp;<span class="string" id="8194201">&#34;foo&#34;</span><span class="op" id="8194206">,</span>&nbsp;<span class="builtintype" id="8194208">true</span><span class="op" id="8194212">}</span><span class="op" id="8194213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194216">{</span><span class="string" id="8194217">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8194224">,</span>&nbsp;<span class="string" id="8194226">&#34;foo&#34;</span><span class="op" id="8194231">,</span>&nbsp;<span class="builtintype" id="8194233">true</span><span class="op" id="8194237">}</span><span class="op" id="8194238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194241">{</span><span class="string" id="8194242">&#34;FOO,BAR&#34;</span><span class="op" id="8194251">,</span>&nbsp;<span class="string" id="8194253">&#34;foo&#34;</span><span class="op" id="8194258">,</span>&nbsp;<span class="builtintype" id="8194260">true</span><span class="op" id="8194264">}</span><span class="op" id="8194265">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194268">{</span><span class="string" id="8194269">&#34;BAR,FOO&#34;</span><span class="op" id="8194278">,</span>&nbsp;<span class="string" id="8194280">&#34;foo&#34;</span><span class="op" id="8194285">,</span>&nbsp;<span class="builtintype" id="8194287">true</span><span class="op" id="8194291">}</span><span class="op" id="8194292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194295">{</span><span class="string" id="8194296">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="8194306">,</span>&nbsp;<span class="string" id="8194308">&#34;foo&#34;</span><span class="op" id="8194313">,</span>&nbsp;<span class="builtintype" id="8194315">true</span><span class="op" id="8194319">}</span><span class="op" id="8194320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194323">{</span><span class="string" id="8194324">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="8194338">,</span>&nbsp;<span class="string" id="8194340">&#34;foo&#34;</span><span class="op" id="8194345">,</span>&nbsp;<span class="builtintype" id="8194347">true</span><span class="op" id="8194351">}</span><span class="op" id="8194352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194355">{</span><span class="string" id="8194356">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="8194370">,</span>&nbsp;<span class="string" id="8194372">&#34;foo&#34;</span><span class="op" id="8194377">,</span>&nbsp;<span class="builtintype" id="8194379">true</span><span class="op" id="8194383">}</span><span class="op" id="8194384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194387">{</span><span class="string" id="8194388">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="8194402">,</span>&nbsp;<span class="string" id="8194404">&#34;foo&#34;</span><span class="op" id="8194409">,</span>&nbsp;<span class="builtintype" id="8194411">true</span><span class="op" id="8194415">}</span><span class="op" id="8194416">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194419">{</span><span class="string" id="8194420">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="8194435">,</span>&nbsp;<span class="string" id="8194437">&#34;foo&#34;</span><span class="op" id="8194442">,</span>&nbsp;<span class="builtintype" id="8194444">true</span><span class="op" id="8194448">}</span><span class="op" id="8194449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194452">{</span><span class="string" id="8194453">&#34;foobar&#34;</span><span class="op" id="8194461">,</span>&nbsp;<span class="string" id="8194463">&#34;foo&#34;</span><span class="op" id="8194468">,</span>&nbsp;<span class="builtintype" id="8194470">false</span><span class="op" id="8194475">}</span><span class="op" id="8194476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194479">{</span><span class="string" id="8194480">&#34;barfoo&nbsp;&#34;</span><span class="op" id="8194489">,</span>&nbsp;<span class="string" id="8194491">&#34;foo&#34;</span><span class="op" id="8194496">,</span>&nbsp;<span class="builtintype" id="8194498">false</span><span class="op" id="8194503">}</span><span class="op" id="8194504">,</span><br>
<span class="lineno"></span><span class="op" id="8194506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8194509">func</span>&nbsp;<span class="ident" id="8194514">TestHasToken</span><span class="op" id="8194526">(</span><span class="ident" id="8194527">t</span>&nbsp;<span class="op" id="8194529">*</span><span class="ident" id="8194530">testing</span><span class="op" id="8194537">.</span><span class="ident" id="8194538">T</span><span class="op" id="8194539">)</span>&nbsp;<span class="op" id="8194541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8194544">for</span>&nbsp;<span class="ident" id="8194548">_</span><span class="op" id="8194549">,</span>&nbsp;<span class="ident" id="8194551">tt</span>&nbsp;<span class="op" id="8194554">:=</span>&nbsp;<span class="keyword" id="8194557">range</span>&nbsp;<span class="ident" id="8194563">hasTokenTests</span>&nbsp;<span class="op" id="8194577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8194581">if</span>&nbsp;<span class="ident" id="8194584">hasToken</span><span class="op" id="8194592">(</span><span class="ident" id="8194593">tt</span><span class="op" id="8194595">.</span><span class="ident" id="8194596">header</span><span class="op" id="8194602">,</span>&nbsp;<span class="ident" id="8194604">tt</span><span class="op" id="8194606">.</span><span class="ident" id="8194607">token</span><span class="op" id="8194612">)</span>&nbsp;<span class="op" id="8194614">!=</span>&nbsp;<span class="ident" id="8194617">tt</span><span class="op" id="8194619">.</span><span class="ident" id="8194620">want</span>&nbsp;<span class="op" id="8194625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8194630">t</span><span class="op" id="8194631">.</span><span class="ident" id="8194632">Errorf</span><span class="op" id="8194638">(</span><span class="string" id="8194639">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8194671">,</span>&nbsp;<span class="ident" id="8194673">tt</span><span class="op" id="8194675">.</span><span class="ident" id="8194676">header</span><span class="op" id="8194682">,</span>&nbsp;<span class="ident" id="8194684">tt</span><span class="op" id="8194686">.</span><span class="ident" id="8194687">token</span><span class="op" id="8194692">,</span>&nbsp;<span class="op" id="8194694">!</span><span class="ident" id="8194695">tt</span><span class="op" id="8194697">.</span><span class="ident" id="8194698">want</span><span class="op" id="8194702">,</span>&nbsp;<span class="ident" id="8194704">tt</span><span class="op" id="8194706">.</span><span class="ident" id="8194707">want</span><span class="op" id="8194711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194715">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8194718">}</span><br>
<span class="lineno"></span><span class="op" id="8194720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8194723">var</span>&nbsp;<span class="ident" id="8194727">testHeader</span>&nbsp;<span class="op" id="8194738">=</span>&nbsp;<span class="ident" id="8194740">Header</span><span class="op" id="8194746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8194749">&#34;Content-Length&#34;</span><span class="op" id="8194765">:</span>&nbsp;<span class="op" id="8194767">{</span><span class="string" id="8194768">&#34;123&#34;</span><span class="op" id="8194773">}</span><span class="op" id="8194774">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8194777">&#34;Content-Type&#34;</span><span class="op" id="8194791">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8194795">{</span><span class="string" id="8194796">&#34;text/plain&#34;</span><span class="op" id="8194808">}</span><span class="op" id="8194809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8194812">&#34;Date&#34;</span><span class="op" id="8194818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8194830">{</span><span class="string" id="8194831">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="8194857">}</span><span class="op" id="8194858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8194861">&#34;Server&#34;</span><span class="op" id="8194869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8194879">{</span><span class="ident" id="8194880">DefaultUserAgent</span><span class="op" id="8194896">}</span><span class="op" id="8194897">,</span><br>
<span class="lineno"></span><span class="op" id="8194899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="8194902">var</span>&nbsp;<span class="ident" id="8194906">buf</span>&nbsp;<span class="ident" id="8194910">bytes</span><span class="op" id="8194915">.</span><span class="ident" id="8194916">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8194924">func</span>&nbsp;<span class="ident" id="8194929">BenchmarkHeaderWriteSubset</span><span class="op" id="8194955">(</span><span class="ident" id="8194956">b</span>&nbsp;<span class="op" id="8194958">*</span><span class="ident" id="8194959">testing</span><span class="op" id="8194966">.</span><span class="ident" id="8194967">B</span><span class="op" id="8194968">)</span>&nbsp;<span class="op" id="8194970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8194973">b</span><span class="op" id="8194974">.</span><span class="ident" id="8194975">ReportAllocs</span><span class="op" id="8194987">(</span><span class="op" id="8194988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8194991">for</span>&nbsp;<span class="ident" id="8194995">i</span>&nbsp;<span class="op" id="8194997">:=</span>&nbsp;<span class="num" id="8195000">0</span><span class="op" id="8195001">;</span>&nbsp;<span class="ident" id="8195003">i</span>&nbsp;<span class="op" id="8195005">&lt;</span>&nbsp;<span class="ident" id="8195007">b</span><span class="op" id="8195008">.</span><span class="ident" id="8195009">N</span><span class="op" id="8195010">;</span>&nbsp;<span class="ident" id="8195012">i</span><span class="op" id="8195013">++</span>&nbsp;<span class="op" id="8195016">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195020">buf</span><span class="op" id="8195023">.</span><span class="ident" id="8195024">Reset</span><span class="op" id="8195029">(</span><span class="op" id="8195030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195034">testHeader</span><span class="op" id="8195044">.</span><span class="ident" id="8195045">WriteSubset</span><span class="op" id="8195056">(</span><span class="op" id="8195057">&amp;</span><span class="ident" id="8195058">buf</span><span class="op" id="8195061">,</span>&nbsp;<span class="ident" id="8195063">nil</span><span class="op" id="8195066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195069">}</span><br>
<span class="lineno"></span><span class="op" id="8195071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="8195074">func</span>&nbsp;<span class="ident" id="8195079">TestHeaderWriteSubsetAllocs</span><span class="op" id="8195106">(</span><span class="ident" id="8195107">t</span>&nbsp;<span class="op" id="8195109">*</span><span class="ident" id="8195110">testing</span><span class="op" id="8195117">.</span><span class="ident" id="8195118">T</span><span class="op" id="8195119">)</span>&nbsp;<span class="op" id="8195121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195124">if</span>&nbsp;<span class="ident" id="8195127">testing</span><span class="op" id="8195134">.</span><span class="ident" id="8195135">Short</span><span class="op" id="8195140">(</span><span class="op" id="8195141">)</span>&nbsp;<span class="op" id="8195143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195147">t</span><span class="op" id="8195148">.</span><span class="ident" id="8195149">Skip</span><span class="op" id="8195153">(</span><span class="string" id="8195154">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8195189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195195">if</span>&nbsp;<span class="ident" id="8195198">raceEnabled</span>&nbsp;<span class="op" id="8195210">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195214">t</span><span class="op" id="8195215">.</span><span class="ident" id="8195216">Skip</span><span class="op" id="8195220">(</span><span class="string" id="8195221">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="8195256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195262">if</span>&nbsp;<span class="ident" id="8195265">runtime</span><span class="op" id="8195272">.</span><span class="ident" id="8195273">GOMAXPROCS</span><span class="op" id="8195283">(</span><span class="num" id="8195284">0</span><span class="op" id="8195285">)</span>&nbsp;<span class="op" id="8195287">&gt;</span>&nbsp;<span class="num" id="8195289">1</span>&nbsp;<span class="op" id="8195291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195295">t</span><span class="op" id="8195296">.</span><span class="ident" id="8195297">Skip</span><span class="op" id="8195301">(</span><span class="string" id="8195302">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8195326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195329">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195332">n</span>&nbsp;<span class="op" id="8195334">:=</span>&nbsp;<span class="ident" id="8195337">testing</span><span class="op" id="8195344">.</span><span class="ident" id="8195345">AllocsPerRun</span><span class="op" id="8195357">(</span><span class="num" id="8195358">100</span><span class="op" id="8195361">,</span>&nbsp;<span class="keyword" id="8195363">func</span><span class="op" id="8195367">(</span><span class="op" id="8195368">)</span>&nbsp;<span class="op" id="8195370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195374">buf</span><span class="op" id="8195377">.</span><span class="ident" id="8195378">Reset</span><span class="op" id="8195383">(</span><span class="op" id="8195384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195388">testHeader</span><span class="op" id="8195398">.</span><span class="ident" id="8195399">WriteSubset</span><span class="op" id="8195410">(</span><span class="op" id="8195411">&amp;</span><span class="ident" id="8195412">buf</span><span class="op" id="8195415">,</span>&nbsp;<span class="ident" id="8195417">nil</span><span class="op" id="8195420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195423">}</span><span class="op" id="8195424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8195427">if</span>&nbsp;<span class="ident" id="8195430">n</span>&nbsp;<span class="op" id="8195432">&gt;</span>&nbsp;<span class="num" id="8195434">0</span>&nbsp;<span class="op" id="8195436">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8195440">t</span><span class="op" id="8195441">.</span><span class="ident" id="8195442">Errorf</span><span class="op" id="8195448">(</span><span class="string" id="8195449">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8195470">,</span>&nbsp;<span class="ident" id="8195472">n</span><span class="op" id="8195473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8195476">}</span><br>
<span class="lineno"></span><span class="op" id="8195478">}</span>
</div>
</body>
</html>
