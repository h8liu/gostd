<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6777857">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6777912">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6777966">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6778017">package</span>&nbsp;<span class="ident" id="6778025">httptest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6778035">import</span>&nbsp;<span class="op" id="6778042">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6778045">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6778052">&#34;net/http&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6778064">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6778074">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6778077">func</span>&nbsp;<span class="ident" id="6778082">TestRecorder</span><span class="op" id="6778094">(</span><span class="ident" id="6778095">t</span>&nbsp;<span class="op" id="6778097">*</span><span class="ident" id="6778098"><a href="/net/http/httptest/recorder_test.go.html#6778064">testing</a></span><span class="op" id="6778105">.</span><span class="ident" id="6778106">T</span><span class="op" id="6778107">)</span>&nbsp;<span class="op" id="6778109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778112">type</span>&nbsp;<span class="ident" id="6778117">checkFunc</span>&nbsp;<span class="keyword" id="6778127">func</span><span class="op" id="6778131">(</span><span class="op" id="6778132">*</span><span class="ident" id="6778133"><a href="/net/http/httptest/recorder.go.html#6296415">ResponseRecorder</a></span><span class="op" id="6778149">)</span>&nbsp;<span class="builtintype" id="6778151">error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778158">check</span>&nbsp;<span class="op" id="6778164">:=</span>&nbsp;<span class="keyword" id="6778167">func</span><span class="op" id="6778171">(</span><span class="ident" id="6778172">fns</span>&nbsp;<span class="op" id="6778176">...</span><span class="ident" id="6778179"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span><span class="op" id="6778188">)</span>&nbsp;<span class="op" id="6778190">[</span><span class="op" id="6778191">]</span><span class="ident" id="6778192"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span>&nbsp;<span class="op" id="6778202">{</span>&nbsp;<span class="keyword" id="6778204">return</span>&nbsp;<span class="ident" id="6778211"><a href="/net/http/httptest/recorder_test.go.html#6778172">fns</a></span>&nbsp;<span class="op" id="6778215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778219">hasStatus</span>&nbsp;<span class="op" id="6778229">:=</span>&nbsp;<span class="keyword" id="6778232">func</span><span class="op" id="6778236">(</span><span class="ident" id="6778237">wantCode</span>&nbsp;<span class="builtintype" id="6778246">int</span><span class="op" id="6778249">)</span>&nbsp;<span class="ident" id="6778251"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span>&nbsp;<span class="op" id="6778261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778265">return</span>&nbsp;<span class="keyword" id="6778272">func</span><span class="op" id="6778276">(</span><span class="ident" id="6778277">rec</span>&nbsp;<span class="op" id="6778281">*</span><span class="ident" id="6778282"><a href="/net/http/httptest/recorder.go.html#6296415">ResponseRecorder</a></span><span class="op" id="6778298">)</span>&nbsp;<span class="builtintype" id="6778300">error</span>&nbsp;<span class="op" id="6778306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778311">if</span>&nbsp;<span class="ident" id="6778314"><a href="/net/http/httptest/recorder_test.go.html#6778277">rec</a></span><span class="op" id="6778317">.</span><span class="ident" id="6778318">Code</span>&nbsp;<span class="op" id="6778323">!=</span>&nbsp;<span class="ident" id="6778326"><a href="/net/http/httptest/recorder_test.go.html#6778237">wantCode</a></span>&nbsp;<span class="op" id="6778335">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778341">return</span>&nbsp;<span class="ident" id="6778348"><a href="/net/http/httptest/recorder_test.go.html#6778045">fmt</a></span><span class="op" id="6778351">.</span><span class="ident" id="6778352">Errorf</span><span class="op" id="6778358">(</span><span class="string" id="6778359">&#34;Status&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6778381">,</span>&nbsp;<span class="ident" id="6778383"><a href="/net/http/httptest/recorder_test.go.html#6778277">rec</a></span><span class="op" id="6778386">.</span><span class="ident" id="6778387">Code</span><span class="op" id="6778391">,</span>&nbsp;<span class="ident" id="6778393"><a href="/net/http/httptest/recorder_test.go.html#6778237">wantCode</a></span><span class="op" id="6778401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778411">return</span>&nbsp;<span class="ident" id="6778418">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778427">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778430">hasContents</span>&nbsp;<span class="op" id="6778442">:=</span>&nbsp;<span class="keyword" id="6778445">func</span><span class="op" id="6778449">(</span><span class="ident" id="6778450">want</span>&nbsp;<span class="builtintype" id="6778455">string</span><span class="op" id="6778461">)</span>&nbsp;<span class="ident" id="6778463"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span>&nbsp;<span class="op" id="6778473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778477">return</span>&nbsp;<span class="keyword" id="6778484">func</span><span class="op" id="6778488">(</span><span class="ident" id="6778489">rec</span>&nbsp;<span class="op" id="6778493">*</span><span class="ident" id="6778494"><a href="/net/http/httptest/recorder.go.html#6296415">ResponseRecorder</a></span><span class="op" id="6778510">)</span>&nbsp;<span class="builtintype" id="6778512">error</span>&nbsp;<span class="op" id="6778518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778523">if</span>&nbsp;<span class="ident" id="6778526"><a href="/net/http/httptest/recorder_test.go.html#6778489">rec</a></span><span class="op" id="6778529">.</span><span class="ident" id="6778530">Body</span><span class="op" id="6778534">.</span><span class="ident" id="6778535">String</span><span class="op" id="6778541">(</span><span class="op" id="6778542">)</span>&nbsp;<span class="op" id="6778544">!=</span>&nbsp;<span class="ident" id="6778547"><a href="/net/http/httptest/recorder_test.go.html#6778450">want</a></span>&nbsp;<span class="op" id="6778552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778558">return</span>&nbsp;<span class="ident" id="6778565"><a href="/net/http/httptest/recorder_test.go.html#6778045">fmt</a></span><span class="op" id="6778568">.</span><span class="ident" id="6778569">Errorf</span><span class="op" id="6778575">(</span><span class="string" id="6778576">&#34;wrote&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6778597">,</span>&nbsp;<span class="ident" id="6778599"><a href="/net/http/httptest/recorder_test.go.html#6778489">rec</a></span><span class="op" id="6778602">.</span><span class="ident" id="6778603">Body</span><span class="op" id="6778607">.</span><span class="ident" id="6778608">String</span><span class="op" id="6778614">(</span><span class="op" id="6778615">)</span><span class="op" id="6778616">,</span>&nbsp;<span class="ident" id="6778618"><a href="/net/http/httptest/recorder_test.go.html#6778450">want</a></span><span class="op" id="6778622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778627">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778632">return</span>&nbsp;<span class="ident" id="6778639">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778651">hasFlush</span>&nbsp;<span class="op" id="6778660">:=</span>&nbsp;<span class="keyword" id="6778663">func</span><span class="op" id="6778667">(</span><span class="ident" id="6778668">want</span>&nbsp;<span class="builtintype" id="6778673">bool</span><span class="op" id="6778677">)</span>&nbsp;<span class="ident" id="6778679"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span>&nbsp;<span class="op" id="6778689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778693">return</span>&nbsp;<span class="keyword" id="6778700">func</span><span class="op" id="6778704">(</span><span class="ident" id="6778705">rec</span>&nbsp;<span class="op" id="6778709">*</span><span class="ident" id="6778710"><a href="/net/http/httptest/recorder.go.html#6296415">ResponseRecorder</a></span><span class="op" id="6778726">)</span>&nbsp;<span class="builtintype" id="6778728">error</span>&nbsp;<span class="op" id="6778734">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778739">if</span>&nbsp;<span class="ident" id="6778742"><a href="/net/http/httptest/recorder_test.go.html#6778705">rec</a></span><span class="op" id="6778745">.</span><span class="ident" id="6778746">Flushed</span>&nbsp;<span class="op" id="6778754">!=</span>&nbsp;<span class="ident" id="6778757"><a href="/net/http/httptest/recorder_test.go.html#6778668">want</a></span>&nbsp;<span class="op" id="6778762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778768">return</span>&nbsp;<span class="ident" id="6778775"><a href="/net/http/httptest/recorder_test.go.html#6778045">fmt</a></span><span class="op" id="6778778">.</span><span class="ident" id="6778779">Errorf</span><span class="op" id="6778785">(</span><span class="string" id="6778786">&#34;Flushed&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6778809">,</span>&nbsp;<span class="ident" id="6778811"><a href="/net/http/httptest/recorder_test.go.html#6778705">rec</a></span><span class="op" id="6778814">.</span><span class="ident" id="6778815">Flushed</span><span class="op" id="6778822">,</span>&nbsp;<span class="ident" id="6778824"><a href="/net/http/httptest/recorder_test.go.html#6778668">want</a></span><span class="op" id="6778828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778838">return</span>&nbsp;<span class="ident" id="6778845">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778851">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778858">tests</span>&nbsp;<span class="op" id="6778864">:=</span>&nbsp;<span class="op" id="6778867">[</span><span class="op" id="6778868">]</span><span class="keyword" id="6778869">struct</span>&nbsp;<span class="op" id="6778876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778880">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6778887">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778896">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6778903">func</span><span class="op" id="6778907">(</span><span class="ident" id="6778908">w</span>&nbsp;<span class="ident" id="6778910"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6778914">.</span><span class="ident" id="6778915">ResponseWriter</span><span class="op" id="6778929">,</span>&nbsp;<span class="ident" id="6778931">r</span>&nbsp;<span class="op" id="6778933">*</span><span class="ident" id="6778934"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6778938">.</span><span class="ident" id="6778939">Request</span><span class="op" id="6778946">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6778950">checks</span>&nbsp;<span class="op" id="6778957">[</span><span class="op" id="6778958">]</span><span class="ident" id="6778959"><a href="/net/http/httptest/recorder_test.go.html#6778117">checkFunc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778970">}</span><span class="op" id="6778971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6778975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6778980">&#34;200&nbsp;default&#34;</span><span class="op" id="6778993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6778998">func</span><span class="op" id="6779002">(</span><span class="ident" id="6779003">w</span>&nbsp;<span class="ident" id="6779005"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779009">.</span><span class="ident" id="6779010">ResponseWriter</span><span class="op" id="6779024">,</span>&nbsp;<span class="ident" id="6779026">r</span>&nbsp;<span class="op" id="6779028">*</span><span class="ident" id="6779029"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779033">.</span><span class="ident" id="6779034">Request</span><span class="op" id="6779041">)</span>&nbsp;<span class="op" id="6779043">{</span><span class="op" id="6779044">}</span><span class="op" id="6779045">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779050"><a href="/net/http/httptest/recorder_test.go.html#6778158">check</a></span><span class="op" id="6779055">(</span><span class="ident" id="6779056"><a href="/net/http/httptest/recorder_test.go.html#6778219">hasStatus</a></span><span class="op" id="6779065">(</span><span class="num" id="6779066">200</span><span class="op" id="6779069">)</span><span class="op" id="6779070">,</span>&nbsp;<span class="ident" id="6779072"><a href="/net/http/httptest/recorder_test.go.html#6778430">hasContents</a></span><span class="op" id="6779083">(</span><span class="string" id="6779084">&#34;&#34;</span><span class="op" id="6779086">)</span><span class="op" id="6779087">)</span><span class="op" id="6779088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779092">}</span><span class="op" id="6779093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6779102">&#34;first&nbsp;code&nbsp;only&#34;</span><span class="op" id="6779119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779124">func</span><span class="op" id="6779128">(</span><span class="ident" id="6779129">w</span>&nbsp;<span class="ident" id="6779131"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779135">.</span><span class="ident" id="6779136">ResponseWriter</span><span class="op" id="6779150">,</span>&nbsp;<span class="ident" id="6779152">r</span>&nbsp;<span class="op" id="6779154">*</span><span class="ident" id="6779155"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779159">.</span><span class="ident" id="6779160">Request</span><span class="op" id="6779167">)</span>&nbsp;<span class="op" id="6779169">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779175"><a href="/net/http/httptest/recorder_test.go.html#6779129">w</a></span><span class="op" id="6779176">.</span><span class="ident" id="6779177">WriteHeader</span><span class="op" id="6779188">(</span><span class="num" id="6779189">201</span><span class="op" id="6779192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779198"><a href="/net/http/httptest/recorder_test.go.html#6779129">w</a></span><span class="op" id="6779199">.</span><span class="ident" id="6779200">WriteHeader</span><span class="op" id="6779211">(</span><span class="num" id="6779212">202</span><span class="op" id="6779215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779221"><a href="/net/http/httptest/recorder_test.go.html#6779129">w</a></span><span class="op" id="6779222">.</span><span class="ident" id="6779223">Write</span><span class="op" id="6779228">(</span><span class="op" id="6779229">[</span><span class="op" id="6779230">]</span><span class="builtintype" id="6779231">byte</span><span class="op" id="6779235">(</span><span class="string" id="6779236">&#34;hi&#34;</span><span class="op" id="6779240">)</span><span class="op" id="6779241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779246">}</span><span class="op" id="6779247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779252"><a href="/net/http/httptest/recorder_test.go.html#6778158">check</a></span><span class="op" id="6779257">(</span><span class="ident" id="6779258"><a href="/net/http/httptest/recorder_test.go.html#6778219">hasStatus</a></span><span class="op" id="6779267">(</span><span class="num" id="6779268">201</span><span class="op" id="6779271">)</span><span class="op" id="6779272">,</span>&nbsp;<span class="ident" id="6779274"><a href="/net/http/httptest/recorder_test.go.html#6778430">hasContents</a></span><span class="op" id="6779285">(</span><span class="string" id="6779286">&#34;hi&#34;</span><span class="op" id="6779290">)</span><span class="op" id="6779291">)</span><span class="op" id="6779292">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779296">}</span><span class="op" id="6779297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6779306">&#34;write&nbsp;sends&nbsp;200&#34;</span><span class="op" id="6779323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779328">func</span><span class="op" id="6779332">(</span><span class="ident" id="6779333">w</span>&nbsp;<span class="ident" id="6779335"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779339">.</span><span class="ident" id="6779340">ResponseWriter</span><span class="op" id="6779354">,</span>&nbsp;<span class="ident" id="6779356">r</span>&nbsp;<span class="op" id="6779358">*</span><span class="ident" id="6779359"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779363">.</span><span class="ident" id="6779364">Request</span><span class="op" id="6779371">)</span>&nbsp;<span class="op" id="6779373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779379"><a href="/net/http/httptest/recorder_test.go.html#6779333">w</a></span><span class="op" id="6779380">.</span><span class="ident" id="6779381">Write</span><span class="op" id="6779386">(</span><span class="op" id="6779387">[</span><span class="op" id="6779388">]</span><span class="builtintype" id="6779389">byte</span><span class="op" id="6779393">(</span><span class="string" id="6779394">&#34;hi&nbsp;first&#34;</span><span class="op" id="6779404">)</span><span class="op" id="6779405">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779411"><a href="/net/http/httptest/recorder_test.go.html#6779333">w</a></span><span class="op" id="6779412">.</span><span class="ident" id="6779413">WriteHeader</span><span class="op" id="6779424">(</span><span class="num" id="6779425">201</span><span class="op" id="6779428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779434"><a href="/net/http/httptest/recorder_test.go.html#6779333">w</a></span><span class="op" id="6779435">.</span><span class="ident" id="6779436">WriteHeader</span><span class="op" id="6779447">(</span><span class="num" id="6779448">202</span><span class="op" id="6779451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779456">}</span><span class="op" id="6779457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779462"><a href="/net/http/httptest/recorder_test.go.html#6778158">check</a></span><span class="op" id="6779467">(</span><span class="ident" id="6779468"><a href="/net/http/httptest/recorder_test.go.html#6778219">hasStatus</a></span><span class="op" id="6779477">(</span><span class="num" id="6779478">200</span><span class="op" id="6779481">)</span><span class="op" id="6779482">,</span>&nbsp;<span class="ident" id="6779484"><a href="/net/http/httptest/recorder_test.go.html#6778430">hasContents</a></span><span class="op" id="6779495">(</span><span class="string" id="6779496">&#34;hi&nbsp;first&#34;</span><span class="op" id="6779506">)</span><span class="op" id="6779507">,</span>&nbsp;<span class="ident" id="6779509"><a href="/net/http/httptest/recorder_test.go.html#6778651">hasFlush</a></span><span class="op" id="6779517">(</span><span class="builtintype" id="6779518">false</span><span class="op" id="6779523">)</span><span class="op" id="6779524">)</span><span class="op" id="6779525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779529">}</span><span class="op" id="6779530">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6779539">&#34;flush&#34;</span><span class="op" id="6779546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779551">func</span><span class="op" id="6779555">(</span><span class="ident" id="6779556">w</span>&nbsp;<span class="ident" id="6779558"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779562">.</span><span class="ident" id="6779563">ResponseWriter</span><span class="op" id="6779577">,</span>&nbsp;<span class="ident" id="6779579">r</span>&nbsp;<span class="op" id="6779581">*</span><span class="ident" id="6779582"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779586">.</span><span class="ident" id="6779587">Request</span><span class="op" id="6779594">)</span>&nbsp;<span class="op" id="6779596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779602"><a href="/net/http/httptest/recorder_test.go.html#6779556">w</a></span><span class="op" id="6779603">.</span><span class="op" id="6779604">(</span><span class="ident" id="6779605"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779609">.</span><span class="ident" id="6779610">Flusher</span><span class="op" id="6779617">)</span><span class="op" id="6779618">.</span><span class="ident" id="6779619">Flush</span><span class="op" id="6779624">(</span><span class="op" id="6779625">)</span>&nbsp;<span class="comment" id="6779627">//&nbsp;also&nbsp;sends&nbsp;a&nbsp;200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779651"><a href="/net/http/httptest/recorder_test.go.html#6779556">w</a></span><span class="op" id="6779652">.</span><span class="ident" id="6779653">WriteHeader</span><span class="op" id="6779664">(</span><span class="num" id="6779665">201</span><span class="op" id="6779668">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779673">}</span><span class="op" id="6779674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779679"><a href="/net/http/httptest/recorder_test.go.html#6778158">check</a></span><span class="op" id="6779684">(</span><span class="ident" id="6779685"><a href="/net/http/httptest/recorder_test.go.html#6778219">hasStatus</a></span><span class="op" id="6779694">(</span><span class="num" id="6779695">200</span><span class="op" id="6779698">)</span><span class="op" id="6779699">,</span>&nbsp;<span class="ident" id="6779701"><a href="/net/http/httptest/recorder_test.go.html#6778651">hasFlush</a></span><span class="op" id="6779709">(</span><span class="builtintype" id="6779710">true</span><span class="op" id="6779714">)</span><span class="op" id="6779715">)</span><span class="op" id="6779716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779720">}</span><span class="op" id="6779721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779727">r</span><span class="op" id="6779728">,</span>&nbsp;<span class="ident" id="6779730">_</span>&nbsp;<span class="op" id="6779732">:=</span>&nbsp;<span class="ident" id="6779735"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779739">.</span><span class="ident" id="6779740">NewRequest</span><span class="op" id="6779750">(</span><span class="string" id="6779751">&#34;GET&#34;</span><span class="op" id="6779756">,</span>&nbsp;<span class="string" id="6779758">&#34;http://foo.com/&#34;</span><span class="op" id="6779775">,</span>&nbsp;<span class="ident" id="6779777">nil</span><span class="op" id="6779780">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779783">for</span>&nbsp;<span class="ident" id="6779787">_</span><span class="op" id="6779788">,</span>&nbsp;<span class="ident" id="6779790">tt</span>&nbsp;<span class="op" id="6779793">:=</span>&nbsp;<span class="keyword" id="6779796">range</span>&nbsp;<span class="ident" id="6779802"><a href="/net/http/httptest/recorder_test.go.html#6778858">tests</a></span>&nbsp;<span class="op" id="6779808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779812">h</span>&nbsp;<span class="op" id="6779814">:=</span>&nbsp;<span class="ident" id="6779817"><a href="/net/http/httptest/recorder_test.go.html#6778052">http</a></span><span class="op" id="6779821">.</span><span class="ident" id="6779822">HandlerFunc</span><span class="op" id="6779833">(</span><span class="ident" id="6779834"><a href="/net/http/httptest/recorder_test.go.html#6779790">tt</a></span><span class="op" id="6779836">.</span><span class="ident" id="6779837">h</span><span class="op" id="6779838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779842">rec</span>&nbsp;<span class="op" id="6779846">:=</span>&nbsp;<span class="ident" id="6779849"><a href="/net/http/httptest/recorder.go.html#6296745">NewRecorder</a></span><span class="op" id="6779860">(</span><span class="op" id="6779861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779865"><a href="/net/http/httptest/recorder_test.go.html#6779812">h</a></span><span class="op" id="6779866">.</span><span class="ident" id="6779867">ServeHTTP</span><span class="op" id="6779876">(</span><span class="ident" id="6779877"><a href="/net/http/httptest/recorder_test.go.html#6779842">rec</a></span><span class="op" id="6779880">,</span>&nbsp;<span class="ident" id="6779882"><a href="/net/http/httptest/recorder_test.go.html#6779727">r</a></span><span class="op" id="6779883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779887">for</span>&nbsp;<span class="ident" id="6779891">_</span><span class="op" id="6779892">,</span>&nbsp;<span class="ident" id="6779894">check</span>&nbsp;<span class="op" id="6779900">:=</span>&nbsp;<span class="keyword" id="6779903">range</span>&nbsp;<span class="ident" id="6779909"><a href="/net/http/httptest/recorder_test.go.html#6779790">tt</a></span><span class="op" id="6779911">.</span><span class="ident" id="6779912">checks</span>&nbsp;<span class="op" id="6779919">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6779924">if</span>&nbsp;<span class="ident" id="6779927">err</span>&nbsp;<span class="op" id="6779931">:=</span>&nbsp;<span class="ident" id="6779934"><a href="/net/http/httptest/recorder_test.go.html#6779894">check</a></span><span class="op" id="6779939">(</span><span class="ident" id="6779940"><a href="/net/http/httptest/recorder_test.go.html#6779842">rec</a></span><span class="op" id="6779943">)</span><span class="op" id="6779944">;</span>&nbsp;<span class="ident" id="6779946"><a href="/net/http/httptest/recorder_test.go.html#6779927">err</a></span>&nbsp;<span class="op" id="6779950">!=</span>&nbsp;<span class="ident" id="6779953">nil</span>&nbsp;<span class="op" id="6779957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6779963"><a href="/net/http/httptest/recorder_test.go.html#6778095">t</a></span><span class="op" id="6779964">.</span><span class="ident" id="6779965">Errorf</span><span class="op" id="6779971">(</span><span class="string" id="6779972">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="6779980">,</span>&nbsp;<span class="ident" id="6779982"><a href="/net/http/httptest/recorder_test.go.html#6779790">tt</a></span><span class="op" id="6779984">.</span><span class="ident" id="6779985">name</span><span class="op" id="6779989">,</span>&nbsp;<span class="ident" id="6779991"><a href="/net/http/httptest/recorder_test.go.html#6779927">err</a></span><span class="op" id="6779994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6779999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6780003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6780006">}</span><br>
<span class="lineno">90</span><span class="op" id="6780008">}</span>
</div>
</body>
</html>
