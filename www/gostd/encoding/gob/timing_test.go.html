<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7726439">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7726494">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7726548">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7726599">package</span>&nbsp;<span class="ident" id="7726607">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726612">import</span>&nbsp;<span class="op" id="7726619">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7726622">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7726631">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7726637">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7726643">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7726654">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7726664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7726667">type</span>&nbsp;<span class="ident" id="7726672">Bench</span>&nbsp;<span class="keyword" id="7726678">struct</span>&nbsp;<span class="op" id="7726685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726688">A</span>&nbsp;<span class="builtintype" id="7726690">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726695">B</span>&nbsp;<span class="builtintype" id="7726697">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726706">C</span>&nbsp;<span class="builtintype" id="7726708">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726716">D</span>&nbsp;<span class="op" id="7726718">[</span><span class="op" id="7726719">]</span><span class="builtintype" id="7726720">byte</span><br>
<span class="lineno">20</span><span class="op" id="7726725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7726728">func</span>&nbsp;<span class="ident" id="7726733">benchmarkEndToEnd</span><span class="op" id="7726750">(</span><span class="ident" id="7726751">b</span>&nbsp;<span class="op" id="7726753">*</span><span class="ident" id="7726754">testing</span><span class="op" id="7726761">.</span><span class="ident" id="7726762">B</span><span class="op" id="7726763">,</span>&nbsp;<span class="ident" id="7726765">ctor</span>&nbsp;<span class="keyword" id="7726770">func</span><span class="op" id="7726774">(</span><span class="op" id="7726775">)</span>&nbsp;<span class="keyword" id="7726777">interface</span><span class="op" id="7726786">{</span><span class="op" id="7726787">}</span><span class="op" id="7726788">,</span>&nbsp;<span class="ident" id="7726790">pipe</span>&nbsp;<span class="keyword" id="7726795">func</span><span class="op" id="7726799">(</span><span class="op" id="7726800">)</span>&nbsp;<span class="op" id="7726802">(</span><span class="ident" id="7726803">r</span>&nbsp;<span class="ident" id="7726805">io</span><span class="op" id="7726807">.</span><span class="ident" id="7726808">Reader</span><span class="op" id="7726814">,</span>&nbsp;<span class="ident" id="7726816">w</span>&nbsp;<span class="ident" id="7726818">io</span><span class="op" id="7726820">.</span><span class="ident" id="7726821">Writer</span><span class="op" id="7726827">,</span>&nbsp;<span class="ident" id="7726829">err</span>&nbsp;<span class="builtintype" id="7726833">error</span><span class="op" id="7726838">)</span><span class="op" id="7726839">)</span>&nbsp;<span class="op" id="7726841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726844">b</span><span class="op" id="7726845">.</span><span class="ident" id="7726846">RunParallel</span><span class="op" id="7726857">(</span><span class="keyword" id="7726858">func</span><span class="op" id="7726862">(</span><span class="ident" id="7726863">pb</span>&nbsp;<span class="op" id="7726866">*</span><span class="ident" id="7726867">testing</span><span class="op" id="7726874">.</span><span class="ident" id="7726875">PB</span><span class="op" id="7726877">)</span>&nbsp;<span class="op" id="7726879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726883">r</span><span class="op" id="7726884">,</span>&nbsp;<span class="ident" id="7726886">w</span><span class="op" id="7726887">,</span>&nbsp;<span class="ident" id="7726889">err</span>&nbsp;<span class="op" id="7726893">:=</span>&nbsp;<span class="ident" id="7726896">pipe</span><span class="op" id="7726900">(</span><span class="op" id="7726901">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726905">if</span>&nbsp;<span class="ident" id="7726908">err</span>&nbsp;<span class="op" id="7726912">!=</span>&nbsp;<span class="ident" id="7726915">nil</span>&nbsp;<span class="op" id="7726919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726924">b</span><span class="op" id="7726925">.</span><span class="ident" id="7726926">Fatal</span><span class="op" id="7726931">(</span><span class="string" id="7726932">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="7726949">,</span>&nbsp;<span class="ident" id="7726951">err</span><span class="op" id="7726954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726962">v</span>&nbsp;<span class="op" id="7726964">:=</span>&nbsp;<span class="ident" id="7726967">ctor</span><span class="op" id="7726971">(</span><span class="op" id="7726972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726976">enc</span>&nbsp;<span class="op" id="7726980">:=</span>&nbsp;<span class="ident" id="7726983">NewEncoder</span><span class="op" id="7726993">(</span><span class="ident" id="7726994">w</span><span class="op" id="7726995">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726999">dec</span>&nbsp;<span class="op" id="7727003">:=</span>&nbsp;<span class="ident" id="7727006">NewDecoder</span><span class="op" id="7727016">(</span><span class="ident" id="7727017">r</span><span class="op" id="7727018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727022">for</span>&nbsp;<span class="ident" id="7727026">pb</span><span class="op" id="7727028">.</span><span class="ident" id="7727029">Next</span><span class="op" id="7727033">(</span><span class="op" id="7727034">)</span>&nbsp;<span class="op" id="7727036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727041">if</span>&nbsp;<span class="ident" id="7727044">err</span>&nbsp;<span class="op" id="7727048">:=</span>&nbsp;<span class="ident" id="7727051">enc</span><span class="op" id="7727054">.</span><span class="ident" id="7727055">Encode</span><span class="op" id="7727061">(</span><span class="ident" id="7727062">v</span><span class="op" id="7727063">)</span><span class="op" id="7727064">;</span>&nbsp;<span class="ident" id="7727066">err</span>&nbsp;<span class="op" id="7727070">!=</span>&nbsp;<span class="ident" id="7727073">nil</span>&nbsp;<span class="op" id="7727077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727083">b</span><span class="op" id="7727084">.</span><span class="ident" id="7727085">Fatal</span><span class="op" id="7727090">(</span><span class="string" id="7727091">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7727106">,</span>&nbsp;<span class="ident" id="7727108">err</span><span class="op" id="7727111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727116">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727121">if</span>&nbsp;<span class="ident" id="7727124">err</span>&nbsp;<span class="op" id="7727128">:=</span>&nbsp;<span class="ident" id="7727131">dec</span><span class="op" id="7727134">.</span><span class="ident" id="7727135">Decode</span><span class="op" id="7727141">(</span><span class="ident" id="7727142">v</span><span class="op" id="7727143">)</span><span class="op" id="7727144">;</span>&nbsp;<span class="ident" id="7727146">err</span>&nbsp;<span class="op" id="7727150">!=</span>&nbsp;<span class="ident" id="7727153">nil</span>&nbsp;<span class="op" id="7727157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727163">b</span><span class="op" id="7727164">.</span><span class="ident" id="7727165">Fatal</span><span class="op" id="7727170">(</span><span class="string" id="7727171">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7727186">,</span>&nbsp;<span class="ident" id="7727188">err</span><span class="op" id="7727191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727203">}</span><span class="op" id="7727204">)</span><br>
<span class="lineno">40</span><span class="op" id="7727206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7727209">func</span>&nbsp;<span class="ident" id="7727214">BenchmarkEndToEndPipe</span><span class="op" id="7727235">(</span><span class="ident" id="7727236">b</span>&nbsp;<span class="op" id="7727238">*</span><span class="ident" id="7727239">testing</span><span class="op" id="7727246">.</span><span class="ident" id="7727247">B</span><span class="op" id="7727248">)</span>&nbsp;<span class="op" id="7727250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727253">benchmarkEndToEnd</span><span class="op" id="7727270">(</span><span class="ident" id="7727271">b</span><span class="op" id="7727272">,</span>&nbsp;<span class="keyword" id="7727274">func</span><span class="op" id="7727278">(</span><span class="op" id="7727279">)</span>&nbsp;<span class="keyword" id="7727281">interface</span><span class="op" id="7727290">{</span><span class="op" id="7727291">}</span>&nbsp;<span class="op" id="7727293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727297">return</span>&nbsp;<span class="op" id="7727304">&amp;</span><span class="ident" id="7727305">Bench</span><span class="op" id="7727310">{</span><span class="num" id="7727311">7</span><span class="op" id="7727312">,</span>&nbsp;<span class="num" id="7727314">3.2</span><span class="op" id="7727317">,</span>&nbsp;<span class="string" id="7727319">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7727336">,</span>&nbsp;<span class="ident" id="7727338">bytes</span><span class="op" id="7727343">.</span><span class="ident" id="7727344">Repeat</span><span class="op" id="7727350">(</span><span class="op" id="7727351">[</span><span class="op" id="7727352">]</span><span class="builtintype" id="7727353">byte</span><span class="op" id="7727357">(</span><span class="string" id="7727358">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7727376">)</span><span class="op" id="7727377">,</span>&nbsp;<span class="num" id="7727379">100</span><span class="op" id="7727382">)</span><span class="op" id="7727383">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727386">}</span><span class="op" id="7727387">,</span>&nbsp;<span class="keyword" id="7727389">func</span><span class="op" id="7727393">(</span><span class="op" id="7727394">)</span>&nbsp;<span class="op" id="7727396">(</span><span class="ident" id="7727397">r</span>&nbsp;<span class="ident" id="7727399">io</span><span class="op" id="7727401">.</span><span class="ident" id="7727402">Reader</span><span class="op" id="7727408">,</span>&nbsp;<span class="ident" id="7727410">w</span>&nbsp;<span class="ident" id="7727412">io</span><span class="op" id="7727414">.</span><span class="ident" id="7727415">Writer</span><span class="op" id="7727421">,</span>&nbsp;<span class="ident" id="7727423">err</span>&nbsp;<span class="builtintype" id="7727427">error</span><span class="op" id="7727432">)</span>&nbsp;<span class="op" id="7727434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727438">r</span><span class="op" id="7727439">,</span>&nbsp;<span class="ident" id="7727441">w</span><span class="op" id="7727442">,</span>&nbsp;<span class="ident" id="7727444">err</span>&nbsp;<span class="op" id="7727448">=</span>&nbsp;<span class="ident" id="7727450">os</span><span class="op" id="7727452">.</span><span class="ident" id="7727453">Pipe</span><span class="op" id="7727457">(</span><span class="op" id="7727458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727462">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727470">}</span><span class="op" id="7727471">)</span><br>
<span class="lineno"></span><span class="op" id="7727473">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7727476">func</span>&nbsp;<span class="ident" id="7727481">BenchmarkEndToEndByteBuffer</span><span class="op" id="7727508">(</span><span class="ident" id="7727509">b</span>&nbsp;<span class="op" id="7727511">*</span><span class="ident" id="7727512">testing</span><span class="op" id="7727519">.</span><span class="ident" id="7727520">B</span><span class="op" id="7727521">)</span>&nbsp;<span class="op" id="7727523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727526">benchmarkEndToEnd</span><span class="op" id="7727543">(</span><span class="ident" id="7727544">b</span><span class="op" id="7727545">,</span>&nbsp;<span class="keyword" id="7727547">func</span><span class="op" id="7727551">(</span><span class="op" id="7727552">)</span>&nbsp;<span class="keyword" id="7727554">interface</span><span class="op" id="7727563">{</span><span class="op" id="7727564">}</span>&nbsp;<span class="op" id="7727566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727570">return</span>&nbsp;<span class="op" id="7727577">&amp;</span><span class="ident" id="7727578">Bench</span><span class="op" id="7727583">{</span><span class="num" id="7727584">7</span><span class="op" id="7727585">,</span>&nbsp;<span class="num" id="7727587">3.2</span><span class="op" id="7727590">,</span>&nbsp;<span class="string" id="7727592">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7727609">,</span>&nbsp;<span class="ident" id="7727611">bytes</span><span class="op" id="7727616">.</span><span class="ident" id="7727617">Repeat</span><span class="op" id="7727623">(</span><span class="op" id="7727624">[</span><span class="op" id="7727625">]</span><span class="builtintype" id="7727626">byte</span><span class="op" id="7727630">(</span><span class="string" id="7727631">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7727649">)</span><span class="op" id="7727650">,</span>&nbsp;<span class="num" id="7727652">100</span><span class="op" id="7727655">)</span><span class="op" id="7727656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727659">}</span><span class="op" id="7727660">,</span>&nbsp;<span class="keyword" id="7727662">func</span><span class="op" id="7727666">(</span><span class="op" id="7727667">)</span>&nbsp;<span class="op" id="7727669">(</span><span class="ident" id="7727670">r</span>&nbsp;<span class="ident" id="7727672">io</span><span class="op" id="7727674">.</span><span class="ident" id="7727675">Reader</span><span class="op" id="7727681">,</span>&nbsp;<span class="ident" id="7727683">w</span>&nbsp;<span class="ident" id="7727685">io</span><span class="op" id="7727687">.</span><span class="ident" id="7727688">Writer</span><span class="op" id="7727694">,</span>&nbsp;<span class="ident" id="7727696">err</span>&nbsp;<span class="builtintype" id="7727700">error</span><span class="op" id="7727705">)</span>&nbsp;<span class="op" id="7727707">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727711">var</span>&nbsp;<span class="ident" id="7727715">buf</span>&nbsp;<span class="ident" id="7727719">bytes</span><span class="op" id="7727724">.</span><span class="ident" id="7727725">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727734">return</span>&nbsp;<span class="op" id="7727741">&amp;</span><span class="ident" id="7727742">buf</span><span class="op" id="7727745">,</span>&nbsp;<span class="op" id="7727747">&amp;</span><span class="ident" id="7727748">buf</span><span class="op" id="7727751">,</span>&nbsp;<span class="ident" id="7727753">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727758">}</span><span class="op" id="7727759">)</span><br>
<span class="lineno"></span><span class="op" id="7727761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7727764">func</span>&nbsp;<span class="ident" id="7727769">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="7727801">(</span><span class="ident" id="7727802">b</span>&nbsp;<span class="op" id="7727804">*</span><span class="ident" id="7727805">testing</span><span class="op" id="7727812">.</span><span class="ident" id="7727813">B</span><span class="op" id="7727814">)</span>&nbsp;<span class="op" id="7727816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727819">benchmarkEndToEnd</span><span class="op" id="7727836">(</span><span class="ident" id="7727837">b</span><span class="op" id="7727838">,</span>&nbsp;<span class="keyword" id="7727840">func</span><span class="op" id="7727844">(</span><span class="op" id="7727845">)</span>&nbsp;<span class="keyword" id="7727847">interface</span><span class="op" id="7727856">{</span><span class="op" id="7727857">}</span>&nbsp;<span class="op" id="7727859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727863">v</span>&nbsp;<span class="op" id="7727865">:=</span>&nbsp;<span class="op" id="7727868">&amp;</span><span class="ident" id="7727869">Bench</span><span class="op" id="7727874">{</span><span class="num" id="7727875">7</span><span class="op" id="7727876">,</span>&nbsp;<span class="num" id="7727878">3.2</span><span class="op" id="7727881">,</span>&nbsp;<span class="string" id="7727883">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7727900">,</span>&nbsp;<span class="ident" id="7727902">nil</span><span class="op" id="7727905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727909">Register</span><span class="op" id="7727917">(</span><span class="ident" id="7727918">v</span><span class="op" id="7727919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727923">arr</span>&nbsp;<span class="op" id="7727927">:=</span>&nbsp;<span class="builtinfunc" id="7727930">make</span><span class="op" id="7727934">(</span><span class="op" id="7727935">[</span><span class="op" id="7727936">]</span><span class="keyword" id="7727937">interface</span><span class="op" id="7727946">{</span><span class="op" id="7727947">}</span><span class="op" id="7727948">,</span>&nbsp;<span class="num" id="7727950">100</span><span class="op" id="7727953">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727957">for</span>&nbsp;<span class="ident" id="7727961">i</span>&nbsp;<span class="op" id="7727963">:=</span>&nbsp;<span class="keyword" id="7727966">range</span>&nbsp;<span class="ident" id="7727972">arr</span>&nbsp;<span class="op" id="7727976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7727981">arr</span><span class="op" id="7727984">[</span><span class="ident" id="7727985">i</span><span class="op" id="7727986">]</span>&nbsp;<span class="op" id="7727988">=</span>&nbsp;<span class="ident" id="7727990">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7727994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7727998">return</span>&nbsp;<span class="op" id="7728005">&amp;</span><span class="ident" id="7728006">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728011">}</span><span class="op" id="7728012">,</span>&nbsp;<span class="keyword" id="7728014">func</span><span class="op" id="7728018">(</span><span class="op" id="7728019">)</span>&nbsp;<span class="op" id="7728021">(</span><span class="ident" id="7728022">r</span>&nbsp;<span class="ident" id="7728024">io</span><span class="op" id="7728026">.</span><span class="ident" id="7728027">Reader</span><span class="op" id="7728033">,</span>&nbsp;<span class="ident" id="7728035">w</span>&nbsp;<span class="ident" id="7728037">io</span><span class="op" id="7728039">.</span><span class="ident" id="7728040">Writer</span><span class="op" id="7728046">,</span>&nbsp;<span class="ident" id="7728048">err</span>&nbsp;<span class="builtintype" id="7728052">error</span><span class="op" id="7728057">)</span>&nbsp;<span class="op" id="7728059">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728063">var</span>&nbsp;<span class="ident" id="7728067">buf</span>&nbsp;<span class="ident" id="7728071">bytes</span><span class="op" id="7728076">.</span><span class="ident" id="7728077">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728086">return</span>&nbsp;<span class="op" id="7728093">&amp;</span><span class="ident" id="7728094">buf</span><span class="op" id="7728097">,</span>&nbsp;<span class="op" id="7728099">&amp;</span><span class="ident" id="7728100">buf</span><span class="op" id="7728103">,</span>&nbsp;<span class="ident" id="7728105">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728110">}</span><span class="op" id="7728111">)</span><br>
<span class="lineno"></span><span class="op" id="7728113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7728116">func</span>&nbsp;<span class="ident" id="7728121">TestCountEncodeMallocs</span><span class="op" id="7728143">(</span><span class="ident" id="7728144">t</span>&nbsp;<span class="op" id="7728146">*</span><span class="ident" id="7728147">testing</span><span class="op" id="7728154">.</span><span class="ident" id="7728155">T</span><span class="op" id="7728156">)</span>&nbsp;<span class="op" id="7728158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728161">if</span>&nbsp;<span class="ident" id="7728164">testing</span><span class="op" id="7728171">.</span><span class="ident" id="7728172">Short</span><span class="op" id="7728177">(</span><span class="op" id="7728178">)</span>&nbsp;<span class="op" id="7728180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728184">t</span><span class="op" id="7728185">.</span><span class="ident" id="7728186">Skip</span><span class="op" id="7728190">(</span><span class="string" id="7728191">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7728228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728234">if</span>&nbsp;<span class="ident" id="7728237">runtime</span><span class="op" id="7728244">.</span><span class="ident" id="7728245">GOMAXPROCS</span><span class="op" id="7728255">(</span><span class="num" id="7728256">0</span><span class="op" id="7728257">)</span>&nbsp;<span class="op" id="7728259">&gt;</span>&nbsp;<span class="num" id="7728261">1</span>&nbsp;<span class="op" id="7728263">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728267">t</span><span class="op" id="7728268">.</span><span class="ident" id="7728269">Skip</span><span class="op" id="7728273">(</span><span class="string" id="7728274">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7728298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728305">const</span>&nbsp;<span class="ident" id="7728311">N</span>&nbsp;<span class="op" id="7728313">=</span>&nbsp;<span class="num" id="7728315">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728322">var</span>&nbsp;<span class="ident" id="7728326">buf</span>&nbsp;<span class="ident" id="7728330">bytes</span><span class="op" id="7728335">.</span><span class="ident" id="7728336">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728344">enc</span>&nbsp;<span class="op" id="7728348">:=</span>&nbsp;<span class="ident" id="7728351">NewEncoder</span><span class="op" id="7728361">(</span><span class="op" id="7728362">&amp;</span><span class="ident" id="7728363">buf</span><span class="op" id="7728366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728369">bench</span>&nbsp;<span class="op" id="7728375">:=</span>&nbsp;<span class="op" id="7728378">&amp;</span><span class="ident" id="7728379">Bench</span><span class="op" id="7728384">{</span><span class="num" id="7728385">7</span><span class="op" id="7728386">,</span>&nbsp;<span class="num" id="7728388">3.2</span><span class="op" id="7728391">,</span>&nbsp;<span class="string" id="7728393">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7728410">,</span>&nbsp;<span class="op" id="7728412">[</span><span class="op" id="7728413">]</span><span class="builtintype" id="7728414">byte</span><span class="op" id="7728418">(</span><span class="string" id="7728419">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7728437">)</span><span class="op" id="7728438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728442">allocs</span>&nbsp;<span class="op" id="7728449">:=</span>&nbsp;<span class="ident" id="7728452">testing</span><span class="op" id="7728459">.</span><span class="ident" id="7728460">AllocsPerRun</span><span class="op" id="7728472">(</span><span class="ident" id="7728473">N</span><span class="op" id="7728474">,</span>&nbsp;<span class="keyword" id="7728476">func</span><span class="op" id="7728480">(</span><span class="op" id="7728481">)</span>&nbsp;<span class="op" id="7728483">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728487">err</span>&nbsp;<span class="op" id="7728491">:=</span>&nbsp;<span class="ident" id="7728494">enc</span><span class="op" id="7728497">.</span><span class="ident" id="7728498">Encode</span><span class="op" id="7728504">(</span><span class="ident" id="7728505">bench</span><span class="op" id="7728510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728514">if</span>&nbsp;<span class="ident" id="7728517">err</span>&nbsp;<span class="op" id="7728521">!=</span>&nbsp;<span class="ident" id="7728524">nil</span>&nbsp;<span class="op" id="7728528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728533">t</span><span class="op" id="7728534">.</span><span class="ident" id="7728535">Fatal</span><span class="op" id="7728540">(</span><span class="string" id="7728541">&#34;encode:&#34;</span><span class="op" id="7728550">,</span>&nbsp;<span class="ident" id="7728552">err</span><span class="op" id="7728555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728562">}</span><span class="op" id="7728563">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728566">if</span>&nbsp;<span class="ident" id="7728569">allocs</span>&nbsp;<span class="op" id="7728576">!=</span>&nbsp;<span class="num" id="7728579">0</span>&nbsp;<span class="op" id="7728581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728585">t</span><span class="op" id="7728586">.</span><span class="ident" id="7728587">Fatalf</span><span class="op" id="7728593">(</span><span class="string" id="7728594">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="7728644">,</span>&nbsp;<span class="ident" id="7728646">allocs</span><span class="op" id="7728652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728655">}</span><br>
<span class="lineno"></span><span class="op" id="7728657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7728660">func</span>&nbsp;<span class="ident" id="7728665">TestCountDecodeMallocs</span><span class="op" id="7728687">(</span><span class="ident" id="7728688">t</span>&nbsp;<span class="op" id="7728690">*</span><span class="ident" id="7728691">testing</span><span class="op" id="7728698">.</span><span class="ident" id="7728699">T</span><span class="op" id="7728700">)</span>&nbsp;<span class="op" id="7728702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728705">if</span>&nbsp;<span class="ident" id="7728708">testing</span><span class="op" id="7728715">.</span><span class="ident" id="7728716">Short</span><span class="op" id="7728721">(</span><span class="op" id="7728722">)</span>&nbsp;<span class="op" id="7728724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728728">t</span><span class="op" id="7728729">.</span><span class="ident" id="7728730">Skip</span><span class="op" id="7728734">(</span><span class="string" id="7728735">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7728772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728778">if</span>&nbsp;<span class="ident" id="7728781">runtime</span><span class="op" id="7728788">.</span><span class="ident" id="7728789">GOMAXPROCS</span><span class="op" id="7728799">(</span><span class="num" id="7728800">0</span><span class="op" id="7728801">)</span>&nbsp;<span class="op" id="7728803">&gt;</span>&nbsp;<span class="num" id="7728805">1</span>&nbsp;<span class="op" id="7728807">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728811">t</span><span class="op" id="7728812">.</span><span class="ident" id="7728813">Skip</span><span class="op" id="7728817">(</span><span class="string" id="7728818">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7728842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7728845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728849">const</span>&nbsp;<span class="ident" id="7728855">N</span>&nbsp;<span class="op" id="7728857">=</span>&nbsp;<span class="num" id="7728859">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7728866">var</span>&nbsp;<span class="ident" id="7728870">buf</span>&nbsp;<span class="ident" id="7728874">bytes</span><span class="op" id="7728879">.</span><span class="ident" id="7728880">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728888">enc</span>&nbsp;<span class="op" id="7728892">:=</span>&nbsp;<span class="ident" id="7728895">NewEncoder</span><span class="op" id="7728905">(</span><span class="op" id="7728906">&amp;</span><span class="ident" id="7728907">buf</span><span class="op" id="7728910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7728913">bench</span>&nbsp;<span class="op" id="7728919">:=</span>&nbsp;<span class="op" id="7728922">&amp;</span><span class="ident" id="7728923">Bench</span><span class="op" id="7728928">{</span><span class="num" id="7728929">7</span><span class="op" id="7728930">,</span>&nbsp;<span class="num" id="7728932">3.2</span><span class="op" id="7728935">,</span>&nbsp;<span class="string" id="7728937">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7728954">,</span>&nbsp;<span class="op" id="7728956">[</span><span class="op" id="7728957">]</span><span class="builtintype" id="7728958">byte</span><span class="op" id="7728962">(</span><span class="string" id="7728963">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7728981">)</span><span class="op" id="7728982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7728986">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729028">testing</span><span class="op" id="7729035">.</span><span class="ident" id="7729036">AllocsPerRun</span><span class="op" id="7729048">(</span><span class="ident" id="7729049">N</span><span class="op" id="7729050">,</span>&nbsp;<span class="keyword" id="7729052">func</span><span class="op" id="7729056">(</span><span class="op" id="7729057">)</span>&nbsp;<span class="op" id="7729059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729063">err</span>&nbsp;<span class="op" id="7729067">:=</span>&nbsp;<span class="ident" id="7729070">enc</span><span class="op" id="7729073">.</span><span class="ident" id="7729074">Encode</span><span class="op" id="7729080">(</span><span class="ident" id="7729081">bench</span><span class="op" id="7729086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729090">if</span>&nbsp;<span class="ident" id="7729093">err</span>&nbsp;<span class="op" id="7729097">!=</span>&nbsp;<span class="ident" id="7729100">nil</span>&nbsp;<span class="op" id="7729104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729109">t</span><span class="op" id="7729110">.</span><span class="ident" id="7729111">Fatal</span><span class="op" id="7729116">(</span><span class="string" id="7729117">&#34;encode:&#34;</span><span class="op" id="7729126">,</span>&nbsp;<span class="ident" id="7729128">err</span><span class="op" id="7729131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729135">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729138">}</span><span class="op" id="7729139">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729143">dec</span>&nbsp;<span class="op" id="7729147">:=</span>&nbsp;<span class="ident" id="7729150">NewDecoder</span><span class="op" id="7729160">(</span><span class="op" id="7729161">&amp;</span><span class="ident" id="7729162">buf</span><span class="op" id="7729165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729168">allocs</span>&nbsp;<span class="op" id="7729175">:=</span>&nbsp;<span class="ident" id="7729178">testing</span><span class="op" id="7729185">.</span><span class="ident" id="7729186">AllocsPerRun</span><span class="op" id="7729198">(</span><span class="ident" id="7729199">N</span><span class="op" id="7729200">,</span>&nbsp;<span class="keyword" id="7729202">func</span><span class="op" id="7729206">(</span><span class="op" id="7729207">)</span>&nbsp;<span class="op" id="7729209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729213">*</span><span class="ident" id="7729214">bench</span>&nbsp;<span class="op" id="7729220">=</span>&nbsp;<span class="ident" id="7729222">Bench</span><span class="op" id="7729227">{</span><span class="op" id="7729228">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729232">err</span>&nbsp;<span class="op" id="7729236">:=</span>&nbsp;<span class="ident" id="7729239">dec</span><span class="op" id="7729242">.</span><span class="ident" id="7729243">Decode</span><span class="op" id="7729249">(</span><span class="op" id="7729250">&amp;</span><span class="ident" id="7729251">bench</span><span class="op" id="7729256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729260">if</span>&nbsp;<span class="ident" id="7729263">err</span>&nbsp;<span class="op" id="7729267">!=</span>&nbsp;<span class="ident" id="7729270">nil</span>&nbsp;<span class="op" id="7729274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729279">t</span><span class="op" id="7729280">.</span><span class="ident" id="7729281">Fatal</span><span class="op" id="7729286">(</span><span class="string" id="7729287">&#34;decode:&#34;</span><span class="op" id="7729296">,</span>&nbsp;<span class="ident" id="7729298">err</span><span class="op" id="7729301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729308">}</span><span class="op" id="7729309">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729312">if</span>&nbsp;<span class="ident" id="7729315">allocs</span>&nbsp;<span class="op" id="7729322">!=</span>&nbsp;<span class="num" id="7729325">4</span>&nbsp;<span class="op" id="7729327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729331">t</span><span class="op" id="7729332">.</span><span class="ident" id="7729333">Fatalf</span><span class="op" id="7729339">(</span><span class="string" id="7729340">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="7729390">,</span>&nbsp;<span class="ident" id="7729392">allocs</span><span class="op" id="7729398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729401">}</span><br>
<span class="lineno"></span><span class="op" id="7729403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7729406">func</span>&nbsp;<span class="ident" id="7729411">BenchmarkEncodeComplex128Slice</span><span class="op" id="7729441">(</span><span class="ident" id="7729442">b</span>&nbsp;<span class="op" id="7729444">*</span><span class="ident" id="7729445">testing</span><span class="op" id="7729452">.</span><span class="ident" id="7729453">B</span><span class="op" id="7729454">)</span>&nbsp;<span class="op" id="7729456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729459">var</span>&nbsp;<span class="ident" id="7729463">buf</span>&nbsp;<span class="ident" id="7729467">bytes</span><span class="op" id="7729472">.</span><span class="ident" id="7729473">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729481">enc</span>&nbsp;<span class="op" id="7729485">:=</span>&nbsp;<span class="ident" id="7729488">NewEncoder</span><span class="op" id="7729498">(</span><span class="op" id="7729499">&amp;</span><span class="ident" id="7729500">buf</span><span class="op" id="7729503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729506">a</span>&nbsp;<span class="op" id="7729508">:=</span>&nbsp;<span class="builtinfunc" id="7729511">make</span><span class="op" id="7729515">(</span><span class="op" id="7729516">[</span><span class="op" id="7729517">]</span><span class="builtintype" id="7729518">complex128</span><span class="op" id="7729528">,</span>&nbsp;<span class="num" id="7729530">1000</span><span class="op" id="7729534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729537">for</span>&nbsp;<span class="ident" id="7729541">i</span>&nbsp;<span class="op" id="7729543">:=</span>&nbsp;<span class="keyword" id="7729546">range</span>&nbsp;<span class="ident" id="7729552">a</span>&nbsp;<span class="op" id="7729554">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729558">a</span><span class="op" id="7729559">[</span><span class="ident" id="7729560">i</span><span class="op" id="7729561">]</span>&nbsp;<span class="op" id="7729563">=</span>&nbsp;<span class="num" id="7729565">1.2</span>&nbsp;<span class="op" id="7729569">+</span>&nbsp;<span class="num" id="7729571">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729580">b</span><span class="op" id="7729581">.</span><span class="ident" id="7729582">ResetTimer</span><span class="op" id="7729592">(</span><span class="op" id="7729593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729596">for</span>&nbsp;<span class="ident" id="7729600">i</span>&nbsp;<span class="op" id="7729602">:=</span>&nbsp;<span class="num" id="7729605">0</span><span class="op" id="7729606">;</span>&nbsp;<span class="ident" id="7729608">i</span>&nbsp;<span class="op" id="7729610">&lt;</span>&nbsp;<span class="ident" id="7729612">b</span><span class="op" id="7729613">.</span><span class="ident" id="7729614">N</span><span class="op" id="7729615">;</span>&nbsp;<span class="ident" id="7729617">i</span><span class="op" id="7729618">++</span>&nbsp;<span class="op" id="7729621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729625">buf</span><span class="op" id="7729628">.</span><span class="ident" id="7729629">Reset</span><span class="op" id="7729634">(</span><span class="op" id="7729635">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729639">err</span>&nbsp;<span class="op" id="7729643">:=</span>&nbsp;<span class="ident" id="7729646">enc</span><span class="op" id="7729649">.</span><span class="ident" id="7729650">Encode</span><span class="op" id="7729656">(</span><span class="ident" id="7729657">a</span><span class="op" id="7729658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729662">if</span>&nbsp;<span class="ident" id="7729665">err</span>&nbsp;<span class="op" id="7729669">!=</span>&nbsp;<span class="ident" id="7729672">nil</span>&nbsp;<span class="op" id="7729676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729681">b</span><span class="op" id="7729682">.</span><span class="ident" id="7729683">Fatal</span><span class="op" id="7729688">(</span><span class="ident" id="7729689">err</span><span class="op" id="7729692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729699">}</span><br>
<span class="lineno">150</span><span class="op" id="7729701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7729704">func</span>&nbsp;<span class="ident" id="7729709">BenchmarkEncodeFloat64Slice</span><span class="op" id="7729736">(</span><span class="ident" id="7729737">b</span>&nbsp;<span class="op" id="7729739">*</span><span class="ident" id="7729740">testing</span><span class="op" id="7729747">.</span><span class="ident" id="7729748">B</span><span class="op" id="7729749">)</span>&nbsp;<span class="op" id="7729751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729754">var</span>&nbsp;<span class="ident" id="7729758">buf</span>&nbsp;<span class="ident" id="7729762">bytes</span><span class="op" id="7729767">.</span><span class="ident" id="7729768">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729776">enc</span>&nbsp;<span class="op" id="7729780">:=</span>&nbsp;<span class="ident" id="7729783">NewEncoder</span><span class="op" id="7729793">(</span><span class="op" id="7729794">&amp;</span><span class="ident" id="7729795">buf</span><span class="op" id="7729798">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729801">a</span>&nbsp;<span class="op" id="7729803">:=</span>&nbsp;<span class="builtinfunc" id="7729806">make</span><span class="op" id="7729810">(</span><span class="op" id="7729811">[</span><span class="op" id="7729812">]</span><span class="builtintype" id="7729813">float64</span><span class="op" id="7729820">,</span>&nbsp;<span class="num" id="7729822">1000</span><span class="op" id="7729826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729829">for</span>&nbsp;<span class="ident" id="7729833">i</span>&nbsp;<span class="op" id="7729835">:=</span>&nbsp;<span class="keyword" id="7729838">range</span>&nbsp;<span class="ident" id="7729844">a</span>&nbsp;<span class="op" id="7729846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729850">a</span><span class="op" id="7729851">[</span><span class="ident" id="7729852">i</span><span class="op" id="7729853">]</span>&nbsp;<span class="op" id="7729855">=</span>&nbsp;<span class="num" id="7729857">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729868">b</span><span class="op" id="7729869">.</span><span class="ident" id="7729870">ResetTimer</span><span class="op" id="7729880">(</span><span class="op" id="7729881">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729884">for</span>&nbsp;<span class="ident" id="7729888">i</span>&nbsp;<span class="op" id="7729890">:=</span>&nbsp;<span class="num" id="7729893">0</span><span class="op" id="7729894">;</span>&nbsp;<span class="ident" id="7729896">i</span>&nbsp;<span class="op" id="7729898">&lt;</span>&nbsp;<span class="ident" id="7729900">b</span><span class="op" id="7729901">.</span><span class="ident" id="7729902">N</span><span class="op" id="7729903">;</span>&nbsp;<span class="ident" id="7729905">i</span><span class="op" id="7729906">++</span>&nbsp;<span class="op" id="7729909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729913">buf</span><span class="op" id="7729916">.</span><span class="ident" id="7729917">Reset</span><span class="op" id="7729922">(</span><span class="op" id="7729923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729927">err</span>&nbsp;<span class="op" id="7729931">:=</span>&nbsp;<span class="ident" id="7729934">enc</span><span class="op" id="7729937">.</span><span class="ident" id="7729938">Encode</span><span class="op" id="7729944">(</span><span class="ident" id="7729945">a</span><span class="op" id="7729946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7729950">if</span>&nbsp;<span class="ident" id="7729953">err</span>&nbsp;<span class="op" id="7729957">!=</span>&nbsp;<span class="ident" id="7729960">nil</span>&nbsp;<span class="op" id="7729964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7729969">b</span><span class="op" id="7729970">.</span><span class="ident" id="7729971">Fatal</span><span class="op" id="7729976">(</span><span class="ident" id="7729977">err</span><span class="op" id="7729980">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7729987">}</span><br>
<span class="lineno"></span><span class="op" id="7729989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7729992">func</span>&nbsp;<span class="ident" id="7729997">BenchmarkEncodeInt32Slice</span><span class="op" id="7730022">(</span><span class="ident" id="7730023">b</span>&nbsp;<span class="op" id="7730025">*</span><span class="ident" id="7730026">testing</span><span class="op" id="7730033">.</span><span class="ident" id="7730034">B</span><span class="op" id="7730035">)</span>&nbsp;<span class="op" id="7730037">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730040">var</span>&nbsp;<span class="ident" id="7730044">buf</span>&nbsp;<span class="ident" id="7730048">bytes</span><span class="op" id="7730053">.</span><span class="ident" id="7730054">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730062">enc</span>&nbsp;<span class="op" id="7730066">:=</span>&nbsp;<span class="ident" id="7730069">NewEncoder</span><span class="op" id="7730079">(</span><span class="op" id="7730080">&amp;</span><span class="ident" id="7730081">buf</span><span class="op" id="7730084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730087">a</span>&nbsp;<span class="op" id="7730089">:=</span>&nbsp;<span class="builtinfunc" id="7730092">make</span><span class="op" id="7730096">(</span><span class="op" id="7730097">[</span><span class="op" id="7730098">]</span><span class="builtintype" id="7730099">int32</span><span class="op" id="7730104">,</span>&nbsp;<span class="num" id="7730106">1000</span><span class="op" id="7730110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730113">for</span>&nbsp;<span class="ident" id="7730117">i</span>&nbsp;<span class="op" id="7730119">:=</span>&nbsp;<span class="keyword" id="7730122">range</span>&nbsp;<span class="ident" id="7730128">a</span>&nbsp;<span class="op" id="7730130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730134">a</span><span class="op" id="7730135">[</span><span class="ident" id="7730136">i</span><span class="op" id="7730137">]</span>&nbsp;<span class="op" id="7730139">=</span>&nbsp;<span class="num" id="7730141">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730150">b</span><span class="op" id="7730151">.</span><span class="ident" id="7730152">ResetTimer</span><span class="op" id="7730162">(</span><span class="op" id="7730163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730166">for</span>&nbsp;<span class="ident" id="7730170">i</span>&nbsp;<span class="op" id="7730172">:=</span>&nbsp;<span class="num" id="7730175">0</span><span class="op" id="7730176">;</span>&nbsp;<span class="ident" id="7730178">i</span>&nbsp;<span class="op" id="7730180">&lt;</span>&nbsp;<span class="ident" id="7730182">b</span><span class="op" id="7730183">.</span><span class="ident" id="7730184">N</span><span class="op" id="7730185">;</span>&nbsp;<span class="ident" id="7730187">i</span><span class="op" id="7730188">++</span>&nbsp;<span class="op" id="7730191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730195">buf</span><span class="op" id="7730198">.</span><span class="ident" id="7730199">Reset</span><span class="op" id="7730204">(</span><span class="op" id="7730205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730209">err</span>&nbsp;<span class="op" id="7730213">:=</span>&nbsp;<span class="ident" id="7730216">enc</span><span class="op" id="7730219">.</span><span class="ident" id="7730220">Encode</span><span class="op" id="7730226">(</span><span class="ident" id="7730227">a</span><span class="op" id="7730228">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730232">if</span>&nbsp;<span class="ident" id="7730235">err</span>&nbsp;<span class="op" id="7730239">!=</span>&nbsp;<span class="ident" id="7730242">nil</span>&nbsp;<span class="op" id="7730246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730251">b</span><span class="op" id="7730252">.</span><span class="ident" id="7730253">Fatal</span><span class="op" id="7730258">(</span><span class="ident" id="7730259">err</span><span class="op" id="7730262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730269">}</span><br>
<span class="lineno"></span><span class="op" id="7730271">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7730274">func</span>&nbsp;<span class="ident" id="7730279">BenchmarkEncodeStringSlice</span><span class="op" id="7730305">(</span><span class="ident" id="7730306">b</span>&nbsp;<span class="op" id="7730308">*</span><span class="ident" id="7730309">testing</span><span class="op" id="7730316">.</span><span class="ident" id="7730317">B</span><span class="op" id="7730318">)</span>&nbsp;<span class="op" id="7730320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730323">var</span>&nbsp;<span class="ident" id="7730327">buf</span>&nbsp;<span class="ident" id="7730331">bytes</span><span class="op" id="7730336">.</span><span class="ident" id="7730337">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730345">enc</span>&nbsp;<span class="op" id="7730349">:=</span>&nbsp;<span class="ident" id="7730352">NewEncoder</span><span class="op" id="7730362">(</span><span class="op" id="7730363">&amp;</span><span class="ident" id="7730364">buf</span><span class="op" id="7730367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730370">a</span>&nbsp;<span class="op" id="7730372">:=</span>&nbsp;<span class="builtinfunc" id="7730375">make</span><span class="op" id="7730379">(</span><span class="op" id="7730380">[</span><span class="op" id="7730381">]</span><span class="builtintype" id="7730382">string</span><span class="op" id="7730388">,</span>&nbsp;<span class="num" id="7730390">1000</span><span class="op" id="7730394">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730397">for</span>&nbsp;<span class="ident" id="7730401">i</span>&nbsp;<span class="op" id="7730403">:=</span>&nbsp;<span class="keyword" id="7730406">range</span>&nbsp;<span class="ident" id="7730412">a</span>&nbsp;<span class="op" id="7730414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730418">a</span><span class="op" id="7730419">[</span><span class="ident" id="7730420">i</span><span class="op" id="7730421">]</span>&nbsp;<span class="op" id="7730423">=</span>&nbsp;<span class="string" id="7730425">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730447">b</span><span class="op" id="7730448">.</span><span class="ident" id="7730449">ResetTimer</span><span class="op" id="7730459">(</span><span class="op" id="7730460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730463">for</span>&nbsp;<span class="ident" id="7730467">i</span>&nbsp;<span class="op" id="7730469">:=</span>&nbsp;<span class="num" id="7730472">0</span><span class="op" id="7730473">;</span>&nbsp;<span class="ident" id="7730475">i</span>&nbsp;<span class="op" id="7730477">&lt;</span>&nbsp;<span class="ident" id="7730479">b</span><span class="op" id="7730480">.</span><span class="ident" id="7730481">N</span><span class="op" id="7730482">;</span>&nbsp;<span class="ident" id="7730484">i</span><span class="op" id="7730485">++</span>&nbsp;<span class="op" id="7730488">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730492">buf</span><span class="op" id="7730495">.</span><span class="ident" id="7730496">Reset</span><span class="op" id="7730501">(</span><span class="op" id="7730502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730506">err</span>&nbsp;<span class="op" id="7730510">:=</span>&nbsp;<span class="ident" id="7730513">enc</span><span class="op" id="7730516">.</span><span class="ident" id="7730517">Encode</span><span class="op" id="7730523">(</span><span class="ident" id="7730524">a</span><span class="op" id="7730525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730529">if</span>&nbsp;<span class="ident" id="7730532">err</span>&nbsp;<span class="op" id="7730536">!=</span>&nbsp;<span class="ident" id="7730539">nil</span>&nbsp;<span class="op" id="7730543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730548">b</span><span class="op" id="7730549">.</span><span class="ident" id="7730550">Fatal</span><span class="op" id="7730555">(</span><span class="ident" id="7730556">err</span><span class="op" id="7730559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730563">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730566">}</span><br>
<span class="lineno"></span><span class="op" id="7730568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7730571">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="7730617">type</span>&nbsp;<span class="ident" id="7730622">benchmarkBuf</span>&nbsp;<span class="keyword" id="7730635">struct</span>&nbsp;<span class="op" id="7730642">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730645">offset</span>&nbsp;<span class="builtintype" id="7730652">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730657">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7730664">[</span><span class="op" id="7730665">]</span><span class="builtintype" id="7730666">byte</span><br>
<span class="lineno"></span><span class="op" id="7730671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7730674">func</span>&nbsp;<span class="op" id="7730679">(</span><span class="ident" id="7730680">b</span>&nbsp;<span class="op" id="7730682">*</span><span class="ident" id="7730683">benchmarkBuf</span><span class="op" id="7730695">)</span>&nbsp;<span class="ident" id="7730697">Read</span><span class="op" id="7730701">(</span><span class="ident" id="7730702">p</span>&nbsp;<span class="op" id="7730704">[</span><span class="op" id="7730705">]</span><span class="builtintype" id="7730706">byte</span><span class="op" id="7730710">)</span>&nbsp;<span class="op" id="7730712">(</span><span class="ident" id="7730713">n</span>&nbsp;<span class="builtintype" id="7730715">int</span><span class="op" id="7730718">,</span>&nbsp;<span class="ident" id="7730720">err</span>&nbsp;<span class="builtintype" id="7730724">error</span><span class="op" id="7730729">)</span>&nbsp;<span class="op" id="7730731">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730734">n</span>&nbsp;<span class="op" id="7730736">=</span>&nbsp;<span class="builtinfunc" id="7730738">copy</span><span class="op" id="7730742">(</span><span class="ident" id="7730743">p</span><span class="op" id="7730744">,</span>&nbsp;<span class="ident" id="7730746">b</span><span class="op" id="7730747">.</span><span class="ident" id="7730748">data</span><span class="op" id="7730752">[</span><span class="ident" id="7730753">b</span><span class="op" id="7730754">.</span><span class="ident" id="7730755">offset</span><span class="op" id="7730761">:</span><span class="op" id="7730762">]</span><span class="op" id="7730763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730766">if</span>&nbsp;<span class="ident" id="7730769">n</span>&nbsp;<span class="op" id="7730771">==</span>&nbsp;<span class="num" id="7730774">0</span>&nbsp;<span class="op" id="7730776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730780">return</span>&nbsp;<span class="num" id="7730787">0</span><span class="op" id="7730788">,</span>&nbsp;<span class="ident" id="7730790">io</span><span class="op" id="7730792">.</span><span class="ident" id="7730793">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730801">b</span><span class="op" id="7730802">.</span><span class="ident" id="7730803">offset</span>&nbsp;<span class="op" id="7730810">+=</span>&nbsp;<span class="ident" id="7730813">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730816">return</span><br>
<span class="lineno"></span><span class="op" id="7730823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7730826">func</span>&nbsp;<span class="op" id="7730831">(</span><span class="ident" id="7730832">b</span>&nbsp;<span class="op" id="7730834">*</span><span class="ident" id="7730835">benchmarkBuf</span><span class="op" id="7730847">)</span>&nbsp;<span class="ident" id="7730849">ReadByte</span><span class="op" id="7730857">(</span><span class="op" id="7730858">)</span>&nbsp;<span class="op" id="7730860">(</span><span class="ident" id="7730861">c</span>&nbsp;<span class="builtintype" id="7730863">byte</span><span class="op" id="7730867">,</span>&nbsp;<span class="ident" id="7730869">err</span>&nbsp;<span class="builtintype" id="7730873">error</span><span class="op" id="7730878">)</span>&nbsp;<span class="op" id="7730880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730883">if</span>&nbsp;<span class="ident" id="7730886">b</span><span class="op" id="7730887">.</span><span class="ident" id="7730888">offset</span>&nbsp;<span class="op" id="7730895">&gt;=</span>&nbsp;<span class="builtinfunc" id="7730898">len</span><span class="op" id="7730901">(</span><span class="ident" id="7730902">b</span><span class="op" id="7730903">.</span><span class="ident" id="7730904">data</span><span class="op" id="7730908">)</span>&nbsp;<span class="op" id="7730910">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730914">return</span>&nbsp;<span class="num" id="7730921">0</span><span class="op" id="7730922">,</span>&nbsp;<span class="ident" id="7730924">io</span><span class="op" id="7730926">.</span><span class="ident" id="7730927">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7730932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730935">c</span>&nbsp;<span class="op" id="7730937">=</span>&nbsp;<span class="ident" id="7730939">b</span><span class="op" id="7730940">.</span><span class="ident" id="7730941">data</span><span class="op" id="7730945">[</span><span class="ident" id="7730946">b</span><span class="op" id="7730947">.</span><span class="ident" id="7730948">offset</span><span class="op" id="7730954">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7730957">b</span><span class="op" id="7730958">.</span><span class="ident" id="7730959">offset</span><span class="op" id="7730965">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7730969">return</span><br>
<span class="lineno">225</span><span class="op" id="7730976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7730979">func</span>&nbsp;<span class="op" id="7730984">(</span><span class="ident" id="7730985">b</span>&nbsp;<span class="op" id="7730987">*</span><span class="ident" id="7730988">benchmarkBuf</span><span class="op" id="7731000">)</span>&nbsp;<span class="ident" id="7731002">reset</span><span class="op" id="7731007">(</span><span class="op" id="7731008">)</span>&nbsp;<span class="op" id="7731010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731013">b</span><span class="op" id="7731014">.</span><span class="ident" id="7731015">offset</span>&nbsp;<span class="op" id="7731022">=</span>&nbsp;<span class="num" id="7731024">0</span><br>
<span class="lineno"></span><span class="op" id="7731026">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7731029">func</span>&nbsp;<span class="ident" id="7731034">BenchmarkDecodeComplex128Slice</span><span class="op" id="7731064">(</span><span class="ident" id="7731065">b</span>&nbsp;<span class="op" id="7731067">*</span><span class="ident" id="7731068">testing</span><span class="op" id="7731075">.</span><span class="ident" id="7731076">B</span><span class="op" id="7731077">)</span>&nbsp;<span class="op" id="7731079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731082">var</span>&nbsp;<span class="ident" id="7731086">buf</span>&nbsp;<span class="ident" id="7731090">bytes</span><span class="op" id="7731095">.</span><span class="ident" id="7731096">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731104">enc</span>&nbsp;<span class="op" id="7731108">:=</span>&nbsp;<span class="ident" id="7731111">NewEncoder</span><span class="op" id="7731121">(</span><span class="op" id="7731122">&amp;</span><span class="ident" id="7731123">buf</span><span class="op" id="7731126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731129">a</span>&nbsp;<span class="op" id="7731131">:=</span>&nbsp;<span class="builtinfunc" id="7731134">make</span><span class="op" id="7731138">(</span><span class="op" id="7731139">[</span><span class="op" id="7731140">]</span><span class="builtintype" id="7731141">complex128</span><span class="op" id="7731151">,</span>&nbsp;<span class="num" id="7731153">1000</span><span class="op" id="7731157">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731160">for</span>&nbsp;<span class="ident" id="7731164">i</span>&nbsp;<span class="op" id="7731166">:=</span>&nbsp;<span class="keyword" id="7731169">range</span>&nbsp;<span class="ident" id="7731175">a</span>&nbsp;<span class="op" id="7731177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731181">a</span><span class="op" id="7731182">[</span><span class="ident" id="7731183">i</span><span class="op" id="7731184">]</span>&nbsp;<span class="op" id="7731186">=</span>&nbsp;<span class="num" id="7731188">1.2</span>&nbsp;<span class="op" id="7731192">+</span>&nbsp;<span class="num" id="7731194">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731203">err</span>&nbsp;<span class="op" id="7731207">:=</span>&nbsp;<span class="ident" id="7731210">enc</span><span class="op" id="7731213">.</span><span class="ident" id="7731214">Encode</span><span class="op" id="7731220">(</span><span class="ident" id="7731221">a</span><span class="op" id="7731222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731225">if</span>&nbsp;<span class="ident" id="7731228">err</span>&nbsp;<span class="op" id="7731232">!=</span>&nbsp;<span class="ident" id="7731235">nil</span>&nbsp;<span class="op" id="7731239">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731243">b</span><span class="op" id="7731244">.</span><span class="ident" id="7731245">Fatal</span><span class="op" id="7731250">(</span><span class="ident" id="7731251">err</span><span class="op" id="7731254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731260">x</span>&nbsp;<span class="op" id="7731262">:=</span>&nbsp;<span class="builtinfunc" id="7731265">make</span><span class="op" id="7731269">(</span><span class="op" id="7731270">[</span><span class="op" id="7731271">]</span><span class="builtintype" id="7731272">complex128</span><span class="op" id="7731282">,</span>&nbsp;<span class="num" id="7731284">1000</span><span class="op" id="7731288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731291">bbuf</span>&nbsp;<span class="op" id="7731296">:=</span>&nbsp;<span class="ident" id="7731299">benchmarkBuf</span><span class="op" id="7731311">{</span><span class="ident" id="7731312">data</span><span class="op" id="7731316">:</span>&nbsp;<span class="ident" id="7731318">buf</span><span class="op" id="7731321">.</span><span class="ident" id="7731322">Bytes</span><span class="op" id="7731327">(</span><span class="op" id="7731328">)</span><span class="op" id="7731329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731332">b</span><span class="op" id="7731333">.</span><span class="ident" id="7731334">ResetTimer</span><span class="op" id="7731344">(</span><span class="op" id="7731345">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731348">for</span>&nbsp;<span class="ident" id="7731352">i</span>&nbsp;<span class="op" id="7731354">:=</span>&nbsp;<span class="num" id="7731357">0</span><span class="op" id="7731358">;</span>&nbsp;<span class="ident" id="7731360">i</span>&nbsp;<span class="op" id="7731362">&lt;</span>&nbsp;<span class="ident" id="7731364">b</span><span class="op" id="7731365">.</span><span class="ident" id="7731366">N</span><span class="op" id="7731367">;</span>&nbsp;<span class="ident" id="7731369">i</span><span class="op" id="7731370">++</span>&nbsp;<span class="op" id="7731373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731377">bbuf</span><span class="op" id="7731381">.</span><span class="ident" id="7731382">reset</span><span class="op" id="7731387">(</span><span class="op" id="7731388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731392">dec</span>&nbsp;<span class="op" id="7731396">:=</span>&nbsp;<span class="ident" id="7731399">NewDecoder</span><span class="op" id="7731409">(</span><span class="op" id="7731410">&amp;</span><span class="ident" id="7731411">bbuf</span><span class="op" id="7731415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731419">err</span>&nbsp;<span class="op" id="7731423">:=</span>&nbsp;<span class="ident" id="7731426">dec</span><span class="op" id="7731429">.</span><span class="ident" id="7731430">Decode</span><span class="op" id="7731436">(</span><span class="op" id="7731437">&amp;</span><span class="ident" id="7731438">x</span><span class="op" id="7731439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731443">if</span>&nbsp;<span class="ident" id="7731446">err</span>&nbsp;<span class="op" id="7731450">!=</span>&nbsp;<span class="ident" id="7731453">nil</span>&nbsp;<span class="op" id="7731457">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731462">b</span><span class="op" id="7731463">.</span><span class="ident" id="7731464">Fatal</span><span class="op" id="7731469">(</span><span class="ident" id="7731470">i</span><span class="op" id="7731471">,</span>&nbsp;<span class="ident" id="7731473">err</span><span class="op" id="7731476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731483">}</span><br>
<span class="lineno"></span><span class="op" id="7731485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7731488">func</span>&nbsp;<span class="ident" id="7731493">BenchmarkDecodeFloat64Slice</span><span class="op" id="7731520">(</span><span class="ident" id="7731521">b</span>&nbsp;<span class="op" id="7731523">*</span><span class="ident" id="7731524">testing</span><span class="op" id="7731531">.</span><span class="ident" id="7731532">B</span><span class="op" id="7731533">)</span>&nbsp;<span class="op" id="7731535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731538">var</span>&nbsp;<span class="ident" id="7731542">buf</span>&nbsp;<span class="ident" id="7731546">bytes</span><span class="op" id="7731551">.</span><span class="ident" id="7731552">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731560">enc</span>&nbsp;<span class="op" id="7731564">:=</span>&nbsp;<span class="ident" id="7731567">NewEncoder</span><span class="op" id="7731577">(</span><span class="op" id="7731578">&amp;</span><span class="ident" id="7731579">buf</span><span class="op" id="7731582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731585">a</span>&nbsp;<span class="op" id="7731587">:=</span>&nbsp;<span class="builtinfunc" id="7731590">make</span><span class="op" id="7731594">(</span><span class="op" id="7731595">[</span><span class="op" id="7731596">]</span><span class="builtintype" id="7731597">float64</span><span class="op" id="7731604">,</span>&nbsp;<span class="num" id="7731606">1000</span><span class="op" id="7731610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731613">for</span>&nbsp;<span class="ident" id="7731617">i</span>&nbsp;<span class="op" id="7731619">:=</span>&nbsp;<span class="keyword" id="7731622">range</span>&nbsp;<span class="ident" id="7731628">a</span>&nbsp;<span class="op" id="7731630">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731634">a</span><span class="op" id="7731635">[</span><span class="ident" id="7731636">i</span><span class="op" id="7731637">]</span>&nbsp;<span class="op" id="7731639">=</span>&nbsp;<span class="num" id="7731641">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731652">err</span>&nbsp;<span class="op" id="7731656">:=</span>&nbsp;<span class="ident" id="7731659">enc</span><span class="op" id="7731662">.</span><span class="ident" id="7731663">Encode</span><span class="op" id="7731669">(</span><span class="ident" id="7731670">a</span><span class="op" id="7731671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731674">if</span>&nbsp;<span class="ident" id="7731677">err</span>&nbsp;<span class="op" id="7731681">!=</span>&nbsp;<span class="ident" id="7731684">nil</span>&nbsp;<span class="op" id="7731688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731692">b</span><span class="op" id="7731693">.</span><span class="ident" id="7731694">Fatal</span><span class="op" id="7731699">(</span><span class="ident" id="7731700">err</span><span class="op" id="7731703">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731709">x</span>&nbsp;<span class="op" id="7731711">:=</span>&nbsp;<span class="builtinfunc" id="7731714">make</span><span class="op" id="7731718">(</span><span class="op" id="7731719">[</span><span class="op" id="7731720">]</span><span class="builtintype" id="7731721">float64</span><span class="op" id="7731728">,</span>&nbsp;<span class="num" id="7731730">1000</span><span class="op" id="7731734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731737">bbuf</span>&nbsp;<span class="op" id="7731742">:=</span>&nbsp;<span class="ident" id="7731745">benchmarkBuf</span><span class="op" id="7731757">{</span><span class="ident" id="7731758">data</span><span class="op" id="7731762">:</span>&nbsp;<span class="ident" id="7731764">buf</span><span class="op" id="7731767">.</span><span class="ident" id="7731768">Bytes</span><span class="op" id="7731773">(</span><span class="op" id="7731774">)</span><span class="op" id="7731775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731778">b</span><span class="op" id="7731779">.</span><span class="ident" id="7731780">ResetTimer</span><span class="op" id="7731790">(</span><span class="op" id="7731791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731794">for</span>&nbsp;<span class="ident" id="7731798">i</span>&nbsp;<span class="op" id="7731800">:=</span>&nbsp;<span class="num" id="7731803">0</span><span class="op" id="7731804">;</span>&nbsp;<span class="ident" id="7731806">i</span>&nbsp;<span class="op" id="7731808">&lt;</span>&nbsp;<span class="ident" id="7731810">b</span><span class="op" id="7731811">.</span><span class="ident" id="7731812">N</span><span class="op" id="7731813">;</span>&nbsp;<span class="ident" id="7731815">i</span><span class="op" id="7731816">++</span>&nbsp;<span class="op" id="7731819">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731823">bbuf</span><span class="op" id="7731827">.</span><span class="ident" id="7731828">reset</span><span class="op" id="7731833">(</span><span class="op" id="7731834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731838">dec</span>&nbsp;<span class="op" id="7731842">:=</span>&nbsp;<span class="ident" id="7731845">NewDecoder</span><span class="op" id="7731855">(</span><span class="op" id="7731856">&amp;</span><span class="ident" id="7731857">bbuf</span><span class="op" id="7731861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731865">err</span>&nbsp;<span class="op" id="7731869">:=</span>&nbsp;<span class="ident" id="7731872">dec</span><span class="op" id="7731875">.</span><span class="ident" id="7731876">Decode</span><span class="op" id="7731882">(</span><span class="op" id="7731883">&amp;</span><span class="ident" id="7731884">x</span><span class="op" id="7731885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731889">if</span>&nbsp;<span class="ident" id="7731892">err</span>&nbsp;<span class="op" id="7731896">!=</span>&nbsp;<span class="ident" id="7731899">nil</span>&nbsp;<span class="op" id="7731903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7731908">b</span><span class="op" id="7731909">.</span><span class="ident" id="7731910">Fatal</span><span class="op" id="7731915">(</span><span class="ident" id="7731916">i</span><span class="op" id="7731917">,</span>&nbsp;<span class="ident" id="7731919">err</span><span class="op" id="7731922">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7731929">}</span><br>
<span class="lineno"></span><span class="op" id="7731931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7731934">func</span>&nbsp;<span class="ident" id="7731939">BenchmarkDecodeInt32Slice</span><span class="op" id="7731964">(</span><span class="ident" id="7731965">b</span>&nbsp;<span class="op" id="7731967">*</span><span class="ident" id="7731968">testing</span><span class="op" id="7731975">.</span><span class="ident" id="7731976">B</span><span class="op" id="7731977">)</span>&nbsp;<span class="op" id="7731979">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7731982">var</span>&nbsp;<span class="ident" id="7731986">buf</span>&nbsp;<span class="ident" id="7731990">bytes</span><span class="op" id="7731995">.</span><span class="ident" id="7731996">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732004">enc</span>&nbsp;<span class="op" id="7732008">:=</span>&nbsp;<span class="ident" id="7732011">NewEncoder</span><span class="op" id="7732021">(</span><span class="op" id="7732022">&amp;</span><span class="ident" id="7732023">buf</span><span class="op" id="7732026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732029">a</span>&nbsp;<span class="op" id="7732031">:=</span>&nbsp;<span class="builtinfunc" id="7732034">make</span><span class="op" id="7732038">(</span><span class="op" id="7732039">[</span><span class="op" id="7732040">]</span><span class="builtintype" id="7732041">int32</span><span class="op" id="7732046">,</span>&nbsp;<span class="num" id="7732048">1000</span><span class="op" id="7732052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732055">for</span>&nbsp;<span class="ident" id="7732059">i</span>&nbsp;<span class="op" id="7732061">:=</span>&nbsp;<span class="keyword" id="7732064">range</span>&nbsp;<span class="ident" id="7732070">a</span>&nbsp;<span class="op" id="7732072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732076">a</span><span class="op" id="7732077">[</span><span class="ident" id="7732078">i</span><span class="op" id="7732079">]</span>&nbsp;<span class="op" id="7732081">=</span>&nbsp;<span class="num" id="7732083">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732092">err</span>&nbsp;<span class="op" id="7732096">:=</span>&nbsp;<span class="ident" id="7732099">enc</span><span class="op" id="7732102">.</span><span class="ident" id="7732103">Encode</span><span class="op" id="7732109">(</span><span class="ident" id="7732110">a</span><span class="op" id="7732111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732114">if</span>&nbsp;<span class="ident" id="7732117">err</span>&nbsp;<span class="op" id="7732121">!=</span>&nbsp;<span class="ident" id="7732124">nil</span>&nbsp;<span class="op" id="7732128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732132">b</span><span class="op" id="7732133">.</span><span class="ident" id="7732134">Fatal</span><span class="op" id="7732139">(</span><span class="ident" id="7732140">err</span><span class="op" id="7732143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732146">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732149">x</span>&nbsp;<span class="op" id="7732151">:=</span>&nbsp;<span class="builtinfunc" id="7732154">make</span><span class="op" id="7732158">(</span><span class="op" id="7732159">[</span><span class="op" id="7732160">]</span><span class="builtintype" id="7732161">int32</span><span class="op" id="7732166">,</span>&nbsp;<span class="num" id="7732168">1000</span><span class="op" id="7732172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732175">bbuf</span>&nbsp;<span class="op" id="7732180">:=</span>&nbsp;<span class="ident" id="7732183">benchmarkBuf</span><span class="op" id="7732195">{</span><span class="ident" id="7732196">data</span><span class="op" id="7732200">:</span>&nbsp;<span class="ident" id="7732202">buf</span><span class="op" id="7732205">.</span><span class="ident" id="7732206">Bytes</span><span class="op" id="7732211">(</span><span class="op" id="7732212">)</span><span class="op" id="7732213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732216">b</span><span class="op" id="7732217">.</span><span class="ident" id="7732218">ResetTimer</span><span class="op" id="7732228">(</span><span class="op" id="7732229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732232">for</span>&nbsp;<span class="ident" id="7732236">i</span>&nbsp;<span class="op" id="7732238">:=</span>&nbsp;<span class="num" id="7732241">0</span><span class="op" id="7732242">;</span>&nbsp;<span class="ident" id="7732244">i</span>&nbsp;<span class="op" id="7732246">&lt;</span>&nbsp;<span class="ident" id="7732248">b</span><span class="op" id="7732249">.</span><span class="ident" id="7732250">N</span><span class="op" id="7732251">;</span>&nbsp;<span class="ident" id="7732253">i</span><span class="op" id="7732254">++</span>&nbsp;<span class="op" id="7732257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732261">bbuf</span><span class="op" id="7732265">.</span><span class="ident" id="7732266">reset</span><span class="op" id="7732271">(</span><span class="op" id="7732272">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732276">dec</span>&nbsp;<span class="op" id="7732280">:=</span>&nbsp;<span class="ident" id="7732283">NewDecoder</span><span class="op" id="7732293">(</span><span class="op" id="7732294">&amp;</span><span class="ident" id="7732295">bbuf</span><span class="op" id="7732299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732303">err</span>&nbsp;<span class="op" id="7732307">:=</span>&nbsp;<span class="ident" id="7732310">dec</span><span class="op" id="7732313">.</span><span class="ident" id="7732314">Decode</span><span class="op" id="7732320">(</span><span class="op" id="7732321">&amp;</span><span class="ident" id="7732322">x</span><span class="op" id="7732323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732327">if</span>&nbsp;<span class="ident" id="7732330">err</span>&nbsp;<span class="op" id="7732334">!=</span>&nbsp;<span class="ident" id="7732337">nil</span>&nbsp;<span class="op" id="7732341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732346">b</span><span class="op" id="7732347">.</span><span class="ident" id="7732348">Fatal</span><span class="op" id="7732353">(</span><span class="ident" id="7732354">i</span><span class="op" id="7732355">,</span>&nbsp;<span class="ident" id="7732357">err</span><span class="op" id="7732360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732364">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732367">}</span><br>
<span class="lineno"></span><span class="op" id="7732369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7732372">func</span>&nbsp;<span class="ident" id="7732377">BenchmarkDecodeStringSlice</span><span class="op" id="7732403">(</span><span class="ident" id="7732404">b</span>&nbsp;<span class="op" id="7732406">*</span><span class="ident" id="7732407">testing</span><span class="op" id="7732414">.</span><span class="ident" id="7732415">B</span><span class="op" id="7732416">)</span>&nbsp;<span class="op" id="7732418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732421">var</span>&nbsp;<span class="ident" id="7732425">buf</span>&nbsp;<span class="ident" id="7732429">bytes</span><span class="op" id="7732434">.</span><span class="ident" id="7732435">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732443">enc</span>&nbsp;<span class="op" id="7732447">:=</span>&nbsp;<span class="ident" id="7732450">NewEncoder</span><span class="op" id="7732460">(</span><span class="op" id="7732461">&amp;</span><span class="ident" id="7732462">buf</span><span class="op" id="7732465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732468">a</span>&nbsp;<span class="op" id="7732470">:=</span>&nbsp;<span class="builtinfunc" id="7732473">make</span><span class="op" id="7732477">(</span><span class="op" id="7732478">[</span><span class="op" id="7732479">]</span><span class="builtintype" id="7732480">string</span><span class="op" id="7732486">,</span>&nbsp;<span class="num" id="7732488">1000</span><span class="op" id="7732492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732495">for</span>&nbsp;<span class="ident" id="7732499">i</span>&nbsp;<span class="op" id="7732501">:=</span>&nbsp;<span class="keyword" id="7732504">range</span>&nbsp;<span class="ident" id="7732510">a</span>&nbsp;<span class="op" id="7732512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732516">a</span><span class="op" id="7732517">[</span><span class="ident" id="7732518">i</span><span class="op" id="7732519">]</span>&nbsp;<span class="op" id="7732521">=</span>&nbsp;<span class="string" id="7732523">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732542">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732545">err</span>&nbsp;<span class="op" id="7732549">:=</span>&nbsp;<span class="ident" id="7732552">enc</span><span class="op" id="7732555">.</span><span class="ident" id="7732556">Encode</span><span class="op" id="7732562">(</span><span class="ident" id="7732563">a</span><span class="op" id="7732564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732567">if</span>&nbsp;<span class="ident" id="7732570">err</span>&nbsp;<span class="op" id="7732574">!=</span>&nbsp;<span class="ident" id="7732577">nil</span>&nbsp;<span class="op" id="7732581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732585">b</span><span class="op" id="7732586">.</span><span class="ident" id="7732587">Fatal</span><span class="op" id="7732592">(</span><span class="ident" id="7732593">err</span><span class="op" id="7732596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732602">x</span>&nbsp;<span class="op" id="7732604">:=</span>&nbsp;<span class="builtinfunc" id="7732607">make</span><span class="op" id="7732611">(</span><span class="op" id="7732612">[</span><span class="op" id="7732613">]</span><span class="builtintype" id="7732614">string</span><span class="op" id="7732620">,</span>&nbsp;<span class="num" id="7732622">1000</span><span class="op" id="7732626">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732629">bbuf</span>&nbsp;<span class="op" id="7732634">:=</span>&nbsp;<span class="ident" id="7732637">benchmarkBuf</span><span class="op" id="7732649">{</span><span class="ident" id="7732650">data</span><span class="op" id="7732654">:</span>&nbsp;<span class="ident" id="7732656">buf</span><span class="op" id="7732659">.</span><span class="ident" id="7732660">Bytes</span><span class="op" id="7732665">(</span><span class="op" id="7732666">)</span><span class="op" id="7732667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732670">b</span><span class="op" id="7732671">.</span><span class="ident" id="7732672">ResetTimer</span><span class="op" id="7732682">(</span><span class="op" id="7732683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732686">for</span>&nbsp;<span class="ident" id="7732690">i</span>&nbsp;<span class="op" id="7732692">:=</span>&nbsp;<span class="num" id="7732695">0</span><span class="op" id="7732696">;</span>&nbsp;<span class="ident" id="7732698">i</span>&nbsp;<span class="op" id="7732700">&lt;</span>&nbsp;<span class="ident" id="7732702">b</span><span class="op" id="7732703">.</span><span class="ident" id="7732704">N</span><span class="op" id="7732705">;</span>&nbsp;<span class="ident" id="7732707">i</span><span class="op" id="7732708">++</span>&nbsp;<span class="op" id="7732711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732715">bbuf</span><span class="op" id="7732719">.</span><span class="ident" id="7732720">reset</span><span class="op" id="7732725">(</span><span class="op" id="7732726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732730">dec</span>&nbsp;<span class="op" id="7732734">:=</span>&nbsp;<span class="ident" id="7732737">NewDecoder</span><span class="op" id="7732747">(</span><span class="op" id="7732748">&amp;</span><span class="ident" id="7732749">bbuf</span><span class="op" id="7732753">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732757">err</span>&nbsp;<span class="op" id="7732761">:=</span>&nbsp;<span class="ident" id="7732764">dec</span><span class="op" id="7732767">.</span><span class="ident" id="7732768">Decode</span><span class="op" id="7732774">(</span><span class="op" id="7732775">&amp;</span><span class="ident" id="7732776">x</span><span class="op" id="7732777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7732781">if</span>&nbsp;<span class="ident" id="7732784">err</span>&nbsp;<span class="op" id="7732788">!=</span>&nbsp;<span class="ident" id="7732791">nil</span>&nbsp;<span class="op" id="7732795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7732800">b</span><span class="op" id="7732801">.</span><span class="ident" id="7732802">Fatal</span><span class="op" id="7732807">(</span><span class="ident" id="7732808">i</span><span class="op" id="7732809">,</span>&nbsp;<span class="ident" id="7732811">err</span><span class="op" id="7732814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7732821">}</span><br>
<span class="lineno">325</span><span class="op" id="7732823">}</span>
</div>
</body>
</html>
