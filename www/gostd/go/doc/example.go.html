<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6001869">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6001924">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6001978">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6002029">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6002075">package</span>&nbsp;<span class="ident" id="6002083">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6002088">import</span>&nbsp;<span class="op" id="6002095">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002098">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002108">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002120">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002128">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002138">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002146">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002157">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002168">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6002179">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6002194">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="6002197">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6002267">type</span>&nbsp;<span class="ident" id="6002272">Example</span>&nbsp;<span class="keyword" id="6002280">struct</span>&nbsp;<span class="op" id="6002287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002290">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6002302">string</span>&nbsp;<span class="comment" id="6002309">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002348">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6002360">string</span>&nbsp;<span class="comment" id="6002367">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002399">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002411">ast</span><span class="op" id="6002414">.</span><span class="ident" id="6002415">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002421">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6002433">*</span><span class="ident" id="6002434">ast</span><span class="op" id="6002437">.</span><span class="ident" id="6002438">File</span>&nbsp;<span class="comment" id="6002443">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002486">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6002498">[</span><span class="op" id="6002499">]</span><span class="op" id="6002500">*</span><span class="ident" id="6002501">ast</span><span class="op" id="6002504">.</span><span class="ident" id="6002505">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002519">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6002531">string</span>&nbsp;<span class="comment" id="6002538">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002558">EmptyOutput</span>&nbsp;<span class="builtintype" id="6002570">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6002577">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6002601">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6002613">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6002620">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="6002650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6002653">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6002728">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="6002805">//</span><br>
<span class="lineno"></span><span class="comment" id="6002808">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6002878">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6002953">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="6002971">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="6003047">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="6003123">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="6003186">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6003260">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6003336">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="6003409">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6003443">func</span>&nbsp;<span class="ident" id="6003448">Examples</span><span class="op" id="6003456">(</span><span class="ident" id="6003457">files</span>&nbsp;<span class="op" id="6003463">...</span><span class="op" id="6003466">*</span><span class="ident" id="6003467">ast</span><span class="op" id="6003470">.</span><span class="ident" id="6003471">File</span><span class="op" id="6003475">)</span>&nbsp;<span class="op" id="6003477">[</span><span class="op" id="6003478">]</span><span class="op" id="6003479">*</span><span class="ident" id="6003480">Example</span>&nbsp;<span class="op" id="6003488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003491">var</span>&nbsp;<span class="ident" id="6003495">list</span>&nbsp;<span class="op" id="6003500">[</span><span class="op" id="6003501">]</span><span class="op" id="6003502">*</span><span class="ident" id="6003503">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003512">for</span>&nbsp;<span class="ident" id="6003516">_</span><span class="op" id="6003517">,</span>&nbsp;<span class="ident" id="6003519">file</span>&nbsp;<span class="op" id="6003524">:=</span>&nbsp;<span class="keyword" id="6003527">range</span>&nbsp;<span class="ident" id="6003533">files</span>&nbsp;<span class="op" id="6003539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003543">hasTests</span>&nbsp;<span class="op" id="6003552">:=</span>&nbsp;<span class="builtintype" id="6003555">false</span>&nbsp;<span class="comment" id="6003561">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003600">numDecl</span>&nbsp;<span class="op" id="6003608">:=</span>&nbsp;<span class="num" id="6003611">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6003618">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003669">var</span>&nbsp;<span class="ident" id="6003673">flist</span>&nbsp;<span class="op" id="6003679">[</span><span class="op" id="6003680">]</span><span class="op" id="6003681">*</span><span class="ident" id="6003682">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003692">for</span>&nbsp;<span class="ident" id="6003696">_</span><span class="op" id="6003697">,</span>&nbsp;<span class="ident" id="6003699">decl</span>&nbsp;<span class="op" id="6003704">:=</span>&nbsp;<span class="keyword" id="6003707">range</span>&nbsp;<span class="ident" id="6003713">file</span><span class="op" id="6003717">.</span><span class="ident" id="6003718">Decls</span>&nbsp;<span class="op" id="6003724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003729">if</span>&nbsp;<span class="ident" id="6003732">g</span><span class="op" id="6003733">,</span>&nbsp;<span class="ident" id="6003735">ok</span>&nbsp;<span class="op" id="6003738">:=</span>&nbsp;<span class="ident" id="6003741">decl</span><span class="op" id="6003745">.</span><span class="op" id="6003746">(</span><span class="op" id="6003747">*</span><span class="ident" id="6003748">ast</span><span class="op" id="6003751">.</span><span class="ident" id="6003752">GenDecl</span><span class="op" id="6003759">)</span><span class="op" id="6003760">;</span>&nbsp;<span class="ident" id="6003762">ok</span>&nbsp;<span class="op" id="6003765">&amp;&amp;</span>&nbsp;<span class="ident" id="6003768">g</span><span class="op" id="6003769">.</span><span class="ident" id="6003770">Tok</span>&nbsp;<span class="op" id="6003774">!=</span>&nbsp;<span class="ident" id="6003777">token</span><span class="op" id="6003782">.</span><span class="ident" id="6003783">IMPORT</span>&nbsp;<span class="op" id="6003790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003796">numDecl</span><span class="op" id="6003803">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003810">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6003822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003827">f</span><span class="op" id="6003828">,</span>&nbsp;<span class="ident" id="6003830">ok</span>&nbsp;<span class="op" id="6003833">:=</span>&nbsp;<span class="ident" id="6003836">decl</span><span class="op" id="6003840">.</span><span class="op" id="6003841">(</span><span class="op" id="6003842">*</span><span class="ident" id="6003843">ast</span><span class="op" id="6003846">.</span><span class="ident" id="6003847">FuncDecl</span><span class="op" id="6003855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003860">if</span>&nbsp;<span class="op" id="6003863">!</span><span class="ident" id="6003864">ok</span>&nbsp;<span class="op" id="6003867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003873">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6003885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003890">numDecl</span><span class="op" id="6003897">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003903">name</span>&nbsp;<span class="op" id="6003908">:=</span>&nbsp;<span class="ident" id="6003911">f</span><span class="op" id="6003912">.</span><span class="ident" id="6003913">Name</span><span class="op" id="6003917">.</span><span class="ident" id="6003918">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6003926">if</span>&nbsp;<span class="ident" id="6003929">isTest</span><span class="op" id="6003935">(</span><span class="ident" id="6003936">name</span><span class="op" id="6003940">,</span>&nbsp;<span class="string" id="6003942">&#34;Test&#34;</span><span class="op" id="6003948">)</span>&nbsp;<span class="op" id="6003950">||</span>&nbsp;<span class="ident" id="6003953">isTest</span><span class="op" id="6003959">(</span><span class="ident" id="6003960">name</span><span class="op" id="6003964">,</span>&nbsp;<span class="string" id="6003966">&#34;Benchmark&#34;</span><span class="op" id="6003977">)</span>&nbsp;<span class="op" id="6003979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6003985">hasTests</span>&nbsp;<span class="op" id="6003994">=</span>&nbsp;<span class="builtintype" id="6003996">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004005">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004022">if</span>&nbsp;<span class="op" id="6004025">!</span><span class="ident" id="6004026">isTest</span><span class="op" id="6004032">(</span><span class="ident" id="6004033">name</span><span class="op" id="6004037">,</span>&nbsp;<span class="string" id="6004039">&#34;Example&#34;</span><span class="op" id="6004048">)</span>&nbsp;<span class="op" id="6004050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004056">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004068">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004073">var</span>&nbsp;<span class="ident" id="6004077">doc</span>&nbsp;<span class="builtintype" id="6004081">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004091">if</span>&nbsp;<span class="ident" id="6004094">f</span><span class="op" id="6004095">.</span><span class="ident" id="6004096">Doc</span>&nbsp;<span class="op" id="6004100">!=</span>&nbsp;<span class="ident" id="6004103">nil</span>&nbsp;<span class="op" id="6004107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004113">doc</span>&nbsp;<span class="op" id="6004117">=</span>&nbsp;<span class="ident" id="6004119">f</span><span class="op" id="6004120">.</span><span class="ident" id="6004121">Doc</span><span class="op" id="6004124">.</span><span class="ident" id="6004125">Text</span><span class="op" id="6004129">(</span><span class="op" id="6004130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004140">output</span><span class="op" id="6004146">,</span>&nbsp;<span class="ident" id="6004148">hasOutput</span>&nbsp;<span class="op" id="6004158">:=</span>&nbsp;<span class="ident" id="6004161">exampleOutput</span><span class="op" id="6004174">(</span><span class="ident" id="6004175">f</span><span class="op" id="6004176">.</span><span class="ident" id="6004177">Body</span><span class="op" id="6004181">,</span>&nbsp;<span class="ident" id="6004183">file</span><span class="op" id="6004187">.</span><span class="ident" id="6004188">Comments</span><span class="op" id="6004196">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004201">flist</span>&nbsp;<span class="op" id="6004207">=</span>&nbsp;<span class="builtinfunc" id="6004209">append</span><span class="op" id="6004215">(</span><span class="ident" id="6004216">flist</span><span class="op" id="6004221">,</span>&nbsp;<span class="op" id="6004223">&amp;</span><span class="ident" id="6004224">Example</span><span class="op" id="6004231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004237">Name</span><span class="op" id="6004241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004250">name</span><span class="op" id="6004254">[</span><span class="builtinfunc" id="6004255">len</span><span class="op" id="6004258">(</span><span class="string" id="6004259">&#34;Example&#34;</span><span class="op" id="6004268">)</span><span class="op" id="6004269">:</span><span class="op" id="6004270">]</span><span class="op" id="6004271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004277">Doc</span><span class="op" id="6004280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004290">doc</span><span class="op" id="6004293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004299">Code</span><span class="op" id="6004303">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004312">f</span><span class="op" id="6004313">.</span><span class="ident" id="6004314">Body</span><span class="op" id="6004318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004324">Play</span><span class="op" id="6004328">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004337">playExample</span><span class="op" id="6004348">(</span><span class="ident" id="6004349">file</span><span class="op" id="6004353">,</span>&nbsp;<span class="ident" id="6004355">f</span><span class="op" id="6004356">.</span><span class="ident" id="6004357">Body</span><span class="op" id="6004361">)</span><span class="op" id="6004362">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004368">Comments</span><span class="op" id="6004376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004381">file</span><span class="op" id="6004385">.</span><span class="ident" id="6004386">Comments</span><span class="op" id="6004394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004400">Output</span><span class="op" id="6004406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004413">output</span><span class="op" id="6004419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004425">EmptyOutput</span><span class="op" id="6004436">:</span>&nbsp;<span class="ident" id="6004438">output</span>&nbsp;<span class="op" id="6004445">==</span>&nbsp;<span class="string" id="6004448">&#34;&#34;</span>&nbsp;<span class="op" id="6004451">&amp;&amp;</span>&nbsp;<span class="ident" id="6004454">hasOutput</span><span class="op" id="6004463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004469">Order</span><span class="op" id="6004474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6004482">len</span><span class="op" id="6004485">(</span><span class="ident" id="6004486">flist</span><span class="op" id="6004491">)</span><span class="op" id="6004492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004497">}</span><span class="op" id="6004498">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004506">if</span>&nbsp;<span class="op" id="6004509">!</span><span class="ident" id="6004510">hasTests</span>&nbsp;<span class="op" id="6004519">&amp;&amp;</span>&nbsp;<span class="ident" id="6004522">numDecl</span>&nbsp;<span class="op" id="6004530">&gt;</span>&nbsp;<span class="num" id="6004532">1</span>&nbsp;<span class="op" id="6004534">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6004537">len</span><span class="op" id="6004540">(</span><span class="ident" id="6004541">flist</span><span class="op" id="6004546">)</span>&nbsp;<span class="op" id="6004548">==</span>&nbsp;<span class="num" id="6004551">1</span>&nbsp;<span class="op" id="6004553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6004558">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6004613">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6004665">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004718">flist</span><span class="op" id="6004723">[</span><span class="num" id="6004724">0</span><span class="op" id="6004725">]</span><span class="op" id="6004726">.</span><span class="ident" id="6004727">Code</span>&nbsp;<span class="op" id="6004732">=</span>&nbsp;<span class="ident" id="6004734">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004742">flist</span><span class="op" id="6004747">[</span><span class="num" id="6004748">0</span><span class="op" id="6004749">]</span><span class="op" id="6004750">.</span><span class="ident" id="6004751">Play</span>&nbsp;<span class="op" id="6004756">=</span>&nbsp;<span class="ident" id="6004758">playExampleFile</span><span class="op" id="6004773">(</span><span class="ident" id="6004774">file</span><span class="op" id="6004778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004786">list</span>&nbsp;<span class="op" id="6004791">=</span>&nbsp;<span class="builtinfunc" id="6004793">append</span><span class="op" id="6004799">(</span><span class="ident" id="6004800">list</span><span class="op" id="6004804">,</span>&nbsp;<span class="ident" id="6004806">flist</span><span class="op" id="6004811">...</span><span class="op" id="6004814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6004817">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6004820">sort</span><span class="op" id="6004824">.</span><span class="ident" id="6004825">Sort</span><span class="op" id="6004829">(</span><span class="ident" id="6004830">exampleByName</span><span class="op" id="6004843">(</span><span class="ident" id="6004844">list</span><span class="op" id="6004848">)</span><span class="op" id="6004849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6004852">return</span>&nbsp;<span class="ident" id="6004859">list</span><br>
<span class="lineno"></span><span class="op" id="6004864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6004867">var</span>&nbsp;<span class="ident" id="6004871">outputPrefix</span>&nbsp;<span class="op" id="6004884">=</span>&nbsp;<span class="ident" id="6004886">regexp</span><span class="op" id="6004892">.</span><span class="ident" id="6004893">MustCompile</span><span class="op" id="6004904">(</span><span class="string" id="6004905">`(?i)^[[:space:]]*output:`</span><span class="op" id="6004931">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="6004934">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="6005011">func</span>&nbsp;<span class="ident" id="6005016">exampleOutput</span><span class="op" id="6005029">(</span><span class="ident" id="6005030">b</span>&nbsp;<span class="op" id="6005032">*</span><span class="ident" id="6005033">ast</span><span class="op" id="6005036">.</span><span class="ident" id="6005037">BlockStmt</span><span class="op" id="6005046">,</span>&nbsp;<span class="ident" id="6005048">comments</span>&nbsp;<span class="op" id="6005057">[</span><span class="op" id="6005058">]</span><span class="op" id="6005059">*</span><span class="ident" id="6005060">ast</span><span class="op" id="6005063">.</span><span class="ident" id="6005064">CommentGroup</span><span class="op" id="6005076">)</span>&nbsp;<span class="op" id="6005078">(</span><span class="ident" id="6005079">output</span>&nbsp;<span class="builtintype" id="6005086">string</span><span class="op" id="6005092">,</span>&nbsp;<span class="ident" id="6005094">ok</span>&nbsp;<span class="builtintype" id="6005097">bool</span><span class="op" id="6005101">)</span>&nbsp;<span class="op" id="6005103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005106">if</span>&nbsp;<span class="ident" id="6005109">_</span><span class="op" id="6005110">,</span>&nbsp;<span class="ident" id="6005112">last</span>&nbsp;<span class="op" id="6005117">:=</span>&nbsp;<span class="ident" id="6005120">lastComment</span><span class="op" id="6005131">(</span><span class="ident" id="6005132">b</span><span class="op" id="6005133">,</span>&nbsp;<span class="ident" id="6005135">comments</span><span class="op" id="6005143">)</span><span class="op" id="6005144">;</span>&nbsp;<span class="ident" id="6005146">last</span>&nbsp;<span class="op" id="6005151">!=</span>&nbsp;<span class="ident" id="6005154">nil</span>&nbsp;<span class="op" id="6005158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6005162">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6005211">text</span>&nbsp;<span class="op" id="6005216">:=</span>&nbsp;<span class="ident" id="6005219">last</span><span class="op" id="6005223">.</span><span class="ident" id="6005224">Text</span><span class="op" id="6005228">(</span><span class="op" id="6005229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005233">if</span>&nbsp;<span class="ident" id="6005236">loc</span>&nbsp;<span class="op" id="6005240">:=</span>&nbsp;<span class="ident" id="6005243">outputPrefix</span><span class="op" id="6005255">.</span><span class="ident" id="6005256">FindStringIndex</span><span class="op" id="6005271">(</span><span class="ident" id="6005272">text</span><span class="op" id="6005276">)</span><span class="op" id="6005277">;</span>&nbsp;<span class="ident" id="6005279">loc</span>&nbsp;<span class="op" id="6005283">!=</span>&nbsp;<span class="ident" id="6005286">nil</span>&nbsp;<span class="op" id="6005290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6005295">text</span>&nbsp;<span class="op" id="6005300">=</span>&nbsp;<span class="ident" id="6005302">text</span><span class="op" id="6005306">[</span><span class="ident" id="6005307">loc</span><span class="op" id="6005310">[</span><span class="num" id="6005311">1</span><span class="op" id="6005312">]</span><span class="op" id="6005313">:</span><span class="op" id="6005314">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6005319">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6005385">text</span>&nbsp;<span class="op" id="6005390">=</span>&nbsp;<span class="ident" id="6005392">strings</span><span class="op" id="6005399">.</span><span class="ident" id="6005400">TrimLeft</span><span class="op" id="6005408">(</span><span class="ident" id="6005409">text</span><span class="op" id="6005413">,</span>&nbsp;<span class="string" id="6005415">&#34;&nbsp;&#34;</span><span class="op" id="6005418">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005423">if</span>&nbsp;<span class="builtinfunc" id="6005426">len</span><span class="op" id="6005429">(</span><span class="ident" id="6005430">text</span><span class="op" id="6005434">)</span>&nbsp;<span class="op" id="6005436">&gt;</span>&nbsp;<span class="num" id="6005438">0</span>&nbsp;<span class="op" id="6005440">&amp;&amp;</span>&nbsp;<span class="ident" id="6005443">text</span><span class="op" id="6005447">[</span><span class="num" id="6005448">0</span><span class="op" id="6005449">]</span>&nbsp;<span class="op" id="6005451">==</span>&nbsp;<span class="string" id="6005454">&#39;\n&#39;</span>&nbsp;<span class="op" id="6005459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6005465">text</span>&nbsp;<span class="op" id="6005470">=</span>&nbsp;<span class="ident" id="6005472">text</span><span class="op" id="6005476">[</span><span class="num" id="6005477">1</span><span class="op" id="6005478">:</span><span class="op" id="6005479">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6005484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005489">return</span>&nbsp;<span class="ident" id="6005496">text</span><span class="op" id="6005500">,</span>&nbsp;<span class="builtintype" id="6005502">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6005509">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6005512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005515">return</span>&nbsp;<span class="string" id="6005522">&#34;&#34;</span><span class="op" id="6005524">,</span>&nbsp;<span class="builtintype" id="6005526">false</span>&nbsp;<span class="comment" id="6005532">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="6005561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6005564">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="6005635">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6005706">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="6005755">func</span>&nbsp;<span class="ident" id="6005760">isTest</span><span class="op" id="6005766">(</span><span class="ident" id="6005767">name</span><span class="op" id="6005771">,</span>&nbsp;<span class="ident" id="6005773">prefix</span>&nbsp;<span class="builtintype" id="6005780">string</span><span class="op" id="6005786">)</span>&nbsp;<span class="builtintype" id="6005788">bool</span>&nbsp;<span class="op" id="6005793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005796">if</span>&nbsp;<span class="op" id="6005799">!</span><span class="ident" id="6005800">strings</span><span class="op" id="6005807">.</span><span class="ident" id="6005808">HasPrefix</span><span class="op" id="6005817">(</span><span class="ident" id="6005818">name</span><span class="op" id="6005822">,</span>&nbsp;<span class="ident" id="6005824">prefix</span><span class="op" id="6005830">)</span>&nbsp;<span class="op" id="6005832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005836">return</span>&nbsp;<span class="builtintype" id="6005843">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6005850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005853">if</span>&nbsp;<span class="builtinfunc" id="6005856">len</span><span class="op" id="6005859">(</span><span class="ident" id="6005860">name</span><span class="op" id="6005864">)</span>&nbsp;<span class="op" id="6005866">==</span>&nbsp;<span class="builtinfunc" id="6005869">len</span><span class="op" id="6005872">(</span><span class="ident" id="6005873">prefix</span><span class="op" id="6005879">)</span>&nbsp;<span class="op" id="6005881">{</span>&nbsp;<span class="comment" id="6005883">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005901">return</span>&nbsp;<span class="builtintype" id="6005908">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6005914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6005917">rune</span><span class="op" id="6005921">,</span>&nbsp;<span class="ident" id="6005923">_</span>&nbsp;<span class="op" id="6005925">:=</span>&nbsp;<span class="ident" id="6005928">utf8</span><span class="op" id="6005932">.</span><span class="ident" id="6005933">DecodeRuneInString</span><span class="op" id="6005951">(</span><span class="ident" id="6005952">name</span><span class="op" id="6005956">[</span><span class="builtinfunc" id="6005957">len</span><span class="op" id="6005960">(</span><span class="ident" id="6005961">prefix</span><span class="op" id="6005967">)</span><span class="op" id="6005968">:</span><span class="op" id="6005969">]</span><span class="op" id="6005970">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6005973">return</span>&nbsp;<span class="op" id="6005980">!</span><span class="ident" id="6005981">unicode</span><span class="op" id="6005988">.</span><span class="ident" id="6005989">IsLower</span><span class="op" id="6005996">(</span><span class="builtintype" id="6005997">rune</span><span class="op" id="6006001">)</span><br>
<span class="lineno"></span><span class="op" id="6006003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6006006">type</span>&nbsp;<span class="ident" id="6006011">exampleByName</span>&nbsp;<span class="op" id="6006025">[</span><span class="op" id="6006026">]</span><span class="op" id="6006027">*</span><span class="ident" id="6006028">Example</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6006037">func</span>&nbsp;<span class="op" id="6006042">(</span><span class="ident" id="6006043">s</span>&nbsp;<span class="ident" id="6006045">exampleByName</span><span class="op" id="6006058">)</span>&nbsp;<span class="ident" id="6006060">Len</span><span class="op" id="6006063">(</span><span class="op" id="6006064">)</span>&nbsp;<span class="builtintype" id="6006066">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6006080">{</span>&nbsp;<span class="keyword" id="6006082">return</span>&nbsp;<span class="builtinfunc" id="6006089">len</span><span class="op" id="6006092">(</span><span class="ident" id="6006093">s</span><span class="op" id="6006094">)</span>&nbsp;<span class="op" id="6006096">}</span><br>
<span class="lineno"></span><span class="keyword" id="6006098">func</span>&nbsp;<span class="op" id="6006103">(</span><span class="ident" id="6006104">s</span>&nbsp;<span class="ident" id="6006106">exampleByName</span><span class="op" id="6006119">)</span>&nbsp;<span class="ident" id="6006121">Swap</span><span class="op" id="6006125">(</span><span class="ident" id="6006126">i</span><span class="op" id="6006127">,</span>&nbsp;<span class="ident" id="6006129">j</span>&nbsp;<span class="builtintype" id="6006131">int</span><span class="op" id="6006134">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6006141">{</span>&nbsp;<span class="ident" id="6006143">s</span><span class="op" id="6006144">[</span><span class="ident" id="6006145">i</span><span class="op" id="6006146">]</span><span class="op" id="6006147">,</span>&nbsp;<span class="ident" id="6006149">s</span><span class="op" id="6006150">[</span><span class="ident" id="6006151">j</span><span class="op" id="6006152">]</span>&nbsp;<span class="op" id="6006154">=</span>&nbsp;<span class="ident" id="6006156">s</span><span class="op" id="6006157">[</span><span class="ident" id="6006158">j</span><span class="op" id="6006159">]</span><span class="op" id="6006160">,</span>&nbsp;<span class="ident" id="6006162">s</span><span class="op" id="6006163">[</span><span class="ident" id="6006164">i</span><span class="op" id="6006165">]</span>&nbsp;<span class="op" id="6006167">}</span><br>
<span class="lineno"></span><span class="keyword" id="6006169">func</span>&nbsp;<span class="op" id="6006174">(</span><span class="ident" id="6006175">s</span>&nbsp;<span class="ident" id="6006177">exampleByName</span><span class="op" id="6006190">)</span>&nbsp;<span class="ident" id="6006192">Less</span><span class="op" id="6006196">(</span><span class="ident" id="6006197">i</span><span class="op" id="6006198">,</span>&nbsp;<span class="ident" id="6006200">j</span>&nbsp;<span class="builtintype" id="6006202">int</span><span class="op" id="6006205">)</span>&nbsp;<span class="builtintype" id="6006207">bool</span>&nbsp;<span class="op" id="6006212">{</span>&nbsp;<span class="keyword" id="6006214">return</span>&nbsp;<span class="ident" id="6006221">s</span><span class="op" id="6006222">[</span><span class="ident" id="6006223">i</span><span class="op" id="6006224">]</span><span class="op" id="6006225">.</span><span class="ident" id="6006226">Name</span>&nbsp;<span class="op" id="6006231">&lt;</span>&nbsp;<span class="ident" id="6006233">s</span><span class="op" id="6006234">[</span><span class="ident" id="6006235">j</span><span class="op" id="6006236">]</span><span class="op" id="6006237">.</span><span class="ident" id="6006238">Name</span>&nbsp;<span class="op" id="6006243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6006246">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="6006311">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="6006372">func</span>&nbsp;<span class="ident" id="6006377">playExample</span><span class="op" id="6006388">(</span><span class="ident" id="6006389">file</span>&nbsp;<span class="op" id="6006394">*</span><span class="ident" id="6006395">ast</span><span class="op" id="6006398">.</span><span class="ident" id="6006399">File</span><span class="op" id="6006403">,</span>&nbsp;<span class="ident" id="6006405">body</span>&nbsp;<span class="op" id="6006410">*</span><span class="ident" id="6006411">ast</span><span class="op" id="6006414">.</span><span class="ident" id="6006415">BlockStmt</span><span class="op" id="6006424">)</span>&nbsp;<span class="op" id="6006426">*</span><span class="ident" id="6006427">ast</span><span class="op" id="6006430">.</span><span class="ident" id="6006431">File</span>&nbsp;<span class="op" id="6006436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006439">if</span>&nbsp;<span class="op" id="6006442">!</span><span class="ident" id="6006443">strings</span><span class="op" id="6006450">.</span><span class="ident" id="6006451">HasSuffix</span><span class="op" id="6006460">(</span><span class="ident" id="6006461">file</span><span class="op" id="6006465">.</span><span class="ident" id="6006466">Name</span><span class="op" id="6006470">.</span><span class="ident" id="6006471">Name</span><span class="op" id="6006475">,</span>&nbsp;<span class="string" id="6006477">&#34;_test&#34;</span><span class="op" id="6006484">)</span>&nbsp;<span class="op" id="6006486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6006490">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6006542">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006570">return</span>&nbsp;<span class="ident" id="6006577">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6006582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6006586">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6006631">topDecls</span>&nbsp;<span class="op" id="6006640">:=</span>&nbsp;<span class="builtinfunc" id="6006643">make</span><span class="op" id="6006647">(</span><span class="keyword" id="6006648">map</span><span class="op" id="6006651">[</span><span class="op" id="6006652">*</span><span class="ident" id="6006653">ast</span><span class="op" id="6006656">.</span><span class="ident" id="6006657">Object</span><span class="op" id="6006663">]</span><span class="builtintype" id="6006664">bool</span><span class="op" id="6006668">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006671">for</span>&nbsp;<span class="ident" id="6006675">_</span><span class="op" id="6006676">,</span>&nbsp;<span class="ident" id="6006678">decl</span>&nbsp;<span class="op" id="6006683">:=</span>&nbsp;<span class="keyword" id="6006686">range</span>&nbsp;<span class="ident" id="6006692">file</span><span class="op" id="6006696">.</span><span class="ident" id="6006697">Decls</span>&nbsp;<span class="op" id="6006703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006707">switch</span>&nbsp;<span class="ident" id="6006714">d</span>&nbsp;<span class="op" id="6006716">:=</span>&nbsp;<span class="ident" id="6006719">decl</span><span class="op" id="6006723">.</span><span class="op" id="6006724">(</span><span class="keyword" id="6006725">type</span><span class="op" id="6006729">)</span>&nbsp;<span class="op" id="6006731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006735">case</span>&nbsp;<span class="op" id="6006740">*</span><span class="ident" id="6006741">ast</span><span class="op" id="6006744">.</span><span class="ident" id="6006745">FuncDecl</span><span class="op" id="6006753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6006758">topDecls</span><span class="op" id="6006766">[</span><span class="ident" id="6006767">d</span><span class="op" id="6006768">.</span><span class="ident" id="6006769">Name</span><span class="op" id="6006773">.</span><span class="ident" id="6006774">Obj</span><span class="op" id="6006777">]</span>&nbsp;<span class="op" id="6006779">=</span>&nbsp;<span class="builtintype" id="6006781">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006788">case</span>&nbsp;<span class="op" id="6006793">*</span><span class="ident" id="6006794">ast</span><span class="op" id="6006797">.</span><span class="ident" id="6006798">GenDecl</span><span class="op" id="6006805">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006810">for</span>&nbsp;<span class="ident" id="6006814">_</span><span class="op" id="6006815">,</span>&nbsp;<span class="ident" id="6006817">spec</span>&nbsp;<span class="op" id="6006822">:=</span>&nbsp;<span class="keyword" id="6006825">range</span>&nbsp;<span class="ident" id="6006831">d</span><span class="op" id="6006832">.</span><span class="ident" id="6006833">Specs</span>&nbsp;<span class="op" id="6006839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006845">switch</span>&nbsp;<span class="ident" id="6006852">s</span>&nbsp;<span class="op" id="6006854">:=</span>&nbsp;<span class="ident" id="6006857">spec</span><span class="op" id="6006861">.</span><span class="op" id="6006862">(</span><span class="keyword" id="6006863">type</span><span class="op" id="6006867">)</span>&nbsp;<span class="op" id="6006869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006875">case</span>&nbsp;<span class="op" id="6006880">*</span><span class="ident" id="6006881">ast</span><span class="op" id="6006884">.</span><span class="ident" id="6006885">TypeSpec</span><span class="op" id="6006893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6006900">topDecls</span><span class="op" id="6006908">[</span><span class="ident" id="6006909">s</span><span class="op" id="6006910">.</span><span class="ident" id="6006911">Name</span><span class="op" id="6006915">.</span><span class="ident" id="6006916">Obj</span><span class="op" id="6006919">]</span>&nbsp;<span class="op" id="6006921">=</span>&nbsp;<span class="builtintype" id="6006923">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006932">case</span>&nbsp;<span class="op" id="6006937">*</span><span class="ident" id="6006938">ast</span><span class="op" id="6006941">.</span><span class="ident" id="6006942">ValueSpec</span><span class="op" id="6006951">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6006958">for</span>&nbsp;<span class="ident" id="6006962">_</span><span class="op" id="6006963">,</span>&nbsp;<span class="ident" id="6006965">id</span>&nbsp;<span class="op" id="6006968">:=</span>&nbsp;<span class="keyword" id="6006971">range</span>&nbsp;<span class="ident" id="6006977">s</span><span class="op" id="6006978">.</span><span class="ident" id="6006979">Names</span>&nbsp;<span class="op" id="6006985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6006993">topDecls</span><span class="op" id="6007001">[</span><span class="ident" id="6007002">id</span><span class="op" id="6007004">.</span><span class="ident" id="6007005">Obj</span><span class="op" id="6007008">]</span>&nbsp;<span class="op" id="6007010">=</span>&nbsp;<span class="builtintype" id="6007012">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007033">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007044">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007112">unresolved</span>&nbsp;<span class="op" id="6007123">:=</span>&nbsp;<span class="builtinfunc" id="6007126">make</span><span class="op" id="6007130">(</span><span class="keyword" id="6007131">map</span><span class="op" id="6007134">[</span><span class="builtintype" id="6007135">string</span><span class="op" id="6007141">]</span><span class="builtintype" id="6007142">bool</span><span class="op" id="6007146">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007149">usesTopDecl</span>&nbsp;<span class="op" id="6007161">:=</span>&nbsp;<span class="builtintype" id="6007164">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007171">var</span>&nbsp;<span class="ident" id="6007175">inspectFunc</span>&nbsp;<span class="keyword" id="6007187">func</span><span class="op" id="6007191">(</span><span class="ident" id="6007192">ast</span><span class="op" id="6007195">.</span><span class="ident" id="6007196">Node</span><span class="op" id="6007200">)</span>&nbsp;<span class="builtintype" id="6007202">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007208">inspectFunc</span>&nbsp;<span class="op" id="6007220">=</span>&nbsp;<span class="keyword" id="6007222">func</span><span class="op" id="6007226">(</span><span class="ident" id="6007227">n</span>&nbsp;<span class="ident" id="6007229">ast</span><span class="op" id="6007232">.</span><span class="ident" id="6007233">Node</span><span class="op" id="6007237">)</span>&nbsp;<span class="builtintype" id="6007239">bool</span>&nbsp;<span class="op" id="6007244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007248">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007312">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007376">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007422">if</span>&nbsp;<span class="ident" id="6007425">e</span><span class="op" id="6007426">,</span>&nbsp;<span class="ident" id="6007428">ok</span>&nbsp;<span class="op" id="6007431">:=</span>&nbsp;<span class="ident" id="6007434">n</span><span class="op" id="6007435">.</span><span class="op" id="6007436">(</span><span class="op" id="6007437">*</span><span class="ident" id="6007438">ast</span><span class="op" id="6007441">.</span><span class="ident" id="6007442">SelectorExpr</span><span class="op" id="6007454">)</span><span class="op" id="6007455">;</span>&nbsp;<span class="ident" id="6007457">ok</span>&nbsp;<span class="op" id="6007460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007465">ast</span><span class="op" id="6007468">.</span><span class="ident" id="6007469">Inspect</span><span class="op" id="6007476">(</span><span class="ident" id="6007477">e</span><span class="op" id="6007478">.</span><span class="ident" id="6007479">X</span><span class="op" id="6007480">,</span>&nbsp;<span class="ident" id="6007482">inspectFunc</span><span class="op" id="6007493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007498">return</span>&nbsp;<span class="builtintype" id="6007505">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007513">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007517">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007572">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007626">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007650">if</span>&nbsp;<span class="ident" id="6007653">e</span><span class="op" id="6007654">,</span>&nbsp;<span class="ident" id="6007656">ok</span>&nbsp;<span class="op" id="6007659">:=</span>&nbsp;<span class="ident" id="6007662">n</span><span class="op" id="6007663">.</span><span class="op" id="6007664">(</span><span class="op" id="6007665">*</span><span class="ident" id="6007666">ast</span><span class="op" id="6007669">.</span><span class="ident" id="6007670">KeyValueExpr</span><span class="op" id="6007682">)</span><span class="op" id="6007683">;</span>&nbsp;<span class="ident" id="6007685">ok</span>&nbsp;<span class="op" id="6007688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007693">ast</span><span class="op" id="6007696">.</span><span class="ident" id="6007697">Inspect</span><span class="op" id="6007704">(</span><span class="ident" id="6007705">e</span><span class="op" id="6007706">.</span><span class="ident" id="6007707">Value</span><span class="op" id="6007712">,</span>&nbsp;<span class="ident" id="6007714">inspectFunc</span><span class="op" id="6007725">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007730">return</span>&nbsp;<span class="builtintype" id="6007737">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007749">if</span>&nbsp;<span class="ident" id="6007752">id</span><span class="op" id="6007754">,</span>&nbsp;<span class="ident" id="6007756">ok</span>&nbsp;<span class="op" id="6007759">:=</span>&nbsp;<span class="ident" id="6007762">n</span><span class="op" id="6007763">.</span><span class="op" id="6007764">(</span><span class="op" id="6007765">*</span><span class="ident" id="6007766">ast</span><span class="op" id="6007769">.</span><span class="ident" id="6007770">Ident</span><span class="op" id="6007775">)</span><span class="op" id="6007776">;</span>&nbsp;<span class="ident" id="6007778">ok</span>&nbsp;<span class="op" id="6007781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007786">if</span>&nbsp;<span class="ident" id="6007789">id</span><span class="op" id="6007791">.</span><span class="ident" id="6007792">Obj</span>&nbsp;<span class="op" id="6007796">==</span>&nbsp;<span class="ident" id="6007799">nil</span>&nbsp;<span class="op" id="6007803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007809">unresolved</span><span class="op" id="6007819">[</span><span class="ident" id="6007820">id</span><span class="op" id="6007822">.</span><span class="ident" id="6007823">Name</span><span class="op" id="6007827">]</span>&nbsp;<span class="op" id="6007829">=</span>&nbsp;<span class="builtintype" id="6007831">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007839">}</span>&nbsp;<span class="keyword" id="6007841">else</span>&nbsp;<span class="keyword" id="6007846">if</span>&nbsp;<span class="ident" id="6007849">topDecls</span><span class="op" id="6007857">[</span><span class="ident" id="6007858">id</span><span class="op" id="6007860">.</span><span class="ident" id="6007861">Obj</span><span class="op" id="6007864">]</span>&nbsp;<span class="op" id="6007866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007872">usesTopDecl</span>&nbsp;<span class="op" id="6007884">=</span>&nbsp;<span class="builtintype" id="6007886">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007902">return</span>&nbsp;<span class="builtintype" id="6007909">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6007915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6007918">ast</span><span class="op" id="6007921">.</span><span class="ident" id="6007922">Inspect</span><span class="op" id="6007929">(</span><span class="ident" id="6007930">body</span><span class="op" id="6007934">,</span>&nbsp;<span class="ident" id="6007936">inspectFunc</span><span class="op" id="6007947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6007950">if</span>&nbsp;<span class="ident" id="6007953">usesTopDecl</span>&nbsp;<span class="op" id="6007965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6007969">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008035">return</span>&nbsp;<span class="ident" id="6008042">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008051">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008108">for</span>&nbsp;<span class="ident" id="6008112">n</span>&nbsp;<span class="op" id="6008114">:=</span>&nbsp;<span class="keyword" id="6008117">range</span>&nbsp;<span class="ident" id="6008123">unresolved</span>&nbsp;<span class="op" id="6008134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008138">if</span>&nbsp;<span class="ident" id="6008141">predeclaredTypes</span><span class="op" id="6008157">[</span><span class="ident" id="6008158">n</span><span class="op" id="6008159">]</span>&nbsp;<span class="op" id="6008161">||</span>&nbsp;<span class="ident" id="6008164">predeclaredConstants</span><span class="op" id="6008184">[</span><span class="ident" id="6008185">n</span><span class="op" id="6008186">]</span>&nbsp;<span class="op" id="6008188">||</span>&nbsp;<span class="ident" id="6008191">predeclaredFuncs</span><span class="op" id="6008207">[</span><span class="ident" id="6008208">n</span><span class="op" id="6008209">]</span>&nbsp;<span class="op" id="6008211">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6008216">delete</span><span class="op" id="6008222">(</span><span class="ident" id="6008223">unresolved</span><span class="op" id="6008233">,</span>&nbsp;<span class="ident" id="6008235">n</span><span class="op" id="6008236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008247">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008316">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008383">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008459">namedImports</span>&nbsp;<span class="op" id="6008472">:=</span>&nbsp;<span class="builtinfunc" id="6008475">make</span><span class="op" id="6008479">(</span><span class="keyword" id="6008480">map</span><span class="op" id="6008483">[</span><span class="builtintype" id="6008484">string</span><span class="op" id="6008490">]</span><span class="builtintype" id="6008491">string</span><span class="op" id="6008497">)</span>&nbsp;<span class="comment" id="6008499">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008514">var</span>&nbsp;<span class="ident" id="6008518">blankImports</span>&nbsp;<span class="op" id="6008531">[</span><span class="op" id="6008532">]</span><span class="ident" id="6008533">ast</span><span class="op" id="6008536">.</span><span class="ident" id="6008537">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008554">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008568">for</span>&nbsp;<span class="ident" id="6008572">_</span><span class="op" id="6008573">,</span>&nbsp;<span class="ident" id="6008575">s</span>&nbsp;<span class="op" id="6008577">:=</span>&nbsp;<span class="keyword" id="6008580">range</span>&nbsp;<span class="ident" id="6008586">file</span><span class="op" id="6008590">.</span><span class="ident" id="6008591">Imports</span>&nbsp;<span class="op" id="6008599">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008603">p</span><span class="op" id="6008604">,</span>&nbsp;<span class="ident" id="6008606">err</span>&nbsp;<span class="op" id="6008610">:=</span>&nbsp;<span class="ident" id="6008613">strconv</span><span class="op" id="6008620">.</span><span class="ident" id="6008621">Unquote</span><span class="op" id="6008628">(</span><span class="ident" id="6008629">s</span><span class="op" id="6008630">.</span><span class="ident" id="6008631">Path</span><span class="op" id="6008635">.</span><span class="ident" id="6008636">Value</span><span class="op" id="6008641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008645">if</span>&nbsp;<span class="ident" id="6008648">err</span>&nbsp;<span class="op" id="6008652">!=</span>&nbsp;<span class="ident" id="6008655">nil</span>&nbsp;<span class="op" id="6008659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008679">n</span>&nbsp;<span class="op" id="6008681">:=</span>&nbsp;<span class="ident" id="6008684">path</span><span class="op" id="6008688">.</span><span class="ident" id="6008689">Base</span><span class="op" id="6008693">(</span><span class="ident" id="6008694">p</span><span class="op" id="6008695">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008699">if</span>&nbsp;<span class="ident" id="6008702">s</span><span class="op" id="6008703">.</span><span class="ident" id="6008704">Name</span>&nbsp;<span class="op" id="6008709">!=</span>&nbsp;<span class="ident" id="6008712">nil</span>&nbsp;<span class="op" id="6008716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008721">n</span>&nbsp;<span class="op" id="6008723">=</span>&nbsp;<span class="ident" id="6008725">s</span><span class="op" id="6008726">.</span><span class="ident" id="6008727">Name</span><span class="op" id="6008731">.</span><span class="ident" id="6008732">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008740">switch</span>&nbsp;<span class="ident" id="6008747">n</span>&nbsp;<span class="op" id="6008749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008754">case</span>&nbsp;<span class="string" id="6008759">&#34;_&#34;</span><span class="op" id="6008762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008768">blankImports</span>&nbsp;<span class="op" id="6008781">=</span>&nbsp;<span class="builtinfunc" id="6008783">append</span><span class="op" id="6008789">(</span><span class="ident" id="6008790">blankImports</span><span class="op" id="6008802">,</span>&nbsp;<span class="ident" id="6008804">s</span><span class="op" id="6008805">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008811">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008823">case</span>&nbsp;<span class="string" id="6008828">&#34;.&#34;</span><span class="op" id="6008831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008837">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008880">return</span>&nbsp;<span class="ident" id="6008887">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008894">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6008902">if</span>&nbsp;<span class="ident" id="6008905">unresolved</span><span class="op" id="6008915">[</span><span class="ident" id="6008916">n</span><span class="op" id="6008917">]</span>&nbsp;<span class="op" id="6008919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6008924">namedImports</span><span class="op" id="6008936">[</span><span class="ident" id="6008937">n</span><span class="op" id="6008938">]</span>&nbsp;<span class="op" id="6008940">=</span>&nbsp;<span class="ident" id="6008942">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6008947">delete</span><span class="op" id="6008953">(</span><span class="ident" id="6008954">unresolved</span><span class="op" id="6008964">,</span>&nbsp;<span class="ident" id="6008966">n</span><span class="op" id="6008967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008971">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6008974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6008978">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009046">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009090">if</span>&nbsp;<span class="builtinfunc" id="6009093">len</span><span class="op" id="6009096">(</span><span class="ident" id="6009097">unresolved</span><span class="op" id="6009107">)</span>&nbsp;<span class="op" id="6009109">&gt;</span>&nbsp;<span class="num" id="6009111">0</span>&nbsp;<span class="op" id="6009113">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009117">return</span>&nbsp;<span class="ident" id="6009124">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009133">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009187">var</span>&nbsp;<span class="ident" id="6009191">comments</span>&nbsp;<span class="op" id="6009200">[</span><span class="op" id="6009201">]</span><span class="op" id="6009202">*</span><span class="ident" id="6009203">ast</span><span class="op" id="6009206">.</span><span class="ident" id="6009207">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009221">for</span>&nbsp;<span class="ident" id="6009225">_</span><span class="op" id="6009226">,</span>&nbsp;<span class="ident" id="6009228">s</span>&nbsp;<span class="op" id="6009230">:=</span>&nbsp;<span class="keyword" id="6009233">range</span>&nbsp;<span class="ident" id="6009239">blankImports</span>&nbsp;<span class="op" id="6009252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009256">if</span>&nbsp;<span class="ident" id="6009259">c</span>&nbsp;<span class="op" id="6009261">:=</span>&nbsp;<span class="ident" id="6009264">s</span><span class="op" id="6009265">.</span><span class="op" id="6009266">(</span><span class="op" id="6009267">*</span><span class="ident" id="6009268">ast</span><span class="op" id="6009271">.</span><span class="ident" id="6009272">ImportSpec</span><span class="op" id="6009282">)</span><span class="op" id="6009283">.</span><span class="ident" id="6009284">Doc</span><span class="op" id="6009287">;</span>&nbsp;<span class="ident" id="6009289">c</span>&nbsp;<span class="op" id="6009291">!=</span>&nbsp;<span class="ident" id="6009294">nil</span>&nbsp;<span class="op" id="6009298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009303">comments</span>&nbsp;<span class="op" id="6009312">=</span>&nbsp;<span class="builtinfunc" id="6009314">append</span><span class="op" id="6009320">(</span><span class="ident" id="6009321">comments</span><span class="op" id="6009329">,</span>&nbsp;<span class="ident" id="6009331">c</span><span class="op" id="6009332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009339">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009343">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009399">for</span>&nbsp;<span class="ident" id="6009403">_</span><span class="op" id="6009404">,</span>&nbsp;<span class="ident" id="6009406">c</span>&nbsp;<span class="op" id="6009408">:=</span>&nbsp;<span class="keyword" id="6009411">range</span>&nbsp;<span class="ident" id="6009417">file</span><span class="op" id="6009421">.</span><span class="ident" id="6009422">Comments</span>&nbsp;<span class="op" id="6009431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009435">if</span>&nbsp;<span class="ident" id="6009438">body</span><span class="op" id="6009442">.</span><span class="ident" id="6009443">Pos</span><span class="op" id="6009446">(</span><span class="op" id="6009447">)</span>&nbsp;<span class="op" id="6009449">&lt;=</span>&nbsp;<span class="ident" id="6009452">c</span><span class="op" id="6009453">.</span><span class="ident" id="6009454">Pos</span><span class="op" id="6009457">(</span><span class="op" id="6009458">)</span>&nbsp;<span class="op" id="6009460">&amp;&amp;</span>&nbsp;<span class="ident" id="6009463">c</span><span class="op" id="6009464">.</span><span class="ident" id="6009465">End</span><span class="op" id="6009468">(</span><span class="op" id="6009469">)</span>&nbsp;<span class="op" id="6009471">&lt;=</span>&nbsp;<span class="ident" id="6009474">body</span><span class="op" id="6009478">.</span><span class="ident" id="6009479">End</span><span class="op" id="6009482">(</span><span class="op" id="6009483">)</span>&nbsp;<span class="op" id="6009485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009490">comments</span>&nbsp;<span class="op" id="6009499">=</span>&nbsp;<span class="builtinfunc" id="6009501">append</span><span class="op" id="6009507">(</span><span class="ident" id="6009508">comments</span><span class="op" id="6009516">,</span>&nbsp;<span class="ident" id="6009518">c</span><span class="op" id="6009519">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009530">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009588">body</span><span class="op" id="6009592">,</span>&nbsp;<span class="ident" id="6009594">comments</span>&nbsp;<span class="op" id="6009603">=</span>&nbsp;<span class="ident" id="6009605">stripOutputComment</span><span class="op" id="6009623">(</span><span class="ident" id="6009624">body</span><span class="op" id="6009628">,</span>&nbsp;<span class="ident" id="6009630">comments</span><span class="op" id="6009638">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6009642">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009677">importDecl</span>&nbsp;<span class="op" id="6009688">:=</span>&nbsp;<span class="op" id="6009691">&amp;</span><span class="ident" id="6009692">ast</span><span class="op" id="6009695">.</span><span class="ident" id="6009696">GenDecl</span><span class="op" id="6009703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009707">Tok</span><span class="op" id="6009710">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009715">token</span><span class="op" id="6009720">.</span><span class="ident" id="6009721">IMPORT</span><span class="op" id="6009727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009731">Lparen</span><span class="op" id="6009737">:</span>&nbsp;<span class="num" id="6009739">1</span><span class="op" id="6009740">,</span>&nbsp;<span class="comment" id="6009742">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009795">Rparen</span><span class="op" id="6009801">:</span>&nbsp;<span class="num" id="6009803">1</span><span class="op" id="6009804">,</span>&nbsp;<span class="comment" id="6009806">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6009844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009847">for</span>&nbsp;<span class="ident" id="6009851">n</span><span class="op" id="6009852">,</span>&nbsp;<span class="ident" id="6009854">p</span>&nbsp;<span class="op" id="6009856">:=</span>&nbsp;<span class="keyword" id="6009859">range</span>&nbsp;<span class="ident" id="6009865">namedImports</span>&nbsp;<span class="op" id="6009878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009882">s</span>&nbsp;<span class="op" id="6009884">:=</span>&nbsp;<span class="op" id="6009887">&amp;</span><span class="ident" id="6009888">ast</span><span class="op" id="6009891">.</span><span class="ident" id="6009892">ImportSpec</span><span class="op" id="6009902">{</span><span class="ident" id="6009903">Path</span><span class="op" id="6009907">:</span>&nbsp;<span class="op" id="6009909">&amp;</span><span class="ident" id="6009910">ast</span><span class="op" id="6009913">.</span><span class="ident" id="6009914">BasicLit</span><span class="op" id="6009922">{</span><span class="ident" id="6009923">Value</span><span class="op" id="6009928">:</span>&nbsp;<span class="ident" id="6009930">strconv</span><span class="op" id="6009937">.</span><span class="ident" id="6009938">Quote</span><span class="op" id="6009943">(</span><span class="ident" id="6009944">p</span><span class="op" id="6009945">)</span><span class="op" id="6009946">}</span><span class="op" id="6009947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6009951">if</span>&nbsp;<span class="ident" id="6009954">path</span><span class="op" id="6009958">.</span><span class="ident" id="6009959">Base</span><span class="op" id="6009963">(</span><span class="ident" id="6009964">p</span><span class="op" id="6009965">)</span>&nbsp;<span class="op" id="6009967">!=</span>&nbsp;<span class="ident" id="6009970">n</span>&nbsp;<span class="op" id="6009972">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6009977">s</span><span class="op" id="6009978">.</span><span class="ident" id="6009979">Name</span>&nbsp;<span class="op" id="6009984">=</span>&nbsp;<span class="ident" id="6009986">ast</span><span class="op" id="6009989">.</span><span class="ident" id="6009990">NewIdent</span><span class="op" id="6009998">(</span><span class="ident" id="6009999">n</span><span class="op" id="6010000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010008">importDecl</span><span class="op" id="6010018">.</span><span class="ident" id="6010019">Specs</span>&nbsp;<span class="op" id="6010025">=</span>&nbsp;<span class="builtinfunc" id="6010027">append</span><span class="op" id="6010033">(</span><span class="ident" id="6010034">importDecl</span><span class="op" id="6010044">.</span><span class="ident" id="6010045">Specs</span><span class="op" id="6010050">,</span>&nbsp;<span class="ident" id="6010052">s</span><span class="op" id="6010053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010059">importDecl</span><span class="op" id="6010069">.</span><span class="ident" id="6010070">Specs</span>&nbsp;<span class="op" id="6010076">=</span>&nbsp;<span class="builtinfunc" id="6010078">append</span><span class="op" id="6010084">(</span><span class="ident" id="6010085">importDecl</span><span class="op" id="6010095">.</span><span class="ident" id="6010096">Specs</span><span class="op" id="6010101">,</span>&nbsp;<span class="ident" id="6010103">blankImports</span><span class="op" id="6010115">...</span><span class="op" id="6010118">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6010122">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010152">funcDecl</span>&nbsp;<span class="op" id="6010161">:=</span>&nbsp;<span class="op" id="6010164">&amp;</span><span class="ident" id="6010165">ast</span><span class="op" id="6010168">.</span><span class="ident" id="6010169">FuncDecl</span><span class="op" id="6010177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010181">Name</span><span class="op" id="6010185">:</span>&nbsp;<span class="ident" id="6010187">ast</span><span class="op" id="6010190">.</span><span class="ident" id="6010191">NewIdent</span><span class="op" id="6010199">(</span><span class="string" id="6010200">&#34;main&#34;</span><span class="op" id="6010206">)</span><span class="op" id="6010207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010211">Type</span><span class="op" id="6010215">:</span>&nbsp;<span class="op" id="6010217">&amp;</span><span class="ident" id="6010218">ast</span><span class="op" id="6010221">.</span><span class="ident" id="6010222">FuncType</span><span class="op" id="6010230">{</span><span class="ident" id="6010231">Params</span><span class="op" id="6010237">:</span>&nbsp;<span class="op" id="6010239">&amp;</span><span class="ident" id="6010240">ast</span><span class="op" id="6010243">.</span><span class="ident" id="6010244">FieldList</span><span class="op" id="6010253">{</span><span class="op" id="6010254">}</span><span class="op" id="6010255">}</span><span class="op" id="6010256">,</span>&nbsp;<span class="comment" id="6010258">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010295">Body</span><span class="op" id="6010299">:</span>&nbsp;<span class="ident" id="6010301">body</span><span class="op" id="6010305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6010312">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010333">return</span>&nbsp;<span class="op" id="6010340">&amp;</span><span class="ident" id="6010341">ast</span><span class="op" id="6010344">.</span><span class="ident" id="6010345">File</span><span class="op" id="6010349">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010353">Name</span><span class="op" id="6010357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010363">ast</span><span class="op" id="6010366">.</span><span class="ident" id="6010367">NewIdent</span><span class="op" id="6010375">(</span><span class="string" id="6010376">&#34;main&#34;</span><span class="op" id="6010382">)</span><span class="op" id="6010383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010387">Decls</span><span class="op" id="6010392">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010397">[</span><span class="op" id="6010398">]</span><span class="ident" id="6010399">ast</span><span class="op" id="6010402">.</span><span class="ident" id="6010403">Decl</span><span class="op" id="6010407">{</span><span class="ident" id="6010408">importDecl</span><span class="op" id="6010418">,</span>&nbsp;<span class="ident" id="6010420">funcDecl</span><span class="op" id="6010428">}</span><span class="op" id="6010429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010433">Comments</span><span class="op" id="6010441">:</span>&nbsp;<span class="ident" id="6010443">comments</span><span class="op" id="6010451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010454">}</span><br>
<span class="lineno"></span><span class="op" id="6010456">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="6010459">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="6010537">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="6010596">func</span>&nbsp;<span class="ident" id="6010601">playExampleFile</span><span class="op" id="6010616">(</span><span class="ident" id="6010617">file</span>&nbsp;<span class="op" id="6010622">*</span><span class="ident" id="6010623">ast</span><span class="op" id="6010626">.</span><span class="ident" id="6010627">File</span><span class="op" id="6010631">)</span>&nbsp;<span class="op" id="6010633">*</span><span class="ident" id="6010634">ast</span><span class="op" id="6010637">.</span><span class="ident" id="6010638">File</span>&nbsp;<span class="op" id="6010643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6010646">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010686">comments</span>&nbsp;<span class="op" id="6010695">:=</span>&nbsp;<span class="ident" id="6010698">file</span><span class="op" id="6010702">.</span><span class="ident" id="6010703">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010713">if</span>&nbsp;<span class="builtinfunc" id="6010716">len</span><span class="op" id="6010719">(</span><span class="ident" id="6010720">comments</span><span class="op" id="6010728">)</span>&nbsp;<span class="op" id="6010730">&gt;</span>&nbsp;<span class="num" id="6010732">0</span>&nbsp;<span class="op" id="6010734">&amp;&amp;</span>&nbsp;<span class="ident" id="6010737">strings</span><span class="op" id="6010744">.</span><span class="ident" id="6010745">HasPrefix</span><span class="op" id="6010754">(</span><span class="ident" id="6010755">comments</span><span class="op" id="6010763">[</span><span class="num" id="6010764">0</span><span class="op" id="6010765">]</span><span class="op" id="6010766">.</span><span class="ident" id="6010767">Text</span><span class="op" id="6010771">(</span><span class="op" id="6010772">)</span><span class="op" id="6010773">,</span>&nbsp;<span class="string" id="6010775">&#34;Copyright&#34;</span><span class="op" id="6010786">)</span>&nbsp;<span class="op" id="6010788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6010792">comments</span>&nbsp;<span class="op" id="6010801">=</span>&nbsp;<span class="ident" id="6010803">comments</span><span class="op" id="6010811">[</span><span class="num" id="6010812">1</span><span class="op" id="6010813">:</span><span class="op" id="6010814">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6010817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6010821">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010890">var</span>&nbsp;<span class="ident" id="6010894">decls</span>&nbsp;<span class="op" id="6010900">[</span><span class="op" id="6010901">]</span><span class="ident" id="6010902">ast</span><span class="op" id="6010905">.</span><span class="ident" id="6010906">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010912">for</span>&nbsp;<span class="ident" id="6010916">_</span><span class="op" id="6010917">,</span>&nbsp;<span class="ident" id="6010919">d</span>&nbsp;<span class="op" id="6010921">:=</span>&nbsp;<span class="keyword" id="6010924">range</span>&nbsp;<span class="ident" id="6010930">file</span><span class="op" id="6010934">.</span><span class="ident" id="6010935">Decls</span>&nbsp;<span class="op" id="6010941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6010945">if</span>&nbsp;<span class="ident" id="6010948">f</span><span class="op" id="6010949">,</span>&nbsp;<span class="ident" id="6010951">ok</span>&nbsp;<span class="op" id="6010954">:=</span>&nbsp;<span class="ident" id="6010957">d</span><span class="op" id="6010958">.</span><span class="op" id="6010959">(</span><span class="op" id="6010960">*</span><span class="ident" id="6010961">ast</span><span class="op" id="6010964">.</span><span class="ident" id="6010965">FuncDecl</span><span class="op" id="6010973">)</span><span class="op" id="6010974">;</span>&nbsp;<span class="ident" id="6010976">ok</span>&nbsp;<span class="op" id="6010979">&amp;&amp;</span>&nbsp;<span class="ident" id="6010982">isTest</span><span class="op" id="6010988">(</span><span class="ident" id="6010989">f</span><span class="op" id="6010990">.</span><span class="ident" id="6010991">Name</span><span class="op" id="6010995">.</span><span class="ident" id="6010996">Name</span><span class="op" id="6011000">,</span>&nbsp;<span class="string" id="6011002">&#34;Example&#34;</span><span class="op" id="6011011">)</span>&nbsp;<span class="op" id="6011013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6011018">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011072">newF</span>&nbsp;<span class="op" id="6011077">:=</span>&nbsp;<span class="op" id="6011080">*</span><span class="ident" id="6011081">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011086">newF</span><span class="op" id="6011090">.</span><span class="ident" id="6011091">Name</span>&nbsp;<span class="op" id="6011096">=</span>&nbsp;<span class="ident" id="6011098">ast</span><span class="op" id="6011101">.</span><span class="ident" id="6011102">NewIdent</span><span class="op" id="6011110">(</span><span class="string" id="6011111">&#34;main&#34;</span><span class="op" id="6011117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011122">newF</span><span class="op" id="6011126">.</span><span class="ident" id="6011127">Body</span><span class="op" id="6011131">,</span>&nbsp;<span class="ident" id="6011133">comments</span>&nbsp;<span class="op" id="6011142">=</span>&nbsp;<span class="ident" id="6011144">stripOutputComment</span><span class="op" id="6011162">(</span><span class="ident" id="6011163">f</span><span class="op" id="6011164">.</span><span class="ident" id="6011165">Body</span><span class="op" id="6011169">,</span>&nbsp;<span class="ident" id="6011171">comments</span><span class="op" id="6011179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011184">d</span>&nbsp;<span class="op" id="6011186">=</span>&nbsp;<span class="op" id="6011188">&amp;</span><span class="ident" id="6011189">newF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6011196">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011200">decls</span>&nbsp;<span class="op" id="6011206">=</span>&nbsp;<span class="builtinfunc" id="6011208">append</span><span class="op" id="6011214">(</span><span class="ident" id="6011215">decls</span><span class="op" id="6011220">,</span>&nbsp;<span class="ident" id="6011222">d</span><span class="op" id="6011223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6011226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6011230">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011278">f</span>&nbsp;<span class="op" id="6011280">:=</span>&nbsp;<span class="op" id="6011283">*</span><span class="ident" id="6011284">file</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011290">f</span><span class="op" id="6011291">.</span><span class="ident" id="6011292">Name</span>&nbsp;<span class="op" id="6011297">=</span>&nbsp;<span class="ident" id="6011299">ast</span><span class="op" id="6011302">.</span><span class="ident" id="6011303">NewIdent</span><span class="op" id="6011311">(</span><span class="string" id="6011312">&#34;main&#34;</span><span class="op" id="6011318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011321">f</span><span class="op" id="6011322">.</span><span class="ident" id="6011323">Decls</span>&nbsp;<span class="op" id="6011329">=</span>&nbsp;<span class="ident" id="6011331">decls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011338">f</span><span class="op" id="6011339">.</span><span class="ident" id="6011340">Comments</span>&nbsp;<span class="op" id="6011349">=</span>&nbsp;<span class="ident" id="6011351">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6011361">return</span>&nbsp;<span class="op" id="6011368">&amp;</span><span class="ident" id="6011369">f</span><br>
<span class="lineno"></span><span class="op" id="6011371">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6011374">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="6011445">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="6011505">func</span>&nbsp;<span class="ident" id="6011510">stripOutputComment</span><span class="op" id="6011528">(</span><span class="ident" id="6011529">body</span>&nbsp;<span class="op" id="6011534">*</span><span class="ident" id="6011535">ast</span><span class="op" id="6011538">.</span><span class="ident" id="6011539">BlockStmt</span><span class="op" id="6011548">,</span>&nbsp;<span class="ident" id="6011550">comments</span>&nbsp;<span class="op" id="6011559">[</span><span class="op" id="6011560">]</span><span class="op" id="6011561">*</span><span class="ident" id="6011562">ast</span><span class="op" id="6011565">.</span><span class="ident" id="6011566">CommentGroup</span><span class="op" id="6011578">)</span>&nbsp;<span class="op" id="6011580">(</span><span class="op" id="6011581">*</span><span class="ident" id="6011582">ast</span><span class="op" id="6011585">.</span><span class="ident" id="6011586">BlockStmt</span><span class="op" id="6011595">,</span>&nbsp;<span class="op" id="6011597">[</span><span class="op" id="6011598">]</span><span class="op" id="6011599">*</span><span class="ident" id="6011600">ast</span><span class="op" id="6011603">.</span><span class="ident" id="6011604">CommentGroup</span><span class="op" id="6011616">)</span>&nbsp;<span class="op" id="6011618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6011621">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011667">i</span><span class="op" id="6011668">,</span>&nbsp;<span class="ident" id="6011670">last</span>&nbsp;<span class="op" id="6011675">:=</span>&nbsp;<span class="ident" id="6011678">lastComment</span><span class="op" id="6011689">(</span><span class="ident" id="6011690">body</span><span class="op" id="6011694">,</span>&nbsp;<span class="ident" id="6011696">comments</span><span class="op" id="6011704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6011707">if</span>&nbsp;<span class="ident" id="6011710">last</span>&nbsp;<span class="op" id="6011715">==</span>&nbsp;<span class="ident" id="6011718">nil</span>&nbsp;<span class="op" id="6011722">||</span>&nbsp;<span class="op" id="6011725">!</span><span class="ident" id="6011726">outputPrefix</span><span class="op" id="6011738">.</span><span class="ident" id="6011739">MatchString</span><span class="op" id="6011750">(</span><span class="ident" id="6011751">last</span><span class="op" id="6011755">.</span><span class="ident" id="6011756">Text</span><span class="op" id="6011760">(</span><span class="op" id="6011761">)</span><span class="op" id="6011762">)</span>&nbsp;<span class="op" id="6011764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6011768">return</span>&nbsp;<span class="ident" id="6011775">body</span><span class="op" id="6011779">,</span>&nbsp;<span class="ident" id="6011781">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6011791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6011795">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011863">newBody</span>&nbsp;<span class="op" id="6011871">:=</span>&nbsp;<span class="op" id="6011874">&amp;</span><span class="ident" id="6011875">ast</span><span class="op" id="6011878">.</span><span class="ident" id="6011879">BlockStmt</span><span class="op" id="6011888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011892">Lbrace</span><span class="op" id="6011898">:</span>&nbsp;<span class="ident" id="6011900">body</span><span class="op" id="6011904">.</span><span class="ident" id="6011905">Lbrace</span><span class="op" id="6011911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011915">List</span><span class="op" id="6011919">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6011923">body</span><span class="op" id="6011927">.</span><span class="ident" id="6011928">List</span><span class="op" id="6011932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011936">Rbrace</span><span class="op" id="6011942">:</span>&nbsp;<span class="ident" id="6011944">last</span><span class="op" id="6011948">.</span><span class="ident" id="6011949">Pos</span><span class="op" id="6011952">(</span><span class="op" id="6011953">)</span><span class="op" id="6011954">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6011957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6011960">newComments</span>&nbsp;<span class="op" id="6011972">:=</span>&nbsp;<span class="builtinfunc" id="6011975">make</span><span class="op" id="6011979">(</span><span class="op" id="6011980">[</span><span class="op" id="6011981">]</span><span class="op" id="6011982">*</span><span class="ident" id="6011983">ast</span><span class="op" id="6011986">.</span><span class="ident" id="6011987">CommentGroup</span><span class="op" id="6011999">,</span>&nbsp;<span class="builtinfunc" id="6012001">len</span><span class="op" id="6012004">(</span><span class="ident" id="6012005">comments</span><span class="op" id="6012013">)</span><span class="op" id="6012014">-</span><span class="num" id="6012015">1</span><span class="op" id="6012016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6012019">copy</span><span class="op" id="6012023">(</span><span class="ident" id="6012024">newComments</span><span class="op" id="6012035">,</span>&nbsp;<span class="ident" id="6012037">comments</span><span class="op" id="6012045">[</span><span class="op" id="6012046">:</span><span class="ident" id="6012047">i</span><span class="op" id="6012048">]</span><span class="op" id="6012049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6012052">copy</span><span class="op" id="6012056">(</span><span class="ident" id="6012057">newComments</span><span class="op" id="6012068">[</span><span class="ident" id="6012069">i</span><span class="op" id="6012070">:</span><span class="op" id="6012071">]</span><span class="op" id="6012072">,</span>&nbsp;<span class="ident" id="6012074">comments</span><span class="op" id="6012082">[</span><span class="ident" id="6012083">i</span><span class="op" id="6012084">+</span><span class="num" id="6012085">1</span><span class="op" id="6012086">:</span><span class="op" id="6012087">]</span><span class="op" id="6012088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012091">return</span>&nbsp;<span class="ident" id="6012098">newBody</span><span class="op" id="6012105">,</span>&nbsp;<span class="ident" id="6012107">newComments</span><br>
<span class="lineno">340</span><span class="op" id="6012119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6012122">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="6012189">func</span>&nbsp;<span class="ident" id="6012194">lastComment</span><span class="op" id="6012205">(</span><span class="ident" id="6012206">b</span>&nbsp;<span class="op" id="6012208">*</span><span class="ident" id="6012209">ast</span><span class="op" id="6012212">.</span><span class="ident" id="6012213">BlockStmt</span><span class="op" id="6012222">,</span>&nbsp;<span class="ident" id="6012224">c</span>&nbsp;<span class="op" id="6012226">[</span><span class="op" id="6012227">]</span><span class="op" id="6012228">*</span><span class="ident" id="6012229">ast</span><span class="op" id="6012232">.</span><span class="ident" id="6012233">CommentGroup</span><span class="op" id="6012245">)</span>&nbsp;<span class="op" id="6012247">(</span><span class="ident" id="6012248">i</span>&nbsp;<span class="builtintype" id="6012250">int</span><span class="op" id="6012253">,</span>&nbsp;<span class="ident" id="6012255">last</span>&nbsp;<span class="op" id="6012260">*</span><span class="ident" id="6012261">ast</span><span class="op" id="6012264">.</span><span class="ident" id="6012265">CommentGroup</span><span class="op" id="6012277">)</span>&nbsp;<span class="op" id="6012279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6012282">pos</span><span class="op" id="6012285">,</span>&nbsp;<span class="ident" id="6012287">end</span>&nbsp;<span class="op" id="6012291">:=</span>&nbsp;<span class="ident" id="6012294">b</span><span class="op" id="6012295">.</span><span class="ident" id="6012296">Pos</span><span class="op" id="6012299">(</span><span class="op" id="6012300">)</span><span class="op" id="6012301">,</span>&nbsp;<span class="ident" id="6012303">b</span><span class="op" id="6012304">.</span><span class="ident" id="6012305">End</span><span class="op" id="6012308">(</span><span class="op" id="6012309">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012312">for</span>&nbsp;<span class="ident" id="6012316">j</span><span class="op" id="6012317">,</span>&nbsp;<span class="ident" id="6012319">cg</span>&nbsp;<span class="op" id="6012322">:=</span>&nbsp;<span class="keyword" id="6012325">range</span>&nbsp;<span class="ident" id="6012331">c</span>&nbsp;<span class="op" id="6012333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012337">if</span>&nbsp;<span class="ident" id="6012340">cg</span><span class="op" id="6012342">.</span><span class="ident" id="6012343">Pos</span><span class="op" id="6012346">(</span><span class="op" id="6012347">)</span>&nbsp;<span class="op" id="6012349">&lt;</span>&nbsp;<span class="ident" id="6012351">pos</span>&nbsp;<span class="op" id="6012355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012360">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6012371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012375">if</span>&nbsp;<span class="ident" id="6012378">cg</span><span class="op" id="6012380">.</span><span class="ident" id="6012381">End</span><span class="op" id="6012384">(</span><span class="op" id="6012385">)</span>&nbsp;<span class="op" id="6012387">&gt;</span>&nbsp;<span class="ident" id="6012389">end</span>&nbsp;<span class="op" id="6012393">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012398">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6012406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6012410">i</span><span class="op" id="6012411">,</span>&nbsp;<span class="ident" id="6012413">last</span>&nbsp;<span class="op" id="6012418">=</span>&nbsp;<span class="ident" id="6012420">j</span><span class="op" id="6012421">,</span>&nbsp;<span class="ident" id="6012423">cg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6012427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6012430">return</span><br>
<span class="lineno">355</span><span class="op" id="6012437">}</span>
</div>
</body>
</html>
