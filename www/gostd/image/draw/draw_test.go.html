<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8565983">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8566038">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8566092">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8566143">package</span>&nbsp;<span class="ident" id="8566151">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8566157">import</span>&nbsp;<span class="op" id="8566164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8566167">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8566176">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8566191">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8566204">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8566210">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8566220">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8566223">func</span>&nbsp;<span class="ident" id="8566228">eq</span><span class="op" id="8566230">(</span><span class="ident" id="8566231">c0</span><span class="op" id="8566233">,</span>&nbsp;<span class="ident" id="8566235">c1</span>&nbsp;<span class="ident" id="8566238">color</span><span class="op" id="8566243">.</span><span class="ident" id="8566244">Color</span><span class="op" id="8566249">)</span>&nbsp;<span class="builtintype" id="8566251">bool</span>&nbsp;<span class="op" id="8566256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566259">r0</span><span class="op" id="8566261">,</span>&nbsp;<span class="ident" id="8566263">g0</span><span class="op" id="8566265">,</span>&nbsp;<span class="ident" id="8566267">b0</span><span class="op" id="8566269">,</span>&nbsp;<span class="ident" id="8566271">a0</span>&nbsp;<span class="op" id="8566274">:=</span>&nbsp;<span class="ident" id="8566277">c0</span><span class="op" id="8566279">.</span><span class="ident" id="8566280">RGBA</span><span class="op" id="8566284">(</span><span class="op" id="8566285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566288">r1</span><span class="op" id="8566290">,</span>&nbsp;<span class="ident" id="8566292">g1</span><span class="op" id="8566294">,</span>&nbsp;<span class="ident" id="8566296">b1</span><span class="op" id="8566298">,</span>&nbsp;<span class="ident" id="8566300">a1</span>&nbsp;<span class="op" id="8566303">:=</span>&nbsp;<span class="ident" id="8566306">c1</span><span class="op" id="8566308">.</span><span class="ident" id="8566309">RGBA</span><span class="op" id="8566313">(</span><span class="op" id="8566314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566317">return</span>&nbsp;<span class="ident" id="8566324">r0</span>&nbsp;<span class="op" id="8566327">==</span>&nbsp;<span class="ident" id="8566330">r1</span>&nbsp;<span class="op" id="8566333">&amp;&amp;</span>&nbsp;<span class="ident" id="8566336">g0</span>&nbsp;<span class="op" id="8566339">==</span>&nbsp;<span class="ident" id="8566342">g1</span>&nbsp;<span class="op" id="8566345">&amp;&amp;</span>&nbsp;<span class="ident" id="8566348">b0</span>&nbsp;<span class="op" id="8566351">==</span>&nbsp;<span class="ident" id="8566354">b1</span>&nbsp;<span class="op" id="8566357">&amp;&amp;</span>&nbsp;<span class="ident" id="8566360">a0</span>&nbsp;<span class="op" id="8566363">==</span>&nbsp;<span class="ident" id="8566366">a1</span><br>
<span class="lineno"></span><span class="op" id="8566369">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8566372">func</span>&nbsp;<span class="ident" id="8566377">fillBlue</span><span class="op" id="8566385">(</span><span class="ident" id="8566386">alpha</span>&nbsp;<span class="builtintype" id="8566392">int</span><span class="op" id="8566395">)</span>&nbsp;<span class="ident" id="8566397">image</span><span class="op" id="8566402">.</span><span class="ident" id="8566403">Image</span>&nbsp;<span class="op" id="8566409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566412">return</span>&nbsp;<span class="ident" id="8566419">image</span><span class="op" id="8566424">.</span><span class="ident" id="8566425">NewUniform</span><span class="op" id="8566435">(</span><span class="ident" id="8566436">color</span><span class="op" id="8566441">.</span><span class="ident" id="8566442">RGBA</span><span class="op" id="8566446">{</span><span class="num" id="8566447">0</span><span class="op" id="8566448">,</span>&nbsp;<span class="num" id="8566450">0</span><span class="op" id="8566451">,</span>&nbsp;<span class="builtintype" id="8566453">uint8</span><span class="op" id="8566458">(</span><span class="ident" id="8566459">alpha</span><span class="op" id="8566464">)</span><span class="op" id="8566465">,</span>&nbsp;<span class="builtintype" id="8566467">uint8</span><span class="op" id="8566472">(</span><span class="ident" id="8566473">alpha</span><span class="op" id="8566478">)</span><span class="op" id="8566479">}</span><span class="op" id="8566480">)</span><br>
<span class="lineno"></span><span class="op" id="8566482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8566485">func</span>&nbsp;<span class="ident" id="8566490">fillAlpha</span><span class="op" id="8566499">(</span><span class="ident" id="8566500">alpha</span>&nbsp;<span class="builtintype" id="8566506">int</span><span class="op" id="8566509">)</span>&nbsp;<span class="ident" id="8566511">image</span><span class="op" id="8566516">.</span><span class="ident" id="8566517">Image</span>&nbsp;<span class="op" id="8566523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566526">return</span>&nbsp;<span class="ident" id="8566533">image</span><span class="op" id="8566538">.</span><span class="ident" id="8566539">NewUniform</span><span class="op" id="8566549">(</span><span class="ident" id="8566550">color</span><span class="op" id="8566555">.</span><span class="ident" id="8566556">Alpha</span><span class="op" id="8566561">{</span><span class="builtintype" id="8566562">uint8</span><span class="op" id="8566567">(</span><span class="ident" id="8566568">alpha</span><span class="op" id="8566573">)</span><span class="op" id="8566574">}</span><span class="op" id="8566575">)</span><br>
<span class="lineno"></span><span class="op" id="8566577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8566580">func</span>&nbsp;<span class="ident" id="8566585">vgradGreen</span><span class="op" id="8566595">(</span><span class="ident" id="8566596">alpha</span>&nbsp;<span class="builtintype" id="8566602">int</span><span class="op" id="8566605">)</span>&nbsp;<span class="ident" id="8566607">image</span><span class="op" id="8566612">.</span><span class="ident" id="8566613">Image</span>&nbsp;<span class="op" id="8566619">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566622">m</span>&nbsp;<span class="op" id="8566624">:=</span>&nbsp;<span class="ident" id="8566627">image</span><span class="op" id="8566632">.</span><span class="ident" id="8566633">NewRGBA</span><span class="op" id="8566640">(</span><span class="ident" id="8566641">image</span><span class="op" id="8566646">.</span><span class="ident" id="8566647">Rect</span><span class="op" id="8566651">(</span><span class="num" id="8566652">0</span><span class="op" id="8566653">,</span>&nbsp;<span class="num" id="8566655">0</span><span class="op" id="8566656">,</span>&nbsp;<span class="num" id="8566658">16</span><span class="op" id="8566660">,</span>&nbsp;<span class="num" id="8566662">16</span><span class="op" id="8566664">)</span><span class="op" id="8566665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566668">for</span>&nbsp;<span class="ident" id="8566672">y</span>&nbsp;<span class="op" id="8566674">:=</span>&nbsp;<span class="num" id="8566677">0</span><span class="op" id="8566678">;</span>&nbsp;<span class="ident" id="8566680">y</span>&nbsp;<span class="op" id="8566682">&lt;</span>&nbsp;<span class="num" id="8566684">16</span><span class="op" id="8566686">;</span>&nbsp;<span class="ident" id="8566688">y</span><span class="op" id="8566689">++</span>&nbsp;<span class="op" id="8566692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566696">for</span>&nbsp;<span class="ident" id="8566700">x</span>&nbsp;<span class="op" id="8566702">:=</span>&nbsp;<span class="num" id="8566705">0</span><span class="op" id="8566706">;</span>&nbsp;<span class="ident" id="8566708">x</span>&nbsp;<span class="op" id="8566710">&lt;</span>&nbsp;<span class="num" id="8566712">16</span><span class="op" id="8566714">;</span>&nbsp;<span class="ident" id="8566716">x</span><span class="op" id="8566717">++</span>&nbsp;<span class="op" id="8566720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566725">m</span><span class="op" id="8566726">.</span><span class="ident" id="8566727">Set</span><span class="op" id="8566730">(</span><span class="ident" id="8566731">x</span><span class="op" id="8566732">,</span>&nbsp;<span class="ident" id="8566734">y</span><span class="op" id="8566735">,</span>&nbsp;<span class="ident" id="8566737">color</span><span class="op" id="8566742">.</span><span class="ident" id="8566743">RGBA</span><span class="op" id="8566747">{</span><span class="num" id="8566748">0</span><span class="op" id="8566749">,</span>&nbsp;<span class="builtintype" id="8566751">uint8</span><span class="op" id="8566756">(</span><span class="ident" id="8566757">y</span>&nbsp;<span class="op" id="8566759">*</span>&nbsp;<span class="ident" id="8566761">alpha</span>&nbsp;<span class="op" id="8566767">/</span>&nbsp;<span class="num" id="8566769">15</span><span class="op" id="8566771">)</span><span class="op" id="8566772">,</span>&nbsp;<span class="num" id="8566774">0</span><span class="op" id="8566775">,</span>&nbsp;<span class="builtintype" id="8566777">uint8</span><span class="op" id="8566782">(</span><span class="ident" id="8566783">alpha</span><span class="op" id="8566788">)</span><span class="op" id="8566789">}</span><span class="op" id="8566790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566794">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8566797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566800">return</span>&nbsp;<span class="ident" id="8566807">m</span><br>
<span class="lineno"></span><span class="op" id="8566809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8566812">func</span>&nbsp;<span class="ident" id="8566817">vgradAlpha</span><span class="op" id="8566827">(</span><span class="ident" id="8566828">alpha</span>&nbsp;<span class="builtintype" id="8566834">int</span><span class="op" id="8566837">)</span>&nbsp;<span class="ident" id="8566839">image</span><span class="op" id="8566844">.</span><span class="ident" id="8566845">Image</span>&nbsp;<span class="op" id="8566851">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566854">m</span>&nbsp;<span class="op" id="8566856">:=</span>&nbsp;<span class="ident" id="8566859">image</span><span class="op" id="8566864">.</span><span class="ident" id="8566865">NewAlpha</span><span class="op" id="8566873">(</span><span class="ident" id="8566874">image</span><span class="op" id="8566879">.</span><span class="ident" id="8566880">Rect</span><span class="op" id="8566884">(</span><span class="num" id="8566885">0</span><span class="op" id="8566886">,</span>&nbsp;<span class="num" id="8566888">0</span><span class="op" id="8566889">,</span>&nbsp;<span class="num" id="8566891">16</span><span class="op" id="8566893">,</span>&nbsp;<span class="num" id="8566895">16</span><span class="op" id="8566897">)</span><span class="op" id="8566898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566901">for</span>&nbsp;<span class="ident" id="8566905">y</span>&nbsp;<span class="op" id="8566907">:=</span>&nbsp;<span class="num" id="8566910">0</span><span class="op" id="8566911">;</span>&nbsp;<span class="ident" id="8566913">y</span>&nbsp;<span class="op" id="8566915">&lt;</span>&nbsp;<span class="num" id="8566917">16</span><span class="op" id="8566919">;</span>&nbsp;<span class="ident" id="8566921">y</span><span class="op" id="8566922">++</span>&nbsp;<span class="op" id="8566925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8566929">for</span>&nbsp;<span class="ident" id="8566933">x</span>&nbsp;<span class="op" id="8566935">:=</span>&nbsp;<span class="num" id="8566938">0</span><span class="op" id="8566939">;</span>&nbsp;<span class="ident" id="8566941">x</span>&nbsp;<span class="op" id="8566943">&lt;</span>&nbsp;<span class="num" id="8566945">16</span><span class="op" id="8566947">;</span>&nbsp;<span class="ident" id="8566949">x</span><span class="op" id="8566950">++</span>&nbsp;<span class="op" id="8566953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8566958">m</span><span class="op" id="8566959">.</span><span class="ident" id="8566960">Set</span><span class="op" id="8566963">(</span><span class="ident" id="8566964">x</span><span class="op" id="8566965">,</span>&nbsp;<span class="ident" id="8566967">y</span><span class="op" id="8566968">,</span>&nbsp;<span class="ident" id="8566970">color</span><span class="op" id="8566975">.</span><span class="ident" id="8566976">Alpha</span><span class="op" id="8566981">{</span><span class="builtintype" id="8566982">uint8</span><span class="op" id="8566987">(</span><span class="ident" id="8566988">y</span>&nbsp;<span class="op" id="8566990">*</span>&nbsp;<span class="ident" id="8566992">alpha</span>&nbsp;<span class="op" id="8566998">/</span>&nbsp;<span class="num" id="8567000">15</span><span class="op" id="8567002">)</span><span class="op" id="8567003">}</span><span class="op" id="8567004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567008">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567014">return</span>&nbsp;<span class="ident" id="8567021">m</span><br>
<span class="lineno"></span><span class="op" id="8567023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8567026">func</span>&nbsp;<span class="ident" id="8567031">vgradGreenNRGBA</span><span class="op" id="8567046">(</span><span class="ident" id="8567047">alpha</span>&nbsp;<span class="builtintype" id="8567053">int</span><span class="op" id="8567056">)</span>&nbsp;<span class="ident" id="8567058">image</span><span class="op" id="8567063">.</span><span class="ident" id="8567064">Image</span>&nbsp;<span class="op" id="8567070">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567073">m</span>&nbsp;<span class="op" id="8567075">:=</span>&nbsp;<span class="ident" id="8567078">image</span><span class="op" id="8567083">.</span><span class="ident" id="8567084">NewNRGBA</span><span class="op" id="8567092">(</span><span class="ident" id="8567093">image</span><span class="op" id="8567098">.</span><span class="ident" id="8567099">Rect</span><span class="op" id="8567103">(</span><span class="num" id="8567104">0</span><span class="op" id="8567105">,</span>&nbsp;<span class="num" id="8567107">0</span><span class="op" id="8567108">,</span>&nbsp;<span class="num" id="8567110">16</span><span class="op" id="8567112">,</span>&nbsp;<span class="num" id="8567114">16</span><span class="op" id="8567116">)</span><span class="op" id="8567117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567120">for</span>&nbsp;<span class="ident" id="8567124">y</span>&nbsp;<span class="op" id="8567126">:=</span>&nbsp;<span class="num" id="8567129">0</span><span class="op" id="8567130">;</span>&nbsp;<span class="ident" id="8567132">y</span>&nbsp;<span class="op" id="8567134">&lt;</span>&nbsp;<span class="num" id="8567136">16</span><span class="op" id="8567138">;</span>&nbsp;<span class="ident" id="8567140">y</span><span class="op" id="8567141">++</span>&nbsp;<span class="op" id="8567144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567148">for</span>&nbsp;<span class="ident" id="8567152">x</span>&nbsp;<span class="op" id="8567154">:=</span>&nbsp;<span class="num" id="8567157">0</span><span class="op" id="8567158">;</span>&nbsp;<span class="ident" id="8567160">x</span>&nbsp;<span class="op" id="8567162">&lt;</span>&nbsp;<span class="num" id="8567164">16</span><span class="op" id="8567166">;</span>&nbsp;<span class="ident" id="8567168">x</span><span class="op" id="8567169">++</span>&nbsp;<span class="op" id="8567172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567177">m</span><span class="op" id="8567178">.</span><span class="ident" id="8567179">Set</span><span class="op" id="8567182">(</span><span class="ident" id="8567183">x</span><span class="op" id="8567184">,</span>&nbsp;<span class="ident" id="8567186">y</span><span class="op" id="8567187">,</span>&nbsp;<span class="ident" id="8567189">color</span><span class="op" id="8567194">.</span><span class="ident" id="8567195">RGBA</span><span class="op" id="8567199">{</span><span class="num" id="8567200">0</span><span class="op" id="8567201">,</span>&nbsp;<span class="builtintype" id="8567203">uint8</span><span class="op" id="8567208">(</span><span class="ident" id="8567209">y</span>&nbsp;<span class="op" id="8567211">*</span>&nbsp;<span class="num" id="8567213">0x11</span><span class="op" id="8567217">)</span><span class="op" id="8567218">,</span>&nbsp;<span class="num" id="8567220">0</span><span class="op" id="8567221">,</span>&nbsp;<span class="builtintype" id="8567223">uint8</span><span class="op" id="8567228">(</span><span class="ident" id="8567229">alpha</span><span class="op" id="8567234">)</span><span class="op" id="8567235">}</span><span class="op" id="8567236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567240">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567246">return</span>&nbsp;<span class="ident" id="8567253">m</span><br>
<span class="lineno"></span><span class="op" id="8567255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8567258">func</span>&nbsp;<span class="ident" id="8567263">vgradCr</span><span class="op" id="8567270">(</span><span class="op" id="8567271">)</span>&nbsp;<span class="ident" id="8567273">image</span><span class="op" id="8567278">.</span><span class="ident" id="8567279">Image</span>&nbsp;<span class="op" id="8567285">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567288">m</span>&nbsp;<span class="op" id="8567290">:=</span>&nbsp;<span class="op" id="8567293">&amp;</span><span class="ident" id="8567294">image</span><span class="op" id="8567299">.</span><span class="ident" id="8567300">YCbCr</span><span class="op" id="8567305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567309">Y</span><span class="op" id="8567310">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8567325">make</span><span class="op" id="8567329">(</span><span class="op" id="8567330">[</span><span class="op" id="8567331">]</span><span class="builtintype" id="8567332">byte</span><span class="op" id="8567336">,</span>&nbsp;<span class="num" id="8567338">16</span><span class="op" id="8567340">*</span><span class="num" id="8567341">16</span><span class="op" id="8567343">)</span><span class="op" id="8567344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567348">Cb</span><span class="op" id="8567350">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8567364">make</span><span class="op" id="8567368">(</span><span class="op" id="8567369">[</span><span class="op" id="8567370">]</span><span class="builtintype" id="8567371">byte</span><span class="op" id="8567375">,</span>&nbsp;<span class="num" id="8567377">16</span><span class="op" id="8567379">*</span><span class="num" id="8567380">16</span><span class="op" id="8567382">)</span><span class="op" id="8567383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567387">Cr</span><span class="op" id="8567389">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8567403">make</span><span class="op" id="8567407">(</span><span class="op" id="8567408">[</span><span class="op" id="8567409">]</span><span class="builtintype" id="8567410">byte</span><span class="op" id="8567414">,</span>&nbsp;<span class="num" id="8567416">16</span><span class="op" id="8567418">*</span><span class="num" id="8567419">16</span><span class="op" id="8567421">)</span><span class="op" id="8567422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567426">YStride</span><span class="op" id="8567433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8567442">16</span><span class="op" id="8567444">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567448">CStride</span><span class="op" id="8567455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8567464">16</span><span class="op" id="8567466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567470">SubsampleRatio</span><span class="op" id="8567484">:</span>&nbsp;<span class="ident" id="8567486">image</span><span class="op" id="8567491">.</span><span class="ident" id="8567492">YCbCrSubsampleRatio444</span><span class="op" id="8567514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567518">Rect</span><span class="op" id="8567522">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8567534">image</span><span class="op" id="8567539">.</span><span class="ident" id="8567540">Rect</span><span class="op" id="8567544">(</span><span class="num" id="8567545">0</span><span class="op" id="8567546">,</span>&nbsp;<span class="num" id="8567548">0</span><span class="op" id="8567549">,</span>&nbsp;<span class="num" id="8567551">16</span><span class="op" id="8567553">,</span>&nbsp;<span class="num" id="8567555">16</span><span class="op" id="8567557">)</span><span class="op" id="8567558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567564">for</span>&nbsp;<span class="ident" id="8567568">y</span>&nbsp;<span class="op" id="8567570">:=</span>&nbsp;<span class="num" id="8567573">0</span><span class="op" id="8567574">;</span>&nbsp;<span class="ident" id="8567576">y</span>&nbsp;<span class="op" id="8567578">&lt;</span>&nbsp;<span class="num" id="8567580">16</span><span class="op" id="8567582">;</span>&nbsp;<span class="ident" id="8567584">y</span><span class="op" id="8567585">++</span>&nbsp;<span class="op" id="8567588">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567592">for</span>&nbsp;<span class="ident" id="8567596">x</span>&nbsp;<span class="op" id="8567598">:=</span>&nbsp;<span class="num" id="8567601">0</span><span class="op" id="8567602">;</span>&nbsp;<span class="ident" id="8567604">x</span>&nbsp;<span class="op" id="8567606">&lt;</span>&nbsp;<span class="num" id="8567608">16</span><span class="op" id="8567610">;</span>&nbsp;<span class="ident" id="8567612">x</span><span class="op" id="8567613">++</span>&nbsp;<span class="op" id="8567616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567621">m</span><span class="op" id="8567622">.</span><span class="ident" id="8567623">Cr</span><span class="op" id="8567625">[</span><span class="ident" id="8567626">y</span><span class="op" id="8567627">*</span><span class="ident" id="8567628">m</span><span class="op" id="8567629">.</span><span class="ident" id="8567630">CStride</span><span class="op" id="8567637">+</span><span class="ident" id="8567638">x</span><span class="op" id="8567639">]</span>&nbsp;<span class="op" id="8567641">=</span>&nbsp;<span class="builtintype" id="8567643">uint8</span><span class="op" id="8567648">(</span><span class="ident" id="8567649">y</span>&nbsp;<span class="op" id="8567651">*</span>&nbsp;<span class="num" id="8567653">0x11</span><span class="op" id="8567657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567667">return</span>&nbsp;<span class="ident" id="8567674">m</span><br>
<span class="lineno">75</span><span class="op" id="8567676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8567679">func</span>&nbsp;<span class="ident" id="8567684">hgradRed</span><span class="op" id="8567692">(</span><span class="ident" id="8567693">alpha</span>&nbsp;<span class="builtintype" id="8567699">int</span><span class="op" id="8567702">)</span>&nbsp;<span class="ident" id="8567704">Image</span>&nbsp;<span class="op" id="8567710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567713">m</span>&nbsp;<span class="op" id="8567715">:=</span>&nbsp;<span class="ident" id="8567718">image</span><span class="op" id="8567723">.</span><span class="ident" id="8567724">NewRGBA</span><span class="op" id="8567731">(</span><span class="ident" id="8567732">image</span><span class="op" id="8567737">.</span><span class="ident" id="8567738">Rect</span><span class="op" id="8567742">(</span><span class="num" id="8567743">0</span><span class="op" id="8567744">,</span>&nbsp;<span class="num" id="8567746">0</span><span class="op" id="8567747">,</span>&nbsp;<span class="num" id="8567749">16</span><span class="op" id="8567751">,</span>&nbsp;<span class="num" id="8567753">16</span><span class="op" id="8567755">)</span><span class="op" id="8567756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567759">for</span>&nbsp;<span class="ident" id="8567763">y</span>&nbsp;<span class="op" id="8567765">:=</span>&nbsp;<span class="num" id="8567768">0</span><span class="op" id="8567769">;</span>&nbsp;<span class="ident" id="8567771">y</span>&nbsp;<span class="op" id="8567773">&lt;</span>&nbsp;<span class="num" id="8567775">16</span><span class="op" id="8567777">;</span>&nbsp;<span class="ident" id="8567779">y</span><span class="op" id="8567780">++</span>&nbsp;<span class="op" id="8567783">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567787">for</span>&nbsp;<span class="ident" id="8567791">x</span>&nbsp;<span class="op" id="8567793">:=</span>&nbsp;<span class="num" id="8567796">0</span><span class="op" id="8567797">;</span>&nbsp;<span class="ident" id="8567799">x</span>&nbsp;<span class="op" id="8567801">&lt;</span>&nbsp;<span class="num" id="8567803">16</span><span class="op" id="8567805">;</span>&nbsp;<span class="ident" id="8567807">x</span><span class="op" id="8567808">++</span>&nbsp;<span class="op" id="8567811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567816">m</span><span class="op" id="8567817">.</span><span class="ident" id="8567818">Set</span><span class="op" id="8567821">(</span><span class="ident" id="8567822">x</span><span class="op" id="8567823">,</span>&nbsp;<span class="ident" id="8567825">y</span><span class="op" id="8567826">,</span>&nbsp;<span class="ident" id="8567828">color</span><span class="op" id="8567833">.</span><span class="ident" id="8567834">RGBA</span><span class="op" id="8567838">{</span><span class="builtintype" id="8567839">uint8</span><span class="op" id="8567844">(</span><span class="ident" id="8567845">x</span>&nbsp;<span class="op" id="8567847">*</span>&nbsp;<span class="ident" id="8567849">alpha</span>&nbsp;<span class="op" id="8567855">/</span>&nbsp;<span class="num" id="8567857">15</span><span class="op" id="8567859">)</span><span class="op" id="8567860">,</span>&nbsp;<span class="num" id="8567862">0</span><span class="op" id="8567863">,</span>&nbsp;<span class="num" id="8567865">0</span><span class="op" id="8567866">,</span>&nbsp;<span class="builtintype" id="8567868">uint8</span><span class="op" id="8567873">(</span><span class="ident" id="8567874">alpha</span><span class="op" id="8567879">)</span><span class="op" id="8567880">}</span><span class="op" id="8567881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8567888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567891">return</span>&nbsp;<span class="ident" id="8567898">m</span><br>
<span class="lineno">85</span><span class="op" id="8567900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8567903">func</span>&nbsp;<span class="ident" id="8567908">gradYellow</span><span class="op" id="8567918">(</span><span class="ident" id="8567919">alpha</span>&nbsp;<span class="builtintype" id="8567925">int</span><span class="op" id="8567928">)</span>&nbsp;<span class="ident" id="8567930">Image</span>&nbsp;<span class="op" id="8567936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8567939">m</span>&nbsp;<span class="op" id="8567941">:=</span>&nbsp;<span class="ident" id="8567944">image</span><span class="op" id="8567949">.</span><span class="ident" id="8567950">NewRGBA</span><span class="op" id="8567957">(</span><span class="ident" id="8567958">image</span><span class="op" id="8567963">.</span><span class="ident" id="8567964">Rect</span><span class="op" id="8567968">(</span><span class="num" id="8567969">0</span><span class="op" id="8567970">,</span>&nbsp;<span class="num" id="8567972">0</span><span class="op" id="8567973">,</span>&nbsp;<span class="num" id="8567975">16</span><span class="op" id="8567977">,</span>&nbsp;<span class="num" id="8567979">16</span><span class="op" id="8567981">)</span><span class="op" id="8567982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8567985">for</span>&nbsp;<span class="ident" id="8567989">y</span>&nbsp;<span class="op" id="8567991">:=</span>&nbsp;<span class="num" id="8567994">0</span><span class="op" id="8567995">;</span>&nbsp;<span class="ident" id="8567997">y</span>&nbsp;<span class="op" id="8567999">&lt;</span>&nbsp;<span class="num" id="8568001">16</span><span class="op" id="8568003">;</span>&nbsp;<span class="ident" id="8568005">y</span><span class="op" id="8568006">++</span>&nbsp;<span class="op" id="8568009">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8568013">for</span>&nbsp;<span class="ident" id="8568017">x</span>&nbsp;<span class="op" id="8568019">:=</span>&nbsp;<span class="num" id="8568022">0</span><span class="op" id="8568023">;</span>&nbsp;<span class="ident" id="8568025">x</span>&nbsp;<span class="op" id="8568027">&lt;</span>&nbsp;<span class="num" id="8568029">16</span><span class="op" id="8568031">;</span>&nbsp;<span class="ident" id="8568033">x</span><span class="op" id="8568034">++</span>&nbsp;<span class="op" id="8568037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568042">m</span><span class="op" id="8568043">.</span><span class="ident" id="8568044">Set</span><span class="op" id="8568047">(</span><span class="ident" id="8568048">x</span><span class="op" id="8568049">,</span>&nbsp;<span class="ident" id="8568051">y</span><span class="op" id="8568052">,</span>&nbsp;<span class="ident" id="8568054">color</span><span class="op" id="8568059">.</span><span class="ident" id="8568060">RGBA</span><span class="op" id="8568064">{</span><span class="builtintype" id="8568065">uint8</span><span class="op" id="8568070">(</span><span class="ident" id="8568071">x</span>&nbsp;<span class="op" id="8568073">*</span>&nbsp;<span class="ident" id="8568075">alpha</span>&nbsp;<span class="op" id="8568081">/</span>&nbsp;<span class="num" id="8568083">15</span><span class="op" id="8568085">)</span><span class="op" id="8568086">,</span>&nbsp;<span class="builtintype" id="8568088">uint8</span><span class="op" id="8568093">(</span><span class="ident" id="8568094">y</span>&nbsp;<span class="op" id="8568096">*</span>&nbsp;<span class="ident" id="8568098">alpha</span>&nbsp;<span class="op" id="8568104">/</span>&nbsp;<span class="num" id="8568106">15</span><span class="op" id="8568108">)</span><span class="op" id="8568109">,</span>&nbsp;<span class="num" id="8568111">0</span><span class="op" id="8568112">,</span>&nbsp;<span class="builtintype" id="8568114">uint8</span><span class="op" id="8568119">(</span><span class="ident" id="8568120">alpha</span><span class="op" id="8568125">)</span><span class="op" id="8568126">}</span><span class="op" id="8568127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8568137">return</span>&nbsp;<span class="ident" id="8568144">m</span><br>
<span class="lineno">95</span><span class="op" id="8568146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8568149">type</span>&nbsp;<span class="ident" id="8568154">drawTest</span>&nbsp;<span class="keyword" id="8568163">struct</span>&nbsp;<span class="op" id="8568170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568173">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8568182">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568190">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8568199">image</span><span class="op" id="8568204">.</span><span class="ident" id="8568205">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568212">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8568221">image</span><span class="op" id="8568226">.</span><span class="ident" id="8568227">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568234">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8568243">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8568247">expected</span>&nbsp;<span class="ident" id="8568256">color</span><span class="op" id="8568261">.</span><span class="ident" id="8568262">Color</span><br>
<span class="lineno"></span><span class="op" id="8568268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8568271">var</span>&nbsp;<span class="ident" id="8568275">drawTests</span>&nbsp;<span class="op" id="8568285">=</span>&nbsp;<span class="op" id="8568287">[</span><span class="op" id="8568288">]</span><span class="ident" id="8568289">drawTest</span><span class="op" id="8568297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8568300">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568330">{</span><span class="string" id="8568331">&#34;nop&#34;</span><span class="op" id="8568336">,</span>&nbsp;<span class="ident" id="8568338">vgradGreen</span><span class="op" id="8568348">(</span><span class="num" id="8568349">255</span><span class="op" id="8568352">)</span><span class="op" id="8568353">,</span>&nbsp;<span class="ident" id="8568355">fillAlpha</span><span class="op" id="8568364">(</span><span class="num" id="8568365">0</span><span class="op" id="8568366">)</span><span class="op" id="8568367">,</span>&nbsp;<span class="ident" id="8568369">Over</span><span class="op" id="8568373">,</span>&nbsp;<span class="ident" id="8568375">color</span><span class="op" id="8568380">.</span><span class="ident" id="8568381">RGBA</span><span class="op" id="8568385">{</span><span class="num" id="8568386">136</span><span class="op" id="8568389">,</span>&nbsp;<span class="num" id="8568391">0</span><span class="op" id="8568392">,</span>&nbsp;<span class="num" id="8568394">0</span><span class="op" id="8568395">,</span>&nbsp;<span class="num" id="8568397">255</span><span class="op" id="8568400">}</span><span class="op" id="8568401">}</span><span class="op" id="8568402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568405">{</span><span class="string" id="8568406">&#34;clear&#34;</span><span class="op" id="8568413">,</span>&nbsp;<span class="ident" id="8568415">vgradGreen</span><span class="op" id="8568425">(</span><span class="num" id="8568426">255</span><span class="op" id="8568429">)</span><span class="op" id="8568430">,</span>&nbsp;<span class="ident" id="8568432">fillAlpha</span><span class="op" id="8568441">(</span><span class="num" id="8568442">0</span><span class="op" id="8568443">)</span><span class="op" id="8568444">,</span>&nbsp;<span class="ident" id="8568446">Src</span><span class="op" id="8568449">,</span>&nbsp;<span class="ident" id="8568451">color</span><span class="op" id="8568456">.</span><span class="ident" id="8568457">RGBA</span><span class="op" id="8568461">{</span><span class="num" id="8568462">0</span><span class="op" id="8568463">,</span>&nbsp;<span class="num" id="8568465">0</span><span class="op" id="8568466">,</span>&nbsp;<span class="num" id="8568468">0</span><span class="op" id="8568469">,</span>&nbsp;<span class="num" id="8568471">0</span><span class="op" id="8568472">}</span><span class="op" id="8568473">}</span><span class="op" id="8568474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8568477">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8568531">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8568556">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8568603">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568643">{</span><span class="string" id="8568644">&#34;fill&#34;</span><span class="op" id="8568650">,</span>&nbsp;<span class="ident" id="8568652">fillBlue</span><span class="op" id="8568660">(</span><span class="num" id="8568661">90</span><span class="op" id="8568663">)</span><span class="op" id="8568664">,</span>&nbsp;<span class="ident" id="8568666">fillAlpha</span><span class="op" id="8568675">(</span><span class="num" id="8568676">255</span><span class="op" id="8568679">)</span><span class="op" id="8568680">,</span>&nbsp;<span class="ident" id="8568682">Over</span><span class="op" id="8568686">,</span>&nbsp;<span class="ident" id="8568688">color</span><span class="op" id="8568693">.</span><span class="ident" id="8568694">RGBA</span><span class="op" id="8568698">{</span><span class="num" id="8568699">88</span><span class="op" id="8568701">,</span>&nbsp;<span class="num" id="8568703">0</span><span class="op" id="8568704">,</span>&nbsp;<span class="num" id="8568706">90</span><span class="op" id="8568708">,</span>&nbsp;<span class="num" id="8568710">255</span><span class="op" id="8568713">}</span><span class="op" id="8568714">}</span><span class="op" id="8568715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568718">{</span><span class="string" id="8568719">&#34;fillSrc&#34;</span><span class="op" id="8568728">,</span>&nbsp;<span class="ident" id="8568730">fillBlue</span><span class="op" id="8568738">(</span><span class="num" id="8568739">90</span><span class="op" id="8568741">)</span><span class="op" id="8568742">,</span>&nbsp;<span class="ident" id="8568744">fillAlpha</span><span class="op" id="8568753">(</span><span class="num" id="8568754">255</span><span class="op" id="8568757">)</span><span class="op" id="8568758">,</span>&nbsp;<span class="ident" id="8568760">Src</span><span class="op" id="8568763">,</span>&nbsp;<span class="ident" id="8568765">color</span><span class="op" id="8568770">.</span><span class="ident" id="8568771">RGBA</span><span class="op" id="8568775">{</span><span class="num" id="8568776">0</span><span class="op" id="8568777">,</span>&nbsp;<span class="num" id="8568779">0</span><span class="op" id="8568780">,</span>&nbsp;<span class="num" id="8568782">90</span><span class="op" id="8568784">,</span>&nbsp;<span class="num" id="8568786">90</span><span class="op" id="8568788">}</span><span class="op" id="8568789">}</span><span class="op" id="8568790">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568793">{</span><span class="string" id="8568794">&#34;fillAlpha&#34;</span><span class="op" id="8568805">,</span>&nbsp;<span class="ident" id="8568807">fillBlue</span><span class="op" id="8568815">(</span><span class="num" id="8568816">90</span><span class="op" id="8568818">)</span><span class="op" id="8568819">,</span>&nbsp;<span class="ident" id="8568821">fillAlpha</span><span class="op" id="8568830">(</span><span class="num" id="8568831">192</span><span class="op" id="8568834">)</span><span class="op" id="8568835">,</span>&nbsp;<span class="ident" id="8568837">Over</span><span class="op" id="8568841">,</span>&nbsp;<span class="ident" id="8568843">color</span><span class="op" id="8568848">.</span><span class="ident" id="8568849">RGBA</span><span class="op" id="8568853">{</span><span class="num" id="8568854">100</span><span class="op" id="8568857">,</span>&nbsp;<span class="num" id="8568859">0</span><span class="op" id="8568860">,</span>&nbsp;<span class="num" id="8568862">68</span><span class="op" id="8568864">,</span>&nbsp;<span class="num" id="8568866">255</span><span class="op" id="8568869">}</span><span class="op" id="8568870">}</span><span class="op" id="8568871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568874">{</span><span class="string" id="8568875">&#34;fillAlphaSrc&#34;</span><span class="op" id="8568889">,</span>&nbsp;<span class="ident" id="8568891">fillBlue</span><span class="op" id="8568899">(</span><span class="num" id="8568900">90</span><span class="op" id="8568902">)</span><span class="op" id="8568903">,</span>&nbsp;<span class="ident" id="8568905">fillAlpha</span><span class="op" id="8568914">(</span><span class="num" id="8568915">192</span><span class="op" id="8568918">)</span><span class="op" id="8568919">,</span>&nbsp;<span class="ident" id="8568921">Src</span><span class="op" id="8568924">,</span>&nbsp;<span class="ident" id="8568926">color</span><span class="op" id="8568931">.</span><span class="ident" id="8568932">RGBA</span><span class="op" id="8568936">{</span><span class="num" id="8568937">0</span><span class="op" id="8568938">,</span>&nbsp;<span class="num" id="8568940">0</span><span class="op" id="8568941">,</span>&nbsp;<span class="num" id="8568943">68</span><span class="op" id="8568945">,</span>&nbsp;<span class="num" id="8568947">68</span><span class="op" id="8568949">}</span><span class="op" id="8568950">}</span><span class="op" id="8568951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8568954">{</span><span class="string" id="8568955">&#34;fillNil&#34;</span><span class="op" id="8568964">,</span>&nbsp;<span class="ident" id="8568966">fillBlue</span><span class="op" id="8568974">(</span><span class="num" id="8568975">90</span><span class="op" id="8568977">)</span><span class="op" id="8568978">,</span>&nbsp;<span class="ident" id="8568980">nil</span><span class="op" id="8568983">,</span>&nbsp;<span class="ident" id="8568985">Over</span><span class="op" id="8568989">,</span>&nbsp;<span class="ident" id="8568991">color</span><span class="op" id="8568996">.</span><span class="ident" id="8568997">RGBA</span><span class="op" id="8569001">{</span><span class="num" id="8569002">88</span><span class="op" id="8569004">,</span>&nbsp;<span class="num" id="8569006">0</span><span class="op" id="8569007">,</span>&nbsp;<span class="num" id="8569009">90</span><span class="op" id="8569011">,</span>&nbsp;<span class="num" id="8569013">255</span><span class="op" id="8569016">}</span><span class="op" id="8569017">}</span><span class="op" id="8569018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569021">{</span><span class="string" id="8569022">&#34;fillNilSrc&#34;</span><span class="op" id="8569034">,</span>&nbsp;<span class="ident" id="8569036">fillBlue</span><span class="op" id="8569044">(</span><span class="num" id="8569045">90</span><span class="op" id="8569047">)</span><span class="op" id="8569048">,</span>&nbsp;<span class="ident" id="8569050">nil</span><span class="op" id="8569053">,</span>&nbsp;<span class="ident" id="8569055">Src</span><span class="op" id="8569058">,</span>&nbsp;<span class="ident" id="8569060">color</span><span class="op" id="8569065">.</span><span class="ident" id="8569066">RGBA</span><span class="op" id="8569070">{</span><span class="num" id="8569071">0</span><span class="op" id="8569072">,</span>&nbsp;<span class="num" id="8569074">0</span><span class="op" id="8569075">,</span>&nbsp;<span class="num" id="8569077">90</span><span class="op" id="8569079">,</span>&nbsp;<span class="num" id="8569081">90</span><span class="op" id="8569083">}</span><span class="op" id="8569084">}</span><span class="op" id="8569085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569088">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569143">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569168">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569215">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569255">{</span><span class="string" id="8569256">&#34;copy&#34;</span><span class="op" id="8569262">,</span>&nbsp;<span class="ident" id="8569264">vgradGreen</span><span class="op" id="8569274">(</span><span class="num" id="8569275">90</span><span class="op" id="8569277">)</span><span class="op" id="8569278">,</span>&nbsp;<span class="ident" id="8569280">fillAlpha</span><span class="op" id="8569289">(</span><span class="num" id="8569290">255</span><span class="op" id="8569293">)</span><span class="op" id="8569294">,</span>&nbsp;<span class="ident" id="8569296">Over</span><span class="op" id="8569300">,</span>&nbsp;<span class="ident" id="8569302">color</span><span class="op" id="8569307">.</span><span class="ident" id="8569308">RGBA</span><span class="op" id="8569312">{</span><span class="num" id="8569313">88</span><span class="op" id="8569315">,</span>&nbsp;<span class="num" id="8569317">48</span><span class="op" id="8569319">,</span>&nbsp;<span class="num" id="8569321">0</span><span class="op" id="8569322">,</span>&nbsp;<span class="num" id="8569324">255</span><span class="op" id="8569327">}</span><span class="op" id="8569328">}</span><span class="op" id="8569329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569332">{</span><span class="string" id="8569333">&#34;copySrc&#34;</span><span class="op" id="8569342">,</span>&nbsp;<span class="ident" id="8569344">vgradGreen</span><span class="op" id="8569354">(</span><span class="num" id="8569355">90</span><span class="op" id="8569357">)</span><span class="op" id="8569358">,</span>&nbsp;<span class="ident" id="8569360">fillAlpha</span><span class="op" id="8569369">(</span><span class="num" id="8569370">255</span><span class="op" id="8569373">)</span><span class="op" id="8569374">,</span>&nbsp;<span class="ident" id="8569376">Src</span><span class="op" id="8569379">,</span>&nbsp;<span class="ident" id="8569381">color</span><span class="op" id="8569386">.</span><span class="ident" id="8569387">RGBA</span><span class="op" id="8569391">{</span><span class="num" id="8569392">0</span><span class="op" id="8569393">,</span>&nbsp;<span class="num" id="8569395">48</span><span class="op" id="8569397">,</span>&nbsp;<span class="num" id="8569399">0</span><span class="op" id="8569400">,</span>&nbsp;<span class="num" id="8569402">90</span><span class="op" id="8569404">}</span><span class="op" id="8569405">}</span><span class="op" id="8569406">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569409">{</span><span class="string" id="8569410">&#34;copyAlpha&#34;</span><span class="op" id="8569421">,</span>&nbsp;<span class="ident" id="8569423">vgradGreen</span><span class="op" id="8569433">(</span><span class="num" id="8569434">90</span><span class="op" id="8569436">)</span><span class="op" id="8569437">,</span>&nbsp;<span class="ident" id="8569439">fillAlpha</span><span class="op" id="8569448">(</span><span class="num" id="8569449">192</span><span class="op" id="8569452">)</span><span class="op" id="8569453">,</span>&nbsp;<span class="ident" id="8569455">Over</span><span class="op" id="8569459">,</span>&nbsp;<span class="ident" id="8569461">color</span><span class="op" id="8569466">.</span><span class="ident" id="8569467">RGBA</span><span class="op" id="8569471">{</span><span class="num" id="8569472">100</span><span class="op" id="8569475">,</span>&nbsp;<span class="num" id="8569477">36</span><span class="op" id="8569479">,</span>&nbsp;<span class="num" id="8569481">0</span><span class="op" id="8569482">,</span>&nbsp;<span class="num" id="8569484">255</span><span class="op" id="8569487">}</span><span class="op" id="8569488">}</span><span class="op" id="8569489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569492">{</span><span class="string" id="8569493">&#34;copyAlphaSrc&#34;</span><span class="op" id="8569507">,</span>&nbsp;<span class="ident" id="8569509">vgradGreen</span><span class="op" id="8569519">(</span><span class="num" id="8569520">90</span><span class="op" id="8569522">)</span><span class="op" id="8569523">,</span>&nbsp;<span class="ident" id="8569525">fillAlpha</span><span class="op" id="8569534">(</span><span class="num" id="8569535">192</span><span class="op" id="8569538">)</span><span class="op" id="8569539">,</span>&nbsp;<span class="ident" id="8569541">Src</span><span class="op" id="8569544">,</span>&nbsp;<span class="ident" id="8569546">color</span><span class="op" id="8569551">.</span><span class="ident" id="8569552">RGBA</span><span class="op" id="8569556">{</span><span class="num" id="8569557">0</span><span class="op" id="8569558">,</span>&nbsp;<span class="num" id="8569560">36</span><span class="op" id="8569562">,</span>&nbsp;<span class="num" id="8569564">0</span><span class="op" id="8569565">,</span>&nbsp;<span class="num" id="8569567">68</span><span class="op" id="8569569">}</span><span class="op" id="8569570">}</span><span class="op" id="8569571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569574">{</span><span class="string" id="8569575">&#34;copyNil&#34;</span><span class="op" id="8569584">,</span>&nbsp;<span class="ident" id="8569586">vgradGreen</span><span class="op" id="8569596">(</span><span class="num" id="8569597">90</span><span class="op" id="8569599">)</span><span class="op" id="8569600">,</span>&nbsp;<span class="ident" id="8569602">nil</span><span class="op" id="8569605">,</span>&nbsp;<span class="ident" id="8569607">Over</span><span class="op" id="8569611">,</span>&nbsp;<span class="ident" id="8569613">color</span><span class="op" id="8569618">.</span><span class="ident" id="8569619">RGBA</span><span class="op" id="8569623">{</span><span class="num" id="8569624">88</span><span class="op" id="8569626">,</span>&nbsp;<span class="num" id="8569628">48</span><span class="op" id="8569630">,</span>&nbsp;<span class="num" id="8569632">0</span><span class="op" id="8569633">,</span>&nbsp;<span class="num" id="8569635">255</span><span class="op" id="8569638">}</span><span class="op" id="8569639">}</span><span class="op" id="8569640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8569643">{</span><span class="string" id="8569644">&#34;copyNilSrc&#34;</span><span class="op" id="8569656">,</span>&nbsp;<span class="ident" id="8569658">vgradGreen</span><span class="op" id="8569668">(</span><span class="num" id="8569669">90</span><span class="op" id="8569671">)</span><span class="op" id="8569672">,</span>&nbsp;<span class="ident" id="8569674">nil</span><span class="op" id="8569677">,</span>&nbsp;<span class="ident" id="8569679">Src</span><span class="op" id="8569682">,</span>&nbsp;<span class="ident" id="8569684">color</span><span class="op" id="8569689">.</span><span class="ident" id="8569690">RGBA</span><span class="op" id="8569694">{</span><span class="num" id="8569695">0</span><span class="op" id="8569696">,</span>&nbsp;<span class="num" id="8569698">48</span><span class="op" id="8569700">,</span>&nbsp;<span class="num" id="8569702">0</span><span class="op" id="8569703">,</span>&nbsp;<span class="num" id="8569705">90</span><span class="op" id="8569707">}</span><span class="op" id="8569708">}</span><span class="op" id="8569709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569712">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569773">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569798">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569845">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8569940">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570033">{</span><span class="string" id="8570034">&#34;nrgba&#34;</span><span class="op" id="8570041">,</span>&nbsp;<span class="ident" id="8570043">vgradGreenNRGBA</span><span class="op" id="8570058">(</span><span class="num" id="8570059">90</span><span class="op" id="8570061">)</span><span class="op" id="8570062">,</span>&nbsp;<span class="ident" id="8570064">fillAlpha</span><span class="op" id="8570073">(</span><span class="num" id="8570074">255</span><span class="op" id="8570077">)</span><span class="op" id="8570078">,</span>&nbsp;<span class="ident" id="8570080">Over</span><span class="op" id="8570084">,</span>&nbsp;<span class="ident" id="8570086">color</span><span class="op" id="8570091">.</span><span class="ident" id="8570092">RGBA</span><span class="op" id="8570096">{</span><span class="num" id="8570097">88</span><span class="op" id="8570099">,</span>&nbsp;<span class="num" id="8570101">46</span><span class="op" id="8570103">,</span>&nbsp;<span class="num" id="8570105">0</span><span class="op" id="8570106">,</span>&nbsp;<span class="num" id="8570108">255</span><span class="op" id="8570111">}</span><span class="op" id="8570112">}</span><span class="op" id="8570113">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570116">{</span><span class="string" id="8570117">&#34;nrgbaSrc&#34;</span><span class="op" id="8570127">,</span>&nbsp;<span class="ident" id="8570129">vgradGreenNRGBA</span><span class="op" id="8570144">(</span><span class="num" id="8570145">90</span><span class="op" id="8570147">)</span><span class="op" id="8570148">,</span>&nbsp;<span class="ident" id="8570150">fillAlpha</span><span class="op" id="8570159">(</span><span class="num" id="8570160">255</span><span class="op" id="8570163">)</span><span class="op" id="8570164">,</span>&nbsp;<span class="ident" id="8570166">Src</span><span class="op" id="8570169">,</span>&nbsp;<span class="ident" id="8570171">color</span><span class="op" id="8570176">.</span><span class="ident" id="8570177">RGBA</span><span class="op" id="8570181">{</span><span class="num" id="8570182">0</span><span class="op" id="8570183">,</span>&nbsp;<span class="num" id="8570185">46</span><span class="op" id="8570187">,</span>&nbsp;<span class="num" id="8570189">0</span><span class="op" id="8570190">,</span>&nbsp;<span class="num" id="8570192">90</span><span class="op" id="8570194">}</span><span class="op" id="8570195">}</span><span class="op" id="8570196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570199">{</span><span class="string" id="8570200">&#34;nrgbaAlpha&#34;</span><span class="op" id="8570212">,</span>&nbsp;<span class="ident" id="8570214">vgradGreenNRGBA</span><span class="op" id="8570229">(</span><span class="num" id="8570230">90</span><span class="op" id="8570232">)</span><span class="op" id="8570233">,</span>&nbsp;<span class="ident" id="8570235">fillAlpha</span><span class="op" id="8570244">(</span><span class="num" id="8570245">192</span><span class="op" id="8570248">)</span><span class="op" id="8570249">,</span>&nbsp;<span class="ident" id="8570251">Over</span><span class="op" id="8570255">,</span>&nbsp;<span class="ident" id="8570257">color</span><span class="op" id="8570262">.</span><span class="ident" id="8570263">RGBA</span><span class="op" id="8570267">{</span><span class="num" id="8570268">100</span><span class="op" id="8570271">,</span>&nbsp;<span class="num" id="8570273">34</span><span class="op" id="8570275">,</span>&nbsp;<span class="num" id="8570277">0</span><span class="op" id="8570278">,</span>&nbsp;<span class="num" id="8570280">255</span><span class="op" id="8570283">}</span><span class="op" id="8570284">}</span><span class="op" id="8570285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570288">{</span><span class="string" id="8570289">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="8570304">,</span>&nbsp;<span class="ident" id="8570306">vgradGreenNRGBA</span><span class="op" id="8570321">(</span><span class="num" id="8570322">90</span><span class="op" id="8570324">)</span><span class="op" id="8570325">,</span>&nbsp;<span class="ident" id="8570327">fillAlpha</span><span class="op" id="8570336">(</span><span class="num" id="8570337">192</span><span class="op" id="8570340">)</span><span class="op" id="8570341">,</span>&nbsp;<span class="ident" id="8570343">Src</span><span class="op" id="8570346">,</span>&nbsp;<span class="ident" id="8570348">color</span><span class="op" id="8570353">.</span><span class="ident" id="8570354">RGBA</span><span class="op" id="8570358">{</span><span class="num" id="8570359">0</span><span class="op" id="8570360">,</span>&nbsp;<span class="num" id="8570362">34</span><span class="op" id="8570364">,</span>&nbsp;<span class="num" id="8570366">0</span><span class="op" id="8570367">,</span>&nbsp;<span class="num" id="8570369">68</span><span class="op" id="8570371">}</span><span class="op" id="8570372">}</span><span class="op" id="8570373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570376">{</span><span class="string" id="8570377">&#34;nrgbaNil&#34;</span><span class="op" id="8570387">,</span>&nbsp;<span class="ident" id="8570389">vgradGreenNRGBA</span><span class="op" id="8570404">(</span><span class="num" id="8570405">90</span><span class="op" id="8570407">)</span><span class="op" id="8570408">,</span>&nbsp;<span class="ident" id="8570410">nil</span><span class="op" id="8570413">,</span>&nbsp;<span class="ident" id="8570415">Over</span><span class="op" id="8570419">,</span>&nbsp;<span class="ident" id="8570421">color</span><span class="op" id="8570426">.</span><span class="ident" id="8570427">RGBA</span><span class="op" id="8570431">{</span><span class="num" id="8570432">88</span><span class="op" id="8570434">,</span>&nbsp;<span class="num" id="8570436">46</span><span class="op" id="8570438">,</span>&nbsp;<span class="num" id="8570440">0</span><span class="op" id="8570441">,</span>&nbsp;<span class="num" id="8570443">255</span><span class="op" id="8570446">}</span><span class="op" id="8570447">}</span><span class="op" id="8570448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570451">{</span><span class="string" id="8570452">&#34;nrgbaNilSrc&#34;</span><span class="op" id="8570465">,</span>&nbsp;<span class="ident" id="8570467">vgradGreenNRGBA</span><span class="op" id="8570482">(</span><span class="num" id="8570483">90</span><span class="op" id="8570485">)</span><span class="op" id="8570486">,</span>&nbsp;<span class="ident" id="8570488">nil</span><span class="op" id="8570491">,</span>&nbsp;<span class="ident" id="8570493">Src</span><span class="op" id="8570496">,</span>&nbsp;<span class="ident" id="8570498">color</span><span class="op" id="8570503">.</span><span class="ident" id="8570504">RGBA</span><span class="op" id="8570508">{</span><span class="num" id="8570509">0</span><span class="op" id="8570510">,</span>&nbsp;<span class="num" id="8570512">46</span><span class="op" id="8570514">,</span>&nbsp;<span class="num" id="8570516">0</span><span class="op" id="8570517">,</span>&nbsp;<span class="num" id="8570519">90</span><span class="op" id="8570521">}</span><span class="op" id="8570522">}</span><span class="op" id="8570523">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8570526">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8570587">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8570612">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8570659">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570751">{</span><span class="string" id="8570752">&#34;ycbcr&#34;</span><span class="op" id="8570759">,</span>&nbsp;<span class="ident" id="8570761">vgradCr</span><span class="op" id="8570768">(</span><span class="op" id="8570769">)</span><span class="op" id="8570770">,</span>&nbsp;<span class="ident" id="8570772">fillAlpha</span><span class="op" id="8570781">(</span><span class="num" id="8570782">255</span><span class="op" id="8570785">)</span><span class="op" id="8570786">,</span>&nbsp;<span class="ident" id="8570788">Over</span><span class="op" id="8570792">,</span>&nbsp;<span class="ident" id="8570794">color</span><span class="op" id="8570799">.</span><span class="ident" id="8570800">RGBA</span><span class="op" id="8570804">{</span><span class="num" id="8570805">11</span><span class="op" id="8570807">,</span>&nbsp;<span class="num" id="8570809">38</span><span class="op" id="8570811">,</span>&nbsp;<span class="num" id="8570813">0</span><span class="op" id="8570814">,</span>&nbsp;<span class="num" id="8570816">255</span><span class="op" id="8570819">}</span><span class="op" id="8570820">}</span><span class="op" id="8570821">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570824">{</span><span class="string" id="8570825">&#34;ycbcrSrc&#34;</span><span class="op" id="8570835">,</span>&nbsp;<span class="ident" id="8570837">vgradCr</span><span class="op" id="8570844">(</span><span class="op" id="8570845">)</span><span class="op" id="8570846">,</span>&nbsp;<span class="ident" id="8570848">fillAlpha</span><span class="op" id="8570857">(</span><span class="num" id="8570858">255</span><span class="op" id="8570861">)</span><span class="op" id="8570862">,</span>&nbsp;<span class="ident" id="8570864">Src</span><span class="op" id="8570867">,</span>&nbsp;<span class="ident" id="8570869">color</span><span class="op" id="8570874">.</span><span class="ident" id="8570875">RGBA</span><span class="op" id="8570879">{</span><span class="num" id="8570880">11</span><span class="op" id="8570882">,</span>&nbsp;<span class="num" id="8570884">38</span><span class="op" id="8570886">,</span>&nbsp;<span class="num" id="8570888">0</span><span class="op" id="8570889">,</span>&nbsp;<span class="num" id="8570891">255</span><span class="op" id="8570894">}</span><span class="op" id="8570895">}</span><span class="op" id="8570896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570899">{</span><span class="string" id="8570900">&#34;ycbcrAlpha&#34;</span><span class="op" id="8570912">,</span>&nbsp;<span class="ident" id="8570914">vgradCr</span><span class="op" id="8570921">(</span><span class="op" id="8570922">)</span><span class="op" id="8570923">,</span>&nbsp;<span class="ident" id="8570925">fillAlpha</span><span class="op" id="8570934">(</span><span class="num" id="8570935">192</span><span class="op" id="8570938">)</span><span class="op" id="8570939">,</span>&nbsp;<span class="ident" id="8570941">Over</span><span class="op" id="8570945">,</span>&nbsp;<span class="ident" id="8570947">color</span><span class="op" id="8570952">.</span><span class="ident" id="8570953">RGBA</span><span class="op" id="8570957">{</span><span class="num" id="8570958">42</span><span class="op" id="8570960">,</span>&nbsp;<span class="num" id="8570962">28</span><span class="op" id="8570964">,</span>&nbsp;<span class="num" id="8570966">0</span><span class="op" id="8570967">,</span>&nbsp;<span class="num" id="8570969">255</span><span class="op" id="8570972">}</span><span class="op" id="8570973">}</span><span class="op" id="8570974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8570977">{</span><span class="string" id="8570978">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="8570993">,</span>&nbsp;<span class="ident" id="8570995">vgradCr</span><span class="op" id="8571002">(</span><span class="op" id="8571003">)</span><span class="op" id="8571004">,</span>&nbsp;<span class="ident" id="8571006">fillAlpha</span><span class="op" id="8571015">(</span><span class="num" id="8571016">192</span><span class="op" id="8571019">)</span><span class="op" id="8571020">,</span>&nbsp;<span class="ident" id="8571022">Src</span><span class="op" id="8571025">,</span>&nbsp;<span class="ident" id="8571027">color</span><span class="op" id="8571032">.</span><span class="ident" id="8571033">RGBA</span><span class="op" id="8571037">{</span><span class="num" id="8571038">8</span><span class="op" id="8571039">,</span>&nbsp;<span class="num" id="8571041">28</span><span class="op" id="8571043">,</span>&nbsp;<span class="num" id="8571045">0</span><span class="op" id="8571046">,</span>&nbsp;<span class="num" id="8571048">192</span><span class="op" id="8571051">}</span><span class="op" id="8571052">}</span><span class="op" id="8571053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8571056">{</span><span class="string" id="8571057">&#34;ycbcrNil&#34;</span><span class="op" id="8571067">,</span>&nbsp;<span class="ident" id="8571069">vgradCr</span><span class="op" id="8571076">(</span><span class="op" id="8571077">)</span><span class="op" id="8571078">,</span>&nbsp;<span class="ident" id="8571080">nil</span><span class="op" id="8571083">,</span>&nbsp;<span class="ident" id="8571085">Over</span><span class="op" id="8571089">,</span>&nbsp;<span class="ident" id="8571091">color</span><span class="op" id="8571096">.</span><span class="ident" id="8571097">RGBA</span><span class="op" id="8571101">{</span><span class="num" id="8571102">11</span><span class="op" id="8571104">,</span>&nbsp;<span class="num" id="8571106">38</span><span class="op" id="8571108">,</span>&nbsp;<span class="num" id="8571110">0</span><span class="op" id="8571111">,</span>&nbsp;<span class="num" id="8571113">255</span><span class="op" id="8571116">}</span><span class="op" id="8571117">}</span><span class="op" id="8571118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8571121">{</span><span class="string" id="8571122">&#34;ycbcrNilSrc&#34;</span><span class="op" id="8571135">,</span>&nbsp;<span class="ident" id="8571137">vgradCr</span><span class="op" id="8571144">(</span><span class="op" id="8571145">)</span><span class="op" id="8571146">,</span>&nbsp;<span class="ident" id="8571148">nil</span><span class="op" id="8571151">,</span>&nbsp;<span class="ident" id="8571153">Src</span><span class="op" id="8571156">,</span>&nbsp;<span class="ident" id="8571158">color</span><span class="op" id="8571163">.</span><span class="ident" id="8571164">RGBA</span><span class="op" id="8571168">{</span><span class="num" id="8571169">11</span><span class="op" id="8571171">,</span>&nbsp;<span class="num" id="8571173">38</span><span class="op" id="8571175">,</span>&nbsp;<span class="num" id="8571177">0</span><span class="op" id="8571178">,</span>&nbsp;<span class="num" id="8571180">255</span><span class="op" id="8571183">}</span><span class="op" id="8571184">}</span><span class="op" id="8571185">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571188">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571227">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571252">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571299">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571341">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8571384">{</span><span class="string" id="8571385">&#34;generic&#34;</span><span class="op" id="8571394">,</span>&nbsp;<span class="ident" id="8571396">fillBlue</span><span class="op" id="8571404">(</span><span class="num" id="8571405">255</span><span class="op" id="8571408">)</span><span class="op" id="8571409">,</span>&nbsp;<span class="ident" id="8571411">vgradAlpha</span><span class="op" id="8571421">(</span><span class="num" id="8571422">192</span><span class="op" id="8571425">)</span><span class="op" id="8571426">,</span>&nbsp;<span class="ident" id="8571428">Over</span><span class="op" id="8571432">,</span>&nbsp;<span class="ident" id="8571434">color</span><span class="op" id="8571439">.</span><span class="ident" id="8571440">RGBA</span><span class="op" id="8571444">{</span><span class="num" id="8571445">81</span><span class="op" id="8571447">,</span>&nbsp;<span class="num" id="8571449">0</span><span class="op" id="8571450">,</span>&nbsp;<span class="num" id="8571452">102</span><span class="op" id="8571455">,</span>&nbsp;<span class="num" id="8571457">255</span><span class="op" id="8571460">}</span><span class="op" id="8571461">}</span><span class="op" id="8571462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8571465">{</span><span class="string" id="8571466">&#34;genericSrc&#34;</span><span class="op" id="8571478">,</span>&nbsp;<span class="ident" id="8571480">fillBlue</span><span class="op" id="8571488">(</span><span class="num" id="8571489">255</span><span class="op" id="8571492">)</span><span class="op" id="8571493">,</span>&nbsp;<span class="ident" id="8571495">vgradAlpha</span><span class="op" id="8571505">(</span><span class="num" id="8571506">192</span><span class="op" id="8571509">)</span><span class="op" id="8571510">,</span>&nbsp;<span class="ident" id="8571512">Src</span><span class="op" id="8571515">,</span>&nbsp;<span class="ident" id="8571517">color</span><span class="op" id="8571522">.</span><span class="ident" id="8571523">RGBA</span><span class="op" id="8571527">{</span><span class="num" id="8571528">0</span><span class="op" id="8571529">,</span>&nbsp;<span class="num" id="8571531">0</span><span class="op" id="8571532">,</span>&nbsp;<span class="num" id="8571534">102</span><span class="op" id="8571537">,</span>&nbsp;<span class="num" id="8571539">102</span><span class="op" id="8571542">}</span><span class="op" id="8571543">}</span><span class="op" id="8571544">,</span><br>
<span class="lineno"></span><span class="op" id="8571546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8571549">func</span>&nbsp;<span class="ident" id="8571554">makeGolden</span><span class="op" id="8571564">(</span><span class="ident" id="8571565">dst</span>&nbsp;<span class="ident" id="8571569">image</span><span class="op" id="8571574">.</span><span class="ident" id="8571575">Image</span><span class="op" id="8571580">,</span>&nbsp;<span class="ident" id="8571582">r</span>&nbsp;<span class="ident" id="8571584">image</span><span class="op" id="8571589">.</span><span class="ident" id="8571590">Rectangle</span><span class="op" id="8571599">,</span>&nbsp;<span class="ident" id="8571601">src</span>&nbsp;<span class="ident" id="8571605">image</span><span class="op" id="8571610">.</span><span class="ident" id="8571611">Image</span><span class="op" id="8571616">,</span>&nbsp;<span class="ident" id="8571618">sp</span>&nbsp;<span class="ident" id="8571621">image</span><span class="op" id="8571626">.</span><span class="ident" id="8571627">Point</span><span class="op" id="8571632">,</span>&nbsp;<span class="ident" id="8571634">mask</span>&nbsp;<span class="ident" id="8571639">image</span><span class="op" id="8571644">.</span><span class="ident" id="8571645">Image</span><span class="op" id="8571650">,</span>&nbsp;<span class="ident" id="8571652">mp</span>&nbsp;<span class="ident" id="8571655">image</span><span class="op" id="8571660">.</span><span class="ident" id="8571661">Point</span><span class="op" id="8571666">,</span>&nbsp;<span class="ident" id="8571668">op</span>&nbsp;<span class="ident" id="8571671">Op</span><span class="op" id="8571673">)</span>&nbsp;<span class="ident" id="8571675">image</span><span class="op" id="8571680">.</span><span class="ident" id="8571681">Image</span>&nbsp;<span class="op" id="8571687">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571690">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8571765">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8571835">b</span>&nbsp;<span class="op" id="8571837">:=</span>&nbsp;<span class="ident" id="8571840">dst</span><span class="op" id="8571843">.</span><span class="ident" id="8571844">Bounds</span><span class="op" id="8571850">(</span><span class="op" id="8571851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8571854">sb</span>&nbsp;<span class="op" id="8571857">:=</span>&nbsp;<span class="ident" id="8571860">src</span><span class="op" id="8571863">.</span><span class="ident" id="8571864">Bounds</span><span class="op" id="8571870">(</span><span class="op" id="8571871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8571874">mb</span>&nbsp;<span class="op" id="8571877">:=</span>&nbsp;<span class="ident" id="8571880">image</span><span class="op" id="8571885">.</span><span class="ident" id="8571886">Rect</span><span class="op" id="8571890">(</span><span class="op" id="8571891">-</span><span class="num" id="8571892">1e9</span><span class="op" id="8571895">,</span>&nbsp;<span class="op" id="8571897">-</span><span class="num" id="8571898">1e9</span><span class="op" id="8571901">,</span>&nbsp;<span class="num" id="8571903">1e9</span><span class="op" id="8571906">,</span>&nbsp;<span class="num" id="8571908">1e9</span><span class="op" id="8571911">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8571914">if</span>&nbsp;<span class="ident" id="8571917">mask</span>&nbsp;<span class="op" id="8571922">!=</span>&nbsp;<span class="ident" id="8571925">nil</span>&nbsp;<span class="op" id="8571929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8571933">mb</span>&nbsp;<span class="op" id="8571936">=</span>&nbsp;<span class="ident" id="8571938">mask</span><span class="op" id="8571942">.</span><span class="ident" id="8571943">Bounds</span><span class="op" id="8571949">(</span><span class="op" id="8571950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8571953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8571956">golden</span>&nbsp;<span class="op" id="8571963">:=</span>&nbsp;<span class="ident" id="8571966">image</span><span class="op" id="8571971">.</span><span class="ident" id="8571972">NewRGBA</span><span class="op" id="8571979">(</span><span class="ident" id="8571980">image</span><span class="op" id="8571985">.</span><span class="ident" id="8571986">Rect</span><span class="op" id="8571990">(</span><span class="num" id="8571991">0</span><span class="op" id="8571992">,</span>&nbsp;<span class="num" id="8571994">0</span><span class="op" id="8571995">,</span>&nbsp;<span class="ident" id="8571997">b</span><span class="op" id="8571998">.</span><span class="ident" id="8571999">Max</span><span class="op" id="8572002">.</span><span class="ident" id="8572003">X</span><span class="op" id="8572004">,</span>&nbsp;<span class="ident" id="8572006">b</span><span class="op" id="8572007">.</span><span class="ident" id="8572008">Max</span><span class="op" id="8572011">.</span><span class="ident" id="8572012">Y</span><span class="op" id="8572013">)</span><span class="op" id="8572014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572017">for</span>&nbsp;<span class="ident" id="8572021">y</span>&nbsp;<span class="op" id="8572023">:=</span>&nbsp;<span class="ident" id="8572026">r</span><span class="op" id="8572027">.</span><span class="ident" id="8572028">Min</span><span class="op" id="8572031">.</span><span class="ident" id="8572032">Y</span><span class="op" id="8572033">;</span>&nbsp;<span class="ident" id="8572035">y</span>&nbsp;<span class="op" id="8572037">&lt;</span>&nbsp;<span class="ident" id="8572039">r</span><span class="op" id="8572040">.</span><span class="ident" id="8572041">Max</span><span class="op" id="8572044">.</span><span class="ident" id="8572045">Y</span><span class="op" id="8572046">;</span>&nbsp;<span class="ident" id="8572048">y</span><span class="op" id="8572049">++</span>&nbsp;<span class="op" id="8572052">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572056">sy</span>&nbsp;<span class="op" id="8572059">:=</span>&nbsp;<span class="ident" id="8572062">y</span>&nbsp;<span class="op" id="8572064">+</span>&nbsp;<span class="ident" id="8572066">sp</span><span class="op" id="8572068">.</span><span class="ident" id="8572069">Y</span>&nbsp;<span class="op" id="8572071">-</span>&nbsp;<span class="ident" id="8572073">r</span><span class="op" id="8572074">.</span><span class="ident" id="8572075">Min</span><span class="op" id="8572078">.</span><span class="ident" id="8572079">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572083">my</span>&nbsp;<span class="op" id="8572086">:=</span>&nbsp;<span class="ident" id="8572089">y</span>&nbsp;<span class="op" id="8572091">+</span>&nbsp;<span class="ident" id="8572093">mp</span><span class="op" id="8572095">.</span><span class="ident" id="8572096">Y</span>&nbsp;<span class="op" id="8572098">-</span>&nbsp;<span class="ident" id="8572100">r</span><span class="op" id="8572101">.</span><span class="ident" id="8572102">Min</span><span class="op" id="8572105">.</span><span class="ident" id="8572106">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572110">for</span>&nbsp;<span class="ident" id="8572114">x</span>&nbsp;<span class="op" id="8572116">:=</span>&nbsp;<span class="ident" id="8572119">r</span><span class="op" id="8572120">.</span><span class="ident" id="8572121">Min</span><span class="op" id="8572124">.</span><span class="ident" id="8572125">X</span><span class="op" id="8572126">;</span>&nbsp;<span class="ident" id="8572128">x</span>&nbsp;<span class="op" id="8572130">&lt;</span>&nbsp;<span class="ident" id="8572132">r</span><span class="op" id="8572133">.</span><span class="ident" id="8572134">Max</span><span class="op" id="8572137">.</span><span class="ident" id="8572138">X</span><span class="op" id="8572139">;</span>&nbsp;<span class="ident" id="8572141">x</span><span class="op" id="8572142">++</span>&nbsp;<span class="op" id="8572145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572150">if</span>&nbsp;<span class="op" id="8572153">!</span><span class="op" id="8572154">(</span><span class="ident" id="8572155">image</span><span class="op" id="8572160">.</span><span class="ident" id="8572161">Pt</span><span class="op" id="8572163">(</span><span class="ident" id="8572164">x</span><span class="op" id="8572165">,</span>&nbsp;<span class="ident" id="8572167">y</span><span class="op" id="8572168">)</span><span class="op" id="8572169">.</span><span class="ident" id="8572170">In</span><span class="op" id="8572172">(</span><span class="ident" id="8572173">b</span><span class="op" id="8572174">)</span><span class="op" id="8572175">)</span>&nbsp;<span class="op" id="8572177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572183">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572200">sx</span>&nbsp;<span class="op" id="8572203">:=</span>&nbsp;<span class="ident" id="8572206">x</span>&nbsp;<span class="op" id="8572208">+</span>&nbsp;<span class="ident" id="8572210">sp</span><span class="op" id="8572212">.</span><span class="ident" id="8572213">X</span>&nbsp;<span class="op" id="8572215">-</span>&nbsp;<span class="ident" id="8572217">r</span><span class="op" id="8572218">.</span><span class="ident" id="8572219">Min</span><span class="op" id="8572222">.</span><span class="ident" id="8572223">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572228">if</span>&nbsp;<span class="op" id="8572231">!</span><span class="op" id="8572232">(</span><span class="ident" id="8572233">image</span><span class="op" id="8572238">.</span><span class="ident" id="8572239">Pt</span><span class="op" id="8572241">(</span><span class="ident" id="8572242">sx</span><span class="op" id="8572244">,</span>&nbsp;<span class="ident" id="8572246">sy</span><span class="op" id="8572248">)</span><span class="op" id="8572249">.</span><span class="ident" id="8572250">In</span><span class="op" id="8572252">(</span><span class="ident" id="8572253">sb</span><span class="op" id="8572255">)</span><span class="op" id="8572256">)</span>&nbsp;<span class="op" id="8572258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572264">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572276">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572281">mx</span>&nbsp;<span class="op" id="8572284">:=</span>&nbsp;<span class="ident" id="8572287">x</span>&nbsp;<span class="op" id="8572289">+</span>&nbsp;<span class="ident" id="8572291">mp</span><span class="op" id="8572293">.</span><span class="ident" id="8572294">X</span>&nbsp;<span class="op" id="8572296">-</span>&nbsp;<span class="ident" id="8572298">r</span><span class="op" id="8572299">.</span><span class="ident" id="8572300">Min</span><span class="op" id="8572303">.</span><span class="ident" id="8572304">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572309">if</span>&nbsp;<span class="op" id="8572312">!</span><span class="op" id="8572313">(</span><span class="ident" id="8572314">image</span><span class="op" id="8572319">.</span><span class="ident" id="8572320">Pt</span><span class="op" id="8572322">(</span><span class="ident" id="8572323">mx</span><span class="op" id="8572325">,</span>&nbsp;<span class="ident" id="8572327">my</span><span class="op" id="8572329">)</span><span class="op" id="8572330">.</span><span class="ident" id="8572331">In</span><span class="op" id="8572333">(</span><span class="ident" id="8572334">mb</span><span class="op" id="8572336">)</span><span class="op" id="8572337">)</span>&nbsp;<span class="op" id="8572339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572345">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572363">const</span>&nbsp;<span class="ident" id="8572369">M</span>&nbsp;<span class="op" id="8572371">=</span>&nbsp;<span class="num" id="8572373">1</span><span class="op" id="8572374">&lt;&lt;</span><span class="num" id="8572376">16</span>&nbsp;<span class="op" id="8572379">-</span>&nbsp;<span class="num" id="8572381">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572386">var</span>&nbsp;<span class="ident" id="8572390">dr</span><span class="op" id="8572392">,</span>&nbsp;<span class="ident" id="8572394">dg</span><span class="op" id="8572396">,</span>&nbsp;<span class="ident" id="8572398">db</span><span class="op" id="8572400">,</span>&nbsp;<span class="ident" id="8572402">da</span>&nbsp;<span class="builtintype" id="8572405">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572415">if</span>&nbsp;<span class="ident" id="8572418">op</span>&nbsp;<span class="op" id="8572421">==</span>&nbsp;<span class="ident" id="8572424">Over</span>&nbsp;<span class="op" id="8572429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572435">dr</span><span class="op" id="8572437">,</span>&nbsp;<span class="ident" id="8572439">dg</span><span class="op" id="8572441">,</span>&nbsp;<span class="ident" id="8572443">db</span><span class="op" id="8572445">,</span>&nbsp;<span class="ident" id="8572447">da</span>&nbsp;<span class="op" id="8572450">=</span>&nbsp;<span class="ident" id="8572452">dst</span><span class="op" id="8572455">.</span><span class="ident" id="8572456">At</span><span class="op" id="8572458">(</span><span class="ident" id="8572459">x</span><span class="op" id="8572460">,</span>&nbsp;<span class="ident" id="8572462">y</span><span class="op" id="8572463">)</span><span class="op" id="8572464">.</span><span class="ident" id="8572465">RGBA</span><span class="op" id="8572469">(</span><span class="op" id="8572470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572475">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572480">sr</span><span class="op" id="8572482">,</span>&nbsp;<span class="ident" id="8572484">sg</span><span class="op" id="8572486">,</span>&nbsp;<span class="ident" id="8572488">sb</span><span class="op" id="8572490">,</span>&nbsp;<span class="ident" id="8572492">sa</span>&nbsp;<span class="op" id="8572495">:=</span>&nbsp;<span class="ident" id="8572498">src</span><span class="op" id="8572501">.</span><span class="ident" id="8572502">At</span><span class="op" id="8572504">(</span><span class="ident" id="8572505">sx</span><span class="op" id="8572507">,</span>&nbsp;<span class="ident" id="8572509">sy</span><span class="op" id="8572511">)</span><span class="op" id="8572512">.</span><span class="ident" id="8572513">RGBA</span><span class="op" id="8572517">(</span><span class="op" id="8572518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572523">ma</span>&nbsp;<span class="op" id="8572526">:=</span>&nbsp;<span class="builtintype" id="8572529">uint32</span><span class="op" id="8572535">(</span><span class="ident" id="8572536">M</span><span class="op" id="8572537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572542">if</span>&nbsp;<span class="ident" id="8572545">mask</span>&nbsp;<span class="op" id="8572550">!=</span>&nbsp;<span class="ident" id="8572553">nil</span>&nbsp;<span class="op" id="8572557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572563">_</span><span class="op" id="8572564">,</span>&nbsp;<span class="ident" id="8572566">_</span><span class="op" id="8572567">,</span>&nbsp;<span class="ident" id="8572569">_</span><span class="op" id="8572570">,</span>&nbsp;<span class="ident" id="8572572">ma</span>&nbsp;<span class="op" id="8572575">=</span>&nbsp;<span class="ident" id="8572577">mask</span><span class="op" id="8572581">.</span><span class="ident" id="8572582">At</span><span class="op" id="8572584">(</span><span class="ident" id="8572585">mx</span><span class="op" id="8572587">,</span>&nbsp;<span class="ident" id="8572589">my</span><span class="op" id="8572591">)</span><span class="op" id="8572592">.</span><span class="ident" id="8572593">RGBA</span><span class="op" id="8572597">(</span><span class="op" id="8572598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572603">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572608">a</span>&nbsp;<span class="op" id="8572610">:=</span>&nbsp;<span class="ident" id="8572613">M</span>&nbsp;<span class="op" id="8572615">-</span>&nbsp;<span class="op" id="8572617">(</span><span class="ident" id="8572618">sa</span>&nbsp;<span class="op" id="8572621">*</span>&nbsp;<span class="ident" id="8572623">ma</span>&nbsp;<span class="op" id="8572626">/</span>&nbsp;<span class="ident" id="8572628">M</span><span class="op" id="8572629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572634">golden</span><span class="op" id="8572640">.</span><span class="ident" id="8572641">Set</span><span class="op" id="8572644">(</span><span class="ident" id="8572645">x</span><span class="op" id="8572646">,</span>&nbsp;<span class="ident" id="8572648">y</span><span class="op" id="8572649">,</span>&nbsp;<span class="ident" id="8572651">color</span><span class="op" id="8572656">.</span><span class="ident" id="8572657">RGBA64</span><span class="op" id="8572663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8572669">uint16</span><span class="op" id="8572675">(</span><span class="op" id="8572676">(</span><span class="ident" id="8572677">dr</span><span class="op" id="8572679">*</span><span class="ident" id="8572680">a</span>&nbsp;<span class="op" id="8572682">+</span>&nbsp;<span class="ident" id="8572684">sr</span><span class="op" id="8572686">*</span><span class="ident" id="8572687">ma</span><span class="op" id="8572689">)</span>&nbsp;<span class="op" id="8572691">/</span>&nbsp;<span class="ident" id="8572693">M</span><span class="op" id="8572694">)</span><span class="op" id="8572695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8572701">uint16</span><span class="op" id="8572707">(</span><span class="op" id="8572708">(</span><span class="ident" id="8572709">dg</span><span class="op" id="8572711">*</span><span class="ident" id="8572712">a</span>&nbsp;<span class="op" id="8572714">+</span>&nbsp;<span class="ident" id="8572716">sg</span><span class="op" id="8572718">*</span><span class="ident" id="8572719">ma</span><span class="op" id="8572721">)</span>&nbsp;<span class="op" id="8572723">/</span>&nbsp;<span class="ident" id="8572725">M</span><span class="op" id="8572726">)</span><span class="op" id="8572727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8572733">uint16</span><span class="op" id="8572739">(</span><span class="op" id="8572740">(</span><span class="ident" id="8572741">db</span><span class="op" id="8572743">*</span><span class="ident" id="8572744">a</span>&nbsp;<span class="op" id="8572746">+</span>&nbsp;<span class="ident" id="8572748">sb</span><span class="op" id="8572750">*</span><span class="ident" id="8572751">ma</span><span class="op" id="8572753">)</span>&nbsp;<span class="op" id="8572755">/</span>&nbsp;<span class="ident" id="8572757">M</span><span class="op" id="8572758">)</span><span class="op" id="8572759">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8572765">uint16</span><span class="op" id="8572771">(</span><span class="op" id="8572772">(</span><span class="ident" id="8572773">da</span><span class="op" id="8572775">*</span><span class="ident" id="8572776">a</span>&nbsp;<span class="op" id="8572778">+</span>&nbsp;<span class="ident" id="8572780">sa</span><span class="op" id="8572782">*</span><span class="ident" id="8572783">ma</span><span class="op" id="8572785">)</span>&nbsp;<span class="op" id="8572787">/</span>&nbsp;<span class="ident" id="8572789">M</span><span class="op" id="8572790">)</span><span class="op" id="8572791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572796">}</span><span class="op" id="8572797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8572804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8572807">return</span>&nbsp;<span class="ident" id="8572814">golden</span><span class="op" id="8572820">.</span><span class="ident" id="8572821">SubImage</span><span class="op" id="8572829">(</span><span class="ident" id="8572830">b</span><span class="op" id="8572831">)</span><br>
<span class="lineno">205</span><span class="op" id="8572833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8572836">func</span>&nbsp;<span class="ident" id="8572841">TestDraw</span><span class="op" id="8572849">(</span><span class="ident" id="8572850">t</span>&nbsp;<span class="op" id="8572852">*</span><span class="ident" id="8572853">testing</span><span class="op" id="8572860">.</span><span class="ident" id="8572861">T</span><span class="op" id="8572862">)</span>&nbsp;<span class="op" id="8572864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572867">rr</span>&nbsp;<span class="op" id="8572870">:=</span>&nbsp;<span class="op" id="8572873">[</span><span class="op" id="8572874">]</span><span class="ident" id="8572875">image</span><span class="op" id="8572880">.</span><span class="ident" id="8572881">Rectangle</span><span class="op" id="8572890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572894">image</span><span class="op" id="8572899">.</span><span class="ident" id="8572900">Rect</span><span class="op" id="8572904">(</span><span class="num" id="8572905">0</span><span class="op" id="8572906">,</span>&nbsp;<span class="num" id="8572908">0</span><span class="op" id="8572909">,</span>&nbsp;<span class="num" id="8572911">0</span><span class="op" id="8572912">,</span>&nbsp;<span class="num" id="8572914">0</span><span class="op" id="8572915">)</span><span class="op" id="8572916">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572920">image</span><span class="op" id="8572925">.</span><span class="ident" id="8572926">Rect</span><span class="op" id="8572930">(</span><span class="num" id="8572931">0</span><span class="op" id="8572932">,</span>&nbsp;<span class="num" id="8572934">0</span><span class="op" id="8572935">,</span>&nbsp;<span class="num" id="8572937">16</span><span class="op" id="8572939">,</span>&nbsp;<span class="num" id="8572941">16</span><span class="op" id="8572943">)</span><span class="op" id="8572944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572948">image</span><span class="op" id="8572953">.</span><span class="ident" id="8572954">Rect</span><span class="op" id="8572958">(</span><span class="num" id="8572959">3</span><span class="op" id="8572960">,</span>&nbsp;<span class="num" id="8572962">5</span><span class="op" id="8572963">,</span>&nbsp;<span class="num" id="8572965">12</span><span class="op" id="8572967">,</span>&nbsp;<span class="num" id="8572969">10</span><span class="op" id="8572971">)</span><span class="op" id="8572972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8572976">image</span><span class="op" id="8572981">.</span><span class="ident" id="8572982">Rect</span><span class="op" id="8572986">(</span><span class="num" id="8572987">0</span><span class="op" id="8572988">,</span>&nbsp;<span class="num" id="8572990">0</span><span class="op" id="8572991">,</span>&nbsp;<span class="num" id="8572993">9</span><span class="op" id="8572994">,</span>&nbsp;<span class="num" id="8572996">9</span><span class="op" id="8572997">)</span><span class="op" id="8572998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573002">image</span><span class="op" id="8573007">.</span><span class="ident" id="8573008">Rect</span><span class="op" id="8573012">(</span><span class="num" id="8573013">8</span><span class="op" id="8573014">,</span>&nbsp;<span class="num" id="8573016">8</span><span class="op" id="8573017">,</span>&nbsp;<span class="num" id="8573019">16</span><span class="op" id="8573021">,</span>&nbsp;<span class="num" id="8573023">16</span><span class="op" id="8573025">)</span><span class="op" id="8573026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573030">image</span><span class="op" id="8573035">.</span><span class="ident" id="8573036">Rect</span><span class="op" id="8573040">(</span><span class="num" id="8573041">8</span><span class="op" id="8573042">,</span>&nbsp;<span class="num" id="8573044">0</span><span class="op" id="8573045">,</span>&nbsp;<span class="num" id="8573047">9</span><span class="op" id="8573048">,</span>&nbsp;<span class="num" id="8573050">16</span><span class="op" id="8573052">)</span><span class="op" id="8573053">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573057">image</span><span class="op" id="8573062">.</span><span class="ident" id="8573063">Rect</span><span class="op" id="8573067">(</span><span class="num" id="8573068">0</span><span class="op" id="8573069">,</span>&nbsp;<span class="num" id="8573071">8</span><span class="op" id="8573072">,</span>&nbsp;<span class="num" id="8573074">16</span><span class="op" id="8573076">,</span>&nbsp;<span class="num" id="8573078">9</span><span class="op" id="8573079">)</span><span class="op" id="8573080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573084">image</span><span class="op" id="8573089">.</span><span class="ident" id="8573090">Rect</span><span class="op" id="8573094">(</span><span class="num" id="8573095">8</span><span class="op" id="8573096">,</span>&nbsp;<span class="num" id="8573098">8</span><span class="op" id="8573099">,</span>&nbsp;<span class="num" id="8573101">9</span><span class="op" id="8573102">,</span>&nbsp;<span class="num" id="8573104">9</span><span class="op" id="8573105">)</span><span class="op" id="8573106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573110">image</span><span class="op" id="8573115">.</span><span class="ident" id="8573116">Rect</span><span class="op" id="8573120">(</span><span class="num" id="8573121">8</span><span class="op" id="8573122">,</span>&nbsp;<span class="num" id="8573124">8</span><span class="op" id="8573125">,</span>&nbsp;<span class="num" id="8573127">8</span><span class="op" id="8573128">,</span>&nbsp;<span class="num" id="8573130">8</span><span class="op" id="8573131">)</span><span class="op" id="8573132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8573135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573138">for</span>&nbsp;<span class="ident" id="8573142">_</span><span class="op" id="8573143">,</span>&nbsp;<span class="ident" id="8573145">r</span>&nbsp;<span class="op" id="8573147">:=</span>&nbsp;<span class="keyword" id="8573150">range</span>&nbsp;<span class="ident" id="8573156">rr</span>&nbsp;<span class="op" id="8573159">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573162">loop</span><span class="op" id="8573166">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573170">for</span>&nbsp;<span class="ident" id="8573174">_</span><span class="op" id="8573175">,</span>&nbsp;<span class="ident" id="8573177">test</span>&nbsp;<span class="op" id="8573182">:=</span>&nbsp;<span class="keyword" id="8573185">range</span>&nbsp;<span class="ident" id="8573191">drawTests</span>&nbsp;<span class="op" id="8573201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573206">dst</span>&nbsp;<span class="op" id="8573210">:=</span>&nbsp;<span class="ident" id="8573213">hgradRed</span><span class="op" id="8573221">(</span><span class="num" id="8573222">255</span><span class="op" id="8573225">)</span><span class="op" id="8573226">.</span><span class="op" id="8573227">(</span><span class="op" id="8573228">*</span><span class="ident" id="8573229">image</span><span class="op" id="8573234">.</span><span class="ident" id="8573235">RGBA</span><span class="op" id="8573239">)</span><span class="op" id="8573240">.</span><span class="ident" id="8573241">SubImage</span><span class="op" id="8573249">(</span><span class="ident" id="8573250">r</span><span class="op" id="8573251">)</span><span class="op" id="8573252">.</span><span class="op" id="8573253">(</span><span class="ident" id="8573254">Image</span><span class="op" id="8573259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8573264">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573365">golden</span>&nbsp;<span class="op" id="8573372">:=</span>&nbsp;<span class="ident" id="8573375">makeGolden</span><span class="op" id="8573385">(</span><span class="ident" id="8573386">dst</span><span class="op" id="8573389">,</span>&nbsp;<span class="ident" id="8573391">image</span><span class="op" id="8573396">.</span><span class="ident" id="8573397">Rect</span><span class="op" id="8573401">(</span><span class="num" id="8573402">0</span><span class="op" id="8573403">,</span>&nbsp;<span class="num" id="8573405">0</span><span class="op" id="8573406">,</span>&nbsp;<span class="num" id="8573408">16</span><span class="op" id="8573410">,</span>&nbsp;<span class="num" id="8573412">16</span><span class="op" id="8573414">)</span><span class="op" id="8573415">,</span>&nbsp;<span class="ident" id="8573417">test</span><span class="op" id="8573421">.</span><span class="ident" id="8573422">src</span><span class="op" id="8573425">,</span>&nbsp;<span class="ident" id="8573427">image</span><span class="op" id="8573432">.</span><span class="ident" id="8573433">ZP</span><span class="op" id="8573435">,</span>&nbsp;<span class="ident" id="8573437">test</span><span class="op" id="8573441">.</span><span class="ident" id="8573442">mask</span><span class="op" id="8573446">,</span>&nbsp;<span class="ident" id="8573448">image</span><span class="op" id="8573453">.</span><span class="ident" id="8573454">ZP</span><span class="op" id="8573456">,</span>&nbsp;<span class="ident" id="8573458">test</span><span class="op" id="8573462">.</span><span class="ident" id="8573463">op</span><span class="op" id="8573465">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573470">b</span>&nbsp;<span class="op" id="8573472">:=</span>&nbsp;<span class="ident" id="8573475">dst</span><span class="op" id="8573478">.</span><span class="ident" id="8573479">Bounds</span><span class="op" id="8573485">(</span><span class="op" id="8573486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573491">if</span>&nbsp;<span class="op" id="8573494">!</span><span class="ident" id="8573495">b</span><span class="op" id="8573496">.</span><span class="ident" id="8573497">Eq</span><span class="op" id="8573499">(</span><span class="ident" id="8573500">golden</span><span class="op" id="8573506">.</span><span class="ident" id="8573507">Bounds</span><span class="op" id="8573513">(</span><span class="op" id="8573514">)</span><span class="op" id="8573515">)</span>&nbsp;<span class="op" id="8573517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573523">t</span><span class="op" id="8573524">.</span><span class="ident" id="8573525">Errorf</span><span class="op" id="8573531">(</span><span class="string" id="8573532">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8573565">,</span>&nbsp;<span class="ident" id="8573567">r</span><span class="op" id="8573568">,</span>&nbsp;<span class="ident" id="8573570">test</span><span class="op" id="8573574">.</span><span class="ident" id="8573575">desc</span><span class="op" id="8573579">,</span>&nbsp;<span class="ident" id="8573581">dst</span><span class="op" id="8573584">.</span><span class="ident" id="8573585">Bounds</span><span class="op" id="8573591">(</span><span class="op" id="8573592">)</span><span class="op" id="8573593">,</span>&nbsp;<span class="ident" id="8573595">golden</span><span class="op" id="8573601">.</span><span class="ident" id="8573602">Bounds</span><span class="op" id="8573608">(</span><span class="op" id="8573609">)</span><span class="op" id="8573610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573616">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8573628">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8573633">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8573730">DrawMask</span><span class="op" id="8573738">(</span><span class="ident" id="8573739">dst</span><span class="op" id="8573742">,</span>&nbsp;<span class="ident" id="8573744">image</span><span class="op" id="8573749">.</span><span class="ident" id="8573750">Rect</span><span class="op" id="8573754">(</span><span class="num" id="8573755">0</span><span class="op" id="8573756">,</span>&nbsp;<span class="num" id="8573758">0</span><span class="op" id="8573759">,</span>&nbsp;<span class="num" id="8573761">16</span><span class="op" id="8573763">,</span>&nbsp;<span class="num" id="8573765">16</span><span class="op" id="8573767">)</span><span class="op" id="8573768">,</span>&nbsp;<span class="ident" id="8573770">test</span><span class="op" id="8573774">.</span><span class="ident" id="8573775">src</span><span class="op" id="8573778">,</span>&nbsp;<span class="ident" id="8573780">image</span><span class="op" id="8573785">.</span><span class="ident" id="8573786">ZP</span><span class="op" id="8573788">,</span>&nbsp;<span class="ident" id="8573790">test</span><span class="op" id="8573794">.</span><span class="ident" id="8573795">mask</span><span class="op" id="8573799">,</span>&nbsp;<span class="ident" id="8573801">image</span><span class="op" id="8573806">.</span><span class="ident" id="8573807">ZP</span><span class="op" id="8573809">,</span>&nbsp;<span class="ident" id="8573811">test</span><span class="op" id="8573815">.</span><span class="ident" id="8573816">op</span><span class="op" id="8573818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573823">if</span>&nbsp;<span class="ident" id="8573826">image</span><span class="op" id="8573831">.</span><span class="ident" id="8573832">Pt</span><span class="op" id="8573834">(</span><span class="num" id="8573835">8</span><span class="op" id="8573836">,</span>&nbsp;<span class="num" id="8573838">8</span><span class="op" id="8573839">)</span><span class="op" id="8573840">.</span><span class="ident" id="8573841">In</span><span class="op" id="8573843">(</span><span class="ident" id="8573844">r</span><span class="op" id="8573845">)</span>&nbsp;<span class="op" id="8573847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8573853">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8573924">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8573977">if</span>&nbsp;<span class="op" id="8573980">!</span><span class="ident" id="8573981">eq</span><span class="op" id="8573983">(</span><span class="ident" id="8573984">dst</span><span class="op" id="8573987">.</span><span class="ident" id="8573988">At</span><span class="op" id="8573990">(</span><span class="num" id="8573991">8</span><span class="op" id="8573992">,</span>&nbsp;<span class="num" id="8573994">8</span><span class="op" id="8573995">)</span><span class="op" id="8573996">,</span>&nbsp;<span class="ident" id="8573998">test</span><span class="op" id="8574002">.</span><span class="ident" id="8574003">expected</span><span class="op" id="8574011">)</span>&nbsp;<span class="op" id="8574013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574020">t</span><span class="op" id="8574021">.</span><span class="ident" id="8574022">Errorf</span><span class="op" id="8574028">(</span><span class="string" id="8574029">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8574065">,</span>&nbsp;<span class="ident" id="8574067">r</span><span class="op" id="8574068">,</span>&nbsp;<span class="ident" id="8574070">test</span><span class="op" id="8574074">.</span><span class="ident" id="8574075">desc</span><span class="op" id="8574079">,</span>&nbsp;<span class="ident" id="8574081">dst</span><span class="op" id="8574084">.</span><span class="ident" id="8574085">At</span><span class="op" id="8574087">(</span><span class="num" id="8574088">8</span><span class="op" id="8574089">,</span>&nbsp;<span class="num" id="8574091">8</span><span class="op" id="8574092">)</span><span class="op" id="8574093">,</span>&nbsp;<span class="ident" id="8574095">test</span><span class="op" id="8574099">.</span><span class="ident" id="8574100">expected</span><span class="op" id="8574108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574115">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574133">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8574138">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574206">for</span>&nbsp;<span class="ident" id="8574210">y</span>&nbsp;<span class="op" id="8574212">:=</span>&nbsp;<span class="ident" id="8574215">b</span><span class="op" id="8574216">.</span><span class="ident" id="8574217">Min</span><span class="op" id="8574220">.</span><span class="ident" id="8574221">Y</span><span class="op" id="8574222">;</span>&nbsp;<span class="ident" id="8574224">y</span>&nbsp;<span class="op" id="8574226">&lt;</span>&nbsp;<span class="ident" id="8574228">b</span><span class="op" id="8574229">.</span><span class="ident" id="8574230">Max</span><span class="op" id="8574233">.</span><span class="ident" id="8574234">Y</span><span class="op" id="8574235">;</span>&nbsp;<span class="ident" id="8574237">y</span><span class="op" id="8574238">++</span>&nbsp;<span class="op" id="8574241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574247">for</span>&nbsp;<span class="ident" id="8574251">x</span>&nbsp;<span class="op" id="8574253">:=</span>&nbsp;<span class="ident" id="8574256">b</span><span class="op" id="8574257">.</span><span class="ident" id="8574258">Min</span><span class="op" id="8574261">.</span><span class="ident" id="8574262">X</span><span class="op" id="8574263">;</span>&nbsp;<span class="ident" id="8574265">x</span>&nbsp;<span class="op" id="8574267">&lt;</span>&nbsp;<span class="ident" id="8574269">b</span><span class="op" id="8574270">.</span><span class="ident" id="8574271">Max</span><span class="op" id="8574274">.</span><span class="ident" id="8574275">X</span><span class="op" id="8574276">;</span>&nbsp;<span class="ident" id="8574278">x</span><span class="op" id="8574279">++</span>&nbsp;<span class="op" id="8574282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574289">if</span>&nbsp;<span class="op" id="8574292">!</span><span class="ident" id="8574293">eq</span><span class="op" id="8574295">(</span><span class="ident" id="8574296">dst</span><span class="op" id="8574299">.</span><span class="ident" id="8574300">At</span><span class="op" id="8574302">(</span><span class="ident" id="8574303">x</span><span class="op" id="8574304">,</span>&nbsp;<span class="ident" id="8574306">y</span><span class="op" id="8574307">)</span><span class="op" id="8574308">,</span>&nbsp;<span class="ident" id="8574310">golden</span><span class="op" id="8574316">.</span><span class="ident" id="8574317">At</span><span class="op" id="8574319">(</span><span class="ident" id="8574320">x</span><span class="op" id="8574321">,</span>&nbsp;<span class="ident" id="8574323">y</span><span class="op" id="8574324">)</span><span class="op" id="8574325">)</span>&nbsp;<span class="op" id="8574327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574335">t</span><span class="op" id="8574336">.</span><span class="ident" id="8574337">Errorf</span><span class="op" id="8574343">(</span><span class="string" id="8574344">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8574390">,</span>&nbsp;<span class="ident" id="8574392">r</span><span class="op" id="8574393">,</span>&nbsp;<span class="ident" id="8574395">test</span><span class="op" id="8574399">.</span><span class="ident" id="8574400">desc</span><span class="op" id="8574404">,</span>&nbsp;<span class="ident" id="8574406">x</span><span class="op" id="8574407">,</span>&nbsp;<span class="ident" id="8574409">y</span><span class="op" id="8574410">,</span>&nbsp;<span class="ident" id="8574412">dst</span><span class="op" id="8574415">.</span><span class="ident" id="8574416">At</span><span class="op" id="8574418">(</span><span class="ident" id="8574419">x</span><span class="op" id="8574420">,</span>&nbsp;<span class="ident" id="8574422">y</span><span class="op" id="8574423">)</span><span class="op" id="8574424">,</span>&nbsp;<span class="ident" id="8574426">golden</span><span class="op" id="8574432">.</span><span class="ident" id="8574433">At</span><span class="op" id="8574435">(</span><span class="ident" id="8574436">x</span><span class="op" id="8574437">,</span>&nbsp;<span class="ident" id="8574439">y</span><span class="op" id="8574440">)</span><span class="op" id="8574441">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574449">continue</span>&nbsp;<span class="ident" id="8574458">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574483">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8574486">}</span><br>
<span class="lineno"></span><span class="op" id="8574488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8574491">func</span>&nbsp;<span class="ident" id="8574496">TestDrawOverlap</span><span class="op" id="8574511">(</span><span class="ident" id="8574512">t</span>&nbsp;<span class="op" id="8574514">*</span><span class="ident" id="8574515">testing</span><span class="op" id="8574522">.</span><span class="ident" id="8574523">T</span><span class="op" id="8574524">)</span>&nbsp;<span class="op" id="8574526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574529">for</span>&nbsp;<span class="ident" id="8574533">_</span><span class="op" id="8574534">,</span>&nbsp;<span class="ident" id="8574536">op</span>&nbsp;<span class="op" id="8574539">:=</span>&nbsp;<span class="keyword" id="8574542">range</span>&nbsp;<span class="op" id="8574548">[</span><span class="op" id="8574549">]</span><span class="ident" id="8574550">Op</span><span class="op" id="8574552">{</span><span class="ident" id="8574553">Over</span><span class="op" id="8574557">,</span>&nbsp;<span class="ident" id="8574559">Src</span><span class="op" id="8574562">}</span>&nbsp;<span class="op" id="8574564">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574568">for</span>&nbsp;<span class="ident" id="8574572">yoff</span>&nbsp;<span class="op" id="8574577">:=</span>&nbsp;<span class="op" id="8574580">-</span><span class="num" id="8574581">2</span><span class="op" id="8574582">;</span>&nbsp;<span class="ident" id="8574584">yoff</span>&nbsp;<span class="op" id="8574589">&lt;=</span>&nbsp;<span class="num" id="8574592">2</span><span class="op" id="8574593">;</span>&nbsp;<span class="ident" id="8574595">yoff</span><span class="op" id="8574599">++</span>&nbsp;<span class="op" id="8574602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574606">loop</span><span class="op" id="8574610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8574615">for</span>&nbsp;<span class="ident" id="8574619">xoff</span>&nbsp;<span class="op" id="8574624">:=</span>&nbsp;<span class="op" id="8574627">-</span><span class="num" id="8574628">2</span><span class="op" id="8574629">;</span>&nbsp;<span class="ident" id="8574631">xoff</span>&nbsp;<span class="op" id="8574636">&lt;=</span>&nbsp;<span class="num" id="8574639">2</span><span class="op" id="8574640">;</span>&nbsp;<span class="ident" id="8574642">xoff</span><span class="op" id="8574646">++</span>&nbsp;<span class="op" id="8574649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574655">m</span>&nbsp;<span class="op" id="8574657">:=</span>&nbsp;<span class="ident" id="8574660">gradYellow</span><span class="op" id="8574670">(</span><span class="num" id="8574671">127</span><span class="op" id="8574674">)</span><span class="op" id="8574675">.</span><span class="op" id="8574676">(</span><span class="op" id="8574677">*</span><span class="ident" id="8574678">image</span><span class="op" id="8574683">.</span><span class="ident" id="8574684">RGBA</span><span class="op" id="8574688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574694">dst</span>&nbsp;<span class="op" id="8574698">:=</span>&nbsp;<span class="ident" id="8574701">m</span><span class="op" id="8574702">.</span><span class="ident" id="8574703">SubImage</span><span class="op" id="8574711">(</span><span class="ident" id="8574712">image</span><span class="op" id="8574717">.</span><span class="ident" id="8574718">Rect</span><span class="op" id="8574722">(</span><span class="num" id="8574723">5</span><span class="op" id="8574724">,</span>&nbsp;<span class="num" id="8574726">5</span><span class="op" id="8574727">,</span>&nbsp;<span class="num" id="8574729">10</span><span class="op" id="8574731">,</span>&nbsp;<span class="num" id="8574733">10</span><span class="op" id="8574735">)</span><span class="op" id="8574736">)</span><span class="op" id="8574737">.</span><span class="op" id="8574738">(</span><span class="op" id="8574739">*</span><span class="ident" id="8574740">image</span><span class="op" id="8574745">.</span><span class="ident" id="8574746">RGBA</span><span class="op" id="8574750">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574756">src</span>&nbsp;<span class="op" id="8574760">:=</span>&nbsp;<span class="ident" id="8574763">m</span><span class="op" id="8574764">.</span><span class="ident" id="8574765">SubImage</span><span class="op" id="8574773">(</span><span class="ident" id="8574774">image</span><span class="op" id="8574779">.</span><span class="ident" id="8574780">Rect</span><span class="op" id="8574784">(</span><span class="num" id="8574785">5</span><span class="op" id="8574786">+</span><span class="ident" id="8574787">xoff</span><span class="op" id="8574791">,</span>&nbsp;<span class="num" id="8574793">5</span><span class="op" id="8574794">+</span><span class="ident" id="8574795">yoff</span><span class="op" id="8574799">,</span>&nbsp;<span class="num" id="8574801">10</span><span class="op" id="8574803">+</span><span class="ident" id="8574804">xoff</span><span class="op" id="8574808">,</span>&nbsp;<span class="num" id="8574810">10</span><span class="op" id="8574812">+</span><span class="ident" id="8574813">yoff</span><span class="op" id="8574817">)</span><span class="op" id="8574818">)</span><span class="op" id="8574819">.</span><span class="op" id="8574820">(</span><span class="op" id="8574821">*</span><span class="ident" id="8574822">image</span><span class="op" id="8574827">.</span><span class="ident" id="8574828">RGBA</span><span class="op" id="8574832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574838">b</span>&nbsp;<span class="op" id="8574840">:=</span>&nbsp;<span class="ident" id="8574843">dst</span><span class="op" id="8574846">.</span><span class="ident" id="8574847">Bounds</span><span class="op" id="8574853">(</span><span class="op" id="8574854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8574860">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8574962">golden</span>&nbsp;<span class="op" id="8574969">:=</span>&nbsp;<span class="ident" id="8574972">makeGolden</span><span class="op" id="8574982">(</span><span class="ident" id="8574983">dst</span><span class="op" id="8574986">,</span>&nbsp;<span class="ident" id="8574988">b</span><span class="op" id="8574989">,</span>&nbsp;<span class="ident" id="8574991">src</span><span class="op" id="8574994">,</span>&nbsp;<span class="ident" id="8574996">src</span><span class="op" id="8574999">.</span><span class="ident" id="8575000">Bounds</span><span class="op" id="8575006">(</span><span class="op" id="8575007">)</span><span class="op" id="8575008">.</span><span class="ident" id="8575009">Min</span><span class="op" id="8575012">,</span>&nbsp;<span class="ident" id="8575014">nil</span><span class="op" id="8575017">,</span>&nbsp;<span class="ident" id="8575019">image</span><span class="op" id="8575024">.</span><span class="ident" id="8575025">ZP</span><span class="op" id="8575027">,</span>&nbsp;<span class="ident" id="8575029">op</span><span class="op" id="8575031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575037">if</span>&nbsp;<span class="op" id="8575040">!</span><span class="ident" id="8575041">b</span><span class="op" id="8575042">.</span><span class="ident" id="8575043">Eq</span><span class="op" id="8575045">(</span><span class="ident" id="8575046">golden</span><span class="op" id="8575052">.</span><span class="ident" id="8575053">Bounds</span><span class="op" id="8575059">(</span><span class="op" id="8575060">)</span><span class="op" id="8575061">)</span>&nbsp;<span class="op" id="8575063">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575070">t</span><span class="op" id="8575071">.</span><span class="ident" id="8575072">Errorf</span><span class="op" id="8575078">(</span><span class="string" id="8575079">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8575129">,</span>&nbsp;<span class="ident" id="8575131">xoff</span><span class="op" id="8575135">,</span>&nbsp;<span class="ident" id="8575137">yoff</span><span class="op" id="8575141">,</span>&nbsp;<span class="ident" id="8575143">dst</span><span class="op" id="8575146">.</span><span class="ident" id="8575147">Bounds</span><span class="op" id="8575153">(</span><span class="op" id="8575154">)</span><span class="op" id="8575155">,</span>&nbsp;<span class="ident" id="8575157">golden</span><span class="op" id="8575163">.</span><span class="ident" id="8575164">Bounds</span><span class="op" id="8575170">(</span><span class="op" id="8575171">)</span><span class="op" id="8575172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575179">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8575198">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575296">DrawMask</span><span class="op" id="8575304">(</span><span class="ident" id="8575305">dst</span><span class="op" id="8575308">,</span>&nbsp;<span class="ident" id="8575310">b</span><span class="op" id="8575311">,</span>&nbsp;<span class="ident" id="8575313">src</span><span class="op" id="8575316">,</span>&nbsp;<span class="ident" id="8575318">src</span><span class="op" id="8575321">.</span><span class="ident" id="8575322">Bounds</span><span class="op" id="8575328">(</span><span class="op" id="8575329">)</span><span class="op" id="8575330">.</span><span class="ident" id="8575331">Min</span><span class="op" id="8575334">,</span>&nbsp;<span class="ident" id="8575336">nil</span><span class="op" id="8575339">,</span>&nbsp;<span class="ident" id="8575341">image</span><span class="op" id="8575346">.</span><span class="ident" id="8575347">ZP</span><span class="op" id="8575349">,</span>&nbsp;<span class="ident" id="8575351">op</span><span class="op" id="8575353">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8575359">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575428">for</span>&nbsp;<span class="ident" id="8575432">y</span>&nbsp;<span class="op" id="8575434">:=</span>&nbsp;<span class="ident" id="8575437">b</span><span class="op" id="8575438">.</span><span class="ident" id="8575439">Min</span><span class="op" id="8575442">.</span><span class="ident" id="8575443">Y</span><span class="op" id="8575444">;</span>&nbsp;<span class="ident" id="8575446">y</span>&nbsp;<span class="op" id="8575448">&lt;</span>&nbsp;<span class="ident" id="8575450">b</span><span class="op" id="8575451">.</span><span class="ident" id="8575452">Max</span><span class="op" id="8575455">.</span><span class="ident" id="8575456">Y</span><span class="op" id="8575457">;</span>&nbsp;<span class="ident" id="8575459">y</span><span class="op" id="8575460">++</span>&nbsp;<span class="op" id="8575463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575470">for</span>&nbsp;<span class="ident" id="8575474">x</span>&nbsp;<span class="op" id="8575476">:=</span>&nbsp;<span class="ident" id="8575479">b</span><span class="op" id="8575480">.</span><span class="ident" id="8575481">Min</span><span class="op" id="8575484">.</span><span class="ident" id="8575485">X</span><span class="op" id="8575486">;</span>&nbsp;<span class="ident" id="8575488">x</span>&nbsp;<span class="op" id="8575490">&lt;</span>&nbsp;<span class="ident" id="8575492">b</span><span class="op" id="8575493">.</span><span class="ident" id="8575494">Max</span><span class="op" id="8575497">.</span><span class="ident" id="8575498">X</span><span class="op" id="8575499">;</span>&nbsp;<span class="ident" id="8575501">x</span><span class="op" id="8575502">++</span>&nbsp;<span class="op" id="8575505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575513">if</span>&nbsp;<span class="op" id="8575516">!</span><span class="ident" id="8575517">eq</span><span class="op" id="8575519">(</span><span class="ident" id="8575520">dst</span><span class="op" id="8575523">.</span><span class="ident" id="8575524">At</span><span class="op" id="8575526">(</span><span class="ident" id="8575527">x</span><span class="op" id="8575528">,</span>&nbsp;<span class="ident" id="8575530">y</span><span class="op" id="8575531">)</span><span class="op" id="8575532">,</span>&nbsp;<span class="ident" id="8575534">golden</span><span class="op" id="8575540">.</span><span class="ident" id="8575541">At</span><span class="op" id="8575543">(</span><span class="ident" id="8575544">x</span><span class="op" id="8575545">,</span>&nbsp;<span class="ident" id="8575547">y</span><span class="op" id="8575548">)</span><span class="op" id="8575549">)</span>&nbsp;<span class="op" id="8575551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575560">t</span><span class="op" id="8575561">.</span><span class="ident" id="8575562">Errorf</span><span class="op" id="8575568">(</span><span class="string" id="8575569">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8575632">,</span>&nbsp;<span class="ident" id="8575634">xoff</span><span class="op" id="8575638">,</span>&nbsp;<span class="ident" id="8575640">yoff</span><span class="op" id="8575644">,</span>&nbsp;<span class="ident" id="8575646">x</span><span class="op" id="8575647">,</span>&nbsp;<span class="ident" id="8575649">y</span><span class="op" id="8575650">,</span>&nbsp;<span class="ident" id="8575652">dst</span><span class="op" id="8575655">.</span><span class="ident" id="8575656">At</span><span class="op" id="8575658">(</span><span class="ident" id="8575659">x</span><span class="op" id="8575660">,</span>&nbsp;<span class="ident" id="8575662">y</span><span class="op" id="8575663">)</span><span class="op" id="8575664">,</span>&nbsp;<span class="ident" id="8575666">golden</span><span class="op" id="8575672">.</span><span class="ident" id="8575673">At</span><span class="op" id="8575675">(</span><span class="ident" id="8575676">x</span><span class="op" id="8575677">,</span>&nbsp;<span class="ident" id="8575679">y</span><span class="op" id="8575680">)</span><span class="op" id="8575681">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8575690">continue</span>&nbsp;<span class="ident" id="8575699">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575728">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8575735">}</span><br>
<span class="lineno"></span><span class="op" id="8575737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8575740">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="8575812">func</span>&nbsp;<span class="ident" id="8575817">TestNonZeroSrcPt</span><span class="op" id="8575833">(</span><span class="ident" id="8575834">t</span>&nbsp;<span class="op" id="8575836">*</span><span class="ident" id="8575837">testing</span><span class="op" id="8575844">.</span><span class="ident" id="8575845">T</span><span class="op" id="8575846">)</span>&nbsp;<span class="op" id="8575848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575851">a</span>&nbsp;<span class="op" id="8575853">:=</span>&nbsp;<span class="ident" id="8575856">image</span><span class="op" id="8575861">.</span><span class="ident" id="8575862">NewRGBA</span><span class="op" id="8575869">(</span><span class="ident" id="8575870">image</span><span class="op" id="8575875">.</span><span class="ident" id="8575876">Rect</span><span class="op" id="8575880">(</span><span class="num" id="8575881">0</span><span class="op" id="8575882">,</span>&nbsp;<span class="num" id="8575884">0</span><span class="op" id="8575885">,</span>&nbsp;<span class="num" id="8575887">1</span><span class="op" id="8575888">,</span>&nbsp;<span class="num" id="8575890">1</span><span class="op" id="8575891">)</span><span class="op" id="8575892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575895">b</span>&nbsp;<span class="op" id="8575897">:=</span>&nbsp;<span class="ident" id="8575900">image</span><span class="op" id="8575905">.</span><span class="ident" id="8575906">NewRGBA</span><span class="op" id="8575913">(</span><span class="ident" id="8575914">image</span><span class="op" id="8575919">.</span><span class="ident" id="8575920">Rect</span><span class="op" id="8575924">(</span><span class="num" id="8575925">0</span><span class="op" id="8575926">,</span>&nbsp;<span class="num" id="8575928">0</span><span class="op" id="8575929">,</span>&nbsp;<span class="num" id="8575931">2</span><span class="op" id="8575932">,</span>&nbsp;<span class="num" id="8575934">2</span><span class="op" id="8575935">)</span><span class="op" id="8575936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575939">b</span><span class="op" id="8575940">.</span><span class="ident" id="8575941">Set</span><span class="op" id="8575944">(</span><span class="num" id="8575945">0</span><span class="op" id="8575946">,</span>&nbsp;<span class="num" id="8575948">0</span><span class="op" id="8575949">,</span>&nbsp;<span class="ident" id="8575951">color</span><span class="op" id="8575956">.</span><span class="ident" id="8575957">RGBA</span><span class="op" id="8575961">{</span><span class="num" id="8575962">0</span><span class="op" id="8575963">,</span>&nbsp;<span class="num" id="8575965">0</span><span class="op" id="8575966">,</span>&nbsp;<span class="num" id="8575968">0</span><span class="op" id="8575969">,</span>&nbsp;<span class="num" id="8575971">5</span><span class="op" id="8575972">}</span><span class="op" id="8575973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8575976">b</span><span class="op" id="8575977">.</span><span class="ident" id="8575978">Set</span><span class="op" id="8575981">(</span><span class="num" id="8575982">1</span><span class="op" id="8575983">,</span>&nbsp;<span class="num" id="8575985">0</span><span class="op" id="8575986">,</span>&nbsp;<span class="ident" id="8575988">color</span><span class="op" id="8575993">.</span><span class="ident" id="8575994">RGBA</span><span class="op" id="8575998">{</span><span class="num" id="8575999">0</span><span class="op" id="8576000">,</span>&nbsp;<span class="num" id="8576002">0</span><span class="op" id="8576003">,</span>&nbsp;<span class="num" id="8576005">5</span><span class="op" id="8576006">,</span>&nbsp;<span class="num" id="8576008">5</span><span class="op" id="8576009">}</span><span class="op" id="8576010">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576013">b</span><span class="op" id="8576014">.</span><span class="ident" id="8576015">Set</span><span class="op" id="8576018">(</span><span class="num" id="8576019">0</span><span class="op" id="8576020">,</span>&nbsp;<span class="num" id="8576022">1</span><span class="op" id="8576023">,</span>&nbsp;<span class="ident" id="8576025">color</span><span class="op" id="8576030">.</span><span class="ident" id="8576031">RGBA</span><span class="op" id="8576035">{</span><span class="num" id="8576036">0</span><span class="op" id="8576037">,</span>&nbsp;<span class="num" id="8576039">5</span><span class="op" id="8576040">,</span>&nbsp;<span class="num" id="8576042">0</span><span class="op" id="8576043">,</span>&nbsp;<span class="num" id="8576045">5</span><span class="op" id="8576046">}</span><span class="op" id="8576047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576050">b</span><span class="op" id="8576051">.</span><span class="ident" id="8576052">Set</span><span class="op" id="8576055">(</span><span class="num" id="8576056">1</span><span class="op" id="8576057">,</span>&nbsp;<span class="num" id="8576059">1</span><span class="op" id="8576060">,</span>&nbsp;<span class="ident" id="8576062">color</span><span class="op" id="8576067">.</span><span class="ident" id="8576068">RGBA</span><span class="op" id="8576072">{</span><span class="num" id="8576073">5</span><span class="op" id="8576074">,</span>&nbsp;<span class="num" id="8576076">0</span><span class="op" id="8576077">,</span>&nbsp;<span class="num" id="8576079">0</span><span class="op" id="8576080">,</span>&nbsp;<span class="num" id="8576082">5</span><span class="op" id="8576083">}</span><span class="op" id="8576084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576087">Draw</span><span class="op" id="8576091">(</span><span class="ident" id="8576092">a</span><span class="op" id="8576093">,</span>&nbsp;<span class="ident" id="8576095">image</span><span class="op" id="8576100">.</span><span class="ident" id="8576101">Rect</span><span class="op" id="8576105">(</span><span class="num" id="8576106">0</span><span class="op" id="8576107">,</span>&nbsp;<span class="num" id="8576109">0</span><span class="op" id="8576110">,</span>&nbsp;<span class="num" id="8576112">1</span><span class="op" id="8576113">,</span>&nbsp;<span class="num" id="8576115">1</span><span class="op" id="8576116">)</span><span class="op" id="8576117">,</span>&nbsp;<span class="ident" id="8576119">b</span><span class="op" id="8576120">,</span>&nbsp;<span class="ident" id="8576122">image</span><span class="op" id="8576127">.</span><span class="ident" id="8576128">Pt</span><span class="op" id="8576130">(</span><span class="num" id="8576131">1</span><span class="op" id="8576132">,</span>&nbsp;<span class="num" id="8576134">1</span><span class="op" id="8576135">)</span><span class="op" id="8576136">,</span>&nbsp;<span class="ident" id="8576138">Over</span><span class="op" id="8576142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8576145">if</span>&nbsp;<span class="op" id="8576148">!</span><span class="ident" id="8576149">eq</span><span class="op" id="8576151">(</span><span class="ident" id="8576152">color</span><span class="op" id="8576157">.</span><span class="ident" id="8576158">RGBA</span><span class="op" id="8576162">{</span><span class="num" id="8576163">5</span><span class="op" id="8576164">,</span>&nbsp;<span class="num" id="8576166">0</span><span class="op" id="8576167">,</span>&nbsp;<span class="num" id="8576169">0</span><span class="op" id="8576170">,</span>&nbsp;<span class="num" id="8576172">5</span><span class="op" id="8576173">}</span><span class="op" id="8576174">,</span>&nbsp;<span class="ident" id="8576176">a</span><span class="op" id="8576177">.</span><span class="ident" id="8576178">At</span><span class="op" id="8576180">(</span><span class="num" id="8576181">0</span><span class="op" id="8576182">,</span>&nbsp;<span class="num" id="8576184">0</span><span class="op" id="8576185">)</span><span class="op" id="8576186">)</span>&nbsp;<span class="op" id="8576188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576192">t</span><span class="op" id="8576193">.</span><span class="ident" id="8576194">Errorf</span><span class="op" id="8576200">(</span><span class="string" id="8576201">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8576234">,</span>&nbsp;<span class="ident" id="8576236">color</span><span class="op" id="8576241">.</span><span class="ident" id="8576242">RGBA</span><span class="op" id="8576246">{</span><span class="num" id="8576247">5</span><span class="op" id="8576248">,</span>&nbsp;<span class="num" id="8576250">0</span><span class="op" id="8576251">,</span>&nbsp;<span class="num" id="8576253">0</span><span class="op" id="8576254">,</span>&nbsp;<span class="num" id="8576256">5</span><span class="op" id="8576257">}</span><span class="op" id="8576258">,</span>&nbsp;<span class="ident" id="8576260">a</span><span class="op" id="8576261">.</span><span class="ident" id="8576262">At</span><span class="op" id="8576264">(</span><span class="num" id="8576265">0</span><span class="op" id="8576266">,</span>&nbsp;<span class="num" id="8576268">0</span><span class="op" id="8576269">)</span><span class="op" id="8576270">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8576273">}</span><br>
<span class="lineno"></span><span class="op" id="8576275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8576278">func</span>&nbsp;<span class="ident" id="8576283">TestFill</span><span class="op" id="8576291">(</span><span class="ident" id="8576292">t</span>&nbsp;<span class="op" id="8576294">*</span><span class="ident" id="8576295">testing</span><span class="op" id="8576302">.</span><span class="ident" id="8576303">T</span><span class="op" id="8576304">)</span>&nbsp;<span class="op" id="8576306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576309">rr</span>&nbsp;<span class="op" id="8576312">:=</span>&nbsp;<span class="op" id="8576315">[</span><span class="op" id="8576316">]</span><span class="ident" id="8576317">image</span><span class="op" id="8576322">.</span><span class="ident" id="8576323">Rectangle</span><span class="op" id="8576332">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576336">image</span><span class="op" id="8576341">.</span><span class="ident" id="8576342">Rect</span><span class="op" id="8576346">(</span><span class="num" id="8576347">0</span><span class="op" id="8576348">,</span>&nbsp;<span class="num" id="8576350">0</span><span class="op" id="8576351">,</span>&nbsp;<span class="num" id="8576353">0</span><span class="op" id="8576354">,</span>&nbsp;<span class="num" id="8576356">0</span><span class="op" id="8576357">)</span><span class="op" id="8576358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576362">image</span><span class="op" id="8576367">.</span><span class="ident" id="8576368">Rect</span><span class="op" id="8576372">(</span><span class="num" id="8576373">0</span><span class="op" id="8576374">,</span>&nbsp;<span class="num" id="8576376">0</span><span class="op" id="8576377">,</span>&nbsp;<span class="num" id="8576379">40</span><span class="op" id="8576381">,</span>&nbsp;<span class="num" id="8576383">30</span><span class="op" id="8576385">)</span><span class="op" id="8576386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576390">image</span><span class="op" id="8576395">.</span><span class="ident" id="8576396">Rect</span><span class="op" id="8576400">(</span><span class="num" id="8576401">10</span><span class="op" id="8576403">,</span>&nbsp;<span class="num" id="8576405">0</span><span class="op" id="8576406">,</span>&nbsp;<span class="num" id="8576408">40</span><span class="op" id="8576410">,</span>&nbsp;<span class="num" id="8576412">30</span><span class="op" id="8576414">)</span><span class="op" id="8576415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576419">image</span><span class="op" id="8576424">.</span><span class="ident" id="8576425">Rect</span><span class="op" id="8576429">(</span><span class="num" id="8576430">0</span><span class="op" id="8576431">,</span>&nbsp;<span class="num" id="8576433">20</span><span class="op" id="8576435">,</span>&nbsp;<span class="num" id="8576437">40</span><span class="op" id="8576439">,</span>&nbsp;<span class="num" id="8576441">30</span><span class="op" id="8576443">)</span><span class="op" id="8576444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576448">image</span><span class="op" id="8576453">.</span><span class="ident" id="8576454">Rect</span><span class="op" id="8576458">(</span><span class="num" id="8576459">10</span><span class="op" id="8576461">,</span>&nbsp;<span class="num" id="8576463">20</span><span class="op" id="8576465">,</span>&nbsp;<span class="num" id="8576467">40</span><span class="op" id="8576469">,</span>&nbsp;<span class="num" id="8576471">30</span><span class="op" id="8576473">)</span><span class="op" id="8576474">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576478">image</span><span class="op" id="8576483">.</span><span class="ident" id="8576484">Rect</span><span class="op" id="8576488">(</span><span class="num" id="8576489">10</span><span class="op" id="8576491">,</span>&nbsp;<span class="num" id="8576493">20</span><span class="op" id="8576495">,</span>&nbsp;<span class="num" id="8576497">15</span><span class="op" id="8576499">,</span>&nbsp;<span class="num" id="8576501">25</span><span class="op" id="8576503">)</span><span class="op" id="8576504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576508">image</span><span class="op" id="8576513">.</span><span class="ident" id="8576514">Rect</span><span class="op" id="8576518">(</span><span class="num" id="8576519">10</span><span class="op" id="8576521">,</span>&nbsp;<span class="num" id="8576523">0</span><span class="op" id="8576524">,</span>&nbsp;<span class="num" id="8576526">35</span><span class="op" id="8576528">,</span>&nbsp;<span class="num" id="8576530">30</span><span class="op" id="8576532">)</span><span class="op" id="8576533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576537">image</span><span class="op" id="8576542">.</span><span class="ident" id="8576543">Rect</span><span class="op" id="8576547">(</span><span class="num" id="8576548">0</span><span class="op" id="8576549">,</span>&nbsp;<span class="num" id="8576551">15</span><span class="op" id="8576553">,</span>&nbsp;<span class="num" id="8576555">40</span><span class="op" id="8576557">,</span>&nbsp;<span class="num" id="8576559">16</span><span class="op" id="8576561">)</span><span class="op" id="8576562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576566">image</span><span class="op" id="8576571">.</span><span class="ident" id="8576572">Rect</span><span class="op" id="8576576">(</span><span class="num" id="8576577">24</span><span class="op" id="8576579">,</span>&nbsp;<span class="num" id="8576581">24</span><span class="op" id="8576583">,</span>&nbsp;<span class="num" id="8576585">25</span><span class="op" id="8576587">,</span>&nbsp;<span class="num" id="8576589">25</span><span class="op" id="8576591">)</span><span class="op" id="8576592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576596">image</span><span class="op" id="8576601">.</span><span class="ident" id="8576602">Rect</span><span class="op" id="8576606">(</span><span class="num" id="8576607">23</span><span class="op" id="8576609">,</span>&nbsp;<span class="num" id="8576611">23</span><span class="op" id="8576613">,</span>&nbsp;<span class="num" id="8576615">26</span><span class="op" id="8576617">,</span>&nbsp;<span class="num" id="8576619">26</span><span class="op" id="8576621">)</span><span class="op" id="8576622">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576626">image</span><span class="op" id="8576631">.</span><span class="ident" id="8576632">Rect</span><span class="op" id="8576636">(</span><span class="num" id="8576637">22</span><span class="op" id="8576639">,</span>&nbsp;<span class="num" id="8576641">22</span><span class="op" id="8576643">,</span>&nbsp;<span class="num" id="8576645">27</span><span class="op" id="8576647">,</span>&nbsp;<span class="num" id="8576649">27</span><span class="op" id="8576651">)</span><span class="op" id="8576652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576656">image</span><span class="op" id="8576661">.</span><span class="ident" id="8576662">Rect</span><span class="op" id="8576666">(</span><span class="num" id="8576667">21</span><span class="op" id="8576669">,</span>&nbsp;<span class="num" id="8576671">21</span><span class="op" id="8576673">,</span>&nbsp;<span class="num" id="8576675">28</span><span class="op" id="8576677">,</span>&nbsp;<span class="num" id="8576679">28</span><span class="op" id="8576681">)</span><span class="op" id="8576682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576686">image</span><span class="op" id="8576691">.</span><span class="ident" id="8576692">Rect</span><span class="op" id="8576696">(</span><span class="num" id="8576697">20</span><span class="op" id="8576699">,</span>&nbsp;<span class="num" id="8576701">20</span><span class="op" id="8576703">,</span>&nbsp;<span class="num" id="8576705">29</span><span class="op" id="8576707">,</span>&nbsp;<span class="num" id="8576709">29</span><span class="op" id="8576711">)</span><span class="op" id="8576712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8576715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8576718">for</span>&nbsp;<span class="ident" id="8576722">_</span><span class="op" id="8576723">,</span>&nbsp;<span class="ident" id="8576725">r</span>&nbsp;<span class="op" id="8576727">:=</span>&nbsp;<span class="keyword" id="8576730">range</span>&nbsp;<span class="ident" id="8576736">rr</span>&nbsp;<span class="op" id="8576739">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576743">m</span>&nbsp;<span class="op" id="8576745">:=</span>&nbsp;<span class="ident" id="8576748">image</span><span class="op" id="8576753">.</span><span class="ident" id="8576754">NewRGBA</span><span class="op" id="8576761">(</span><span class="ident" id="8576762">image</span><span class="op" id="8576767">.</span><span class="ident" id="8576768">Rect</span><span class="op" id="8576772">(</span><span class="num" id="8576773">0</span><span class="op" id="8576774">,</span>&nbsp;<span class="num" id="8576776">0</span><span class="op" id="8576777">,</span>&nbsp;<span class="num" id="8576779">40</span><span class="op" id="8576781">,</span>&nbsp;<span class="num" id="8576783">30</span><span class="op" id="8576785">)</span><span class="op" id="8576786">)</span><span class="op" id="8576787">.</span><span class="ident" id="8576788">SubImage</span><span class="op" id="8576796">(</span><span class="ident" id="8576797">r</span><span class="op" id="8576798">)</span><span class="op" id="8576799">.</span><span class="op" id="8576800">(</span><span class="op" id="8576801">*</span><span class="ident" id="8576802">image</span><span class="op" id="8576807">.</span><span class="ident" id="8576808">RGBA</span><span class="op" id="8576812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576816">b</span>&nbsp;<span class="op" id="8576818">:=</span>&nbsp;<span class="ident" id="8576821">m</span><span class="op" id="8576822">.</span><span class="ident" id="8576823">Bounds</span><span class="op" id="8576829">(</span><span class="op" id="8576830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576834">c</span>&nbsp;<span class="op" id="8576836">:=</span>&nbsp;<span class="ident" id="8576839">color</span><span class="op" id="8576844">.</span><span class="ident" id="8576845">RGBA</span><span class="op" id="8576849">{</span><span class="num" id="8576850">11</span><span class="op" id="8576852">,</span>&nbsp;<span class="num" id="8576854">0</span><span class="op" id="8576855">,</span>&nbsp;<span class="num" id="8576857">0</span><span class="op" id="8576858">,</span>&nbsp;<span class="num" id="8576860">255</span><span class="op" id="8576863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576867">src</span>&nbsp;<span class="op" id="8576871">:=</span>&nbsp;<span class="op" id="8576874">&amp;</span><span class="ident" id="8576875">image</span><span class="op" id="8576880">.</span><span class="ident" id="8576881">Uniform</span><span class="op" id="8576888">{</span><span class="ident" id="8576889">C</span><span class="op" id="8576890">:</span>&nbsp;<span class="ident" id="8576892">c</span><span class="op" id="8576893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8576897">check</span>&nbsp;<span class="op" id="8576903">:=</span>&nbsp;<span class="keyword" id="8576906">func</span><span class="op" id="8576910">(</span><span class="ident" id="8576911">desc</span>&nbsp;<span class="builtintype" id="8576916">string</span><span class="op" id="8576922">)</span>&nbsp;<span class="op" id="8576924">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8576929">for</span>&nbsp;<span class="ident" id="8576933">y</span>&nbsp;<span class="op" id="8576935">:=</span>&nbsp;<span class="ident" id="8576938">b</span><span class="op" id="8576939">.</span><span class="ident" id="8576940">Min</span><span class="op" id="8576943">.</span><span class="ident" id="8576944">Y</span><span class="op" id="8576945">;</span>&nbsp;<span class="ident" id="8576947">y</span>&nbsp;<span class="op" id="8576949">&lt;</span>&nbsp;<span class="ident" id="8576951">b</span><span class="op" id="8576952">.</span><span class="ident" id="8576953">Max</span><span class="op" id="8576956">.</span><span class="ident" id="8576957">Y</span><span class="op" id="8576958">;</span>&nbsp;<span class="ident" id="8576960">y</span><span class="op" id="8576961">++</span>&nbsp;<span class="op" id="8576964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8576970">for</span>&nbsp;<span class="ident" id="8576974">x</span>&nbsp;<span class="op" id="8576976">:=</span>&nbsp;<span class="ident" id="8576979">b</span><span class="op" id="8576980">.</span><span class="ident" id="8576981">Min</span><span class="op" id="8576984">.</span><span class="ident" id="8576985">X</span><span class="op" id="8576986">;</span>&nbsp;<span class="ident" id="8576988">x</span>&nbsp;<span class="op" id="8576990">&lt;</span>&nbsp;<span class="ident" id="8576992">b</span><span class="op" id="8576993">.</span><span class="ident" id="8576994">Max</span><span class="op" id="8576997">.</span><span class="ident" id="8576998">X</span><span class="op" id="8576999">;</span>&nbsp;<span class="ident" id="8577001">x</span><span class="op" id="8577002">++</span>&nbsp;<span class="op" id="8577005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577012">if</span>&nbsp;<span class="op" id="8577015">!</span><span class="ident" id="8577016">eq</span><span class="op" id="8577018">(</span><span class="ident" id="8577019">c</span><span class="op" id="8577020">,</span>&nbsp;<span class="ident" id="8577022">m</span><span class="op" id="8577023">.</span><span class="ident" id="8577024">At</span><span class="op" id="8577026">(</span><span class="ident" id="8577027">x</span><span class="op" id="8577028">,</span>&nbsp;<span class="ident" id="8577030">y</span><span class="op" id="8577031">)</span><span class="op" id="8577032">)</span>&nbsp;<span class="op" id="8577034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577042">t</span><span class="op" id="8577043">.</span><span class="ident" id="8577044">Errorf</span><span class="op" id="8577050">(</span><span class="string" id="8577051">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8577110">,</span>&nbsp;<span class="ident" id="8577112">desc</span><span class="op" id="8577116">,</span>&nbsp;<span class="ident" id="8577118">x</span><span class="op" id="8577119">,</span>&nbsp;<span class="ident" id="8577121">y</span><span class="op" id="8577122">,</span>&nbsp;<span class="ident" id="8577124">r</span><span class="op" id="8577125">,</span>&nbsp;<span class="ident" id="8577127">c</span><span class="op" id="8577128">,</span>&nbsp;<span class="ident" id="8577130">m</span><span class="op" id="8577131">.</span><span class="ident" id="8577132">At</span><span class="op" id="8577134">(</span><span class="ident" id="8577135">x</span><span class="op" id="8577136">,</span>&nbsp;<span class="ident" id="8577138">y</span><span class="op" id="8577139">)</span><span class="op" id="8577140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577148">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8577179">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577208">for</span>&nbsp;<span class="ident" id="8577212">y</span>&nbsp;<span class="op" id="8577214">:=</span>&nbsp;<span class="ident" id="8577217">b</span><span class="op" id="8577218">.</span><span class="ident" id="8577219">Min</span><span class="op" id="8577222">.</span><span class="ident" id="8577223">Y</span><span class="op" id="8577224">;</span>&nbsp;<span class="ident" id="8577226">y</span>&nbsp;<span class="op" id="8577228">&lt;</span>&nbsp;<span class="ident" id="8577230">b</span><span class="op" id="8577231">.</span><span class="ident" id="8577232">Max</span><span class="op" id="8577235">.</span><span class="ident" id="8577236">Y</span><span class="op" id="8577237">;</span>&nbsp;<span class="ident" id="8577239">y</span><span class="op" id="8577240">++</span>&nbsp;<span class="op" id="8577243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577248">for</span>&nbsp;<span class="ident" id="8577252">x</span>&nbsp;<span class="op" id="8577254">:=</span>&nbsp;<span class="ident" id="8577257">b</span><span class="op" id="8577258">.</span><span class="ident" id="8577259">Min</span><span class="op" id="8577262">.</span><span class="ident" id="8577263">X</span><span class="op" id="8577264">;</span>&nbsp;<span class="ident" id="8577266">x</span>&nbsp;<span class="op" id="8577268">&lt;</span>&nbsp;<span class="ident" id="8577270">b</span><span class="op" id="8577271">.</span><span class="ident" id="8577272">Max</span><span class="op" id="8577275">.</span><span class="ident" id="8577276">X</span><span class="op" id="8577277">;</span>&nbsp;<span class="ident" id="8577279">x</span><span class="op" id="8577280">++</span>&nbsp;<span class="op" id="8577283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577289">DrawMask</span><span class="op" id="8577297">(</span><span class="ident" id="8577298">m</span><span class="op" id="8577299">,</span>&nbsp;<span class="ident" id="8577301">image</span><span class="op" id="8577306">.</span><span class="ident" id="8577307">Rect</span><span class="op" id="8577311">(</span><span class="ident" id="8577312">x</span><span class="op" id="8577313">,</span>&nbsp;<span class="ident" id="8577315">y</span><span class="op" id="8577316">,</span>&nbsp;<span class="ident" id="8577318">x</span><span class="op" id="8577319">+</span><span class="num" id="8577320">1</span><span class="op" id="8577321">,</span>&nbsp;<span class="ident" id="8577323">y</span><span class="op" id="8577324">+</span><span class="num" id="8577325">1</span><span class="op" id="8577326">)</span><span class="op" id="8577327">,</span>&nbsp;<span class="ident" id="8577329">src</span><span class="op" id="8577332">,</span>&nbsp;<span class="ident" id="8577334">image</span><span class="op" id="8577339">.</span><span class="ident" id="8577340">ZP</span><span class="op" id="8577342">,</span>&nbsp;<span class="ident" id="8577344">nil</span><span class="op" id="8577347">,</span>&nbsp;<span class="ident" id="8577349">image</span><span class="op" id="8577354">.</span><span class="ident" id="8577355">ZP</span><span class="op" id="8577357">,</span>&nbsp;<span class="ident" id="8577359">Src</span><span class="op" id="8577362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577371">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577375">check</span><span class="op" id="8577380">(</span><span class="string" id="8577381">&#34;pixel&#34;</span><span class="op" id="8577388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8577392">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577419">c</span>&nbsp;<span class="op" id="8577421">=</span>&nbsp;<span class="ident" id="8577423">color</span><span class="op" id="8577428">.</span><span class="ident" id="8577429">RGBA</span><span class="op" id="8577433">{</span><span class="num" id="8577434">0</span><span class="op" id="8577435">,</span>&nbsp;<span class="num" id="8577437">22</span><span class="op" id="8577439">,</span>&nbsp;<span class="num" id="8577441">0</span><span class="op" id="8577442">,</span>&nbsp;<span class="num" id="8577444">255</span><span class="op" id="8577447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577451">src</span>&nbsp;<span class="op" id="8577455">=</span>&nbsp;<span class="op" id="8577457">&amp;</span><span class="ident" id="8577458">image</span><span class="op" id="8577463">.</span><span class="ident" id="8577464">Uniform</span><span class="op" id="8577471">{</span><span class="ident" id="8577472">C</span><span class="op" id="8577473">:</span>&nbsp;<span class="ident" id="8577475">c</span><span class="op" id="8577476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577480">for</span>&nbsp;<span class="ident" id="8577484">y</span>&nbsp;<span class="op" id="8577486">:=</span>&nbsp;<span class="ident" id="8577489">b</span><span class="op" id="8577490">.</span><span class="ident" id="8577491">Min</span><span class="op" id="8577494">.</span><span class="ident" id="8577495">Y</span><span class="op" id="8577496">;</span>&nbsp;<span class="ident" id="8577498">y</span>&nbsp;<span class="op" id="8577500">&lt;</span>&nbsp;<span class="ident" id="8577502">b</span><span class="op" id="8577503">.</span><span class="ident" id="8577504">Max</span><span class="op" id="8577507">.</span><span class="ident" id="8577508">Y</span><span class="op" id="8577509">;</span>&nbsp;<span class="ident" id="8577511">y</span><span class="op" id="8577512">++</span>&nbsp;<span class="op" id="8577515">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577520">DrawMask</span><span class="op" id="8577528">(</span><span class="ident" id="8577529">m</span><span class="op" id="8577530">,</span>&nbsp;<span class="ident" id="8577532">image</span><span class="op" id="8577537">.</span><span class="ident" id="8577538">Rect</span><span class="op" id="8577542">(</span><span class="ident" id="8577543">b</span><span class="op" id="8577544">.</span><span class="ident" id="8577545">Min</span><span class="op" id="8577548">.</span><span class="ident" id="8577549">X</span><span class="op" id="8577550">,</span>&nbsp;<span class="ident" id="8577552">y</span><span class="op" id="8577553">,</span>&nbsp;<span class="ident" id="8577555">b</span><span class="op" id="8577556">.</span><span class="ident" id="8577557">Max</span><span class="op" id="8577560">.</span><span class="ident" id="8577561">X</span><span class="op" id="8577562">,</span>&nbsp;<span class="ident" id="8577564">y</span><span class="op" id="8577565">+</span><span class="num" id="8577566">1</span><span class="op" id="8577567">)</span><span class="op" id="8577568">,</span>&nbsp;<span class="ident" id="8577570">src</span><span class="op" id="8577573">,</span>&nbsp;<span class="ident" id="8577575">image</span><span class="op" id="8577580">.</span><span class="ident" id="8577581">ZP</span><span class="op" id="8577583">,</span>&nbsp;<span class="ident" id="8577585">nil</span><span class="op" id="8577588">,</span>&nbsp;<span class="ident" id="8577590">image</span><span class="op" id="8577595">.</span><span class="ident" id="8577596">ZP</span><span class="op" id="8577598">,</span>&nbsp;<span class="ident" id="8577600">Src</span><span class="op" id="8577603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577611">check</span><span class="op" id="8577616">(</span><span class="string" id="8577617">&#34;row&#34;</span><span class="op" id="8577622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8577626">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577656">c</span>&nbsp;<span class="op" id="8577658">=</span>&nbsp;<span class="ident" id="8577660">color</span><span class="op" id="8577665">.</span><span class="ident" id="8577666">RGBA</span><span class="op" id="8577670">{</span><span class="num" id="8577671">0</span><span class="op" id="8577672">,</span>&nbsp;<span class="num" id="8577674">0</span><span class="op" id="8577675">,</span>&nbsp;<span class="num" id="8577677">33</span><span class="op" id="8577679">,</span>&nbsp;<span class="num" id="8577681">255</span><span class="op" id="8577684">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577688">src</span>&nbsp;<span class="op" id="8577692">=</span>&nbsp;<span class="op" id="8577694">&amp;</span><span class="ident" id="8577695">image</span><span class="op" id="8577700">.</span><span class="ident" id="8577701">Uniform</span><span class="op" id="8577708">{</span><span class="ident" id="8577709">C</span><span class="op" id="8577710">:</span>&nbsp;<span class="ident" id="8577712">c</span><span class="op" id="8577713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8577717">for</span>&nbsp;<span class="ident" id="8577721">x</span>&nbsp;<span class="op" id="8577723">:=</span>&nbsp;<span class="ident" id="8577726">b</span><span class="op" id="8577727">.</span><span class="ident" id="8577728">Min</span><span class="op" id="8577731">.</span><span class="ident" id="8577732">X</span><span class="op" id="8577733">;</span>&nbsp;<span class="ident" id="8577735">x</span>&nbsp;<span class="op" id="8577737">&lt;</span>&nbsp;<span class="ident" id="8577739">b</span><span class="op" id="8577740">.</span><span class="ident" id="8577741">Max</span><span class="op" id="8577744">.</span><span class="ident" id="8577745">X</span><span class="op" id="8577746">;</span>&nbsp;<span class="ident" id="8577748">x</span><span class="op" id="8577749">++</span>&nbsp;<span class="op" id="8577752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577757">DrawMask</span><span class="op" id="8577765">(</span><span class="ident" id="8577766">m</span><span class="op" id="8577767">,</span>&nbsp;<span class="ident" id="8577769">image</span><span class="op" id="8577774">.</span><span class="ident" id="8577775">Rect</span><span class="op" id="8577779">(</span><span class="ident" id="8577780">x</span><span class="op" id="8577781">,</span>&nbsp;<span class="ident" id="8577783">b</span><span class="op" id="8577784">.</span><span class="ident" id="8577785">Min</span><span class="op" id="8577788">.</span><span class="ident" id="8577789">Y</span><span class="op" id="8577790">,</span>&nbsp;<span class="ident" id="8577792">x</span><span class="op" id="8577793">+</span><span class="num" id="8577794">1</span><span class="op" id="8577795">,</span>&nbsp;<span class="ident" id="8577797">b</span><span class="op" id="8577798">.</span><span class="ident" id="8577799">Max</span><span class="op" id="8577802">.</span><span class="ident" id="8577803">Y</span><span class="op" id="8577804">)</span><span class="op" id="8577805">,</span>&nbsp;<span class="ident" id="8577807">src</span><span class="op" id="8577810">,</span>&nbsp;<span class="ident" id="8577812">image</span><span class="op" id="8577817">.</span><span class="ident" id="8577818">ZP</span><span class="op" id="8577820">,</span>&nbsp;<span class="ident" id="8577822">nil</span><span class="op" id="8577825">,</span>&nbsp;<span class="ident" id="8577827">image</span><span class="op" id="8577832">.</span><span class="ident" id="8577833">ZP</span><span class="op" id="8577835">,</span>&nbsp;<span class="ident" id="8577837">Src</span><span class="op" id="8577840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8577844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577848">check</span><span class="op" id="8577853">(</span><span class="string" id="8577854">&#34;column&#34;</span><span class="op" id="8577862">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8577866">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577901">c</span>&nbsp;<span class="op" id="8577903">=</span>&nbsp;<span class="ident" id="8577905">color</span><span class="op" id="8577910">.</span><span class="ident" id="8577911">RGBA</span><span class="op" id="8577915">{</span><span class="num" id="8577916">44</span><span class="op" id="8577918">,</span>&nbsp;<span class="num" id="8577920">55</span><span class="op" id="8577922">,</span>&nbsp;<span class="num" id="8577924">66</span><span class="op" id="8577926">,</span>&nbsp;<span class="num" id="8577928">77</span><span class="op" id="8577930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577934">src</span>&nbsp;<span class="op" id="8577938">=</span>&nbsp;<span class="op" id="8577940">&amp;</span><span class="ident" id="8577941">image</span><span class="op" id="8577946">.</span><span class="ident" id="8577947">Uniform</span><span class="op" id="8577954">{</span><span class="ident" id="8577955">C</span><span class="op" id="8577956">:</span>&nbsp;<span class="ident" id="8577958">c</span><span class="op" id="8577959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8577963">DrawMask</span><span class="op" id="8577971">(</span><span class="ident" id="8577972">m</span><span class="op" id="8577973">,</span>&nbsp;<span class="ident" id="8577975">b</span><span class="op" id="8577976">,</span>&nbsp;<span class="ident" id="8577978">src</span><span class="op" id="8577981">,</span>&nbsp;<span class="ident" id="8577983">image</span><span class="op" id="8577988">.</span><span class="ident" id="8577989">ZP</span><span class="op" id="8577991">,</span>&nbsp;<span class="ident" id="8577993">nil</span><span class="op" id="8577996">,</span>&nbsp;<span class="ident" id="8577998">image</span><span class="op" id="8578003">.</span><span class="ident" id="8578004">ZP</span><span class="op" id="8578006">,</span>&nbsp;<span class="ident" id="8578008">Src</span><span class="op" id="8578011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578015">check</span><span class="op" id="8578020">(</span><span class="string" id="8578021">&#34;whole&#34;</span><span class="op" id="8578028">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8578031">}</span><br>
<span class="lineno"></span><span class="op" id="8578033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8578036">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="8578111">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="8578188">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="8578226">func</span>&nbsp;<span class="ident" id="8578231">TestFloydSteinbergCheckerboard</span><span class="op" id="8578261">(</span><span class="ident" id="8578262">t</span>&nbsp;<span class="op" id="8578264">*</span><span class="ident" id="8578265">testing</span><span class="op" id="8578272">.</span><span class="ident" id="8578273">T</span><span class="op" id="8578274">)</span>&nbsp;<span class="op" id="8578276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578279">b</span>&nbsp;<span class="op" id="8578281">:=</span>&nbsp;<span class="ident" id="8578284">image</span><span class="op" id="8578289">.</span><span class="ident" id="8578290">Rect</span><span class="op" id="8578294">(</span><span class="num" id="8578295">0</span><span class="op" id="8578296">,</span>&nbsp;<span class="num" id="8578298">0</span><span class="op" id="8578299">,</span>&nbsp;<span class="num" id="8578301">640</span><span class="op" id="8578304">,</span>&nbsp;<span class="num" id="8578306">480</span><span class="op" id="8578309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8578312">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578385">src</span>&nbsp;<span class="op" id="8578389">:=</span>&nbsp;<span class="op" id="8578392">&amp;</span><span class="ident" id="8578393">image</span><span class="op" id="8578398">.</span><span class="ident" id="8578399">Uniform</span><span class="op" id="8578406">{</span><span class="ident" id="8578407">color</span><span class="op" id="8578412">.</span><span class="ident" id="8578413">Gray16</span><span class="op" id="8578419">{</span><span class="num" id="8578420">0x7fff</span><span class="op" id="8578426">}</span><span class="op" id="8578427">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578430">dst</span>&nbsp;<span class="op" id="8578434">:=</span>&nbsp;<span class="ident" id="8578437">image</span><span class="op" id="8578442">.</span><span class="ident" id="8578443">NewPaletted</span><span class="op" id="8578454">(</span><span class="ident" id="8578455">b</span><span class="op" id="8578456">,</span>&nbsp;<span class="ident" id="8578458">color</span><span class="op" id="8578463">.</span><span class="ident" id="8578464">Palette</span><span class="op" id="8578471">{</span><span class="ident" id="8578472">color</span><span class="op" id="8578477">.</span><span class="ident" id="8578478">Black</span><span class="op" id="8578483">,</span>&nbsp;<span class="ident" id="8578485">color</span><span class="op" id="8578490">.</span><span class="ident" id="8578491">White</span><span class="op" id="8578496">}</span><span class="op" id="8578497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578500">FloydSteinberg</span><span class="op" id="8578514">.</span><span class="ident" id="8578515">Draw</span><span class="op" id="8578519">(</span><span class="ident" id="8578520">dst</span><span class="op" id="8578523">,</span>&nbsp;<span class="ident" id="8578525">b</span><span class="op" id="8578526">,</span>&nbsp;<span class="ident" id="8578528">src</span><span class="op" id="8578531">,</span>&nbsp;<span class="ident" id="8578533">image</span><span class="op" id="8578538">.</span><span class="ident" id="8578539">Point</span><span class="op" id="8578544">{</span><span class="op" id="8578545">}</span><span class="op" id="8578546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578549">nErr</span>&nbsp;<span class="op" id="8578554">:=</span>&nbsp;<span class="num" id="8578557">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8578560">for</span>&nbsp;<span class="ident" id="8578564">y</span>&nbsp;<span class="op" id="8578566">:=</span>&nbsp;<span class="ident" id="8578569">b</span><span class="op" id="8578570">.</span><span class="ident" id="8578571">Min</span><span class="op" id="8578574">.</span><span class="ident" id="8578575">Y</span><span class="op" id="8578576">;</span>&nbsp;<span class="ident" id="8578578">y</span>&nbsp;<span class="op" id="8578580">&lt;</span>&nbsp;<span class="ident" id="8578582">b</span><span class="op" id="8578583">.</span><span class="ident" id="8578584">Max</span><span class="op" id="8578587">.</span><span class="ident" id="8578588">Y</span><span class="op" id="8578589">;</span>&nbsp;<span class="ident" id="8578591">y</span><span class="op" id="8578592">++</span>&nbsp;<span class="op" id="8578595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8578599">for</span>&nbsp;<span class="ident" id="8578603">x</span>&nbsp;<span class="op" id="8578605">:=</span>&nbsp;<span class="ident" id="8578608">b</span><span class="op" id="8578609">.</span><span class="ident" id="8578610">Min</span><span class="op" id="8578613">.</span><span class="ident" id="8578614">X</span><span class="op" id="8578615">;</span>&nbsp;<span class="ident" id="8578617">x</span>&nbsp;<span class="op" id="8578619">&lt;</span>&nbsp;<span class="ident" id="8578621">b</span><span class="op" id="8578622">.</span><span class="ident" id="8578623">Max</span><span class="op" id="8578626">.</span><span class="ident" id="8578627">X</span><span class="op" id="8578628">;</span>&nbsp;<span class="ident" id="8578630">x</span><span class="op" id="8578631">++</span>&nbsp;<span class="op" id="8578634">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578639">got</span>&nbsp;<span class="op" id="8578643">:=</span>&nbsp;<span class="ident" id="8578646">dst</span><span class="op" id="8578649">.</span><span class="ident" id="8578650">Pix</span><span class="op" id="8578653">[</span><span class="ident" id="8578654">dst</span><span class="op" id="8578657">.</span><span class="ident" id="8578658">PixOffset</span><span class="op" id="8578667">(</span><span class="ident" id="8578668">x</span><span class="op" id="8578669">,</span>&nbsp;<span class="ident" id="8578671">y</span><span class="op" id="8578672">)</span><span class="op" id="8578673">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578678">want</span>&nbsp;<span class="op" id="8578683">:=</span>&nbsp;<span class="builtintype" id="8578686">uint8</span><span class="op" id="8578691">(</span><span class="ident" id="8578692">x</span><span class="op" id="8578693">+</span><span class="ident" id="8578694">y</span><span class="op" id="8578695">)</span>&nbsp;<span class="op" id="8578697">%</span>&nbsp;<span class="num" id="8578699">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8578704">if</span>&nbsp;<span class="ident" id="8578707">got</span>&nbsp;<span class="op" id="8578711">!=</span>&nbsp;<span class="ident" id="8578714">want</span>&nbsp;<span class="op" id="8578719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578725">t</span><span class="op" id="8578726">.</span><span class="ident" id="8578727">Errorf</span><span class="op" id="8578733">(</span><span class="string" id="8578734">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8578764">,</span>&nbsp;<span class="ident" id="8578766">x</span><span class="op" id="8578767">,</span>&nbsp;<span class="ident" id="8578769">y</span><span class="op" id="8578770">,</span>&nbsp;<span class="ident" id="8578772">got</span><span class="op" id="8578775">,</span>&nbsp;<span class="ident" id="8578777">want</span><span class="op" id="8578781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8578787">if</span>&nbsp;<span class="ident" id="8578790">nErr</span><span class="op" id="8578794">++</span><span class="op" id="8578796">;</span>&nbsp;<span class="ident" id="8578798">nErr</span>&nbsp;<span class="op" id="8578803">==</span>&nbsp;<span class="num" id="8578806">10</span>&nbsp;<span class="op" id="8578809">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8578816">t</span><span class="op" id="8578817">.</span><span class="ident" id="8578818">Fatal</span><span class="op" id="8578823">(</span><span class="string" id="8578824">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="8578850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8578856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8578861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8578865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8578868">}</span><br>
<span class="lineno">380</span><span class="op" id="8578870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8578873">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="8578952">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="8578984">type</span>&nbsp;<span class="ident" id="8578989">embeddedPaletted</span>&nbsp;<span class="keyword" id="8579006">struct</span>&nbsp;<span class="op" id="8579013">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8579016">*</span><span class="ident" id="8579017">image</span><span class="op" id="8579022">.</span><span class="ident" id="8579023">Paletted</span><br>
<span class="lineno"></span><span class="op" id="8579032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8579035">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="8579105">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="8579157">func</span>&nbsp;<span class="ident" id="8579162">TestPaletted</span><span class="op" id="8579174">(</span><span class="ident" id="8579175">t</span>&nbsp;<span class="op" id="8579177">*</span><span class="ident" id="8579178">testing</span><span class="op" id="8579185">.</span><span class="ident" id="8579186">T</span><span class="op" id="8579187">)</span>&nbsp;<span class="op" id="8579189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579192">f</span><span class="op" id="8579193">,</span>&nbsp;<span class="ident" id="8579195">err</span>&nbsp;<span class="op" id="8579199">:=</span>&nbsp;<span class="ident" id="8579202">os</span><span class="op" id="8579204">.</span><span class="ident" id="8579205">Open</span><span class="op" id="8579209">(</span><span class="string" id="8579210">&#34;../testdata/video-001.png&#34;</span><span class="op" id="8579237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579240">if</span>&nbsp;<span class="ident" id="8579243">err</span>&nbsp;<span class="op" id="8579247">!=</span>&nbsp;<span class="ident" id="8579250">nil</span>&nbsp;<span class="op" id="8579254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579258">t</span><span class="op" id="8579259">.</span><span class="ident" id="8579260">Fatalf</span><span class="op" id="8579266">(</span><span class="string" id="8579267">&#34;open:&nbsp;%v&#34;</span><span class="op" id="8579277">,</span>&nbsp;<span class="ident" id="8579279">err</span><span class="op" id="8579282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8579285">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579288">defer</span>&nbsp;<span class="ident" id="8579294">f</span><span class="op" id="8579295">.</span><span class="ident" id="8579296">Close</span><span class="op" id="8579301">(</span><span class="op" id="8579302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579305">src</span><span class="op" id="8579308">,</span>&nbsp;<span class="ident" id="8579310">err</span>&nbsp;<span class="op" id="8579314">:=</span>&nbsp;<span class="ident" id="8579317">png</span><span class="op" id="8579320">.</span><span class="ident" id="8579321">Decode</span><span class="op" id="8579327">(</span><span class="ident" id="8579328">f</span><span class="op" id="8579329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579332">if</span>&nbsp;<span class="ident" id="8579335">err</span>&nbsp;<span class="op" id="8579339">!=</span>&nbsp;<span class="ident" id="8579342">nil</span>&nbsp;<span class="op" id="8579346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579350">t</span><span class="op" id="8579351">.</span><span class="ident" id="8579352">Fatalf</span><span class="op" id="8579358">(</span><span class="string" id="8579359">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8579371">,</span>&nbsp;<span class="ident" id="8579373">err</span><span class="op" id="8579376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8579379">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579382">b</span>&nbsp;<span class="op" id="8579384">:=</span>&nbsp;<span class="ident" id="8579387">src</span><span class="op" id="8579390">.</span><span class="ident" id="8579391">Bounds</span><span class="op" id="8579397">(</span><span class="op" id="8579398">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579402">cgaPalette</span>&nbsp;<span class="op" id="8579413">:=</span>&nbsp;<span class="ident" id="8579416">color</span><span class="op" id="8579421">.</span><span class="ident" id="8579422">Palette</span><span class="op" id="8579429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579433">color</span><span class="op" id="8579438">.</span><span class="ident" id="8579439">RGBA</span><span class="op" id="8579443">{</span><span class="num" id="8579444">0x00</span><span class="op" id="8579448">,</span>&nbsp;<span class="num" id="8579450">0x00</span><span class="op" id="8579454">,</span>&nbsp;<span class="num" id="8579456">0x00</span><span class="op" id="8579460">,</span>&nbsp;<span class="num" id="8579462">0xff</span><span class="op" id="8579466">}</span><span class="op" id="8579467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579471">color</span><span class="op" id="8579476">.</span><span class="ident" id="8579477">RGBA</span><span class="op" id="8579481">{</span><span class="num" id="8579482">0x55</span><span class="op" id="8579486">,</span>&nbsp;<span class="num" id="8579488">0xff</span><span class="op" id="8579492">,</span>&nbsp;<span class="num" id="8579494">0xff</span><span class="op" id="8579498">,</span>&nbsp;<span class="num" id="8579500">0xff</span><span class="op" id="8579504">}</span><span class="op" id="8579505">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579509">color</span><span class="op" id="8579514">.</span><span class="ident" id="8579515">RGBA</span><span class="op" id="8579519">{</span><span class="num" id="8579520">0xff</span><span class="op" id="8579524">,</span>&nbsp;<span class="num" id="8579526">0x55</span><span class="op" id="8579530">,</span>&nbsp;<span class="num" id="8579532">0xff</span><span class="op" id="8579536">,</span>&nbsp;<span class="num" id="8579538">0xff</span><span class="op" id="8579542">}</span><span class="op" id="8579543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579547">color</span><span class="op" id="8579552">.</span><span class="ident" id="8579553">RGBA</span><span class="op" id="8579557">{</span><span class="num" id="8579558">0xff</span><span class="op" id="8579562">,</span>&nbsp;<span class="num" id="8579564">0xff</span><span class="op" id="8579568">,</span>&nbsp;<span class="num" id="8579570">0xff</span><span class="op" id="8579574">,</span>&nbsp;<span class="num" id="8579576">0xff</span><span class="op" id="8579580">}</span><span class="op" id="8579581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8579584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579587">drawers</span>&nbsp;<span class="op" id="8579595">:=</span>&nbsp;<span class="keyword" id="8579598">map</span><span class="op" id="8579601">[</span><span class="builtintype" id="8579602">string</span><span class="op" id="8579608">]</span><span class="ident" id="8579609">Drawer</span><span class="op" id="8579615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8579619">&#34;src&#34;</span><span class="op" id="8579624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8579638">Src</span><span class="op" id="8579641">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8579645">&#34;floyd-steinberg&#34;</span><span class="op" id="8579662">:</span>&nbsp;<span class="ident" id="8579664">FloydSteinberg</span><span class="op" id="8579678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8579681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="8579684">loop</span><span class="op" id="8579688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579691">for</span>&nbsp;<span class="ident" id="8579695">dName</span><span class="op" id="8579700">,</span>&nbsp;<span class="ident" id="8579702">d</span>&nbsp;<span class="op" id="8579704">:=</span>&nbsp;<span class="keyword" id="8579707">range</span>&nbsp;<span class="ident" id="8579713">drawers</span>&nbsp;<span class="op" id="8579721">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579725">dst0</span>&nbsp;<span class="op" id="8579730">:=</span>&nbsp;<span class="ident" id="8579733">image</span><span class="op" id="8579738">.</span><span class="ident" id="8579739">NewPaletted</span><span class="op" id="8579750">(</span><span class="ident" id="8579751">b</span><span class="op" id="8579752">,</span>&nbsp;<span class="ident" id="8579754">cgaPalette</span><span class="op" id="8579764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579768">dst1</span>&nbsp;<span class="op" id="8579773">:=</span>&nbsp;<span class="ident" id="8579776">image</span><span class="op" id="8579781">.</span><span class="ident" id="8579782">NewPaletted</span><span class="op" id="8579793">(</span><span class="ident" id="8579794">b</span><span class="op" id="8579795">,</span>&nbsp;<span class="ident" id="8579797">cgaPalette</span><span class="op" id="8579807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579811">d</span><span class="op" id="8579812">.</span><span class="ident" id="8579813">Draw</span><span class="op" id="8579817">(</span><span class="ident" id="8579818">dst0</span><span class="op" id="8579822">,</span>&nbsp;<span class="ident" id="8579824">b</span><span class="op" id="8579825">,</span>&nbsp;<span class="ident" id="8579827">src</span><span class="op" id="8579830">,</span>&nbsp;<span class="ident" id="8579832">image</span><span class="op" id="8579837">.</span><span class="ident" id="8579838">Point</span><span class="op" id="8579843">{</span><span class="op" id="8579844">}</span><span class="op" id="8579845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8579849">d</span><span class="op" id="8579850">.</span><span class="ident" id="8579851">Draw</span><span class="op" id="8579855">(</span><span class="ident" id="8579856">embeddedPaletted</span><span class="op" id="8579872">{</span><span class="ident" id="8579873">dst1</span><span class="op" id="8579877">}</span><span class="op" id="8579878">,</span>&nbsp;<span class="ident" id="8579880">b</span><span class="op" id="8579881">,</span>&nbsp;<span class="ident" id="8579883">src</span><span class="op" id="8579886">,</span>&nbsp;<span class="ident" id="8579888">image</span><span class="op" id="8579893">.</span><span class="ident" id="8579894">Point</span><span class="op" id="8579899">{</span><span class="op" id="8579900">}</span><span class="op" id="8579901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579905">for</span>&nbsp;<span class="ident" id="8579909">y</span>&nbsp;<span class="op" id="8579911">:=</span>&nbsp;<span class="ident" id="8579914">b</span><span class="op" id="8579915">.</span><span class="ident" id="8579916">Min</span><span class="op" id="8579919">.</span><span class="ident" id="8579920">Y</span><span class="op" id="8579921">;</span>&nbsp;<span class="ident" id="8579923">y</span>&nbsp;<span class="op" id="8579925">&lt;</span>&nbsp;<span class="ident" id="8579927">b</span><span class="op" id="8579928">.</span><span class="ident" id="8579929">Max</span><span class="op" id="8579932">.</span><span class="ident" id="8579933">Y</span><span class="op" id="8579934">;</span>&nbsp;<span class="ident" id="8579936">y</span><span class="op" id="8579937">++</span>&nbsp;<span class="op" id="8579940">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579945">for</span>&nbsp;<span class="ident" id="8579949">x</span>&nbsp;<span class="op" id="8579951">:=</span>&nbsp;<span class="ident" id="8579954">b</span><span class="op" id="8579955">.</span><span class="ident" id="8579956">Min</span><span class="op" id="8579959">.</span><span class="ident" id="8579960">X</span><span class="op" id="8579961">;</span>&nbsp;<span class="ident" id="8579963">x</span>&nbsp;<span class="op" id="8579965">&lt;</span>&nbsp;<span class="ident" id="8579967">b</span><span class="op" id="8579968">.</span><span class="ident" id="8579969">Max</span><span class="op" id="8579972">.</span><span class="ident" id="8579973">X</span><span class="op" id="8579974">;</span>&nbsp;<span class="ident" id="8579976">x</span><span class="op" id="8579977">++</span>&nbsp;<span class="op" id="8579980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8579986">if</span>&nbsp;<span class="op" id="8579989">!</span><span class="ident" id="8579990">eq</span><span class="op" id="8579992">(</span><span class="ident" id="8579993">dst0</span><span class="op" id="8579997">.</span><span class="ident" id="8579998">At</span><span class="op" id="8580000">(</span><span class="ident" id="8580001">x</span><span class="op" id="8580002">,</span>&nbsp;<span class="ident" id="8580004">y</span><span class="op" id="8580005">)</span><span class="op" id="8580006">,</span>&nbsp;<span class="ident" id="8580008">dst1</span><span class="op" id="8580012">.</span><span class="ident" id="8580013">At</span><span class="op" id="8580015">(</span><span class="ident" id="8580016">x</span><span class="op" id="8580017">,</span>&nbsp;<span class="ident" id="8580019">y</span><span class="op" id="8580020">)</span><span class="op" id="8580021">)</span>&nbsp;<span class="op" id="8580023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580030">t</span><span class="op" id="8580031">.</span><span class="ident" id="8580032">Errorf</span><span class="op" id="8580038">(</span><span class="string" id="8580039">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8580070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580078">dName</span><span class="op" id="8580083">,</span>&nbsp;<span class="ident" id="8580085">x</span><span class="op" id="8580086">,</span>&nbsp;<span class="ident" id="8580088">y</span><span class="op" id="8580089">,</span>&nbsp;<span class="ident" id="8580091">dst0</span><span class="op" id="8580095">.</span><span class="ident" id="8580096">At</span><span class="op" id="8580098">(</span><span class="ident" id="8580099">x</span><span class="op" id="8580100">,</span>&nbsp;<span class="ident" id="8580102">y</span><span class="op" id="8580103">)</span><span class="op" id="8580104">,</span>&nbsp;<span class="ident" id="8580106">dst1</span><span class="op" id="8580110">.</span><span class="ident" id="8580111">At</span><span class="op" id="8580113">(</span><span class="ident" id="8580114">x</span><span class="op" id="8580115">,</span>&nbsp;<span class="ident" id="8580117">y</span><span class="op" id="8580118">)</span><span class="op" id="8580119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8580126">continue</span>&nbsp;<span class="ident" id="8580135">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580156">}</span><br>
<span class="lineno"></span><span class="op" id="8580158">}</span>
</div>
</body>
</html>
