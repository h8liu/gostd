<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html" class="current">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7858495">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7858550">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7858604">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7858655">package</span>&nbsp;<span class="ident" id="7858663">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7858669">import</span>&nbsp;<span class="op" id="7858676">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7858679">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7858690">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7858696">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7858706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7858709">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="7858725">//&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7858744">var</span>&nbsp;<span class="ident" id="7858748">UseProxyTests</span>&nbsp;<span class="op" id="7858762">=</span>&nbsp;<span class="op" id="7858764">[</span><span class="op" id="7858765">]</span><span class="keyword" id="7858766">struct</span>&nbsp;<span class="op" id="7858773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7858776">host</span>&nbsp;&nbsp;<span class="builtintype" id="7858782">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7858790">match</span>&nbsp;<span class="builtintype" id="7858796">bool</span><br>
<span class="lineno"></span><span class="op" id="7858801">}</span><span class="op" id="7858802">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7858805">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858832">{</span><span class="string" id="7858833">&#34;localhost:80&#34;</span><span class="op" id="7858847">,</span>&nbsp;<span class="builtintype" id="7858849">false</span><span class="op" id="7858854">}</span><span class="op" id="7858855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858858">{</span><span class="string" id="7858859">&#34;127.0.0.1&#34;</span><span class="op" id="7858870">,</span>&nbsp;<span class="builtintype" id="7858872">false</span><span class="op" id="7858877">}</span><span class="op" id="7858878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858881">{</span><span class="string" id="7858882">&#34;127.0.0.2&#34;</span><span class="op" id="7858893">,</span>&nbsp;<span class="builtintype" id="7858895">false</span><span class="op" id="7858900">}</span><span class="op" id="7858901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858904">{</span><span class="string" id="7858905">&#34;[::1]&#34;</span><span class="op" id="7858912">,</span>&nbsp;<span class="builtintype" id="7858914">false</span><span class="op" id="7858919">}</span><span class="op" id="7858920">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858923">{</span><span class="string" id="7858924">&#34;[::2]&#34;</span><span class="op" id="7858931">,</span>&nbsp;<span class="builtintype" id="7858933">true</span><span class="op" id="7858937">}</span><span class="op" id="7858938">,</span>&nbsp;<span class="comment" id="7858940">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7858968">{</span><span class="string" id="7858969">&#34;barbaz.net&#34;</span><span class="op" id="7858981">,</span>&nbsp;<span class="builtintype" id="7858983">false</span><span class="op" id="7858988">}</span><span class="op" id="7858989">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7858995">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859020">{</span><span class="string" id="7859021">&#34;foobar.com&#34;</span><span class="op" id="7859033">,</span>&nbsp;<span class="builtintype" id="7859035">false</span><span class="op" id="7859040">}</span><span class="op" id="7859041">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7859047">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859073">{</span><span class="string" id="7859074">&#34;foofoobar.com&#34;</span><span class="op" id="7859089">,</span>&nbsp;<span class="builtintype" id="7859091">true</span><span class="op" id="7859095">}</span><span class="op" id="7859096">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7859100">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859138">{</span><span class="string" id="7859139">&#34;baz.com&#34;</span><span class="op" id="7859148">,</span>&nbsp;<span class="builtintype" id="7859150">true</span><span class="op" id="7859154">}</span><span class="op" id="7859155">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7859165">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859203">{</span><span class="string" id="7859204">&#34;localhost.net&#34;</span><span class="op" id="7859219">,</span>&nbsp;<span class="builtintype" id="7859221">true</span><span class="op" id="7859225">}</span><span class="op" id="7859226">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7859230">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859265">{</span><span class="string" id="7859266">&#34;local.localhost&#34;</span><span class="op" id="7859283">,</span>&nbsp;<span class="builtintype" id="7859285">true</span><span class="op" id="7859289">}</span><span class="op" id="7859290">,</span>&nbsp;<span class="comment" id="7859292">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859327">{</span><span class="string" id="7859328">&#34;barbarbaz.net&#34;</span><span class="op" id="7859343">,</span>&nbsp;<span class="builtintype" id="7859345">true</span><span class="op" id="7859349">}</span><span class="op" id="7859350">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7859354">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859396">{</span><span class="string" id="7859397">&#34;www.foobar.com&#34;</span><span class="op" id="7859413">,</span>&nbsp;<span class="builtintype" id="7859415">false</span><span class="op" id="7859420">}</span><span class="op" id="7859421">,</span>&nbsp;<span class="comment" id="7859423">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="7859471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7859474">func</span>&nbsp;<span class="ident" id="7859479">TestUseProxy</span><span class="op" id="7859491">(</span><span class="ident" id="7859492">t</span>&nbsp;<span class="op" id="7859494">*</span><span class="ident" id="7859495">testing</span><span class="op" id="7859502">.</span><span class="ident" id="7859503">T</span><span class="op" id="7859504">)</span>&nbsp;<span class="op" id="7859506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859509">ResetProxyEnv</span><span class="op" id="7859522">(</span><span class="op" id="7859523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859526">os</span><span class="op" id="7859528">.</span><span class="ident" id="7859529">Setenv</span><span class="op" id="7859535">(</span><span class="string" id="7859536">&#34;NO_PROXY&#34;</span><span class="op" id="7859546">,</span>&nbsp;<span class="string" id="7859548">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="7859573">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7859576">for</span>&nbsp;<span class="ident" id="7859580">_</span><span class="op" id="7859581">,</span>&nbsp;<span class="ident" id="7859583">test</span>&nbsp;<span class="op" id="7859588">:=</span>&nbsp;<span class="keyword" id="7859591">range</span>&nbsp;<span class="ident" id="7859597">UseProxyTests</span>&nbsp;<span class="op" id="7859611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7859615">if</span>&nbsp;<span class="ident" id="7859618">useProxy</span><span class="op" id="7859626">(</span><span class="ident" id="7859627">test</span><span class="op" id="7859631">.</span><span class="ident" id="7859632">host</span><span class="op" id="7859636">+</span><span class="string" id="7859637">&#34;:80&#34;</span><span class="op" id="7859642">)</span>&nbsp;<span class="op" id="7859644">!=</span>&nbsp;<span class="ident" id="7859647">test</span><span class="op" id="7859651">.</span><span class="ident" id="7859652">match</span>&nbsp;<span class="op" id="7859658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859663">t</span><span class="op" id="7859664">.</span><span class="ident" id="7859665">Errorf</span><span class="op" id="7859671">(</span><span class="string" id="7859672">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7859700">,</span>&nbsp;<span class="ident" id="7859702">test</span><span class="op" id="7859706">.</span><span class="ident" id="7859707">host</span><span class="op" id="7859711">,</span>&nbsp;<span class="op" id="7859713">!</span><span class="ident" id="7859714">test</span><span class="op" id="7859718">.</span><span class="ident" id="7859719">match</span><span class="op" id="7859724">,</span>&nbsp;<span class="ident" id="7859726">test</span><span class="op" id="7859730">.</span><span class="ident" id="7859731">match</span><span class="op" id="7859736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859743">}</span><br>
<span class="lineno">45</span><span class="op" id="7859745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7859748">var</span>&nbsp;<span class="ident" id="7859752">cacheKeysTests</span>&nbsp;<span class="op" id="7859767">=</span>&nbsp;<span class="op" id="7859769">[</span><span class="op" id="7859770">]</span><span class="keyword" id="7859771">struct</span>&nbsp;<span class="op" id="7859778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859781">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="7859788">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859796">scheme</span>&nbsp;<span class="builtintype" id="7859803">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859811">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7859818">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7859826">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7859833">string</span><br>
<span class="lineno"></span><span class="op" id="7859840">}</span><span class="op" id="7859841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859844">{</span><span class="string" id="7859845">&#34;&#34;</span><span class="op" id="7859847">,</span>&nbsp;<span class="string" id="7859849">&#34;http&#34;</span><span class="op" id="7859855">,</span>&nbsp;<span class="string" id="7859857">&#34;foo.com&#34;</span><span class="op" id="7859866">,</span>&nbsp;<span class="string" id="7859868">&#34;|http|foo.com&#34;</span><span class="op" id="7859883">}</span><span class="op" id="7859884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859887">{</span><span class="string" id="7859888">&#34;&#34;</span><span class="op" id="7859890">,</span>&nbsp;<span class="string" id="7859892">&#34;https&#34;</span><span class="op" id="7859899">,</span>&nbsp;<span class="string" id="7859901">&#34;foo.com&#34;</span><span class="op" id="7859910">,</span>&nbsp;<span class="string" id="7859912">&#34;|https|foo.com&#34;</span><span class="op" id="7859928">}</span><span class="op" id="7859929">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859932">{</span><span class="string" id="7859933">&#34;http://foo.com&#34;</span><span class="op" id="7859949">,</span>&nbsp;<span class="string" id="7859951">&#34;http&#34;</span><span class="op" id="7859957">,</span>&nbsp;<span class="string" id="7859959">&#34;foo.com&#34;</span><span class="op" id="7859968">,</span>&nbsp;<span class="string" id="7859970">&#34;http://foo.com|http|&#34;</span><span class="op" id="7859992">}</span><span class="op" id="7859993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7859996">{</span><span class="string" id="7859997">&#34;http://foo.com&#34;</span><span class="op" id="7860013">,</span>&nbsp;<span class="string" id="7860015">&#34;https&#34;</span><span class="op" id="7860022">,</span>&nbsp;<span class="string" id="7860024">&#34;foo.com&#34;</span><span class="op" id="7860033">,</span>&nbsp;<span class="string" id="7860035">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="7860065">}</span><span class="op" id="7860066">,</span><br>
<span class="lineno"></span><span class="op" id="7860068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7860071">func</span>&nbsp;<span class="ident" id="7860076">TestCacheKeys</span><span class="op" id="7860089">(</span><span class="ident" id="7860090">t</span>&nbsp;<span class="op" id="7860092">*</span><span class="ident" id="7860093">testing</span><span class="op" id="7860100">.</span><span class="ident" id="7860101">T</span><span class="op" id="7860102">)</span>&nbsp;<span class="op" id="7860104">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860107">for</span>&nbsp;<span class="ident" id="7860111">_</span><span class="op" id="7860112">,</span>&nbsp;<span class="ident" id="7860114">tt</span>&nbsp;<span class="op" id="7860117">:=</span>&nbsp;<span class="keyword" id="7860120">range</span>&nbsp;<span class="ident" id="7860126">cacheKeysTests</span>&nbsp;<span class="op" id="7860141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860145">var</span>&nbsp;<span class="ident" id="7860149">proxy</span>&nbsp;<span class="op" id="7860155">*</span><span class="ident" id="7860156">url</span><span class="op" id="7860159">.</span><span class="ident" id="7860160">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860166">if</span>&nbsp;<span class="ident" id="7860169">tt</span><span class="op" id="7860171">.</span><span class="ident" id="7860172">proxy</span>&nbsp;<span class="op" id="7860178">!=</span>&nbsp;<span class="string" id="7860181">&#34;&#34;</span>&nbsp;<span class="op" id="7860184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860189">u</span><span class="op" id="7860190">,</span>&nbsp;<span class="ident" id="7860192">err</span>&nbsp;<span class="op" id="7860196">:=</span>&nbsp;<span class="ident" id="7860199">url</span><span class="op" id="7860202">.</span><span class="ident" id="7860203">Parse</span><span class="op" id="7860208">(</span><span class="ident" id="7860209">tt</span><span class="op" id="7860211">.</span><span class="ident" id="7860212">proxy</span><span class="op" id="7860217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860222">if</span>&nbsp;<span class="ident" id="7860225">err</span>&nbsp;<span class="op" id="7860229">!=</span>&nbsp;<span class="builtintype" id="7860232">nil</span>&nbsp;<span class="op" id="7860236">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860242">t</span><span class="op" id="7860243">.</span><span class="ident" id="7860244">Fatal</span><span class="op" id="7860249">(</span><span class="ident" id="7860250">err</span><span class="op" id="7860253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7860258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860263">proxy</span>&nbsp;<span class="op" id="7860269">=</span>&nbsp;<span class="ident" id="7860271">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7860275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860279">cm</span>&nbsp;<span class="op" id="7860282">:=</span>&nbsp;<span class="ident" id="7860285">connectMethod</span><span class="op" id="7860298">{</span><span class="ident" id="7860299">proxy</span><span class="op" id="7860304">,</span>&nbsp;<span class="ident" id="7860306">tt</span><span class="op" id="7860308">.</span><span class="ident" id="7860309">scheme</span><span class="op" id="7860315">,</span>&nbsp;<span class="ident" id="7860317">tt</span><span class="op" id="7860319">.</span><span class="ident" id="7860320">addr</span><span class="op" id="7860324">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860328">if</span>&nbsp;<span class="ident" id="7860331">got</span>&nbsp;<span class="op" id="7860335">:=</span>&nbsp;<span class="ident" id="7860338">cm</span><span class="op" id="7860340">.</span><span class="ident" id="7860341">key</span><span class="op" id="7860344">(</span><span class="op" id="7860345">)</span><span class="op" id="7860346">.</span><span class="ident" id="7860347">String</span><span class="op" id="7860353">(</span><span class="op" id="7860354">)</span><span class="op" id="7860355">;</span>&nbsp;<span class="ident" id="7860357">got</span>&nbsp;<span class="op" id="7860361">!=</span>&nbsp;<span class="ident" id="7860364">tt</span><span class="op" id="7860366">.</span><span class="ident" id="7860367">key</span>&nbsp;<span class="op" id="7860371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860376">t</span><span class="op" id="7860377">.</span><span class="ident" id="7860378">Fatalf</span><span class="op" id="7860384">(</span><span class="string" id="7860385">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7860423">,</span>&nbsp;<span class="ident" id="7860425">tt</span><span class="op" id="7860427">.</span><span class="ident" id="7860428">proxy</span><span class="op" id="7860433">,</span>&nbsp;<span class="ident" id="7860435">tt</span><span class="op" id="7860437">.</span><span class="ident" id="7860438">scheme</span><span class="op" id="7860444">,</span>&nbsp;<span class="ident" id="7860446">tt</span><span class="op" id="7860448">.</span><span class="ident" id="7860449">addr</span><span class="op" id="7860453">,</span>&nbsp;<span class="ident" id="7860455">got</span><span class="op" id="7860458">,</span>&nbsp;<span class="ident" id="7860460">tt</span><span class="op" id="7860462">.</span><span class="ident" id="7860463">key</span><span class="op" id="7860466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7860470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7860473">}</span><br>
<span class="lineno"></span><span class="op" id="7860475">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7860478">func</span>&nbsp;<span class="ident" id="7860483">ResetProxyEnv</span><span class="op" id="7860496">(</span><span class="op" id="7860497">)</span>&nbsp;<span class="op" id="7860499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7860502">for</span>&nbsp;<span class="ident" id="7860506">_</span><span class="op" id="7860507">,</span>&nbsp;<span class="ident" id="7860509">v</span>&nbsp;<span class="op" id="7860511">:=</span>&nbsp;<span class="keyword" id="7860514">range</span>&nbsp;<span class="op" id="7860520">[</span><span class="op" id="7860521">]</span><span class="builtintype" id="7860522">string</span><span class="op" id="7860528">{</span><span class="string" id="7860529">&#34;HTTP_PROXY&#34;</span><span class="op" id="7860541">,</span>&nbsp;<span class="string" id="7860543">&#34;http_proxy&#34;</span><span class="op" id="7860555">,</span>&nbsp;<span class="string" id="7860557">&#34;NO_PROXY&#34;</span><span class="op" id="7860567">,</span>&nbsp;<span class="string" id="7860569">&#34;no_proxy&#34;</span><span class="op" id="7860579">}</span>&nbsp;<span class="op" id="7860581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860585">os</span><span class="op" id="7860587">.</span><span class="ident" id="7860588">Setenv</span><span class="op" id="7860594">(</span><span class="ident" id="7860595">v</span><span class="op" id="7860596">,</span>&nbsp;<span class="string" id="7860598">&#34;&#34;</span><span class="op" id="7860600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7860603">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7860606">ResetCachedEnvironment</span><span class="op" id="7860628">(</span><span class="op" id="7860629">)</span><br>
<span class="lineno"></span><span class="op" id="7860631">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
