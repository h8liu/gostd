<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2823184">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2823239">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2823293">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2823344">package</span>&nbsp;<span class="ident" id="2823352">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2823361">import</span>&nbsp;<span class="op" id="2823368">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2823371">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2823379">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2823390">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2823399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2823402">const</span>&nbsp;<span class="ident" id="2823408">ptrSize</span>&nbsp;<span class="op" id="2823416">=</span>&nbsp;<span class="ident" id="2823418">unsafe</span><span class="op" id="2823424">.</span><span class="ident" id="2823425">Sizeof</span><span class="op" id="2823431">(</span><span class="op" id="2823432">(</span><span class="op" id="2823433">*</span><span class="builtintype" id="2823434">byte</span><span class="op" id="2823438">)</span><span class="op" id="2823439">(</span><span class="builtintype" id="2823440">nil</span><span class="op" id="2823443">)</span><span class="op" id="2823444">)</span><br>
<span class="lineno"></span><span class="keyword" id="2823446">const</span>&nbsp;<span class="ident" id="2823452">cannotSet</span>&nbsp;<span class="op" id="2823462">=</span>&nbsp;<span class="string" id="2823464">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2823522">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2823574">//</span><br>
<span class="lineno"></span><span class="comment" id="2823577">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2823641">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2823700">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2823760">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2823812">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2823874">//</span><br>
<span class="lineno"></span><span class="comment" id="2823877">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2823916">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2823986">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2824063">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2824124">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2824192">//</span><br>
<span class="lineno">30</span><span class="comment" id="2824195">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2824268">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2824339">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2824361">type</span>&nbsp;<span class="ident" id="2824366">Value</span>&nbsp;<span class="keyword" id="2824372">struct</span>&nbsp;<span class="op" id="2824379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824382">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2824442">typ</span>&nbsp;<span class="op" id="2824446">*</span><span class="ident" id="2824447">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824455">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824521">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2824587">ptr</span>&nbsp;<span class="ident" id="2824591">unsafe</span><span class="op" id="2824597">.</span><span class="ident" id="2824598">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824608">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824649">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824684">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824742">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824791">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824845">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824884">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824935">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2824989">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825056">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825126">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825189">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825196">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825254">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825323">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825390">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2825458">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2825489">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2825492">type</span>&nbsp;<span class="ident" id="2825497">flag</span>&nbsp;<span class="builtintype" id="2825502">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2825511">const</span>&nbsp;<span class="op" id="2825517">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825520">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2825541">=</span>&nbsp;<span class="num" id="2825543">5</span>&nbsp;<span class="comment" id="2825545">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825568">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825584">flag</span>&nbsp;<span class="op" id="2825589">=</span>&nbsp;<span class="num" id="2825591">1</span><span class="op" id="2825592">&lt;&lt;</span><span class="ident" id="2825594">flagKindWidth</span>&nbsp;<span class="op" id="2825608">-</span>&nbsp;<span class="num" id="2825610">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825613">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825629">flag</span>&nbsp;<span class="op" id="2825634">=</span>&nbsp;<span class="num" id="2825636">1</span>&nbsp;<span class="op" id="2825638">&lt;&lt;</span>&nbsp;<span class="num" id="2825641">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825644">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825660">flag</span>&nbsp;<span class="op" id="2825665">=</span>&nbsp;<span class="num" id="2825667">1</span>&nbsp;<span class="op" id="2825669">&lt;&lt;</span>&nbsp;<span class="num" id="2825672">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825675">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825691">flag</span>&nbsp;<span class="op" id="2825696">=</span>&nbsp;<span class="num" id="2825698">1</span>&nbsp;<span class="op" id="2825700">&lt;&lt;</span>&nbsp;<span class="num" id="2825703">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825706">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825722">flag</span>&nbsp;<span class="op" id="2825727">=</span>&nbsp;<span class="num" id="2825729">1</span>&nbsp;<span class="op" id="2825731">&lt;&lt;</span>&nbsp;<span class="num" id="2825734">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2825737">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2825758">=</span>&nbsp;<span class="num" id="2825760">9</span><br>
<span class="lineno"></span><span class="op" id="2825762">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2825765">func</span>&nbsp;<span class="op" id="2825770">(</span><span class="ident" id="2825771">f</span>&nbsp;<span class="ident" id="2825773">flag</span><span class="op" id="2825777">)</span>&nbsp;<span class="ident" id="2825779">kind</span><span class="op" id="2825783">(</span><span class="op" id="2825784">)</span>&nbsp;<span class="ident" id="2825786">Kind</span>&nbsp;<span class="op" id="2825791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2825794">return</span>&nbsp;<span class="ident" id="2825801">Kind</span><span class="op" id="2825805">(</span><span class="ident" id="2825806">f</span>&nbsp;<span class="op" id="2825808">&amp;</span>&nbsp;<span class="ident" id="2825810">flagKindMask</span><span class="op" id="2825822">)</span><br>
<span class="lineno">75</span><span class="op" id="2825824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2825827">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2825887">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2825946">func</span>&nbsp;<span class="op" id="2825951">(</span><span class="ident" id="2825952">v</span>&nbsp;<span class="ident" id="2825954">Value</span><span class="op" id="2825959">)</span>&nbsp;<span class="ident" id="2825961">pointer</span><span class="op" id="2825968">(</span><span class="op" id="2825969">)</span>&nbsp;<span class="ident" id="2825971">unsafe</span><span class="op" id="2825977">.</span><span class="ident" id="2825978">Pointer</span>&nbsp;<span class="op" id="2825986">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2825989">if</span>&nbsp;<span class="ident" id="2825992">v</span><span class="op" id="2825993">.</span><span class="ident" id="2825994">typ</span><span class="op" id="2825997">.</span><span class="ident" id="2825998">size</span>&nbsp;<span class="op" id="2826003">!=</span>&nbsp;<span class="ident" id="2826006">ptrSize</span>&nbsp;<span class="op" id="2826014">||</span>&nbsp;<span class="op" id="2826017">!</span><span class="ident" id="2826018">v</span><span class="op" id="2826019">.</span><span class="ident" id="2826020">typ</span><span class="op" id="2826023">.</span><span class="ident" id="2826024">pointers</span><span class="op" id="2826032">(</span><span class="op" id="2826033">)</span>&nbsp;<span class="op" id="2826035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2826039">panic</span><span class="op" id="2826044">(</span><span class="string" id="2826045">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2826088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2826091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826094">if</span>&nbsp;<span class="ident" id="2826097">v</span><span class="op" id="2826098">.</span><span class="ident" id="2826099">flag</span><span class="op" id="2826103">&amp;</span><span class="ident" id="2826104">flagIndir</span>&nbsp;<span class="op" id="2826114">!=</span>&nbsp;<span class="num" id="2826117">0</span>&nbsp;<span class="op" id="2826119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826123">return</span>&nbsp;<span class="op" id="2826130">*</span><span class="op" id="2826131">(</span><span class="op" id="2826132">*</span><span class="ident" id="2826133">unsafe</span><span class="op" id="2826139">.</span><span class="ident" id="2826140">Pointer</span><span class="op" id="2826147">)</span><span class="op" id="2826148">(</span><span class="ident" id="2826149">v</span><span class="op" id="2826150">.</span><span class="ident" id="2826151">ptr</span><span class="op" id="2826154">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2826157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826160">return</span>&nbsp;<span class="ident" id="2826167">v</span><span class="op" id="2826168">.</span><span class="ident" id="2826169">ptr</span><br>
<span class="lineno"></span><span class="op" id="2826173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2826176">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2826224">func</span>&nbsp;<span class="ident" id="2826229">packEface</span><span class="op" id="2826238">(</span><span class="ident" id="2826239">v</span>&nbsp;<span class="ident" id="2826241">Value</span><span class="op" id="2826246">)</span>&nbsp;<span class="keyword" id="2826248">interface</span><span class="op" id="2826257">{</span><span class="op" id="2826258">}</span>&nbsp;<span class="op" id="2826260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826263">t</span>&nbsp;<span class="op" id="2826265">:=</span>&nbsp;<span class="ident" id="2826268">v</span><span class="op" id="2826269">.</span><span class="ident" id="2826270">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826275">var</span>&nbsp;<span class="ident" id="2826279">i</span>&nbsp;<span class="keyword" id="2826281">interface</span><span class="op" id="2826290">{</span><span class="op" id="2826291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826294">e</span>&nbsp;<span class="op" id="2826296">:=</span>&nbsp;<span class="op" id="2826299">(</span><span class="op" id="2826300">*</span><span class="ident" id="2826301">emptyInterface</span><span class="op" id="2826315">)</span><span class="op" id="2826316">(</span><span class="ident" id="2826317">unsafe</span><span class="op" id="2826323">.</span><span class="ident" id="2826324">Pointer</span><span class="op" id="2826331">(</span><span class="op" id="2826332">&amp;</span><span class="ident" id="2826333">i</span><span class="op" id="2826334">)</span><span class="op" id="2826335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826338">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826392">switch</span>&nbsp;<span class="op" id="2826399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826402">case</span>&nbsp;<span class="ident" id="2826407">ifaceIndir</span><span class="op" id="2826417">(</span><span class="ident" id="2826418">t</span><span class="op" id="2826419">)</span><span class="op" id="2826420">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826424">if</span>&nbsp;<span class="ident" id="2826427">v</span><span class="op" id="2826428">.</span><span class="ident" id="2826429">flag</span><span class="op" id="2826433">&amp;</span><span class="ident" id="2826434">flagIndir</span>&nbsp;<span class="op" id="2826444">==</span>&nbsp;<span class="num" id="2826447">0</span>&nbsp;<span class="op" id="2826449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2826454">panic</span><span class="op" id="2826459">(</span><span class="string" id="2826460">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2826471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2826475">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826479">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826541">ptr</span>&nbsp;<span class="op" id="2826545">:=</span>&nbsp;<span class="ident" id="2826548">v</span><span class="op" id="2826549">.</span><span class="ident" id="2826550">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826556">if</span>&nbsp;<span class="ident" id="2826559">v</span><span class="op" id="2826560">.</span><span class="ident" id="2826561">flag</span><span class="op" id="2826565">&amp;</span><span class="ident" id="2826566">flagAddr</span>&nbsp;<span class="op" id="2826575">!=</span>&nbsp;<span class="num" id="2826578">0</span>&nbsp;<span class="op" id="2826580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826585">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826638">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826681">c</span>&nbsp;<span class="op" id="2826683">:=</span>&nbsp;<span class="ident" id="2826686">unsafe_New</span><span class="op" id="2826696">(</span><span class="ident" id="2826697">t</span><span class="op" id="2826698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826703">memmove</span><span class="op" id="2826710">(</span><span class="ident" id="2826711">c</span><span class="op" id="2826712">,</span>&nbsp;<span class="ident" id="2826714">ptr</span><span class="op" id="2826717">,</span>&nbsp;<span class="ident" id="2826719">t</span><span class="op" id="2826720">.</span><span class="ident" id="2826721">size</span><span class="op" id="2826725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826730">ptr</span>&nbsp;<span class="op" id="2826734">=</span>&nbsp;<span class="ident" id="2826736">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2826740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826744">e</span><span class="op" id="2826745">.</span><span class="ident" id="2826746">word</span>&nbsp;<span class="op" id="2826751">=</span>&nbsp;<span class="ident" id="2826753">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826758">case</span>&nbsp;<span class="ident" id="2826763">v</span><span class="op" id="2826764">.</span><span class="ident" id="2826765">flag</span><span class="op" id="2826769">&amp;</span><span class="ident" id="2826770">flagIndir</span>&nbsp;<span class="op" id="2826780">!=</span>&nbsp;<span class="num" id="2826783">0</span><span class="op" id="2826784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826788">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826846">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2826907">e</span><span class="op" id="2826908">.</span><span class="ident" id="2826909">word</span>&nbsp;<span class="op" id="2826914">=</span>&nbsp;<span class="op" id="2826916">*</span><span class="op" id="2826917">(</span><span class="op" id="2826918">*</span><span class="ident" id="2826919">unsafe</span><span class="op" id="2826925">.</span><span class="ident" id="2826926">Pointer</span><span class="op" id="2826933">)</span><span class="op" id="2826934">(</span><span class="ident" id="2826935">v</span><span class="op" id="2826936">.</span><span class="ident" id="2826937">ptr</span><span class="op" id="2826940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2826943">default</span><span class="op" id="2826950">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2826954">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827001">e</span><span class="op" id="2827002">.</span><span class="ident" id="2827003">word</span>&nbsp;<span class="op" id="2827008">=</span>&nbsp;<span class="ident" id="2827010">v</span><span class="op" id="2827011">.</span><span class="ident" id="2827012">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2827017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2827020">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2827084">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2827151">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2827220">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827241">e</span><span class="op" id="2827242">.</span><span class="ident" id="2827243">typ</span>&nbsp;<span class="op" id="2827247">=</span>&nbsp;<span class="ident" id="2827249">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827252">return</span>&nbsp;<span class="ident" id="2827259">i</span><br>
<span class="lineno"></span><span class="op" id="2827261">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2827264">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2827322">func</span>&nbsp;<span class="ident" id="2827327">unpackEface</span><span class="op" id="2827338">(</span><span class="ident" id="2827339">i</span>&nbsp;<span class="keyword" id="2827341">interface</span><span class="op" id="2827350">{</span><span class="op" id="2827351">}</span><span class="op" id="2827352">)</span>&nbsp;<span class="ident" id="2827354">Value</span>&nbsp;<span class="op" id="2827360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827363">e</span>&nbsp;<span class="op" id="2827365">:=</span>&nbsp;<span class="op" id="2827368">(</span><span class="op" id="2827369">*</span><span class="ident" id="2827370">emptyInterface</span><span class="op" id="2827384">)</span><span class="op" id="2827385">(</span><span class="ident" id="2827386">unsafe</span><span class="op" id="2827392">.</span><span class="ident" id="2827393">Pointer</span><span class="op" id="2827400">(</span><span class="op" id="2827401">&amp;</span><span class="ident" id="2827402">i</span><span class="op" id="2827403">)</span><span class="op" id="2827404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2827407">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827488">t</span>&nbsp;<span class="op" id="2827490">:=</span>&nbsp;<span class="ident" id="2827493">e</span><span class="op" id="2827494">.</span><span class="ident" id="2827495">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827500">if</span>&nbsp;<span class="ident" id="2827503">t</span>&nbsp;<span class="op" id="2827505">==</span>&nbsp;<span class="builtintype" id="2827508">nil</span>&nbsp;<span class="op" id="2827512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827516">return</span>&nbsp;<span class="ident" id="2827523">Value</span><span class="op" id="2827528">{</span><span class="op" id="2827529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2827532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827535">f</span>&nbsp;<span class="op" id="2827537">:=</span>&nbsp;<span class="ident" id="2827540">flag</span><span class="op" id="2827544">(</span><span class="ident" id="2827545">t</span><span class="op" id="2827546">.</span><span class="ident" id="2827547">Kind</span><span class="op" id="2827551">(</span><span class="op" id="2827552">)</span><span class="op" id="2827553">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827556">if</span>&nbsp;<span class="ident" id="2827559">ifaceIndir</span><span class="op" id="2827569">(</span><span class="ident" id="2827570">t</span><span class="op" id="2827571">)</span>&nbsp;<span class="op" id="2827573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827577">f</span>&nbsp;<span class="op" id="2827579">|=</span>&nbsp;<span class="ident" id="2827582">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2827593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827596">return</span>&nbsp;<span class="ident" id="2827603">Value</span><span class="op" id="2827608">{</span><span class="ident" id="2827609">t</span><span class="op" id="2827610">,</span>&nbsp;<span class="ident" id="2827612">unsafe</span><span class="op" id="2827618">.</span><span class="ident" id="2827619">Pointer</span><span class="op" id="2827626">(</span><span class="ident" id="2827627">e</span><span class="op" id="2827628">.</span><span class="ident" id="2827629">word</span><span class="op" id="2827633">)</span><span class="op" id="2827634">,</span>&nbsp;<span class="ident" id="2827636">f</span><span class="op" id="2827637">}</span><br>
<span class="lineno"></span><span class="op" id="2827639">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2827642">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2827699">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2827763">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2827801">type</span>&nbsp;<span class="ident" id="2827806">ValueError</span>&nbsp;<span class="keyword" id="2827817">struct</span>&nbsp;<span class="op" id="2827824">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827827">Method</span>&nbsp;<span class="builtintype" id="2827834">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2827842">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2827849">Kind</span><br>
<span class="lineno"></span><span class="op" id="2827854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2827857">func</span>&nbsp;<span class="op" id="2827862">(</span><span class="ident" id="2827863">e</span>&nbsp;<span class="op" id="2827865">*</span><span class="ident" id="2827866">ValueError</span><span class="op" id="2827876">)</span>&nbsp;<span class="ident" id="2827878">Error</span><span class="op" id="2827883">(</span><span class="op" id="2827884">)</span>&nbsp;<span class="builtintype" id="2827886">string</span>&nbsp;<span class="op" id="2827893">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827896">if</span>&nbsp;<span class="ident" id="2827899">e</span><span class="op" id="2827900">.</span><span class="ident" id="2827901">Kind</span>&nbsp;<span class="op" id="2827906">==</span>&nbsp;<span class="num" id="2827909">0</span>&nbsp;<span class="op" id="2827911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827915">return</span>&nbsp;<span class="string" id="2827922">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2827942">+</span>&nbsp;<span class="ident" id="2827944">e</span><span class="op" id="2827945">.</span><span class="ident" id="2827946">Method</span>&nbsp;<span class="op" id="2827953">+</span>&nbsp;<span class="string" id="2827955">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2827973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2827976">return</span>&nbsp;<span class="string" id="2827983">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2828003">+</span>&nbsp;<span class="ident" id="2828005">e</span><span class="op" id="2828006">.</span><span class="ident" id="2828007">Method</span>&nbsp;<span class="op" id="2828014">+</span>&nbsp;<span class="string" id="2828016">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2828023">+</span>&nbsp;<span class="ident" id="2828025">e</span><span class="op" id="2828026">.</span><span class="ident" id="2828027">Kind</span><span class="op" id="2828031">.</span><span class="ident" id="2828032">String</span><span class="op" id="2828038">(</span><span class="op" id="2828039">)</span>&nbsp;<span class="op" id="2828041">+</span>&nbsp;<span class="string" id="2828043">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2828052">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2828055">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2828109">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2828150">func</span>&nbsp;<span class="ident" id="2828155">methodName</span><span class="op" id="2828165">(</span><span class="op" id="2828166">)</span>&nbsp;<span class="builtintype" id="2828168">string</span>&nbsp;<span class="op" id="2828175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828178">pc</span><span class="op" id="2828180">,</span>&nbsp;<span class="ident" id="2828182">_</span><span class="op" id="2828183">,</span>&nbsp;<span class="ident" id="2828185">_</span><span class="op" id="2828186">,</span>&nbsp;<span class="ident" id="2828188">_</span>&nbsp;<span class="op" id="2828190">:=</span>&nbsp;<span class="ident" id="2828193">runtime</span><span class="op" id="2828200">.</span><span class="ident" id="2828201">Caller</span><span class="op" id="2828207">(</span><span class="num" id="2828208">2</span><span class="op" id="2828209">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828212">f</span>&nbsp;<span class="op" id="2828214">:=</span>&nbsp;<span class="ident" id="2828217">runtime</span><span class="op" id="2828224">.</span><span class="ident" id="2828225">FuncForPC</span><span class="op" id="2828234">(</span><span class="ident" id="2828235">pc</span><span class="op" id="2828237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2828240">if</span>&nbsp;<span class="ident" id="2828243">f</span>&nbsp;<span class="op" id="2828245">==</span>&nbsp;<span class="builtintype" id="2828248">nil</span>&nbsp;<span class="op" id="2828252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2828256">return</span>&nbsp;<span class="string" id="2828263">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2828281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2828284">return</span>&nbsp;<span class="ident" id="2828291">f</span><span class="op" id="2828292">.</span><span class="ident" id="2828293">Name</span><span class="op" id="2828297">(</span><span class="op" id="2828298">)</span><br>
<span class="lineno">165</span><span class="op" id="2828300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2828303">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2828361">type</span>&nbsp;<span class="ident" id="2828366">emptyInterface</span>&nbsp;<span class="keyword" id="2828381">struct</span>&nbsp;<span class="op" id="2828388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828391">typ</span>&nbsp;&nbsp;<span class="op" id="2828396">*</span><span class="ident" id="2828397">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828404">word</span>&nbsp;<span class="ident" id="2828409">unsafe</span><span class="op" id="2828415">.</span><span class="ident" id="2828416">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2828424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2828427">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2828498">type</span>&nbsp;<span class="ident" id="2828503">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2828521">struct</span>&nbsp;<span class="op" id="2828528">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2828531">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828564">itab</span>&nbsp;<span class="op" id="2828569">*</span><span class="keyword" id="2828570">struct</span>&nbsp;<span class="op" id="2828577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828581">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2828588">*</span><span class="ident" id="2828589">rtype</span>&nbsp;<span class="comment" id="2828595">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828622">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2828629">*</span><span class="ident" id="2828630">rtype</span>&nbsp;<span class="comment" id="2828636">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828663">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2828670">unsafe</span><span class="op" id="2828676">.</span><span class="ident" id="2828677">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828687">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2828694">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828702">unused</span>&nbsp;<span class="builtintype" id="2828709">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828717">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2828724">[</span><span class="num" id="2828725">100000</span><span class="op" id="2828731">]</span><span class="ident" id="2828732">unsafe</span><span class="op" id="2828738">.</span><span class="ident" id="2828739">Pointer</span>&nbsp;<span class="comment" id="2828747">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2828764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2828767">word</span>&nbsp;<span class="ident" id="2828772">unsafe</span><span class="op" id="2828778">.</span><span class="ident" id="2828779">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2828787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2828790">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2828836">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2828888">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2828945">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2829003">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2829062">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2829105">func</span>&nbsp;<span class="op" id="2829110">(</span><span class="ident" id="2829111">f</span>&nbsp;<span class="ident" id="2829113">flag</span><span class="op" id="2829117">)</span>&nbsp;<span class="ident" id="2829119">mustBe</span><span class="op" id="2829125">(</span><span class="ident" id="2829126">expected</span>&nbsp;<span class="ident" id="2829135">Kind</span><span class="op" id="2829139">)</span>&nbsp;<span class="op" id="2829141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829144">if</span>&nbsp;<span class="ident" id="2829147">f</span><span class="op" id="2829148">.</span><span class="ident" id="2829149">kind</span><span class="op" id="2829153">(</span><span class="op" id="2829154">)</span>&nbsp;<span class="op" id="2829156">!=</span>&nbsp;<span class="ident" id="2829159">expected</span>&nbsp;<span class="op" id="2829168">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829172">panic</span><span class="op" id="2829177">(</span><span class="op" id="2829178">&amp;</span><span class="ident" id="2829179">ValueError</span><span class="op" id="2829189">{</span><span class="ident" id="2829190">methodName</span><span class="op" id="2829200">(</span><span class="op" id="2829201">)</span><span class="op" id="2829202">,</span>&nbsp;<span class="ident" id="2829204">f</span><span class="op" id="2829205">.</span><span class="ident" id="2829206">kind</span><span class="op" id="2829210">(</span><span class="op" id="2829211">)</span><span class="op" id="2829212">}</span><span class="op" id="2829213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2829216">}</span><br>
<span class="lineno"></span><span class="op" id="2829218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2829221">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2829293">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2829317">func</span>&nbsp;<span class="op" id="2829322">(</span><span class="ident" id="2829323">f</span>&nbsp;<span class="ident" id="2829325">flag</span><span class="op" id="2829329">)</span>&nbsp;<span class="ident" id="2829331">mustBeExported</span><span class="op" id="2829345">(</span><span class="op" id="2829346">)</span>&nbsp;<span class="op" id="2829348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829351">if</span>&nbsp;<span class="ident" id="2829354">f</span>&nbsp;<span class="op" id="2829356">==</span>&nbsp;<span class="num" id="2829359">0</span>&nbsp;<span class="op" id="2829361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829365">panic</span><span class="op" id="2829370">(</span><span class="op" id="2829371">&amp;</span><span class="ident" id="2829372">ValueError</span><span class="op" id="2829382">{</span><span class="ident" id="2829383">methodName</span><span class="op" id="2829393">(</span><span class="op" id="2829394">)</span><span class="op" id="2829395">,</span>&nbsp;<span class="num" id="2829397">0</span><span class="op" id="2829398">}</span><span class="op" id="2829399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2829402">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829405">if</span>&nbsp;<span class="ident" id="2829408">f</span><span class="op" id="2829409">&amp;</span><span class="ident" id="2829410">flagRO</span>&nbsp;<span class="op" id="2829417">!=</span>&nbsp;<span class="num" id="2829420">0</span>&nbsp;<span class="op" id="2829422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829426">panic</span><span class="op" id="2829431">(</span><span class="string" id="2829432">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2829444">+</span>&nbsp;<span class="ident" id="2829446">methodName</span><span class="op" id="2829456">(</span><span class="op" id="2829457">)</span>&nbsp;<span class="op" id="2829459">+</span>&nbsp;<span class="string" id="2829461">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2829507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2829510">}</span><br>
<span class="lineno"></span><span class="op" id="2829512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2829515">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2829589">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2829662">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2829691">func</span>&nbsp;<span class="op" id="2829696">(</span><span class="ident" id="2829697">f</span>&nbsp;<span class="ident" id="2829699">flag</span><span class="op" id="2829703">)</span>&nbsp;<span class="ident" id="2829705">mustBeAssignable</span><span class="op" id="2829721">(</span><span class="op" id="2829722">)</span>&nbsp;<span class="op" id="2829724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829727">if</span>&nbsp;<span class="ident" id="2829730">f</span>&nbsp;<span class="op" id="2829732">==</span>&nbsp;<span class="num" id="2829735">0</span>&nbsp;<span class="op" id="2829737">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829741">panic</span><span class="op" id="2829746">(</span><span class="op" id="2829747">&amp;</span><span class="ident" id="2829748">ValueError</span><span class="op" id="2829758">{</span><span class="ident" id="2829759">methodName</span><span class="op" id="2829769">(</span><span class="op" id="2829770">)</span><span class="op" id="2829771">,</span>&nbsp;<span class="ident" id="2829773">Invalid</span><span class="op" id="2829780">}</span><span class="op" id="2829781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2829784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2829787">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829836">if</span>&nbsp;<span class="ident" id="2829839">f</span><span class="op" id="2829840">&amp;</span><span class="ident" id="2829841">flagRO</span>&nbsp;<span class="op" id="2829848">!=</span>&nbsp;<span class="num" id="2829851">0</span>&nbsp;<span class="op" id="2829853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829857">panic</span><span class="op" id="2829862">(</span><span class="string" id="2829863">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2829875">+</span>&nbsp;<span class="ident" id="2829877">methodName</span><span class="op" id="2829887">(</span><span class="op" id="2829888">)</span>&nbsp;<span class="op" id="2829890">+</span>&nbsp;<span class="string" id="2829892">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2829938">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2829941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2829944">if</span>&nbsp;<span class="ident" id="2829947">f</span><span class="op" id="2829948">&amp;</span><span class="ident" id="2829949">flagAddr</span>&nbsp;<span class="op" id="2829958">==</span>&nbsp;<span class="num" id="2829961">0</span>&nbsp;<span class="op" id="2829963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2829967">panic</span><span class="op" id="2829972">(</span><span class="string" id="2829973">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2829985">+</span>&nbsp;<span class="ident" id="2829987">methodName</span><span class="op" id="2829997">(</span><span class="op" id="2829998">)</span>&nbsp;<span class="op" id="2830000">+</span>&nbsp;<span class="string" id="2830002">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2830030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2830033">}</span><br>
<span class="lineno"></span><span class="op" id="2830035">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2830038">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2830101">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2830142">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2830206">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2830268">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2830289">func</span>&nbsp;<span class="op" id="2830294">(</span><span class="ident" id="2830295">v</span>&nbsp;<span class="ident" id="2830297">Value</span><span class="op" id="2830302">)</span>&nbsp;<span class="ident" id="2830304">Addr</span><span class="op" id="2830308">(</span><span class="op" id="2830309">)</span>&nbsp;<span class="ident" id="2830311">Value</span>&nbsp;<span class="op" id="2830317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2830320">if</span>&nbsp;<span class="ident" id="2830323">v</span><span class="op" id="2830324">.</span><span class="ident" id="2830325">flag</span><span class="op" id="2830329">&amp;</span><span class="ident" id="2830330">flagAddr</span>&nbsp;<span class="op" id="2830339">==</span>&nbsp;<span class="num" id="2830342">0</span>&nbsp;<span class="op" id="2830344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2830348">panic</span><span class="op" id="2830353">(</span><span class="string" id="2830354">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2830397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2830400">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2830403">return</span>&nbsp;<span class="ident" id="2830410">Value</span><span class="op" id="2830415">{</span><span class="ident" id="2830416">v</span><span class="op" id="2830417">.</span><span class="ident" id="2830418">typ</span><span class="op" id="2830421">.</span><span class="ident" id="2830422">ptrTo</span><span class="op" id="2830427">(</span><span class="op" id="2830428">)</span><span class="op" id="2830429">,</span>&nbsp;<span class="ident" id="2830431">v</span><span class="op" id="2830432">.</span><span class="ident" id="2830433">ptr</span><span class="op" id="2830436">,</span>&nbsp;<span class="op" id="2830438">(</span><span class="ident" id="2830439">v</span><span class="op" id="2830440">.</span><span class="ident" id="2830441">flag</span>&nbsp;<span class="op" id="2830446">&amp;</span>&nbsp;<span class="ident" id="2830448">flagRO</span><span class="op" id="2830454">)</span>&nbsp;<span class="op" id="2830456">|</span>&nbsp;<span class="ident" id="2830458">flag</span><span class="op" id="2830462">(</span><span class="ident" id="2830463">Ptr</span><span class="op" id="2830466">)</span><span class="op" id="2830467">}</span><br>
<span class="lineno"></span><span class="op" id="2830469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2830472">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2830510">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2830548">func</span>&nbsp;<span class="op" id="2830553">(</span><span class="ident" id="2830554">v</span>&nbsp;<span class="ident" id="2830556">Value</span><span class="op" id="2830561">)</span>&nbsp;<span class="ident" id="2830563">Bool</span><span class="op" id="2830567">(</span><span class="op" id="2830568">)</span>&nbsp;<span class="builtintype" id="2830570">bool</span>&nbsp;<span class="op" id="2830575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2830578">v</span><span class="op" id="2830579">.</span><span class="ident" id="2830580">mustBe</span><span class="op" id="2830586">(</span><span class="ident" id="2830587">Bool</span><span class="op" id="2830591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2830594">return</span>&nbsp;<span class="op" id="2830601">*</span><span class="op" id="2830602">(</span><span class="op" id="2830603">*</span><span class="builtintype" id="2830604">bool</span><span class="op" id="2830608">)</span><span class="op" id="2830609">(</span><span class="ident" id="2830610">v</span><span class="op" id="2830611">.</span><span class="ident" id="2830612">ptr</span><span class="op" id="2830615">)</span><br>
<span class="lineno"></span><span class="op" id="2830617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2830620">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2830659">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2830721">func</span>&nbsp;<span class="op" id="2830726">(</span><span class="ident" id="2830727">v</span>&nbsp;<span class="ident" id="2830729">Value</span><span class="op" id="2830734">)</span>&nbsp;<span class="ident" id="2830736">Bytes</span><span class="op" id="2830741">(</span><span class="op" id="2830742">)</span>&nbsp;<span class="op" id="2830744">[</span><span class="op" id="2830745">]</span><span class="builtintype" id="2830746">byte</span>&nbsp;<span class="op" id="2830751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2830754">v</span><span class="op" id="2830755">.</span><span class="ident" id="2830756">mustBe</span><span class="op" id="2830762">(</span><span class="ident" id="2830763">Slice</span><span class="op" id="2830768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2830771">if</span>&nbsp;<span class="ident" id="2830774">v</span><span class="op" id="2830775">.</span><span class="ident" id="2830776">typ</span><span class="op" id="2830779">.</span><span class="ident" id="2830780">Elem</span><span class="op" id="2830784">(</span><span class="op" id="2830785">)</span><span class="op" id="2830786">.</span><span class="ident" id="2830787">Kind</span><span class="op" id="2830791">(</span><span class="op" id="2830792">)</span>&nbsp;<span class="op" id="2830794">!=</span>&nbsp;<span class="ident" id="2830797">Uint8</span>&nbsp;<span class="op" id="2830803">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2830807">panic</span><span class="op" id="2830812">(</span><span class="string" id="2830813">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2830852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2830855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2830858">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2830916">return</span>&nbsp;<span class="op" id="2830923">*</span><span class="op" id="2830924">(</span><span class="op" id="2830925">*</span><span class="op" id="2830926">[</span><span class="op" id="2830927">]</span><span class="builtintype" id="2830928">byte</span><span class="op" id="2830932">)</span><span class="op" id="2830933">(</span><span class="ident" id="2830934">v</span><span class="op" id="2830935">.</span><span class="ident" id="2830936">ptr</span><span class="op" id="2830939">)</span><br>
<span class="lineno"></span><span class="op" id="2830941">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2830944">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2830983">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2831054">func</span>&nbsp;<span class="op" id="2831059">(</span><span class="ident" id="2831060">v</span>&nbsp;<span class="ident" id="2831062">Value</span><span class="op" id="2831067">)</span>&nbsp;<span class="ident" id="2831069">runes</span><span class="op" id="2831074">(</span><span class="op" id="2831075">)</span>&nbsp;<span class="op" id="2831077">[</span><span class="op" id="2831078">]</span><span class="builtintype" id="2831079">rune</span>&nbsp;<span class="op" id="2831084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2831087">v</span><span class="op" id="2831088">.</span><span class="ident" id="2831089">mustBe</span><span class="op" id="2831095">(</span><span class="ident" id="2831096">Slice</span><span class="op" id="2831101">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2831104">if</span>&nbsp;<span class="ident" id="2831107">v</span><span class="op" id="2831108">.</span><span class="ident" id="2831109">typ</span><span class="op" id="2831112">.</span><span class="ident" id="2831113">Elem</span><span class="op" id="2831117">(</span><span class="op" id="2831118">)</span><span class="op" id="2831119">.</span><span class="ident" id="2831120">Kind</span><span class="op" id="2831124">(</span><span class="op" id="2831125">)</span>&nbsp;<span class="op" id="2831127">!=</span>&nbsp;<span class="ident" id="2831130">Int32</span>&nbsp;<span class="op" id="2831136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2831140">panic</span><span class="op" id="2831145">(</span><span class="string" id="2831146">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2831185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2831188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2831191">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2831249">return</span>&nbsp;<span class="op" id="2831256">*</span><span class="op" id="2831257">(</span><span class="op" id="2831258">*</span><span class="op" id="2831259">[</span><span class="op" id="2831260">]</span><span class="builtintype" id="2831261">rune</span><span class="op" id="2831265">)</span><span class="op" id="2831266">(</span><span class="ident" id="2831267">v</span><span class="op" id="2831268">.</span><span class="ident" id="2831269">ptr</span><span class="op" id="2831272">)</span><br>
<span class="lineno">265</span><span class="op" id="2831274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2831277">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2831351">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2831423">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2831485">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2831564">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2831618">func</span>&nbsp;<span class="op" id="2831623">(</span><span class="ident" id="2831624">v</span>&nbsp;<span class="ident" id="2831626">Value</span><span class="op" id="2831631">)</span>&nbsp;<span class="ident" id="2831633">CanAddr</span><span class="op" id="2831640">(</span><span class="op" id="2831641">)</span>&nbsp;<span class="builtintype" id="2831643">bool</span>&nbsp;<span class="op" id="2831648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2831651">return</span>&nbsp;<span class="ident" id="2831658">v</span><span class="op" id="2831659">.</span><span class="ident" id="2831660">flag</span><span class="op" id="2831664">&amp;</span><span class="ident" id="2831665">flagAddr</span>&nbsp;<span class="op" id="2831674">!=</span>&nbsp;<span class="num" id="2831677">0</span><br>
<span class="lineno"></span><span class="op" id="2831679">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2831682">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2831739">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2831803">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2831855">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2831916">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2831964">func</span>&nbsp;<span class="op" id="2831969">(</span><span class="ident" id="2831970">v</span>&nbsp;<span class="ident" id="2831972">Value</span><span class="op" id="2831977">)</span>&nbsp;<span class="ident" id="2831979">CanSet</span><span class="op" id="2831985">(</span><span class="op" id="2831986">)</span>&nbsp;<span class="builtintype" id="2831988">bool</span>&nbsp;<span class="op" id="2831993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2831996">return</span>&nbsp;<span class="ident" id="2832003">v</span><span class="op" id="2832004">.</span><span class="ident" id="2832005">flag</span><span class="op" id="2832009">&amp;</span><span class="op" id="2832010">(</span><span class="ident" id="2832011">flagAddr</span><span class="op" id="2832019">|</span><span class="ident" id="2832020">flagRO</span><span class="op" id="2832026">)</span>&nbsp;<span class="op" id="2832028">==</span>&nbsp;<span class="ident" id="2832031">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2832040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2832043">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2832101">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2832192">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2832232">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2832276">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2832335">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2832392">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2832466">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2832514">func</span>&nbsp;<span class="op" id="2832519">(</span><span class="ident" id="2832520">v</span>&nbsp;<span class="ident" id="2832522">Value</span><span class="op" id="2832527">)</span>&nbsp;<span class="ident" id="2832529">Call</span><span class="op" id="2832533">(</span><span class="ident" id="2832534">in</span>&nbsp;<span class="op" id="2832537">[</span><span class="op" id="2832538">]</span><span class="ident" id="2832539">Value</span><span class="op" id="2832544">)</span>&nbsp;<span class="op" id="2832546">[</span><span class="op" id="2832547">]</span><span class="ident" id="2832548">Value</span>&nbsp;<span class="op" id="2832554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2832557">v</span><span class="op" id="2832558">.</span><span class="ident" id="2832559">mustBe</span><span class="op" id="2832565">(</span><span class="ident" id="2832566">Func</span><span class="op" id="2832570">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2832573">v</span><span class="op" id="2832574">.</span><span class="ident" id="2832575">mustBeExported</span><span class="op" id="2832589">(</span><span class="op" id="2832590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2832593">return</span>&nbsp;<span class="ident" id="2832600">v</span><span class="op" id="2832601">.</span><span class="ident" id="2832602">call</span><span class="op" id="2832606">(</span><span class="string" id="2832607">&#34;Call&#34;</span><span class="op" id="2832613">,</span>&nbsp;<span class="ident" id="2832615">in</span><span class="op" id="2832617">)</span><br>
<span class="lineno"></span><span class="op" id="2832619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2832622">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2832694">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2832763">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2832857">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2832921">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2832965">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2833024">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2833081">func</span>&nbsp;<span class="op" id="2833086">(</span><span class="ident" id="2833087">v</span>&nbsp;<span class="ident" id="2833089">Value</span><span class="op" id="2833094">)</span>&nbsp;<span class="ident" id="2833096">CallSlice</span><span class="op" id="2833105">(</span><span class="ident" id="2833106">in</span>&nbsp;<span class="op" id="2833109">[</span><span class="op" id="2833110">]</span><span class="ident" id="2833111">Value</span><span class="op" id="2833116">)</span>&nbsp;<span class="op" id="2833118">[</span><span class="op" id="2833119">]</span><span class="ident" id="2833120">Value</span>&nbsp;<span class="op" id="2833126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833129">v</span><span class="op" id="2833130">.</span><span class="ident" id="2833131">mustBe</span><span class="op" id="2833137">(</span><span class="ident" id="2833138">Func</span><span class="op" id="2833142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833145">v</span><span class="op" id="2833146">.</span><span class="ident" id="2833147">mustBeExported</span><span class="op" id="2833161">(</span><span class="op" id="2833162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833165">return</span>&nbsp;<span class="ident" id="2833172">v</span><span class="op" id="2833173">.</span><span class="ident" id="2833174">call</span><span class="op" id="2833178">(</span><span class="string" id="2833179">&#34;CallSlice&#34;</span><span class="op" id="2833190">,</span>&nbsp;<span class="ident" id="2833192">in</span><span class="op" id="2833194">)</span><br>
<span class="lineno">310</span><span class="op" id="2833196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2833199">var</span>&nbsp;<span class="ident" id="2833203">callGC</span>&nbsp;<span class="builtintype" id="2833210">bool</span>&nbsp;<span class="comment" id="2833215">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2833255">func</span>&nbsp;<span class="op" id="2833260">(</span><span class="ident" id="2833261">v</span>&nbsp;<span class="ident" id="2833263">Value</span><span class="op" id="2833268">)</span>&nbsp;<span class="ident" id="2833270">call</span><span class="op" id="2833274">(</span><span class="ident" id="2833275">op</span>&nbsp;<span class="builtintype" id="2833278">string</span><span class="op" id="2833284">,</span>&nbsp;<span class="ident" id="2833286">in</span>&nbsp;<span class="op" id="2833289">[</span><span class="op" id="2833290">]</span><span class="ident" id="2833291">Value</span><span class="op" id="2833296">)</span>&nbsp;<span class="op" id="2833298">[</span><span class="op" id="2833299">]</span><span class="ident" id="2833300">Value</span>&nbsp;<span class="op" id="2833306">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2833309">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833341">t</span>&nbsp;<span class="op" id="2833343">:=</span>&nbsp;<span class="ident" id="2833346">v</span><span class="op" id="2833347">.</span><span class="ident" id="2833348">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833353">var</span>&nbsp;<span class="op" id="2833357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833361">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833370">unsafe</span><span class="op" id="2833376">.</span><span class="ident" id="2833377">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833387">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833396">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833404">rcvrtype</span>&nbsp;<span class="op" id="2833413">*</span><span class="ident" id="2833414">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833424">if</span>&nbsp;<span class="ident" id="2833427">v</span><span class="op" id="2833428">.</span><span class="ident" id="2833429">flag</span><span class="op" id="2833433">&amp;</span><span class="ident" id="2833434">flagMethod</span>&nbsp;<span class="op" id="2833445">!=</span>&nbsp;<span class="num" id="2833448">0</span>&nbsp;<span class="op" id="2833450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833454">rcvr</span>&nbsp;<span class="op" id="2833459">=</span>&nbsp;<span class="ident" id="2833461">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833465">rcvrtype</span><span class="op" id="2833473">,</span>&nbsp;<span class="ident" id="2833475">t</span><span class="op" id="2833476">,</span>&nbsp;<span class="ident" id="2833478">fn</span>&nbsp;<span class="op" id="2833481">=</span>&nbsp;<span class="ident" id="2833483">methodReceiver</span><span class="op" id="2833497">(</span><span class="ident" id="2833498">op</span><span class="op" id="2833500">,</span>&nbsp;<span class="ident" id="2833502">v</span><span class="op" id="2833503">,</span>&nbsp;<span class="builtintype" id="2833505">int</span><span class="op" id="2833508">(</span><span class="ident" id="2833509">v</span><span class="op" id="2833510">.</span><span class="ident" id="2833511">flag</span><span class="op" id="2833515">)</span><span class="op" id="2833516">&gt;&gt;</span><span class="ident" id="2833518">flagMethodShift</span><span class="op" id="2833533">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833536">}</span>&nbsp;<span class="keyword" id="2833538">else</span>&nbsp;<span class="keyword" id="2833543">if</span>&nbsp;<span class="ident" id="2833546">v</span><span class="op" id="2833547">.</span><span class="ident" id="2833548">flag</span><span class="op" id="2833552">&amp;</span><span class="ident" id="2833553">flagIndir</span>&nbsp;<span class="op" id="2833563">!=</span>&nbsp;<span class="num" id="2833566">0</span>&nbsp;<span class="op" id="2833568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833572">fn</span>&nbsp;<span class="op" id="2833575">=</span>&nbsp;<span class="op" id="2833577">*</span><span class="op" id="2833578">(</span><span class="op" id="2833579">*</span><span class="ident" id="2833580">unsafe</span><span class="op" id="2833586">.</span><span class="ident" id="2833587">Pointer</span><span class="op" id="2833594">)</span><span class="op" id="2833595">(</span><span class="ident" id="2833596">v</span><span class="op" id="2833597">.</span><span class="ident" id="2833598">ptr</span><span class="op" id="2833601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833604">}</span>&nbsp;<span class="keyword" id="2833606">else</span>&nbsp;<span class="op" id="2833611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833615">fn</span>&nbsp;<span class="op" id="2833618">=</span>&nbsp;<span class="ident" id="2833620">v</span><span class="op" id="2833621">.</span><span class="ident" id="2833622">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833627">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833631">if</span>&nbsp;<span class="ident" id="2833634">fn</span>&nbsp;<span class="op" id="2833637">==</span>&nbsp;<span class="builtintype" id="2833640">nil</span>&nbsp;<span class="op" id="2833644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2833648">panic</span><span class="op" id="2833653">(</span><span class="string" id="2833654">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2833696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833703">isSlice</span>&nbsp;<span class="op" id="2833711">:=</span>&nbsp;<span class="ident" id="2833714">op</span>&nbsp;<span class="op" id="2833717">==</span>&nbsp;<span class="string" id="2833720">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2833733">n</span>&nbsp;<span class="op" id="2833735">:=</span>&nbsp;<span class="ident" id="2833738">t</span><span class="op" id="2833739">.</span><span class="ident" id="2833740">NumIn</span><span class="op" id="2833745">(</span><span class="op" id="2833746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833749">if</span>&nbsp;<span class="ident" id="2833752">isSlice</span>&nbsp;<span class="op" id="2833760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833764">if</span>&nbsp;<span class="op" id="2833767">!</span><span class="ident" id="2833768">t</span><span class="op" id="2833769">.</span><span class="ident" id="2833770">IsVariadic</span><span class="op" id="2833780">(</span><span class="op" id="2833781">)</span>&nbsp;<span class="op" id="2833783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2833788">panic</span><span class="op" id="2833793">(</span><span class="string" id="2833794">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2833839">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833847">if</span>&nbsp;<span class="builtinfunc" id="2833850">len</span><span class="op" id="2833853">(</span><span class="ident" id="2833854">in</span><span class="op" id="2833856">)</span>&nbsp;<span class="op" id="2833858">&lt;</span>&nbsp;<span class="ident" id="2833860">n</span>&nbsp;<span class="op" id="2833862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2833867">panic</span><span class="op" id="2833872">(</span><span class="string" id="2833873">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2833922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2833926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2833930">if</span>&nbsp;<span class="builtinfunc" id="2833933">len</span><span class="op" id="2833936">(</span><span class="ident" id="2833937">in</span><span class="op" id="2833939">)</span>&nbsp;<span class="op" id="2833941">&gt;</span>&nbsp;<span class="ident" id="2833943">n</span>&nbsp;<span class="op" id="2833945">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2833950">panic</span><span class="op" id="2833955">(</span><span class="string" id="2833956">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2834006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834013">}</span>&nbsp;<span class="keyword" id="2834015">else</span>&nbsp;<span class="op" id="2834020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834024">if</span>&nbsp;<span class="ident" id="2834027">t</span><span class="op" id="2834028">.</span><span class="ident" id="2834029">IsVariadic</span><span class="op" id="2834039">(</span><span class="op" id="2834040">)</span>&nbsp;<span class="op" id="2834042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834047">n</span><span class="op" id="2834048">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834057">if</span>&nbsp;<span class="builtinfunc" id="2834060">len</span><span class="op" id="2834063">(</span><span class="ident" id="2834064">in</span><span class="op" id="2834066">)</span>&nbsp;<span class="op" id="2834068">&lt;</span>&nbsp;<span class="ident" id="2834070">n</span>&nbsp;<span class="op" id="2834072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834077">panic</span><span class="op" id="2834082">(</span><span class="string" id="2834083">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2834127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834135">if</span>&nbsp;<span class="op" id="2834138">!</span><span class="ident" id="2834139">t</span><span class="op" id="2834140">.</span><span class="ident" id="2834141">IsVariadic</span><span class="op" id="2834151">(</span><span class="op" id="2834152">)</span>&nbsp;<span class="op" id="2834154">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2834157">len</span><span class="op" id="2834160">(</span><span class="ident" id="2834161">in</span><span class="op" id="2834163">)</span>&nbsp;<span class="op" id="2834165">&gt;</span>&nbsp;<span class="ident" id="2834167">n</span>&nbsp;<span class="op" id="2834169">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834174">panic</span><span class="op" id="2834179">(</span><span class="string" id="2834180">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2834225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834235">for</span>&nbsp;<span class="ident" id="2834239">_</span><span class="op" id="2834240">,</span>&nbsp;<span class="ident" id="2834242">x</span>&nbsp;<span class="op" id="2834244">:=</span>&nbsp;<span class="keyword" id="2834247">range</span>&nbsp;<span class="ident" id="2834253">in</span>&nbsp;<span class="op" id="2834256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834260">if</span>&nbsp;<span class="ident" id="2834263">x</span><span class="op" id="2834264">.</span><span class="ident" id="2834265">Kind</span><span class="op" id="2834269">(</span><span class="op" id="2834270">)</span>&nbsp;<span class="op" id="2834272">==</span>&nbsp;<span class="ident" id="2834275">Invalid</span>&nbsp;<span class="op" id="2834283">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834288">panic</span><span class="op" id="2834293">(</span><span class="string" id="2834294">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2834306">+</span>&nbsp;<span class="ident" id="2834308">op</span>&nbsp;<span class="op" id="2834311">+</span>&nbsp;<span class="string" id="2834313">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2834341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834351">for</span>&nbsp;<span class="ident" id="2834355">i</span>&nbsp;<span class="op" id="2834357">:=</span>&nbsp;<span class="num" id="2834360">0</span><span class="op" id="2834361">;</span>&nbsp;<span class="ident" id="2834363">i</span>&nbsp;<span class="op" id="2834365">&lt;</span>&nbsp;<span class="ident" id="2834367">n</span><span class="op" id="2834368">;</span>&nbsp;<span class="ident" id="2834370">i</span><span class="op" id="2834371">++</span>&nbsp;<span class="op" id="2834374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834378">if</span>&nbsp;<span class="ident" id="2834381">xt</span><span class="op" id="2834383">,</span>&nbsp;<span class="ident" id="2834385">targ</span>&nbsp;<span class="op" id="2834390">:=</span>&nbsp;<span class="ident" id="2834393">in</span><span class="op" id="2834395">[</span><span class="ident" id="2834396">i</span><span class="op" id="2834397">]</span><span class="op" id="2834398">.</span><span class="ident" id="2834399">Type</span><span class="op" id="2834403">(</span><span class="op" id="2834404">)</span><span class="op" id="2834405">,</span>&nbsp;<span class="ident" id="2834407">t</span><span class="op" id="2834408">.</span><span class="ident" id="2834409">In</span><span class="op" id="2834411">(</span><span class="ident" id="2834412">i</span><span class="op" id="2834413">)</span><span class="op" id="2834414">;</span>&nbsp;<span class="op" id="2834416">!</span><span class="ident" id="2834417">xt</span><span class="op" id="2834419">.</span><span class="ident" id="2834420">AssignableTo</span><span class="op" id="2834432">(</span><span class="ident" id="2834433">targ</span><span class="op" id="2834437">)</span>&nbsp;<span class="op" id="2834439">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834444">panic</span><span class="op" id="2834449">(</span><span class="string" id="2834450">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2834462">+</span>&nbsp;<span class="ident" id="2834464">op</span>&nbsp;<span class="op" id="2834467">+</span>&nbsp;<span class="string" id="2834469">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2834479">+</span>&nbsp;<span class="ident" id="2834481">xt</span><span class="op" id="2834483">.</span><span class="ident" id="2834484">String</span><span class="op" id="2834490">(</span><span class="op" id="2834491">)</span>&nbsp;<span class="op" id="2834493">+</span>&nbsp;<span class="string" id="2834495">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2834507">+</span>&nbsp;<span class="ident" id="2834509">targ</span><span class="op" id="2834513">.</span><span class="ident" id="2834514">String</span><span class="op" id="2834520">(</span><span class="op" id="2834521">)</span><span class="op" id="2834522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834532">if</span>&nbsp;<span class="op" id="2834535">!</span><span class="ident" id="2834536">isSlice</span>&nbsp;<span class="op" id="2834544">&amp;&amp;</span>&nbsp;<span class="ident" id="2834547">t</span><span class="op" id="2834548">.</span><span class="ident" id="2834549">IsVariadic</span><span class="op" id="2834559">(</span><span class="op" id="2834560">)</span>&nbsp;<span class="op" id="2834562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2834566">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834606">m</span>&nbsp;<span class="op" id="2834608">:=</span>&nbsp;<span class="builtinfunc" id="2834611">len</span><span class="op" id="2834614">(</span><span class="ident" id="2834615">in</span><span class="op" id="2834617">)</span>&nbsp;<span class="op" id="2834619">-</span>&nbsp;<span class="ident" id="2834621">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834625">slice</span>&nbsp;<span class="op" id="2834631">:=</span>&nbsp;<span class="ident" id="2834634">MakeSlice</span><span class="op" id="2834643">(</span><span class="ident" id="2834644">t</span><span class="op" id="2834645">.</span><span class="ident" id="2834646">In</span><span class="op" id="2834648">(</span><span class="ident" id="2834649">n</span><span class="op" id="2834650">)</span><span class="op" id="2834651">,</span>&nbsp;<span class="ident" id="2834653">m</span><span class="op" id="2834654">,</span>&nbsp;<span class="ident" id="2834656">m</span><span class="op" id="2834657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834661">elem</span>&nbsp;<span class="op" id="2834666">:=</span>&nbsp;<span class="ident" id="2834669">t</span><span class="op" id="2834670">.</span><span class="ident" id="2834671">In</span><span class="op" id="2834673">(</span><span class="ident" id="2834674">n</span><span class="op" id="2834675">)</span><span class="op" id="2834676">.</span><span class="ident" id="2834677">Elem</span><span class="op" id="2834681">(</span><span class="op" id="2834682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834686">for</span>&nbsp;<span class="ident" id="2834690">i</span>&nbsp;<span class="op" id="2834692">:=</span>&nbsp;<span class="num" id="2834695">0</span><span class="op" id="2834696">;</span>&nbsp;<span class="ident" id="2834698">i</span>&nbsp;<span class="op" id="2834700">&lt;</span>&nbsp;<span class="ident" id="2834702">m</span><span class="op" id="2834703">;</span>&nbsp;<span class="ident" id="2834705">i</span><span class="op" id="2834706">++</span>&nbsp;<span class="op" id="2834709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834714">x</span>&nbsp;<span class="op" id="2834716">:=</span>&nbsp;<span class="ident" id="2834719">in</span><span class="op" id="2834721">[</span><span class="ident" id="2834722">n</span><span class="op" id="2834723">+</span><span class="ident" id="2834724">i</span><span class="op" id="2834725">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2834730">if</span>&nbsp;<span class="ident" id="2834733">xt</span>&nbsp;<span class="op" id="2834736">:=</span>&nbsp;<span class="ident" id="2834739">x</span><span class="op" id="2834740">.</span><span class="ident" id="2834741">Type</span><span class="op" id="2834745">(</span><span class="op" id="2834746">)</span><span class="op" id="2834747">;</span>&nbsp;<span class="op" id="2834749">!</span><span class="ident" id="2834750">xt</span><span class="op" id="2834752">.</span><span class="ident" id="2834753">AssignableTo</span><span class="op" id="2834765">(</span><span class="ident" id="2834766">elem</span><span class="op" id="2834770">)</span>&nbsp;<span class="op" id="2834772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834778">panic</span><span class="op" id="2834783">(</span><span class="string" id="2834784">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2834807">+</span>&nbsp;<span class="ident" id="2834809">xt</span><span class="op" id="2834811">.</span><span class="ident" id="2834812">String</span><span class="op" id="2834818">(</span><span class="op" id="2834819">)</span>&nbsp;<span class="op" id="2834821">+</span>&nbsp;<span class="string" id="2834823">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2834835">+</span>&nbsp;<span class="ident" id="2834837">elem</span><span class="op" id="2834841">.</span><span class="ident" id="2834842">String</span><span class="op" id="2834848">(</span><span class="op" id="2834849">)</span>&nbsp;<span class="op" id="2834851">+</span>&nbsp;<span class="string" id="2834853">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2834860">+</span>&nbsp;<span class="ident" id="2834862">op</span><span class="op" id="2834864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834874">slice</span><span class="op" id="2834879">.</span><span class="ident" id="2834880">Index</span><span class="op" id="2834885">(</span><span class="ident" id="2834886">i</span><span class="op" id="2834887">)</span><span class="op" id="2834888">.</span><span class="ident" id="2834889">Set</span><span class="op" id="2834892">(</span><span class="ident" id="2834893">x</span><span class="op" id="2834894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834898">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834902">origIn</span>&nbsp;<span class="op" id="2834909">:=</span>&nbsp;<span class="ident" id="2834912">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834917">in</span>&nbsp;<span class="op" id="2834920">=</span>&nbsp;<span class="builtinfunc" id="2834922">make</span><span class="op" id="2834926">(</span><span class="op" id="2834927">[</span><span class="op" id="2834928">]</span><span class="ident" id="2834929">Value</span><span class="op" id="2834934">,</span>&nbsp;<span class="ident" id="2834936">n</span><span class="op" id="2834937">+</span><span class="num" id="2834938">1</span><span class="op" id="2834939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2834943">copy</span><span class="op" id="2834947">(</span><span class="ident" id="2834948">in</span><span class="op" id="2834950">[</span><span class="op" id="2834951">:</span><span class="ident" id="2834952">n</span><span class="op" id="2834953">]</span><span class="op" id="2834954">,</span>&nbsp;<span class="ident" id="2834956">origIn</span><span class="op" id="2834962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834966">in</span><span class="op" id="2834968">[</span><span class="ident" id="2834969">n</span><span class="op" id="2834970">]</span>&nbsp;<span class="op" id="2834972">=</span>&nbsp;<span class="ident" id="2834974">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2834981">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2834985">nin</span>&nbsp;<span class="op" id="2834989">:=</span>&nbsp;<span class="builtinfunc" id="2834992">len</span><span class="op" id="2834995">(</span><span class="ident" id="2834996">in</span><span class="op" id="2834998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835001">if</span>&nbsp;<span class="ident" id="2835004">nin</span>&nbsp;<span class="op" id="2835008">!=</span>&nbsp;<span class="ident" id="2835011">t</span><span class="op" id="2835012">.</span><span class="ident" id="2835013">NumIn</span><span class="op" id="2835018">(</span><span class="op" id="2835019">)</span>&nbsp;<span class="op" id="2835021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2835025">panic</span><span class="op" id="2835030">(</span><span class="string" id="2835031">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2835073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835076">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835079">nout</span>&nbsp;<span class="op" id="2835084">:=</span>&nbsp;<span class="ident" id="2835087">t</span><span class="op" id="2835088">.</span><span class="ident" id="2835089">NumOut</span><span class="op" id="2835095">(</span><span class="op" id="2835096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2835100">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835161">frametype</span><span class="op" id="2835170">,</span>&nbsp;<span class="ident" id="2835172">_</span><span class="op" id="2835173">,</span>&nbsp;<span class="ident" id="2835175">retOffset</span><span class="op" id="2835184">,</span>&nbsp;<span class="ident" id="2835186">_</span>&nbsp;<span class="op" id="2835188">:=</span>&nbsp;<span class="ident" id="2835191">funcLayout</span><span class="op" id="2835201">(</span><span class="ident" id="2835202">t</span><span class="op" id="2835203">,</span>&nbsp;<span class="ident" id="2835205">rcvrtype</span><span class="op" id="2835213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835216">args</span>&nbsp;<span class="op" id="2835221">:=</span>&nbsp;<span class="ident" id="2835224">unsafe_New</span><span class="op" id="2835234">(</span><span class="ident" id="2835235">frametype</span><span class="op" id="2835244">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835247">off</span>&nbsp;<span class="op" id="2835251">:=</span>&nbsp;<span class="builtintype" id="2835254">uintptr</span><span class="op" id="2835261">(</span><span class="num" id="2835262">0</span><span class="op" id="2835263">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2835267">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835294">if</span>&nbsp;<span class="ident" id="2835297">rcvrtype</span>&nbsp;<span class="op" id="2835306">!=</span>&nbsp;<span class="builtintype" id="2835309">nil</span>&nbsp;<span class="op" id="2835313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835317">storeRcvr</span><span class="op" id="2835326">(</span><span class="ident" id="2835327">rcvr</span><span class="op" id="2835331">,</span>&nbsp;<span class="ident" id="2835333">args</span><span class="op" id="2835337">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835341">off</span>&nbsp;<span class="op" id="2835345">=</span>&nbsp;<span class="ident" id="2835347">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835359">for</span>&nbsp;<span class="ident" id="2835363">i</span><span class="op" id="2835364">,</span>&nbsp;<span class="ident" id="2835366">v</span>&nbsp;<span class="op" id="2835368">:=</span>&nbsp;<span class="keyword" id="2835371">range</span>&nbsp;<span class="ident" id="2835377">in</span>&nbsp;<span class="op" id="2835380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835384">v</span><span class="op" id="2835385">.</span><span class="ident" id="2835386">mustBeExported</span><span class="op" id="2835400">(</span><span class="op" id="2835401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835405">targ</span>&nbsp;<span class="op" id="2835410">:=</span>&nbsp;<span class="ident" id="2835413">t</span><span class="op" id="2835414">.</span><span class="ident" id="2835415">In</span><span class="op" id="2835417">(</span><span class="ident" id="2835418">i</span><span class="op" id="2835419">)</span><span class="op" id="2835420">.</span><span class="op" id="2835421">(</span><span class="op" id="2835422">*</span><span class="ident" id="2835423">rtype</span><span class="op" id="2835428">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835432">a</span>&nbsp;<span class="op" id="2835434">:=</span>&nbsp;<span class="builtintype" id="2835437">uintptr</span><span class="op" id="2835444">(</span><span class="ident" id="2835445">targ</span><span class="op" id="2835449">.</span><span class="ident" id="2835450">align</span><span class="op" id="2835455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835459">off</span>&nbsp;<span class="op" id="2835463">=</span>&nbsp;<span class="op" id="2835465">(</span><span class="ident" id="2835466">off</span>&nbsp;<span class="op" id="2835470">+</span>&nbsp;<span class="ident" id="2835472">a</span>&nbsp;<span class="op" id="2835474">-</span>&nbsp;<span class="num" id="2835476">1</span><span class="op" id="2835477">)</span>&nbsp;<span class="op" id="2835479">&amp;^</span>&nbsp;<span class="op" id="2835482">(</span><span class="ident" id="2835483">a</span>&nbsp;<span class="op" id="2835485">-</span>&nbsp;<span class="num" id="2835487">1</span><span class="op" id="2835488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835492">n</span>&nbsp;<span class="op" id="2835494">:=</span>&nbsp;<span class="ident" id="2835497">targ</span><span class="op" id="2835501">.</span><span class="ident" id="2835502">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835509">addr</span>&nbsp;<span class="op" id="2835514">:=</span>&nbsp;<span class="ident" id="2835517">unsafe</span><span class="op" id="2835523">.</span><span class="ident" id="2835524">Pointer</span><span class="op" id="2835531">(</span><span class="builtintype" id="2835532">uintptr</span><span class="op" id="2835539">(</span><span class="ident" id="2835540">args</span><span class="op" id="2835544">)</span>&nbsp;<span class="op" id="2835546">+</span>&nbsp;<span class="ident" id="2835548">off</span><span class="op" id="2835551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835555">v</span>&nbsp;<span class="op" id="2835557">=</span>&nbsp;<span class="ident" id="2835559">v</span><span class="op" id="2835560">.</span><span class="ident" id="2835561">assignTo</span><span class="op" id="2835569">(</span><span class="string" id="2835570">&#34;reflect.Value.Call&#34;</span><span class="op" id="2835590">,</span>&nbsp;<span class="ident" id="2835592">targ</span><span class="op" id="2835596">,</span>&nbsp;<span class="ident" id="2835598">addr</span><span class="op" id="2835602">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835606">if</span>&nbsp;<span class="ident" id="2835609">v</span><span class="op" id="2835610">.</span><span class="ident" id="2835611">flag</span><span class="op" id="2835615">&amp;</span><span class="ident" id="2835616">flagIndir</span>&nbsp;<span class="op" id="2835626">!=</span>&nbsp;<span class="num" id="2835629">0</span>&nbsp;<span class="op" id="2835631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835636">memmove</span><span class="op" id="2835643">(</span><span class="ident" id="2835644">addr</span><span class="op" id="2835648">,</span>&nbsp;<span class="ident" id="2835650">v</span><span class="op" id="2835651">.</span><span class="ident" id="2835652">ptr</span><span class="op" id="2835655">,</span>&nbsp;<span class="ident" id="2835657">n</span><span class="op" id="2835658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835662">}</span>&nbsp;<span class="keyword" id="2835664">else</span>&nbsp;<span class="op" id="2835669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835674">*</span><span class="op" id="2835675">(</span><span class="op" id="2835676">*</span><span class="ident" id="2835677">unsafe</span><span class="op" id="2835683">.</span><span class="ident" id="2835684">Pointer</span><span class="op" id="2835691">)</span><span class="op" id="2835692">(</span><span class="ident" id="2835693">addr</span><span class="op" id="2835697">)</span>&nbsp;<span class="op" id="2835699">=</span>&nbsp;<span class="ident" id="2835701">v</span><span class="op" id="2835702">.</span><span class="ident" id="2835703">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835709">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835713">off</span>&nbsp;<span class="op" id="2835717">+=</span>&nbsp;<span class="ident" id="2835720">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2835727">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835737">call</span><span class="op" id="2835741">(</span><span class="ident" id="2835742">fn</span><span class="op" id="2835744">,</span>&nbsp;<span class="ident" id="2835746">args</span><span class="op" id="2835750">,</span>&nbsp;<span class="builtintype" id="2835752">uint32</span><span class="op" id="2835758">(</span><span class="ident" id="2835759">frametype</span><span class="op" id="2835768">.</span><span class="ident" id="2835769">size</span><span class="op" id="2835773">)</span><span class="op" id="2835774">,</span>&nbsp;<span class="builtintype" id="2835776">uint32</span><span class="op" id="2835782">(</span><span class="ident" id="2835783">retOffset</span><span class="op" id="2835792">)</span><span class="op" id="2835793">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2835797">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835838">if</span>&nbsp;<span class="ident" id="2835841">callGC</span>&nbsp;<span class="op" id="2835848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835852">runtime</span><span class="op" id="2835859">.</span><span class="ident" id="2835860">GC</span><span class="op" id="2835862">(</span><span class="op" id="2835863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2835866">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2835870">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835906">ret</span>&nbsp;<span class="op" id="2835910">:=</span>&nbsp;<span class="builtinfunc" id="2835913">make</span><span class="op" id="2835917">(</span><span class="op" id="2835918">[</span><span class="op" id="2835919">]</span><span class="ident" id="2835920">Value</span><span class="op" id="2835925">,</span>&nbsp;<span class="ident" id="2835927">nout</span><span class="op" id="2835931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835934">off</span>&nbsp;<span class="op" id="2835938">=</span>&nbsp;<span class="ident" id="2835940">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2835951">for</span>&nbsp;<span class="ident" id="2835955">i</span>&nbsp;<span class="op" id="2835957">:=</span>&nbsp;<span class="num" id="2835960">0</span><span class="op" id="2835961">;</span>&nbsp;<span class="ident" id="2835963">i</span>&nbsp;<span class="op" id="2835965">&lt;</span>&nbsp;<span class="ident" id="2835967">nout</span><span class="op" id="2835971">;</span>&nbsp;<span class="ident" id="2835973">i</span><span class="op" id="2835974">++</span>&nbsp;<span class="op" id="2835977">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835981">tv</span>&nbsp;<span class="op" id="2835984">:=</span>&nbsp;<span class="ident" id="2835987">t</span><span class="op" id="2835988">.</span><span class="ident" id="2835989">Out</span><span class="op" id="2835992">(</span><span class="ident" id="2835993">i</span><span class="op" id="2835994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2835998">a</span>&nbsp;<span class="op" id="2836000">:=</span>&nbsp;<span class="builtintype" id="2836003">uintptr</span><span class="op" id="2836010">(</span><span class="ident" id="2836011">tv</span><span class="op" id="2836013">.</span><span class="ident" id="2836014">Align</span><span class="op" id="2836019">(</span><span class="op" id="2836020">)</span><span class="op" id="2836021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2836025">off</span>&nbsp;<span class="op" id="2836029">=</span>&nbsp;<span class="op" id="2836031">(</span><span class="ident" id="2836032">off</span>&nbsp;<span class="op" id="2836036">+</span>&nbsp;<span class="ident" id="2836038">a</span>&nbsp;<span class="op" id="2836040">-</span>&nbsp;<span class="num" id="2836042">1</span><span class="op" id="2836043">)</span>&nbsp;<span class="op" id="2836045">&amp;^</span>&nbsp;<span class="op" id="2836048">(</span><span class="ident" id="2836049">a</span>&nbsp;<span class="op" id="2836051">-</span>&nbsp;<span class="num" id="2836053">1</span><span class="op" id="2836054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2836058">fl</span>&nbsp;<span class="op" id="2836061">:=</span>&nbsp;<span class="ident" id="2836064">flagIndir</span>&nbsp;<span class="op" id="2836074">|</span>&nbsp;<span class="ident" id="2836076">flag</span><span class="op" id="2836080">(</span><span class="ident" id="2836081">tv</span><span class="op" id="2836083">.</span><span class="ident" id="2836084">Kind</span><span class="op" id="2836088">(</span><span class="op" id="2836089">)</span><span class="op" id="2836090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2836094">ret</span><span class="op" id="2836097">[</span><span class="ident" id="2836098">i</span><span class="op" id="2836099">]</span>&nbsp;<span class="op" id="2836101">=</span>&nbsp;<span class="ident" id="2836103">Value</span><span class="op" id="2836108">{</span><span class="ident" id="2836109">tv</span><span class="op" id="2836111">.</span><span class="ident" id="2836112">common</span><span class="op" id="2836118">(</span><span class="op" id="2836119">)</span><span class="op" id="2836120">,</span>&nbsp;<span class="ident" id="2836122">unsafe</span><span class="op" id="2836128">.</span><span class="ident" id="2836129">Pointer</span><span class="op" id="2836136">(</span><span class="builtintype" id="2836137">uintptr</span><span class="op" id="2836144">(</span><span class="ident" id="2836145">args</span><span class="op" id="2836149">)</span>&nbsp;<span class="op" id="2836151">+</span>&nbsp;<span class="ident" id="2836153">off</span><span class="op" id="2836156">)</span><span class="op" id="2836157">,</span>&nbsp;<span class="ident" id="2836159">fl</span><span class="op" id="2836161">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2836165">off</span>&nbsp;<span class="op" id="2836169">+=</span>&nbsp;<span class="ident" id="2836172">tv</span><span class="op" id="2836174">.</span><span class="ident" id="2836175">Size</span><span class="op" id="2836179">(</span><span class="op" id="2836180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2836183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2836187">return</span>&nbsp;<span class="ident" id="2836194">ret</span><br>
<span class="lineno"></span><span class="op" id="2836198">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2836201">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2836262">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2836326">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2836400">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2836467">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2836537">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2836572">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2836643">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2836710">//</span><br>
<span class="lineno">450</span><span class="comment" id="2836713">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2836789">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2836861">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2836933">func</span>&nbsp;<span class="ident" id="2836938">callReflect</span><span class="op" id="2836949">(</span><span class="ident" id="2836950">ctxt</span>&nbsp;<span class="op" id="2836955">*</span><span class="ident" id="2836956">makeFuncImpl</span><span class="op" id="2836968">,</span>&nbsp;<span class="ident" id="2836970">frame</span>&nbsp;<span class="ident" id="2836976">unsafe</span><span class="op" id="2836982">.</span><span class="ident" id="2836983">Pointer</span><span class="op" id="2836990">)</span>&nbsp;<span class="op" id="2836992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2836995">ftyp</span>&nbsp;<span class="op" id="2837000">:=</span>&nbsp;<span class="ident" id="2837003">ctxt</span><span class="op" id="2837007">.</span><span class="ident" id="2837008">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837013">f</span>&nbsp;<span class="op" id="2837015">:=</span>&nbsp;<span class="ident" id="2837018">ctxt</span><span class="op" id="2837022">.</span><span class="ident" id="2837023">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837028">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837065">ptr</span>&nbsp;<span class="op" id="2837069">:=</span>&nbsp;<span class="ident" id="2837072">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837079">off</span>&nbsp;<span class="op" id="2837083">:=</span>&nbsp;<span class="builtintype" id="2837086">uintptr</span><span class="op" id="2837093">(</span><span class="num" id="2837094">0</span><span class="op" id="2837095">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837098">in</span>&nbsp;<span class="op" id="2837101">:=</span>&nbsp;<span class="builtinfunc" id="2837104">make</span><span class="op" id="2837108">(</span><span class="op" id="2837109">[</span><span class="op" id="2837110">]</span><span class="ident" id="2837111">Value</span><span class="op" id="2837116">,</span>&nbsp;<span class="num" id="2837118">0</span><span class="op" id="2837119">,</span>&nbsp;<span class="builtinfunc" id="2837121">len</span><span class="op" id="2837124">(</span><span class="ident" id="2837125">ftyp</span><span class="op" id="2837129">.</span><span class="ident" id="2837130">in</span><span class="op" id="2837132">)</span><span class="op" id="2837133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2837136">for</span>&nbsp;<span class="ident" id="2837140">_</span><span class="op" id="2837141">,</span>&nbsp;<span class="ident" id="2837143">arg</span>&nbsp;<span class="op" id="2837147">:=</span>&nbsp;<span class="keyword" id="2837150">range</span>&nbsp;<span class="ident" id="2837156">ftyp</span><span class="op" id="2837160">.</span><span class="ident" id="2837161">in</span>&nbsp;<span class="op" id="2837164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837168">typ</span>&nbsp;<span class="op" id="2837172">:=</span>&nbsp;<span class="ident" id="2837175">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837181">off</span>&nbsp;<span class="op" id="2837185">+=</span>&nbsp;<span class="op" id="2837188">-</span><span class="ident" id="2837189">off</span>&nbsp;<span class="op" id="2837193">&amp;</span>&nbsp;<span class="builtintype" id="2837195">uintptr</span><span class="op" id="2837202">(</span><span class="ident" id="2837203">typ</span><span class="op" id="2837206">.</span><span class="ident" id="2837207">align</span><span class="op" id="2837212">-</span><span class="num" id="2837213">1</span><span class="op" id="2837214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837218">addr</span>&nbsp;<span class="op" id="2837223">:=</span>&nbsp;<span class="ident" id="2837226">unsafe</span><span class="op" id="2837232">.</span><span class="ident" id="2837233">Pointer</span><span class="op" id="2837240">(</span><span class="builtintype" id="2837241">uintptr</span><span class="op" id="2837248">(</span><span class="ident" id="2837249">ptr</span><span class="op" id="2837252">)</span>&nbsp;<span class="op" id="2837254">+</span>&nbsp;<span class="ident" id="2837256">off</span><span class="op" id="2837259">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837263">v</span>&nbsp;<span class="op" id="2837265">:=</span>&nbsp;<span class="ident" id="2837268">Value</span><span class="op" id="2837273">{</span><span class="ident" id="2837274">typ</span><span class="op" id="2837277">,</span>&nbsp;<span class="builtintype" id="2837279">nil</span><span class="op" id="2837282">,</span>&nbsp;<span class="ident" id="2837284">flag</span><span class="op" id="2837288">(</span><span class="ident" id="2837289">typ</span><span class="op" id="2837292">.</span><span class="ident" id="2837293">Kind</span><span class="op" id="2837297">(</span><span class="op" id="2837298">)</span><span class="op" id="2837299">)</span><span class="op" id="2837300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2837304">if</span>&nbsp;<span class="ident" id="2837307">ifaceIndir</span><span class="op" id="2837317">(</span><span class="ident" id="2837318">typ</span><span class="op" id="2837321">)</span>&nbsp;<span class="op" id="2837323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837328">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837377">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837441">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837503">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837570">v</span><span class="op" id="2837571">.</span><span class="ident" id="2837572">ptr</span>&nbsp;<span class="op" id="2837576">=</span>&nbsp;<span class="ident" id="2837578">unsafe_New</span><span class="op" id="2837588">(</span><span class="ident" id="2837589">typ</span><span class="op" id="2837592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837597">memmove</span><span class="op" id="2837604">(</span><span class="ident" id="2837605">v</span><span class="op" id="2837606">.</span><span class="ident" id="2837607">ptr</span><span class="op" id="2837610">,</span>&nbsp;<span class="ident" id="2837612">addr</span><span class="op" id="2837616">,</span>&nbsp;<span class="ident" id="2837618">typ</span><span class="op" id="2837621">.</span><span class="ident" id="2837622">size</span><span class="op" id="2837626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837631">v</span><span class="op" id="2837632">.</span><span class="ident" id="2837633">flag</span>&nbsp;<span class="op" id="2837638">|=</span>&nbsp;<span class="ident" id="2837641">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2837653">}</span>&nbsp;<span class="keyword" id="2837655">else</span>&nbsp;<span class="op" id="2837660">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837665">v</span><span class="op" id="2837666">.</span><span class="ident" id="2837667">ptr</span>&nbsp;<span class="op" id="2837671">=</span>&nbsp;<span class="op" id="2837673">*</span><span class="op" id="2837674">(</span><span class="op" id="2837675">*</span><span class="ident" id="2837676">unsafe</span><span class="op" id="2837682">.</span><span class="ident" id="2837683">Pointer</span><span class="op" id="2837690">)</span><span class="op" id="2837691">(</span><span class="ident" id="2837692">addr</span><span class="op" id="2837696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2837700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837704">in</span>&nbsp;<span class="op" id="2837707">=</span>&nbsp;<span class="builtinfunc" id="2837709">append</span><span class="op" id="2837715">(</span><span class="ident" id="2837716">in</span><span class="op" id="2837718">,</span>&nbsp;<span class="ident" id="2837720">v</span><span class="op" id="2837721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837725">off</span>&nbsp;<span class="op" id="2837729">+=</span>&nbsp;<span class="ident" id="2837732">typ</span><span class="op" id="2837735">.</span><span class="ident" id="2837736">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2837742">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837746">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837776">out</span>&nbsp;<span class="op" id="2837780">:=</span>&nbsp;<span class="ident" id="2837783">f</span><span class="op" id="2837784">(</span><span class="ident" id="2837785">in</span><span class="op" id="2837787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2837790">if</span>&nbsp;<span class="builtinfunc" id="2837793">len</span><span class="op" id="2837796">(</span><span class="ident" id="2837797">out</span><span class="op" id="2837800">)</span>&nbsp;<span class="op" id="2837802">!=</span>&nbsp;<span class="builtinfunc" id="2837805">len</span><span class="op" id="2837808">(</span><span class="ident" id="2837809">ftyp</span><span class="op" id="2837813">.</span><span class="ident" id="2837814">out</span><span class="op" id="2837817">)</span>&nbsp;<span class="op" id="2837819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2837823">panic</span><span class="op" id="2837828">(</span><span class="string" id="2837829">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2837892">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2837895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2837899">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2837942">if</span>&nbsp;<span class="builtinfunc" id="2837945">len</span><span class="op" id="2837948">(</span><span class="ident" id="2837949">ftyp</span><span class="op" id="2837953">.</span><span class="ident" id="2837954">out</span><span class="op" id="2837957">)</span>&nbsp;<span class="op" id="2837959">&gt;</span>&nbsp;<span class="num" id="2837961">0</span>&nbsp;<span class="op" id="2837963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2837967">off</span>&nbsp;<span class="op" id="2837971">+=</span>&nbsp;<span class="op" id="2837974">-</span><span class="ident" id="2837975">off</span>&nbsp;<span class="op" id="2837979">&amp;</span>&nbsp;<span class="op" id="2837981">(</span><span class="ident" id="2837982">ptrSize</span>&nbsp;<span class="op" id="2837990">-</span>&nbsp;<span class="num" id="2837992">1</span><span class="op" id="2837993">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2837997">if</span>&nbsp;<span class="ident" id="2838000">runtime</span><span class="op" id="2838007">.</span><span class="ident" id="2838008">GOARCH</span>&nbsp;<span class="op" id="2838015">==</span>&nbsp;<span class="string" id="2838018">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2838029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838034">off</span>&nbsp;<span class="op" id="2838038">=</span>&nbsp;<span class="ident" id="2838040">align</span><span class="op" id="2838045">(</span><span class="ident" id="2838046">off</span><span class="op" id="2838049">,</span>&nbsp;<span class="num" id="2838051">8</span><span class="op" id="2838052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2838060">for</span>&nbsp;<span class="ident" id="2838064">i</span><span class="op" id="2838065">,</span>&nbsp;<span class="ident" id="2838067">arg</span>&nbsp;<span class="op" id="2838071">:=</span>&nbsp;<span class="keyword" id="2838074">range</span>&nbsp;<span class="ident" id="2838080">ftyp</span><span class="op" id="2838084">.</span><span class="ident" id="2838085">out</span>&nbsp;<span class="op" id="2838089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838094">typ</span>&nbsp;<span class="op" id="2838098">:=</span>&nbsp;<span class="ident" id="2838101">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838108">v</span>&nbsp;<span class="op" id="2838110">:=</span>&nbsp;<span class="ident" id="2838113">out</span><span class="op" id="2838116">[</span><span class="ident" id="2838117">i</span><span class="op" id="2838118">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2838123">if</span>&nbsp;<span class="ident" id="2838126">v</span><span class="op" id="2838127">.</span><span class="ident" id="2838128">typ</span>&nbsp;<span class="op" id="2838132">!=</span>&nbsp;<span class="ident" id="2838135">typ</span>&nbsp;<span class="op" id="2838139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2838145">panic</span><span class="op" id="2838150">(</span><span class="string" id="2838151">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2838198">+</span>&nbsp;<span class="ident" id="2838200">funcName</span><span class="op" id="2838208">(</span><span class="ident" id="2838209">f</span><span class="op" id="2838210">)</span>&nbsp;<span class="op" id="2838212">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2838219">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2838249">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838256">out</span><span class="op" id="2838259">[</span><span class="ident" id="2838260">i</span><span class="op" id="2838261">]</span><span class="op" id="2838262">.</span><span class="ident" id="2838263">typ</span><span class="op" id="2838266">.</span><span class="ident" id="2838267">String</span><span class="op" id="2838273">(</span><span class="op" id="2838274">)</span>&nbsp;<span class="op" id="2838276">+</span>&nbsp;<span class="string" id="2838278">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2838286">+</span>&nbsp;<span class="ident" id="2838288">typ</span><span class="op" id="2838291">.</span><span class="ident" id="2838292">String</span><span class="op" id="2838298">(</span><span class="op" id="2838299">)</span><span class="op" id="2838300">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2838310">if</span>&nbsp;<span class="ident" id="2838313">v</span><span class="op" id="2838314">.</span><span class="ident" id="2838315">flag</span><span class="op" id="2838319">&amp;</span><span class="ident" id="2838320">flagRO</span>&nbsp;<span class="op" id="2838327">!=</span>&nbsp;<span class="num" id="2838330">0</span>&nbsp;<span class="op" id="2838332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2838338">panic</span><span class="op" id="2838343">(</span><span class="string" id="2838344">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2838391">+</span>&nbsp;<span class="ident" id="2838393">funcName</span><span class="op" id="2838401">(</span><span class="ident" id="2838402">f</span><span class="op" id="2838403">)</span>&nbsp;<span class="op" id="2838405">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2838412">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2838460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838465">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838470">off</span>&nbsp;<span class="op" id="2838474">+=</span>&nbsp;<span class="op" id="2838477">-</span><span class="ident" id="2838478">off</span>&nbsp;<span class="op" id="2838482">&amp;</span>&nbsp;<span class="builtintype" id="2838484">uintptr</span><span class="op" id="2838491">(</span><span class="ident" id="2838492">typ</span><span class="op" id="2838495">.</span><span class="ident" id="2838496">align</span><span class="op" id="2838501">-</span><span class="num" id="2838502">1</span><span class="op" id="2838503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838508">addr</span>&nbsp;<span class="op" id="2838513">:=</span>&nbsp;<span class="ident" id="2838516">unsafe</span><span class="op" id="2838522">.</span><span class="ident" id="2838523">Pointer</span><span class="op" id="2838530">(</span><span class="builtintype" id="2838531">uintptr</span><span class="op" id="2838538">(</span><span class="ident" id="2838539">ptr</span><span class="op" id="2838542">)</span>&nbsp;<span class="op" id="2838544">+</span>&nbsp;<span class="ident" id="2838546">off</span><span class="op" id="2838549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2838554">if</span>&nbsp;<span class="ident" id="2838557">v</span><span class="op" id="2838558">.</span><span class="ident" id="2838559">flag</span><span class="op" id="2838563">&amp;</span><span class="ident" id="2838564">flagIndir</span>&nbsp;<span class="op" id="2838574">!=</span>&nbsp;<span class="num" id="2838577">0</span>&nbsp;<span class="op" id="2838579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838585">memmove</span><span class="op" id="2838592">(</span><span class="ident" id="2838593">addr</span><span class="op" id="2838597">,</span>&nbsp;<span class="ident" id="2838599">v</span><span class="op" id="2838600">.</span><span class="ident" id="2838601">ptr</span><span class="op" id="2838604">,</span>&nbsp;<span class="ident" id="2838606">typ</span><span class="op" id="2838609">.</span><span class="ident" id="2838610">size</span><span class="op" id="2838614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838619">}</span>&nbsp;<span class="keyword" id="2838621">else</span>&nbsp;<span class="op" id="2838626">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838632">*</span><span class="op" id="2838633">(</span><span class="op" id="2838634">*</span><span class="ident" id="2838635">unsafe</span><span class="op" id="2838641">.</span><span class="ident" id="2838642">Pointer</span><span class="op" id="2838649">)</span><span class="op" id="2838650">(</span><span class="ident" id="2838651">addr</span><span class="op" id="2838655">)</span>&nbsp;<span class="op" id="2838657">=</span>&nbsp;<span class="ident" id="2838659">v</span><span class="op" id="2838660">.</span><span class="ident" id="2838661">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2838673">off</span>&nbsp;<span class="op" id="2838677">+=</span>&nbsp;<span class="ident" id="2838680">typ</span><span class="op" id="2838683">.</span><span class="ident" id="2838684">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2838694">}</span><br>
<span class="lineno">515</span><span class="op" id="2838696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2838699">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2838756">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2838811">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2838870">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2838886">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2838956">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2839034">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2839090">func</span>&nbsp;<span class="ident" id="2839095">methodReceiver</span><span class="op" id="2839109">(</span><span class="ident" id="2839110">op</span>&nbsp;<span class="builtintype" id="2839113">string</span><span class="op" id="2839119">,</span>&nbsp;<span class="ident" id="2839121">v</span>&nbsp;<span class="ident" id="2839123">Value</span><span class="op" id="2839128">,</span>&nbsp;<span class="ident" id="2839130">methodIndex</span>&nbsp;<span class="builtintype" id="2839142">int</span><span class="op" id="2839145">)</span>&nbsp;<span class="op" id="2839147">(</span><span class="ident" id="2839148">rcvrtype</span><span class="op" id="2839156">,</span>&nbsp;<span class="ident" id="2839158">t</span>&nbsp;<span class="op" id="2839160">*</span><span class="ident" id="2839161">rtype</span><span class="op" id="2839166">,</span>&nbsp;<span class="ident" id="2839168">fn</span>&nbsp;<span class="ident" id="2839171">unsafe</span><span class="op" id="2839177">.</span><span class="ident" id="2839178">Pointer</span><span class="op" id="2839185">)</span>&nbsp;<span class="op" id="2839187">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839190">i</span>&nbsp;<span class="op" id="2839192">:=</span>&nbsp;<span class="ident" id="2839195">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839208">if</span>&nbsp;<span class="ident" id="2839211">v</span><span class="op" id="2839212">.</span><span class="ident" id="2839213">typ</span><span class="op" id="2839216">.</span><span class="ident" id="2839217">Kind</span><span class="op" id="2839221">(</span><span class="op" id="2839222">)</span>&nbsp;<span class="op" id="2839224">==</span>&nbsp;<span class="ident" id="2839227">Interface</span>&nbsp;<span class="op" id="2839237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839241">tt</span>&nbsp;<span class="op" id="2839244">:=</span>&nbsp;<span class="op" id="2839247">(</span><span class="op" id="2839248">*</span><span class="ident" id="2839249">interfaceType</span><span class="op" id="2839262">)</span><span class="op" id="2839263">(</span><span class="ident" id="2839264">unsafe</span><span class="op" id="2839270">.</span><span class="ident" id="2839271">Pointer</span><span class="op" id="2839278">(</span><span class="ident" id="2839279">v</span><span class="op" id="2839280">.</span><span class="ident" id="2839281">typ</span><span class="op" id="2839284">)</span><span class="op" id="2839285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839289">if</span>&nbsp;<span class="builtintype" id="2839292">uint</span><span class="op" id="2839296">(</span><span class="ident" id="2839297">i</span><span class="op" id="2839298">)</span>&nbsp;<span class="op" id="2839300">&gt;=</span>&nbsp;<span class="builtintype" id="2839303">uint</span><span class="op" id="2839307">(</span><span class="builtinfunc" id="2839308">len</span><span class="op" id="2839311">(</span><span class="ident" id="2839312">tt</span><span class="op" id="2839314">.</span><span class="ident" id="2839315">methods</span><span class="op" id="2839322">)</span><span class="op" id="2839323">)</span>&nbsp;<span class="op" id="2839325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2839330">panic</span><span class="op" id="2839335">(</span><span class="string" id="2839336">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2839383">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839391">m</span>&nbsp;<span class="op" id="2839393">:=</span>&nbsp;<span class="op" id="2839396">&amp;</span><span class="ident" id="2839397">tt</span><span class="op" id="2839399">.</span><span class="ident" id="2839400">methods</span><span class="op" id="2839407">[</span><span class="ident" id="2839408">i</span><span class="op" id="2839409">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839413">if</span>&nbsp;<span class="ident" id="2839416">m</span><span class="op" id="2839417">.</span><span class="ident" id="2839418">pkgPath</span>&nbsp;<span class="op" id="2839426">!=</span>&nbsp;<span class="builtintype" id="2839429">nil</span>&nbsp;<span class="op" id="2839433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2839438">panic</span><span class="op" id="2839443">(</span><span class="string" id="2839444">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2839456">+</span>&nbsp;<span class="ident" id="2839458">op</span>&nbsp;<span class="op" id="2839461">+</span>&nbsp;<span class="string" id="2839463">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2839486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839490">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839494">iface</span>&nbsp;<span class="op" id="2839500">:=</span>&nbsp;<span class="op" id="2839503">(</span><span class="op" id="2839504">*</span><span class="ident" id="2839505">nonEmptyInterface</span><span class="op" id="2839522">)</span><span class="op" id="2839523">(</span><span class="ident" id="2839524">v</span><span class="op" id="2839525">.</span><span class="ident" id="2839526">ptr</span><span class="op" id="2839529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839533">if</span>&nbsp;<span class="ident" id="2839536">iface</span><span class="op" id="2839541">.</span><span class="ident" id="2839542">itab</span>&nbsp;<span class="op" id="2839547">==</span>&nbsp;<span class="builtintype" id="2839550">nil</span>&nbsp;<span class="op" id="2839554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2839559">panic</span><span class="op" id="2839564">(</span><span class="string" id="2839565">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2839577">+</span>&nbsp;<span class="ident" id="2839579">op</span>&nbsp;<span class="op" id="2839582">+</span>&nbsp;<span class="string" id="2839584">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2839619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839627">rcvrtype</span>&nbsp;<span class="op" id="2839636">=</span>&nbsp;<span class="ident" id="2839638">iface</span><span class="op" id="2839643">.</span><span class="ident" id="2839644">itab</span><span class="op" id="2839648">.</span><span class="ident" id="2839649">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839655">fn</span>&nbsp;<span class="op" id="2839658">=</span>&nbsp;<span class="ident" id="2839660">unsafe</span><span class="op" id="2839666">.</span><span class="ident" id="2839667">Pointer</span><span class="op" id="2839674">(</span><span class="op" id="2839675">&amp;</span><span class="ident" id="2839676">iface</span><span class="op" id="2839681">.</span><span class="ident" id="2839682">itab</span><span class="op" id="2839686">.</span><span class="ident" id="2839687">fun</span><span class="op" id="2839690">[</span><span class="ident" id="2839691">i</span><span class="op" id="2839692">]</span><span class="op" id="2839693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839697">t</span>&nbsp;<span class="op" id="2839699">=</span>&nbsp;<span class="ident" id="2839701">m</span><span class="op" id="2839702">.</span><span class="ident" id="2839703">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839708">}</span>&nbsp;<span class="keyword" id="2839710">else</span>&nbsp;<span class="op" id="2839715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839719">rcvrtype</span>&nbsp;<span class="op" id="2839728">=</span>&nbsp;<span class="ident" id="2839730">v</span><span class="op" id="2839731">.</span><span class="ident" id="2839732">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839738">ut</span>&nbsp;<span class="op" id="2839741">:=</span>&nbsp;<span class="ident" id="2839744">v</span><span class="op" id="2839745">.</span><span class="ident" id="2839746">typ</span><span class="op" id="2839749">.</span><span class="ident" id="2839750">uncommon</span><span class="op" id="2839758">(</span><span class="op" id="2839759">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839763">if</span>&nbsp;<span class="ident" id="2839766">ut</span>&nbsp;<span class="op" id="2839769">==</span>&nbsp;<span class="builtintype" id="2839772">nil</span>&nbsp;<span class="op" id="2839776">||</span>&nbsp;<span class="builtintype" id="2839779">uint</span><span class="op" id="2839783">(</span><span class="ident" id="2839784">i</span><span class="op" id="2839785">)</span>&nbsp;<span class="op" id="2839787">&gt;=</span>&nbsp;<span class="builtintype" id="2839790">uint</span><span class="op" id="2839794">(</span><span class="builtinfunc" id="2839795">len</span><span class="op" id="2839798">(</span><span class="ident" id="2839799">ut</span><span class="op" id="2839801">.</span><span class="ident" id="2839802">methods</span><span class="op" id="2839809">)</span><span class="op" id="2839810">)</span>&nbsp;<span class="op" id="2839812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2839817">panic</span><span class="op" id="2839822">(</span><span class="string" id="2839823">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2839870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839878">m</span>&nbsp;<span class="op" id="2839880">:=</span>&nbsp;<span class="op" id="2839883">&amp;</span><span class="ident" id="2839884">ut</span><span class="op" id="2839886">.</span><span class="ident" id="2839887">methods</span><span class="op" id="2839894">[</span><span class="ident" id="2839895">i</span><span class="op" id="2839896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2839900">if</span>&nbsp;<span class="ident" id="2839903">m</span><span class="op" id="2839904">.</span><span class="ident" id="2839905">pkgPath</span>&nbsp;<span class="op" id="2839913">!=</span>&nbsp;<span class="builtintype" id="2839916">nil</span>&nbsp;<span class="op" id="2839920">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2839925">panic</span><span class="op" id="2839930">(</span><span class="string" id="2839931">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2839943">+</span>&nbsp;<span class="ident" id="2839945">op</span>&nbsp;<span class="op" id="2839948">+</span>&nbsp;<span class="string" id="2839950">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2839973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2839977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2839981">fn</span>&nbsp;<span class="op" id="2839984">=</span>&nbsp;<span class="ident" id="2839986">unsafe</span><span class="op" id="2839992">.</span><span class="ident" id="2839993">Pointer</span><span class="op" id="2840000">(</span><span class="op" id="2840001">&amp;</span><span class="ident" id="2840002">m</span><span class="op" id="2840003">.</span><span class="ident" id="2840004">ifn</span><span class="op" id="2840007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2840011">t</span>&nbsp;<span class="op" id="2840013">=</span>&nbsp;<span class="ident" id="2840015">m</span><span class="op" id="2840016">.</span><span class="ident" id="2840017">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840023">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2840026">return</span><br>
<span class="lineno"></span><span class="op" id="2840033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2840036">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2840101">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2840160">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2840215">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2840278">func</span>&nbsp;<span class="ident" id="2840283">storeRcvr</span><span class="op" id="2840292">(</span><span class="ident" id="2840293">v</span>&nbsp;<span class="ident" id="2840295">Value</span><span class="op" id="2840300">,</span>&nbsp;<span class="ident" id="2840302">p</span>&nbsp;<span class="ident" id="2840304">unsafe</span><span class="op" id="2840310">.</span><span class="ident" id="2840311">Pointer</span><span class="op" id="2840318">)</span>&nbsp;<span class="op" id="2840320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2840323">t</span>&nbsp;<span class="op" id="2840325">:=</span>&nbsp;<span class="ident" id="2840328">v</span><span class="op" id="2840329">.</span><span class="ident" id="2840330">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2840335">if</span>&nbsp;<span class="ident" id="2840338">t</span><span class="op" id="2840339">.</span><span class="ident" id="2840340">Kind</span><span class="op" id="2840344">(</span><span class="op" id="2840345">)</span>&nbsp;<span class="op" id="2840347">==</span>&nbsp;<span class="ident" id="2840350">Interface</span>&nbsp;<span class="op" id="2840360">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2840364">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2840419">iface</span>&nbsp;<span class="op" id="2840425">:=</span>&nbsp;<span class="op" id="2840428">(</span><span class="op" id="2840429">*</span><span class="ident" id="2840430">nonEmptyInterface</span><span class="op" id="2840447">)</span><span class="op" id="2840448">(</span><span class="ident" id="2840449">v</span><span class="op" id="2840450">.</span><span class="ident" id="2840451">ptr</span><span class="op" id="2840454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840458">*</span><span class="op" id="2840459">(</span><span class="op" id="2840460">*</span><span class="ident" id="2840461">unsafe</span><span class="op" id="2840467">.</span><span class="ident" id="2840468">Pointer</span><span class="op" id="2840475">)</span><span class="op" id="2840476">(</span><span class="ident" id="2840477">p</span><span class="op" id="2840478">)</span>&nbsp;<span class="op" id="2840480">=</span>&nbsp;<span class="ident" id="2840482">unsafe</span><span class="op" id="2840488">.</span><span class="ident" id="2840489">Pointer</span><span class="op" id="2840496">(</span><span class="ident" id="2840497">iface</span><span class="op" id="2840502">.</span><span class="ident" id="2840503">word</span><span class="op" id="2840507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840510">}</span>&nbsp;<span class="keyword" id="2840512">else</span>&nbsp;<span class="keyword" id="2840517">if</span>&nbsp;<span class="ident" id="2840520">v</span><span class="op" id="2840521">.</span><span class="ident" id="2840522">flag</span><span class="op" id="2840526">&amp;</span><span class="ident" id="2840527">flagIndir</span>&nbsp;<span class="op" id="2840537">!=</span>&nbsp;<span class="num" id="2840540">0</span>&nbsp;<span class="op" id="2840542">&amp;&amp;</span>&nbsp;<span class="op" id="2840545">!</span><span class="ident" id="2840546">ifaceIndir</span><span class="op" id="2840556">(</span><span class="ident" id="2840557">t</span><span class="op" id="2840558">)</span>&nbsp;<span class="op" id="2840560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840564">*</span><span class="op" id="2840565">(</span><span class="op" id="2840566">*</span><span class="ident" id="2840567">unsafe</span><span class="op" id="2840573">.</span><span class="ident" id="2840574">Pointer</span><span class="op" id="2840581">)</span><span class="op" id="2840582">(</span><span class="ident" id="2840583">p</span><span class="op" id="2840584">)</span>&nbsp;<span class="op" id="2840586">=</span>&nbsp;<span class="op" id="2840588">*</span><span class="op" id="2840589">(</span><span class="op" id="2840590">*</span><span class="ident" id="2840591">unsafe</span><span class="op" id="2840597">.</span><span class="ident" id="2840598">Pointer</span><span class="op" id="2840605">)</span><span class="op" id="2840606">(</span><span class="ident" id="2840607">v</span><span class="op" id="2840608">.</span><span class="ident" id="2840609">ptr</span><span class="op" id="2840612">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840615">}</span>&nbsp;<span class="keyword" id="2840617">else</span>&nbsp;<span class="op" id="2840622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840626">*</span><span class="op" id="2840627">(</span><span class="op" id="2840628">*</span><span class="ident" id="2840629">unsafe</span><span class="op" id="2840635">.</span><span class="ident" id="2840636">Pointer</span><span class="op" id="2840643">)</span><span class="op" id="2840644">(</span><span class="ident" id="2840645">p</span><span class="op" id="2840646">)</span>&nbsp;<span class="op" id="2840648">=</span>&nbsp;<span class="ident" id="2840650">v</span><span class="op" id="2840651">.</span><span class="ident" id="2840652">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2840657">}</span><br>
<span class="lineno"></span><span class="op" id="2840659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2840662">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2840727">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2840756">func</span>&nbsp;<span class="ident" id="2840761">align</span><span class="op" id="2840766">(</span><span class="ident" id="2840767">x</span><span class="op" id="2840768">,</span>&nbsp;<span class="ident" id="2840770">n</span>&nbsp;<span class="builtintype" id="2840772">uintptr</span><span class="op" id="2840779">)</span>&nbsp;<span class="builtintype" id="2840781">uintptr</span>&nbsp;<span class="op" id="2840789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2840792">return</span>&nbsp;<span class="op" id="2840799">(</span><span class="ident" id="2840800">x</span>&nbsp;<span class="op" id="2840802">+</span>&nbsp;<span class="ident" id="2840804">n</span>&nbsp;<span class="op" id="2840806">-</span>&nbsp;<span class="num" id="2840808">1</span><span class="op" id="2840809">)</span>&nbsp;<span class="op" id="2840811">&amp;^</span>&nbsp;<span class="op" id="2840814">(</span><span class="ident" id="2840815">n</span>&nbsp;<span class="op" id="2840817">-</span>&nbsp;<span class="num" id="2840819">1</span><span class="op" id="2840820">)</span><br>
<span class="lineno"></span><span class="op" id="2840822">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2840825">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2840894">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2840951">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2841024">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2841088">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2841141">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2841222">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2841296">//</span><br>
<span class="lineno"></span><span class="comment" id="2841299">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2841375">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2841447">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2841518">func</span>&nbsp;<span class="ident" id="2841523">callMethod</span><span class="op" id="2841533">(</span><span class="ident" id="2841534">ctxt</span>&nbsp;<span class="op" id="2841539">*</span><span class="ident" id="2841540">methodValue</span><span class="op" id="2841551">,</span>&nbsp;<span class="ident" id="2841553">frame</span>&nbsp;<span class="ident" id="2841559">unsafe</span><span class="op" id="2841565">.</span><span class="ident" id="2841566">Pointer</span><span class="op" id="2841573">)</span>&nbsp;<span class="op" id="2841575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841578">rcvr</span>&nbsp;<span class="op" id="2841583">:=</span>&nbsp;<span class="ident" id="2841586">ctxt</span><span class="op" id="2841590">.</span><span class="ident" id="2841591">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841597">rcvrtype</span><span class="op" id="2841605">,</span>&nbsp;<span class="ident" id="2841607">t</span><span class="op" id="2841608">,</span>&nbsp;<span class="ident" id="2841610">fn</span>&nbsp;<span class="op" id="2841613">:=</span>&nbsp;<span class="ident" id="2841616">methodReceiver</span><span class="op" id="2841630">(</span><span class="string" id="2841631">&#34;call&#34;</span><span class="op" id="2841637">,</span>&nbsp;<span class="ident" id="2841639">rcvr</span><span class="op" id="2841643">,</span>&nbsp;<span class="ident" id="2841645">ctxt</span><span class="op" id="2841649">.</span><span class="ident" id="2841650">method</span><span class="op" id="2841656">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841659">frametype</span><span class="op" id="2841668">,</span>&nbsp;<span class="ident" id="2841670">argSize</span><span class="op" id="2841677">,</span>&nbsp;<span class="ident" id="2841679">retOffset</span><span class="op" id="2841688">,</span>&nbsp;<span class="ident" id="2841690">_</span>&nbsp;<span class="op" id="2841692">:=</span>&nbsp;<span class="ident" id="2841695">funcLayout</span><span class="op" id="2841705">(</span><span class="ident" id="2841706">t</span><span class="op" id="2841707">,</span>&nbsp;<span class="ident" id="2841709">rcvrtype</span><span class="op" id="2841717">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2841721">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841796">args</span>&nbsp;<span class="op" id="2841801">:=</span>&nbsp;<span class="ident" id="2841804">unsafe_New</span><span class="op" id="2841814">(</span><span class="ident" id="2841815">frametype</span><span class="op" id="2841824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2841828">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841867">storeRcvr</span><span class="op" id="2841876">(</span><span class="ident" id="2841877">rcvr</span><span class="op" id="2841881">,</span>&nbsp;<span class="ident" id="2841883">args</span><span class="op" id="2841887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841890">memmove</span><span class="op" id="2841897">(</span><span class="ident" id="2841898">unsafe</span><span class="op" id="2841904">.</span><span class="ident" id="2841905">Pointer</span><span class="op" id="2841912">(</span><span class="builtintype" id="2841913">uintptr</span><span class="op" id="2841920">(</span><span class="ident" id="2841921">args</span><span class="op" id="2841925">)</span><span class="op" id="2841926">+</span><span class="ident" id="2841927">ptrSize</span><span class="op" id="2841934">)</span><span class="op" id="2841935">,</span>&nbsp;<span class="ident" id="2841937">frame</span><span class="op" id="2841942">,</span>&nbsp;<span class="ident" id="2841944">argSize</span><span class="op" id="2841951">-</span><span class="ident" id="2841952">ptrSize</span><span class="op" id="2841959">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2841963">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2841973">call</span><span class="op" id="2841977">(</span><span class="ident" id="2841978">fn</span><span class="op" id="2841980">,</span>&nbsp;<span class="ident" id="2841982">args</span><span class="op" id="2841986">,</span>&nbsp;<span class="builtintype" id="2841988">uint32</span><span class="op" id="2841994">(</span><span class="ident" id="2841995">frametype</span><span class="op" id="2842004">.</span><span class="ident" id="2842005">size</span><span class="op" id="2842009">)</span><span class="op" id="2842010">,</span>&nbsp;<span class="builtintype" id="2842012">uint32</span><span class="op" id="2842018">(</span><span class="ident" id="2842019">retOffset</span><span class="op" id="2842028">)</span><span class="op" id="2842029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2842033">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2842101">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2842173">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2842244">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2842260">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842320">callerRetOffset</span>&nbsp;<span class="op" id="2842336">:=</span>&nbsp;<span class="ident" id="2842339">retOffset</span>&nbsp;<span class="op" id="2842349">-</span>&nbsp;<span class="ident" id="2842351">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842360">if</span>&nbsp;<span class="ident" id="2842363">runtime</span><span class="op" id="2842370">.</span><span class="ident" id="2842371">GOARCH</span>&nbsp;<span class="op" id="2842378">==</span>&nbsp;<span class="string" id="2842381">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2842392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842396">callerRetOffset</span>&nbsp;<span class="op" id="2842412">=</span>&nbsp;<span class="ident" id="2842414">align</span><span class="op" id="2842419">(</span><span class="ident" id="2842420">argSize</span><span class="op" id="2842427">-</span><span class="ident" id="2842428">ptrSize</span><span class="op" id="2842435">,</span>&nbsp;<span class="num" id="2842437">8</span><span class="op" id="2842438">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2842441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842444">memmove</span><span class="op" id="2842451">(</span><span class="ident" id="2842452">unsafe</span><span class="op" id="2842458">.</span><span class="ident" id="2842459">Pointer</span><span class="op" id="2842466">(</span><span class="builtintype" id="2842467">uintptr</span><span class="op" id="2842474">(</span><span class="ident" id="2842475">frame</span><span class="op" id="2842480">)</span><span class="op" id="2842481">+</span><span class="ident" id="2842482">callerRetOffset</span><span class="op" id="2842497">)</span><span class="op" id="2842498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842502">unsafe</span><span class="op" id="2842508">.</span><span class="ident" id="2842509">Pointer</span><span class="op" id="2842516">(</span><span class="builtintype" id="2842517">uintptr</span><span class="op" id="2842524">(</span><span class="ident" id="2842525">args</span><span class="op" id="2842529">)</span><span class="op" id="2842530">+</span><span class="ident" id="2842531">retOffset</span><span class="op" id="2842540">)</span><span class="op" id="2842541">,</span>&nbsp;<span class="ident" id="2842543">frametype</span><span class="op" id="2842552">.</span><span class="ident" id="2842553">size</span><span class="op" id="2842557">-</span><span class="ident" id="2842558">retOffset</span><span class="op" id="2842567">)</span><br>
<span class="lineno"></span><span class="op" id="2842569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2842572">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2842634">func</span>&nbsp;<span class="ident" id="2842639">funcName</span><span class="op" id="2842647">(</span><span class="ident" id="2842648">f</span>&nbsp;<span class="keyword" id="2842650">func</span><span class="op" id="2842654">(</span><span class="op" id="2842655">[</span><span class="op" id="2842656">]</span><span class="ident" id="2842657">Value</span><span class="op" id="2842662">)</span>&nbsp;<span class="op" id="2842664">[</span><span class="op" id="2842665">]</span><span class="ident" id="2842666">Value</span><span class="op" id="2842671">)</span>&nbsp;<span class="builtintype" id="2842673">string</span>&nbsp;<span class="op" id="2842680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842683">pc</span>&nbsp;<span class="op" id="2842686">:=</span>&nbsp;<span class="op" id="2842689">*</span><span class="op" id="2842690">(</span><span class="op" id="2842691">*</span><span class="builtintype" id="2842692">uintptr</span><span class="op" id="2842699">)</span><span class="op" id="2842700">(</span><span class="ident" id="2842701">unsafe</span><span class="op" id="2842707">.</span><span class="ident" id="2842708">Pointer</span><span class="op" id="2842715">(</span><span class="op" id="2842716">&amp;</span><span class="ident" id="2842717">f</span><span class="op" id="2842718">)</span><span class="op" id="2842719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842722">rf</span>&nbsp;<span class="op" id="2842725">:=</span>&nbsp;<span class="ident" id="2842728">runtime</span><span class="op" id="2842735">.</span><span class="ident" id="2842736">FuncForPC</span><span class="op" id="2842745">(</span><span class="ident" id="2842746">pc</span><span class="op" id="2842748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842751">if</span>&nbsp;<span class="ident" id="2842754">rf</span>&nbsp;<span class="op" id="2842757">!=</span>&nbsp;<span class="builtintype" id="2842760">nil</span>&nbsp;<span class="op" id="2842764">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842768">return</span>&nbsp;<span class="ident" id="2842775">rf</span><span class="op" id="2842777">.</span><span class="ident" id="2842778">Name</span><span class="op" id="2842782">(</span><span class="op" id="2842783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2842786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842789">return</span>&nbsp;<span class="string" id="2842796">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2842806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2842809">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2842838">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2842893">func</span>&nbsp;<span class="op" id="2842898">(</span><span class="ident" id="2842899">v</span>&nbsp;<span class="ident" id="2842901">Value</span><span class="op" id="2842906">)</span>&nbsp;<span class="ident" id="2842908">Cap</span><span class="op" id="2842911">(</span><span class="op" id="2842912">)</span>&nbsp;<span class="builtintype" id="2842914">int</span>&nbsp;<span class="op" id="2842918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2842921">k</span>&nbsp;<span class="op" id="2842923">:=</span>&nbsp;<span class="ident" id="2842926">v</span><span class="op" id="2842927">.</span><span class="ident" id="2842928">kind</span><span class="op" id="2842932">(</span><span class="op" id="2842933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842936">switch</span>&nbsp;<span class="ident" id="2842943">k</span>&nbsp;<span class="op" id="2842945">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842948">case</span>&nbsp;<span class="ident" id="2842953">Array</span><span class="op" id="2842958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842962">return</span>&nbsp;<span class="ident" id="2842969">v</span><span class="op" id="2842970">.</span><span class="ident" id="2842971">typ</span><span class="op" id="2842974">.</span><span class="ident" id="2842975">Len</span><span class="op" id="2842978">(</span><span class="op" id="2842979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842982">case</span>&nbsp;<span class="ident" id="2842987">Chan</span><span class="op" id="2842991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2842995">return</span>&nbsp;<span class="builtintype" id="2843002">int</span><span class="op" id="2843005">(</span><span class="ident" id="2843006">chancap</span><span class="op" id="2843013">(</span><span class="ident" id="2843014">v</span><span class="op" id="2843015">.</span><span class="ident" id="2843016">pointer</span><span class="op" id="2843023">(</span><span class="op" id="2843024">)</span><span class="op" id="2843025">)</span><span class="op" id="2843026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843029">case</span>&nbsp;<span class="ident" id="2843034">Slice</span><span class="op" id="2843039">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2843043">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843102">return</span>&nbsp;<span class="op" id="2843109">(</span><span class="op" id="2843110">*</span><span class="ident" id="2843111">sliceHeader</span><span class="op" id="2843122">)</span><span class="op" id="2843123">(</span><span class="ident" id="2843124">v</span><span class="op" id="2843125">.</span><span class="ident" id="2843126">ptr</span><span class="op" id="2843129">)</span><span class="op" id="2843130">.</span><span class="ident" id="2843131">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2843136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2843139">panic</span><span class="op" id="2843144">(</span><span class="op" id="2843145">&amp;</span><span class="ident" id="2843146">ValueError</span><span class="op" id="2843156">{</span><span class="string" id="2843157">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2843176">,</span>&nbsp;<span class="ident" id="2843178">v</span><span class="op" id="2843179">.</span><span class="ident" id="2843180">kind</span><span class="op" id="2843184">(</span><span class="op" id="2843185">)</span><span class="op" id="2843186">}</span><span class="op" id="2843187">)</span><br>
<span class="lineno"></span><span class="op" id="2843189">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2843192">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2843223">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2843261">func</span>&nbsp;<span class="op" id="2843266">(</span><span class="ident" id="2843267">v</span>&nbsp;<span class="ident" id="2843269">Value</span><span class="op" id="2843274">)</span>&nbsp;<span class="ident" id="2843276">Close</span><span class="op" id="2843281">(</span><span class="op" id="2843282">)</span>&nbsp;<span class="op" id="2843284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2843287">v</span><span class="op" id="2843288">.</span><span class="ident" id="2843289">mustBe</span><span class="op" id="2843295">(</span><span class="ident" id="2843296">Chan</span><span class="op" id="2843300">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2843303">v</span><span class="op" id="2843304">.</span><span class="ident" id="2843305">mustBeExported</span><span class="op" id="2843319">(</span><span class="op" id="2843320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2843323">chanclose</span><span class="op" id="2843332">(</span><span class="ident" id="2843333">v</span><span class="op" id="2843334">.</span><span class="ident" id="2843335">pointer</span><span class="op" id="2843342">(</span><span class="op" id="2843343">)</span><span class="op" id="2843344">)</span><br>
<span class="lineno"></span><span class="op" id="2843346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2843349">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2843407">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2843463">func</span>&nbsp;<span class="op" id="2843468">(</span><span class="ident" id="2843469">v</span>&nbsp;<span class="ident" id="2843471">Value</span><span class="op" id="2843476">)</span>&nbsp;<span class="ident" id="2843478">Complex</span><span class="op" id="2843485">(</span><span class="op" id="2843486">)</span>&nbsp;<span class="builtintype" id="2843488">complex128</span>&nbsp;<span class="op" id="2843499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2843502">k</span>&nbsp;<span class="op" id="2843504">:=</span>&nbsp;<span class="ident" id="2843507">v</span><span class="op" id="2843508">.</span><span class="ident" id="2843509">kind</span><span class="op" id="2843513">(</span><span class="op" id="2843514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843517">switch</span>&nbsp;<span class="ident" id="2843524">k</span>&nbsp;<span class="op" id="2843526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843529">case</span>&nbsp;<span class="ident" id="2843534">Complex64</span><span class="op" id="2843543">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843547">return</span>&nbsp;<span class="builtintype" id="2843554">complex128</span><span class="op" id="2843564">(</span><span class="op" id="2843565">*</span><span class="op" id="2843566">(</span><span class="op" id="2843567">*</span><span class="builtintype" id="2843568">complex64</span><span class="op" id="2843577">)</span><span class="op" id="2843578">(</span><span class="ident" id="2843579">v</span><span class="op" id="2843580">.</span><span class="ident" id="2843581">ptr</span><span class="op" id="2843584">)</span><span class="op" id="2843585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843588">case</span>&nbsp;<span class="ident" id="2843593">Complex128</span><span class="op" id="2843603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843607">return</span>&nbsp;<span class="op" id="2843614">*</span><span class="op" id="2843615">(</span><span class="op" id="2843616">*</span><span class="builtintype" id="2843617">complex128</span><span class="op" id="2843627">)</span><span class="op" id="2843628">(</span><span class="ident" id="2843629">v</span><span class="op" id="2843630">.</span><span class="ident" id="2843631">ptr</span><span class="op" id="2843634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2843637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2843640">panic</span><span class="op" id="2843645">(</span><span class="op" id="2843646">&amp;</span><span class="ident" id="2843647">ValueError</span><span class="op" id="2843657">{</span><span class="string" id="2843658">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2843681">,</span>&nbsp;<span class="ident" id="2843683">v</span><span class="op" id="2843684">.</span><span class="ident" id="2843685">kind</span><span class="op" id="2843689">(</span><span class="op" id="2843690">)</span><span class="op" id="2843691">}</span><span class="op" id="2843692">)</span><br>
<span class="lineno">665</span><span class="op" id="2843694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2843697">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2843753">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2843789">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2843839">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2843881">func</span>&nbsp;<span class="op" id="2843886">(</span><span class="ident" id="2843887">v</span>&nbsp;<span class="ident" id="2843889">Value</span><span class="op" id="2843894">)</span>&nbsp;<span class="ident" id="2843896">Elem</span><span class="op" id="2843900">(</span><span class="op" id="2843901">)</span>&nbsp;<span class="ident" id="2843903">Value</span>&nbsp;<span class="op" id="2843909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2843912">k</span>&nbsp;<span class="op" id="2843914">:=</span>&nbsp;<span class="ident" id="2843917">v</span><span class="op" id="2843918">.</span><span class="ident" id="2843919">kind</span><span class="op" id="2843923">(</span><span class="op" id="2843924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843927">switch</span>&nbsp;<span class="ident" id="2843934">k</span>&nbsp;<span class="op" id="2843936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843939">case</span>&nbsp;<span class="ident" id="2843944">Interface</span><span class="op" id="2843953">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843957">var</span>&nbsp;<span class="ident" id="2843961">eface</span>&nbsp;<span class="keyword" id="2843967">interface</span><span class="op" id="2843976">{</span><span class="op" id="2843977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2843981">if</span>&nbsp;<span class="ident" id="2843984">v</span><span class="op" id="2843985">.</span><span class="ident" id="2843986">typ</span><span class="op" id="2843989">.</span><span class="ident" id="2843990">NumMethod</span><span class="op" id="2843999">(</span><span class="op" id="2844000">)</span>&nbsp;<span class="op" id="2844002">==</span>&nbsp;<span class="num" id="2844005">0</span>&nbsp;<span class="op" id="2844007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844012">eface</span>&nbsp;<span class="op" id="2844018">=</span>&nbsp;<span class="op" id="2844020">*</span><span class="op" id="2844021">(</span><span class="op" id="2844022">*</span><span class="keyword" id="2844023">interface</span><span class="op" id="2844032">{</span><span class="op" id="2844033">}</span><span class="op" id="2844034">)</span><span class="op" id="2844035">(</span><span class="ident" id="2844036">v</span><span class="op" id="2844037">.</span><span class="ident" id="2844038">ptr</span><span class="op" id="2844041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844045">}</span>&nbsp;<span class="keyword" id="2844047">else</span>&nbsp;<span class="op" id="2844052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844057">eface</span>&nbsp;<span class="op" id="2844063">=</span>&nbsp;<span class="op" id="2844065">(</span><span class="keyword" id="2844066">interface</span><span class="op" id="2844075">{</span><span class="op" id="2844076">}</span><span class="op" id="2844077">)</span><span class="op" id="2844078">(</span><span class="op" id="2844079">*</span><span class="op" id="2844080">(</span><span class="op" id="2844081">*</span><span class="keyword" id="2844082">interface</span>&nbsp;<span class="op" id="2844092">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844098">M</span><span class="op" id="2844099">(</span><span class="op" id="2844100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844105">}</span><span class="op" id="2844106">)</span><span class="op" id="2844107">(</span><span class="ident" id="2844108">v</span><span class="op" id="2844109">.</span><span class="ident" id="2844110">ptr</span><span class="op" id="2844113">)</span><span class="op" id="2844114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844122">x</span>&nbsp;<span class="op" id="2844124">:=</span>&nbsp;<span class="ident" id="2844127">unpackEface</span><span class="op" id="2844138">(</span><span class="ident" id="2844139">eface</span><span class="op" id="2844144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844148">if</span>&nbsp;<span class="ident" id="2844151">x</span><span class="op" id="2844152">.</span><span class="ident" id="2844153">flag</span>&nbsp;<span class="op" id="2844158">!=</span>&nbsp;<span class="num" id="2844161">0</span>&nbsp;<span class="op" id="2844163">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844168">x</span><span class="op" id="2844169">.</span><span class="ident" id="2844170">flag</span>&nbsp;<span class="op" id="2844175">|=</span>&nbsp;<span class="ident" id="2844178">v</span><span class="op" id="2844179">.</span><span class="ident" id="2844180">flag</span>&nbsp;<span class="op" id="2844185">&amp;</span>&nbsp;<span class="ident" id="2844187">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844200">return</span>&nbsp;<span class="ident" id="2844207">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844210">case</span>&nbsp;<span class="ident" id="2844215">Ptr</span><span class="op" id="2844218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844222">ptr</span>&nbsp;<span class="op" id="2844226">:=</span>&nbsp;<span class="ident" id="2844229">v</span><span class="op" id="2844230">.</span><span class="ident" id="2844231">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844237">if</span>&nbsp;<span class="ident" id="2844240">v</span><span class="op" id="2844241">.</span><span class="ident" id="2844242">flag</span><span class="op" id="2844246">&amp;</span><span class="ident" id="2844247">flagIndir</span>&nbsp;<span class="op" id="2844257">!=</span>&nbsp;<span class="num" id="2844260">0</span>&nbsp;<span class="op" id="2844262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844267">ptr</span>&nbsp;<span class="op" id="2844271">=</span>&nbsp;<span class="op" id="2844273">*</span><span class="op" id="2844274">(</span><span class="op" id="2844275">*</span><span class="ident" id="2844276">unsafe</span><span class="op" id="2844282">.</span><span class="ident" id="2844283">Pointer</span><span class="op" id="2844290">)</span><span class="op" id="2844291">(</span><span class="ident" id="2844292">ptr</span><span class="op" id="2844295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2844303">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844351">if</span>&nbsp;<span class="ident" id="2844354">ptr</span>&nbsp;<span class="op" id="2844358">==</span>&nbsp;<span class="builtintype" id="2844361">nil</span>&nbsp;<span class="op" id="2844365">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844370">return</span>&nbsp;<span class="ident" id="2844377">Value</span><span class="op" id="2844382">{</span><span class="op" id="2844383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844391">tt</span>&nbsp;<span class="op" id="2844394">:=</span>&nbsp;<span class="op" id="2844397">(</span><span class="op" id="2844398">*</span><span class="ident" id="2844399">ptrType</span><span class="op" id="2844406">)</span><span class="op" id="2844407">(</span><span class="ident" id="2844408">unsafe</span><span class="op" id="2844414">.</span><span class="ident" id="2844415">Pointer</span><span class="op" id="2844422">(</span><span class="ident" id="2844423">v</span><span class="op" id="2844424">.</span><span class="ident" id="2844425">typ</span><span class="op" id="2844428">)</span><span class="op" id="2844429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844433">typ</span>&nbsp;<span class="op" id="2844437">:=</span>&nbsp;<span class="ident" id="2844440">tt</span><span class="op" id="2844442">.</span><span class="ident" id="2844443">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844450">fl</span>&nbsp;<span class="op" id="2844453">:=</span>&nbsp;<span class="ident" id="2844456">v</span><span class="op" id="2844457">.</span><span class="ident" id="2844458">flag</span><span class="op" id="2844462">&amp;</span><span class="ident" id="2844463">flagRO</span>&nbsp;<span class="op" id="2844470">|</span>&nbsp;<span class="ident" id="2844472">flagIndir</span>&nbsp;<span class="op" id="2844482">|</span>&nbsp;<span class="ident" id="2844484">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844495">fl</span>&nbsp;<span class="op" id="2844498">|=</span>&nbsp;<span class="ident" id="2844501">flag</span><span class="op" id="2844505">(</span><span class="ident" id="2844506">typ</span><span class="op" id="2844509">.</span><span class="ident" id="2844510">Kind</span><span class="op" id="2844514">(</span><span class="op" id="2844515">)</span><span class="op" id="2844516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844520">return</span>&nbsp;<span class="ident" id="2844527">Value</span><span class="op" id="2844532">{</span><span class="ident" id="2844533">typ</span><span class="op" id="2844536">,</span>&nbsp;<span class="ident" id="2844538">ptr</span><span class="op" id="2844541">,</span>&nbsp;<span class="ident" id="2844543">fl</span><span class="op" id="2844545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2844551">panic</span><span class="op" id="2844556">(</span><span class="op" id="2844557">&amp;</span><span class="ident" id="2844558">ValueError</span><span class="op" id="2844568">{</span><span class="string" id="2844569">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2844589">,</span>&nbsp;<span class="ident" id="2844591">v</span><span class="op" id="2844592">.</span><span class="ident" id="2844593">kind</span><span class="op" id="2844597">(</span><span class="op" id="2844598">)</span><span class="op" id="2844599">}</span><span class="op" id="2844600">)</span><br>
<span class="lineno"></span><span class="op" id="2844602">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2844605">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2844654">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2844715">func</span>&nbsp;<span class="op" id="2844720">(</span><span class="ident" id="2844721">v</span>&nbsp;<span class="ident" id="2844723">Value</span><span class="op" id="2844728">)</span>&nbsp;<span class="ident" id="2844730">Field</span><span class="op" id="2844735">(</span><span class="ident" id="2844736">i</span>&nbsp;<span class="builtintype" id="2844738">int</span><span class="op" id="2844741">)</span>&nbsp;<span class="ident" id="2844743">Value</span>&nbsp;<span class="op" id="2844749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844752">if</span>&nbsp;<span class="ident" id="2844755">v</span><span class="op" id="2844756">.</span><span class="ident" id="2844757">kind</span><span class="op" id="2844761">(</span><span class="op" id="2844762">)</span>&nbsp;<span class="op" id="2844764">!=</span>&nbsp;<span class="ident" id="2844767">Struct</span>&nbsp;<span class="op" id="2844774">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2844778">panic</span><span class="op" id="2844783">(</span><span class="op" id="2844784">&amp;</span><span class="ident" id="2844785">ValueError</span><span class="op" id="2844795">{</span><span class="string" id="2844796">&#34;reflect.Value.Field&#34;</span><span class="op" id="2844817">,</span>&nbsp;<span class="ident" id="2844819">v</span><span class="op" id="2844820">.</span><span class="ident" id="2844821">kind</span><span class="op" id="2844825">(</span><span class="op" id="2844826">)</span><span class="op" id="2844827">}</span><span class="op" id="2844828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844834">tt</span>&nbsp;<span class="op" id="2844837">:=</span>&nbsp;<span class="op" id="2844840">(</span><span class="op" id="2844841">*</span><span class="ident" id="2844842">structType</span><span class="op" id="2844852">)</span><span class="op" id="2844853">(</span><span class="ident" id="2844854">unsafe</span><span class="op" id="2844860">.</span><span class="ident" id="2844861">Pointer</span><span class="op" id="2844868">(</span><span class="ident" id="2844869">v</span><span class="op" id="2844870">.</span><span class="ident" id="2844871">typ</span><span class="op" id="2844874">)</span><span class="op" id="2844875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2844878">if</span>&nbsp;<span class="builtintype" id="2844881">uint</span><span class="op" id="2844885">(</span><span class="ident" id="2844886">i</span><span class="op" id="2844887">)</span>&nbsp;<span class="op" id="2844889">&gt;=</span>&nbsp;<span class="builtintype" id="2844892">uint</span><span class="op" id="2844896">(</span><span class="builtinfunc" id="2844897">len</span><span class="op" id="2844900">(</span><span class="ident" id="2844901">tt</span><span class="op" id="2844903">.</span><span class="ident" id="2844904">fields</span><span class="op" id="2844910">)</span><span class="op" id="2844911">)</span>&nbsp;<span class="op" id="2844913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2844917">panic</span><span class="op" id="2844922">(</span><span class="string" id="2844923">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2844958">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2844961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844964">field</span>&nbsp;<span class="op" id="2844970">:=</span>&nbsp;<span class="op" id="2844973">&amp;</span><span class="ident" id="2844974">tt</span><span class="op" id="2844976">.</span><span class="ident" id="2844977">fields</span><span class="op" id="2844983">[</span><span class="ident" id="2844984">i</span><span class="op" id="2844985">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2844988">typ</span>&nbsp;<span class="op" id="2844992">:=</span>&nbsp;<span class="ident" id="2844995">field</span><span class="op" id="2845000">.</span><span class="ident" id="2845001">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845007">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845043">fl</span>&nbsp;<span class="op" id="2845046">:=</span>&nbsp;<span class="ident" id="2845049">v</span><span class="op" id="2845050">.</span><span class="ident" id="2845051">flag</span><span class="op" id="2845055">&amp;</span><span class="op" id="2845056">(</span><span class="ident" id="2845057">flagRO</span><span class="op" id="2845063">|</span><span class="ident" id="2845064">flagIndir</span><span class="op" id="2845073">|</span><span class="ident" id="2845074">flagAddr</span><span class="op" id="2845082">)</span>&nbsp;<span class="op" id="2845084">|</span>&nbsp;<span class="ident" id="2845086">flag</span><span class="op" id="2845090">(</span><span class="ident" id="2845091">typ</span><span class="op" id="2845094">.</span><span class="ident" id="2845095">Kind</span><span class="op" id="2845099">(</span><span class="op" id="2845100">)</span><span class="op" id="2845101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845104">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845149">if</span>&nbsp;<span class="ident" id="2845152">field</span><span class="op" id="2845157">.</span><span class="ident" id="2845158">pkgPath</span>&nbsp;<span class="op" id="2845166">!=</span>&nbsp;<span class="builtintype" id="2845169">nil</span>&nbsp;<span class="op" id="2845173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845177">fl</span>&nbsp;<span class="op" id="2845180">|=</span>&nbsp;<span class="ident" id="2845183">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2845191">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845194">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845250">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845315">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845363">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2845421">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845464">ptr</span>&nbsp;<span class="op" id="2845468">:=</span>&nbsp;<span class="ident" id="2845471">unsafe</span><span class="op" id="2845477">.</span><span class="ident" id="2845478">Pointer</span><span class="op" id="2845485">(</span><span class="builtintype" id="2845486">uintptr</span><span class="op" id="2845493">(</span><span class="ident" id="2845494">v</span><span class="op" id="2845495">.</span><span class="ident" id="2845496">ptr</span><span class="op" id="2845499">)</span>&nbsp;<span class="op" id="2845501">+</span>&nbsp;<span class="ident" id="2845503">field</span><span class="op" id="2845508">.</span><span class="ident" id="2845509">offset</span><span class="op" id="2845515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845518">return</span>&nbsp;<span class="ident" id="2845525">Value</span><span class="op" id="2845530">{</span><span class="ident" id="2845531">typ</span><span class="op" id="2845534">,</span>&nbsp;<span class="ident" id="2845536">ptr</span><span class="op" id="2845539">,</span>&nbsp;<span class="ident" id="2845541">fl</span><span class="op" id="2845543">}</span><br>
<span class="lineno"></span><span class="op" id="2845545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2845548">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2845613">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2845653">func</span>&nbsp;<span class="op" id="2845658">(</span><span class="ident" id="2845659">v</span>&nbsp;<span class="ident" id="2845661">Value</span><span class="op" id="2845666">)</span>&nbsp;<span class="ident" id="2845668">FieldByIndex</span><span class="op" id="2845680">(</span><span class="ident" id="2845681">index</span>&nbsp;<span class="op" id="2845687">[</span><span class="op" id="2845688">]</span><span class="builtintype" id="2845689">int</span><span class="op" id="2845692">)</span>&nbsp;<span class="ident" id="2845694">Value</span>&nbsp;<span class="op" id="2845700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845703">if</span>&nbsp;<span class="builtinfunc" id="2845706">len</span><span class="op" id="2845709">(</span><span class="ident" id="2845710">index</span><span class="op" id="2845715">)</span>&nbsp;<span class="op" id="2845717">==</span>&nbsp;<span class="num" id="2845720">1</span>&nbsp;<span class="op" id="2845722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845726">return</span>&nbsp;<span class="ident" id="2845733">v</span><span class="op" id="2845734">.</span><span class="ident" id="2845735">Field</span><span class="op" id="2845740">(</span><span class="ident" id="2845741">index</span><span class="op" id="2845746">[</span><span class="num" id="2845747">0</span><span class="op" id="2845748">]</span><span class="op" id="2845749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2845752">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845755">v</span><span class="op" id="2845756">.</span><span class="ident" id="2845757">mustBe</span><span class="op" id="2845763">(</span><span class="ident" id="2845764">Struct</span><span class="op" id="2845770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845773">for</span>&nbsp;<span class="ident" id="2845777">i</span><span class="op" id="2845778">,</span>&nbsp;<span class="ident" id="2845780">x</span>&nbsp;<span class="op" id="2845782">:=</span>&nbsp;<span class="keyword" id="2845785">range</span>&nbsp;<span class="ident" id="2845791">index</span>&nbsp;<span class="op" id="2845797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845801">if</span>&nbsp;<span class="ident" id="2845804">i</span>&nbsp;<span class="op" id="2845806">&gt;</span>&nbsp;<span class="num" id="2845808">0</span>&nbsp;<span class="op" id="2845810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845815">if</span>&nbsp;<span class="ident" id="2845818">v</span><span class="op" id="2845819">.</span><span class="ident" id="2845820">Kind</span><span class="op" id="2845824">(</span><span class="op" id="2845825">)</span>&nbsp;<span class="op" id="2845827">==</span>&nbsp;<span class="ident" id="2845830">Ptr</span>&nbsp;<span class="op" id="2845834">&amp;&amp;</span>&nbsp;<span class="ident" id="2845837">v</span><span class="op" id="2845838">.</span><span class="ident" id="2845839">typ</span><span class="op" id="2845842">.</span><span class="ident" id="2845843">Elem</span><span class="op" id="2845847">(</span><span class="op" id="2845848">)</span><span class="op" id="2845849">.</span><span class="ident" id="2845850">Kind</span><span class="op" id="2845854">(</span><span class="op" id="2845855">)</span>&nbsp;<span class="op" id="2845857">==</span>&nbsp;<span class="ident" id="2845860">Struct</span>&nbsp;<span class="op" id="2845867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2845873">if</span>&nbsp;<span class="ident" id="2845876">v</span><span class="op" id="2845877">.</span><span class="ident" id="2845878">IsNil</span><span class="op" id="2845883">(</span><span class="op" id="2845884">)</span>&nbsp;<span class="op" id="2845886">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2845893">panic</span><span class="op" id="2845898">(</span><span class="string" id="2845899">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2845960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2845966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845972">v</span>&nbsp;<span class="op" id="2845974">=</span>&nbsp;<span class="ident" id="2845976">v</span><span class="op" id="2845977">.</span><span class="ident" id="2845978">Elem</span><span class="op" id="2845982">(</span><span class="op" id="2845983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2845988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2845992">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2845996">v</span>&nbsp;<span class="op" id="2845998">=</span>&nbsp;<span class="ident" id="2846000">v</span><span class="op" id="2846001">.</span><span class="ident" id="2846002">Field</span><span class="op" id="2846007">(</span><span class="ident" id="2846008">x</span><span class="op" id="2846009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2846012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846015">return</span>&nbsp;<span class="ident" id="2846022">v</span><br>
<span class="lineno"></span><span class="op" id="2846024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2846027">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2846088">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2846140">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2846180">func</span>&nbsp;<span class="op" id="2846185">(</span><span class="ident" id="2846186">v</span>&nbsp;<span class="ident" id="2846188">Value</span><span class="op" id="2846193">)</span>&nbsp;<span class="ident" id="2846195">FieldByName</span><span class="op" id="2846206">(</span><span class="ident" id="2846207">name</span>&nbsp;<span class="builtintype" id="2846212">string</span><span class="op" id="2846218">)</span>&nbsp;<span class="ident" id="2846220">Value</span>&nbsp;<span class="op" id="2846226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2846229">v</span><span class="op" id="2846230">.</span><span class="ident" id="2846231">mustBe</span><span class="op" id="2846237">(</span><span class="ident" id="2846238">Struct</span><span class="op" id="2846244">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846247">if</span>&nbsp;<span class="ident" id="2846250">f</span><span class="op" id="2846251">,</span>&nbsp;<span class="ident" id="2846253">ok</span>&nbsp;<span class="op" id="2846256">:=</span>&nbsp;<span class="ident" id="2846259">v</span><span class="op" id="2846260">.</span><span class="ident" id="2846261">typ</span><span class="op" id="2846264">.</span><span class="ident" id="2846265">FieldByName</span><span class="op" id="2846276">(</span><span class="ident" id="2846277">name</span><span class="op" id="2846281">)</span><span class="op" id="2846282">;</span>&nbsp;<span class="ident" id="2846284">ok</span>&nbsp;<span class="op" id="2846287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846291">return</span>&nbsp;<span class="ident" id="2846298">v</span><span class="op" id="2846299">.</span><span class="ident" id="2846300">FieldByIndex</span><span class="op" id="2846312">(</span><span class="ident" id="2846313">f</span><span class="op" id="2846314">.</span><span class="ident" id="2846315">Index</span><span class="op" id="2846320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2846323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846326">return</span>&nbsp;<span class="ident" id="2846333">Value</span><span class="op" id="2846338">{</span><span class="op" id="2846339">}</span><br>
<span class="lineno"></span><span class="op" id="2846341">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2846344">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2846400">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2846438">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2846478">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2846530">func</span>&nbsp;<span class="op" id="2846535">(</span><span class="ident" id="2846536">v</span>&nbsp;<span class="ident" id="2846538">Value</span><span class="op" id="2846543">)</span>&nbsp;<span class="ident" id="2846545">FieldByNameFunc</span><span class="op" id="2846560">(</span><span class="ident" id="2846561">match</span>&nbsp;<span class="keyword" id="2846567">func</span><span class="op" id="2846571">(</span><span class="builtintype" id="2846572">string</span><span class="op" id="2846578">)</span>&nbsp;<span class="builtintype" id="2846580">bool</span><span class="op" id="2846584">)</span>&nbsp;<span class="ident" id="2846586">Value</span>&nbsp;<span class="op" id="2846592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846595">if</span>&nbsp;<span class="ident" id="2846598">f</span><span class="op" id="2846599">,</span>&nbsp;<span class="ident" id="2846601">ok</span>&nbsp;<span class="op" id="2846604">:=</span>&nbsp;<span class="ident" id="2846607">v</span><span class="op" id="2846608">.</span><span class="ident" id="2846609">typ</span><span class="op" id="2846612">.</span><span class="ident" id="2846613">FieldByNameFunc</span><span class="op" id="2846628">(</span><span class="ident" id="2846629">match</span><span class="op" id="2846634">)</span><span class="op" id="2846635">;</span>&nbsp;<span class="ident" id="2846637">ok</span>&nbsp;<span class="op" id="2846640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846644">return</span>&nbsp;<span class="ident" id="2846651">v</span><span class="op" id="2846652">.</span><span class="ident" id="2846653">FieldByIndex</span><span class="op" id="2846665">(</span><span class="ident" id="2846666">f</span><span class="op" id="2846667">.</span><span class="ident" id="2846668">Index</span><span class="op" id="2846673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2846676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846679">return</span>&nbsp;<span class="ident" id="2846686">Value</span><span class="op" id="2846691">{</span><span class="op" id="2846692">}</span><br>
<span class="lineno">775</span><span class="op" id="2846694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2846697">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2846750">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2846801">func</span>&nbsp;<span class="op" id="2846806">(</span><span class="ident" id="2846807">v</span>&nbsp;<span class="ident" id="2846809">Value</span><span class="op" id="2846814">)</span>&nbsp;<span class="ident" id="2846816">Float</span><span class="op" id="2846821">(</span><span class="op" id="2846822">)</span>&nbsp;<span class="builtintype" id="2846824">float64</span>&nbsp;<span class="op" id="2846832">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2846835">k</span>&nbsp;<span class="op" id="2846837">:=</span>&nbsp;<span class="ident" id="2846840">v</span><span class="op" id="2846841">.</span><span class="ident" id="2846842">kind</span><span class="op" id="2846846">(</span><span class="op" id="2846847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846850">switch</span>&nbsp;<span class="ident" id="2846857">k</span>&nbsp;<span class="op" id="2846859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846862">case</span>&nbsp;<span class="ident" id="2846867">Float32</span><span class="op" id="2846874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846878">return</span>&nbsp;<span class="builtintype" id="2846885">float64</span><span class="op" id="2846892">(</span><span class="op" id="2846893">*</span><span class="op" id="2846894">(</span><span class="op" id="2846895">*</span><span class="builtintype" id="2846896">float32</span><span class="op" id="2846903">)</span><span class="op" id="2846904">(</span><span class="ident" id="2846905">v</span><span class="op" id="2846906">.</span><span class="ident" id="2846907">ptr</span><span class="op" id="2846910">)</span><span class="op" id="2846911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846914">case</span>&nbsp;<span class="ident" id="2846919">Float64</span><span class="op" id="2846926">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2846930">return</span>&nbsp;<span class="op" id="2846937">*</span><span class="op" id="2846938">(</span><span class="op" id="2846939">*</span><span class="builtintype" id="2846940">float64</span><span class="op" id="2846947">)</span><span class="op" id="2846948">(</span><span class="ident" id="2846949">v</span><span class="op" id="2846950">.</span><span class="ident" id="2846951">ptr</span><span class="op" id="2846954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2846957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2846960">panic</span><span class="op" id="2846965">(</span><span class="op" id="2846966">&amp;</span><span class="ident" id="2846967">ValueError</span><span class="op" id="2846977">{</span><span class="string" id="2846978">&#34;reflect.Value.Float&#34;</span><span class="op" id="2846999">,</span>&nbsp;<span class="ident" id="2847001">v</span><span class="op" id="2847002">.</span><span class="ident" id="2847003">kind</span><span class="op" id="2847007">(</span><span class="op" id="2847008">)</span><span class="op" id="2847009">}</span><span class="op" id="2847010">)</span><br>
<span class="lineno"></span><span class="op" id="2847012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2847015">var</span>&nbsp;<span class="ident" id="2847019">uint8Type</span>&nbsp;<span class="op" id="2847029">=</span>&nbsp;<span class="ident" id="2847031">TypeOf</span><span class="op" id="2847037">(</span><span class="builtintype" id="2847038">uint8</span><span class="op" id="2847043">(</span><span class="num" id="2847044">0</span><span class="op" id="2847045">)</span><span class="op" id="2847046">)</span><span class="op" id="2847047">.</span><span class="op" id="2847048">(</span><span class="op" id="2847049">*</span><span class="ident" id="2847050">rtype</span><span class="op" id="2847055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2847058">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2847093">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2847171">func</span>&nbsp;<span class="op" id="2847176">(</span><span class="ident" id="2847177">v</span>&nbsp;<span class="ident" id="2847179">Value</span><span class="op" id="2847184">)</span>&nbsp;<span class="ident" id="2847186">Index</span><span class="op" id="2847191">(</span><span class="ident" id="2847192">i</span>&nbsp;<span class="builtintype" id="2847194">int</span><span class="op" id="2847197">)</span>&nbsp;<span class="ident" id="2847199">Value</span>&nbsp;<span class="op" id="2847205">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847208">switch</span>&nbsp;<span class="ident" id="2847215">v</span><span class="op" id="2847216">.</span><span class="ident" id="2847217">kind</span><span class="op" id="2847221">(</span><span class="op" id="2847222">)</span>&nbsp;<span class="op" id="2847224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847227">case</span>&nbsp;<span class="ident" id="2847232">Array</span><span class="op" id="2847237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847241">tt</span>&nbsp;<span class="op" id="2847244">:=</span>&nbsp;<span class="op" id="2847247">(</span><span class="op" id="2847248">*</span><span class="ident" id="2847249">arrayType</span><span class="op" id="2847258">)</span><span class="op" id="2847259">(</span><span class="ident" id="2847260">unsafe</span><span class="op" id="2847266">.</span><span class="ident" id="2847267">Pointer</span><span class="op" id="2847274">(</span><span class="ident" id="2847275">v</span><span class="op" id="2847276">.</span><span class="ident" id="2847277">typ</span><span class="op" id="2847280">)</span><span class="op" id="2847281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847285">if</span>&nbsp;<span class="builtintype" id="2847288">uint</span><span class="op" id="2847292">(</span><span class="ident" id="2847293">i</span><span class="op" id="2847294">)</span>&nbsp;<span class="op" id="2847296">&gt;=</span>&nbsp;<span class="builtintype" id="2847299">uint</span><span class="op" id="2847303">(</span><span class="ident" id="2847304">tt</span><span class="op" id="2847306">.</span><span class="builtinfunc" id="2847307">len</span><span class="op" id="2847310">)</span>&nbsp;<span class="op" id="2847312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2847317">panic</span><span class="op" id="2847322">(</span><span class="string" id="2847323">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2847358">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2847362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847366">typ</span>&nbsp;<span class="op" id="2847370">:=</span>&nbsp;<span class="ident" id="2847373">tt</span><span class="op" id="2847375">.</span><span class="ident" id="2847376">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847383">offset</span>&nbsp;<span class="op" id="2847390">:=</span>&nbsp;<span class="builtintype" id="2847393">uintptr</span><span class="op" id="2847400">(</span><span class="ident" id="2847401">i</span><span class="op" id="2847402">)</span>&nbsp;<span class="op" id="2847404">*</span>&nbsp;<span class="ident" id="2847406">typ</span><span class="op" id="2847409">.</span><span class="ident" id="2847410">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847418">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847474">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847539">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847588">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847655">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847693">val</span>&nbsp;<span class="op" id="2847697">:=</span>&nbsp;<span class="ident" id="2847700">unsafe</span><span class="op" id="2847706">.</span><span class="ident" id="2847707">Pointer</span><span class="op" id="2847714">(</span><span class="builtintype" id="2847715">uintptr</span><span class="op" id="2847722">(</span><span class="ident" id="2847723">v</span><span class="op" id="2847724">.</span><span class="ident" id="2847725">ptr</span><span class="op" id="2847728">)</span>&nbsp;<span class="op" id="2847730">+</span>&nbsp;<span class="ident" id="2847732">offset</span><span class="op" id="2847738">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847742">fl</span>&nbsp;<span class="op" id="2847745">:=</span>&nbsp;<span class="ident" id="2847748">v</span><span class="op" id="2847749">.</span><span class="ident" id="2847750">flag</span><span class="op" id="2847754">&amp;</span><span class="op" id="2847755">(</span><span class="ident" id="2847756">flagRO</span><span class="op" id="2847762">|</span><span class="ident" id="2847763">flagIndir</span><span class="op" id="2847772">|</span><span class="ident" id="2847773">flagAddr</span><span class="op" id="2847781">)</span>&nbsp;<span class="op" id="2847783">|</span>&nbsp;<span class="ident" id="2847785">flag</span><span class="op" id="2847789">(</span><span class="ident" id="2847790">typ</span><span class="op" id="2847793">.</span><span class="ident" id="2847794">Kind</span><span class="op" id="2847798">(</span><span class="op" id="2847799">)</span><span class="op" id="2847800">)</span>&nbsp;<span class="comment" id="2847802">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847834">return</span>&nbsp;<span class="ident" id="2847841">Value</span><span class="op" id="2847846">{</span><span class="ident" id="2847847">typ</span><span class="op" id="2847850">,</span>&nbsp;<span class="ident" id="2847852">val</span><span class="op" id="2847855">,</span>&nbsp;<span class="ident" id="2847857">fl</span><span class="op" id="2847859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847863">case</span>&nbsp;<span class="ident" id="2847868">Slice</span><span class="op" id="2847873">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847877">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2847916">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2847964">s</span>&nbsp;<span class="op" id="2847966">:=</span>&nbsp;<span class="op" id="2847969">(</span><span class="op" id="2847970">*</span><span class="ident" id="2847971">sliceHeader</span><span class="op" id="2847982">)</span><span class="op" id="2847983">(</span><span class="ident" id="2847984">v</span><span class="op" id="2847985">.</span><span class="ident" id="2847986">ptr</span><span class="op" id="2847989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2847993">if</span>&nbsp;<span class="builtintype" id="2847996">uint</span><span class="op" id="2848000">(</span><span class="ident" id="2848001">i</span><span class="op" id="2848002">)</span>&nbsp;<span class="op" id="2848004">&gt;=</span>&nbsp;<span class="builtintype" id="2848007">uint</span><span class="op" id="2848011">(</span><span class="ident" id="2848012">s</span><span class="op" id="2848013">.</span><span class="ident" id="2848014">Len</span><span class="op" id="2848017">)</span>&nbsp;<span class="op" id="2848019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2848024">panic</span><span class="op" id="2848029">(</span><span class="string" id="2848030">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2848065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2848069">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848073">tt</span>&nbsp;<span class="op" id="2848076">:=</span>&nbsp;<span class="op" id="2848079">(</span><span class="op" id="2848080">*</span><span class="ident" id="2848081">sliceType</span><span class="op" id="2848090">)</span><span class="op" id="2848091">(</span><span class="ident" id="2848092">unsafe</span><span class="op" id="2848098">.</span><span class="ident" id="2848099">Pointer</span><span class="op" id="2848106">(</span><span class="ident" id="2848107">v</span><span class="op" id="2848108">.</span><span class="ident" id="2848109">typ</span><span class="op" id="2848112">)</span><span class="op" id="2848113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848117">typ</span>&nbsp;<span class="op" id="2848121">:=</span>&nbsp;<span class="ident" id="2848124">tt</span><span class="op" id="2848126">.</span><span class="ident" id="2848127">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848134">val</span>&nbsp;<span class="op" id="2848138">:=</span>&nbsp;<span class="ident" id="2848141">unsafe</span><span class="op" id="2848147">.</span><span class="ident" id="2848148">Pointer</span><span class="op" id="2848155">(</span><span class="builtintype" id="2848156">uintptr</span><span class="op" id="2848163">(</span><span class="ident" id="2848164">s</span><span class="op" id="2848165">.</span><span class="ident" id="2848166">Data</span><span class="op" id="2848170">)</span>&nbsp;<span class="op" id="2848172">+</span>&nbsp;<span class="builtintype" id="2848174">uintptr</span><span class="op" id="2848181">(</span><span class="ident" id="2848182">i</span><span class="op" id="2848183">)</span><span class="op" id="2848184">*</span><span class="ident" id="2848185">typ</span><span class="op" id="2848188">.</span><span class="ident" id="2848189">size</span><span class="op" id="2848193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848197">fl</span>&nbsp;<span class="op" id="2848200">:=</span>&nbsp;<span class="ident" id="2848203">flagAddr</span>&nbsp;<span class="op" id="2848212">|</span>&nbsp;<span class="ident" id="2848214">flagIndir</span>&nbsp;<span class="op" id="2848224">|</span>&nbsp;<span class="ident" id="2848226">v</span><span class="op" id="2848227">.</span><span class="ident" id="2848228">flag</span><span class="op" id="2848232">&amp;</span><span class="ident" id="2848233">flagRO</span>&nbsp;<span class="op" id="2848240">|</span>&nbsp;<span class="ident" id="2848242">flag</span><span class="op" id="2848246">(</span><span class="ident" id="2848247">typ</span><span class="op" id="2848250">.</span><span class="ident" id="2848251">Kind</span><span class="op" id="2848255">(</span><span class="op" id="2848256">)</span><span class="op" id="2848257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848261">return</span>&nbsp;<span class="ident" id="2848268">Value</span><span class="op" id="2848273">{</span><span class="ident" id="2848274">typ</span><span class="op" id="2848277">,</span>&nbsp;<span class="ident" id="2848279">val</span><span class="op" id="2848282">,</span>&nbsp;<span class="ident" id="2848284">fl</span><span class="op" id="2848286">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848290">case</span>&nbsp;<span class="ident" id="2848295">String</span><span class="op" id="2848301">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848305">s</span>&nbsp;<span class="op" id="2848307">:=</span>&nbsp;<span class="op" id="2848310">(</span><span class="op" id="2848311">*</span><span class="ident" id="2848312">stringHeader</span><span class="op" id="2848324">)</span><span class="op" id="2848325">(</span><span class="ident" id="2848326">v</span><span class="op" id="2848327">.</span><span class="ident" id="2848328">ptr</span><span class="op" id="2848331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848335">if</span>&nbsp;<span class="builtintype" id="2848338">uint</span><span class="op" id="2848342">(</span><span class="ident" id="2848343">i</span><span class="op" id="2848344">)</span>&nbsp;<span class="op" id="2848346">&gt;=</span>&nbsp;<span class="builtintype" id="2848349">uint</span><span class="op" id="2848353">(</span><span class="ident" id="2848354">s</span><span class="op" id="2848355">.</span><span class="ident" id="2848356">Len</span><span class="op" id="2848359">)</span>&nbsp;<span class="op" id="2848361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2848366">panic</span><span class="op" id="2848371">(</span><span class="string" id="2848372">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2848408">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2848412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848416">p</span>&nbsp;<span class="op" id="2848418">:=</span>&nbsp;<span class="ident" id="2848421">unsafe</span><span class="op" id="2848427">.</span><span class="ident" id="2848428">Pointer</span><span class="op" id="2848435">(</span><span class="builtintype" id="2848436">uintptr</span><span class="op" id="2848443">(</span><span class="ident" id="2848444">s</span><span class="op" id="2848445">.</span><span class="ident" id="2848446">Data</span><span class="op" id="2848450">)</span>&nbsp;<span class="op" id="2848452">+</span>&nbsp;<span class="builtintype" id="2848454">uintptr</span><span class="op" id="2848461">(</span><span class="ident" id="2848462">i</span><span class="op" id="2848463">)</span><span class="op" id="2848464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848468">fl</span>&nbsp;<span class="op" id="2848471">:=</span>&nbsp;<span class="ident" id="2848474">v</span><span class="op" id="2848475">.</span><span class="ident" id="2848476">flag</span><span class="op" id="2848480">&amp;</span><span class="ident" id="2848481">flagRO</span>&nbsp;<span class="op" id="2848488">|</span>&nbsp;<span class="ident" id="2848490">flag</span><span class="op" id="2848494">(</span><span class="ident" id="2848495">Uint8</span><span class="op" id="2848500">)</span>&nbsp;<span class="op" id="2848502">|</span>&nbsp;<span class="ident" id="2848504">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848516">return</span>&nbsp;<span class="ident" id="2848523">Value</span><span class="op" id="2848528">{</span><span class="ident" id="2848529">uint8Type</span><span class="op" id="2848538">,</span>&nbsp;<span class="ident" id="2848540">p</span><span class="op" id="2848541">,</span>&nbsp;<span class="ident" id="2848543">fl</span><span class="op" id="2848545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2848548">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2848551">panic</span><span class="op" id="2848556">(</span><span class="op" id="2848557">&amp;</span><span class="ident" id="2848558">ValueError</span><span class="op" id="2848568">{</span><span class="string" id="2848569">&#34;reflect.Value.Index&#34;</span><span class="op" id="2848590">,</span>&nbsp;<span class="ident" id="2848592">v</span><span class="op" id="2848593">.</span><span class="ident" id="2848594">kind</span><span class="op" id="2848598">(</span><span class="op" id="2848599">)</span><span class="op" id="2848600">}</span><span class="op" id="2848601">)</span><br>
<span class="lineno"></span><span class="op" id="2848603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2848606">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2848656">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2848723">func</span>&nbsp;<span class="op" id="2848728">(</span><span class="ident" id="2848729">v</span>&nbsp;<span class="ident" id="2848731">Value</span><span class="op" id="2848736">)</span>&nbsp;<span class="ident" id="2848738">Int</span><span class="op" id="2848741">(</span><span class="op" id="2848742">)</span>&nbsp;<span class="ident" id="2848744">int64</span>&nbsp;<span class="op" id="2848750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848753">k</span>&nbsp;<span class="op" id="2848755">:=</span>&nbsp;<span class="ident" id="2848758">v</span><span class="op" id="2848759">.</span><span class="ident" id="2848760">kind</span><span class="op" id="2848764">(</span><span class="op" id="2848765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2848768">p</span>&nbsp;<span class="op" id="2848770">:=</span>&nbsp;<span class="ident" id="2848773">v</span><span class="op" id="2848774">.</span><span class="ident" id="2848775">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848780">switch</span>&nbsp;<span class="ident" id="2848787">k</span>&nbsp;<span class="op" id="2848789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848792">case</span>&nbsp;<span class="ident" id="2848797">Int</span><span class="op" id="2848800">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848804">return</span>&nbsp;<span class="ident" id="2848811">int64</span><span class="op" id="2848816">(</span><span class="op" id="2848817">*</span><span class="op" id="2848818">(</span><span class="op" id="2848819">*</span><span class="builtintype" id="2848820">int</span><span class="op" id="2848823">)</span><span class="op" id="2848824">(</span><span class="ident" id="2848825">p</span><span class="op" id="2848826">)</span><span class="op" id="2848827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848830">case</span>&nbsp;<span class="ident" id="2848835">Int8</span><span class="op" id="2848839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848843">return</span>&nbsp;<span class="ident" id="2848850">int64</span><span class="op" id="2848855">(</span><span class="op" id="2848856">*</span><span class="op" id="2848857">(</span><span class="op" id="2848858">*</span><span class="builtintype" id="2848859">int8</span><span class="op" id="2848863">)</span><span class="op" id="2848864">(</span><span class="ident" id="2848865">p</span><span class="op" id="2848866">)</span><span class="op" id="2848867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848870">case</span>&nbsp;<span class="ident" id="2848875">Int16</span><span class="op" id="2848880">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848884">return</span>&nbsp;<span class="ident" id="2848891">int64</span><span class="op" id="2848896">(</span><span class="op" id="2848897">*</span><span class="op" id="2848898">(</span><span class="op" id="2848899">*</span><span class="builtintype" id="2848900">int16</span><span class="op" id="2848905">)</span><span class="op" id="2848906">(</span><span class="ident" id="2848907">p</span><span class="op" id="2848908">)</span><span class="op" id="2848909">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848912">case</span>&nbsp;<span class="ident" id="2848917">Int32</span><span class="op" id="2848922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848926">return</span>&nbsp;<span class="ident" id="2848933">int64</span><span class="op" id="2848938">(</span><span class="op" id="2848939">*</span><span class="op" id="2848940">(</span><span class="op" id="2848941">*</span><span class="builtintype" id="2848942">int32</span><span class="op" id="2848947">)</span><span class="op" id="2848948">(</span><span class="ident" id="2848949">p</span><span class="op" id="2848950">)</span><span class="op" id="2848951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848954">case</span>&nbsp;<span class="ident" id="2848959">Int64</span><span class="op" id="2848964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2848968">return</span>&nbsp;<span class="ident" id="2848975">int64</span><span class="op" id="2848980">(</span><span class="op" id="2848981">*</span><span class="op" id="2848982">(</span><span class="op" id="2848983">*</span><span class="ident" id="2848984">int64</span><span class="op" id="2848989">)</span><span class="op" id="2848990">(</span><span class="ident" id="2848991">p</span><span class="op" id="2848992">)</span><span class="op" id="2848993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2848996">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2848999">panic</span><span class="op" id="2849004">(</span><span class="op" id="2849005">&amp;</span><span class="ident" id="2849006">ValueError</span><span class="op" id="2849016">{</span><span class="string" id="2849017">&#34;reflect.Value.Int&#34;</span><span class="op" id="2849036">,</span>&nbsp;<span class="ident" id="2849038">v</span><span class="op" id="2849039">.</span><span class="ident" id="2849040">kind</span><span class="op" id="2849044">(</span><span class="op" id="2849045">)</span><span class="op" id="2849046">}</span><span class="op" id="2849047">)</span><br>
<span class="lineno"></span><span class="op" id="2849049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2849052">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2849125">func</span>&nbsp;<span class="op" id="2849130">(</span><span class="ident" id="2849131">v</span>&nbsp;<span class="ident" id="2849133">Value</span><span class="op" id="2849138">)</span>&nbsp;<span class="ident" id="2849140">CanInterface</span><span class="op" id="2849152">(</span><span class="op" id="2849153">)</span>&nbsp;<span class="builtintype" id="2849155">bool</span>&nbsp;<span class="op" id="2849160">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2849163">if</span>&nbsp;<span class="ident" id="2849166">v</span><span class="op" id="2849167">.</span><span class="ident" id="2849168">flag</span>&nbsp;<span class="op" id="2849173">==</span>&nbsp;<span class="num" id="2849176">0</span>&nbsp;<span class="op" id="2849178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2849182">panic</span><span class="op" id="2849187">(</span><span class="op" id="2849188">&amp;</span><span class="ident" id="2849189">ValueError</span><span class="op" id="2849199">{</span><span class="string" id="2849200">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2849228">,</span>&nbsp;<span class="ident" id="2849230">Invalid</span><span class="op" id="2849237">}</span><span class="op" id="2849238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2849241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2849244">return</span>&nbsp;<span class="ident" id="2849251">v</span><span class="op" id="2849252">.</span><span class="ident" id="2849253">flag</span><span class="op" id="2849257">&amp;</span><span class="ident" id="2849258">flagRO</span>&nbsp;<span class="op" id="2849265">==</span>&nbsp;<span class="num" id="2849268">0</span><br>
<span class="lineno"></span><span class="op" id="2849270">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2849273">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2849331">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2849355">//&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2849401">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2849453">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2849482">func</span>&nbsp;<span class="op" id="2849487">(</span><span class="ident" id="2849488">v</span>&nbsp;<span class="ident" id="2849490">Value</span><span class="op" id="2849495">)</span>&nbsp;<span class="ident" id="2849497">Interface</span><span class="op" id="2849506">(</span><span class="op" id="2849507">)</span>&nbsp;<span class="op" id="2849509">(</span><span class="ident" id="2849510">i</span>&nbsp;<span class="keyword" id="2849512">interface</span><span class="op" id="2849521">{</span><span class="op" id="2849522">}</span><span class="op" id="2849523">)</span>&nbsp;<span class="op" id="2849525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2849528">return</span>&nbsp;<span class="ident" id="2849535">valueInterface</span><span class="op" id="2849549">(</span><span class="ident" id="2849550">v</span><span class="op" id="2849551">,</span>&nbsp;<span class="builtintype" id="2849553">true</span><span class="op" id="2849557">)</span><br>
<span class="lineno"></span><span class="op" id="2849559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2849562">func</span>&nbsp;<span class="ident" id="2849567">valueInterface</span><span class="op" id="2849581">(</span><span class="ident" id="2849582">v</span>&nbsp;<span class="ident" id="2849584">Value</span><span class="op" id="2849589">,</span>&nbsp;<span class="ident" id="2849591">safe</span>&nbsp;<span class="builtintype" id="2849596">bool</span><span class="op" id="2849600">)</span>&nbsp;<span class="keyword" id="2849602">interface</span><span class="op" id="2849611">{</span><span class="op" id="2849612">}</span>&nbsp;<span class="op" id="2849614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2849617">if</span>&nbsp;<span class="ident" id="2849620">v</span><span class="op" id="2849621">.</span><span class="ident" id="2849622">flag</span>&nbsp;<span class="op" id="2849627">==</span>&nbsp;<span class="num" id="2849630">0</span>&nbsp;<span class="op" id="2849632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2849636">panic</span><span class="op" id="2849641">(</span><span class="op" id="2849642">&amp;</span><span class="ident" id="2849643">ValueError</span><span class="op" id="2849653">{</span><span class="string" id="2849654">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2849679">,</span>&nbsp;<span class="num" id="2849681">0</span><span class="op" id="2849682">}</span><span class="op" id="2849683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2849686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2849689">if</span>&nbsp;<span class="ident" id="2849692">safe</span>&nbsp;<span class="op" id="2849697">&amp;&amp;</span>&nbsp;<span class="ident" id="2849700">v</span><span class="op" id="2849701">.</span><span class="ident" id="2849702">flag</span><span class="op" id="2849706">&amp;</span><span class="ident" id="2849707">flagRO</span>&nbsp;<span class="op" id="2849714">!=</span>&nbsp;<span class="num" id="2849717">0</span>&nbsp;<span class="op" id="2849719">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2849723">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2849784">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2849839">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2849905">panic</span><span class="op" id="2849910">(</span><span class="string" id="2849911">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2849998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850001">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850004">if</span>&nbsp;<span class="ident" id="2850007">v</span><span class="op" id="2850008">.</span><span class="ident" id="2850009">flag</span><span class="op" id="2850013">&amp;</span><span class="ident" id="2850014">flagMethod</span>&nbsp;<span class="op" id="2850025">!=</span>&nbsp;<span class="num" id="2850028">0</span>&nbsp;<span class="op" id="2850030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2850034">v</span>&nbsp;<span class="op" id="2850036">=</span>&nbsp;<span class="ident" id="2850038">makeMethodValue</span><span class="op" id="2850053">(</span><span class="string" id="2850054">&#34;Interface&#34;</span><span class="op" id="2850065">,</span>&nbsp;<span class="ident" id="2850067">v</span><span class="op" id="2850068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850075">if</span>&nbsp;<span class="ident" id="2850078">v</span><span class="op" id="2850079">.</span><span class="ident" id="2850080">kind</span><span class="op" id="2850084">(</span><span class="op" id="2850085">)</span>&nbsp;<span class="op" id="2850087">==</span>&nbsp;<span class="ident" id="2850090">Interface</span>&nbsp;<span class="op" id="2850100">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850104">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850164">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850221">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850256">if</span>&nbsp;<span class="ident" id="2850259">v</span><span class="op" id="2850260">.</span><span class="ident" id="2850261">NumMethod</span><span class="op" id="2850270">(</span><span class="op" id="2850271">)</span>&nbsp;<span class="op" id="2850273">==</span>&nbsp;<span class="num" id="2850276">0</span>&nbsp;<span class="op" id="2850278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850283">return</span>&nbsp;<span class="op" id="2850290">*</span><span class="op" id="2850291">(</span><span class="op" id="2850292">*</span><span class="keyword" id="2850293">interface</span><span class="op" id="2850302">{</span><span class="op" id="2850303">}</span><span class="op" id="2850304">)</span><span class="op" id="2850305">(</span><span class="ident" id="2850306">v</span><span class="op" id="2850307">.</span><span class="ident" id="2850308">ptr</span><span class="op" id="2850311">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850319">return</span>&nbsp;<span class="op" id="2850326">*</span><span class="op" id="2850327">(</span><span class="op" id="2850328">*</span><span class="keyword" id="2850329">interface</span>&nbsp;<span class="op" id="2850339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2850344">M</span><span class="op" id="2850345">(</span><span class="op" id="2850346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850350">}</span><span class="op" id="2850351">)</span><span class="op" id="2850352">(</span><span class="ident" id="2850353">v</span><span class="op" id="2850354">.</span><span class="ident" id="2850355">ptr</span><span class="op" id="2850358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850361">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850365">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850438">return</span>&nbsp;<span class="ident" id="2850445">packEface</span><span class="op" id="2850454">(</span><span class="ident" id="2850455">v</span><span class="op" id="2850456">)</span><br>
<span class="lineno"></span><span class="op" id="2850458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2850461">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2850529">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2850572">func</span>&nbsp;<span class="op" id="2850577">(</span><span class="ident" id="2850578">v</span>&nbsp;<span class="ident" id="2850580">Value</span><span class="op" id="2850585">)</span>&nbsp;<span class="ident" id="2850587">InterfaceData</span><span class="op" id="2850600">(</span><span class="op" id="2850601">)</span>&nbsp;<span class="op" id="2850603">[</span><span class="num" id="2850604">2</span><span class="op" id="2850605">]</span><span class="builtintype" id="2850606">uintptr</span>&nbsp;<span class="op" id="2850614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850617">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2850642">v</span><span class="op" id="2850643">.</span><span class="ident" id="2850644">mustBe</span><span class="op" id="2850650">(</span><span class="ident" id="2850651">Interface</span><span class="op" id="2850660">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850663">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850714">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850766">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850819">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2850843">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2850911">return</span>&nbsp;<span class="op" id="2850918">*</span><span class="op" id="2850919">(</span><span class="op" id="2850920">*</span><span class="op" id="2850921">[</span><span class="num" id="2850922">2</span><span class="op" id="2850923">]</span><span class="builtintype" id="2850924">uintptr</span><span class="op" id="2850931">)</span><span class="op" id="2850932">(</span><span class="ident" id="2850933">v</span><span class="op" id="2850934">.</span><span class="ident" id="2850935">ptr</span><span class="op" id="2850938">)</span><br>
<span class="lineno"></span><span class="op" id="2850940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2850943">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2851012">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2851079">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2851147">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2851215">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2851281">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2851349">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2851359">func</span>&nbsp;<span class="op" id="2851364">(</span><span class="ident" id="2851365">v</span>&nbsp;<span class="ident" id="2851367">Value</span><span class="op" id="2851372">)</span>&nbsp;<span class="ident" id="2851374">IsNil</span><span class="op" id="2851379">(</span><span class="op" id="2851380">)</span>&nbsp;<span class="builtintype" id="2851382">bool</span>&nbsp;<span class="op" id="2851387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2851390">k</span>&nbsp;<span class="op" id="2851392">:=</span>&nbsp;<span class="ident" id="2851395">v</span><span class="op" id="2851396">.</span><span class="ident" id="2851397">kind</span><span class="op" id="2851401">(</span><span class="op" id="2851402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851405">switch</span>&nbsp;<span class="ident" id="2851412">k</span>&nbsp;<span class="op" id="2851414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851417">case</span>&nbsp;<span class="ident" id="2851422">Chan</span><span class="op" id="2851426">,</span>&nbsp;<span class="ident" id="2851428">Func</span><span class="op" id="2851432">,</span>&nbsp;<span class="ident" id="2851434">Map</span><span class="op" id="2851437">,</span>&nbsp;<span class="ident" id="2851439">Ptr</span><span class="op" id="2851442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851446">if</span>&nbsp;<span class="ident" id="2851449">v</span><span class="op" id="2851450">.</span><span class="ident" id="2851451">flag</span><span class="op" id="2851455">&amp;</span><span class="ident" id="2851456">flagMethod</span>&nbsp;<span class="op" id="2851467">!=</span>&nbsp;<span class="num" id="2851470">0</span>&nbsp;<span class="op" id="2851472">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851477">return</span>&nbsp;<span class="builtintype" id="2851484">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2851492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2851496">ptr</span>&nbsp;<span class="op" id="2851500">:=</span>&nbsp;<span class="ident" id="2851503">v</span><span class="op" id="2851504">.</span><span class="ident" id="2851505">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851511">if</span>&nbsp;<span class="ident" id="2851514">v</span><span class="op" id="2851515">.</span><span class="ident" id="2851516">flag</span><span class="op" id="2851520">&amp;</span><span class="ident" id="2851521">flagIndir</span>&nbsp;<span class="op" id="2851531">!=</span>&nbsp;<span class="num" id="2851534">0</span>&nbsp;<span class="op" id="2851536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2851541">ptr</span>&nbsp;<span class="op" id="2851545">=</span>&nbsp;<span class="op" id="2851547">*</span><span class="op" id="2851548">(</span><span class="op" id="2851549">*</span><span class="ident" id="2851550">unsafe</span><span class="op" id="2851556">.</span><span class="ident" id="2851557">Pointer</span><span class="op" id="2851564">)</span><span class="op" id="2851565">(</span><span class="ident" id="2851566">ptr</span><span class="op" id="2851569">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2851573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851577">return</span>&nbsp;<span class="ident" id="2851584">ptr</span>&nbsp;<span class="op" id="2851588">==</span>&nbsp;<span class="builtintype" id="2851591">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851596">case</span>&nbsp;<span class="ident" id="2851601">Interface</span><span class="op" id="2851610">,</span>&nbsp;<span class="ident" id="2851612">Slice</span><span class="op" id="2851617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2851621">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2851679">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2851738">return</span>&nbsp;<span class="op" id="2851745">*</span><span class="op" id="2851746">(</span><span class="op" id="2851747">*</span><span class="ident" id="2851748">unsafe</span><span class="op" id="2851754">.</span><span class="ident" id="2851755">Pointer</span><span class="op" id="2851762">)</span><span class="op" id="2851763">(</span><span class="ident" id="2851764">v</span><span class="op" id="2851765">.</span><span class="ident" id="2851766">ptr</span><span class="op" id="2851769">)</span>&nbsp;<span class="op" id="2851771">==</span>&nbsp;<span class="builtintype" id="2851774">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2851779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2851782">panic</span><span class="op" id="2851787">(</span><span class="op" id="2851788">&amp;</span><span class="ident" id="2851789">ValueError</span><span class="op" id="2851799">{</span><span class="string" id="2851800">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2851821">,</span>&nbsp;<span class="ident" id="2851823">v</span><span class="op" id="2851824">.</span><span class="ident" id="2851825">kind</span><span class="op" id="2851829">(</span><span class="op" id="2851830">)</span><span class="op" id="2851831">}</span><span class="op" id="2851832">)</span><br>
<span class="lineno"></span><span class="op" id="2851834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2851837">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2851886">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2851930">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2851998">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2852059">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2852127">func</span>&nbsp;<span class="op" id="2852132">(</span><span class="ident" id="2852133">v</span>&nbsp;<span class="ident" id="2852135">Value</span><span class="op" id="2852140">)</span>&nbsp;<span class="ident" id="2852142">IsValid</span><span class="op" id="2852149">(</span><span class="op" id="2852150">)</span>&nbsp;<span class="builtintype" id="2852152">bool</span>&nbsp;<span class="op" id="2852157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852160">return</span>&nbsp;<span class="ident" id="2852167">v</span><span class="op" id="2852168">.</span><span class="ident" id="2852169">flag</span>&nbsp;<span class="op" id="2852174">!=</span>&nbsp;<span class="num" id="2852177">0</span><br>
<span class="lineno"></span><span class="op" id="2852179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2852182">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2852208">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2852281">func</span>&nbsp;<span class="op" id="2852286">(</span><span class="ident" id="2852287">v</span>&nbsp;<span class="ident" id="2852289">Value</span><span class="op" id="2852294">)</span>&nbsp;<span class="ident" id="2852296">Kind</span><span class="op" id="2852300">(</span><span class="op" id="2852301">)</span>&nbsp;<span class="ident" id="2852303">Kind</span>&nbsp;<span class="op" id="2852308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852311">return</span>&nbsp;<span class="ident" id="2852318">v</span><span class="op" id="2852319">.</span><span class="ident" id="2852320">kind</span><span class="op" id="2852324">(</span><span class="op" id="2852325">)</span><br>
<span class="lineno"></span><span class="op" id="2852327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2852330">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2852357">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2852425">func</span>&nbsp;<span class="op" id="2852430">(</span><span class="ident" id="2852431">v</span>&nbsp;<span class="ident" id="2852433">Value</span><span class="op" id="2852438">)</span>&nbsp;<span class="ident" id="2852440">Len</span><span class="op" id="2852443">(</span><span class="op" id="2852444">)</span>&nbsp;<span class="builtintype" id="2852446">int</span>&nbsp;<span class="op" id="2852450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2852453">k</span>&nbsp;<span class="op" id="2852455">:=</span>&nbsp;<span class="ident" id="2852458">v</span><span class="op" id="2852459">.</span><span class="ident" id="2852460">kind</span><span class="op" id="2852464">(</span><span class="op" id="2852465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852468">switch</span>&nbsp;<span class="ident" id="2852475">k</span>&nbsp;<span class="op" id="2852477">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852480">case</span>&nbsp;<span class="ident" id="2852485">Array</span><span class="op" id="2852490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2852494">tt</span>&nbsp;<span class="op" id="2852497">:=</span>&nbsp;<span class="op" id="2852500">(</span><span class="op" id="2852501">*</span><span class="ident" id="2852502">arrayType</span><span class="op" id="2852511">)</span><span class="op" id="2852512">(</span><span class="ident" id="2852513">unsafe</span><span class="op" id="2852519">.</span><span class="ident" id="2852520">Pointer</span><span class="op" id="2852527">(</span><span class="ident" id="2852528">v</span><span class="op" id="2852529">.</span><span class="ident" id="2852530">typ</span><span class="op" id="2852533">)</span><span class="op" id="2852534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852538">return</span>&nbsp;<span class="builtintype" id="2852545">int</span><span class="op" id="2852548">(</span><span class="ident" id="2852549">tt</span><span class="op" id="2852551">.</span><span class="builtinfunc" id="2852552">len</span><span class="op" id="2852555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852558">case</span>&nbsp;<span class="ident" id="2852563">Chan</span><span class="op" id="2852567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852571">return</span>&nbsp;<span class="ident" id="2852578">chanlen</span><span class="op" id="2852585">(</span><span class="ident" id="2852586">v</span><span class="op" id="2852587">.</span><span class="ident" id="2852588">pointer</span><span class="op" id="2852595">(</span><span class="op" id="2852596">)</span><span class="op" id="2852597">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852600">case</span>&nbsp;<span class="ident" id="2852605">Map</span><span class="op" id="2852608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852612">return</span>&nbsp;<span class="ident" id="2852619">maplen</span><span class="op" id="2852625">(</span><span class="ident" id="2852626">v</span><span class="op" id="2852627">.</span><span class="ident" id="2852628">pointer</span><span class="op" id="2852635">(</span><span class="op" id="2852636">)</span><span class="op" id="2852637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852640">case</span>&nbsp;<span class="ident" id="2852645">Slice</span><span class="op" id="2852650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2852654">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852706">return</span>&nbsp;<span class="op" id="2852713">(</span><span class="op" id="2852714">*</span><span class="ident" id="2852715">sliceHeader</span><span class="op" id="2852726">)</span><span class="op" id="2852727">(</span><span class="ident" id="2852728">v</span><span class="op" id="2852729">.</span><span class="ident" id="2852730">ptr</span><span class="op" id="2852733">)</span><span class="op" id="2852734">.</span><span class="ident" id="2852735">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852740">case</span>&nbsp;<span class="ident" id="2852745">String</span><span class="op" id="2852751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2852755">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2852808">return</span>&nbsp;<span class="op" id="2852815">(</span><span class="op" id="2852816">*</span><span class="ident" id="2852817">stringHeader</span><span class="op" id="2852829">)</span><span class="op" id="2852830">(</span><span class="ident" id="2852831">v</span><span class="op" id="2852832">.</span><span class="ident" id="2852833">ptr</span><span class="op" id="2852836">)</span><span class="op" id="2852837">.</span><span class="ident" id="2852838">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2852843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2852846">panic</span><span class="op" id="2852851">(</span><span class="op" id="2852852">&amp;</span><span class="ident" id="2852853">ValueError</span><span class="op" id="2852863">{</span><span class="string" id="2852864">&#34;reflect.Value.Len&#34;</span><span class="op" id="2852883">,</span>&nbsp;<span class="ident" id="2852885">v</span><span class="op" id="2852886">.</span><span class="ident" id="2852887">kind</span><span class="op" id="2852891">(</span><span class="op" id="2852892">)</span><span class="op" id="2852893">}</span><span class="op" id="2852894">)</span><br>
<span class="lineno">980</span><span class="op" id="2852896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2852899">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2852963">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2853000">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2853090">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2853161">func</span>&nbsp;<span class="op" id="2853166">(</span><span class="ident" id="2853167">v</span>&nbsp;<span class="ident" id="2853169">Value</span><span class="op" id="2853174">)</span>&nbsp;<span class="ident" id="2853176">MapIndex</span><span class="op" id="2853184">(</span><span class="ident" id="2853185">key</span>&nbsp;<span class="ident" id="2853189">Value</span><span class="op" id="2853194">)</span>&nbsp;<span class="ident" id="2853196">Value</span>&nbsp;<span class="op" id="2853202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853205">v</span><span class="op" id="2853206">.</span><span class="ident" id="2853207">mustBe</span><span class="op" id="2853213">(</span><span class="ident" id="2853214">Map</span><span class="op" id="2853217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853220">tt</span>&nbsp;<span class="op" id="2853223">:=</span>&nbsp;<span class="op" id="2853226">(</span><span class="op" id="2853227">*</span><span class="ident" id="2853228">mapType</span><span class="op" id="2853235">)</span><span class="op" id="2853236">(</span><span class="ident" id="2853237">unsafe</span><span class="op" id="2853243">.</span><span class="ident" id="2853244">Pointer</span><span class="op" id="2853251">(</span><span class="ident" id="2853252">v</span><span class="op" id="2853253">.</span><span class="ident" id="2853254">typ</span><span class="op" id="2853257">)</span><span class="op" id="2853258">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853262">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853319">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853375">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853432">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853489">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853545">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853602">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853628">key</span>&nbsp;<span class="op" id="2853632">=</span>&nbsp;<span class="ident" id="2853634">key</span><span class="op" id="2853637">.</span><span class="ident" id="2853638">assignTo</span><span class="op" id="2853646">(</span><span class="string" id="2853647">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2853671">,</span>&nbsp;<span class="ident" id="2853673">tt</span><span class="op" id="2853675">.</span><span class="ident" id="2853676">key</span><span class="op" id="2853679">,</span>&nbsp;<span class="builtintype" id="2853681">nil</span><span class="op" id="2853684">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2853688">var</span>&nbsp;<span class="ident" id="2853692">k</span>&nbsp;<span class="ident" id="2853694">unsafe</span><span class="op" id="2853700">.</span><span class="ident" id="2853701">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2853710">if</span>&nbsp;<span class="ident" id="2853713">key</span><span class="op" id="2853716">.</span><span class="ident" id="2853717">flag</span><span class="op" id="2853721">&amp;</span><span class="ident" id="2853722">flagIndir</span>&nbsp;<span class="op" id="2853732">!=</span>&nbsp;<span class="num" id="2853735">0</span>&nbsp;<span class="op" id="2853737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853741">k</span>&nbsp;<span class="op" id="2853743">=</span>&nbsp;<span class="ident" id="2853745">key</span><span class="op" id="2853748">.</span><span class="ident" id="2853749">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853754">}</span>&nbsp;<span class="keyword" id="2853756">else</span>&nbsp;<span class="op" id="2853761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853765">k</span>&nbsp;<span class="op" id="2853767">=</span>&nbsp;<span class="ident" id="2853769">unsafe</span><span class="op" id="2853775">.</span><span class="ident" id="2853776">Pointer</span><span class="op" id="2853783">(</span><span class="op" id="2853784">&amp;</span><span class="ident" id="2853785">key</span><span class="op" id="2853788">.</span><span class="ident" id="2853789">ptr</span><span class="op" id="2853792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853795">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853798">e</span>&nbsp;<span class="op" id="2853800">:=</span>&nbsp;<span class="ident" id="2853803">mapaccess</span><span class="op" id="2853812">(</span><span class="ident" id="2853813">v</span><span class="op" id="2853814">.</span><span class="ident" id="2853815">typ</span><span class="op" id="2853818">,</span>&nbsp;<span class="ident" id="2853820">v</span><span class="op" id="2853821">.</span><span class="ident" id="2853822">pointer</span><span class="op" id="2853829">(</span><span class="op" id="2853830">)</span><span class="op" id="2853831">,</span>&nbsp;<span class="ident" id="2853833">k</span><span class="op" id="2853834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2853837">if</span>&nbsp;<span class="ident" id="2853840">e</span>&nbsp;<span class="op" id="2853842">==</span>&nbsp;<span class="builtintype" id="2853845">nil</span>&nbsp;<span class="op" id="2853849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2853853">return</span>&nbsp;<span class="ident" id="2853860">Value</span><span class="op" id="2853865">{</span><span class="op" id="2853866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2853869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853872">typ</span>&nbsp;<span class="op" id="2853876">:=</span>&nbsp;<span class="ident" id="2853879">tt</span><span class="op" id="2853881">.</span><span class="ident" id="2853882">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853888">fl</span>&nbsp;<span class="op" id="2853891">:=</span>&nbsp;<span class="op" id="2853894">(</span><span class="ident" id="2853895">v</span><span class="op" id="2853896">.</span><span class="ident" id="2853897">flag</span>&nbsp;<span class="op" id="2853902">|</span>&nbsp;<span class="ident" id="2853904">key</span><span class="op" id="2853907">.</span><span class="ident" id="2853908">flag</span><span class="op" id="2853912">)</span>&nbsp;<span class="op" id="2853914">&amp;</span>&nbsp;<span class="ident" id="2853916">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2853924">fl</span>&nbsp;<span class="op" id="2853927">|=</span>&nbsp;<span class="ident" id="2853930">flag</span><span class="op" id="2853934">(</span><span class="ident" id="2853935">typ</span><span class="op" id="2853938">.</span><span class="ident" id="2853939">Kind</span><span class="op" id="2853943">(</span><span class="op" id="2853944">)</span><span class="op" id="2853945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2853948">if</span>&nbsp;<span class="ident" id="2853951">ifaceIndir</span><span class="op" id="2853961">(</span><span class="ident" id="2853962">typ</span><span class="op" id="2853965">)</span>&nbsp;<span class="op" id="2853967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2853971">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854017">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854057">c</span>&nbsp;<span class="op" id="2854059">:=</span>&nbsp;<span class="ident" id="2854062">unsafe_New</span><span class="op" id="2854072">(</span><span class="ident" id="2854073">typ</span><span class="op" id="2854076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854080">memmove</span><span class="op" id="2854087">(</span><span class="ident" id="2854088">c</span><span class="op" id="2854089">,</span>&nbsp;<span class="ident" id="2854091">e</span><span class="op" id="2854092">,</span>&nbsp;<span class="ident" id="2854094">typ</span><span class="op" id="2854097">.</span><span class="ident" id="2854098">size</span><span class="op" id="2854102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854106">return</span>&nbsp;<span class="ident" id="2854113">Value</span><span class="op" id="2854118">{</span><span class="ident" id="2854119">typ</span><span class="op" id="2854122">,</span>&nbsp;<span class="ident" id="2854124">c</span><span class="op" id="2854125">,</span>&nbsp;<span class="ident" id="2854127">fl</span>&nbsp;<span class="op" id="2854130">|</span>&nbsp;<span class="ident" id="2854132">flagIndir</span><span class="op" id="2854141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854144">}</span>&nbsp;<span class="keyword" id="2854146">else</span>&nbsp;<span class="op" id="2854151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854155">return</span>&nbsp;<span class="ident" id="2854162">Value</span><span class="op" id="2854167">{</span><span class="ident" id="2854168">typ</span><span class="op" id="2854171">,</span>&nbsp;<span class="op" id="2854173">*</span><span class="op" id="2854174">(</span><span class="op" id="2854175">*</span><span class="ident" id="2854176">unsafe</span><span class="op" id="2854182">.</span><span class="ident" id="2854183">Pointer</span><span class="op" id="2854190">)</span><span class="op" id="2854191">(</span><span class="ident" id="2854192">e</span><span class="op" id="2854193">)</span><span class="op" id="2854194">,</span>&nbsp;<span class="ident" id="2854196">fl</span><span class="op" id="2854198">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854201">}</span><br>
<span class="lineno"></span><span class="op" id="2854203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2854206">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2854277">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2854302">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2854339">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2854395">func</span>&nbsp;<span class="op" id="2854400">(</span><span class="ident" id="2854401">v</span>&nbsp;<span class="ident" id="2854403">Value</span><span class="op" id="2854408">)</span>&nbsp;<span class="ident" id="2854410">MapKeys</span><span class="op" id="2854417">(</span><span class="op" id="2854418">)</span>&nbsp;<span class="op" id="2854420">[</span><span class="op" id="2854421">]</span><span class="ident" id="2854422">Value</span>&nbsp;<span class="op" id="2854428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854431">v</span><span class="op" id="2854432">.</span><span class="ident" id="2854433">mustBe</span><span class="op" id="2854439">(</span><span class="ident" id="2854440">Map</span><span class="op" id="2854443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854446">tt</span>&nbsp;<span class="op" id="2854449">:=</span>&nbsp;<span class="op" id="2854452">(</span><span class="op" id="2854453">*</span><span class="ident" id="2854454">mapType</span><span class="op" id="2854461">)</span><span class="op" id="2854462">(</span><span class="ident" id="2854463">unsafe</span><span class="op" id="2854469">.</span><span class="ident" id="2854470">Pointer</span><span class="op" id="2854477">(</span><span class="ident" id="2854478">v</span><span class="op" id="2854479">.</span><span class="ident" id="2854480">typ</span><span class="op" id="2854483">)</span><span class="op" id="2854484">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854487">keyType</span>&nbsp;<span class="op" id="2854495">:=</span>&nbsp;<span class="ident" id="2854498">tt</span><span class="op" id="2854500">.</span><span class="ident" id="2854501">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854507">fl</span>&nbsp;<span class="op" id="2854510">:=</span>&nbsp;<span class="ident" id="2854513">v</span><span class="op" id="2854514">.</span><span class="ident" id="2854515">flag</span><span class="op" id="2854519">&amp;</span><span class="ident" id="2854520">flagRO</span>&nbsp;<span class="op" id="2854527">|</span>&nbsp;<span class="ident" id="2854529">flag</span><span class="op" id="2854533">(</span><span class="ident" id="2854534">keyType</span><span class="op" id="2854541">.</span><span class="ident" id="2854542">Kind</span><span class="op" id="2854546">(</span><span class="op" id="2854547">)</span><span class="op" id="2854548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854552">m</span>&nbsp;<span class="op" id="2854554">:=</span>&nbsp;<span class="ident" id="2854557">v</span><span class="op" id="2854558">.</span><span class="ident" id="2854559">pointer</span><span class="op" id="2854566">(</span><span class="op" id="2854567">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854570">mlen</span>&nbsp;<span class="op" id="2854575">:=</span>&nbsp;<span class="builtintype" id="2854578">int</span><span class="op" id="2854581">(</span><span class="num" id="2854582">0</span><span class="op" id="2854583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854586">if</span>&nbsp;<span class="ident" id="2854589">m</span>&nbsp;<span class="op" id="2854591">!=</span>&nbsp;<span class="builtintype" id="2854594">nil</span>&nbsp;<span class="op" id="2854598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854602">mlen</span>&nbsp;<span class="op" id="2854607">=</span>&nbsp;<span class="ident" id="2854609">maplen</span><span class="op" id="2854615">(</span><span class="ident" id="2854616">m</span><span class="op" id="2854617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854623">it</span>&nbsp;<span class="op" id="2854626">:=</span>&nbsp;<span class="ident" id="2854629">mapiterinit</span><span class="op" id="2854640">(</span><span class="ident" id="2854641">v</span><span class="op" id="2854642">.</span><span class="ident" id="2854643">typ</span><span class="op" id="2854646">,</span>&nbsp;<span class="ident" id="2854648">m</span><span class="op" id="2854649">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854652">a</span>&nbsp;<span class="op" id="2854654">:=</span>&nbsp;<span class="builtinfunc" id="2854657">make</span><span class="op" id="2854661">(</span><span class="op" id="2854662">[</span><span class="op" id="2854663">]</span><span class="ident" id="2854664">Value</span><span class="op" id="2854669">,</span>&nbsp;<span class="ident" id="2854671">mlen</span><span class="op" id="2854675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854678">var</span>&nbsp;<span class="ident" id="2854682">i</span>&nbsp;<span class="builtintype" id="2854684">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854689">for</span>&nbsp;<span class="ident" id="2854693">i</span>&nbsp;<span class="op" id="2854695">=</span>&nbsp;<span class="num" id="2854697">0</span><span class="op" id="2854698">;</span>&nbsp;<span class="ident" id="2854700">i</span>&nbsp;<span class="op" id="2854702">&lt;</span>&nbsp;<span class="builtinfunc" id="2854704">len</span><span class="op" id="2854707">(</span><span class="ident" id="2854708">a</span><span class="op" id="2854709">)</span><span class="op" id="2854710">;</span>&nbsp;<span class="ident" id="2854712">i</span><span class="op" id="2854713">++</span>&nbsp;<span class="op" id="2854716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2854720">key</span>&nbsp;<span class="op" id="2854724">:=</span>&nbsp;<span class="ident" id="2854727">mapiterkey</span><span class="op" id="2854737">(</span><span class="ident" id="2854738">it</span><span class="op" id="2854740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854744">if</span>&nbsp;<span class="ident" id="2854747">key</span>&nbsp;<span class="op" id="2854751">==</span>&nbsp;<span class="builtintype" id="2854754">nil</span>&nbsp;<span class="op" id="2854758">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854763">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854816">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854874">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854900">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2854908">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2854912">if</span>&nbsp;<span class="ident" id="2854915">ifaceIndir</span><span class="op" id="2854925">(</span><span class="ident" id="2854926">keyType</span><span class="op" id="2854933">)</span>&nbsp;<span class="op" id="2854935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854940">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2854987">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855028">c</span>&nbsp;<span class="op" id="2855030">:=</span>&nbsp;<span class="ident" id="2855033">unsafe_New</span><span class="op" id="2855043">(</span><span class="ident" id="2855044">keyType</span><span class="op" id="2855051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855056">memmove</span><span class="op" id="2855063">(</span><span class="ident" id="2855064">c</span><span class="op" id="2855065">,</span>&nbsp;<span class="ident" id="2855067">key</span><span class="op" id="2855070">,</span>&nbsp;<span class="ident" id="2855072">keyType</span><span class="op" id="2855079">.</span><span class="ident" id="2855080">size</span><span class="op" id="2855084">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855089">a</span><span class="op" id="2855090">[</span><span class="ident" id="2855091">i</span><span class="op" id="2855092">]</span>&nbsp;<span class="op" id="2855094">=</span>&nbsp;<span class="ident" id="2855096">Value</span><span class="op" id="2855101">{</span><span class="ident" id="2855102">keyType</span><span class="op" id="2855109">,</span>&nbsp;<span class="ident" id="2855111">c</span><span class="op" id="2855112">,</span>&nbsp;<span class="ident" id="2855114">fl</span>&nbsp;<span class="op" id="2855117">|</span>&nbsp;<span class="ident" id="2855119">flagIndir</span><span class="op" id="2855128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855132">}</span>&nbsp;<span class="keyword" id="2855134">else</span>&nbsp;<span class="op" id="2855139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855144">a</span><span class="op" id="2855145">[</span><span class="ident" id="2855146">i</span><span class="op" id="2855147">]</span>&nbsp;<span class="op" id="2855149">=</span>&nbsp;<span class="ident" id="2855151">Value</span><span class="op" id="2855156">{</span><span class="ident" id="2855157">keyType</span><span class="op" id="2855164">,</span>&nbsp;<span class="op" id="2855166">*</span><span class="op" id="2855167">(</span><span class="op" id="2855168">*</span><span class="ident" id="2855169">unsafe</span><span class="op" id="2855175">.</span><span class="ident" id="2855176">Pointer</span><span class="op" id="2855183">)</span><span class="op" id="2855184">(</span><span class="ident" id="2855185">key</span><span class="op" id="2855188">)</span><span class="op" id="2855189">,</span>&nbsp;<span class="ident" id="2855191">fl</span><span class="op" id="2855193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855201">mapiternext</span><span class="op" id="2855212">(</span><span class="ident" id="2855213">it</span><span class="op" id="2855215">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2855221">return</span>&nbsp;<span class="ident" id="2855228">a</span><span class="op" id="2855229">[</span><span class="op" id="2855230">:</span><span class="ident" id="2855231">i</span><span class="op" id="2855232">]</span><br>
<span class="lineno"></span><span class="op" id="2855234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2855237">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2855306">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2855377">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2855449">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2855521">func</span>&nbsp;<span class="op" id="2855526">(</span><span class="ident" id="2855527">v</span>&nbsp;<span class="ident" id="2855529">Value</span><span class="op" id="2855534">)</span>&nbsp;<span class="ident" id="2855536">Method</span><span class="op" id="2855542">(</span><span class="ident" id="2855543">i</span>&nbsp;<span class="builtintype" id="2855545">int</span><span class="op" id="2855548">)</span>&nbsp;<span class="ident" id="2855550">Value</span>&nbsp;<span class="op" id="2855556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2855559">if</span>&nbsp;<span class="ident" id="2855562">v</span><span class="op" id="2855563">.</span><span class="ident" id="2855564">typ</span>&nbsp;<span class="op" id="2855568">==</span>&nbsp;<span class="builtintype" id="2855571">nil</span>&nbsp;<span class="op" id="2855575">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2855579">panic</span><span class="op" id="2855584">(</span><span class="op" id="2855585">&amp;</span><span class="ident" id="2855586">ValueError</span><span class="op" id="2855596">{</span><span class="string" id="2855597">&#34;reflect.Value.Method&#34;</span><span class="op" id="2855619">,</span>&nbsp;<span class="ident" id="2855621">Invalid</span><span class="op" id="2855628">}</span><span class="op" id="2855629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2855635">if</span>&nbsp;<span class="ident" id="2855638">v</span><span class="op" id="2855639">.</span><span class="ident" id="2855640">flag</span><span class="op" id="2855644">&amp;</span><span class="ident" id="2855645">flagMethod</span>&nbsp;<span class="op" id="2855656">!=</span>&nbsp;<span class="num" id="2855659">0</span>&nbsp;<span class="op" id="2855661">||</span>&nbsp;<span class="builtintype" id="2855664">uint</span><span class="op" id="2855668">(</span><span class="ident" id="2855669">i</span><span class="op" id="2855670">)</span>&nbsp;<span class="op" id="2855672">&gt;=</span>&nbsp;<span class="builtintype" id="2855675">uint</span><span class="op" id="2855679">(</span><span class="ident" id="2855680">v</span><span class="op" id="2855681">.</span><span class="ident" id="2855682">typ</span><span class="op" id="2855685">.</span><span class="ident" id="2855686">NumMethod</span><span class="op" id="2855695">(</span><span class="op" id="2855696">)</span><span class="op" id="2855697">)</span>&nbsp;<span class="op" id="2855699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2855703">panic</span><span class="op" id="2855708">(</span><span class="string" id="2855709">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2855745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855748">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2855751">if</span>&nbsp;<span class="ident" id="2855754">v</span><span class="op" id="2855755">.</span><span class="ident" id="2855756">typ</span><span class="op" id="2855759">.</span><span class="ident" id="2855760">Kind</span><span class="op" id="2855764">(</span><span class="op" id="2855765">)</span>&nbsp;<span class="op" id="2855767">==</span>&nbsp;<span class="ident" id="2855770">Interface</span>&nbsp;<span class="op" id="2855780">&amp;&amp;</span>&nbsp;<span class="ident" id="2855783">v</span><span class="op" id="2855784">.</span><span class="ident" id="2855785">IsNil</span><span class="op" id="2855790">(</span><span class="op" id="2855791">)</span>&nbsp;<span class="op" id="2855793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2855797">panic</span><span class="op" id="2855802">(</span><span class="string" id="2855803">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2855843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2855846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855849">fl</span>&nbsp;<span class="op" id="2855852">:=</span>&nbsp;<span class="ident" id="2855855">v</span><span class="op" id="2855856">.</span><span class="ident" id="2855857">flag</span>&nbsp;<span class="op" id="2855862">&amp;</span>&nbsp;<span class="op" id="2855864">(</span><span class="ident" id="2855865">flagRO</span>&nbsp;<span class="op" id="2855872">|</span>&nbsp;<span class="ident" id="2855874">flagIndir</span><span class="op" id="2855883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855886">fl</span>&nbsp;<span class="op" id="2855889">|=</span>&nbsp;<span class="ident" id="2855892">flag</span><span class="op" id="2855896">(</span><span class="ident" id="2855897">Func</span><span class="op" id="2855901">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2855904">fl</span>&nbsp;<span class="op" id="2855907">|=</span>&nbsp;<span class="ident" id="2855910">flag</span><span class="op" id="2855914">(</span><span class="ident" id="2855915">i</span><span class="op" id="2855916">)</span><span class="op" id="2855917">&lt;&lt;</span><span class="ident" id="2855919">flagMethodShift</span>&nbsp;<span class="op" id="2855935">|</span>&nbsp;<span class="ident" id="2855937">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2855949">return</span>&nbsp;<span class="ident" id="2855956">Value</span><span class="op" id="2855961">{</span><span class="ident" id="2855962">v</span><span class="op" id="2855963">.</span><span class="ident" id="2855964">typ</span><span class="op" id="2855967">,</span>&nbsp;<span class="ident" id="2855969">v</span><span class="op" id="2855970">.</span><span class="ident" id="2855971">ptr</span><span class="op" id="2855974">,</span>&nbsp;<span class="ident" id="2855976">fl</span><span class="op" id="2855978">}</span><br>
<span class="lineno"></span><span class="op" id="2855980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2855983">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2856053">func</span>&nbsp;<span class="op" id="2856058">(</span><span class="ident" id="2856059">v</span>&nbsp;<span class="ident" id="2856061">Value</span><span class="op" id="2856066">)</span>&nbsp;<span class="ident" id="2856068">NumMethod</span><span class="op" id="2856077">(</span><span class="op" id="2856078">)</span>&nbsp;<span class="builtintype" id="2856080">int</span>&nbsp;<span class="op" id="2856084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856087">if</span>&nbsp;<span class="ident" id="2856090">v</span><span class="op" id="2856091">.</span><span class="ident" id="2856092">typ</span>&nbsp;<span class="op" id="2856096">==</span>&nbsp;<span class="builtintype" id="2856099">nil</span>&nbsp;<span class="op" id="2856103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2856107">panic</span><span class="op" id="2856112">(</span><span class="op" id="2856113">&amp;</span><span class="ident" id="2856114">ValueError</span><span class="op" id="2856124">{</span><span class="string" id="2856125">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2856150">,</span>&nbsp;<span class="ident" id="2856152">Invalid</span><span class="op" id="2856159">}</span><span class="op" id="2856160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856166">if</span>&nbsp;<span class="ident" id="2856169">v</span><span class="op" id="2856170">.</span><span class="ident" id="2856171">flag</span><span class="op" id="2856175">&amp;</span><span class="ident" id="2856176">flagMethod</span>&nbsp;<span class="op" id="2856187">!=</span>&nbsp;<span class="num" id="2856190">0</span>&nbsp;<span class="op" id="2856192">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856196">return</span>&nbsp;<span class="num" id="2856203">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856209">return</span>&nbsp;<span class="ident" id="2856216">v</span><span class="op" id="2856217">.</span><span class="ident" id="2856218">typ</span><span class="op" id="2856221">.</span><span class="ident" id="2856222">NumMethod</span><span class="op" id="2856231">(</span><span class="op" id="2856232">)</span><br>
<span class="lineno"></span><span class="op" id="2856234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2856237">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2856306">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2856335">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2856406">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2856478">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2856531">func</span>&nbsp;<span class="op" id="2856536">(</span><span class="ident" id="2856537">v</span>&nbsp;<span class="ident" id="2856539">Value</span><span class="op" id="2856544">)</span>&nbsp;<span class="ident" id="2856546">MethodByName</span><span class="op" id="2856558">(</span><span class="ident" id="2856559">name</span>&nbsp;<span class="builtintype" id="2856564">string</span><span class="op" id="2856570">)</span>&nbsp;<span class="ident" id="2856572">Value</span>&nbsp;<span class="op" id="2856578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856581">if</span>&nbsp;<span class="ident" id="2856584">v</span><span class="op" id="2856585">.</span><span class="ident" id="2856586">typ</span>&nbsp;<span class="op" id="2856590">==</span>&nbsp;<span class="builtintype" id="2856593">nil</span>&nbsp;<span class="op" id="2856597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2856601">panic</span><span class="op" id="2856606">(</span><span class="op" id="2856607">&amp;</span><span class="ident" id="2856608">ValueError</span><span class="op" id="2856618">{</span><span class="string" id="2856619">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2856647">,</span>&nbsp;<span class="ident" id="2856649">Invalid</span><span class="op" id="2856656">}</span><span class="op" id="2856657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856663">if</span>&nbsp;<span class="ident" id="2856666">v</span><span class="op" id="2856667">.</span><span class="ident" id="2856668">flag</span><span class="op" id="2856672">&amp;</span><span class="ident" id="2856673">flagMethod</span>&nbsp;<span class="op" id="2856684">!=</span>&nbsp;<span class="num" id="2856687">0</span>&nbsp;<span class="op" id="2856689">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856693">return</span>&nbsp;<span class="ident" id="2856700">Value</span><span class="op" id="2856705">{</span><span class="op" id="2856706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856712">m</span><span class="op" id="2856713">,</span>&nbsp;<span class="ident" id="2856715">ok</span>&nbsp;<span class="op" id="2856718">:=</span>&nbsp;<span class="ident" id="2856721">v</span><span class="op" id="2856722">.</span><span class="ident" id="2856723">typ</span><span class="op" id="2856726">.</span><span class="ident" id="2856727">MethodByName</span><span class="op" id="2856739">(</span><span class="ident" id="2856740">name</span><span class="op" id="2856744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856747">if</span>&nbsp;<span class="op" id="2856750">!</span><span class="ident" id="2856751">ok</span>&nbsp;<span class="op" id="2856754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856758">return</span>&nbsp;<span class="ident" id="2856765">Value</span><span class="op" id="2856770">{</span><span class="op" id="2856771">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2856774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856777">return</span>&nbsp;<span class="ident" id="2856784">v</span><span class="op" id="2856785">.</span><span class="ident" id="2856786">Method</span><span class="op" id="2856792">(</span><span class="ident" id="2856793">m</span><span class="op" id="2856794">.</span><span class="ident" id="2856795">Index</span><span class="op" id="2856800">)</span><br>
<span class="lineno"></span><span class="op" id="2856802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2856805">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2856863">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2856903">func</span>&nbsp;<span class="op" id="2856908">(</span><span class="ident" id="2856909">v</span>&nbsp;<span class="ident" id="2856911">Value</span><span class="op" id="2856916">)</span>&nbsp;<span class="ident" id="2856918">NumField</span><span class="op" id="2856926">(</span><span class="op" id="2856927">)</span>&nbsp;<span class="builtintype" id="2856929">int</span>&nbsp;<span class="op" id="2856933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856936">v</span><span class="op" id="2856937">.</span><span class="ident" id="2856938">mustBe</span><span class="op" id="2856944">(</span><span class="ident" id="2856945">Struct</span><span class="op" id="2856951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2856954">tt</span>&nbsp;<span class="op" id="2856957">:=</span>&nbsp;<span class="op" id="2856960">(</span><span class="op" id="2856961">*</span><span class="ident" id="2856962">structType</span><span class="op" id="2856972">)</span><span class="op" id="2856973">(</span><span class="ident" id="2856974">unsafe</span><span class="op" id="2856980">.</span><span class="ident" id="2856981">Pointer</span><span class="op" id="2856988">(</span><span class="ident" id="2856989">v</span><span class="op" id="2856990">.</span><span class="ident" id="2856991">typ</span><span class="op" id="2856994">)</span><span class="op" id="2856995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2856998">return</span>&nbsp;<span class="builtinfunc" id="2857005">len</span><span class="op" id="2857008">(</span><span class="ident" id="2857009">tt</span><span class="op" id="2857011">.</span><span class="ident" id="2857012">fields</span><span class="op" id="2857018">)</span><br>
<span class="lineno">1120</span><span class="op" id="2857020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2857023">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2857110">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2857167">func</span>&nbsp;<span class="op" id="2857172">(</span><span class="ident" id="2857173">v</span>&nbsp;<span class="ident" id="2857175">Value</span><span class="op" id="2857180">)</span>&nbsp;<span class="ident" id="2857182">OverflowComplex</span><span class="op" id="2857197">(</span><span class="ident" id="2857198">x</span>&nbsp;<span class="builtintype" id="2857200">complex128</span><span class="op" id="2857210">)</span>&nbsp;<span class="builtintype" id="2857212">bool</span>&nbsp;<span class="op" id="2857217">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2857220">k</span>&nbsp;<span class="op" id="2857222">:=</span>&nbsp;<span class="ident" id="2857225">v</span><span class="op" id="2857226">.</span><span class="ident" id="2857227">kind</span><span class="op" id="2857231">(</span><span class="op" id="2857232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857235">switch</span>&nbsp;<span class="ident" id="2857242">k</span>&nbsp;<span class="op" id="2857244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857247">case</span>&nbsp;<span class="ident" id="2857252">Complex64</span><span class="op" id="2857261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857265">return</span>&nbsp;<span class="ident" id="2857272">overflowFloat32</span><span class="op" id="2857287">(</span><span class="builtinfunc" id="2857288">real</span><span class="op" id="2857292">(</span><span class="ident" id="2857293">x</span><span class="op" id="2857294">)</span><span class="op" id="2857295">)</span>&nbsp;<span class="op" id="2857297">||</span>&nbsp;<span class="ident" id="2857300">overflowFloat32</span><span class="op" id="2857315">(</span><span class="builtinfunc" id="2857316">imag</span><span class="op" id="2857320">(</span><span class="ident" id="2857321">x</span><span class="op" id="2857322">)</span><span class="op" id="2857323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857326">case</span>&nbsp;<span class="ident" id="2857331">Complex128</span><span class="op" id="2857341">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857345">return</span>&nbsp;<span class="builtintype" id="2857352">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2857359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2857362">panic</span><span class="op" id="2857367">(</span><span class="op" id="2857368">&amp;</span><span class="ident" id="2857369">ValueError</span><span class="op" id="2857379">{</span><span class="string" id="2857380">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2857411">,</span>&nbsp;<span class="ident" id="2857413">v</span><span class="op" id="2857414">.</span><span class="ident" id="2857415">kind</span><span class="op" id="2857419">(</span><span class="op" id="2857420">)</span><span class="op" id="2857421">}</span><span class="op" id="2857422">)</span><br>
<span class="lineno"></span><span class="op" id="2857424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2857427">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2857509">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2857561">func</span>&nbsp;<span class="op" id="2857566">(</span><span class="ident" id="2857567">v</span>&nbsp;<span class="ident" id="2857569">Value</span><span class="op" id="2857574">)</span>&nbsp;<span class="ident" id="2857576">OverflowFloat</span><span class="op" id="2857589">(</span><span class="ident" id="2857590">x</span>&nbsp;<span class="builtintype" id="2857592">float64</span><span class="op" id="2857599">)</span>&nbsp;<span class="builtintype" id="2857601">bool</span>&nbsp;<span class="op" id="2857606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2857609">k</span>&nbsp;<span class="op" id="2857611">:=</span>&nbsp;<span class="ident" id="2857614">v</span><span class="op" id="2857615">.</span><span class="ident" id="2857616">kind</span><span class="op" id="2857620">(</span><span class="op" id="2857621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857624">switch</span>&nbsp;<span class="ident" id="2857631">k</span>&nbsp;<span class="op" id="2857633">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857636">case</span>&nbsp;<span class="ident" id="2857641">Float32</span><span class="op" id="2857648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857652">return</span>&nbsp;<span class="ident" id="2857659">overflowFloat32</span><span class="op" id="2857674">(</span><span class="ident" id="2857675">x</span><span class="op" id="2857676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857679">case</span>&nbsp;<span class="ident" id="2857684">Float64</span><span class="op" id="2857691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857695">return</span>&nbsp;<span class="builtintype" id="2857702">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2857709">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2857712">panic</span><span class="op" id="2857717">(</span><span class="op" id="2857718">&amp;</span><span class="ident" id="2857719">ValueError</span><span class="op" id="2857729">{</span><span class="string" id="2857730">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2857759">,</span>&nbsp;<span class="ident" id="2857761">v</span><span class="op" id="2857762">.</span><span class="ident" id="2857763">kind</span><span class="op" id="2857767">(</span><span class="op" id="2857768">)</span><span class="op" id="2857769">}</span><span class="op" id="2857770">)</span><br>
<span class="lineno"></span><span class="op" id="2857772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2857775">func</span>&nbsp;<span class="ident" id="2857780">overflowFloat32</span><span class="op" id="2857795">(</span><span class="ident" id="2857796">x</span>&nbsp;<span class="builtintype" id="2857798">float64</span><span class="op" id="2857805">)</span>&nbsp;<span class="builtintype" id="2857807">bool</span>&nbsp;<span class="op" id="2857812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857815">if</span>&nbsp;<span class="ident" id="2857818">x</span>&nbsp;<span class="op" id="2857820">&lt;</span>&nbsp;<span class="num" id="2857822">0</span>&nbsp;<span class="op" id="2857824">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2857828">x</span>&nbsp;<span class="op" id="2857830">=</span>&nbsp;<span class="op" id="2857832">-</span><span class="ident" id="2857833">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2857836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2857839">return</span>&nbsp;<span class="ident" id="2857846">math</span><span class="op" id="2857850">.</span><span class="ident" id="2857851">MaxFloat32</span>&nbsp;<span class="op" id="2857862">&lt;</span>&nbsp;<span class="ident" id="2857864">x</span>&nbsp;<span class="op" id="2857866">&amp;&amp;</span>&nbsp;<span class="ident" id="2857869">x</span>&nbsp;<span class="op" id="2857871">&lt;=</span>&nbsp;<span class="ident" id="2857874">math</span><span class="op" id="2857878">.</span><span class="ident" id="2857879">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2857890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2857893">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2857971">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2858038">func</span>&nbsp;<span class="op" id="2858043">(</span><span class="ident" id="2858044">v</span>&nbsp;<span class="ident" id="2858046">Value</span><span class="op" id="2858051">)</span>&nbsp;<span class="ident" id="2858053">OverflowInt</span><span class="op" id="2858064">(</span><span class="ident" id="2858065">x</span>&nbsp;<span class="ident" id="2858067">int64</span><span class="op" id="2858072">)</span>&nbsp;<span class="builtintype" id="2858074">bool</span>&nbsp;<span class="op" id="2858079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858082">k</span>&nbsp;<span class="op" id="2858084">:=</span>&nbsp;<span class="ident" id="2858087">v</span><span class="op" id="2858088">.</span><span class="ident" id="2858089">kind</span><span class="op" id="2858093">(</span><span class="op" id="2858094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858097">switch</span>&nbsp;<span class="ident" id="2858104">k</span>&nbsp;<span class="op" id="2858106">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858109">case</span>&nbsp;<span class="ident" id="2858114">Int</span><span class="op" id="2858117">,</span>&nbsp;<span class="ident" id="2858119">Int8</span><span class="op" id="2858123">,</span>&nbsp;<span class="ident" id="2858125">Int16</span><span class="op" id="2858130">,</span>&nbsp;<span class="ident" id="2858132">Int32</span><span class="op" id="2858137">,</span>&nbsp;<span class="ident" id="2858139">Int64</span><span class="op" id="2858144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858148">bitSize</span>&nbsp;<span class="op" id="2858156">:=</span>&nbsp;<span class="ident" id="2858159">v</span><span class="op" id="2858160">.</span><span class="ident" id="2858161">typ</span><span class="op" id="2858164">.</span><span class="ident" id="2858165">size</span>&nbsp;<span class="op" id="2858170">*</span>&nbsp;<span class="num" id="2858172">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858176">trunc</span>&nbsp;<span class="op" id="2858182">:=</span>&nbsp;<span class="op" id="2858185">(</span><span class="ident" id="2858186">x</span>&nbsp;<span class="op" id="2858188">&lt;&lt;</span>&nbsp;<span class="op" id="2858191">(</span><span class="num" id="2858192">64</span>&nbsp;<span class="op" id="2858195">-</span>&nbsp;<span class="ident" id="2858197">bitSize</span><span class="op" id="2858204">)</span><span class="op" id="2858205">)</span>&nbsp;<span class="op" id="2858207">&gt;&gt;</span>&nbsp;<span class="op" id="2858210">(</span><span class="num" id="2858211">64</span>&nbsp;<span class="op" id="2858214">-</span>&nbsp;<span class="ident" id="2858216">bitSize</span><span class="op" id="2858223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858227">return</span>&nbsp;<span class="ident" id="2858234">x</span>&nbsp;<span class="op" id="2858236">!=</span>&nbsp;<span class="ident" id="2858239">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2858246">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2858249">panic</span><span class="op" id="2858254">(</span><span class="op" id="2858255">&amp;</span><span class="ident" id="2858256">ValueError</span><span class="op" id="2858266">{</span><span class="string" id="2858267">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2858294">,</span>&nbsp;<span class="ident" id="2858296">v</span><span class="op" id="2858297">.</span><span class="ident" id="2858298">kind</span><span class="op" id="2858302">(</span><span class="op" id="2858303">)</span><span class="op" id="2858304">}</span><span class="op" id="2858305">)</span><br>
<span class="lineno"></span><span class="op" id="2858307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2858310">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2858390">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2858471">func</span>&nbsp;<span class="op" id="2858476">(</span><span class="ident" id="2858477">v</span>&nbsp;<span class="ident" id="2858479">Value</span><span class="op" id="2858484">)</span>&nbsp;<span class="ident" id="2858486">OverflowUint</span><span class="op" id="2858498">(</span><span class="ident" id="2858499">x</span>&nbsp;<span class="ident" id="2858501">uint64</span><span class="op" id="2858507">)</span>&nbsp;<span class="builtintype" id="2858509">bool</span>&nbsp;<span class="op" id="2858514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858517">k</span>&nbsp;<span class="op" id="2858519">:=</span>&nbsp;<span class="ident" id="2858522">v</span><span class="op" id="2858523">.</span><span class="ident" id="2858524">kind</span><span class="op" id="2858528">(</span><span class="op" id="2858529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858532">switch</span>&nbsp;<span class="ident" id="2858539">k</span>&nbsp;<span class="op" id="2858541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858544">case</span>&nbsp;<span class="ident" id="2858549">Uint</span><span class="op" id="2858553">,</span>&nbsp;<span class="ident" id="2858555">Uintptr</span><span class="op" id="2858562">,</span>&nbsp;<span class="ident" id="2858564">Uint8</span><span class="op" id="2858569">,</span>&nbsp;<span class="ident" id="2858571">Uint16</span><span class="op" id="2858577">,</span>&nbsp;<span class="ident" id="2858579">Uint32</span><span class="op" id="2858585">,</span>&nbsp;<span class="ident" id="2858587">Uint64</span><span class="op" id="2858593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858597">bitSize</span>&nbsp;<span class="op" id="2858605">:=</span>&nbsp;<span class="ident" id="2858608">v</span><span class="op" id="2858609">.</span><span class="ident" id="2858610">typ</span><span class="op" id="2858613">.</span><span class="ident" id="2858614">size</span>&nbsp;<span class="op" id="2858619">*</span>&nbsp;<span class="num" id="2858621">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2858625">trunc</span>&nbsp;<span class="op" id="2858631">:=</span>&nbsp;<span class="op" id="2858634">(</span><span class="ident" id="2858635">x</span>&nbsp;<span class="op" id="2858637">&lt;&lt;</span>&nbsp;<span class="op" id="2858640">(</span><span class="num" id="2858641">64</span>&nbsp;<span class="op" id="2858644">-</span>&nbsp;<span class="ident" id="2858646">bitSize</span><span class="op" id="2858653">)</span><span class="op" id="2858654">)</span>&nbsp;<span class="op" id="2858656">&gt;&gt;</span>&nbsp;<span class="op" id="2858659">(</span><span class="num" id="2858660">64</span>&nbsp;<span class="op" id="2858663">-</span>&nbsp;<span class="ident" id="2858665">bitSize</span><span class="op" id="2858672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2858676">return</span>&nbsp;<span class="ident" id="2858683">x</span>&nbsp;<span class="op" id="2858685">!=</span>&nbsp;<span class="ident" id="2858688">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2858695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2858698">panic</span><span class="op" id="2858703">(</span><span class="op" id="2858704">&amp;</span><span class="ident" id="2858705">ValueError</span><span class="op" id="2858715">{</span><span class="string" id="2858716">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2858744">,</span>&nbsp;<span class="ident" id="2858746">v</span><span class="op" id="2858747">.</span><span class="ident" id="2858748">kind</span><span class="op" id="2858752">(</span><span class="op" id="2858753">)</span><span class="op" id="2858754">}</span><span class="op" id="2858755">)</span><br>
<span class="lineno"></span><span class="op" id="2858757">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2858760">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2858803">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2858859">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2858911">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2858963">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2859042">//</span><br>
<span class="lineno"></span><span class="comment" id="2859045">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2859107">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2859165">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2859225">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2859281">//</span><br>
<span class="lineno"></span><span class="comment" id="2859284">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2859346">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2859411">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2859485">func</span>&nbsp;<span class="op" id="2859490">(</span><span class="ident" id="2859491">v</span>&nbsp;<span class="ident" id="2859493">Value</span><span class="op" id="2859498">)</span>&nbsp;<span class="ident" id="2859500">Pointer</span><span class="op" id="2859507">(</span><span class="op" id="2859508">)</span>&nbsp;<span class="builtintype" id="2859510">uintptr</span>&nbsp;<span class="op" id="2859518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859521">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2859541">k</span>&nbsp;<span class="op" id="2859543">:=</span>&nbsp;<span class="ident" id="2859546">v</span><span class="op" id="2859547">.</span><span class="ident" id="2859548">kind</span><span class="op" id="2859552">(</span><span class="op" id="2859553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2859556">switch</span>&nbsp;<span class="ident" id="2859563">k</span>&nbsp;<span class="op" id="2859565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2859568">case</span>&nbsp;<span class="ident" id="2859573">Chan</span><span class="op" id="2859577">,</span>&nbsp;<span class="ident" id="2859579">Map</span><span class="op" id="2859582">,</span>&nbsp;<span class="ident" id="2859584">Ptr</span><span class="op" id="2859587">,</span>&nbsp;<span class="ident" id="2859589">UnsafePointer</span><span class="op" id="2859602">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2859606">return</span>&nbsp;<span class="builtintype" id="2859613">uintptr</span><span class="op" id="2859620">(</span><span class="ident" id="2859621">v</span><span class="op" id="2859622">.</span><span class="ident" id="2859623">pointer</span><span class="op" id="2859630">(</span><span class="op" id="2859631">)</span><span class="op" id="2859632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2859635">case</span>&nbsp;<span class="ident" id="2859640">Func</span><span class="op" id="2859644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2859648">if</span>&nbsp;<span class="ident" id="2859651">v</span><span class="op" id="2859652">.</span><span class="ident" id="2859653">flag</span><span class="op" id="2859657">&amp;</span><span class="ident" id="2859658">flagMethod</span>&nbsp;<span class="op" id="2859669">!=</span>&nbsp;<span class="num" id="2859672">0</span>&nbsp;<span class="op" id="2859674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859679">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859737">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859797">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859863">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859928">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2859991">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860036">f</span>&nbsp;<span class="op" id="2860038">:=</span>&nbsp;<span class="ident" id="2860041">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860060">return</span>&nbsp;<span class="op" id="2860067">*</span><span class="op" id="2860068">*</span><span class="op" id="2860069">(</span><span class="op" id="2860070">*</span><span class="op" id="2860071">*</span><span class="builtintype" id="2860072">uintptr</span><span class="op" id="2860079">)</span><span class="op" id="2860080">(</span><span class="ident" id="2860081">unsafe</span><span class="op" id="2860087">.</span><span class="ident" id="2860088">Pointer</span><span class="op" id="2860095">(</span><span class="op" id="2860096">&amp;</span><span class="ident" id="2860097">f</span><span class="op" id="2860098">)</span><span class="op" id="2860099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2860103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860107">p</span>&nbsp;<span class="op" id="2860109">:=</span>&nbsp;<span class="ident" id="2860112">v</span><span class="op" id="2860113">.</span><span class="ident" id="2860114">pointer</span><span class="op" id="2860121">(</span><span class="op" id="2860122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2860126">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2860172">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860218">if</span>&nbsp;<span class="ident" id="2860221">p</span>&nbsp;<span class="op" id="2860223">!=</span>&nbsp;<span class="builtintype" id="2860226">nil</span>&nbsp;<span class="op" id="2860230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860235">p</span>&nbsp;<span class="op" id="2860237">=</span>&nbsp;<span class="op" id="2860239">*</span><span class="op" id="2860240">(</span><span class="op" id="2860241">*</span><span class="ident" id="2860242">unsafe</span><span class="op" id="2860248">.</span><span class="ident" id="2860249">Pointer</span><span class="op" id="2860256">)</span><span class="op" id="2860257">(</span><span class="ident" id="2860258">p</span><span class="op" id="2860259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2860263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860267">return</span>&nbsp;<span class="builtintype" id="2860274">uintptr</span><span class="op" id="2860281">(</span><span class="ident" id="2860282">p</span><span class="op" id="2860283">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860287">case</span>&nbsp;<span class="ident" id="2860292">Slice</span><span class="op" id="2860297">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860301">return</span>&nbsp;<span class="op" id="2860308">(</span><span class="op" id="2860309">*</span><span class="ident" id="2860310">SliceHeader</span><span class="op" id="2860321">)</span><span class="op" id="2860322">(</span><span class="ident" id="2860323">v</span><span class="op" id="2860324">.</span><span class="ident" id="2860325">ptr</span><span class="op" id="2860328">)</span><span class="op" id="2860329">.</span><span class="ident" id="2860330">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2860336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2860339">panic</span><span class="op" id="2860344">(</span><span class="op" id="2860345">&amp;</span><span class="ident" id="2860346">ValueError</span><span class="op" id="2860356">{</span><span class="string" id="2860357">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2860380">,</span>&nbsp;<span class="ident" id="2860382">v</span><span class="op" id="2860383">.</span><span class="ident" id="2860384">kind</span><span class="op" id="2860388">(</span><span class="op" id="2860389">)</span><span class="op" id="2860390">}</span><span class="op" id="2860391">)</span><br>
<span class="lineno"></span><span class="op" id="2860393">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2860396">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2860453">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2860491">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2860537">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2860606">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2860693">func</span>&nbsp;<span class="op" id="2860698">(</span><span class="ident" id="2860699">v</span>&nbsp;<span class="ident" id="2860701">Value</span><span class="op" id="2860706">)</span>&nbsp;<span class="ident" id="2860708">Recv</span><span class="op" id="2860712">(</span><span class="op" id="2860713">)</span>&nbsp;<span class="op" id="2860715">(</span><span class="ident" id="2860716">x</span>&nbsp;<span class="ident" id="2860718">Value</span><span class="op" id="2860723">,</span>&nbsp;<span class="ident" id="2860725">ok</span>&nbsp;<span class="builtintype" id="2860728">bool</span><span class="op" id="2860732">)</span>&nbsp;<span class="op" id="2860734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860737">v</span><span class="op" id="2860738">.</span><span class="ident" id="2860739">mustBe</span><span class="op" id="2860745">(</span><span class="ident" id="2860746">Chan</span><span class="op" id="2860750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860753">v</span><span class="op" id="2860754">.</span><span class="ident" id="2860755">mustBeExported</span><span class="op" id="2860769">(</span><span class="op" id="2860770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860773">return</span>&nbsp;<span class="ident" id="2860780">v</span><span class="op" id="2860781">.</span><span class="ident" id="2860782">recv</span><span class="op" id="2860786">(</span><span class="builtintype" id="2860787">false</span><span class="op" id="2860792">)</span><br>
<span class="lineno">1235</span><span class="op" id="2860794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2860797">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2860843">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2860874">func</span>&nbsp;<span class="op" id="2860879">(</span><span class="ident" id="2860880">v</span>&nbsp;<span class="ident" id="2860882">Value</span><span class="op" id="2860887">)</span>&nbsp;<span class="ident" id="2860889">recv</span><span class="op" id="2860893">(</span><span class="ident" id="2860894">nb</span>&nbsp;<span class="builtintype" id="2860897">bool</span><span class="op" id="2860901">)</span>&nbsp;<span class="op" id="2860903">(</span><span class="ident" id="2860904">val</span>&nbsp;<span class="ident" id="2860908">Value</span><span class="op" id="2860913">,</span>&nbsp;<span class="ident" id="2860915">ok</span>&nbsp;<span class="builtintype" id="2860918">bool</span><span class="op" id="2860922">)</span>&nbsp;<span class="op" id="2860924">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2860927">tt</span>&nbsp;<span class="op" id="2860930">:=</span>&nbsp;<span class="op" id="2860933">(</span><span class="op" id="2860934">*</span><span class="ident" id="2860935">chanType</span><span class="op" id="2860943">)</span><span class="op" id="2860944">(</span><span class="ident" id="2860945">unsafe</span><span class="op" id="2860951">.</span><span class="ident" id="2860952">Pointer</span><span class="op" id="2860959">(</span><span class="ident" id="2860960">v</span><span class="op" id="2860961">.</span><span class="ident" id="2860962">typ</span><span class="op" id="2860965">)</span><span class="op" id="2860966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2860969">if</span>&nbsp;<span class="ident" id="2860972">ChanDir</span><span class="op" id="2860979">(</span><span class="ident" id="2860980">tt</span><span class="op" id="2860982">.</span><span class="ident" id="2860983">dir</span><span class="op" id="2860986">)</span><span class="op" id="2860987">&amp;</span><span class="ident" id="2860988">RecvDir</span>&nbsp;<span class="op" id="2860996">==</span>&nbsp;<span class="num" id="2860999">0</span>&nbsp;<span class="op" id="2861001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2861005">panic</span><span class="op" id="2861010">(</span><span class="string" id="2861011">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2861047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2861050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861053">t</span>&nbsp;<span class="op" id="2861055">:=</span>&nbsp;<span class="ident" id="2861058">tt</span><span class="op" id="2861060">.</span><span class="ident" id="2861061">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861067">val</span>&nbsp;<span class="op" id="2861071">=</span>&nbsp;<span class="ident" id="2861073">Value</span><span class="op" id="2861078">{</span><span class="ident" id="2861079">t</span><span class="op" id="2861080">,</span>&nbsp;<span class="builtintype" id="2861082">nil</span><span class="op" id="2861085">,</span>&nbsp;<span class="ident" id="2861087">flag</span><span class="op" id="2861091">(</span><span class="ident" id="2861092">t</span><span class="op" id="2861093">.</span><span class="ident" id="2861094">Kind</span><span class="op" id="2861098">(</span><span class="op" id="2861099">)</span><span class="op" id="2861100">)</span><span class="op" id="2861101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861104">var</span>&nbsp;<span class="ident" id="2861108">p</span>&nbsp;<span class="ident" id="2861110">unsafe</span><span class="op" id="2861116">.</span><span class="ident" id="2861117">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861126">if</span>&nbsp;<span class="ident" id="2861129">ifaceIndir</span><span class="op" id="2861139">(</span><span class="ident" id="2861140">t</span><span class="op" id="2861141">)</span>&nbsp;<span class="op" id="2861143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861147">p</span>&nbsp;<span class="op" id="2861149">=</span>&nbsp;<span class="ident" id="2861151">unsafe_New</span><span class="op" id="2861161">(</span><span class="ident" id="2861162">t</span><span class="op" id="2861163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861167">val</span><span class="op" id="2861170">.</span><span class="ident" id="2861171">ptr</span>&nbsp;<span class="op" id="2861175">=</span>&nbsp;<span class="ident" id="2861177">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861181">val</span><span class="op" id="2861184">.</span><span class="ident" id="2861185">flag</span>&nbsp;<span class="op" id="2861190">|=</span>&nbsp;<span class="ident" id="2861193">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2861204">}</span>&nbsp;<span class="keyword" id="2861206">else</span>&nbsp;<span class="op" id="2861211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861215">p</span>&nbsp;<span class="op" id="2861217">=</span>&nbsp;<span class="ident" id="2861219">unsafe</span><span class="op" id="2861225">.</span><span class="ident" id="2861226">Pointer</span><span class="op" id="2861233">(</span><span class="op" id="2861234">&amp;</span><span class="ident" id="2861235">val</span><span class="op" id="2861238">.</span><span class="ident" id="2861239">ptr</span><span class="op" id="2861242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2861245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861248">selected</span><span class="op" id="2861256">,</span>&nbsp;<span class="ident" id="2861258">ok</span>&nbsp;<span class="op" id="2861261">:=</span>&nbsp;<span class="ident" id="2861264">chanrecv</span><span class="op" id="2861272">(</span><span class="ident" id="2861273">v</span><span class="op" id="2861274">.</span><span class="ident" id="2861275">typ</span><span class="op" id="2861278">,</span>&nbsp;<span class="ident" id="2861280">v</span><span class="op" id="2861281">.</span><span class="ident" id="2861282">pointer</span><span class="op" id="2861289">(</span><span class="op" id="2861290">)</span><span class="op" id="2861291">,</span>&nbsp;<span class="ident" id="2861293">nb</span><span class="op" id="2861295">,</span>&nbsp;<span class="ident" id="2861297">p</span><span class="op" id="2861298">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861301">if</span>&nbsp;<span class="op" id="2861304">!</span><span class="ident" id="2861305">selected</span>&nbsp;<span class="op" id="2861314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861318">val</span>&nbsp;<span class="op" id="2861322">=</span>&nbsp;<span class="ident" id="2861324">Value</span><span class="op" id="2861329">{</span><span class="op" id="2861330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2861333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861336">return</span><br>
<span class="lineno"></span><span class="op" id="2861343">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2861346">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2861380">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2861474">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2861547">func</span>&nbsp;<span class="op" id="2861552">(</span><span class="ident" id="2861553">v</span>&nbsp;<span class="ident" id="2861555">Value</span><span class="op" id="2861560">)</span>&nbsp;<span class="ident" id="2861562">Send</span><span class="op" id="2861566">(</span><span class="ident" id="2861567">x</span>&nbsp;<span class="ident" id="2861569">Value</span><span class="op" id="2861574">)</span>&nbsp;<span class="op" id="2861576">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861579">v</span><span class="op" id="2861580">.</span><span class="ident" id="2861581">mustBe</span><span class="op" id="2861587">(</span><span class="ident" id="2861588">Chan</span><span class="op" id="2861592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861595">v</span><span class="op" id="2861596">.</span><span class="ident" id="2861597">mustBeExported</span><span class="op" id="2861611">(</span><span class="op" id="2861612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861615">v</span><span class="op" id="2861616">.</span><span class="ident" id="2861617">send</span><span class="op" id="2861621">(</span><span class="ident" id="2861622">x</span><span class="op" id="2861623">,</span>&nbsp;<span class="builtintype" id="2861625">false</span><span class="op" id="2861630">)</span><br>
<span class="lineno"></span><span class="op" id="2861632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2861635">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2861676">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2861707">func</span>&nbsp;<span class="op" id="2861712">(</span><span class="ident" id="2861713">v</span>&nbsp;<span class="ident" id="2861715">Value</span><span class="op" id="2861720">)</span>&nbsp;<span class="ident" id="2861722">send</span><span class="op" id="2861726">(</span><span class="ident" id="2861727">x</span>&nbsp;<span class="ident" id="2861729">Value</span><span class="op" id="2861734">,</span>&nbsp;<span class="ident" id="2861736">nb</span>&nbsp;<span class="builtintype" id="2861739">bool</span><span class="op" id="2861743">)</span>&nbsp;<span class="op" id="2861745">(</span><span class="ident" id="2861746">selected</span>&nbsp;<span class="builtintype" id="2861755">bool</span><span class="op" id="2861759">)</span>&nbsp;<span class="op" id="2861761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861764">tt</span>&nbsp;<span class="op" id="2861767">:=</span>&nbsp;<span class="op" id="2861770">(</span><span class="op" id="2861771">*</span><span class="ident" id="2861772">chanType</span><span class="op" id="2861780">)</span><span class="op" id="2861781">(</span><span class="ident" id="2861782">unsafe</span><span class="op" id="2861788">.</span><span class="ident" id="2861789">Pointer</span><span class="op" id="2861796">(</span><span class="ident" id="2861797">v</span><span class="op" id="2861798">.</span><span class="ident" id="2861799">typ</span><span class="op" id="2861802">)</span><span class="op" id="2861803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861806">if</span>&nbsp;<span class="ident" id="2861809">ChanDir</span><span class="op" id="2861816">(</span><span class="ident" id="2861817">tt</span><span class="op" id="2861819">.</span><span class="ident" id="2861820">dir</span><span class="op" id="2861823">)</span><span class="op" id="2861824">&amp;</span><span class="ident" id="2861825">SendDir</span>&nbsp;<span class="op" id="2861833">==</span>&nbsp;<span class="num" id="2861836">0</span>&nbsp;<span class="op" id="2861838">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2861842">panic</span><span class="op" id="2861847">(</span><span class="string" id="2861848">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2861884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2861887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861890">x</span><span class="op" id="2861891">.</span><span class="ident" id="2861892">mustBeExported</span><span class="op" id="2861906">(</span><span class="op" id="2861907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2861910">x</span>&nbsp;<span class="op" id="2861912">=</span>&nbsp;<span class="ident" id="2861914">x</span><span class="op" id="2861915">.</span><span class="ident" id="2861916">assignTo</span><span class="op" id="2861924">(</span><span class="string" id="2861925">&#34;reflect.Value.Send&#34;</span><span class="op" id="2861945">,</span>&nbsp;<span class="ident" id="2861947">tt</span><span class="op" id="2861949">.</span><span class="ident" id="2861950">elem</span><span class="op" id="2861954">,</span>&nbsp;<span class="builtintype" id="2861956">nil</span><span class="op" id="2861959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861962">var</span>&nbsp;<span class="ident" id="2861966">p</span>&nbsp;<span class="ident" id="2861968">unsafe</span><span class="op" id="2861974">.</span><span class="ident" id="2861975">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2861984">if</span>&nbsp;<span class="ident" id="2861987">x</span><span class="op" id="2861988">.</span><span class="ident" id="2861989">flag</span><span class="op" id="2861993">&amp;</span><span class="ident" id="2861994">flagIndir</span>&nbsp;<span class="op" id="2862004">!=</span>&nbsp;<span class="num" id="2862007">0</span>&nbsp;<span class="op" id="2862009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862013">p</span>&nbsp;<span class="op" id="2862015">=</span>&nbsp;<span class="ident" id="2862017">x</span><span class="op" id="2862018">.</span><span class="ident" id="2862019">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862024">}</span>&nbsp;<span class="keyword" id="2862026">else</span>&nbsp;<span class="op" id="2862031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862035">p</span>&nbsp;<span class="op" id="2862037">=</span>&nbsp;<span class="ident" id="2862039">unsafe</span><span class="op" id="2862045">.</span><span class="ident" id="2862046">Pointer</span><span class="op" id="2862053">(</span><span class="op" id="2862054">&amp;</span><span class="ident" id="2862055">x</span><span class="op" id="2862056">.</span><span class="ident" id="2862057">ptr</span><span class="op" id="2862060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862063">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2862066">return</span>&nbsp;<span class="ident" id="2862073">chansend</span><span class="op" id="2862081">(</span><span class="ident" id="2862082">v</span><span class="op" id="2862083">.</span><span class="ident" id="2862084">typ</span><span class="op" id="2862087">,</span>&nbsp;<span class="ident" id="2862089">v</span><span class="op" id="2862090">.</span><span class="ident" id="2862091">pointer</span><span class="op" id="2862098">(</span><span class="op" id="2862099">)</span><span class="op" id="2862100">,</span>&nbsp;<span class="ident" id="2862102">p</span><span class="op" id="2862103">,</span>&nbsp;<span class="ident" id="2862105">nb</span><span class="op" id="2862107">)</span><br>
<span class="lineno"></span><span class="op" id="2862109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2862112">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2862145">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2862183">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2862238">func</span>&nbsp;<span class="op" id="2862243">(</span><span class="ident" id="2862244">v</span>&nbsp;<span class="ident" id="2862246">Value</span><span class="op" id="2862251">)</span>&nbsp;<span class="ident" id="2862253">Set</span><span class="op" id="2862256">(</span><span class="ident" id="2862257">x</span>&nbsp;<span class="ident" id="2862259">Value</span><span class="op" id="2862264">)</span>&nbsp;<span class="op" id="2862266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862269">v</span><span class="op" id="2862270">.</span><span class="ident" id="2862271">mustBeAssignable</span><span class="op" id="2862287">(</span><span class="op" id="2862288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862291">x</span><span class="op" id="2862292">.</span><span class="ident" id="2862293">mustBeExported</span><span class="op" id="2862307">(</span><span class="op" id="2862308">)</span>&nbsp;<span class="comment" id="2862310">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2862343">var</span>&nbsp;<span class="ident" id="2862347">target</span>&nbsp;<span class="ident" id="2862354">unsafe</span><span class="op" id="2862360">.</span><span class="ident" id="2862361">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2862370">if</span>&nbsp;<span class="ident" id="2862373">v</span><span class="op" id="2862374">.</span><span class="ident" id="2862375">kind</span><span class="op" id="2862379">(</span><span class="op" id="2862380">)</span>&nbsp;<span class="op" id="2862382">==</span>&nbsp;<span class="ident" id="2862385">Interface</span>&nbsp;<span class="op" id="2862395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862399">target</span>&nbsp;<span class="op" id="2862406">=</span>&nbsp;<span class="ident" id="2862408">v</span><span class="op" id="2862409">.</span><span class="ident" id="2862410">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862418">x</span>&nbsp;<span class="op" id="2862420">=</span>&nbsp;<span class="ident" id="2862422">x</span><span class="op" id="2862423">.</span><span class="ident" id="2862424">assignTo</span><span class="op" id="2862432">(</span><span class="string" id="2862433">&#34;reflect.Set&#34;</span><span class="op" id="2862446">,</span>&nbsp;<span class="ident" id="2862448">v</span><span class="op" id="2862449">.</span><span class="ident" id="2862450">typ</span><span class="op" id="2862453">,</span>&nbsp;<span class="ident" id="2862455">target</span><span class="op" id="2862461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2862464">if</span>&nbsp;<span class="ident" id="2862467">x</span><span class="op" id="2862468">.</span><span class="ident" id="2862469">flag</span><span class="op" id="2862473">&amp;</span><span class="ident" id="2862474">flagIndir</span>&nbsp;<span class="op" id="2862484">!=</span>&nbsp;<span class="num" id="2862487">0</span>&nbsp;<span class="op" id="2862489">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862493">memmove</span><span class="op" id="2862500">(</span><span class="ident" id="2862501">v</span><span class="op" id="2862502">.</span><span class="ident" id="2862503">ptr</span><span class="op" id="2862506">,</span>&nbsp;<span class="ident" id="2862508">x</span><span class="op" id="2862509">.</span><span class="ident" id="2862510">ptr</span><span class="op" id="2862513">,</span>&nbsp;<span class="ident" id="2862515">v</span><span class="op" id="2862516">.</span><span class="ident" id="2862517">typ</span><span class="op" id="2862520">.</span><span class="ident" id="2862521">size</span><span class="op" id="2862525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862528">}</span>&nbsp;<span class="keyword" id="2862530">else</span>&nbsp;<span class="op" id="2862535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862539">*</span><span class="op" id="2862540">(</span><span class="op" id="2862541">*</span><span class="ident" id="2862542">unsafe</span><span class="op" id="2862548">.</span><span class="ident" id="2862549">Pointer</span><span class="op" id="2862556">)</span><span class="op" id="2862557">(</span><span class="ident" id="2862558">v</span><span class="op" id="2862559">.</span><span class="ident" id="2862560">ptr</span><span class="op" id="2862563">)</span>&nbsp;<span class="op" id="2862565">=</span>&nbsp;<span class="ident" id="2862567">x</span><span class="op" id="2862568">.</span><span class="ident" id="2862569">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862574">}</span><br>
<span class="lineno"></span><span class="op" id="2862576">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2862579">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2862617">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2862679">func</span>&nbsp;<span class="op" id="2862684">(</span><span class="ident" id="2862685">v</span>&nbsp;<span class="ident" id="2862687">Value</span><span class="op" id="2862692">)</span>&nbsp;<span class="ident" id="2862694">SetBool</span><span class="op" id="2862701">(</span><span class="ident" id="2862702">x</span>&nbsp;<span class="builtintype" id="2862704">bool</span><span class="op" id="2862708">)</span>&nbsp;<span class="op" id="2862710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862713">v</span><span class="op" id="2862714">.</span><span class="ident" id="2862715">mustBeAssignable</span><span class="op" id="2862731">(</span><span class="op" id="2862732">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862735">v</span><span class="op" id="2862736">.</span><span class="ident" id="2862737">mustBe</span><span class="op" id="2862743">(</span><span class="ident" id="2862744">Bool</span><span class="op" id="2862748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2862751">*</span><span class="op" id="2862752">(</span><span class="op" id="2862753">*</span><span class="builtintype" id="2862754">bool</span><span class="op" id="2862758">)</span><span class="op" id="2862759">(</span><span class="ident" id="2862760">v</span><span class="op" id="2862761">.</span><span class="ident" id="2862762">ptr</span><span class="op" id="2862765">)</span>&nbsp;<span class="op" id="2862767">=</span>&nbsp;<span class="ident" id="2862769">x</span><br>
<span class="lineno"></span><span class="op" id="2862771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2862774">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2862813">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2862875">func</span>&nbsp;<span class="op" id="2862880">(</span><span class="ident" id="2862881">v</span>&nbsp;<span class="ident" id="2862883">Value</span><span class="op" id="2862888">)</span>&nbsp;<span class="ident" id="2862890">SetBytes</span><span class="op" id="2862898">(</span><span class="ident" id="2862899">x</span>&nbsp;<span class="op" id="2862901">[</span><span class="op" id="2862902">]</span><span class="builtintype" id="2862903">byte</span><span class="op" id="2862907">)</span>&nbsp;<span class="op" id="2862909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862912">v</span><span class="op" id="2862913">.</span><span class="ident" id="2862914">mustBeAssignable</span><span class="op" id="2862930">(</span><span class="op" id="2862931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2862934">v</span><span class="op" id="2862935">.</span><span class="ident" id="2862936">mustBe</span><span class="op" id="2862942">(</span><span class="ident" id="2862943">Slice</span><span class="op" id="2862948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2862951">if</span>&nbsp;<span class="ident" id="2862954">v</span><span class="op" id="2862955">.</span><span class="ident" id="2862956">typ</span><span class="op" id="2862959">.</span><span class="ident" id="2862960">Elem</span><span class="op" id="2862964">(</span><span class="op" id="2862965">)</span><span class="op" id="2862966">.</span><span class="ident" id="2862967">Kind</span><span class="op" id="2862971">(</span><span class="op" id="2862972">)</span>&nbsp;<span class="op" id="2862974">!=</span>&nbsp;<span class="ident" id="2862977">Uint8</span>&nbsp;<span class="op" id="2862983">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2862987">panic</span><span class="op" id="2862992">(</span><span class="string" id="2862993">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2863035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863041">*</span><span class="op" id="2863042">(</span><span class="op" id="2863043">*</span><span class="op" id="2863044">[</span><span class="op" id="2863045">]</span><span class="builtintype" id="2863046">byte</span><span class="op" id="2863050">)</span><span class="op" id="2863051">(</span><span class="ident" id="2863052">v</span><span class="op" id="2863053">.</span><span class="ident" id="2863054">ptr</span><span class="op" id="2863057">)</span>&nbsp;<span class="op" id="2863059">=</span>&nbsp;<span class="ident" id="2863061">x</span><br>
<span class="lineno"></span><span class="op" id="2863063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2863066">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2863105">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2863176">func</span>&nbsp;<span class="op" id="2863181">(</span><span class="ident" id="2863182">v</span>&nbsp;<span class="ident" id="2863184">Value</span><span class="op" id="2863189">)</span>&nbsp;<span class="ident" id="2863191">setRunes</span><span class="op" id="2863199">(</span><span class="ident" id="2863200">x</span>&nbsp;<span class="op" id="2863202">[</span><span class="op" id="2863203">]</span><span class="builtintype" id="2863204">rune</span><span class="op" id="2863208">)</span>&nbsp;<span class="op" id="2863210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2863213">v</span><span class="op" id="2863214">.</span><span class="ident" id="2863215">mustBeAssignable</span><span class="op" id="2863231">(</span><span class="op" id="2863232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2863235">v</span><span class="op" id="2863236">.</span><span class="ident" id="2863237">mustBe</span><span class="op" id="2863243">(</span><span class="ident" id="2863244">Slice</span><span class="op" id="2863249">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863252">if</span>&nbsp;<span class="ident" id="2863255">v</span><span class="op" id="2863256">.</span><span class="ident" id="2863257">typ</span><span class="op" id="2863260">.</span><span class="ident" id="2863261">Elem</span><span class="op" id="2863265">(</span><span class="op" id="2863266">)</span><span class="op" id="2863267">.</span><span class="ident" id="2863268">Kind</span><span class="op" id="2863272">(</span><span class="op" id="2863273">)</span>&nbsp;<span class="op" id="2863275">!=</span>&nbsp;<span class="ident" id="2863278">Int32</span>&nbsp;<span class="op" id="2863284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2863288">panic</span><span class="op" id="2863293">(</span><span class="string" id="2863294">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2863336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863342">*</span><span class="op" id="2863343">(</span><span class="op" id="2863344">*</span><span class="op" id="2863345">[</span><span class="op" id="2863346">]</span><span class="builtintype" id="2863347">rune</span><span class="op" id="2863351">)</span><span class="op" id="2863352">(</span><span class="ident" id="2863353">v</span><span class="op" id="2863354">.</span><span class="ident" id="2863355">ptr</span><span class="op" id="2863358">)</span>&nbsp;<span class="op" id="2863360">=</span>&nbsp;<span class="ident" id="2863362">x</span><br>
<span class="lineno"></span><span class="op" id="2863364">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2863367">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2863413">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2863495">func</span>&nbsp;<span class="op" id="2863500">(</span><span class="ident" id="2863501">v</span>&nbsp;<span class="ident" id="2863503">Value</span><span class="op" id="2863508">)</span>&nbsp;<span class="ident" id="2863510">SetComplex</span><span class="op" id="2863520">(</span><span class="ident" id="2863521">x</span>&nbsp;<span class="builtintype" id="2863523">complex128</span><span class="op" id="2863533">)</span>&nbsp;<span class="op" id="2863535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2863538">v</span><span class="op" id="2863539">.</span><span class="ident" id="2863540">mustBeAssignable</span><span class="op" id="2863556">(</span><span class="op" id="2863557">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863560">switch</span>&nbsp;<span class="ident" id="2863567">k</span>&nbsp;<span class="op" id="2863569">:=</span>&nbsp;<span class="ident" id="2863572">v</span><span class="op" id="2863573">.</span><span class="ident" id="2863574">kind</span><span class="op" id="2863578">(</span><span class="op" id="2863579">)</span><span class="op" id="2863580">;</span>&nbsp;<span class="ident" id="2863582">k</span>&nbsp;<span class="op" id="2863584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863587">default</span><span class="op" id="2863594">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2863598">panic</span><span class="op" id="2863603">(</span><span class="op" id="2863604">&amp;</span><span class="ident" id="2863605">ValueError</span><span class="op" id="2863615">{</span><span class="string" id="2863616">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2863642">,</span>&nbsp;<span class="ident" id="2863644">v</span><span class="op" id="2863645">.</span><span class="ident" id="2863646">kind</span><span class="op" id="2863650">(</span><span class="op" id="2863651">)</span><span class="op" id="2863652">}</span><span class="op" id="2863653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863656">case</span>&nbsp;<span class="ident" id="2863661">Complex64</span><span class="op" id="2863670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863674">*</span><span class="op" id="2863675">(</span><span class="op" id="2863676">*</span><span class="builtintype" id="2863677">complex64</span><span class="op" id="2863686">)</span><span class="op" id="2863687">(</span><span class="ident" id="2863688">v</span><span class="op" id="2863689">.</span><span class="ident" id="2863690">ptr</span><span class="op" id="2863693">)</span>&nbsp;<span class="op" id="2863695">=</span>&nbsp;<span class="builtintype" id="2863697">complex64</span><span class="op" id="2863706">(</span><span class="ident" id="2863707">x</span><span class="op" id="2863708">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863711">case</span>&nbsp;<span class="ident" id="2863716">Complex128</span><span class="op" id="2863726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863730">*</span><span class="op" id="2863731">(</span><span class="op" id="2863732">*</span><span class="builtintype" id="2863733">complex128</span><span class="op" id="2863743">)</span><span class="op" id="2863744">(</span><span class="ident" id="2863745">v</span><span class="op" id="2863746">.</span><span class="ident" id="2863747">ptr</span><span class="op" id="2863750">)</span>&nbsp;<span class="op" id="2863752">=</span>&nbsp;<span class="ident" id="2863754">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2863757">}</span><br>
<span class="lineno"></span><span class="op" id="2863759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2863762">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2863806">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2863883">func</span>&nbsp;<span class="op" id="2863888">(</span><span class="ident" id="2863889">v</span>&nbsp;<span class="ident" id="2863891">Value</span><span class="op" id="2863896">)</span>&nbsp;<span class="ident" id="2863898">SetFloat</span><span class="op" id="2863906">(</span><span class="ident" id="2863907">x</span>&nbsp;<span class="builtintype" id="2863909">float64</span><span class="op" id="2863916">)</span>&nbsp;<span class="op" id="2863918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2863921">v</span><span class="op" id="2863922">.</span><span class="ident" id="2863923">mustBeAssignable</span><span class="op" id="2863939">(</span><span class="op" id="2863940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863943">switch</span>&nbsp;<span class="ident" id="2863950">k</span>&nbsp;<span class="op" id="2863952">:=</span>&nbsp;<span class="ident" id="2863955">v</span><span class="op" id="2863956">.</span><span class="ident" id="2863957">kind</span><span class="op" id="2863961">(</span><span class="op" id="2863962">)</span><span class="op" id="2863963">;</span>&nbsp;<span class="ident" id="2863965">k</span>&nbsp;<span class="op" id="2863967">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2863970">default</span><span class="op" id="2863977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2863981">panic</span><span class="op" id="2863986">(</span><span class="op" id="2863987">&amp;</span><span class="ident" id="2863988">ValueError</span><span class="op" id="2863998">{</span><span class="string" id="2863999">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2864023">,</span>&nbsp;<span class="ident" id="2864025">v</span><span class="op" id="2864026">.</span><span class="ident" id="2864027">kind</span><span class="op" id="2864031">(</span><span class="op" id="2864032">)</span><span class="op" id="2864033">}</span><span class="op" id="2864034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864037">case</span>&nbsp;<span class="ident" id="2864042">Float32</span><span class="op" id="2864049">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864053">*</span><span class="op" id="2864054">(</span><span class="op" id="2864055">*</span><span class="builtintype" id="2864056">float32</span><span class="op" id="2864063">)</span><span class="op" id="2864064">(</span><span class="ident" id="2864065">v</span><span class="op" id="2864066">.</span><span class="ident" id="2864067">ptr</span><span class="op" id="2864070">)</span>&nbsp;<span class="op" id="2864072">=</span>&nbsp;<span class="builtintype" id="2864074">float32</span><span class="op" id="2864081">(</span><span class="ident" id="2864082">x</span><span class="op" id="2864083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864086">case</span>&nbsp;<span class="ident" id="2864091">Float64</span><span class="op" id="2864098">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864102">*</span><span class="op" id="2864103">(</span><span class="op" id="2864104">*</span><span class="builtintype" id="2864105">float64</span><span class="op" id="2864112">)</span><span class="op" id="2864113">(</span><span class="ident" id="2864114">v</span><span class="op" id="2864115">.</span><span class="ident" id="2864116">ptr</span><span class="op" id="2864119">)</span>&nbsp;<span class="op" id="2864121">=</span>&nbsp;<span class="ident" id="2864123">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864126">}</span><br>
<span class="lineno"></span><span class="op" id="2864128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2864131">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2864173">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2864265">func</span>&nbsp;<span class="op" id="2864270">(</span><span class="ident" id="2864271">v</span>&nbsp;<span class="ident" id="2864273">Value</span><span class="op" id="2864278">)</span>&nbsp;<span class="ident" id="2864280">SetInt</span><span class="op" id="2864286">(</span><span class="ident" id="2864287">x</span>&nbsp;<span class="ident" id="2864289">int64</span><span class="op" id="2864294">)</span>&nbsp;<span class="op" id="2864296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864299">v</span><span class="op" id="2864300">.</span><span class="ident" id="2864301">mustBeAssignable</span><span class="op" id="2864317">(</span><span class="op" id="2864318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864321">switch</span>&nbsp;<span class="ident" id="2864328">k</span>&nbsp;<span class="op" id="2864330">:=</span>&nbsp;<span class="ident" id="2864333">v</span><span class="op" id="2864334">.</span><span class="ident" id="2864335">kind</span><span class="op" id="2864339">(</span><span class="op" id="2864340">)</span><span class="op" id="2864341">;</span>&nbsp;<span class="ident" id="2864343">k</span>&nbsp;<span class="op" id="2864345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864348">default</span><span class="op" id="2864355">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2864359">panic</span><span class="op" id="2864364">(</span><span class="op" id="2864365">&amp;</span><span class="ident" id="2864366">ValueError</span><span class="op" id="2864376">{</span><span class="string" id="2864377">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2864399">,</span>&nbsp;<span class="ident" id="2864401">v</span><span class="op" id="2864402">.</span><span class="ident" id="2864403">kind</span><span class="op" id="2864407">(</span><span class="op" id="2864408">)</span><span class="op" id="2864409">}</span><span class="op" id="2864410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864413">case</span>&nbsp;<span class="ident" id="2864418">Int</span><span class="op" id="2864421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864425">*</span><span class="op" id="2864426">(</span><span class="op" id="2864427">*</span><span class="builtintype" id="2864428">int</span><span class="op" id="2864431">)</span><span class="op" id="2864432">(</span><span class="ident" id="2864433">v</span><span class="op" id="2864434">.</span><span class="ident" id="2864435">ptr</span><span class="op" id="2864438">)</span>&nbsp;<span class="op" id="2864440">=</span>&nbsp;<span class="builtintype" id="2864442">int</span><span class="op" id="2864445">(</span><span class="ident" id="2864446">x</span><span class="op" id="2864447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864450">case</span>&nbsp;<span class="ident" id="2864455">Int8</span><span class="op" id="2864459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864463">*</span><span class="op" id="2864464">(</span><span class="op" id="2864465">*</span><span class="builtintype" id="2864466">int8</span><span class="op" id="2864470">)</span><span class="op" id="2864471">(</span><span class="ident" id="2864472">v</span><span class="op" id="2864473">.</span><span class="ident" id="2864474">ptr</span><span class="op" id="2864477">)</span>&nbsp;<span class="op" id="2864479">=</span>&nbsp;<span class="builtintype" id="2864481">int8</span><span class="op" id="2864485">(</span><span class="ident" id="2864486">x</span><span class="op" id="2864487">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864490">case</span>&nbsp;<span class="ident" id="2864495">Int16</span><span class="op" id="2864500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864504">*</span><span class="op" id="2864505">(</span><span class="op" id="2864506">*</span><span class="builtintype" id="2864507">int16</span><span class="op" id="2864512">)</span><span class="op" id="2864513">(</span><span class="ident" id="2864514">v</span><span class="op" id="2864515">.</span><span class="ident" id="2864516">ptr</span><span class="op" id="2864519">)</span>&nbsp;<span class="op" id="2864521">=</span>&nbsp;<span class="builtintype" id="2864523">int16</span><span class="op" id="2864528">(</span><span class="ident" id="2864529">x</span><span class="op" id="2864530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864533">case</span>&nbsp;<span class="ident" id="2864538">Int32</span><span class="op" id="2864543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864547">*</span><span class="op" id="2864548">(</span><span class="op" id="2864549">*</span><span class="builtintype" id="2864550">int32</span><span class="op" id="2864555">)</span><span class="op" id="2864556">(</span><span class="ident" id="2864557">v</span><span class="op" id="2864558">.</span><span class="ident" id="2864559">ptr</span><span class="op" id="2864562">)</span>&nbsp;<span class="op" id="2864564">=</span>&nbsp;<span class="builtintype" id="2864566">int32</span><span class="op" id="2864571">(</span><span class="ident" id="2864572">x</span><span class="op" id="2864573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864576">case</span>&nbsp;<span class="ident" id="2864581">Int64</span><span class="op" id="2864586">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864590">*</span><span class="op" id="2864591">(</span><span class="op" id="2864592">*</span><span class="ident" id="2864593">int64</span><span class="op" id="2864598">)</span><span class="op" id="2864599">(</span><span class="ident" id="2864600">v</span><span class="op" id="2864601">.</span><span class="ident" id="2864602">ptr</span><span class="op" id="2864605">)</span>&nbsp;<span class="op" id="2864607">=</span>&nbsp;<span class="ident" id="2864609">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864612">}</span><br>
<span class="lineno"></span><span class="op" id="2864614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2864617">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2864649">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2864710">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2864753">func</span>&nbsp;<span class="op" id="2864758">(</span><span class="ident" id="2864759">v</span>&nbsp;<span class="ident" id="2864761">Value</span><span class="op" id="2864766">)</span>&nbsp;<span class="ident" id="2864768">SetLen</span><span class="op" id="2864774">(</span><span class="ident" id="2864775">n</span>&nbsp;<span class="builtintype" id="2864777">int</span><span class="op" id="2864780">)</span>&nbsp;<span class="op" id="2864782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864785">v</span><span class="op" id="2864786">.</span><span class="ident" id="2864787">mustBeAssignable</span><span class="op" id="2864803">(</span><span class="op" id="2864804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864807">v</span><span class="op" id="2864808">.</span><span class="ident" id="2864809">mustBe</span><span class="op" id="2864815">(</span><span class="ident" id="2864816">Slice</span><span class="op" id="2864821">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864824">s</span>&nbsp;<span class="op" id="2864826">:=</span>&nbsp;<span class="op" id="2864829">(</span><span class="op" id="2864830">*</span><span class="ident" id="2864831">sliceHeader</span><span class="op" id="2864842">)</span><span class="op" id="2864843">(</span><span class="ident" id="2864844">v</span><span class="op" id="2864845">.</span><span class="ident" id="2864846">ptr</span><span class="op" id="2864849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2864852">if</span>&nbsp;<span class="builtintype" id="2864855">uint</span><span class="op" id="2864859">(</span><span class="ident" id="2864860">n</span><span class="op" id="2864861">)</span>&nbsp;<span class="op" id="2864863">&gt;</span>&nbsp;<span class="builtintype" id="2864865">uint</span><span class="op" id="2864869">(</span><span class="ident" id="2864870">s</span><span class="op" id="2864871">.</span><span class="ident" id="2864872">Cap</span><span class="op" id="2864875">)</span>&nbsp;<span class="op" id="2864877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2864881">panic</span><span class="op" id="2864886">(</span><span class="string" id="2864887">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2864933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2864936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2864939">s</span><span class="op" id="2864940">.</span><span class="ident" id="2864941">Len</span>&nbsp;<span class="op" id="2864945">=</span>&nbsp;<span class="ident" id="2864947">n</span><br>
<span class="lineno">1395</span><span class="op" id="2864949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2864952">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2864986">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2865062">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2865105">func</span>&nbsp;<span class="op" id="2865110">(</span><span class="ident" id="2865111">v</span>&nbsp;<span class="ident" id="2865113">Value</span><span class="op" id="2865118">)</span>&nbsp;<span class="ident" id="2865120">SetCap</span><span class="op" id="2865126">(</span><span class="ident" id="2865127">n</span>&nbsp;<span class="builtintype" id="2865129">int</span><span class="op" id="2865132">)</span>&nbsp;<span class="op" id="2865134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865137">v</span><span class="op" id="2865138">.</span><span class="ident" id="2865139">mustBeAssignable</span><span class="op" id="2865155">(</span><span class="op" id="2865156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865159">v</span><span class="op" id="2865160">.</span><span class="ident" id="2865161">mustBe</span><span class="op" id="2865167">(</span><span class="ident" id="2865168">Slice</span><span class="op" id="2865173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865176">s</span>&nbsp;<span class="op" id="2865178">:=</span>&nbsp;<span class="op" id="2865181">(</span><span class="op" id="2865182">*</span><span class="ident" id="2865183">sliceHeader</span><span class="op" id="2865194">)</span><span class="op" id="2865195">(</span><span class="ident" id="2865196">v</span><span class="op" id="2865197">.</span><span class="ident" id="2865198">ptr</span><span class="op" id="2865201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2865204">if</span>&nbsp;<span class="ident" id="2865207">n</span>&nbsp;<span class="op" id="2865209">&lt;</span>&nbsp;<span class="builtintype" id="2865211">int</span><span class="op" id="2865214">(</span><span class="ident" id="2865215">s</span><span class="op" id="2865216">.</span><span class="ident" id="2865217">Len</span><span class="op" id="2865220">)</span>&nbsp;<span class="op" id="2865222">||</span>&nbsp;<span class="ident" id="2865225">n</span>&nbsp;<span class="op" id="2865227">&gt;</span>&nbsp;<span class="builtintype" id="2865229">int</span><span class="op" id="2865232">(</span><span class="ident" id="2865233">s</span><span class="op" id="2865234">.</span><span class="ident" id="2865235">Cap</span><span class="op" id="2865238">)</span>&nbsp;<span class="op" id="2865240">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2865244">panic</span><span class="op" id="2865249">(</span><span class="string" id="2865250">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2865298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2865301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865304">s</span><span class="op" id="2865305">.</span><span class="ident" id="2865306">Cap</span>&nbsp;<span class="op" id="2865310">=</span>&nbsp;<span class="ident" id="2865312">n</span><br>
<span class="lineno"></span><span class="op" id="2865314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2865317">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2865388">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2865425">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2865496">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2865555">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2865622">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2865685">func</span>&nbsp;<span class="op" id="2865690">(</span><span class="ident" id="2865691">v</span>&nbsp;<span class="ident" id="2865693">Value</span><span class="op" id="2865698">)</span>&nbsp;<span class="ident" id="2865700">SetMapIndex</span><span class="op" id="2865711">(</span><span class="ident" id="2865712">key</span><span class="op" id="2865715">,</span>&nbsp;<span class="ident" id="2865717">val</span>&nbsp;<span class="ident" id="2865721">Value</span><span class="op" id="2865726">)</span>&nbsp;<span class="op" id="2865728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865731">v</span><span class="op" id="2865732">.</span><span class="ident" id="2865733">mustBe</span><span class="op" id="2865739">(</span><span class="ident" id="2865740">Map</span><span class="op" id="2865743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865746">v</span><span class="op" id="2865747">.</span><span class="ident" id="2865748">mustBeExported</span><span class="op" id="2865762">(</span><span class="op" id="2865763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865766">key</span><span class="op" id="2865769">.</span><span class="ident" id="2865770">mustBeExported</span><span class="op" id="2865784">(</span><span class="op" id="2865785">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865788">tt</span>&nbsp;<span class="op" id="2865791">:=</span>&nbsp;<span class="op" id="2865794">(</span><span class="op" id="2865795">*</span><span class="ident" id="2865796">mapType</span><span class="op" id="2865803">)</span><span class="op" id="2865804">(</span><span class="ident" id="2865805">unsafe</span><span class="op" id="2865811">.</span><span class="ident" id="2865812">Pointer</span><span class="op" id="2865819">(</span><span class="ident" id="2865820">v</span><span class="op" id="2865821">.</span><span class="ident" id="2865822">typ</span><span class="op" id="2865825">)</span><span class="op" id="2865826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865829">key</span>&nbsp;<span class="op" id="2865833">=</span>&nbsp;<span class="ident" id="2865835">key</span><span class="op" id="2865838">.</span><span class="ident" id="2865839">assignTo</span><span class="op" id="2865847">(</span><span class="string" id="2865848">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2865875">,</span>&nbsp;<span class="ident" id="2865877">tt</span><span class="op" id="2865879">.</span><span class="ident" id="2865880">key</span><span class="op" id="2865883">,</span>&nbsp;<span class="builtintype" id="2865885">nil</span><span class="op" id="2865888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2865891">var</span>&nbsp;<span class="ident" id="2865895">k</span>&nbsp;<span class="ident" id="2865897">unsafe</span><span class="op" id="2865903">.</span><span class="ident" id="2865904">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2865913">if</span>&nbsp;<span class="ident" id="2865916">key</span><span class="op" id="2865919">.</span><span class="ident" id="2865920">flag</span><span class="op" id="2865924">&amp;</span><span class="ident" id="2865925">flagIndir</span>&nbsp;<span class="op" id="2865935">!=</span>&nbsp;<span class="num" id="2865938">0</span>&nbsp;<span class="op" id="2865940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865944">k</span>&nbsp;<span class="op" id="2865946">=</span>&nbsp;<span class="ident" id="2865948">key</span><span class="op" id="2865951">.</span><span class="ident" id="2865952">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2865957">}</span>&nbsp;<span class="keyword" id="2865959">else</span>&nbsp;<span class="op" id="2865964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2865968">k</span>&nbsp;<span class="op" id="2865970">=</span>&nbsp;<span class="ident" id="2865972">unsafe</span><span class="op" id="2865978">.</span><span class="ident" id="2865979">Pointer</span><span class="op" id="2865986">(</span><span class="op" id="2865987">&amp;</span><span class="ident" id="2865988">key</span><span class="op" id="2865991">.</span><span class="ident" id="2865992">ptr</span><span class="op" id="2865995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2865998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866001">if</span>&nbsp;<span class="ident" id="2866004">val</span><span class="op" id="2866007">.</span><span class="ident" id="2866008">typ</span>&nbsp;<span class="op" id="2866012">==</span>&nbsp;<span class="builtintype" id="2866015">nil</span>&nbsp;<span class="op" id="2866019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866023">mapdelete</span><span class="op" id="2866032">(</span><span class="ident" id="2866033">v</span><span class="op" id="2866034">.</span><span class="ident" id="2866035">typ</span><span class="op" id="2866038">,</span>&nbsp;<span class="ident" id="2866040">v</span><span class="op" id="2866041">.</span><span class="ident" id="2866042">pointer</span><span class="op" id="2866049">(</span><span class="op" id="2866050">)</span><span class="op" id="2866051">,</span>&nbsp;<span class="ident" id="2866053">k</span><span class="op" id="2866054">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866058">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866069">val</span><span class="op" id="2866072">.</span><span class="ident" id="2866073">mustBeExported</span><span class="op" id="2866087">(</span><span class="op" id="2866088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866091">val</span>&nbsp;<span class="op" id="2866095">=</span>&nbsp;<span class="ident" id="2866097">val</span><span class="op" id="2866100">.</span><span class="ident" id="2866101">assignTo</span><span class="op" id="2866109">(</span><span class="string" id="2866110">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2866137">,</span>&nbsp;<span class="ident" id="2866139">tt</span><span class="op" id="2866141">.</span><span class="ident" id="2866142">elem</span><span class="op" id="2866146">,</span>&nbsp;<span class="builtintype" id="2866148">nil</span><span class="op" id="2866151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866154">var</span>&nbsp;<span class="ident" id="2866158">e</span>&nbsp;<span class="ident" id="2866160">unsafe</span><span class="op" id="2866166">.</span><span class="ident" id="2866167">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866176">if</span>&nbsp;<span class="ident" id="2866179">val</span><span class="op" id="2866182">.</span><span class="ident" id="2866183">flag</span><span class="op" id="2866187">&amp;</span><span class="ident" id="2866188">flagIndir</span>&nbsp;<span class="op" id="2866198">!=</span>&nbsp;<span class="num" id="2866201">0</span>&nbsp;<span class="op" id="2866203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866207">e</span>&nbsp;<span class="op" id="2866209">=</span>&nbsp;<span class="ident" id="2866211">val</span><span class="op" id="2866214">.</span><span class="ident" id="2866215">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866220">}</span>&nbsp;<span class="keyword" id="2866222">else</span>&nbsp;<span class="op" id="2866227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866231">e</span>&nbsp;<span class="op" id="2866233">=</span>&nbsp;<span class="ident" id="2866235">unsafe</span><span class="op" id="2866241">.</span><span class="ident" id="2866242">Pointer</span><span class="op" id="2866249">(</span><span class="op" id="2866250">&amp;</span><span class="ident" id="2866251">val</span><span class="op" id="2866254">.</span><span class="ident" id="2866255">ptr</span><span class="op" id="2866258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866261">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866264">mapassign</span><span class="op" id="2866273">(</span><span class="ident" id="2866274">v</span><span class="op" id="2866275">.</span><span class="ident" id="2866276">typ</span><span class="op" id="2866279">,</span>&nbsp;<span class="ident" id="2866281">v</span><span class="op" id="2866282">.</span><span class="ident" id="2866283">pointer</span><span class="op" id="2866290">(</span><span class="op" id="2866291">)</span><span class="op" id="2866292">,</span>&nbsp;<span class="ident" id="2866294">k</span><span class="op" id="2866295">,</span>&nbsp;<span class="ident" id="2866297">e</span><span class="op" id="2866298">)</span><br>
<span class="lineno"></span><span class="op" id="2866300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2866303">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2866346">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2866452">func</span>&nbsp;<span class="op" id="2866457">(</span><span class="ident" id="2866458">v</span>&nbsp;<span class="ident" id="2866460">Value</span><span class="op" id="2866465">)</span>&nbsp;<span class="ident" id="2866467">SetUint</span><span class="op" id="2866474">(</span><span class="ident" id="2866475">x</span>&nbsp;<span class="ident" id="2866477">uint64</span><span class="op" id="2866483">)</span>&nbsp;<span class="op" id="2866485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2866488">v</span><span class="op" id="2866489">.</span><span class="ident" id="2866490">mustBeAssignable</span><span class="op" id="2866506">(</span><span class="op" id="2866507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866510">switch</span>&nbsp;<span class="ident" id="2866517">k</span>&nbsp;<span class="op" id="2866519">:=</span>&nbsp;<span class="ident" id="2866522">v</span><span class="op" id="2866523">.</span><span class="ident" id="2866524">kind</span><span class="op" id="2866528">(</span><span class="op" id="2866529">)</span><span class="op" id="2866530">;</span>&nbsp;<span class="ident" id="2866532">k</span>&nbsp;<span class="op" id="2866534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866537">default</span><span class="op" id="2866544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2866548">panic</span><span class="op" id="2866553">(</span><span class="op" id="2866554">&amp;</span><span class="ident" id="2866555">ValueError</span><span class="op" id="2866565">{</span><span class="string" id="2866566">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2866589">,</span>&nbsp;<span class="ident" id="2866591">v</span><span class="op" id="2866592">.</span><span class="ident" id="2866593">kind</span><span class="op" id="2866597">(</span><span class="op" id="2866598">)</span><span class="op" id="2866599">}</span><span class="op" id="2866600">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866603">case</span>&nbsp;<span class="ident" id="2866608">Uint</span><span class="op" id="2866612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866616">*</span><span class="op" id="2866617">(</span><span class="op" id="2866618">*</span><span class="builtintype" id="2866619">uint</span><span class="op" id="2866623">)</span><span class="op" id="2866624">(</span><span class="ident" id="2866625">v</span><span class="op" id="2866626">.</span><span class="ident" id="2866627">ptr</span><span class="op" id="2866630">)</span>&nbsp;<span class="op" id="2866632">=</span>&nbsp;<span class="builtintype" id="2866634">uint</span><span class="op" id="2866638">(</span><span class="ident" id="2866639">x</span><span class="op" id="2866640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866643">case</span>&nbsp;<span class="ident" id="2866648">Uint8</span><span class="op" id="2866653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866657">*</span><span class="op" id="2866658">(</span><span class="op" id="2866659">*</span><span class="builtintype" id="2866660">uint8</span><span class="op" id="2866665">)</span><span class="op" id="2866666">(</span><span class="ident" id="2866667">v</span><span class="op" id="2866668">.</span><span class="ident" id="2866669">ptr</span><span class="op" id="2866672">)</span>&nbsp;<span class="op" id="2866674">=</span>&nbsp;<span class="builtintype" id="2866676">uint8</span><span class="op" id="2866681">(</span><span class="ident" id="2866682">x</span><span class="op" id="2866683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866686">case</span>&nbsp;<span class="ident" id="2866691">Uint16</span><span class="op" id="2866697">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866701">*</span><span class="op" id="2866702">(</span><span class="op" id="2866703">*</span><span class="builtintype" id="2866704">uint16</span><span class="op" id="2866710">)</span><span class="op" id="2866711">(</span><span class="ident" id="2866712">v</span><span class="op" id="2866713">.</span><span class="ident" id="2866714">ptr</span><span class="op" id="2866717">)</span>&nbsp;<span class="op" id="2866719">=</span>&nbsp;<span class="builtintype" id="2866721">uint16</span><span class="op" id="2866727">(</span><span class="ident" id="2866728">x</span><span class="op" id="2866729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866732">case</span>&nbsp;<span class="ident" id="2866737">Uint32</span><span class="op" id="2866743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866747">*</span><span class="op" id="2866748">(</span><span class="op" id="2866749">*</span><span class="builtintype" id="2866750">uint32</span><span class="op" id="2866756">)</span><span class="op" id="2866757">(</span><span class="ident" id="2866758">v</span><span class="op" id="2866759">.</span><span class="ident" id="2866760">ptr</span><span class="op" id="2866763">)</span>&nbsp;<span class="op" id="2866765">=</span>&nbsp;<span class="builtintype" id="2866767">uint32</span><span class="op" id="2866773">(</span><span class="ident" id="2866774">x</span><span class="op" id="2866775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866778">case</span>&nbsp;<span class="ident" id="2866783">Uint64</span><span class="op" id="2866789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866793">*</span><span class="op" id="2866794">(</span><span class="op" id="2866795">*</span><span class="ident" id="2866796">uint64</span><span class="op" id="2866802">)</span><span class="op" id="2866803">(</span><span class="ident" id="2866804">v</span><span class="op" id="2866805">.</span><span class="ident" id="2866806">ptr</span><span class="op" id="2866809">)</span>&nbsp;<span class="op" id="2866811">=</span>&nbsp;<span class="ident" id="2866813">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2866816">case</span>&nbsp;<span class="ident" id="2866821">Uintptr</span><span class="op" id="2866828">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866832">*</span><span class="op" id="2866833">(</span><span class="op" id="2866834">*</span><span class="builtintype" id="2866835">uintptr</span><span class="op" id="2866842">)</span><span class="op" id="2866843">(</span><span class="ident" id="2866844">v</span><span class="op" id="2866845">.</span><span class="ident" id="2866846">ptr</span><span class="op" id="2866849">)</span>&nbsp;<span class="op" id="2866851">=</span>&nbsp;<span class="builtintype" id="2866853">uintptr</span><span class="op" id="2866860">(</span><span class="ident" id="2866861">x</span><span class="op" id="2866862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2866865">}</span><br>
<span class="lineno"></span><span class="op" id="2866867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2866870">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2866922">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2866969">func</span>&nbsp;<span class="op" id="2866974">(</span><span class="ident" id="2866975">v</span>&nbsp;<span class="ident" id="2866977">Value</span><span class="op" id="2866982">)</span>&nbsp;<span class="ident" id="2866984">SetPointer</span><span class="op" id="2866994">(</span><span class="ident" id="2866995">x</span>&nbsp;<span class="ident" id="2866997">unsafe</span><span class="op" id="2867003">.</span><span class="ident" id="2867004">Pointer</span><span class="op" id="2867011">)</span>&nbsp;<span class="op" id="2867013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867016">v</span><span class="op" id="2867017">.</span><span class="ident" id="2867018">mustBeAssignable</span><span class="op" id="2867034">(</span><span class="op" id="2867035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867038">v</span><span class="op" id="2867039">.</span><span class="ident" id="2867040">mustBe</span><span class="op" id="2867046">(</span><span class="ident" id="2867047">UnsafePointer</span><span class="op" id="2867060">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2867063">*</span><span class="op" id="2867064">(</span><span class="op" id="2867065">*</span><span class="ident" id="2867066">unsafe</span><span class="op" id="2867072">.</span><span class="ident" id="2867073">Pointer</span><span class="op" id="2867080">)</span><span class="op" id="2867081">(</span><span class="ident" id="2867082">v</span><span class="op" id="2867083">.</span><span class="ident" id="2867084">ptr</span><span class="op" id="2867087">)</span>&nbsp;<span class="op" id="2867089">=</span>&nbsp;<span class="ident" id="2867091">x</span><br>
<span class="lineno"></span><span class="op" id="2867093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2867096">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2867141">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2867205">func</span>&nbsp;<span class="op" id="2867210">(</span><span class="ident" id="2867211">v</span>&nbsp;<span class="ident" id="2867213">Value</span><span class="op" id="2867218">)</span>&nbsp;<span class="ident" id="2867220">SetString</span><span class="op" id="2867229">(</span><span class="ident" id="2867230">x</span>&nbsp;<span class="builtintype" id="2867232">string</span><span class="op" id="2867238">)</span>&nbsp;<span class="op" id="2867240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867243">v</span><span class="op" id="2867244">.</span><span class="ident" id="2867245">mustBeAssignable</span><span class="op" id="2867261">(</span><span class="op" id="2867262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867265">v</span><span class="op" id="2867266">.</span><span class="ident" id="2867267">mustBe</span><span class="op" id="2867273">(</span><span class="ident" id="2867274">String</span><span class="op" id="2867280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2867283">*</span><span class="op" id="2867284">(</span><span class="op" id="2867285">*</span><span class="builtintype" id="2867286">string</span><span class="op" id="2867292">)</span><span class="op" id="2867293">(</span><span class="ident" id="2867294">v</span><span class="op" id="2867295">.</span><span class="ident" id="2867296">ptr</span><span class="op" id="2867299">)</span>&nbsp;<span class="op" id="2867301">=</span>&nbsp;<span class="ident" id="2867303">x</span><br>
<span class="lineno"></span><span class="op" id="2867305">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2867308">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2867333">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2867424">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2867464">func</span>&nbsp;<span class="op" id="2867469">(</span><span class="ident" id="2867470">v</span>&nbsp;<span class="ident" id="2867472">Value</span><span class="op" id="2867477">)</span>&nbsp;<span class="ident" id="2867479">Slice</span><span class="op" id="2867484">(</span><span class="ident" id="2867485">i</span><span class="op" id="2867486">,</span>&nbsp;<span class="ident" id="2867488">j</span>&nbsp;<span class="builtintype" id="2867490">int</span><span class="op" id="2867493">)</span>&nbsp;<span class="ident" id="2867495">Value</span>&nbsp;<span class="op" id="2867501">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867504">var</span>&nbsp;<span class="op" id="2867508">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2867512">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2867517">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867523">typ</span>&nbsp;&nbsp;<span class="op" id="2867528">*</span><span class="ident" id="2867529">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867541">base</span>&nbsp;<span class="ident" id="2867546">unsafe</span><span class="op" id="2867552">.</span><span class="ident" id="2867553">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2867562">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867565">switch</span>&nbsp;<span class="ident" id="2867572">kind</span>&nbsp;<span class="op" id="2867577">:=</span>&nbsp;<span class="ident" id="2867580">v</span><span class="op" id="2867581">.</span><span class="ident" id="2867582">kind</span><span class="op" id="2867586">(</span><span class="op" id="2867587">)</span><span class="op" id="2867588">;</span>&nbsp;<span class="ident" id="2867590">kind</span>&nbsp;<span class="op" id="2867595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867598">default</span><span class="op" id="2867605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2867609">panic</span><span class="op" id="2867614">(</span><span class="op" id="2867615">&amp;</span><span class="ident" id="2867616">ValueError</span><span class="op" id="2867626">{</span><span class="string" id="2867627">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2867648">,</span>&nbsp;<span class="ident" id="2867650">v</span><span class="op" id="2867651">.</span><span class="ident" id="2867652">kind</span><span class="op" id="2867656">(</span><span class="op" id="2867657">)</span><span class="op" id="2867658">}</span><span class="op" id="2867659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867663">case</span>&nbsp;<span class="ident" id="2867668">Array</span><span class="op" id="2867673">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867677">if</span>&nbsp;<span class="ident" id="2867680">v</span><span class="op" id="2867681">.</span><span class="ident" id="2867682">flag</span><span class="op" id="2867686">&amp;</span><span class="ident" id="2867687">flagAddr</span>&nbsp;<span class="op" id="2867696">==</span>&nbsp;<span class="num" id="2867699">0</span>&nbsp;<span class="op" id="2867701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2867706">panic</span><span class="op" id="2867711">(</span><span class="string" id="2867712">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2867763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2867767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867771">tt</span>&nbsp;<span class="op" id="2867774">:=</span>&nbsp;<span class="op" id="2867777">(</span><span class="op" id="2867778">*</span><span class="ident" id="2867779">arrayType</span><span class="op" id="2867788">)</span><span class="op" id="2867789">(</span><span class="ident" id="2867790">unsafe</span><span class="op" id="2867796">.</span><span class="ident" id="2867797">Pointer</span><span class="op" id="2867804">(</span><span class="ident" id="2867805">v</span><span class="op" id="2867806">.</span><span class="ident" id="2867807">typ</span><span class="op" id="2867810">)</span><span class="op" id="2867811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2867815">cap</span>&nbsp;<span class="op" id="2867819">=</span>&nbsp;<span class="builtintype" id="2867821">int</span><span class="op" id="2867824">(</span><span class="ident" id="2867825">tt</span><span class="op" id="2867827">.</span><span class="builtinfunc" id="2867828">len</span><span class="op" id="2867831">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867835">typ</span>&nbsp;<span class="op" id="2867839">=</span>&nbsp;<span class="op" id="2867841">(</span><span class="op" id="2867842">*</span><span class="ident" id="2867843">sliceType</span><span class="op" id="2867852">)</span><span class="op" id="2867853">(</span><span class="ident" id="2867854">unsafe</span><span class="op" id="2867860">.</span><span class="ident" id="2867861">Pointer</span><span class="op" id="2867868">(</span><span class="ident" id="2867869">tt</span><span class="op" id="2867871">.</span><span class="ident" id="2867872">slice</span><span class="op" id="2867877">)</span><span class="op" id="2867878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867882">base</span>&nbsp;<span class="op" id="2867887">=</span>&nbsp;<span class="ident" id="2867889">v</span><span class="op" id="2867890">.</span><span class="ident" id="2867891">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2867897">case</span>&nbsp;<span class="ident" id="2867902">Slice</span><span class="op" id="2867907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867911">typ</span>&nbsp;<span class="op" id="2867915">=</span>&nbsp;<span class="op" id="2867917">(</span><span class="op" id="2867918">*</span><span class="ident" id="2867919">sliceType</span><span class="op" id="2867928">)</span><span class="op" id="2867929">(</span><span class="ident" id="2867930">unsafe</span><span class="op" id="2867936">.</span><span class="ident" id="2867937">Pointer</span><span class="op" id="2867944">(</span><span class="ident" id="2867945">v</span><span class="op" id="2867946">.</span><span class="ident" id="2867947">typ</span><span class="op" id="2867950">)</span><span class="op" id="2867951">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867955">s</span>&nbsp;<span class="op" id="2867957">:=</span>&nbsp;<span class="op" id="2867960">(</span><span class="op" id="2867961">*</span><span class="ident" id="2867962">sliceHeader</span><span class="op" id="2867973">)</span><span class="op" id="2867974">(</span><span class="ident" id="2867975">v</span><span class="op" id="2867976">.</span><span class="ident" id="2867977">ptr</span><span class="op" id="2867980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2867984">base</span>&nbsp;<span class="op" id="2867989">=</span>&nbsp;<span class="ident" id="2867991">unsafe</span><span class="op" id="2867997">.</span><span class="ident" id="2867998">Pointer</span><span class="op" id="2868005">(</span><span class="ident" id="2868006">s</span><span class="op" id="2868007">.</span><span class="ident" id="2868008">Data</span><span class="op" id="2868012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2868016">cap</span>&nbsp;<span class="op" id="2868020">=</span>&nbsp;<span class="ident" id="2868022">s</span><span class="op" id="2868023">.</span><span class="ident" id="2868024">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868030">case</span>&nbsp;<span class="ident" id="2868035">String</span><span class="op" id="2868041">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868045">s</span>&nbsp;<span class="op" id="2868047">:=</span>&nbsp;<span class="op" id="2868050">(</span><span class="op" id="2868051">*</span><span class="ident" id="2868052">stringHeader</span><span class="op" id="2868064">)</span><span class="op" id="2868065">(</span><span class="ident" id="2868066">v</span><span class="op" id="2868067">.</span><span class="ident" id="2868068">ptr</span><span class="op" id="2868071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868075">if</span>&nbsp;<span class="ident" id="2868078">i</span>&nbsp;<span class="op" id="2868080">&lt;</span>&nbsp;<span class="num" id="2868082">0</span>&nbsp;<span class="op" id="2868084">||</span>&nbsp;<span class="ident" id="2868087">j</span>&nbsp;<span class="op" id="2868089">&lt;</span>&nbsp;<span class="ident" id="2868091">i</span>&nbsp;<span class="op" id="2868093">||</span>&nbsp;<span class="ident" id="2868096">j</span>&nbsp;<span class="op" id="2868098">&gt;</span>&nbsp;<span class="ident" id="2868100">s</span><span class="op" id="2868101">.</span><span class="ident" id="2868102">Len</span>&nbsp;<span class="op" id="2868106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2868111">panic</span><span class="op" id="2868116">(</span><span class="string" id="2868117">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2868172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2868176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868180">t</span>&nbsp;<span class="op" id="2868182">:=</span>&nbsp;<span class="ident" id="2868185">stringHeader</span><span class="op" id="2868197">{</span><span class="ident" id="2868198">unsafe</span><span class="op" id="2868204">.</span><span class="ident" id="2868205">Pointer</span><span class="op" id="2868212">(</span><span class="builtintype" id="2868213">uintptr</span><span class="op" id="2868220">(</span><span class="ident" id="2868221">s</span><span class="op" id="2868222">.</span><span class="ident" id="2868223">Data</span><span class="op" id="2868227">)</span>&nbsp;<span class="op" id="2868229">+</span>&nbsp;<span class="builtintype" id="2868231">uintptr</span><span class="op" id="2868238">(</span><span class="ident" id="2868239">i</span><span class="op" id="2868240">)</span><span class="op" id="2868241">)</span><span class="op" id="2868242">,</span>&nbsp;<span class="ident" id="2868244">j</span>&nbsp;<span class="op" id="2868246">-</span>&nbsp;<span class="ident" id="2868248">i</span><span class="op" id="2868249">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868253">return</span>&nbsp;<span class="ident" id="2868260">Value</span><span class="op" id="2868265">{</span><span class="ident" id="2868266">v</span><span class="op" id="2868267">.</span><span class="ident" id="2868268">typ</span><span class="op" id="2868271">,</span>&nbsp;<span class="ident" id="2868273">unsafe</span><span class="op" id="2868279">.</span><span class="ident" id="2868280">Pointer</span><span class="op" id="2868287">(</span><span class="op" id="2868288">&amp;</span><span class="ident" id="2868289">t</span><span class="op" id="2868290">)</span><span class="op" id="2868291">,</span>&nbsp;<span class="ident" id="2868293">v</span><span class="op" id="2868294">.</span><span class="ident" id="2868295">flag</span><span class="op" id="2868299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2868302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868306">if</span>&nbsp;<span class="ident" id="2868309">i</span>&nbsp;<span class="op" id="2868311">&lt;</span>&nbsp;<span class="num" id="2868313">0</span>&nbsp;<span class="op" id="2868315">||</span>&nbsp;<span class="ident" id="2868318">j</span>&nbsp;<span class="op" id="2868320">&lt;</span>&nbsp;<span class="ident" id="2868322">i</span>&nbsp;<span class="op" id="2868324">||</span>&nbsp;<span class="ident" id="2868327">j</span>&nbsp;<span class="op" id="2868329">&gt;</span>&nbsp;<span class="builtinfunc" id="2868331">cap</span>&nbsp;<span class="op" id="2868335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2868339">panic</span><span class="op" id="2868344">(</span><span class="string" id="2868345">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2868393">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2868396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2868400">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868461">var</span>&nbsp;<span class="ident" id="2868465">x</span>&nbsp;<span class="op" id="2868467">[</span><span class="op" id="2868468">]</span><span class="ident" id="2868469">unsafe</span><span class="op" id="2868475">.</span><span class="ident" id="2868476">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2868486">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868527">s</span>&nbsp;<span class="op" id="2868529">:=</span>&nbsp;<span class="op" id="2868532">(</span><span class="op" id="2868533">*</span><span class="ident" id="2868534">sliceHeader</span><span class="op" id="2868545">)</span><span class="op" id="2868546">(</span><span class="ident" id="2868547">unsafe</span><span class="op" id="2868553">.</span><span class="ident" id="2868554">Pointer</span><span class="op" id="2868561">(</span><span class="op" id="2868562">&amp;</span><span class="ident" id="2868563">x</span><span class="op" id="2868564">)</span><span class="op" id="2868565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868568">s</span><span class="op" id="2868569">.</span><span class="ident" id="2868570">Len</span>&nbsp;<span class="op" id="2868574">=</span>&nbsp;<span class="ident" id="2868576">j</span>&nbsp;<span class="op" id="2868578">-</span>&nbsp;<span class="ident" id="2868580">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868583">s</span><span class="op" id="2868584">.</span><span class="ident" id="2868585">Cap</span>&nbsp;<span class="op" id="2868589">=</span>&nbsp;<span class="builtinfunc" id="2868591">cap</span>&nbsp;<span class="op" id="2868595">-</span>&nbsp;<span class="ident" id="2868597">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868600">if</span>&nbsp;<span class="builtinfunc" id="2868603">cap</span><span class="op" id="2868606">-</span><span class="ident" id="2868607">i</span>&nbsp;<span class="op" id="2868609">&gt;</span>&nbsp;<span class="num" id="2868611">0</span>&nbsp;<span class="op" id="2868613">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868617">s</span><span class="op" id="2868618">.</span><span class="ident" id="2868619">Data</span>&nbsp;<span class="op" id="2868624">=</span>&nbsp;<span class="ident" id="2868626">unsafe</span><span class="op" id="2868632">.</span><span class="ident" id="2868633">Pointer</span><span class="op" id="2868640">(</span><span class="builtintype" id="2868641">uintptr</span><span class="op" id="2868648">(</span><span class="ident" id="2868649">base</span><span class="op" id="2868653">)</span>&nbsp;<span class="op" id="2868655">+</span>&nbsp;<span class="builtintype" id="2868657">uintptr</span><span class="op" id="2868664">(</span><span class="ident" id="2868665">i</span><span class="op" id="2868666">)</span><span class="op" id="2868667">*</span><span class="ident" id="2868668">typ</span><span class="op" id="2868671">.</span><span class="ident" id="2868672">elem</span><span class="op" id="2868676">.</span><span class="ident" id="2868677">Size</span><span class="op" id="2868681">(</span><span class="op" id="2868682">)</span><span class="op" id="2868683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2868686">}</span>&nbsp;<span class="keyword" id="2868688">else</span>&nbsp;<span class="op" id="2868693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2868697">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868764">s</span><span class="op" id="2868765">.</span><span class="ident" id="2868766">Data</span>&nbsp;<span class="op" id="2868771">=</span>&nbsp;<span class="ident" id="2868773">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2868779">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2868783">fl</span>&nbsp;<span class="op" id="2868786">:=</span>&nbsp;<span class="ident" id="2868789">v</span><span class="op" id="2868790">.</span><span class="ident" id="2868791">flag</span><span class="op" id="2868795">&amp;</span><span class="ident" id="2868796">flagRO</span>&nbsp;<span class="op" id="2868803">|</span>&nbsp;<span class="ident" id="2868805">flagIndir</span>&nbsp;<span class="op" id="2868815">|</span>&nbsp;<span class="ident" id="2868817">flag</span><span class="op" id="2868821">(</span><span class="ident" id="2868822">Slice</span><span class="op" id="2868827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2868830">return</span>&nbsp;<span class="ident" id="2868837">Value</span><span class="op" id="2868842">{</span><span class="ident" id="2868843">typ</span><span class="op" id="2868846">.</span><span class="ident" id="2868847">common</span><span class="op" id="2868853">(</span><span class="op" id="2868854">)</span><span class="op" id="2868855">,</span>&nbsp;<span class="ident" id="2868857">unsafe</span><span class="op" id="2868863">.</span><span class="ident" id="2868864">Pointer</span><span class="op" id="2868871">(</span><span class="op" id="2868872">&amp;</span><span class="ident" id="2868873">x</span><span class="op" id="2868874">)</span><span class="op" id="2868875">,</span>&nbsp;<span class="ident" id="2868877">fl</span><span class="op" id="2868879">}</span><br>
<span class="lineno"></span><span class="op" id="2868881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2868884">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2868959">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2869042">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2869082">func</span>&nbsp;<span class="op" id="2869087">(</span><span class="ident" id="2869088">v</span>&nbsp;<span class="ident" id="2869090">Value</span><span class="op" id="2869095">)</span>&nbsp;<span class="ident" id="2869097">Slice3</span><span class="op" id="2869103">(</span><span class="ident" id="2869104">i</span><span class="op" id="2869105">,</span>&nbsp;<span class="ident" id="2869107">j</span><span class="op" id="2869108">,</span>&nbsp;<span class="ident" id="2869110">k</span>&nbsp;<span class="builtintype" id="2869112">int</span><span class="op" id="2869115">)</span>&nbsp;<span class="ident" id="2869117">Value</span>&nbsp;<span class="op" id="2869123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869126">var</span>&nbsp;<span class="op" id="2869130">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869134">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2869139">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869145">typ</span>&nbsp;&nbsp;<span class="op" id="2869150">*</span><span class="ident" id="2869151">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869163">base</span>&nbsp;<span class="ident" id="2869168">unsafe</span><span class="op" id="2869174">.</span><span class="ident" id="2869175">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869187">switch</span>&nbsp;<span class="ident" id="2869194">kind</span>&nbsp;<span class="op" id="2869199">:=</span>&nbsp;<span class="ident" id="2869202">v</span><span class="op" id="2869203">.</span><span class="ident" id="2869204">kind</span><span class="op" id="2869208">(</span><span class="op" id="2869209">)</span><span class="op" id="2869210">;</span>&nbsp;<span class="ident" id="2869212">kind</span>&nbsp;<span class="op" id="2869217">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869220">default</span><span class="op" id="2869227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869231">panic</span><span class="op" id="2869236">(</span><span class="op" id="2869237">&amp;</span><span class="ident" id="2869238">ValueError</span><span class="op" id="2869248">{</span><span class="string" id="2869249">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2869271">,</span>&nbsp;<span class="ident" id="2869273">v</span><span class="op" id="2869274">.</span><span class="ident" id="2869275">kind</span><span class="op" id="2869279">(</span><span class="op" id="2869280">)</span><span class="op" id="2869281">}</span><span class="op" id="2869282">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869286">case</span>&nbsp;<span class="ident" id="2869291">Array</span><span class="op" id="2869296">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869300">if</span>&nbsp;<span class="ident" id="2869303">v</span><span class="op" id="2869304">.</span><span class="ident" id="2869305">flag</span><span class="op" id="2869309">&amp;</span><span class="ident" id="2869310">flagAddr</span>&nbsp;<span class="op" id="2869319">==</span>&nbsp;<span class="num" id="2869322">0</span>&nbsp;<span class="op" id="2869324">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869329">panic</span><span class="op" id="2869334">(</span><span class="string" id="2869335">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2869387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869395">tt</span>&nbsp;<span class="op" id="2869398">:=</span>&nbsp;<span class="op" id="2869401">(</span><span class="op" id="2869402">*</span><span class="ident" id="2869403">arrayType</span><span class="op" id="2869412">)</span><span class="op" id="2869413">(</span><span class="ident" id="2869414">unsafe</span><span class="op" id="2869420">.</span><span class="ident" id="2869421">Pointer</span><span class="op" id="2869428">(</span><span class="ident" id="2869429">v</span><span class="op" id="2869430">.</span><span class="ident" id="2869431">typ</span><span class="op" id="2869434">)</span><span class="op" id="2869435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869439">cap</span>&nbsp;<span class="op" id="2869443">=</span>&nbsp;<span class="builtintype" id="2869445">int</span><span class="op" id="2869448">(</span><span class="ident" id="2869449">tt</span><span class="op" id="2869451">.</span><span class="builtinfunc" id="2869452">len</span><span class="op" id="2869455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869459">typ</span>&nbsp;<span class="op" id="2869463">=</span>&nbsp;<span class="op" id="2869465">(</span><span class="op" id="2869466">*</span><span class="ident" id="2869467">sliceType</span><span class="op" id="2869476">)</span><span class="op" id="2869477">(</span><span class="ident" id="2869478">unsafe</span><span class="op" id="2869484">.</span><span class="ident" id="2869485">Pointer</span><span class="op" id="2869492">(</span><span class="ident" id="2869493">tt</span><span class="op" id="2869495">.</span><span class="ident" id="2869496">slice</span><span class="op" id="2869501">)</span><span class="op" id="2869502">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869506">base</span>&nbsp;<span class="op" id="2869511">=</span>&nbsp;<span class="ident" id="2869513">v</span><span class="op" id="2869514">.</span><span class="ident" id="2869515">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869521">case</span>&nbsp;<span class="ident" id="2869526">Slice</span><span class="op" id="2869531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869535">typ</span>&nbsp;<span class="op" id="2869539">=</span>&nbsp;<span class="op" id="2869541">(</span><span class="op" id="2869542">*</span><span class="ident" id="2869543">sliceType</span><span class="op" id="2869552">)</span><span class="op" id="2869553">(</span><span class="ident" id="2869554">unsafe</span><span class="op" id="2869560">.</span><span class="ident" id="2869561">Pointer</span><span class="op" id="2869568">(</span><span class="ident" id="2869569">v</span><span class="op" id="2869570">.</span><span class="ident" id="2869571">typ</span><span class="op" id="2869574">)</span><span class="op" id="2869575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869579">s</span>&nbsp;<span class="op" id="2869581">:=</span>&nbsp;<span class="op" id="2869584">(</span><span class="op" id="2869585">*</span><span class="ident" id="2869586">sliceHeader</span><span class="op" id="2869597">)</span><span class="op" id="2869598">(</span><span class="ident" id="2869599">v</span><span class="op" id="2869600">.</span><span class="ident" id="2869601">ptr</span><span class="op" id="2869604">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869608">base</span>&nbsp;<span class="op" id="2869613">=</span>&nbsp;<span class="ident" id="2869615">s</span><span class="op" id="2869616">.</span><span class="ident" id="2869617">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869624">cap</span>&nbsp;<span class="op" id="2869628">=</span>&nbsp;<span class="ident" id="2869630">s</span><span class="op" id="2869631">.</span><span class="ident" id="2869632">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869641">if</span>&nbsp;<span class="ident" id="2869644">i</span>&nbsp;<span class="op" id="2869646">&lt;</span>&nbsp;<span class="num" id="2869648">0</span>&nbsp;<span class="op" id="2869650">||</span>&nbsp;<span class="ident" id="2869653">j</span>&nbsp;<span class="op" id="2869655">&lt;</span>&nbsp;<span class="ident" id="2869657">i</span>&nbsp;<span class="op" id="2869659">||</span>&nbsp;<span class="ident" id="2869662">k</span>&nbsp;<span class="op" id="2869664">&lt;</span>&nbsp;<span class="ident" id="2869666">j</span>&nbsp;<span class="op" id="2869668">||</span>&nbsp;<span class="ident" id="2869671">k</span>&nbsp;<span class="op" id="2869673">&gt;</span>&nbsp;<span class="builtinfunc" id="2869675">cap</span>&nbsp;<span class="op" id="2869679">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2869683">panic</span><span class="op" id="2869688">(</span><span class="string" id="2869689">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2869738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2869741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869745">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869793">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869829">var</span>&nbsp;<span class="ident" id="2869833">x</span>&nbsp;<span class="op" id="2869835">[</span><span class="op" id="2869836">]</span><span class="ident" id="2869837">unsafe</span><span class="op" id="2869843">.</span><span class="ident" id="2869844">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2869854">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869895">s</span>&nbsp;<span class="op" id="2869897">:=</span>&nbsp;<span class="op" id="2869900">(</span><span class="op" id="2869901">*</span><span class="ident" id="2869902">sliceHeader</span><span class="op" id="2869913">)</span><span class="op" id="2869914">(</span><span class="ident" id="2869915">unsafe</span><span class="op" id="2869921">.</span><span class="ident" id="2869922">Pointer</span><span class="op" id="2869929">(</span><span class="op" id="2869930">&amp;</span><span class="ident" id="2869931">x</span><span class="op" id="2869932">)</span><span class="op" id="2869933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869936">s</span><span class="op" id="2869937">.</span><span class="ident" id="2869938">Len</span>&nbsp;<span class="op" id="2869942">=</span>&nbsp;<span class="ident" id="2869944">j</span>&nbsp;<span class="op" id="2869946">-</span>&nbsp;<span class="ident" id="2869948">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869951">s</span><span class="op" id="2869952">.</span><span class="ident" id="2869953">Cap</span>&nbsp;<span class="op" id="2869957">=</span>&nbsp;<span class="ident" id="2869959">k</span>&nbsp;<span class="op" id="2869961">-</span>&nbsp;<span class="ident" id="2869963">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2869966">if</span>&nbsp;<span class="ident" id="2869969">k</span><span class="op" id="2869970">-</span><span class="ident" id="2869971">i</span>&nbsp;<span class="op" id="2869973">&gt;</span>&nbsp;<span class="num" id="2869975">0</span>&nbsp;<span class="op" id="2869977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2869981">s</span><span class="op" id="2869982">.</span><span class="ident" id="2869983">Data</span>&nbsp;<span class="op" id="2869988">=</span>&nbsp;<span class="ident" id="2869990">unsafe</span><span class="op" id="2869996">.</span><span class="ident" id="2869997">Pointer</span><span class="op" id="2870004">(</span><span class="builtintype" id="2870005">uintptr</span><span class="op" id="2870012">(</span><span class="ident" id="2870013">base</span><span class="op" id="2870017">)</span>&nbsp;<span class="op" id="2870019">+</span>&nbsp;<span class="builtintype" id="2870021">uintptr</span><span class="op" id="2870028">(</span><span class="ident" id="2870029">i</span><span class="op" id="2870030">)</span><span class="op" id="2870031">*</span><span class="ident" id="2870032">typ</span><span class="op" id="2870035">.</span><span class="ident" id="2870036">elem</span><span class="op" id="2870040">.</span><span class="ident" id="2870041">Size</span><span class="op" id="2870045">(</span><span class="op" id="2870046">)</span><span class="op" id="2870047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870050">}</span>&nbsp;<span class="keyword" id="2870052">else</span>&nbsp;<span class="op" id="2870057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2870061">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870128">s</span><span class="op" id="2870129">.</span><span class="ident" id="2870130">Data</span>&nbsp;<span class="op" id="2870135">=</span>&nbsp;<span class="ident" id="2870137">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2870147">fl</span>&nbsp;<span class="op" id="2870150">:=</span>&nbsp;<span class="ident" id="2870153">v</span><span class="op" id="2870154">.</span><span class="ident" id="2870155">flag</span><span class="op" id="2870159">&amp;</span><span class="ident" id="2870160">flagRO</span>&nbsp;<span class="op" id="2870167">|</span>&nbsp;<span class="ident" id="2870169">flagIndir</span>&nbsp;<span class="op" id="2870179">|</span>&nbsp;<span class="ident" id="2870181">flag</span><span class="op" id="2870185">(</span><span class="ident" id="2870186">Slice</span><span class="op" id="2870191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870194">return</span>&nbsp;<span class="ident" id="2870201">Value</span><span class="op" id="2870206">{</span><span class="ident" id="2870207">typ</span><span class="op" id="2870210">.</span><span class="ident" id="2870211">common</span><span class="op" id="2870217">(</span><span class="op" id="2870218">)</span><span class="op" id="2870219">,</span>&nbsp;<span class="ident" id="2870221">unsafe</span><span class="op" id="2870227">.</span><span class="ident" id="2870228">Pointer</span><span class="op" id="2870235">(</span><span class="op" id="2870236">&amp;</span><span class="ident" id="2870237">x</span><span class="op" id="2870238">)</span><span class="op" id="2870239">,</span>&nbsp;<span class="ident" id="2870241">fl</span><span class="op" id="2870243">}</span><br>
<span class="lineno">1590</span><span class="op" id="2870245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2870248">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2870312">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2870382">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2870456">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2870533">func</span>&nbsp;<span class="op" id="2870538">(</span><span class="ident" id="2870539">v</span>&nbsp;<span class="ident" id="2870541">Value</span><span class="op" id="2870546">)</span>&nbsp;<span class="ident" id="2870548">String</span><span class="op" id="2870554">(</span><span class="op" id="2870555">)</span>&nbsp;<span class="builtintype" id="2870557">string</span>&nbsp;<span class="op" id="2870564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870567">switch</span>&nbsp;<span class="ident" id="2870574">k</span>&nbsp;<span class="op" id="2870576">:=</span>&nbsp;<span class="ident" id="2870579">v</span><span class="op" id="2870580">.</span><span class="ident" id="2870581">kind</span><span class="op" id="2870585">(</span><span class="op" id="2870586">)</span><span class="op" id="2870587">;</span>&nbsp;<span class="ident" id="2870589">k</span>&nbsp;<span class="op" id="2870591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870594">case</span>&nbsp;<span class="ident" id="2870599">Invalid</span><span class="op" id="2870606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870610">return</span>&nbsp;<span class="string" id="2870617">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870636">case</span>&nbsp;<span class="ident" id="2870641">String</span><span class="op" id="2870647">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870651">return</span>&nbsp;<span class="op" id="2870658">*</span><span class="op" id="2870659">(</span><span class="op" id="2870660">*</span><span class="builtintype" id="2870661">string</span><span class="op" id="2870667">)</span><span class="op" id="2870668">(</span><span class="ident" id="2870669">v</span><span class="op" id="2870670">.</span><span class="ident" id="2870671">ptr</span><span class="op" id="2870674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2870677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2870680">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2870752">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2870808">return</span>&nbsp;<span class="string" id="2870815">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2870819">+</span>&nbsp;<span class="ident" id="2870821">v</span><span class="op" id="2870822">.</span><span class="ident" id="2870823">Type</span><span class="op" id="2870827">(</span><span class="op" id="2870828">)</span><span class="op" id="2870829">.</span><span class="ident" id="2870830">String</span><span class="op" id="2870836">(</span><span class="op" id="2870837">)</span>&nbsp;<span class="op" id="2870839">+</span>&nbsp;<span class="string" id="2870841">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2870851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2870854">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2870932">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2870970">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2871049">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2871136">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2871233">func</span>&nbsp;<span class="op" id="2871238">(</span><span class="ident" id="2871239">v</span>&nbsp;<span class="ident" id="2871241">Value</span><span class="op" id="2871246">)</span>&nbsp;<span class="ident" id="2871248">TryRecv</span><span class="op" id="2871255">(</span><span class="op" id="2871256">)</span>&nbsp;<span class="op" id="2871258">(</span><span class="ident" id="2871259">x</span>&nbsp;<span class="ident" id="2871261">Value</span><span class="op" id="2871266">,</span>&nbsp;<span class="ident" id="2871268">ok</span>&nbsp;<span class="builtintype" id="2871271">bool</span><span class="op" id="2871275">)</span>&nbsp;<span class="op" id="2871277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871280">v</span><span class="op" id="2871281">.</span><span class="ident" id="2871282">mustBe</span><span class="op" id="2871288">(</span><span class="ident" id="2871289">Chan</span><span class="op" id="2871293">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871296">v</span><span class="op" id="2871297">.</span><span class="ident" id="2871298">mustBeExported</span><span class="op" id="2871312">(</span><span class="op" id="2871313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871316">return</span>&nbsp;<span class="ident" id="2871323">v</span><span class="op" id="2871324">.</span><span class="ident" id="2871325">recv</span><span class="op" id="2871329">(</span><span class="builtintype" id="2871330">true</span><span class="op" id="2871334">)</span><br>
<span class="lineno"></span><span class="op" id="2871336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2871339">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2871406">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2871444">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2871503">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2871576">func</span>&nbsp;<span class="op" id="2871581">(</span><span class="ident" id="2871582">v</span>&nbsp;<span class="ident" id="2871584">Value</span><span class="op" id="2871589">)</span>&nbsp;<span class="ident" id="2871591">TrySend</span><span class="op" id="2871598">(</span><span class="ident" id="2871599">x</span>&nbsp;<span class="ident" id="2871601">Value</span><span class="op" id="2871606">)</span>&nbsp;<span class="builtintype" id="2871608">bool</span>&nbsp;<span class="op" id="2871613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871616">v</span><span class="op" id="2871617">.</span><span class="ident" id="2871618">mustBe</span><span class="op" id="2871624">(</span><span class="ident" id="2871625">Chan</span><span class="op" id="2871629">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871632">v</span><span class="op" id="2871633">.</span><span class="ident" id="2871634">mustBeExported</span><span class="op" id="2871648">(</span><span class="op" id="2871649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871652">return</span>&nbsp;<span class="ident" id="2871659">v</span><span class="op" id="2871660">.</span><span class="ident" id="2871661">send</span><span class="op" id="2871665">(</span><span class="ident" id="2871666">x</span><span class="op" id="2871667">,</span>&nbsp;<span class="builtintype" id="2871669">true</span><span class="op" id="2871673">)</span><br>
<span class="lineno"></span><span class="op" id="2871675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2871678">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2871704">func</span>&nbsp;<span class="op" id="2871709">(</span><span class="ident" id="2871710">v</span>&nbsp;<span class="ident" id="2871712">Value</span><span class="op" id="2871717">)</span>&nbsp;<span class="ident" id="2871719">Type</span><span class="op" id="2871723">(</span><span class="op" id="2871724">)</span>&nbsp;<span class="ident" id="2871726">Type</span>&nbsp;<span class="op" id="2871731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871734">f</span>&nbsp;<span class="op" id="2871736">:=</span>&nbsp;<span class="ident" id="2871739">v</span><span class="op" id="2871740">.</span><span class="ident" id="2871741">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871747">if</span>&nbsp;<span class="ident" id="2871750">f</span>&nbsp;<span class="op" id="2871752">==</span>&nbsp;<span class="num" id="2871755">0</span>&nbsp;<span class="op" id="2871757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2871761">panic</span><span class="op" id="2871766">(</span><span class="op" id="2871767">&amp;</span><span class="ident" id="2871768">ValueError</span><span class="op" id="2871778">{</span><span class="string" id="2871779">&#34;reflect.Value.Type&#34;</span><span class="op" id="2871799">,</span>&nbsp;<span class="ident" id="2871801">Invalid</span><span class="op" id="2871808">}</span><span class="op" id="2871809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2871812">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871815">if</span>&nbsp;<span class="ident" id="2871818">f</span><span class="op" id="2871819">&amp;</span><span class="ident" id="2871820">flagMethod</span>&nbsp;<span class="op" id="2871831">==</span>&nbsp;<span class="num" id="2871834">0</span>&nbsp;<span class="op" id="2871836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871840">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871855">return</span>&nbsp;<span class="ident" id="2871862">v</span><span class="op" id="2871863">.</span><span class="ident" id="2871864">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2871869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871873">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2871891">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2871946">i</span>&nbsp;<span class="op" id="2871948">:=</span>&nbsp;<span class="builtintype" id="2871951">int</span><span class="op" id="2871954">(</span><span class="ident" id="2871955">v</span><span class="op" id="2871956">.</span><span class="ident" id="2871957">flag</span><span class="op" id="2871961">)</span>&nbsp;<span class="op" id="2871963">&gt;&gt;</span>&nbsp;<span class="ident" id="2871966">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2871983">if</span>&nbsp;<span class="ident" id="2871986">v</span><span class="op" id="2871987">.</span><span class="ident" id="2871988">typ</span><span class="op" id="2871991">.</span><span class="ident" id="2871992">Kind</span><span class="op" id="2871996">(</span><span class="op" id="2871997">)</span>&nbsp;<span class="op" id="2871999">==</span>&nbsp;<span class="ident" id="2872002">Interface</span>&nbsp;<span class="op" id="2872012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2872016">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872042">tt</span>&nbsp;<span class="op" id="2872045">:=</span>&nbsp;<span class="op" id="2872048">(</span><span class="op" id="2872049">*</span><span class="ident" id="2872050">interfaceType</span><span class="op" id="2872063">)</span><span class="op" id="2872064">(</span><span class="ident" id="2872065">unsafe</span><span class="op" id="2872071">.</span><span class="ident" id="2872072">Pointer</span><span class="op" id="2872079">(</span><span class="ident" id="2872080">v</span><span class="op" id="2872081">.</span><span class="ident" id="2872082">typ</span><span class="op" id="2872085">)</span><span class="op" id="2872086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872090">if</span>&nbsp;<span class="builtintype" id="2872093">uint</span><span class="op" id="2872097">(</span><span class="ident" id="2872098">i</span><span class="op" id="2872099">)</span>&nbsp;<span class="op" id="2872101">&gt;=</span>&nbsp;<span class="builtintype" id="2872104">uint</span><span class="op" id="2872108">(</span><span class="builtinfunc" id="2872109">len</span><span class="op" id="2872112">(</span><span class="ident" id="2872113">tt</span><span class="op" id="2872115">.</span><span class="ident" id="2872116">methods</span><span class="op" id="2872123">)</span><span class="op" id="2872124">)</span>&nbsp;<span class="op" id="2872126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2872131">panic</span><span class="op" id="2872136">(</span><span class="string" id="2872137">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2872184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872192">m</span>&nbsp;<span class="op" id="2872194">:=</span>&nbsp;<span class="op" id="2872197">&amp;</span><span class="ident" id="2872198">tt</span><span class="op" id="2872200">.</span><span class="ident" id="2872201">methods</span><span class="op" id="2872208">[</span><span class="ident" id="2872209">i</span><span class="op" id="2872210">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872214">return</span>&nbsp;<span class="ident" id="2872221">m</span><span class="op" id="2872222">.</span><span class="ident" id="2872223">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2872231">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872260">ut</span>&nbsp;<span class="op" id="2872263">:=</span>&nbsp;<span class="ident" id="2872266">v</span><span class="op" id="2872267">.</span><span class="ident" id="2872268">typ</span><span class="op" id="2872271">.</span><span class="ident" id="2872272">uncommon</span><span class="op" id="2872280">(</span><span class="op" id="2872281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872284">if</span>&nbsp;<span class="ident" id="2872287">ut</span>&nbsp;<span class="op" id="2872290">==</span>&nbsp;<span class="builtintype" id="2872293">nil</span>&nbsp;<span class="op" id="2872297">||</span>&nbsp;<span class="builtintype" id="2872300">uint</span><span class="op" id="2872304">(</span><span class="ident" id="2872305">i</span><span class="op" id="2872306">)</span>&nbsp;<span class="op" id="2872308">&gt;=</span>&nbsp;<span class="builtintype" id="2872311">uint</span><span class="op" id="2872315">(</span><span class="builtinfunc" id="2872316">len</span><span class="op" id="2872319">(</span><span class="ident" id="2872320">ut</span><span class="op" id="2872322">.</span><span class="ident" id="2872323">methods</span><span class="op" id="2872330">)</span><span class="op" id="2872331">)</span>&nbsp;<span class="op" id="2872333">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2872337">panic</span><span class="op" id="2872342">(</span><span class="string" id="2872343">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2872390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872396">m</span>&nbsp;<span class="op" id="2872398">:=</span>&nbsp;<span class="op" id="2872401">&amp;</span><span class="ident" id="2872402">ut</span><span class="op" id="2872404">.</span><span class="ident" id="2872405">methods</span><span class="op" id="2872412">[</span><span class="ident" id="2872413">i</span><span class="op" id="2872414">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872417">return</span>&nbsp;<span class="ident" id="2872424">m</span><span class="op" id="2872425">.</span><span class="ident" id="2872426">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2872431">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2872434">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2872485">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2872566">func</span>&nbsp;<span class="op" id="2872571">(</span><span class="ident" id="2872572">v</span>&nbsp;<span class="ident" id="2872574">Value</span><span class="op" id="2872579">)</span>&nbsp;<span class="ident" id="2872581">Uint</span><span class="op" id="2872585">(</span><span class="op" id="2872586">)</span>&nbsp;<span class="ident" id="2872588">uint64</span>&nbsp;<span class="op" id="2872595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872598">k</span>&nbsp;<span class="op" id="2872600">:=</span>&nbsp;<span class="ident" id="2872603">v</span><span class="op" id="2872604">.</span><span class="ident" id="2872605">kind</span><span class="op" id="2872609">(</span><span class="op" id="2872610">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2872613">p</span>&nbsp;<span class="op" id="2872615">:=</span>&nbsp;<span class="ident" id="2872618">v</span><span class="op" id="2872619">.</span><span class="ident" id="2872620">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872625">switch</span>&nbsp;<span class="ident" id="2872632">k</span>&nbsp;<span class="op" id="2872634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872637">case</span>&nbsp;<span class="ident" id="2872642">Uint</span><span class="op" id="2872646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872650">return</span>&nbsp;<span class="ident" id="2872657">uint64</span><span class="op" id="2872663">(</span><span class="op" id="2872664">*</span><span class="op" id="2872665">(</span><span class="op" id="2872666">*</span><span class="builtintype" id="2872667">uint</span><span class="op" id="2872671">)</span><span class="op" id="2872672">(</span><span class="ident" id="2872673">p</span><span class="op" id="2872674">)</span><span class="op" id="2872675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872678">case</span>&nbsp;<span class="ident" id="2872683">Uint8</span><span class="op" id="2872688">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872692">return</span>&nbsp;<span class="ident" id="2872699">uint64</span><span class="op" id="2872705">(</span><span class="op" id="2872706">*</span><span class="op" id="2872707">(</span><span class="op" id="2872708">*</span><span class="builtintype" id="2872709">uint8</span><span class="op" id="2872714">)</span><span class="op" id="2872715">(</span><span class="ident" id="2872716">p</span><span class="op" id="2872717">)</span><span class="op" id="2872718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872721">case</span>&nbsp;<span class="ident" id="2872726">Uint16</span><span class="op" id="2872732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872736">return</span>&nbsp;<span class="ident" id="2872743">uint64</span><span class="op" id="2872749">(</span><span class="op" id="2872750">*</span><span class="op" id="2872751">(</span><span class="op" id="2872752">*</span><span class="builtintype" id="2872753">uint16</span><span class="op" id="2872759">)</span><span class="op" id="2872760">(</span><span class="ident" id="2872761">p</span><span class="op" id="2872762">)</span><span class="op" id="2872763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872766">case</span>&nbsp;<span class="ident" id="2872771">Uint32</span><span class="op" id="2872777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872781">return</span>&nbsp;<span class="ident" id="2872788">uint64</span><span class="op" id="2872794">(</span><span class="op" id="2872795">*</span><span class="op" id="2872796">(</span><span class="op" id="2872797">*</span><span class="builtintype" id="2872798">uint32</span><span class="op" id="2872804">)</span><span class="op" id="2872805">(</span><span class="ident" id="2872806">p</span><span class="op" id="2872807">)</span><span class="op" id="2872808">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872811">case</span>&nbsp;<span class="ident" id="2872816">Uint64</span><span class="op" id="2872822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872826">return</span>&nbsp;<span class="ident" id="2872833">uint64</span><span class="op" id="2872839">(</span><span class="op" id="2872840">*</span><span class="op" id="2872841">(</span><span class="op" id="2872842">*</span><span class="ident" id="2872843">uint64</span><span class="op" id="2872849">)</span><span class="op" id="2872850">(</span><span class="ident" id="2872851">p</span><span class="op" id="2872852">)</span><span class="op" id="2872853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872856">case</span>&nbsp;<span class="ident" id="2872861">Uintptr</span><span class="op" id="2872868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2872872">return</span>&nbsp;<span class="ident" id="2872879">uint64</span><span class="op" id="2872885">(</span><span class="op" id="2872886">*</span><span class="op" id="2872887">(</span><span class="op" id="2872888">*</span><span class="builtintype" id="2872889">uintptr</span><span class="op" id="2872896">)</span><span class="op" id="2872897">(</span><span class="ident" id="2872898">p</span><span class="op" id="2872899">)</span><span class="op" id="2872900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2872903">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2872906">panic</span><span class="op" id="2872911">(</span><span class="op" id="2872912">&amp;</span><span class="ident" id="2872913">ValueError</span><span class="op" id="2872923">{</span><span class="string" id="2872924">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2872944">,</span>&nbsp;<span class="ident" id="2872946">v</span><span class="op" id="2872947">.</span><span class="ident" id="2872948">kind</span><span class="op" id="2872952">(</span><span class="op" id="2872953">)</span><span class="op" id="2872954">}</span><span class="op" id="2872955">)</span><br>
<span class="lineno"></span><span class="op" id="2872957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2872960">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2873005">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2873074">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2873112">func</span>&nbsp;<span class="op" id="2873117">(</span><span class="ident" id="2873118">v</span>&nbsp;<span class="ident" id="2873120">Value</span><span class="op" id="2873125">)</span>&nbsp;<span class="ident" id="2873127">UnsafeAddr</span><span class="op" id="2873137">(</span><span class="op" id="2873138">)</span>&nbsp;<span class="builtintype" id="2873140">uintptr</span>&nbsp;<span class="op" id="2873148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2873151">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873171">if</span>&nbsp;<span class="ident" id="2873174">v</span><span class="op" id="2873175">.</span><span class="ident" id="2873176">typ</span>&nbsp;<span class="op" id="2873180">==</span>&nbsp;<span class="builtintype" id="2873183">nil</span>&nbsp;<span class="op" id="2873187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2873191">panic</span><span class="op" id="2873196">(</span><span class="op" id="2873197">&amp;</span><span class="ident" id="2873198">ValueError</span><span class="op" id="2873208">{</span><span class="string" id="2873209">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2873235">,</span>&nbsp;<span class="ident" id="2873237">Invalid</span><span class="op" id="2873244">}</span><span class="op" id="2873245">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873251">if</span>&nbsp;<span class="ident" id="2873254">v</span><span class="op" id="2873255">.</span><span class="ident" id="2873256">flag</span><span class="op" id="2873260">&amp;</span><span class="ident" id="2873261">flagAddr</span>&nbsp;<span class="op" id="2873270">==</span>&nbsp;<span class="num" id="2873273">0</span>&nbsp;<span class="op" id="2873275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2873279">panic</span><span class="op" id="2873284">(</span><span class="string" id="2873285">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2873334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2873337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2873340">return</span>&nbsp;<span class="builtintype" id="2873347">uintptr</span><span class="op" id="2873354">(</span><span class="ident" id="2873355">v</span><span class="op" id="2873356">.</span><span class="ident" id="2873357">ptr</span><span class="op" id="2873360">)</span><br>
<span class="lineno">1695</span><span class="op" id="2873362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873365">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2873424">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2873491">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2873521">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2873589">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2873659">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2873722">type</span>&nbsp;<span class="ident" id="2873727">StringHeader</span>&nbsp;<span class="keyword" id="2873740">struct</span>&nbsp;<span class="op" id="2873747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873750">Data</span>&nbsp;<span class="builtintype" id="2873755">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873764">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2873769">int</span><br>
<span class="lineno"></span><span class="op" id="2873773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873776">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2873852">type</span>&nbsp;<span class="ident" id="2873857">stringHeader</span>&nbsp;<span class="keyword" id="2873870">struct</span>&nbsp;<span class="op" id="2873877">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873880">Data</span>&nbsp;<span class="ident" id="2873885">unsafe</span><span class="op" id="2873891">.</span><span class="ident" id="2873892">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2873901">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2873906">int</span><br>
<span class="lineno"></span><span class="op" id="2873910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2873913">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2873970">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2874037">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2874067">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2874135">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2874205">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2874268">type</span>&nbsp;<span class="ident" id="2874273">SliceHeader</span>&nbsp;<span class="keyword" id="2874285">struct</span>&nbsp;<span class="op" id="2874292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874295">Data</span>&nbsp;<span class="builtintype" id="2874300">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874309">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2874314">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874319">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2874324">int</span><br>
<span class="lineno"></span><span class="op" id="2874328">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2874331">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2874405">type</span>&nbsp;<span class="ident" id="2874410">sliceHeader</span>&nbsp;<span class="keyword" id="2874422">struct</span>&nbsp;<span class="op" id="2874429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874432">Data</span>&nbsp;<span class="ident" id="2874437">unsafe</span><span class="op" id="2874443">.</span><span class="ident" id="2874444">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874453">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2874458">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874463">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2874468">int</span><br>
<span class="lineno"></span><span class="op" id="2874472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2874475">func</span>&nbsp;<span class="ident" id="2874480">typesMustMatch</span><span class="op" id="2874494">(</span><span class="ident" id="2874495">what</span>&nbsp;<span class="builtintype" id="2874500">string</span><span class="op" id="2874506">,</span>&nbsp;<span class="ident" id="2874508">t1</span><span class="op" id="2874510">,</span>&nbsp;<span class="ident" id="2874512">t2</span>&nbsp;<span class="ident" id="2874515">Type</span><span class="op" id="2874519">)</span>&nbsp;<span class="op" id="2874521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874524">if</span>&nbsp;<span class="ident" id="2874527">t1</span>&nbsp;<span class="op" id="2874530">!=</span>&nbsp;<span class="ident" id="2874533">t2</span>&nbsp;<span class="op" id="2874536">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874540">panic</span><span class="op" id="2874545">(</span><span class="ident" id="2874546">what</span>&nbsp;<span class="op" id="2874551">+</span>&nbsp;<span class="string" id="2874553">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2874558">+</span>&nbsp;<span class="ident" id="2874560">t1</span><span class="op" id="2874562">.</span><span class="ident" id="2874563">String</span><span class="op" id="2874569">(</span><span class="op" id="2874570">)</span>&nbsp;<span class="op" id="2874572">+</span>&nbsp;<span class="string" id="2874574">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2874581">+</span>&nbsp;<span class="ident" id="2874583">t2</span><span class="op" id="2874585">.</span><span class="ident" id="2874586">String</span><span class="op" id="2874592">(</span><span class="op" id="2874593">)</span><span class="op" id="2874594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874597">}</span><br>
<span class="lineno"></span><span class="op" id="2874599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2874602">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2874678">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2874753">func</span>&nbsp;<span class="ident" id="2874758">grow</span><span class="op" id="2874762">(</span><span class="ident" id="2874763">s</span>&nbsp;<span class="ident" id="2874765">Value</span><span class="op" id="2874770">,</span>&nbsp;<span class="ident" id="2874772">extra</span>&nbsp;<span class="builtintype" id="2874778">int</span><span class="op" id="2874781">)</span>&nbsp;<span class="op" id="2874783">(</span><span class="ident" id="2874784">Value</span><span class="op" id="2874789">,</span>&nbsp;<span class="builtintype" id="2874791">int</span><span class="op" id="2874794">,</span>&nbsp;<span class="builtintype" id="2874796">int</span><span class="op" id="2874799">)</span>&nbsp;<span class="op" id="2874801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874804">i0</span>&nbsp;<span class="op" id="2874807">:=</span>&nbsp;<span class="ident" id="2874810">s</span><span class="op" id="2874811">.</span><span class="ident" id="2874812">Len</span><span class="op" id="2874815">(</span><span class="op" id="2874816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874819">i1</span>&nbsp;<span class="op" id="2874822">:=</span>&nbsp;<span class="ident" id="2874825">i0</span>&nbsp;<span class="op" id="2874828">+</span>&nbsp;<span class="ident" id="2874830">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874837">if</span>&nbsp;<span class="ident" id="2874840">i1</span>&nbsp;<span class="op" id="2874843">&lt;</span>&nbsp;<span class="ident" id="2874845">i0</span>&nbsp;<span class="op" id="2874848">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2874852">panic</span><span class="op" id="2874857">(</span><span class="string" id="2874858">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2874890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874896">m</span>&nbsp;<span class="op" id="2874898">:=</span>&nbsp;<span class="ident" id="2874901">s</span><span class="op" id="2874902">.</span><span class="ident" id="2874903">Cap</span><span class="op" id="2874906">(</span><span class="op" id="2874907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874910">if</span>&nbsp;<span class="ident" id="2874913">i1</span>&nbsp;<span class="op" id="2874916">&lt;=</span>&nbsp;<span class="ident" id="2874919">m</span>&nbsp;<span class="op" id="2874921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874925">return</span>&nbsp;<span class="ident" id="2874932">s</span><span class="op" id="2874933">.</span><span class="ident" id="2874934">Slice</span><span class="op" id="2874939">(</span><span class="num" id="2874940">0</span><span class="op" id="2874941">,</span>&nbsp;<span class="ident" id="2874943">i1</span><span class="op" id="2874945">)</span><span class="op" id="2874946">,</span>&nbsp;<span class="ident" id="2874948">i0</span><span class="op" id="2874950">,</span>&nbsp;<span class="ident" id="2874952">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874959">if</span>&nbsp;<span class="ident" id="2874962">m</span>&nbsp;<span class="op" id="2874964">==</span>&nbsp;<span class="num" id="2874967">0</span>&nbsp;<span class="op" id="2874969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2874973">m</span>&nbsp;<span class="op" id="2874975">=</span>&nbsp;<span class="ident" id="2874977">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2874984">}</span>&nbsp;<span class="keyword" id="2874986">else</span>&nbsp;<span class="op" id="2874991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2874995">for</span>&nbsp;<span class="ident" id="2874999">m</span>&nbsp;<span class="op" id="2875001">&lt;</span>&nbsp;<span class="ident" id="2875003">i1</span>&nbsp;<span class="op" id="2875006">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875011">if</span>&nbsp;<span class="ident" id="2875014">i0</span>&nbsp;<span class="op" id="2875017">&lt;</span>&nbsp;<span class="num" id="2875019">1024</span>&nbsp;<span class="op" id="2875024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875030">m</span>&nbsp;<span class="op" id="2875032">+=</span>&nbsp;<span class="ident" id="2875035">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875040">}</span>&nbsp;<span class="keyword" id="2875042">else</span>&nbsp;<span class="op" id="2875047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875053">m</span>&nbsp;<span class="op" id="2875055">+=</span>&nbsp;<span class="ident" id="2875058">m</span>&nbsp;<span class="op" id="2875060">/</span>&nbsp;<span class="num" id="2875062">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875067">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875077">t</span>&nbsp;<span class="op" id="2875079">:=</span>&nbsp;<span class="ident" id="2875082">MakeSlice</span><span class="op" id="2875091">(</span><span class="ident" id="2875092">s</span><span class="op" id="2875093">.</span><span class="ident" id="2875094">Type</span><span class="op" id="2875098">(</span><span class="op" id="2875099">)</span><span class="op" id="2875100">,</span>&nbsp;<span class="ident" id="2875102">i1</span><span class="op" id="2875104">,</span>&nbsp;<span class="ident" id="2875106">m</span><span class="op" id="2875107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875110">Copy</span><span class="op" id="2875114">(</span><span class="ident" id="2875115">t</span><span class="op" id="2875116">,</span>&nbsp;<span class="ident" id="2875118">s</span><span class="op" id="2875119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875122">return</span>&nbsp;<span class="ident" id="2875129">t</span><span class="op" id="2875130">,</span>&nbsp;<span class="ident" id="2875132">i0</span><span class="op" id="2875134">,</span>&nbsp;<span class="ident" id="2875136">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2875139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2875142">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2875219">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2875295">func</span>&nbsp;<span class="ident" id="2875300">Append</span><span class="op" id="2875306">(</span><span class="ident" id="2875307">s</span>&nbsp;<span class="ident" id="2875309">Value</span><span class="op" id="2875314">,</span>&nbsp;<span class="ident" id="2875316">x</span>&nbsp;<span class="op" id="2875318">...</span><span class="ident" id="2875321">Value</span><span class="op" id="2875326">)</span>&nbsp;<span class="ident" id="2875328">Value</span>&nbsp;<span class="op" id="2875334">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875337">s</span><span class="op" id="2875338">.</span><span class="ident" id="2875339">mustBe</span><span class="op" id="2875345">(</span><span class="ident" id="2875346">Slice</span><span class="op" id="2875351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875354">s</span><span class="op" id="2875355">,</span>&nbsp;<span class="ident" id="2875357">i0</span><span class="op" id="2875359">,</span>&nbsp;<span class="ident" id="2875361">i1</span>&nbsp;<span class="op" id="2875364">:=</span>&nbsp;<span class="ident" id="2875367">grow</span><span class="op" id="2875371">(</span><span class="ident" id="2875372">s</span><span class="op" id="2875373">,</span>&nbsp;<span class="builtinfunc" id="2875375">len</span><span class="op" id="2875378">(</span><span class="ident" id="2875379">x</span><span class="op" id="2875380">)</span><span class="op" id="2875381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875384">for</span>&nbsp;<span class="ident" id="2875388">i</span><span class="op" id="2875389">,</span>&nbsp;<span class="ident" id="2875391">j</span>&nbsp;<span class="op" id="2875393">:=</span>&nbsp;<span class="ident" id="2875396">i0</span><span class="op" id="2875398">,</span>&nbsp;<span class="num" id="2875400">0</span><span class="op" id="2875401">;</span>&nbsp;<span class="ident" id="2875403">i</span>&nbsp;<span class="op" id="2875405">&lt;</span>&nbsp;<span class="ident" id="2875407">i1</span><span class="op" id="2875409">;</span>&nbsp;<span class="ident" id="2875411">i</span><span class="op" id="2875412">,</span>&nbsp;<span class="ident" id="2875414">j</span>&nbsp;<span class="op" id="2875416">=</span>&nbsp;<span class="ident" id="2875418">i</span><span class="op" id="2875419">+</span><span class="num" id="2875420">1</span><span class="op" id="2875421">,</span>&nbsp;<span class="ident" id="2875423">j</span><span class="op" id="2875424">+</span><span class="num" id="2875425">1</span>&nbsp;<span class="op" id="2875427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875431">s</span><span class="op" id="2875432">.</span><span class="ident" id="2875433">Index</span><span class="op" id="2875438">(</span><span class="ident" id="2875439">i</span><span class="op" id="2875440">)</span><span class="op" id="2875441">.</span><span class="ident" id="2875442">Set</span><span class="op" id="2875445">(</span><span class="ident" id="2875446">x</span><span class="op" id="2875447">[</span><span class="ident" id="2875448">j</span><span class="op" id="2875449">]</span><span class="op" id="2875450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2875453">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875456">return</span>&nbsp;<span class="ident" id="2875463">s</span><br>
<span class="lineno"></span><span class="op" id="2875465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2875468">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2875547">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2875602">func</span>&nbsp;<span class="ident" id="2875607">AppendSlice</span><span class="op" id="2875618">(</span><span class="ident" id="2875619">s</span><span class="op" id="2875620">,</span>&nbsp;<span class="ident" id="2875622">t</span>&nbsp;<span class="ident" id="2875624">Value</span><span class="op" id="2875629">)</span>&nbsp;<span class="ident" id="2875631">Value</span>&nbsp;<span class="op" id="2875637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875640">s</span><span class="op" id="2875641">.</span><span class="ident" id="2875642">mustBe</span><span class="op" id="2875648">(</span><span class="ident" id="2875649">Slice</span><span class="op" id="2875654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875657">t</span><span class="op" id="2875658">.</span><span class="ident" id="2875659">mustBe</span><span class="op" id="2875665">(</span><span class="ident" id="2875666">Slice</span><span class="op" id="2875671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875674">typesMustMatch</span><span class="op" id="2875688">(</span><span class="string" id="2875689">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2875710">,</span>&nbsp;<span class="ident" id="2875712">s</span><span class="op" id="2875713">.</span><span class="ident" id="2875714">Type</span><span class="op" id="2875718">(</span><span class="op" id="2875719">)</span><span class="op" id="2875720">.</span><span class="ident" id="2875721">Elem</span><span class="op" id="2875725">(</span><span class="op" id="2875726">)</span><span class="op" id="2875727">,</span>&nbsp;<span class="ident" id="2875729">t</span><span class="op" id="2875730">.</span><span class="ident" id="2875731">Type</span><span class="op" id="2875735">(</span><span class="op" id="2875736">)</span><span class="op" id="2875737">.</span><span class="ident" id="2875738">Elem</span><span class="op" id="2875742">(</span><span class="op" id="2875743">)</span><span class="op" id="2875744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875747">s</span><span class="op" id="2875748">,</span>&nbsp;<span class="ident" id="2875750">i0</span><span class="op" id="2875752">,</span>&nbsp;<span class="ident" id="2875754">i1</span>&nbsp;<span class="op" id="2875757">:=</span>&nbsp;<span class="ident" id="2875760">grow</span><span class="op" id="2875764">(</span><span class="ident" id="2875765">s</span><span class="op" id="2875766">,</span>&nbsp;<span class="ident" id="2875768">t</span><span class="op" id="2875769">.</span><span class="ident" id="2875770">Len</span><span class="op" id="2875773">(</span><span class="op" id="2875774">)</span><span class="op" id="2875775">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2875778">Copy</span><span class="op" id="2875782">(</span><span class="ident" id="2875783">s</span><span class="op" id="2875784">.</span><span class="ident" id="2875785">Slice</span><span class="op" id="2875790">(</span><span class="ident" id="2875791">i0</span><span class="op" id="2875793">,</span>&nbsp;<span class="ident" id="2875795">i1</span><span class="op" id="2875797">)</span><span class="op" id="2875798">,</span>&nbsp;<span class="ident" id="2875800">t</span><span class="op" id="2875801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2875804">return</span>&nbsp;<span class="ident" id="2875811">s</span><br>
<span class="lineno"></span><span class="op" id="2875813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2875816">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2875873">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2875923">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2875968">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2876023">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2876071">func</span>&nbsp;<span class="ident" id="2876076">Copy</span><span class="op" id="2876080">(</span><span class="ident" id="2876081">dst</span><span class="op" id="2876084">,</span>&nbsp;<span class="ident" id="2876086">src</span>&nbsp;<span class="ident" id="2876090">Value</span><span class="op" id="2876095">)</span>&nbsp;<span class="builtintype" id="2876097">int</span>&nbsp;<span class="op" id="2876101">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876104">dk</span>&nbsp;<span class="op" id="2876107">:=</span>&nbsp;<span class="ident" id="2876110">dst</span><span class="op" id="2876113">.</span><span class="ident" id="2876114">kind</span><span class="op" id="2876118">(</span><span class="op" id="2876119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876122">if</span>&nbsp;<span class="ident" id="2876125">dk</span>&nbsp;<span class="op" id="2876128">!=</span>&nbsp;<span class="ident" id="2876131">Array</span>&nbsp;<span class="op" id="2876137">&amp;&amp;</span>&nbsp;<span class="ident" id="2876140">dk</span>&nbsp;<span class="op" id="2876143">!=</span>&nbsp;<span class="ident" id="2876146">Slice</span>&nbsp;<span class="op" id="2876152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2876156">panic</span><span class="op" id="2876161">(</span><span class="op" id="2876162">&amp;</span><span class="ident" id="2876163">ValueError</span><span class="op" id="2876173">{</span><span class="string" id="2876174">&#34;reflect.Copy&#34;</span><span class="op" id="2876188">,</span>&nbsp;<span class="ident" id="2876190">dk</span><span class="op" id="2876192">}</span><span class="op" id="2876193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876199">if</span>&nbsp;<span class="ident" id="2876202">dk</span>&nbsp;<span class="op" id="2876205">==</span>&nbsp;<span class="ident" id="2876208">Array</span>&nbsp;<span class="op" id="2876214">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876218">dst</span><span class="op" id="2876221">.</span><span class="ident" id="2876222">mustBeAssignable</span><span class="op" id="2876238">(</span><span class="op" id="2876239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876245">dst</span><span class="op" id="2876248">.</span><span class="ident" id="2876249">mustBeExported</span><span class="op" id="2876263">(</span><span class="op" id="2876264">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876268">sk</span>&nbsp;<span class="op" id="2876271">:=</span>&nbsp;<span class="ident" id="2876274">src</span><span class="op" id="2876277">.</span><span class="ident" id="2876278">kind</span><span class="op" id="2876282">(</span><span class="op" id="2876283">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876286">if</span>&nbsp;<span class="ident" id="2876289">sk</span>&nbsp;<span class="op" id="2876292">!=</span>&nbsp;<span class="ident" id="2876295">Array</span>&nbsp;<span class="op" id="2876301">&amp;&amp;</span>&nbsp;<span class="ident" id="2876304">sk</span>&nbsp;<span class="op" id="2876307">!=</span>&nbsp;<span class="ident" id="2876310">Slice</span>&nbsp;<span class="op" id="2876316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2876320">panic</span><span class="op" id="2876325">(</span><span class="op" id="2876326">&amp;</span><span class="ident" id="2876327">ValueError</span><span class="op" id="2876337">{</span><span class="string" id="2876338">&#34;reflect.Copy&#34;</span><span class="op" id="2876352">,</span>&nbsp;<span class="ident" id="2876354">sk</span><span class="op" id="2876356">}</span><span class="op" id="2876357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876363">src</span><span class="op" id="2876366">.</span><span class="ident" id="2876367">mustBeExported</span><span class="op" id="2876381">(</span><span class="op" id="2876382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876386">de</span>&nbsp;<span class="op" id="2876389">:=</span>&nbsp;<span class="ident" id="2876392">dst</span><span class="op" id="2876395">.</span><span class="ident" id="2876396">typ</span><span class="op" id="2876399">.</span><span class="ident" id="2876400">Elem</span><span class="op" id="2876404">(</span><span class="op" id="2876405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876408">se</span>&nbsp;<span class="op" id="2876411">:=</span>&nbsp;<span class="ident" id="2876414">src</span><span class="op" id="2876417">.</span><span class="ident" id="2876418">typ</span><span class="op" id="2876421">.</span><span class="ident" id="2876422">Elem</span><span class="op" id="2876426">(</span><span class="op" id="2876427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876430">typesMustMatch</span><span class="op" id="2876444">(</span><span class="string" id="2876445">&#34;reflect.Copy&#34;</span><span class="op" id="2876459">,</span>&nbsp;<span class="ident" id="2876461">de</span><span class="op" id="2876463">,</span>&nbsp;<span class="ident" id="2876465">se</span><span class="op" id="2876467">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876471">n</span>&nbsp;<span class="op" id="2876473">:=</span>&nbsp;<span class="ident" id="2876476">dst</span><span class="op" id="2876479">.</span><span class="ident" id="2876480">Len</span><span class="op" id="2876483">(</span><span class="op" id="2876484">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876487">if</span>&nbsp;<span class="ident" id="2876490">sn</span>&nbsp;<span class="op" id="2876493">:=</span>&nbsp;<span class="ident" id="2876496">src</span><span class="op" id="2876499">.</span><span class="ident" id="2876500">Len</span><span class="op" id="2876503">(</span><span class="op" id="2876504">)</span><span class="op" id="2876505">;</span>&nbsp;<span class="ident" id="2876507">n</span>&nbsp;<span class="op" id="2876509">&gt;</span>&nbsp;<span class="ident" id="2876511">sn</span>&nbsp;<span class="op" id="2876514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876518">n</span>&nbsp;<span class="op" id="2876520">=</span>&nbsp;<span class="ident" id="2876522">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2876530">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876552">var</span>&nbsp;<span class="ident" id="2876556">da</span><span class="op" id="2876558">,</span>&nbsp;<span class="ident" id="2876560">sa</span>&nbsp;<span class="ident" id="2876563">unsafe</span><span class="op" id="2876569">.</span><span class="ident" id="2876570">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876579">if</span>&nbsp;<span class="ident" id="2876582">dk</span>&nbsp;<span class="op" id="2876585">==</span>&nbsp;<span class="ident" id="2876588">Array</span>&nbsp;<span class="op" id="2876594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876598">da</span>&nbsp;<span class="op" id="2876601">=</span>&nbsp;<span class="ident" id="2876603">dst</span><span class="op" id="2876606">.</span><span class="ident" id="2876607">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876612">}</span>&nbsp;<span class="keyword" id="2876614">else</span>&nbsp;<span class="op" id="2876619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876623">da</span>&nbsp;<span class="op" id="2876626">=</span>&nbsp;<span class="op" id="2876628">(</span><span class="op" id="2876629">*</span><span class="ident" id="2876630">sliceHeader</span><span class="op" id="2876641">)</span><span class="op" id="2876642">(</span><span class="ident" id="2876643">dst</span><span class="op" id="2876646">.</span><span class="ident" id="2876647">ptr</span><span class="op" id="2876650">)</span><span class="op" id="2876651">.</span><span class="ident" id="2876652">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876661">if</span>&nbsp;<span class="ident" id="2876664">src</span><span class="op" id="2876667">.</span><span class="ident" id="2876668">flag</span><span class="op" id="2876672">&amp;</span><span class="ident" id="2876673">flagIndir</span>&nbsp;<span class="op" id="2876683">==</span>&nbsp;<span class="num" id="2876686">0</span>&nbsp;<span class="op" id="2876688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876692">sa</span>&nbsp;<span class="op" id="2876695">=</span>&nbsp;<span class="ident" id="2876697">unsafe</span><span class="op" id="2876703">.</span><span class="ident" id="2876704">Pointer</span><span class="op" id="2876711">(</span><span class="op" id="2876712">&amp;</span><span class="ident" id="2876713">src</span><span class="op" id="2876716">.</span><span class="ident" id="2876717">ptr</span><span class="op" id="2876720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876723">}</span>&nbsp;<span class="keyword" id="2876725">else</span>&nbsp;<span class="keyword" id="2876730">if</span>&nbsp;<span class="ident" id="2876733">sk</span>&nbsp;<span class="op" id="2876736">==</span>&nbsp;<span class="ident" id="2876739">Array</span>&nbsp;<span class="op" id="2876745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876749">sa</span>&nbsp;<span class="op" id="2876752">=</span>&nbsp;<span class="ident" id="2876754">src</span><span class="op" id="2876757">.</span><span class="ident" id="2876758">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876763">}</span>&nbsp;<span class="keyword" id="2876765">else</span>&nbsp;<span class="op" id="2876770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876774">sa</span>&nbsp;<span class="op" id="2876777">=</span>&nbsp;<span class="op" id="2876779">(</span><span class="op" id="2876780">*</span><span class="ident" id="2876781">sliceHeader</span><span class="op" id="2876792">)</span><span class="op" id="2876793">(</span><span class="ident" id="2876794">src</span><span class="op" id="2876797">.</span><span class="ident" id="2876798">ptr</span><span class="op" id="2876801">)</span><span class="op" id="2876802">.</span><span class="ident" id="2876803">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2876809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2876812">memmove</span><span class="op" id="2876819">(</span><span class="ident" id="2876820">da</span><span class="op" id="2876822">,</span>&nbsp;<span class="ident" id="2876824">sa</span><span class="op" id="2876826">,</span>&nbsp;<span class="builtintype" id="2876828">uintptr</span><span class="op" id="2876835">(</span><span class="ident" id="2876836">n</span><span class="op" id="2876837">)</span><span class="op" id="2876838">*</span><span class="ident" id="2876839">de</span><span class="op" id="2876841">.</span><span class="ident" id="2876842">Size</span><span class="op" id="2876846">(</span><span class="op" id="2876847">)</span><span class="op" id="2876848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2876851">return</span>&nbsp;<span class="ident" id="2876858">n</span><br>
<span class="lineno">1835</span><span class="op" id="2876860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2876863">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2876918">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2876973">type</span>&nbsp;<span class="ident" id="2876978">runtimeSelect</span>&nbsp;<span class="keyword" id="2876992">struct</span>&nbsp;<span class="op" id="2876999">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877002">dir</span>&nbsp;<span class="builtintype" id="2877006">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877021">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877048">typ</span>&nbsp;<span class="op" id="2877052">*</span><span class="ident" id="2877053">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877067">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877084">ch</span>&nbsp;&nbsp;<span class="ident" id="2877088">unsafe</span><span class="op" id="2877094">.</span><span class="ident" id="2877095">Pointer</span>&nbsp;<span class="comment" id="2877103">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877115">val</span>&nbsp;<span class="ident" id="2877119">unsafe</span><span class="op" id="2877125">.</span><span class="ident" id="2877126">Pointer</span>&nbsp;<span class="comment" id="2877134">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2877194">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2877197">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2877265">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2877337">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2877407">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2877427">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2877441">func</span>&nbsp;<span class="ident" id="2877446">rselect</span><span class="op" id="2877453">(</span><span class="op" id="2877454">[</span><span class="op" id="2877455">]</span><span class="ident" id="2877456">runtimeSelect</span><span class="op" id="2877469">)</span>&nbsp;<span class="op" id="2877471">(</span><span class="ident" id="2877472">chosen</span>&nbsp;<span class="builtintype" id="2877479">int</span><span class="op" id="2877482">,</span>&nbsp;<span class="ident" id="2877484">recvOK</span>&nbsp;<span class="builtintype" id="2877491">bool</span><span class="op" id="2877495">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2877498">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2877569">type</span>&nbsp;<span class="ident" id="2877574">SelectDir</span>&nbsp;<span class="builtintype" id="2877584">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2877589">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2877656">const</span>&nbsp;<span class="op" id="2877662">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877665">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877679">SelectDir</span>&nbsp;<span class="op" id="2877689">=</span>&nbsp;<span class="ident" id="2877691">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877697">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877721">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877743">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877767">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2877784">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2877808">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2877819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2877822">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2877885">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2877950">//</span><br>
<span class="lineno"></span><span class="comment" id="2877953">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2878017">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2878055">//</span><br>
<span class="lineno"></span><span class="comment" id="2878058">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2878121">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2878212">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2878301">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2878393">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2878409">//</span><br>
<span class="lineno"></span><span class="comment" id="2878412">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2878478">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2878563">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2878654">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2878737">//</span><br>
<span class="lineno"></span><span class="keyword" id="2878740">type</span>&nbsp;<span class="ident" id="2878745">SelectCase</span>&nbsp;<span class="keyword" id="2878756">struct</span>&nbsp;<span class="op" id="2878763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878766">Dir</span>&nbsp;&nbsp;<span class="ident" id="2878771">SelectDir</span>&nbsp;<span class="comment" id="2878781">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878803">Chan</span>&nbsp;<span class="ident" id="2878808">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2878818">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2878859">Send</span>&nbsp;<span class="ident" id="2878864">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2878874">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2878902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2878905">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2878975">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2879050">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2879104">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2879176">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2879247">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2879324">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2879396">func</span>&nbsp;<span class="ident" id="2879401">Select</span><span class="op" id="2879407">(</span><span class="ident" id="2879408">cases</span>&nbsp;<span class="op" id="2879414">[</span><span class="op" id="2879415">]</span><span class="ident" id="2879416">SelectCase</span><span class="op" id="2879426">)</span>&nbsp;<span class="op" id="2879428">(</span><span class="ident" id="2879429">chosen</span>&nbsp;<span class="builtintype" id="2879436">int</span><span class="op" id="2879439">,</span>&nbsp;<span class="ident" id="2879441">recv</span>&nbsp;<span class="ident" id="2879446">Value</span><span class="op" id="2879451">,</span>&nbsp;<span class="ident" id="2879453">recvOK</span>&nbsp;<span class="builtintype" id="2879460">bool</span><span class="op" id="2879464">)</span>&nbsp;<span class="op" id="2879466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879469">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879543">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2879618">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879676">runcases</span>&nbsp;<span class="op" id="2879685">:=</span>&nbsp;<span class="builtinfunc" id="2879688">make</span><span class="op" id="2879692">(</span><span class="op" id="2879693">[</span><span class="op" id="2879694">]</span><span class="ident" id="2879695">runtimeSelect</span><span class="op" id="2879708">,</span>&nbsp;<span class="builtinfunc" id="2879710">len</span><span class="op" id="2879713">(</span><span class="ident" id="2879714">cases</span><span class="op" id="2879719">)</span><span class="op" id="2879720">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879723">haveDefault</span>&nbsp;<span class="op" id="2879735">:=</span>&nbsp;<span class="builtintype" id="2879738">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879745">for</span>&nbsp;<span class="ident" id="2879749">i</span><span class="op" id="2879750">,</span>&nbsp;<span class="ident" id="2879752">c</span>&nbsp;<span class="op" id="2879754">:=</span>&nbsp;<span class="keyword" id="2879757">range</span>&nbsp;<span class="ident" id="2879763">cases</span>&nbsp;<span class="op" id="2879769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879773">rc</span>&nbsp;<span class="op" id="2879776">:=</span>&nbsp;<span class="op" id="2879779">&amp;</span><span class="ident" id="2879780">runcases</span><span class="op" id="2879788">[</span><span class="ident" id="2879789">i</span><span class="op" id="2879790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2879794">rc</span><span class="op" id="2879796">.</span><span class="ident" id="2879797">dir</span>&nbsp;<span class="op" id="2879801">=</span>&nbsp;<span class="builtintype" id="2879803">uintptr</span><span class="op" id="2879810">(</span><span class="ident" id="2879811">c</span><span class="op" id="2879812">.</span><span class="ident" id="2879813">Dir</span><span class="op" id="2879816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879820">switch</span>&nbsp;<span class="ident" id="2879827">c</span><span class="op" id="2879828">.</span><span class="ident" id="2879829">Dir</span>&nbsp;<span class="op" id="2879833">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879837">default</span><span class="op" id="2879844">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2879849">panic</span><span class="op" id="2879854">(</span><span class="string" id="2879855">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2879884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879889">case</span>&nbsp;<span class="ident" id="2879894">SelectDefault</span><span class="op" id="2879907">:</span>&nbsp;<span class="comment" id="2879909">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2879923">if</span>&nbsp;<span class="ident" id="2879926">haveDefault</span>&nbsp;<span class="op" id="2879938">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2879944">panic</span><span class="op" id="2879949">(</span><span class="string" id="2879950">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2879990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2879995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880000">haveDefault</span>&nbsp;<span class="op" id="2880012">=</span>&nbsp;<span class="builtintype" id="2880014">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880022">if</span>&nbsp;<span class="ident" id="2880025">c</span><span class="op" id="2880026">.</span><span class="ident" id="2880027">Chan</span><span class="op" id="2880031">.</span><span class="ident" id="2880032">IsValid</span><span class="op" id="2880039">(</span><span class="op" id="2880040">)</span>&nbsp;<span class="op" id="2880042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2880048">panic</span><span class="op" id="2880053">(</span><span class="string" id="2880054">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2880099">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880109">if</span>&nbsp;<span class="ident" id="2880112">c</span><span class="op" id="2880113">.</span><span class="ident" id="2880114">Send</span><span class="op" id="2880118">.</span><span class="ident" id="2880119">IsValid</span><span class="op" id="2880126">(</span><span class="op" id="2880127">)</span>&nbsp;<span class="op" id="2880129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2880135">panic</span><span class="op" id="2880140">(</span><span class="string" id="2880141">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2880186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880196">case</span>&nbsp;<span class="ident" id="2880201">SelectSend</span><span class="op" id="2880211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880216">ch</span>&nbsp;<span class="op" id="2880219">:=</span>&nbsp;<span class="ident" id="2880222">c</span><span class="op" id="2880223">.</span><span class="ident" id="2880224">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880232">if</span>&nbsp;<span class="op" id="2880235">!</span><span class="ident" id="2880236">ch</span><span class="op" id="2880238">.</span><span class="ident" id="2880239">IsValid</span><span class="op" id="2880246">(</span><span class="op" id="2880247">)</span>&nbsp;<span class="op" id="2880249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880255">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880264">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880269">ch</span><span class="op" id="2880271">.</span><span class="ident" id="2880272">mustBe</span><span class="op" id="2880278">(</span><span class="ident" id="2880279">Chan</span><span class="op" id="2880283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880288">ch</span><span class="op" id="2880290">.</span><span class="ident" id="2880291">mustBeExported</span><span class="op" id="2880305">(</span><span class="op" id="2880306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880311">tt</span>&nbsp;<span class="op" id="2880314">:=</span>&nbsp;<span class="op" id="2880317">(</span><span class="op" id="2880318">*</span><span class="ident" id="2880319">chanType</span><span class="op" id="2880327">)</span><span class="op" id="2880328">(</span><span class="ident" id="2880329">unsafe</span><span class="op" id="2880335">.</span><span class="ident" id="2880336">Pointer</span><span class="op" id="2880343">(</span><span class="ident" id="2880344">ch</span><span class="op" id="2880346">.</span><span class="ident" id="2880347">typ</span><span class="op" id="2880350">)</span><span class="op" id="2880351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880356">if</span>&nbsp;<span class="ident" id="2880359">ChanDir</span><span class="op" id="2880366">(</span><span class="ident" id="2880367">tt</span><span class="op" id="2880369">.</span><span class="ident" id="2880370">dir</span><span class="op" id="2880373">)</span><span class="op" id="2880374">&amp;</span><span class="ident" id="2880375">SendDir</span>&nbsp;<span class="op" id="2880383">==</span>&nbsp;<span class="num" id="2880386">0</span>&nbsp;<span class="op" id="2880388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2880394">panic</span><span class="op" id="2880399">(</span><span class="string" id="2880400">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2880454">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880464">rc</span><span class="op" id="2880466">.</span><span class="ident" id="2880467">ch</span>&nbsp;<span class="op" id="2880470">=</span>&nbsp;<span class="ident" id="2880472">ch</span><span class="op" id="2880474">.</span><span class="ident" id="2880475">pointer</span><span class="op" id="2880482">(</span><span class="op" id="2880483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880488">rc</span><span class="op" id="2880490">.</span><span class="ident" id="2880491">typ</span>&nbsp;<span class="op" id="2880495">=</span>&nbsp;<span class="op" id="2880497">&amp;</span><span class="ident" id="2880498">tt</span><span class="op" id="2880500">.</span><span class="ident" id="2880501">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880510">v</span>&nbsp;<span class="op" id="2880512">:=</span>&nbsp;<span class="ident" id="2880515">c</span><span class="op" id="2880516">.</span><span class="ident" id="2880517">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880525">if</span>&nbsp;<span class="op" id="2880528">!</span><span class="ident" id="2880529">v</span><span class="op" id="2880530">.</span><span class="ident" id="2880531">IsValid</span><span class="op" id="2880538">(</span><span class="op" id="2880539">)</span>&nbsp;<span class="op" id="2880541">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2880547">panic</span><span class="op" id="2880552">(</span><span class="string" id="2880553">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2880602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880612">v</span><span class="op" id="2880613">.</span><span class="ident" id="2880614">mustBeExported</span><span class="op" id="2880628">(</span><span class="op" id="2880629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880634">v</span>&nbsp;<span class="op" id="2880636">=</span>&nbsp;<span class="ident" id="2880638">v</span><span class="op" id="2880639">.</span><span class="ident" id="2880640">assignTo</span><span class="op" id="2880648">(</span><span class="string" id="2880649">&#34;reflect.Select&#34;</span><span class="op" id="2880665">,</span>&nbsp;<span class="ident" id="2880667">tt</span><span class="op" id="2880669">.</span><span class="ident" id="2880670">elem</span><span class="op" id="2880674">,</span>&nbsp;<span class="builtintype" id="2880676">nil</span><span class="op" id="2880679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880684">if</span>&nbsp;<span class="ident" id="2880687">v</span><span class="op" id="2880688">.</span><span class="ident" id="2880689">flag</span><span class="op" id="2880693">&amp;</span><span class="ident" id="2880694">flagIndir</span>&nbsp;<span class="op" id="2880704">!=</span>&nbsp;<span class="num" id="2880707">0</span>&nbsp;<span class="op" id="2880709">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880715">rc</span><span class="op" id="2880717">.</span><span class="ident" id="2880718">val</span>&nbsp;<span class="op" id="2880722">=</span>&nbsp;<span class="ident" id="2880724">v</span><span class="op" id="2880725">.</span><span class="ident" id="2880726">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880733">}</span>&nbsp;<span class="keyword" id="2880735">else</span>&nbsp;<span class="op" id="2880740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880746">rc</span><span class="op" id="2880748">.</span><span class="ident" id="2880749">val</span>&nbsp;<span class="op" id="2880753">=</span>&nbsp;<span class="ident" id="2880755">unsafe</span><span class="op" id="2880761">.</span><span class="ident" id="2880762">Pointer</span><span class="op" id="2880769">(</span><span class="op" id="2880770">&amp;</span><span class="ident" id="2880771">v</span><span class="op" id="2880772">.</span><span class="ident" id="2880773">ptr</span><span class="op" id="2880776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880786">case</span>&nbsp;<span class="ident" id="2880791">SelectRecv</span><span class="op" id="2880801">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880806">if</span>&nbsp;<span class="ident" id="2880809">c</span><span class="op" id="2880810">.</span><span class="ident" id="2880811">Send</span><span class="op" id="2880815">.</span><span class="ident" id="2880816">IsValid</span><span class="op" id="2880823">(</span><span class="op" id="2880824">)</span>&nbsp;<span class="op" id="2880826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2880832">panic</span><span class="op" id="2880837">(</span><span class="string" id="2880838">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2880883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880893">ch</span>&nbsp;<span class="op" id="2880896">:=</span>&nbsp;<span class="ident" id="2880899">c</span><span class="op" id="2880900">.</span><span class="ident" id="2880901">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880909">if</span>&nbsp;<span class="op" id="2880912">!</span><span class="ident" id="2880913">ch</span><span class="op" id="2880915">.</span><span class="ident" id="2880916">IsValid</span><span class="op" id="2880923">(</span><span class="op" id="2880924">)</span>&nbsp;<span class="op" id="2880926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2880932">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2880941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880946">ch</span><span class="op" id="2880948">.</span><span class="ident" id="2880949">mustBe</span><span class="op" id="2880955">(</span><span class="ident" id="2880956">Chan</span><span class="op" id="2880960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880965">ch</span><span class="op" id="2880967">.</span><span class="ident" id="2880968">mustBeExported</span><span class="op" id="2880982">(</span><span class="op" id="2880983">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2880988">tt</span>&nbsp;<span class="op" id="2880991">:=</span>&nbsp;<span class="op" id="2880994">(</span><span class="op" id="2880995">*</span><span class="ident" id="2880996">chanType</span><span class="op" id="2881004">)</span><span class="op" id="2881005">(</span><span class="ident" id="2881006">unsafe</span><span class="op" id="2881012">.</span><span class="ident" id="2881013">Pointer</span><span class="op" id="2881020">(</span><span class="ident" id="2881021">ch</span><span class="op" id="2881023">.</span><span class="ident" id="2881024">typ</span><span class="op" id="2881027">)</span><span class="op" id="2881028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881033">if</span>&nbsp;<span class="ident" id="2881036">ChanDir</span><span class="op" id="2881043">(</span><span class="ident" id="2881044">tt</span><span class="op" id="2881046">.</span><span class="ident" id="2881047">dir</span><span class="op" id="2881050">)</span><span class="op" id="2881051">&amp;</span><span class="ident" id="2881052">RecvDir</span>&nbsp;<span class="op" id="2881060">==</span>&nbsp;<span class="num" id="2881063">0</span>&nbsp;<span class="op" id="2881065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2881071">panic</span><span class="op" id="2881076">(</span><span class="string" id="2881077">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2881131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881141">rc</span><span class="op" id="2881143">.</span><span class="ident" id="2881144">ch</span>&nbsp;<span class="op" id="2881147">=</span>&nbsp;<span class="ident" id="2881149">ch</span><span class="op" id="2881151">.</span><span class="ident" id="2881152">pointer</span><span class="op" id="2881159">(</span><span class="op" id="2881160">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881165">rc</span><span class="op" id="2881167">.</span><span class="ident" id="2881168">typ</span>&nbsp;<span class="op" id="2881172">=</span>&nbsp;<span class="op" id="2881174">&amp;</span><span class="ident" id="2881175">tt</span><span class="op" id="2881177">.</span><span class="ident" id="2881178">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881187">rc</span><span class="op" id="2881189">.</span><span class="ident" id="2881190">val</span>&nbsp;<span class="op" id="2881194">=</span>&nbsp;<span class="ident" id="2881196">unsafe_New</span><span class="op" id="2881206">(</span><span class="ident" id="2881207">tt</span><span class="op" id="2881209">.</span><span class="ident" id="2881210">elem</span><span class="op" id="2881214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881225">chosen</span><span class="op" id="2881231">,</span>&nbsp;<span class="ident" id="2881233">recvOK</span>&nbsp;<span class="op" id="2881240">=</span>&nbsp;<span class="ident" id="2881242">rselect</span><span class="op" id="2881249">(</span><span class="ident" id="2881250">runcases</span><span class="op" id="2881258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881261">if</span>&nbsp;<span class="ident" id="2881264">runcases</span><span class="op" id="2881272">[</span><span class="ident" id="2881273">chosen</span><span class="op" id="2881279">]</span><span class="op" id="2881280">.</span><span class="ident" id="2881281">dir</span>&nbsp;<span class="op" id="2881285">==</span>&nbsp;<span class="builtintype" id="2881288">uintptr</span><span class="op" id="2881295">(</span><span class="ident" id="2881296">SelectRecv</span><span class="op" id="2881306">)</span>&nbsp;<span class="op" id="2881308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881312">tt</span>&nbsp;<span class="op" id="2881315">:=</span>&nbsp;<span class="op" id="2881318">(</span><span class="op" id="2881319">*</span><span class="ident" id="2881320">chanType</span><span class="op" id="2881328">)</span><span class="op" id="2881329">(</span><span class="ident" id="2881330">unsafe</span><span class="op" id="2881336">.</span><span class="ident" id="2881337">Pointer</span><span class="op" id="2881344">(</span><span class="ident" id="2881345">runcases</span><span class="op" id="2881353">[</span><span class="ident" id="2881354">chosen</span><span class="op" id="2881360">]</span><span class="op" id="2881361">.</span><span class="ident" id="2881362">typ</span><span class="op" id="2881365">)</span><span class="op" id="2881366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881370">t</span>&nbsp;<span class="op" id="2881372">:=</span>&nbsp;<span class="ident" id="2881375">tt</span><span class="op" id="2881377">.</span><span class="ident" id="2881378">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881385">p</span>&nbsp;<span class="op" id="2881387">:=</span>&nbsp;<span class="ident" id="2881390">runcases</span><span class="op" id="2881398">[</span><span class="ident" id="2881399">chosen</span><span class="op" id="2881405">]</span><span class="op" id="2881406">.</span><span class="ident" id="2881407">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881413">fl</span>&nbsp;<span class="op" id="2881416">:=</span>&nbsp;<span class="ident" id="2881419">flag</span><span class="op" id="2881423">(</span><span class="ident" id="2881424">t</span><span class="op" id="2881425">.</span><span class="ident" id="2881426">Kind</span><span class="op" id="2881430">(</span><span class="op" id="2881431">)</span><span class="op" id="2881432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881436">if</span>&nbsp;<span class="ident" id="2881439">ifaceIndir</span><span class="op" id="2881449">(</span><span class="ident" id="2881450">t</span><span class="op" id="2881451">)</span>&nbsp;<span class="op" id="2881453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881458">recv</span>&nbsp;<span class="op" id="2881463">=</span>&nbsp;<span class="ident" id="2881465">Value</span><span class="op" id="2881470">{</span><span class="ident" id="2881471">t</span><span class="op" id="2881472">,</span>&nbsp;<span class="ident" id="2881474">p</span><span class="op" id="2881475">,</span>&nbsp;<span class="ident" id="2881477">fl</span>&nbsp;<span class="op" id="2881480">|</span>&nbsp;<span class="ident" id="2881482">flagIndir</span><span class="op" id="2881491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881495">}</span>&nbsp;<span class="keyword" id="2881497">else</span>&nbsp;<span class="op" id="2881502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2881507">recv</span>&nbsp;<span class="op" id="2881512">=</span>&nbsp;<span class="ident" id="2881514">Value</span><span class="op" id="2881519">{</span><span class="ident" id="2881520">t</span><span class="op" id="2881521">,</span>&nbsp;<span class="op" id="2881523">*</span><span class="op" id="2881524">(</span><span class="op" id="2881525">*</span><span class="ident" id="2881526">unsafe</span><span class="op" id="2881532">.</span><span class="ident" id="2881533">Pointer</span><span class="op" id="2881540">)</span><span class="op" id="2881541">(</span><span class="ident" id="2881542">p</span><span class="op" id="2881543">)</span><span class="op" id="2881544">,</span>&nbsp;<span class="ident" id="2881546">fl</span><span class="op" id="2881548">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881558">return</span>&nbsp;<span class="ident" id="2881565">chosen</span><span class="op" id="2881571">,</span>&nbsp;<span class="ident" id="2881573">recv</span><span class="op" id="2881577">,</span>&nbsp;<span class="ident" id="2881579">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2881586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2881589">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2881613">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2881647">func</span>&nbsp;<span class="ident" id="2881652">unsafe_New</span><span class="op" id="2881662">(</span><span class="op" id="2881663">*</span><span class="ident" id="2881664">rtype</span><span class="op" id="2881669">)</span>&nbsp;<span class="ident" id="2881671">unsafe</span><span class="op" id="2881677">.</span><span class="ident" id="2881678">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2881686">func</span>&nbsp;<span class="ident" id="2881691">unsafe_NewArray</span><span class="op" id="2881706">(</span><span class="op" id="2881707">*</span><span class="ident" id="2881708">rtype</span><span class="op" id="2881713">,</span>&nbsp;<span class="builtintype" id="2881715">int</span><span class="op" id="2881718">)</span>&nbsp;<span class="ident" id="2881720">unsafe</span><span class="op" id="2881726">.</span><span class="ident" id="2881727">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2881736">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2881792">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2881847">func</span>&nbsp;<span class="ident" id="2881852">MakeSlice</span><span class="op" id="2881861">(</span><span class="ident" id="2881862">typ</span>&nbsp;<span class="ident" id="2881866">Type</span><span class="op" id="2881870">,</span>&nbsp;<span class="builtinfunc" id="2881872">len</span><span class="op" id="2881875">,</span>&nbsp;<span class="builtinfunc" id="2881877">cap</span>&nbsp;<span class="builtintype" id="2881881">int</span><span class="op" id="2881884">)</span>&nbsp;<span class="ident" id="2881886">Value</span>&nbsp;<span class="op" id="2881892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881895">if</span>&nbsp;<span class="ident" id="2881898">typ</span><span class="op" id="2881901">.</span><span class="ident" id="2881902">Kind</span><span class="op" id="2881906">(</span><span class="op" id="2881907">)</span>&nbsp;<span class="op" id="2881909">!=</span>&nbsp;<span class="ident" id="2881912">Slice</span>&nbsp;<span class="op" id="2881918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2881922">panic</span><span class="op" id="2881927">(</span><span class="string" id="2881928">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2881965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2881968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2881971">if</span>&nbsp;<span class="builtinfunc" id="2881974">len</span>&nbsp;<span class="op" id="2881978">&lt;</span>&nbsp;<span class="num" id="2881980">0</span>&nbsp;<span class="op" id="2881982">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2881986">panic</span><span class="op" id="2881991">(</span><span class="string" id="2881992">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2882025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882031">if</span>&nbsp;<span class="builtinfunc" id="2882034">cap</span>&nbsp;<span class="op" id="2882038">&lt;</span>&nbsp;<span class="num" id="2882040">0</span>&nbsp;<span class="op" id="2882042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882046">panic</span><span class="op" id="2882051">(</span><span class="string" id="2882052">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2882085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882088">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882091">if</span>&nbsp;<span class="builtinfunc" id="2882094">len</span>&nbsp;<span class="op" id="2882098">&gt;</span>&nbsp;<span class="builtinfunc" id="2882100">cap</span>&nbsp;<span class="op" id="2882104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882108">panic</span><span class="op" id="2882113">(</span><span class="string" id="2882114">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2882144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882151">s</span>&nbsp;<span class="op" id="2882153">:=</span>&nbsp;<span class="ident" id="2882156">sliceHeader</span><span class="op" id="2882167">{</span><span class="ident" id="2882168">unsafe_NewArray</span><span class="op" id="2882183">(</span><span class="ident" id="2882184">typ</span><span class="op" id="2882187">.</span><span class="ident" id="2882188">Elem</span><span class="op" id="2882192">(</span><span class="op" id="2882193">)</span><span class="op" id="2882194">.</span><span class="op" id="2882195">(</span><span class="op" id="2882196">*</span><span class="ident" id="2882197">rtype</span><span class="op" id="2882202">)</span><span class="op" id="2882203">,</span>&nbsp;<span class="builtinfunc" id="2882205">cap</span><span class="op" id="2882208">)</span><span class="op" id="2882209">,</span>&nbsp;<span class="builtinfunc" id="2882211">len</span><span class="op" id="2882214">,</span>&nbsp;<span class="builtinfunc" id="2882216">cap</span><span class="op" id="2882219">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882222">return</span>&nbsp;<span class="ident" id="2882229">Value</span><span class="op" id="2882234">{</span><span class="ident" id="2882235">typ</span><span class="op" id="2882238">.</span><span class="ident" id="2882239">common</span><span class="op" id="2882245">(</span><span class="op" id="2882246">)</span><span class="op" id="2882247">,</span>&nbsp;<span class="ident" id="2882249">unsafe</span><span class="op" id="2882255">.</span><span class="ident" id="2882256">Pointer</span><span class="op" id="2882263">(</span><span class="op" id="2882264">&amp;</span><span class="ident" id="2882265">s</span><span class="op" id="2882266">)</span><span class="op" id="2882267">,</span>&nbsp;<span class="ident" id="2882269">flagIndir</span>&nbsp;<span class="op" id="2882279">|</span>&nbsp;<span class="ident" id="2882281">flag</span><span class="op" id="2882285">(</span><span class="ident" id="2882286">Slice</span><span class="op" id="2882291">)</span><span class="op" id="2882292">}</span><br>
<span class="lineno"></span><span class="op" id="2882294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2882297">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2882372">func</span>&nbsp;<span class="ident" id="2882377">MakeChan</span><span class="op" id="2882385">(</span><span class="ident" id="2882386">typ</span>&nbsp;<span class="ident" id="2882390">Type</span><span class="op" id="2882394">,</span>&nbsp;<span class="ident" id="2882396">buffer</span>&nbsp;<span class="builtintype" id="2882403">int</span><span class="op" id="2882406">)</span>&nbsp;<span class="ident" id="2882408">Value</span>&nbsp;<span class="op" id="2882414">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882417">if</span>&nbsp;<span class="ident" id="2882420">typ</span><span class="op" id="2882423">.</span><span class="ident" id="2882424">Kind</span><span class="op" id="2882428">(</span><span class="op" id="2882429">)</span>&nbsp;<span class="op" id="2882431">!=</span>&nbsp;<span class="ident" id="2882434">Chan</span>&nbsp;<span class="op" id="2882439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882443">panic</span><span class="op" id="2882448">(</span><span class="string" id="2882449">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2882484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882490">if</span>&nbsp;<span class="ident" id="2882493">buffer</span>&nbsp;<span class="op" id="2882500">&lt;</span>&nbsp;<span class="num" id="2882502">0</span>&nbsp;<span class="op" id="2882504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882508">panic</span><span class="op" id="2882513">(</span><span class="string" id="2882514">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2882554">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882560">if</span>&nbsp;<span class="ident" id="2882563">typ</span><span class="op" id="2882566">.</span><span class="ident" id="2882567">ChanDir</span><span class="op" id="2882574">(</span><span class="op" id="2882575">)</span>&nbsp;<span class="op" id="2882577">!=</span>&nbsp;<span class="ident" id="2882580">BothDir</span>&nbsp;<span class="op" id="2882588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882592">panic</span><span class="op" id="2882597">(</span><span class="string" id="2882598">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2882645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882651">ch</span>&nbsp;<span class="op" id="2882654">:=</span>&nbsp;<span class="ident" id="2882657">makechan</span><span class="op" id="2882665">(</span><span class="ident" id="2882666">typ</span><span class="op" id="2882669">.</span><span class="op" id="2882670">(</span><span class="op" id="2882671">*</span><span class="ident" id="2882672">rtype</span><span class="op" id="2882677">)</span><span class="op" id="2882678">,</span>&nbsp;<span class="ident" id="2882680">uint64</span><span class="op" id="2882686">(</span><span class="ident" id="2882687">buffer</span><span class="op" id="2882693">)</span><span class="op" id="2882694">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882697">return</span>&nbsp;<span class="ident" id="2882704">Value</span><span class="op" id="2882709">{</span><span class="ident" id="2882710">typ</span><span class="op" id="2882713">.</span><span class="ident" id="2882714">common</span><span class="op" id="2882720">(</span><span class="op" id="2882721">)</span><span class="op" id="2882722">,</span>&nbsp;<span class="ident" id="2882724">ch</span><span class="op" id="2882726">,</span>&nbsp;<span class="ident" id="2882728">flag</span><span class="op" id="2882732">(</span><span class="ident" id="2882733">Chan</span><span class="op" id="2882737">)</span><span class="op" id="2882738">}</span><br>
<span class="lineno"></span><span class="op" id="2882740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2882743">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2882795">func</span>&nbsp;<span class="ident" id="2882800">MakeMap</span><span class="op" id="2882807">(</span><span class="ident" id="2882808">typ</span>&nbsp;<span class="ident" id="2882812">Type</span><span class="op" id="2882816">)</span>&nbsp;<span class="ident" id="2882818">Value</span>&nbsp;<span class="op" id="2882824">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882827">if</span>&nbsp;<span class="ident" id="2882830">typ</span><span class="op" id="2882833">.</span><span class="ident" id="2882834">Kind</span><span class="op" id="2882838">(</span><span class="op" id="2882839">)</span>&nbsp;<span class="op" id="2882841">!=</span>&nbsp;<span class="ident" id="2882844">Map</span>&nbsp;<span class="op" id="2882848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2882852">panic</span><span class="op" id="2882857">(</span><span class="string" id="2882858">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2882891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2882894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2882897">m</span>&nbsp;<span class="op" id="2882899">:=</span>&nbsp;<span class="ident" id="2882902">makemap</span><span class="op" id="2882909">(</span><span class="ident" id="2882910">typ</span><span class="op" id="2882913">.</span><span class="op" id="2882914">(</span><span class="op" id="2882915">*</span><span class="ident" id="2882916">rtype</span><span class="op" id="2882921">)</span><span class="op" id="2882922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2882925">return</span>&nbsp;<span class="ident" id="2882932">Value</span><span class="op" id="2882937">{</span><span class="ident" id="2882938">typ</span><span class="op" id="2882941">.</span><span class="ident" id="2882942">common</span><span class="op" id="2882948">(</span><span class="op" id="2882949">)</span><span class="op" id="2882950">,</span>&nbsp;<span class="ident" id="2882952">m</span><span class="op" id="2882953">,</span>&nbsp;<span class="ident" id="2882955">flag</span><span class="op" id="2882959">(</span><span class="ident" id="2882960">Map</span><span class="op" id="2882963">)</span><span class="op" id="2882964">}</span><br>
<span class="lineno">2030</span><span class="op" id="2882966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2882969">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2883017">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2883074">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2883120">func</span>&nbsp;<span class="ident" id="2883125">Indirect</span><span class="op" id="2883133">(</span><span class="ident" id="2883134">v</span>&nbsp;<span class="ident" id="2883136">Value</span><span class="op" id="2883141">)</span>&nbsp;<span class="ident" id="2883143">Value</span>&nbsp;<span class="op" id="2883149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883152">if</span>&nbsp;<span class="ident" id="2883155">v</span><span class="op" id="2883156">.</span><span class="ident" id="2883157">Kind</span><span class="op" id="2883161">(</span><span class="op" id="2883162">)</span>&nbsp;<span class="op" id="2883164">!=</span>&nbsp;<span class="ident" id="2883167">Ptr</span>&nbsp;<span class="op" id="2883171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883175">return</span>&nbsp;<span class="ident" id="2883182">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883188">return</span>&nbsp;<span class="ident" id="2883195">v</span><span class="op" id="2883196">.</span><span class="ident" id="2883197">Elem</span><span class="op" id="2883201">(</span><span class="op" id="2883202">)</span><br>
<span class="lineno">2040</span><span class="op" id="2883204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883207">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2883272">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2883340">func</span>&nbsp;<span class="ident" id="2883345">ValueOf</span><span class="op" id="2883352">(</span><span class="ident" id="2883353">i</span>&nbsp;<span class="keyword" id="2883355">interface</span><span class="op" id="2883364">{</span><span class="op" id="2883365">}</span><span class="op" id="2883366">)</span>&nbsp;<span class="ident" id="2883368">Value</span>&nbsp;<span class="op" id="2883374">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883377">if</span>&nbsp;<span class="ident" id="2883380">i</span>&nbsp;<span class="op" id="2883382">==</span>&nbsp;<span class="builtintype" id="2883385">nil</span>&nbsp;<span class="op" id="2883389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883393">return</span>&nbsp;<span class="ident" id="2883400">Value</span><span class="op" id="2883405">{</span><span class="op" id="2883406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2883409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2883413">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2883458">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2883512">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2883560">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2883603">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2883645">escapes</span><span class="op" id="2883652">(</span><span class="ident" id="2883653">i</span><span class="op" id="2883654">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2883658">return</span>&nbsp;<span class="ident" id="2883665">unpackEface</span><span class="op" id="2883676">(</span><span class="ident" id="2883677">i</span><span class="op" id="2883678">)</span><br>
<span class="lineno"></span><span class="op" id="2883680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2883683">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2883759">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2883827">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2883864">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2883940">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2883999">func</span>&nbsp;<span class="ident" id="2884004">Zero</span><span class="op" id="2884008">(</span><span class="ident" id="2884009">typ</span>&nbsp;<span class="ident" id="2884013">Type</span><span class="op" id="2884017">)</span>&nbsp;<span class="ident" id="2884019">Value</span>&nbsp;<span class="op" id="2884025">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884028">if</span>&nbsp;<span class="ident" id="2884031">typ</span>&nbsp;<span class="op" id="2884035">==</span>&nbsp;<span class="builtintype" id="2884038">nil</span>&nbsp;<span class="op" id="2884042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2884046">panic</span><span class="op" id="2884051">(</span><span class="string" id="2884052">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2884072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884078">t</span>&nbsp;<span class="op" id="2884080">:=</span>&nbsp;<span class="ident" id="2884083">typ</span><span class="op" id="2884086">.</span><span class="ident" id="2884087">common</span><span class="op" id="2884093">(</span><span class="op" id="2884094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884097">fl</span>&nbsp;<span class="op" id="2884100">:=</span>&nbsp;<span class="ident" id="2884103">flag</span><span class="op" id="2884107">(</span><span class="ident" id="2884108">t</span><span class="op" id="2884109">.</span><span class="ident" id="2884110">Kind</span><span class="op" id="2884114">(</span><span class="op" id="2884115">)</span><span class="op" id="2884116">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884119">if</span>&nbsp;<span class="ident" id="2884122">ifaceIndir</span><span class="op" id="2884132">(</span><span class="ident" id="2884133">t</span><span class="op" id="2884134">)</span>&nbsp;<span class="op" id="2884136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884140">return</span>&nbsp;<span class="ident" id="2884147">Value</span><span class="op" id="2884152">{</span><span class="ident" id="2884153">t</span><span class="op" id="2884154">,</span>&nbsp;<span class="ident" id="2884156">unsafe_New</span><span class="op" id="2884166">(</span><span class="ident" id="2884167">typ</span><span class="op" id="2884170">.</span><span class="op" id="2884171">(</span><span class="op" id="2884172">*</span><span class="ident" id="2884173">rtype</span><span class="op" id="2884178">)</span><span class="op" id="2884179">)</span><span class="op" id="2884180">,</span>&nbsp;<span class="ident" id="2884182">fl</span>&nbsp;<span class="op" id="2884185">|</span>&nbsp;<span class="ident" id="2884187">flagIndir</span><span class="op" id="2884196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884202">return</span>&nbsp;<span class="ident" id="2884209">Value</span><span class="op" id="2884214">{</span><span class="ident" id="2884215">t</span><span class="op" id="2884216">,</span>&nbsp;<span class="builtintype" id="2884218">nil</span><span class="op" id="2884221">,</span>&nbsp;<span class="ident" id="2884223">fl</span><span class="op" id="2884225">}</span><br>
<span class="lineno"></span><span class="op" id="2884227">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2884230">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2884296">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2884374">func</span>&nbsp;<span class="ident" id="2884379">New</span><span class="op" id="2884382">(</span><span class="ident" id="2884383">typ</span>&nbsp;<span class="ident" id="2884387">Type</span><span class="op" id="2884391">)</span>&nbsp;<span class="ident" id="2884393">Value</span>&nbsp;<span class="op" id="2884399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884402">if</span>&nbsp;<span class="ident" id="2884405">typ</span>&nbsp;<span class="op" id="2884409">==</span>&nbsp;<span class="builtintype" id="2884412">nil</span>&nbsp;<span class="op" id="2884416">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2884420">panic</span><span class="op" id="2884425">(</span><span class="string" id="2884426">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2884445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2884448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884451">ptr</span>&nbsp;<span class="op" id="2884455">:=</span>&nbsp;<span class="ident" id="2884458">unsafe_New</span><span class="op" id="2884468">(</span><span class="ident" id="2884469">typ</span><span class="op" id="2884472">.</span><span class="op" id="2884473">(</span><span class="op" id="2884474">*</span><span class="ident" id="2884475">rtype</span><span class="op" id="2884480">)</span><span class="op" id="2884481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884484">fl</span>&nbsp;<span class="op" id="2884487">:=</span>&nbsp;<span class="ident" id="2884490">flag</span><span class="op" id="2884494">(</span><span class="ident" id="2884495">Ptr</span><span class="op" id="2884498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884501">return</span>&nbsp;<span class="ident" id="2884508">Value</span><span class="op" id="2884513">{</span><span class="ident" id="2884514">typ</span><span class="op" id="2884517">.</span><span class="ident" id="2884518">common</span><span class="op" id="2884524">(</span><span class="op" id="2884525">)</span><span class="op" id="2884526">.</span><span class="ident" id="2884527">ptrTo</span><span class="op" id="2884532">(</span><span class="op" id="2884533">)</span><span class="op" id="2884534">,</span>&nbsp;<span class="ident" id="2884536">ptr</span><span class="op" id="2884539">,</span>&nbsp;<span class="ident" id="2884541">fl</span><span class="op" id="2884543">}</span><br>
<span class="lineno">2085</span><span class="op" id="2884545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2884548">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2884614">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2884658">func</span>&nbsp;<span class="ident" id="2884663">NewAt</span><span class="op" id="2884668">(</span><span class="ident" id="2884669">typ</span>&nbsp;<span class="ident" id="2884673">Type</span><span class="op" id="2884677">,</span>&nbsp;<span class="ident" id="2884679">p</span>&nbsp;<span class="ident" id="2884681">unsafe</span><span class="op" id="2884687">.</span><span class="ident" id="2884688">Pointer</span><span class="op" id="2884695">)</span>&nbsp;<span class="ident" id="2884697">Value</span>&nbsp;<span class="op" id="2884703">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2884706">fl</span>&nbsp;<span class="op" id="2884709">:=</span>&nbsp;<span class="ident" id="2884712">flag</span><span class="op" id="2884716">(</span><span class="ident" id="2884717">Ptr</span><span class="op" id="2884720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2884723">return</span>&nbsp;<span class="ident" id="2884730">Value</span><span class="op" id="2884735">{</span><span class="ident" id="2884736">typ</span><span class="op" id="2884739">.</span><span class="ident" id="2884740">common</span><span class="op" id="2884746">(</span><span class="op" id="2884747">)</span><span class="op" id="2884748">.</span><span class="ident" id="2884749">ptrTo</span><span class="op" id="2884754">(</span><span class="op" id="2884755">)</span><span class="op" id="2884756">,</span>&nbsp;<span class="ident" id="2884758">p</span><span class="op" id="2884759">,</span>&nbsp;<span class="ident" id="2884761">fl</span><span class="op" id="2884763">}</span><br>
<span class="lineno"></span><span class="op" id="2884765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2884768">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2884836">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2884880">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2884966">func</span>&nbsp;<span class="op" id="2884971">(</span><span class="ident" id="2884972">v</span>&nbsp;<span class="ident" id="2884974">Value</span><span class="op" id="2884979">)</span>&nbsp;<span class="ident" id="2884981">assignTo</span><span class="op" id="2884989">(</span><span class="ident" id="2884990">context</span>&nbsp;<span class="builtintype" id="2884998">string</span><span class="op" id="2885004">,</span>&nbsp;<span class="ident" id="2885006">dst</span>&nbsp;<span class="op" id="2885010">*</span><span class="ident" id="2885011">rtype</span><span class="op" id="2885016">,</span>&nbsp;<span class="ident" id="2885018">target</span>&nbsp;<span class="ident" id="2885025">unsafe</span><span class="op" id="2885031">.</span><span class="ident" id="2885032">Pointer</span><span class="op" id="2885039">)</span>&nbsp;<span class="ident" id="2885041">Value</span>&nbsp;<span class="op" id="2885047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885050">if</span>&nbsp;<span class="ident" id="2885053">v</span><span class="op" id="2885054">.</span><span class="ident" id="2885055">flag</span><span class="op" id="2885059">&amp;</span><span class="ident" id="2885060">flagMethod</span>&nbsp;<span class="op" id="2885071">!=</span>&nbsp;<span class="num" id="2885074">0</span>&nbsp;<span class="op" id="2885076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885080">v</span>&nbsp;<span class="op" id="2885082">=</span>&nbsp;<span class="ident" id="2885084">makeMethodValue</span><span class="op" id="2885099">(</span><span class="ident" id="2885100">context</span><span class="op" id="2885107">,</span>&nbsp;<span class="ident" id="2885109">v</span><span class="op" id="2885110">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885117">switch</span>&nbsp;<span class="op" id="2885124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885127">case</span>&nbsp;<span class="ident" id="2885132">directlyAssignable</span><span class="op" id="2885150">(</span><span class="ident" id="2885151">dst</span><span class="op" id="2885154">,</span>&nbsp;<span class="ident" id="2885156">v</span><span class="op" id="2885157">.</span><span class="ident" id="2885158">typ</span><span class="op" id="2885161">)</span><span class="op" id="2885162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2885166">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2885206">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885248">v</span><span class="op" id="2885249">.</span><span class="ident" id="2885250">typ</span>&nbsp;<span class="op" id="2885254">=</span>&nbsp;<span class="ident" id="2885256">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885262">fl</span>&nbsp;<span class="op" id="2885265">:=</span>&nbsp;<span class="ident" id="2885268">v</span><span class="op" id="2885269">.</span><span class="ident" id="2885270">flag</span>&nbsp;<span class="op" id="2885275">&amp;</span>&nbsp;<span class="op" id="2885277">(</span><span class="ident" id="2885278">flagRO</span>&nbsp;<span class="op" id="2885285">|</span>&nbsp;<span class="ident" id="2885287">flagAddr</span>&nbsp;<span class="op" id="2885296">|</span>&nbsp;<span class="ident" id="2885298">flagIndir</span><span class="op" id="2885307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885311">fl</span>&nbsp;<span class="op" id="2885314">|=</span>&nbsp;<span class="ident" id="2885317">flag</span><span class="op" id="2885321">(</span><span class="ident" id="2885322">dst</span><span class="op" id="2885325">.</span><span class="ident" id="2885326">Kind</span><span class="op" id="2885330">(</span><span class="op" id="2885331">)</span><span class="op" id="2885332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885336">return</span>&nbsp;<span class="ident" id="2885343">Value</span><span class="op" id="2885348">{</span><span class="ident" id="2885349">dst</span><span class="op" id="2885352">,</span>&nbsp;<span class="ident" id="2885354">v</span><span class="op" id="2885355">.</span><span class="ident" id="2885356">ptr</span><span class="op" id="2885359">,</span>&nbsp;<span class="ident" id="2885361">fl</span><span class="op" id="2885363">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885367">case</span>&nbsp;<span class="ident" id="2885372">implements</span><span class="op" id="2885382">(</span><span class="ident" id="2885383">dst</span><span class="op" id="2885386">,</span>&nbsp;<span class="ident" id="2885388">v</span><span class="op" id="2885389">.</span><span class="ident" id="2885390">typ</span><span class="op" id="2885393">)</span><span class="op" id="2885394">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885398">if</span>&nbsp;<span class="ident" id="2885401">target</span>&nbsp;<span class="op" id="2885408">==</span>&nbsp;<span class="builtintype" id="2885411">nil</span>&nbsp;<span class="op" id="2885415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885420">target</span>&nbsp;<span class="op" id="2885427">=</span>&nbsp;<span class="ident" id="2885429">unsafe_New</span><span class="op" id="2885439">(</span><span class="ident" id="2885440">dst</span><span class="op" id="2885443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885447">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885451">x</span>&nbsp;<span class="op" id="2885453">:=</span>&nbsp;<span class="ident" id="2885456">valueInterface</span><span class="op" id="2885470">(</span><span class="ident" id="2885471">v</span><span class="op" id="2885472">,</span>&nbsp;<span class="builtintype" id="2885474">false</span><span class="op" id="2885479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885483">if</span>&nbsp;<span class="ident" id="2885486">dst</span><span class="op" id="2885489">.</span><span class="ident" id="2885490">NumMethod</span><span class="op" id="2885499">(</span><span class="op" id="2885500">)</span>&nbsp;<span class="op" id="2885502">==</span>&nbsp;<span class="num" id="2885505">0</span>&nbsp;<span class="op" id="2885507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885512">*</span><span class="op" id="2885513">(</span><span class="op" id="2885514">*</span><span class="keyword" id="2885515">interface</span><span class="op" id="2885524">{</span><span class="op" id="2885525">}</span><span class="op" id="2885526">)</span><span class="op" id="2885527">(</span><span class="ident" id="2885528">target</span><span class="op" id="2885534">)</span>&nbsp;<span class="op" id="2885536">=</span>&nbsp;<span class="ident" id="2885538">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885542">}</span>&nbsp;<span class="keyword" id="2885544">else</span>&nbsp;<span class="op" id="2885549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885554">ifaceE2I</span><span class="op" id="2885562">(</span><span class="ident" id="2885563">dst</span><span class="op" id="2885566">,</span>&nbsp;<span class="ident" id="2885568">x</span><span class="op" id="2885569">,</span>&nbsp;<span class="ident" id="2885571">target</span><span class="op" id="2885577">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885585">return</span>&nbsp;<span class="ident" id="2885592">Value</span><span class="op" id="2885597">{</span><span class="ident" id="2885598">dst</span><span class="op" id="2885601">,</span>&nbsp;<span class="ident" id="2885603">target</span><span class="op" id="2885609">,</span>&nbsp;<span class="ident" id="2885611">flagIndir</span>&nbsp;<span class="op" id="2885621">|</span>&nbsp;<span class="ident" id="2885623">flag</span><span class="op" id="2885627">(</span><span class="ident" id="2885628">Interface</span><span class="op" id="2885637">)</span><span class="op" id="2885638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2885641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2885645">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2885657">panic</span><span class="op" id="2885662">(</span><span class="ident" id="2885663">context</span>&nbsp;<span class="op" id="2885671">+</span>&nbsp;<span class="string" id="2885673">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2885692">+</span>&nbsp;<span class="ident" id="2885694">v</span><span class="op" id="2885695">.</span><span class="ident" id="2885696">typ</span><span class="op" id="2885699">.</span><span class="ident" id="2885700">String</span><span class="op" id="2885706">(</span><span class="op" id="2885707">)</span>&nbsp;<span class="op" id="2885709">+</span>&nbsp;<span class="string" id="2885711">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2885741">+</span>&nbsp;<span class="ident" id="2885743">dst</span><span class="op" id="2885746">.</span><span class="ident" id="2885747">String</span><span class="op" id="2885753">(</span><span class="op" id="2885754">)</span><span class="op" id="2885755">)</span><br>
<span class="lineno"></span><span class="op" id="2885757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2885760">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2885812">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2885872">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2885917">func</span>&nbsp;<span class="op" id="2885922">(</span><span class="ident" id="2885923">v</span>&nbsp;<span class="ident" id="2885925">Value</span><span class="op" id="2885930">)</span>&nbsp;<span class="ident" id="2885932">Convert</span><span class="op" id="2885939">(</span><span class="ident" id="2885940">t</span>&nbsp;<span class="ident" id="2885942">Type</span><span class="op" id="2885946">)</span>&nbsp;<span class="ident" id="2885948">Value</span>&nbsp;<span class="op" id="2885954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2885957">if</span>&nbsp;<span class="ident" id="2885960">v</span><span class="op" id="2885961">.</span><span class="ident" id="2885962">flag</span><span class="op" id="2885966">&amp;</span><span class="ident" id="2885967">flagMethod</span>&nbsp;<span class="op" id="2885978">!=</span>&nbsp;<span class="num" id="2885981">0</span>&nbsp;<span class="op" id="2885983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2885987">v</span>&nbsp;<span class="op" id="2885989">=</span>&nbsp;<span class="ident" id="2885991">makeMethodValue</span><span class="op" id="2886006">(</span><span class="string" id="2886007">&#34;Convert&#34;</span><span class="op" id="2886016">,</span>&nbsp;<span class="ident" id="2886018">v</span><span class="op" id="2886019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2886022">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2886025">op</span>&nbsp;<span class="op" id="2886028">:=</span>&nbsp;<span class="ident" id="2886031">convertOp</span><span class="op" id="2886040">(</span><span class="ident" id="2886041">t</span><span class="op" id="2886042">.</span><span class="ident" id="2886043">common</span><span class="op" id="2886049">(</span><span class="op" id="2886050">)</span><span class="op" id="2886051">,</span>&nbsp;<span class="ident" id="2886053">v</span><span class="op" id="2886054">.</span><span class="ident" id="2886055">typ</span><span class="op" id="2886058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886061">if</span>&nbsp;<span class="ident" id="2886064">op</span>&nbsp;<span class="op" id="2886067">==</span>&nbsp;<span class="builtintype" id="2886070">nil</span>&nbsp;<span class="op" id="2886074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2886078">panic</span><span class="op" id="2886083">(</span><span class="string" id="2886084">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2886124">+</span>&nbsp;<span class="ident" id="2886126">v</span><span class="op" id="2886127">.</span><span class="ident" id="2886128">typ</span><span class="op" id="2886131">.</span><span class="ident" id="2886132">String</span><span class="op" id="2886138">(</span><span class="op" id="2886139">)</span>&nbsp;<span class="op" id="2886141">+</span>&nbsp;<span class="string" id="2886143">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2886175">+</span>&nbsp;<span class="ident" id="2886177">t</span><span class="op" id="2886178">.</span><span class="ident" id="2886179">String</span><span class="op" id="2886185">(</span><span class="op" id="2886186">)</span><span class="op" id="2886187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2886190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886193">return</span>&nbsp;<span class="ident" id="2886200">op</span><span class="op" id="2886202">(</span><span class="ident" id="2886203">v</span><span class="op" id="2886204">,</span>&nbsp;<span class="ident" id="2886206">t</span><span class="op" id="2886207">)</span><br>
<span class="lineno">2140</span><span class="op" id="2886209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2886212">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2886277">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2886357">func</span>&nbsp;<span class="ident" id="2886362">convertOp</span><span class="op" id="2886371">(</span><span class="ident" id="2886372">dst</span><span class="op" id="2886375">,</span>&nbsp;<span class="ident" id="2886377">src</span>&nbsp;<span class="op" id="2886381">*</span><span class="ident" id="2886382">rtype</span><span class="op" id="2886387">)</span>&nbsp;<span class="keyword" id="2886389">func</span><span class="op" id="2886393">(</span><span class="ident" id="2886394">Value</span><span class="op" id="2886399">,</span>&nbsp;<span class="ident" id="2886401">Type</span><span class="op" id="2886405">)</span>&nbsp;<span class="ident" id="2886407">Value</span>&nbsp;<span class="op" id="2886413">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886416">switch</span>&nbsp;<span class="ident" id="2886423">src</span><span class="op" id="2886426">.</span><span class="ident" id="2886427">Kind</span><span class="op" id="2886431">(</span><span class="op" id="2886432">)</span>&nbsp;<span class="op" id="2886434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886437">case</span>&nbsp;<span class="ident" id="2886442">Int</span><span class="op" id="2886445">,</span>&nbsp;<span class="ident" id="2886447">Int8</span><span class="op" id="2886451">,</span>&nbsp;<span class="ident" id="2886453">Int16</span><span class="op" id="2886458">,</span>&nbsp;<span class="ident" id="2886460">Int32</span><span class="op" id="2886465">,</span>&nbsp;<span class="ident" id="2886467">Int64</span><span class="op" id="2886472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886476">switch</span>&nbsp;<span class="ident" id="2886483">dst</span><span class="op" id="2886486">.</span><span class="ident" id="2886487">Kind</span><span class="op" id="2886491">(</span><span class="op" id="2886492">)</span>&nbsp;<span class="op" id="2886494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886498">case</span>&nbsp;<span class="ident" id="2886503">Int</span><span class="op" id="2886506">,</span>&nbsp;<span class="ident" id="2886508">Int8</span><span class="op" id="2886512">,</span>&nbsp;<span class="ident" id="2886514">Int16</span><span class="op" id="2886519">,</span>&nbsp;<span class="ident" id="2886521">Int32</span><span class="op" id="2886526">,</span>&nbsp;<span class="ident" id="2886528">Int64</span><span class="op" id="2886533">,</span>&nbsp;<span class="ident" id="2886535">Uint</span><span class="op" id="2886539">,</span>&nbsp;<span class="ident" id="2886541">Uint8</span><span class="op" id="2886546">,</span>&nbsp;<span class="ident" id="2886548">Uint16</span><span class="op" id="2886554">,</span>&nbsp;<span class="ident" id="2886556">Uint32</span><span class="op" id="2886562">,</span>&nbsp;<span class="ident" id="2886564">Uint64</span><span class="op" id="2886570">,</span>&nbsp;<span class="ident" id="2886572">Uintptr</span><span class="op" id="2886579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886584">return</span>&nbsp;<span class="ident" id="2886591">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886600">case</span>&nbsp;<span class="ident" id="2886605">Float32</span><span class="op" id="2886612">,</span>&nbsp;<span class="ident" id="2886614">Float64</span><span class="op" id="2886621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886626">return</span>&nbsp;<span class="ident" id="2886633">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886647">case</span>&nbsp;<span class="ident" id="2886652">String</span><span class="op" id="2886658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886663">return</span>&nbsp;<span class="ident" id="2886670">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2886685">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886689">case</span>&nbsp;<span class="ident" id="2886694">Uint</span><span class="op" id="2886698">,</span>&nbsp;<span class="ident" id="2886700">Uint8</span><span class="op" id="2886705">,</span>&nbsp;<span class="ident" id="2886707">Uint16</span><span class="op" id="2886713">,</span>&nbsp;<span class="ident" id="2886715">Uint32</span><span class="op" id="2886721">,</span>&nbsp;<span class="ident" id="2886723">Uint64</span><span class="op" id="2886729">,</span>&nbsp;<span class="ident" id="2886731">Uintptr</span><span class="op" id="2886738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886742">switch</span>&nbsp;<span class="ident" id="2886749">dst</span><span class="op" id="2886752">.</span><span class="ident" id="2886753">Kind</span><span class="op" id="2886757">(</span><span class="op" id="2886758">)</span>&nbsp;<span class="op" id="2886760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886764">case</span>&nbsp;<span class="ident" id="2886769">Int</span><span class="op" id="2886772">,</span>&nbsp;<span class="ident" id="2886774">Int8</span><span class="op" id="2886778">,</span>&nbsp;<span class="ident" id="2886780">Int16</span><span class="op" id="2886785">,</span>&nbsp;<span class="ident" id="2886787">Int32</span><span class="op" id="2886792">,</span>&nbsp;<span class="ident" id="2886794">Int64</span><span class="op" id="2886799">,</span>&nbsp;<span class="ident" id="2886801">Uint</span><span class="op" id="2886805">,</span>&nbsp;<span class="ident" id="2886807">Uint8</span><span class="op" id="2886812">,</span>&nbsp;<span class="ident" id="2886814">Uint16</span><span class="op" id="2886820">,</span>&nbsp;<span class="ident" id="2886822">Uint32</span><span class="op" id="2886828">,</span>&nbsp;<span class="ident" id="2886830">Uint64</span><span class="op" id="2886836">,</span>&nbsp;<span class="ident" id="2886838">Uintptr</span><span class="op" id="2886845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886850">return</span>&nbsp;<span class="ident" id="2886857">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886867">case</span>&nbsp;<span class="ident" id="2886872">Float32</span><span class="op" id="2886879">,</span>&nbsp;<span class="ident" id="2886881">Float64</span><span class="op" id="2886888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886893">return</span>&nbsp;<span class="ident" id="2886900">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886915">case</span>&nbsp;<span class="ident" id="2886920">String</span><span class="op" id="2886926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886931">return</span>&nbsp;<span class="ident" id="2886938">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2886954">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886958">case</span>&nbsp;<span class="ident" id="2886963">Float32</span><span class="op" id="2886970">,</span>&nbsp;<span class="ident" id="2886972">Float64</span><span class="op" id="2886979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2886983">switch</span>&nbsp;<span class="ident" id="2886990">dst</span><span class="op" id="2886993">.</span><span class="ident" id="2886994">Kind</span><span class="op" id="2886998">(</span><span class="op" id="2886999">)</span>&nbsp;<span class="op" id="2887001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887005">case</span>&nbsp;<span class="ident" id="2887010">Int</span><span class="op" id="2887013">,</span>&nbsp;<span class="ident" id="2887015">Int8</span><span class="op" id="2887019">,</span>&nbsp;<span class="ident" id="2887021">Int16</span><span class="op" id="2887026">,</span>&nbsp;<span class="ident" id="2887028">Int32</span><span class="op" id="2887033">,</span>&nbsp;<span class="ident" id="2887035">Int64</span><span class="op" id="2887040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887045">return</span>&nbsp;<span class="ident" id="2887052">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887066">case</span>&nbsp;<span class="ident" id="2887071">Uint</span><span class="op" id="2887075">,</span>&nbsp;<span class="ident" id="2887077">Uint8</span><span class="op" id="2887082">,</span>&nbsp;<span class="ident" id="2887084">Uint16</span><span class="op" id="2887090">,</span>&nbsp;<span class="ident" id="2887092">Uint32</span><span class="op" id="2887098">,</span>&nbsp;<span class="ident" id="2887100">Uint64</span><span class="op" id="2887106">,</span>&nbsp;<span class="ident" id="2887108">Uintptr</span><span class="op" id="2887115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887120">return</span>&nbsp;<span class="ident" id="2887127">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887142">case</span>&nbsp;<span class="ident" id="2887147">Float32</span><span class="op" id="2887154">,</span>&nbsp;<span class="ident" id="2887156">Float64</span><span class="op" id="2887163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887168">return</span>&nbsp;<span class="ident" id="2887175">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887186">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887190">case</span>&nbsp;<span class="ident" id="2887195">Complex64</span><span class="op" id="2887204">,</span>&nbsp;<span class="ident" id="2887206">Complex128</span><span class="op" id="2887216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887220">switch</span>&nbsp;<span class="ident" id="2887227">dst</span><span class="op" id="2887230">.</span><span class="ident" id="2887231">Kind</span><span class="op" id="2887235">(</span><span class="op" id="2887236">)</span>&nbsp;<span class="op" id="2887238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887242">case</span>&nbsp;<span class="ident" id="2887247">Complex64</span><span class="op" id="2887256">,</span>&nbsp;<span class="ident" id="2887258">Complex128</span><span class="op" id="2887268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887273">return</span>&nbsp;<span class="ident" id="2887280">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887297">case</span>&nbsp;<span class="ident" id="2887302">String</span><span class="op" id="2887308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887312">if</span>&nbsp;<span class="ident" id="2887315">dst</span><span class="op" id="2887318">.</span><span class="ident" id="2887319">Kind</span><span class="op" id="2887323">(</span><span class="op" id="2887324">)</span>&nbsp;<span class="op" id="2887326">==</span>&nbsp;<span class="ident" id="2887329">Slice</span>&nbsp;<span class="op" id="2887335">&amp;&amp;</span>&nbsp;<span class="ident" id="2887338">dst</span><span class="op" id="2887341">.</span><span class="ident" id="2887342">Elem</span><span class="op" id="2887346">(</span><span class="op" id="2887347">)</span><span class="op" id="2887348">.</span><span class="ident" id="2887349">PkgPath</span><span class="op" id="2887356">(</span><span class="op" id="2887357">)</span>&nbsp;<span class="op" id="2887359">==</span>&nbsp;<span class="string" id="2887362">&#34;&#34;</span>&nbsp;<span class="op" id="2887365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887370">switch</span>&nbsp;<span class="ident" id="2887377">dst</span><span class="op" id="2887380">.</span><span class="ident" id="2887381">Elem</span><span class="op" id="2887385">(</span><span class="op" id="2887386">)</span><span class="op" id="2887387">.</span><span class="ident" id="2887388">Kind</span><span class="op" id="2887392">(</span><span class="op" id="2887393">)</span>&nbsp;<span class="op" id="2887395">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887400">case</span>&nbsp;<span class="ident" id="2887405">Uint8</span><span class="op" id="2887410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887416">return</span>&nbsp;<span class="ident" id="2887423">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887441">case</span>&nbsp;<span class="ident" id="2887446">Int32</span><span class="op" id="2887451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887457">return</span>&nbsp;<span class="ident" id="2887464">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887482">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887490">case</span>&nbsp;<span class="ident" id="2887495">Slice</span><span class="op" id="2887500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887504">if</span>&nbsp;<span class="ident" id="2887507">dst</span><span class="op" id="2887510">.</span><span class="ident" id="2887511">Kind</span><span class="op" id="2887515">(</span><span class="op" id="2887516">)</span>&nbsp;<span class="op" id="2887518">==</span>&nbsp;<span class="ident" id="2887521">String</span>&nbsp;<span class="op" id="2887528">&amp;&amp;</span>&nbsp;<span class="ident" id="2887531">src</span><span class="op" id="2887534">.</span><span class="ident" id="2887535">Elem</span><span class="op" id="2887539">(</span><span class="op" id="2887540">)</span><span class="op" id="2887541">.</span><span class="ident" id="2887542">PkgPath</span><span class="op" id="2887549">(</span><span class="op" id="2887550">)</span>&nbsp;<span class="op" id="2887552">==</span>&nbsp;<span class="string" id="2887555">&#34;&#34;</span>&nbsp;<span class="op" id="2887558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887563">switch</span>&nbsp;<span class="ident" id="2887570">src</span><span class="op" id="2887573">.</span><span class="ident" id="2887574">Elem</span><span class="op" id="2887578">(</span><span class="op" id="2887579">)</span><span class="op" id="2887580">.</span><span class="ident" id="2887581">Kind</span><span class="op" id="2887585">(</span><span class="op" id="2887586">)</span>&nbsp;<span class="op" id="2887588">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887593">case</span>&nbsp;<span class="ident" id="2887598">Uint8</span><span class="op" id="2887603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887609">return</span>&nbsp;<span class="ident" id="2887616">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887634">case</span>&nbsp;<span class="ident" id="2887639">Int32</span><span class="op" id="2887644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887650">return</span>&nbsp;<span class="ident" id="2887657">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887675">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2887686">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887729">if</span>&nbsp;<span class="ident" id="2887732">haveIdenticalUnderlyingType</span><span class="op" id="2887759">(</span><span class="ident" id="2887760">dst</span><span class="op" id="2887763">,</span>&nbsp;<span class="ident" id="2887765">src</span><span class="op" id="2887768">)</span>&nbsp;<span class="op" id="2887770">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887774">return</span>&nbsp;<span class="ident" id="2887781">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2887792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2887796">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2887870">if</span>&nbsp;<span class="ident" id="2887873">dst</span><span class="op" id="2887876">.</span><span class="ident" id="2887877">Kind</span><span class="op" id="2887881">(</span><span class="op" id="2887882">)</span>&nbsp;<span class="op" id="2887884">==</span>&nbsp;<span class="ident" id="2887887">Ptr</span>&nbsp;<span class="op" id="2887891">&amp;&amp;</span>&nbsp;<span class="ident" id="2887894">dst</span><span class="op" id="2887897">.</span><span class="ident" id="2887898">Name</span><span class="op" id="2887902">(</span><span class="op" id="2887903">)</span>&nbsp;<span class="op" id="2887905">==</span>&nbsp;<span class="string" id="2887908">&#34;&#34;</span>&nbsp;<span class="op" id="2887911">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887916">src</span><span class="op" id="2887919">.</span><span class="ident" id="2887920">Kind</span><span class="op" id="2887924">(</span><span class="op" id="2887925">)</span>&nbsp;<span class="op" id="2887927">==</span>&nbsp;<span class="ident" id="2887930">Ptr</span>&nbsp;<span class="op" id="2887934">&amp;&amp;</span>&nbsp;<span class="ident" id="2887937">src</span><span class="op" id="2887940">.</span><span class="ident" id="2887941">Name</span><span class="op" id="2887945">(</span><span class="op" id="2887946">)</span>&nbsp;<span class="op" id="2887948">==</span>&nbsp;<span class="string" id="2887951">&#34;&#34;</span>&nbsp;<span class="op" id="2887954">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2887959">haveIdenticalUnderlyingType</span><span class="op" id="2887986">(</span><span class="ident" id="2887987">dst</span><span class="op" id="2887990">.</span><span class="ident" id="2887991">Elem</span><span class="op" id="2887995">(</span><span class="op" id="2887996">)</span><span class="op" id="2887997">.</span><span class="ident" id="2887998">common</span><span class="op" id="2888004">(</span><span class="op" id="2888005">)</span><span class="op" id="2888006">,</span>&nbsp;<span class="ident" id="2888008">src</span><span class="op" id="2888011">.</span><span class="ident" id="2888012">Elem</span><span class="op" id="2888016">(</span><span class="op" id="2888017">)</span><span class="op" id="2888018">.</span><span class="ident" id="2888019">common</span><span class="op" id="2888025">(</span><span class="op" id="2888026">)</span><span class="op" id="2888027">)</span>&nbsp;<span class="op" id="2888029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888033">return</span>&nbsp;<span class="ident" id="2888040">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888055">if</span>&nbsp;<span class="ident" id="2888058">implements</span><span class="op" id="2888068">(</span><span class="ident" id="2888069">dst</span><span class="op" id="2888072">,</span>&nbsp;<span class="ident" id="2888074">src</span><span class="op" id="2888077">)</span>&nbsp;<span class="op" id="2888079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888083">if</span>&nbsp;<span class="ident" id="2888086">src</span><span class="op" id="2888089">.</span><span class="ident" id="2888090">Kind</span><span class="op" id="2888094">(</span><span class="op" id="2888095">)</span>&nbsp;<span class="op" id="2888097">==</span>&nbsp;<span class="ident" id="2888100">Interface</span>&nbsp;<span class="op" id="2888110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888115">return</span>&nbsp;<span class="ident" id="2888122">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888135">return</span>&nbsp;<span class="ident" id="2888142">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888154">return</span>&nbsp;<span class="builtintype" id="2888161">nil</span><br>
<span class="lineno"></span><span class="op" id="2888165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2888168">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2888241">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2888286">func</span>&nbsp;<span class="ident" id="2888291">makeInt</span><span class="op" id="2888298">(</span><span class="ident" id="2888299">f</span>&nbsp;<span class="ident" id="2888301">flag</span><span class="op" id="2888305">,</span>&nbsp;<span class="ident" id="2888307">bits</span>&nbsp;<span class="ident" id="2888312">uint64</span><span class="op" id="2888318">,</span>&nbsp;<span class="ident" id="2888320">t</span>&nbsp;<span class="ident" id="2888322">Type</span><span class="op" id="2888326">)</span>&nbsp;<span class="ident" id="2888328">Value</span>&nbsp;<span class="op" id="2888334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888337">typ</span>&nbsp;<span class="op" id="2888341">:=</span>&nbsp;<span class="ident" id="2888344">t</span><span class="op" id="2888345">.</span><span class="ident" id="2888346">common</span><span class="op" id="2888352">(</span><span class="op" id="2888353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888356">ptr</span>&nbsp;<span class="op" id="2888360">:=</span>&nbsp;<span class="ident" id="2888363">unsafe_New</span><span class="op" id="2888373">(</span><span class="ident" id="2888374">typ</span><span class="op" id="2888377">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888380">switch</span>&nbsp;<span class="ident" id="2888387">typ</span><span class="op" id="2888390">.</span><span class="ident" id="2888391">size</span>&nbsp;<span class="op" id="2888396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888399">case</span>&nbsp;<span class="num" id="2888404">1</span><span class="op" id="2888405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888409">*</span><span class="op" id="2888410">(</span><span class="op" id="2888411">*</span><span class="builtintype" id="2888412">uint8</span><span class="op" id="2888417">)</span><span class="op" id="2888418">(</span><span class="ident" id="2888419">unsafe</span><span class="op" id="2888425">.</span><span class="ident" id="2888426">Pointer</span><span class="op" id="2888433">(</span><span class="ident" id="2888434">ptr</span><span class="op" id="2888437">)</span><span class="op" id="2888438">)</span>&nbsp;<span class="op" id="2888440">=</span>&nbsp;<span class="builtintype" id="2888442">uint8</span><span class="op" id="2888447">(</span><span class="ident" id="2888448">bits</span><span class="op" id="2888452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888455">case</span>&nbsp;<span class="num" id="2888460">2</span><span class="op" id="2888461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888465">*</span><span class="op" id="2888466">(</span><span class="op" id="2888467">*</span><span class="builtintype" id="2888468">uint16</span><span class="op" id="2888474">)</span><span class="op" id="2888475">(</span><span class="ident" id="2888476">unsafe</span><span class="op" id="2888482">.</span><span class="ident" id="2888483">Pointer</span><span class="op" id="2888490">(</span><span class="ident" id="2888491">ptr</span><span class="op" id="2888494">)</span><span class="op" id="2888495">)</span>&nbsp;<span class="op" id="2888497">=</span>&nbsp;<span class="builtintype" id="2888499">uint16</span><span class="op" id="2888505">(</span><span class="ident" id="2888506">bits</span><span class="op" id="2888510">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888513">case</span>&nbsp;<span class="num" id="2888518">4</span><span class="op" id="2888519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888523">*</span><span class="op" id="2888524">(</span><span class="op" id="2888525">*</span><span class="builtintype" id="2888526">uint32</span><span class="op" id="2888532">)</span><span class="op" id="2888533">(</span><span class="ident" id="2888534">unsafe</span><span class="op" id="2888540">.</span><span class="ident" id="2888541">Pointer</span><span class="op" id="2888548">(</span><span class="ident" id="2888549">ptr</span><span class="op" id="2888552">)</span><span class="op" id="2888553">)</span>&nbsp;<span class="op" id="2888555">=</span>&nbsp;<span class="builtintype" id="2888557">uint32</span><span class="op" id="2888563">(</span><span class="ident" id="2888564">bits</span><span class="op" id="2888568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888571">case</span>&nbsp;<span class="num" id="2888576">8</span><span class="op" id="2888577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888581">*</span><span class="op" id="2888582">(</span><span class="op" id="2888583">*</span><span class="ident" id="2888584">uint64</span><span class="op" id="2888590">)</span><span class="op" id="2888591">(</span><span class="ident" id="2888592">unsafe</span><span class="op" id="2888598">.</span><span class="ident" id="2888599">Pointer</span><span class="op" id="2888606">(</span><span class="ident" id="2888607">ptr</span><span class="op" id="2888610">)</span><span class="op" id="2888611">)</span>&nbsp;<span class="op" id="2888613">=</span>&nbsp;<span class="ident" id="2888615">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888621">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888624">return</span>&nbsp;<span class="ident" id="2888631">Value</span><span class="op" id="2888636">{</span><span class="ident" id="2888637">typ</span><span class="op" id="2888640">,</span>&nbsp;<span class="ident" id="2888642">ptr</span><span class="op" id="2888645">,</span>&nbsp;<span class="ident" id="2888647">f</span>&nbsp;<span class="op" id="2888649">|</span>&nbsp;<span class="ident" id="2888651">flagIndir</span>&nbsp;<span class="op" id="2888661">|</span>&nbsp;<span class="ident" id="2888663">flag</span><span class="op" id="2888667">(</span><span class="ident" id="2888668">typ</span><span class="op" id="2888671">.</span><span class="ident" id="2888672">Kind</span><span class="op" id="2888676">(</span><span class="op" id="2888677">)</span><span class="op" id="2888678">)</span><span class="op" id="2888679">}</span><br>
<span class="lineno"></span><span class="op" id="2888681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2888684">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2888767">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2888808">func</span>&nbsp;<span class="ident" id="2888813">makeFloat</span><span class="op" id="2888822">(</span><span class="ident" id="2888823">f</span>&nbsp;<span class="ident" id="2888825">flag</span><span class="op" id="2888829">,</span>&nbsp;<span class="ident" id="2888831">v</span>&nbsp;<span class="builtintype" id="2888833">float64</span><span class="op" id="2888840">,</span>&nbsp;<span class="ident" id="2888842">t</span>&nbsp;<span class="ident" id="2888844">Type</span><span class="op" id="2888848">)</span>&nbsp;<span class="ident" id="2888850">Value</span>&nbsp;<span class="op" id="2888856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888859">typ</span>&nbsp;<span class="op" id="2888863">:=</span>&nbsp;<span class="ident" id="2888866">t</span><span class="op" id="2888867">.</span><span class="ident" id="2888868">common</span><span class="op" id="2888874">(</span><span class="op" id="2888875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2888878">ptr</span>&nbsp;<span class="op" id="2888882">:=</span>&nbsp;<span class="ident" id="2888885">unsafe_New</span><span class="op" id="2888895">(</span><span class="ident" id="2888896">typ</span><span class="op" id="2888899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888902">switch</span>&nbsp;<span class="ident" id="2888909">typ</span><span class="op" id="2888912">.</span><span class="ident" id="2888913">size</span>&nbsp;<span class="op" id="2888918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888921">case</span>&nbsp;<span class="num" id="2888926">4</span><span class="op" id="2888927">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888931">*</span><span class="op" id="2888932">(</span><span class="op" id="2888933">*</span><span class="builtintype" id="2888934">float32</span><span class="op" id="2888941">)</span><span class="op" id="2888942">(</span><span class="ident" id="2888943">unsafe</span><span class="op" id="2888949">.</span><span class="ident" id="2888950">Pointer</span><span class="op" id="2888957">(</span><span class="ident" id="2888958">ptr</span><span class="op" id="2888961">)</span><span class="op" id="2888962">)</span>&nbsp;<span class="op" id="2888964">=</span>&nbsp;<span class="builtintype" id="2888966">float32</span><span class="op" id="2888973">(</span><span class="ident" id="2888974">v</span><span class="op" id="2888975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2888978">case</span>&nbsp;<span class="num" id="2888983">8</span><span class="op" id="2888984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2888988">*</span><span class="op" id="2888989">(</span><span class="op" id="2888990">*</span><span class="builtintype" id="2888991">float64</span><span class="op" id="2888998">)</span><span class="op" id="2888999">(</span><span class="ident" id="2889000">unsafe</span><span class="op" id="2889006">.</span><span class="ident" id="2889007">Pointer</span><span class="op" id="2889014">(</span><span class="ident" id="2889015">ptr</span><span class="op" id="2889018">)</span><span class="op" id="2889019">)</span>&nbsp;<span class="op" id="2889021">=</span>&nbsp;<span class="ident" id="2889023">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889029">return</span>&nbsp;<span class="ident" id="2889036">Value</span><span class="op" id="2889041">{</span><span class="ident" id="2889042">typ</span><span class="op" id="2889045">,</span>&nbsp;<span class="ident" id="2889047">ptr</span><span class="op" id="2889050">,</span>&nbsp;<span class="ident" id="2889052">f</span>&nbsp;<span class="op" id="2889054">|</span>&nbsp;<span class="ident" id="2889056">flagIndir</span>&nbsp;<span class="op" id="2889066">|</span>&nbsp;<span class="ident" id="2889068">flag</span><span class="op" id="2889072">(</span><span class="ident" id="2889073">typ</span><span class="op" id="2889076">.</span><span class="ident" id="2889077">Kind</span><span class="op" id="2889081">(</span><span class="op" id="2889082">)</span><span class="op" id="2889083">)</span><span class="op" id="2889084">}</span><br>
<span class="lineno">2255</span><span class="op" id="2889086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2889089">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2889176">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2889222">func</span>&nbsp;<span class="ident" id="2889227">makeComplex</span><span class="op" id="2889238">(</span><span class="ident" id="2889239">f</span>&nbsp;<span class="ident" id="2889241">flag</span><span class="op" id="2889245">,</span>&nbsp;<span class="ident" id="2889247">v</span>&nbsp;<span class="builtintype" id="2889249">complex128</span><span class="op" id="2889259">,</span>&nbsp;<span class="ident" id="2889261">t</span>&nbsp;<span class="ident" id="2889263">Type</span><span class="op" id="2889267">)</span>&nbsp;<span class="ident" id="2889269">Value</span>&nbsp;<span class="op" id="2889275">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889278">typ</span>&nbsp;<span class="op" id="2889282">:=</span>&nbsp;<span class="ident" id="2889285">t</span><span class="op" id="2889286">.</span><span class="ident" id="2889287">common</span><span class="op" id="2889293">(</span><span class="op" id="2889294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889297">ptr</span>&nbsp;<span class="op" id="2889301">:=</span>&nbsp;<span class="ident" id="2889304">unsafe_New</span><span class="op" id="2889314">(</span><span class="ident" id="2889315">typ</span><span class="op" id="2889318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889321">switch</span>&nbsp;<span class="ident" id="2889328">typ</span><span class="op" id="2889331">.</span><span class="ident" id="2889332">size</span>&nbsp;<span class="op" id="2889337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889340">case</span>&nbsp;<span class="num" id="2889345">8</span><span class="op" id="2889346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889350">*</span><span class="op" id="2889351">(</span><span class="op" id="2889352">*</span><span class="builtintype" id="2889353">complex64</span><span class="op" id="2889362">)</span><span class="op" id="2889363">(</span><span class="ident" id="2889364">unsafe</span><span class="op" id="2889370">.</span><span class="ident" id="2889371">Pointer</span><span class="op" id="2889378">(</span><span class="ident" id="2889379">ptr</span><span class="op" id="2889382">)</span><span class="op" id="2889383">)</span>&nbsp;<span class="op" id="2889385">=</span>&nbsp;<span class="builtintype" id="2889387">complex64</span><span class="op" id="2889396">(</span><span class="ident" id="2889397">v</span><span class="op" id="2889398">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889401">case</span>&nbsp;<span class="num" id="2889406">16</span><span class="op" id="2889408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889412">*</span><span class="op" id="2889413">(</span><span class="op" id="2889414">*</span><span class="builtintype" id="2889415">complex128</span><span class="op" id="2889425">)</span><span class="op" id="2889426">(</span><span class="ident" id="2889427">unsafe</span><span class="op" id="2889433">.</span><span class="ident" id="2889434">Pointer</span><span class="op" id="2889441">(</span><span class="ident" id="2889442">ptr</span><span class="op" id="2889445">)</span><span class="op" id="2889446">)</span>&nbsp;<span class="op" id="2889448">=</span>&nbsp;<span class="ident" id="2889450">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2889453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889456">return</span>&nbsp;<span class="ident" id="2889463">Value</span><span class="op" id="2889468">{</span><span class="ident" id="2889469">typ</span><span class="op" id="2889472">,</span>&nbsp;<span class="ident" id="2889474">ptr</span><span class="op" id="2889477">,</span>&nbsp;<span class="ident" id="2889479">f</span>&nbsp;<span class="op" id="2889481">|</span>&nbsp;<span class="ident" id="2889483">flagIndir</span>&nbsp;<span class="op" id="2889493">|</span>&nbsp;<span class="ident" id="2889495">flag</span><span class="op" id="2889499">(</span><span class="ident" id="2889500">typ</span><span class="op" id="2889503">.</span><span class="ident" id="2889504">Kind</span><span class="op" id="2889508">(</span><span class="op" id="2889509">)</span><span class="op" id="2889510">)</span><span class="op" id="2889511">}</span><br>
<span class="lineno"></span><span class="op" id="2889513">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2889516">func</span>&nbsp;<span class="ident" id="2889521">makeString</span><span class="op" id="2889531">(</span><span class="ident" id="2889532">f</span>&nbsp;<span class="ident" id="2889534">flag</span><span class="op" id="2889538">,</span>&nbsp;<span class="ident" id="2889540">v</span>&nbsp;<span class="builtintype" id="2889542">string</span><span class="op" id="2889548">,</span>&nbsp;<span class="ident" id="2889550">t</span>&nbsp;<span class="ident" id="2889552">Type</span><span class="op" id="2889556">)</span>&nbsp;<span class="ident" id="2889558">Value</span>&nbsp;<span class="op" id="2889564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889567">ret</span>&nbsp;<span class="op" id="2889571">:=</span>&nbsp;<span class="ident" id="2889574">New</span><span class="op" id="2889577">(</span><span class="ident" id="2889578">t</span><span class="op" id="2889579">)</span><span class="op" id="2889580">.</span><span class="ident" id="2889581">Elem</span><span class="op" id="2889585">(</span><span class="op" id="2889586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889589">ret</span><span class="op" id="2889592">.</span><span class="ident" id="2889593">SetString</span><span class="op" id="2889602">(</span><span class="ident" id="2889603">v</span><span class="op" id="2889604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889607">ret</span><span class="op" id="2889610">.</span><span class="ident" id="2889611">flag</span>&nbsp;<span class="op" id="2889616">=</span>&nbsp;<span class="ident" id="2889618">ret</span><span class="op" id="2889621">.</span><span class="ident" id="2889622">flag</span><span class="op" id="2889626">&amp;^</span><span class="ident" id="2889628">flagAddr</span>&nbsp;<span class="op" id="2889637">|</span>&nbsp;<span class="ident" id="2889639">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889642">return</span>&nbsp;<span class="ident" id="2889649">ret</span><br>
<span class="lineno"></span><span class="op" id="2889653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2889656">func</span>&nbsp;<span class="ident" id="2889661">makeBytes</span><span class="op" id="2889670">(</span><span class="ident" id="2889671">f</span>&nbsp;<span class="ident" id="2889673">flag</span><span class="op" id="2889677">,</span>&nbsp;<span class="ident" id="2889679">v</span>&nbsp;<span class="op" id="2889681">[</span><span class="op" id="2889682">]</span><span class="builtintype" id="2889683">byte</span><span class="op" id="2889687">,</span>&nbsp;<span class="ident" id="2889689">t</span>&nbsp;<span class="ident" id="2889691">Type</span><span class="op" id="2889695">)</span>&nbsp;<span class="ident" id="2889697">Value</span>&nbsp;<span class="op" id="2889703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889706">ret</span>&nbsp;<span class="op" id="2889710">:=</span>&nbsp;<span class="ident" id="2889713">New</span><span class="op" id="2889716">(</span><span class="ident" id="2889717">t</span><span class="op" id="2889718">)</span><span class="op" id="2889719">.</span><span class="ident" id="2889720">Elem</span><span class="op" id="2889724">(</span><span class="op" id="2889725">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889728">ret</span><span class="op" id="2889731">.</span><span class="ident" id="2889732">SetBytes</span><span class="op" id="2889740">(</span><span class="ident" id="2889741">v</span><span class="op" id="2889742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889745">ret</span><span class="op" id="2889748">.</span><span class="ident" id="2889749">flag</span>&nbsp;<span class="op" id="2889754">=</span>&nbsp;<span class="ident" id="2889756">ret</span><span class="op" id="2889759">.</span><span class="ident" id="2889760">flag</span><span class="op" id="2889764">&amp;^</span><span class="ident" id="2889766">flagAddr</span>&nbsp;<span class="op" id="2889775">|</span>&nbsp;<span class="ident" id="2889777">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889780">return</span>&nbsp;<span class="ident" id="2889787">ret</span><br>
<span class="lineno"></span><span class="op" id="2889791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2889794">func</span>&nbsp;<span class="ident" id="2889799">makeRunes</span><span class="op" id="2889808">(</span><span class="ident" id="2889809">f</span>&nbsp;<span class="ident" id="2889811">flag</span><span class="op" id="2889815">,</span>&nbsp;<span class="ident" id="2889817">v</span>&nbsp;<span class="op" id="2889819">[</span><span class="op" id="2889820">]</span><span class="builtintype" id="2889821">rune</span><span class="op" id="2889825">,</span>&nbsp;<span class="ident" id="2889827">t</span>&nbsp;<span class="ident" id="2889829">Type</span><span class="op" id="2889833">)</span>&nbsp;<span class="ident" id="2889835">Value</span>&nbsp;<span class="op" id="2889841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889844">ret</span>&nbsp;<span class="op" id="2889848">:=</span>&nbsp;<span class="ident" id="2889851">New</span><span class="op" id="2889854">(</span><span class="ident" id="2889855">t</span><span class="op" id="2889856">)</span><span class="op" id="2889857">.</span><span class="ident" id="2889858">Elem</span><span class="op" id="2889862">(</span><span class="op" id="2889863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889866">ret</span><span class="op" id="2889869">.</span><span class="ident" id="2889870">setRunes</span><span class="op" id="2889878">(</span><span class="ident" id="2889879">v</span><span class="op" id="2889880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2889883">ret</span><span class="op" id="2889886">.</span><span class="ident" id="2889887">flag</span>&nbsp;<span class="op" id="2889892">=</span>&nbsp;<span class="ident" id="2889894">ret</span><span class="op" id="2889897">.</span><span class="ident" id="2889898">flag</span><span class="op" id="2889902">&amp;^</span><span class="ident" id="2889904">flagAddr</span>&nbsp;<span class="op" id="2889913">|</span>&nbsp;<span class="ident" id="2889915">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2889918">return</span>&nbsp;<span class="ident" id="2889925">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2889929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2889932">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2889988">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2890060">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2890132">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890191">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890223">func</span>&nbsp;<span class="ident" id="2890228">cvtInt</span><span class="op" id="2890234">(</span><span class="ident" id="2890235">v</span>&nbsp;<span class="ident" id="2890237">Value</span><span class="op" id="2890242">,</span>&nbsp;<span class="ident" id="2890244">t</span>&nbsp;<span class="ident" id="2890246">Type</span><span class="op" id="2890250">)</span>&nbsp;<span class="ident" id="2890252">Value</span>&nbsp;<span class="op" id="2890258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890261">return</span>&nbsp;<span class="ident" id="2890268">makeInt</span><span class="op" id="2890275">(</span><span class="ident" id="2890276">v</span><span class="op" id="2890277">.</span><span class="ident" id="2890278">flag</span><span class="op" id="2890282">&amp;</span><span class="ident" id="2890283">flagRO</span><span class="op" id="2890289">,</span>&nbsp;<span class="ident" id="2890291">uint64</span><span class="op" id="2890297">(</span><span class="ident" id="2890298">v</span><span class="op" id="2890299">.</span><span class="ident" id="2890300">Int</span><span class="op" id="2890303">(</span><span class="op" id="2890304">)</span><span class="op" id="2890305">)</span><span class="op" id="2890306">,</span>&nbsp;<span class="ident" id="2890308">t</span><span class="op" id="2890309">)</span><br>
<span class="lineno">2300</span><span class="op" id="2890311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890314">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890347">func</span>&nbsp;<span class="ident" id="2890352">cvtUint</span><span class="op" id="2890359">(</span><span class="ident" id="2890360">v</span>&nbsp;<span class="ident" id="2890362">Value</span><span class="op" id="2890367">,</span>&nbsp;<span class="ident" id="2890369">t</span>&nbsp;<span class="ident" id="2890371">Type</span><span class="op" id="2890375">)</span>&nbsp;<span class="ident" id="2890377">Value</span>&nbsp;<span class="op" id="2890383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890386">return</span>&nbsp;<span class="ident" id="2890393">makeInt</span><span class="op" id="2890400">(</span><span class="ident" id="2890401">v</span><span class="op" id="2890402">.</span><span class="ident" id="2890403">flag</span><span class="op" id="2890407">&amp;</span><span class="ident" id="2890408">flagRO</span><span class="op" id="2890414">,</span>&nbsp;<span class="ident" id="2890416">v</span><span class="op" id="2890417">.</span><span class="ident" id="2890418">Uint</span><span class="op" id="2890422">(</span><span class="op" id="2890423">)</span><span class="op" id="2890424">,</span>&nbsp;<span class="ident" id="2890426">t</span><span class="op" id="2890427">)</span><br>
<span class="lineno">2305</span><span class="op" id="2890429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890432">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890463">func</span>&nbsp;<span class="ident" id="2890468">cvtFloatInt</span><span class="op" id="2890479">(</span><span class="ident" id="2890480">v</span>&nbsp;<span class="ident" id="2890482">Value</span><span class="op" id="2890487">,</span>&nbsp;<span class="ident" id="2890489">t</span>&nbsp;<span class="ident" id="2890491">Type</span><span class="op" id="2890495">)</span>&nbsp;<span class="ident" id="2890497">Value</span>&nbsp;<span class="op" id="2890503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890506">return</span>&nbsp;<span class="ident" id="2890513">makeInt</span><span class="op" id="2890520">(</span><span class="ident" id="2890521">v</span><span class="op" id="2890522">.</span><span class="ident" id="2890523">flag</span><span class="op" id="2890527">&amp;</span><span class="ident" id="2890528">flagRO</span><span class="op" id="2890534">,</span>&nbsp;<span class="ident" id="2890536">uint64</span><span class="op" id="2890542">(</span><span class="ident" id="2890543">int64</span><span class="op" id="2890548">(</span><span class="ident" id="2890549">v</span><span class="op" id="2890550">.</span><span class="ident" id="2890551">Float</span><span class="op" id="2890556">(</span><span class="op" id="2890557">)</span><span class="op" id="2890558">)</span><span class="op" id="2890559">)</span><span class="op" id="2890560">,</span>&nbsp;<span class="ident" id="2890562">t</span><span class="op" id="2890563">)</span><br>
<span class="lineno">2310</span><span class="op" id="2890565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890568">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890600">func</span>&nbsp;<span class="ident" id="2890605">cvtFloatUint</span><span class="op" id="2890617">(</span><span class="ident" id="2890618">v</span>&nbsp;<span class="ident" id="2890620">Value</span><span class="op" id="2890625">,</span>&nbsp;<span class="ident" id="2890627">t</span>&nbsp;<span class="ident" id="2890629">Type</span><span class="op" id="2890633">)</span>&nbsp;<span class="ident" id="2890635">Value</span>&nbsp;<span class="op" id="2890641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890644">return</span>&nbsp;<span class="ident" id="2890651">makeInt</span><span class="op" id="2890658">(</span><span class="ident" id="2890659">v</span><span class="op" id="2890660">.</span><span class="ident" id="2890661">flag</span><span class="op" id="2890665">&amp;</span><span class="ident" id="2890666">flagRO</span><span class="op" id="2890672">,</span>&nbsp;<span class="ident" id="2890674">uint64</span><span class="op" id="2890680">(</span><span class="ident" id="2890681">v</span><span class="op" id="2890682">.</span><span class="ident" id="2890683">Float</span><span class="op" id="2890688">(</span><span class="op" id="2890689">)</span><span class="op" id="2890690">)</span><span class="op" id="2890691">,</span>&nbsp;<span class="ident" id="2890693">t</span><span class="op" id="2890694">)</span><br>
<span class="lineno">2315</span><span class="op" id="2890696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890699">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890730">func</span>&nbsp;<span class="ident" id="2890735">cvtIntFloat</span><span class="op" id="2890746">(</span><span class="ident" id="2890747">v</span>&nbsp;<span class="ident" id="2890749">Value</span><span class="op" id="2890754">,</span>&nbsp;<span class="ident" id="2890756">t</span>&nbsp;<span class="ident" id="2890758">Type</span><span class="op" id="2890762">)</span>&nbsp;<span class="ident" id="2890764">Value</span>&nbsp;<span class="op" id="2890770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890773">return</span>&nbsp;<span class="ident" id="2890780">makeFloat</span><span class="op" id="2890789">(</span><span class="ident" id="2890790">v</span><span class="op" id="2890791">.</span><span class="ident" id="2890792">flag</span><span class="op" id="2890796">&amp;</span><span class="ident" id="2890797">flagRO</span><span class="op" id="2890803">,</span>&nbsp;<span class="builtintype" id="2890805">float64</span><span class="op" id="2890812">(</span><span class="ident" id="2890813">v</span><span class="op" id="2890814">.</span><span class="ident" id="2890815">Int</span><span class="op" id="2890818">(</span><span class="op" id="2890819">)</span><span class="op" id="2890820">)</span><span class="op" id="2890821">,</span>&nbsp;<span class="ident" id="2890823">t</span><span class="op" id="2890824">)</span><br>
<span class="lineno">2320</span><span class="op" id="2890826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890829">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890861">func</span>&nbsp;<span class="ident" id="2890866">cvtUintFloat</span><span class="op" id="2890878">(</span><span class="ident" id="2890879">v</span>&nbsp;<span class="ident" id="2890881">Value</span><span class="op" id="2890886">,</span>&nbsp;<span class="ident" id="2890888">t</span>&nbsp;<span class="ident" id="2890890">Type</span><span class="op" id="2890894">)</span>&nbsp;<span class="ident" id="2890896">Value</span>&nbsp;<span class="op" id="2890902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2890905">return</span>&nbsp;<span class="ident" id="2890912">makeFloat</span><span class="op" id="2890921">(</span><span class="ident" id="2890922">v</span><span class="op" id="2890923">.</span><span class="ident" id="2890924">flag</span><span class="op" id="2890928">&amp;</span><span class="ident" id="2890929">flagRO</span><span class="op" id="2890935">,</span>&nbsp;<span class="builtintype" id="2890937">float64</span><span class="op" id="2890944">(</span><span class="ident" id="2890945">v</span><span class="op" id="2890946">.</span><span class="ident" id="2890947">Uint</span><span class="op" id="2890951">(</span><span class="op" id="2890952">)</span><span class="op" id="2890953">)</span><span class="op" id="2890954">,</span>&nbsp;<span class="ident" id="2890956">t</span><span class="op" id="2890957">)</span><br>
<span class="lineno">2325</span><span class="op" id="2890959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2890962">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2890995">func</span>&nbsp;<span class="ident" id="2891000">cvtFloat</span><span class="op" id="2891008">(</span><span class="ident" id="2891009">v</span>&nbsp;<span class="ident" id="2891011">Value</span><span class="op" id="2891016">,</span>&nbsp;<span class="ident" id="2891018">t</span>&nbsp;<span class="ident" id="2891020">Type</span><span class="op" id="2891024">)</span>&nbsp;<span class="ident" id="2891026">Value</span>&nbsp;<span class="op" id="2891032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891035">return</span>&nbsp;<span class="ident" id="2891042">makeFloat</span><span class="op" id="2891051">(</span><span class="ident" id="2891052">v</span><span class="op" id="2891053">.</span><span class="ident" id="2891054">flag</span><span class="op" id="2891058">&amp;</span><span class="ident" id="2891059">flagRO</span><span class="op" id="2891065">,</span>&nbsp;<span class="ident" id="2891067">v</span><span class="op" id="2891068">.</span><span class="ident" id="2891069">Float</span><span class="op" id="2891074">(</span><span class="op" id="2891075">)</span><span class="op" id="2891076">,</span>&nbsp;<span class="ident" id="2891078">t</span><span class="op" id="2891079">)</span><br>
<span class="lineno">2330</span><span class="op" id="2891081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891084">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2891121">func</span>&nbsp;<span class="ident" id="2891126">cvtComplex</span><span class="op" id="2891136">(</span><span class="ident" id="2891137">v</span>&nbsp;<span class="ident" id="2891139">Value</span><span class="op" id="2891144">,</span>&nbsp;<span class="ident" id="2891146">t</span>&nbsp;<span class="ident" id="2891148">Type</span><span class="op" id="2891152">)</span>&nbsp;<span class="ident" id="2891154">Value</span>&nbsp;<span class="op" id="2891160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891163">return</span>&nbsp;<span class="ident" id="2891170">makeComplex</span><span class="op" id="2891181">(</span><span class="ident" id="2891182">v</span><span class="op" id="2891183">.</span><span class="ident" id="2891184">flag</span><span class="op" id="2891188">&amp;</span><span class="ident" id="2891189">flagRO</span><span class="op" id="2891195">,</span>&nbsp;<span class="ident" id="2891197">v</span><span class="op" id="2891198">.</span><span class="ident" id="2891199">Complex</span><span class="op" id="2891206">(</span><span class="op" id="2891207">)</span><span class="op" id="2891208">,</span>&nbsp;<span class="ident" id="2891210">t</span><span class="op" id="2891211">)</span><br>
<span class="lineno">2335</span><span class="op" id="2891213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891216">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2891246">func</span>&nbsp;<span class="ident" id="2891251">cvtIntString</span><span class="op" id="2891263">(</span><span class="ident" id="2891264">v</span>&nbsp;<span class="ident" id="2891266">Value</span><span class="op" id="2891271">,</span>&nbsp;<span class="ident" id="2891273">t</span>&nbsp;<span class="ident" id="2891275">Type</span><span class="op" id="2891279">)</span>&nbsp;<span class="ident" id="2891281">Value</span>&nbsp;<span class="op" id="2891287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891290">return</span>&nbsp;<span class="ident" id="2891297">makeString</span><span class="op" id="2891307">(</span><span class="ident" id="2891308">v</span><span class="op" id="2891309">.</span><span class="ident" id="2891310">flag</span><span class="op" id="2891314">&amp;</span><span class="ident" id="2891315">flagRO</span><span class="op" id="2891321">,</span>&nbsp;<span class="builtintype" id="2891323">string</span><span class="op" id="2891329">(</span><span class="ident" id="2891330">v</span><span class="op" id="2891331">.</span><span class="ident" id="2891332">Int</span><span class="op" id="2891335">(</span><span class="op" id="2891336">)</span><span class="op" id="2891337">)</span><span class="op" id="2891338">,</span>&nbsp;<span class="ident" id="2891340">t</span><span class="op" id="2891341">)</span><br>
<span class="lineno">2340</span><span class="op" id="2891343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891346">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2891377">func</span>&nbsp;<span class="ident" id="2891382">cvtUintString</span><span class="op" id="2891395">(</span><span class="ident" id="2891396">v</span>&nbsp;<span class="ident" id="2891398">Value</span><span class="op" id="2891403">,</span>&nbsp;<span class="ident" id="2891405">t</span>&nbsp;<span class="ident" id="2891407">Type</span><span class="op" id="2891411">)</span>&nbsp;<span class="ident" id="2891413">Value</span>&nbsp;<span class="op" id="2891419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891422">return</span>&nbsp;<span class="ident" id="2891429">makeString</span><span class="op" id="2891439">(</span><span class="ident" id="2891440">v</span><span class="op" id="2891441">.</span><span class="ident" id="2891442">flag</span><span class="op" id="2891446">&amp;</span><span class="ident" id="2891447">flagRO</span><span class="op" id="2891453">,</span>&nbsp;<span class="builtintype" id="2891455">string</span><span class="op" id="2891461">(</span><span class="ident" id="2891462">v</span><span class="op" id="2891463">.</span><span class="ident" id="2891464">Uint</span><span class="op" id="2891468">(</span><span class="op" id="2891469">)</span><span class="op" id="2891470">)</span><span class="op" id="2891471">,</span>&nbsp;<span class="ident" id="2891473">t</span><span class="op" id="2891474">)</span><br>
<span class="lineno">2345</span><span class="op" id="2891476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891479">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2891510">func</span>&nbsp;<span class="ident" id="2891515">cvtBytesString</span><span class="op" id="2891529">(</span><span class="ident" id="2891530">v</span>&nbsp;<span class="ident" id="2891532">Value</span><span class="op" id="2891537">,</span>&nbsp;<span class="ident" id="2891539">t</span>&nbsp;<span class="ident" id="2891541">Type</span><span class="op" id="2891545">)</span>&nbsp;<span class="ident" id="2891547">Value</span>&nbsp;<span class="op" id="2891553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891556">return</span>&nbsp;<span class="ident" id="2891563">makeString</span><span class="op" id="2891573">(</span><span class="ident" id="2891574">v</span><span class="op" id="2891575">.</span><span class="ident" id="2891576">flag</span><span class="op" id="2891580">&amp;</span><span class="ident" id="2891581">flagRO</span><span class="op" id="2891587">,</span>&nbsp;<span class="builtintype" id="2891589">string</span><span class="op" id="2891595">(</span><span class="ident" id="2891596">v</span><span class="op" id="2891597">.</span><span class="ident" id="2891598">Bytes</span><span class="op" id="2891603">(</span><span class="op" id="2891604">)</span><span class="op" id="2891605">)</span><span class="op" id="2891606">,</span>&nbsp;<span class="ident" id="2891608">t</span><span class="op" id="2891609">)</span><br>
<span class="lineno">2350</span><span class="op" id="2891611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891614">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2891645">func</span>&nbsp;<span class="ident" id="2891650">cvtStringBytes</span><span class="op" id="2891664">(</span><span class="ident" id="2891665">v</span>&nbsp;<span class="ident" id="2891667">Value</span><span class="op" id="2891672">,</span>&nbsp;<span class="ident" id="2891674">t</span>&nbsp;<span class="ident" id="2891676">Type</span><span class="op" id="2891680">)</span>&nbsp;<span class="ident" id="2891682">Value</span>&nbsp;<span class="op" id="2891688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891691">return</span>&nbsp;<span class="ident" id="2891698">makeBytes</span><span class="op" id="2891707">(</span><span class="ident" id="2891708">v</span><span class="op" id="2891709">.</span><span class="ident" id="2891710">flag</span><span class="op" id="2891714">&amp;</span><span class="ident" id="2891715">flagRO</span><span class="op" id="2891721">,</span>&nbsp;<span class="op" id="2891723">[</span><span class="op" id="2891724">]</span><span class="builtintype" id="2891725">byte</span><span class="op" id="2891729">(</span><span class="ident" id="2891730">v</span><span class="op" id="2891731">.</span><span class="ident" id="2891732">String</span><span class="op" id="2891738">(</span><span class="op" id="2891739">)</span><span class="op" id="2891740">)</span><span class="op" id="2891741">,</span>&nbsp;<span class="ident" id="2891743">t</span><span class="op" id="2891744">)</span><br>
<span class="lineno">2355</span><span class="op" id="2891746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891749">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2891780">func</span>&nbsp;<span class="ident" id="2891785">cvtRunesString</span><span class="op" id="2891799">(</span><span class="ident" id="2891800">v</span>&nbsp;<span class="ident" id="2891802">Value</span><span class="op" id="2891807">,</span>&nbsp;<span class="ident" id="2891809">t</span>&nbsp;<span class="ident" id="2891811">Type</span><span class="op" id="2891815">)</span>&nbsp;<span class="ident" id="2891817">Value</span>&nbsp;<span class="op" id="2891823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891826">return</span>&nbsp;<span class="ident" id="2891833">makeString</span><span class="op" id="2891843">(</span><span class="ident" id="2891844">v</span><span class="op" id="2891845">.</span><span class="ident" id="2891846">flag</span><span class="op" id="2891850">&amp;</span><span class="ident" id="2891851">flagRO</span><span class="op" id="2891857">,</span>&nbsp;<span class="builtintype" id="2891859">string</span><span class="op" id="2891865">(</span><span class="ident" id="2891866">v</span><span class="op" id="2891867">.</span><span class="ident" id="2891868">runes</span><span class="op" id="2891873">(</span><span class="op" id="2891874">)</span><span class="op" id="2891875">)</span><span class="op" id="2891876">,</span>&nbsp;<span class="ident" id="2891878">t</span><span class="op" id="2891879">)</span><br>
<span class="lineno">2360</span><span class="op" id="2891881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2891884">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2891915">func</span>&nbsp;<span class="ident" id="2891920">cvtStringRunes</span><span class="op" id="2891934">(</span><span class="ident" id="2891935">v</span>&nbsp;<span class="ident" id="2891937">Value</span><span class="op" id="2891942">,</span>&nbsp;<span class="ident" id="2891944">t</span>&nbsp;<span class="ident" id="2891946">Type</span><span class="op" id="2891950">)</span>&nbsp;<span class="ident" id="2891952">Value</span>&nbsp;<span class="op" id="2891958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2891961">return</span>&nbsp;<span class="ident" id="2891968">makeRunes</span><span class="op" id="2891977">(</span><span class="ident" id="2891978">v</span><span class="op" id="2891979">.</span><span class="ident" id="2891980">flag</span><span class="op" id="2891984">&amp;</span><span class="ident" id="2891985">flagRO</span><span class="op" id="2891991">,</span>&nbsp;<span class="op" id="2891993">[</span><span class="op" id="2891994">]</span><span class="builtintype" id="2891995">rune</span><span class="op" id="2891999">(</span><span class="ident" id="2892000">v</span><span class="op" id="2892001">.</span><span class="ident" id="2892002">String</span><span class="op" id="2892008">(</span><span class="op" id="2892009">)</span><span class="op" id="2892010">)</span><span class="op" id="2892011">,</span>&nbsp;<span class="ident" id="2892013">t</span><span class="op" id="2892014">)</span><br>
<span class="lineno">2365</span><span class="op" id="2892016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2892019">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2892045">func</span>&nbsp;<span class="ident" id="2892050">cvtDirect</span><span class="op" id="2892059">(</span><span class="ident" id="2892060">v</span>&nbsp;<span class="ident" id="2892062">Value</span><span class="op" id="2892067">,</span>&nbsp;<span class="ident" id="2892069">typ</span>&nbsp;<span class="ident" id="2892073">Type</span><span class="op" id="2892077">)</span>&nbsp;<span class="ident" id="2892079">Value</span>&nbsp;<span class="op" id="2892085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892088">f</span>&nbsp;<span class="op" id="2892090">:=</span>&nbsp;<span class="ident" id="2892093">v</span><span class="op" id="2892094">.</span><span class="ident" id="2892095">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892101">t</span>&nbsp;<span class="op" id="2892103">:=</span>&nbsp;<span class="ident" id="2892106">typ</span><span class="op" id="2892109">.</span><span class="ident" id="2892110">common</span><span class="op" id="2892116">(</span><span class="op" id="2892117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892120">ptr</span>&nbsp;<span class="op" id="2892124">:=</span>&nbsp;<span class="ident" id="2892127">v</span><span class="op" id="2892128">.</span><span class="ident" id="2892129">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892134">if</span>&nbsp;<span class="ident" id="2892137">f</span><span class="op" id="2892138">&amp;</span><span class="ident" id="2892139">flagAddr</span>&nbsp;<span class="op" id="2892148">!=</span>&nbsp;<span class="num" id="2892151">0</span>&nbsp;<span class="op" id="2892153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2892157">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892199">c</span>&nbsp;<span class="op" id="2892201">:=</span>&nbsp;<span class="ident" id="2892204">unsafe_New</span><span class="op" id="2892214">(</span><span class="ident" id="2892215">t</span><span class="op" id="2892216">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892220">memmove</span><span class="op" id="2892227">(</span><span class="ident" id="2892228">c</span><span class="op" id="2892229">,</span>&nbsp;<span class="ident" id="2892231">ptr</span><span class="op" id="2892234">,</span>&nbsp;<span class="ident" id="2892236">t</span><span class="op" id="2892237">.</span><span class="ident" id="2892238">size</span><span class="op" id="2892242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892246">ptr</span>&nbsp;<span class="op" id="2892250">=</span>&nbsp;<span class="ident" id="2892252">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892256">f</span>&nbsp;<span class="op" id="2892258">&amp;^=</span>&nbsp;<span class="ident" id="2892262">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892275">return</span>&nbsp;<span class="ident" id="2892282">Value</span><span class="op" id="2892287">{</span><span class="ident" id="2892288">t</span><span class="op" id="2892289">,</span>&nbsp;<span class="ident" id="2892291">ptr</span><span class="op" id="2892294">,</span>&nbsp;<span class="ident" id="2892296">v</span><span class="op" id="2892297">.</span><span class="ident" id="2892298">flag</span><span class="op" id="2892302">&amp;</span><span class="ident" id="2892303">flagRO</span>&nbsp;<span class="op" id="2892310">|</span>&nbsp;<span class="ident" id="2892312">f</span><span class="op" id="2892313">}</span>&nbsp;<span class="comment" id="2892315">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2892340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2892343">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2892379">func</span>&nbsp;<span class="ident" id="2892384">cvtT2I</span><span class="op" id="2892390">(</span><span class="ident" id="2892391">v</span>&nbsp;<span class="ident" id="2892393">Value</span><span class="op" id="2892398">,</span>&nbsp;<span class="ident" id="2892400">typ</span>&nbsp;<span class="ident" id="2892404">Type</span><span class="op" id="2892408">)</span>&nbsp;<span class="ident" id="2892410">Value</span>&nbsp;<span class="op" id="2892416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892419">target</span>&nbsp;<span class="op" id="2892426">:=</span>&nbsp;<span class="ident" id="2892429">unsafe_New</span><span class="op" id="2892439">(</span><span class="ident" id="2892440">typ</span><span class="op" id="2892443">.</span><span class="ident" id="2892444">common</span><span class="op" id="2892450">(</span><span class="op" id="2892451">)</span><span class="op" id="2892452">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892455">x</span>&nbsp;<span class="op" id="2892457">:=</span>&nbsp;<span class="ident" id="2892460">valueInterface</span><span class="op" id="2892474">(</span><span class="ident" id="2892475">v</span><span class="op" id="2892476">,</span>&nbsp;<span class="builtintype" id="2892478">false</span><span class="op" id="2892483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892486">if</span>&nbsp;<span class="ident" id="2892489">typ</span><span class="op" id="2892492">.</span><span class="ident" id="2892493">NumMethod</span><span class="op" id="2892502">(</span><span class="op" id="2892503">)</span>&nbsp;<span class="op" id="2892505">==</span>&nbsp;<span class="num" id="2892508">0</span>&nbsp;<span class="op" id="2892510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892514">*</span><span class="op" id="2892515">(</span><span class="op" id="2892516">*</span><span class="keyword" id="2892517">interface</span><span class="op" id="2892526">{</span><span class="op" id="2892527">}</span><span class="op" id="2892528">)</span><span class="op" id="2892529">(</span><span class="ident" id="2892530">target</span><span class="op" id="2892536">)</span>&nbsp;<span class="op" id="2892538">=</span>&nbsp;<span class="ident" id="2892540">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892543">}</span>&nbsp;<span class="keyword" id="2892545">else</span>&nbsp;<span class="op" id="2892550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892554">ifaceE2I</span><span class="op" id="2892562">(</span><span class="ident" id="2892563">typ</span><span class="op" id="2892566">.</span><span class="op" id="2892567">(</span><span class="op" id="2892568">*</span><span class="ident" id="2892569">rtype</span><span class="op" id="2892574">)</span><span class="op" id="2892575">,</span>&nbsp;<span class="ident" id="2892577">x</span><span class="op" id="2892578">,</span>&nbsp;<span class="ident" id="2892580">target</span><span class="op" id="2892586">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892592">return</span>&nbsp;<span class="ident" id="2892599">Value</span><span class="op" id="2892604">{</span><span class="ident" id="2892605">typ</span><span class="op" id="2892608">.</span><span class="ident" id="2892609">common</span><span class="op" id="2892615">(</span><span class="op" id="2892616">)</span><span class="op" id="2892617">,</span>&nbsp;<span class="ident" id="2892619">target</span><span class="op" id="2892625">,</span>&nbsp;<span class="ident" id="2892627">v</span><span class="op" id="2892628">.</span><span class="ident" id="2892629">flag</span><span class="op" id="2892633">&amp;</span><span class="ident" id="2892634">flagRO</span>&nbsp;<span class="op" id="2892641">|</span>&nbsp;<span class="ident" id="2892643">flagIndir</span>&nbsp;<span class="op" id="2892653">|</span>&nbsp;<span class="ident" id="2892655">flag</span><span class="op" id="2892659">(</span><span class="ident" id="2892660">Interface</span><span class="op" id="2892669">)</span><span class="op" id="2892670">}</span><br>
<span class="lineno"></span><span class="op" id="2892672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2892675">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2892712">func</span>&nbsp;<span class="ident" id="2892717">cvtI2I</span><span class="op" id="2892723">(</span><span class="ident" id="2892724">v</span>&nbsp;<span class="ident" id="2892726">Value</span><span class="op" id="2892731">,</span>&nbsp;<span class="ident" id="2892733">typ</span>&nbsp;<span class="ident" id="2892737">Type</span><span class="op" id="2892741">)</span>&nbsp;<span class="ident" id="2892743">Value</span>&nbsp;<span class="op" id="2892749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892752">if</span>&nbsp;<span class="ident" id="2892755">v</span><span class="op" id="2892756">.</span><span class="ident" id="2892757">IsNil</span><span class="op" id="2892762">(</span><span class="op" id="2892763">)</span>&nbsp;<span class="op" id="2892765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892769">ret</span>&nbsp;<span class="op" id="2892773">:=</span>&nbsp;<span class="ident" id="2892776">Zero</span><span class="op" id="2892780">(</span><span class="ident" id="2892781">typ</span><span class="op" id="2892784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2892788">ret</span><span class="op" id="2892791">.</span><span class="ident" id="2892792">flag</span>&nbsp;<span class="op" id="2892797">|=</span>&nbsp;<span class="ident" id="2892800">v</span><span class="op" id="2892801">.</span><span class="ident" id="2892802">flag</span>&nbsp;<span class="op" id="2892807">&amp;</span>&nbsp;<span class="ident" id="2892809">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892818">return</span>&nbsp;<span class="ident" id="2892825">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2892830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2892833">return</span>&nbsp;<span class="ident" id="2892840">cvtT2I</span><span class="op" id="2892846">(</span><span class="ident" id="2892847">v</span><span class="op" id="2892848">.</span><span class="ident" id="2892849">Elem</span><span class="op" id="2892853">(</span><span class="op" id="2892854">)</span><span class="op" id="2892855">,</span>&nbsp;<span class="ident" id="2892857">typ</span><span class="op" id="2892860">)</span><br>
<span class="lineno"></span><span class="op" id="2892862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2892865">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2892894">func</span>&nbsp;<span class="ident" id="2892899">chancap</span><span class="op" id="2892906">(</span><span class="ident" id="2892907">ch</span>&nbsp;<span class="ident" id="2892910">unsafe</span><span class="op" id="2892916">.</span><span class="ident" id="2892917">Pointer</span><span class="op" id="2892924">)</span>&nbsp;<span class="builtintype" id="2892926">int</span><br>
<span class="lineno"></span><span class="keyword" id="2892930">func</span>&nbsp;<span class="ident" id="2892935">chanclose</span><span class="op" id="2892944">(</span><span class="ident" id="2892945">ch</span>&nbsp;<span class="ident" id="2892948">unsafe</span><span class="op" id="2892954">.</span><span class="ident" id="2892955">Pointer</span><span class="op" id="2892962">)</span><br>
<span class="lineno"></span><span class="keyword" id="2892964">func</span>&nbsp;<span class="ident" id="2892969">chanlen</span><span class="op" id="2892976">(</span><span class="ident" id="2892977">ch</span>&nbsp;<span class="ident" id="2892980">unsafe</span><span class="op" id="2892986">.</span><span class="ident" id="2892987">Pointer</span><span class="op" id="2892994">)</span>&nbsp;<span class="builtintype" id="2892996">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893001">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2893015">func</span>&nbsp;<span class="ident" id="2893020">chanrecv</span><span class="op" id="2893028">(</span><span class="ident" id="2893029">t</span>&nbsp;<span class="op" id="2893031">*</span><span class="ident" id="2893032">rtype</span><span class="op" id="2893037">,</span>&nbsp;<span class="ident" id="2893039">ch</span>&nbsp;<span class="ident" id="2893042">unsafe</span><span class="op" id="2893048">.</span><span class="ident" id="2893049">Pointer</span><span class="op" id="2893056">,</span>&nbsp;<span class="ident" id="2893058">nb</span>&nbsp;<span class="builtintype" id="2893061">bool</span><span class="op" id="2893065">,</span>&nbsp;<span class="ident" id="2893067">val</span>&nbsp;<span class="ident" id="2893071">unsafe</span><span class="op" id="2893077">.</span><span class="ident" id="2893078">Pointer</span><span class="op" id="2893085">)</span>&nbsp;<span class="op" id="2893087">(</span><span class="ident" id="2893088">selected</span><span class="op" id="2893096">,</span>&nbsp;<span class="ident" id="2893098">received</span>&nbsp;<span class="builtintype" id="2893107">bool</span><span class="op" id="2893111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893114">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2893128">func</span>&nbsp;<span class="ident" id="2893133">chansend</span><span class="op" id="2893141">(</span><span class="ident" id="2893142">t</span>&nbsp;<span class="op" id="2893144">*</span><span class="ident" id="2893145">rtype</span><span class="op" id="2893150">,</span>&nbsp;<span class="ident" id="2893152">ch</span>&nbsp;<span class="ident" id="2893155">unsafe</span><span class="op" id="2893161">.</span><span class="ident" id="2893162">Pointer</span><span class="op" id="2893169">,</span>&nbsp;<span class="ident" id="2893171">val</span>&nbsp;<span class="ident" id="2893175">unsafe</span><span class="op" id="2893181">.</span><span class="ident" id="2893182">Pointer</span><span class="op" id="2893189">,</span>&nbsp;<span class="ident" id="2893191">nb</span>&nbsp;<span class="builtintype" id="2893194">bool</span><span class="op" id="2893198">)</span>&nbsp;<span class="builtintype" id="2893200">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2893206">func</span>&nbsp;<span class="ident" id="2893211">makechan</span><span class="op" id="2893219">(</span><span class="ident" id="2893220">typ</span>&nbsp;<span class="op" id="2893224">*</span><span class="ident" id="2893225">rtype</span><span class="op" id="2893230">,</span>&nbsp;<span class="ident" id="2893232">size</span>&nbsp;<span class="ident" id="2893237">uint64</span><span class="op" id="2893243">)</span>&nbsp;<span class="op" id="2893245">(</span><span class="ident" id="2893246">ch</span>&nbsp;<span class="ident" id="2893249">unsafe</span><span class="op" id="2893255">.</span><span class="ident" id="2893256">Pointer</span><span class="op" id="2893263">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893265">func</span>&nbsp;<span class="ident" id="2893270">makemap</span><span class="op" id="2893277">(</span><span class="ident" id="2893278">t</span>&nbsp;<span class="op" id="2893280">*</span><span class="ident" id="2893281">rtype</span><span class="op" id="2893286">)</span>&nbsp;<span class="op" id="2893288">(</span><span class="ident" id="2893289">m</span>&nbsp;<span class="ident" id="2893291">unsafe</span><span class="op" id="2893297">.</span><span class="ident" id="2893298">Pointer</span><span class="op" id="2893305">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893307">func</span>&nbsp;<span class="ident" id="2893312">mapaccess</span><span class="op" id="2893321">(</span><span class="ident" id="2893322">t</span>&nbsp;<span class="op" id="2893324">*</span><span class="ident" id="2893325">rtype</span><span class="op" id="2893330">,</span>&nbsp;<span class="ident" id="2893332">m</span>&nbsp;<span class="ident" id="2893334">unsafe</span><span class="op" id="2893340">.</span><span class="ident" id="2893341">Pointer</span><span class="op" id="2893348">,</span>&nbsp;<span class="ident" id="2893350">key</span>&nbsp;<span class="ident" id="2893354">unsafe</span><span class="op" id="2893360">.</span><span class="ident" id="2893361">Pointer</span><span class="op" id="2893368">)</span>&nbsp;<span class="op" id="2893370">(</span><span class="ident" id="2893371">val</span>&nbsp;<span class="ident" id="2893375">unsafe</span><span class="op" id="2893381">.</span><span class="ident" id="2893382">Pointer</span><span class="op" id="2893389">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893391">func</span>&nbsp;<span class="ident" id="2893396">mapassign</span><span class="op" id="2893405">(</span><span class="ident" id="2893406">t</span>&nbsp;<span class="op" id="2893408">*</span><span class="ident" id="2893409">rtype</span><span class="op" id="2893414">,</span>&nbsp;<span class="ident" id="2893416">m</span>&nbsp;<span class="ident" id="2893418">unsafe</span><span class="op" id="2893424">.</span><span class="ident" id="2893425">Pointer</span><span class="op" id="2893432">,</span>&nbsp;<span class="ident" id="2893434">key</span><span class="op" id="2893437">,</span>&nbsp;<span class="ident" id="2893439">val</span>&nbsp;<span class="ident" id="2893443">unsafe</span><span class="op" id="2893449">.</span><span class="ident" id="2893450">Pointer</span><span class="op" id="2893457">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893459">func</span>&nbsp;<span class="ident" id="2893464">mapdelete</span><span class="op" id="2893473">(</span><span class="ident" id="2893474">t</span>&nbsp;<span class="op" id="2893476">*</span><span class="ident" id="2893477">rtype</span><span class="op" id="2893482">,</span>&nbsp;<span class="ident" id="2893484">m</span>&nbsp;<span class="ident" id="2893486">unsafe</span><span class="op" id="2893492">.</span><span class="ident" id="2893493">Pointer</span><span class="op" id="2893500">,</span>&nbsp;<span class="ident" id="2893502">key</span>&nbsp;<span class="ident" id="2893506">unsafe</span><span class="op" id="2893512">.</span><span class="ident" id="2893513">Pointer</span><span class="op" id="2893520">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2893522">func</span>&nbsp;<span class="ident" id="2893527">mapiterinit</span><span class="op" id="2893538">(</span><span class="ident" id="2893539">t</span>&nbsp;<span class="op" id="2893541">*</span><span class="ident" id="2893542">rtype</span><span class="op" id="2893547">,</span>&nbsp;<span class="ident" id="2893549">m</span>&nbsp;<span class="ident" id="2893551">unsafe</span><span class="op" id="2893557">.</span><span class="ident" id="2893558">Pointer</span><span class="op" id="2893565">)</span>&nbsp;<span class="ident" id="2893567">unsafe</span><span class="op" id="2893573">.</span><span class="ident" id="2893574">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2893582">func</span>&nbsp;<span class="ident" id="2893587">mapiterkey</span><span class="op" id="2893597">(</span><span class="ident" id="2893598">it</span>&nbsp;<span class="ident" id="2893601">unsafe</span><span class="op" id="2893607">.</span><span class="ident" id="2893608">Pointer</span><span class="op" id="2893615">)</span>&nbsp;<span class="op" id="2893617">(</span><span class="ident" id="2893618">key</span>&nbsp;<span class="ident" id="2893622">unsafe</span><span class="op" id="2893628">.</span><span class="ident" id="2893629">Pointer</span><span class="op" id="2893636">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893638">func</span>&nbsp;<span class="ident" id="2893643">mapiternext</span><span class="op" id="2893654">(</span><span class="ident" id="2893655">it</span>&nbsp;<span class="ident" id="2893658">unsafe</span><span class="op" id="2893664">.</span><span class="ident" id="2893665">Pointer</span><span class="op" id="2893672">)</span><br>
<span class="lineno"></span><span class="keyword" id="2893674">func</span>&nbsp;<span class="ident" id="2893679">maplen</span><span class="op" id="2893685">(</span><span class="ident" id="2893686">m</span>&nbsp;<span class="ident" id="2893688">unsafe</span><span class="op" id="2893694">.</span><span class="ident" id="2893695">Pointer</span><span class="op" id="2893702">)</span>&nbsp;<span class="builtintype" id="2893704">int</span><br>
<span class="lineno"></span><span class="keyword" id="2893708">func</span>&nbsp;<span class="ident" id="2893713">call</span><span class="op" id="2893717">(</span><span class="ident" id="2893718">fn</span><span class="op" id="2893720">,</span>&nbsp;<span class="ident" id="2893722">arg</span>&nbsp;<span class="ident" id="2893726">unsafe</span><span class="op" id="2893732">.</span><span class="ident" id="2893733">Pointer</span><span class="op" id="2893740">,</span>&nbsp;<span class="ident" id="2893742">n</span>&nbsp;<span class="builtintype" id="2893744">uint32</span><span class="op" id="2893750">,</span>&nbsp;<span class="ident" id="2893752">retoffset</span>&nbsp;<span class="builtintype" id="2893762">uint32</span><span class="op" id="2893768">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2893771">func</span>&nbsp;<span class="ident" id="2893776">ifaceE2I</span><span class="op" id="2893784">(</span><span class="ident" id="2893785">t</span>&nbsp;<span class="op" id="2893787">*</span><span class="ident" id="2893788">rtype</span><span class="op" id="2893793">,</span>&nbsp;<span class="ident" id="2893795">src</span>&nbsp;<span class="keyword" id="2893799">interface</span><span class="op" id="2893808">{</span><span class="op" id="2893809">}</span><span class="op" id="2893810">,</span>&nbsp;<span class="ident" id="2893812">dst</span>&nbsp;<span class="ident" id="2893816">unsafe</span><span class="op" id="2893822">.</span><span class="ident" id="2893823">Pointer</span><span class="op" id="2893830">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2893833">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2893847">func</span>&nbsp;<span class="ident" id="2893852">memmove</span><span class="op" id="2893859">(</span><span class="ident" id="2893860">adst</span><span class="op" id="2893864">,</span>&nbsp;<span class="ident" id="2893866">asrc</span>&nbsp;<span class="ident" id="2893871">unsafe</span><span class="op" id="2893877">.</span><span class="ident" id="2893878">Pointer</span><span class="op" id="2893885">,</span>&nbsp;<span class="ident" id="2893887">n</span>&nbsp;<span class="builtintype" id="2893889">uintptr</span><span class="op" id="2893896">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2893899">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2893953">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2894014">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2894045">func</span>&nbsp;<span class="ident" id="2894050">escapes</span><span class="op" id="2894057">(</span><span class="ident" id="2894058">x</span>&nbsp;<span class="keyword" id="2894060">interface</span><span class="op" id="2894069">{</span><span class="op" id="2894070">}</span><span class="op" id="2894071">)</span>&nbsp;<span class="op" id="2894073">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2894076">if</span>&nbsp;<span class="ident" id="2894079">dummy</span><span class="op" id="2894084">.</span><span class="ident" id="2894085">b</span>&nbsp;<span class="op" id="2894087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2894091">dummy</span><span class="op" id="2894096">.</span><span class="ident" id="2894097">x</span>&nbsp;<span class="op" id="2894099">=</span>&nbsp;<span class="ident" id="2894101">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2894104">}</span><br>
<span class="lineno"></span><span class="op" id="2894106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2894109">var</span>&nbsp;<span class="ident" id="2894113">dummy</span>&nbsp;<span class="keyword" id="2894119">struct</span>&nbsp;<span class="op" id="2894126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2894129">b</span>&nbsp;<span class="builtintype" id="2894131">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2894137">x</span>&nbsp;<span class="keyword" id="2894139">interface</span><span class="op" id="2894148">{</span><span class="op" id="2894149">}</span><br>
<span class="lineno"></span><span class="op" id="2894151">}</span>
</div>
</body>
</html>
