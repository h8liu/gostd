<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3267660">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3267715">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3267769">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3267820">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3267885">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3267934">package</span>&nbsp;<span class="ident" id="3267942">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3267947">import</span>&nbsp;<span class="string" id="3267954">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3267962">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3268032">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3268105">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3268132">var</span>&nbsp;<span class="ident" id="3268136">services</span>&nbsp;<span class="op" id="3268145">=</span>&nbsp;<span class="keyword" id="3268147">map</span><span class="op" id="3268150">[</span><span class="builtintype" id="3268151">string</span><span class="op" id="3268157">]</span><span class="keyword" id="3268158">map</span><span class="op" id="3268161">[</span><span class="builtintype" id="3268162">string</span><span class="op" id="3268168">]</span><span class="builtintype" id="3268169">int</span><span class="op" id="3268172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3268175">&#34;tcp&#34;</span><span class="op" id="3268180">:</span>&nbsp;<span class="op" id="3268182">{</span><span class="string" id="3268183">&#34;http&#34;</span><span class="op" id="3268189">:</span>&nbsp;<span class="num" id="3268191">80</span><span class="op" id="3268193">}</span><span class="op" id="3268194">,</span><br>
<span class="lineno"></span><span class="op" id="3268196">}</span><br>
<span class="lineno"></span><span class="keyword" id="3268198">var</span>&nbsp;<span class="ident" id="3268202">servicesError</span>&nbsp;<span class="builtintype" id="3268216">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3268222">var</span>&nbsp;<span class="ident" id="3268226">onceReadServices</span>&nbsp;<span class="ident" id="3268243">sync</span><span class="op" id="3268247">.</span><span class="ident" id="3268248">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3268254">func</span>&nbsp;<span class="ident" id="3268259">readServices</span><span class="op" id="3268271">(</span><span class="op" id="3268272">)</span>&nbsp;<span class="op" id="3268274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268277">var</span>&nbsp;<span class="ident" id="3268281">file</span>&nbsp;<span class="op" id="3268286">*</span><span class="ident" id="3268287">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268293">if</span>&nbsp;<span class="ident" id="3268296">file</span><span class="op" id="3268300">,</span>&nbsp;<span class="ident" id="3268302">servicesError</span>&nbsp;<span class="op" id="3268316">=</span>&nbsp;<span class="ident" id="3268318">open</span><span class="op" id="3268322">(</span><span class="string" id="3268323">&#34;/etc/services&#34;</span><span class="op" id="3268338">)</span><span class="op" id="3268339">;</span>&nbsp;<span class="ident" id="3268341">servicesError</span>&nbsp;<span class="op" id="3268355">!=</span>&nbsp;<span class="ident" id="3268358">nil</span>&nbsp;<span class="op" id="3268362">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268366">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268377">for</span>&nbsp;<span class="ident" id="3268381">line</span><span class="op" id="3268385">,</span>&nbsp;<span class="ident" id="3268387">ok</span>&nbsp;<span class="op" id="3268390">:=</span>&nbsp;<span class="ident" id="3268393">file</span><span class="op" id="3268397">.</span><span class="ident" id="3268398">readLine</span><span class="op" id="3268406">(</span><span class="op" id="3268407">)</span><span class="op" id="3268408">;</span>&nbsp;<span class="ident" id="3268410">ok</span><span class="op" id="3268412">;</span>&nbsp;<span class="ident" id="3268414">line</span><span class="op" id="3268418">,</span>&nbsp;<span class="ident" id="3268420">ok</span>&nbsp;<span class="op" id="3268423">=</span>&nbsp;<span class="ident" id="3268425">file</span><span class="op" id="3268429">.</span><span class="ident" id="3268430">readLine</span><span class="op" id="3268438">(</span><span class="op" id="3268439">)</span>&nbsp;<span class="op" id="3268441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3268445">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268499">if</span>&nbsp;<span class="ident" id="3268502">i</span>&nbsp;<span class="op" id="3268504">:=</span>&nbsp;<span class="ident" id="3268507">byteIndex</span><span class="op" id="3268516">(</span><span class="ident" id="3268517">line</span><span class="op" id="3268521">,</span>&nbsp;<span class="string" id="3268523">&#39;#&#39;</span><span class="op" id="3268526">)</span><span class="op" id="3268527">;</span>&nbsp;<span class="ident" id="3268529">i</span>&nbsp;<span class="op" id="3268531">&gt;=</span>&nbsp;<span class="num" id="3268534">0</span>&nbsp;<span class="op" id="3268536">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268541">line</span>&nbsp;<span class="op" id="3268546">=</span>&nbsp;<span class="ident" id="3268548">line</span><span class="op" id="3268552">[</span><span class="num" id="3268553">0</span><span class="op" id="3268554">:</span><span class="ident" id="3268555">i</span><span class="op" id="3268556">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268564">f</span>&nbsp;<span class="op" id="3268566">:=</span>&nbsp;<span class="ident" id="3268569">getFields</span><span class="op" id="3268578">(</span><span class="ident" id="3268579">line</span><span class="op" id="3268583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268587">if</span>&nbsp;<span class="builtinfunc" id="3268590">len</span><span class="op" id="3268593">(</span><span class="ident" id="3268594">f</span><span class="op" id="3268595">)</span>&nbsp;<span class="op" id="3268597">&lt;</span>&nbsp;<span class="num" id="3268599">2</span>&nbsp;<span class="op" id="3268601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268606">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268621">portnet</span>&nbsp;<span class="op" id="3268629">:=</span>&nbsp;<span class="ident" id="3268632">f</span><span class="op" id="3268633">[</span><span class="num" id="3268634">1</span><span class="op" id="3268635">]</span>&nbsp;<span class="comment" id="3268637">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268651">port</span><span class="op" id="3268655">,</span>&nbsp;<span class="ident" id="3268657">j</span><span class="op" id="3268658">,</span>&nbsp;<span class="ident" id="3268660">ok</span>&nbsp;<span class="op" id="3268663">:=</span>&nbsp;<span class="ident" id="3268666">dtoi</span><span class="op" id="3268670">(</span><span class="ident" id="3268671">portnet</span><span class="op" id="3268678">,</span>&nbsp;<span class="num" id="3268680">0</span><span class="op" id="3268681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268685">if</span>&nbsp;<span class="op" id="3268688">!</span><span class="ident" id="3268689">ok</span>&nbsp;<span class="op" id="3268692">||</span>&nbsp;<span class="ident" id="3268695">port</span>&nbsp;<span class="op" id="3268700">&lt;=</span>&nbsp;<span class="num" id="3268703">0</span>&nbsp;<span class="op" id="3268705">||</span>&nbsp;<span class="ident" id="3268708">j</span>&nbsp;<span class="op" id="3268710">&gt;=</span>&nbsp;<span class="builtinfunc" id="3268713">len</span><span class="op" id="3268716">(</span><span class="ident" id="3268717">portnet</span><span class="op" id="3268724">)</span>&nbsp;<span class="op" id="3268726">||</span>&nbsp;<span class="ident" id="3268729">portnet</span><span class="op" id="3268736">[</span><span class="ident" id="3268737">j</span><span class="op" id="3268738">]</span>&nbsp;<span class="op" id="3268740">!=</span>&nbsp;<span class="string" id="3268743">&#39;/&#39;</span>&nbsp;<span class="op" id="3268747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268752">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268767">netw</span>&nbsp;<span class="op" id="3268772">:=</span>&nbsp;<span class="ident" id="3268775">portnet</span><span class="op" id="3268782">[</span><span class="ident" id="3268783">j</span><span class="op" id="3268784">+</span><span class="num" id="3268785">1</span><span class="op" id="3268786">:</span><span class="op" id="3268787">]</span>&nbsp;<span class="comment" id="3268789">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268800">m</span><span class="op" id="3268801">,</span>&nbsp;<span class="ident" id="3268803">ok1</span>&nbsp;<span class="op" id="3268807">:=</span>&nbsp;<span class="ident" id="3268810">services</span><span class="op" id="3268818">[</span><span class="ident" id="3268819">netw</span><span class="op" id="3268823">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268827">if</span>&nbsp;<span class="op" id="3268830">!</span><span class="ident" id="3268831">ok1</span>&nbsp;<span class="op" id="3268835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268840">m</span>&nbsp;<span class="op" id="3268842">=</span>&nbsp;<span class="builtinfunc" id="3268844">make</span><span class="op" id="3268848">(</span><span class="keyword" id="3268849">map</span><span class="op" id="3268852">[</span><span class="builtintype" id="3268853">string</span><span class="op" id="3268859">]</span><span class="builtintype" id="3268860">int</span><span class="op" id="3268863">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268868">services</span><span class="op" id="3268876">[</span><span class="ident" id="3268877">netw</span><span class="op" id="3268881">]</span>&nbsp;<span class="op" id="3268883">=</span>&nbsp;<span class="ident" id="3268885">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268893">for</span>&nbsp;<span class="ident" id="3268897">i</span>&nbsp;<span class="op" id="3268899">:=</span>&nbsp;<span class="num" id="3268902">0</span><span class="op" id="3268903">;</span>&nbsp;<span class="ident" id="3268905">i</span>&nbsp;<span class="op" id="3268907">&lt;</span>&nbsp;<span class="builtinfunc" id="3268909">len</span><span class="op" id="3268912">(</span><span class="ident" id="3268913">f</span><span class="op" id="3268914">)</span><span class="op" id="3268915">;</span>&nbsp;<span class="ident" id="3268917">i</span><span class="op" id="3268918">++</span>&nbsp;<span class="op" id="3268921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3268926">if</span>&nbsp;<span class="ident" id="3268929">i</span>&nbsp;<span class="op" id="3268931">!=</span>&nbsp;<span class="num" id="3268934">1</span>&nbsp;<span class="op" id="3268936">{</span>&nbsp;<span class="comment" id="3268938">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268963">m</span><span class="op" id="3268964">[</span><span class="ident" id="3268965">f</span><span class="op" id="3268966">[</span><span class="ident" id="3268967">i</span><span class="op" id="3268968">]</span><span class="op" id="3268969">]</span>&nbsp;<span class="op" id="3268971">=</span>&nbsp;<span class="ident" id="3268973">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3268988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3268991">file</span><span class="op" id="3268995">.</span><span class="builtinfunc" id="3268996">close</span><span class="op" id="3269001">(</span><span class="op" id="3269002">)</span><br>
<span class="lineno"></span><span class="op" id="3269004">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3269007">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3269070">func</span>&nbsp;<span class="ident" id="3269075">goLookupPort</span><span class="op" id="3269087">(</span><span class="ident" id="3269088">network</span><span class="op" id="3269095">,</span>&nbsp;<span class="ident" id="3269097">service</span>&nbsp;<span class="builtintype" id="3269105">string</span><span class="op" id="3269111">)</span>&nbsp;<span class="op" id="3269113">(</span><span class="ident" id="3269114">port</span>&nbsp;<span class="builtintype" id="3269119">int</span><span class="op" id="3269122">,</span>&nbsp;<span class="ident" id="3269124">err</span>&nbsp;<span class="builtintype" id="3269128">error</span><span class="op" id="3269133">)</span>&nbsp;<span class="op" id="3269135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269138">onceReadServices</span><span class="op" id="3269154">.</span><span class="ident" id="3269155">Do</span><span class="op" id="3269157">(</span><span class="ident" id="3269158">readServices</span><span class="op" id="3269170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269174">switch</span>&nbsp;<span class="ident" id="3269181">network</span>&nbsp;<span class="op" id="3269189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269192">case</span>&nbsp;<span class="string" id="3269197">&#34;tcp4&#34;</span><span class="op" id="3269203">,</span>&nbsp;<span class="string" id="3269205">&#34;tcp6&#34;</span><span class="op" id="3269211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269215">network</span>&nbsp;<span class="op" id="3269223">=</span>&nbsp;<span class="string" id="3269225">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269232">case</span>&nbsp;<span class="string" id="3269237">&#34;udp4&#34;</span><span class="op" id="3269243">,</span>&nbsp;<span class="string" id="3269245">&#34;udp6&#34;</span><span class="op" id="3269251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3269255">network</span>&nbsp;<span class="op" id="3269263">=</span>&nbsp;<span class="string" id="3269265">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269276">if</span>&nbsp;<span class="ident" id="3269279">m</span><span class="op" id="3269280">,</span>&nbsp;<span class="ident" id="3269282">ok</span>&nbsp;<span class="op" id="3269285">:=</span>&nbsp;<span class="ident" id="3269288">services</span><span class="op" id="3269296">[</span><span class="ident" id="3269297">network</span><span class="op" id="3269304">]</span><span class="op" id="3269305">;</span>&nbsp;<span class="ident" id="3269307">ok</span>&nbsp;<span class="op" id="3269310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269314">if</span>&nbsp;<span class="ident" id="3269317">port</span><span class="op" id="3269321">,</span>&nbsp;<span class="ident" id="3269323">ok</span>&nbsp;<span class="op" id="3269326">=</span>&nbsp;<span class="ident" id="3269328">m</span><span class="op" id="3269329">[</span><span class="ident" id="3269330">service</span><span class="op" id="3269337">]</span><span class="op" id="3269338">;</span>&nbsp;<span class="ident" id="3269340">ok</span>&nbsp;<span class="op" id="3269343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269348">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3269360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3269363">return</span>&nbsp;<span class="num" id="3269370">0</span><span class="op" id="3269371">,</span>&nbsp;<span class="op" id="3269373">&amp;</span><span class="ident" id="3269374">AddrError</span><span class="op" id="3269383">{</span><span class="string" id="3269384">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3269398">,</span>&nbsp;<span class="ident" id="3269400">network</span>&nbsp;<span class="op" id="3269408">+</span>&nbsp;<span class="string" id="3269410">&#34;/&#34;</span>&nbsp;<span class="op" id="3269414">+</span>&nbsp;<span class="ident" id="3269416">service</span><span class="op" id="3269423">}</span><br>
<span class="lineno"></span><span class="op" id="3269425">}</span>
</div>
</body>
</html>
