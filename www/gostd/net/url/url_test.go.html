<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7158554">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7158609">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7158663">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7158714">package</span>&nbsp;<span class="ident" id="7158722">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7158727">import</span>&nbsp;<span class="op" id="7158734">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158737">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158744">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158755">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158766">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7158776">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7158779">type</span>&nbsp;<span class="ident" id="7158784">URLTest</span>&nbsp;<span class="keyword" id="7158792">struct</span>&nbsp;<span class="op" id="7158799">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158802">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7158812">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158820">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7158830">*</span><span class="ident" id="7158831">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7158836">roundtrip</span>&nbsp;<span class="builtintype" id="7158846">string</span>&nbsp;<span class="comment" id="7158853">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7158924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7158927">var</span>&nbsp;<span class="ident" id="7158931">urltests</span>&nbsp;<span class="op" id="7158940">=</span>&nbsp;<span class="op" id="7158942">[</span><span class="op" id="7158943">]</span><span class="ident" id="7158944">URLTest</span><span class="op" id="7158951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7158954">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7158966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7158970">&#34;http://www.google.com&#34;</span><span class="op" id="7158993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7158997">&amp;</span><span class="ident" id="7158998">URL</span><span class="op" id="7159001">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159006">Scheme</span><span class="op" id="7159012">:</span>&nbsp;<span class="string" id="7159014">&#34;http&#34;</span><span class="op" id="7159020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159025">Host</span><span class="op" id="7159029">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159033">&#34;www.google.com&#34;</span><span class="op" id="7159049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159053">}</span><span class="op" id="7159054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159058">&#34;&#34;</span><span class="op" id="7159060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159063">}</span><span class="op" id="7159064">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159067">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159080">&#34;http://www.google.com/&#34;</span><span class="op" id="7159104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159108">&amp;</span><span class="ident" id="7159109">URL</span><span class="op" id="7159112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159117">Scheme</span><span class="op" id="7159123">:</span>&nbsp;<span class="string" id="7159125">&#34;http&#34;</span><span class="op" id="7159131">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159136">Host</span><span class="op" id="7159140">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159144">&#34;www.google.com&#34;</span><span class="op" id="7159160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159165">Path</span><span class="op" id="7159169">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159173">&#34;/&#34;</span><span class="op" id="7159176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159180">}</span><span class="op" id="7159181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159185">&#34;&#34;</span><span class="op" id="7159187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159190">}</span><span class="op" id="7159191">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159194">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159225">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7159265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159269">&amp;</span><span class="ident" id="7159270">URL</span><span class="op" id="7159273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159278">Scheme</span><span class="op" id="7159284">:</span>&nbsp;<span class="string" id="7159286">&#34;http&#34;</span><span class="op" id="7159292">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159297">Host</span><span class="op" id="7159301">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159305">&#34;www.google.com&#34;</span><span class="op" id="7159321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159326">Path</span><span class="op" id="7159330">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159334">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7159349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159353">}</span><span class="op" id="7159354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159358">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7159396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159399">}</span><span class="op" id="7159400">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159403">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159416">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7159449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159453">&amp;</span><span class="ident" id="7159454">URL</span><span class="op" id="7159457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159462">Scheme</span><span class="op" id="7159468">:</span>&nbsp;<span class="string" id="7159470">&#34;ftp&#34;</span><span class="op" id="7159475">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159480">User</span><span class="op" id="7159484">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7159488">User</span><span class="op" id="7159492">(</span><span class="string" id="7159493">&#34;webmaster&#34;</span><span class="op" id="7159504">)</span><span class="op" id="7159505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159510">Host</span><span class="op" id="7159514">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159518">&#34;www.google.com&#34;</span><span class="op" id="7159534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159539">Path</span><span class="op" id="7159543">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159547">&#34;/&#34;</span><span class="op" id="7159550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159554">}</span><span class="op" id="7159555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159559">&#34;&#34;</span><span class="op" id="7159561">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159564">}</span><span class="op" id="7159565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159568">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159604">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7159638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159642">&amp;</span><span class="ident" id="7159643">URL</span><span class="op" id="7159646">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159651">Scheme</span><span class="op" id="7159657">:</span>&nbsp;<span class="string" id="7159659">&#34;ftp&#34;</span><span class="op" id="7159664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159669">User</span><span class="op" id="7159673">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7159677">User</span><span class="op" id="7159681">(</span><span class="string" id="7159682">&#34;john&nbsp;doe&#34;</span><span class="op" id="7159692">)</span><span class="op" id="7159693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159698">Host</span><span class="op" id="7159702">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159706">&#34;www.google.com&#34;</span><span class="op" id="7159722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159727">Path</span><span class="op" id="7159731">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159735">&#34;/&#34;</span><span class="op" id="7159738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159742">}</span><span class="op" id="7159743">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159747">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7159781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159784">}</span><span class="op" id="7159785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159788">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159802">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7159840">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159844">&amp;</span><span class="ident" id="7159845">URL</span><span class="op" id="7159848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159853">Scheme</span><span class="op" id="7159859">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7159863">&#34;http&#34;</span><span class="op" id="7159869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159874">Host</span><span class="op" id="7159878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7159884">&#34;www.google.com&#34;</span><span class="op" id="7159900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159905">Path</span><span class="op" id="7159909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7159915">&#34;/&#34;</span><span class="op" id="7159918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7159923">RawQuery</span><span class="op" id="7159931">:</span>&nbsp;<span class="string" id="7159933">&#34;q=go+language&#34;</span><span class="op" id="7159948">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159952">}</span><span class="op" id="7159953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7159957">&#34;&#34;</span><span class="op" id="7159959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7159962">}</span><span class="op" id="7159963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7159966">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160006">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160010">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7160050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160054">&amp;</span><span class="ident" id="7160055">URL</span><span class="op" id="7160058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160063">Scheme</span><span class="op" id="7160069">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160073">&#34;http&#34;</span><span class="op" id="7160079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160084">Host</span><span class="op" id="7160088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7160094">&#34;www.google.com&#34;</span><span class="op" id="7160110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160115">Path</span><span class="op" id="7160119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7160125">&#34;/&#34;</span><span class="op" id="7160128">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160133">RawQuery</span><span class="op" id="7160141">:</span>&nbsp;<span class="string" id="7160143">&#34;q=go%20language&#34;</span><span class="op" id="7160160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160164">}</span><span class="op" id="7160165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160169">&#34;&#34;</span><span class="op" id="7160171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160174">}</span><span class="op" id="7160175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160178">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160204">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7160239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160243">&amp;</span><span class="ident" id="7160244">URL</span><span class="op" id="7160247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160252">Scheme</span><span class="op" id="7160258">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160262">&#34;http&#34;</span><span class="op" id="7160268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160273">Host</span><span class="op" id="7160277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7160283">&#34;www.google.com&#34;</span><span class="op" id="7160299">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160304">Path</span><span class="op" id="7160308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7160314">&#34;/a&nbsp;b&#34;</span><span class="op" id="7160320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160325">RawQuery</span><span class="op" id="7160333">:</span>&nbsp;<span class="string" id="7160335">&#34;q=c+d&#34;</span><span class="op" id="7160342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160346">}</span><span class="op" id="7160347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160351">&#34;&#34;</span><span class="op" id="7160353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160356">}</span><span class="op" id="7160357">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160360">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160406">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7160442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160446">&amp;</span><span class="ident" id="7160447">URL</span><span class="op" id="7160450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160455">Scheme</span><span class="op" id="7160461">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160465">&#34;http&#34;</span><span class="op" id="7160471">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160476">Opaque</span><span class="op" id="7160482">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160486">&#34;www.google.com/&#34;</span><span class="op" id="7160503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160508">RawQuery</span><span class="op" id="7160516">:</span>&nbsp;<span class="string" id="7160518">&#34;q=go+language&#34;</span><span class="op" id="7160533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160537">}</span><span class="op" id="7160538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160542">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7160578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160581">}</span><span class="op" id="7160582">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160585">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160631">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7160673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160677">&amp;</span><span class="ident" id="7160678">URL</span><span class="op" id="7160681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160686">Scheme</span><span class="op" id="7160692">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160696">&#34;http&#34;</span><span class="op" id="7160702">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160707">Opaque</span><span class="op" id="7160713">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160717">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7160740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160745">RawQuery</span><span class="op" id="7160753">:</span>&nbsp;<span class="string" id="7160755">&#34;q=go+language&#34;</span><span class="op" id="7160770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160774">}</span><span class="op" id="7160775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160779">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7160821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160824">}</span><span class="op" id="7160825">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7160828">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160860">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7160890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160894">&amp;</span><span class="ident" id="7160895">URL</span><span class="op" id="7160898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160903">Scheme</span><span class="op" id="7160909">:</span>&nbsp;<span class="string" id="7160911">&#34;mailto&#34;</span><span class="op" id="7160919">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7160924">Path</span><span class="op" id="7160928">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7160932">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7160955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7160959">}</span><span class="op" id="7160960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7160964">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7160996">,</span>&nbsp;<span class="comment" id="7160998">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161025">}</span><span class="op" id="7161026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161029">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161051">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7161080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161084">&amp;</span><span class="ident" id="7161085">URL</span><span class="op" id="7161088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161093">Scheme</span><span class="op" id="7161099">:</span>&nbsp;<span class="string" id="7161101">&#34;mailto&#34;</span><span class="op" id="7161109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161114">Opaque</span><span class="op" id="7161120">:</span>&nbsp;<span class="string" id="7161122">&#34;webmaster@golang.org&#34;</span><span class="op" id="7161144">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161148">}</span><span class="op" id="7161149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161153">&#34;&#34;</span><span class="op" id="7161155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161158">}</span><span class="op" id="7161159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161162">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161216">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161220">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7161243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161247">&amp;</span><span class="ident" id="7161248">URL</span><span class="op" id="7161251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161256">Path</span><span class="op" id="7161260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7161266">&#34;/foo&#34;</span><span class="op" id="7161272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161277">RawQuery</span><span class="op" id="7161285">:</span>&nbsp;<span class="string" id="7161287">&#34;query=http://bad&#34;</span><span class="op" id="7161305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161309">}</span><span class="op" id="7161310">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161314">&#34;&#34;</span><span class="op" id="7161316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161319">}</span><span class="op" id="7161320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161323">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161384">&#34;//foo&#34;</span><span class="op" id="7161391">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161395">&amp;</span><span class="ident" id="7161396">URL</span><span class="op" id="7161399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161404">Host</span><span class="op" id="7161408">:</span>&nbsp;<span class="string" id="7161410">&#34;foo&#34;</span><span class="op" id="7161415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161419">}</span><span class="op" id="7161420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161424">&#34;&#34;</span><span class="op" id="7161426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161429">}</span><span class="op" id="7161430">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161433">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161499">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7161520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161524">&amp;</span><span class="ident" id="7161525">URL</span><span class="op" id="7161528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161533">User</span><span class="op" id="7161537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7161543">User</span><span class="op" id="7161547">(</span><span class="string" id="7161548">&#34;user&#34;</span><span class="op" id="7161554">)</span><span class="op" id="7161555">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161560">Host</span><span class="op" id="7161564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7161570">&#34;foo&#34;</span><span class="op" id="7161575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161580">Path</span><span class="op" id="7161584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7161590">&#34;/path&#34;</span><span class="op" id="7161597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161602">RawQuery</span><span class="op" id="7161610">:</span>&nbsp;<span class="string" id="7161612">&#34;a=b&#34;</span><span class="op" id="7161617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161621">}</span><span class="op" id="7161622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161626">&#34;&#34;</span><span class="op" id="7161628">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161631">}</span><span class="op" id="7161632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161635">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161710">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161771">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161830">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7161890">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161913">&#34;///threeslashes&#34;</span><span class="op" id="7161930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161934">&amp;</span><span class="ident" id="7161935">URL</span><span class="op" id="7161938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7161943">Path</span><span class="op" id="7161947">:</span>&nbsp;<span class="string" id="7161949">&#34;///threeslashes&#34;</span><span class="op" id="7161966">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161970">}</span><span class="op" id="7161971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161975">&#34;&#34;</span><span class="op" id="7161977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161980">}</span><span class="op" id="7161981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7161984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7161988">&#34;http://user:password@google.com&#34;</span><span class="op" id="7162021">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162025">&amp;</span><span class="ident" id="7162026">URL</span><span class="op" id="7162029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162034">Scheme</span><span class="op" id="7162040">:</span>&nbsp;<span class="string" id="7162042">&#34;http&#34;</span><span class="op" id="7162048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162053">User</span><span class="op" id="7162057">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7162061">UserPassword</span><span class="op" id="7162073">(</span><span class="string" id="7162074">&#34;user&#34;</span><span class="op" id="7162080">,</span>&nbsp;<span class="string" id="7162082">&#34;password&#34;</span><span class="op" id="7162092">)</span><span class="op" id="7162093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162098">Host</span><span class="op" id="7162102">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7162106">&#34;google.com&#34;</span><span class="op" id="7162118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162122">}</span><span class="op" id="7162123">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162127">&#34;http://user:password@google.com&#34;</span><span class="op" id="7162160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162163">}</span><span class="op" id="7162164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7162167">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162223">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7162256">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162260">&amp;</span><span class="ident" id="7162261">URL</span><span class="op" id="7162264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162269">Scheme</span><span class="op" id="7162275">:</span>&nbsp;<span class="string" id="7162277">&#34;http&#34;</span><span class="op" id="7162283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162288">User</span><span class="op" id="7162292">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7162296">UserPassword</span><span class="op" id="7162308">(</span><span class="string" id="7162309">&#34;j@ne&#34;</span><span class="op" id="7162315">,</span>&nbsp;<span class="string" id="7162317">&#34;password&#34;</span><span class="op" id="7162327">)</span><span class="op" id="7162328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162333">Host</span><span class="op" id="7162337">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7162341">&#34;google.com&#34;</span><span class="op" id="7162353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162357">}</span><span class="op" id="7162358">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162362">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7162397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162400">}</span><span class="op" id="7162401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7162404">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162460">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7162493">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162497">&amp;</span><span class="ident" id="7162498">URL</span><span class="op" id="7162501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162506">Scheme</span><span class="op" id="7162512">:</span>&nbsp;<span class="string" id="7162514">&#34;http&#34;</span><span class="op" id="7162520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162525">User</span><span class="op" id="7162529">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7162533">UserPassword</span><span class="op" id="7162545">(</span><span class="string" id="7162546">&#34;jane&#34;</span><span class="op" id="7162552">,</span>&nbsp;<span class="string" id="7162554">&#34;p@ssword&#34;</span><span class="op" id="7162564">)</span><span class="op" id="7162565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162570">Host</span><span class="op" id="7162574">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7162578">&#34;google.com&#34;</span><span class="op" id="7162590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162594">}</span><span class="op" id="7162595">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162599">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7162634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162637">}</span><span class="op" id="7162638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162645">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7162689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162693">&amp;</span><span class="ident" id="7162694">URL</span><span class="op" id="7162697">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162702">Scheme</span><span class="op" id="7162708">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7162712">&#34;http&#34;</span><span class="op" id="7162718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162723">User</span><span class="op" id="7162727">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7162733">UserPassword</span><span class="op" id="7162745">(</span><span class="string" id="7162746">&#34;j@ne&#34;</span><span class="op" id="7162752">,</span>&nbsp;<span class="string" id="7162754">&#34;password&#34;</span><span class="op" id="7162764">)</span><span class="op" id="7162765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162770">Host</span><span class="op" id="7162774">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7162780">&#34;google.com&#34;</span><span class="op" id="7162792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162797">Path</span><span class="op" id="7162801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7162807">&#34;/p@th&#34;</span><span class="op" id="7162814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162819">RawQuery</span><span class="op" id="7162827">:</span>&nbsp;<span class="string" id="7162829">&#34;q=@go&#34;</span><span class="op" id="7162836">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162840">}</span><span class="op" id="7162841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162845">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7162891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162894">}</span><span class="op" id="7162895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7162902">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7162944">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7162948">&amp;</span><span class="ident" id="7162949">URL</span><span class="op" id="7162952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162957">Scheme</span><span class="op" id="7162963">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7162967">&#34;http&#34;</span><span class="op" id="7162973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7162978">Host</span><span class="op" id="7162982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7162988">&#34;www.google.com&#34;</span><span class="op" id="7163004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163009">Path</span><span class="op" id="7163013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7163019">&#34;/&#34;</span><span class="op" id="7163022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163027">RawQuery</span><span class="op" id="7163035">:</span>&nbsp;<span class="string" id="7163037">&#34;q=go+language&#34;</span><span class="op" id="7163052">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163057">Fragment</span><span class="op" id="7163065">:</span>&nbsp;<span class="string" id="7163067">&#34;foo&#34;</span><span class="op" id="7163072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163076">}</span><span class="op" id="7163077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163081">&#34;&#34;</span><span class="op" id="7163083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163086">}</span><span class="op" id="7163087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163090">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163094">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7163142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163146">&amp;</span><span class="ident" id="7163147">URL</span><span class="op" id="7163150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163155">Scheme</span><span class="op" id="7163161">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7163165">&#34;http&#34;</span><span class="op" id="7163171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163176">Host</span><span class="op" id="7163180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7163186">&#34;www.google.com&#34;</span><span class="op" id="7163202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163207">Path</span><span class="op" id="7163211">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7163217">&#34;/&#34;</span><span class="op" id="7163220">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163225">RawQuery</span><span class="op" id="7163233">:</span>&nbsp;<span class="string" id="7163235">&#34;q=go+language&#34;</span><span class="op" id="7163250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163255">Fragment</span><span class="op" id="7163263">:</span>&nbsp;<span class="string" id="7163265">&#34;foo&amp;bar&#34;</span><span class="op" id="7163274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163278">}</span><span class="op" id="7163279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163283">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7163329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163332">}</span><span class="op" id="7163333">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163340">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7163366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163370">&amp;</span><span class="ident" id="7163371">URL</span><span class="op" id="7163374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163379">Scheme</span><span class="op" id="7163385">:</span>&nbsp;<span class="string" id="7163387">&#34;file&#34;</span><span class="op" id="7163393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163398">Host</span><span class="op" id="7163402">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7163406">&#34;&#34;</span><span class="op" id="7163408">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163413">Path</span><span class="op" id="7163417">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7163421">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7163440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163444">}</span><span class="op" id="7163445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163449">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7163475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163478">}</span><span class="op" id="7163479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163482">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163532">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163590">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7163617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163621">&amp;</span><span class="ident" id="7163622">URL</span><span class="op" id="7163625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163630">Scheme</span><span class="op" id="7163636">:</span>&nbsp;<span class="string" id="7163638">&#34;file&#34;</span><span class="op" id="7163644">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163649">Host</span><span class="op" id="7163653">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7163657">&#34;&#34;</span><span class="op" id="7163659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163664">Path</span><span class="op" id="7163668">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7163672">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7163692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163696">}</span><span class="op" id="7163697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163701">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7163728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163731">}</span><span class="op" id="7163732">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163735">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163767">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7163796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163800">&amp;</span><span class="ident" id="7163801">URL</span><span class="op" id="7163804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163809">Scheme</span><span class="op" id="7163815">:</span>&nbsp;<span class="string" id="7163817">&#34;mailto&#34;</span><span class="op" id="7163825">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163830">Opaque</span><span class="op" id="7163836">:</span>&nbsp;<span class="string" id="7163838">&#34;webmaster@golang.org&#34;</span><span class="op" id="7163860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163864">}</span><span class="op" id="7163865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163869">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7163898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163901">}</span><span class="op" id="7163902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163905">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163927">&#34;a/b/c&#34;</span><span class="op" id="7163934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163938">&amp;</span><span class="ident" id="7163939">URL</span><span class="op" id="7163942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7163947">Path</span><span class="op" id="7163951">:</span>&nbsp;<span class="string" id="7163953">&#34;a/b/c&#34;</span><span class="op" id="7163960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163964">}</span><span class="op" id="7163965">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7163969">&#34;a/b/c&#34;</span><span class="op" id="7163976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7163979">}</span><span class="op" id="7163980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7163983">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7164028">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7164064">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164068">&amp;</span><span class="ident" id="7164069">URL</span><span class="op" id="7164072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164077">Scheme</span><span class="op" id="7164083">:</span>&nbsp;<span class="string" id="7164085">&#34;http&#34;</span><span class="op" id="7164091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164096">User</span><span class="op" id="7164100">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7164104">UserPassword</span><span class="op" id="7164116">(</span><span class="string" id="7164117">&#34;?am&#34;</span><span class="op" id="7164122">,</span>&nbsp;<span class="string" id="7164124">&#34;pa?sword&#34;</span><span class="op" id="7164134">)</span><span class="op" id="7164135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164140">Host</span><span class="op" id="7164144">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7164148">&#34;google.com&#34;</span><span class="op" id="7164160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164164">}</span><span class="op" id="7164165">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7164169">&#34;&#34;</span><span class="op" id="7164171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164174">}</span><span class="op" id="7164175">,</span><br>
<span class="lineno"></span><span class="op" id="7164177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7164180">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7164242">func</span>&nbsp;<span class="ident" id="7164247">ufmt</span><span class="op" id="7164251">(</span><span class="ident" id="7164252">u</span>&nbsp;<span class="op" id="7164254">*</span><span class="ident" id="7164255">URL</span><span class="op" id="7164258">)</span>&nbsp;<span class="builtintype" id="7164260">string</span>&nbsp;<span class="op" id="7164267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164270">var</span>&nbsp;<span class="ident" id="7164274">user</span><span class="op" id="7164278">,</span>&nbsp;<span class="ident" id="7164280">pass</span>&nbsp;<span class="keyword" id="7164285">interface</span><span class="op" id="7164294">{</span><span class="op" id="7164295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164298">if</span>&nbsp;<span class="ident" id="7164301">u</span><span class="op" id="7164302">.</span><span class="ident" id="7164303">User</span>&nbsp;<span class="op" id="7164308">!=</span>&nbsp;<span class="ident" id="7164311">nil</span>&nbsp;<span class="op" id="7164315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164319">user</span>&nbsp;<span class="op" id="7164324">=</span>&nbsp;<span class="ident" id="7164326">u</span><span class="op" id="7164327">.</span><span class="ident" id="7164328">User</span><span class="op" id="7164332">.</span><span class="ident" id="7164333">Username</span><span class="op" id="7164341">(</span><span class="op" id="7164342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164346">if</span>&nbsp;<span class="ident" id="7164349">p</span><span class="op" id="7164350">,</span>&nbsp;<span class="ident" id="7164352">ok</span>&nbsp;<span class="op" id="7164355">:=</span>&nbsp;<span class="ident" id="7164358">u</span><span class="op" id="7164359">.</span><span class="ident" id="7164360">User</span><span class="op" id="7164364">.</span><span class="ident" id="7164365">Password</span><span class="op" id="7164373">(</span><span class="op" id="7164374">)</span><span class="op" id="7164375">;</span>&nbsp;<span class="ident" id="7164377">ok</span>&nbsp;<span class="op" id="7164380">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164385">pass</span>&nbsp;<span class="op" id="7164390">=</span>&nbsp;<span class="ident" id="7164392">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164402">return</span>&nbsp;<span class="ident" id="7164409">fmt</span><span class="op" id="7164412">.</span><span class="ident" id="7164413">Sprintf</span><span class="op" id="7164420">(</span><span class="string" id="7164421">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7164499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164503">u</span><span class="op" id="7164504">.</span><span class="ident" id="7164505">Opaque</span><span class="op" id="7164511">,</span>&nbsp;<span class="ident" id="7164513">u</span><span class="op" id="7164514">.</span><span class="ident" id="7164515">Scheme</span><span class="op" id="7164521">,</span>&nbsp;<span class="ident" id="7164523">user</span><span class="op" id="7164527">,</span>&nbsp;<span class="ident" id="7164529">pass</span><span class="op" id="7164533">,</span>&nbsp;<span class="ident" id="7164535">u</span><span class="op" id="7164536">.</span><span class="ident" id="7164537">Host</span><span class="op" id="7164541">,</span>&nbsp;<span class="ident" id="7164543">u</span><span class="op" id="7164544">.</span><span class="ident" id="7164545">Path</span><span class="op" id="7164549">,</span>&nbsp;<span class="ident" id="7164551">u</span><span class="op" id="7164552">.</span><span class="ident" id="7164553">RawQuery</span><span class="op" id="7164561">,</span>&nbsp;<span class="ident" id="7164563">u</span><span class="op" id="7164564">.</span><span class="ident" id="7164565">Fragment</span><span class="op" id="7164573">)</span><br>
<span class="lineno">305</span><span class="op" id="7164575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7164578">func</span>&nbsp;<span class="ident" id="7164583">DoTest</span><span class="op" id="7164589">(</span><span class="ident" id="7164590">t</span>&nbsp;<span class="op" id="7164592">*</span><span class="ident" id="7164593">testing</span><span class="op" id="7164600">.</span><span class="ident" id="7164601">T</span><span class="op" id="7164602">,</span>&nbsp;<span class="ident" id="7164604">parse</span>&nbsp;<span class="keyword" id="7164610">func</span><span class="op" id="7164614">(</span><span class="builtintype" id="7164615">string</span><span class="op" id="7164621">)</span>&nbsp;<span class="op" id="7164623">(</span><span class="op" id="7164624">*</span><span class="ident" id="7164625">URL</span><span class="op" id="7164628">,</span>&nbsp;<span class="builtintype" id="7164630">error</span><span class="op" id="7164635">)</span><span class="op" id="7164636">,</span>&nbsp;<span class="ident" id="7164638">name</span>&nbsp;<span class="builtintype" id="7164643">string</span><span class="op" id="7164649">,</span>&nbsp;<span class="ident" id="7164651">tests</span>&nbsp;<span class="op" id="7164657">[</span><span class="op" id="7164658">]</span><span class="ident" id="7164659">URLTest</span><span class="op" id="7164666">)</span>&nbsp;<span class="op" id="7164668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164671">for</span>&nbsp;<span class="ident" id="7164675">_</span><span class="op" id="7164676">,</span>&nbsp;<span class="ident" id="7164678">tt</span>&nbsp;<span class="op" id="7164681">:=</span>&nbsp;<span class="keyword" id="7164684">range</span>&nbsp;<span class="ident" id="7164690">tests</span>&nbsp;<span class="op" id="7164696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164700">u</span><span class="op" id="7164701">,</span>&nbsp;<span class="ident" id="7164703">err</span>&nbsp;<span class="op" id="7164707">:=</span>&nbsp;<span class="ident" id="7164710">parse</span><span class="op" id="7164715">(</span><span class="ident" id="7164716">tt</span><span class="op" id="7164718">.</span><span class="ident" id="7164719">in</span><span class="op" id="7164721">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164725">if</span>&nbsp;<span class="ident" id="7164728">err</span>&nbsp;<span class="op" id="7164732">!=</span>&nbsp;<span class="ident" id="7164735">nil</span>&nbsp;<span class="op" id="7164739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164744">t</span><span class="op" id="7164745">.</span><span class="ident" id="7164746">Errorf</span><span class="op" id="7164752">(</span><span class="string" id="7164753">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7164779">,</span>&nbsp;<span class="ident" id="7164781">name</span><span class="op" id="7164785">,</span>&nbsp;<span class="ident" id="7164787">tt</span><span class="op" id="7164789">.</span><span class="ident" id="7164790">in</span><span class="op" id="7164792">,</span>&nbsp;<span class="ident" id="7164794">err</span><span class="op" id="7164797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164802">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7164817">if</span>&nbsp;<span class="op" id="7164820">!</span><span class="ident" id="7164821">reflect</span><span class="op" id="7164828">.</span><span class="ident" id="7164829">DeepEqual</span><span class="op" id="7164838">(</span><span class="ident" id="7164839">u</span><span class="op" id="7164840">,</span>&nbsp;<span class="ident" id="7164842">tt</span><span class="op" id="7164844">.</span><span class="ident" id="7164845">out</span><span class="op" id="7164848">)</span>&nbsp;<span class="op" id="7164850">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164855">t</span><span class="op" id="7164856">.</span><span class="ident" id="7164857">Errorf</span><span class="op" id="7164863">(</span><span class="string" id="7164864">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7164897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164903">name</span><span class="op" id="7164907">,</span>&nbsp;<span class="ident" id="7164909">tt</span><span class="op" id="7164911">.</span><span class="ident" id="7164912">in</span><span class="op" id="7164914">,</span>&nbsp;<span class="ident" id="7164916">ufmt</span><span class="op" id="7164920">(</span><span class="ident" id="7164921">u</span><span class="op" id="7164922">)</span><span class="op" id="7164923">,</span>&nbsp;<span class="ident" id="7164925">ufmt</span><span class="op" id="7164929">(</span><span class="ident" id="7164930">tt</span><span class="op" id="7164932">.</span><span class="ident" id="7164933">out</span><span class="op" id="7164936">)</span><span class="op" id="7164937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7164944">}</span><br>
<span class="lineno"></span><span class="op" id="7164946">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7164949">func</span>&nbsp;<span class="ident" id="7164954">BenchmarkString</span><span class="op" id="7164969">(</span><span class="ident" id="7164970">b</span>&nbsp;<span class="op" id="7164972">*</span><span class="ident" id="7164973">testing</span><span class="op" id="7164980">.</span><span class="ident" id="7164981">B</span><span class="op" id="7164982">)</span>&nbsp;<span class="op" id="7164984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7164987">b</span><span class="op" id="7164988">.</span><span class="ident" id="7164989">StopTimer</span><span class="op" id="7164998">(</span><span class="op" id="7164999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165002">b</span><span class="op" id="7165003">.</span><span class="ident" id="7165004">ReportAllocs</span><span class="op" id="7165016">(</span><span class="op" id="7165017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165020">for</span>&nbsp;<span class="ident" id="7165024">_</span><span class="op" id="7165025">,</span>&nbsp;<span class="ident" id="7165027">tt</span>&nbsp;<span class="op" id="7165030">:=</span>&nbsp;<span class="keyword" id="7165033">range</span>&nbsp;<span class="ident" id="7165039">urltests</span>&nbsp;<span class="op" id="7165048">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165052">u</span><span class="op" id="7165053">,</span>&nbsp;<span class="ident" id="7165055">err</span>&nbsp;<span class="op" id="7165059">:=</span>&nbsp;<span class="ident" id="7165062">Parse</span><span class="op" id="7165067">(</span><span class="ident" id="7165068">tt</span><span class="op" id="7165070">.</span><span class="ident" id="7165071">in</span><span class="op" id="7165073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165077">if</span>&nbsp;<span class="ident" id="7165080">err</span>&nbsp;<span class="op" id="7165084">!=</span>&nbsp;<span class="ident" id="7165087">nil</span>&nbsp;<span class="op" id="7165091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165096">b</span><span class="op" id="7165097">.</span><span class="ident" id="7165098">Errorf</span><span class="op" id="7165104">(</span><span class="string" id="7165105">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7165134">,</span>&nbsp;<span class="ident" id="7165136">tt</span><span class="op" id="7165138">.</span><span class="ident" id="7165139">in</span><span class="op" id="7165141">,</span>&nbsp;<span class="ident" id="7165143">err</span><span class="op" id="7165146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165151">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165162">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165166">if</span>&nbsp;<span class="ident" id="7165169">tt</span><span class="op" id="7165171">.</span><span class="ident" id="7165172">roundtrip</span>&nbsp;<span class="op" id="7165182">==</span>&nbsp;<span class="string" id="7165185">&#34;&#34;</span>&nbsp;<span class="op" id="7165188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165193">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165208">b</span><span class="op" id="7165209">.</span><span class="ident" id="7165210">StartTimer</span><span class="op" id="7165220">(</span><span class="op" id="7165221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165225">var</span>&nbsp;<span class="ident" id="7165229">g</span>&nbsp;<span class="builtintype" id="7165231">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165240">for</span>&nbsp;<span class="ident" id="7165244">i</span>&nbsp;<span class="op" id="7165246">:=</span>&nbsp;<span class="num" id="7165249">0</span><span class="op" id="7165250">;</span>&nbsp;<span class="ident" id="7165252">i</span>&nbsp;<span class="op" id="7165254">&lt;</span>&nbsp;<span class="ident" id="7165256">b</span><span class="op" id="7165257">.</span><span class="ident" id="7165258">N</span><span class="op" id="7165259">;</span>&nbsp;<span class="ident" id="7165261">i</span><span class="op" id="7165262">++</span>&nbsp;<span class="op" id="7165265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165270">g</span>&nbsp;<span class="op" id="7165272">=</span>&nbsp;<span class="ident" id="7165274">u</span><span class="op" id="7165275">.</span><span class="ident" id="7165276">String</span><span class="op" id="7165282">(</span><span class="op" id="7165283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165291">b</span><span class="op" id="7165292">.</span><span class="ident" id="7165293">StopTimer</span><span class="op" id="7165302">(</span><span class="op" id="7165303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165307">if</span>&nbsp;<span class="ident" id="7165310">w</span>&nbsp;<span class="op" id="7165312">:=</span>&nbsp;<span class="ident" id="7165315">tt</span><span class="op" id="7165317">.</span><span class="ident" id="7165318">roundtrip</span><span class="op" id="7165327">;</span>&nbsp;<span class="ident" id="7165329">g</span>&nbsp;<span class="op" id="7165331">!=</span>&nbsp;<span class="ident" id="7165334">w</span>&nbsp;<span class="op" id="7165336">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165341">b</span><span class="op" id="7165342">.</span><span class="ident" id="7165343">Errorf</span><span class="op" id="7165349">(</span><span class="string" id="7165350">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7165385">,</span>&nbsp;<span class="ident" id="7165387">tt</span><span class="op" id="7165389">.</span><span class="ident" id="7165390">in</span><span class="op" id="7165392">,</span>&nbsp;<span class="ident" id="7165394">g</span><span class="op" id="7165395">,</span>&nbsp;<span class="ident" id="7165397">w</span><span class="op" id="7165398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165405">}</span><br>
<span class="lineno"></span><span class="op" id="7165407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7165410">func</span>&nbsp;<span class="ident" id="7165415">TestParse</span><span class="op" id="7165424">(</span><span class="ident" id="7165425">t</span>&nbsp;<span class="op" id="7165427">*</span><span class="ident" id="7165428">testing</span><span class="op" id="7165435">.</span><span class="ident" id="7165436">T</span><span class="op" id="7165437">)</span>&nbsp;<span class="op" id="7165439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165442">DoTest</span><span class="op" id="7165448">(</span><span class="ident" id="7165449">t</span><span class="op" id="7165450">,</span>&nbsp;<span class="ident" id="7165452">Parse</span><span class="op" id="7165457">,</span>&nbsp;<span class="string" id="7165459">&#34;Parse&#34;</span><span class="op" id="7165466">,</span>&nbsp;<span class="ident" id="7165468">urltests</span><span class="op" id="7165476">)</span><br>
<span class="lineno"></span><span class="op" id="7165478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7165481">const</span>&nbsp;<span class="ident" id="7165487">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7165515">=</span>&nbsp;<span class="string" id="7165517">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7165556">var</span>&nbsp;<span class="ident" id="7165560">parseRequestURLTests</span>&nbsp;<span class="op" id="7165581">=</span>&nbsp;<span class="op" id="7165583">[</span><span class="op" id="7165584">]</span><span class="keyword" id="7165585">struct</span>&nbsp;<span class="op" id="7165592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165595">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7165609">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165617">expectedValid</span>&nbsp;<span class="builtintype" id="7165631">bool</span><br>
<span class="lineno"></span><span class="op" id="7165636">}</span><span class="op" id="7165637">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165640">{</span><span class="string" id="7165641">&#34;http://foo.com&#34;</span><span class="op" id="7165657">,</span>&nbsp;<span class="builtintype" id="7165659">true</span><span class="op" id="7165663">}</span><span class="op" id="7165664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165667">{</span><span class="string" id="7165668">&#34;http://foo.com/&#34;</span><span class="op" id="7165685">,</span>&nbsp;<span class="builtintype" id="7165687">true</span><span class="op" id="7165691">}</span><span class="op" id="7165692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165695">{</span><span class="string" id="7165696">&#34;http://foo.com/path&#34;</span><span class="op" id="7165717">,</span>&nbsp;<span class="builtintype" id="7165719">true</span><span class="op" id="7165723">}</span><span class="op" id="7165724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165727">{</span><span class="string" id="7165728">&#34;/&#34;</span><span class="op" id="7165731">,</span>&nbsp;<span class="builtintype" id="7165733">true</span><span class="op" id="7165737">}</span><span class="op" id="7165738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165741">{</span><span class="ident" id="7165742">pathThatLooksSchemeRelative</span><span class="op" id="7165769">,</span>&nbsp;<span class="builtintype" id="7165771">true</span><span class="op" id="7165775">}</span><span class="op" id="7165776">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165779">{</span><span class="string" id="7165780">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7165825">,</span>&nbsp;<span class="builtintype" id="7165827">true</span><span class="op" id="7165831">}</span><span class="op" id="7165832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165835">{</span><span class="string" id="7165836">&#34;foo.html&#34;</span><span class="op" id="7165846">,</span>&nbsp;<span class="builtintype" id="7165848">false</span><span class="op" id="7165853">}</span><span class="op" id="7165854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165857">{</span><span class="string" id="7165858">&#34;../dir/&#34;</span><span class="op" id="7165867">,</span>&nbsp;<span class="builtintype" id="7165869">false</span><span class="op" id="7165874">}</span><span class="op" id="7165875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7165878">{</span><span class="string" id="7165879">&#34;*&#34;</span><span class="op" id="7165882">,</span>&nbsp;<span class="builtintype" id="7165884">true</span><span class="op" id="7165888">}</span><span class="op" id="7165889">,</span><br>
<span class="lineno"></span><span class="op" id="7165891">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7165894">func</span>&nbsp;<span class="ident" id="7165899">TestParseRequestURI</span><span class="op" id="7165918">(</span><span class="ident" id="7165919">t</span>&nbsp;<span class="op" id="7165921">*</span><span class="ident" id="7165922">testing</span><span class="op" id="7165929">.</span><span class="ident" id="7165930">T</span><span class="op" id="7165931">)</span>&nbsp;<span class="op" id="7165933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7165936">for</span>&nbsp;<span class="ident" id="7165940">_</span><span class="op" id="7165941">,</span>&nbsp;<span class="ident" id="7165943">test</span>&nbsp;<span class="op" id="7165948">:=</span>&nbsp;<span class="keyword" id="7165951">range</span>&nbsp;<span class="ident" id="7165957">parseRequestURLTests</span>&nbsp;<span class="op" id="7165978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7165982">_</span><span class="op" id="7165983">,</span>&nbsp;<span class="ident" id="7165985">err</span>&nbsp;<span class="op" id="7165989">:=</span>&nbsp;<span class="ident" id="7165992">ParseRequestURI</span><span class="op" id="7166007">(</span><span class="ident" id="7166008">test</span><span class="op" id="7166012">.</span><span class="ident" id="7166013">url</span><span class="op" id="7166016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166020">valid</span>&nbsp;<span class="op" id="7166026">:=</span>&nbsp;<span class="ident" id="7166029">err</span>&nbsp;<span class="op" id="7166033">==</span>&nbsp;<span class="ident" id="7166036">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166042">if</span>&nbsp;<span class="ident" id="7166045">valid</span>&nbsp;<span class="op" id="7166051">!=</span>&nbsp;<span class="ident" id="7166054">test</span><span class="op" id="7166058">.</span><span class="ident" id="7166059">expectedValid</span>&nbsp;<span class="op" id="7166073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166078">t</span><span class="op" id="7166079">.</span><span class="ident" id="7166080">Errorf</span><span class="op" id="7166086">(</span><span class="string" id="7166087">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7166121">,</span>&nbsp;<span class="ident" id="7166123">test</span><span class="op" id="7166127">.</span><span class="ident" id="7166128">expectedValid</span><span class="op" id="7166141">,</span>&nbsp;<span class="ident" id="7166143">test</span><span class="op" id="7166147">.</span><span class="ident" id="7166148">url</span><span class="op" id="7166151">,</span>&nbsp;<span class="ident" id="7166153">valid</span><span class="op" id="7166158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166169">url</span><span class="op" id="7166172">,</span>&nbsp;<span class="ident" id="7166174">err</span>&nbsp;<span class="op" id="7166178">:=</span>&nbsp;<span class="ident" id="7166181">ParseRequestURI</span><span class="op" id="7166196">(</span><span class="ident" id="7166197">pathThatLooksSchemeRelative</span><span class="op" id="7166224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166227">if</span>&nbsp;<span class="ident" id="7166230">err</span>&nbsp;<span class="op" id="7166234">!=</span>&nbsp;<span class="ident" id="7166237">nil</span>&nbsp;<span class="op" id="7166241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166245">t</span><span class="op" id="7166246">.</span><span class="ident" id="7166247">Fatalf</span><span class="op" id="7166253">(</span><span class="string" id="7166254">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7166275">,</span>&nbsp;<span class="ident" id="7166277">err</span><span class="op" id="7166280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166286">if</span>&nbsp;<span class="ident" id="7166289">url</span><span class="op" id="7166292">.</span><span class="ident" id="7166293">Path</span>&nbsp;<span class="op" id="7166298">!=</span>&nbsp;<span class="ident" id="7166301">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7166329">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166333">t</span><span class="op" id="7166334">.</span><span class="ident" id="7166335">Errorf</span><span class="op" id="7166341">(</span><span class="string" id="7166342">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7166368">,</span>&nbsp;<span class="ident" id="7166370">pathThatLooksSchemeRelative</span><span class="op" id="7166397">,</span>&nbsp;<span class="ident" id="7166399">url</span><span class="op" id="7166402">.</span><span class="ident" id="7166403">Path</span><span class="op" id="7166407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166410">}</span><br>
<span class="lineno"></span><span class="op" id="7166412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7166415">func</span>&nbsp;<span class="ident" id="7166420">DoTestString</span><span class="op" id="7166432">(</span><span class="ident" id="7166433">t</span>&nbsp;<span class="op" id="7166435">*</span><span class="ident" id="7166436">testing</span><span class="op" id="7166443">.</span><span class="ident" id="7166444">T</span><span class="op" id="7166445">,</span>&nbsp;<span class="ident" id="7166447">parse</span>&nbsp;<span class="keyword" id="7166453">func</span><span class="op" id="7166457">(</span><span class="builtintype" id="7166458">string</span><span class="op" id="7166464">)</span>&nbsp;<span class="op" id="7166466">(</span><span class="op" id="7166467">*</span><span class="ident" id="7166468">URL</span><span class="op" id="7166471">,</span>&nbsp;<span class="builtintype" id="7166473">error</span><span class="op" id="7166478">)</span><span class="op" id="7166479">,</span>&nbsp;<span class="ident" id="7166481">name</span>&nbsp;<span class="builtintype" id="7166486">string</span><span class="op" id="7166492">,</span>&nbsp;<span class="ident" id="7166494">tests</span>&nbsp;<span class="op" id="7166500">[</span><span class="op" id="7166501">]</span><span class="ident" id="7166502">URLTest</span><span class="op" id="7166509">)</span>&nbsp;<span class="op" id="7166511">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166514">for</span>&nbsp;<span class="ident" id="7166518">_</span><span class="op" id="7166519">,</span>&nbsp;<span class="ident" id="7166521">tt</span>&nbsp;<span class="op" id="7166524">:=</span>&nbsp;<span class="keyword" id="7166527">range</span>&nbsp;<span class="ident" id="7166533">tests</span>&nbsp;<span class="op" id="7166539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166543">u</span><span class="op" id="7166544">,</span>&nbsp;<span class="ident" id="7166546">err</span>&nbsp;<span class="op" id="7166550">:=</span>&nbsp;<span class="ident" id="7166553">parse</span><span class="op" id="7166558">(</span><span class="ident" id="7166559">tt</span><span class="op" id="7166561">.</span><span class="ident" id="7166562">in</span><span class="op" id="7166564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166568">if</span>&nbsp;<span class="ident" id="7166571">err</span>&nbsp;<span class="op" id="7166575">!=</span>&nbsp;<span class="ident" id="7166578">nil</span>&nbsp;<span class="op" id="7166582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166587">t</span><span class="op" id="7166588">.</span><span class="ident" id="7166589">Errorf</span><span class="op" id="7166595">(</span><span class="string" id="7166596">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7166622">,</span>&nbsp;<span class="ident" id="7166624">name</span><span class="op" id="7166628">,</span>&nbsp;<span class="ident" id="7166630">tt</span><span class="op" id="7166632">.</span><span class="ident" id="7166633">in</span><span class="op" id="7166635">,</span>&nbsp;<span class="ident" id="7166637">err</span><span class="op" id="7166640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166645">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166660">expected</span>&nbsp;<span class="op" id="7166669">:=</span>&nbsp;<span class="ident" id="7166672">tt</span><span class="op" id="7166674">.</span><span class="ident" id="7166675">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166680">if</span>&nbsp;<span class="builtinfunc" id="7166683">len</span><span class="op" id="7166686">(</span><span class="ident" id="7166687">tt</span><span class="op" id="7166689">.</span><span class="ident" id="7166690">roundtrip</span><span class="op" id="7166699">)</span>&nbsp;<span class="op" id="7166701">&gt;</span>&nbsp;<span class="num" id="7166703">0</span>&nbsp;<span class="op" id="7166705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166710">expected</span>&nbsp;<span class="op" id="7166719">=</span>&nbsp;<span class="ident" id="7166721">tt</span><span class="op" id="7166723">.</span><span class="ident" id="7166724">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166736">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166740">s</span>&nbsp;<span class="op" id="7166742">:=</span>&nbsp;<span class="ident" id="7166745">u</span><span class="op" id="7166746">.</span><span class="ident" id="7166747">String</span><span class="op" id="7166753">(</span><span class="op" id="7166754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7166758">if</span>&nbsp;<span class="ident" id="7166761">s</span>&nbsp;<span class="op" id="7166763">!=</span>&nbsp;<span class="ident" id="7166766">expected</span>&nbsp;<span class="op" id="7166775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166780">t</span><span class="op" id="7166781">.</span><span class="ident" id="7166782">Errorf</span><span class="op" id="7166788">(</span><span class="string" id="7166789">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7166826">,</span>&nbsp;<span class="ident" id="7166828">name</span><span class="op" id="7166832">,</span>&nbsp;<span class="ident" id="7166834">tt</span><span class="op" id="7166836">.</span><span class="ident" id="7166837">in</span><span class="op" id="7166839">,</span>&nbsp;<span class="ident" id="7166841">s</span><span class="op" id="7166842">,</span>&nbsp;<span class="ident" id="7166844">expected</span><span class="op" id="7166852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7166859">}</span><br>
<span class="lineno">400</span><span class="op" id="7166861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7166864">func</span>&nbsp;<span class="ident" id="7166869">TestURLString</span><span class="op" id="7166882">(</span><span class="ident" id="7166883">t</span>&nbsp;<span class="op" id="7166885">*</span><span class="ident" id="7166886">testing</span><span class="op" id="7166893">.</span><span class="ident" id="7166894">T</span><span class="op" id="7166895">)</span>&nbsp;<span class="op" id="7166897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7166900">DoTestString</span><span class="op" id="7166912">(</span><span class="ident" id="7166913">t</span><span class="op" id="7166914">,</span>&nbsp;<span class="ident" id="7166916">Parse</span><span class="op" id="7166921">,</span>&nbsp;<span class="string" id="7166923">&#34;Parse&#34;</span><span class="op" id="7166930">,</span>&nbsp;<span class="ident" id="7166932">urltests</span><span class="op" id="7166940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7166944">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7166988">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167015">noslash</span>&nbsp;<span class="op" id="7167023">:=</span>&nbsp;<span class="ident" id="7167026">URLTest</span><span class="op" id="7167033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167037">&#34;http://www.google.com/search&#34;</span><span class="op" id="7167067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167071">&amp;</span><span class="ident" id="7167072">URL</span><span class="op" id="7167075">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167080">Scheme</span><span class="op" id="7167086">:</span>&nbsp;<span class="string" id="7167088">&#34;http&#34;</span><span class="op" id="7167094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167099">Host</span><span class="op" id="7167103">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7167107">&#34;www.google.com&#34;</span><span class="op" id="7167123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167128">Path</span><span class="op" id="7167132">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7167136">&#34;search&#34;</span><span class="op" id="7167144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167148">}</span><span class="op" id="7167149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167153">&#34;&#34;</span><span class="op" id="7167155">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167161">s</span>&nbsp;<span class="op" id="7167163">:=</span>&nbsp;<span class="ident" id="7167166">noslash</span><span class="op" id="7167173">.</span><span class="ident" id="7167174">out</span><span class="op" id="7167177">.</span><span class="ident" id="7167178">String</span><span class="op" id="7167184">(</span><span class="op" id="7167185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167188">if</span>&nbsp;<span class="ident" id="7167191">s</span>&nbsp;<span class="op" id="7167193">!=</span>&nbsp;<span class="ident" id="7167196">noslash</span><span class="op" id="7167203">.</span><span class="ident" id="7167204">in</span>&nbsp;<span class="op" id="7167207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167211">t</span><span class="op" id="7167212">.</span><span class="ident" id="7167213">Errorf</span><span class="op" id="7167219">(</span><span class="string" id="7167220">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7167240">,</span>&nbsp;<span class="ident" id="7167242">noslash</span><span class="op" id="7167249">.</span><span class="ident" id="7167250">in</span><span class="op" id="7167252">,</span>&nbsp;<span class="ident" id="7167254">s</span><span class="op" id="7167255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167258">}</span><br>
<span class="lineno">420</span><span class="op" id="7167260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7167263">type</span>&nbsp;<span class="ident" id="7167268">EscapeTest</span>&nbsp;<span class="keyword" id="7167279">struct</span>&nbsp;<span class="op" id="7167286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167289">in</span>&nbsp;&nbsp;<span class="builtintype" id="7167293">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167301">out</span>&nbsp;<span class="builtintype" id="7167305">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167313">err</span>&nbsp;<span class="builtintype" id="7167317">error</span><br>
<span class="lineno"></span><span class="op" id="7167323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7167326">var</span>&nbsp;<span class="ident" id="7167330">unescapeTests</span>&nbsp;<span class="op" id="7167344">=</span>&nbsp;<span class="op" id="7167346">[</span><span class="op" id="7167347">]</span><span class="ident" id="7167348">EscapeTest</span><span class="op" id="7167358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167361">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167365">&#34;&#34;</span><span class="op" id="7167367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167371">&#34;&#34;</span><span class="op" id="7167373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167377">nil</span><span class="op" id="7167380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167383">}</span><span class="op" id="7167384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167387">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167391">&#34;abc&#34;</span><span class="op" id="7167396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167400">&#34;abc&#34;</span><span class="op" id="7167405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167409">nil</span><span class="op" id="7167412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167415">}</span><span class="op" id="7167416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167419">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167423">&#34;1%41&#34;</span><span class="op" id="7167429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167433">&#34;1A&#34;</span><span class="op" id="7167437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167441">nil</span><span class="op" id="7167444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167447">}</span><span class="op" id="7167448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167451">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167455">&#34;1%41%42%43&#34;</span><span class="op" id="7167467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167471">&#34;1ABC&#34;</span><span class="op" id="7167477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167481">nil</span><span class="op" id="7167484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167487">}</span><span class="op" id="7167488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167491">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167495">&#34;%4a&#34;</span><span class="op" id="7167500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167504">&#34;J&#34;</span><span class="op" id="7167507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167511">nil</span><span class="op" id="7167514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167517">}</span><span class="op" id="7167518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167521">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167525">&#34;%6F&#34;</span><span class="op" id="7167530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167534">&#34;o&#34;</span><span class="op" id="7167537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167541">nil</span><span class="op" id="7167544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167547">}</span><span class="op" id="7167548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167551">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167555">&#34;%&#34;</span><span class="op" id="7167558">,</span>&nbsp;<span class="comment" id="7167560">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167595">&#34;&#34;</span><span class="op" id="7167597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167601">EscapeError</span><span class="op" id="7167612">(</span><span class="string" id="7167613">&#34;%&#34;</span><span class="op" id="7167616">)</span><span class="op" id="7167617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167620">}</span><span class="op" id="7167621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167624">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167628">&#34;%a&#34;</span><span class="op" id="7167632">,</span>&nbsp;<span class="comment" id="7167634">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167669">&#34;&#34;</span><span class="op" id="7167671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167675">EscapeError</span><span class="op" id="7167686">(</span><span class="string" id="7167687">&#34;%a&#34;</span><span class="op" id="7167691">)</span><span class="op" id="7167692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167695">}</span><span class="op" id="7167696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167699">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167703">&#34;%1&#34;</span><span class="op" id="7167707">,</span>&nbsp;<span class="comment" id="7167709">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167744">&#34;&#34;</span><span class="op" id="7167746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167750">EscapeError</span><span class="op" id="7167761">(</span><span class="string" id="7167762">&#34;%1&#34;</span><span class="op" id="7167766">)</span><span class="op" id="7167767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167770">}</span><span class="op" id="7167771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167774">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167778">&#34;123%45%6&#34;</span><span class="op" id="7167788">,</span>&nbsp;<span class="comment" id="7167790">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167825">&#34;&#34;</span><span class="op" id="7167827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167831">EscapeError</span><span class="op" id="7167842">(</span><span class="string" id="7167843">&#34;%6&#34;</span><span class="op" id="7167847">)</span><span class="op" id="7167848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167851">}</span><span class="op" id="7167852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167855">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167859">&#34;%zzzzz&#34;</span><span class="op" id="7167867">,</span>&nbsp;<span class="comment" id="7167869">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7167893">&#34;&#34;</span><span class="op" id="7167895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167899">EscapeError</span><span class="op" id="7167910">(</span><span class="string" id="7167911">&#34;%zz&#34;</span><span class="op" id="7167916">)</span><span class="op" id="7167917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7167920">}</span><span class="op" id="7167921">,</span><br>
<span class="lineno"></span><span class="op" id="7167923">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7167926">func</span>&nbsp;<span class="ident" id="7167931">TestUnescape</span><span class="op" id="7167943">(</span><span class="ident" id="7167944">t</span>&nbsp;<span class="op" id="7167946">*</span><span class="ident" id="7167947">testing</span><span class="op" id="7167954">.</span><span class="ident" id="7167955">T</span><span class="op" id="7167956">)</span>&nbsp;<span class="op" id="7167958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7167961">for</span>&nbsp;<span class="ident" id="7167965">_</span><span class="op" id="7167966">,</span>&nbsp;<span class="ident" id="7167968">tt</span>&nbsp;<span class="op" id="7167971">:=</span>&nbsp;<span class="keyword" id="7167974">range</span>&nbsp;<span class="ident" id="7167980">unescapeTests</span>&nbsp;<span class="op" id="7167994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7167998">actual</span><span class="op" id="7168004">,</span>&nbsp;<span class="ident" id="7168006">err</span>&nbsp;<span class="op" id="7168010">:=</span>&nbsp;<span class="ident" id="7168013">QueryUnescape</span><span class="op" id="7168026">(</span><span class="ident" id="7168027">tt</span><span class="op" id="7168029">.</span><span class="ident" id="7168030">in</span><span class="op" id="7168032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168036">if</span>&nbsp;<span class="ident" id="7168039">actual</span>&nbsp;<span class="op" id="7168046">!=</span>&nbsp;<span class="ident" id="7168049">tt</span><span class="op" id="7168051">.</span><span class="ident" id="7168052">out</span>&nbsp;<span class="op" id="7168056">||</span>&nbsp;<span class="op" id="7168059">(</span><span class="ident" id="7168060">err</span>&nbsp;<span class="op" id="7168064">!=</span>&nbsp;<span class="ident" id="7168067">nil</span><span class="op" id="7168070">)</span>&nbsp;<span class="op" id="7168072">!=</span>&nbsp;<span class="op" id="7168075">(</span><span class="ident" id="7168076">tt</span><span class="op" id="7168078">.</span><span class="ident" id="7168079">err</span>&nbsp;<span class="op" id="7168083">!=</span>&nbsp;<span class="ident" id="7168086">nil</span><span class="op" id="7168089">)</span>&nbsp;<span class="op" id="7168091">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168096">t</span><span class="op" id="7168097">.</span><span class="ident" id="7168098">Errorf</span><span class="op" id="7168104">(</span><span class="string" id="7168105">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7168146">,</span>&nbsp;<span class="ident" id="7168148">tt</span><span class="op" id="7168150">.</span><span class="ident" id="7168151">in</span><span class="op" id="7168153">,</span>&nbsp;<span class="ident" id="7168155">actual</span><span class="op" id="7168161">,</span>&nbsp;<span class="ident" id="7168163">err</span><span class="op" id="7168166">,</span>&nbsp;<span class="ident" id="7168168">tt</span><span class="op" id="7168170">.</span><span class="ident" id="7168171">out</span><span class="op" id="7168174">,</span>&nbsp;<span class="ident" id="7168176">tt</span><span class="op" id="7168178">.</span><span class="ident" id="7168179">err</span><span class="op" id="7168182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168189">}</span><br>
<span class="lineno"></span><span class="op" id="7168191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7168194">var</span>&nbsp;<span class="ident" id="7168198">escapeTests</span>&nbsp;<span class="op" id="7168210">=</span>&nbsp;<span class="op" id="7168212">[</span><span class="op" id="7168213">]</span><span class="ident" id="7168214">EscapeTest</span><span class="op" id="7168224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168231">&#34;&#34;</span><span class="op" id="7168233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168237">&#34;&#34;</span><span class="op" id="7168239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168243">nil</span><span class="op" id="7168246">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168249">}</span><span class="op" id="7168250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168257">&#34;abc&#34;</span><span class="op" id="7168262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168266">&#34;abc&#34;</span><span class="op" id="7168271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168275">nil</span><span class="op" id="7168278">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168281">}</span><span class="op" id="7168282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168289">&#34;one&nbsp;two&#34;</span><span class="op" id="7168298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168302">&#34;one+two&#34;</span><span class="op" id="7168311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168315">nil</span><span class="op" id="7168318">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168321">}</span><span class="op" id="7168322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168329">&#34;10%&#34;</span><span class="op" id="7168334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168338">&#34;10%25&#34;</span><span class="op" id="7168345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168349">nil</span><span class="op" id="7168352">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168355">}</span><span class="op" id="7168356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168363">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7168402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7168406">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7168508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168512">nil</span><span class="op" id="7168515">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168518">}</span><span class="op" id="7168519">,</span><br>
<span class="lineno"></span><span class="op" id="7168521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7168524">func</span>&nbsp;<span class="ident" id="7168529">TestEscape</span><span class="op" id="7168539">(</span><span class="ident" id="7168540">t</span>&nbsp;<span class="op" id="7168542">*</span><span class="ident" id="7168543">testing</span><span class="op" id="7168550">.</span><span class="ident" id="7168551">T</span><span class="op" id="7168552">)</span>&nbsp;<span class="op" id="7168554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168557">for</span>&nbsp;<span class="ident" id="7168561">_</span><span class="op" id="7168562">,</span>&nbsp;<span class="ident" id="7168564">tt</span>&nbsp;<span class="op" id="7168567">:=</span>&nbsp;<span class="keyword" id="7168570">range</span>&nbsp;<span class="ident" id="7168576">escapeTests</span>&nbsp;<span class="op" id="7168588">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168592">actual</span>&nbsp;<span class="op" id="7168599">:=</span>&nbsp;<span class="ident" id="7168602">QueryEscape</span><span class="op" id="7168613">(</span><span class="ident" id="7168614">tt</span><span class="op" id="7168616">.</span><span class="ident" id="7168617">in</span><span class="op" id="7168619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168623">if</span>&nbsp;<span class="ident" id="7168626">tt</span><span class="op" id="7168628">.</span><span class="ident" id="7168629">out</span>&nbsp;<span class="op" id="7168633">!=</span>&nbsp;<span class="ident" id="7168636">actual</span>&nbsp;<span class="op" id="7168643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168648">t</span><span class="op" id="7168649">.</span><span class="ident" id="7168650">Errorf</span><span class="op" id="7168656">(</span><span class="string" id="7168657">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7168688">,</span>&nbsp;<span class="ident" id="7168690">tt</span><span class="op" id="7168692">.</span><span class="ident" id="7168693">in</span><span class="op" id="7168695">,</span>&nbsp;<span class="ident" id="7168697">actual</span><span class="op" id="7168703">,</span>&nbsp;<span class="ident" id="7168705">tt</span><span class="op" id="7168707">.</span><span class="ident" id="7168708">out</span><span class="op" id="7168711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7168720">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168787">roundtrip</span><span class="op" id="7168796">,</span>&nbsp;<span class="ident" id="7168798">err</span>&nbsp;<span class="op" id="7168802">:=</span>&nbsp;<span class="ident" id="7168805">QueryUnescape</span><span class="op" id="7168818">(</span><span class="ident" id="7168819">actual</span><span class="op" id="7168825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7168829">if</span>&nbsp;<span class="ident" id="7168832">roundtrip</span>&nbsp;<span class="op" id="7168842">!=</span>&nbsp;<span class="ident" id="7168845">tt</span><span class="op" id="7168847">.</span><span class="ident" id="7168848">in</span>&nbsp;<span class="op" id="7168851">||</span>&nbsp;<span class="ident" id="7168854">err</span>&nbsp;<span class="op" id="7168858">!=</span>&nbsp;<span class="ident" id="7168861">nil</span>&nbsp;<span class="op" id="7168865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7168870">t</span><span class="op" id="7168871">.</span><span class="ident" id="7168872">Errorf</span><span class="op" id="7168878">(</span><span class="string" id="7168879">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7168920">,</span>&nbsp;<span class="ident" id="7168922">actual</span><span class="op" id="7168928">,</span>&nbsp;<span class="ident" id="7168930">roundtrip</span><span class="op" id="7168939">,</span>&nbsp;<span class="ident" id="7168941">err</span><span class="op" id="7168944">,</span>&nbsp;<span class="ident" id="7168946">tt</span><span class="op" id="7168948">.</span><span class="ident" id="7168949">in</span><span class="op" id="7168951">,</span>&nbsp;<span class="string" id="7168953">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7168965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168969">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7168972">}</span><br>
<span class="lineno"></span><span class="op" id="7168974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7168977">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7169015">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7169057">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7169110">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7169193">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7169198">type</span>&nbsp;<span class="ident" id="7169203">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7169219">struct</span>&nbsp;<span class="op" id="7169226">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169229">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7169238">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169246">expected</span>&nbsp;<span class="builtintype" id="7169255">string</span><br>
<span class="lineno"></span><span class="op" id="7169262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7169265">var</span>&nbsp;<span class="ident" id="7169269">encodeQueryTests</span>&nbsp;<span class="op" id="7169286">=</span>&nbsp;<span class="op" id="7169288">[</span><span class="op" id="7169289">]</span><span class="ident" id="7169290">EncodeQueryTest</span><span class="op" id="7169305">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169308">{</span><span class="ident" id="7169309">nil</span><span class="op" id="7169312">,</span>&nbsp;<span class="string" id="7169314">&#34;&#34;</span><span class="op" id="7169316">}</span><span class="op" id="7169317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169320">{</span><span class="ident" id="7169321">Values</span><span class="op" id="7169327">{</span><span class="string" id="7169328">&#34;q&#34;</span><span class="op" id="7169331">:</span>&nbsp;<span class="op" id="7169333">{</span><span class="string" id="7169334">&#34;puppies&#34;</span><span class="op" id="7169343">}</span><span class="op" id="7169344">,</span>&nbsp;<span class="string" id="7169346">&#34;oe&#34;</span><span class="op" id="7169350">:</span>&nbsp;<span class="op" id="7169352">{</span><span class="string" id="7169353">&#34;utf8&#34;</span><span class="op" id="7169359">}</span><span class="op" id="7169360">}</span><span class="op" id="7169361">,</span>&nbsp;<span class="string" id="7169363">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7169382">}</span><span class="op" id="7169383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169386">{</span><span class="ident" id="7169387">Values</span><span class="op" id="7169393">{</span><span class="string" id="7169394">&#34;q&#34;</span><span class="op" id="7169397">:</span>&nbsp;<span class="op" id="7169399">{</span><span class="string" id="7169400">&#34;dogs&#34;</span><span class="op" id="7169406">,</span>&nbsp;<span class="string" id="7169408">&#34;&amp;&#34;</span><span class="op" id="7169411">,</span>&nbsp;<span class="string" id="7169413">&#34;7&#34;</span><span class="op" id="7169416">}</span><span class="op" id="7169417">}</span><span class="op" id="7169418">,</span>&nbsp;<span class="string" id="7169420">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7169438">}</span><span class="op" id="7169439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169442">{</span><span class="ident" id="7169443">Values</span><span class="op" id="7169449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7169453">&#34;a&#34;</span><span class="op" id="7169456">:</span>&nbsp;<span class="op" id="7169458">{</span><span class="string" id="7169459">&#34;a1&#34;</span><span class="op" id="7169463">,</span>&nbsp;<span class="string" id="7169465">&#34;a2&#34;</span><span class="op" id="7169469">,</span>&nbsp;<span class="string" id="7169471">&#34;a3&#34;</span><span class="op" id="7169475">}</span><span class="op" id="7169476">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7169480">&#34;b&#34;</span><span class="op" id="7169483">:</span>&nbsp;<span class="op" id="7169485">{</span><span class="string" id="7169486">&#34;b1&#34;</span><span class="op" id="7169490">,</span>&nbsp;<span class="string" id="7169492">&#34;b2&#34;</span><span class="op" id="7169496">,</span>&nbsp;<span class="string" id="7169498">&#34;b3&#34;</span><span class="op" id="7169502">}</span><span class="op" id="7169503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7169507">&#34;c&#34;</span><span class="op" id="7169510">:</span>&nbsp;<span class="op" id="7169512">{</span><span class="string" id="7169513">&#34;c1&#34;</span><span class="op" id="7169517">,</span>&nbsp;<span class="string" id="7169519">&#34;c2&#34;</span><span class="op" id="7169523">,</span>&nbsp;<span class="string" id="7169525">&#34;c3&#34;</span><span class="op" id="7169529">}</span><span class="op" id="7169530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169533">}</span><span class="op" id="7169534">,</span>&nbsp;<span class="string" id="7169536">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7169582">}</span><span class="op" id="7169583">,</span><br>
<span class="lineno"></span><span class="op" id="7169585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7169588">func</span>&nbsp;<span class="ident" id="7169593">TestEncodeQuery</span><span class="op" id="7169608">(</span><span class="ident" id="7169609">t</span>&nbsp;<span class="op" id="7169611">*</span><span class="ident" id="7169612">testing</span><span class="op" id="7169619">.</span><span class="ident" id="7169620">T</span><span class="op" id="7169621">)</span>&nbsp;<span class="op" id="7169623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169626">for</span>&nbsp;<span class="ident" id="7169630">_</span><span class="op" id="7169631">,</span>&nbsp;<span class="ident" id="7169633">tt</span>&nbsp;<span class="op" id="7169636">:=</span>&nbsp;<span class="keyword" id="7169639">range</span>&nbsp;<span class="ident" id="7169645">encodeQueryTests</span>&nbsp;<span class="op" id="7169662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7169666">if</span>&nbsp;<span class="ident" id="7169669">q</span>&nbsp;<span class="op" id="7169671">:=</span>&nbsp;<span class="ident" id="7169674">tt</span><span class="op" id="7169676">.</span><span class="ident" id="7169677">m</span><span class="op" id="7169678">.</span><span class="ident" id="7169679">Encode</span><span class="op" id="7169685">(</span><span class="op" id="7169686">)</span><span class="op" id="7169687">;</span>&nbsp;<span class="ident" id="7169689">q</span>&nbsp;<span class="op" id="7169691">!=</span>&nbsp;<span class="ident" id="7169694">tt</span><span class="op" id="7169696">.</span><span class="ident" id="7169697">expected</span>&nbsp;<span class="op" id="7169706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169711">t</span><span class="op" id="7169712">.</span><span class="ident" id="7169713">Errorf</span><span class="op" id="7169719">(</span><span class="string" id="7169720">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7169752">,</span>&nbsp;<span class="ident" id="7169754">tt</span><span class="op" id="7169756">.</span><span class="ident" id="7169757">m</span><span class="op" id="7169758">,</span>&nbsp;<span class="ident" id="7169760">q</span><span class="op" id="7169761">,</span>&nbsp;<span class="ident" id="7169763">tt</span><span class="op" id="7169765">.</span><span class="ident" id="7169766">expected</span><span class="op" id="7169774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169778">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169781">}</span><br>
<span class="lineno"></span><span class="op" id="7169783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7169786">var</span>&nbsp;<span class="ident" id="7169790">resolvePathTests</span>&nbsp;<span class="op" id="7169807">=</span>&nbsp;<span class="op" id="7169809">[</span><span class="op" id="7169810">]</span><span class="keyword" id="7169811">struct</span>&nbsp;<span class="op" id="7169818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7169821">base</span><span class="op" id="7169825">,</span>&nbsp;<span class="ident" id="7169827">ref</span><span class="op" id="7169830">,</span>&nbsp;<span class="ident" id="7169832">expected</span>&nbsp;<span class="builtintype" id="7169841">string</span><br>
<span class="lineno">570</span><span class="op" id="7169848">}</span><span class="op" id="7169849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169852">{</span><span class="string" id="7169853">&#34;a/b&#34;</span><span class="op" id="7169858">,</span>&nbsp;<span class="string" id="7169860">&#34;.&#34;</span><span class="op" id="7169863">,</span>&nbsp;<span class="string" id="7169865">&#34;/a/&#34;</span><span class="op" id="7169870">}</span><span class="op" id="7169871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169874">{</span><span class="string" id="7169875">&#34;a/b&#34;</span><span class="op" id="7169880">,</span>&nbsp;<span class="string" id="7169882">&#34;c&#34;</span><span class="op" id="7169885">,</span>&nbsp;<span class="string" id="7169887">&#34;/a/c&#34;</span><span class="op" id="7169893">}</span><span class="op" id="7169894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169897">{</span><span class="string" id="7169898">&#34;a/b&#34;</span><span class="op" id="7169903">,</span>&nbsp;<span class="string" id="7169905">&#34;..&#34;</span><span class="op" id="7169909">,</span>&nbsp;<span class="string" id="7169911">&#34;/&#34;</span><span class="op" id="7169914">}</span><span class="op" id="7169915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169918">{</span><span class="string" id="7169919">&#34;a/&#34;</span><span class="op" id="7169923">,</span>&nbsp;<span class="string" id="7169925">&#34;..&#34;</span><span class="op" id="7169929">,</span>&nbsp;<span class="string" id="7169931">&#34;/&#34;</span><span class="op" id="7169934">}</span><span class="op" id="7169935">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169938">{</span><span class="string" id="7169939">&#34;a/&#34;</span><span class="op" id="7169943">,</span>&nbsp;<span class="string" id="7169945">&#34;../..&#34;</span><span class="op" id="7169952">,</span>&nbsp;<span class="string" id="7169954">&#34;/&#34;</span><span class="op" id="7169957">}</span><span class="op" id="7169958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169961">{</span><span class="string" id="7169962">&#34;a/b/c&#34;</span><span class="op" id="7169969">,</span>&nbsp;<span class="string" id="7169971">&#34;..&#34;</span><span class="op" id="7169975">,</span>&nbsp;<span class="string" id="7169977">&#34;/a/&#34;</span><span class="op" id="7169982">}</span><span class="op" id="7169983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7169986">{</span><span class="string" id="7169987">&#34;a/b/c&#34;</span><span class="op" id="7169994">,</span>&nbsp;<span class="string" id="7169996">&#34;../d&#34;</span><span class="op" id="7170002">,</span>&nbsp;<span class="string" id="7170004">&#34;/a/d&#34;</span><span class="op" id="7170010">}</span><span class="op" id="7170011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170014">{</span><span class="string" id="7170015">&#34;a/b/c&#34;</span><span class="op" id="7170022">,</span>&nbsp;<span class="string" id="7170024">&#34;.././d&#34;</span><span class="op" id="7170032">,</span>&nbsp;<span class="string" id="7170034">&#34;/a/d&#34;</span><span class="op" id="7170040">}</span><span class="op" id="7170041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170044">{</span><span class="string" id="7170045">&#34;a/b&#34;</span><span class="op" id="7170050">,</span>&nbsp;<span class="string" id="7170052">&#34;./..&#34;</span><span class="op" id="7170058">,</span>&nbsp;<span class="string" id="7170060">&#34;/&#34;</span><span class="op" id="7170063">}</span><span class="op" id="7170064">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170067">{</span><span class="string" id="7170068">&#34;a/./b&#34;</span><span class="op" id="7170075">,</span>&nbsp;<span class="string" id="7170077">&#34;.&#34;</span><span class="op" id="7170080">,</span>&nbsp;<span class="string" id="7170082">&#34;/a/&#34;</span><span class="op" id="7170087">}</span><span class="op" id="7170088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170091">{</span><span class="string" id="7170092">&#34;a/../&#34;</span><span class="op" id="7170099">,</span>&nbsp;<span class="string" id="7170101">&#34;.&#34;</span><span class="op" id="7170104">,</span>&nbsp;<span class="string" id="7170106">&#34;/&#34;</span><span class="op" id="7170109">}</span><span class="op" id="7170110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170113">{</span><span class="string" id="7170114">&#34;a/.././b&#34;</span><span class="op" id="7170124">,</span>&nbsp;<span class="string" id="7170126">&#34;c&#34;</span><span class="op" id="7170129">,</span>&nbsp;<span class="string" id="7170131">&#34;/c&#34;</span><span class="op" id="7170135">}</span><span class="op" id="7170136">,</span><br>
<span class="lineno"></span><span class="op" id="7170138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7170141">func</span>&nbsp;<span class="ident" id="7170146">TestResolvePath</span><span class="op" id="7170161">(</span><span class="ident" id="7170162">t</span>&nbsp;<span class="op" id="7170164">*</span><span class="ident" id="7170165">testing</span><span class="op" id="7170172">.</span><span class="ident" id="7170173">T</span><span class="op" id="7170174">)</span>&nbsp;<span class="op" id="7170176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7170179">for</span>&nbsp;<span class="ident" id="7170183">_</span><span class="op" id="7170184">,</span>&nbsp;<span class="ident" id="7170186">test</span>&nbsp;<span class="op" id="7170191">:=</span>&nbsp;<span class="keyword" id="7170194">range</span>&nbsp;<span class="ident" id="7170200">resolvePathTests</span>&nbsp;<span class="op" id="7170217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7170221">got</span>&nbsp;<span class="op" id="7170225">:=</span>&nbsp;<span class="ident" id="7170228">resolvePath</span><span class="op" id="7170239">(</span><span class="ident" id="7170240">test</span><span class="op" id="7170244">.</span><span class="ident" id="7170245">base</span><span class="op" id="7170249">,</span>&nbsp;<span class="ident" id="7170251">test</span><span class="op" id="7170255">.</span><span class="ident" id="7170256">ref</span><span class="op" id="7170259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7170263">if</span>&nbsp;<span class="ident" id="7170266">got</span>&nbsp;<span class="op" id="7170270">!=</span>&nbsp;<span class="ident" id="7170273">test</span><span class="op" id="7170277">.</span><span class="ident" id="7170278">expected</span>&nbsp;<span class="op" id="7170287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7170292">t</span><span class="op" id="7170293">.</span><span class="ident" id="7170294">Errorf</span><span class="op" id="7170300">(</span><span class="string" id="7170301">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7170334">,</span>&nbsp;<span class="ident" id="7170336">test</span><span class="op" id="7170340">.</span><span class="ident" id="7170341">base</span><span class="op" id="7170345">,</span>&nbsp;<span class="ident" id="7170347">test</span><span class="op" id="7170351">.</span><span class="ident" id="7170352">ref</span><span class="op" id="7170355">,</span>&nbsp;<span class="ident" id="7170357">got</span><span class="op" id="7170360">,</span>&nbsp;<span class="ident" id="7170362">test</span><span class="op" id="7170366">.</span><span class="ident" id="7170367">expected</span><span class="op" id="7170375">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170382">}</span><br>
<span class="lineno"></span><span class="op" id="7170384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7170387">var</span>&nbsp;<span class="ident" id="7170391">resolveReferenceTests</span>&nbsp;<span class="op" id="7170413">=</span>&nbsp;<span class="op" id="7170415">[</span><span class="op" id="7170416">]</span><span class="keyword" id="7170417">struct</span>&nbsp;<span class="op" id="7170424">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7170427">base</span><span class="op" id="7170431">,</span>&nbsp;<span class="ident" id="7170433">rel</span><span class="op" id="7170436">,</span>&nbsp;<span class="ident" id="7170438">expected</span>&nbsp;<span class="builtintype" id="7170447">string</span><br>
<span class="lineno"></span><span class="op" id="7170454">}</span><span class="op" id="7170455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7170458">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170486">{</span><span class="string" id="7170487">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7170507">,</span>&nbsp;<span class="string" id="7170509">&#34;https://bar.com/&#34;</span><span class="op" id="7170527">,</span>&nbsp;<span class="string" id="7170529">&#34;https://bar.com/&#34;</span><span class="op" id="7170547">}</span><span class="op" id="7170548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170551">{</span><span class="string" id="7170552">&#34;http://foo.com/&#34;</span><span class="op" id="7170569">,</span>&nbsp;<span class="string" id="7170571">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7170593">,</span>&nbsp;<span class="string" id="7170595">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7170617">}</span><span class="op" id="7170618">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170621">{</span><span class="string" id="7170622">&#34;http://foo.com/bar&#34;</span><span class="op" id="7170642">,</span>&nbsp;<span class="string" id="7170644">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7170668">,</span>&nbsp;<span class="string" id="7170670">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7170694">}</span><span class="op" id="7170695">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7170699">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170728">{</span><span class="string" id="7170729">&#34;http://foo.com/bar&#34;</span><span class="op" id="7170749">,</span>&nbsp;<span class="string" id="7170751">&#34;/baz&#34;</span><span class="op" id="7170757">,</span>&nbsp;<span class="string" id="7170759">&#34;http://foo.com/baz&#34;</span><span class="op" id="7170779">}</span><span class="op" id="7170780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170783">{</span><span class="string" id="7170784">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7170810">,</span>&nbsp;<span class="string" id="7170812">&#34;/baz&#34;</span><span class="op" id="7170818">,</span>&nbsp;<span class="string" id="7170820">&#34;http://foo.com/baz&#34;</span><span class="op" id="7170840">}</span><span class="op" id="7170841">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170844">{</span><span class="string" id="7170845">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7170869">,</span>&nbsp;<span class="string" id="7170871">&#34;/baz?c=d&#34;</span><span class="op" id="7170881">,</span>&nbsp;<span class="string" id="7170883">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7170907">}</span><span class="op" id="7170908">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7170912">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7170932">{</span><span class="string" id="7170933">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7170958">,</span>&nbsp;<span class="string" id="7170960">&#34;//bar.com/quux&#34;</span><span class="op" id="7170976">,</span>&nbsp;<span class="string" id="7170978">&#34;https://bar.com/quux&#34;</span><span class="op" id="7171000">}</span><span class="op" id="7171001">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7171005">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7171036">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171062">{</span><span class="string" id="7171063">&#34;http://foo.com&#34;</span><span class="op" id="7171079">,</span>&nbsp;<span class="string" id="7171081">&#34;.&#34;</span><span class="op" id="7171084">,</span>&nbsp;<span class="string" id="7171086">&#34;http://foo.com/&#34;</span><span class="op" id="7171103">}</span><span class="op" id="7171104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171107">{</span><span class="string" id="7171108">&#34;http://foo.com/bar&#34;</span><span class="op" id="7171128">,</span>&nbsp;<span class="string" id="7171130">&#34;.&#34;</span><span class="op" id="7171133">,</span>&nbsp;<span class="string" id="7171135">&#34;http://foo.com/&#34;</span><span class="op" id="7171152">}</span><span class="op" id="7171153">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171156">{</span><span class="string" id="7171157">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7171178">,</span>&nbsp;<span class="string" id="7171180">&#34;.&#34;</span><span class="op" id="7171183">,</span>&nbsp;<span class="string" id="7171185">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7171206">}</span><span class="op" id="7171207">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7171211">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171230">{</span><span class="string" id="7171231">&#34;http://foo.com&#34;</span><span class="op" id="7171247">,</span>&nbsp;<span class="string" id="7171249">&#34;bar&#34;</span><span class="op" id="7171254">,</span>&nbsp;<span class="string" id="7171256">&#34;http://foo.com/bar&#34;</span><span class="op" id="7171276">}</span><span class="op" id="7171277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171280">{</span><span class="string" id="7171281">&#34;http://foo.com/&#34;</span><span class="op" id="7171298">,</span>&nbsp;<span class="string" id="7171300">&#34;bar&#34;</span><span class="op" id="7171305">,</span>&nbsp;<span class="string" id="7171307">&#34;http://foo.com/bar&#34;</span><span class="op" id="7171327">}</span><span class="op" id="7171328">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171331">{</span><span class="string" id="7171332">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171356">,</span>&nbsp;<span class="string" id="7171358">&#34;quux&#34;</span><span class="op" id="7171364">,</span>&nbsp;<span class="string" id="7171366">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7171391">}</span><span class="op" id="7171392">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7171396">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171413">{</span><span class="string" id="7171414">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171438">,</span>&nbsp;<span class="string" id="7171440">&#34;../quux&#34;</span><span class="op" id="7171449">,</span>&nbsp;<span class="string" id="7171451">&#34;http://foo.com/quux&#34;</span><span class="op" id="7171472">}</span><span class="op" id="7171473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171476">{</span><span class="string" id="7171477">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171501">,</span>&nbsp;<span class="string" id="7171503">&#34;../../../../../quux&#34;</span><span class="op" id="7171524">,</span>&nbsp;<span class="string" id="7171526">&#34;http://foo.com/quux&#34;</span><span class="op" id="7171547">}</span><span class="op" id="7171548">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171551">{</span><span class="string" id="7171552">&#34;http://foo.com/bar&#34;</span><span class="op" id="7171572">,</span>&nbsp;<span class="string" id="7171574">&#34;..&#34;</span><span class="op" id="7171578">,</span>&nbsp;<span class="string" id="7171580">&#34;http://foo.com/&#34;</span><span class="op" id="7171597">}</span><span class="op" id="7171598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171601">{</span><span class="string" id="7171602">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171626">,</span>&nbsp;<span class="string" id="7171628">&#34;./..&#34;</span><span class="op" id="7171634">,</span>&nbsp;<span class="string" id="7171636">&#34;http://foo.com/&#34;</span><span class="op" id="7171653">}</span><span class="op" id="7171654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7171657">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171693">{</span><span class="string" id="7171694">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171718">,</span>&nbsp;<span class="string" id="7171720">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7171741">,</span>&nbsp;<span class="string" id="7171743">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7171773">}</span><span class="op" id="7171774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171777">{</span><span class="string" id="7171778">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171802">,</span>&nbsp;<span class="string" id="7171804">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7171827">,</span>&nbsp;<span class="string" id="7171829">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7171859">}</span><span class="op" id="7171860">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171863">{</span><span class="string" id="7171864">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171888">,</span>&nbsp;<span class="string" id="7171890">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7171915">,</span>&nbsp;<span class="string" id="7171917">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7171947">}</span><span class="op" id="7171948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7171951">{</span><span class="string" id="7171952">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7171976">,</span>&nbsp;<span class="string" id="7171978">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7172003">,</span>&nbsp;<span class="string" id="7172005">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7172035">}</span><span class="op" id="7172036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172039">{</span><span class="string" id="7172040">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7172064">,</span>&nbsp;<span class="string" id="7172066">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7172103">,</span>&nbsp;<span class="string" id="7172105">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7172135">}</span><span class="op" id="7172136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172139">{</span><span class="string" id="7172140">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7172164">,</span>&nbsp;<span class="string" id="7172166">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7172203">,</span>&nbsp;<span class="string" id="7172205">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7172235">}</span><span class="op" id="7172236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172239">{</span><span class="string" id="7172240">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7172264">,</span>&nbsp;<span class="string" id="7172266">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7172317">,</span>&nbsp;<span class="string" id="7172319">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7172349">}</span><span class="op" id="7172350">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172353">{</span><span class="string" id="7172354">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7172378">,</span>&nbsp;<span class="string" id="7172380">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7172422">,</span>&nbsp;<span class="string" id="7172424">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7172454">}</span><span class="op" id="7172455">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172459">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172520">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172573">{</span><span class="string" id="7172574">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7172614">,</span>&nbsp;<span class="string" id="7172616">&#34;../baz&#34;</span><span class="op" id="7172624">,</span>&nbsp;<span class="string" id="7172626">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7172650">}</span><span class="op" id="7172651">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172655">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172684">{</span><span class="string" id="7172685">&#34;http://foo.com/bar&#34;</span><span class="op" id="7172705">,</span>&nbsp;<span class="string" id="7172707">&#34;...&#34;</span><span class="op" id="7172712">,</span>&nbsp;<span class="string" id="7172714">&#34;http://foo.com/...&#34;</span><span class="op" id="7172734">}</span><span class="op" id="7172735">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172739">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172752">{</span><span class="string" id="7172753">&#34;http://foo.com/bar&#34;</span><span class="op" id="7172773">,</span>&nbsp;<span class="string" id="7172775">&#34;.#frag&#34;</span><span class="op" id="7172783">,</span>&nbsp;<span class="string" id="7172785">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7172807">}</span><span class="op" id="7172808">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172812">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7172842">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172895">{</span><span class="string" id="7172896">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7172916">,</span>&nbsp;<span class="string" id="7172918">&#34;g:h&#34;</span><span class="op" id="7172923">,</span>&nbsp;<span class="string" id="7172925">&#34;g:h&#34;</span><span class="op" id="7172930">}</span><span class="op" id="7172931">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172934">{</span><span class="string" id="7172935">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7172955">,</span>&nbsp;<span class="string" id="7172957">&#34;g&#34;</span><span class="op" id="7172960">,</span>&nbsp;<span class="string" id="7172962">&#34;http://a/b/c/g&#34;</span><span class="op" id="7172978">}</span><span class="op" id="7172979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7172982">{</span><span class="string" id="7172983">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173003">,</span>&nbsp;<span class="string" id="7173005">&#34;./g&#34;</span><span class="op" id="7173010">,</span>&nbsp;<span class="string" id="7173012">&#34;http://a/b/c/g&#34;</span><span class="op" id="7173028">}</span><span class="op" id="7173029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173032">{</span><span class="string" id="7173033">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173053">,</span>&nbsp;<span class="string" id="7173055">&#34;g/&#34;</span><span class="op" id="7173059">,</span>&nbsp;<span class="string" id="7173061">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7173078">}</span><span class="op" id="7173079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173082">{</span><span class="string" id="7173083">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173103">,</span>&nbsp;<span class="string" id="7173105">&#34;/g&#34;</span><span class="op" id="7173109">,</span>&nbsp;<span class="string" id="7173111">&#34;http://a/g&#34;</span><span class="op" id="7173123">}</span><span class="op" id="7173124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173127">{</span><span class="string" id="7173128">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173148">,</span>&nbsp;<span class="string" id="7173150">&#34;//g&#34;</span><span class="op" id="7173155">,</span>&nbsp;<span class="string" id="7173157">&#34;http://g&#34;</span><span class="op" id="7173167">}</span><span class="op" id="7173168">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173171">{</span><span class="string" id="7173172">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173192">,</span>&nbsp;<span class="string" id="7173194">&#34;?y&#34;</span><span class="op" id="7173198">,</span>&nbsp;<span class="string" id="7173200">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7173220">}</span><span class="op" id="7173221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173224">{</span><span class="string" id="7173225">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173245">,</span>&nbsp;<span class="string" id="7173247">&#34;g?y&#34;</span><span class="op" id="7173252">,</span>&nbsp;<span class="string" id="7173254">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7173272">}</span><span class="op" id="7173273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173276">{</span><span class="string" id="7173277">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173297">,</span>&nbsp;<span class="string" id="7173299">&#34;#s&#34;</span><span class="op" id="7173303">,</span>&nbsp;<span class="string" id="7173305">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7173327">}</span><span class="op" id="7173328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173331">{</span><span class="string" id="7173332">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173352">,</span>&nbsp;<span class="string" id="7173354">&#34;g#s&#34;</span><span class="op" id="7173359">,</span>&nbsp;<span class="string" id="7173361">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7173379">}</span><span class="op" id="7173380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173383">{</span><span class="string" id="7173384">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173404">,</span>&nbsp;<span class="string" id="7173406">&#34;g?y#s&#34;</span><span class="op" id="7173413">,</span>&nbsp;<span class="string" id="7173415">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7173435">}</span><span class="op" id="7173436">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173439">{</span><span class="string" id="7173440">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173460">,</span>&nbsp;<span class="string" id="7173462">&#34;;x&#34;</span><span class="op" id="7173466">,</span>&nbsp;<span class="string" id="7173468">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7173485">}</span><span class="op" id="7173486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173489">{</span><span class="string" id="7173490">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173510">,</span>&nbsp;<span class="string" id="7173512">&#34;g;x&#34;</span><span class="op" id="7173517">,</span>&nbsp;<span class="string" id="7173519">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7173537">}</span><span class="op" id="7173538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173541">{</span><span class="string" id="7173542">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173562">,</span>&nbsp;<span class="string" id="7173564">&#34;g;x?y#s&#34;</span><span class="op" id="7173573">,</span>&nbsp;<span class="string" id="7173575">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7173597">}</span><span class="op" id="7173598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173601">{</span><span class="string" id="7173602">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173622">,</span>&nbsp;<span class="string" id="7173624">&#34;&#34;</span><span class="op" id="7173626">,</span>&nbsp;<span class="string" id="7173628">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173648">}</span><span class="op" id="7173649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173652">{</span><span class="string" id="7173653">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173673">,</span>&nbsp;<span class="string" id="7173675">&#34;.&#34;</span><span class="op" id="7173678">,</span>&nbsp;<span class="string" id="7173680">&#34;http://a/b/c/&#34;</span><span class="op" id="7173695">}</span><span class="op" id="7173696">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173699">{</span><span class="string" id="7173700">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173720">,</span>&nbsp;<span class="string" id="7173722">&#34;./&#34;</span><span class="op" id="7173726">,</span>&nbsp;<span class="string" id="7173728">&#34;http://a/b/c/&#34;</span><span class="op" id="7173743">}</span><span class="op" id="7173744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173747">{</span><span class="string" id="7173748">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173768">,</span>&nbsp;<span class="string" id="7173770">&#34;..&#34;</span><span class="op" id="7173774">,</span>&nbsp;<span class="string" id="7173776">&#34;http://a/b/&#34;</span><span class="op" id="7173789">}</span><span class="op" id="7173790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173793">{</span><span class="string" id="7173794">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173814">,</span>&nbsp;<span class="string" id="7173816">&#34;../&#34;</span><span class="op" id="7173821">,</span>&nbsp;<span class="string" id="7173823">&#34;http://a/b/&#34;</span><span class="op" id="7173836">}</span><span class="op" id="7173837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173840">{</span><span class="string" id="7173841">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173861">,</span>&nbsp;<span class="string" id="7173863">&#34;../g&#34;</span><span class="op" id="7173869">,</span>&nbsp;<span class="string" id="7173871">&#34;http://a/b/g&#34;</span><span class="op" id="7173885">}</span><span class="op" id="7173886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173889">{</span><span class="string" id="7173890">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173910">,</span>&nbsp;<span class="string" id="7173912">&#34;../..&#34;</span><span class="op" id="7173919">,</span>&nbsp;<span class="string" id="7173921">&#34;http://a/&#34;</span><span class="op" id="7173932">}</span><span class="op" id="7173933">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173936">{</span><span class="string" id="7173937">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7173957">,</span>&nbsp;<span class="string" id="7173959">&#34;../../&#34;</span><span class="op" id="7173967">,</span>&nbsp;<span class="string" id="7173969">&#34;http://a/&#34;</span><span class="op" id="7173980">}</span><span class="op" id="7173981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7173984">{</span><span class="string" id="7173985">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174005">,</span>&nbsp;<span class="string" id="7174007">&#34;../../g&#34;</span><span class="op" id="7174016">,</span>&nbsp;<span class="string" id="7174018">&#34;http://a/g&#34;</span><span class="op" id="7174030">}</span><span class="op" id="7174031">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7174035">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7174067">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174120">{</span><span class="string" id="7174121">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174141">,</span>&nbsp;<span class="string" id="7174143">&#34;../../../g&#34;</span><span class="op" id="7174155">,</span>&nbsp;<span class="string" id="7174157">&#34;http://a/g&#34;</span><span class="op" id="7174169">}</span><span class="op" id="7174170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174173">{</span><span class="string" id="7174174">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174194">,</span>&nbsp;<span class="string" id="7174196">&#34;../../../../g&#34;</span><span class="op" id="7174211">,</span>&nbsp;<span class="string" id="7174213">&#34;http://a/g&#34;</span><span class="op" id="7174225">}</span><span class="op" id="7174226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174229">{</span><span class="string" id="7174230">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174250">,</span>&nbsp;<span class="string" id="7174252">&#34;/./g&#34;</span><span class="op" id="7174258">,</span>&nbsp;<span class="string" id="7174260">&#34;http://a/g&#34;</span><span class="op" id="7174272">}</span><span class="op" id="7174273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174276">{</span><span class="string" id="7174277">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174297">,</span>&nbsp;<span class="string" id="7174299">&#34;/../g&#34;</span><span class="op" id="7174306">,</span>&nbsp;<span class="string" id="7174308">&#34;http://a/g&#34;</span><span class="op" id="7174320">}</span><span class="op" id="7174321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174324">{</span><span class="string" id="7174325">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174345">,</span>&nbsp;<span class="string" id="7174347">&#34;g.&#34;</span><span class="op" id="7174351">,</span>&nbsp;<span class="string" id="7174353">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7174370">}</span><span class="op" id="7174371">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174374">{</span><span class="string" id="7174375">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174395">,</span>&nbsp;<span class="string" id="7174397">&#34;.g&#34;</span><span class="op" id="7174401">,</span>&nbsp;<span class="string" id="7174403">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7174420">}</span><span class="op" id="7174421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174424">{</span><span class="string" id="7174425">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174445">,</span>&nbsp;<span class="string" id="7174447">&#34;g..&#34;</span><span class="op" id="7174452">,</span>&nbsp;<span class="string" id="7174454">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7174472">}</span><span class="op" id="7174473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174476">{</span><span class="string" id="7174477">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174497">,</span>&nbsp;<span class="string" id="7174499">&#34;..g&#34;</span><span class="op" id="7174504">,</span>&nbsp;<span class="string" id="7174506">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7174524">}</span><span class="op" id="7174525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174528">{</span><span class="string" id="7174529">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174549">,</span>&nbsp;<span class="string" id="7174551">&#34;./../g&#34;</span><span class="op" id="7174559">,</span>&nbsp;<span class="string" id="7174561">&#34;http://a/b/g&#34;</span><span class="op" id="7174575">}</span><span class="op" id="7174576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174579">{</span><span class="string" id="7174580">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174600">,</span>&nbsp;<span class="string" id="7174602">&#34;./g/.&#34;</span><span class="op" id="7174609">,</span>&nbsp;<span class="string" id="7174611">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7174628">}</span><span class="op" id="7174629">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174632">{</span><span class="string" id="7174633">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174653">,</span>&nbsp;<span class="string" id="7174655">&#34;g/./h&#34;</span><span class="op" id="7174662">,</span>&nbsp;<span class="string" id="7174664">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7174682">}</span><span class="op" id="7174683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174686">{</span><span class="string" id="7174687">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174707">,</span>&nbsp;<span class="string" id="7174709">&#34;g/../h&#34;</span><span class="op" id="7174717">,</span>&nbsp;<span class="string" id="7174719">&#34;http://a/b/c/h&#34;</span><span class="op" id="7174735">}</span><span class="op" id="7174736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174739">{</span><span class="string" id="7174740">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174760">,</span>&nbsp;<span class="string" id="7174762">&#34;g;x=1/./y&#34;</span><span class="op" id="7174773">,</span>&nbsp;<span class="string" id="7174775">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7174797">}</span><span class="op" id="7174798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174801">{</span><span class="string" id="7174802">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174822">,</span>&nbsp;<span class="string" id="7174824">&#34;g;x=1/../y&#34;</span><span class="op" id="7174836">,</span>&nbsp;<span class="string" id="7174838">&#34;http://a/b/c/y&#34;</span><span class="op" id="7174854">}</span><span class="op" id="7174855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174858">{</span><span class="string" id="7174859">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174879">,</span>&nbsp;<span class="string" id="7174881">&#34;g?y/./x&#34;</span><span class="op" id="7174890">,</span>&nbsp;<span class="string" id="7174892">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7174914">}</span><span class="op" id="7174915">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174918">{</span><span class="string" id="7174919">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7174939">,</span>&nbsp;<span class="string" id="7174941">&#34;g?y/../x&#34;</span><span class="op" id="7174951">,</span>&nbsp;<span class="string" id="7174953">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7174976">}</span><span class="op" id="7174977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7174980">{</span><span class="string" id="7174981">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7175001">,</span>&nbsp;<span class="string" id="7175003">&#34;g#s/./x&#34;</span><span class="op" id="7175012">,</span>&nbsp;<span class="string" id="7175014">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7175036">}</span><span class="op" id="7175037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175040">{</span><span class="string" id="7175041">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7175061">,</span>&nbsp;<span class="string" id="7175063">&#34;g#s/../x&#34;</span><span class="op" id="7175073">,</span>&nbsp;<span class="string" id="7175075">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7175098">}</span><span class="op" id="7175099">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7175103">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175115">{</span><span class="string" id="7175116">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7175137">,</span>&nbsp;<span class="string" id="7175139">&#34;//g?q&#34;</span><span class="op" id="7175146">,</span>&nbsp;<span class="string" id="7175148">&#34;https://g?q&#34;</span><span class="op" id="7175161">}</span><span class="op" id="7175162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175165">{</span><span class="string" id="7175166">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7175187">,</span>&nbsp;<span class="string" id="7175189">&#34;//g#s&#34;</span><span class="op" id="7175196">,</span>&nbsp;<span class="string" id="7175198">&#34;https://g#s&#34;</span><span class="op" id="7175211">}</span><span class="op" id="7175212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175215">{</span><span class="string" id="7175216">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7175237">,</span>&nbsp;<span class="string" id="7175239">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7175254">,</span>&nbsp;<span class="string" id="7175256">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7175277">}</span><span class="op" id="7175278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175281">{</span><span class="string" id="7175282">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7175303">,</span>&nbsp;<span class="string" id="7175305">&#34;?y&#34;</span><span class="op" id="7175309">,</span>&nbsp;<span class="string" id="7175311">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7175332">}</span><span class="op" id="7175333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175336">{</span><span class="string" id="7175337">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7175360">,</span>&nbsp;<span class="string" id="7175362">&#34;?y&#34;</span><span class="op" id="7175366">,</span>&nbsp;<span class="string" id="7175368">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7175389">}</span><span class="op" id="7175390">,</span><br>
<span class="lineno">700</span><span class="op" id="7175392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7175395">func</span>&nbsp;<span class="ident" id="7175400">TestResolveReference</span><span class="op" id="7175420">(</span><span class="ident" id="7175421">t</span>&nbsp;<span class="op" id="7175423">*</span><span class="ident" id="7175424">testing</span><span class="op" id="7175431">.</span><span class="ident" id="7175432">T</span><span class="op" id="7175433">)</span>&nbsp;<span class="op" id="7175435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175438">mustParse</span>&nbsp;<span class="op" id="7175448">:=</span>&nbsp;<span class="keyword" id="7175451">func</span><span class="op" id="7175455">(</span><span class="ident" id="7175456">url</span>&nbsp;<span class="builtintype" id="7175460">string</span><span class="op" id="7175466">)</span>&nbsp;<span class="op" id="7175468">*</span><span class="ident" id="7175469">URL</span>&nbsp;<span class="op" id="7175473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175477">u</span><span class="op" id="7175478">,</span>&nbsp;<span class="ident" id="7175480">err</span>&nbsp;<span class="op" id="7175484">:=</span>&nbsp;<span class="ident" id="7175487">Parse</span><span class="op" id="7175492">(</span><span class="ident" id="7175493">url</span><span class="op" id="7175496">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7175500">if</span>&nbsp;<span class="ident" id="7175503">err</span>&nbsp;<span class="op" id="7175507">!=</span>&nbsp;<span class="ident" id="7175510">nil</span>&nbsp;<span class="op" id="7175514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175519">t</span><span class="op" id="7175520">.</span><span class="ident" id="7175521">Fatalf</span><span class="op" id="7175527">(</span><span class="string" id="7175528">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7175570">,</span>&nbsp;<span class="ident" id="7175572">url</span><span class="op" id="7175575">,</span>&nbsp;<span class="ident" id="7175577">err</span><span class="op" id="7175580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7175588">return</span>&nbsp;<span class="ident" id="7175595">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175598">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175601">opaque</span>&nbsp;<span class="op" id="7175608">:=</span>&nbsp;<span class="op" id="7175611">&amp;</span><span class="ident" id="7175612">URL</span><span class="op" id="7175615">{</span><span class="ident" id="7175616">Scheme</span><span class="op" id="7175622">:</span>&nbsp;<span class="string" id="7175624">&#34;scheme&#34;</span><span class="op" id="7175632">,</span>&nbsp;<span class="ident" id="7175634">Opaque</span><span class="op" id="7175640">:</span>&nbsp;<span class="string" id="7175642">&#34;opaque&#34;</span><span class="op" id="7175650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7175653">for</span>&nbsp;<span class="ident" id="7175657">_</span><span class="op" id="7175658">,</span>&nbsp;<span class="ident" id="7175660">test</span>&nbsp;<span class="op" id="7175665">:=</span>&nbsp;<span class="keyword" id="7175668">range</span>&nbsp;<span class="ident" id="7175674">resolveReferenceTests</span>&nbsp;<span class="op" id="7175696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175700">base</span>&nbsp;<span class="op" id="7175705">:=</span>&nbsp;<span class="ident" id="7175708">mustParse</span><span class="op" id="7175717">(</span><span class="ident" id="7175718">test</span><span class="op" id="7175722">.</span><span class="ident" id="7175723">base</span><span class="op" id="7175727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175731">rel</span>&nbsp;<span class="op" id="7175735">:=</span>&nbsp;<span class="ident" id="7175738">mustParse</span><span class="op" id="7175747">(</span><span class="ident" id="7175748">test</span><span class="op" id="7175752">.</span><span class="ident" id="7175753">rel</span><span class="op" id="7175756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175760">url</span>&nbsp;<span class="op" id="7175764">:=</span>&nbsp;<span class="ident" id="7175767">base</span><span class="op" id="7175771">.</span><span class="ident" id="7175772">ResolveReference</span><span class="op" id="7175788">(</span><span class="ident" id="7175789">rel</span><span class="op" id="7175792">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7175796">if</span>&nbsp;<span class="ident" id="7175799">url</span><span class="op" id="7175802">.</span><span class="ident" id="7175803">String</span><span class="op" id="7175809">(</span><span class="op" id="7175810">)</span>&nbsp;<span class="op" id="7175812">!=</span>&nbsp;<span class="ident" id="7175815">test</span><span class="op" id="7175819">.</span><span class="ident" id="7175820">expected</span>&nbsp;<span class="op" id="7175829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7175834">t</span><span class="op" id="7175835">.</span><span class="ident" id="7175836">Errorf</span><span class="op" id="7175842">(</span><span class="string" id="7175843">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7175887">,</span>&nbsp;<span class="ident" id="7175889">test</span><span class="op" id="7175893">.</span><span class="ident" id="7175894">base</span><span class="op" id="7175898">,</span>&nbsp;<span class="ident" id="7175900">test</span><span class="op" id="7175904">.</span><span class="ident" id="7175905">rel</span><span class="op" id="7175908">,</span>&nbsp;<span class="ident" id="7175910">test</span><span class="op" id="7175914">.</span><span class="ident" id="7175915">expected</span><span class="op" id="7175923">,</span>&nbsp;<span class="ident" id="7175925">url</span><span class="op" id="7175928">.</span><span class="ident" id="7175929">String</span><span class="op" id="7175935">(</span><span class="op" id="7175936">)</span><span class="op" id="7175937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7175941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7175945">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7175990">if</span>&nbsp;<span class="ident" id="7175993">base</span>&nbsp;<span class="op" id="7175998">==</span>&nbsp;<span class="ident" id="7176001">url</span>&nbsp;<span class="op" id="7176005">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176010">t</span><span class="op" id="7176011">.</span><span class="ident" id="7176012">Errorf</span><span class="op" id="7176018">(</span><span class="string" id="7176019">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7176078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7176086">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176125">url</span><span class="op" id="7176128">,</span>&nbsp;<span class="ident" id="7176130">err</span>&nbsp;<span class="op" id="7176134">:=</span>&nbsp;<span class="ident" id="7176137">base</span><span class="op" id="7176141">.</span><span class="ident" id="7176142">Parse</span><span class="op" id="7176147">(</span><span class="ident" id="7176148">test</span><span class="op" id="7176152">.</span><span class="ident" id="7176153">rel</span><span class="op" id="7176156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7176160">if</span>&nbsp;<span class="ident" id="7176163">err</span>&nbsp;<span class="op" id="7176167">!=</span>&nbsp;<span class="ident" id="7176170">nil</span>&nbsp;<span class="op" id="7176174">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176179">t</span><span class="op" id="7176180">.</span><span class="ident" id="7176181">Errorf</span><span class="op" id="7176187">(</span><span class="string" id="7176188">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7176218">,</span>&nbsp;<span class="ident" id="7176220">test</span><span class="op" id="7176224">.</span><span class="ident" id="7176225">base</span><span class="op" id="7176229">,</span>&nbsp;<span class="ident" id="7176231">test</span><span class="op" id="7176235">.</span><span class="ident" id="7176236">rel</span><span class="op" id="7176239">,</span>&nbsp;<span class="ident" id="7176241">err</span><span class="op" id="7176244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176248">}</span>&nbsp;<span class="keyword" id="7176250">else</span>&nbsp;<span class="keyword" id="7176255">if</span>&nbsp;<span class="ident" id="7176258">url</span><span class="op" id="7176261">.</span><span class="ident" id="7176262">String</span><span class="op" id="7176268">(</span><span class="op" id="7176269">)</span>&nbsp;<span class="op" id="7176271">!=</span>&nbsp;<span class="ident" id="7176274">test</span><span class="op" id="7176278">.</span><span class="ident" id="7176279">expected</span>&nbsp;<span class="op" id="7176288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176293">t</span><span class="op" id="7176294">.</span><span class="ident" id="7176295">Errorf</span><span class="op" id="7176301">(</span><span class="string" id="7176302">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7176335">,</span>&nbsp;<span class="ident" id="7176337">test</span><span class="op" id="7176341">.</span><span class="ident" id="7176342">base</span><span class="op" id="7176346">,</span>&nbsp;<span class="ident" id="7176348">test</span><span class="op" id="7176352">.</span><span class="ident" id="7176353">rel</span><span class="op" id="7176356">,</span>&nbsp;<span class="ident" id="7176358">test</span><span class="op" id="7176362">.</span><span class="ident" id="7176363">expected</span><span class="op" id="7176371">,</span>&nbsp;<span class="ident" id="7176373">url</span><span class="op" id="7176376">.</span><span class="ident" id="7176377">String</span><span class="op" id="7176383">(</span><span class="op" id="7176384">)</span><span class="op" id="7176385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176389">}</span>&nbsp;<span class="keyword" id="7176391">else</span>&nbsp;<span class="keyword" id="7176396">if</span>&nbsp;<span class="ident" id="7176399">base</span>&nbsp;<span class="op" id="7176404">==</span>&nbsp;<span class="ident" id="7176407">url</span>&nbsp;<span class="op" id="7176411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7176416">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176482">t</span><span class="op" id="7176483">.</span><span class="ident" id="7176484">Errorf</span><span class="op" id="7176490">(</span><span class="string" id="7176491">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7176539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7176547">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176582">url</span>&nbsp;<span class="op" id="7176586">=</span>&nbsp;<span class="ident" id="7176588">base</span><span class="op" id="7176592">.</span><span class="ident" id="7176593">ResolveReference</span><span class="op" id="7176609">(</span><span class="ident" id="7176610">opaque</span><span class="op" id="7176616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7176620">if</span>&nbsp;<span class="op" id="7176623">*</span><span class="ident" id="7176624">url</span>&nbsp;<span class="op" id="7176628">!=</span>&nbsp;<span class="op" id="7176631">*</span><span class="ident" id="7176632">opaque</span>&nbsp;<span class="op" id="7176639">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176644">t</span><span class="op" id="7176645">.</span><span class="ident" id="7176646">Errorf</span><span class="op" id="7176652">(</span><span class="string" id="7176653">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7176719">,</span>&nbsp;<span class="ident" id="7176721">url</span><span class="op" id="7176724">,</span>&nbsp;<span class="ident" id="7176726">opaque</span><span class="op" id="7176732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7176740">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176798">url</span><span class="op" id="7176801">,</span>&nbsp;<span class="ident" id="7176803">err</span>&nbsp;<span class="op" id="7176807">=</span>&nbsp;<span class="ident" id="7176809">base</span><span class="op" id="7176813">.</span><span class="ident" id="7176814">Parse</span><span class="op" id="7176819">(</span><span class="string" id="7176820">&#34;scheme:opaque&#34;</span><span class="op" id="7176835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7176839">if</span>&nbsp;<span class="ident" id="7176842">err</span>&nbsp;<span class="op" id="7176846">!=</span>&nbsp;<span class="ident" id="7176849">nil</span>&nbsp;<span class="op" id="7176853">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176858">t</span><span class="op" id="7176859">.</span><span class="ident" id="7176860">Errorf</span><span class="op" id="7176866">(</span><span class="string" id="7176867">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7176910">,</span>&nbsp;<span class="ident" id="7176912">test</span><span class="op" id="7176916">.</span><span class="ident" id="7176917">base</span><span class="op" id="7176921">,</span>&nbsp;<span class="ident" id="7176923">err</span><span class="op" id="7176926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7176930">}</span>&nbsp;<span class="keyword" id="7176932">else</span>&nbsp;<span class="keyword" id="7176937">if</span>&nbsp;<span class="op" id="7176940">*</span><span class="ident" id="7176941">url</span>&nbsp;<span class="op" id="7176945">!=</span>&nbsp;<span class="op" id="7176948">*</span><span class="ident" id="7176949">opaque</span>&nbsp;<span class="op" id="7176956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7176961">t</span><span class="op" id="7176962">.</span><span class="ident" id="7176963">Errorf</span><span class="op" id="7176969">(</span><span class="string" id="7176970">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7177025">,</span>&nbsp;<span class="ident" id="7177027">url</span><span class="op" id="7177030">,</span>&nbsp;<span class="ident" id="7177032">opaque</span><span class="op" id="7177038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177042">}</span>&nbsp;<span class="keyword" id="7177044">else</span>&nbsp;<span class="keyword" id="7177049">if</span>&nbsp;<span class="ident" id="7177052">base</span>&nbsp;<span class="op" id="7177057">==</span>&nbsp;<span class="ident" id="7177060">url</span>&nbsp;<span class="op" id="7177064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7177069">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177122">t</span><span class="op" id="7177123">.</span><span class="ident" id="7177124">Errorf</span><span class="op" id="7177130">(</span><span class="string" id="7177131">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7177179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177186">}</span><br>
<span class="lineno"></span><span class="op" id="7177188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7177191">func</span>&nbsp;<span class="ident" id="7177196">TestQueryValues</span><span class="op" id="7177211">(</span><span class="ident" id="7177212">t</span>&nbsp;<span class="op" id="7177214">*</span><span class="ident" id="7177215">testing</span><span class="op" id="7177222">.</span><span class="ident" id="7177223">T</span><span class="op" id="7177224">)</span>&nbsp;<span class="op" id="7177226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177229">u</span><span class="op" id="7177230">,</span>&nbsp;<span class="ident" id="7177232">_</span>&nbsp;<span class="op" id="7177234">:=</span>&nbsp;<span class="ident" id="7177237">Parse</span><span class="op" id="7177242">(</span><span class="string" id="7177243">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7177277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177280">v</span>&nbsp;<span class="op" id="7177282">:=</span>&nbsp;<span class="ident" id="7177285">u</span><span class="op" id="7177286">.</span><span class="ident" id="7177287">Query</span><span class="op" id="7177292">(</span><span class="op" id="7177293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177296">if</span>&nbsp;<span class="builtinfunc" id="7177299">len</span><span class="op" id="7177302">(</span><span class="ident" id="7177303">v</span><span class="op" id="7177304">)</span>&nbsp;<span class="op" id="7177306">!=</span>&nbsp;<span class="num" id="7177309">2</span>&nbsp;<span class="op" id="7177311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177315">t</span><span class="op" id="7177316">.</span><span class="ident" id="7177317">Errorf</span><span class="op" id="7177323">(</span><span class="string" id="7177324">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7177361">,</span>&nbsp;<span class="builtinfunc" id="7177363">len</span><span class="op" id="7177366">(</span><span class="ident" id="7177367">v</span><span class="op" id="7177368">)</span><span class="op" id="7177369">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177375">if</span>&nbsp;<span class="ident" id="7177378">g</span><span class="op" id="7177379">,</span>&nbsp;<span class="ident" id="7177381">e</span>&nbsp;<span class="op" id="7177383">:=</span>&nbsp;<span class="ident" id="7177386">v</span><span class="op" id="7177387">.</span><span class="ident" id="7177388">Get</span><span class="op" id="7177391">(</span><span class="string" id="7177392">&#34;foo&#34;</span><span class="op" id="7177397">)</span><span class="op" id="7177398">,</span>&nbsp;<span class="string" id="7177400">&#34;bar&#34;</span><span class="op" id="7177405">;</span>&nbsp;<span class="ident" id="7177407">g</span>&nbsp;<span class="op" id="7177409">!=</span>&nbsp;<span class="ident" id="7177412">e</span>&nbsp;<span class="op" id="7177414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177418">t</span><span class="op" id="7177419">.</span><span class="ident" id="7177420">Errorf</span><span class="op" id="7177426">(</span><span class="string" id="7177427">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7177451">,</span>&nbsp;<span class="ident" id="7177453">g</span><span class="op" id="7177454">,</span>&nbsp;<span class="ident" id="7177456">e</span><span class="op" id="7177457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7177463">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177483">if</span>&nbsp;<span class="ident" id="7177486">g</span><span class="op" id="7177487">,</span>&nbsp;<span class="ident" id="7177489">e</span>&nbsp;<span class="op" id="7177491">:=</span>&nbsp;<span class="ident" id="7177494">v</span><span class="op" id="7177495">.</span><span class="ident" id="7177496">Get</span><span class="op" id="7177499">(</span><span class="string" id="7177500">&#34;Foo&#34;</span><span class="op" id="7177505">)</span><span class="op" id="7177506">,</span>&nbsp;<span class="string" id="7177508">&#34;&#34;</span><span class="op" id="7177510">;</span>&nbsp;<span class="ident" id="7177512">g</span>&nbsp;<span class="op" id="7177514">!=</span>&nbsp;<span class="ident" id="7177517">e</span>&nbsp;<span class="op" id="7177519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177523">t</span><span class="op" id="7177524">.</span><span class="ident" id="7177525">Errorf</span><span class="op" id="7177531">(</span><span class="string" id="7177532">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7177556">,</span>&nbsp;<span class="ident" id="7177558">g</span><span class="op" id="7177559">,</span>&nbsp;<span class="ident" id="7177561">e</span><span class="op" id="7177562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177568">if</span>&nbsp;<span class="ident" id="7177571">g</span><span class="op" id="7177572">,</span>&nbsp;<span class="ident" id="7177574">e</span>&nbsp;<span class="op" id="7177576">:=</span>&nbsp;<span class="ident" id="7177579">v</span><span class="op" id="7177580">.</span><span class="ident" id="7177581">Get</span><span class="op" id="7177584">(</span><span class="string" id="7177585">&#34;bar&#34;</span><span class="op" id="7177590">)</span><span class="op" id="7177591">,</span>&nbsp;<span class="string" id="7177593">&#34;1&#34;</span><span class="op" id="7177596">;</span>&nbsp;<span class="ident" id="7177598">g</span>&nbsp;<span class="op" id="7177600">!=</span>&nbsp;<span class="ident" id="7177603">e</span>&nbsp;<span class="op" id="7177605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177609">t</span><span class="op" id="7177610">.</span><span class="ident" id="7177611">Errorf</span><span class="op" id="7177617">(</span><span class="string" id="7177618">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7177642">,</span>&nbsp;<span class="ident" id="7177644">g</span><span class="op" id="7177645">,</span>&nbsp;<span class="ident" id="7177647">e</span><span class="op" id="7177648">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177654">if</span>&nbsp;<span class="ident" id="7177657">g</span><span class="op" id="7177658">,</span>&nbsp;<span class="ident" id="7177660">e</span>&nbsp;<span class="op" id="7177662">:=</span>&nbsp;<span class="ident" id="7177665">v</span><span class="op" id="7177666">.</span><span class="ident" id="7177667">Get</span><span class="op" id="7177670">(</span><span class="string" id="7177671">&#34;baz&#34;</span><span class="op" id="7177676">)</span><span class="op" id="7177677">,</span>&nbsp;<span class="string" id="7177679">&#34;&#34;</span><span class="op" id="7177681">;</span>&nbsp;<span class="ident" id="7177683">g</span>&nbsp;<span class="op" id="7177685">!=</span>&nbsp;<span class="ident" id="7177688">e</span>&nbsp;<span class="op" id="7177690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177694">t</span><span class="op" id="7177695">.</span><span class="ident" id="7177696">Errorf</span><span class="op" id="7177702">(</span><span class="string" id="7177703">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7177727">,</span>&nbsp;<span class="ident" id="7177729">g</span><span class="op" id="7177730">,</span>&nbsp;<span class="ident" id="7177732">e</span><span class="op" id="7177733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177739">v</span><span class="op" id="7177740">.</span><span class="ident" id="7177741">Del</span><span class="op" id="7177744">(</span><span class="string" id="7177745">&#34;bar&#34;</span><span class="op" id="7177750">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7177753">if</span>&nbsp;<span class="ident" id="7177756">g</span><span class="op" id="7177757">,</span>&nbsp;<span class="ident" id="7177759">e</span>&nbsp;<span class="op" id="7177761">:=</span>&nbsp;<span class="ident" id="7177764">v</span><span class="op" id="7177765">.</span><span class="ident" id="7177766">Get</span><span class="op" id="7177769">(</span><span class="string" id="7177770">&#34;bar&#34;</span><span class="op" id="7177775">)</span><span class="op" id="7177776">,</span>&nbsp;<span class="string" id="7177778">&#34;&#34;</span><span class="op" id="7177780">;</span>&nbsp;<span class="ident" id="7177782">g</span>&nbsp;<span class="op" id="7177784">!=</span>&nbsp;<span class="ident" id="7177787">e</span>&nbsp;<span class="op" id="7177789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177793">t</span><span class="op" id="7177794">.</span><span class="ident" id="7177795">Errorf</span><span class="op" id="7177801">(</span><span class="string" id="7177802">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7177833">,</span>&nbsp;<span class="ident" id="7177835">g</span><span class="op" id="7177836">,</span>&nbsp;<span class="ident" id="7177838">e</span><span class="op" id="7177839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177842">}</span><br>
<span class="lineno"></span><span class="op" id="7177844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7177847">type</span>&nbsp;<span class="ident" id="7177852">parseTest</span>&nbsp;<span class="keyword" id="7177862">struct</span>&nbsp;<span class="op" id="7177869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177872">query</span>&nbsp;<span class="builtintype" id="7177878">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177886">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7177892">Values</span><br>
<span class="lineno"></span><span class="op" id="7177899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7177902">var</span>&nbsp;<span class="ident" id="7177906">parseTests</span>&nbsp;<span class="op" id="7177917">=</span>&nbsp;<span class="op" id="7177919">[</span><span class="op" id="7177920">]</span><span class="ident" id="7177921">parseTest</span><span class="op" id="7177930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7177933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177937">query</span><span class="op" id="7177942">:</span>&nbsp;<span class="string" id="7177944">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7177953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7177957">out</span><span class="op" id="7177960">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7177964">Values</span><span class="op" id="7177970">{</span><span class="string" id="7177971">&#34;a&#34;</span><span class="op" id="7177974">:</span>&nbsp;<span class="op" id="7177976">[</span><span class="op" id="7177977">]</span><span class="builtintype" id="7177978">string</span><span class="op" id="7177984">{</span><span class="string" id="7177985">&#34;1&#34;</span><span class="op" id="7177988">}</span><span class="op" id="7177989">,</span>&nbsp;<span class="string" id="7177991">&#34;b&#34;</span><span class="op" id="7177994">:</span>&nbsp;<span class="op" id="7177996">[</span><span class="op" id="7177997">]</span><span class="builtintype" id="7177998">string</span><span class="op" id="7178004">{</span><span class="string" id="7178005">&#34;2&#34;</span><span class="op" id="7178008">}</span><span class="op" id="7178009">}</span><span class="op" id="7178010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178013">}</span><span class="op" id="7178014">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178021">query</span><span class="op" id="7178026">:</span>&nbsp;<span class="string" id="7178028">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7178046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178050">out</span><span class="op" id="7178053">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7178057">Values</span><span class="op" id="7178063">{</span><span class="string" id="7178064">&#34;a&#34;</span><span class="op" id="7178067">:</span>&nbsp;<span class="op" id="7178069">[</span><span class="op" id="7178070">]</span><span class="builtintype" id="7178071">string</span><span class="op" id="7178077">{</span><span class="string" id="7178078">&#34;1&#34;</span><span class="op" id="7178081">,</span>&nbsp;<span class="string" id="7178083">&#34;2&#34;</span><span class="op" id="7178086">,</span>&nbsp;<span class="string" id="7178088">&#34;banana&#34;</span><span class="op" id="7178096">}</span><span class="op" id="7178097">}</span><span class="op" id="7178098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178101">}</span><span class="op" id="7178102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178105">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178109">query</span><span class="op" id="7178114">:</span>&nbsp;<span class="string" id="7178116">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7178141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178145">out</span><span class="op" id="7178148">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7178152">Values</span><span class="op" id="7178158">{</span><span class="string" id="7178159">&#34;ascii&#34;</span><span class="op" id="7178166">:</span>&nbsp;<span class="op" id="7178168">[</span><span class="op" id="7178169">]</span><span class="builtintype" id="7178170">string</span><span class="op" id="7178176">{</span><span class="string" id="7178177">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7178190">}</span><span class="op" id="7178191">}</span><span class="op" id="7178192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178195">}</span><span class="op" id="7178196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178203">query</span><span class="op" id="7178208">:</span>&nbsp;<span class="string" id="7178210">&#34;a=1;b=2&#34;</span><span class="op" id="7178219">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178223">out</span><span class="op" id="7178226">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7178230">Values</span><span class="op" id="7178236">{</span><span class="string" id="7178237">&#34;a&#34;</span><span class="op" id="7178240">:</span>&nbsp;<span class="op" id="7178242">[</span><span class="op" id="7178243">]</span><span class="builtintype" id="7178244">string</span><span class="op" id="7178250">{</span><span class="string" id="7178251">&#34;1&#34;</span><span class="op" id="7178254">}</span><span class="op" id="7178255">,</span>&nbsp;<span class="string" id="7178257">&#34;b&#34;</span><span class="op" id="7178260">:</span>&nbsp;<span class="op" id="7178262">[</span><span class="op" id="7178263">]</span><span class="builtintype" id="7178264">string</span><span class="op" id="7178270">{</span><span class="string" id="7178271">&#34;2&#34;</span><span class="op" id="7178274">}</span><span class="op" id="7178275">}</span><span class="op" id="7178276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178279">}</span><span class="op" id="7178280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178287">query</span><span class="op" id="7178292">:</span>&nbsp;<span class="string" id="7178294">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7178312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178316">out</span><span class="op" id="7178319">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7178323">Values</span><span class="op" id="7178329">{</span><span class="string" id="7178330">&#34;a&#34;</span><span class="op" id="7178333">:</span>&nbsp;<span class="op" id="7178335">[</span><span class="op" id="7178336">]</span><span class="builtintype" id="7178337">string</span><span class="op" id="7178343">{</span><span class="string" id="7178344">&#34;1&#34;</span><span class="op" id="7178347">,</span>&nbsp;<span class="string" id="7178349">&#34;2&#34;</span><span class="op" id="7178352">,</span>&nbsp;<span class="string" id="7178354">&#34;banana&#34;</span><span class="op" id="7178362">}</span><span class="op" id="7178363">}</span><span class="op" id="7178364">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178367">}</span><span class="op" id="7178368">,</span><br>
<span class="lineno"></span><span class="op" id="7178370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7178373">func</span>&nbsp;<span class="ident" id="7178378">TestParseQuery</span><span class="op" id="7178392">(</span><span class="ident" id="7178393">t</span>&nbsp;<span class="op" id="7178395">*</span><span class="ident" id="7178396">testing</span><span class="op" id="7178403">.</span><span class="ident" id="7178404">T</span><span class="op" id="7178405">)</span>&nbsp;<span class="op" id="7178407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178410">for</span>&nbsp;<span class="ident" id="7178414">i</span><span class="op" id="7178415">,</span>&nbsp;<span class="ident" id="7178417">test</span>&nbsp;<span class="op" id="7178422">:=</span>&nbsp;<span class="keyword" id="7178425">range</span>&nbsp;<span class="ident" id="7178431">parseTests</span>&nbsp;<span class="op" id="7178442">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178446">form</span><span class="op" id="7178450">,</span>&nbsp;<span class="ident" id="7178452">err</span>&nbsp;<span class="op" id="7178456">:=</span>&nbsp;<span class="ident" id="7178459">ParseQuery</span><span class="op" id="7178469">(</span><span class="ident" id="7178470">test</span><span class="op" id="7178474">.</span><span class="ident" id="7178475">query</span><span class="op" id="7178480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178484">if</span>&nbsp;<span class="ident" id="7178487">err</span>&nbsp;<span class="op" id="7178491">!=</span>&nbsp;<span class="ident" id="7178494">nil</span>&nbsp;<span class="op" id="7178498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178503">t</span><span class="op" id="7178504">.</span><span class="ident" id="7178505">Errorf</span><span class="op" id="7178511">(</span><span class="string" id="7178512">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7178543">,</span>&nbsp;<span class="ident" id="7178545">i</span><span class="op" id="7178546">,</span>&nbsp;<span class="ident" id="7178548">err</span><span class="op" id="7178551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178556">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178567">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178571">if</span>&nbsp;<span class="builtinfunc" id="7178574">len</span><span class="op" id="7178577">(</span><span class="ident" id="7178578">form</span><span class="op" id="7178582">)</span>&nbsp;<span class="op" id="7178584">!=</span>&nbsp;<span class="builtinfunc" id="7178587">len</span><span class="op" id="7178590">(</span><span class="ident" id="7178591">test</span><span class="op" id="7178595">.</span><span class="ident" id="7178596">out</span><span class="op" id="7178599">)</span>&nbsp;<span class="op" id="7178601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178606">t</span><span class="op" id="7178607">.</span><span class="ident" id="7178608">Errorf</span><span class="op" id="7178614">(</span><span class="string" id="7178615">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7178649">,</span>&nbsp;<span class="ident" id="7178651">i</span><span class="op" id="7178652">,</span>&nbsp;<span class="builtinfunc" id="7178654">len</span><span class="op" id="7178657">(</span><span class="ident" id="7178658">form</span><span class="op" id="7178662">)</span><span class="op" id="7178663">,</span>&nbsp;<span class="builtinfunc" id="7178665">len</span><span class="op" id="7178668">(</span><span class="ident" id="7178669">test</span><span class="op" id="7178673">.</span><span class="ident" id="7178674">out</span><span class="op" id="7178677">)</span><span class="op" id="7178678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178686">for</span>&nbsp;<span class="ident" id="7178690">k</span><span class="op" id="7178691">,</span>&nbsp;<span class="ident" id="7178693">evs</span>&nbsp;<span class="op" id="7178697">:=</span>&nbsp;<span class="keyword" id="7178700">range</span>&nbsp;<span class="ident" id="7178706">test</span><span class="op" id="7178710">.</span><span class="ident" id="7178711">out</span>&nbsp;<span class="op" id="7178715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178720">vs</span><span class="op" id="7178722">,</span>&nbsp;<span class="ident" id="7178724">ok</span>&nbsp;<span class="op" id="7178727">:=</span>&nbsp;<span class="ident" id="7178730">form</span><span class="op" id="7178734">[</span><span class="ident" id="7178735">k</span><span class="op" id="7178736">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178741">if</span>&nbsp;<span class="op" id="7178744">!</span><span class="ident" id="7178745">ok</span>&nbsp;<span class="op" id="7178748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178754">t</span><span class="op" id="7178755">.</span><span class="ident" id="7178756">Errorf</span><span class="op" id="7178762">(</span><span class="string" id="7178763">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7178788">,</span>&nbsp;<span class="ident" id="7178790">i</span><span class="op" id="7178791">,</span>&nbsp;<span class="ident" id="7178793">k</span><span class="op" id="7178794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178800">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178817">if</span>&nbsp;<span class="builtinfunc" id="7178820">len</span><span class="op" id="7178823">(</span><span class="ident" id="7178824">vs</span><span class="op" id="7178826">)</span>&nbsp;<span class="op" id="7178828">!=</span>&nbsp;<span class="builtinfunc" id="7178831">len</span><span class="op" id="7178834">(</span><span class="ident" id="7178835">evs</span><span class="op" id="7178838">)</span>&nbsp;<span class="op" id="7178840">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7178846">t</span><span class="op" id="7178847">.</span><span class="ident" id="7178848">Errorf</span><span class="op" id="7178854">(</span><span class="string" id="7178855">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7178893">,</span>&nbsp;<span class="ident" id="7178895">i</span><span class="op" id="7178896">,</span>&nbsp;<span class="ident" id="7178898">k</span><span class="op" id="7178899">,</span>&nbsp;<span class="builtinfunc" id="7178901">len</span><span class="op" id="7178904">(</span><span class="ident" id="7178905">vs</span><span class="op" id="7178907">)</span><span class="op" id="7178908">,</span>&nbsp;<span class="builtinfunc" id="7178910">len</span><span class="op" id="7178913">(</span><span class="ident" id="7178914">evs</span><span class="op" id="7178917">)</span><span class="op" id="7178918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178924">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7178936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178941">for</span>&nbsp;<span class="ident" id="7178945">j</span><span class="op" id="7178946">,</span>&nbsp;<span class="ident" id="7178948">ev</span>&nbsp;<span class="op" id="7178951">:=</span>&nbsp;<span class="keyword" id="7178954">range</span>&nbsp;<span class="ident" id="7178960">evs</span>&nbsp;<span class="op" id="7178964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7178970">if</span>&nbsp;<span class="ident" id="7178973">v</span>&nbsp;<span class="op" id="7178975">:=</span>&nbsp;<span class="ident" id="7178978">vs</span><span class="op" id="7178980">[</span><span class="ident" id="7178981">j</span><span class="op" id="7178982">]</span><span class="op" id="7178983">;</span>&nbsp;<span class="ident" id="7178985">v</span>&nbsp;<span class="op" id="7178987">!=</span>&nbsp;<span class="ident" id="7178990">ev</span>&nbsp;<span class="op" id="7178993">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179000">t</span><span class="op" id="7179001">.</span><span class="ident" id="7179002">Errorf</span><span class="op" id="7179008">(</span><span class="string" id="7179009">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7179046">,</span>&nbsp;<span class="ident" id="7179048">i</span><span class="op" id="7179049">,</span>&nbsp;<span class="ident" id="7179051">k</span><span class="op" id="7179052">,</span>&nbsp;<span class="ident" id="7179054">j</span><span class="op" id="7179055">,</span>&nbsp;<span class="ident" id="7179057">v</span><span class="op" id="7179058">,</span>&nbsp;<span class="ident" id="7179060">ev</span><span class="op" id="7179062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179080">}</span><br>
<span class="lineno">830</span><span class="op" id="7179082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7179085">type</span>&nbsp;<span class="ident" id="7179090">RequestURITest</span>&nbsp;<span class="keyword" id="7179105">struct</span>&nbsp;<span class="op" id="7179112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179115">url</span>&nbsp;<span class="op" id="7179119">*</span><span class="ident" id="7179120">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179125">out</span>&nbsp;<span class="builtintype" id="7179129">string</span><br>
<span class="lineno">835</span><span class="op" id="7179136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7179139">var</span>&nbsp;<span class="ident" id="7179143">requritests</span>&nbsp;<span class="op" id="7179155">=</span>&nbsp;<span class="op" id="7179157">[</span><span class="op" id="7179158">]</span><span class="ident" id="7179159">RequestURITest</span><span class="op" id="7179173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179180">&amp;</span><span class="ident" id="7179181">URL</span><span class="op" id="7179184">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179189">Scheme</span><span class="op" id="7179195">:</span>&nbsp;<span class="string" id="7179197">&#34;http&#34;</span><span class="op" id="7179203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179208">Host</span><span class="op" id="7179212">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179216">&#34;example.com&#34;</span><span class="op" id="7179229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179234">Path</span><span class="op" id="7179238">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179242">&#34;&#34;</span><span class="op" id="7179244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179248">}</span><span class="op" id="7179249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179253">&#34;/&#34;</span><span class="op" id="7179256">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179259">}</span><span class="op" id="7179260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179267">&amp;</span><span class="ident" id="7179268">URL</span><span class="op" id="7179271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179276">Scheme</span><span class="op" id="7179282">:</span>&nbsp;<span class="string" id="7179284">&#34;http&#34;</span><span class="op" id="7179290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179295">Host</span><span class="op" id="7179299">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179303">&#34;example.com&#34;</span><span class="op" id="7179316">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179321">Path</span><span class="op" id="7179325">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179329">&#34;/a&nbsp;b&#34;</span><span class="op" id="7179335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179339">}</span><span class="op" id="7179340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179344">&#34;/a%20b&#34;</span><span class="op" id="7179352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179355">}</span><span class="op" id="7179356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7179359">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179399">&amp;</span><span class="ident" id="7179400">URL</span><span class="op" id="7179403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179408">Scheme</span><span class="op" id="7179414">:</span>&nbsp;<span class="string" id="7179416">&#34;http&#34;</span><span class="op" id="7179422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179427">Host</span><span class="op" id="7179431">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179435">&#34;example.com&#34;</span><span class="op" id="7179448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179453">Opaque</span><span class="op" id="7179459">:</span>&nbsp;<span class="string" id="7179461">&#34;/%2F/%2F/&#34;</span><span class="op" id="7179472">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179476">}</span><span class="op" id="7179477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179481">&#34;/%2F/%2F/&#34;</span><span class="op" id="7179492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179495">}</span><span class="op" id="7179496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7179499">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179535">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179539">&amp;</span><span class="ident" id="7179540">URL</span><span class="op" id="7179543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179548">Scheme</span><span class="op" id="7179554">:</span>&nbsp;<span class="string" id="7179556">&#34;http&#34;</span><span class="op" id="7179562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179567">Host</span><span class="op" id="7179571">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179575">&#34;example.com&#34;</span><span class="op" id="7179588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179593">Opaque</span><span class="op" id="7179599">:</span>&nbsp;<span class="string" id="7179601">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7179631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179635">}</span><span class="op" id="7179636">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179640">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7179675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179678">}</span><span class="op" id="7179679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179686">&amp;</span><span class="ident" id="7179687">URL</span><span class="op" id="7179690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179695">Scheme</span><span class="op" id="7179701">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179705">&#34;http&#34;</span><span class="op" id="7179711">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179716">Host</span><span class="op" id="7179720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179726">&#34;example.com&#34;</span><span class="op" id="7179739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179744">Path</span><span class="op" id="7179748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7179754">&#34;/a&nbsp;b&#34;</span><span class="op" id="7179760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179765">RawQuery</span><span class="op" id="7179773">:</span>&nbsp;<span class="string" id="7179775">&#34;q=go+language&#34;</span><span class="op" id="7179790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179794">}</span><span class="op" id="7179795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179799">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7179821">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179824">}</span><span class="op" id="7179825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179832">&amp;</span><span class="ident" id="7179833">URL</span><span class="op" id="7179836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179841">Scheme</span><span class="op" id="7179847">:</span>&nbsp;<span class="string" id="7179849">&#34;myschema&#34;</span><span class="op" id="7179859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179864">Opaque</span><span class="op" id="7179870">:</span>&nbsp;<span class="string" id="7179872">&#34;opaque&#34;</span><span class="op" id="7179880">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179884">}</span><span class="op" id="7179885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179889">&#34;opaque&#34;</span><span class="op" id="7179897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179900">}</span><span class="op" id="7179901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179908">&amp;</span><span class="ident" id="7179909">URL</span><span class="op" id="7179912">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179917">Scheme</span><span class="op" id="7179923">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179927">&#34;myschema&#34;</span><span class="op" id="7179937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179942">Opaque</span><span class="op" id="7179948">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7179952">&#34;opaque&#34;</span><span class="op" id="7179960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7179965">RawQuery</span><span class="op" id="7179973">:</span>&nbsp;<span class="string" id="7179975">&#34;q=go+language&#34;</span><span class="op" id="7179990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179994">}</span><span class="op" id="7179995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7179999">&#34;opaque?q=go+language&#34;</span><span class="op" id="7180021">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180024">}</span><span class="op" id="7180025">,</span><br>
<span class="lineno"></span><span class="op" id="7180027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180030">func</span>&nbsp;<span class="ident" id="7180035">TestRequestURI</span><span class="op" id="7180049">(</span><span class="ident" id="7180050">t</span>&nbsp;<span class="op" id="7180052">*</span><span class="ident" id="7180053">testing</span><span class="op" id="7180060">.</span><span class="ident" id="7180061">T</span><span class="op" id="7180062">)</span>&nbsp;<span class="op" id="7180064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7180067">for</span>&nbsp;<span class="ident" id="7180071">_</span><span class="op" id="7180072">,</span>&nbsp;<span class="ident" id="7180074">tt</span>&nbsp;<span class="op" id="7180077">:=</span>&nbsp;<span class="keyword" id="7180080">range</span>&nbsp;<span class="ident" id="7180086">requritests</span>&nbsp;<span class="op" id="7180098">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180102">s</span>&nbsp;<span class="op" id="7180104">:=</span>&nbsp;<span class="ident" id="7180107">tt</span><span class="op" id="7180109">.</span><span class="ident" id="7180110">url</span><span class="op" id="7180113">.</span><span class="ident" id="7180114">RequestURI</span><span class="op" id="7180124">(</span><span class="op" id="7180125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7180129">if</span>&nbsp;<span class="ident" id="7180132">s</span>&nbsp;<span class="op" id="7180134">!=</span>&nbsp;<span class="ident" id="7180137">tt</span><span class="op" id="7180139">.</span><span class="ident" id="7180140">out</span>&nbsp;<span class="op" id="7180144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180149">t</span><span class="op" id="7180150">.</span><span class="ident" id="7180151">Errorf</span><span class="op" id="7180157">(</span><span class="string" id="7180158">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7180196">,</span>&nbsp;<span class="ident" id="7180198">tt</span><span class="op" id="7180200">.</span><span class="ident" id="7180201">url</span><span class="op" id="7180204">,</span>&nbsp;<span class="ident" id="7180206">s</span><span class="op" id="7180207">,</span>&nbsp;<span class="ident" id="7180209">tt</span><span class="op" id="7180211">.</span><span class="ident" id="7180212">out</span><span class="op" id="7180215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180222">}</span><br>
<span class="lineno">905</span><span class="op" id="7180224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180227">func</span>&nbsp;<span class="ident" id="7180232">TestParseFailure</span><span class="op" id="7180248">(</span><span class="ident" id="7180249">t</span>&nbsp;<span class="op" id="7180251">*</span><span class="ident" id="7180252">testing</span><span class="op" id="7180259">.</span><span class="ident" id="7180260">T</span><span class="op" id="7180261">)</span>&nbsp;<span class="op" id="7180263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7180266">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7180315">const</span>&nbsp;<span class="ident" id="7180321">url</span>&nbsp;<span class="op" id="7180325">=</span>&nbsp;<span class="string" id="7180327">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180338">_</span><span class="op" id="7180339">,</span>&nbsp;<span class="ident" id="7180341">err</span>&nbsp;<span class="op" id="7180345">:=</span>&nbsp;<span class="ident" id="7180348">ParseQuery</span><span class="op" id="7180358">(</span><span class="ident" id="7180359">url</span><span class="op" id="7180362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180365">errStr</span>&nbsp;<span class="op" id="7180372">:=</span>&nbsp;<span class="ident" id="7180375">fmt</span><span class="op" id="7180378">.</span><span class="ident" id="7180379">Sprint</span><span class="op" id="7180385">(</span><span class="ident" id="7180386">err</span><span class="op" id="7180389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7180392">if</span>&nbsp;<span class="op" id="7180395">!</span><span class="ident" id="7180396">strings</span><span class="op" id="7180403">.</span><span class="ident" id="7180404">Contains</span><span class="op" id="7180412">(</span><span class="ident" id="7180413">errStr</span><span class="op" id="7180419">,</span>&nbsp;<span class="string" id="7180421">&#34;%gh&#34;</span><span class="op" id="7180426">)</span>&nbsp;<span class="op" id="7180428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180432">t</span><span class="op" id="7180433">.</span><span class="ident" id="7180434">Errorf</span><span class="op" id="7180440">(</span><span class="string" id="7180441">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7180506">,</span>&nbsp;<span class="ident" id="7180508">url</span><span class="op" id="7180511">,</span>&nbsp;<span class="ident" id="7180513">errStr</span><span class="op" id="7180519">,</span>&nbsp;<span class="string" id="7180521">&#34;%gh&#34;</span><span class="op" id="7180526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180529">}</span><br>
<span class="lineno">915</span><span class="op" id="7180531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180534">type</span>&nbsp;<span class="ident" id="7180539">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7180556">struct</span>&nbsp;<span class="op" id="7180563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180566">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7180573">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180579">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7180586">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7180596">escape</span>&nbsp;<span class="builtintype" id="7180603">bool</span><br>
<span class="lineno"></span><span class="op" id="7180608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7180611">var</span>&nbsp;<span class="ident" id="7180615">shouldEscapeTests</span>&nbsp;<span class="op" id="7180633">=</span>&nbsp;<span class="op" id="7180635">[</span><span class="op" id="7180636">]</span><span class="ident" id="7180637">shouldEscapeTest</span><span class="op" id="7180653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7180656">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180690">{</span><span class="string" id="7180691">&#39;a&#39;</span><span class="op" id="7180694">,</span>&nbsp;<span class="ident" id="7180696">encodePath</span><span class="op" id="7180706">,</span>&nbsp;<span class="builtintype" id="7180708">false</span><span class="op" id="7180713">}</span><span class="op" id="7180714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180717">{</span><span class="string" id="7180718">&#39;a&#39;</span><span class="op" id="7180721">,</span>&nbsp;<span class="ident" id="7180723">encodeUserPassword</span><span class="op" id="7180741">,</span>&nbsp;<span class="builtintype" id="7180743">false</span><span class="op" id="7180748">}</span><span class="op" id="7180749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180752">{</span><span class="string" id="7180753">&#39;a&#39;</span><span class="op" id="7180756">,</span>&nbsp;<span class="ident" id="7180758">encodeQueryComponent</span><span class="op" id="7180778">,</span>&nbsp;<span class="builtintype" id="7180780">false</span><span class="op" id="7180785">}</span><span class="op" id="7180786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180789">{</span><span class="string" id="7180790">&#39;a&#39;</span><span class="op" id="7180793">,</span>&nbsp;<span class="ident" id="7180795">encodeFragment</span><span class="op" id="7180809">,</span>&nbsp;<span class="builtintype" id="7180811">false</span><span class="op" id="7180816">}</span><span class="op" id="7180817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180820">{</span><span class="string" id="7180821">&#39;z&#39;</span><span class="op" id="7180824">,</span>&nbsp;<span class="ident" id="7180826">encodePath</span><span class="op" id="7180836">,</span>&nbsp;<span class="builtintype" id="7180838">false</span><span class="op" id="7180843">}</span><span class="op" id="7180844">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180847">{</span><span class="string" id="7180848">&#39;A&#39;</span><span class="op" id="7180851">,</span>&nbsp;<span class="ident" id="7180853">encodePath</span><span class="op" id="7180863">,</span>&nbsp;<span class="builtintype" id="7180865">false</span><span class="op" id="7180870">}</span><span class="op" id="7180871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180874">{</span><span class="string" id="7180875">&#39;Z&#39;</span><span class="op" id="7180878">,</span>&nbsp;<span class="ident" id="7180880">encodePath</span><span class="op" id="7180890">,</span>&nbsp;<span class="builtintype" id="7180892">false</span><span class="op" id="7180897">}</span><span class="op" id="7180898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180901">{</span><span class="string" id="7180902">&#39;0&#39;</span><span class="op" id="7180905">,</span>&nbsp;<span class="ident" id="7180907">encodePath</span><span class="op" id="7180917">,</span>&nbsp;<span class="builtintype" id="7180919">false</span><span class="op" id="7180924">}</span><span class="op" id="7180925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180928">{</span><span class="string" id="7180929">&#39;9&#39;</span><span class="op" id="7180932">,</span>&nbsp;<span class="ident" id="7180934">encodePath</span><span class="op" id="7180944">,</span>&nbsp;<span class="builtintype" id="7180946">false</span><span class="op" id="7180951">}</span><span class="op" id="7180952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180955">{</span><span class="string" id="7180956">&#39;-&#39;</span><span class="op" id="7180959">,</span>&nbsp;<span class="ident" id="7180961">encodePath</span><span class="op" id="7180971">,</span>&nbsp;<span class="builtintype" id="7180973">false</span><span class="op" id="7180978">}</span><span class="op" id="7180979">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7180982">{</span><span class="string" id="7180983">&#39;-&#39;</span><span class="op" id="7180986">,</span>&nbsp;<span class="ident" id="7180988">encodeUserPassword</span><span class="op" id="7181006">,</span>&nbsp;<span class="builtintype" id="7181008">false</span><span class="op" id="7181013">}</span><span class="op" id="7181014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181017">{</span><span class="string" id="7181018">&#39;-&#39;</span><span class="op" id="7181021">,</span>&nbsp;<span class="ident" id="7181023">encodeQueryComponent</span><span class="op" id="7181043">,</span>&nbsp;<span class="builtintype" id="7181045">false</span><span class="op" id="7181050">}</span><span class="op" id="7181051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181054">{</span><span class="string" id="7181055">&#39;-&#39;</span><span class="op" id="7181058">,</span>&nbsp;<span class="ident" id="7181060">encodeFragment</span><span class="op" id="7181074">,</span>&nbsp;<span class="builtintype" id="7181076">false</span><span class="op" id="7181081">}</span><span class="op" id="7181082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181085">{</span><span class="string" id="7181086">&#39;.&#39;</span><span class="op" id="7181089">,</span>&nbsp;<span class="ident" id="7181091">encodePath</span><span class="op" id="7181101">,</span>&nbsp;<span class="builtintype" id="7181103">false</span><span class="op" id="7181108">}</span><span class="op" id="7181109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181112">{</span><span class="string" id="7181113">&#39;_&#39;</span><span class="op" id="7181116">,</span>&nbsp;<span class="ident" id="7181118">encodePath</span><span class="op" id="7181128">,</span>&nbsp;<span class="builtintype" id="7181130">false</span><span class="op" id="7181135">}</span><span class="op" id="7181136">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181139">{</span><span class="string" id="7181140">&#39;~&#39;</span><span class="op" id="7181143">,</span>&nbsp;<span class="ident" id="7181145">encodePath</span><span class="op" id="7181155">,</span>&nbsp;<span class="builtintype" id="7181157">false</span><span class="op" id="7181162">}</span><span class="op" id="7181163">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7181167">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181198">{</span><span class="string" id="7181199">&#39;:&#39;</span><span class="op" id="7181202">,</span>&nbsp;<span class="ident" id="7181204">encodeUserPassword</span><span class="op" id="7181222">,</span>&nbsp;<span class="builtintype" id="7181224">true</span><span class="op" id="7181228">}</span><span class="op" id="7181229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181232">{</span><span class="string" id="7181233">&#39;/&#39;</span><span class="op" id="7181236">,</span>&nbsp;<span class="ident" id="7181238">encodeUserPassword</span><span class="op" id="7181256">,</span>&nbsp;<span class="builtintype" id="7181258">true</span><span class="op" id="7181262">}</span><span class="op" id="7181263">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181266">{</span><span class="string" id="7181267">&#39;?&#39;</span><span class="op" id="7181270">,</span>&nbsp;<span class="ident" id="7181272">encodeUserPassword</span><span class="op" id="7181290">,</span>&nbsp;<span class="builtintype" id="7181292">true</span><span class="op" id="7181296">}</span><span class="op" id="7181297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181300">{</span><span class="string" id="7181301">&#39;@&#39;</span><span class="op" id="7181304">,</span>&nbsp;<span class="ident" id="7181306">encodeUserPassword</span><span class="op" id="7181324">,</span>&nbsp;<span class="builtintype" id="7181326">true</span><span class="op" id="7181330">}</span><span class="op" id="7181331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181334">{</span><span class="string" id="7181335">&#39;$&#39;</span><span class="op" id="7181338">,</span>&nbsp;<span class="ident" id="7181340">encodeUserPassword</span><span class="op" id="7181358">,</span>&nbsp;<span class="builtintype" id="7181360">false</span><span class="op" id="7181365">}</span><span class="op" id="7181366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181369">{</span><span class="string" id="7181370">&#39;&amp;&#39;</span><span class="op" id="7181373">,</span>&nbsp;<span class="ident" id="7181375">encodeUserPassword</span><span class="op" id="7181393">,</span>&nbsp;<span class="builtintype" id="7181395">false</span><span class="op" id="7181400">}</span><span class="op" id="7181401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181404">{</span><span class="string" id="7181405">&#39;+&#39;</span><span class="op" id="7181408">,</span>&nbsp;<span class="ident" id="7181410">encodeUserPassword</span><span class="op" id="7181428">,</span>&nbsp;<span class="builtintype" id="7181430">false</span><span class="op" id="7181435">}</span><span class="op" id="7181436">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181439">{</span><span class="string" id="7181440">&#39;,&#39;</span><span class="op" id="7181443">,</span>&nbsp;<span class="ident" id="7181445">encodeUserPassword</span><span class="op" id="7181463">,</span>&nbsp;<span class="builtintype" id="7181465">false</span><span class="op" id="7181470">}</span><span class="op" id="7181471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181474">{</span><span class="string" id="7181475">&#39;;&#39;</span><span class="op" id="7181478">,</span>&nbsp;<span class="ident" id="7181480">encodeUserPassword</span><span class="op" id="7181498">,</span>&nbsp;<span class="builtintype" id="7181500">false</span><span class="op" id="7181505">}</span><span class="op" id="7181506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181509">{</span><span class="string" id="7181510">&#39;=&#39;</span><span class="op" id="7181513">,</span>&nbsp;<span class="ident" id="7181515">encodeUserPassword</span><span class="op" id="7181533">,</span>&nbsp;<span class="builtintype" id="7181535">false</span><span class="op" id="7181540">}</span><span class="op" id="7181541">,</span><br>
<span class="lineno"></span><span class="op" id="7181543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7181546">func</span>&nbsp;<span class="ident" id="7181551">TestShouldEscape</span><span class="op" id="7181567">(</span><span class="ident" id="7181568">t</span>&nbsp;<span class="op" id="7181570">*</span><span class="ident" id="7181571">testing</span><span class="op" id="7181578">.</span><span class="ident" id="7181579">T</span><span class="op" id="7181580">)</span>&nbsp;<span class="op" id="7181582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7181585">for</span>&nbsp;<span class="ident" id="7181589">_</span><span class="op" id="7181590">,</span>&nbsp;<span class="ident" id="7181592">tt</span>&nbsp;<span class="op" id="7181595">:=</span>&nbsp;<span class="keyword" id="7181598">range</span>&nbsp;<span class="ident" id="7181604">shouldEscapeTests</span>&nbsp;<span class="op" id="7181622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7181626">if</span>&nbsp;<span class="ident" id="7181629">shouldEscape</span><span class="op" id="7181641">(</span><span class="ident" id="7181642">tt</span><span class="op" id="7181644">.</span><span class="ident" id="7181645">in</span><span class="op" id="7181647">,</span>&nbsp;<span class="ident" id="7181649">tt</span><span class="op" id="7181651">.</span><span class="ident" id="7181652">mode</span><span class="op" id="7181656">)</span>&nbsp;<span class="op" id="7181658">!=</span>&nbsp;<span class="ident" id="7181661">tt</span><span class="op" id="7181663">.</span><span class="ident" id="7181664">escape</span>&nbsp;<span class="op" id="7181671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7181676">t</span><span class="op" id="7181677">.</span><span class="ident" id="7181678">Errorf</span><span class="op" id="7181684">(</span><span class="string" id="7181685">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7181732">,</span>&nbsp;<span class="ident" id="7181734">tt</span><span class="op" id="7181736">.</span><span class="ident" id="7181737">in</span><span class="op" id="7181739">,</span>&nbsp;<span class="ident" id="7181741">tt</span><span class="op" id="7181743">.</span><span class="ident" id="7181744">mode</span><span class="op" id="7181748">,</span>&nbsp;<span class="op" id="7181750">!</span><span class="ident" id="7181751">tt</span><span class="op" id="7181753">.</span><span class="ident" id="7181754">escape</span><span class="op" id="7181760">,</span>&nbsp;<span class="ident" id="7181762">tt</span><span class="op" id="7181764">.</span><span class="ident" id="7181765">escape</span><span class="op" id="7181771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181775">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7181778">}</span><br>
<span class="lineno"></span><span class="op" id="7181780">}</span>
</div>
</body>
</html>
