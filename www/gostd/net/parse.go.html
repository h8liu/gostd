<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3704793">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3704848">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3704902">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3704953">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="3705006">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3705054">package</span>&nbsp;<span class="ident" id="3705062">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3705067">import</span>&nbsp;<span class="op" id="3705074">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3705077">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3705083">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3705088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3705091">type</span>&nbsp;<span class="ident" id="3705096">file</span>&nbsp;<span class="keyword" id="3705101">struct</span>&nbsp;<span class="op" id="3705108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705111">file</span>&nbsp;&nbsp;<span class="op" id="3705117">*</span><span class="ident" id="3705118">os</span><span class="op" id="3705120">.</span><span class="ident" id="3705121">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705127">data</span>&nbsp;&nbsp;<span class="op" id="3705133">[</span><span class="op" id="3705134">]</span><span class="builtintype" id="3705135">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705141">atEOF</span>&nbsp;<span class="builtintype" id="3705147">bool</span><br>
<span class="lineno"></span><span class="op" id="3705152">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3705155">func</span>&nbsp;<span class="op" id="3705160">(</span><span class="ident" id="3705161">f</span>&nbsp;<span class="op" id="3705163">*</span><span class="ident" id="3705164">file</span><span class="op" id="3705168">)</span>&nbsp;<span class="builtinfunc" id="3705170">close</span><span class="op" id="3705175">(</span><span class="op" id="3705176">)</span>&nbsp;<span class="op" id="3705178">{</span>&nbsp;<span class="ident" id="3705180">f</span><span class="op" id="3705181">.</span><span class="ident" id="3705182">file</span><span class="op" id="3705186">.</span><span class="ident" id="3705187">Close</span><span class="op" id="3705192">(</span><span class="op" id="3705193">)</span>&nbsp;<span class="op" id="3705195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3705198">func</span>&nbsp;<span class="op" id="3705203">(</span><span class="ident" id="3705204">f</span>&nbsp;<span class="op" id="3705206">*</span><span class="ident" id="3705207">file</span><span class="op" id="3705211">)</span>&nbsp;<span class="ident" id="3705213">getLineFromData</span><span class="op" id="3705228">(</span><span class="op" id="3705229">)</span>&nbsp;<span class="op" id="3705231">(</span><span class="ident" id="3705232">s</span>&nbsp;<span class="builtintype" id="3705234">string</span><span class="op" id="3705240">,</span>&nbsp;<span class="ident" id="3705242">ok</span>&nbsp;<span class="builtintype" id="3705245">bool</span><span class="op" id="3705249">)</span>&nbsp;<span class="op" id="3705251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705254">data</span>&nbsp;<span class="op" id="3705259">:=</span>&nbsp;<span class="ident" id="3705262">f</span><span class="op" id="3705263">.</span><span class="ident" id="3705264">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705270">i</span>&nbsp;<span class="op" id="3705272">:=</span>&nbsp;<span class="num" id="3705275">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705278">for</span>&nbsp;<span class="ident" id="3705282">i</span>&nbsp;<span class="op" id="3705284">=</span>&nbsp;<span class="num" id="3705286">0</span><span class="op" id="3705287">;</span>&nbsp;<span class="ident" id="3705289">i</span>&nbsp;<span class="op" id="3705291">&lt;</span>&nbsp;<span class="builtinfunc" id="3705293">len</span><span class="op" id="3705296">(</span><span class="ident" id="3705297">data</span><span class="op" id="3705301">)</span><span class="op" id="3705302">;</span>&nbsp;<span class="ident" id="3705304">i</span><span class="op" id="3705305">++</span>&nbsp;<span class="op" id="3705308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705312">if</span>&nbsp;<span class="ident" id="3705315">data</span><span class="op" id="3705319">[</span><span class="ident" id="3705320">i</span><span class="op" id="3705321">]</span>&nbsp;<span class="op" id="3705323">==</span>&nbsp;<span class="string" id="3705326">&#39;\n&#39;</span>&nbsp;<span class="op" id="3705331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705336">s</span>&nbsp;<span class="op" id="3705338">=</span>&nbsp;<span class="builtintype" id="3705340">string</span><span class="op" id="3705346">(</span><span class="ident" id="3705347">data</span><span class="op" id="3705351">[</span><span class="num" id="3705352">0</span><span class="op" id="3705353">:</span><span class="ident" id="3705354">i</span><span class="op" id="3705355">]</span><span class="op" id="3705356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705361">ok</span>&nbsp;<span class="op" id="3705364">=</span>&nbsp;<span class="builtintype" id="3705366">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3705374">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705390">i</span><span class="op" id="3705391">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705397">n</span>&nbsp;<span class="op" id="3705399">:=</span>&nbsp;<span class="builtinfunc" id="3705402">len</span><span class="op" id="3705405">(</span><span class="ident" id="3705406">data</span><span class="op" id="3705410">)</span>&nbsp;<span class="op" id="3705412">-</span>&nbsp;<span class="ident" id="3705414">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3705419">copy</span><span class="op" id="3705423">(</span><span class="ident" id="3705424">data</span><span class="op" id="3705428">[</span><span class="num" id="3705429">0</span><span class="op" id="3705430">:</span><span class="op" id="3705431">]</span><span class="op" id="3705432">,</span>&nbsp;<span class="ident" id="3705434">data</span><span class="op" id="3705438">[</span><span class="ident" id="3705439">i</span><span class="op" id="3705440">:</span><span class="op" id="3705441">]</span><span class="op" id="3705442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705447">f</span><span class="op" id="3705448">.</span><span class="ident" id="3705449">data</span>&nbsp;<span class="op" id="3705454">=</span>&nbsp;<span class="ident" id="3705456">data</span><span class="op" id="3705460">[</span><span class="num" id="3705461">0</span><span class="op" id="3705462">:</span><span class="ident" id="3705463">n</span><span class="op" id="3705464">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705469">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705484">if</span>&nbsp;<span class="ident" id="3705487">f</span><span class="op" id="3705488">.</span><span class="ident" id="3705489">atEOF</span>&nbsp;<span class="op" id="3705495">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3705498">len</span><span class="op" id="3705501">(</span><span class="ident" id="3705502">f</span><span class="op" id="3705503">.</span><span class="ident" id="3705504">data</span><span class="op" id="3705508">)</span>&nbsp;<span class="op" id="3705510">&gt;</span>&nbsp;<span class="num" id="3705512">0</span>&nbsp;<span class="op" id="3705514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3705518">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705547">s</span>&nbsp;<span class="op" id="3705549">=</span>&nbsp;<span class="builtintype" id="3705551">string</span><span class="op" id="3705557">(</span><span class="ident" id="3705558">data</span><span class="op" id="3705562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705566">f</span><span class="op" id="3705567">.</span><span class="ident" id="3705568">data</span>&nbsp;<span class="op" id="3705573">=</span>&nbsp;<span class="ident" id="3705575">f</span><span class="op" id="3705576">.</span><span class="ident" id="3705577">data</span><span class="op" id="3705581">[</span><span class="num" id="3705582">0</span><span class="op" id="3705583">:</span><span class="num" id="3705584">0</span><span class="op" id="3705585">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705589">ok</span>&nbsp;<span class="op" id="3705592">=</span>&nbsp;<span class="builtintype" id="3705594">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705603">return</span><br>
<span class="lineno">45</span><span class="op" id="3705610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3705613">func</span>&nbsp;<span class="op" id="3705618">(</span><span class="ident" id="3705619">f</span>&nbsp;<span class="op" id="3705621">*</span><span class="ident" id="3705622">file</span><span class="op" id="3705626">)</span>&nbsp;<span class="ident" id="3705628">readLine</span><span class="op" id="3705636">(</span><span class="op" id="3705637">)</span>&nbsp;<span class="op" id="3705639">(</span><span class="ident" id="3705640">s</span>&nbsp;<span class="builtintype" id="3705642">string</span><span class="op" id="3705648">,</span>&nbsp;<span class="ident" id="3705650">ok</span>&nbsp;<span class="builtintype" id="3705653">bool</span><span class="op" id="3705657">)</span>&nbsp;<span class="op" id="3705659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705662">if</span>&nbsp;<span class="ident" id="3705665">s</span><span class="op" id="3705666">,</span>&nbsp;<span class="ident" id="3705668">ok</span>&nbsp;<span class="op" id="3705671">=</span>&nbsp;<span class="ident" id="3705673">f</span><span class="op" id="3705674">.</span><span class="ident" id="3705675">getLineFromData</span><span class="op" id="3705690">(</span><span class="op" id="3705691">)</span><span class="op" id="3705692">;</span>&nbsp;<span class="ident" id="3705694">ok</span>&nbsp;<span class="op" id="3705697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705701">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705712">if</span>&nbsp;<span class="builtinfunc" id="3705715">len</span><span class="op" id="3705718">(</span><span class="ident" id="3705719">f</span><span class="op" id="3705720">.</span><span class="ident" id="3705721">data</span><span class="op" id="3705725">)</span>&nbsp;<span class="op" id="3705727">&lt;</span>&nbsp;<span class="builtinfunc" id="3705729">cap</span><span class="op" id="3705732">(</span><span class="ident" id="3705733">f</span><span class="op" id="3705734">.</span><span class="ident" id="3705735">data</span><span class="op" id="3705739">)</span>&nbsp;<span class="op" id="3705741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705745">ln</span>&nbsp;<span class="op" id="3705748">:=</span>&nbsp;<span class="builtinfunc" id="3705751">len</span><span class="op" id="3705754">(</span><span class="ident" id="3705755">f</span><span class="op" id="3705756">.</span><span class="ident" id="3705757">data</span><span class="op" id="3705761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705765">n</span><span class="op" id="3705766">,</span>&nbsp;<span class="ident" id="3705768">err</span>&nbsp;<span class="op" id="3705772">:=</span>&nbsp;<span class="ident" id="3705775">io</span><span class="op" id="3705777">.</span><span class="ident" id="3705778">ReadFull</span><span class="op" id="3705786">(</span><span class="ident" id="3705787">f</span><span class="op" id="3705788">.</span><span class="ident" id="3705789">file</span><span class="op" id="3705793">,</span>&nbsp;<span class="ident" id="3705795">f</span><span class="op" id="3705796">.</span><span class="ident" id="3705797">data</span><span class="op" id="3705801">[</span><span class="ident" id="3705802">ln</span><span class="op" id="3705804">:</span><span class="builtinfunc" id="3705805">cap</span><span class="op" id="3705808">(</span><span class="ident" id="3705809">f</span><span class="op" id="3705810">.</span><span class="ident" id="3705811">data</span><span class="op" id="3705815">)</span><span class="op" id="3705816">]</span><span class="op" id="3705817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705821">if</span>&nbsp;<span class="ident" id="3705824">n</span>&nbsp;<span class="op" id="3705826">&gt;=</span>&nbsp;<span class="num" id="3705829">0</span>&nbsp;<span class="op" id="3705831">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705836">f</span><span class="op" id="3705837">.</span><span class="ident" id="3705838">data</span>&nbsp;<span class="op" id="3705843">=</span>&nbsp;<span class="ident" id="3705845">f</span><span class="op" id="3705846">.</span><span class="ident" id="3705847">data</span><span class="op" id="3705851">[</span><span class="num" id="3705852">0</span>&nbsp;<span class="op" id="3705854">:</span>&nbsp;<span class="ident" id="3705856">ln</span><span class="op" id="3705858">+</span><span class="ident" id="3705859">n</span><span class="op" id="3705860">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705868">if</span>&nbsp;<span class="ident" id="3705871">err</span>&nbsp;<span class="op" id="3705875">==</span>&nbsp;<span class="ident" id="3705878">io</span><span class="op" id="3705880">.</span><span class="ident" id="3705881">EOF</span>&nbsp;<span class="op" id="3705885">||</span>&nbsp;<span class="ident" id="3705888">err</span>&nbsp;<span class="op" id="3705892">==</span>&nbsp;<span class="ident" id="3705895">io</span><span class="op" id="3705897">.</span><span class="ident" id="3705898">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="3705915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705920">f</span><span class="op" id="3705921">.</span><span class="ident" id="3705922">atEOF</span>&nbsp;<span class="op" id="3705928">=</span>&nbsp;<span class="builtintype" id="3705930">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705937">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705943">s</span><span class="op" id="3705944">,</span>&nbsp;<span class="ident" id="3705946">ok</span>&nbsp;<span class="op" id="3705949">=</span>&nbsp;<span class="ident" id="3705951">f</span><span class="op" id="3705952">.</span><span class="ident" id="3705953">getLineFromData</span><span class="op" id="3705968">(</span><span class="op" id="3705969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705972">return</span><br>
<span class="lineno"></span><span class="op" id="3705979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3705982">func</span>&nbsp;<span class="ident" id="3705987">open</span><span class="op" id="3705991">(</span><span class="ident" id="3705992">name</span>&nbsp;<span class="builtintype" id="3705997">string</span><span class="op" id="3706003">)</span>&nbsp;<span class="op" id="3706005">(</span><span class="op" id="3706006">*</span><span class="ident" id="3706007">file</span><span class="op" id="3706011">,</span>&nbsp;<span class="builtintype" id="3706013">error</span><span class="op" id="3706018">)</span>&nbsp;<span class="op" id="3706020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706023">fd</span><span class="op" id="3706025">,</span>&nbsp;<span class="ident" id="3706027">err</span>&nbsp;<span class="op" id="3706031">:=</span>&nbsp;<span class="ident" id="3706034">os</span><span class="op" id="3706036">.</span><span class="ident" id="3706037">Open</span><span class="op" id="3706041">(</span><span class="ident" id="3706042">name</span><span class="op" id="3706046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706049">if</span>&nbsp;<span class="ident" id="3706052">err</span>&nbsp;<span class="op" id="3706056">!=</span>&nbsp;<span class="ident" id="3706059">nil</span>&nbsp;<span class="op" id="3706063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706067">return</span>&nbsp;<span class="ident" id="3706074">nil</span><span class="op" id="3706077">,</span>&nbsp;<span class="ident" id="3706079">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706084">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706087">return</span>&nbsp;<span class="op" id="3706094">&amp;</span><span class="ident" id="3706095">file</span><span class="op" id="3706099">{</span><span class="ident" id="3706100">fd</span><span class="op" id="3706102">,</span>&nbsp;<span class="builtinfunc" id="3706104">make</span><span class="op" id="3706108">(</span><span class="op" id="3706109">[</span><span class="op" id="3706110">]</span><span class="builtintype" id="3706111">byte</span><span class="op" id="3706115">,</span>&nbsp;<span class="num" id="3706117">0</span><span class="op" id="3706118">,</span>&nbsp;<span class="ident" id="3706120">os</span><span class="op" id="3706122">.</span><span class="ident" id="3706123">Getpagesize</span><span class="op" id="3706134">(</span><span class="op" id="3706135">)</span><span class="op" id="3706136">)</span><span class="op" id="3706137">,</span>&nbsp;<span class="builtintype" id="3706139">false</span><span class="op" id="3706144">}</span><span class="op" id="3706145">,</span>&nbsp;<span class="ident" id="3706147">nil</span><br>
<span class="lineno"></span><span class="op" id="3706151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3706154">func</span>&nbsp;<span class="ident" id="3706159">byteIndex</span><span class="op" id="3706168">(</span><span class="ident" id="3706169">s</span>&nbsp;<span class="builtintype" id="3706171">string</span><span class="op" id="3706177">,</span>&nbsp;<span class="ident" id="3706179">c</span>&nbsp;<span class="builtintype" id="3706181">byte</span><span class="op" id="3706185">)</span>&nbsp;<span class="builtintype" id="3706187">int</span>&nbsp;<span class="op" id="3706191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706194">for</span>&nbsp;<span class="ident" id="3706198">i</span>&nbsp;<span class="op" id="3706200">:=</span>&nbsp;<span class="num" id="3706203">0</span><span class="op" id="3706204">;</span>&nbsp;<span class="ident" id="3706206">i</span>&nbsp;<span class="op" id="3706208">&lt;</span>&nbsp;<span class="builtinfunc" id="3706210">len</span><span class="op" id="3706213">(</span><span class="ident" id="3706214">s</span><span class="op" id="3706215">)</span><span class="op" id="3706216">;</span>&nbsp;<span class="ident" id="3706218">i</span><span class="op" id="3706219">++</span>&nbsp;<span class="op" id="3706222">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706226">if</span>&nbsp;<span class="ident" id="3706229">s</span><span class="op" id="3706230">[</span><span class="ident" id="3706231">i</span><span class="op" id="3706232">]</span>&nbsp;<span class="op" id="3706234">==</span>&nbsp;<span class="ident" id="3706237">c</span>&nbsp;<span class="op" id="3706239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706244">return</span>&nbsp;<span class="ident" id="3706251">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706261">return</span>&nbsp;<span class="op" id="3706268">-</span><span class="num" id="3706269">1</span><br>
<span class="lineno">80</span><span class="op" id="3706271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3706274">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3706319">func</span>&nbsp;<span class="ident" id="3706324">countAnyByte</span><span class="op" id="3706336">(</span><span class="ident" id="3706337">s</span>&nbsp;<span class="builtintype" id="3706339">string</span><span class="op" id="3706345">,</span>&nbsp;<span class="ident" id="3706347">t</span>&nbsp;<span class="builtintype" id="3706349">string</span><span class="op" id="3706355">)</span>&nbsp;<span class="builtintype" id="3706357">int</span>&nbsp;<span class="op" id="3706361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706364">n</span>&nbsp;<span class="op" id="3706366">:=</span>&nbsp;<span class="num" id="3706369">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706372">for</span>&nbsp;<span class="ident" id="3706376">i</span>&nbsp;<span class="op" id="3706378">:=</span>&nbsp;<span class="num" id="3706381">0</span><span class="op" id="3706382">;</span>&nbsp;<span class="ident" id="3706384">i</span>&nbsp;<span class="op" id="3706386">&lt;</span>&nbsp;<span class="builtinfunc" id="3706388">len</span><span class="op" id="3706391">(</span><span class="ident" id="3706392">s</span><span class="op" id="3706393">)</span><span class="op" id="3706394">;</span>&nbsp;<span class="ident" id="3706396">i</span><span class="op" id="3706397">++</span>&nbsp;<span class="op" id="3706400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706404">if</span>&nbsp;<span class="ident" id="3706407">byteIndex</span><span class="op" id="3706416">(</span><span class="ident" id="3706417">t</span><span class="op" id="3706418">,</span>&nbsp;<span class="ident" id="3706420">s</span><span class="op" id="3706421">[</span><span class="ident" id="3706422">i</span><span class="op" id="3706423">]</span><span class="op" id="3706424">)</span>&nbsp;<span class="op" id="3706426">&gt;=</span>&nbsp;<span class="num" id="3706429">0</span>&nbsp;<span class="op" id="3706431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706436">n</span><span class="op" id="3706437">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706445">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706448">return</span>&nbsp;<span class="ident" id="3706455">n</span><br>
<span class="lineno"></span><span class="op" id="3706457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3706460">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3706490">func</span>&nbsp;<span class="ident" id="3706495">splitAtBytes</span><span class="op" id="3706507">(</span><span class="ident" id="3706508">s</span>&nbsp;<span class="builtintype" id="3706510">string</span><span class="op" id="3706516">,</span>&nbsp;<span class="ident" id="3706518">t</span>&nbsp;<span class="builtintype" id="3706520">string</span><span class="op" id="3706526">)</span>&nbsp;<span class="op" id="3706528">[</span><span class="op" id="3706529">]</span><span class="builtintype" id="3706530">string</span>&nbsp;<span class="op" id="3706537">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706540">a</span>&nbsp;<span class="op" id="3706542">:=</span>&nbsp;<span class="builtinfunc" id="3706545">make</span><span class="op" id="3706549">(</span><span class="op" id="3706550">[</span><span class="op" id="3706551">]</span><span class="builtintype" id="3706552">string</span><span class="op" id="3706558">,</span>&nbsp;<span class="num" id="3706560">1</span><span class="op" id="3706561">+</span><span class="ident" id="3706562">countAnyByte</span><span class="op" id="3706574">(</span><span class="ident" id="3706575">s</span><span class="op" id="3706576">,</span>&nbsp;<span class="ident" id="3706578">t</span><span class="op" id="3706579">)</span><span class="op" id="3706580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706583">n</span>&nbsp;<span class="op" id="3706585">:=</span>&nbsp;<span class="num" id="3706588">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706591">last</span>&nbsp;<span class="op" id="3706596">:=</span>&nbsp;<span class="num" id="3706599">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706602">for</span>&nbsp;<span class="ident" id="3706606">i</span>&nbsp;<span class="op" id="3706608">:=</span>&nbsp;<span class="num" id="3706611">0</span><span class="op" id="3706612">;</span>&nbsp;<span class="ident" id="3706614">i</span>&nbsp;<span class="op" id="3706616">&lt;</span>&nbsp;<span class="builtinfunc" id="3706618">len</span><span class="op" id="3706621">(</span><span class="ident" id="3706622">s</span><span class="op" id="3706623">)</span><span class="op" id="3706624">;</span>&nbsp;<span class="ident" id="3706626">i</span><span class="op" id="3706627">++</span>&nbsp;<span class="op" id="3706630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706634">if</span>&nbsp;<span class="ident" id="3706637">byteIndex</span><span class="op" id="3706646">(</span><span class="ident" id="3706647">t</span><span class="op" id="3706648">,</span>&nbsp;<span class="ident" id="3706650">s</span><span class="op" id="3706651">[</span><span class="ident" id="3706652">i</span><span class="op" id="3706653">]</span><span class="op" id="3706654">)</span>&nbsp;<span class="op" id="3706656">&gt;=</span>&nbsp;<span class="num" id="3706659">0</span>&nbsp;<span class="op" id="3706661">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706666">if</span>&nbsp;<span class="ident" id="3706669">last</span>&nbsp;<span class="op" id="3706674">&lt;</span>&nbsp;<span class="ident" id="3706676">i</span>&nbsp;<span class="op" id="3706678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706684">a</span><span class="op" id="3706685">[</span><span class="ident" id="3706686">n</span><span class="op" id="3706687">]</span>&nbsp;<span class="op" id="3706689">=</span>&nbsp;<span class="builtintype" id="3706691">string</span><span class="op" id="3706697">(</span><span class="ident" id="3706698">s</span><span class="op" id="3706699">[</span><span class="ident" id="3706700">last</span><span class="op" id="3706704">:</span><span class="ident" id="3706705">i</span><span class="op" id="3706706">]</span><span class="op" id="3706707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706713">n</span><span class="op" id="3706714">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706725">last</span>&nbsp;<span class="op" id="3706730">=</span>&nbsp;<span class="ident" id="3706732">i</span>&nbsp;<span class="op" id="3706734">+</span>&nbsp;<span class="num" id="3706736">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706746">if</span>&nbsp;<span class="ident" id="3706749">last</span>&nbsp;<span class="op" id="3706754">&lt;</span>&nbsp;<span class="builtinfunc" id="3706756">len</span><span class="op" id="3706759">(</span><span class="ident" id="3706760">s</span><span class="op" id="3706761">)</span>&nbsp;<span class="op" id="3706763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706767">a</span><span class="op" id="3706768">[</span><span class="ident" id="3706769">n</span><span class="op" id="3706770">]</span>&nbsp;<span class="op" id="3706772">=</span>&nbsp;<span class="builtintype" id="3706774">string</span><span class="op" id="3706780">(</span><span class="ident" id="3706781">s</span><span class="op" id="3706782">[</span><span class="ident" id="3706783">last</span><span class="op" id="3706787">:</span><span class="op" id="3706788">]</span><span class="op" id="3706789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706793">n</span><span class="op" id="3706794">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706801">return</span>&nbsp;<span class="ident" id="3706808">a</span><span class="op" id="3706809">[</span><span class="num" id="3706810">0</span><span class="op" id="3706811">:</span><span class="ident" id="3706812">n</span><span class="op" id="3706813">]</span><br>
<span class="lineno"></span><span class="op" id="3706815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3706818">func</span>&nbsp;<span class="ident" id="3706823">getFields</span><span class="op" id="3706832">(</span><span class="ident" id="3706833">s</span>&nbsp;<span class="builtintype" id="3706835">string</span><span class="op" id="3706841">)</span>&nbsp;<span class="op" id="3706843">[</span><span class="op" id="3706844">]</span><span class="builtintype" id="3706845">string</span>&nbsp;<span class="op" id="3706852">{</span>&nbsp;<span class="keyword" id="3706854">return</span>&nbsp;<span class="ident" id="3706861">splitAtBytes</span><span class="op" id="3706873">(</span><span class="ident" id="3706874">s</span><span class="op" id="3706875">,</span>&nbsp;<span class="string" id="3706877">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="3706886">)</span>&nbsp;<span class="op" id="3706888">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3706891">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="3706951">const</span>&nbsp;<span class="ident" id="3706957">big</span>&nbsp;<span class="op" id="3706961">=</span>&nbsp;<span class="num" id="3706963">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3706973">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="3707015">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3707055">func</span>&nbsp;<span class="ident" id="3707060">dtoi</span><span class="op" id="3707064">(</span><span class="ident" id="3707065">s</span>&nbsp;<span class="builtintype" id="3707067">string</span><span class="op" id="3707073">,</span>&nbsp;<span class="ident" id="3707075">i0</span>&nbsp;<span class="builtintype" id="3707078">int</span><span class="op" id="3707081">)</span>&nbsp;<span class="op" id="3707083">(</span><span class="ident" id="3707084">n</span>&nbsp;<span class="builtintype" id="3707086">int</span><span class="op" id="3707089">,</span>&nbsp;<span class="ident" id="3707091">i</span>&nbsp;<span class="builtintype" id="3707093">int</span><span class="op" id="3707096">,</span>&nbsp;<span class="ident" id="3707098">ok</span>&nbsp;<span class="builtintype" id="3707101">bool</span><span class="op" id="3707105">)</span>&nbsp;<span class="op" id="3707107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707110">n</span>&nbsp;<span class="op" id="3707112">=</span>&nbsp;<span class="num" id="3707114">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707117">for</span>&nbsp;<span class="ident" id="3707121">i</span>&nbsp;<span class="op" id="3707123">=</span>&nbsp;<span class="ident" id="3707125">i0</span><span class="op" id="3707127">;</span>&nbsp;<span class="ident" id="3707129">i</span>&nbsp;<span class="op" id="3707131">&lt;</span>&nbsp;<span class="builtinfunc" id="3707133">len</span><span class="op" id="3707136">(</span><span class="ident" id="3707137">s</span><span class="op" id="3707138">)</span>&nbsp;<span class="op" id="3707140">&amp;&amp;</span>&nbsp;<span class="string" id="3707143">&#39;0&#39;</span>&nbsp;<span class="op" id="3707147">&lt;=</span>&nbsp;<span class="ident" id="3707150">s</span><span class="op" id="3707151">[</span><span class="ident" id="3707152">i</span><span class="op" id="3707153">]</span>&nbsp;<span class="op" id="3707155">&amp;&amp;</span>&nbsp;<span class="ident" id="3707158">s</span><span class="op" id="3707159">[</span><span class="ident" id="3707160">i</span><span class="op" id="3707161">]</span>&nbsp;<span class="op" id="3707163">&lt;=</span>&nbsp;<span class="string" id="3707166">&#39;9&#39;</span><span class="op" id="3707169">;</span>&nbsp;<span class="ident" id="3707171">i</span><span class="op" id="3707172">++</span>&nbsp;<span class="op" id="3707175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707179">n</span>&nbsp;<span class="op" id="3707181">=</span>&nbsp;<span class="ident" id="3707183">n</span><span class="op" id="3707184">*</span><span class="num" id="3707185">10</span>&nbsp;<span class="op" id="3707188">+</span>&nbsp;<span class="builtintype" id="3707190">int</span><span class="op" id="3707193">(</span><span class="ident" id="3707194">s</span><span class="op" id="3707195">[</span><span class="ident" id="3707196">i</span><span class="op" id="3707197">]</span><span class="op" id="3707198">-</span><span class="string" id="3707199">&#39;0&#39;</span><span class="op" id="3707202">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707206">if</span>&nbsp;<span class="ident" id="3707209">n</span>&nbsp;<span class="op" id="3707211">&gt;=</span>&nbsp;<span class="ident" id="3707214">big</span>&nbsp;<span class="op" id="3707218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707223">return</span>&nbsp;<span class="num" id="3707230">0</span><span class="op" id="3707231">,</span>&nbsp;<span class="ident" id="3707233">i</span><span class="op" id="3707234">,</span>&nbsp;<span class="builtintype" id="3707236">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707250">if</span>&nbsp;<span class="ident" id="3707253">i</span>&nbsp;<span class="op" id="3707255">==</span>&nbsp;<span class="ident" id="3707258">i0</span>&nbsp;<span class="op" id="3707261">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707265">return</span>&nbsp;<span class="num" id="3707272">0</span><span class="op" id="3707273">,</span>&nbsp;<span class="ident" id="3707275">i</span><span class="op" id="3707276">,</span>&nbsp;<span class="builtintype" id="3707278">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707288">return</span>&nbsp;<span class="ident" id="3707295">n</span><span class="op" id="3707296">,</span>&nbsp;<span class="ident" id="3707298">i</span><span class="op" id="3707299">,</span>&nbsp;<span class="builtintype" id="3707301">true</span><br>
<span class="lineno"></span><span class="op" id="3707306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3707309">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="3707355">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3707395">func</span>&nbsp;<span class="ident" id="3707400">xtoi</span><span class="op" id="3707404">(</span><span class="ident" id="3707405">s</span>&nbsp;<span class="builtintype" id="3707407">string</span><span class="op" id="3707413">,</span>&nbsp;<span class="ident" id="3707415">i0</span>&nbsp;<span class="builtintype" id="3707418">int</span><span class="op" id="3707421">)</span>&nbsp;<span class="op" id="3707423">(</span><span class="ident" id="3707424">n</span>&nbsp;<span class="builtintype" id="3707426">int</span><span class="op" id="3707429">,</span>&nbsp;<span class="ident" id="3707431">i</span>&nbsp;<span class="builtintype" id="3707433">int</span><span class="op" id="3707436">,</span>&nbsp;<span class="ident" id="3707438">ok</span>&nbsp;<span class="builtintype" id="3707441">bool</span><span class="op" id="3707445">)</span>&nbsp;<span class="op" id="3707447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707450">n</span>&nbsp;<span class="op" id="3707452">=</span>&nbsp;<span class="num" id="3707454">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707457">for</span>&nbsp;<span class="ident" id="3707461">i</span>&nbsp;<span class="op" id="3707463">=</span>&nbsp;<span class="ident" id="3707465">i0</span><span class="op" id="3707467">;</span>&nbsp;<span class="ident" id="3707469">i</span>&nbsp;<span class="op" id="3707471">&lt;</span>&nbsp;<span class="builtinfunc" id="3707473">len</span><span class="op" id="3707476">(</span><span class="ident" id="3707477">s</span><span class="op" id="3707478">)</span><span class="op" id="3707479">;</span>&nbsp;<span class="ident" id="3707481">i</span><span class="op" id="3707482">++</span>&nbsp;<span class="op" id="3707485">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707489">if</span>&nbsp;<span class="string" id="3707492">&#39;0&#39;</span>&nbsp;<span class="op" id="3707496">&lt;=</span>&nbsp;<span class="ident" id="3707499">s</span><span class="op" id="3707500">[</span><span class="ident" id="3707501">i</span><span class="op" id="3707502">]</span>&nbsp;<span class="op" id="3707504">&amp;&amp;</span>&nbsp;<span class="ident" id="3707507">s</span><span class="op" id="3707508">[</span><span class="ident" id="3707509">i</span><span class="op" id="3707510">]</span>&nbsp;<span class="op" id="3707512">&lt;=</span>&nbsp;<span class="string" id="3707515">&#39;9&#39;</span>&nbsp;<span class="op" id="3707519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707524">n</span>&nbsp;<span class="op" id="3707526">*=</span>&nbsp;<span class="num" id="3707529">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707535">n</span>&nbsp;<span class="op" id="3707537">+=</span>&nbsp;<span class="builtintype" id="3707540">int</span><span class="op" id="3707543">(</span><span class="ident" id="3707544">s</span><span class="op" id="3707545">[</span><span class="ident" id="3707546">i</span><span class="op" id="3707547">]</span>&nbsp;<span class="op" id="3707549">-</span>&nbsp;<span class="string" id="3707551">&#39;0&#39;</span><span class="op" id="3707554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707558">}</span>&nbsp;<span class="keyword" id="3707560">else</span>&nbsp;<span class="keyword" id="3707565">if</span>&nbsp;<span class="string" id="3707568">&#39;a&#39;</span>&nbsp;<span class="op" id="3707572">&lt;=</span>&nbsp;<span class="ident" id="3707575">s</span><span class="op" id="3707576">[</span><span class="ident" id="3707577">i</span><span class="op" id="3707578">]</span>&nbsp;<span class="op" id="3707580">&amp;&amp;</span>&nbsp;<span class="ident" id="3707583">s</span><span class="op" id="3707584">[</span><span class="ident" id="3707585">i</span><span class="op" id="3707586">]</span>&nbsp;<span class="op" id="3707588">&lt;=</span>&nbsp;<span class="string" id="3707591">&#39;f&#39;</span>&nbsp;<span class="op" id="3707595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707600">n</span>&nbsp;<span class="op" id="3707602">*=</span>&nbsp;<span class="num" id="3707605">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707611">n</span>&nbsp;<span class="op" id="3707613">+=</span>&nbsp;<span class="builtintype" id="3707616">int</span><span class="op" id="3707619">(</span><span class="ident" id="3707620">s</span><span class="op" id="3707621">[</span><span class="ident" id="3707622">i</span><span class="op" id="3707623">]</span><span class="op" id="3707624">-</span><span class="string" id="3707625">&#39;a&#39;</span><span class="op" id="3707628">)</span>&nbsp;<span class="op" id="3707630">+</span>&nbsp;<span class="num" id="3707632">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707637">}</span>&nbsp;<span class="keyword" id="3707639">else</span>&nbsp;<span class="keyword" id="3707644">if</span>&nbsp;<span class="string" id="3707647">&#39;A&#39;</span>&nbsp;<span class="op" id="3707651">&lt;=</span>&nbsp;<span class="ident" id="3707654">s</span><span class="op" id="3707655">[</span><span class="ident" id="3707656">i</span><span class="op" id="3707657">]</span>&nbsp;<span class="op" id="3707659">&amp;&amp;</span>&nbsp;<span class="ident" id="3707662">s</span><span class="op" id="3707663">[</span><span class="ident" id="3707664">i</span><span class="op" id="3707665">]</span>&nbsp;<span class="op" id="3707667">&lt;=</span>&nbsp;<span class="string" id="3707670">&#39;F&#39;</span>&nbsp;<span class="op" id="3707674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707679">n</span>&nbsp;<span class="op" id="3707681">*=</span>&nbsp;<span class="num" id="3707684">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707690">n</span>&nbsp;<span class="op" id="3707692">+=</span>&nbsp;<span class="builtintype" id="3707695">int</span><span class="op" id="3707698">(</span><span class="ident" id="3707699">s</span><span class="op" id="3707700">[</span><span class="ident" id="3707701">i</span><span class="op" id="3707702">]</span><span class="op" id="3707703">-</span><span class="string" id="3707704">&#39;A&#39;</span><span class="op" id="3707707">)</span>&nbsp;<span class="op" id="3707709">+</span>&nbsp;<span class="num" id="3707711">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707716">}</span>&nbsp;<span class="keyword" id="3707718">else</span>&nbsp;<span class="op" id="3707723">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707728">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707740">if</span>&nbsp;<span class="ident" id="3707743">n</span>&nbsp;<span class="op" id="3707745">&gt;=</span>&nbsp;<span class="ident" id="3707748">big</span>&nbsp;<span class="op" id="3707752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707757">return</span>&nbsp;<span class="num" id="3707764">0</span><span class="op" id="3707765">,</span>&nbsp;<span class="ident" id="3707767">i</span><span class="op" id="3707768">,</span>&nbsp;<span class="builtintype" id="3707770">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707778">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707784">if</span>&nbsp;<span class="ident" id="3707787">i</span>&nbsp;<span class="op" id="3707789">==</span>&nbsp;<span class="ident" id="3707792">i0</span>&nbsp;<span class="op" id="3707795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707799">return</span>&nbsp;<span class="num" id="3707806">0</span><span class="op" id="3707807">,</span>&nbsp;<span class="ident" id="3707809">i</span><span class="op" id="3707810">,</span>&nbsp;<span class="builtintype" id="3707812">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707822">return</span>&nbsp;<span class="ident" id="3707829">n</span><span class="op" id="3707830">,</span>&nbsp;<span class="ident" id="3707832">i</span><span class="op" id="3707833">,</span>&nbsp;<span class="builtintype" id="3707835">true</span><br>
<span class="lineno">160</span><span class="op" id="3707840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3707843">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3707903">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="3707965">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="3708033">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3708073">func</span>&nbsp;<span class="ident" id="3708078">xtoi2</span><span class="op" id="3708083">(</span><span class="ident" id="3708084">s</span>&nbsp;<span class="builtintype" id="3708086">string</span><span class="op" id="3708092">,</span>&nbsp;<span class="ident" id="3708094">e</span>&nbsp;<span class="builtintype" id="3708096">byte</span><span class="op" id="3708100">)</span>&nbsp;<span class="op" id="3708102">(</span><span class="builtintype" id="3708103">byte</span><span class="op" id="3708107">,</span>&nbsp;<span class="builtintype" id="3708109">bool</span><span class="op" id="3708113">)</span>&nbsp;<span class="op" id="3708115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708118">if</span>&nbsp;<span class="builtinfunc" id="3708121">len</span><span class="op" id="3708124">(</span><span class="ident" id="3708125">s</span><span class="op" id="3708126">)</span>&nbsp;<span class="op" id="3708128">&gt;</span>&nbsp;<span class="num" id="3708130">2</span>&nbsp;<span class="op" id="3708132">&amp;&amp;</span>&nbsp;<span class="ident" id="3708135">s</span><span class="op" id="3708136">[</span><span class="num" id="3708137">2</span><span class="op" id="3708138">]</span>&nbsp;<span class="op" id="3708140">!=</span>&nbsp;<span class="ident" id="3708143">e</span>&nbsp;<span class="op" id="3708145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708149">return</span>&nbsp;<span class="num" id="3708156">0</span><span class="op" id="3708157">,</span>&nbsp;<span class="builtintype" id="3708159">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708166">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708169">n</span><span class="op" id="3708170">,</span>&nbsp;<span class="ident" id="3708172">ei</span><span class="op" id="3708174">,</span>&nbsp;<span class="ident" id="3708176">ok</span>&nbsp;<span class="op" id="3708179">:=</span>&nbsp;<span class="ident" id="3708182">xtoi</span><span class="op" id="3708186">(</span><span class="ident" id="3708187">s</span><span class="op" id="3708188">[</span><span class="op" id="3708189">:</span><span class="num" id="3708190">2</span><span class="op" id="3708191">]</span><span class="op" id="3708192">,</span>&nbsp;<span class="num" id="3708194">0</span><span class="op" id="3708195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708198">return</span>&nbsp;<span class="builtintype" id="3708205">byte</span><span class="op" id="3708209">(</span><span class="ident" id="3708210">n</span><span class="op" id="3708211">)</span><span class="op" id="3708212">,</span>&nbsp;<span class="ident" id="3708214">ok</span>&nbsp;<span class="op" id="3708217">&amp;&amp;</span>&nbsp;<span class="ident" id="3708220">ei</span>&nbsp;<span class="op" id="3708223">==</span>&nbsp;<span class="num" id="3708226">2</span><br>
<span class="lineno"></span><span class="op" id="3708228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3708231">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="3708254">func</span>&nbsp;<span class="ident" id="3708259">itoa</span><span class="op" id="3708263">(</span><span class="ident" id="3708264">i</span>&nbsp;<span class="builtintype" id="3708266">int</span><span class="op" id="3708269">)</span>&nbsp;<span class="builtintype" id="3708271">string</span>&nbsp;<span class="op" id="3708278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708281">var</span>&nbsp;<span class="ident" id="3708285">buf</span>&nbsp;<span class="op" id="3708289">[</span><span class="num" id="3708290">30</span><span class="op" id="3708292">]</span><span class="builtintype" id="3708293">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708299">n</span>&nbsp;<span class="op" id="3708301">:=</span>&nbsp;<span class="builtinfunc" id="3708304">len</span><span class="op" id="3708307">(</span><span class="ident" id="3708308">buf</span><span class="op" id="3708311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708314">neg</span>&nbsp;<span class="op" id="3708318">:=</span>&nbsp;<span class="builtintype" id="3708321">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708328">if</span>&nbsp;<span class="ident" id="3708331">i</span>&nbsp;<span class="op" id="3708333">&lt;</span>&nbsp;<span class="num" id="3708335">0</span>&nbsp;<span class="op" id="3708337">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708341">i</span>&nbsp;<span class="op" id="3708343">=</span>&nbsp;<span class="op" id="3708345">-</span><span class="ident" id="3708346">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708350">neg</span>&nbsp;<span class="op" id="3708354">=</span>&nbsp;<span class="builtintype" id="3708356">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708365">ui</span>&nbsp;<span class="op" id="3708368">:=</span>&nbsp;<span class="builtintype" id="3708371">uint</span><span class="op" id="3708375">(</span><span class="ident" id="3708376">i</span><span class="op" id="3708377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708380">for</span>&nbsp;<span class="ident" id="3708384">ui</span>&nbsp;<span class="op" id="3708387">&gt;</span>&nbsp;<span class="num" id="3708389">0</span>&nbsp;<span class="op" id="3708391">||</span>&nbsp;<span class="ident" id="3708394">n</span>&nbsp;<span class="op" id="3708396">==</span>&nbsp;<span class="builtinfunc" id="3708399">len</span><span class="op" id="3708402">(</span><span class="ident" id="3708403">buf</span><span class="op" id="3708406">)</span>&nbsp;<span class="op" id="3708408">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708412">n</span><span class="op" id="3708413">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708418">buf</span><span class="op" id="3708421">[</span><span class="ident" id="3708422">n</span><span class="op" id="3708423">]</span>&nbsp;<span class="op" id="3708425">=</span>&nbsp;<span class="builtintype" id="3708427">byte</span><span class="op" id="3708431">(</span><span class="string" id="3708432">&#39;0&#39;</span>&nbsp;<span class="op" id="3708436">+</span>&nbsp;<span class="ident" id="3708438">ui</span><span class="op" id="3708440">%</span><span class="num" id="3708441">10</span><span class="op" id="3708443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708447">ui</span>&nbsp;<span class="op" id="3708450">/=</span>&nbsp;<span class="num" id="3708453">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708460">if</span>&nbsp;<span class="ident" id="3708463">neg</span>&nbsp;<span class="op" id="3708467">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708471">n</span><span class="op" id="3708472">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708477">buf</span><span class="op" id="3708480">[</span><span class="ident" id="3708481">n</span><span class="op" id="3708482">]</span>&nbsp;<span class="op" id="3708484">=</span>&nbsp;<span class="string" id="3708486">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708494">return</span>&nbsp;<span class="builtintype" id="3708501">string</span><span class="op" id="3708507">(</span><span class="ident" id="3708508">buf</span><span class="op" id="3708511">[</span><span class="ident" id="3708512">n</span><span class="op" id="3708513">:</span><span class="op" id="3708514">]</span><span class="op" id="3708515">)</span><br>
<span class="lineno"></span><span class="op" id="3708517">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3708520">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3708552">func</span>&nbsp;<span class="ident" id="3708557">itod</span><span class="op" id="3708561">(</span><span class="ident" id="3708562">i</span>&nbsp;<span class="builtintype" id="3708564">uint</span><span class="op" id="3708568">)</span>&nbsp;<span class="builtintype" id="3708570">string</span>&nbsp;<span class="op" id="3708577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708580">if</span>&nbsp;<span class="ident" id="3708583">i</span>&nbsp;<span class="op" id="3708585">==</span>&nbsp;<span class="num" id="3708588">0</span>&nbsp;<span class="op" id="3708590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708594">return</span>&nbsp;<span class="string" id="3708601">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3708610">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708649">var</span>&nbsp;<span class="ident" id="3708653">b</span>&nbsp;<span class="op" id="3708655">[</span><span class="num" id="3708656">32</span><span class="op" id="3708658">]</span><span class="builtintype" id="3708659">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708665">bp</span>&nbsp;<span class="op" id="3708668">:=</span>&nbsp;<span class="builtinfunc" id="3708671">len</span><span class="op" id="3708674">(</span><span class="ident" id="3708675">b</span><span class="op" id="3708676">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708679">for</span>&nbsp;<span class="op" id="3708683">;</span>&nbsp;<span class="ident" id="3708685">i</span>&nbsp;<span class="op" id="3708687">&gt;</span>&nbsp;<span class="num" id="3708689">0</span><span class="op" id="3708690">;</span>&nbsp;<span class="ident" id="3708692">i</span>&nbsp;<span class="op" id="3708694">/=</span>&nbsp;<span class="num" id="3708697">10</span>&nbsp;<span class="op" id="3708700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708704">bp</span><span class="op" id="3708706">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708711">b</span><span class="op" id="3708712">[</span><span class="ident" id="3708713">bp</span><span class="op" id="3708715">]</span>&nbsp;<span class="op" id="3708717">=</span>&nbsp;<span class="builtintype" id="3708719">byte</span><span class="op" id="3708723">(</span><span class="ident" id="3708724">i</span><span class="op" id="3708725">%</span><span class="num" id="3708726">10</span><span class="op" id="3708728">)</span>&nbsp;<span class="op" id="3708730">+</span>&nbsp;<span class="string" id="3708732">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708741">return</span>&nbsp;<span class="builtintype" id="3708748">string</span><span class="op" id="3708754">(</span><span class="ident" id="3708755">b</span><span class="op" id="3708756">[</span><span class="ident" id="3708757">bp</span><span class="op" id="3708759">:</span><span class="op" id="3708760">]</span><span class="op" id="3708761">)</span><br>
<span class="lineno"></span><span class="op" id="3708763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3708766">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="3708835">func</span>&nbsp;<span class="ident" id="3708840">appendHex</span><span class="op" id="3708849">(</span><span class="ident" id="3708850">dst</span>&nbsp;<span class="op" id="3708854">[</span><span class="op" id="3708855">]</span><span class="builtintype" id="3708856">byte</span><span class="op" id="3708860">,</span>&nbsp;<span class="ident" id="3708862">i</span>&nbsp;<span class="builtintype" id="3708864">uint32</span><span class="op" id="3708870">)</span>&nbsp;<span class="op" id="3708872">[</span><span class="op" id="3708873">]</span><span class="builtintype" id="3708874">byte</span>&nbsp;<span class="op" id="3708879">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708882">if</span>&nbsp;<span class="ident" id="3708885">i</span>&nbsp;<span class="op" id="3708887">==</span>&nbsp;<span class="num" id="3708890">0</span>&nbsp;<span class="op" id="3708892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708896">return</span>&nbsp;<span class="builtinfunc" id="3708903">append</span><span class="op" id="3708909">(</span><span class="ident" id="3708910">dst</span><span class="op" id="3708913">,</span>&nbsp;<span class="string" id="3708915">&#39;0&#39;</span><span class="op" id="3708918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708924">for</span>&nbsp;<span class="ident" id="3708928">j</span>&nbsp;<span class="op" id="3708930">:=</span>&nbsp;<span class="num" id="3708933">7</span><span class="op" id="3708934">;</span>&nbsp;<span class="ident" id="3708936">j</span>&nbsp;<span class="op" id="3708938">&gt;=</span>&nbsp;<span class="num" id="3708941">0</span><span class="op" id="3708942">;</span>&nbsp;<span class="ident" id="3708944">j</span><span class="op" id="3708945">--</span>&nbsp;<span class="op" id="3708948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708952">v</span>&nbsp;<span class="op" id="3708954">:=</span>&nbsp;<span class="ident" id="3708957">i</span>&nbsp;<span class="op" id="3708959">&gt;&gt;</span>&nbsp;<span class="builtintype" id="3708962">uint</span><span class="op" id="3708966">(</span><span class="ident" id="3708967">j</span><span class="op" id="3708968">*</span><span class="num" id="3708969">4</span><span class="op" id="3708970">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708974">if</span>&nbsp;<span class="ident" id="3708977">v</span>&nbsp;<span class="op" id="3708979">&gt;</span>&nbsp;<span class="num" id="3708981">0</span>&nbsp;<span class="op" id="3708983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708988">dst</span>&nbsp;<span class="op" id="3708992">=</span>&nbsp;<span class="builtinfunc" id="3708994">append</span><span class="op" id="3709000">(</span><span class="ident" id="3709001">dst</span><span class="op" id="3709004">,</span>&nbsp;<span class="ident" id="3709006">hexDigit</span><span class="op" id="3709014">[</span><span class="ident" id="3709015">v</span><span class="op" id="3709016">&amp;</span><span class="num" id="3709017">0xf</span><span class="op" id="3709020">]</span><span class="op" id="3709021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709031">return</span>&nbsp;<span class="ident" id="3709038">dst</span><br>
<span class="lineno">225</span><span class="op" id="3709042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3709045">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3709081">func</span>&nbsp;<span class="ident" id="3709086">count</span><span class="op" id="3709091">(</span><span class="ident" id="3709092">s</span>&nbsp;<span class="builtintype" id="3709094">string</span><span class="op" id="3709100">,</span>&nbsp;<span class="ident" id="3709102">b</span>&nbsp;<span class="builtintype" id="3709104">byte</span><span class="op" id="3709108">)</span>&nbsp;<span class="builtintype" id="3709110">int</span>&nbsp;<span class="op" id="3709114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709117">n</span>&nbsp;<span class="op" id="3709119">:=</span>&nbsp;<span class="num" id="3709122">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709125">for</span>&nbsp;<span class="ident" id="3709129">i</span>&nbsp;<span class="op" id="3709131">:=</span>&nbsp;<span class="num" id="3709134">0</span><span class="op" id="3709135">;</span>&nbsp;<span class="ident" id="3709137">i</span>&nbsp;<span class="op" id="3709139">&lt;</span>&nbsp;<span class="builtinfunc" id="3709141">len</span><span class="op" id="3709144">(</span><span class="ident" id="3709145">s</span><span class="op" id="3709146">)</span><span class="op" id="3709147">;</span>&nbsp;<span class="ident" id="3709149">i</span><span class="op" id="3709150">++</span>&nbsp;<span class="op" id="3709153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709157">if</span>&nbsp;<span class="ident" id="3709160">s</span><span class="op" id="3709161">[</span><span class="ident" id="3709162">i</span><span class="op" id="3709163">]</span>&nbsp;<span class="op" id="3709165">==</span>&nbsp;<span class="ident" id="3709168">b</span>&nbsp;<span class="op" id="3709170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709175">n</span><span class="op" id="3709176">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709184">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709187">return</span>&nbsp;<span class="ident" id="3709194">n</span><br>
<span class="lineno"></span><span class="op" id="3709196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3709199">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3709243">func</span>&nbsp;<span class="ident" id="3709248">last</span><span class="op" id="3709252">(</span><span class="ident" id="3709253">s</span>&nbsp;<span class="builtintype" id="3709255">string</span><span class="op" id="3709261">,</span>&nbsp;<span class="ident" id="3709263">b</span>&nbsp;<span class="builtintype" id="3709265">byte</span><span class="op" id="3709269">)</span>&nbsp;<span class="builtintype" id="3709271">int</span>&nbsp;<span class="op" id="3709275">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709278">i</span>&nbsp;<span class="op" id="3709280">:=</span>&nbsp;<span class="builtinfunc" id="3709283">len</span><span class="op" id="3709286">(</span><span class="ident" id="3709287">s</span><span class="op" id="3709288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709291">for</span>&nbsp;<span class="ident" id="3709295">i</span><span class="op" id="3709296">--</span><span class="op" id="3709298">;</span>&nbsp;<span class="ident" id="3709300">i</span>&nbsp;<span class="op" id="3709302">&gt;=</span>&nbsp;<span class="num" id="3709305">0</span><span class="op" id="3709306">;</span>&nbsp;<span class="ident" id="3709308">i</span><span class="op" id="3709309">--</span>&nbsp;<span class="op" id="3709312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709316">if</span>&nbsp;<span class="ident" id="3709319">s</span><span class="op" id="3709320">[</span><span class="ident" id="3709321">i</span><span class="op" id="3709322">]</span>&nbsp;<span class="op" id="3709324">==</span>&nbsp;<span class="ident" id="3709327">b</span>&nbsp;<span class="op" id="3709329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709334">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709342">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709348">return</span>&nbsp;<span class="ident" id="3709355">i</span><br>
<span class="lineno"></span><span class="op" id="3709357">}</span>
</div>
</body>
</html>
