<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6441466">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6441521">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6441575">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6441626">package</span>&nbsp;<span class="ident" id="6441634">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6441639">import</span>&nbsp;<span class="op" id="6441646">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441649">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441658">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441677">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441693">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441699">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441712">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441718">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441735">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441745">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441756">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441767">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6441774">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6441777">type</span>&nbsp;<span class="ident" id="6441782">ZipTest</span>&nbsp;<span class="keyword" id="6441790">struct</span>&nbsp;<span class="op" id="6441797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441800">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6441808">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441816">Source</span>&nbsp;&nbsp;<span class="keyword" id="6441824">func</span><span class="op" id="6441828">(</span><span class="op" id="6441829">)</span>&nbsp;<span class="op" id="6441831">(</span><span class="ident" id="6441832">r</span>&nbsp;<span class="ident" id="6441834">io</span><span class="op" id="6441836">.</span><span class="ident" id="6441837">ReaderAt</span><span class="op" id="6441845">,</span>&nbsp;<span class="ident" id="6441847">size</span>&nbsp;<span class="ident" id="6441852">int64</span><span class="op" id="6441857">)</span>&nbsp;<span class="comment" id="6441859">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441912">Comment</span>&nbsp;<span class="builtintype" id="6441920">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441928">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441936">[</span><span class="op" id="6441937">]</span><span class="ident" id="6441938">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441951">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6441959">error</span>&nbsp;<span class="comment" id="6441965">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="6442015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6442018">type</span>&nbsp;<span class="ident" id="6442023">ZipTestFile</span>&nbsp;<span class="keyword" id="6442035">struct</span>&nbsp;<span class="op" id="6442042">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442045">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6442056">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442064">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442075">[</span><span class="op" id="6442076">]</span><span class="builtintype" id="6442077">byte</span>&nbsp;<span class="comment" id="6442082">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442133">ContentErr</span>&nbsp;<span class="builtintype" id="6442144">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442151">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6442162">string</span>&nbsp;<span class="comment" id="6442169">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442224">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6442235">string</span>&nbsp;<span class="comment" id="6442242">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442290">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442301">os</span><span class="op" id="6442303">.</span><span class="ident" id="6442304">FileMode</span><br>
<span class="lineno"></span><span class="op" id="6442313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6442316">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6442391">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="6442466">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="6442540">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="6442614">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="6442690">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="6442764">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="6442844">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="6442923">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6442971">var</span>&nbsp;<span class="ident" id="6442975">tests</span>&nbsp;<span class="op" id="6442981">=</span>&nbsp;<span class="op" id="6442983">[</span><span class="op" id="6442984">]</span><span class="ident" id="6442985">ZipTest</span><span class="op" id="6442992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442995">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442999">Name</span><span class="op" id="6443003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443008">&#34;test.zip&#34;</span><span class="op" id="6443018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443022">Comment</span><span class="op" id="6443029">:</span>&nbsp;<span class="string" id="6443031">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6443059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443063">File</span><span class="op" id="6443067">:</span>&nbsp;<span class="op" id="6443069">[</span><span class="op" id="6443070">]</span><span class="ident" id="6443071">ZipTestFile</span><span class="op" id="6443082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443093">Name</span><span class="op" id="6443097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443102">&#34;test.txt&#34;</span><span class="op" id="6443112">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443118">Content</span><span class="op" id="6443125">:</span>&nbsp;<span class="op" id="6443127">[</span><span class="op" id="6443128">]</span><span class="builtintype" id="6443129">byte</span><span class="op" id="6443133">(</span><span class="string" id="6443134">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6443163">)</span><span class="op" id="6443164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443170">Mtime</span><span class="op" id="6443175">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6443179">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6443198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443204">Mode</span><span class="op" id="6443208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6443213">0644</span><span class="op" id="6443217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443222">}</span><span class="op" id="6443223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443228">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443234">Name</span><span class="op" id="6443238">:</span>&nbsp;&nbsp;<span class="string" id="6443241">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6443263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443269">File</span><span class="op" id="6443273">:</span>&nbsp;&nbsp;<span class="string" id="6443276">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6443298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443304">Mtime</span><span class="op" id="6443309">:</span>&nbsp;<span class="string" id="6443311">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6443330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443336">Mode</span><span class="op" id="6443340">:</span>&nbsp;&nbsp;<span class="num" id="6443343">0644</span><span class="op" id="6443347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443352">}</span><span class="op" id="6443353">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443357">}</span><span class="op" id="6443358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443361">}</span><span class="op" id="6443362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443369">Name</span><span class="op" id="6443373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443378">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="6443402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443406">Comment</span><span class="op" id="6443413">:</span>&nbsp;<span class="string" id="6443415">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="6443443">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443447">File</span><span class="op" id="6443451">:</span>&nbsp;<span class="op" id="6443453">[</span><span class="op" id="6443454">]</span><span class="ident" id="6443455">ZipTestFile</span><span class="op" id="6443466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443477">Name</span><span class="op" id="6443481">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443486">&#34;test.txt&#34;</span><span class="op" id="6443496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443502">Content</span><span class="op" id="6443509">:</span>&nbsp;<span class="op" id="6443511">[</span><span class="op" id="6443512">]</span><span class="builtintype" id="6443513">byte</span><span class="op" id="6443517">(</span><span class="string" id="6443518">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="6443547">)</span><span class="op" id="6443548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443554">Mtime</span><span class="op" id="6443559">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6443563">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="6443582">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443588">Mode</span><span class="op" id="6443592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6443597">0644</span><span class="op" id="6443601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443606">}</span><span class="op" id="6443607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443618">Name</span><span class="op" id="6443622">:</span>&nbsp;&nbsp;<span class="string" id="6443625">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6443647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443653">File</span><span class="op" id="6443657">:</span>&nbsp;&nbsp;<span class="string" id="6443660">&#34;gophercolor16x16.png&#34;</span><span class="op" id="6443682">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443688">Mtime</span><span class="op" id="6443693">:</span>&nbsp;<span class="string" id="6443695">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="6443714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443720">Mode</span><span class="op" id="6443724">:</span>&nbsp;&nbsp;<span class="num" id="6443727">0644</span><span class="op" id="6443731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443736">}</span><span class="op" id="6443737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443741">}</span><span class="op" id="6443742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443745">}</span><span class="op" id="6443746">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443753">Name</span><span class="op" id="6443757">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6443761">&#34;r.zip&#34;</span><span class="op" id="6443768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443772">Source</span><span class="op" id="6443778">:</span>&nbsp;<span class="ident" id="6443780">returnRecursiveZip</span><span class="op" id="6443798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443802">File</span><span class="op" id="6443806">:</span>&nbsp;<span class="op" id="6443808">[</span><span class="op" id="6443809">]</span><span class="ident" id="6443810">ZipTestFile</span><span class="op" id="6443821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443826">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443832">Name</span><span class="op" id="6443836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443841">&#34;r/r.zip&#34;</span><span class="op" id="6443850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443856">Content</span><span class="op" id="6443863">:</span>&nbsp;<span class="ident" id="6443865">rZipBytes</span><span class="op" id="6443874">(</span><span class="op" id="6443875">)</span><span class="op" id="6443876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443882">Mtime</span><span class="op" id="6443887">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6443891">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="6443910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443916">Mode</span><span class="op" id="6443920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6443925">0666</span><span class="op" id="6443929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443934">}</span><span class="op" id="6443935">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443939">}</span><span class="op" id="6443940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443943">}</span><span class="op" id="6443944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443951">Name</span><span class="op" id="6443955">:</span>&nbsp;<span class="string" id="6443957">&#34;symlink.zip&#34;</span><span class="op" id="6443970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443974">File</span><span class="op" id="6443978">:</span>&nbsp;<span class="op" id="6443980">[</span><span class="op" id="6443981">]</span><span class="ident" id="6443982">ZipTestFile</span><span class="op" id="6443993">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444004">Name</span><span class="op" id="6444008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6444013">&#34;symlink&#34;</span><span class="op" id="6444022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444028">Content</span><span class="op" id="6444035">:</span>&nbsp;<span class="op" id="6444037">[</span><span class="op" id="6444038">]</span><span class="builtintype" id="6444039">byte</span><span class="op" id="6444043">(</span><span class="string" id="6444044">&#34;../target&#34;</span><span class="op" id="6444055">)</span><span class="op" id="6444056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444062">Mode</span><span class="op" id="6444066">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6444071">0777</span>&nbsp;<span class="op" id="6444076">|</span>&nbsp;<span class="ident" id="6444078">os</span><span class="op" id="6444080">.</span><span class="ident" id="6444081">ModeSymlink</span><span class="op" id="6444092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444097">}</span><span class="op" id="6444098">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444102">}</span><span class="op" id="6444103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444106">}</span><span class="op" id="6444107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444114">Name</span><span class="op" id="6444118">:</span>&nbsp;<span class="string" id="6444120">&#34;readme.zip&#34;</span><span class="op" id="6444132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444135">}</span><span class="op" id="6444136">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444143">Name</span><span class="op" id="6444147">:</span>&nbsp;&nbsp;<span class="string" id="6444150">&#34;readme.notzip&#34;</span><span class="op" id="6444165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444169">Error</span><span class="op" id="6444174">:</span>&nbsp;<span class="ident" id="6444176">ErrFormat</span><span class="op" id="6444185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444188">}</span><span class="op" id="6444189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444192">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444196">Name</span><span class="op" id="6444200">:</span>&nbsp;<span class="string" id="6444202">&#34;dd.zip&#34;</span><span class="op" id="6444210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444214">File</span><span class="op" id="6444218">:</span>&nbsp;<span class="op" id="6444220">[</span><span class="op" id="6444221">]</span><span class="ident" id="6444222">ZipTestFile</span><span class="op" id="6444233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444244">Name</span><span class="op" id="6444248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6444253">&#34;filename&#34;</span><span class="op" id="6444263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444269">Content</span><span class="op" id="6444276">:</span>&nbsp;<span class="op" id="6444278">[</span><span class="op" id="6444279">]</span><span class="builtintype" id="6444280">byte</span><span class="op" id="6444284">(</span><span class="string" id="6444285">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="6444313">)</span><span class="op" id="6444314">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444320">Mtime</span><span class="op" id="6444325">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6444329">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="6444348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444354">Mode</span><span class="op" id="6444358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6444363">0666</span><span class="op" id="6444367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444372">}</span><span class="op" id="6444373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444377">}</span><span class="op" id="6444378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444381">}</span><span class="op" id="6444382">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444389">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444430">Name</span><span class="op" id="6444434">:</span>&nbsp;<span class="string" id="6444436">&#34;winxp.zip&#34;</span><span class="op" id="6444447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444451">File</span><span class="op" id="6444455">:</span>&nbsp;<span class="ident" id="6444457">crossPlatform</span><span class="op" id="6444470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444473">}</span><span class="op" id="6444474">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444481">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444517">Name</span><span class="op" id="6444521">:</span>&nbsp;<span class="string" id="6444523">&#34;unix.zip&#34;</span><span class="op" id="6444533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444537">File</span><span class="op" id="6444541">:</span>&nbsp;<span class="ident" id="6444543">crossPlatform</span><span class="op" id="6444556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444559">}</span><span class="op" id="6444560">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444567">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444623">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444679">Name</span><span class="op" id="6444683">:</span>&nbsp;<span class="string" id="6444685">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="6444709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444713">File</span><span class="op" id="6444717">:</span>&nbsp;<span class="op" id="6444719">[</span><span class="op" id="6444720">]</span><span class="ident" id="6444721">ZipTestFile</span><span class="op" id="6444732">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444743">Name</span><span class="op" id="6444747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6444752">&#34;foo.txt&#34;</span><span class="op" id="6444761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444767">Content</span><span class="op" id="6444774">:</span>&nbsp;<span class="op" id="6444776">[</span><span class="op" id="6444777">]</span><span class="builtintype" id="6444778">byte</span><span class="op" id="6444782">(</span><span class="string" id="6444783">&#34;foo\n&#34;</span><span class="op" id="6444790">)</span><span class="op" id="6444791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444797">Mtime</span><span class="op" id="6444802">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6444806">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6444825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444831">Mode</span><span class="op" id="6444835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6444840">0644</span><span class="op" id="6444844">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444849">}</span><span class="op" id="6444850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444861">Name</span><span class="op" id="6444865">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6444870">&#34;bar.txt&#34;</span><span class="op" id="6444879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444885">Content</span><span class="op" id="6444892">:</span>&nbsp;<span class="op" id="6444894">[</span><span class="op" id="6444895">]</span><span class="builtintype" id="6444896">byte</span><span class="op" id="6444900">(</span><span class="string" id="6444901">&#34;bar\n&#34;</span><span class="op" id="6444908">)</span><span class="op" id="6444909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444915">Mtime</span><span class="op" id="6444920">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6444924">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6444943">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444949">Mode</span><span class="op" id="6444953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6444958">0644</span><span class="op" id="6444962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444967">}</span><span class="op" id="6444968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444972">}</span><span class="op" id="6444973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444976">}</span><span class="op" id="6444977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444980">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444984">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445039">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445095">Name</span><span class="op" id="6445099">:</span>&nbsp;<span class="string" id="6445101">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6445127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445131">File</span><span class="op" id="6445135">:</span>&nbsp;<span class="op" id="6445137">[</span><span class="op" id="6445138">]</span><span class="ident" id="6445139">ZipTestFile</span><span class="op" id="6445150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445155">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445161">Name</span><span class="op" id="6445165">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445170">&#34;foo.txt&#34;</span><span class="op" id="6445179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445185">Content</span><span class="op" id="6445192">:</span>&nbsp;<span class="op" id="6445194">[</span><span class="op" id="6445195">]</span><span class="builtintype" id="6445196">byte</span><span class="op" id="6445200">(</span><span class="string" id="6445201">&#34;foo\n&#34;</span><span class="op" id="6445208">)</span><span class="op" id="6445209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445215">Mode</span><span class="op" id="6445219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6445224">0666</span><span class="op" id="6445228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445233">}</span><span class="op" id="6445234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445239">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445245">Name</span><span class="op" id="6445249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445254">&#34;bar.txt&#34;</span><span class="op" id="6445263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445269">Content</span><span class="op" id="6445276">:</span>&nbsp;<span class="op" id="6445278">[</span><span class="op" id="6445279">]</span><span class="builtintype" id="6445280">byte</span><span class="op" id="6445284">(</span><span class="string" id="6445285">&#34;bar\n&#34;</span><span class="op" id="6445292">)</span><span class="op" id="6445293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445299">Mode</span><span class="op" id="6445303">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6445308">0666</span><span class="op" id="6445312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445317">}</span><span class="op" id="6445318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445322">}</span><span class="op" id="6445323">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445326">}</span><span class="op" id="6445327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445334">Name</span><span class="op" id="6445338">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6445342">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="6445372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445376">Source</span><span class="op" id="6445382">:</span>&nbsp;<span class="ident" id="6445384">returnCorruptCRC32Zip</span><span class="op" id="6445405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445409">File</span><span class="op" id="6445413">:</span>&nbsp;<span class="op" id="6445415">[</span><span class="op" id="6445416">]</span><span class="ident" id="6445417">ZipTestFile</span><span class="op" id="6445428">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445439">Name</span><span class="op" id="6445443">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445451">&#34;foo.txt&#34;</span><span class="op" id="6445460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445466">Content</span><span class="op" id="6445473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445478">[</span><span class="op" id="6445479">]</span><span class="builtintype" id="6445480">byte</span><span class="op" id="6445484">(</span><span class="string" id="6445485">&#34;foo\n&#34;</span><span class="op" id="6445492">)</span><span class="op" id="6445493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445499">Mode</span><span class="op" id="6445503">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6445511">0666</span><span class="op" id="6445515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445521">ContentErr</span><span class="op" id="6445531">:</span>&nbsp;<span class="ident" id="6445533">ErrChecksum</span><span class="op" id="6445544">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445549">}</span><span class="op" id="6445550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445561">Name</span><span class="op" id="6445565">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445570">&#34;bar.txt&#34;</span><span class="op" id="6445579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445585">Content</span><span class="op" id="6445592">:</span>&nbsp;<span class="op" id="6445594">[</span><span class="op" id="6445595">]</span><span class="builtintype" id="6445596">byte</span><span class="op" id="6445600">(</span><span class="string" id="6445601">&#34;bar\n&#34;</span><span class="op" id="6445608">)</span><span class="op" id="6445609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445615">Mode</span><span class="op" id="6445619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6445624">0666</span><span class="op" id="6445628">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445633">}</span><span class="op" id="6445634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445638">}</span><span class="op" id="6445639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445642">}</span><span class="op" id="6445643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445646">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445706">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445773">Name</span><span class="op" id="6445777">:</span>&nbsp;<span class="string" id="6445779">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6445803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445807">File</span><span class="op" id="6445811">:</span>&nbsp;<span class="op" id="6445813">[</span><span class="op" id="6445814">]</span><span class="ident" id="6445815">ZipTestFile</span><span class="op" id="6445826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445837">Name</span><span class="op" id="6445841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445846">&#34;foo.txt&#34;</span><span class="op" id="6445855">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445861">Content</span><span class="op" id="6445868">:</span>&nbsp;<span class="op" id="6445870">[</span><span class="op" id="6445871">]</span><span class="builtintype" id="6445872">byte</span><span class="op" id="6445876">(</span><span class="string" id="6445877">&#34;foo\n&#34;</span><span class="op" id="6445884">)</span><span class="op" id="6445885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445891">Mtime</span><span class="op" id="6445896">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6445900">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6445919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445925">Mode</span><span class="op" id="6445929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6445934">0644</span><span class="op" id="6445938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445943">}</span><span class="op" id="6445944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445949">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445955">Name</span><span class="op" id="6445959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6445964">&#34;bar.txt&#34;</span><span class="op" id="6445973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445979">Content</span><span class="op" id="6445986">:</span>&nbsp;<span class="op" id="6445988">[</span><span class="op" id="6445989">]</span><span class="builtintype" id="6445990">byte</span><span class="op" id="6445994">(</span><span class="string" id="6445995">&#34;bar\n&#34;</span><span class="op" id="6446002">)</span><span class="op" id="6446003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446009">Mtime</span><span class="op" id="6446014">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6446018">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6446037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446043">Mode</span><span class="op" id="6446047">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6446052">0644</span><span class="op" id="6446056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446061">}</span><span class="op" id="6446062">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446066">}</span><span class="op" id="6446067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446070">}</span><span class="op" id="6446071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6446074">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6446136">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446199">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446203">Name</span><span class="op" id="6446207">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6446211">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6446235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446239">Source</span><span class="op" id="6446245">:</span>&nbsp;<span class="ident" id="6446247">returnCorruptNotStreamedZip</span><span class="op" id="6446274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446278">File</span><span class="op" id="6446282">:</span>&nbsp;<span class="op" id="6446284">[</span><span class="op" id="6446285">]</span><span class="ident" id="6446286">ZipTestFile</span><span class="op" id="6446297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446308">Name</span><span class="op" id="6446312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6446320">&#34;foo.txt&#34;</span><span class="op" id="6446329">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446335">Content</span><span class="op" id="6446342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446347">[</span><span class="op" id="6446348">]</span><span class="builtintype" id="6446349">byte</span><span class="op" id="6446353">(</span><span class="string" id="6446354">&#34;foo\n&#34;</span><span class="op" id="6446361">)</span><span class="op" id="6446362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446368">Mtime</span><span class="op" id="6446373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6446380">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="6446399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446405">Mode</span><span class="op" id="6446409">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6446417">0644</span><span class="op" id="6446421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446427">ContentErr</span><span class="op" id="6446437">:</span>&nbsp;<span class="ident" id="6446439">ErrChecksum</span><span class="op" id="6446450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446455">}</span><span class="op" id="6446456">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446467">Name</span><span class="op" id="6446471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6446476">&#34;bar.txt&#34;</span><span class="op" id="6446485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446491">Content</span><span class="op" id="6446498">:</span>&nbsp;<span class="op" id="6446500">[</span><span class="op" id="6446501">]</span><span class="builtintype" id="6446502">byte</span><span class="op" id="6446506">(</span><span class="string" id="6446507">&#34;bar\n&#34;</span><span class="op" id="6446514">)</span><span class="op" id="6446515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446521">Mtime</span><span class="op" id="6446526">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6446530">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="6446549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446555">Mode</span><span class="op" id="6446559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6446564">0644</span><span class="op" id="6446568">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446573">}</span><span class="op" id="6446574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446578">}</span><span class="op" id="6446579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446582">}</span><span class="op" id="6446583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446590">Name</span><span class="op" id="6446594">:</span>&nbsp;<span class="string" id="6446596">&#34;zip64.zip&#34;</span><span class="op" id="6446607">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446611">File</span><span class="op" id="6446615">:</span>&nbsp;<span class="op" id="6446617">[</span><span class="op" id="6446618">]</span><span class="ident" id="6446619">ZipTestFile</span><span class="op" id="6446630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446641">Name</span><span class="op" id="6446645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6446650">&#34;README&#34;</span><span class="op" id="6446658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446664">Content</span><span class="op" id="6446671">:</span>&nbsp;<span class="op" id="6446673">[</span><span class="op" id="6446674">]</span><span class="builtintype" id="6446675">byte</span><span class="op" id="6446679">(</span><span class="string" id="6446680">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6446719">)</span><span class="op" id="6446720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446726">Mtime</span><span class="op" id="6446731">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6446735">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6446754">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446760">Mode</span><span class="op" id="6446764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6446769">0644</span><span class="op" id="6446773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446778">}</span><span class="op" id="6446779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446783">}</span><span class="op" id="6446784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446787">}</span><span class="op" id="6446788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6446791">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446872">Name</span><span class="op" id="6446876">:</span>&nbsp;<span class="string" id="6446878">&#34;zip64-2.zip&#34;</span><span class="op" id="6446891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446895">File</span><span class="op" id="6446899">:</span>&nbsp;<span class="op" id="6446901">[</span><span class="op" id="6446902">]</span><span class="ident" id="6446903">ZipTestFile</span><span class="op" id="6446914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446925">Name</span><span class="op" id="6446929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6446934">&#34;README&#34;</span><span class="op" id="6446942">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446948">Content</span><span class="op" id="6446955">:</span>&nbsp;<span class="op" id="6446957">[</span><span class="op" id="6446958">]</span><span class="builtintype" id="6446959">byte</span><span class="op" id="6446963">(</span><span class="string" id="6446964">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="6447003">)</span><span class="op" id="6447004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447010">Mtime</span><span class="op" id="6447015">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6447019">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="6447038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447044">Mode</span><span class="op" id="6447048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6447053">0644</span><span class="op" id="6447057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447062">}</span><span class="op" id="6447063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447067">}</span><span class="op" id="6447068">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447071">}</span><span class="op" id="6447072">,</span><br>
<span class="lineno"></span><span class="op" id="6447074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6447077">var</span>&nbsp;<span class="ident" id="6447081">crossPlatform</span>&nbsp;<span class="op" id="6447095">=</span>&nbsp;<span class="op" id="6447097">[</span><span class="op" id="6447098">]</span><span class="ident" id="6447099">ZipTestFile</span><span class="op" id="6447110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447113">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447117">Name</span><span class="op" id="6447121">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447126">&#34;hello&#34;</span><span class="op" id="6447133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447137">Content</span><span class="op" id="6447144">:</span>&nbsp;<span class="op" id="6447146">[</span><span class="op" id="6447147">]</span><span class="builtintype" id="6447148">byte</span><span class="op" id="6447152">(</span><span class="string" id="6447153">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="6447165">)</span><span class="op" id="6447166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447170">Mode</span><span class="op" id="6447174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6447179">0666</span><span class="op" id="6447183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447186">}</span><span class="op" id="6447187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447190">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447194">Name</span><span class="op" id="6447198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447203">&#34;dir/bar&#34;</span><span class="op" id="6447212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447216">Content</span><span class="op" id="6447223">:</span>&nbsp;<span class="op" id="6447225">[</span><span class="op" id="6447226">]</span><span class="builtintype" id="6447227">byte</span><span class="op" id="6447231">(</span><span class="string" id="6447232">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="6447242">)</span><span class="op" id="6447243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447247">Mode</span><span class="op" id="6447251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6447256">0666</span><span class="op" id="6447260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447263">}</span><span class="op" id="6447264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447267">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447271">Name</span><span class="op" id="6447275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447280">&#34;dir/empty/&#34;</span><span class="op" id="6447292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447296">Content</span><span class="op" id="6447303">:</span>&nbsp;<span class="op" id="6447305">[</span><span class="op" id="6447306">]</span><span class="builtintype" id="6447307">byte</span><span class="op" id="6447311">{</span><span class="op" id="6447312">}</span><span class="op" id="6447313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447317">Mode</span><span class="op" id="6447321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447326">os</span><span class="op" id="6447328">.</span><span class="ident" id="6447329">ModeDir</span>&nbsp;<span class="op" id="6447337">|</span>&nbsp;<span class="num" id="6447339">0777</span><span class="op" id="6447343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447346">}</span><span class="op" id="6447347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447350">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447354">Name</span><span class="op" id="6447358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447363">&#34;readonly&#34;</span><span class="op" id="6447373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447377">Content</span><span class="op" id="6447384">:</span>&nbsp;<span class="op" id="6447386">[</span><span class="op" id="6447387">]</span><span class="builtintype" id="6447388">byte</span><span class="op" id="6447392">(</span><span class="string" id="6447393">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="6447409">)</span><span class="op" id="6447410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447414">Mode</span><span class="op" id="6447418">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6447423">0444</span><span class="op" id="6447427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447430">}</span><span class="op" id="6447431">,</span><br>
<span class="lineno"></span><span class="op" id="6447433">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="6447436">func</span>&nbsp;<span class="ident" id="6447441">TestReader</span><span class="op" id="6447451">(</span><span class="ident" id="6447452">t</span>&nbsp;<span class="op" id="6447454">*</span><span class="ident" id="6447455">testing</span><span class="op" id="6447462">.</span><span class="ident" id="6447463">T</span><span class="op" id="6447464">)</span>&nbsp;<span class="op" id="6447466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447469">for</span>&nbsp;<span class="ident" id="6447473">_</span><span class="op" id="6447474">,</span>&nbsp;<span class="ident" id="6447476">zt</span>&nbsp;<span class="op" id="6447479">:=</span>&nbsp;<span class="keyword" id="6447482">range</span>&nbsp;<span class="ident" id="6447488">tests</span>&nbsp;<span class="op" id="6447494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447498">readTestZip</span><span class="op" id="6447509">(</span><span class="ident" id="6447510">t</span><span class="op" id="6447511">,</span>&nbsp;<span class="ident" id="6447513">zt</span><span class="op" id="6447515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447518">}</span><br>
<span class="lineno">280</span><span class="op" id="6447520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6447523">func</span>&nbsp;<span class="ident" id="6447528">readTestZip</span><span class="op" id="6447539">(</span><span class="ident" id="6447540">t</span>&nbsp;<span class="op" id="6447542">*</span><span class="ident" id="6447543">testing</span><span class="op" id="6447550">.</span><span class="ident" id="6447551">T</span><span class="op" id="6447552">,</span>&nbsp;<span class="ident" id="6447554">zt</span>&nbsp;<span class="ident" id="6447557">ZipTest</span><span class="op" id="6447564">)</span>&nbsp;<span class="op" id="6447566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447569">var</span>&nbsp;<span class="ident" id="6447573">z</span>&nbsp;<span class="op" id="6447575">*</span><span class="ident" id="6447576">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447584">var</span>&nbsp;<span class="ident" id="6447588">err</span>&nbsp;<span class="builtintype" id="6447592">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447599">if</span>&nbsp;<span class="ident" id="6447602">zt</span><span class="op" id="6447604">.</span><span class="ident" id="6447605">Source</span>&nbsp;<span class="op" id="6447612">!=</span>&nbsp;<span class="builtintype" id="6447615">nil</span>&nbsp;<span class="op" id="6447619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447623">rat</span><span class="op" id="6447626">,</span>&nbsp;<span class="ident" id="6447628">size</span>&nbsp;<span class="op" id="6447633">:=</span>&nbsp;<span class="ident" id="6447636">zt</span><span class="op" id="6447638">.</span><span class="ident" id="6447639">Source</span><span class="op" id="6447645">(</span><span class="op" id="6447646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447650">z</span><span class="op" id="6447651">,</span>&nbsp;<span class="ident" id="6447653">err</span>&nbsp;<span class="op" id="6447657">=</span>&nbsp;<span class="ident" id="6447659">NewReader</span><span class="op" id="6447668">(</span><span class="ident" id="6447669">rat</span><span class="op" id="6447672">,</span>&nbsp;<span class="ident" id="6447674">size</span><span class="op" id="6447678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447681">}</span>&nbsp;<span class="keyword" id="6447683">else</span>&nbsp;<span class="op" id="6447688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447692">var</span>&nbsp;<span class="ident" id="6447696">rc</span>&nbsp;<span class="op" id="6447699">*</span><span class="ident" id="6447700">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447713">rc</span><span class="op" id="6447715">,</span>&nbsp;<span class="ident" id="6447717">err</span>&nbsp;<span class="op" id="6447721">=</span>&nbsp;<span class="ident" id="6447723">OpenReader</span><span class="op" id="6447733">(</span><span class="ident" id="6447734">filepath</span><span class="op" id="6447742">.</span><span class="ident" id="6447743">Join</span><span class="op" id="6447747">(</span><span class="string" id="6447748">&#34;testdata&#34;</span><span class="op" id="6447758">,</span>&nbsp;<span class="ident" id="6447760">zt</span><span class="op" id="6447762">.</span><span class="ident" id="6447763">Name</span><span class="op" id="6447767">)</span><span class="op" id="6447768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447772">if</span>&nbsp;<span class="ident" id="6447775">err</span>&nbsp;<span class="op" id="6447779">==</span>&nbsp;<span class="builtintype" id="6447782">nil</span>&nbsp;<span class="op" id="6447786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447791">defer</span>&nbsp;<span class="ident" id="6447797">rc</span><span class="op" id="6447799">.</span><span class="ident" id="6447800">Close</span><span class="op" id="6447805">(</span><span class="op" id="6447806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447811">z</span>&nbsp;<span class="op" id="6447813">=</span>&nbsp;<span class="op" id="6447815">&amp;</span><span class="ident" id="6447816">rc</span><span class="op" id="6447818">.</span><span class="ident" id="6447819">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447828">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447834">if</span>&nbsp;<span class="ident" id="6447837">err</span>&nbsp;<span class="op" id="6447841">!=</span>&nbsp;<span class="ident" id="6447844">zt</span><span class="op" id="6447846">.</span><span class="ident" id="6447847">Error</span>&nbsp;<span class="op" id="6447853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447857">t</span><span class="op" id="6447858">.</span><span class="ident" id="6447859">Errorf</span><span class="op" id="6447865">(</span><span class="string" id="6447866">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6447889">,</span>&nbsp;<span class="ident" id="6447891">zt</span><span class="op" id="6447893">.</span><span class="ident" id="6447894">Name</span><span class="op" id="6447898">,</span>&nbsp;<span class="ident" id="6447900">err</span><span class="op" id="6447903">,</span>&nbsp;<span class="ident" id="6447905">zt</span><span class="op" id="6447907">.</span><span class="ident" id="6447908">Error</span><span class="op" id="6447913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447917">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447925">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6447929">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447957">if</span>&nbsp;<span class="ident" id="6447960">err</span>&nbsp;<span class="op" id="6447964">==</span>&nbsp;<span class="ident" id="6447967">ErrFormat</span>&nbsp;<span class="op" id="6447977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447981">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447989">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6447993">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6448041">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448105">if</span>&nbsp;<span class="ident" id="6448108">zt</span><span class="op" id="6448110">.</span><span class="ident" id="6448111">File</span>&nbsp;<span class="op" id="6448116">==</span>&nbsp;<span class="builtintype" id="6448119">nil</span>&nbsp;<span class="op" id="6448123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448127">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448139">if</span>&nbsp;<span class="ident" id="6448142">z</span><span class="op" id="6448143">.</span><span class="ident" id="6448144">Comment</span>&nbsp;<span class="op" id="6448152">!=</span>&nbsp;<span class="ident" id="6448155">zt</span><span class="op" id="6448157">.</span><span class="ident" id="6448158">Comment</span>&nbsp;<span class="op" id="6448166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448170">t</span><span class="op" id="6448171">.</span><span class="ident" id="6448172">Errorf</span><span class="op" id="6448178">(</span><span class="string" id="6448179">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6448204">,</span>&nbsp;<span class="ident" id="6448206">zt</span><span class="op" id="6448208">.</span><span class="ident" id="6448209">Name</span><span class="op" id="6448213">,</span>&nbsp;<span class="ident" id="6448215">z</span><span class="op" id="6448216">.</span><span class="ident" id="6448217">Comment</span><span class="op" id="6448224">,</span>&nbsp;<span class="ident" id="6448226">zt</span><span class="op" id="6448228">.</span><span class="ident" id="6448229">Comment</span><span class="op" id="6448236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448239">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448242">if</span>&nbsp;<span class="builtinfunc" id="6448245">len</span><span class="op" id="6448248">(</span><span class="ident" id="6448249">z</span><span class="op" id="6448250">.</span><span class="ident" id="6448251">File</span><span class="op" id="6448255">)</span>&nbsp;<span class="op" id="6448257">!=</span>&nbsp;<span class="builtinfunc" id="6448260">len</span><span class="op" id="6448263">(</span><span class="ident" id="6448264">zt</span><span class="op" id="6448266">.</span><span class="ident" id="6448267">File</span><span class="op" id="6448271">)</span>&nbsp;<span class="op" id="6448273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448277">t</span><span class="op" id="6448278">.</span><span class="ident" id="6448279">Fatalf</span><span class="op" id="6448285">(</span><span class="string" id="6448286">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6448314">,</span>&nbsp;<span class="ident" id="6448316">zt</span><span class="op" id="6448318">.</span><span class="ident" id="6448319">Name</span><span class="op" id="6448323">,</span>&nbsp;<span class="builtinfunc" id="6448325">len</span><span class="op" id="6448328">(</span><span class="ident" id="6448329">z</span><span class="op" id="6448330">.</span><span class="ident" id="6448331">File</span><span class="op" id="6448335">)</span><span class="op" id="6448336">,</span>&nbsp;<span class="builtinfunc" id="6448338">len</span><span class="op" id="6448341">(</span><span class="ident" id="6448342">zt</span><span class="op" id="6448344">.</span><span class="ident" id="6448345">File</span><span class="op" id="6448349">)</span><span class="op" id="6448350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6448357">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448384">for</span>&nbsp;<span class="ident" id="6448388">i</span><span class="op" id="6448389">,</span>&nbsp;<span class="ident" id="6448391">ft</span>&nbsp;<span class="op" id="6448394">:=</span>&nbsp;<span class="keyword" id="6448397">range</span>&nbsp;<span class="ident" id="6448403">zt</span><span class="op" id="6448405">.</span><span class="ident" id="6448406">File</span>&nbsp;<span class="op" id="6448411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448415">readTestFile</span><span class="op" id="6448427">(</span><span class="ident" id="6448428">t</span><span class="op" id="6448429">,</span>&nbsp;<span class="ident" id="6448431">zt</span><span class="op" id="6448433">,</span>&nbsp;<span class="ident" id="6448435">ft</span><span class="op" id="6448437">,</span>&nbsp;<span class="ident" id="6448439">z</span><span class="op" id="6448440">.</span><span class="ident" id="6448441">File</span><span class="op" id="6448445">[</span><span class="ident" id="6448446">i</span><span class="op" id="6448447">]</span><span class="op" id="6448448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6448455">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448483">n</span>&nbsp;<span class="op" id="6448485">:=</span>&nbsp;<span class="num" id="6448488">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448491">done</span>&nbsp;<span class="op" id="6448496">:=</span>&nbsp;<span class="builtinfunc" id="6448499">make</span><span class="op" id="6448503">(</span><span class="keyword" id="6448504">chan</span>&nbsp;<span class="builtintype" id="6448509">bool</span><span class="op" id="6448513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448516">for</span>&nbsp;<span class="ident" id="6448520">i</span>&nbsp;<span class="op" id="6448522">:=</span>&nbsp;<span class="num" id="6448525">0</span><span class="op" id="6448526">;</span>&nbsp;<span class="ident" id="6448528">i</span>&nbsp;<span class="op" id="6448530">&lt;</span>&nbsp;<span class="num" id="6448532">5</span><span class="op" id="6448533">;</span>&nbsp;<span class="ident" id="6448535">i</span><span class="op" id="6448536">++</span>&nbsp;<span class="op" id="6448539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448543">for</span>&nbsp;<span class="ident" id="6448547">j</span><span class="op" id="6448548">,</span>&nbsp;<span class="ident" id="6448550">ft</span>&nbsp;<span class="op" id="6448553">:=</span>&nbsp;<span class="keyword" id="6448556">range</span>&nbsp;<span class="ident" id="6448562">zt</span><span class="op" id="6448564">.</span><span class="ident" id="6448565">File</span>&nbsp;<span class="op" id="6448570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448575">go</span>&nbsp;<span class="keyword" id="6448578">func</span><span class="op" id="6448582">(</span><span class="ident" id="6448583">j</span>&nbsp;<span class="builtintype" id="6448585">int</span><span class="op" id="6448588">,</span>&nbsp;<span class="ident" id="6448590">ft</span>&nbsp;<span class="ident" id="6448593">ZipTestFile</span><span class="op" id="6448604">)</span>&nbsp;<span class="op" id="6448606">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448612">readTestFile</span><span class="op" id="6448624">(</span><span class="ident" id="6448625">t</span><span class="op" id="6448626">,</span>&nbsp;<span class="ident" id="6448628">zt</span><span class="op" id="6448630">,</span>&nbsp;<span class="ident" id="6448632">ft</span><span class="op" id="6448634">,</span>&nbsp;<span class="ident" id="6448636">z</span><span class="op" id="6448637">.</span><span class="ident" id="6448638">File</span><span class="op" id="6448642">[</span><span class="ident" id="6448643">j</span><span class="op" id="6448644">]</span><span class="op" id="6448645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448651">done</span>&nbsp;<span class="op" id="6448656">&lt;-</span>&nbsp;<span class="builtintype" id="6448659">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448667">}</span><span class="op" id="6448668">(</span><span class="ident" id="6448669">j</span><span class="op" id="6448670">,</span>&nbsp;<span class="ident" id="6448672">ft</span><span class="op" id="6448674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448679">n</span><span class="op" id="6448680">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448685">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448691">for</span>&nbsp;<span class="op" id="6448695">;</span>&nbsp;<span class="ident" id="6448697">n</span>&nbsp;<span class="op" id="6448699">&gt;</span>&nbsp;<span class="num" id="6448701">0</span><span class="op" id="6448702">;</span>&nbsp;<span class="ident" id="6448704">n</span><span class="op" id="6448705">--</span>&nbsp;<span class="op" id="6448708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448712">&lt;-</span><span class="ident" id="6448714">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448720">}</span><br>
<span class="lineno"></span><span class="op" id="6448722">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6448725">func</span>&nbsp;<span class="ident" id="6448730">readTestFile</span><span class="op" id="6448742">(</span><span class="ident" id="6448743">t</span>&nbsp;<span class="op" id="6448745">*</span><span class="ident" id="6448746">testing</span><span class="op" id="6448753">.</span><span class="ident" id="6448754">T</span><span class="op" id="6448755">,</span>&nbsp;<span class="ident" id="6448757">zt</span>&nbsp;<span class="ident" id="6448760">ZipTest</span><span class="op" id="6448767">,</span>&nbsp;<span class="ident" id="6448769">ft</span>&nbsp;<span class="ident" id="6448772">ZipTestFile</span><span class="op" id="6448783">,</span>&nbsp;<span class="ident" id="6448785">f</span>&nbsp;<span class="op" id="6448787">*</span><span class="ident" id="6448788">File</span><span class="op" id="6448792">)</span>&nbsp;<span class="op" id="6448794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448797">if</span>&nbsp;<span class="ident" id="6448800">f</span><span class="op" id="6448801">.</span><span class="ident" id="6448802">Name</span>&nbsp;<span class="op" id="6448807">!=</span>&nbsp;<span class="ident" id="6448810">ft</span><span class="op" id="6448812">.</span><span class="ident" id="6448813">Name</span>&nbsp;<span class="op" id="6448818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448822">t</span><span class="op" id="6448823">.</span><span class="ident" id="6448824">Errorf</span><span class="op" id="6448830">(</span><span class="string" id="6448831">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6448853">,</span>&nbsp;<span class="ident" id="6448855">zt</span><span class="op" id="6448857">.</span><span class="ident" id="6448858">Name</span><span class="op" id="6448862">,</span>&nbsp;<span class="ident" id="6448864">f</span><span class="op" id="6448865">.</span><span class="ident" id="6448866">Name</span><span class="op" id="6448870">,</span>&nbsp;<span class="ident" id="6448872">ft</span><span class="op" id="6448874">.</span><span class="ident" id="6448875">Name</span><span class="op" id="6448879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448882">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448886">if</span>&nbsp;<span class="ident" id="6448889">ft</span><span class="op" id="6448891">.</span><span class="ident" id="6448892">Mtime</span>&nbsp;<span class="op" id="6448898">!=</span>&nbsp;<span class="string" id="6448901">&#34;&#34;</span>&nbsp;<span class="op" id="6448904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448908">mtime</span><span class="op" id="6448913">,</span>&nbsp;<span class="ident" id="6448915">err</span>&nbsp;<span class="op" id="6448919">:=</span>&nbsp;<span class="ident" id="6448922">time</span><span class="op" id="6448926">.</span><span class="ident" id="6448927">Parse</span><span class="op" id="6448932">(</span><span class="string" id="6448933">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="6448952">,</span>&nbsp;<span class="ident" id="6448954">ft</span><span class="op" id="6448956">.</span><span class="ident" id="6448957">Mtime</span><span class="op" id="6448962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448966">if</span>&nbsp;<span class="ident" id="6448969">err</span>&nbsp;<span class="op" id="6448973">!=</span>&nbsp;<span class="builtintype" id="6448976">nil</span>&nbsp;<span class="op" id="6448980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448985">t</span><span class="op" id="6448986">.</span><span class="ident" id="6448987">Error</span><span class="op" id="6448992">(</span><span class="ident" id="6448993">err</span><span class="op" id="6448996">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449001">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449014">if</span>&nbsp;<span class="ident" id="6449017">ft</span>&nbsp;<span class="op" id="6449020">:=</span>&nbsp;<span class="ident" id="6449023">f</span><span class="op" id="6449024">.</span><span class="ident" id="6449025">ModTime</span><span class="op" id="6449032">(</span><span class="op" id="6449033">)</span><span class="op" id="6449034">;</span>&nbsp;<span class="op" id="6449036">!</span><span class="ident" id="6449037">ft</span><span class="op" id="6449039">.</span><span class="ident" id="6449040">Equal</span><span class="op" id="6449045">(</span><span class="ident" id="6449046">mtime</span><span class="op" id="6449051">)</span>&nbsp;<span class="op" id="6449053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449058">t</span><span class="op" id="6449059">.</span><span class="ident" id="6449060">Errorf</span><span class="op" id="6449066">(</span><span class="string" id="6449067">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6449094">,</span>&nbsp;<span class="ident" id="6449096">zt</span><span class="op" id="6449098">.</span><span class="ident" id="6449099">Name</span><span class="op" id="6449103">,</span>&nbsp;<span class="ident" id="6449105">f</span><span class="op" id="6449106">.</span><span class="ident" id="6449107">Name</span><span class="op" id="6449111">,</span>&nbsp;<span class="ident" id="6449113">ft</span><span class="op" id="6449115">,</span>&nbsp;<span class="ident" id="6449117">mtime</span><span class="op" id="6449122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449126">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449133">testFileMode</span><span class="op" id="6449145">(</span><span class="ident" id="6449146">t</span><span class="op" id="6449147">,</span>&nbsp;<span class="ident" id="6449149">zt</span><span class="op" id="6449151">.</span><span class="ident" id="6449152">Name</span><span class="op" id="6449156">,</span>&nbsp;<span class="ident" id="6449158">f</span><span class="op" id="6449159">,</span>&nbsp;<span class="ident" id="6449161">ft</span><span class="op" id="6449163">.</span><span class="ident" id="6449164">Mode</span><span class="op" id="6449168">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449172">var</span>&nbsp;<span class="ident" id="6449176">b</span>&nbsp;<span class="ident" id="6449178">bytes</span><span class="op" id="6449183">.</span><span class="ident" id="6449184">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449192">r</span><span class="op" id="6449193">,</span>&nbsp;<span class="ident" id="6449195">err</span>&nbsp;<span class="op" id="6449199">:=</span>&nbsp;<span class="ident" id="6449202">f</span><span class="op" id="6449203">.</span><span class="ident" id="6449204">Open</span><span class="op" id="6449208">(</span><span class="op" id="6449209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449212">if</span>&nbsp;<span class="ident" id="6449215">err</span>&nbsp;<span class="op" id="6449219">!=</span>&nbsp;<span class="builtintype" id="6449222">nil</span>&nbsp;<span class="op" id="6449226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449230">t</span><span class="op" id="6449231">.</span><span class="ident" id="6449232">Errorf</span><span class="op" id="6449238">(</span><span class="string" id="6449239">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="6449247">,</span>&nbsp;<span class="ident" id="6449249">zt</span><span class="op" id="6449251">.</span><span class="ident" id="6449252">Name</span><span class="op" id="6449256">,</span>&nbsp;<span class="ident" id="6449258">err</span><span class="op" id="6449261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449265">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449273">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449277">_</span><span class="op" id="6449278">,</span>&nbsp;<span class="ident" id="6449280">err</span>&nbsp;<span class="op" id="6449284">=</span>&nbsp;<span class="ident" id="6449286">io</span><span class="op" id="6449288">.</span><span class="ident" id="6449289">Copy</span><span class="op" id="6449293">(</span><span class="op" id="6449294">&amp;</span><span class="ident" id="6449295">b</span><span class="op" id="6449296">,</span>&nbsp;<span class="ident" id="6449298">r</span><span class="op" id="6449299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449302">if</span>&nbsp;<span class="ident" id="6449305">err</span>&nbsp;<span class="op" id="6449309">!=</span>&nbsp;<span class="ident" id="6449312">ft</span><span class="op" id="6449314">.</span><span class="ident" id="6449315">ContentErr</span>&nbsp;<span class="op" id="6449326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449330">t</span><span class="op" id="6449331">.</span><span class="ident" id="6449332">Errorf</span><span class="op" id="6449338">(</span><span class="string" id="6449339">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="6449375">,</span>&nbsp;<span class="ident" id="6449377">zt</span><span class="op" id="6449379">.</span><span class="ident" id="6449380">Name</span><span class="op" id="6449384">,</span>&nbsp;<span class="ident" id="6449386">err</span><span class="op" id="6449389">,</span>&nbsp;<span class="ident" id="6449391">ft</span><span class="op" id="6449393">.</span><span class="ident" id="6449394">ContentErr</span><span class="op" id="6449404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449407">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449410">if</span>&nbsp;<span class="ident" id="6449413">err</span>&nbsp;<span class="op" id="6449417">!=</span>&nbsp;<span class="builtintype" id="6449420">nil</span>&nbsp;<span class="op" id="6449424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449428">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449439">r</span><span class="op" id="6449440">.</span><span class="ident" id="6449441">Close</span><span class="op" id="6449446">(</span><span class="op" id="6449447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449451">size</span>&nbsp;<span class="op" id="6449456">:=</span>&nbsp;<span class="ident" id="6449459">uint64</span><span class="op" id="6449465">(</span><span class="ident" id="6449466">f</span><span class="op" id="6449467">.</span><span class="ident" id="6449468">UncompressedSize</span><span class="op" id="6449484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449487">if</span>&nbsp;<span class="ident" id="6449490">size</span>&nbsp;<span class="op" id="6449495">==</span>&nbsp;<span class="ident" id="6449498">uint32max</span>&nbsp;<span class="op" id="6449508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449512">size</span>&nbsp;<span class="op" id="6449517">=</span>&nbsp;<span class="ident" id="6449519">f</span><span class="op" id="6449520">.</span><span class="ident" id="6449521">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449544">if</span>&nbsp;<span class="ident" id="6449547">g</span>&nbsp;<span class="op" id="6449549">:=</span>&nbsp;<span class="ident" id="6449552">uint64</span><span class="op" id="6449558">(</span><span class="ident" id="6449559">b</span><span class="op" id="6449560">.</span><span class="ident" id="6449561">Len</span><span class="op" id="6449564">(</span><span class="op" id="6449565">)</span><span class="op" id="6449566">)</span><span class="op" id="6449567">;</span>&nbsp;<span class="ident" id="6449569">g</span>&nbsp;<span class="op" id="6449571">!=</span>&nbsp;<span class="ident" id="6449574">size</span>&nbsp;<span class="op" id="6449579">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449583">t</span><span class="op" id="6449584">.</span><span class="ident" id="6449585">Errorf</span><span class="op" id="6449591">(</span><span class="string" id="6449592">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="6449640">,</span>&nbsp;<span class="ident" id="6449642">f</span><span class="op" id="6449643">.</span><span class="ident" id="6449644">Name</span><span class="op" id="6449648">,</span>&nbsp;<span class="ident" id="6449650">g</span><span class="op" id="6449651">,</span>&nbsp;<span class="ident" id="6449653">size</span><span class="op" id="6449657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449664">var</span>&nbsp;<span class="ident" id="6449668">c</span>&nbsp;<span class="op" id="6449670">[</span><span class="op" id="6449671">]</span><span class="builtintype" id="6449672">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449678">if</span>&nbsp;<span class="ident" id="6449681">ft</span><span class="op" id="6449683">.</span><span class="ident" id="6449684">Content</span>&nbsp;<span class="op" id="6449692">!=</span>&nbsp;<span class="builtintype" id="6449695">nil</span>&nbsp;<span class="op" id="6449699">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449703">c</span>&nbsp;<span class="op" id="6449705">=</span>&nbsp;<span class="ident" id="6449707">ft</span><span class="op" id="6449709">.</span><span class="ident" id="6449710">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449719">}</span>&nbsp;<span class="keyword" id="6449721">else</span>&nbsp;<span class="keyword" id="6449726">if</span>&nbsp;<span class="ident" id="6449729">c</span><span class="op" id="6449730">,</span>&nbsp;<span class="ident" id="6449732">err</span>&nbsp;<span class="op" id="6449736">=</span>&nbsp;<span class="ident" id="6449738">ioutil</span><span class="op" id="6449744">.</span><span class="ident" id="6449745">ReadFile</span><span class="op" id="6449753">(</span><span class="string" id="6449754">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="6449766">+</span>&nbsp;<span class="ident" id="6449768">ft</span><span class="op" id="6449770">.</span><span class="ident" id="6449771">File</span><span class="op" id="6449775">)</span><span class="op" id="6449776">;</span>&nbsp;<span class="ident" id="6449778">err</span>&nbsp;<span class="op" id="6449782">!=</span>&nbsp;<span class="builtintype" id="6449785">nil</span>&nbsp;<span class="op" id="6449789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449793">t</span><span class="op" id="6449794">.</span><span class="ident" id="6449795">Error</span><span class="op" id="6449800">(</span><span class="ident" id="6449801">err</span><span class="op" id="6449804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449808">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449816">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449820">if</span>&nbsp;<span class="ident" id="6449823">b</span><span class="op" id="6449824">.</span><span class="ident" id="6449825">Len</span><span class="op" id="6449828">(</span><span class="op" id="6449829">)</span>&nbsp;<span class="op" id="6449831">!=</span>&nbsp;<span class="builtinfunc" id="6449834">len</span><span class="op" id="6449837">(</span><span class="ident" id="6449838">c</span><span class="op" id="6449839">)</span>&nbsp;<span class="op" id="6449841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449845">t</span><span class="op" id="6449846">.</span><span class="ident" id="6449847">Errorf</span><span class="op" id="6449853">(</span><span class="string" id="6449854">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6449875">,</span>&nbsp;<span class="ident" id="6449877">f</span><span class="op" id="6449878">.</span><span class="ident" id="6449879">Name</span><span class="op" id="6449883">,</span>&nbsp;<span class="ident" id="6449885">b</span><span class="op" id="6449886">.</span><span class="ident" id="6449887">Len</span><span class="op" id="6449890">(</span><span class="op" id="6449891">)</span><span class="op" id="6449892">,</span>&nbsp;<span class="builtinfunc" id="6449894">len</span><span class="op" id="6449897">(</span><span class="ident" id="6449898">c</span><span class="op" id="6449899">)</span><span class="op" id="6449900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449904">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449912">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449916">for</span>&nbsp;<span class="ident" id="6449920">i</span><span class="op" id="6449921">,</span>&nbsp;<span class="ident" id="6449923">b</span>&nbsp;<span class="op" id="6449925">:=</span>&nbsp;<span class="keyword" id="6449928">range</span>&nbsp;<span class="ident" id="6449934">b</span><span class="op" id="6449935">.</span><span class="ident" id="6449936">Bytes</span><span class="op" id="6449941">(</span><span class="op" id="6449942">)</span>&nbsp;<span class="op" id="6449944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449948">if</span>&nbsp;<span class="ident" id="6449951">b</span>&nbsp;<span class="op" id="6449953">!=</span>&nbsp;<span class="ident" id="6449956">c</span><span class="op" id="6449957">[</span><span class="ident" id="6449958">i</span><span class="op" id="6449959">]</span>&nbsp;<span class="op" id="6449961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449966">t</span><span class="op" id="6449967">.</span><span class="ident" id="6449968">Errorf</span><span class="op" id="6449974">(</span><span class="string" id="6449975">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6450003">,</span>&nbsp;<span class="ident" id="6450005">f</span><span class="op" id="6450006">.</span><span class="ident" id="6450007">Name</span><span class="op" id="6450011">,</span>&nbsp;<span class="ident" id="6450013">i</span><span class="op" id="6450014">,</span>&nbsp;<span class="ident" id="6450016">b</span><span class="op" id="6450017">,</span>&nbsp;<span class="ident" id="6450019">c</span><span class="op" id="6450020">[</span><span class="ident" id="6450021">i</span><span class="op" id="6450022">]</span><span class="op" id="6450023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450028">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450040">}</span><br>
<span class="lineno"></span><span class="op" id="6450042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6450045">func</span>&nbsp;<span class="ident" id="6450050">testFileMode</span><span class="op" id="6450062">(</span><span class="ident" id="6450063">t</span>&nbsp;<span class="op" id="6450065">*</span><span class="ident" id="6450066">testing</span><span class="op" id="6450073">.</span><span class="ident" id="6450074">T</span><span class="op" id="6450075">,</span>&nbsp;<span class="ident" id="6450077">zipName</span>&nbsp;<span class="builtintype" id="6450085">string</span><span class="op" id="6450091">,</span>&nbsp;<span class="ident" id="6450093">f</span>&nbsp;<span class="op" id="6450095">*</span><span class="ident" id="6450096">File</span><span class="op" id="6450100">,</span>&nbsp;<span class="ident" id="6450102">want</span>&nbsp;<span class="ident" id="6450107">os</span><span class="op" id="6450109">.</span><span class="ident" id="6450110">FileMode</span><span class="op" id="6450118">)</span>&nbsp;<span class="op" id="6450120">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450123">mode</span>&nbsp;<span class="op" id="6450128">:=</span>&nbsp;<span class="ident" id="6450131">f</span><span class="op" id="6450132">.</span><span class="ident" id="6450133">Mode</span><span class="op" id="6450137">(</span><span class="op" id="6450138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450141">if</span>&nbsp;<span class="ident" id="6450144">want</span>&nbsp;<span class="op" id="6450149">==</span>&nbsp;<span class="num" id="6450152">0</span>&nbsp;<span class="op" id="6450154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450158">t</span><span class="op" id="6450159">.</span><span class="ident" id="6450160">Errorf</span><span class="op" id="6450166">(</span><span class="string" id="6450167">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="6450199">,</span>&nbsp;<span class="ident" id="6450201">zipName</span><span class="op" id="6450208">,</span>&nbsp;<span class="ident" id="6450210">f</span><span class="op" id="6450211">.</span><span class="ident" id="6450212">Name</span><span class="op" id="6450216">,</span>&nbsp;<span class="ident" id="6450218">mode</span><span class="op" id="6450222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450225">}</span>&nbsp;<span class="keyword" id="6450227">else</span>&nbsp;<span class="keyword" id="6450232">if</span>&nbsp;<span class="ident" id="6450235">mode</span>&nbsp;<span class="op" id="6450240">!=</span>&nbsp;<span class="ident" id="6450243">want</span>&nbsp;<span class="op" id="6450248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450252">t</span><span class="op" id="6450253">.</span><span class="ident" id="6450254">Errorf</span><span class="op" id="6450260">(</span><span class="string" id="6450261">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6450291">,</span>&nbsp;<span class="ident" id="6450293">zipName</span><span class="op" id="6450300">,</span>&nbsp;<span class="ident" id="6450302">f</span><span class="op" id="6450303">.</span><span class="ident" id="6450304">Name</span><span class="op" id="6450308">,</span>&nbsp;<span class="ident" id="6450310">want</span><span class="op" id="6450314">,</span>&nbsp;<span class="ident" id="6450316">mode</span><span class="op" id="6450320">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450323">}</span><br>
<span class="lineno"></span><span class="op" id="6450325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6450328">func</span>&nbsp;<span class="ident" id="6450333">TestInvalidFiles</span><span class="op" id="6450349">(</span><span class="ident" id="6450350">t</span>&nbsp;<span class="op" id="6450352">*</span><span class="ident" id="6450353">testing</span><span class="op" id="6450360">.</span><span class="ident" id="6450361">T</span><span class="op" id="6450362">)</span>&nbsp;<span class="op" id="6450364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450367">const</span>&nbsp;<span class="ident" id="6450373">size</span>&nbsp;<span class="op" id="6450378">=</span>&nbsp;<span class="num" id="6450380">1024</span>&nbsp;<span class="op" id="6450385">*</span>&nbsp;<span class="num" id="6450387">70</span>&nbsp;<span class="comment" id="6450390">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450399">b</span>&nbsp;<span class="op" id="6450401">:=</span>&nbsp;<span class="builtinfunc" id="6450404">make</span><span class="op" id="6450408">(</span><span class="op" id="6450409">[</span><span class="op" id="6450410">]</span><span class="builtintype" id="6450411">byte</span><span class="op" id="6450415">,</span>&nbsp;<span class="ident" id="6450417">size</span><span class="op" id="6450421">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6450425">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450436">_</span><span class="op" id="6450437">,</span>&nbsp;<span class="ident" id="6450439">err</span>&nbsp;<span class="op" id="6450443">:=</span>&nbsp;<span class="ident" id="6450446">NewReader</span><span class="op" id="6450455">(</span><span class="ident" id="6450456">bytes</span><span class="op" id="6450461">.</span><span class="ident" id="6450462">NewReader</span><span class="op" id="6450471">(</span><span class="ident" id="6450472">b</span><span class="op" id="6450473">)</span><span class="op" id="6450474">,</span>&nbsp;<span class="ident" id="6450476">size</span><span class="op" id="6450480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450483">if</span>&nbsp;<span class="ident" id="6450486">err</span>&nbsp;<span class="op" id="6450490">!=</span>&nbsp;<span class="ident" id="6450493">ErrFormat</span>&nbsp;<span class="op" id="6450503">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450507">t</span><span class="op" id="6450508">.</span><span class="ident" id="6450509">Errorf</span><span class="op" id="6450515">(</span><span class="string" id="6450516">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6450543">,</span>&nbsp;<span class="ident" id="6450545">err</span><span class="op" id="6450548">,</span>&nbsp;<span class="ident" id="6450550">ErrFormat</span><span class="op" id="6450559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6450566">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450602">sig</span>&nbsp;<span class="op" id="6450606">:=</span>&nbsp;<span class="builtinfunc" id="6450609">make</span><span class="op" id="6450613">(</span><span class="op" id="6450614">[</span><span class="op" id="6450615">]</span><span class="builtintype" id="6450616">byte</span><span class="op" id="6450620">,</span>&nbsp;<span class="num" id="6450622">4</span><span class="op" id="6450623">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450626">binary</span><span class="op" id="6450632">.</span><span class="ident" id="6450633">LittleEndian</span><span class="op" id="6450645">.</span><span class="ident" id="6450646">PutUint32</span><span class="op" id="6450655">(</span><span class="ident" id="6450656">sig</span><span class="op" id="6450659">,</span>&nbsp;<span class="ident" id="6450661">directoryEndSignature</span><span class="op" id="6450682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450685">for</span>&nbsp;<span class="ident" id="6450689">i</span>&nbsp;<span class="op" id="6450691">:=</span>&nbsp;<span class="num" id="6450694">0</span><span class="op" id="6450695">;</span>&nbsp;<span class="ident" id="6450697">i</span>&nbsp;<span class="op" id="6450699">&lt;</span>&nbsp;<span class="ident" id="6450701">size</span><span class="op" id="6450705">-</span><span class="num" id="6450706">4</span><span class="op" id="6450707">;</span>&nbsp;<span class="ident" id="6450709">i</span>&nbsp;<span class="op" id="6450711">+=</span>&nbsp;<span class="num" id="6450714">4</span>&nbsp;<span class="op" id="6450716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6450720">copy</span><span class="op" id="6450724">(</span><span class="ident" id="6450725">b</span><span class="op" id="6450726">[</span><span class="ident" id="6450727">i</span><span class="op" id="6450728">:</span><span class="ident" id="6450729">i</span><span class="op" id="6450730">+</span><span class="num" id="6450731">4</span><span class="op" id="6450732">]</span><span class="op" id="6450733">,</span>&nbsp;<span class="ident" id="6450735">sig</span><span class="op" id="6450738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450744">_</span><span class="op" id="6450745">,</span>&nbsp;<span class="ident" id="6450747">err</span>&nbsp;<span class="op" id="6450751">=</span>&nbsp;<span class="ident" id="6450753">NewReader</span><span class="op" id="6450762">(</span><span class="ident" id="6450763">bytes</span><span class="op" id="6450768">.</span><span class="ident" id="6450769">NewReader</span><span class="op" id="6450778">(</span><span class="ident" id="6450779">b</span><span class="op" id="6450780">)</span><span class="op" id="6450781">,</span>&nbsp;<span class="ident" id="6450783">size</span><span class="op" id="6450787">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450790">if</span>&nbsp;<span class="ident" id="6450793">err</span>&nbsp;<span class="op" id="6450797">!=</span>&nbsp;<span class="ident" id="6450800">ErrFormat</span>&nbsp;<span class="op" id="6450810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450814">t</span><span class="op" id="6450815">.</span><span class="ident" id="6450816">Errorf</span><span class="op" id="6450822">(</span><span class="string" id="6450823">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6450848">,</span>&nbsp;<span class="ident" id="6450850">err</span><span class="op" id="6450853">,</span>&nbsp;<span class="ident" id="6450855">ErrFormat</span><span class="op" id="6450864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450867">}</span><br>
<span class="lineno"></span><span class="op" id="6450869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="6450872">func</span>&nbsp;<span class="ident" id="6450877">messWith</span><span class="op" id="6450885">(</span><span class="ident" id="6450886">fileName</span>&nbsp;<span class="builtintype" id="6450895">string</span><span class="op" id="6450901">,</span>&nbsp;<span class="ident" id="6450903">corrupter</span>&nbsp;<span class="keyword" id="6450913">func</span><span class="op" id="6450917">(</span><span class="ident" id="6450918">b</span>&nbsp;<span class="op" id="6450920">[</span><span class="op" id="6450921">]</span><span class="builtintype" id="6450922">byte</span><span class="op" id="6450926">)</span><span class="op" id="6450927">)</span>&nbsp;<span class="op" id="6450929">(</span><span class="ident" id="6450930">r</span>&nbsp;<span class="ident" id="6450932">io</span><span class="op" id="6450934">.</span><span class="ident" id="6450935">ReaderAt</span><span class="op" id="6450943">,</span>&nbsp;<span class="ident" id="6450945">size</span>&nbsp;<span class="ident" id="6450950">int64</span><span class="op" id="6450955">)</span>&nbsp;<span class="op" id="6450957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450960">data</span><span class="op" id="6450964">,</span>&nbsp;<span class="ident" id="6450966">err</span>&nbsp;<span class="op" id="6450970">:=</span>&nbsp;<span class="ident" id="6450973">ioutil</span><span class="op" id="6450979">.</span><span class="ident" id="6450980">ReadFile</span><span class="op" id="6450988">(</span><span class="ident" id="6450989">filepath</span><span class="op" id="6450997">.</span><span class="ident" id="6450998">Join</span><span class="op" id="6451002">(</span><span class="string" id="6451003">&#34;testdata&#34;</span><span class="op" id="6451013">,</span>&nbsp;<span class="ident" id="6451015">fileName</span><span class="op" id="6451023">)</span><span class="op" id="6451024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451027">if</span>&nbsp;<span class="ident" id="6451030">err</span>&nbsp;<span class="op" id="6451034">!=</span>&nbsp;<span class="builtintype" id="6451037">nil</span>&nbsp;<span class="op" id="6451041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6451045">panic</span><span class="op" id="6451050">(</span><span class="string" id="6451051">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="6451068">+</span>&nbsp;<span class="ident" id="6451070">fileName</span>&nbsp;<span class="op" id="6451079">+</span>&nbsp;<span class="string" id="6451081">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="6451086">+</span>&nbsp;<span class="ident" id="6451088">err</span><span class="op" id="6451091">.</span><span class="ident" id="6451092">Error</span><span class="op" id="6451097">(</span><span class="op" id="6451098">)</span><span class="op" id="6451099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451102">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451105">corrupter</span><span class="op" id="6451114">(</span><span class="ident" id="6451115">data</span><span class="op" id="6451119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451122">return</span>&nbsp;<span class="ident" id="6451129">bytes</span><span class="op" id="6451134">.</span><span class="ident" id="6451135">NewReader</span><span class="op" id="6451144">(</span><span class="ident" id="6451145">data</span><span class="op" id="6451149">)</span><span class="op" id="6451150">,</span>&nbsp;<span class="ident" id="6451152">int64</span><span class="op" id="6451157">(</span><span class="builtinfunc" id="6451158">len</span><span class="op" id="6451161">(</span><span class="ident" id="6451162">data</span><span class="op" id="6451166">)</span><span class="op" id="6451167">)</span><br>
<span class="lineno"></span><span class="op" id="6451169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6451172">func</span>&nbsp;<span class="ident" id="6451177">returnCorruptCRC32Zip</span><span class="op" id="6451198">(</span><span class="op" id="6451199">)</span>&nbsp;<span class="op" id="6451201">(</span><span class="ident" id="6451202">r</span>&nbsp;<span class="ident" id="6451204">io</span><span class="op" id="6451206">.</span><span class="ident" id="6451207">ReaderAt</span><span class="op" id="6451215">,</span>&nbsp;<span class="ident" id="6451217">size</span>&nbsp;<span class="ident" id="6451222">int64</span><span class="op" id="6451227">)</span>&nbsp;<span class="op" id="6451229">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451232">return</span>&nbsp;<span class="ident" id="6451239">messWith</span><span class="op" id="6451247">(</span><span class="string" id="6451248">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="6451274">,</span>&nbsp;<span class="keyword" id="6451276">func</span><span class="op" id="6451280">(</span><span class="ident" id="6451281">b</span>&nbsp;<span class="op" id="6451283">[</span><span class="op" id="6451284">]</span><span class="builtintype" id="6451285">byte</span><span class="op" id="6451289">)</span>&nbsp;<span class="op" id="6451291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451295">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451350">b</span><span class="op" id="6451351">[</span><span class="num" id="6451352">0x2d</span><span class="op" id="6451356">]</span><span class="op" id="6451357">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451361">}</span><span class="op" id="6451362">)</span><br>
<span class="lineno"></span><span class="op" id="6451364">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="6451367">func</span>&nbsp;<span class="ident" id="6451372">returnCorruptNotStreamedZip</span><span class="op" id="6451399">(</span><span class="op" id="6451400">)</span>&nbsp;<span class="op" id="6451402">(</span><span class="ident" id="6451403">r</span>&nbsp;<span class="ident" id="6451405">io</span><span class="op" id="6451407">.</span><span class="ident" id="6451408">ReaderAt</span><span class="op" id="6451416">,</span>&nbsp;<span class="ident" id="6451418">size</span>&nbsp;<span class="ident" id="6451423">int64</span><span class="op" id="6451428">)</span>&nbsp;<span class="op" id="6451430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451433">return</span>&nbsp;<span class="ident" id="6451440">messWith</span><span class="op" id="6451448">(</span><span class="string" id="6451449">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="6451473">,</span>&nbsp;<span class="keyword" id="6451475">func</span><span class="op" id="6451479">(</span><span class="ident" id="6451480">b</span>&nbsp;<span class="op" id="6451482">[</span><span class="op" id="6451483">]</span><span class="builtintype" id="6451484">byte</span><span class="op" id="6451488">)</span>&nbsp;<span class="op" id="6451490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451494">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451543">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451588">b</span><span class="op" id="6451589">[</span><span class="num" id="6451590">0x11</span><span class="op" id="6451594">]</span><span class="op" id="6451595">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451600">b</span><span class="op" id="6451601">[</span><span class="num" id="6451602">0x9d</span><span class="op" id="6451606">]</span><span class="op" id="6451607">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451613">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451668">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451725">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451783">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451837">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6451892">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451913">}</span><span class="op" id="6451914">)</span><br>
<span class="lineno">465</span><span class="op" id="6451916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6451919">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="6451983">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="6452044">func</span>&nbsp;<span class="ident" id="6452049">rZipBytes</span><span class="op" id="6452058">(</span><span class="op" id="6452059">)</span>&nbsp;<span class="op" id="6452061">[</span><span class="op" id="6452062">]</span><span class="builtintype" id="6452063">byte</span>&nbsp;<span class="op" id="6452068">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452071">s</span>&nbsp;<span class="op" id="6452073">:=</span>&nbsp;<span class="string" id="6452076">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453624">s</span>&nbsp;<span class="op" id="6453626">=</span>&nbsp;<span class="ident" id="6453628">regexp</span><span class="op" id="6453634">.</span><span class="ident" id="6453635">MustCompile</span><span class="op" id="6453646">(</span><span class="string" id="6453647">`[0-9a-f]{7}`</span><span class="op" id="6453660">)</span><span class="op" id="6453661">.</span><span class="ident" id="6453662">ReplaceAllString</span><span class="op" id="6453678">(</span><span class="ident" id="6453679">s</span><span class="op" id="6453680">,</span>&nbsp;<span class="string" id="6453682">&#34;&#34;</span><span class="op" id="6453684">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453687">s</span>&nbsp;<span class="op" id="6453689">=</span>&nbsp;<span class="ident" id="6453691">regexp</span><span class="op" id="6453697">.</span><span class="ident" id="6453698">MustCompile</span><span class="op" id="6453709">(</span><span class="string" id="6453710">`\s+`</span><span class="op" id="6453715">)</span><span class="op" id="6453716">.</span><span class="ident" id="6453717">ReplaceAllString</span><span class="op" id="6453733">(</span><span class="ident" id="6453734">s</span><span class="op" id="6453735">,</span>&nbsp;<span class="string" id="6453737">&#34;&#34;</span><span class="op" id="6453739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453742">b</span><span class="op" id="6453743">,</span>&nbsp;<span class="ident" id="6453745">err</span>&nbsp;<span class="op" id="6453749">:=</span>&nbsp;<span class="ident" id="6453752">hex</span><span class="op" id="6453755">.</span><span class="ident" id="6453756">DecodeString</span><span class="op" id="6453768">(</span><span class="ident" id="6453769">s</span><span class="op" id="6453770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453773">if</span>&nbsp;<span class="ident" id="6453776">err</span>&nbsp;<span class="op" id="6453780">!=</span>&nbsp;<span class="builtintype" id="6453783">nil</span>&nbsp;<span class="op" id="6453787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6453791">panic</span><span class="op" id="6453796">(</span><span class="ident" id="6453797">err</span><span class="op" id="6453800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453803">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453806">return</span>&nbsp;<span class="ident" id="6453813">b</span><br>
<span class="lineno"></span><span class="op" id="6453815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6453818">func</span>&nbsp;<span class="ident" id="6453823">returnRecursiveZip</span><span class="op" id="6453841">(</span><span class="op" id="6453842">)</span>&nbsp;<span class="op" id="6453844">(</span><span class="ident" id="6453845">r</span>&nbsp;<span class="ident" id="6453847">io</span><span class="op" id="6453849">.</span><span class="ident" id="6453850">ReaderAt</span><span class="op" id="6453858">,</span>&nbsp;<span class="ident" id="6453860">size</span>&nbsp;<span class="ident" id="6453865">int64</span><span class="op" id="6453870">)</span>&nbsp;<span class="op" id="6453872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453875">b</span>&nbsp;<span class="op" id="6453877">:=</span>&nbsp;<span class="ident" id="6453880">rZipBytes</span><span class="op" id="6453889">(</span><span class="op" id="6453890">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453893">return</span>&nbsp;<span class="ident" id="6453900">bytes</span><span class="op" id="6453905">.</span><span class="ident" id="6453906">NewReader</span><span class="op" id="6453915">(</span><span class="ident" id="6453916">b</span><span class="op" id="6453917">)</span><span class="op" id="6453918">,</span>&nbsp;<span class="ident" id="6453920">int64</span><span class="op" id="6453925">(</span><span class="builtinfunc" id="6453926">len</span><span class="op" id="6453929">(</span><span class="ident" id="6453930">b</span><span class="op" id="6453931">)</span><span class="op" id="6453932">)</span><br>
<span class="lineno"></span><span class="op" id="6453934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6453937">func</span>&nbsp;<span class="ident" id="6453942">TestIssue8186</span><span class="op" id="6453955">(</span><span class="ident" id="6453956">t</span>&nbsp;<span class="op" id="6453958">*</span><span class="ident" id="6453959">testing</span><span class="op" id="6453966">.</span><span class="ident" id="6453967">T</span><span class="op" id="6453968">)</span>&nbsp;<span class="op" id="6453970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6453973">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454034">dirEnts</span>&nbsp;<span class="op" id="6454042">:=</span>&nbsp;<span class="op" id="6454045">[</span><span class="op" id="6454046">]</span><span class="builtintype" id="6454047">string</span><span class="op" id="6454053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454057">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="6454284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454288">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="6454466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454470">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="6454641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454645">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="6454813">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454817">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="6455000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6455004">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="6455186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6455190">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="6455360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6455364">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98o\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="6455533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6455537">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="6455710">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455716">for</span>&nbsp;<span class="ident" id="6455720">i</span><span class="op" id="6455721">,</span>&nbsp;<span class="ident" id="6455723">s</span>&nbsp;<span class="op" id="6455725">:=</span>&nbsp;<span class="keyword" id="6455728">range</span>&nbsp;<span class="ident" id="6455734">dirEnts</span>&nbsp;<span class="op" id="6455742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455746">var</span>&nbsp;<span class="ident" id="6455750">f</span>&nbsp;<span class="ident" id="6455752">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455759">err</span>&nbsp;<span class="op" id="6455763">:=</span>&nbsp;<span class="ident" id="6455766">readDirectoryHeader</span><span class="op" id="6455785">(</span><span class="op" id="6455786">&amp;</span><span class="ident" id="6455787">f</span><span class="op" id="6455788">,</span>&nbsp;<span class="ident" id="6455790">strings</span><span class="op" id="6455797">.</span><span class="ident" id="6455798">NewReader</span><span class="op" id="6455807">(</span><span class="ident" id="6455808">s</span><span class="op" id="6455809">)</span><span class="op" id="6455810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6455814">if</span>&nbsp;<span class="ident" id="6455817">err</span>&nbsp;<span class="op" id="6455821">!=</span>&nbsp;<span class="builtintype" id="6455824">nil</span>&nbsp;<span class="op" id="6455828">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6455833">t</span><span class="op" id="6455834">.</span><span class="ident" id="6455835">Errorf</span><span class="op" id="6455841">(</span><span class="string" id="6455842">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="6455865">,</span>&nbsp;<span class="ident" id="6455867">i</span><span class="op" id="6455868">,</span>&nbsp;<span class="ident" id="6455870">err</span><span class="op" id="6455873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6455880">}</span><br>
<span class="lineno"></span><span class="op" id="6455882">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
