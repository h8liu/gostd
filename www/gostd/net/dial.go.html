<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html" class="current">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3199303">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3199359">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3199413">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3199464">package</span>&nbsp;<span class="ident" id="3199472">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3199477">import</span>&nbsp;<span class="op" id="3199484">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3199487">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3199497">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3199504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3199507">//&nbsp;A&nbsp;Dialer&nbsp;contains&nbsp;options&nbsp;for&nbsp;connecting&nbsp;to&nbsp;an&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="3199566">//</span><br>
<span class="lineno"></span><span class="comment" id="3199569">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;each&nbsp;field&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;dialing</span><br>
<span class="lineno">15</span><span class="comment" id="3199627">//&nbsp;without&nbsp;that&nbsp;option.&nbsp;Dialing&nbsp;with&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;Dialer</span><br>
<span class="lineno"></span><span class="comment" id="3199689">//&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to&nbsp;just&nbsp;calling&nbsp;the&nbsp;Dial&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="3199751">type</span>&nbsp;<span class="ident" id="3199756">Dialer</span>&nbsp;<span class="keyword" id="3199763">struct</span>&nbsp;<span class="op" id="3199770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199773">//&nbsp;Timeout&nbsp;is&nbsp;the&nbsp;maximum&nbsp;amount&nbsp;of&nbsp;time&nbsp;a&nbsp;dial&nbsp;will&nbsp;wait&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199836">//&nbsp;a&nbsp;connect&nbsp;to&nbsp;complete.&nbsp;If&nbsp;Deadline&nbsp;is&nbsp;also&nbsp;set,&nbsp;it&nbsp;may&nbsp;fail</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199900">//&nbsp;earlier.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199913">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199917">//&nbsp;The&nbsp;default&nbsp;is&nbsp;no&nbsp;timeout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199948">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3199952">//&nbsp;With&nbsp;or&nbsp;without&nbsp;a&nbsp;timeout,&nbsp;the&nbsp;operating&nbsp;system&nbsp;may&nbsp;impose</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200015">//&nbsp;its&nbsp;own&nbsp;earlier&nbsp;timeout.&nbsp;For&nbsp;instance,&nbsp;TCP&nbsp;timeouts&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200075">//&nbsp;often&nbsp;around&nbsp;3&nbsp;minutes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3200103">Timeout</span>&nbsp;<span class="ident" id="3200111"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3200115">.</span><span class="ident" id="3200116"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200127">//&nbsp;Deadline&nbsp;is&nbsp;the&nbsp;absolute&nbsp;point&nbsp;in&nbsp;time&nbsp;after&nbsp;which&nbsp;dials</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200188">//&nbsp;will&nbsp;fail.&nbsp;If&nbsp;Timeout&nbsp;is&nbsp;set,&nbsp;it&nbsp;may&nbsp;fail&nbsp;earlier.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200243">//&nbsp;Zero&nbsp;means&nbsp;no&nbsp;deadline,&nbsp;or&nbsp;dependent&nbsp;on&nbsp;the&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200308">//&nbsp;as&nbsp;with&nbsp;the&nbsp;Timeout&nbsp;option.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3200340">Deadline</span>&nbsp;<span class="ident" id="3200349"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3200353">.</span><span class="ident" id="3200354"><a href="/gostd/time/time.go.html#2722087">Time</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200361">//&nbsp;LocalAddr&nbsp;is&nbsp;the&nbsp;local&nbsp;address&nbsp;to&nbsp;use&nbsp;when&nbsp;dialing&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200419">//&nbsp;address.&nbsp;The&nbsp;address&nbsp;must&nbsp;be&nbsp;of&nbsp;a&nbsp;compatible&nbsp;type&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200481">//&nbsp;network&nbsp;being&nbsp;dialed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200507">//&nbsp;If&nbsp;nil,&nbsp;a&nbsp;local&nbsp;address&nbsp;is&nbsp;automatically&nbsp;chosen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3200560">LocalAddr</span>&nbsp;<span class="ident" id="3200570"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200577">//&nbsp;DualStack&nbsp;allows&nbsp;a&nbsp;single&nbsp;dial&nbsp;to&nbsp;attempt&nbsp;to&nbsp;establish</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200636">//&nbsp;multiple&nbsp;IPv4&nbsp;and&nbsp;IPv6&nbsp;connections&nbsp;and&nbsp;to&nbsp;return&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200699">//&nbsp;established&nbsp;connection&nbsp;when&nbsp;the&nbsp;network&nbsp;is&nbsp;&#34;tcp&#34;&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200760">//&nbsp;destination&nbsp;is&nbsp;a&nbsp;host&nbsp;name&nbsp;that&nbsp;has&nbsp;multiple&nbsp;address&nbsp;family</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200824">//&nbsp;DNS&nbsp;records.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3200841">DualStack</span>&nbsp;<span class="builtintype" id="3200851">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200858">//&nbsp;KeepAlive&nbsp;specifies&nbsp;the&nbsp;keep-alive&nbsp;period&nbsp;for&nbsp;an&nbsp;active</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200918">//&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3200942">//&nbsp;If&nbsp;zero,&nbsp;keep-alives&nbsp;are&nbsp;not&nbsp;enabled.&nbsp;Network&nbsp;protocols</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3201002">//&nbsp;that&nbsp;do&nbsp;not&nbsp;support&nbsp;keep-alives&nbsp;ignore&nbsp;this&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201057">KeepAlive</span>&nbsp;<span class="ident" id="3201067"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3201071">.</span><span class="ident" id="3201072"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><br>
<span class="lineno"></span><span class="op" id="3201081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3201084">//&nbsp;Return&nbsp;either&nbsp;now+Timeout&nbsp;or&nbsp;Deadline,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno"></span><span class="comment" id="3201149">//&nbsp;Or&nbsp;zero,&nbsp;if&nbsp;neither&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3201180">func</span>&nbsp;<span class="op" id="3201185">(</span><span class="ident" id="3201186">d</span>&nbsp;<span class="op" id="3201188">*</span><span class="ident" id="3201189"><a href="/gostd/net/dial.go.html#3199756">Dialer</a></span><span class="op" id="3201195">)</span>&nbsp;<span class="ident" id="3201197">deadline</span><span class="op" id="3201205">(</span><span class="op" id="3201206">)</span>&nbsp;<span class="ident" id="3201208"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3201212">.</span><span class="ident" id="3201213"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="op" id="3201218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201221">if</span>&nbsp;<span class="ident" id="3201224"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201225">.</span><span class="ident" id="3201226"><a href="/gostd/net/dial.go.html#3200103">Timeout</a></span>&nbsp;<span class="op" id="3201234">==</span>&nbsp;<span class="num" id="3201237">0</span>&nbsp;<span class="op" id="3201239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201243">return</span>&nbsp;<span class="ident" id="3201250"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201251">.</span><span class="ident" id="3201252"><a href="/gostd/net/dial.go.html#3200340">Deadline</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3201262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201265">timeoutDeadline</span>&nbsp;<span class="op" id="3201281">:=</span>&nbsp;<span class="ident" id="3201284"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3201288">.</span><span class="ident" id="3201289"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="3201292">(</span><span class="op" id="3201293">)</span><span class="op" id="3201294">.</span><span class="ident" id="3201295"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="3201298">(</span><span class="ident" id="3201299"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201300">.</span><span class="ident" id="3201301"><a href="/gostd/net/dial.go.html#3200103">Timeout</a></span><span class="op" id="3201308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201311">if</span>&nbsp;<span class="ident" id="3201314"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201315">.</span><span class="ident" id="3201316"><a href="/gostd/net/dial.go.html#3200340">Deadline</a></span><span class="op" id="3201324">.</span><span class="ident" id="3201325"><a href="/gostd/time/time.go.html#2728744">IsZero</a></span><span class="op" id="3201331">(</span><span class="op" id="3201332">)</span>&nbsp;<span class="op" id="3201334">||</span>&nbsp;<span class="ident" id="3201337"><a href="/gostd/net/dial.go.html#3201265">timeoutDeadline</a></span><span class="op" id="3201352">.</span><span class="ident" id="3201353"><a href="/gostd/time/time.go.html#2722823">Before</a></span><span class="op" id="3201359">(</span><span class="ident" id="3201360"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201361">.</span><span class="ident" id="3201362"><a href="/gostd/net/dial.go.html#3200340">Deadline</a></span><span class="op" id="3201370">)</span>&nbsp;<span class="op" id="3201372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201376">return</span>&nbsp;<span class="ident" id="3201383"><a href="/gostd/net/dial.go.html#3201265">timeoutDeadline</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3201400">}</span>&nbsp;<span class="keyword" id="3201402">else</span>&nbsp;<span class="op" id="3201407">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201411">return</span>&nbsp;<span class="ident" id="3201418"><a href="/gostd/net/dial.go.html#3201186">d</a></span><span class="op" id="3201419">.</span><span class="ident" id="3201420"><a href="/gostd/net/dial.go.html#3200340">Deadline</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3201430">}</span><br>
<span class="lineno"></span><span class="op" id="3201432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3201435">func</span>&nbsp;<span class="ident" id="3201440">parseNetwork</span><span class="op" id="3201452">(</span><span class="ident" id="3201453">net</span>&nbsp;<span class="builtintype" id="3201457">string</span><span class="op" id="3201463">)</span>&nbsp;<span class="op" id="3201465">(</span><span class="ident" id="3201466">afnet</span>&nbsp;<span class="builtintype" id="3201472">string</span><span class="op" id="3201478">,</span>&nbsp;<span class="ident" id="3201480">proto</span>&nbsp;<span class="builtintype" id="3201486">int</span><span class="op" id="3201489">,</span>&nbsp;<span class="ident" id="3201491">err</span>&nbsp;<span class="builtintype" id="3201495">error</span><span class="op" id="3201500">)</span>&nbsp;<span class="op" id="3201502">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201505">i</span>&nbsp;<span class="op" id="3201507">:=</span>&nbsp;<span class="ident" id="3201510"><a href="/gostd/net/parse.go.html#3349140">last</a></span><span class="op" id="3201514">(</span><span class="ident" id="3201515"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3201518">,</span>&nbsp;<span class="string" id="3201520">&#39;:&#39;</span><span class="op" id="3201523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201526">if</span>&nbsp;<span class="ident" id="3201529"><a href="/gostd/net/dial.go.html#3201505">i</a></span>&nbsp;<span class="op" id="3201531">&lt;</span>&nbsp;<span class="num" id="3201533">0</span>&nbsp;<span class="op" id="3201535">{</span>&nbsp;<span class="comment" id="3201537">//&nbsp;no&nbsp;colon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201551">switch</span>&nbsp;<span class="ident" id="3201558"><a href="/gostd/net/dial.go.html#3201453">net</a></span>&nbsp;<span class="op" id="3201562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201566">case</span>&nbsp;<span class="string" id="3201571">&#34;tcp&#34;</span><span class="op" id="3201576">,</span>&nbsp;<span class="string" id="3201578">&#34;tcp4&#34;</span><span class="op" id="3201584">,</span>&nbsp;<span class="string" id="3201586">&#34;tcp6&#34;</span><span class="op" id="3201592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201596">case</span>&nbsp;<span class="string" id="3201601">&#34;udp&#34;</span><span class="op" id="3201606">,</span>&nbsp;<span class="string" id="3201608">&#34;udp4&#34;</span><span class="op" id="3201614">,</span>&nbsp;<span class="string" id="3201616">&#34;udp6&#34;</span><span class="op" id="3201622">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201626">case</span>&nbsp;<span class="string" id="3201631">&#34;ip&#34;</span><span class="op" id="3201635">,</span>&nbsp;<span class="string" id="3201637">&#34;ip4&#34;</span><span class="op" id="3201642">,</span>&nbsp;<span class="string" id="3201644">&#34;ip6&#34;</span><span class="op" id="3201649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201653">case</span>&nbsp;<span class="string" id="3201658">&#34;unix&#34;</span><span class="op" id="3201664">,</span>&nbsp;<span class="string" id="3201666">&#34;unixgram&#34;</span><span class="op" id="3201676">,</span>&nbsp;<span class="string" id="3201678">&#34;unixpacket&#34;</span><span class="op" id="3201690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201694">default</span><span class="op" id="3201701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201706">return</span>&nbsp;<span class="string" id="3201713">&#34;&#34;</span><span class="op" id="3201715">,</span>&nbsp;<span class="num" id="3201717">0</span><span class="op" id="3201718">,</span>&nbsp;<span class="ident" id="3201720"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3201739">(</span><span class="ident" id="3201740"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3201743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3201747">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201751">return</span>&nbsp;<span class="ident" id="3201758"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3201761">,</span>&nbsp;<span class="num" id="3201763">0</span><span class="op" id="3201764">,</span>&nbsp;<span class="builtintype" id="3201766">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3201771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201774"><a href="/gostd/net/dial.go.html#3201466">afnet</a></span>&nbsp;<span class="op" id="3201780">=</span>&nbsp;<span class="ident" id="3201782"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3201785">[</span><span class="op" id="3201786">:</span><span class="ident" id="3201787"><a href="/gostd/net/dial.go.html#3201505">i</a></span><span class="op" id="3201788">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201791">switch</span>&nbsp;<span class="ident" id="3201798"><a href="/gostd/net/dial.go.html#3201466">afnet</a></span>&nbsp;<span class="op" id="3201804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201807">case</span>&nbsp;<span class="string" id="3201812">&#34;ip&#34;</span><span class="op" id="3201816">,</span>&nbsp;<span class="string" id="3201818">&#34;ip4&#34;</span><span class="op" id="3201823">,</span>&nbsp;<span class="string" id="3201825">&#34;ip6&#34;</span><span class="op" id="3201830">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201834">protostr</span>&nbsp;<span class="op" id="3201843">:=</span>&nbsp;<span class="ident" id="3201846"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3201849">[</span><span class="ident" id="3201850"><a href="/gostd/net/dial.go.html#3201505">i</a></span><span class="op" id="3201851">+</span><span class="num" id="3201852">1</span><span class="op" id="3201853">:</span><span class="op" id="3201854">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201858">proto</span><span class="op" id="3201863">,</span>&nbsp;<span class="ident" id="3201865">i</span><span class="op" id="3201866">,</span>&nbsp;<span class="ident" id="3201868">ok</span>&nbsp;<span class="op" id="3201871">:=</span>&nbsp;<span class="ident" id="3201874"><a href="/gostd/net/parse.go.html#3346952">dtoi</a></span><span class="op" id="3201878">(</span><span class="ident" id="3201879"><a href="/gostd/net/dial.go.html#3201834">protostr</a></span><span class="op" id="3201887">,</span>&nbsp;<span class="num" id="3201889">0</span><span class="op" id="3201890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201894">if</span>&nbsp;<span class="op" id="3201897">!</span><span class="ident" id="3201898"><a href="/gostd/net/dial.go.html#3201868">ok</a></span>&nbsp;<span class="op" id="3201901">||</span>&nbsp;<span class="ident" id="3201904"><a href="/gostd/net/dial.go.html#3201865">i</a></span>&nbsp;<span class="op" id="3201906">!=</span>&nbsp;<span class="builtinfunc" id="3201909">len</span><span class="op" id="3201912">(</span><span class="ident" id="3201913"><a href="/gostd/net/dial.go.html#3201834">protostr</a></span><span class="op" id="3201921">)</span>&nbsp;<span class="op" id="3201923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3201928"><a href="/gostd/net/dial.go.html#3201858">proto</a></span><span class="op" id="3201933">,</span>&nbsp;<span class="ident" id="3201935"><a href="/gostd/net/dial.go.html#3201491">err</a></span>&nbsp;<span class="op" id="3201939">=</span>&nbsp;<span class="ident" id="3201941"><a href="/gostd/net/lookup_unix.go.html#3328684">lookupProtocol</a></span><span class="op" id="3201955">(</span><span class="ident" id="3201956"><a href="/gostd/net/dial.go.html#3201834">protostr</a></span><span class="op" id="3201964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201969">if</span>&nbsp;<span class="ident" id="3201972"><a href="/gostd/net/dial.go.html#3201491">err</a></span>&nbsp;<span class="op" id="3201976">!=</span>&nbsp;<span class="builtintype" id="3201979">nil</span>&nbsp;<span class="op" id="3201983">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3201989">return</span>&nbsp;<span class="string" id="3201996">&#34;&#34;</span><span class="op" id="3201998">,</span>&nbsp;<span class="num" id="3202000">0</span><span class="op" id="3202001">,</span>&nbsp;<span class="ident" id="3202003"><a href="/gostd/net/dial.go.html#3201491">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202018">return</span>&nbsp;<span class="ident" id="3202025"><a href="/gostd/net/dial.go.html#3201466">afnet</a></span><span class="op" id="3202030">,</span>&nbsp;<span class="ident" id="3202032"><a href="/gostd/net/dial.go.html#3201858">proto</a></span><span class="op" id="3202037">,</span>&nbsp;<span class="builtintype" id="3202039">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202044">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202047">return</span>&nbsp;<span class="string" id="3202054">&#34;&#34;</span><span class="op" id="3202056">,</span>&nbsp;<span class="num" id="3202058">0</span><span class="op" id="3202059">,</span>&nbsp;<span class="ident" id="3202061"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3202080">(</span><span class="ident" id="3202081"><a href="/gostd/net/dial.go.html#3201453">net</a></span><span class="op" id="3202084">)</span><br>
<span class="lineno"></span><span class="op" id="3202086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3202089">func</span>&nbsp;<span class="ident" id="3202094">resolveAddr</span><span class="op" id="3202105">(</span><span class="ident" id="3202106">op</span><span class="op" id="3202108">,</span>&nbsp;<span class="ident" id="3202110">net</span><span class="op" id="3202113">,</span>&nbsp;<span class="ident" id="3202115">addr</span>&nbsp;<span class="builtintype" id="3202120">string</span><span class="op" id="3202126">,</span>&nbsp;<span class="ident" id="3202128">deadline</span>&nbsp;<span class="ident" id="3202137"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3202141">.</span><span class="ident" id="3202142"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3202146">)</span>&nbsp;<span class="op" id="3202148">(</span><span class="ident" id="3202149"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3202156">,</span>&nbsp;<span class="builtintype" id="3202158">error</span><span class="op" id="3202163">)</span>&nbsp;<span class="op" id="3202165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3202168">afnet</span><span class="op" id="3202173">,</span>&nbsp;<span class="ident" id="3202175">_</span><span class="op" id="3202176">,</span>&nbsp;<span class="ident" id="3202178">err</span>&nbsp;<span class="op" id="3202182">:=</span>&nbsp;<span class="ident" id="3202185"><a href="/gostd/net/dial.go.html#3201440">parseNetwork</a></span><span class="op" id="3202197">(</span><span class="ident" id="3202198"><a href="/gostd/net/dial.go.html#3202110">net</a></span><span class="op" id="3202201">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202204">if</span>&nbsp;<span class="ident" id="3202207"><a href="/gostd/net/dial.go.html#3202178">err</a></span>&nbsp;<span class="op" id="3202211">!=</span>&nbsp;<span class="builtintype" id="3202214">nil</span>&nbsp;<span class="op" id="3202218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202222">return</span>&nbsp;<span class="builtintype" id="3202229">nil</span><span class="op" id="3202232">,</span>&nbsp;<span class="ident" id="3202234"><a href="/gostd/net/dial.go.html#3202178">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202242">if</span>&nbsp;<span class="ident" id="3202245"><a href="/gostd/net/dial.go.html#3202106">op</a></span>&nbsp;<span class="op" id="3202248">==</span>&nbsp;<span class="string" id="3202251">&#34;dial&#34;</span>&nbsp;<span class="op" id="3202258">&amp;&amp;</span>&nbsp;<span class="ident" id="3202261"><a href="/gostd/net/dial.go.html#3202115">addr</a></span>&nbsp;<span class="op" id="3202266">==</span>&nbsp;<span class="string" id="3202269">&#34;&#34;</span>&nbsp;<span class="op" id="3202272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202276">return</span>&nbsp;<span class="builtintype" id="3202283">nil</span><span class="op" id="3202286">,</span>&nbsp;<span class="ident" id="3202288"><a href="/gostd/net/net.go.html#3341102">errMissingAddress</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202310">switch</span>&nbsp;<span class="ident" id="3202317"><a href="/gostd/net/dial.go.html#3202168">afnet</a></span>&nbsp;<span class="op" id="3202323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202326">case</span>&nbsp;<span class="string" id="3202331">&#34;unix&#34;</span><span class="op" id="3202337">,</span>&nbsp;<span class="string" id="3202339">&#34;unixgram&#34;</span><span class="op" id="3202349">,</span>&nbsp;<span class="string" id="3202351">&#34;unixpacket&#34;</span><span class="op" id="3202363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202367">return</span>&nbsp;<span class="ident" id="3202374"><a href="/gostd/net/unixsock.go.html#3396008">ResolveUnixAddr</a></span><span class="op" id="3202389">(</span><span class="ident" id="3202390"><a href="/gostd/net/dial.go.html#3202168">afnet</a></span><span class="op" id="3202395">,</span>&nbsp;<span class="ident" id="3202397"><a href="/gostd/net/dial.go.html#3202115">addr</a></span><span class="op" id="3202401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3202404">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3202407">return</span>&nbsp;<span class="ident" id="3202414"><a href="/gostd/net/ipsock.go.html#3315675">resolveInternetAddr</a></span><span class="op" id="3202433">(</span><span class="ident" id="3202434"><a href="/gostd/net/dial.go.html#3202168">afnet</a></span><span class="op" id="3202439">,</span>&nbsp;<span class="ident" id="3202441"><a href="/gostd/net/dial.go.html#3202115">addr</a></span><span class="op" id="3202445">,</span>&nbsp;<span class="ident" id="3202447"><a href="/gostd/net/dial.go.html#3202128">deadline</a></span><span class="op" id="3202455">)</span><br>
<span class="lineno"></span><span class="op" id="3202457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3202460">//&nbsp;Dial&nbsp;connects&nbsp;to&nbsp;the&nbsp;address&nbsp;on&nbsp;the&nbsp;named&nbsp;network.</span><br>
<span class="lineno"></span><span class="comment" id="3202514">//</span><br>
<span class="lineno">115</span><span class="comment" id="3202517">//&nbsp;Known&nbsp;networks&nbsp;are&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;&nbsp;(IPv4-only),&nbsp;&#34;tcp6&#34;&nbsp;(IPv6-only),</span><br>
<span class="lineno"></span><span class="comment" id="3202586">//&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;&nbsp;(IPv4-only),&nbsp;&#34;udp6&#34;&nbsp;(IPv6-only),&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3202648">//&nbsp;(IPv4-only),&nbsp;&#34;ip6&#34;&nbsp;(IPv6-only),&nbsp;&#34;unix&#34;,&nbsp;&#34;unixgram&#34;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3202706">//&nbsp;&#34;unixpacket&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3202723">//</span><br>
<span class="lineno">120</span><span class="comment" id="3202726">//&nbsp;For&nbsp;TCP&nbsp;and&nbsp;UDP&nbsp;networks,&nbsp;addresses&nbsp;have&nbsp;the&nbsp;form&nbsp;host:port.</span><br>
<span class="lineno"></span><span class="comment" id="3202790">//&nbsp;If&nbsp;host&nbsp;is&nbsp;a&nbsp;literal&nbsp;IPv6&nbsp;address&nbsp;it&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="3202847">//&nbsp;in&nbsp;square&nbsp;brackets&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;&nbsp;or&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3202912">//&nbsp;The&nbsp;functions&nbsp;JoinHostPort&nbsp;and&nbsp;SplitHostPort&nbsp;manipulate&nbsp;addresses</span><br>
<span class="lineno"></span><span class="comment" id="3202981">//&nbsp;in&nbsp;this&nbsp;form.</span><br>
<span class="lineno">125</span><span class="comment" id="3202998">//</span><br>
<span class="lineno"></span><span class="comment" id="3203001">//&nbsp;Examples:</span><br>
<span class="lineno"></span><span class="comment" id="3203014">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;tcp&#34;,&nbsp;&#34;12.34.56.78:80&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3203047">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:http&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3203081">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;tcp&#34;,&nbsp;&#34;[2001:db8::1]:http&#34;)</span><br>
<span class="lineno">130</span><span class="comment" id="3203118">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;tcp&#34;,&nbsp;&#34;[fe80::1%lo0]:80&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3203153">//</span><br>
<span class="lineno"></span><span class="comment" id="3203156">//&nbsp;For&nbsp;IP&nbsp;networks,&nbsp;the&nbsp;network&nbsp;must&nbsp;be&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;&nbsp;or&nbsp;&#34;ip6&#34;&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="3203226">//&nbsp;by&nbsp;a&nbsp;colon&nbsp;and&nbsp;a&nbsp;protocol&nbsp;number&nbsp;or&nbsp;name&nbsp;and&nbsp;the&nbsp;addr&nbsp;must&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3203293">//&nbsp;literal&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">135</span><span class="comment" id="3203316">//</span><br>
<span class="lineno"></span><span class="comment" id="3203319">//&nbsp;Examples:</span><br>
<span class="lineno"></span><span class="comment" id="3203332">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;ip4:1&#34;,&nbsp;&#34;127.0.0.1&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3203362">//&nbsp;&nbsp;&nbsp;&nbsp;Dial(&#34;ip6:ospf&#34;,&nbsp;&#34;::1&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3203389">//</span><br>
<span class="lineno">140</span><span class="comment" id="3203392">//&nbsp;For&nbsp;Unix&nbsp;networks,&nbsp;the&nbsp;address&nbsp;must&nbsp;be&nbsp;a&nbsp;file&nbsp;system&nbsp;path.</span><br>
<span class="lineno"></span><span class="keyword" id="3203454">func</span>&nbsp;<span class="ident" id="3203459">Dial</span><span class="op" id="3203463">(</span><span class="ident" id="3203464">network</span><span class="op" id="3203471">,</span>&nbsp;<span class="ident" id="3203473">address</span>&nbsp;<span class="builtintype" id="3203481">string</span><span class="op" id="3203487">)</span>&nbsp;<span class="op" id="3203489">(</span><span class="ident" id="3203490"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3203494">,</span>&nbsp;<span class="builtintype" id="3203496">error</span><span class="op" id="3203501">)</span>&nbsp;<span class="op" id="3203503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3203506">var</span>&nbsp;<span class="ident" id="3203510">d</span>&nbsp;<span class="ident" id="3203512"><a href="/gostd/net/dial.go.html#3199756">Dialer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3203520">return</span>&nbsp;<span class="ident" id="3203527"><a href="/gostd/net/dial.go.html#3203510">d</a></span><span class="op" id="3203528">.</span><span class="ident" id="3203529"><a href="/gostd/net/dial.go.html#3203959">Dial</a></span><span class="op" id="3203533">(</span><span class="ident" id="3203534"><a href="/gostd/net/dial.go.html#3203464">network</a></span><span class="op" id="3203541">,</span>&nbsp;<span class="ident" id="3203543"><a href="/gostd/net/dial.go.html#3203473">address</a></span><span class="op" id="3203550">)</span><br>
<span class="lineno"></span><span class="op" id="3203552">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="3203555">//&nbsp;DialTimeout&nbsp;acts&nbsp;like&nbsp;Dial&nbsp;but&nbsp;takes&nbsp;a&nbsp;timeout.</span><br>
<span class="lineno"></span><span class="comment" id="3203606">//&nbsp;The&nbsp;timeout&nbsp;includes&nbsp;name&nbsp;resolution,&nbsp;if&nbsp;required.</span><br>
<span class="lineno"></span><span class="keyword" id="3203660">func</span>&nbsp;<span class="ident" id="3203665">DialTimeout</span><span class="op" id="3203676">(</span><span class="ident" id="3203677">network</span><span class="op" id="3203684">,</span>&nbsp;<span class="ident" id="3203686">address</span>&nbsp;<span class="builtintype" id="3203694">string</span><span class="op" id="3203700">,</span>&nbsp;<span class="ident" id="3203702">timeout</span>&nbsp;<span class="ident" id="3203710"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3203714">.</span><span class="ident" id="3203715"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><span class="op" id="3203723">)</span>&nbsp;<span class="op" id="3203725">(</span><span class="ident" id="3203726"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3203730">,</span>&nbsp;<span class="builtintype" id="3203732">error</span><span class="op" id="3203737">)</span>&nbsp;<span class="op" id="3203739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3203742">d</span>&nbsp;<span class="op" id="3203744">:=</span>&nbsp;<span class="ident" id="3203747"><a href="/gostd/net/dial.go.html#3199756">Dialer</a></span><span class="op" id="3203753">{</span><span class="ident" id="3203754"><a href="/gostd/net/dial.go.html#3200103">Timeout</a></span><span class="op" id="3203761">:</span>&nbsp;<span class="ident" id="3203763"><a href="/gostd/net/dial.go.html#3203702">timeout</a></span><span class="op" id="3203770">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3203773">return</span>&nbsp;<span class="ident" id="3203780"><a href="/gostd/net/dial.go.html#3203742">d</a></span><span class="op" id="3203781">.</span><span class="ident" id="3203782"><a href="/gostd/net/dial.go.html#3203959">Dial</a></span><span class="op" id="3203786">(</span><span class="ident" id="3203787"><a href="/gostd/net/dial.go.html#3203677">network</a></span><span class="op" id="3203794">,</span>&nbsp;<span class="ident" id="3203796"><a href="/gostd/net/dial.go.html#3203686">address</a></span><span class="op" id="3203803">)</span><br>
<span class="lineno"></span><span class="op" id="3203805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3203808">//&nbsp;Dial&nbsp;connects&nbsp;to&nbsp;the&nbsp;address&nbsp;on&nbsp;the&nbsp;named&nbsp;network.</span><br>
<span class="lineno"></span><span class="comment" id="3203862">//</span><br>
<span class="lineno">155</span><span class="comment" id="3203865">//&nbsp;See&nbsp;func&nbsp;Dial&nbsp;for&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;network&nbsp;and&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="3203927">//&nbsp;parameters.</span><br>
<span class="lineno"></span><span class="keyword" id="3203942">func</span>&nbsp;<span class="op" id="3203947">(</span><span class="ident" id="3203948">d</span>&nbsp;<span class="op" id="3203950">*</span><span class="ident" id="3203951"><a href="/gostd/net/dial.go.html#3199756">Dialer</a></span><span class="op" id="3203957">)</span>&nbsp;<span class="ident" id="3203959">Dial</span><span class="op" id="3203963">(</span><span class="ident" id="3203964">network</span><span class="op" id="3203971">,</span>&nbsp;<span class="ident" id="3203973">address</span>&nbsp;<span class="builtintype" id="3203981">string</span><span class="op" id="3203987">)</span>&nbsp;<span class="op" id="3203989">(</span><span class="ident" id="3203990"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3203994">,</span>&nbsp;<span class="builtintype" id="3203996">error</span><span class="op" id="3204001">)</span>&nbsp;<span class="op" id="3204003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204006">ra</span><span class="op" id="3204008">,</span>&nbsp;<span class="ident" id="3204010">err</span>&nbsp;<span class="op" id="3204014">:=</span>&nbsp;<span class="ident" id="3204017"><a href="/gostd/net/dial.go.html#3202094">resolveAddr</a></span><span class="op" id="3204028">(</span><span class="string" id="3204029">&#34;dial&#34;</span><span class="op" id="3204035">,</span>&nbsp;<span class="ident" id="3204037"><a href="/gostd/net/dial.go.html#3203964">network</a></span><span class="op" id="3204044">,</span>&nbsp;<span class="ident" id="3204046"><a href="/gostd/net/dial.go.html#3203973">address</a></span><span class="op" id="3204053">,</span>&nbsp;<span class="ident" id="3204055"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204056">.</span><span class="ident" id="3204057"><a href="/gostd/net/dial.go.html#3201197">deadline</a></span><span class="op" id="3204065">(</span><span class="op" id="3204066">)</span><span class="op" id="3204067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204070">if</span>&nbsp;<span class="ident" id="3204073"><a href="/gostd/net/dial.go.html#3204010">err</a></span>&nbsp;<span class="op" id="3204077">!=</span>&nbsp;<span class="builtintype" id="3204080">nil</span>&nbsp;<span class="op" id="3204084">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204088">return</span>&nbsp;<span class="builtintype" id="3204095">nil</span><span class="op" id="3204098">,</span>&nbsp;<span class="op" id="3204100">&amp;</span><span class="ident" id="3204101"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3204108">{</span><span class="ident" id="3204109"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3204111">:</span>&nbsp;<span class="string" id="3204113">&#34;dial&#34;</span><span class="op" id="3204119">,</span>&nbsp;<span class="ident" id="3204121"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3204124">:</span>&nbsp;<span class="ident" id="3204126"><a href="/gostd/net/dial.go.html#3203964">network</a></span><span class="op" id="3204133">,</span>&nbsp;<span class="ident" id="3204135"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3204139">:</span>&nbsp;<span class="builtintype" id="3204141">nil</span><span class="op" id="3204144">,</span>&nbsp;<span class="ident" id="3204146"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3204149">:</span>&nbsp;<span class="ident" id="3204151"><a href="/gostd/net/dial.go.html#3204010">err</a></span><span class="op" id="3204154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204160">dialer</span>&nbsp;<span class="op" id="3204167">:=</span>&nbsp;<span class="keyword" id="3204170">func</span><span class="op" id="3204174">(</span><span class="ident" id="3204175">deadline</span>&nbsp;<span class="ident" id="3204184"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3204188">.</span><span class="ident" id="3204189"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3204193">)</span>&nbsp;<span class="op" id="3204195">(</span><span class="ident" id="3204196"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3204200">,</span>&nbsp;<span class="builtintype" id="3204202">error</span><span class="op" id="3204207">)</span>&nbsp;<span class="op" id="3204209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204213">return</span>&nbsp;<span class="ident" id="3204220"><a href="/gostd/net/dial.go.html#3206067">dialSingle</a></span><span class="op" id="3204230">(</span><span class="ident" id="3204231"><a href="/gostd/net/dial.go.html#3203964">network</a></span><span class="op" id="3204238">,</span>&nbsp;<span class="ident" id="3204240"><a href="/gostd/net/dial.go.html#3203973">address</a></span><span class="op" id="3204247">,</span>&nbsp;<span class="ident" id="3204249"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204250">.</span><span class="ident" id="3204251"><a href="/gostd/net/dial.go.html#3200560">LocalAddr</a></span><span class="op" id="3204260">,</span>&nbsp;<span class="ident" id="3204262"><a href="/gostd/net/dial.go.html#3204006">ra</a></span><span class="op" id="3204264">.</span><span class="ident" id="3204265"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3204271">(</span><span class="op" id="3204272">)</span><span class="op" id="3204273">,</span>&nbsp;<span class="ident" id="3204275"><a href="/gostd/net/dial.go.html#3204175">deadline</a></span><span class="op" id="3204283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204286">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204289">if</span>&nbsp;<span class="ident" id="3204292">ras</span><span class="op" id="3204295">,</span>&nbsp;<span class="ident" id="3204297">ok</span>&nbsp;<span class="op" id="3204300">:=</span>&nbsp;<span class="ident" id="3204303"><a href="/gostd/net/dial.go.html#3204006">ra</a></span><span class="op" id="3204305">.</span><span class="op" id="3204306">(</span><span class="ident" id="3204307"><a href="/gostd/net/ipsock.go.html#3310371">addrList</a></span><span class="op" id="3204315">)</span><span class="op" id="3204316">;</span>&nbsp;<span class="ident" id="3204318"><a href="/gostd/net/dial.go.html#3204297">ok</a></span>&nbsp;<span class="op" id="3204321">&amp;&amp;</span>&nbsp;<span class="ident" id="3204324"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204325">.</span><span class="ident" id="3204326"><a href="/gostd/net/dial.go.html#3200841">DualStack</a></span>&nbsp;<span class="op" id="3204336">&amp;&amp;</span>&nbsp;<span class="ident" id="3204339"><a href="/gostd/net/dial.go.html#3203964">network</a></span>&nbsp;<span class="op" id="3204347">==</span>&nbsp;<span class="string" id="3204350">&#34;tcp&#34;</span>&nbsp;<span class="op" id="3204356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204360"><a href="/gostd/net/dial.go.html#3204160">dialer</a></span>&nbsp;<span class="op" id="3204367">=</span>&nbsp;<span class="keyword" id="3204369">func</span><span class="op" id="3204373">(</span><span class="ident" id="3204374">deadline</span>&nbsp;<span class="ident" id="3204383"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3204387">.</span><span class="ident" id="3204388"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3204392">)</span>&nbsp;<span class="op" id="3204394">(</span><span class="ident" id="3204395"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3204399">,</span>&nbsp;<span class="builtintype" id="3204401">error</span><span class="op" id="3204406">)</span>&nbsp;<span class="op" id="3204408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204413">return</span>&nbsp;<span class="ident" id="3204420"><a href="/gostd/net/dial.go.html#3205028">dialMulti</a></span><span class="op" id="3204429">(</span><span class="ident" id="3204430"><a href="/gostd/net/dial.go.html#3203964">network</a></span><span class="op" id="3204437">,</span>&nbsp;<span class="ident" id="3204439"><a href="/gostd/net/dial.go.html#3203973">address</a></span><span class="op" id="3204446">,</span>&nbsp;<span class="ident" id="3204448"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204449">.</span><span class="ident" id="3204450"><a href="/gostd/net/dial.go.html#3200560">LocalAddr</a></span><span class="op" id="3204459">,</span>&nbsp;<span class="ident" id="3204461"><a href="/gostd/net/dial.go.html#3204292">ras</a></span><span class="op" id="3204464">,</span>&nbsp;<span class="ident" id="3204466"><a href="/gostd/net/dial.go.html#3204374">deadline</a></span><span class="op" id="3204474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204481">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204484">c</span><span class="op" id="3204485">,</span>&nbsp;<span class="ident" id="3204487"><a href="/gostd/net/dial.go.html#3204010">err</a></span>&nbsp;<span class="op" id="3204491">:=</span>&nbsp;<span class="ident" id="3204494"><a href="/gostd/net/fd_unix.go.html#3257675">dial</a></span><span class="op" id="3204498">(</span><span class="ident" id="3204499"><a href="/gostd/net/dial.go.html#3203964">network</a></span><span class="op" id="3204506">,</span>&nbsp;<span class="ident" id="3204508"><a href="/gostd/net/dial.go.html#3204006">ra</a></span><span class="op" id="3204510">.</span><span class="ident" id="3204511"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3204517">(</span><span class="op" id="3204518">)</span><span class="op" id="3204519">,</span>&nbsp;<span class="ident" id="3204521"><a href="/gostd/net/dial.go.html#3204160">dialer</a></span><span class="op" id="3204527">,</span>&nbsp;<span class="ident" id="3204529"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204530">.</span><span class="ident" id="3204531"><a href="/gostd/net/dial.go.html#3201197">deadline</a></span><span class="op" id="3204539">(</span><span class="op" id="3204540">)</span><span class="op" id="3204541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204544">if</span>&nbsp;<span class="ident" id="3204547"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204548">.</span><span class="ident" id="3204549"><a href="/gostd/net/dial.go.html#3201057">KeepAlive</a></span>&nbsp;<span class="op" id="3204559">&gt;</span>&nbsp;<span class="num" id="3204561">0</span>&nbsp;<span class="op" id="3204563">&amp;&amp;</span>&nbsp;<span class="ident" id="3204566"><a href="/gostd/net/dial.go.html#3204010">err</a></span>&nbsp;<span class="op" id="3204570">==</span>&nbsp;<span class="builtintype" id="3204573">nil</span>&nbsp;<span class="op" id="3204577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204581">if</span>&nbsp;<span class="ident" id="3204584">tc</span><span class="op" id="3204586">,</span>&nbsp;<span class="ident" id="3204588">ok</span>&nbsp;<span class="op" id="3204591">:=</span>&nbsp;<span class="ident" id="3204594"><a href="/gostd/net/dial.go.html#3204484">c</a></span><span class="op" id="3204595">.</span><span class="op" id="3204596">(</span><span class="op" id="3204597">*</span><span class="ident" id="3204598"><a href="/gostd/net/tcpsock_posix.go.html#3376101">TCPConn</a></span><span class="op" id="3204605">)</span><span class="op" id="3204606">;</span>&nbsp;<span class="ident" id="3204608"><a href="/gostd/net/dial.go.html#3204588">ok</a></span>&nbsp;<span class="op" id="3204611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204616"><a href="/gostd/net/dial.go.html#3204584">tc</a></span><span class="op" id="3204618">.</span><span class="ident" id="3204619"><a href="/gostd/net/tcpsock_posix.go.html#3377591">SetKeepAlive</a></span><span class="op" id="3204631">(</span><span class="builtintype" id="3204632">true</span><span class="op" id="3204636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204641"><a href="/gostd/net/dial.go.html#3204584">tc</a></span><span class="op" id="3204643">.</span><span class="ident" id="3204644"><a href="/gostd/net/tcpsock_posix.go.html#3377783">SetKeepAlivePeriod</a></span><span class="op" id="3204662">(</span><span class="ident" id="3204663"><a href="/gostd/net/dial.go.html#3203948">d</a></span><span class="op" id="3204664">.</span><span class="ident" id="3204665"><a href="/gostd/net/dial.go.html#3201057">KeepAlive</a></span><span class="op" id="3204674">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3204679"><a href="/gostd/net/dial.go.html#3204731">testHookSetKeepAlive</a></span><span class="op" id="3204699">(</span><span class="op" id="3204700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3204707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3204710">return</span>&nbsp;<span class="ident" id="3204717"><a href="/gostd/net/dial.go.html#3204484">c</a></span><span class="op" id="3204718">,</span>&nbsp;<span class="ident" id="3204720"><a href="/gostd/net/dial.go.html#3204010">err</a></span><br>
<span class="lineno"></span><span class="op" id="3204724">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="3204727">var</span>&nbsp;<span class="ident" id="3204731">testHookSetKeepAlive</span>&nbsp;<span class="op" id="3204752">=</span>&nbsp;<span class="keyword" id="3204754">func</span><span class="op" id="3204758">(</span><span class="op" id="3204759">)</span>&nbsp;<span class="op" id="3204761">{</span><span class="op" id="3204762">}</span>&nbsp;<span class="comment" id="3204764">//&nbsp;changed&nbsp;by&nbsp;dial_test.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3204792">//&nbsp;dialMulti&nbsp;attempts&nbsp;to&nbsp;establish&nbsp;connections&nbsp;to&nbsp;each&nbsp;destination&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3204862">//&nbsp;the&nbsp;list&nbsp;of&nbsp;addresses.&nbsp;It&nbsp;will&nbsp;return&nbsp;the&nbsp;first&nbsp;established</span><br>
<span class="lineno">185</span><span class="comment" id="3204925">//&nbsp;connection&nbsp;and&nbsp;close&nbsp;the&nbsp;other&nbsp;connections.&nbsp;Otherwise&nbsp;it&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3204993">//&nbsp;error&nbsp;on&nbsp;the&nbsp;last&nbsp;attempt.</span><br>
<span class="lineno"></span><span class="keyword" id="3205023">func</span>&nbsp;<span class="ident" id="3205028">dialMulti</span><span class="op" id="3205037">(</span><span class="ident" id="3205038">net</span><span class="op" id="3205041">,</span>&nbsp;<span class="ident" id="3205043">addr</span>&nbsp;<span class="builtintype" id="3205048">string</span><span class="op" id="3205054">,</span>&nbsp;<span class="ident" id="3205056">la</span>&nbsp;<span class="ident" id="3205059"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><span class="op" id="3205063">,</span>&nbsp;<span class="ident" id="3205065">ras</span>&nbsp;<span class="ident" id="3205069"><a href="/gostd/net/ipsock.go.html#3310371">addrList</a></span><span class="op" id="3205077">,</span>&nbsp;<span class="ident" id="3205079">deadline</span>&nbsp;<span class="ident" id="3205088"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3205092">.</span><span class="ident" id="3205093"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3205097">)</span>&nbsp;<span class="op" id="3205099">(</span><span class="ident" id="3205100"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3205104">,</span>&nbsp;<span class="builtintype" id="3205106">error</span><span class="op" id="3205111">)</span>&nbsp;<span class="op" id="3205113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205116">type</span>&nbsp;<span class="ident" id="3205121">racer</span>&nbsp;<span class="keyword" id="3205127">struct</span>&nbsp;<span class="op" id="3205134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205138"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3205145">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205155">//&nbsp;Sig&nbsp;controls&nbsp;the&nbsp;flow&nbsp;of&nbsp;dial&nbsp;results&nbsp;on&nbsp;lane.&nbsp;It&nbsp;passes&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205218">//&nbsp;token&nbsp;to&nbsp;the&nbsp;next&nbsp;racer&nbsp;and&nbsp;also&nbsp;indicates&nbsp;the&nbsp;end&nbsp;of&nbsp;flow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205281">//&nbsp;by&nbsp;using&nbsp;closed&nbsp;channel.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205310">sig</span>&nbsp;<span class="op" id="3205314">:=</span>&nbsp;<span class="builtinfunc" id="3205317">make</span><span class="op" id="3205321">(</span><span class="keyword" id="3205322">chan</span>&nbsp;<span class="builtintype" id="3205327">bool</span><span class="op" id="3205331">,</span>&nbsp;<span class="num" id="3205333">1</span><span class="op" id="3205334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205337">lane</span>&nbsp;<span class="op" id="3205342">:=</span>&nbsp;<span class="builtinfunc" id="3205345">make</span><span class="op" id="3205349">(</span><span class="keyword" id="3205350">chan</span>&nbsp;<span class="ident" id="3205355"><a href="/gostd/net/dial.go.html#3205121">racer</a></span><span class="op" id="3205360">,</span>&nbsp;<span class="num" id="3205362">1</span><span class="op" id="3205363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205366">for</span>&nbsp;<span class="ident" id="3205370">_</span><span class="op" id="3205371">,</span>&nbsp;<span class="ident" id="3205373">ra</span>&nbsp;<span class="op" id="3205376">:=</span>&nbsp;<span class="keyword" id="3205379">range</span>&nbsp;<span class="ident" id="3205385"><a href="/gostd/net/dial.go.html#3205065">ras</a></span>&nbsp;<span class="op" id="3205389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205393">go</span>&nbsp;<span class="keyword" id="3205396">func</span><span class="op" id="3205400">(</span><span class="ident" id="3205401">ra</span>&nbsp;<span class="ident" id="3205404"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><span class="op" id="3205408">)</span>&nbsp;<span class="op" id="3205410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205415">c</span><span class="op" id="3205416">,</span>&nbsp;<span class="ident" id="3205418">err</span>&nbsp;<span class="op" id="3205422">:=</span>&nbsp;<span class="ident" id="3205425"><a href="/gostd/net/dial.go.html#3206067">dialSingle</a></span><span class="op" id="3205435">(</span><span class="ident" id="3205436"><a href="/gostd/net/dial.go.html#3205038">net</a></span><span class="op" id="3205439">,</span>&nbsp;<span class="ident" id="3205441"><a href="/gostd/net/dial.go.html#3205043">addr</a></span><span class="op" id="3205445">,</span>&nbsp;<span class="ident" id="3205447"><a href="/gostd/net/dial.go.html#3205056">la</a></span><span class="op" id="3205449">,</span>&nbsp;<span class="ident" id="3205451"><a href="/gostd/net/dial.go.html#3205401">ra</a></span><span class="op" id="3205453">,</span>&nbsp;<span class="ident" id="3205455"><a href="/gostd/net/dial.go.html#3205079">deadline</a></span><span class="op" id="3205463">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205468">if</span>&nbsp;<span class="ident" id="3205471">_</span><span class="op" id="3205472">,</span>&nbsp;<span class="ident" id="3205474">ok</span>&nbsp;<span class="op" id="3205477">:=</span>&nbsp;<span class="op" id="3205480">&lt;-</span><span class="ident" id="3205482"><a href="/gostd/net/dial.go.html#3205310">sig</a></span><span class="op" id="3205485">;</span>&nbsp;<span class="ident" id="3205487"><a href="/gostd/net/dial.go.html#3205474">ok</a></span>&nbsp;<span class="op" id="3205490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205496"><a href="/gostd/net/dial.go.html#3205337">lane</a></span>&nbsp;<span class="op" id="3205501">&lt;-</span>&nbsp;<span class="ident" id="3205504"><a href="/gostd/net/dial.go.html#3205121">racer</a></span><span class="op" id="3205509">{</span><span class="ident" id="3205510"><a href="/gostd/net/dial.go.html#3205415">c</a></span><span class="op" id="3205511">,</span>&nbsp;<span class="ident" id="3205513"><a href="/gostd/net/dial.go.html#3205418">err</a></span><span class="op" id="3205516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205521">}</span>&nbsp;<span class="keyword" id="3205523">else</span>&nbsp;<span class="keyword" id="3205528">if</span>&nbsp;<span class="ident" id="3205531"><a href="/gostd/net/dial.go.html#3205418">err</a></span>&nbsp;<span class="op" id="3205535">==</span>&nbsp;<span class="builtintype" id="3205538">nil</span>&nbsp;<span class="op" id="3205542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205548">//&nbsp;We&nbsp;have&nbsp;to&nbsp;return&nbsp;the&nbsp;resources</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205587">//&nbsp;that&nbsp;belong&nbsp;to&nbsp;the&nbsp;other</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205619">//&nbsp;connections&nbsp;here&nbsp;for&nbsp;avoiding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3205656">//&nbsp;unnecessary&nbsp;resource&nbsp;starvation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205696"><a href="/gostd/net/dial.go.html#3205415">c</a></span><span class="op" id="3205697">.</span><span class="ident" id="3205698"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="3205703">(</span><span class="op" id="3205704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205713">}</span><span class="op" id="3205714">(</span><span class="ident" id="3205715"><a href="/gostd/net/dial.go.html#3205373">ra</a></span><span class="op" id="3205717">.</span><span class="ident" id="3205718"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3205724">(</span><span class="op" id="3205725">)</span><span class="op" id="3205726">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205732">defer</span>&nbsp;<span class="builtinfunc" id="3205738">close</span><span class="op" id="3205743">(</span><span class="ident" id="3205744"><a href="/gostd/net/dial.go.html#3205310">sig</a></span><span class="op" id="3205747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205750">lastErr</span>&nbsp;<span class="op" id="3205758">:=</span>&nbsp;<span class="ident" id="3205761"><a href="/gostd/net/net.go.html#3341194">errTimeout</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205773">nracers</span>&nbsp;<span class="op" id="3205781">:=</span>&nbsp;<span class="builtinfunc" id="3205784">len</span><span class="op" id="3205787">(</span><span class="ident" id="3205788"><a href="/gostd/net/dial.go.html#3205065">ras</a></span><span class="op" id="3205791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205794">for</span>&nbsp;<span class="ident" id="3205798"><a href="/gostd/net/dial.go.html#3205773">nracers</a></span>&nbsp;<span class="op" id="3205806">&gt;</span>&nbsp;<span class="num" id="3205808">0</span>&nbsp;<span class="op" id="3205810">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205814"><a href="/gostd/net/dial.go.html#3205310">sig</a></span>&nbsp;<span class="op" id="3205818">&lt;-</span>&nbsp;<span class="builtintype" id="3205821">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205828">racer</span>&nbsp;<span class="op" id="3205834">:=</span>&nbsp;<span class="op" id="3205837">&lt;-</span><span class="ident" id="3205839"><a href="/gostd/net/dial.go.html#3205337">lane</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205846">if</span>&nbsp;<span class="ident" id="3205849"><a href="/gostd/net/dial.go.html#3205828">racer</a></span><span class="op" id="3205854">.</span><span class="builtintype" id="3205855"><a href="/gostd/net/dial.go.html#3205145">error</a></span>&nbsp;<span class="op" id="3205861">==</span>&nbsp;<span class="builtintype" id="3205864">nil</span>&nbsp;<span class="op" id="3205868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205873">return</span>&nbsp;<span class="ident" id="3205880"><a href="/gostd/net/dial.go.html#3205828">racer</a></span><span class="op" id="3205885">.</span><span class="ident" id="3205886"><a href="/gostd/net/dial.go.html#3205138">Conn</a></span><span class="op" id="3205890">,</span>&nbsp;<span class="builtintype" id="3205892">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205898">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205902"><a href="/gostd/net/dial.go.html#3205750">lastErr</a></span>&nbsp;<span class="op" id="3205910">=</span>&nbsp;<span class="ident" id="3205912"><a href="/gostd/net/dial.go.html#3205828">racer</a></span><span class="op" id="3205917">.</span><span class="builtintype" id="3205918"><a href="/gostd/net/dial.go.html#3205145">error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3205926"><a href="/gostd/net/dial.go.html#3205773">nracers</a></span><span class="op" id="3205933">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3205937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3205940">return</span>&nbsp;<span class="builtintype" id="3205947">nil</span><span class="op" id="3205950">,</span>&nbsp;<span class="ident" id="3205952"><a href="/gostd/net/dial.go.html#3205750">lastErr</a></span><br>
<span class="lineno"></span><span class="op" id="3205960">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3205963">//&nbsp;dialSingle&nbsp;attempts&nbsp;to&nbsp;establish&nbsp;and&nbsp;returns&nbsp;a&nbsp;single&nbsp;connection&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3206034">//&nbsp;the&nbsp;destination&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3206062">func</span>&nbsp;<span class="ident" id="3206067">dialSingle</span><span class="op" id="3206077">(</span><span class="ident" id="3206078">net</span><span class="op" id="3206081">,</span>&nbsp;<span class="ident" id="3206083">addr</span>&nbsp;<span class="builtintype" id="3206088">string</span><span class="op" id="3206094">,</span>&nbsp;<span class="ident" id="3206096">la</span><span class="op" id="3206098">,</span>&nbsp;<span class="ident" id="3206100">ra</span>&nbsp;<span class="ident" id="3206103"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><span class="op" id="3206107">,</span>&nbsp;<span class="ident" id="3206109">deadline</span>&nbsp;<span class="ident" id="3206118"><a href="/gostd/net/dial.go.html#3199497">time</a></span><span class="op" id="3206122">.</span><span class="ident" id="3206123"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3206127">)</span>&nbsp;<span class="op" id="3206129">(</span><span class="ident" id="3206130">c</span>&nbsp;<span class="ident" id="3206132"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3206136">,</span>&nbsp;<span class="ident" id="3206138">err</span>&nbsp;<span class="builtintype" id="3206142">error</span><span class="op" id="3206147">)</span>&nbsp;<span class="op" id="3206149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206152">if</span>&nbsp;<span class="ident" id="3206155"><a href="/gostd/net/dial.go.html#3206096">la</a></span>&nbsp;<span class="op" id="3206158">!=</span>&nbsp;<span class="builtintype" id="3206161">nil</span>&nbsp;<span class="op" id="3206165">&amp;&amp;</span>&nbsp;<span class="ident" id="3206168"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206170">.</span><span class="ident" id="3206171"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="3206178">(</span><span class="op" id="3206179">)</span>&nbsp;<span class="op" id="3206181">!=</span>&nbsp;<span class="ident" id="3206184"><a href="/gostd/net/dial.go.html#3206100">ra</a></span><span class="op" id="3206186">.</span><span class="ident" id="3206187"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="3206194">(</span><span class="op" id="3206195">)</span>&nbsp;<span class="op" id="3206197">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206201">return</span>&nbsp;<span class="builtintype" id="3206208">nil</span><span class="op" id="3206211">,</span>&nbsp;<span class="op" id="3206213">&amp;</span><span class="ident" id="3206214"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3206221">{</span><span class="ident" id="3206222"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3206224">:</span>&nbsp;<span class="string" id="3206226">&#34;dial&#34;</span><span class="op" id="3206232">,</span>&nbsp;<span class="ident" id="3206234"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3206237">:</span>&nbsp;<span class="ident" id="3206239"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206242">,</span>&nbsp;<span class="ident" id="3206244"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3206248">:</span>&nbsp;<span class="ident" id="3206250"><a href="/gostd/net/dial.go.html#3206100">ra</a></span><span class="op" id="3206252">,</span>&nbsp;<span class="ident" id="3206254"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3206257">:</span>&nbsp;<span class="ident" id="3206259"><a href="/gostd/net/dial.go.html#3199487">errors</a></span><span class="op" id="3206265">.</span><span class="ident" id="3206266"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3206269">(</span><span class="string" id="3206270">&#34;mismatched&nbsp;local&nbsp;address&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3206303">+</span>&nbsp;<span class="ident" id="3206305"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206307">.</span><span class="ident" id="3206308"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="3206315">(</span><span class="op" id="3206316">)</span><span class="op" id="3206317">)</span><span class="op" id="3206318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3206321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206324">switch</span>&nbsp;<span class="ident" id="3206331">ra</span>&nbsp;<span class="op" id="3206334">:=</span>&nbsp;<span class="ident" id="3206337"><a href="/gostd/net/dial.go.html#3206100">ra</a></span><span class="op" id="3206339">.</span><span class="op" id="3206340">(</span><span class="keyword" id="3206341">type</span><span class="op" id="3206345">)</span>&nbsp;<span class="op" id="3206347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206350">case</span>&nbsp;<span class="op" id="3206355">*</span><span class="ident" id="3206356"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3206363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206367">la</span><span class="op" id="3206369">,</span>&nbsp;<span class="ident" id="3206371">_</span>&nbsp;<span class="op" id="3206373">:=</span>&nbsp;<span class="ident" id="3206376"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206378">.</span><span class="op" id="3206379">(</span><span class="op" id="3206380">*</span><span class="ident" id="3206381"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3206388">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206392"><a href="/gostd/net/dial.go.html#3206130">c</a></span><span class="op" id="3206393">,</span>&nbsp;<span class="ident" id="3206395"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="op" id="3206399">=</span>&nbsp;<span class="ident" id="3206401"><a href="/gostd/net/tcpsock_posix.go.html#3378837">dialTCP</a></span><span class="op" id="3206408">(</span><span class="ident" id="3206409"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206412">,</span>&nbsp;<span class="ident" id="3206414"><a href="/gostd/net/dial.go.html#3206367">la</a></span><span class="op" id="3206416">,</span>&nbsp;<span class="ident" id="3206418"><a href="/gostd/net/dial.go.html#3206331">ra</a></span><span class="op" id="3206420">,</span>&nbsp;<span class="ident" id="3206422"><a href="/gostd/net/dial.go.html#3206109">deadline</a></span><span class="op" id="3206430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206433">case</span>&nbsp;<span class="op" id="3206438">*</span><span class="ident" id="3206439"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3206446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206450">la</span><span class="op" id="3206452">,</span>&nbsp;<span class="ident" id="3206454">_</span>&nbsp;<span class="op" id="3206456">:=</span>&nbsp;<span class="ident" id="3206459"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206461">.</span><span class="op" id="3206462">(</span><span class="op" id="3206463">*</span><span class="ident" id="3206464"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3206471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206475"><a href="/gostd/net/dial.go.html#3206130">c</a></span><span class="op" id="3206476">,</span>&nbsp;<span class="ident" id="3206478"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="op" id="3206482">=</span>&nbsp;<span class="ident" id="3206484"><a href="/gostd/net/udpsock_posix.go.html#3392225">dialUDP</a></span><span class="op" id="3206491">(</span><span class="ident" id="3206492"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206495">,</span>&nbsp;<span class="ident" id="3206497"><a href="/gostd/net/dial.go.html#3206450">la</a></span><span class="op" id="3206499">,</span>&nbsp;<span class="ident" id="3206501"><a href="/gostd/net/dial.go.html#3206331">ra</a></span><span class="op" id="3206503">,</span>&nbsp;<span class="ident" id="3206505"><a href="/gostd/net/dial.go.html#3206109">deadline</a></span><span class="op" id="3206513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206516">case</span>&nbsp;<span class="op" id="3206521">*</span><span class="ident" id="3206522"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3206528">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206532">la</span><span class="op" id="3206534">,</span>&nbsp;<span class="ident" id="3206536">_</span>&nbsp;<span class="op" id="3206538">:=</span>&nbsp;<span class="ident" id="3206541"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206543">.</span><span class="op" id="3206544">(</span><span class="op" id="3206545">*</span><span class="ident" id="3206546"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3206552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206556"><a href="/gostd/net/dial.go.html#3206130">c</a></span><span class="op" id="3206557">,</span>&nbsp;<span class="ident" id="3206559"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="op" id="3206563">=</span>&nbsp;<span class="ident" id="3206565"><a href="/gostd/net/iprawsock_posix.go.html#3307781">dialIP</a></span><span class="op" id="3206571">(</span><span class="ident" id="3206572"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206575">,</span>&nbsp;<span class="ident" id="3206577"><a href="/gostd/net/dial.go.html#3206532">la</a></span><span class="op" id="3206579">,</span>&nbsp;<span class="ident" id="3206581"><a href="/gostd/net/dial.go.html#3206331">ra</a></span><span class="op" id="3206583">,</span>&nbsp;<span class="ident" id="3206585"><a href="/gostd/net/dial.go.html#3206109">deadline</a></span><span class="op" id="3206593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206596">case</span>&nbsp;<span class="op" id="3206601">*</span><span class="ident" id="3206602"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3206610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206614">la</span><span class="op" id="3206616">,</span>&nbsp;<span class="ident" id="3206618">_</span>&nbsp;<span class="op" id="3206620">:=</span>&nbsp;<span class="ident" id="3206623"><a href="/gostd/net/dial.go.html#3206096">la</a></span><span class="op" id="3206625">.</span><span class="op" id="3206626">(</span><span class="op" id="3206627">*</span><span class="ident" id="3206628"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3206636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3206640"><a href="/gostd/net/dial.go.html#3206130">c</a></span><span class="op" id="3206641">,</span>&nbsp;<span class="ident" id="3206643"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="op" id="3206647">=</span>&nbsp;<span class="ident" id="3206649"><a href="/gostd/net/unixsock_posix.go.html#3402787">dialUnix</a></span><span class="op" id="3206657">(</span><span class="ident" id="3206658"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206661">,</span>&nbsp;<span class="ident" id="3206663"><a href="/gostd/net/dial.go.html#3206614">la</a></span><span class="op" id="3206665">,</span>&nbsp;<span class="ident" id="3206667"><a href="/gostd/net/dial.go.html#3206331">ra</a></span><span class="op" id="3206669">,</span>&nbsp;<span class="ident" id="3206671"><a href="/gostd/net/dial.go.html#3206109">deadline</a></span><span class="op" id="3206679">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206682">default</span><span class="op" id="3206689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206693">return</span>&nbsp;<span class="builtintype" id="3206700">nil</span><span class="op" id="3206703">,</span>&nbsp;<span class="op" id="3206705">&amp;</span><span class="ident" id="3206706"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3206713">{</span><span class="ident" id="3206714"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3206716">:</span>&nbsp;<span class="string" id="3206718">&#34;dial&#34;</span><span class="op" id="3206724">,</span>&nbsp;<span class="ident" id="3206726"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3206729">:</span>&nbsp;<span class="ident" id="3206731"><a href="/gostd/net/dial.go.html#3206078">net</a></span><span class="op" id="3206734">,</span>&nbsp;<span class="ident" id="3206736"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3206740">:</span>&nbsp;<span class="ident" id="3206742"><a href="/gostd/net/dial.go.html#3206331">ra</a></span><span class="op" id="3206744">,</span>&nbsp;<span class="ident" id="3206746"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3206749">:</span>&nbsp;<span class="op" id="3206751">&amp;</span><span class="ident" id="3206752"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3206761">{</span><span class="ident" id="3206762"><a href="/gostd/net/net.go.html#3342667">Err</a></span><span class="op" id="3206765">:</span>&nbsp;<span class="string" id="3206767">&#34;unexpected&nbsp;address&nbsp;type&#34;</span><span class="op" id="3206792">,</span>&nbsp;<span class="ident" id="3206794"><a href="/gostd/net/net.go.html#3342680">Addr</a></span><span class="op" id="3206798">:</span>&nbsp;<span class="ident" id="3206800"><a href="/gostd/net/dial.go.html#3206083">addr</a></span><span class="op" id="3206804">}</span><span class="op" id="3206805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3206808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206811">if</span>&nbsp;<span class="ident" id="3206814"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="op" id="3206818">!=</span>&nbsp;<span class="builtintype" id="3206821">nil</span>&nbsp;<span class="op" id="3206825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206829">return</span>&nbsp;<span class="builtintype" id="3206836">nil</span><span class="op" id="3206839">,</span>&nbsp;<span class="ident" id="3206841"><a href="/gostd/net/dial.go.html#3206138">err</a></span>&nbsp;<span class="comment" id="3206845">//&nbsp;c&nbsp;is&nbsp;non-nil&nbsp;interface&nbsp;containing&nbsp;nil&nbsp;pointer</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3206895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3206898">return</span>&nbsp;<span class="ident" id="3206905"><a href="/gostd/net/dial.go.html#3206130">c</a></span><span class="op" id="3206906">,</span>&nbsp;<span class="builtintype" id="3206908">nil</span><br>
<span class="lineno"></span><span class="op" id="3206912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3206915">//&nbsp;Listen&nbsp;announces&nbsp;on&nbsp;the&nbsp;local&nbsp;network&nbsp;address&nbsp;laddr.</span><br>
<span class="lineno">255</span><span class="comment" id="3206971">//&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;a&nbsp;stream-oriented&nbsp;network:&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="3207040">//&nbsp;&#34;tcp6&#34;,&nbsp;&#34;unix&#34;&nbsp;or&nbsp;&#34;unixpacket&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3207075">//&nbsp;See&nbsp;Dial&nbsp;for&nbsp;the&nbsp;syntax&nbsp;of&nbsp;laddr.</span><br>
<span class="lineno"></span><span class="keyword" id="3207112">func</span>&nbsp;<span class="ident" id="3207117">Listen</span><span class="op" id="3207123">(</span><span class="ident" id="3207124">net</span><span class="op" id="3207127">,</span>&nbsp;<span class="ident" id="3207129">laddr</span>&nbsp;<span class="builtintype" id="3207135">string</span><span class="op" id="3207141">)</span>&nbsp;<span class="op" id="3207143">(</span><span class="ident" id="3207144"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="3207152">,</span>&nbsp;<span class="builtintype" id="3207154">error</span><span class="op" id="3207159">)</span>&nbsp;<span class="op" id="3207161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3207164">la</span><span class="op" id="3207166">,</span>&nbsp;<span class="ident" id="3207168">err</span>&nbsp;<span class="op" id="3207172">:=</span>&nbsp;<span class="ident" id="3207175"><a href="/gostd/net/dial.go.html#3202094">resolveAddr</a></span><span class="op" id="3207186">(</span><span class="string" id="3207187">&#34;listen&#34;</span><span class="op" id="3207195">,</span>&nbsp;<span class="ident" id="3207197"><a href="/gostd/net/dial.go.html#3207124">net</a></span><span class="op" id="3207200">,</span>&nbsp;<span class="ident" id="3207202"><a href="/gostd/net/dial.go.html#3207129">laddr</a></span><span class="op" id="3207207">,</span>&nbsp;<span class="ident" id="3207209"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="3207219">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207222">if</span>&nbsp;<span class="ident" id="3207225"><a href="/gostd/net/dial.go.html#3207168">err</a></span>&nbsp;<span class="op" id="3207229">!=</span>&nbsp;<span class="builtintype" id="3207232">nil</span>&nbsp;<span class="op" id="3207236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207240">return</span>&nbsp;<span class="builtintype" id="3207247">nil</span><span class="op" id="3207250">,</span>&nbsp;<span class="op" id="3207252">&amp;</span><span class="ident" id="3207253"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3207260">{</span><span class="ident" id="3207261"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3207263">:</span>&nbsp;<span class="string" id="3207265">&#34;listen&#34;</span><span class="op" id="3207273">,</span>&nbsp;<span class="ident" id="3207275"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3207278">:</span>&nbsp;<span class="ident" id="3207280"><a href="/gostd/net/dial.go.html#3207124">net</a></span><span class="op" id="3207283">,</span>&nbsp;<span class="ident" id="3207285"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3207289">:</span>&nbsp;<span class="builtintype" id="3207291">nil</span><span class="op" id="3207294">,</span>&nbsp;<span class="ident" id="3207296"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3207299">:</span>&nbsp;<span class="ident" id="3207301"><a href="/gostd/net/dial.go.html#3207168">err</a></span><span class="op" id="3207304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3207307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207310">var</span>&nbsp;<span class="ident" id="3207314">l</span>&nbsp;<span class="ident" id="3207316"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207326">switch</span>&nbsp;<span class="ident" id="3207333">la</span>&nbsp;<span class="op" id="3207336">:=</span>&nbsp;<span class="ident" id="3207339"><a href="/gostd/net/dial.go.html#3207164">la</a></span><span class="op" id="3207341">.</span><span class="ident" id="3207342"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3207348">(</span><span class="op" id="3207349">)</span><span class="op" id="3207350">.</span><span class="op" id="3207351">(</span><span class="keyword" id="3207352">type</span><span class="op" id="3207356">)</span>&nbsp;<span class="op" id="3207358">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207361">case</span>&nbsp;<span class="op" id="3207366">*</span><span class="ident" id="3207367"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3207374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3207378"><a href="/gostd/net/dial.go.html#3207314">l</a></span><span class="op" id="3207379">,</span>&nbsp;<span class="ident" id="3207381"><a href="/gostd/net/dial.go.html#3207168">err</a></span>&nbsp;<span class="op" id="3207385">=</span>&nbsp;<span class="ident" id="3207387"><a href="/gostd/net/tcpsock_posix.go.html#3383816">ListenTCP</a></span><span class="op" id="3207396">(</span><span class="ident" id="3207397"><a href="/gostd/net/dial.go.html#3207124">net</a></span><span class="op" id="3207400">,</span>&nbsp;<span class="ident" id="3207402"><a href="/gostd/net/dial.go.html#3207333">la</a></span><span class="op" id="3207404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207407">case</span>&nbsp;<span class="op" id="3207412">*</span><span class="ident" id="3207413"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3207421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3207425"><a href="/gostd/net/dial.go.html#3207314">l</a></span><span class="op" id="3207426">,</span>&nbsp;<span class="ident" id="3207428"><a href="/gostd/net/dial.go.html#3207168">err</a></span>&nbsp;<span class="op" id="3207432">=</span>&nbsp;<span class="ident" id="3207434"><a href="/gostd/net/unixsock_posix.go.html#3403405">ListenUnix</a></span><span class="op" id="3207444">(</span><span class="ident" id="3207445"><a href="/gostd/net/dial.go.html#3207124">net</a></span><span class="op" id="3207448">,</span>&nbsp;<span class="ident" id="3207450"><a href="/gostd/net/dial.go.html#3207333">la</a></span><span class="op" id="3207452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207455">default</span><span class="op" id="3207462">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207466">return</span>&nbsp;<span class="builtintype" id="3207473">nil</span><span class="op" id="3207476">,</span>&nbsp;<span class="op" id="3207478">&amp;</span><span class="ident" id="3207479"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3207486">{</span><span class="ident" id="3207487"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3207489">:</span>&nbsp;<span class="string" id="3207491">&#34;listen&#34;</span><span class="op" id="3207499">,</span>&nbsp;<span class="ident" id="3207501"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3207504">:</span>&nbsp;<span class="ident" id="3207506"><a href="/gostd/net/dial.go.html#3207124">net</a></span><span class="op" id="3207509">,</span>&nbsp;<span class="ident" id="3207511"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3207515">:</span>&nbsp;<span class="ident" id="3207517"><a href="/gostd/net/dial.go.html#3207333">la</a></span><span class="op" id="3207519">,</span>&nbsp;<span class="ident" id="3207521"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3207524">:</span>&nbsp;<span class="op" id="3207526">&amp;</span><span class="ident" id="3207527"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3207536">{</span><span class="ident" id="3207537"><a href="/gostd/net/net.go.html#3342667">Err</a></span><span class="op" id="3207540">:</span>&nbsp;<span class="string" id="3207542">&#34;unexpected&nbsp;address&nbsp;type&#34;</span><span class="op" id="3207567">,</span>&nbsp;<span class="ident" id="3207569"><a href="/gostd/net/net.go.html#3342680">Addr</a></span><span class="op" id="3207573">:</span>&nbsp;<span class="ident" id="3207575"><a href="/gostd/net/dial.go.html#3207129">laddr</a></span><span class="op" id="3207580">}</span><span class="op" id="3207581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3207584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207587">if</span>&nbsp;<span class="ident" id="3207590"><a href="/gostd/net/dial.go.html#3207168">err</a></span>&nbsp;<span class="op" id="3207594">!=</span>&nbsp;<span class="builtintype" id="3207597">nil</span>&nbsp;<span class="op" id="3207601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207605">return</span>&nbsp;<span class="builtintype" id="3207612">nil</span><span class="op" id="3207615">,</span>&nbsp;<span class="ident" id="3207617"><a href="/gostd/net/dial.go.html#3207168">err</a></span>&nbsp;<span class="comment" id="3207621">//&nbsp;l&nbsp;is&nbsp;non-nil&nbsp;interface&nbsp;containing&nbsp;nil&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3207671">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3207674">return</span>&nbsp;<span class="ident" id="3207681"><a href="/gostd/net/dial.go.html#3207314">l</a></span><span class="op" id="3207682">,</span>&nbsp;<span class="builtintype" id="3207684">nil</span><br>
<span class="lineno"></span><span class="op" id="3207688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3207691">//&nbsp;ListenPacket&nbsp;announces&nbsp;on&nbsp;the&nbsp;local&nbsp;network&nbsp;address&nbsp;laddr.</span><br>
<span class="lineno"></span><span class="comment" id="3207753">//&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;a&nbsp;packet-oriented&nbsp;network:&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;,</span><br>
<span class="lineno">280</span><span class="comment" id="3207822">//&nbsp;&#34;udp6&#34;,&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;,&nbsp;&#34;ip6&#34;&nbsp;or&nbsp;&#34;unixgram&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3207867">//&nbsp;See&nbsp;Dial&nbsp;for&nbsp;the&nbsp;syntax&nbsp;of&nbsp;laddr.</span><br>
<span class="lineno"></span><span class="keyword" id="3207904">func</span>&nbsp;<span class="ident" id="3207909">ListenPacket</span><span class="op" id="3207921">(</span><span class="ident" id="3207922">net</span><span class="op" id="3207925">,</span>&nbsp;<span class="ident" id="3207927">laddr</span>&nbsp;<span class="builtintype" id="3207933">string</span><span class="op" id="3207939">)</span>&nbsp;<span class="op" id="3207941">(</span><span class="ident" id="3207942"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><span class="op" id="3207952">,</span>&nbsp;<span class="builtintype" id="3207954">error</span><span class="op" id="3207959">)</span>&nbsp;<span class="op" id="3207961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3207964">la</span><span class="op" id="3207966">,</span>&nbsp;<span class="ident" id="3207968">err</span>&nbsp;<span class="op" id="3207972">:=</span>&nbsp;<span class="ident" id="3207975"><a href="/gostd/net/dial.go.html#3202094">resolveAddr</a></span><span class="op" id="3207986">(</span><span class="string" id="3207987">&#34;listen&#34;</span><span class="op" id="3207995">,</span>&nbsp;<span class="ident" id="3207997"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208000">,</span>&nbsp;<span class="ident" id="3208002"><a href="/gostd/net/dial.go.html#3207927">laddr</a></span><span class="op" id="3208007">,</span>&nbsp;<span class="ident" id="3208009"><a href="/gostd/net/net.go.html#3342276">noDeadline</a></span><span class="op" id="3208019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208022">if</span>&nbsp;<span class="ident" id="3208025"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="op" id="3208029">!=</span>&nbsp;<span class="builtintype" id="3208032">nil</span>&nbsp;<span class="op" id="3208036">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208040">return</span>&nbsp;<span class="builtintype" id="3208047">nil</span><span class="op" id="3208050">,</span>&nbsp;<span class="op" id="3208052">&amp;</span><span class="ident" id="3208053"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3208060">{</span><span class="ident" id="3208061"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3208063">:</span>&nbsp;<span class="string" id="3208065">&#34;listen&#34;</span><span class="op" id="3208073">,</span>&nbsp;<span class="ident" id="3208075"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3208078">:</span>&nbsp;<span class="ident" id="3208080"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208083">,</span>&nbsp;<span class="ident" id="3208085"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3208089">:</span>&nbsp;<span class="builtintype" id="3208091">nil</span><span class="op" id="3208094">,</span>&nbsp;<span class="ident" id="3208096"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3208099">:</span>&nbsp;<span class="ident" id="3208101"><a href="/gostd/net/dial.go.html#3207968">err</a></span><span class="op" id="3208104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3208107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208110">var</span>&nbsp;<span class="ident" id="3208114">l</span>&nbsp;<span class="ident" id="3208116"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208128">switch</span>&nbsp;<span class="ident" id="3208135">la</span>&nbsp;<span class="op" id="3208138">:=</span>&nbsp;<span class="ident" id="3208141"><a href="/gostd/net/dial.go.html#3207964">la</a></span><span class="op" id="3208143">.</span><span class="ident" id="3208144"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3208150">(</span><span class="op" id="3208151">)</span><span class="op" id="3208152">.</span><span class="op" id="3208153">(</span><span class="keyword" id="3208154">type</span><span class="op" id="3208158">)</span>&nbsp;<span class="op" id="3208160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208163">case</span>&nbsp;<span class="op" id="3208168">*</span><span class="ident" id="3208169"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3208176">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3208180"><a href="/gostd/net/dial.go.html#3208114">l</a></span><span class="op" id="3208181">,</span>&nbsp;<span class="ident" id="3208183"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="op" id="3208187">=</span>&nbsp;<span class="ident" id="3208189"><a href="/gostd/net/udpsock_posix.go.html#3392935">ListenUDP</a></span><span class="op" id="3208198">(</span><span class="ident" id="3208199"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208202">,</span>&nbsp;<span class="ident" id="3208204"><a href="/gostd/net/dial.go.html#3208135">la</a></span><span class="op" id="3208206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208209">case</span>&nbsp;<span class="op" id="3208214">*</span><span class="ident" id="3208215"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3208221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3208225"><a href="/gostd/net/dial.go.html#3208114">l</a></span><span class="op" id="3208226">,</span>&nbsp;<span class="ident" id="3208228"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="op" id="3208232">=</span>&nbsp;<span class="ident" id="3208234"><a href="/gostd/net/iprawsock_posix.go.html#3308696">ListenIP</a></span><span class="op" id="3208242">(</span><span class="ident" id="3208243"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208246">,</span>&nbsp;<span class="ident" id="3208248"><a href="/gostd/net/dial.go.html#3208135">la</a></span><span class="op" id="3208250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208253">case</span>&nbsp;<span class="op" id="3208258">*</span><span class="ident" id="3208259"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3208267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3208271"><a href="/gostd/net/dial.go.html#3208114">l</a></span><span class="op" id="3208272">,</span>&nbsp;<span class="ident" id="3208274"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="op" id="3208278">=</span>&nbsp;<span class="ident" id="3208280"><a href="/gostd/net/unixsock_posix.go.html#3406290">ListenUnixgram</a></span><span class="op" id="3208294">(</span><span class="ident" id="3208295"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208298">,</span>&nbsp;<span class="ident" id="3208300"><a href="/gostd/net/dial.go.html#3208135">la</a></span><span class="op" id="3208302">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208305">default</span><span class="op" id="3208312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208316">return</span>&nbsp;<span class="builtintype" id="3208323">nil</span><span class="op" id="3208326">,</span>&nbsp;<span class="op" id="3208328">&amp;</span><span class="ident" id="3208329"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="3208336">{</span><span class="ident" id="3208337"><a href="/gostd/net/net.go.html#3341659">Op</a></span><span class="op" id="3208339">:</span>&nbsp;<span class="string" id="3208341">&#34;listen&#34;</span><span class="op" id="3208349">,</span>&nbsp;<span class="ident" id="3208351"><a href="/gostd/net/net.go.html#3341758">Net</a></span><span class="op" id="3208354">:</span>&nbsp;<span class="ident" id="3208356"><a href="/gostd/net/dial.go.html#3207922">net</a></span><span class="op" id="3208359">,</span>&nbsp;<span class="ident" id="3208361"><a href="/gostd/net/net.go.html#3341833">Addr</a></span><span class="op" id="3208365">:</span>&nbsp;<span class="ident" id="3208367"><a href="/gostd/net/dial.go.html#3208135">la</a></span><span class="op" id="3208369">,</span>&nbsp;<span class="ident" id="3208371"><a href="/gostd/net/net.go.html#3341902">Err</a></span><span class="op" id="3208374">:</span>&nbsp;<span class="op" id="3208376">&amp;</span><span class="ident" id="3208377"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3208386">{</span><span class="ident" id="3208387"><a href="/gostd/net/net.go.html#3342667">Err</a></span><span class="op" id="3208390">:</span>&nbsp;<span class="string" id="3208392">&#34;unexpected&nbsp;address&nbsp;type&#34;</span><span class="op" id="3208417">,</span>&nbsp;<span class="ident" id="3208419"><a href="/gostd/net/net.go.html#3342680">Addr</a></span><span class="op" id="3208423">:</span>&nbsp;<span class="ident" id="3208425"><a href="/gostd/net/dial.go.html#3207927">laddr</a></span><span class="op" id="3208430">}</span><span class="op" id="3208431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3208434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208437">if</span>&nbsp;<span class="ident" id="3208440"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="op" id="3208444">!=</span>&nbsp;<span class="builtintype" id="3208447">nil</span>&nbsp;<span class="op" id="3208451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208455">return</span>&nbsp;<span class="builtintype" id="3208462">nil</span><span class="op" id="3208465">,</span>&nbsp;<span class="ident" id="3208467"><a href="/gostd/net/dial.go.html#3207968">err</a></span>&nbsp;<span class="comment" id="3208471">//&nbsp;l&nbsp;is&nbsp;non-nil&nbsp;interface&nbsp;containing&nbsp;nil&nbsp;pointer</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3208521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3208524">return</span>&nbsp;<span class="ident" id="3208531"><a href="/gostd/net/dial.go.html#3208114">l</a></span><span class="op" id="3208532">,</span>&nbsp;<span class="builtintype" id="3208534">nil</span><br>
<span class="lineno"></span><span class="op" id="3208538">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
