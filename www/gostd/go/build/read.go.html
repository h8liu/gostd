<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6269887">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6269943">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6269997">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6270048">package</span>&nbsp;<span class="ident" id="6270056">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6270063">import</span>&nbsp;<span class="op" id="6270070">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6270073">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6270082">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6270092">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6270097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6270100">type</span>&nbsp;<span class="ident" id="6270105">importReader</span>&nbsp;<span class="keyword" id="6270118">struct</span>&nbsp;<span class="op" id="6270125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270128">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6270133">*</span><span class="ident" id="6270134">bufio</span><span class="op" id="6270139">.</span><span class="ident" id="6270140">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270148">buf</span>&nbsp;&nbsp;<span class="op" id="6270153">[</span><span class="op" id="6270154">]</span><span class="builtintype" id="6270155">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270161">peek</span>&nbsp;<span class="builtintype" id="6270166">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270172">err</span>&nbsp;&nbsp;<span class="builtintype" id="6270177">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270184">eof</span>&nbsp;&nbsp;<span class="builtintype" id="6270189">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270195">nerr</span>&nbsp;<span class="builtintype" id="6270200">int</span><br>
<span class="lineno">20</span><span class="op" id="6270204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6270207">func</span>&nbsp;<span class="ident" id="6270212">isIdent</span><span class="op" id="6270219">(</span><span class="ident" id="6270220">c</span>&nbsp;<span class="builtintype" id="6270222">byte</span><span class="op" id="6270226">)</span>&nbsp;<span class="builtintype" id="6270228">bool</span>&nbsp;<span class="op" id="6270233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270236">return</span>&nbsp;<span class="string" id="6270243">&#39;A&#39;</span>&nbsp;<span class="op" id="6270247">&lt;=</span>&nbsp;<span class="ident" id="6270250">c</span>&nbsp;<span class="op" id="6270252">&amp;&amp;</span>&nbsp;<span class="ident" id="6270255">c</span>&nbsp;<span class="op" id="6270257">&lt;=</span>&nbsp;<span class="string" id="6270260">&#39;Z&#39;</span>&nbsp;<span class="op" id="6270264">||</span>&nbsp;<span class="string" id="6270267">&#39;a&#39;</span>&nbsp;<span class="op" id="6270271">&lt;=</span>&nbsp;<span class="ident" id="6270274">c</span>&nbsp;<span class="op" id="6270276">&amp;&amp;</span>&nbsp;<span class="ident" id="6270279">c</span>&nbsp;<span class="op" id="6270281">&lt;=</span>&nbsp;<span class="string" id="6270284">&#39;z&#39;</span>&nbsp;<span class="op" id="6270288">||</span>&nbsp;<span class="string" id="6270291">&#39;0&#39;</span>&nbsp;<span class="op" id="6270295">&lt;=</span>&nbsp;<span class="ident" id="6270298">c</span>&nbsp;<span class="op" id="6270300">&amp;&amp;</span>&nbsp;<span class="ident" id="6270303">c</span>&nbsp;<span class="op" id="6270305">&lt;=</span>&nbsp;<span class="string" id="6270308">&#39;9&#39;</span>&nbsp;<span class="op" id="6270312">||</span>&nbsp;<span class="ident" id="6270315">c</span>&nbsp;<span class="op" id="6270317">==</span>&nbsp;<span class="string" id="6270320">&#39;_&#39;</span>&nbsp;<span class="op" id="6270324">||</span>&nbsp;<span class="ident" id="6270327">c</span>&nbsp;<span class="op" id="6270329">&gt;=</span>&nbsp;<span class="num" id="6270332">0x80</span><br>
<span class="lineno"></span><span class="op" id="6270337">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6270340">var</span>&nbsp;<span class="op" id="6270344">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270347">errSyntax</span>&nbsp;<span class="op" id="6270357">=</span>&nbsp;<span class="ident" id="6270359">errors</span><span class="op" id="6270365">.</span><span class="ident" id="6270366">New</span><span class="op" id="6270369">(</span><span class="string" id="6270370">&#34;syntax&nbsp;error&#34;</span><span class="op" id="6270384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270387">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6270397">=</span>&nbsp;<span class="ident" id="6270399">errors</span><span class="op" id="6270405">.</span><span class="ident" id="6270406">New</span><span class="op" id="6270409">(</span><span class="string" id="6270410">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="6270435">)</span><br>
<span class="lineno"></span><span class="op" id="6270437">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="6270440">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="6270535">func</span>&nbsp;<span class="op" id="6270540">(</span><span class="ident" id="6270541">r</span>&nbsp;<span class="op" id="6270543">*</span><span class="ident" id="6270544">importReader</span><span class="op" id="6270556">)</span>&nbsp;<span class="ident" id="6270558">syntaxError</span><span class="op" id="6270569">(</span><span class="op" id="6270570">)</span>&nbsp;<span class="op" id="6270572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270575">if</span>&nbsp;<span class="ident" id="6270578">r</span><span class="op" id="6270579">.</span><span class="ident" id="6270580">err</span>&nbsp;<span class="op" id="6270584">==</span>&nbsp;<span class="ident" id="6270587">nil</span>&nbsp;<span class="op" id="6270591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270595">r</span><span class="op" id="6270596">.</span><span class="ident" id="6270597">err</span>&nbsp;<span class="op" id="6270601">=</span>&nbsp;<span class="ident" id="6270603">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270614">}</span><br>
<span class="lineno"></span><span class="op" id="6270616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6270619">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6270700">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="6270774">func</span>&nbsp;<span class="op" id="6270779">(</span><span class="ident" id="6270780">r</span>&nbsp;<span class="op" id="6270782">*</span><span class="ident" id="6270783">importReader</span><span class="op" id="6270795">)</span>&nbsp;<span class="ident" id="6270797">readByte</span><span class="op" id="6270805">(</span><span class="op" id="6270806">)</span>&nbsp;<span class="builtintype" id="6270808">byte</span>&nbsp;<span class="op" id="6270813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270816">c</span><span class="op" id="6270817">,</span>&nbsp;<span class="ident" id="6270819">err</span>&nbsp;<span class="op" id="6270823">:=</span>&nbsp;<span class="ident" id="6270826">r</span><span class="op" id="6270827">.</span><span class="ident" id="6270828">b</span><span class="op" id="6270829">.</span><span class="ident" id="6270830">ReadByte</span><span class="op" id="6270838">(</span><span class="op" id="6270839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270842">if</span>&nbsp;<span class="ident" id="6270845">err</span>&nbsp;<span class="op" id="6270849">==</span>&nbsp;<span class="ident" id="6270852">nil</span>&nbsp;<span class="op" id="6270856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270860">r</span><span class="op" id="6270861">.</span><span class="ident" id="6270862">buf</span>&nbsp;<span class="op" id="6270866">=</span>&nbsp;<span class="builtinfunc" id="6270868">append</span><span class="op" id="6270874">(</span><span class="ident" id="6270875">r</span><span class="op" id="6270876">.</span><span class="ident" id="6270877">buf</span><span class="op" id="6270880">,</span>&nbsp;<span class="ident" id="6270882">c</span><span class="op" id="6270883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270887">if</span>&nbsp;<span class="ident" id="6270890">c</span>&nbsp;<span class="op" id="6270892">==</span>&nbsp;<span class="num" id="6270895">0</span>&nbsp;<span class="op" id="6270897">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270902">err</span>&nbsp;<span class="op" id="6270906">=</span>&nbsp;<span class="ident" id="6270908">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270923">if</span>&nbsp;<span class="ident" id="6270926">err</span>&nbsp;<span class="op" id="6270930">!=</span>&nbsp;<span class="ident" id="6270933">nil</span>&nbsp;<span class="op" id="6270937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6270941">if</span>&nbsp;<span class="ident" id="6270944">err</span>&nbsp;<span class="op" id="6270948">==</span>&nbsp;<span class="ident" id="6270951">io</span><span class="op" id="6270953">.</span><span class="ident" id="6270954">EOF</span>&nbsp;<span class="op" id="6270958">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6270963">r</span><span class="op" id="6270964">.</span><span class="ident" id="6270965">eof</span>&nbsp;<span class="op" id="6270969">=</span>&nbsp;<span class="builtintype" id="6270971">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6270978">}</span>&nbsp;<span class="keyword" id="6270980">else</span>&nbsp;<span class="keyword" id="6270985">if</span>&nbsp;<span class="ident" id="6270988">r</span><span class="op" id="6270989">.</span><span class="ident" id="6270990">err</span>&nbsp;<span class="op" id="6270994">==</span>&nbsp;<span class="ident" id="6270997">nil</span>&nbsp;<span class="op" id="6271001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271006">r</span><span class="op" id="6271007">.</span><span class="ident" id="6271008">err</span>&nbsp;<span class="op" id="6271012">=</span>&nbsp;<span class="ident" id="6271014">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271024">c</span>&nbsp;<span class="op" id="6271026">=</span>&nbsp;<span class="num" id="6271028">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271034">return</span>&nbsp;<span class="ident" id="6271041">c</span><br>
<span class="lineno"></span><span class="op" id="6271043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6271046">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="6271134">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="6271202">func</span>&nbsp;<span class="op" id="6271207">(</span><span class="ident" id="6271208">r</span>&nbsp;<span class="op" id="6271210">*</span><span class="ident" id="6271211">importReader</span><span class="op" id="6271223">)</span>&nbsp;<span class="ident" id="6271225">peekByte</span><span class="op" id="6271233">(</span><span class="ident" id="6271234">skipSpace</span>&nbsp;<span class="builtintype" id="6271244">bool</span><span class="op" id="6271248">)</span>&nbsp;<span class="builtintype" id="6271250">byte</span>&nbsp;<span class="op" id="6271255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271258">if</span>&nbsp;<span class="ident" id="6271261">r</span><span class="op" id="6271262">.</span><span class="ident" id="6271263">err</span>&nbsp;<span class="op" id="6271267">!=</span>&nbsp;<span class="ident" id="6271270">nil</span>&nbsp;<span class="op" id="6271274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271278">if</span>&nbsp;<span class="ident" id="6271281">r</span><span class="op" id="6271282">.</span><span class="ident" id="6271283">nerr</span><span class="op" id="6271287">++</span><span class="op" id="6271289">;</span>&nbsp;<span class="ident" id="6271291">r</span><span class="op" id="6271292">.</span><span class="ident" id="6271293">nerr</span>&nbsp;<span class="op" id="6271298">&gt;</span>&nbsp;<span class="num" id="6271300">10000</span>&nbsp;<span class="op" id="6271306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6271311">panic</span><span class="op" id="6271316">(</span><span class="string" id="6271317">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="6271350">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271358">return</span>&nbsp;<span class="num" id="6271365">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271372">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271408">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271486">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271524">c</span>&nbsp;<span class="op" id="6271526">:=</span>&nbsp;<span class="ident" id="6271529">r</span><span class="op" id="6271530">.</span><span class="ident" id="6271531">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271537">if</span>&nbsp;<span class="ident" id="6271540">c</span>&nbsp;<span class="op" id="6271542">==</span>&nbsp;<span class="num" id="6271545">0</span>&nbsp;<span class="op" id="6271547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271551">c</span>&nbsp;<span class="op" id="6271553">=</span>&nbsp;<span class="ident" id="6271555">r</span><span class="op" id="6271556">.</span><span class="ident" id="6271557">readByte</span><span class="op" id="6271565">(</span><span class="op" id="6271566">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271572">for</span>&nbsp;<span class="ident" id="6271576">r</span><span class="op" id="6271577">.</span><span class="ident" id="6271578">err</span>&nbsp;<span class="op" id="6271582">==</span>&nbsp;<span class="ident" id="6271585">nil</span>&nbsp;<span class="op" id="6271589">&amp;&amp;</span>&nbsp;<span class="op" id="6271592">!</span><span class="ident" id="6271593">r</span><span class="op" id="6271594">.</span><span class="ident" id="6271595">eof</span>&nbsp;<span class="op" id="6271599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271603">if</span>&nbsp;<span class="ident" id="6271606">skipSpace</span>&nbsp;<span class="op" id="6271616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271621">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6271694">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271748">switch</span>&nbsp;<span class="ident" id="6271755">c</span>&nbsp;<span class="op" id="6271757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271762">case</span>&nbsp;<span class="string" id="6271767">&#39;&nbsp;&#39;</span><span class="op" id="6271770">,</span>&nbsp;<span class="string" id="6271772">&#39;\f&#39;</span><span class="op" id="6271776">,</span>&nbsp;<span class="string" id="6271778">&#39;\t&#39;</span><span class="op" id="6271782">,</span>&nbsp;<span class="string" id="6271784">&#39;\r&#39;</span><span class="op" id="6271788">,</span>&nbsp;<span class="string" id="6271790">&#39;\n&#39;</span><span class="op" id="6271794">,</span>&nbsp;<span class="string" id="6271796">&#39;;&#39;</span><span class="op" id="6271799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271805">c</span>&nbsp;<span class="op" id="6271807">=</span>&nbsp;<span class="ident" id="6271809">r</span><span class="op" id="6271810">.</span><span class="ident" id="6271811">readByte</span><span class="op" id="6271819">(</span><span class="op" id="6271820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271826">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271839">case</span>&nbsp;<span class="string" id="6271844">&#39;/&#39;</span><span class="op" id="6271847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271853">c</span>&nbsp;<span class="op" id="6271855">=</span>&nbsp;<span class="ident" id="6271857">r</span><span class="op" id="6271858">.</span><span class="ident" id="6271859">readByte</span><span class="op" id="6271867">(</span><span class="op" id="6271868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271874">if</span>&nbsp;<span class="ident" id="6271877">c</span>&nbsp;<span class="op" id="6271879">==</span>&nbsp;<span class="string" id="6271882">&#39;/&#39;</span>&nbsp;<span class="op" id="6271886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271893">for</span>&nbsp;<span class="ident" id="6271897">c</span>&nbsp;<span class="op" id="6271899">!=</span>&nbsp;<span class="string" id="6271902">&#39;\n&#39;</span>&nbsp;<span class="op" id="6271907">&amp;&amp;</span>&nbsp;<span class="ident" id="6271910">r</span><span class="op" id="6271911">.</span><span class="ident" id="6271912">err</span>&nbsp;<span class="op" id="6271916">==</span>&nbsp;<span class="ident" id="6271919">nil</span>&nbsp;<span class="op" id="6271923">&amp;&amp;</span>&nbsp;<span class="op" id="6271926">!</span><span class="ident" id="6271927">r</span><span class="op" id="6271928">.</span><span class="ident" id="6271929">eof</span>&nbsp;<span class="op" id="6271933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6271941">c</span>&nbsp;<span class="op" id="6271943">=</span>&nbsp;<span class="ident" id="6271945">r</span><span class="op" id="6271946">.</span><span class="ident" id="6271947">readByte</span><span class="op" id="6271955">(</span><span class="op" id="6271956">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6271969">}</span>&nbsp;<span class="keyword" id="6271971">else</span>&nbsp;<span class="keyword" id="6271976">if</span>&nbsp;<span class="ident" id="6271979">c</span>&nbsp;<span class="op" id="6271981">==</span>&nbsp;<span class="string" id="6271984">&#39;*&#39;</span>&nbsp;<span class="op" id="6271988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6271995">var</span>&nbsp;<span class="ident" id="6271999">c1</span>&nbsp;<span class="builtintype" id="6272002">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272012">for</span>&nbsp;<span class="op" id="6272016">(</span><span class="ident" id="6272017">c</span>&nbsp;<span class="op" id="6272019">!=</span>&nbsp;<span class="string" id="6272022">&#39;*&#39;</span>&nbsp;<span class="op" id="6272026">||</span>&nbsp;<span class="ident" id="6272029">c1</span>&nbsp;<span class="op" id="6272032">!=</span>&nbsp;<span class="string" id="6272035">&#39;/&#39;</span><span class="op" id="6272038">)</span>&nbsp;<span class="op" id="6272040">&amp;&amp;</span>&nbsp;<span class="ident" id="6272043">r</span><span class="op" id="6272044">.</span><span class="ident" id="6272045">err</span>&nbsp;<span class="op" id="6272049">==</span>&nbsp;<span class="ident" id="6272052">nil</span>&nbsp;<span class="op" id="6272056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272064">if</span>&nbsp;<span class="ident" id="6272067">r</span><span class="op" id="6272068">.</span><span class="ident" id="6272069">eof</span>&nbsp;<span class="op" id="6272073">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272082">r</span><span class="op" id="6272083">.</span><span class="ident" id="6272084">syntaxError</span><span class="op" id="6272095">(</span><span class="op" id="6272096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272112">c</span><span class="op" id="6272113">,</span>&nbsp;<span class="ident" id="6272115">c1</span>&nbsp;<span class="op" id="6272118">=</span>&nbsp;<span class="ident" id="6272120">c1</span><span class="op" id="6272122">,</span>&nbsp;<span class="ident" id="6272124">r</span><span class="op" id="6272125">.</span><span class="ident" id="6272126">readByte</span><span class="op" id="6272134">(</span><span class="op" id="6272135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272148">}</span>&nbsp;<span class="keyword" id="6272150">else</span>&nbsp;<span class="op" id="6272155">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272162">r</span><span class="op" id="6272163">.</span><span class="ident" id="6272164">syntaxError</span><span class="op" id="6272175">(</span><span class="op" id="6272176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272188">c</span>&nbsp;<span class="op" id="6272190">=</span>&nbsp;<span class="ident" id="6272192">r</span><span class="op" id="6272193">.</span><span class="ident" id="6272194">readByte</span><span class="op" id="6272202">(</span><span class="op" id="6272203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272209">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272221">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272229">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272239">r</span><span class="op" id="6272240">.</span><span class="ident" id="6272241">peek</span>&nbsp;<span class="op" id="6272246">=</span>&nbsp;<span class="ident" id="6272248">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272251">return</span>&nbsp;<span class="ident" id="6272258">r</span><span class="op" id="6272259">.</span><span class="ident" id="6272260">peek</span><br>
<span class="lineno">110</span><span class="op" id="6272265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6272268">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="6272336">func</span>&nbsp;<span class="op" id="6272341">(</span><span class="ident" id="6272342">r</span>&nbsp;<span class="op" id="6272344">*</span><span class="ident" id="6272345">importReader</span><span class="op" id="6272357">)</span>&nbsp;<span class="ident" id="6272359">nextByte</span><span class="op" id="6272367">(</span><span class="ident" id="6272368">skipSpace</span>&nbsp;<span class="builtintype" id="6272378">bool</span><span class="op" id="6272382">)</span>&nbsp;<span class="builtintype" id="6272384">byte</span>&nbsp;<span class="op" id="6272389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272392">c</span>&nbsp;<span class="op" id="6272394">:=</span>&nbsp;<span class="ident" id="6272397">r</span><span class="op" id="6272398">.</span><span class="ident" id="6272399">peekByte</span><span class="op" id="6272407">(</span><span class="ident" id="6272408">skipSpace</span><span class="op" id="6272417">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272420">r</span><span class="op" id="6272421">.</span><span class="ident" id="6272422">peek</span>&nbsp;<span class="op" id="6272427">=</span>&nbsp;<span class="num" id="6272429">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272432">return</span>&nbsp;<span class="ident" id="6272439">c</span><br>
<span class="lineno"></span><span class="op" id="6272441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6272444">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="6272499">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6272569">func</span>&nbsp;<span class="op" id="6272574">(</span><span class="ident" id="6272575">r</span>&nbsp;<span class="op" id="6272577">*</span><span class="ident" id="6272578">importReader</span><span class="op" id="6272590">)</span>&nbsp;<span class="ident" id="6272592">readKeyword</span><span class="op" id="6272603">(</span><span class="ident" id="6272604">kw</span>&nbsp;<span class="builtintype" id="6272607">string</span><span class="op" id="6272613">)</span>&nbsp;<span class="op" id="6272615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272618">r</span><span class="op" id="6272619">.</span><span class="ident" id="6272620">peekByte</span><span class="op" id="6272628">(</span><span class="builtintype" id="6272629">true</span><span class="op" id="6272633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272636">for</span>&nbsp;<span class="ident" id="6272640">i</span>&nbsp;<span class="op" id="6272642">:=</span>&nbsp;<span class="num" id="6272645">0</span><span class="op" id="6272646">;</span>&nbsp;<span class="ident" id="6272648">i</span>&nbsp;<span class="op" id="6272650">&lt;</span>&nbsp;<span class="builtinfunc" id="6272652">len</span><span class="op" id="6272655">(</span><span class="ident" id="6272656">kw</span><span class="op" id="6272658">)</span><span class="op" id="6272659">;</span>&nbsp;<span class="ident" id="6272661">i</span><span class="op" id="6272662">++</span>&nbsp;<span class="op" id="6272665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272669">if</span>&nbsp;<span class="ident" id="6272672">r</span><span class="op" id="6272673">.</span><span class="ident" id="6272674">nextByte</span><span class="op" id="6272682">(</span><span class="builtintype" id="6272683">false</span><span class="op" id="6272688">)</span>&nbsp;<span class="op" id="6272690">!=</span>&nbsp;<span class="ident" id="6272693">kw</span><span class="op" id="6272695">[</span><span class="ident" id="6272696">i</span><span class="op" id="6272697">]</span>&nbsp;<span class="op" id="6272699">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272704">r</span><span class="op" id="6272705">.</span><span class="ident" id="6272706">syntaxError</span><span class="op" id="6272717">(</span><span class="op" id="6272718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272723">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272738">if</span>&nbsp;<span class="ident" id="6272741">isIdent</span><span class="op" id="6272748">(</span><span class="ident" id="6272749">r</span><span class="op" id="6272750">.</span><span class="ident" id="6272751">peekByte</span><span class="op" id="6272759">(</span><span class="builtintype" id="6272760">false</span><span class="op" id="6272765">)</span><span class="op" id="6272766">)</span>&nbsp;<span class="op" id="6272768">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272772">r</span><span class="op" id="6272773">.</span><span class="ident" id="6272774">syntaxError</span><span class="op" id="6272785">(</span><span class="op" id="6272786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6272789">}</span><br>
<span class="lineno"></span><span class="op" id="6272791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6272794">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="6272843">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6272913">func</span>&nbsp;<span class="op" id="6272918">(</span><span class="ident" id="6272919">r</span>&nbsp;<span class="op" id="6272921">*</span><span class="ident" id="6272922">importReader</span><span class="op" id="6272934">)</span>&nbsp;<span class="ident" id="6272936">readIdent</span><span class="op" id="6272945">(</span><span class="op" id="6272946">)</span>&nbsp;<span class="op" id="6272948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272951">c</span>&nbsp;<span class="op" id="6272953">:=</span>&nbsp;<span class="ident" id="6272956">r</span><span class="op" id="6272957">.</span><span class="ident" id="6272958">peekByte</span><span class="op" id="6272966">(</span><span class="builtintype" id="6272967">true</span><span class="op" id="6272971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6272974">if</span>&nbsp;<span class="op" id="6272977">!</span><span class="ident" id="6272978">isIdent</span><span class="op" id="6272985">(</span><span class="ident" id="6272986">c</span><span class="op" id="6272987">)</span>&nbsp;<span class="op" id="6272989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6272993">r</span><span class="op" id="6272994">.</span><span class="ident" id="6272995">syntaxError</span><span class="op" id="6273006">(</span><span class="op" id="6273007">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273011">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273022">for</span>&nbsp;<span class="ident" id="6273026">isIdent</span><span class="op" id="6273033">(</span><span class="ident" id="6273034">r</span><span class="op" id="6273035">.</span><span class="ident" id="6273036">peekByte</span><span class="op" id="6273044">(</span><span class="builtintype" id="6273045">false</span><span class="op" id="6273050">)</span><span class="op" id="6273051">)</span>&nbsp;<span class="op" id="6273053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273057">r</span><span class="op" id="6273058">.</span><span class="ident" id="6273059">peek</span>&nbsp;<span class="op" id="6273064">=</span>&nbsp;<span class="num" id="6273066">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273069">}</span><br>
<span class="lineno">145</span><span class="op" id="6273071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6273074">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="6273134">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6273205">func</span>&nbsp;<span class="op" id="6273210">(</span><span class="ident" id="6273211">r</span>&nbsp;<span class="op" id="6273213">*</span><span class="ident" id="6273214">importReader</span><span class="op" id="6273226">)</span>&nbsp;<span class="ident" id="6273228">readString</span><span class="op" id="6273238">(</span><span class="op" id="6273239">)</span>&nbsp;<span class="op" id="6273241">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273244">switch</span>&nbsp;<span class="ident" id="6273251">r</span><span class="op" id="6273252">.</span><span class="ident" id="6273253">nextByte</span><span class="op" id="6273261">(</span><span class="builtintype" id="6273262">true</span><span class="op" id="6273266">)</span>&nbsp;<span class="op" id="6273268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273271">case</span>&nbsp;<span class="string" id="6273276">&#39;`&#39;</span><span class="op" id="6273279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273283">for</span>&nbsp;<span class="ident" id="6273287">r</span><span class="op" id="6273288">.</span><span class="ident" id="6273289">err</span>&nbsp;<span class="op" id="6273293">==</span>&nbsp;<span class="ident" id="6273296">nil</span>&nbsp;<span class="op" id="6273300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273305">if</span>&nbsp;<span class="ident" id="6273308">r</span><span class="op" id="6273309">.</span><span class="ident" id="6273310">nextByte</span><span class="op" id="6273318">(</span><span class="builtintype" id="6273319">false</span><span class="op" id="6273324">)</span>&nbsp;<span class="op" id="6273326">==</span>&nbsp;<span class="string" id="6273329">&#39;`&#39;</span>&nbsp;<span class="op" id="6273333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273339">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273353">if</span>&nbsp;<span class="ident" id="6273356">r</span><span class="op" id="6273357">.</span><span class="ident" id="6273358">eof</span>&nbsp;<span class="op" id="6273362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273368">r</span><span class="op" id="6273369">.</span><span class="ident" id="6273370">syntaxError</span><span class="op" id="6273381">(</span><span class="op" id="6273382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273391">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273394">case</span>&nbsp;<span class="string" id="6273399">&#39;&#34;&#39;</span><span class="op" id="6273402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273406">for</span>&nbsp;<span class="ident" id="6273410">r</span><span class="op" id="6273411">.</span><span class="ident" id="6273412">err</span>&nbsp;<span class="op" id="6273416">==</span>&nbsp;<span class="ident" id="6273419">nil</span>&nbsp;<span class="op" id="6273423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273428">c</span>&nbsp;<span class="op" id="6273430">:=</span>&nbsp;<span class="ident" id="6273433">r</span><span class="op" id="6273434">.</span><span class="ident" id="6273435">nextByte</span><span class="op" id="6273443">(</span><span class="builtintype" id="6273444">false</span><span class="op" id="6273449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273454">if</span>&nbsp;<span class="ident" id="6273457">c</span>&nbsp;<span class="op" id="6273459">==</span>&nbsp;<span class="string" id="6273462">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6273466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273472">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273486">if</span>&nbsp;<span class="ident" id="6273489">r</span><span class="op" id="6273490">.</span><span class="ident" id="6273491">eof</span>&nbsp;<span class="op" id="6273495">||</span>&nbsp;<span class="ident" id="6273498">c</span>&nbsp;<span class="op" id="6273500">==</span>&nbsp;<span class="string" id="6273503">&#39;\n&#39;</span>&nbsp;<span class="op" id="6273508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273514">r</span><span class="op" id="6273515">.</span><span class="ident" id="6273516">syntaxError</span><span class="op" id="6273527">(</span><span class="op" id="6273528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273538">if</span>&nbsp;<span class="ident" id="6273541">c</span>&nbsp;<span class="op" id="6273543">==</span>&nbsp;<span class="string" id="6273546">&#39;\\&#39;</span>&nbsp;<span class="op" id="6273551">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273557">r</span><span class="op" id="6273558">.</span><span class="ident" id="6273559">nextByte</span><span class="op" id="6273567">(</span><span class="builtintype" id="6273568">false</span><span class="op" id="6273573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273585">default</span><span class="op" id="6273592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273596">r</span><span class="op" id="6273597">.</span><span class="ident" id="6273598">syntaxError</span><span class="op" id="6273609">(</span><span class="op" id="6273610">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273613">}</span><br>
<span class="lineno"></span><span class="op" id="6273615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6273618">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="6273705">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="6273724">func</span>&nbsp;<span class="op" id="6273729">(</span><span class="ident" id="6273730">r</span>&nbsp;<span class="op" id="6273732">*</span><span class="ident" id="6273733">importReader</span><span class="op" id="6273745">)</span>&nbsp;<span class="ident" id="6273747">readImport</span><span class="op" id="6273757">(</span><span class="op" id="6273758">)</span>&nbsp;<span class="op" id="6273760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273763">c</span>&nbsp;<span class="op" id="6273765">:=</span>&nbsp;<span class="ident" id="6273768">r</span><span class="op" id="6273769">.</span><span class="ident" id="6273770">peekByte</span><span class="op" id="6273778">(</span><span class="builtintype" id="6273779">true</span><span class="op" id="6273783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273786">if</span>&nbsp;<span class="ident" id="6273789">c</span>&nbsp;<span class="op" id="6273791">==</span>&nbsp;<span class="string" id="6273794">&#39;.&#39;</span>&nbsp;<span class="op" id="6273798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273802">r</span><span class="op" id="6273803">.</span><span class="ident" id="6273804">peek</span>&nbsp;<span class="op" id="6273809">=</span>&nbsp;<span class="num" id="6273811">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273814">}</span>&nbsp;<span class="keyword" id="6273816">else</span>&nbsp;<span class="keyword" id="6273821">if</span>&nbsp;<span class="ident" id="6273824">isIdent</span><span class="op" id="6273831">(</span><span class="ident" id="6273832">c</span><span class="op" id="6273833">)</span>&nbsp;<span class="op" id="6273835">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273839">r</span><span class="op" id="6273840">.</span><span class="ident" id="6273841">readIdent</span><span class="op" id="6273850">(</span><span class="op" id="6273851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273857">r</span><span class="op" id="6273858">.</span><span class="ident" id="6273859">readString</span><span class="op" id="6273869">(</span><span class="op" id="6273870">)</span><br>
<span class="lineno"></span><span class="op" id="6273872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="6273875">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="6273953">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6273987">func</span>&nbsp;<span class="ident" id="6273992">readComments</span><span class="op" id="6274004">(</span><span class="ident" id="6274005">f</span>&nbsp;<span class="ident" id="6274007">io</span><span class="op" id="6274009">.</span><span class="ident" id="6274010">Reader</span><span class="op" id="6274016">)</span>&nbsp;<span class="op" id="6274018">(</span><span class="op" id="6274019">[</span><span class="op" id="6274020">]</span><span class="builtintype" id="6274021">byte</span><span class="op" id="6274025">,</span>&nbsp;<span class="builtintype" id="6274027">error</span><span class="op" id="6274032">)</span>&nbsp;<span class="op" id="6274034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274037">r</span>&nbsp;<span class="op" id="6274039">:=</span>&nbsp;<span class="op" id="6274042">&amp;</span><span class="ident" id="6274043">importReader</span><span class="op" id="6274055">{</span><span class="ident" id="6274056">b</span><span class="op" id="6274057">:</span>&nbsp;<span class="ident" id="6274059">bufio</span><span class="op" id="6274064">.</span><span class="ident" id="6274065">NewReader</span><span class="op" id="6274074">(</span><span class="ident" id="6274075">f</span><span class="op" id="6274076">)</span><span class="op" id="6274077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274080">r</span><span class="op" id="6274081">.</span><span class="ident" id="6274082">peekByte</span><span class="op" id="6274090">(</span><span class="builtintype" id="6274091">true</span><span class="op" id="6274095">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274098">if</span>&nbsp;<span class="ident" id="6274101">r</span><span class="op" id="6274102">.</span><span class="ident" id="6274103">err</span>&nbsp;<span class="op" id="6274107">==</span>&nbsp;<span class="ident" id="6274110">nil</span>&nbsp;<span class="op" id="6274114">&amp;&amp;</span>&nbsp;<span class="op" id="6274117">!</span><span class="ident" id="6274118">r</span><span class="op" id="6274119">.</span><span class="ident" id="6274120">eof</span>&nbsp;<span class="op" id="6274124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6274128">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274199">r</span><span class="op" id="6274200">.</span><span class="ident" id="6274201">buf</span>&nbsp;<span class="op" id="6274205">=</span>&nbsp;<span class="ident" id="6274207">r</span><span class="op" id="6274208">.</span><span class="ident" id="6274209">buf</span><span class="op" id="6274212">[</span><span class="op" id="6274213">:</span><span class="builtinfunc" id="6274214">len</span><span class="op" id="6274217">(</span><span class="ident" id="6274218">r</span><span class="op" id="6274219">.</span><span class="ident" id="6274220">buf</span><span class="op" id="6274223">)</span><span class="op" id="6274224">-</span><span class="num" id="6274225">1</span><span class="op" id="6274226">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274232">return</span>&nbsp;<span class="ident" id="6274239">r</span><span class="op" id="6274240">.</span><span class="ident" id="6274241">buf</span><span class="op" id="6274244">,</span>&nbsp;<span class="ident" id="6274246">r</span><span class="op" id="6274247">.</span><span class="ident" id="6274248">err</span><br>
<span class="lineno">200</span><span class="op" id="6274252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6274255">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="6274336">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="6274400">func</span>&nbsp;<span class="ident" id="6274405">readImports</span><span class="op" id="6274416">(</span><span class="ident" id="6274417">f</span>&nbsp;<span class="ident" id="6274419">io</span><span class="op" id="6274421">.</span><span class="ident" id="6274422">Reader</span><span class="op" id="6274428">,</span>&nbsp;<span class="ident" id="6274430">reportSyntaxError</span>&nbsp;<span class="builtintype" id="6274448">bool</span><span class="op" id="6274452">)</span>&nbsp;<span class="op" id="6274454">(</span><span class="op" id="6274455">[</span><span class="op" id="6274456">]</span><span class="builtintype" id="6274457">byte</span><span class="op" id="6274461">,</span>&nbsp;<span class="builtintype" id="6274463">error</span><span class="op" id="6274468">)</span>&nbsp;<span class="op" id="6274470">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274473">r</span>&nbsp;<span class="op" id="6274475">:=</span>&nbsp;<span class="op" id="6274478">&amp;</span><span class="ident" id="6274479">importReader</span><span class="op" id="6274491">{</span><span class="ident" id="6274492">b</span><span class="op" id="6274493">:</span>&nbsp;<span class="ident" id="6274495">bufio</span><span class="op" id="6274500">.</span><span class="ident" id="6274501">NewReader</span><span class="op" id="6274510">(</span><span class="ident" id="6274511">f</span><span class="op" id="6274512">)</span><span class="op" id="6274513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274517">r</span><span class="op" id="6274518">.</span><span class="ident" id="6274519">readKeyword</span><span class="op" id="6274530">(</span><span class="string" id="6274531">&#34;package&#34;</span><span class="op" id="6274540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274543">r</span><span class="op" id="6274544">.</span><span class="ident" id="6274545">readIdent</span><span class="op" id="6274554">(</span><span class="op" id="6274555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274558">for</span>&nbsp;<span class="ident" id="6274562">r</span><span class="op" id="6274563">.</span><span class="ident" id="6274564">peekByte</span><span class="op" id="6274572">(</span><span class="builtintype" id="6274573">true</span><span class="op" id="6274577">)</span>&nbsp;<span class="op" id="6274579">==</span>&nbsp;<span class="string" id="6274582">&#39;i&#39;</span>&nbsp;<span class="op" id="6274586">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274590">r</span><span class="op" id="6274591">.</span><span class="ident" id="6274592">readKeyword</span><span class="op" id="6274603">(</span><span class="string" id="6274604">&#34;import&#34;</span><span class="op" id="6274612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274616">if</span>&nbsp;<span class="ident" id="6274619">r</span><span class="op" id="6274620">.</span><span class="ident" id="6274621">peekByte</span><span class="op" id="6274629">(</span><span class="builtintype" id="6274630">true</span><span class="op" id="6274634">)</span>&nbsp;<span class="op" id="6274636">==</span>&nbsp;<span class="string" id="6274639">&#39;(&#39;</span>&nbsp;<span class="op" id="6274643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274648">r</span><span class="op" id="6274649">.</span><span class="ident" id="6274650">nextByte</span><span class="op" id="6274658">(</span><span class="builtintype" id="6274659">false</span><span class="op" id="6274664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274669">for</span>&nbsp;<span class="ident" id="6274673">r</span><span class="op" id="6274674">.</span><span class="ident" id="6274675">peekByte</span><span class="op" id="6274683">(</span><span class="builtintype" id="6274684">true</span><span class="op" id="6274688">)</span>&nbsp;<span class="op" id="6274690">!=</span>&nbsp;<span class="string" id="6274693">&#39;)&#39;</span>&nbsp;<span class="op" id="6274697">&amp;&amp;</span>&nbsp;<span class="ident" id="6274700">r</span><span class="op" id="6274701">.</span><span class="ident" id="6274702">err</span>&nbsp;<span class="op" id="6274706">==</span>&nbsp;<span class="ident" id="6274709">nil</span>&nbsp;<span class="op" id="6274713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274719">r</span><span class="op" id="6274720">.</span><span class="ident" id="6274721">readImport</span><span class="op" id="6274731">(</span><span class="op" id="6274732">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274742">r</span><span class="op" id="6274743">.</span><span class="ident" id="6274744">nextByte</span><span class="op" id="6274752">(</span><span class="builtintype" id="6274753">false</span><span class="op" id="6274758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274762">}</span>&nbsp;<span class="keyword" id="6274764">else</span>&nbsp;<span class="op" id="6274769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274774">r</span><span class="op" id="6274775">.</span><span class="ident" id="6274776">readImport</span><span class="op" id="6274786">(</span><span class="op" id="6274787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274791">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6274798">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6274883">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274973">if</span>&nbsp;<span class="ident" id="6274976">r</span><span class="op" id="6274977">.</span><span class="ident" id="6274978">err</span>&nbsp;<span class="op" id="6274982">==</span>&nbsp;<span class="ident" id="6274985">nil</span>&nbsp;<span class="op" id="6274989">&amp;&amp;</span>&nbsp;<span class="op" id="6274992">!</span><span class="ident" id="6274993">r</span><span class="op" id="6274994">.</span><span class="ident" id="6274995">eof</span>&nbsp;<span class="op" id="6274999">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275003">return</span>&nbsp;<span class="ident" id="6275010">r</span><span class="op" id="6275011">.</span><span class="ident" id="6275012">buf</span><span class="op" id="6275015">[</span><span class="op" id="6275016">:</span><span class="builtinfunc" id="6275017">len</span><span class="op" id="6275020">(</span><span class="ident" id="6275021">r</span><span class="op" id="6275022">.</span><span class="ident" id="6275023">buf</span><span class="op" id="6275026">)</span><span class="op" id="6275027">-</span><span class="num" id="6275028">1</span><span class="op" id="6275029">]</span><span class="op" id="6275030">,</span>&nbsp;<span class="ident" id="6275032">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6275041">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6275110">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275177">if</span>&nbsp;<span class="ident" id="6275180">r</span><span class="op" id="6275181">.</span><span class="ident" id="6275182">err</span>&nbsp;<span class="op" id="6275186">==</span>&nbsp;<span class="ident" id="6275189">errSyntax</span>&nbsp;<span class="op" id="6275199">&amp;&amp;</span>&nbsp;<span class="op" id="6275202">!</span><span class="ident" id="6275203">reportSyntaxError</span>&nbsp;<span class="op" id="6275221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275225">r</span><span class="op" id="6275226">.</span><span class="ident" id="6275227">err</span>&nbsp;<span class="op" id="6275231">=</span>&nbsp;<span class="ident" id="6275233">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275239">for</span>&nbsp;<span class="ident" id="6275243">r</span><span class="op" id="6275244">.</span><span class="ident" id="6275245">err</span>&nbsp;<span class="op" id="6275249">==</span>&nbsp;<span class="ident" id="6275252">nil</span>&nbsp;<span class="op" id="6275256">&amp;&amp;</span>&nbsp;<span class="op" id="6275259">!</span><span class="ident" id="6275260">r</span><span class="op" id="6275261">.</span><span class="ident" id="6275262">eof</span>&nbsp;<span class="op" id="6275266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6275271">r</span><span class="op" id="6275272">.</span><span class="ident" id="6275273">readByte</span><span class="op" id="6275281">(</span><span class="op" id="6275282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275286">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6275289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6275293">return</span>&nbsp;<span class="ident" id="6275300">r</span><span class="op" id="6275301">.</span><span class="ident" id="6275302">buf</span><span class="op" id="6275305">,</span>&nbsp;<span class="ident" id="6275307">r</span><span class="op" id="6275308">.</span><span class="ident" id="6275309">err</span><br>
<span class="lineno"></span><span class="op" id="6275313">}</span>
</div>
</body>
</html>
