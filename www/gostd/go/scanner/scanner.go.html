<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4759165">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4759220">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4759274">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4759325">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="4759385">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="4759444">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="4759490">//</span><br>
<span class="lineno"></span><span class="keyword" id="4759493">package</span>&nbsp;<span class="ident" id="4759501">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4759510">import</span>&nbsp;<span class="op" id="4759517">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759520">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759529">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759536">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759548">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759565">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759576">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4759587">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4759602">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4759605">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4759678">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4759751">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4759825">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="4759849">//</span><br>
<span class="lineno"></span><span class="keyword" id="4759852">type</span>&nbsp;<span class="ident" id="4759857">ErrorHandler</span>&nbsp;<span class="keyword" id="4759870">func</span><span class="op" id="4759874">(</span><span class="ident" id="4759875">pos</span>&nbsp;<span class="ident" id="4759879">token</span><span class="op" id="4759884">.</span><span class="ident" id="4759885">Position</span><span class="op" id="4759893">,</span>&nbsp;<span class="ident" id="4759895">msg</span>&nbsp;<span class="builtintype" id="4759899">string</span><span class="op" id="4759905">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4759908">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="4759973">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="4760035">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4760093">//</span><br>
<span class="lineno"></span><span class="keyword" id="4760096">type</span>&nbsp;<span class="ident" id="4760101">Scanner</span>&nbsp;<span class="keyword" id="4760109">struct</span>&nbsp;<span class="op" id="4760116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760119">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760139">file</span>&nbsp;<span class="op" id="4760144">*</span><span class="ident" id="4760145">token</span><span class="op" id="4760150">.</span><span class="ident" id="4760151">File</span>&nbsp;&nbsp;<span class="comment" id="4760157">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760180">dir</span>&nbsp;&nbsp;<span class="builtintype" id="4760185">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4760198">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760235">src</span>&nbsp;&nbsp;<span class="op" id="4760240">[</span><span class="op" id="4760241">]</span><span class="builtintype" id="4760242">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4760253">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760264">err</span>&nbsp;&nbsp;<span class="ident" id="4760269">ErrorHandler</span>&nbsp;<span class="comment" id="4760282">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760310">mode</span>&nbsp;<span class="ident" id="4760315">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4760328">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760347">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760366">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4760377">rune</span>&nbsp;<span class="comment" id="4760382">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760404">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4760415">int</span>&nbsp;&nbsp;<span class="comment" id="4760420">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760441">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4760452">int</span>&nbsp;&nbsp;<span class="comment" id="4760457">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760511">lineOffset</span>&nbsp;<span class="builtintype" id="4760522">int</span>&nbsp;&nbsp;<span class="comment" id="4760527">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760551">insertSemi</span>&nbsp;<span class="builtintype" id="4760562">bool</span>&nbsp;<span class="comment" id="4760567">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4760611">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760643">ErrorCount</span>&nbsp;<span class="builtintype" id="4760654">int</span>&nbsp;<span class="comment" id="4760658">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="4760690">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4760693">const</span>&nbsp;<span class="ident" id="4760699">bom</span>&nbsp;<span class="op" id="4760703">=</span>&nbsp;<span class="num" id="4760705">0xFEFF</span>&nbsp;<span class="comment" id="4760712">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4760772">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="4760813">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="4760844">//</span><br>
<span class="lineno"></span><span class="keyword" id="4760847">func</span>&nbsp;<span class="op" id="4760852">(</span><span class="ident" id="4760853">s</span>&nbsp;<span class="op" id="4760855">*</span><span class="ident" id="4760856">Scanner</span><span class="op" id="4760863">)</span>&nbsp;<span class="ident" id="4760865">next</span><span class="op" id="4760869">(</span><span class="op" id="4760870">)</span>&nbsp;<span class="op" id="4760872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760875">if</span>&nbsp;<span class="ident" id="4760878">s</span><span class="op" id="4760879">.</span><span class="ident" id="4760880">rdOffset</span>&nbsp;<span class="op" id="4760889">&lt;</span>&nbsp;<span class="builtinfunc" id="4760891">len</span><span class="op" id="4760894">(</span><span class="ident" id="4760895">s</span><span class="op" id="4760896">.</span><span class="ident" id="4760897">src</span><span class="op" id="4760900">)</span>&nbsp;<span class="op" id="4760902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760906">s</span><span class="op" id="4760907">.</span><span class="ident" id="4760908">offset</span>&nbsp;<span class="op" id="4760915">=</span>&nbsp;<span class="ident" id="4760917">s</span><span class="op" id="4760918">.</span><span class="ident" id="4760919">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4760930">if</span>&nbsp;<span class="ident" id="4760933">s</span><span class="op" id="4760934">.</span><span class="ident" id="4760935">ch</span>&nbsp;<span class="op" id="4760938">==</span>&nbsp;<span class="string" id="4760941">&#39;\n&#39;</span>&nbsp;<span class="op" id="4760946">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760951">s</span><span class="op" id="4760952">.</span><span class="ident" id="4760953">lineOffset</span>&nbsp;<span class="op" id="4760964">=</span>&nbsp;<span class="ident" id="4760966">s</span><span class="op" id="4760967">.</span><span class="ident" id="4760968">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4760978">s</span><span class="op" id="4760979">.</span><span class="ident" id="4760980">file</span><span class="op" id="4760984">.</span><span class="ident" id="4760985">AddLine</span><span class="op" id="4760992">(</span><span class="ident" id="4760993">s</span><span class="op" id="4760994">.</span><span class="ident" id="4760995">offset</span><span class="op" id="4761001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761009">r</span><span class="op" id="4761010">,</span>&nbsp;<span class="ident" id="4761012">w</span>&nbsp;<span class="op" id="4761014">:=</span>&nbsp;<span class="builtintype" id="4761017">rune</span><span class="op" id="4761021">(</span><span class="ident" id="4761022">s</span><span class="op" id="4761023">.</span><span class="ident" id="4761024">src</span><span class="op" id="4761027">[</span><span class="ident" id="4761028">s</span><span class="op" id="4761029">.</span><span class="ident" id="4761030">rdOffset</span><span class="op" id="4761038">]</span><span class="op" id="4761039">)</span><span class="op" id="4761040">,</span>&nbsp;<span class="num" id="4761042">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4761046">switch</span>&nbsp;<span class="op" id="4761053">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4761057">case</span>&nbsp;<span class="ident" id="4761062">r</span>&nbsp;<span class="op" id="4761064">==</span>&nbsp;<span class="num" id="4761067">0</span><span class="op" id="4761068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761073">s</span><span class="op" id="4761074">.</span><span class="builtintype" id="4761075">error</span><span class="op" id="4761080">(</span><span class="ident" id="4761081">s</span><span class="op" id="4761082">.</span><span class="ident" id="4761083">offset</span><span class="op" id="4761089">,</span>&nbsp;<span class="string" id="4761091">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="4761114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4761118">case</span>&nbsp;<span class="ident" id="4761123">r</span>&nbsp;<span class="op" id="4761125">&gt;=</span>&nbsp;<span class="num" id="4761128">0x80</span><span class="op" id="4761132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4761137">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761153">r</span><span class="op" id="4761154">,</span>&nbsp;<span class="ident" id="4761156">w</span>&nbsp;<span class="op" id="4761158">=</span>&nbsp;<span class="ident" id="4761160">utf8</span><span class="op" id="4761164">.</span><span class="ident" id="4761165">DecodeRune</span><span class="op" id="4761175">(</span><span class="ident" id="4761176">s</span><span class="op" id="4761177">.</span><span class="ident" id="4761178">src</span><span class="op" id="4761181">[</span><span class="ident" id="4761182">s</span><span class="op" id="4761183">.</span><span class="ident" id="4761184">rdOffset</span><span class="op" id="4761192">:</span><span class="op" id="4761193">]</span><span class="op" id="4761194">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4761199">if</span>&nbsp;<span class="ident" id="4761202">r</span>&nbsp;<span class="op" id="4761204">==</span>&nbsp;<span class="ident" id="4761207">utf8</span><span class="op" id="4761211">.</span><span class="ident" id="4761212">RuneError</span>&nbsp;<span class="op" id="4761222">&amp;&amp;</span>&nbsp;<span class="ident" id="4761225">w</span>&nbsp;<span class="op" id="4761227">==</span>&nbsp;<span class="num" id="4761230">1</span>&nbsp;<span class="op" id="4761232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761238">s</span><span class="op" id="4761239">.</span><span class="builtintype" id="4761240">error</span><span class="op" id="4761245">(</span><span class="ident" id="4761246">s</span><span class="op" id="4761247">.</span><span class="ident" id="4761248">offset</span><span class="op" id="4761254">,</span>&nbsp;<span class="string" id="4761256">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="4761280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761285">}</span>&nbsp;<span class="keyword" id="4761287">else</span>&nbsp;<span class="keyword" id="4761292">if</span>&nbsp;<span class="ident" id="4761295">r</span>&nbsp;<span class="op" id="4761297">==</span>&nbsp;<span class="ident" id="4761300">bom</span>&nbsp;<span class="op" id="4761304">&amp;&amp;</span>&nbsp;<span class="ident" id="4761307">s</span><span class="op" id="4761308">.</span><span class="ident" id="4761309">offset</span>&nbsp;<span class="op" id="4761316">&gt;</span>&nbsp;<span class="num" id="4761318">0</span>&nbsp;<span class="op" id="4761320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761326">s</span><span class="op" id="4761327">.</span><span class="builtintype" id="4761328">error</span><span class="op" id="4761333">(</span><span class="ident" id="4761334">s</span><span class="op" id="4761335">.</span><span class="ident" id="4761336">offset</span><span class="op" id="4761342">,</span>&nbsp;<span class="string" id="4761344">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="4761369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761374">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761382">s</span><span class="op" id="4761383">.</span><span class="ident" id="4761384">rdOffset</span>&nbsp;<span class="op" id="4761393">+=</span>&nbsp;<span class="ident" id="4761396">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761400">s</span><span class="op" id="4761401">.</span><span class="ident" id="4761402">ch</span>&nbsp;<span class="op" id="4761405">=</span>&nbsp;<span class="ident" id="4761407">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761410">}</span>&nbsp;<span class="keyword" id="4761412">else</span>&nbsp;<span class="op" id="4761417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761421">s</span><span class="op" id="4761422">.</span><span class="ident" id="4761423">offset</span>&nbsp;<span class="op" id="4761430">=</span>&nbsp;<span class="builtinfunc" id="4761432">len</span><span class="op" id="4761435">(</span><span class="ident" id="4761436">s</span><span class="op" id="4761437">.</span><span class="ident" id="4761438">src</span><span class="op" id="4761441">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4761445">if</span>&nbsp;<span class="ident" id="4761448">s</span><span class="op" id="4761449">.</span><span class="ident" id="4761450">ch</span>&nbsp;<span class="op" id="4761453">==</span>&nbsp;<span class="string" id="4761456">&#39;\n&#39;</span>&nbsp;<span class="op" id="4761461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761466">s</span><span class="op" id="4761467">.</span><span class="ident" id="4761468">lineOffset</span>&nbsp;<span class="op" id="4761479">=</span>&nbsp;<span class="ident" id="4761481">s</span><span class="op" id="4761482">.</span><span class="ident" id="4761483">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761493">s</span><span class="op" id="4761494">.</span><span class="ident" id="4761495">file</span><span class="op" id="4761499">.</span><span class="ident" id="4761500">AddLine</span><span class="op" id="4761507">(</span><span class="ident" id="4761508">s</span><span class="op" id="4761509">.</span><span class="ident" id="4761510">offset</span><span class="op" id="4761516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761524">s</span><span class="op" id="4761525">.</span><span class="ident" id="4761526">ch</span>&nbsp;<span class="op" id="4761529">=</span>&nbsp;<span class="op" id="4761531">-</span><span class="num" id="4761532">1</span>&nbsp;<span class="comment" id="4761534">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4761542">}</span><br>
<span class="lineno"></span><span class="op" id="4761544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4761547">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="4761589">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="4761623">//</span><br>
<span class="lineno"></span><span class="keyword" id="4761626">type</span>&nbsp;<span class="ident" id="4761631">Mode</span>&nbsp;<span class="builtintype" id="4761636">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4761642">const</span>&nbsp;<span class="op" id="4761648">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761651">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4761667">Mode</span>&nbsp;<span class="op" id="4761672">=</span>&nbsp;<span class="num" id="4761674">1</span>&nbsp;<span class="op" id="4761676">&lt;&lt;</span>&nbsp;<span class="ident" id="4761679">iota</span>&nbsp;<span class="comment" id="4761684">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4761722">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4761755">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="4761816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4761819">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4761890">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="4761961">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="4762033">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4762103">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4762174">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="4762229">//</span><br>
<span class="lineno">105</span><span class="comment" id="4762232">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4762303">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="4762373">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="4762447">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="4762487">//</span><br>
<span class="lineno">110</span><span class="comment" id="4762490">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="4762565">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4762581">//</span><br>
<span class="lineno"></span><span class="keyword" id="4762584">func</span>&nbsp;<span class="op" id="4762589">(</span><span class="ident" id="4762590">s</span>&nbsp;<span class="op" id="4762592">*</span><span class="ident" id="4762593">Scanner</span><span class="op" id="4762600">)</span>&nbsp;<span class="ident" id="4762602">Init</span><span class="op" id="4762606">(</span><span class="ident" id="4762607">file</span>&nbsp;<span class="op" id="4762612">*</span><span class="ident" id="4762613">token</span><span class="op" id="4762618">.</span><span class="ident" id="4762619">File</span><span class="op" id="4762623">,</span>&nbsp;<span class="ident" id="4762625">src</span>&nbsp;<span class="op" id="4762629">[</span><span class="op" id="4762630">]</span><span class="builtintype" id="4762631">byte</span><span class="op" id="4762635">,</span>&nbsp;<span class="ident" id="4762637">err</span>&nbsp;<span class="ident" id="4762641">ErrorHandler</span><span class="op" id="4762653">,</span>&nbsp;<span class="ident" id="4762655">mode</span>&nbsp;<span class="ident" id="4762660">Mode</span><span class="op" id="4762664">)</span>&nbsp;<span class="op" id="4762666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4762669">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4762737">if</span>&nbsp;<span class="ident" id="4762740">file</span><span class="op" id="4762744">.</span><span class="ident" id="4762745">Size</span><span class="op" id="4762749">(</span><span class="op" id="4762750">)</span>&nbsp;<span class="op" id="4762752">!=</span>&nbsp;<span class="builtinfunc" id="4762755">len</span><span class="op" id="4762758">(</span><span class="ident" id="4762759">src</span><span class="op" id="4762762">)</span>&nbsp;<span class="op" id="4762764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4762768">panic</span><span class="op" id="4762773">(</span><span class="ident" id="4762774">fmt</span><span class="op" id="4762777">.</span><span class="ident" id="4762778">Sprintf</span><span class="op" id="4762785">(</span><span class="string" id="4762786">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="4762830">,</span>&nbsp;<span class="ident" id="4762832">file</span><span class="op" id="4762836">.</span><span class="ident" id="4762837">Size</span><span class="op" id="4762841">(</span><span class="op" id="4762842">)</span><span class="op" id="4762843">,</span>&nbsp;<span class="builtinfunc" id="4762845">len</span><span class="op" id="4762848">(</span><span class="ident" id="4762849">src</span><span class="op" id="4762852">)</span><span class="op" id="4762853">)</span><span class="op" id="4762854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4762857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762860">s</span><span class="op" id="4762861">.</span><span class="ident" id="4762862">file</span>&nbsp;<span class="op" id="4762867">=</span>&nbsp;<span class="ident" id="4762869">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762875">s</span><span class="op" id="4762876">.</span><span class="ident" id="4762877">dir</span><span class="op" id="4762880">,</span>&nbsp;<span class="ident" id="4762882">_</span>&nbsp;<span class="op" id="4762884">=</span>&nbsp;<span class="ident" id="4762886">filepath</span><span class="op" id="4762894">.</span><span class="ident" id="4762895">Split</span><span class="op" id="4762900">(</span><span class="ident" id="4762901">file</span><span class="op" id="4762905">.</span><span class="ident" id="4762906">Name</span><span class="op" id="4762910">(</span><span class="op" id="4762911">)</span><span class="op" id="4762912">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762915">s</span><span class="op" id="4762916">.</span><span class="ident" id="4762917">src</span>&nbsp;<span class="op" id="4762921">=</span>&nbsp;<span class="ident" id="4762923">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762928">s</span><span class="op" id="4762929">.</span><span class="ident" id="4762930">err</span>&nbsp;<span class="op" id="4762934">=</span>&nbsp;<span class="ident" id="4762936">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762941">s</span><span class="op" id="4762942">.</span><span class="ident" id="4762943">mode</span>&nbsp;<span class="op" id="4762948">=</span>&nbsp;<span class="ident" id="4762950">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762957">s</span><span class="op" id="4762958">.</span><span class="ident" id="4762959">ch</span>&nbsp;<span class="op" id="4762962">=</span>&nbsp;<span class="string" id="4762964">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762969">s</span><span class="op" id="4762970">.</span><span class="ident" id="4762971">offset</span>&nbsp;<span class="op" id="4762978">=</span>&nbsp;<span class="num" id="4762980">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762983">s</span><span class="op" id="4762984">.</span><span class="ident" id="4762985">rdOffset</span>&nbsp;<span class="op" id="4762994">=</span>&nbsp;<span class="num" id="4762996">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4762999">s</span><span class="op" id="4763000">.</span><span class="ident" id="4763001">lineOffset</span>&nbsp;<span class="op" id="4763012">=</span>&nbsp;<span class="num" id="4763014">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763017">s</span><span class="op" id="4763018">.</span><span class="ident" id="4763019">insertSemi</span>&nbsp;<span class="op" id="4763030">=</span>&nbsp;<span class="builtintype" id="4763032">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763039">s</span><span class="op" id="4763040">.</span><span class="ident" id="4763041">ErrorCount</span>&nbsp;<span class="op" id="4763052">=</span>&nbsp;<span class="num" id="4763054">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763058">s</span><span class="op" id="4763059">.</span><span class="ident" id="4763060">next</span><span class="op" id="4763064">(</span><span class="op" id="4763065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763068">if</span>&nbsp;<span class="ident" id="4763071">s</span><span class="op" id="4763072">.</span><span class="ident" id="4763073">ch</span>&nbsp;<span class="op" id="4763076">==</span>&nbsp;<span class="ident" id="4763079">bom</span>&nbsp;<span class="op" id="4763083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763087">s</span><span class="op" id="4763088">.</span><span class="ident" id="4763089">next</span><span class="op" id="4763093">(</span><span class="op" id="4763094">)</span>&nbsp;<span class="comment" id="4763096">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4763129">}</span><br>
<span class="lineno">135</span><span class="op" id="4763131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4763134">func</span>&nbsp;<span class="op" id="4763139">(</span><span class="ident" id="4763140">s</span>&nbsp;<span class="op" id="4763142">*</span><span class="ident" id="4763143">Scanner</span><span class="op" id="4763150">)</span>&nbsp;<span class="builtintype" id="4763152">error</span><span class="op" id="4763157">(</span><span class="ident" id="4763158">offs</span>&nbsp;<span class="builtintype" id="4763163">int</span><span class="op" id="4763166">,</span>&nbsp;<span class="ident" id="4763168">msg</span>&nbsp;<span class="builtintype" id="4763172">string</span><span class="op" id="4763178">)</span>&nbsp;<span class="op" id="4763180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763183">if</span>&nbsp;<span class="ident" id="4763186">s</span><span class="op" id="4763187">.</span><span class="ident" id="4763188">err</span>&nbsp;<span class="op" id="4763192">!=</span>&nbsp;<span class="ident" id="4763195">nil</span>&nbsp;<span class="op" id="4763199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763203">s</span><span class="op" id="4763204">.</span><span class="ident" id="4763205">err</span><span class="op" id="4763208">(</span><span class="ident" id="4763209">s</span><span class="op" id="4763210">.</span><span class="ident" id="4763211">file</span><span class="op" id="4763215">.</span><span class="ident" id="4763216">Position</span><span class="op" id="4763224">(</span><span class="ident" id="4763225">s</span><span class="op" id="4763226">.</span><span class="ident" id="4763227">file</span><span class="op" id="4763231">.</span><span class="ident" id="4763232">Pos</span><span class="op" id="4763235">(</span><span class="ident" id="4763236">offs</span><span class="op" id="4763240">)</span><span class="op" id="4763241">)</span><span class="op" id="4763242">,</span>&nbsp;<span class="ident" id="4763244">msg</span><span class="op" id="4763247">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4763250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763253">s</span><span class="op" id="4763254">.</span><span class="ident" id="4763255">ErrorCount</span><span class="op" id="4763265">++</span><br>
<span class="lineno"></span><span class="op" id="4763268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4763271">var</span>&nbsp;<span class="ident" id="4763275">prefix</span>&nbsp;<span class="op" id="4763282">=</span>&nbsp;<span class="op" id="4763284">[</span><span class="op" id="4763285">]</span><span class="builtintype" id="4763286">byte</span><span class="op" id="4763290">(</span><span class="string" id="4763291">&#34;//line&nbsp;&#34;</span><span class="op" id="4763300">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="4763303">func</span>&nbsp;<span class="op" id="4763308">(</span><span class="ident" id="4763309">s</span>&nbsp;<span class="op" id="4763311">*</span><span class="ident" id="4763312">Scanner</span><span class="op" id="4763319">)</span>&nbsp;<span class="ident" id="4763321">interpretLineComment</span><span class="op" id="4763341">(</span><span class="ident" id="4763342">text</span>&nbsp;<span class="op" id="4763347">[</span><span class="op" id="4763348">]</span><span class="builtintype" id="4763349">byte</span><span class="op" id="4763353">)</span>&nbsp;<span class="op" id="4763355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763358">if</span>&nbsp;<span class="ident" id="4763361">bytes</span><span class="op" id="4763366">.</span><span class="ident" id="4763367">HasPrefix</span><span class="op" id="4763376">(</span><span class="ident" id="4763377">text</span><span class="op" id="4763381">,</span>&nbsp;<span class="ident" id="4763383">prefix</span><span class="op" id="4763389">)</span>&nbsp;<span class="op" id="4763391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4763395">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763437">if</span>&nbsp;<span class="ident" id="4763440">i</span>&nbsp;<span class="op" id="4763442">:=</span>&nbsp;<span class="ident" id="4763445">bytes</span><span class="op" id="4763450">.</span><span class="ident" id="4763451">LastIndex</span><span class="op" id="4763460">(</span><span class="ident" id="4763461">text</span><span class="op" id="4763465">,</span>&nbsp;<span class="op" id="4763467">[</span><span class="op" id="4763468">]</span><span class="builtintype" id="4763469">byte</span><span class="op" id="4763473">{</span><span class="string" id="4763474">&#39;:&#39;</span><span class="op" id="4763477">}</span><span class="op" id="4763478">)</span><span class="op" id="4763479">;</span>&nbsp;<span class="ident" id="4763481">i</span>&nbsp;<span class="op" id="4763483">&gt;</span>&nbsp;<span class="num" id="4763485">0</span>&nbsp;<span class="op" id="4763487">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763492">if</span>&nbsp;<span class="ident" id="4763495">line</span><span class="op" id="4763499">,</span>&nbsp;<span class="ident" id="4763501">err</span>&nbsp;<span class="op" id="4763505">:=</span>&nbsp;<span class="ident" id="4763508">strconv</span><span class="op" id="4763515">.</span><span class="ident" id="4763516">Atoi</span><span class="op" id="4763520">(</span><span class="builtintype" id="4763521">string</span><span class="op" id="4763527">(</span><span class="ident" id="4763528">text</span><span class="op" id="4763532">[</span><span class="ident" id="4763533">i</span><span class="op" id="4763534">+</span><span class="num" id="4763535">1</span><span class="op" id="4763536">:</span><span class="op" id="4763537">]</span><span class="op" id="4763538">)</span><span class="op" id="4763539">)</span><span class="op" id="4763540">;</span>&nbsp;<span class="ident" id="4763542">err</span>&nbsp;<span class="op" id="4763546">==</span>&nbsp;<span class="ident" id="4763549">nil</span>&nbsp;<span class="op" id="4763553">&amp;&amp;</span>&nbsp;<span class="ident" id="4763556">line</span>&nbsp;<span class="op" id="4763561">&gt;</span>&nbsp;<span class="num" id="4763563">0</span>&nbsp;<span class="op" id="4763565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4763571">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763613">filename</span>&nbsp;<span class="op" id="4763622">:=</span>&nbsp;<span class="builtintype" id="4763625">string</span><span class="op" id="4763631">(</span><span class="ident" id="4763632">bytes</span><span class="op" id="4763637">.</span><span class="ident" id="4763638">TrimSpace</span><span class="op" id="4763647">(</span><span class="ident" id="4763648">text</span><span class="op" id="4763652">[</span><span class="builtinfunc" id="4763653">len</span><span class="op" id="4763656">(</span><span class="ident" id="4763657">prefix</span><span class="op" id="4763663">)</span><span class="op" id="4763664">:</span><span class="ident" id="4763665">i</span><span class="op" id="4763666">]</span><span class="op" id="4763667">)</span><span class="op" id="4763668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763674">if</span>&nbsp;<span class="ident" id="4763677">filename</span>&nbsp;<span class="op" id="4763686">!=</span>&nbsp;<span class="string" id="4763689">&#34;&#34;</span>&nbsp;<span class="op" id="4763692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763699">filename</span>&nbsp;<span class="op" id="4763708">=</span>&nbsp;<span class="ident" id="4763710">filepath</span><span class="op" id="4763718">.</span><span class="ident" id="4763719">Clean</span><span class="op" id="4763724">(</span><span class="ident" id="4763725">filename</span><span class="op" id="4763733">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4763740">if</span>&nbsp;<span class="op" id="4763743">!</span><span class="ident" id="4763744">filepath</span><span class="op" id="4763752">.</span><span class="ident" id="4763753">IsAbs</span><span class="op" id="4763758">(</span><span class="ident" id="4763759">filename</span><span class="op" id="4763767">)</span>&nbsp;<span class="op" id="4763769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4763777">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763830">filename</span>&nbsp;<span class="op" id="4763839">=</span>&nbsp;<span class="ident" id="4763841">filepath</span><span class="op" id="4763849">.</span><span class="ident" id="4763850">Join</span><span class="op" id="4763854">(</span><span class="ident" id="4763855">s</span><span class="op" id="4763856">.</span><span class="ident" id="4763857">dir</span><span class="op" id="4763860">,</span>&nbsp;<span class="ident" id="4763862">filename</span><span class="op" id="4763870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4763877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4763883">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4763889">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4763920">s</span><span class="op" id="4763921">.</span><span class="ident" id="4763922">file</span><span class="op" id="4763926">.</span><span class="ident" id="4763927">AddLineInfo</span><span class="op" id="4763938">(</span><span class="ident" id="4763939">s</span><span class="op" id="4763940">.</span><span class="ident" id="4763941">lineOffset</span><span class="op" id="4763951">+</span><span class="builtinfunc" id="4763952">len</span><span class="op" id="4763955">(</span><span class="ident" id="4763956">text</span><span class="op" id="4763960">)</span><span class="op" id="4763961">+</span><span class="num" id="4763962">1</span><span class="op" id="4763963">,</span>&nbsp;<span class="ident" id="4763965">filename</span><span class="op" id="4763973">,</span>&nbsp;<span class="ident" id="4763975">line</span><span class="op" id="4763979">)</span>&nbsp;<span class="comment" id="4763981">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764042">}</span><br>
<span class="lineno">165</span><span class="op" id="4764044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4764047">func</span>&nbsp;<span class="op" id="4764052">(</span><span class="ident" id="4764053">s</span>&nbsp;<span class="op" id="4764055">*</span><span class="ident" id="4764056">Scanner</span><span class="op" id="4764063">)</span>&nbsp;<span class="ident" id="4764065">scanComment</span><span class="op" id="4764076">(</span><span class="op" id="4764077">)</span>&nbsp;<span class="builtintype" id="4764079">string</span>&nbsp;<span class="op" id="4764086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764089">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764150">offs</span>&nbsp;<span class="op" id="4764155">:=</span>&nbsp;<span class="ident" id="4764158">s</span><span class="op" id="4764159">.</span><span class="ident" id="4764160">offset</span>&nbsp;<span class="op" id="4764167">-</span>&nbsp;<span class="num" id="4764169">1</span>&nbsp;<span class="comment" id="4764171">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764199">hasCR</span>&nbsp;<span class="op" id="4764205">:=</span>&nbsp;<span class="builtintype" id="4764208">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764216">if</span>&nbsp;<span class="ident" id="4764219">s</span><span class="op" id="4764220">.</span><span class="ident" id="4764221">ch</span>&nbsp;<span class="op" id="4764224">==</span>&nbsp;<span class="string" id="4764227">&#39;/&#39;</span>&nbsp;<span class="op" id="4764231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764235">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764254">s</span><span class="op" id="4764255">.</span><span class="ident" id="4764256">next</span><span class="op" id="4764260">(</span><span class="op" id="4764261">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764265">for</span>&nbsp;<span class="ident" id="4764269">s</span><span class="op" id="4764270">.</span><span class="ident" id="4764271">ch</span>&nbsp;<span class="op" id="4764274">!=</span>&nbsp;<span class="string" id="4764277">&#39;\n&#39;</span>&nbsp;<span class="op" id="4764282">&amp;&amp;</span>&nbsp;<span class="ident" id="4764285">s</span><span class="op" id="4764286">.</span><span class="ident" id="4764287">ch</span>&nbsp;<span class="op" id="4764290">&gt;=</span>&nbsp;<span class="num" id="4764293">0</span>&nbsp;<span class="op" id="4764295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764300">if</span>&nbsp;<span class="ident" id="4764303">s</span><span class="op" id="4764304">.</span><span class="ident" id="4764305">ch</span>&nbsp;<span class="op" id="4764308">==</span>&nbsp;<span class="string" id="4764311">&#39;\r&#39;</span>&nbsp;<span class="op" id="4764316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764322">hasCR</span>&nbsp;<span class="op" id="4764328">=</span>&nbsp;<span class="builtintype" id="4764330">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764343">s</span><span class="op" id="4764344">.</span><span class="ident" id="4764345">next</span><span class="op" id="4764349">(</span><span class="op" id="4764350">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764358">if</span>&nbsp;<span class="ident" id="4764361">offs</span>&nbsp;<span class="op" id="4764366">==</span>&nbsp;<span class="ident" id="4764369">s</span><span class="op" id="4764370">.</span><span class="ident" id="4764371">lineOffset</span>&nbsp;<span class="op" id="4764382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764387">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764445">s</span><span class="op" id="4764446">.</span><span class="ident" id="4764447">interpretLineComment</span><span class="op" id="4764467">(</span><span class="ident" id="4764468">s</span><span class="op" id="4764469">.</span><span class="ident" id="4764470">src</span><span class="op" id="4764473">[</span><span class="ident" id="4764474">offs</span><span class="op" id="4764478">:</span><span class="ident" id="4764479">s</span><span class="op" id="4764480">.</span><span class="ident" id="4764481">offset</span><span class="op" id="4764487">]</span><span class="op" id="4764488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764492">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764496">goto</span>&nbsp;<span class="ident" id="4764501">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764511">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764532">s</span><span class="op" id="4764533">.</span><span class="ident" id="4764534">next</span><span class="op" id="4764538">(</span><span class="op" id="4764539">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764542">for</span>&nbsp;<span class="ident" id="4764546">s</span><span class="op" id="4764547">.</span><span class="ident" id="4764548">ch</span>&nbsp;<span class="op" id="4764551">&gt;=</span>&nbsp;<span class="num" id="4764554">0</span>&nbsp;<span class="op" id="4764556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764560">ch</span>&nbsp;<span class="op" id="4764563">:=</span>&nbsp;<span class="ident" id="4764566">s</span><span class="op" id="4764567">.</span><span class="ident" id="4764568">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764573">if</span>&nbsp;<span class="ident" id="4764576">ch</span>&nbsp;<span class="op" id="4764579">==</span>&nbsp;<span class="string" id="4764582">&#39;\r&#39;</span>&nbsp;<span class="op" id="4764587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764592">hasCR</span>&nbsp;<span class="op" id="4764598">=</span>&nbsp;<span class="builtintype" id="4764600">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764607">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764611">s</span><span class="op" id="4764612">.</span><span class="ident" id="4764613">next</span><span class="op" id="4764617">(</span><span class="op" id="4764618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764622">if</span>&nbsp;<span class="ident" id="4764625">ch</span>&nbsp;<span class="op" id="4764628">==</span>&nbsp;<span class="string" id="4764631">&#39;*&#39;</span>&nbsp;<span class="op" id="4764635">&amp;&amp;</span>&nbsp;<span class="ident" id="4764638">s</span><span class="op" id="4764639">.</span><span class="ident" id="4764640">ch</span>&nbsp;<span class="op" id="4764643">==</span>&nbsp;<span class="string" id="4764646">&#39;/&#39;</span>&nbsp;<span class="op" id="4764650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764655">s</span><span class="op" id="4764656">.</span><span class="ident" id="4764657">next</span><span class="op" id="4764661">(</span><span class="op" id="4764662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764667">goto</span>&nbsp;<span class="ident" id="4764672">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764679">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764686">s</span><span class="op" id="4764687">.</span><span class="builtintype" id="4764688">error</span><span class="op" id="4764693">(</span><span class="ident" id="4764694">offs</span><span class="op" id="4764698">,</span>&nbsp;<span class="string" id="4764700">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4764724">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4764727">exit</span><span class="op" id="4764731">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764734">lit</span>&nbsp;<span class="op" id="4764738">:=</span>&nbsp;<span class="ident" id="4764741">s</span><span class="op" id="4764742">.</span><span class="ident" id="4764743">src</span><span class="op" id="4764746">[</span><span class="ident" id="4764747">offs</span><span class="op" id="4764751">:</span><span class="ident" id="4764752">s</span><span class="op" id="4764753">.</span><span class="ident" id="4764754">offset</span><span class="op" id="4764760">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764763">if</span>&nbsp;<span class="ident" id="4764766">hasCR</span>&nbsp;<span class="op" id="4764772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764776">lit</span>&nbsp;<span class="op" id="4764780">=</span>&nbsp;<span class="ident" id="4764782">stripCR</span><span class="op" id="4764789">(</span><span class="ident" id="4764790">lit</span><span class="op" id="4764793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4764796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764800">return</span>&nbsp;<span class="builtintype" id="4764807">string</span><span class="op" id="4764813">(</span><span class="ident" id="4764814">lit</span><span class="op" id="4764817">)</span><br>
<span class="lineno"></span><span class="op" id="4764819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4764822">func</span>&nbsp;<span class="op" id="4764827">(</span><span class="ident" id="4764828">s</span>&nbsp;<span class="op" id="4764830">*</span><span class="ident" id="4764831">Scanner</span><span class="op" id="4764838">)</span>&nbsp;<span class="ident" id="4764840">findLineEnd</span><span class="op" id="4764851">(</span><span class="op" id="4764852">)</span>&nbsp;<span class="builtintype" id="4764854">bool</span>&nbsp;<span class="op" id="4764859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764862">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4764896">defer</span>&nbsp;<span class="keyword" id="4764902">func</span><span class="op" id="4764906">(</span><span class="ident" id="4764907">offs</span>&nbsp;<span class="builtintype" id="4764912">int</span><span class="op" id="4764915">)</span>&nbsp;<span class="op" id="4764917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4764921">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4764987">s</span><span class="op" id="4764988">.</span><span class="ident" id="4764989">ch</span>&nbsp;<span class="op" id="4764992">=</span>&nbsp;<span class="string" id="4764994">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765000">s</span><span class="op" id="4765001">.</span><span class="ident" id="4765002">offset</span>&nbsp;<span class="op" id="4765009">=</span>&nbsp;<span class="ident" id="4765011">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765018">s</span><span class="op" id="4765019">.</span><span class="ident" id="4765020">rdOffset</span>&nbsp;<span class="op" id="4765029">=</span>&nbsp;<span class="ident" id="4765031">offs</span>&nbsp;<span class="op" id="4765036">+</span>&nbsp;<span class="num" id="4765038">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765042">s</span><span class="op" id="4765043">.</span><span class="ident" id="4765044">next</span><span class="op" id="4765048">(</span><span class="op" id="4765049">)</span>&nbsp;<span class="comment" id="4765051">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765081">}</span><span class="op" id="4765082">(</span><span class="ident" id="4765083">s</span><span class="op" id="4765084">.</span><span class="ident" id="4765085">offset</span>&nbsp;<span class="op" id="4765092">-</span>&nbsp;<span class="num" id="4765094">1</span><span class="op" id="4765095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4765099">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765166">for</span>&nbsp;<span class="ident" id="4765170">s</span><span class="op" id="4765171">.</span><span class="ident" id="4765172">ch</span>&nbsp;<span class="op" id="4765175">==</span>&nbsp;<span class="string" id="4765178">&#39;/&#39;</span>&nbsp;<span class="op" id="4765182">||</span>&nbsp;<span class="ident" id="4765185">s</span><span class="op" id="4765186">.</span><span class="ident" id="4765187">ch</span>&nbsp;<span class="op" id="4765190">==</span>&nbsp;<span class="string" id="4765193">&#39;*&#39;</span>&nbsp;<span class="op" id="4765197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765201">if</span>&nbsp;<span class="ident" id="4765204">s</span><span class="op" id="4765205">.</span><span class="ident" id="4765206">ch</span>&nbsp;<span class="op" id="4765209">==</span>&nbsp;<span class="string" id="4765212">&#39;/&#39;</span>&nbsp;<span class="op" id="4765216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4765221">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765267">return</span>&nbsp;<span class="builtintype" id="4765274">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765281">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4765285">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765325">s</span><span class="op" id="4765326">.</span><span class="ident" id="4765327">next</span><span class="op" id="4765331">(</span><span class="op" id="4765332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765336">for</span>&nbsp;<span class="ident" id="4765340">s</span><span class="op" id="4765341">.</span><span class="ident" id="4765342">ch</span>&nbsp;<span class="op" id="4765345">&gt;=</span>&nbsp;<span class="num" id="4765348">0</span>&nbsp;<span class="op" id="4765350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765355">ch</span>&nbsp;<span class="op" id="4765358">:=</span>&nbsp;<span class="ident" id="4765361">s</span><span class="op" id="4765362">.</span><span class="ident" id="4765363">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765369">if</span>&nbsp;<span class="ident" id="4765372">ch</span>&nbsp;<span class="op" id="4765375">==</span>&nbsp;<span class="string" id="4765378">&#39;\n&#39;</span>&nbsp;<span class="op" id="4765383">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765389">return</span>&nbsp;<span class="builtintype" id="4765396">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765409">s</span><span class="op" id="4765410">.</span><span class="ident" id="4765411">next</span><span class="op" id="4765415">(</span><span class="op" id="4765416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765421">if</span>&nbsp;<span class="ident" id="4765424">ch</span>&nbsp;<span class="op" id="4765427">==</span>&nbsp;<span class="string" id="4765430">&#39;*&#39;</span>&nbsp;<span class="op" id="4765434">&amp;&amp;</span>&nbsp;<span class="ident" id="4765437">s</span><span class="op" id="4765438">.</span><span class="ident" id="4765439">ch</span>&nbsp;<span class="op" id="4765442">==</span>&nbsp;<span class="string" id="4765445">&#39;/&#39;</span>&nbsp;<span class="op" id="4765449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765455">s</span><span class="op" id="4765456">.</span><span class="ident" id="4765457">next</span><span class="op" id="4765461">(</span><span class="op" id="4765462">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765468">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765485">s</span><span class="op" id="4765486">.</span><span class="ident" id="4765487">skipWhitespace</span><span class="op" id="4765501">(</span><span class="op" id="4765502">)</span>&nbsp;<span class="comment" id="4765504">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765529">if</span>&nbsp;<span class="ident" id="4765532">s</span><span class="op" id="4765533">.</span><span class="ident" id="4765534">ch</span>&nbsp;<span class="op" id="4765537">&lt;</span>&nbsp;<span class="num" id="4765539">0</span>&nbsp;<span class="op" id="4765541">||</span>&nbsp;<span class="ident" id="4765544">s</span><span class="op" id="4765545">.</span><span class="ident" id="4765546">ch</span>&nbsp;<span class="op" id="4765549">==</span>&nbsp;<span class="string" id="4765552">&#39;\n&#39;</span>&nbsp;<span class="op" id="4765557">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765562">return</span>&nbsp;<span class="builtintype" id="4765569">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765580">if</span>&nbsp;<span class="ident" id="4765583">s</span><span class="op" id="4765584">.</span><span class="ident" id="4765585">ch</span>&nbsp;<span class="op" id="4765588">!=</span>&nbsp;<span class="string" id="4765591">&#39;/&#39;</span>&nbsp;<span class="op" id="4765595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4765600">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765624">return</span>&nbsp;<span class="builtintype" id="4765631">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765643">s</span><span class="op" id="4765644">.</span><span class="ident" id="4765645">next</span><span class="op" id="4765649">(</span><span class="op" id="4765650">)</span>&nbsp;<span class="comment" id="4765652">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4765668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765672">return</span>&nbsp;<span class="builtintype" id="4765679">false</span><br>
<span class="lineno">255</span><span class="op" id="4765685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4765688">func</span>&nbsp;<span class="ident" id="4765693">isLetter</span><span class="op" id="4765701">(</span><span class="ident" id="4765702">ch</span>&nbsp;<span class="builtintype" id="4765705">rune</span><span class="op" id="4765709">)</span>&nbsp;<span class="builtintype" id="4765711">bool</span>&nbsp;<span class="op" id="4765716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765719">return</span>&nbsp;<span class="string" id="4765726">&#39;a&#39;</span>&nbsp;<span class="op" id="4765730">&lt;=</span>&nbsp;<span class="ident" id="4765733">ch</span>&nbsp;<span class="op" id="4765736">&amp;&amp;</span>&nbsp;<span class="ident" id="4765739">ch</span>&nbsp;<span class="op" id="4765742">&lt;=</span>&nbsp;<span class="string" id="4765745">&#39;z&#39;</span>&nbsp;<span class="op" id="4765749">||</span>&nbsp;<span class="string" id="4765752">&#39;A&#39;</span>&nbsp;<span class="op" id="4765756">&lt;=</span>&nbsp;<span class="ident" id="4765759">ch</span>&nbsp;<span class="op" id="4765762">&amp;&amp;</span>&nbsp;<span class="ident" id="4765765">ch</span>&nbsp;<span class="op" id="4765768">&lt;=</span>&nbsp;<span class="string" id="4765771">&#39;Z&#39;</span>&nbsp;<span class="op" id="4765775">||</span>&nbsp;<span class="ident" id="4765778">ch</span>&nbsp;<span class="op" id="4765781">==</span>&nbsp;<span class="string" id="4765784">&#39;_&#39;</span>&nbsp;<span class="op" id="4765788">||</span>&nbsp;<span class="ident" id="4765791">ch</span>&nbsp;<span class="op" id="4765794">&gt;=</span>&nbsp;<span class="num" id="4765797">0x80</span>&nbsp;<span class="op" id="4765802">&amp;&amp;</span>&nbsp;<span class="ident" id="4765805">unicode</span><span class="op" id="4765812">.</span><span class="ident" id="4765813">IsLetter</span><span class="op" id="4765821">(</span><span class="ident" id="4765822">ch</span><span class="op" id="4765824">)</span><br>
<span class="lineno"></span><span class="op" id="4765826">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4765829">func</span>&nbsp;<span class="ident" id="4765834">isDigit</span><span class="op" id="4765841">(</span><span class="ident" id="4765842">ch</span>&nbsp;<span class="builtintype" id="4765845">rune</span><span class="op" id="4765849">)</span>&nbsp;<span class="builtintype" id="4765851">bool</span>&nbsp;<span class="op" id="4765856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765859">return</span>&nbsp;<span class="string" id="4765866">&#39;0&#39;</span>&nbsp;<span class="op" id="4765870">&lt;=</span>&nbsp;<span class="ident" id="4765873">ch</span>&nbsp;<span class="op" id="4765876">&amp;&amp;</span>&nbsp;<span class="ident" id="4765879">ch</span>&nbsp;<span class="op" id="4765882">&lt;=</span>&nbsp;<span class="string" id="4765885">&#39;9&#39;</span>&nbsp;<span class="op" id="4765889">||</span>&nbsp;<span class="ident" id="4765892">ch</span>&nbsp;<span class="op" id="4765895">&gt;=</span>&nbsp;<span class="num" id="4765898">0x80</span>&nbsp;<span class="op" id="4765903">&amp;&amp;</span>&nbsp;<span class="ident" id="4765906">unicode</span><span class="op" id="4765913">.</span><span class="ident" id="4765914">IsDigit</span><span class="op" id="4765921">(</span><span class="ident" id="4765922">ch</span><span class="op" id="4765924">)</span><br>
<span class="lineno"></span><span class="op" id="4765926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="4765929">func</span>&nbsp;<span class="op" id="4765934">(</span><span class="ident" id="4765935">s</span>&nbsp;<span class="op" id="4765937">*</span><span class="ident" id="4765938">Scanner</span><span class="op" id="4765945">)</span>&nbsp;<span class="ident" id="4765947">scanIdentifier</span><span class="op" id="4765961">(</span><span class="op" id="4765962">)</span>&nbsp;<span class="builtintype" id="4765964">string</span>&nbsp;<span class="op" id="4765971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4765974">offs</span>&nbsp;<span class="op" id="4765979">:=</span>&nbsp;<span class="ident" id="4765982">s</span><span class="op" id="4765983">.</span><span class="ident" id="4765984">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4765992">for</span>&nbsp;<span class="ident" id="4765996">isLetter</span><span class="op" id="4766004">(</span><span class="ident" id="4766005">s</span><span class="op" id="4766006">.</span><span class="ident" id="4766007">ch</span><span class="op" id="4766009">)</span>&nbsp;<span class="op" id="4766011">||</span>&nbsp;<span class="ident" id="4766014">isDigit</span><span class="op" id="4766021">(</span><span class="ident" id="4766022">s</span><span class="op" id="4766023">.</span><span class="ident" id="4766024">ch</span><span class="op" id="4766026">)</span>&nbsp;<span class="op" id="4766028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766032">s</span><span class="op" id="4766033">.</span><span class="ident" id="4766034">next</span><span class="op" id="4766038">(</span><span class="op" id="4766039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766042">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766045">return</span>&nbsp;<span class="builtintype" id="4766052">string</span><span class="op" id="4766058">(</span><span class="ident" id="4766059">s</span><span class="op" id="4766060">.</span><span class="ident" id="4766061">src</span><span class="op" id="4766064">[</span><span class="ident" id="4766065">offs</span><span class="op" id="4766069">:</span><span class="ident" id="4766070">s</span><span class="op" id="4766071">.</span><span class="ident" id="4766072">offset</span><span class="op" id="4766078">]</span><span class="op" id="4766079">)</span><br>
<span class="lineno"></span><span class="op" id="4766081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4766084">func</span>&nbsp;<span class="ident" id="4766089">digitVal</span><span class="op" id="4766097">(</span><span class="ident" id="4766098">ch</span>&nbsp;<span class="builtintype" id="4766101">rune</span><span class="op" id="4766105">)</span>&nbsp;<span class="builtintype" id="4766107">int</span>&nbsp;<span class="op" id="4766111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766114">switch</span>&nbsp;<span class="op" id="4766121">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766124">case</span>&nbsp;<span class="string" id="4766129">&#39;0&#39;</span>&nbsp;<span class="op" id="4766133">&lt;=</span>&nbsp;<span class="ident" id="4766136">ch</span>&nbsp;<span class="op" id="4766139">&amp;&amp;</span>&nbsp;<span class="ident" id="4766142">ch</span>&nbsp;<span class="op" id="4766145">&lt;=</span>&nbsp;<span class="string" id="4766148">&#39;9&#39;</span><span class="op" id="4766151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766155">return</span>&nbsp;<span class="builtintype" id="4766162">int</span><span class="op" id="4766165">(</span><span class="ident" id="4766166">ch</span>&nbsp;<span class="op" id="4766169">-</span>&nbsp;<span class="string" id="4766171">&#39;0&#39;</span><span class="op" id="4766174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766177">case</span>&nbsp;<span class="string" id="4766182">&#39;a&#39;</span>&nbsp;<span class="op" id="4766186">&lt;=</span>&nbsp;<span class="ident" id="4766189">ch</span>&nbsp;<span class="op" id="4766192">&amp;&amp;</span>&nbsp;<span class="ident" id="4766195">ch</span>&nbsp;<span class="op" id="4766198">&lt;=</span>&nbsp;<span class="string" id="4766201">&#39;f&#39;</span><span class="op" id="4766204">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766208">return</span>&nbsp;<span class="builtintype" id="4766215">int</span><span class="op" id="4766218">(</span><span class="ident" id="4766219">ch</span>&nbsp;<span class="op" id="4766222">-</span>&nbsp;<span class="string" id="4766224">&#39;a&#39;</span>&nbsp;<span class="op" id="4766228">+</span>&nbsp;<span class="num" id="4766230">10</span><span class="op" id="4766232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766235">case</span>&nbsp;<span class="string" id="4766240">&#39;A&#39;</span>&nbsp;<span class="op" id="4766244">&lt;=</span>&nbsp;<span class="ident" id="4766247">ch</span>&nbsp;<span class="op" id="4766250">&amp;&amp;</span>&nbsp;<span class="ident" id="4766253">ch</span>&nbsp;<span class="op" id="4766256">&lt;=</span>&nbsp;<span class="string" id="4766259">&#39;F&#39;</span><span class="op" id="4766262">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766266">return</span>&nbsp;<span class="builtintype" id="4766273">int</span><span class="op" id="4766276">(</span><span class="ident" id="4766277">ch</span>&nbsp;<span class="op" id="4766280">-</span>&nbsp;<span class="string" id="4766282">&#39;A&#39;</span>&nbsp;<span class="op" id="4766286">+</span>&nbsp;<span class="num" id="4766288">10</span><span class="op" id="4766290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766296">return</span>&nbsp;<span class="num" id="4766303">16</span>&nbsp;<span class="comment" id="4766306">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="4766341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4766344">func</span>&nbsp;<span class="op" id="4766349">(</span><span class="ident" id="4766350">s</span>&nbsp;<span class="op" id="4766352">*</span><span class="ident" id="4766353">Scanner</span><span class="op" id="4766360">)</span>&nbsp;<span class="ident" id="4766362">scanMantissa</span><span class="op" id="4766374">(</span><span class="ident" id="4766375">base</span>&nbsp;<span class="builtintype" id="4766380">int</span><span class="op" id="4766383">)</span>&nbsp;<span class="op" id="4766385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766388">for</span>&nbsp;<span class="ident" id="4766392">digitVal</span><span class="op" id="4766400">(</span><span class="ident" id="4766401">s</span><span class="op" id="4766402">.</span><span class="ident" id="4766403">ch</span><span class="op" id="4766405">)</span>&nbsp;<span class="op" id="4766407">&lt;</span>&nbsp;<span class="ident" id="4766409">base</span>&nbsp;<span class="op" id="4766414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766418">s</span><span class="op" id="4766419">.</span><span class="ident" id="4766420">next</span><span class="op" id="4766424">(</span><span class="op" id="4766425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766428">}</span><br>
<span class="lineno"></span><span class="op" id="4766430">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="4766433">func</span>&nbsp;<span class="op" id="4766438">(</span><span class="ident" id="4766439">s</span>&nbsp;<span class="op" id="4766441">*</span><span class="ident" id="4766442">Scanner</span><span class="op" id="4766449">)</span>&nbsp;<span class="ident" id="4766451">scanNumber</span><span class="op" id="4766461">(</span><span class="ident" id="4766462">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="4766479">bool</span><span class="op" id="4766483">)</span>&nbsp;<span class="op" id="4766485">(</span><span class="ident" id="4766486">token</span><span class="op" id="4766491">.</span><span class="ident" id="4766492">Token</span><span class="op" id="4766497">,</span>&nbsp;<span class="builtintype" id="4766499">string</span><span class="op" id="4766505">)</span>&nbsp;<span class="op" id="4766507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4766510">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766534">offs</span>&nbsp;<span class="op" id="4766539">:=</span>&nbsp;<span class="ident" id="4766542">s</span><span class="op" id="4766543">.</span><span class="ident" id="4766544">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766552">tok</span>&nbsp;<span class="op" id="4766556">:=</span>&nbsp;<span class="ident" id="4766559">token</span><span class="op" id="4766564">.</span><span class="ident" id="4766565">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766571">if</span>&nbsp;<span class="ident" id="4766574">seenDecimalPoint</span>&nbsp;<span class="op" id="4766591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766595">offs</span><span class="op" id="4766599">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766604">tok</span>&nbsp;<span class="op" id="4766608">=</span>&nbsp;<span class="ident" id="4766610">token</span><span class="op" id="4766615">.</span><span class="ident" id="4766616">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766624">s</span><span class="op" id="4766625">.</span><span class="ident" id="4766626">scanMantissa</span><span class="op" id="4766638">(</span><span class="num" id="4766639">10</span><span class="op" id="4766641">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766645">goto</span>&nbsp;<span class="ident" id="4766650">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766664">if</span>&nbsp;<span class="ident" id="4766667">s</span><span class="op" id="4766668">.</span><span class="ident" id="4766669">ch</span>&nbsp;<span class="op" id="4766672">==</span>&nbsp;<span class="string" id="4766675">&#39;0&#39;</span>&nbsp;<span class="op" id="4766679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4766683">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766701">offs</span>&nbsp;<span class="op" id="4766706">:=</span>&nbsp;<span class="ident" id="4766709">s</span><span class="op" id="4766710">.</span><span class="ident" id="4766711">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766720">s</span><span class="op" id="4766721">.</span><span class="ident" id="4766722">next</span><span class="op" id="4766726">(</span><span class="op" id="4766727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766731">if</span>&nbsp;<span class="ident" id="4766734">s</span><span class="op" id="4766735">.</span><span class="ident" id="4766736">ch</span>&nbsp;<span class="op" id="4766739">==</span>&nbsp;<span class="string" id="4766742">&#39;x&#39;</span>&nbsp;<span class="op" id="4766746">||</span>&nbsp;<span class="ident" id="4766749">s</span><span class="op" id="4766750">.</span><span class="ident" id="4766751">ch</span>&nbsp;<span class="op" id="4766754">==</span>&nbsp;<span class="string" id="4766757">&#39;X&#39;</span>&nbsp;<span class="op" id="4766761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4766766">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766788">s</span><span class="op" id="4766789">.</span><span class="ident" id="4766790">next</span><span class="op" id="4766794">(</span><span class="op" id="4766795">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766800">s</span><span class="op" id="4766801">.</span><span class="ident" id="4766802">scanMantissa</span><span class="op" id="4766814">(</span><span class="num" id="4766815">16</span><span class="op" id="4766817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4766822">if</span>&nbsp;<span class="ident" id="4766825">s</span><span class="op" id="4766826">.</span><span class="ident" id="4766827">offset</span><span class="op" id="4766833">-</span><span class="ident" id="4766834">offs</span>&nbsp;<span class="op" id="4766839">&lt;=</span>&nbsp;<span class="num" id="4766842">2</span>&nbsp;<span class="op" id="4766844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4766850">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766883">s</span><span class="op" id="4766884">.</span><span class="builtintype" id="4766885">error</span><span class="op" id="4766890">(</span><span class="ident" id="4766891">offs</span><span class="op" id="4766895">,</span>&nbsp;<span class="string" id="4766897">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="4766925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766930">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4766934">}</span>&nbsp;<span class="keyword" id="4766936">else</span>&nbsp;<span class="op" id="4766941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4766946">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4766971">seenDecimalDigit</span>&nbsp;<span class="op" id="4766988">:=</span>&nbsp;<span class="builtintype" id="4766991">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767000">s</span><span class="op" id="4767001">.</span><span class="ident" id="4767002">scanMantissa</span><span class="op" id="4767014">(</span><span class="num" id="4767015">8</span><span class="op" id="4767016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767021">if</span>&nbsp;<span class="ident" id="4767024">s</span><span class="op" id="4767025">.</span><span class="ident" id="4767026">ch</span>&nbsp;<span class="op" id="4767029">==</span>&nbsp;<span class="string" id="4767032">&#39;8&#39;</span>&nbsp;<span class="op" id="4767036">||</span>&nbsp;<span class="ident" id="4767039">s</span><span class="op" id="4767040">.</span><span class="ident" id="4767041">ch</span>&nbsp;<span class="op" id="4767044">==</span>&nbsp;<span class="string" id="4767047">&#39;9&#39;</span>&nbsp;<span class="op" id="4767051">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4767057">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767091">seenDecimalDigit</span>&nbsp;<span class="op" id="4767108">=</span>&nbsp;<span class="builtintype" id="4767110">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767119">s</span><span class="op" id="4767120">.</span><span class="ident" id="4767121">scanMantissa</span><span class="op" id="4767133">(</span><span class="num" id="4767134">10</span><span class="op" id="4767136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767146">if</span>&nbsp;<span class="ident" id="4767149">s</span><span class="op" id="4767150">.</span><span class="ident" id="4767151">ch</span>&nbsp;<span class="op" id="4767154">==</span>&nbsp;<span class="string" id="4767157">&#39;.&#39;</span>&nbsp;<span class="op" id="4767161">||</span>&nbsp;<span class="ident" id="4767164">s</span><span class="op" id="4767165">.</span><span class="ident" id="4767166">ch</span>&nbsp;<span class="op" id="4767169">==</span>&nbsp;<span class="string" id="4767172">&#39;e&#39;</span>&nbsp;<span class="op" id="4767176">||</span>&nbsp;<span class="ident" id="4767179">s</span><span class="op" id="4767180">.</span><span class="ident" id="4767181">ch</span>&nbsp;<span class="op" id="4767184">==</span>&nbsp;<span class="string" id="4767187">&#39;E&#39;</span>&nbsp;<span class="op" id="4767191">||</span>&nbsp;<span class="ident" id="4767194">s</span><span class="op" id="4767195">.</span><span class="ident" id="4767196">ch</span>&nbsp;<span class="op" id="4767199">==</span>&nbsp;<span class="string" id="4767202">&#39;i&#39;</span>&nbsp;<span class="op" id="4767206">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767212">goto</span>&nbsp;<span class="ident" id="4767217">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4767234">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767250">if</span>&nbsp;<span class="ident" id="4767253">seenDecimalDigit</span>&nbsp;<span class="op" id="4767270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767276">s</span><span class="op" id="4767277">.</span><span class="builtintype" id="4767278">error</span><span class="op" id="4767283">(</span><span class="ident" id="4767284">offs</span><span class="op" id="4767288">,</span>&nbsp;<span class="string" id="4767290">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="4767312">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767325">goto</span>&nbsp;<span class="ident" id="4767330">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4767340">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767365">s</span><span class="op" id="4767366">.</span><span class="ident" id="4767367">scanMantissa</span><span class="op" id="4767379">(</span><span class="num" id="4767380">10</span><span class="op" id="4767382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4767385">fraction</span><span class="op" id="4767393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767396">if</span>&nbsp;<span class="ident" id="4767399">s</span><span class="op" id="4767400">.</span><span class="ident" id="4767401">ch</span>&nbsp;<span class="op" id="4767404">==</span>&nbsp;<span class="string" id="4767407">&#39;.&#39;</span>&nbsp;<span class="op" id="4767411">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767415">tok</span>&nbsp;<span class="op" id="4767419">=</span>&nbsp;<span class="ident" id="4767421">token</span><span class="op" id="4767426">.</span><span class="ident" id="4767427">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767435">s</span><span class="op" id="4767436">.</span><span class="ident" id="4767437">next</span><span class="op" id="4767441">(</span><span class="op" id="4767442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767446">s</span><span class="op" id="4767447">.</span><span class="ident" id="4767448">scanMantissa</span><span class="op" id="4767460">(</span><span class="num" id="4767461">10</span><span class="op" id="4767463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="4767469">exponent</span><span class="op" id="4767477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767480">if</span>&nbsp;<span class="ident" id="4767483">s</span><span class="op" id="4767484">.</span><span class="ident" id="4767485">ch</span>&nbsp;<span class="op" id="4767488">==</span>&nbsp;<span class="string" id="4767491">&#39;e&#39;</span>&nbsp;<span class="op" id="4767495">||</span>&nbsp;<span class="ident" id="4767498">s</span><span class="op" id="4767499">.</span><span class="ident" id="4767500">ch</span>&nbsp;<span class="op" id="4767503">==</span>&nbsp;<span class="string" id="4767506">&#39;E&#39;</span>&nbsp;<span class="op" id="4767510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767514">tok</span>&nbsp;<span class="op" id="4767518">=</span>&nbsp;<span class="ident" id="4767520">token</span><span class="op" id="4767525">.</span><span class="ident" id="4767526">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767534">s</span><span class="op" id="4767535">.</span><span class="ident" id="4767536">next</span><span class="op" id="4767540">(</span><span class="op" id="4767541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767545">if</span>&nbsp;<span class="ident" id="4767548">s</span><span class="op" id="4767549">.</span><span class="ident" id="4767550">ch</span>&nbsp;<span class="op" id="4767553">==</span>&nbsp;<span class="string" id="4767556">&#39;-&#39;</span>&nbsp;<span class="op" id="4767560">||</span>&nbsp;<span class="ident" id="4767563">s</span><span class="op" id="4767564">.</span><span class="ident" id="4767565">ch</span>&nbsp;<span class="op" id="4767568">==</span>&nbsp;<span class="string" id="4767571">&#39;+&#39;</span>&nbsp;<span class="op" id="4767575">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767580">s</span><span class="op" id="4767581">.</span><span class="ident" id="4767582">next</span><span class="op" id="4767586">(</span><span class="op" id="4767587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767595">s</span><span class="op" id="4767596">.</span><span class="ident" id="4767597">scanMantissa</span><span class="op" id="4767609">(</span><span class="num" id="4767610">10</span><span class="op" id="4767612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767619">if</span>&nbsp;<span class="ident" id="4767622">s</span><span class="op" id="4767623">.</span><span class="ident" id="4767624">ch</span>&nbsp;<span class="op" id="4767627">==</span>&nbsp;<span class="string" id="4767630">&#39;i&#39;</span>&nbsp;<span class="op" id="4767634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767638">tok</span>&nbsp;<span class="op" id="4767642">=</span>&nbsp;<span class="ident" id="4767644">token</span><span class="op" id="4767649">.</span><span class="ident" id="4767650">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767657">s</span><span class="op" id="4767658">.</span><span class="ident" id="4767659">next</span><span class="op" id="4767663">(</span><span class="op" id="4767664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4767667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="4767670">exit</span><span class="op" id="4767674">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4767677">return</span>&nbsp;<span class="ident" id="4767684">tok</span><span class="op" id="4767687">,</span>&nbsp;<span class="builtintype" id="4767689">string</span><span class="op" id="4767695">(</span><span class="ident" id="4767696">s</span><span class="op" id="4767697">.</span><span class="ident" id="4767698">src</span><span class="op" id="4767701">[</span><span class="ident" id="4767702">offs</span><span class="op" id="4767706">:</span><span class="ident" id="4767707">s</span><span class="op" id="4767708">.</span><span class="ident" id="4767709">offset</span><span class="op" id="4767715">]</span><span class="op" id="4767716">)</span><br>
<span class="lineno"></span><span class="op" id="4767718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4767721">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="4767788">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="4767859">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4767924">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="4767944">func</span>&nbsp;<span class="op" id="4767949">(</span><span class="ident" id="4767950">s</span>&nbsp;<span class="op" id="4767952">*</span><span class="ident" id="4767953">Scanner</span><span class="op" id="4767960">)</span>&nbsp;<span class="ident" id="4767962">scanEscape</span><span class="op" id="4767972">(</span><span class="ident" id="4767973">quote</span>&nbsp;<span class="builtintype" id="4767979">rune</span><span class="op" id="4767983">)</span>&nbsp;<span class="builtintype" id="4767985">bool</span>&nbsp;<span class="op" id="4767990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4767993">offs</span>&nbsp;<span class="op" id="4767998">:=</span>&nbsp;<span class="ident" id="4768001">s</span><span class="op" id="4768002">.</span><span class="ident" id="4768003">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768012">var</span>&nbsp;<span class="ident" id="4768016">n</span>&nbsp;<span class="builtintype" id="4768018">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768023">var</span>&nbsp;<span class="ident" id="4768027">base</span><span class="op" id="4768031">,</span>&nbsp;<span class="ident" id="4768033">max</span>&nbsp;<span class="builtintype" id="4768037">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768045">switch</span>&nbsp;<span class="ident" id="4768052">s</span><span class="op" id="4768053">.</span><span class="ident" id="4768054">ch</span>&nbsp;<span class="op" id="4768057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768060">case</span>&nbsp;<span class="string" id="4768065">&#39;a&#39;</span><span class="op" id="4768068">,</span>&nbsp;<span class="string" id="4768070">&#39;b&#39;</span><span class="op" id="4768073">,</span>&nbsp;<span class="string" id="4768075">&#39;f&#39;</span><span class="op" id="4768078">,</span>&nbsp;<span class="string" id="4768080">&#39;n&#39;</span><span class="op" id="4768083">,</span>&nbsp;<span class="string" id="4768085">&#39;r&#39;</span><span class="op" id="4768088">,</span>&nbsp;<span class="string" id="4768090">&#39;t&#39;</span><span class="op" id="4768093">,</span>&nbsp;<span class="string" id="4768095">&#39;v&#39;</span><span class="op" id="4768098">,</span>&nbsp;<span class="string" id="4768100">&#39;\\&#39;</span><span class="op" id="4768104">,</span>&nbsp;<span class="ident" id="4768106">quote</span><span class="op" id="4768111">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768115">s</span><span class="op" id="4768116">.</span><span class="ident" id="4768117">next</span><span class="op" id="4768121">(</span><span class="op" id="4768122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768126">return</span>&nbsp;<span class="builtintype" id="4768133">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768139">case</span>&nbsp;<span class="string" id="4768144">&#39;0&#39;</span><span class="op" id="4768147">,</span>&nbsp;<span class="string" id="4768149">&#39;1&#39;</span><span class="op" id="4768152">,</span>&nbsp;<span class="string" id="4768154">&#39;2&#39;</span><span class="op" id="4768157">,</span>&nbsp;<span class="string" id="4768159">&#39;3&#39;</span><span class="op" id="4768162">,</span>&nbsp;<span class="string" id="4768164">&#39;4&#39;</span><span class="op" id="4768167">,</span>&nbsp;<span class="string" id="4768169">&#39;5&#39;</span><span class="op" id="4768172">,</span>&nbsp;<span class="string" id="4768174">&#39;6&#39;</span><span class="op" id="4768177">,</span>&nbsp;<span class="string" id="4768179">&#39;7&#39;</span><span class="op" id="4768182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768186">n</span><span class="op" id="4768187">,</span>&nbsp;<span class="ident" id="4768189">base</span><span class="op" id="4768193">,</span>&nbsp;<span class="ident" id="4768195">max</span>&nbsp;<span class="op" id="4768199">=</span>&nbsp;<span class="num" id="4768201">3</span><span class="op" id="4768202">,</span>&nbsp;<span class="num" id="4768204">8</span><span class="op" id="4768205">,</span>&nbsp;<span class="num" id="4768207">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768212">case</span>&nbsp;<span class="string" id="4768217">&#39;x&#39;</span><span class="op" id="4768220">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768224">s</span><span class="op" id="4768225">.</span><span class="ident" id="4768226">next</span><span class="op" id="4768230">(</span><span class="op" id="4768231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768235">n</span><span class="op" id="4768236">,</span>&nbsp;<span class="ident" id="4768238">base</span><span class="op" id="4768242">,</span>&nbsp;<span class="ident" id="4768244">max</span>&nbsp;<span class="op" id="4768248">=</span>&nbsp;<span class="num" id="4768250">2</span><span class="op" id="4768251">,</span>&nbsp;<span class="num" id="4768253">16</span><span class="op" id="4768255">,</span>&nbsp;<span class="num" id="4768257">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768262">case</span>&nbsp;<span class="string" id="4768267">&#39;u&#39;</span><span class="op" id="4768270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768274">s</span><span class="op" id="4768275">.</span><span class="ident" id="4768276">next</span><span class="op" id="4768280">(</span><span class="op" id="4768281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768285">n</span><span class="op" id="4768286">,</span>&nbsp;<span class="ident" id="4768288">base</span><span class="op" id="4768292">,</span>&nbsp;<span class="ident" id="4768294">max</span>&nbsp;<span class="op" id="4768298">=</span>&nbsp;<span class="num" id="4768300">4</span><span class="op" id="4768301">,</span>&nbsp;<span class="num" id="4768303">16</span><span class="op" id="4768305">,</span>&nbsp;<span class="ident" id="4768307">unicode</span><span class="op" id="4768314">.</span><span class="ident" id="4768315">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768324">case</span>&nbsp;<span class="string" id="4768329">&#39;U&#39;</span><span class="op" id="4768332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768336">s</span><span class="op" id="4768337">.</span><span class="ident" id="4768338">next</span><span class="op" id="4768342">(</span><span class="op" id="4768343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768347">n</span><span class="op" id="4768348">,</span>&nbsp;<span class="ident" id="4768350">base</span><span class="op" id="4768354">,</span>&nbsp;<span class="ident" id="4768356">max</span>&nbsp;<span class="op" id="4768360">=</span>&nbsp;<span class="num" id="4768362">8</span><span class="op" id="4768363">,</span>&nbsp;<span class="num" id="4768365">16</span><span class="op" id="4768367">,</span>&nbsp;<span class="ident" id="4768369">unicode</span><span class="op" id="4768376">.</span><span class="ident" id="4768377">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768386">default</span><span class="op" id="4768393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768397">msg</span>&nbsp;<span class="op" id="4768401">:=</span>&nbsp;<span class="string" id="4768404">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768432">if</span>&nbsp;<span class="ident" id="4768435">s</span><span class="op" id="4768436">.</span><span class="ident" id="4768437">ch</span>&nbsp;<span class="op" id="4768440">&lt;</span>&nbsp;<span class="num" id="4768442">0</span>&nbsp;<span class="op" id="4768444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768449">msg</span>&nbsp;<span class="op" id="4768453">=</span>&nbsp;<span class="string" id="4768455">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768494">s</span><span class="op" id="4768495">.</span><span class="builtintype" id="4768496">error</span><span class="op" id="4768501">(</span><span class="ident" id="4768502">offs</span><span class="op" id="4768506">,</span>&nbsp;<span class="ident" id="4768508">msg</span><span class="op" id="4768511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768515">return</span>&nbsp;<span class="builtintype" id="4768522">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768533">var</span>&nbsp;<span class="ident" id="4768537">x</span>&nbsp;<span class="builtintype" id="4768539">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768547">for</span>&nbsp;<span class="ident" id="4768551">n</span>&nbsp;<span class="op" id="4768553">&gt;</span>&nbsp;<span class="num" id="4768555">0</span>&nbsp;<span class="op" id="4768557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768561">d</span>&nbsp;<span class="op" id="4768563">:=</span>&nbsp;<span class="builtintype" id="4768566">uint32</span><span class="op" id="4768572">(</span><span class="ident" id="4768573">digitVal</span><span class="op" id="4768581">(</span><span class="ident" id="4768582">s</span><span class="op" id="4768583">.</span><span class="ident" id="4768584">ch</span><span class="op" id="4768586">)</span><span class="op" id="4768587">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768591">if</span>&nbsp;<span class="ident" id="4768594">d</span>&nbsp;<span class="op" id="4768596">&gt;=</span>&nbsp;<span class="ident" id="4768599">base</span>&nbsp;<span class="op" id="4768604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768609">msg</span>&nbsp;<span class="op" id="4768613">:=</span>&nbsp;<span class="ident" id="4768616">fmt</span><span class="op" id="4768619">.</span><span class="ident" id="4768620">Sprintf</span><span class="op" id="4768627">(</span><span class="string" id="4768628">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="4768670">,</span>&nbsp;<span class="ident" id="4768672">s</span><span class="op" id="4768673">.</span><span class="ident" id="4768674">ch</span><span class="op" id="4768676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768681">if</span>&nbsp;<span class="ident" id="4768684">s</span><span class="op" id="4768685">.</span><span class="ident" id="4768686">ch</span>&nbsp;<span class="op" id="4768689">&lt;</span>&nbsp;<span class="num" id="4768691">0</span>&nbsp;<span class="op" id="4768693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768699">msg</span>&nbsp;<span class="op" id="4768703">=</span>&nbsp;<span class="string" id="4768705">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768741">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768746">s</span><span class="op" id="4768747">.</span><span class="builtintype" id="4768748">error</span><span class="op" id="4768753">(</span><span class="ident" id="4768754">s</span><span class="op" id="4768755">.</span><span class="ident" id="4768756">offset</span><span class="op" id="4768762">,</span>&nbsp;<span class="ident" id="4768764">msg</span><span class="op" id="4768767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768772">return</span>&nbsp;<span class="builtintype" id="4768779">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768791">x</span>&nbsp;<span class="op" id="4768793">=</span>&nbsp;<span class="ident" id="4768795">x</span><span class="op" id="4768796">*</span><span class="ident" id="4768797">base</span>&nbsp;<span class="op" id="4768802">+</span>&nbsp;<span class="ident" id="4768804">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768808">s</span><span class="op" id="4768809">.</span><span class="ident" id="4768810">next</span><span class="op" id="4768814">(</span><span class="op" id="4768815">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768819">n</span><span class="op" id="4768820">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768828">if</span>&nbsp;<span class="ident" id="4768831">x</span>&nbsp;<span class="op" id="4768833">&gt;</span>&nbsp;<span class="ident" id="4768835">max</span>&nbsp;<span class="op" id="4768839">||</span>&nbsp;<span class="num" id="4768842">0xD800</span>&nbsp;<span class="op" id="4768849">&lt;=</span>&nbsp;<span class="ident" id="4768852">x</span>&nbsp;<span class="op" id="4768854">&amp;&amp;</span>&nbsp;<span class="ident" id="4768857">x</span>&nbsp;<span class="op" id="4768859">&lt;</span>&nbsp;<span class="num" id="4768861">0xE000</span>&nbsp;<span class="op" id="4768868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4768872">s</span><span class="op" id="4768873">.</span><span class="builtintype" id="4768874">error</span><span class="op" id="4768879">(</span><span class="ident" id="4768880">offs</span><span class="op" id="4768884">,</span>&nbsp;<span class="string" id="4768886">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="4768933">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768937">return</span>&nbsp;<span class="builtintype" id="4768944">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4768951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4768955">return</span>&nbsp;<span class="builtintype" id="4768962">true</span><br>
<span class="lineno"></span><span class="op" id="4768967">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="4768970">func</span>&nbsp;<span class="op" id="4768975">(</span><span class="ident" id="4768976">s</span>&nbsp;<span class="op" id="4768978">*</span><span class="ident" id="4768979">Scanner</span><span class="op" id="4768986">)</span>&nbsp;<span class="ident" id="4768988">scanRune</span><span class="op" id="4768996">(</span><span class="op" id="4768997">)</span>&nbsp;<span class="builtintype" id="4768999">string</span>&nbsp;<span class="op" id="4769006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4769009">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769043">offs</span>&nbsp;<span class="op" id="4769048">:=</span>&nbsp;<span class="ident" id="4769051">s</span><span class="op" id="4769052">.</span><span class="ident" id="4769053">offset</span>&nbsp;<span class="op" id="4769060">-</span>&nbsp;<span class="num" id="4769062">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769066">valid</span>&nbsp;<span class="op" id="4769072">:=</span>&nbsp;<span class="builtintype" id="4769075">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769081">n</span>&nbsp;<span class="op" id="4769083">:=</span>&nbsp;<span class="num" id="4769086">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769089">for</span>&nbsp;<span class="op" id="4769093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769097">ch</span>&nbsp;<span class="op" id="4769100">:=</span>&nbsp;<span class="ident" id="4769103">s</span><span class="op" id="4769104">.</span><span class="ident" id="4769105">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769110">if</span>&nbsp;<span class="ident" id="4769113">ch</span>&nbsp;<span class="op" id="4769116">==</span>&nbsp;<span class="string" id="4769119">&#39;\n&#39;</span>&nbsp;<span class="op" id="4769124">||</span>&nbsp;<span class="ident" id="4769127">ch</span>&nbsp;<span class="op" id="4769130">&lt;</span>&nbsp;<span class="num" id="4769132">0</span>&nbsp;<span class="op" id="4769134">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4769139">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769192">if</span>&nbsp;<span class="ident" id="4769195">valid</span>&nbsp;<span class="op" id="4769201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769207">s</span><span class="op" id="4769208">.</span><span class="builtintype" id="4769209">error</span><span class="op" id="4769214">(</span><span class="ident" id="4769215">offs</span><span class="op" id="4769219">,</span>&nbsp;<span class="string" id="4769221">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4769250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769256">valid</span>&nbsp;<span class="op" id="4769262">=</span>&nbsp;<span class="builtintype" id="4769264">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769273">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769278">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769290">s</span><span class="op" id="4769291">.</span><span class="ident" id="4769292">next</span><span class="op" id="4769296">(</span><span class="op" id="4769297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769301">if</span>&nbsp;<span class="ident" id="4769304">ch</span>&nbsp;<span class="op" id="4769307">==</span>&nbsp;<span class="string" id="4769310">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="4769315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769320">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769332">n</span><span class="op" id="4769333">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769338">if</span>&nbsp;<span class="ident" id="4769341">ch</span>&nbsp;<span class="op" id="4769344">==</span>&nbsp;<span class="string" id="4769347">&#39;\\&#39;</span>&nbsp;<span class="op" id="4769352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769357">if</span>&nbsp;<span class="op" id="4769360">!</span><span class="ident" id="4769361">s</span><span class="op" id="4769362">.</span><span class="ident" id="4769363">scanEscape</span><span class="op" id="4769373">(</span><span class="string" id="4769374">&#39;\&#39;&#39;</span><span class="op" id="4769378">)</span>&nbsp;<span class="op" id="4769380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769386">valid</span>&nbsp;<span class="op" id="4769392">=</span>&nbsp;<span class="builtintype" id="4769394">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4769408">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769454">if</span>&nbsp;<span class="ident" id="4769457">valid</span>&nbsp;<span class="op" id="4769463">&amp;&amp;</span>&nbsp;<span class="ident" id="4769466">n</span>&nbsp;<span class="op" id="4769468">!=</span>&nbsp;<span class="num" id="4769471">1</span>&nbsp;<span class="op" id="4769473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769477">s</span><span class="op" id="4769478">.</span><span class="builtintype" id="4769479">error</span><span class="op" id="4769484">(</span><span class="ident" id="4769485">offs</span><span class="op" id="4769489">,</span>&nbsp;<span class="string" id="4769491">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="4769513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769520">return</span>&nbsp;<span class="builtintype" id="4769527">string</span><span class="op" id="4769533">(</span><span class="ident" id="4769534">s</span><span class="op" id="4769535">.</span><span class="ident" id="4769536">src</span><span class="op" id="4769539">[</span><span class="ident" id="4769540">offs</span><span class="op" id="4769544">:</span><span class="ident" id="4769545">s</span><span class="op" id="4769546">.</span><span class="ident" id="4769547">offset</span><span class="op" id="4769553">]</span><span class="op" id="4769554">)</span><br>
<span class="lineno">455</span><span class="op" id="4769556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4769559">func</span>&nbsp;<span class="op" id="4769564">(</span><span class="ident" id="4769565">s</span>&nbsp;<span class="op" id="4769567">*</span><span class="ident" id="4769568">Scanner</span><span class="op" id="4769575">)</span>&nbsp;<span class="ident" id="4769577">scanString</span><span class="op" id="4769587">(</span><span class="op" id="4769588">)</span>&nbsp;<span class="builtintype" id="4769590">string</span>&nbsp;<span class="op" id="4769597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4769600">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769633">offs</span>&nbsp;<span class="op" id="4769638">:=</span>&nbsp;<span class="ident" id="4769641">s</span><span class="op" id="4769642">.</span><span class="ident" id="4769643">offset</span>&nbsp;<span class="op" id="4769650">-</span>&nbsp;<span class="num" id="4769652">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769656">for</span>&nbsp;<span class="op" id="4769660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769664">ch</span>&nbsp;<span class="op" id="4769667">:=</span>&nbsp;<span class="ident" id="4769670">s</span><span class="op" id="4769671">.</span><span class="ident" id="4769672">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769677">if</span>&nbsp;<span class="ident" id="4769680">ch</span>&nbsp;<span class="op" id="4769683">==</span>&nbsp;<span class="string" id="4769686">&#39;\n&#39;</span>&nbsp;<span class="op" id="4769691">||</span>&nbsp;<span class="ident" id="4769694">ch</span>&nbsp;<span class="op" id="4769697">&lt;</span>&nbsp;<span class="num" id="4769699">0</span>&nbsp;<span class="op" id="4769701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769706">s</span><span class="op" id="4769707">.</span><span class="builtintype" id="4769708">error</span><span class="op" id="4769713">(</span><span class="ident" id="4769714">offs</span><span class="op" id="4769718">,</span>&nbsp;<span class="string" id="4769720">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4769751">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769756">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769768">s</span><span class="op" id="4769769">.</span><span class="ident" id="4769770">next</span><span class="op" id="4769774">(</span><span class="op" id="4769775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769779">if</span>&nbsp;<span class="ident" id="4769782">ch</span>&nbsp;<span class="op" id="4769785">==</span>&nbsp;<span class="string" id="4769788">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4769792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769797">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769809">if</span>&nbsp;<span class="ident" id="4769812">ch</span>&nbsp;<span class="op" id="4769815">==</span>&nbsp;<span class="string" id="4769818">&#39;\\&#39;</span>&nbsp;<span class="op" id="4769823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769828">s</span><span class="op" id="4769829">.</span><span class="ident" id="4769830">scanEscape</span><span class="op" id="4769840">(</span><span class="string" id="4769841">&#39;&#34;&#39;</span><span class="op" id="4769844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4769851">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769855">return</span>&nbsp;<span class="builtintype" id="4769862">string</span><span class="op" id="4769868">(</span><span class="ident" id="4769869">s</span><span class="op" id="4769870">.</span><span class="ident" id="4769871">src</span><span class="op" id="4769874">[</span><span class="ident" id="4769875">offs</span><span class="op" id="4769879">:</span><span class="ident" id="4769880">s</span><span class="op" id="4769881">.</span><span class="ident" id="4769882">offset</span><span class="op" id="4769888">]</span><span class="op" id="4769889">)</span><br>
<span class="lineno"></span><span class="op" id="4769891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4769894">func</span>&nbsp;<span class="ident" id="4769899">stripCR</span><span class="op" id="4769906">(</span><span class="ident" id="4769907">b</span>&nbsp;<span class="op" id="4769909">[</span><span class="op" id="4769910">]</span><span class="builtintype" id="4769911">byte</span><span class="op" id="4769915">)</span>&nbsp;<span class="op" id="4769917">[</span><span class="op" id="4769918">]</span><span class="builtintype" id="4769919">byte</span>&nbsp;<span class="op" id="4769924">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769927">c</span>&nbsp;<span class="op" id="4769929">:=</span>&nbsp;<span class="builtinfunc" id="4769932">make</span><span class="op" id="4769936">(</span><span class="op" id="4769937">[</span><span class="op" id="4769938">]</span><span class="builtintype" id="4769939">byte</span><span class="op" id="4769943">,</span>&nbsp;<span class="builtinfunc" id="4769945">len</span><span class="op" id="4769948">(</span><span class="ident" id="4769949">b</span><span class="op" id="4769950">)</span><span class="op" id="4769951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4769954">i</span>&nbsp;<span class="op" id="4769956">:=</span>&nbsp;<span class="num" id="4769959">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769962">for</span>&nbsp;<span class="ident" id="4769966">_</span><span class="op" id="4769967">,</span>&nbsp;<span class="ident" id="4769969">ch</span>&nbsp;<span class="op" id="4769972">:=</span>&nbsp;<span class="keyword" id="4769975">range</span>&nbsp;<span class="ident" id="4769981">b</span>&nbsp;<span class="op" id="4769983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4769987">if</span>&nbsp;<span class="ident" id="4769990">ch</span>&nbsp;<span class="op" id="4769993">!=</span>&nbsp;<span class="string" id="4769996">&#39;\r&#39;</span>&nbsp;<span class="op" id="4770001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770006">c</span><span class="op" id="4770007">[</span><span class="ident" id="4770008">i</span><span class="op" id="4770009">]</span>&nbsp;<span class="op" id="4770011">=</span>&nbsp;<span class="ident" id="4770013">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770019">i</span><span class="op" id="4770020">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770031">return</span>&nbsp;<span class="ident" id="4770038">c</span><span class="op" id="4770039">[</span><span class="op" id="4770040">:</span><span class="ident" id="4770041">i</span><span class="op" id="4770042">]</span><br>
<span class="lineno"></span><span class="op" id="4770044">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="4770047">func</span>&nbsp;<span class="op" id="4770052">(</span><span class="ident" id="4770053">s</span>&nbsp;<span class="op" id="4770055">*</span><span class="ident" id="4770056">Scanner</span><span class="op" id="4770063">)</span>&nbsp;<span class="ident" id="4770065">scanRawString</span><span class="op" id="4770078">(</span><span class="op" id="4770079">)</span>&nbsp;<span class="builtintype" id="4770081">string</span>&nbsp;<span class="op" id="4770088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4770091">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770124">offs</span>&nbsp;<span class="op" id="4770129">:=</span>&nbsp;<span class="ident" id="4770132">s</span><span class="op" id="4770133">.</span><span class="ident" id="4770134">offset</span>&nbsp;<span class="op" id="4770141">-</span>&nbsp;<span class="num" id="4770143">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770147">hasCR</span>&nbsp;<span class="op" id="4770153">:=</span>&nbsp;<span class="builtintype" id="4770156">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770163">for</span>&nbsp;<span class="op" id="4770167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770171">ch</span>&nbsp;<span class="op" id="4770174">:=</span>&nbsp;<span class="ident" id="4770177">s</span><span class="op" id="4770178">.</span><span class="ident" id="4770179">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770184">if</span>&nbsp;<span class="ident" id="4770187">ch</span>&nbsp;<span class="op" id="4770190">&lt;</span>&nbsp;<span class="num" id="4770192">0</span>&nbsp;<span class="op" id="4770194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770199">s</span><span class="op" id="4770200">.</span><span class="builtintype" id="4770201">error</span><span class="op" id="4770206">(</span><span class="ident" id="4770207">offs</span><span class="op" id="4770211">,</span>&nbsp;<span class="string" id="4770213">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4770248">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770253">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770265">s</span><span class="op" id="4770266">.</span><span class="ident" id="4770267">next</span><span class="op" id="4770271">(</span><span class="op" id="4770272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770276">if</span>&nbsp;<span class="ident" id="4770279">ch</span>&nbsp;<span class="op" id="4770282">==</span>&nbsp;<span class="string" id="4770285">&#39;`&#39;</span>&nbsp;<span class="op" id="4770289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770294">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770306">if</span>&nbsp;<span class="ident" id="4770309">ch</span>&nbsp;<span class="op" id="4770312">==</span>&nbsp;<span class="string" id="4770315">&#39;\r&#39;</span>&nbsp;<span class="op" id="4770320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770325">hasCR</span>&nbsp;<span class="op" id="4770331">=</span>&nbsp;<span class="builtintype" id="4770333">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770343">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770347">lit</span>&nbsp;<span class="op" id="4770351">:=</span>&nbsp;<span class="ident" id="4770354">s</span><span class="op" id="4770355">.</span><span class="ident" id="4770356">src</span><span class="op" id="4770359">[</span><span class="ident" id="4770360">offs</span><span class="op" id="4770364">:</span><span class="ident" id="4770365">s</span><span class="op" id="4770366">.</span><span class="ident" id="4770367">offset</span><span class="op" id="4770373">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770376">if</span>&nbsp;<span class="ident" id="4770379">hasCR</span>&nbsp;<span class="op" id="4770385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770389">lit</span>&nbsp;<span class="op" id="4770393">=</span>&nbsp;<span class="ident" id="4770395">stripCR</span><span class="op" id="4770402">(</span><span class="ident" id="4770403">lit</span><span class="op" id="4770406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770409">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770413">return</span>&nbsp;<span class="builtintype" id="4770420">string</span><span class="op" id="4770426">(</span><span class="ident" id="4770427">lit</span><span class="op" id="4770430">)</span><br>
<span class="lineno"></span><span class="op" id="4770432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4770435">func</span>&nbsp;<span class="op" id="4770440">(</span><span class="ident" id="4770441">s</span>&nbsp;<span class="op" id="4770443">*</span><span class="ident" id="4770444">Scanner</span><span class="op" id="4770451">)</span>&nbsp;<span class="ident" id="4770453">skipWhitespace</span><span class="op" id="4770467">(</span><span class="op" id="4770468">)</span>&nbsp;<span class="op" id="4770470">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770473">for</span>&nbsp;<span class="ident" id="4770477">s</span><span class="op" id="4770478">.</span><span class="ident" id="4770479">ch</span>&nbsp;<span class="op" id="4770482">==</span>&nbsp;<span class="string" id="4770485">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4770489">||</span>&nbsp;<span class="ident" id="4770492">s</span><span class="op" id="4770493">.</span><span class="ident" id="4770494">ch</span>&nbsp;<span class="op" id="4770497">==</span>&nbsp;<span class="string" id="4770500">&#39;\t&#39;</span>&nbsp;<span class="op" id="4770505">||</span>&nbsp;<span class="ident" id="4770508">s</span><span class="op" id="4770509">.</span><span class="ident" id="4770510">ch</span>&nbsp;<span class="op" id="4770513">==</span>&nbsp;<span class="string" id="4770516">&#39;\n&#39;</span>&nbsp;<span class="op" id="4770521">&amp;&amp;</span>&nbsp;<span class="op" id="4770524">!</span><span class="ident" id="4770525">s</span><span class="op" id="4770526">.</span><span class="ident" id="4770527">insertSemi</span>&nbsp;<span class="op" id="4770538">||</span>&nbsp;<span class="ident" id="4770541">s</span><span class="op" id="4770542">.</span><span class="ident" id="4770543">ch</span>&nbsp;<span class="op" id="4770546">==</span>&nbsp;<span class="string" id="4770549">&#39;\r&#39;</span>&nbsp;<span class="op" id="4770554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770558">s</span><span class="op" id="4770559">.</span><span class="ident" id="4770560">next</span><span class="op" id="4770564">(</span><span class="op" id="4770565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4770568">}</span><br>
<span class="lineno"></span><span class="op" id="4770570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="4770573">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="4770644">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4770716">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="4770779">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="4770848">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="4770915">func</span>&nbsp;<span class="op" id="4770920">(</span><span class="ident" id="4770921">s</span>&nbsp;<span class="op" id="4770923">*</span><span class="ident" id="4770924">Scanner</span><span class="op" id="4770931">)</span>&nbsp;<span class="ident" id="4770933">switch2</span><span class="op" id="4770940">(</span><span class="ident" id="4770941">tok0</span><span class="op" id="4770945">,</span>&nbsp;<span class="ident" id="4770947">tok1</span>&nbsp;<span class="ident" id="4770952">token</span><span class="op" id="4770957">.</span><span class="ident" id="4770958">Token</span><span class="op" id="4770963">)</span>&nbsp;<span class="ident" id="4770965">token</span><span class="op" id="4770970">.</span><span class="ident" id="4770971">Token</span>&nbsp;<span class="op" id="4770977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4770980">if</span>&nbsp;<span class="ident" id="4770983">s</span><span class="op" id="4770984">.</span><span class="ident" id="4770985">ch</span>&nbsp;<span class="op" id="4770988">==</span>&nbsp;<span class="string" id="4770991">&#39;=&#39;</span>&nbsp;<span class="op" id="4770995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4770999">s</span><span class="op" id="4771000">.</span><span class="ident" id="4771001">next</span><span class="op" id="4771005">(</span><span class="op" id="4771006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771010">return</span>&nbsp;<span class="ident" id="4771017">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771026">return</span>&nbsp;<span class="ident" id="4771033">tok0</span><br>
<span class="lineno"></span><span class="op" id="4771038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4771041">func</span>&nbsp;<span class="op" id="4771046">(</span><span class="ident" id="4771047">s</span>&nbsp;<span class="op" id="4771049">*</span><span class="ident" id="4771050">Scanner</span><span class="op" id="4771057">)</span>&nbsp;<span class="ident" id="4771059">switch3</span><span class="op" id="4771066">(</span><span class="ident" id="4771067">tok0</span><span class="op" id="4771071">,</span>&nbsp;<span class="ident" id="4771073">tok1</span>&nbsp;<span class="ident" id="4771078">token</span><span class="op" id="4771083">.</span><span class="ident" id="4771084">Token</span><span class="op" id="4771089">,</span>&nbsp;<span class="ident" id="4771091">ch2</span>&nbsp;<span class="builtintype" id="4771095">rune</span><span class="op" id="4771099">,</span>&nbsp;<span class="ident" id="4771101">tok2</span>&nbsp;<span class="ident" id="4771106">token</span><span class="op" id="4771111">.</span><span class="ident" id="4771112">Token</span><span class="op" id="4771117">)</span>&nbsp;<span class="ident" id="4771119">token</span><span class="op" id="4771124">.</span><span class="ident" id="4771125">Token</span>&nbsp;<span class="op" id="4771131">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771134">if</span>&nbsp;<span class="ident" id="4771137">s</span><span class="op" id="4771138">.</span><span class="ident" id="4771139">ch</span>&nbsp;<span class="op" id="4771142">==</span>&nbsp;<span class="string" id="4771145">&#39;=&#39;</span>&nbsp;<span class="op" id="4771149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4771153">s</span><span class="op" id="4771154">.</span><span class="ident" id="4771155">next</span><span class="op" id="4771159">(</span><span class="op" id="4771160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771164">return</span>&nbsp;<span class="ident" id="4771171">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771180">if</span>&nbsp;<span class="ident" id="4771183">s</span><span class="op" id="4771184">.</span><span class="ident" id="4771185">ch</span>&nbsp;<span class="op" id="4771188">==</span>&nbsp;<span class="ident" id="4771191">ch2</span>&nbsp;<span class="op" id="4771195">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4771199">s</span><span class="op" id="4771200">.</span><span class="ident" id="4771201">next</span><span class="op" id="4771205">(</span><span class="op" id="4771206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771210">return</span>&nbsp;<span class="ident" id="4771217">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771226">return</span>&nbsp;<span class="ident" id="4771233">tok0</span><br>
<span class="lineno"></span><span class="op" id="4771238">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="4771241">func</span>&nbsp;<span class="op" id="4771246">(</span><span class="ident" id="4771247">s</span>&nbsp;<span class="op" id="4771249">*</span><span class="ident" id="4771250">Scanner</span><span class="op" id="4771257">)</span>&nbsp;<span class="ident" id="4771259">switch4</span><span class="op" id="4771266">(</span><span class="ident" id="4771267">tok0</span><span class="op" id="4771271">,</span>&nbsp;<span class="ident" id="4771273">tok1</span>&nbsp;<span class="ident" id="4771278">token</span><span class="op" id="4771283">.</span><span class="ident" id="4771284">Token</span><span class="op" id="4771289">,</span>&nbsp;<span class="ident" id="4771291">ch2</span>&nbsp;<span class="builtintype" id="4771295">rune</span><span class="op" id="4771299">,</span>&nbsp;<span class="ident" id="4771301">tok2</span><span class="op" id="4771305">,</span>&nbsp;<span class="ident" id="4771307">tok3</span>&nbsp;<span class="ident" id="4771312">token</span><span class="op" id="4771317">.</span><span class="ident" id="4771318">Token</span><span class="op" id="4771323">)</span>&nbsp;<span class="ident" id="4771325">token</span><span class="op" id="4771330">.</span><span class="ident" id="4771331">Token</span>&nbsp;<span class="op" id="4771337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771340">if</span>&nbsp;<span class="ident" id="4771343">s</span><span class="op" id="4771344">.</span><span class="ident" id="4771345">ch</span>&nbsp;<span class="op" id="4771348">==</span>&nbsp;<span class="string" id="4771351">&#39;=&#39;</span>&nbsp;<span class="op" id="4771355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4771359">s</span><span class="op" id="4771360">.</span><span class="ident" id="4771361">next</span><span class="op" id="4771365">(</span><span class="op" id="4771366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771370">return</span>&nbsp;<span class="ident" id="4771377">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771386">if</span>&nbsp;<span class="ident" id="4771389">s</span><span class="op" id="4771390">.</span><span class="ident" id="4771391">ch</span>&nbsp;<span class="op" id="4771394">==</span>&nbsp;<span class="ident" id="4771397">ch2</span>&nbsp;<span class="op" id="4771401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4771405">s</span><span class="op" id="4771406">.</span><span class="ident" id="4771407">next</span><span class="op" id="4771411">(</span><span class="op" id="4771412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771416">if</span>&nbsp;<span class="ident" id="4771419">s</span><span class="op" id="4771420">.</span><span class="ident" id="4771421">ch</span>&nbsp;<span class="op" id="4771424">==</span>&nbsp;<span class="string" id="4771427">&#39;=&#39;</span>&nbsp;<span class="op" id="4771431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4771436">s</span><span class="op" id="4771437">.</span><span class="ident" id="4771438">next</span><span class="op" id="4771442">(</span><span class="op" id="4771443">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771448">return</span>&nbsp;<span class="ident" id="4771455">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771466">return</span>&nbsp;<span class="ident" id="4771473">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4771479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4771482">return</span>&nbsp;<span class="ident" id="4771489">tok0</span><br>
<span class="lineno">565</span><span class="op" id="4771494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4771497">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="4771569">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4771641">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="4771655">//</span><br>
<span class="lineno"></span><span class="comment" id="4771658">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="4771734">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="4771812">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4771844">//</span><br>
<span class="lineno">575</span><span class="comment" id="4771847">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="4771921">//</span><br>
<span class="lineno"></span><span class="comment" id="4771924">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="4771987">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="4772056">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="4772122">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="4772133">//</span><br>
<span class="lineno"></span><span class="comment" id="4772136">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4772205">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="4772229">//</span><br>
<span class="lineno">585</span><span class="comment" id="4772232">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4772293">//</span><br>
<span class="lineno"></span><span class="comment" id="4772296">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="4772360">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="4772423">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="4772486">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4772548">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="4772610">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="4772663">//</span><br>
<span class="lineno"></span><span class="comment" id="4772666">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="4772726">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="4772786">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="4772824">//</span><br>
<span class="lineno"></span><span class="keyword" id="4772827">func</span>&nbsp;<span class="op" id="4772832">(</span><span class="ident" id="4772833">s</span>&nbsp;<span class="op" id="4772835">*</span><span class="ident" id="4772836">Scanner</span><span class="op" id="4772843">)</span>&nbsp;<span class="ident" id="4772845">Scan</span><span class="op" id="4772849">(</span><span class="op" id="4772850">)</span>&nbsp;<span class="op" id="4772852">(</span><span class="ident" id="4772853">pos</span>&nbsp;<span class="ident" id="4772857">token</span><span class="op" id="4772862">.</span><span class="ident" id="4772863">Pos</span><span class="op" id="4772866">,</span>&nbsp;<span class="ident" id="4772868">tok</span>&nbsp;<span class="ident" id="4772872">token</span><span class="op" id="4772877">.</span><span class="ident" id="4772878">Token</span><span class="op" id="4772883">,</span>&nbsp;<span class="ident" id="4772885">lit</span>&nbsp;<span class="builtintype" id="4772889">string</span><span class="op" id="4772895">)</span>&nbsp;<span class="op" id="4772897">{</span><br>
<span class="lineno"></span><span class="ident" id="4772899">scanAgain</span><span class="op" id="4772908">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4772911">s</span><span class="op" id="4772912">.</span><span class="ident" id="4772913">skipWhitespace</span><span class="op" id="4772927">(</span><span class="op" id="4772928">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4772932">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4772956">pos</span>&nbsp;<span class="op" id="4772960">=</span>&nbsp;<span class="ident" id="4772962">s</span><span class="op" id="4772963">.</span><span class="ident" id="4772964">file</span><span class="op" id="4772968">.</span><span class="ident" id="4772969">Pos</span><span class="op" id="4772972">(</span><span class="ident" id="4772973">s</span><span class="op" id="4772974">.</span><span class="ident" id="4772975">offset</span><span class="op" id="4772981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4772985">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773011">insertSemi</span>&nbsp;<span class="op" id="4773022">:=</span>&nbsp;<span class="builtintype" id="4773025">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773032">switch</span>&nbsp;<span class="ident" id="4773039">ch</span>&nbsp;<span class="op" id="4773042">:=</span>&nbsp;<span class="ident" id="4773045">s</span><span class="op" id="4773046">.</span><span class="ident" id="4773047">ch</span><span class="op" id="4773049">;</span>&nbsp;<span class="op" id="4773051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773054">case</span>&nbsp;<span class="ident" id="4773059">isLetter</span><span class="op" id="4773067">(</span><span class="ident" id="4773068">ch</span><span class="op" id="4773070">)</span><span class="op" id="4773071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773075">lit</span>&nbsp;<span class="op" id="4773079">=</span>&nbsp;<span class="ident" id="4773081">s</span><span class="op" id="4773082">.</span><span class="ident" id="4773083">scanIdentifier</span><span class="op" id="4773097">(</span><span class="op" id="4773098">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773102">if</span>&nbsp;<span class="builtinfunc" id="4773105">len</span><span class="op" id="4773108">(</span><span class="ident" id="4773109">lit</span><span class="op" id="4773112">)</span>&nbsp;<span class="op" id="4773114">&gt;</span>&nbsp;<span class="num" id="4773116">1</span>&nbsp;<span class="op" id="4773118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4773123">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773190">tok</span>&nbsp;<span class="op" id="4773194">=</span>&nbsp;<span class="ident" id="4773196">token</span><span class="op" id="4773201">.</span><span class="ident" id="4773202">Lookup</span><span class="op" id="4773208">(</span><span class="ident" id="4773209">lit</span><span class="op" id="4773212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773217">switch</span>&nbsp;<span class="ident" id="4773224">tok</span>&nbsp;<span class="op" id="4773228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773233">case</span>&nbsp;<span class="ident" id="4773238">token</span><span class="op" id="4773243">.</span><span class="ident" id="4773244">IDENT</span><span class="op" id="4773249">,</span>&nbsp;<span class="ident" id="4773251">token</span><span class="op" id="4773256">.</span><span class="ident" id="4773257">BREAK</span><span class="op" id="4773262">,</span>&nbsp;<span class="ident" id="4773264">token</span><span class="op" id="4773269">.</span><span class="ident" id="4773270">CONTINUE</span><span class="op" id="4773278">,</span>&nbsp;<span class="ident" id="4773280">token</span><span class="op" id="4773285">.</span><span class="ident" id="4773286">FALLTHROUGH</span><span class="op" id="4773297">,</span>&nbsp;<span class="ident" id="4773299">token</span><span class="op" id="4773304">.</span><span class="ident" id="4773305">RETURN</span><span class="op" id="4773311">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773317">insertSemi</span>&nbsp;<span class="op" id="4773328">=</span>&nbsp;<span class="builtintype" id="4773330">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773342">}</span>&nbsp;<span class="keyword" id="4773344">else</span>&nbsp;<span class="op" id="4773349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773354">insertSemi</span>&nbsp;<span class="op" id="4773365">=</span>&nbsp;<span class="builtintype" id="4773367">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773375">tok</span>&nbsp;<span class="op" id="4773379">=</span>&nbsp;<span class="ident" id="4773381">token</span><span class="op" id="4773386">.</span><span class="ident" id="4773387">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773398">case</span>&nbsp;<span class="string" id="4773403">&#39;0&#39;</span>&nbsp;<span class="op" id="4773407">&lt;=</span>&nbsp;<span class="ident" id="4773410">ch</span>&nbsp;<span class="op" id="4773413">&amp;&amp;</span>&nbsp;<span class="ident" id="4773416">ch</span>&nbsp;<span class="op" id="4773419">&lt;=</span>&nbsp;<span class="string" id="4773422">&#39;9&#39;</span><span class="op" id="4773425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773429">insertSemi</span>&nbsp;<span class="op" id="4773440">=</span>&nbsp;<span class="builtintype" id="4773442">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773449">tok</span><span class="op" id="4773452">,</span>&nbsp;<span class="ident" id="4773454">lit</span>&nbsp;<span class="op" id="4773458">=</span>&nbsp;<span class="ident" id="4773460">s</span><span class="op" id="4773461">.</span><span class="ident" id="4773462">scanNumber</span><span class="op" id="4773472">(</span><span class="builtintype" id="4773473">false</span><span class="op" id="4773478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773481">default</span><span class="op" id="4773488">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773492">s</span><span class="op" id="4773493">.</span><span class="ident" id="4773494">next</span><span class="op" id="4773498">(</span><span class="op" id="4773499">)</span>&nbsp;<span class="comment" id="4773501">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773527">switch</span>&nbsp;<span class="ident" id="4773534">ch</span>&nbsp;<span class="op" id="4773537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773541">case</span>&nbsp;<span class="op" id="4773546">-</span><span class="num" id="4773547">1</span><span class="op" id="4773548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773553">if</span>&nbsp;<span class="ident" id="4773556">s</span><span class="op" id="4773557">.</span><span class="ident" id="4773558">insertSemi</span>&nbsp;<span class="op" id="4773569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773575">s</span><span class="op" id="4773576">.</span><span class="ident" id="4773577">insertSemi</span>&nbsp;<span class="op" id="4773588">=</span>&nbsp;<span class="builtintype" id="4773590">false</span>&nbsp;<span class="comment" id="4773596">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773616">return</span>&nbsp;<span class="ident" id="4773623">pos</span><span class="op" id="4773626">,</span>&nbsp;<span class="ident" id="4773628">token</span><span class="op" id="4773633">.</span><span class="ident" id="4773634">SEMICOLON</span><span class="op" id="4773643">,</span>&nbsp;<span class="string" id="4773645">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4773653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773658">tok</span>&nbsp;<span class="op" id="4773662">=</span>&nbsp;<span class="ident" id="4773664">token</span><span class="op" id="4773669">.</span><span class="ident" id="4773670">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773676">case</span>&nbsp;<span class="string" id="4773681">&#39;\n&#39;</span><span class="op" id="4773685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4773690">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4773735">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4773781">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773811">s</span><span class="op" id="4773812">.</span><span class="ident" id="4773813">insertSemi</span>&nbsp;<span class="op" id="4773824">=</span>&nbsp;<span class="builtintype" id="4773826">false</span>&nbsp;<span class="comment" id="4773832">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773855">return</span>&nbsp;<span class="ident" id="4773862">pos</span><span class="op" id="4773865">,</span>&nbsp;<span class="ident" id="4773867">token</span><span class="op" id="4773872">.</span><span class="ident" id="4773873">SEMICOLON</span><span class="op" id="4773882">,</span>&nbsp;<span class="string" id="4773884">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773891">case</span>&nbsp;<span class="string" id="4773896">&#39;&#34;&#39;</span><span class="op" id="4773899">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773904">insertSemi</span>&nbsp;<span class="op" id="4773915">=</span>&nbsp;<span class="builtintype" id="4773917">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773925">tok</span>&nbsp;<span class="op" id="4773929">=</span>&nbsp;<span class="ident" id="4773931">token</span><span class="op" id="4773936">.</span><span class="ident" id="4773937">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773947">lit</span>&nbsp;<span class="op" id="4773951">=</span>&nbsp;<span class="ident" id="4773953">s</span><span class="op" id="4773954">.</span><span class="ident" id="4773955">scanString</span><span class="op" id="4773965">(</span><span class="op" id="4773966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4773970">case</span>&nbsp;<span class="string" id="4773975">&#39;\&#39;&#39;</span><span class="op" id="4773979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4773984">insertSemi</span>&nbsp;<span class="op" id="4773995">=</span>&nbsp;<span class="builtintype" id="4773997">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774005">tok</span>&nbsp;<span class="op" id="4774009">=</span>&nbsp;<span class="ident" id="4774011">token</span><span class="op" id="4774016">.</span><span class="ident" id="4774017">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774025">lit</span>&nbsp;<span class="op" id="4774029">=</span>&nbsp;<span class="ident" id="4774031">s</span><span class="op" id="4774032">.</span><span class="ident" id="4774033">scanRune</span><span class="op" id="4774041">(</span><span class="op" id="4774042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774046">case</span>&nbsp;<span class="string" id="4774051">&#39;`&#39;</span><span class="op" id="4774054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774059">insertSemi</span>&nbsp;<span class="op" id="4774070">=</span>&nbsp;<span class="builtintype" id="4774072">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774080">tok</span>&nbsp;<span class="op" id="4774084">=</span>&nbsp;<span class="ident" id="4774086">token</span><span class="op" id="4774091">.</span><span class="ident" id="4774092">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774102">lit</span>&nbsp;<span class="op" id="4774106">=</span>&nbsp;<span class="ident" id="4774108">s</span><span class="op" id="4774109">.</span><span class="ident" id="4774110">scanRawString</span><span class="op" id="4774123">(</span><span class="op" id="4774124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774128">case</span>&nbsp;<span class="string" id="4774133">&#39;:&#39;</span><span class="op" id="4774136">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774141">tok</span>&nbsp;<span class="op" id="4774145">=</span>&nbsp;<span class="ident" id="4774147">s</span><span class="op" id="4774148">.</span><span class="ident" id="4774149">switch2</span><span class="op" id="4774156">(</span><span class="ident" id="4774157">token</span><span class="op" id="4774162">.</span><span class="ident" id="4774163">COLON</span><span class="op" id="4774168">,</span>&nbsp;<span class="ident" id="4774170">token</span><span class="op" id="4774175">.</span><span class="ident" id="4774176">DEFINE</span><span class="op" id="4774182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774186">case</span>&nbsp;<span class="string" id="4774191">&#39;.&#39;</span><span class="op" id="4774194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774199">if</span>&nbsp;<span class="string" id="4774202">&#39;0&#39;</span>&nbsp;<span class="op" id="4774206">&lt;=</span>&nbsp;<span class="ident" id="4774209">s</span><span class="op" id="4774210">.</span><span class="ident" id="4774211">ch</span>&nbsp;<span class="op" id="4774214">&amp;&amp;</span>&nbsp;<span class="ident" id="4774217">s</span><span class="op" id="4774218">.</span><span class="ident" id="4774219">ch</span>&nbsp;<span class="op" id="4774222">&lt;=</span>&nbsp;<span class="string" id="4774225">&#39;9&#39;</span>&nbsp;<span class="op" id="4774229">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774235">insertSemi</span>&nbsp;<span class="op" id="4774246">=</span>&nbsp;<span class="builtintype" id="4774248">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774257">tok</span><span class="op" id="4774260">,</span>&nbsp;<span class="ident" id="4774262">lit</span>&nbsp;<span class="op" id="4774266">=</span>&nbsp;<span class="ident" id="4774268">s</span><span class="op" id="4774269">.</span><span class="ident" id="4774270">scanNumber</span><span class="op" id="4774280">(</span><span class="builtintype" id="4774281">true</span><span class="op" id="4774285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774290">}</span>&nbsp;<span class="keyword" id="4774292">else</span>&nbsp;<span class="keyword" id="4774297">if</span>&nbsp;<span class="ident" id="4774300">s</span><span class="op" id="4774301">.</span><span class="ident" id="4774302">ch</span>&nbsp;<span class="op" id="4774305">==</span>&nbsp;<span class="string" id="4774308">&#39;.&#39;</span>&nbsp;<span class="op" id="4774312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774318">s</span><span class="op" id="4774319">.</span><span class="ident" id="4774320">next</span><span class="op" id="4774324">(</span><span class="op" id="4774325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774331">if</span>&nbsp;<span class="ident" id="4774334">s</span><span class="op" id="4774335">.</span><span class="ident" id="4774336">ch</span>&nbsp;<span class="op" id="4774339">==</span>&nbsp;<span class="string" id="4774342">&#39;.&#39;</span>&nbsp;<span class="op" id="4774346">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774353">s</span><span class="op" id="4774354">.</span><span class="ident" id="4774355">next</span><span class="op" id="4774359">(</span><span class="op" id="4774360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774367">tok</span>&nbsp;<span class="op" id="4774371">=</span>&nbsp;<span class="ident" id="4774373">token</span><span class="op" id="4774378">.</span><span class="ident" id="4774379">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774397">}</span>&nbsp;<span class="keyword" id="4774399">else</span>&nbsp;<span class="op" id="4774404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774410">tok</span>&nbsp;<span class="op" id="4774414">=</span>&nbsp;<span class="ident" id="4774416">token</span><span class="op" id="4774421">.</span><span class="ident" id="4774422">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774436">case</span>&nbsp;<span class="string" id="4774441">&#39;,&#39;</span><span class="op" id="4774444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774449">tok</span>&nbsp;<span class="op" id="4774453">=</span>&nbsp;<span class="ident" id="4774455">token</span><span class="op" id="4774460">.</span><span class="ident" id="4774461">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774469">case</span>&nbsp;<span class="string" id="4774474">&#39;;&#39;</span><span class="op" id="4774477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774482">tok</span>&nbsp;<span class="op" id="4774486">=</span>&nbsp;<span class="ident" id="4774488">token</span><span class="op" id="4774493">.</span><span class="ident" id="4774494">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774507">lit</span>&nbsp;<span class="op" id="4774511">=</span>&nbsp;<span class="string" id="4774513">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774519">case</span>&nbsp;<span class="string" id="4774524">&#39;(&#39;</span><span class="op" id="4774527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774532">tok</span>&nbsp;<span class="op" id="4774536">=</span>&nbsp;<span class="ident" id="4774538">token</span><span class="op" id="4774543">.</span><span class="ident" id="4774544">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774553">case</span>&nbsp;<span class="string" id="4774558">&#39;)&#39;</span><span class="op" id="4774561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774566">insertSemi</span>&nbsp;<span class="op" id="4774577">=</span>&nbsp;<span class="builtintype" id="4774579">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774587">tok</span>&nbsp;<span class="op" id="4774591">=</span>&nbsp;<span class="ident" id="4774593">token</span><span class="op" id="4774598">.</span><span class="ident" id="4774599">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774608">case</span>&nbsp;<span class="string" id="4774613">&#39;[&#39;</span><span class="op" id="4774616">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774621">tok</span>&nbsp;<span class="op" id="4774625">=</span>&nbsp;<span class="ident" id="4774627">token</span><span class="op" id="4774632">.</span><span class="ident" id="4774633">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774642">case</span>&nbsp;<span class="string" id="4774647">&#39;]&#39;</span><span class="op" id="4774650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774655">insertSemi</span>&nbsp;<span class="op" id="4774666">=</span>&nbsp;<span class="builtintype" id="4774668">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774676">tok</span>&nbsp;<span class="op" id="4774680">=</span>&nbsp;<span class="ident" id="4774682">token</span><span class="op" id="4774687">.</span><span class="ident" id="4774688">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774697">case</span>&nbsp;<span class="string" id="4774702">&#39;{&#39;</span><span class="op" id="4774705">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774710">tok</span>&nbsp;<span class="op" id="4774714">=</span>&nbsp;<span class="ident" id="4774716">token</span><span class="op" id="4774721">.</span><span class="ident" id="4774722">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774731">case</span>&nbsp;<span class="string" id="4774736">&#39;}&#39;</span><span class="op" id="4774739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774744">insertSemi</span>&nbsp;<span class="op" id="4774755">=</span>&nbsp;<span class="builtintype" id="4774757">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774765">tok</span>&nbsp;<span class="op" id="4774769">=</span>&nbsp;<span class="ident" id="4774771">token</span><span class="op" id="4774776">.</span><span class="ident" id="4774777">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774786">case</span>&nbsp;<span class="string" id="4774791">&#39;+&#39;</span><span class="op" id="4774794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774799">tok</span>&nbsp;<span class="op" id="4774803">=</span>&nbsp;<span class="ident" id="4774805">s</span><span class="op" id="4774806">.</span><span class="ident" id="4774807">switch3</span><span class="op" id="4774814">(</span><span class="ident" id="4774815">token</span><span class="op" id="4774820">.</span><span class="ident" id="4774821">ADD</span><span class="op" id="4774824">,</span>&nbsp;<span class="ident" id="4774826">token</span><span class="op" id="4774831">.</span><span class="ident" id="4774832">ADD_ASSIGN</span><span class="op" id="4774842">,</span>&nbsp;<span class="string" id="4774844">&#39;+&#39;</span><span class="op" id="4774847">,</span>&nbsp;<span class="ident" id="4774849">token</span><span class="op" id="4774854">.</span><span class="ident" id="4774855">INC</span><span class="op" id="4774858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774863">if</span>&nbsp;<span class="ident" id="4774866">tok</span>&nbsp;<span class="op" id="4774870">==</span>&nbsp;<span class="ident" id="4774873">token</span><span class="op" id="4774878">.</span><span class="ident" id="4774879">INC</span>&nbsp;<span class="op" id="4774883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774889">insertSemi</span>&nbsp;<span class="op" id="4774900">=</span>&nbsp;<span class="builtintype" id="4774902">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4774910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774914">case</span>&nbsp;<span class="string" id="4774919">&#39;-&#39;</span><span class="op" id="4774922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4774927">tok</span>&nbsp;<span class="op" id="4774931">=</span>&nbsp;<span class="ident" id="4774933">s</span><span class="op" id="4774934">.</span><span class="ident" id="4774935">switch3</span><span class="op" id="4774942">(</span><span class="ident" id="4774943">token</span><span class="op" id="4774948">.</span><span class="ident" id="4774949">SUB</span><span class="op" id="4774952">,</span>&nbsp;<span class="ident" id="4774954">token</span><span class="op" id="4774959">.</span><span class="ident" id="4774960">SUB_ASSIGN</span><span class="op" id="4774970">,</span>&nbsp;<span class="string" id="4774972">&#39;-&#39;</span><span class="op" id="4774975">,</span>&nbsp;<span class="ident" id="4774977">token</span><span class="op" id="4774982">.</span><span class="ident" id="4774983">DEC</span><span class="op" id="4774986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4774991">if</span>&nbsp;<span class="ident" id="4774994">tok</span>&nbsp;<span class="op" id="4774998">==</span>&nbsp;<span class="ident" id="4775001">token</span><span class="op" id="4775006">.</span><span class="ident" id="4775007">DEC</span>&nbsp;<span class="op" id="4775011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775017">insertSemi</span>&nbsp;<span class="op" id="4775028">=</span>&nbsp;<span class="builtintype" id="4775030">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775042">case</span>&nbsp;<span class="string" id="4775047">&#39;*&#39;</span><span class="op" id="4775050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775055">tok</span>&nbsp;<span class="op" id="4775059">=</span>&nbsp;<span class="ident" id="4775061">s</span><span class="op" id="4775062">.</span><span class="ident" id="4775063">switch2</span><span class="op" id="4775070">(</span><span class="ident" id="4775071">token</span><span class="op" id="4775076">.</span><span class="ident" id="4775077">MUL</span><span class="op" id="4775080">,</span>&nbsp;<span class="ident" id="4775082">token</span><span class="op" id="4775087">.</span><span class="ident" id="4775088">MUL_ASSIGN</span><span class="op" id="4775098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775102">case</span>&nbsp;<span class="string" id="4775107">&#39;/&#39;</span><span class="op" id="4775110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775115">if</span>&nbsp;<span class="ident" id="4775118">s</span><span class="op" id="4775119">.</span><span class="ident" id="4775120">ch</span>&nbsp;<span class="op" id="4775123">==</span>&nbsp;<span class="string" id="4775126">&#39;/&#39;</span>&nbsp;<span class="op" id="4775130">||</span>&nbsp;<span class="ident" id="4775133">s</span><span class="op" id="4775134">.</span><span class="ident" id="4775135">ch</span>&nbsp;<span class="op" id="4775138">==</span>&nbsp;<span class="string" id="4775141">&#39;*&#39;</span>&nbsp;<span class="op" id="4775145">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775151">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775166">if</span>&nbsp;<span class="ident" id="4775169">s</span><span class="op" id="4775170">.</span><span class="ident" id="4775171">insertSemi</span>&nbsp;<span class="op" id="4775182">&amp;&amp;</span>&nbsp;<span class="ident" id="4775185">s</span><span class="op" id="4775186">.</span><span class="ident" id="4775187">findLineEnd</span><span class="op" id="4775198">(</span><span class="op" id="4775199">)</span>&nbsp;<span class="op" id="4775201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775208">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775263">s</span><span class="op" id="4775264">.</span><span class="ident" id="4775265">ch</span>&nbsp;<span class="op" id="4775268">=</span>&nbsp;<span class="string" id="4775270">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775279">s</span><span class="op" id="4775280">.</span><span class="ident" id="4775281">offset</span>&nbsp;<span class="op" id="4775288">=</span>&nbsp;<span class="ident" id="4775290">s</span><span class="op" id="4775291">.</span><span class="ident" id="4775292">file</span><span class="op" id="4775296">.</span><span class="ident" id="4775297">Offset</span><span class="op" id="4775303">(</span><span class="ident" id="4775304">pos</span><span class="op" id="4775307">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775314">s</span><span class="op" id="4775315">.</span><span class="ident" id="4775316">rdOffset</span>&nbsp;<span class="op" id="4775325">=</span>&nbsp;<span class="ident" id="4775327">s</span><span class="op" id="4775328">.</span><span class="ident" id="4775329">offset</span>&nbsp;<span class="op" id="4775336">+</span>&nbsp;<span class="num" id="4775338">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775345">s</span><span class="op" id="4775346">.</span><span class="ident" id="4775347">insertSemi</span>&nbsp;<span class="op" id="4775358">=</span>&nbsp;<span class="builtintype" id="4775360">false</span>&nbsp;<span class="comment" id="4775366">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775391">return</span>&nbsp;<span class="ident" id="4775398">pos</span><span class="op" id="4775401">,</span>&nbsp;<span class="ident" id="4775403">token</span><span class="op" id="4775408">.</span><span class="ident" id="4775409">SEMICOLON</span><span class="op" id="4775418">,</span>&nbsp;<span class="string" id="4775420">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775435">lit</span>&nbsp;<span class="op" id="4775439">=</span>&nbsp;<span class="ident" id="4775441">s</span><span class="op" id="4775442">.</span><span class="ident" id="4775443">scanComment</span><span class="op" id="4775454">(</span><span class="op" id="4775455">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775461">if</span>&nbsp;<span class="ident" id="4775464">s</span><span class="op" id="4775465">.</span><span class="ident" id="4775466">mode</span><span class="op" id="4775470">&amp;</span><span class="ident" id="4775471">ScanComments</span>&nbsp;<span class="op" id="4775484">==</span>&nbsp;<span class="num" id="4775487">0</span>&nbsp;<span class="op" id="4775489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4775496">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775517">s</span><span class="op" id="4775518">.</span><span class="ident" id="4775519">insertSemi</span>&nbsp;<span class="op" id="4775530">=</span>&nbsp;<span class="builtintype" id="4775532">false</span>&nbsp;<span class="comment" id="4775538">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775563">goto</span>&nbsp;<span class="ident" id="4775568">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775582">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775588">tok</span>&nbsp;<span class="op" id="4775592">=</span>&nbsp;<span class="ident" id="4775594">token</span><span class="op" id="4775599">.</span><span class="ident" id="4775600">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775611">}</span>&nbsp;<span class="keyword" id="4775613">else</span>&nbsp;<span class="op" id="4775618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775624">tok</span>&nbsp;<span class="op" id="4775628">=</span>&nbsp;<span class="ident" id="4775630">s</span><span class="op" id="4775631">.</span><span class="ident" id="4775632">switch2</span><span class="op" id="4775639">(</span><span class="ident" id="4775640">token</span><span class="op" id="4775645">.</span><span class="ident" id="4775646">QUO</span><span class="op" id="4775649">,</span>&nbsp;<span class="ident" id="4775651">token</span><span class="op" id="4775656">.</span><span class="ident" id="4775657">QUO_ASSIGN</span><span class="op" id="4775667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775676">case</span>&nbsp;<span class="string" id="4775681">&#39;%&#39;</span><span class="op" id="4775684">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775689">tok</span>&nbsp;<span class="op" id="4775693">=</span>&nbsp;<span class="ident" id="4775695">s</span><span class="op" id="4775696">.</span><span class="ident" id="4775697">switch2</span><span class="op" id="4775704">(</span><span class="ident" id="4775705">token</span><span class="op" id="4775710">.</span><span class="ident" id="4775711">REM</span><span class="op" id="4775714">,</span>&nbsp;<span class="ident" id="4775716">token</span><span class="op" id="4775721">.</span><span class="ident" id="4775722">REM_ASSIGN</span><span class="op" id="4775732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775736">case</span>&nbsp;<span class="string" id="4775741">&#39;^&#39;</span><span class="op" id="4775744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775749">tok</span>&nbsp;<span class="op" id="4775753">=</span>&nbsp;<span class="ident" id="4775755">s</span><span class="op" id="4775756">.</span><span class="ident" id="4775757">switch2</span><span class="op" id="4775764">(</span><span class="ident" id="4775765">token</span><span class="op" id="4775770">.</span><span class="ident" id="4775771">XOR</span><span class="op" id="4775774">,</span>&nbsp;<span class="ident" id="4775776">token</span><span class="op" id="4775781">.</span><span class="ident" id="4775782">XOR_ASSIGN</span><span class="op" id="4775792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775796">case</span>&nbsp;<span class="string" id="4775801">&#39;&lt;&#39;</span><span class="op" id="4775804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775809">if</span>&nbsp;<span class="ident" id="4775812">s</span><span class="op" id="4775813">.</span><span class="ident" id="4775814">ch</span>&nbsp;<span class="op" id="4775817">==</span>&nbsp;<span class="string" id="4775820">&#39;-&#39;</span>&nbsp;<span class="op" id="4775824">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775830">s</span><span class="op" id="4775831">.</span><span class="ident" id="4775832">next</span><span class="op" id="4775836">(</span><span class="op" id="4775837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775843">tok</span>&nbsp;<span class="op" id="4775847">=</span>&nbsp;<span class="ident" id="4775849">token</span><span class="op" id="4775854">.</span><span class="ident" id="4775855">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775864">}</span>&nbsp;<span class="keyword" id="4775866">else</span>&nbsp;<span class="op" id="4775871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775877">tok</span>&nbsp;<span class="op" id="4775881">=</span>&nbsp;<span class="ident" id="4775883">s</span><span class="op" id="4775884">.</span><span class="ident" id="4775885">switch4</span><span class="op" id="4775892">(</span><span class="ident" id="4775893">token</span><span class="op" id="4775898">.</span><span class="ident" id="4775899">LSS</span><span class="op" id="4775902">,</span>&nbsp;<span class="ident" id="4775904">token</span><span class="op" id="4775909">.</span><span class="ident" id="4775910">LEQ</span><span class="op" id="4775913">,</span>&nbsp;<span class="string" id="4775915">&#39;&lt;&#39;</span><span class="op" id="4775918">,</span>&nbsp;<span class="ident" id="4775920">token</span><span class="op" id="4775925">.</span><span class="ident" id="4775926">SHL</span><span class="op" id="4775929">,</span>&nbsp;<span class="ident" id="4775931">token</span><span class="op" id="4775936">.</span><span class="ident" id="4775937">SHL_ASSIGN</span><span class="op" id="4775947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4775952">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4775956">case</span>&nbsp;<span class="string" id="4775961">&#39;&gt;&#39;</span><span class="op" id="4775964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4775969">tok</span>&nbsp;<span class="op" id="4775973">=</span>&nbsp;<span class="ident" id="4775975">s</span><span class="op" id="4775976">.</span><span class="ident" id="4775977">switch4</span><span class="op" id="4775984">(</span><span class="ident" id="4775985">token</span><span class="op" id="4775990">.</span><span class="ident" id="4775991">GTR</span><span class="op" id="4775994">,</span>&nbsp;<span class="ident" id="4775996">token</span><span class="op" id="4776001">.</span><span class="ident" id="4776002">GEQ</span><span class="op" id="4776005">,</span>&nbsp;<span class="string" id="4776007">&#39;&gt;&#39;</span><span class="op" id="4776010">,</span>&nbsp;<span class="ident" id="4776012">token</span><span class="op" id="4776017">.</span><span class="ident" id="4776018">SHR</span><span class="op" id="4776021">,</span>&nbsp;<span class="ident" id="4776023">token</span><span class="op" id="4776028">.</span><span class="ident" id="4776029">SHR_ASSIGN</span><span class="op" id="4776039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776043">case</span>&nbsp;<span class="string" id="4776048">&#39;=&#39;</span><span class="op" id="4776051">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776056">tok</span>&nbsp;<span class="op" id="4776060">=</span>&nbsp;<span class="ident" id="4776062">s</span><span class="op" id="4776063">.</span><span class="ident" id="4776064">switch2</span><span class="op" id="4776071">(</span><span class="ident" id="4776072">token</span><span class="op" id="4776077">.</span><span class="ident" id="4776078">ASSIGN</span><span class="op" id="4776084">,</span>&nbsp;<span class="ident" id="4776086">token</span><span class="op" id="4776091">.</span><span class="ident" id="4776092">EQL</span><span class="op" id="4776095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776099">case</span>&nbsp;<span class="string" id="4776104">&#39;!&#39;</span><span class="op" id="4776107">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776112">tok</span>&nbsp;<span class="op" id="4776116">=</span>&nbsp;<span class="ident" id="4776118">s</span><span class="op" id="4776119">.</span><span class="ident" id="4776120">switch2</span><span class="op" id="4776127">(</span><span class="ident" id="4776128">token</span><span class="op" id="4776133">.</span><span class="ident" id="4776134">NOT</span><span class="op" id="4776137">,</span>&nbsp;<span class="ident" id="4776139">token</span><span class="op" id="4776144">.</span><span class="ident" id="4776145">NEQ</span><span class="op" id="4776148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776152">case</span>&nbsp;<span class="string" id="4776157">&#39;&amp;&#39;</span><span class="op" id="4776160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776165">if</span>&nbsp;<span class="ident" id="4776168">s</span><span class="op" id="4776169">.</span><span class="ident" id="4776170">ch</span>&nbsp;<span class="op" id="4776173">==</span>&nbsp;<span class="string" id="4776176">&#39;^&#39;</span>&nbsp;<span class="op" id="4776180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776186">s</span><span class="op" id="4776187">.</span><span class="ident" id="4776188">next</span><span class="op" id="4776192">(</span><span class="op" id="4776193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776199">tok</span>&nbsp;<span class="op" id="4776203">=</span>&nbsp;<span class="ident" id="4776205">s</span><span class="op" id="4776206">.</span><span class="ident" id="4776207">switch2</span><span class="op" id="4776214">(</span><span class="ident" id="4776215">token</span><span class="op" id="4776220">.</span><span class="ident" id="4776221">AND_NOT</span><span class="op" id="4776228">,</span>&nbsp;<span class="ident" id="4776230">token</span><span class="op" id="4776235">.</span><span class="ident" id="4776236">AND_NOT_ASSIGN</span><span class="op" id="4776250">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776255">}</span>&nbsp;<span class="keyword" id="4776257">else</span>&nbsp;<span class="op" id="4776262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776268">tok</span>&nbsp;<span class="op" id="4776272">=</span>&nbsp;<span class="ident" id="4776274">s</span><span class="op" id="4776275">.</span><span class="ident" id="4776276">switch3</span><span class="op" id="4776283">(</span><span class="ident" id="4776284">token</span><span class="op" id="4776289">.</span><span class="ident" id="4776290">AND</span><span class="op" id="4776293">,</span>&nbsp;<span class="ident" id="4776295">token</span><span class="op" id="4776300">.</span><span class="ident" id="4776301">AND_ASSIGN</span><span class="op" id="4776311">,</span>&nbsp;<span class="string" id="4776313">&#39;&amp;&#39;</span><span class="op" id="4776316">,</span>&nbsp;<span class="ident" id="4776318">token</span><span class="op" id="4776323">.</span><span class="ident" id="4776324">LAND</span><span class="op" id="4776328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776337">case</span>&nbsp;<span class="string" id="4776342">&#39;|&#39;</span><span class="op" id="4776345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776350">tok</span>&nbsp;<span class="op" id="4776354">=</span>&nbsp;<span class="ident" id="4776356">s</span><span class="op" id="4776357">.</span><span class="ident" id="4776358">switch3</span><span class="op" id="4776365">(</span><span class="ident" id="4776366">token</span><span class="op" id="4776371">.</span><span class="ident" id="4776372">OR</span><span class="op" id="4776374">,</span>&nbsp;<span class="ident" id="4776376">token</span><span class="op" id="4776381">.</span><span class="ident" id="4776382">OR_ASSIGN</span><span class="op" id="4776391">,</span>&nbsp;<span class="string" id="4776393">&#39;|&#39;</span><span class="op" id="4776396">,</span>&nbsp;<span class="ident" id="4776398">token</span><span class="op" id="4776403">.</span><span class="ident" id="4776404">LOR</span><span class="op" id="4776407">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776411">default</span><span class="op" id="4776418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4776423">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776473">if</span>&nbsp;<span class="ident" id="4776476">ch</span>&nbsp;<span class="op" id="4776479">!=</span>&nbsp;<span class="ident" id="4776482">bom</span>&nbsp;<span class="op" id="4776486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776492">s</span><span class="op" id="4776493">.</span><span class="builtintype" id="4776494">error</span><span class="op" id="4776499">(</span><span class="ident" id="4776500">s</span><span class="op" id="4776501">.</span><span class="ident" id="4776502">file</span><span class="op" id="4776506">.</span><span class="ident" id="4776507">Offset</span><span class="op" id="4776513">(</span><span class="ident" id="4776514">pos</span><span class="op" id="4776517">)</span><span class="op" id="4776518">,</span>&nbsp;<span class="ident" id="4776520">fmt</span><span class="op" id="4776523">.</span><span class="ident" id="4776524">Sprintf</span><span class="op" id="4776531">(</span><span class="string" id="4776532">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4776555">,</span>&nbsp;<span class="ident" id="4776557">ch</span><span class="op" id="4776559">)</span><span class="op" id="4776560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776565">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776570">insertSemi</span>&nbsp;<span class="op" id="4776581">=</span>&nbsp;<span class="ident" id="4776583">s</span><span class="op" id="4776584">.</span><span class="ident" id="4776585">insertSemi</span>&nbsp;<span class="comment" id="4776596">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776627">tok</span>&nbsp;<span class="op" id="4776631">=</span>&nbsp;<span class="ident" id="4776633">token</span><span class="op" id="4776638">.</span><span class="ident" id="4776639">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776650">lit</span>&nbsp;<span class="op" id="4776654">=</span>&nbsp;<span class="builtintype" id="4776656">string</span><span class="op" id="4776662">(</span><span class="ident" id="4776663">ch</span><span class="op" id="4776665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776672">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776675">if</span>&nbsp;<span class="ident" id="4776678">s</span><span class="op" id="4776679">.</span><span class="ident" id="4776680">mode</span><span class="op" id="4776684">&amp;</span><span class="ident" id="4776685">dontInsertSemis</span>&nbsp;<span class="op" id="4776701">==</span>&nbsp;<span class="num" id="4776704">0</span>&nbsp;<span class="op" id="4776706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4776710">s</span><span class="op" id="4776711">.</span><span class="ident" id="4776712">insertSemi</span>&nbsp;<span class="op" id="4776723">=</span>&nbsp;<span class="ident" id="4776725">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4776737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4776741">return</span><br>
<span class="lineno">760</span><span class="op" id="4776748">}</span>
</div>
</body>
</html>
