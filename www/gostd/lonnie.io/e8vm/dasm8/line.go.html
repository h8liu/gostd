<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3699690">package</span>&nbsp;<span class="ident" id="3699698">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3699705">import</span>&nbsp;<span class="op" id="3699712">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3699715">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3699724">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3699743">&#34;fmt&#34;</span><br>
<span class="lineno"></span><span class="op" id="3699749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3699752">//&nbsp;Line&nbsp;is&nbsp;a&nbsp;disassembled&nbsp;line</span><br>
<span class="lineno">10</span><span class="keyword" id="3699783">type</span>&nbsp;<span class="ident" id="3699788">Line</span>&nbsp;<span class="keyword" id="3699793">struct</span>&nbsp;<span class="op" id="3699800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699803">Addr</span>&nbsp;<span class="builtintype" id="3699808">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699817">Inst</span>&nbsp;<span class="builtintype" id="3699822">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699830">Str</span>&nbsp;&nbsp;<span class="builtintype" id="3699835">string</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699844">IsJump</span>&nbsp;<span class="builtintype" id="3699851">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699857">To</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3699864">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699872">ToLine</span>&nbsp;<span class="op" id="3699879">*</span><span class="ident" id="3699880">Line</span><br>
<span class="lineno"></span><span class="op" id="3699885">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3699888">func</span>&nbsp;<span class="ident" id="3699893">printables</span><span class="op" id="3699903">(</span><span class="ident" id="3699904">bs</span>&nbsp;<span class="op" id="3699907">[</span><span class="op" id="3699908">]</span><span class="builtintype" id="3699909">byte</span><span class="op" id="3699913">)</span>&nbsp;<span class="builtintype" id="3699915">string</span>&nbsp;<span class="op" id="3699922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699925">ret</span>&nbsp;<span class="op" id="3699929">:=</span>&nbsp;<span class="string" id="3699932">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699936">for</span>&nbsp;<span class="ident" id="3699940">_</span><span class="op" id="3699941">,</span>&nbsp;<span class="ident" id="3699943">b</span>&nbsp;<span class="op" id="3699945">:=</span>&nbsp;<span class="keyword" id="3699948">range</span>&nbsp;<span class="ident" id="3699954">bs</span>&nbsp;<span class="op" id="3699957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699961">r</span>&nbsp;<span class="op" id="3699963">:=</span>&nbsp;<span class="builtintype" id="3699966">rune</span><span class="op" id="3699970">(</span><span class="ident" id="3699971">b</span><span class="op" id="3699972">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699976">if</span>&nbsp;<span class="ident" id="3699979">r</span>&nbsp;<span class="op" id="3699981">&gt;=</span>&nbsp;<span class="string" id="3699984">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3699988">&amp;&amp;</span>&nbsp;<span class="ident" id="3699991">r</span>&nbsp;<span class="op" id="3699993">&lt;=</span>&nbsp;<span class="string" id="3699996">&#39;~&#39;</span>&nbsp;<span class="op" id="3700000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700005">ret</span>&nbsp;<span class="op" id="3700009">+=</span>&nbsp;<span class="builtintype" id="3700012">string</span><span class="op" id="3700018">(</span><span class="ident" id="3700019">r</span><span class="op" id="3700020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700024">}</span>&nbsp;<span class="keyword" id="3700026">else</span>&nbsp;<span class="op" id="3700031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700036">ret</span>&nbsp;<span class="op" id="3700040">+=</span>&nbsp;<span class="string" id="3700043">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700049">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700055">return</span>&nbsp;<span class="ident" id="3700062">ret</span><br>
<span class="lineno"></span><span class="op" id="3700066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3700069">var</span>&nbsp;<span class="ident" id="3700073">enc</span>&nbsp;<span class="op" id="3700077">=</span>&nbsp;<span class="ident" id="3700079">binary</span><span class="op" id="3700085">.</span><span class="ident" id="3700086">LittleEndian</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="3700100">func</span>&nbsp;<span class="op" id="3700105">(</span><span class="ident" id="3700106">line</span>&nbsp;<span class="op" id="3700111">*</span><span class="ident" id="3700112">Line</span><span class="op" id="3700116">)</span>&nbsp;<span class="ident" id="3700118">String</span><span class="op" id="3700124">(</span><span class="op" id="3700125">)</span>&nbsp;<span class="builtintype" id="3700127">string</span>&nbsp;<span class="op" id="3700134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700137">ret</span>&nbsp;<span class="op" id="3700141">:=</span>&nbsp;<span class="builtinfunc" id="3700144">new</span><span class="op" id="3700147">(</span><span class="ident" id="3700148">bytes</span><span class="op" id="3700153">.</span><span class="ident" id="3700154">Buffer</span><span class="op" id="3700160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700163">var</span>&nbsp;<span class="ident" id="3700167">buf</span>&nbsp;<span class="op" id="3700171">[</span><span class="num" id="3700172">4</span><span class="op" id="3700173">]</span><span class="builtintype" id="3700174">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700180">enc</span><span class="op" id="3700183">.</span><span class="ident" id="3700184">PutUint32</span><span class="op" id="3700193">(</span><span class="ident" id="3700194">buf</span><span class="op" id="3700197">[</span><span class="op" id="3700198">:</span><span class="op" id="3700199">]</span><span class="op" id="3700200">,</span>&nbsp;<span class="ident" id="3700202">line</span><span class="op" id="3700206">.</span><span class="ident" id="3700207">Inst</span><span class="op" id="3700211">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700215">fmt</span><span class="op" id="3700218">.</span><span class="ident" id="3700219">Fprintf</span><span class="op" id="3700226">(</span><span class="ident" id="3700227">ret</span><span class="op" id="3700230">,</span>&nbsp;<span class="string" id="3700232">&#34;%08x:&nbsp;&nbsp;%&nbsp;02x&#34;</span><span class="op" id="3700246">,</span>&nbsp;<span class="ident" id="3700248">line</span><span class="op" id="3700252">.</span><span class="ident" id="3700253">Addr</span><span class="op" id="3700257">,</span>&nbsp;<span class="ident" id="3700259">buf</span><span class="op" id="3700262">[</span><span class="op" id="3700263">:</span><span class="op" id="3700264">]</span><span class="op" id="3700265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700268">fmt</span><span class="op" id="3700271">.</span><span class="ident" id="3700272">Fprintf</span><span class="op" id="3700279">(</span><span class="ident" id="3700280">ret</span><span class="op" id="3700283">,</span>&nbsp;<span class="string" id="3700285">&#34;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="3700292">,</span>&nbsp;<span class="ident" id="3700294">printables</span><span class="op" id="3700304">(</span><span class="ident" id="3700305">buf</span><span class="op" id="3700308">[</span><span class="op" id="3700309">:</span><span class="op" id="3700310">]</span><span class="op" id="3700311">)</span><span class="op" id="3700312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700315">fmt</span><span class="op" id="3700318">.</span><span class="ident" id="3700319">Fprintf</span><span class="op" id="3700326">(</span><span class="ident" id="3700327">ret</span><span class="op" id="3700330">,</span>&nbsp;<span class="string" id="3700332">&#34;&nbsp;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="3700340">,</span>&nbsp;<span class="ident" id="3700342">line</span><span class="op" id="3700346">.</span><span class="ident" id="3700347">Str</span><span class="op" id="3700350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700353">if</span>&nbsp;<span class="ident" id="3700356">line</span><span class="op" id="3700360">.</span><span class="ident" id="3700361">IsJump</span>&nbsp;<span class="op" id="3700368">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700372">fmt</span><span class="op" id="3700375">.</span><span class="ident" id="3700376">Fprintf</span><span class="op" id="3700383">(</span><span class="ident" id="3700384">ret</span><span class="op" id="3700387">,</span>&nbsp;<span class="string" id="3700389">&#34;&nbsp;&nbsp;&nbsp;//&nbsp;%08x&#34;</span><span class="op" id="3700401">,</span>&nbsp;<span class="ident" id="3700403">line</span><span class="op" id="3700407">.</span><span class="ident" id="3700408">To</span><span class="op" id="3700410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700417">return</span>&nbsp;<span class="ident" id="3700424">ret</span><span class="op" id="3700427">.</span><span class="ident" id="3700428">String</span><span class="op" id="3700434">(</span><span class="op" id="3700435">)</span><br>
<span class="lineno"></span><span class="op" id="3700437">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3700440">func</span>&nbsp;<span class="ident" id="3700445">newLine</span><span class="op" id="3700452">(</span><span class="ident" id="3700453">addr</span>&nbsp;<span class="builtintype" id="3700458">uint32</span><span class="op" id="3700464">,</span>&nbsp;<span class="ident" id="3700466">in</span>&nbsp;<span class="builtintype" id="3700469">uint32</span><span class="op" id="3700475">)</span>&nbsp;<span class="op" id="3700477">*</span><span class="ident" id="3700478">Line</span>&nbsp;<span class="op" id="3700483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700486">ret</span>&nbsp;<span class="op" id="3700490">:=</span>&nbsp;<span class="builtinfunc" id="3700493">new</span><span class="op" id="3700496">(</span><span class="ident" id="3700497">Line</span><span class="op" id="3700501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700504">ret</span><span class="op" id="3700507">.</span><span class="ident" id="3700508">Addr</span>&nbsp;<span class="op" id="3700513">=</span>&nbsp;<span class="ident" id="3700515">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700521">ret</span><span class="op" id="3700524">.</span><span class="ident" id="3700525">Inst</span>&nbsp;<span class="op" id="3700530">=</span>&nbsp;<span class="ident" id="3700532">in</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700536">return</span>&nbsp;<span class="ident" id="3700543">ret</span><br>
<span class="lineno"></span><span class="op" id="3700547">}</span>
</div>
</body>
</html>
