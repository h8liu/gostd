<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4279297">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4279352">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4279406">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4279457">package</span>&nbsp;<span class="ident" id="4279465">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4279470">import</span>&nbsp;<span class="op" id="4279477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4279480">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4279492">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4279500">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="4279510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4279513">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="4279590">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="4279675">func</span>&nbsp;<span class="ident" id="4279680">SortImports</span><span class="op" id="4279691">(</span><span class="ident" id="4279692">fset</span>&nbsp;<span class="op" id="4279697">*</span><span class="ident" id="4279698">token</span><span class="op" id="4279703">.</span><span class="ident" id="4279704">FileSet</span><span class="op" id="4279711">,</span>&nbsp;<span class="ident" id="4279713">f</span>&nbsp;<span class="op" id="4279715">*</span><span class="ident" id="4279716">File</span><span class="op" id="4279720">)</span>&nbsp;<span class="op" id="4279722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4279725">for</span>&nbsp;<span class="ident" id="4279729">_</span><span class="op" id="4279730">,</span>&nbsp;<span class="ident" id="4279732">d</span>&nbsp;<span class="op" id="4279734">:=</span>&nbsp;<span class="keyword" id="4279737">range</span>&nbsp;<span class="ident" id="4279743">f</span><span class="op" id="4279744">.</span><span class="ident" id="4279745">Decls</span>&nbsp;<span class="op" id="4279751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4279755">d</span><span class="op" id="4279756">,</span>&nbsp;<span class="ident" id="4279758">ok</span>&nbsp;<span class="op" id="4279761">:=</span>&nbsp;<span class="ident" id="4279764">d</span><span class="op" id="4279765">.</span><span class="op" id="4279766">(</span><span class="op" id="4279767">*</span><span class="ident" id="4279768">GenDecl</span><span class="op" id="4279775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4279779">if</span>&nbsp;<span class="op" id="4279782">!</span><span class="ident" id="4279783">ok</span>&nbsp;<span class="op" id="4279786">||</span>&nbsp;<span class="ident" id="4279789">d</span><span class="op" id="4279790">.</span><span class="ident" id="4279791">Tok</span>&nbsp;<span class="op" id="4279795">!=</span>&nbsp;<span class="ident" id="4279798">token</span><span class="op" id="4279803">.</span><span class="ident" id="4279804">IMPORT</span>&nbsp;<span class="op" id="4279811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4279816">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4279864">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4279896">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4279904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4279909">if</span>&nbsp;<span class="op" id="4279912">!</span><span class="ident" id="4279913">d</span><span class="op" id="4279914">.</span><span class="ident" id="4279915">Lparen</span><span class="op" id="4279921">.</span><span class="ident" id="4279922">IsValid</span><span class="op" id="4279929">(</span><span class="op" id="4279930">)</span>&nbsp;<span class="op" id="4279932">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4279937">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4279975">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4279986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4279991">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280049">i</span>&nbsp;<span class="op" id="4280051">:=</span>&nbsp;<span class="num" id="4280054">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280058">specs</span>&nbsp;<span class="op" id="4280064">:=</span>&nbsp;<span class="ident" id="4280067">d</span><span class="op" id="4280068">.</span><span class="ident" id="4280069">Specs</span><span class="op" id="4280074">[</span><span class="op" id="4280075">:</span><span class="num" id="4280076">0</span><span class="op" id="4280077">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280081">for</span>&nbsp;<span class="ident" id="4280085">j</span><span class="op" id="4280086">,</span>&nbsp;<span class="ident" id="4280088">s</span>&nbsp;<span class="op" id="4280090">:=</span>&nbsp;<span class="keyword" id="4280093">range</span>&nbsp;<span class="ident" id="4280099">d</span><span class="op" id="4280100">.</span><span class="ident" id="4280101">Specs</span>&nbsp;<span class="op" id="4280107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280112">if</span>&nbsp;<span class="ident" id="4280115">j</span>&nbsp;<span class="op" id="4280117">&gt;</span>&nbsp;<span class="ident" id="4280119">i</span>&nbsp;<span class="op" id="4280121">&amp;&amp;</span>&nbsp;<span class="ident" id="4280124">fset</span><span class="op" id="4280128">.</span><span class="ident" id="4280129">Position</span><span class="op" id="4280137">(</span><span class="ident" id="4280138">s</span><span class="op" id="4280139">.</span><span class="ident" id="4280140">Pos</span><span class="op" id="4280143">(</span><span class="op" id="4280144">)</span><span class="op" id="4280145">)</span><span class="op" id="4280146">.</span><span class="ident" id="4280147">Line</span>&nbsp;<span class="op" id="4280152">&gt;</span>&nbsp;<span class="num" id="4280154">1</span><span class="op" id="4280155">+</span><span class="ident" id="4280156">fset</span><span class="op" id="4280160">.</span><span class="ident" id="4280161">Position</span><span class="op" id="4280169">(</span><span class="ident" id="4280170">d</span><span class="op" id="4280171">.</span><span class="ident" id="4280172">Specs</span><span class="op" id="4280177">[</span><span class="ident" id="4280178">j</span><span class="op" id="4280179">-</span><span class="num" id="4280180">1</span><span class="op" id="4280181">]</span><span class="op" id="4280182">.</span><span class="ident" id="4280183">End</span><span class="op" id="4280186">(</span><span class="op" id="4280187">)</span><span class="op" id="4280188">)</span><span class="op" id="4280189">.</span><span class="ident" id="4280190">Line</span>&nbsp;<span class="op" id="4280195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4280201">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280243">specs</span>&nbsp;<span class="op" id="4280249">=</span>&nbsp;<span class="builtinfunc" id="4280251">append</span><span class="op" id="4280257">(</span><span class="ident" id="4280258">specs</span><span class="op" id="4280263">,</span>&nbsp;<span class="ident" id="4280265">sortSpecs</span><span class="op" id="4280274">(</span><span class="ident" id="4280275">fset</span><span class="op" id="4280279">,</span>&nbsp;<span class="ident" id="4280281">f</span><span class="op" id="4280282">,</span>&nbsp;<span class="ident" id="4280284">d</span><span class="op" id="4280285">.</span><span class="ident" id="4280286">Specs</span><span class="op" id="4280291">[</span><span class="ident" id="4280292">i</span><span class="op" id="4280293">:</span><span class="ident" id="4280294">j</span><span class="op" id="4280295">]</span><span class="op" id="4280296">)</span><span class="op" id="4280297">...</span><span class="op" id="4280300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280306">i</span>&nbsp;<span class="op" id="4280308">=</span>&nbsp;<span class="ident" id="4280310">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280323">specs</span>&nbsp;<span class="op" id="4280329">=</span>&nbsp;<span class="builtinfunc" id="4280331">append</span><span class="op" id="4280337">(</span><span class="ident" id="4280338">specs</span><span class="op" id="4280343">,</span>&nbsp;<span class="ident" id="4280345">sortSpecs</span><span class="op" id="4280354">(</span><span class="ident" id="4280355">fset</span><span class="op" id="4280359">,</span>&nbsp;<span class="ident" id="4280361">f</span><span class="op" id="4280362">,</span>&nbsp;<span class="ident" id="4280364">d</span><span class="op" id="4280365">.</span><span class="ident" id="4280366">Specs</span><span class="op" id="4280371">[</span><span class="ident" id="4280372">i</span><span class="op" id="4280373">:</span><span class="op" id="4280374">]</span><span class="op" id="4280375">)</span><span class="op" id="4280376">...</span><span class="op" id="4280379">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280383">d</span><span class="op" id="4280384">.</span><span class="ident" id="4280385">Specs</span>&nbsp;<span class="op" id="4280391">=</span>&nbsp;<span class="ident" id="4280393">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4280402">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280473">if</span>&nbsp;<span class="builtinfunc" id="4280476">len</span><span class="op" id="4280479">(</span><span class="ident" id="4280480">d</span><span class="op" id="4280481">.</span><span class="ident" id="4280482">Specs</span><span class="op" id="4280487">)</span>&nbsp;<span class="op" id="4280489">&gt;</span>&nbsp;<span class="num" id="4280491">0</span>&nbsp;<span class="op" id="4280493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280498">lastSpec</span>&nbsp;<span class="op" id="4280507">:=</span>&nbsp;<span class="ident" id="4280510">d</span><span class="op" id="4280511">.</span><span class="ident" id="4280512">Specs</span><span class="op" id="4280517">[</span><span class="builtinfunc" id="4280518">len</span><span class="op" id="4280521">(</span><span class="ident" id="4280522">d</span><span class="op" id="4280523">.</span><span class="ident" id="4280524">Specs</span><span class="op" id="4280529">)</span><span class="op" id="4280530">-</span><span class="num" id="4280531">1</span><span class="op" id="4280532">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280537">lastLine</span>&nbsp;<span class="op" id="4280546">:=</span>&nbsp;<span class="ident" id="4280549">fset</span><span class="op" id="4280553">.</span><span class="ident" id="4280554">Position</span><span class="op" id="4280562">(</span><span class="ident" id="4280563">lastSpec</span><span class="op" id="4280571">.</span><span class="ident" id="4280572">Pos</span><span class="op" id="4280575">(</span><span class="op" id="4280576">)</span><span class="op" id="4280577">)</span><span class="op" id="4280578">.</span><span class="ident" id="4280579">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280587">if</span>&nbsp;<span class="ident" id="4280590">rParenLine</span>&nbsp;<span class="op" id="4280601">:=</span>&nbsp;<span class="ident" id="4280604">fset</span><span class="op" id="4280608">.</span><span class="ident" id="4280609">Position</span><span class="op" id="4280617">(</span><span class="ident" id="4280618">d</span><span class="op" id="4280619">.</span><span class="ident" id="4280620">Rparen</span><span class="op" id="4280626">)</span><span class="op" id="4280627">.</span><span class="ident" id="4280628">Line</span><span class="op" id="4280632">;</span>&nbsp;<span class="ident" id="4280634">rParenLine</span>&nbsp;<span class="op" id="4280645">&gt;</span>&nbsp;<span class="ident" id="4280647">lastLine</span><span class="op" id="4280655">+</span><span class="num" id="4280656">1</span>&nbsp;<span class="op" id="4280658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280664">fset</span><span class="op" id="4280668">.</span><span class="ident" id="4280669">File</span><span class="op" id="4280673">(</span><span class="ident" id="4280674">d</span><span class="op" id="4280675">.</span><span class="ident" id="4280676">Rparen</span><span class="op" id="4280682">)</span><span class="op" id="4280683">.</span><span class="ident" id="4280684">MergeLine</span><span class="op" id="4280693">(</span><span class="ident" id="4280694">rParenLine</span>&nbsp;<span class="op" id="4280705">-</span>&nbsp;<span class="num" id="4280707">1</span><span class="op" id="4280708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280717">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280720">}</span><br>
<span class="lineno"></span><span class="op" id="4280722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4280725">func</span>&nbsp;<span class="ident" id="4280730">importPath</span><span class="op" id="4280740">(</span><span class="ident" id="4280741">s</span>&nbsp;<span class="ident" id="4280743">Spec</span><span class="op" id="4280747">)</span>&nbsp;<span class="builtintype" id="4280749">string</span>&nbsp;<span class="op" id="4280756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280759">t</span><span class="op" id="4280760">,</span>&nbsp;<span class="ident" id="4280762">err</span>&nbsp;<span class="op" id="4280766">:=</span>&nbsp;<span class="ident" id="4280769">strconv</span><span class="op" id="4280776">.</span><span class="ident" id="4280777">Unquote</span><span class="op" id="4280784">(</span><span class="ident" id="4280785">s</span><span class="op" id="4280786">.</span><span class="op" id="4280787">(</span><span class="op" id="4280788">*</span><span class="ident" id="4280789">ImportSpec</span><span class="op" id="4280799">)</span><span class="op" id="4280800">.</span><span class="ident" id="4280801">Path</span><span class="op" id="4280805">.</span><span class="ident" id="4280806">Value</span><span class="op" id="4280811">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280814">if</span>&nbsp;<span class="ident" id="4280817">err</span>&nbsp;<span class="op" id="4280821">==</span>&nbsp;<span class="ident" id="4280824">nil</span>&nbsp;<span class="op" id="4280828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280832">return</span>&nbsp;<span class="ident" id="4280839">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280845">return</span>&nbsp;<span class="string" id="4280852">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4280855">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="4280858">func</span>&nbsp;<span class="ident" id="4280863">importName</span><span class="op" id="4280873">(</span><span class="ident" id="4280874">s</span>&nbsp;<span class="ident" id="4280876">Spec</span><span class="op" id="4280880">)</span>&nbsp;<span class="builtintype" id="4280882">string</span>&nbsp;<span class="op" id="4280889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4280892">n</span>&nbsp;<span class="op" id="4280894">:=</span>&nbsp;<span class="ident" id="4280897">s</span><span class="op" id="4280898">.</span><span class="op" id="4280899">(</span><span class="op" id="4280900">*</span><span class="ident" id="4280901">ImportSpec</span><span class="op" id="4280911">)</span><span class="op" id="4280912">.</span><span class="ident" id="4280913">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280919">if</span>&nbsp;<span class="ident" id="4280922">n</span>&nbsp;<span class="op" id="4280924">==</span>&nbsp;<span class="ident" id="4280927">nil</span>&nbsp;<span class="op" id="4280931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280935">return</span>&nbsp;<span class="string" id="4280942">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4280946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4280949">return</span>&nbsp;<span class="ident" id="4280956">n</span><span class="op" id="4280957">.</span><span class="ident" id="4280958">Name</span><br>
<span class="lineno"></span><span class="op" id="4280963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4280966">func</span>&nbsp;<span class="ident" id="4280971">importComment</span><span class="op" id="4280984">(</span><span class="ident" id="4280985">s</span>&nbsp;<span class="ident" id="4280987">Spec</span><span class="op" id="4280991">)</span>&nbsp;<span class="builtintype" id="4280993">string</span>&nbsp;<span class="op" id="4281000">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281003">c</span>&nbsp;<span class="op" id="4281005">:=</span>&nbsp;<span class="ident" id="4281008">s</span><span class="op" id="4281009">.</span><span class="op" id="4281010">(</span><span class="op" id="4281011">*</span><span class="ident" id="4281012">ImportSpec</span><span class="op" id="4281022">)</span><span class="op" id="4281023">.</span><span class="ident" id="4281024">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281033">if</span>&nbsp;<span class="ident" id="4281036">c</span>&nbsp;<span class="op" id="4281038">==</span>&nbsp;<span class="ident" id="4281041">nil</span>&nbsp;<span class="op" id="4281045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281049">return</span>&nbsp;<span class="string" id="4281056">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4281060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281063">return</span>&nbsp;<span class="ident" id="4281070">c</span><span class="op" id="4281071">.</span><span class="ident" id="4281072">Text</span><span class="op" id="4281076">(</span><span class="op" id="4281077">)</span><br>
<span class="lineno">75</span><span class="op" id="4281079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4281082">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4281152">func</span>&nbsp;<span class="ident" id="4281157">collapse</span><span class="op" id="4281165">(</span><span class="ident" id="4281166">prev</span><span class="op" id="4281170">,</span>&nbsp;<span class="ident" id="4281172">next</span>&nbsp;<span class="ident" id="4281177">Spec</span><span class="op" id="4281181">)</span>&nbsp;<span class="builtintype" id="4281183">bool</span>&nbsp;<span class="op" id="4281188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281191">if</span>&nbsp;<span class="ident" id="4281194">importPath</span><span class="op" id="4281204">(</span><span class="ident" id="4281205">next</span><span class="op" id="4281209">)</span>&nbsp;<span class="op" id="4281211">!=</span>&nbsp;<span class="ident" id="4281214">importPath</span><span class="op" id="4281224">(</span><span class="ident" id="4281225">prev</span><span class="op" id="4281229">)</span>&nbsp;<span class="op" id="4281231">||</span>&nbsp;<span class="ident" id="4281234">importName</span><span class="op" id="4281244">(</span><span class="ident" id="4281245">next</span><span class="op" id="4281249">)</span>&nbsp;<span class="op" id="4281251">!=</span>&nbsp;<span class="ident" id="4281254">importName</span><span class="op" id="4281264">(</span><span class="ident" id="4281265">prev</span><span class="op" id="4281269">)</span>&nbsp;<span class="op" id="4281271">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281275">return</span>&nbsp;<span class="builtintype" id="4281282">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4281289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281292">return</span>&nbsp;<span class="ident" id="4281299">prev</span><span class="op" id="4281303">.</span><span class="op" id="4281304">(</span><span class="op" id="4281305">*</span><span class="ident" id="4281306">ImportSpec</span><span class="op" id="4281316">)</span><span class="op" id="4281317">.</span><span class="ident" id="4281318">Comment</span>&nbsp;<span class="op" id="4281326">==</span>&nbsp;<span class="ident" id="4281329">nil</span><br>
<span class="lineno"></span><span class="op" id="4281333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4281336">type</span>&nbsp;<span class="ident" id="4281341">posSpan</span>&nbsp;<span class="keyword" id="4281349">struct</span>&nbsp;<span class="op" id="4281356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281359">Start</span>&nbsp;<span class="ident" id="4281365">token</span><span class="op" id="4281370">.</span><span class="ident" id="4281371">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281376">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4281382">token</span><span class="op" id="4281387">.</span><span class="ident" id="4281388">Pos</span><br>
<span class="lineno"></span><span class="op" id="4281392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="4281395">func</span>&nbsp;<span class="ident" id="4281400">sortSpecs</span><span class="op" id="4281409">(</span><span class="ident" id="4281410">fset</span>&nbsp;<span class="op" id="4281415">*</span><span class="ident" id="4281416">token</span><span class="op" id="4281421">.</span><span class="ident" id="4281422">FileSet</span><span class="op" id="4281429">,</span>&nbsp;<span class="ident" id="4281431">f</span>&nbsp;<span class="op" id="4281433">*</span><span class="ident" id="4281434">File</span><span class="op" id="4281438">,</span>&nbsp;<span class="ident" id="4281440">specs</span>&nbsp;<span class="op" id="4281446">[</span><span class="op" id="4281447">]</span><span class="ident" id="4281448">Spec</span><span class="op" id="4281452">)</span>&nbsp;<span class="op" id="4281454">[</span><span class="op" id="4281455">]</span><span class="ident" id="4281456">Spec</span>&nbsp;<span class="op" id="4281461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281464">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281527">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281572">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281623">if</span>&nbsp;<span class="builtinfunc" id="4281626">len</span><span class="op" id="4281629">(</span><span class="ident" id="4281630">specs</span><span class="op" id="4281635">)</span>&nbsp;<span class="op" id="4281637">&lt;=</span>&nbsp;<span class="num" id="4281640">1</span>&nbsp;<span class="op" id="4281642">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281646">return</span>&nbsp;<span class="ident" id="4281653">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4281660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281664">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281696">pos</span>&nbsp;<span class="op" id="4281700">:=</span>&nbsp;<span class="builtinfunc" id="4281703">make</span><span class="op" id="4281707">(</span><span class="op" id="4281708">[</span><span class="op" id="4281709">]</span><span class="ident" id="4281710">posSpan</span><span class="op" id="4281717">,</span>&nbsp;<span class="builtinfunc" id="4281719">len</span><span class="op" id="4281722">(</span><span class="ident" id="4281723">specs</span><span class="op" id="4281728">)</span><span class="op" id="4281729">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4281732">for</span>&nbsp;<span class="ident" id="4281736">i</span><span class="op" id="4281737">,</span>&nbsp;<span class="ident" id="4281739">s</span>&nbsp;<span class="op" id="4281741">:=</span>&nbsp;<span class="keyword" id="4281744">range</span>&nbsp;<span class="ident" id="4281750">specs</span>&nbsp;<span class="op" id="4281756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281760">pos</span><span class="op" id="4281763">[</span><span class="ident" id="4281764">i</span><span class="op" id="4281765">]</span>&nbsp;<span class="op" id="4281767">=</span>&nbsp;<span class="ident" id="4281769">posSpan</span><span class="op" id="4281776">{</span><span class="ident" id="4281777">s</span><span class="op" id="4281778">.</span><span class="ident" id="4281779">Pos</span><span class="op" id="4281782">(</span><span class="op" id="4281783">)</span><span class="op" id="4281784">,</span>&nbsp;<span class="ident" id="4281786">s</span><span class="op" id="4281787">.</span><span class="ident" id="4281788">End</span><span class="op" id="4281791">(</span><span class="op" id="4281792">)</span><span class="op" id="4281793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4281796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281800">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4281837">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281897">lastLine</span>&nbsp;<span class="op" id="4281906">:=</span>&nbsp;<span class="ident" id="4281909">fset</span><span class="op" id="4281913">.</span><span class="ident" id="4281914">Position</span><span class="op" id="4281922">(</span><span class="ident" id="4281923">pos</span><span class="op" id="4281926">[</span><span class="builtinfunc" id="4281927">len</span><span class="op" id="4281930">(</span><span class="ident" id="4281931">pos</span><span class="op" id="4281934">)</span><span class="op" id="4281935">-</span><span class="num" id="4281936">1</span><span class="op" id="4281937">]</span><span class="op" id="4281938">.</span><span class="ident" id="4281939">End</span><span class="op" id="4281942">)</span><span class="op" id="4281943">.</span><span class="ident" id="4281944">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281950">cstart</span>&nbsp;<span class="op" id="4281957">:=</span>&nbsp;<span class="builtinfunc" id="4281960">len</span><span class="op" id="4281963">(</span><span class="ident" id="4281964">f</span><span class="op" id="4281965">.</span><span class="ident" id="4281966">Comments</span><span class="op" id="4281974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4281977">cend</span>&nbsp;<span class="op" id="4281982">:=</span>&nbsp;<span class="builtinfunc" id="4281985">len</span><span class="op" id="4281988">(</span><span class="ident" id="4281989">f</span><span class="op" id="4281990">.</span><span class="ident" id="4281991">Comments</span><span class="op" id="4281999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282002">for</span>&nbsp;<span class="ident" id="4282006">i</span><span class="op" id="4282007">,</span>&nbsp;<span class="ident" id="4282009">g</span>&nbsp;<span class="op" id="4282011">:=</span>&nbsp;<span class="keyword" id="4282014">range</span>&nbsp;<span class="ident" id="4282020">f</span><span class="op" id="4282021">.</span><span class="ident" id="4282022">Comments</span>&nbsp;<span class="op" id="4282031">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282035">if</span>&nbsp;<span class="ident" id="4282038">g</span><span class="op" id="4282039">.</span><span class="ident" id="4282040">Pos</span><span class="op" id="4282043">(</span><span class="op" id="4282044">)</span>&nbsp;<span class="op" id="4282046">&lt;</span>&nbsp;<span class="ident" id="4282048">pos</span><span class="op" id="4282051">[</span><span class="num" id="4282052">0</span><span class="op" id="4282053">]</span><span class="op" id="4282054">.</span><span class="ident" id="4282055">Start</span>&nbsp;<span class="op" id="4282061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282066">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282081">if</span>&nbsp;<span class="ident" id="4282084">i</span>&nbsp;<span class="op" id="4282086">&lt;</span>&nbsp;<span class="ident" id="4282088">cstart</span>&nbsp;<span class="op" id="4282095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282100">cstart</span>&nbsp;<span class="op" id="4282107">=</span>&nbsp;<span class="ident" id="4282109">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282117">if</span>&nbsp;<span class="ident" id="4282120">fset</span><span class="op" id="4282124">.</span><span class="ident" id="4282125">Position</span><span class="op" id="4282133">(</span><span class="ident" id="4282134">g</span><span class="op" id="4282135">.</span><span class="ident" id="4282136">End</span><span class="op" id="4282139">(</span><span class="op" id="4282140">)</span><span class="op" id="4282141">)</span><span class="op" id="4282142">.</span><span class="ident" id="4282143">Line</span>&nbsp;<span class="op" id="4282148">&gt;</span>&nbsp;<span class="ident" id="4282150">lastLine</span>&nbsp;<span class="op" id="4282159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282164">cend</span>&nbsp;<span class="op" id="4282169">=</span>&nbsp;<span class="ident" id="4282171">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282176">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282184">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282190">comments</span>&nbsp;<span class="op" id="4282199">:=</span>&nbsp;<span class="ident" id="4282202">f</span><span class="op" id="4282203">.</span><span class="ident" id="4282204">Comments</span><span class="op" id="4282212">[</span><span class="ident" id="4282213">cstart</span><span class="op" id="4282219">:</span><span class="ident" id="4282220">cend</span><span class="op" id="4282224">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282228">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282285">importComment</span>&nbsp;<span class="op" id="4282299">:=</span>&nbsp;<span class="keyword" id="4282302">map</span><span class="op" id="4282305">[</span><span class="op" id="4282306">*</span><span class="ident" id="4282307">ImportSpec</span><span class="op" id="4282317">]</span><span class="op" id="4282318">[</span><span class="op" id="4282319">]</span><span class="op" id="4282320">*</span><span class="ident" id="4282321">CommentGroup</span><span class="op" id="4282333">{</span><span class="op" id="4282334">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282337">specIndex</span>&nbsp;<span class="op" id="4282347">:=</span>&nbsp;<span class="num" id="4282350">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282353">for</span>&nbsp;<span class="ident" id="4282357">_</span><span class="op" id="4282358">,</span>&nbsp;<span class="ident" id="4282360">g</span>&nbsp;<span class="op" id="4282362">:=</span>&nbsp;<span class="keyword" id="4282365">range</span>&nbsp;<span class="ident" id="4282371">comments</span>&nbsp;<span class="op" id="4282380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282384">for</span>&nbsp;<span class="ident" id="4282388">specIndex</span><span class="op" id="4282397">+</span><span class="num" id="4282398">1</span>&nbsp;<span class="op" id="4282400">&lt;</span>&nbsp;<span class="builtinfunc" id="4282402">len</span><span class="op" id="4282405">(</span><span class="ident" id="4282406">specs</span><span class="op" id="4282411">)</span>&nbsp;<span class="op" id="4282413">&amp;&amp;</span>&nbsp;<span class="ident" id="4282416">pos</span><span class="op" id="4282419">[</span><span class="ident" id="4282420">specIndex</span><span class="op" id="4282429">+</span><span class="num" id="4282430">1</span><span class="op" id="4282431">]</span><span class="op" id="4282432">.</span><span class="ident" id="4282433">Start</span>&nbsp;<span class="op" id="4282439">&lt;=</span>&nbsp;<span class="ident" id="4282442">g</span><span class="op" id="4282443">.</span><span class="ident" id="4282444">Pos</span><span class="op" id="4282447">(</span><span class="op" id="4282448">)</span>&nbsp;<span class="op" id="4282450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282455">specIndex</span><span class="op" id="4282464">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282469">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282473">s</span>&nbsp;<span class="op" id="4282475">:=</span>&nbsp;<span class="ident" id="4282478">specs</span><span class="op" id="4282483">[</span><span class="ident" id="4282484">specIndex</span><span class="op" id="4282493">]</span><span class="op" id="4282494">.</span><span class="op" id="4282495">(</span><span class="op" id="4282496">*</span><span class="ident" id="4282497">ImportSpec</span><span class="op" id="4282507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282511">importComment</span><span class="op" id="4282524">[</span><span class="ident" id="4282525">s</span><span class="op" id="4282526">]</span>&nbsp;<span class="op" id="4282528">=</span>&nbsp;<span class="builtinfunc" id="4282530">append</span><span class="op" id="4282536">(</span><span class="ident" id="4282537">importComment</span><span class="op" id="4282550">[</span><span class="ident" id="4282551">s</span><span class="op" id="4282552">]</span><span class="op" id="4282553">,</span>&nbsp;<span class="ident" id="4282555">g</span><span class="op" id="4282556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4282559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282563">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282605">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282661">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282727">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282782">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282821">sort</span><span class="op" id="4282825">.</span><span class="ident" id="4282826">Sort</span><span class="op" id="4282830">(</span><span class="ident" id="4282831">byImportSpec</span><span class="op" id="4282843">(</span><span class="ident" id="4282844">specs</span><span class="op" id="4282849">)</span><span class="op" id="4282850">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282854">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4282909">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4282940">deduped</span>&nbsp;<span class="op" id="4282948">:=</span>&nbsp;<span class="ident" id="4282951">specs</span><span class="op" id="4282956">[</span><span class="op" id="4282957">:</span><span class="num" id="4282958">0</span><span class="op" id="4282959">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282962">for</span>&nbsp;<span class="ident" id="4282966">i</span><span class="op" id="4282967">,</span>&nbsp;<span class="ident" id="4282969">s</span>&nbsp;<span class="op" id="4282971">:=</span>&nbsp;<span class="keyword" id="4282974">range</span>&nbsp;<span class="ident" id="4282980">specs</span>&nbsp;<span class="op" id="4282986">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4282990">if</span>&nbsp;<span class="ident" id="4282993">i</span>&nbsp;<span class="op" id="4282995">==</span>&nbsp;<span class="builtinfunc" id="4282998">len</span><span class="op" id="4283001">(</span><span class="ident" id="4283002">specs</span><span class="op" id="4283007">)</span><span class="op" id="4283008">-</span><span class="num" id="4283009">1</span>&nbsp;<span class="op" id="4283011">||</span>&nbsp;<span class="op" id="4283014">!</span><span class="ident" id="4283015">collapse</span><span class="op" id="4283023">(</span><span class="ident" id="4283024">s</span><span class="op" id="4283025">,</span>&nbsp;<span class="ident" id="4283027">specs</span><span class="op" id="4283032">[</span><span class="ident" id="4283033">i</span><span class="op" id="4283034">+</span><span class="num" id="4283035">1</span><span class="op" id="4283036">]</span><span class="op" id="4283037">)</span>&nbsp;<span class="op" id="4283039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283044">deduped</span>&nbsp;<span class="op" id="4283052">=</span>&nbsp;<span class="builtinfunc" id="4283054">append</span><span class="op" id="4283060">(</span><span class="ident" id="4283061">deduped</span><span class="op" id="4283068">,</span>&nbsp;<span class="ident" id="4283070">s</span><span class="op" id="4283071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283075">}</span>&nbsp;<span class="keyword" id="4283077">else</span>&nbsp;<span class="op" id="4283082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283087">p</span>&nbsp;<span class="op" id="4283089">:=</span>&nbsp;<span class="ident" id="4283092">s</span><span class="op" id="4283093">.</span><span class="ident" id="4283094">Pos</span><span class="op" id="4283097">(</span><span class="op" id="4283098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283103">fset</span><span class="op" id="4283107">.</span><span class="ident" id="4283108">File</span><span class="op" id="4283112">(</span><span class="ident" id="4283113">p</span><span class="op" id="4283114">)</span><span class="op" id="4283115">.</span><span class="ident" id="4283116">MergeLine</span><span class="op" id="4283125">(</span><span class="ident" id="4283126">fset</span><span class="op" id="4283130">.</span><span class="ident" id="4283131">Position</span><span class="op" id="4283139">(</span><span class="ident" id="4283140">p</span><span class="op" id="4283141">)</span><span class="op" id="4283142">.</span><span class="ident" id="4283143">Line</span><span class="op" id="4283147">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283157">specs</span>&nbsp;<span class="op" id="4283163">=</span>&nbsp;<span class="ident" id="4283165">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4283175">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283204">for</span>&nbsp;<span class="ident" id="4283208">i</span><span class="op" id="4283209">,</span>&nbsp;<span class="ident" id="4283211">s</span>&nbsp;<span class="op" id="4283213">:=</span>&nbsp;<span class="keyword" id="4283216">range</span>&nbsp;<span class="ident" id="4283222">specs</span>&nbsp;<span class="op" id="4283228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283232">s</span>&nbsp;<span class="op" id="4283234">:=</span>&nbsp;<span class="ident" id="4283237">s</span><span class="op" id="4283238">.</span><span class="op" id="4283239">(</span><span class="op" id="4283240">*</span><span class="ident" id="4283241">ImportSpec</span><span class="op" id="4283251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283255">if</span>&nbsp;<span class="ident" id="4283258">s</span><span class="op" id="4283259">.</span><span class="ident" id="4283260">Name</span>&nbsp;<span class="op" id="4283265">!=</span>&nbsp;<span class="ident" id="4283268">nil</span>&nbsp;<span class="op" id="4283272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283277">s</span><span class="op" id="4283278">.</span><span class="ident" id="4283279">Name</span><span class="op" id="4283283">.</span><span class="ident" id="4283284">NamePos</span>&nbsp;<span class="op" id="4283292">=</span>&nbsp;<span class="ident" id="4283294">pos</span><span class="op" id="4283297">[</span><span class="ident" id="4283298">i</span><span class="op" id="4283299">]</span><span class="op" id="4283300">.</span><span class="ident" id="4283301">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283309">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283313">s</span><span class="op" id="4283314">.</span><span class="ident" id="4283315">Path</span><span class="op" id="4283319">.</span><span class="ident" id="4283320">ValuePos</span>&nbsp;<span class="op" id="4283329">=</span>&nbsp;<span class="ident" id="4283331">pos</span><span class="op" id="4283334">[</span><span class="ident" id="4283335">i</span><span class="op" id="4283336">]</span><span class="op" id="4283337">.</span><span class="ident" id="4283338">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283346">s</span><span class="op" id="4283347">.</span><span class="ident" id="4283348">EndPos</span>&nbsp;<span class="op" id="4283355">=</span>&nbsp;<span class="ident" id="4283357">pos</span><span class="op" id="4283360">[</span><span class="ident" id="4283361">i</span><span class="op" id="4283362">]</span><span class="op" id="4283363">.</span><span class="ident" id="4283364">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283370">for</span>&nbsp;<span class="ident" id="4283374">_</span><span class="op" id="4283375">,</span>&nbsp;<span class="ident" id="4283377">g</span>&nbsp;<span class="op" id="4283379">:=</span>&nbsp;<span class="keyword" id="4283382">range</span>&nbsp;<span class="ident" id="4283388">importComment</span><span class="op" id="4283401">[</span><span class="ident" id="4283402">s</span><span class="op" id="4283403">]</span>&nbsp;<span class="op" id="4283405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283410">for</span>&nbsp;<span class="ident" id="4283414">_</span><span class="op" id="4283415">,</span>&nbsp;<span class="ident" id="4283417">c</span>&nbsp;<span class="op" id="4283419">:=</span>&nbsp;<span class="keyword" id="4283422">range</span>&nbsp;<span class="ident" id="4283428">g</span><span class="op" id="4283429">.</span><span class="ident" id="4283430">List</span>&nbsp;<span class="op" id="4283435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283441">c</span><span class="op" id="4283442">.</span><span class="ident" id="4283443">Slash</span>&nbsp;<span class="op" id="4283449">=</span>&nbsp;<span class="ident" id="4283451">pos</span><span class="op" id="4283454">[</span><span class="ident" id="4283455">i</span><span class="op" id="4283456">]</span><span class="op" id="4283457">.</span><span class="ident" id="4283458">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283476">sort</span><span class="op" id="4283480">.</span><span class="ident" id="4283481">Sort</span><span class="op" id="4283485">(</span><span class="ident" id="4283486">byCommentPos</span><span class="op" id="4283498">(</span><span class="ident" id="4283499">comments</span><span class="op" id="4283507">)</span><span class="op" id="4283508">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283512">return</span>&nbsp;<span class="ident" id="4283519">specs</span><br>
<span class="lineno"></span><span class="op" id="4283525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4283528">type</span>&nbsp;<span class="ident" id="4283533">byImportSpec</span>&nbsp;<span class="op" id="4283546">[</span><span class="op" id="4283547">]</span><span class="ident" id="4283548">Spec</span>&nbsp;<span class="comment" id="4283553">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="4283578">func</span>&nbsp;<span class="op" id="4283583">(</span><span class="ident" id="4283584">x</span>&nbsp;<span class="ident" id="4283586">byImportSpec</span><span class="op" id="4283598">)</span>&nbsp;<span class="ident" id="4283600">Len</span><span class="op" id="4283603">(</span><span class="op" id="4283604">)</span>&nbsp;<span class="builtintype" id="4283606">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4283615">{</span>&nbsp;<span class="keyword" id="4283617">return</span>&nbsp;<span class="builtinfunc" id="4283624">len</span><span class="op" id="4283627">(</span><span class="ident" id="4283628">x</span><span class="op" id="4283629">)</span>&nbsp;<span class="op" id="4283631">}</span><br>
<span class="lineno"></span><span class="keyword" id="4283633">func</span>&nbsp;<span class="op" id="4283638">(</span><span class="ident" id="4283639">x</span>&nbsp;<span class="ident" id="4283641">byImportSpec</span><span class="op" id="4283653">)</span>&nbsp;<span class="ident" id="4283655">Swap</span><span class="op" id="4283659">(</span><span class="ident" id="4283660">i</span><span class="op" id="4283661">,</span>&nbsp;<span class="ident" id="4283663">j</span>&nbsp;<span class="builtintype" id="4283665">int</span><span class="op" id="4283668">)</span>&nbsp;<span class="op" id="4283670">{</span>&nbsp;<span class="ident" id="4283672">x</span><span class="op" id="4283673">[</span><span class="ident" id="4283674">i</span><span class="op" id="4283675">]</span><span class="op" id="4283676">,</span>&nbsp;<span class="ident" id="4283678">x</span><span class="op" id="4283679">[</span><span class="ident" id="4283680">j</span><span class="op" id="4283681">]</span>&nbsp;<span class="op" id="4283683">=</span>&nbsp;<span class="ident" id="4283685">x</span><span class="op" id="4283686">[</span><span class="ident" id="4283687">j</span><span class="op" id="4283688">]</span><span class="op" id="4283689">,</span>&nbsp;<span class="ident" id="4283691">x</span><span class="op" id="4283692">[</span><span class="ident" id="4283693">i</span><span class="op" id="4283694">]</span>&nbsp;<span class="op" id="4283696">}</span><br>
<span class="lineno"></span><span class="keyword" id="4283698">func</span>&nbsp;<span class="op" id="4283703">(</span><span class="ident" id="4283704">x</span>&nbsp;<span class="ident" id="4283706">byImportSpec</span><span class="op" id="4283718">)</span>&nbsp;<span class="ident" id="4283720">Less</span><span class="op" id="4283724">(</span><span class="ident" id="4283725">i</span><span class="op" id="4283726">,</span>&nbsp;<span class="ident" id="4283728">j</span>&nbsp;<span class="builtintype" id="4283730">int</span><span class="op" id="4283733">)</span>&nbsp;<span class="builtintype" id="4283735">bool</span>&nbsp;<span class="op" id="4283740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283743">ipath</span>&nbsp;<span class="op" id="4283749">:=</span>&nbsp;<span class="ident" id="4283752">importPath</span><span class="op" id="4283762">(</span><span class="ident" id="4283763">x</span><span class="op" id="4283764">[</span><span class="ident" id="4283765">i</span><span class="op" id="4283766">]</span><span class="op" id="4283767">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283770">jpath</span>&nbsp;<span class="op" id="4283776">:=</span>&nbsp;<span class="ident" id="4283779">importPath</span><span class="op" id="4283789">(</span><span class="ident" id="4283790">x</span><span class="op" id="4283791">[</span><span class="ident" id="4283792">j</span><span class="op" id="4283793">]</span><span class="op" id="4283794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283797">if</span>&nbsp;<span class="ident" id="4283800">ipath</span>&nbsp;<span class="op" id="4283806">!=</span>&nbsp;<span class="ident" id="4283809">jpath</span>&nbsp;<span class="op" id="4283815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283819">return</span>&nbsp;<span class="ident" id="4283826">ipath</span>&nbsp;<span class="op" id="4283832">&lt;</span>&nbsp;<span class="ident" id="4283834">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283844">iname</span>&nbsp;<span class="op" id="4283850">:=</span>&nbsp;<span class="ident" id="4283853">importName</span><span class="op" id="4283863">(</span><span class="ident" id="4283864">x</span><span class="op" id="4283865">[</span><span class="ident" id="4283866">i</span><span class="op" id="4283867">]</span><span class="op" id="4283868">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4283871">jname</span>&nbsp;<span class="op" id="4283877">:=</span>&nbsp;<span class="ident" id="4283880">importName</span><span class="op" id="4283890">(</span><span class="ident" id="4283891">x</span><span class="op" id="4283892">[</span><span class="ident" id="4283893">j</span><span class="op" id="4283894">]</span><span class="op" id="4283895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283898">if</span>&nbsp;<span class="ident" id="4283901">iname</span>&nbsp;<span class="op" id="4283907">!=</span>&nbsp;<span class="ident" id="4283910">jname</span>&nbsp;<span class="op" id="4283916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283920">return</span>&nbsp;<span class="ident" id="4283927">iname</span>&nbsp;<span class="op" id="4283933">&lt;</span>&nbsp;<span class="ident" id="4283935">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4283942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4283945">return</span>&nbsp;<span class="ident" id="4283952">importComment</span><span class="op" id="4283965">(</span><span class="ident" id="4283966">x</span><span class="op" id="4283967">[</span><span class="ident" id="4283968">i</span><span class="op" id="4283969">]</span><span class="op" id="4283970">)</span>&nbsp;<span class="op" id="4283972">&lt;</span>&nbsp;<span class="ident" id="4283974">importComment</span><span class="op" id="4283987">(</span><span class="ident" id="4283988">x</span><span class="op" id="4283989">[</span><span class="ident" id="4283990">j</span><span class="op" id="4283991">]</span><span class="op" id="4283992">)</span><br>
<span class="lineno">190</span><span class="op" id="4283994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4283997">type</span>&nbsp;<span class="ident" id="4284002">byCommentPos</span>&nbsp;<span class="op" id="4284015">[</span><span class="op" id="4284016">]</span><span class="op" id="4284017">*</span><span class="ident" id="4284018">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4284032">func</span>&nbsp;<span class="op" id="4284037">(</span><span class="ident" id="4284038">x</span>&nbsp;<span class="ident" id="4284040">byCommentPos</span><span class="op" id="4284052">)</span>&nbsp;<span class="ident" id="4284054">Len</span><span class="op" id="4284057">(</span><span class="op" id="4284058">)</span>&nbsp;<span class="builtintype" id="4284060">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4284074">{</span>&nbsp;<span class="keyword" id="4284076">return</span>&nbsp;<span class="builtinfunc" id="4284083">len</span><span class="op" id="4284086">(</span><span class="ident" id="4284087">x</span><span class="op" id="4284088">)</span>&nbsp;<span class="op" id="4284090">}</span><br>
<span class="lineno">195</span><span class="keyword" id="4284092">func</span>&nbsp;<span class="op" id="4284097">(</span><span class="ident" id="4284098">x</span>&nbsp;<span class="ident" id="4284100">byCommentPos</span><span class="op" id="4284112">)</span>&nbsp;<span class="ident" id="4284114">Swap</span><span class="op" id="4284118">(</span><span class="ident" id="4284119">i</span><span class="op" id="4284120">,</span>&nbsp;<span class="ident" id="4284122">j</span>&nbsp;<span class="builtintype" id="4284124">int</span><span class="op" id="4284127">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4284134">{</span>&nbsp;<span class="ident" id="4284136">x</span><span class="op" id="4284137">[</span><span class="ident" id="4284138">i</span><span class="op" id="4284139">]</span><span class="op" id="4284140">,</span>&nbsp;<span class="ident" id="4284142">x</span><span class="op" id="4284143">[</span><span class="ident" id="4284144">j</span><span class="op" id="4284145">]</span>&nbsp;<span class="op" id="4284147">=</span>&nbsp;<span class="ident" id="4284149">x</span><span class="op" id="4284150">[</span><span class="ident" id="4284151">j</span><span class="op" id="4284152">]</span><span class="op" id="4284153">,</span>&nbsp;<span class="ident" id="4284155">x</span><span class="op" id="4284156">[</span><span class="ident" id="4284157">i</span><span class="op" id="4284158">]</span>&nbsp;<span class="op" id="4284160">}</span><br>
<span class="lineno"></span><span class="keyword" id="4284162">func</span>&nbsp;<span class="op" id="4284167">(</span><span class="ident" id="4284168">x</span>&nbsp;<span class="ident" id="4284170">byCommentPos</span><span class="op" id="4284182">)</span>&nbsp;<span class="ident" id="4284184">Less</span><span class="op" id="4284188">(</span><span class="ident" id="4284189">i</span><span class="op" id="4284190">,</span>&nbsp;<span class="ident" id="4284192">j</span>&nbsp;<span class="builtintype" id="4284194">int</span><span class="op" id="4284197">)</span>&nbsp;<span class="builtintype" id="4284199">bool</span>&nbsp;<span class="op" id="4284204">{</span>&nbsp;<span class="keyword" id="4284206">return</span>&nbsp;<span class="ident" id="4284213">x</span><span class="op" id="4284214">[</span><span class="ident" id="4284215">i</span><span class="op" id="4284216">]</span><span class="op" id="4284217">.</span><span class="ident" id="4284218">Pos</span><span class="op" id="4284221">(</span><span class="op" id="4284222">)</span>&nbsp;<span class="op" id="4284224">&lt;</span>&nbsp;<span class="ident" id="4284226">x</span><span class="op" id="4284227">[</span><span class="ident" id="4284228">j</span><span class="op" id="4284229">]</span><span class="op" id="4284230">.</span><span class="ident" id="4284231">Pos</span><span class="op" id="4284234">(</span><span class="op" id="4284235">)</span>&nbsp;<span class="op" id="4284237">}</span>
</div>
</body>
</html>
