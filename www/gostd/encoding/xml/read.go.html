<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4994809">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4994865">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4994919">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4994970">package</span>&nbsp;<span class="ident" id="4994978">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4994983">import</span>&nbsp;<span class="op" id="4994990">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4994993">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995002">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995014">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995024">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995031">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995042">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4995053">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="4995063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4995066">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="4995150">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="4995214">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="4995283">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="4995303">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="4995366">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4995390">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="4995456">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="4995521">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4995587">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="4995601">//</span><br>
<span class="lineno"></span><span class="comment" id="4995604">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="4995670">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="4995739">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="4995805">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="4995821">//</span><br>
<span class="lineno"></span><span class="comment" id="4995824">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="4995896">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4995972">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="4996036">//</span><br>
<span class="lineno"></span><span class="comment" id="4996039">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="4996106">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="4996179">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="4996246">//</span><br>
<span class="lineno"></span><span class="comment" id="4996249">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="4996314">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4996372">//</span><br>
<span class="lineno">45</span><span class="comment" id="4996375">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="4996437">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="4996503">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="4996574">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4996600">//</span><br>
<span class="lineno">50</span><span class="comment" id="4996603">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4996667">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4996738">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="4996811">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4996872">//</span><br>
<span class="lineno">55</span><span class="comment" id="4996875">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4996939">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4997011">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4997068">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="4997136">//</span><br>
<span class="lineno">60</span><span class="comment" id="4997139">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4997208">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="4997276">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="4997343">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="4997386">//</span><br>
<span class="lineno">65</span><span class="comment" id="4997389">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4997457">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="4997524">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4997598">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="4997670">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="4997739">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4997784">//</span><br>
<span class="lineno"></span><span class="comment" id="4997787">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4997855">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="4997920">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="4997987">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4998033">//</span><br>
<span class="lineno"></span><span class="comment" id="4998036">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4998106">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="4998182">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="4998233">//</span><br>
<span class="lineno"></span><span class="comment" id="4998236">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="4998309">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="4998380">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="4998441">//</span><br>
<span class="lineno">85</span><span class="comment" id="4998444">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="4998512">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="4998557">//</span><br>
<span class="lineno"></span><span class="comment" id="4998560">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="4998623">//</span><br>
<span class="lineno">90</span><span class="comment" id="4998626">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4998695">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4998762">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="4998804">//</span><br>
<span class="lineno"></span><span class="comment" id="4998807">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="4998876">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="4998913">//</span><br>
<span class="lineno"></span><span class="comment" id="4998916">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4998987">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4999052">//</span><br>
<span class="lineno">100</span><span class="comment" id="4999055">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4999120">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4999182">//</span><br>
<span class="lineno"></span><span class="comment" id="4999185">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4999254">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="4999316">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="4999384">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="4999397">//</span><br>
<span class="lineno"></span><span class="comment" id="4999400">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4999465">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="4999482">//</span><br>
<span class="lineno"></span><span class="comment" id="4999485">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="4999554">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4999630">//</span><br>
<span class="lineno"></span><span class="keyword" id="4999633">func</span>&nbsp;<span class="ident" id="4999638">Unmarshal</span><span class="op" id="4999647">(</span><span class="ident" id="4999648">data</span>&nbsp;<span class="op" id="4999653">[</span><span class="op" id="4999654">]</span><span class="builtintype" id="4999655">byte</span><span class="op" id="4999659">,</span>&nbsp;<span class="ident" id="4999661">v</span>&nbsp;<span class="keyword" id="4999663">interface</span><span class="op" id="4999672">{</span><span class="op" id="4999673">}</span><span class="op" id="4999674">)</span>&nbsp;<span class="builtintype" id="4999676">error</span>&nbsp;<span class="op" id="4999682">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4999685">return</span>&nbsp;<span class="ident" id="4999692">NewDecoder</span><span class="op" id="4999702">(</span><span class="ident" id="4999703">bytes</span><span class="op" id="4999708">.</span><span class="ident" id="4999709">NewReader</span><span class="op" id="4999718">(</span><span class="ident" id="4999719">data</span><span class="op" id="4999723">)</span><span class="op" id="4999724">)</span><span class="op" id="4999725">.</span><span class="ident" id="4999726">Decode</span><span class="op" id="4999732">(</span><span class="ident" id="4999733">v</span><span class="op" id="4999734">)</span><br>
<span class="lineno"></span><span class="op" id="4999736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4999739">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="4999803">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="4999840">func</span>&nbsp;<span class="op" id="4999845">(</span><span class="ident" id="4999846">d</span>&nbsp;<span class="op" id="4999848">*</span><span class="ident" id="4999849">Decoder</span><span class="op" id="4999856">)</span>&nbsp;<span class="ident" id="4999858">Decode</span><span class="op" id="4999864">(</span><span class="ident" id="4999865">v</span>&nbsp;<span class="keyword" id="4999867">interface</span><span class="op" id="4999876">{</span><span class="op" id="4999877">}</span><span class="op" id="4999878">)</span>&nbsp;<span class="builtintype" id="4999880">error</span>&nbsp;<span class="op" id="4999886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4999889">return</span>&nbsp;<span class="ident" id="4999896">d</span><span class="op" id="4999897">.</span><span class="ident" id="4999898">DecodeElement</span><span class="op" id="4999911">(</span><span class="ident" id="4999912">v</span><span class="op" id="4999913">,</span>&nbsp;<span class="ident" id="4999915">nil</span><span class="op" id="4999918">)</span><br>
<span class="lineno"></span><span class="op" id="4999920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4999923">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="4999986">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5000042">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="5000105">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="5000164">func</span>&nbsp;<span class="op" id="5000169">(</span><span class="ident" id="5000170">d</span>&nbsp;<span class="op" id="5000172">*</span><span class="ident" id="5000173">Decoder</span><span class="op" id="5000180">)</span>&nbsp;<span class="ident" id="5000182">DecodeElement</span><span class="op" id="5000195">(</span><span class="ident" id="5000196">v</span>&nbsp;<span class="keyword" id="5000198">interface</span><span class="op" id="5000207">{</span><span class="op" id="5000208">}</span><span class="op" id="5000209">,</span>&nbsp;<span class="ident" id="5000211">start</span>&nbsp;<span class="op" id="5000217">*</span><span class="ident" id="5000218">StartElement</span><span class="op" id="5000230">)</span>&nbsp;<span class="builtintype" id="5000232">error</span>&nbsp;<span class="op" id="5000238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5000241">val</span>&nbsp;<span class="op" id="5000245">:=</span>&nbsp;<span class="ident" id="5000248">reflect</span><span class="op" id="5000255">.</span><span class="ident" id="5000256">ValueOf</span><span class="op" id="5000263">(</span><span class="ident" id="5000264">v</span><span class="op" id="5000265">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5000268">if</span>&nbsp;<span class="ident" id="5000271">val</span><span class="op" id="5000274">.</span><span class="ident" id="5000275">Kind</span><span class="op" id="5000279">(</span><span class="op" id="5000280">)</span>&nbsp;<span class="op" id="5000282">!=</span>&nbsp;<span class="ident" id="5000285">reflect</span><span class="op" id="5000292">.</span><span class="ident" id="5000293">Ptr</span>&nbsp;<span class="op" id="5000297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5000301">return</span>&nbsp;<span class="ident" id="5000308">errors</span><span class="op" id="5000314">.</span><span class="ident" id="5000315">New</span><span class="op" id="5000318">(</span><span class="string" id="5000319">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="5000352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5000355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5000358">return</span>&nbsp;<span class="ident" id="5000365">d</span><span class="op" id="5000366">.</span><span class="ident" id="5000367">unmarshal</span><span class="op" id="5000376">(</span><span class="ident" id="5000377">val</span><span class="op" id="5000380">.</span><span class="ident" id="5000381">Elem</span><span class="op" id="5000385">(</span><span class="op" id="5000386">)</span><span class="op" id="5000387">,</span>&nbsp;<span class="ident" id="5000389">start</span><span class="op" id="5000394">)</span><br>
<span class="lineno"></span><span class="op" id="5000396">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="5000399">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="5000470">type</span>&nbsp;<span class="ident" id="5000475">UnmarshalError</span>&nbsp;<span class="builtintype" id="5000490">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5000498">func</span>&nbsp;<span class="op" id="5000503">(</span><span class="ident" id="5000504">e</span>&nbsp;<span class="ident" id="5000506">UnmarshalError</span><span class="op" id="5000520">)</span>&nbsp;<span class="ident" id="5000522">Error</span><span class="op" id="5000527">(</span><span class="op" id="5000528">)</span>&nbsp;<span class="builtintype" id="5000530">string</span>&nbsp;<span class="op" id="5000537">{</span>&nbsp;<span class="keyword" id="5000539">return</span>&nbsp;<span class="builtintype" id="5000546">string</span><span class="op" id="5000552">(</span><span class="ident" id="5000553">e</span><span class="op" id="5000554">)</span>&nbsp;<span class="op" id="5000556">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="5000559">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5000633">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5000678">//</span><br>
<span class="lineno"></span><span class="comment" id="5000681">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="5000726">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5000769">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5000834">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5000857">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5000911">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="5000970">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="5001030">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5001088">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="5001121">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5001181">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="5001216">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="5001256">type</span>&nbsp;<span class="ident" id="5001261">Unmarshaler</span>&nbsp;<span class="keyword" id="5001273">interface</span>&nbsp;<span class="op" id="5001283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5001286">UnmarshalXML</span><span class="op" id="5001298">(</span><span class="ident" id="5001299">d</span>&nbsp;<span class="op" id="5001301">*</span><span class="ident" id="5001302">Decoder</span><span class="op" id="5001309">,</span>&nbsp;<span class="ident" id="5001311">start</span>&nbsp;<span class="ident" id="5001317">StartElement</span><span class="op" id="5001329">)</span>&nbsp;<span class="builtintype" id="5001331">error</span><br>
<span class="lineno"></span><span class="op" id="5001337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5001340">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5001418">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5001465">//</span><br>
<span class="lineno"></span><span class="comment" id="5001468">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="5001520">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="5001585">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5001608">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5001668">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="5001703">type</span>&nbsp;<span class="ident" id="5001708">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="5001724">interface</span>&nbsp;<span class="op" id="5001734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5001737">UnmarshalXMLAttr</span><span class="op" id="5001753">(</span><span class="ident" id="5001754">attr</span>&nbsp;<span class="ident" id="5001759">Attr</span><span class="op" id="5001763">)</span>&nbsp;<span class="builtintype" id="5001765">error</span><br>
<span class="lineno">170</span><span class="op" id="5001771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5001774">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5001862">func</span>&nbsp;<span class="ident" id="5001867">receiverType</span><span class="op" id="5001879">(</span><span class="ident" id="5001880">val</span>&nbsp;<span class="keyword" id="5001884">interface</span><span class="op" id="5001893">{</span><span class="op" id="5001894">}</span><span class="op" id="5001895">)</span>&nbsp;<span class="builtintype" id="5001897">string</span>&nbsp;<span class="op" id="5001904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5001907">t</span>&nbsp;<span class="op" id="5001909">:=</span>&nbsp;<span class="ident" id="5001912">reflect</span><span class="op" id="5001919">.</span><span class="ident" id="5001920">TypeOf</span><span class="op" id="5001926">(</span><span class="ident" id="5001927">val</span><span class="op" id="5001930">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5001933">if</span>&nbsp;<span class="ident" id="5001936">t</span><span class="op" id="5001937">.</span><span class="ident" id="5001938">Name</span><span class="op" id="5001942">(</span><span class="op" id="5001943">)</span>&nbsp;<span class="op" id="5001945">!=</span>&nbsp;<span class="string" id="5001948">&#34;&#34;</span>&nbsp;<span class="op" id="5001951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5001955">return</span>&nbsp;<span class="ident" id="5001962">t</span><span class="op" id="5001963">.</span><span class="ident" id="5001964">String</span><span class="op" id="5001970">(</span><span class="op" id="5001971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5001974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5001977">return</span>&nbsp;<span class="string" id="5001984">&#34;(&#34;</span>&nbsp;<span class="op" id="5001988">+</span>&nbsp;<span class="ident" id="5001990">t</span><span class="op" id="5001991">.</span><span class="ident" id="5001992">String</span><span class="op" id="5001998">(</span><span class="op" id="5001999">)</span>&nbsp;<span class="op" id="5002001">+</span>&nbsp;<span class="string" id="5002003">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5002007">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="5002010">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5002074">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="5002118">func</span>&nbsp;<span class="op" id="5002123">(</span><span class="ident" id="5002124">p</span>&nbsp;<span class="op" id="5002126">*</span><span class="ident" id="5002127">Decoder</span><span class="op" id="5002134">)</span>&nbsp;<span class="ident" id="5002136">unmarshalInterface</span><span class="op" id="5002154">(</span><span class="ident" id="5002155">val</span>&nbsp;<span class="ident" id="5002159">Unmarshaler</span><span class="op" id="5002170">,</span>&nbsp;<span class="ident" id="5002172">start</span>&nbsp;<span class="op" id="5002178">*</span><span class="ident" id="5002179">StartElement</span><span class="op" id="5002191">)</span>&nbsp;<span class="builtintype" id="5002193">error</span>&nbsp;<span class="op" id="5002199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5002202">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002271">p</span><span class="op" id="5002272">.</span><span class="ident" id="5002273">pushEOF</span><span class="op" id="5002280">(</span><span class="op" id="5002281">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002285">p</span><span class="op" id="5002286">.</span><span class="ident" id="5002287">unmarshalDepth</span><span class="op" id="5002301">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002305">err</span>&nbsp;<span class="op" id="5002309">:=</span>&nbsp;<span class="ident" id="5002312">val</span><span class="op" id="5002315">.</span><span class="ident" id="5002316">UnmarshalXML</span><span class="op" id="5002328">(</span><span class="ident" id="5002329">p</span><span class="op" id="5002330">,</span>&nbsp;<span class="op" id="5002332">*</span><span class="ident" id="5002333">start</span><span class="op" id="5002338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002341">p</span><span class="op" id="5002342">.</span><span class="ident" id="5002343">unmarshalDepth</span><span class="op" id="5002357">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002361">if</span>&nbsp;<span class="ident" id="5002364">err</span>&nbsp;<span class="op" id="5002368">!=</span>&nbsp;<span class="ident" id="5002371">nil</span>&nbsp;<span class="op" id="5002375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002379">p</span><span class="op" id="5002380">.</span><span class="ident" id="5002381">popEOF</span><span class="op" id="5002387">(</span><span class="op" id="5002388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002392">return</span>&nbsp;<span class="ident" id="5002399">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5002404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002408">if</span>&nbsp;<span class="op" id="5002411">!</span><span class="ident" id="5002412">p</span><span class="op" id="5002413">.</span><span class="ident" id="5002414">popEOF</span><span class="op" id="5002420">(</span><span class="op" id="5002421">)</span>&nbsp;<span class="op" id="5002423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002427">return</span>&nbsp;<span class="ident" id="5002434">fmt</span><span class="op" id="5002437">.</span><span class="ident" id="5002438">Errorf</span><span class="op" id="5002444">(</span><span class="string" id="5002445">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="5002503">,</span>&nbsp;<span class="ident" id="5002505">receiverType</span><span class="op" id="5002517">(</span><span class="ident" id="5002518">val</span><span class="op" id="5002521">)</span><span class="op" id="5002522">,</span>&nbsp;<span class="ident" id="5002524">start</span><span class="op" id="5002529">.</span><span class="ident" id="5002530">Name</span><span class="op" id="5002534">.</span><span class="ident" id="5002535">Local</span><span class="op" id="5002540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5002543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002547">return</span>&nbsp;<span class="ident" id="5002554">nil</span><br>
<span class="lineno">200</span><span class="op" id="5002558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5002561">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5002629">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="5002693">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="5002731">func</span>&nbsp;<span class="op" id="5002736">(</span><span class="ident" id="5002737">p</span>&nbsp;<span class="op" id="5002739">*</span><span class="ident" id="5002740">Decoder</span><span class="op" id="5002747">)</span>&nbsp;<span class="ident" id="5002749">unmarshalTextInterface</span><span class="op" id="5002771">(</span><span class="ident" id="5002772">val</span>&nbsp;<span class="ident" id="5002776">encoding</span><span class="op" id="5002784">.</span><span class="ident" id="5002785">TextUnmarshaler</span><span class="op" id="5002800">,</span>&nbsp;<span class="ident" id="5002802">start</span>&nbsp;<span class="op" id="5002808">*</span><span class="ident" id="5002809">StartElement</span><span class="op" id="5002821">)</span>&nbsp;<span class="builtintype" id="5002823">error</span>&nbsp;<span class="op" id="5002829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002832">var</span>&nbsp;<span class="ident" id="5002836">buf</span>&nbsp;<span class="op" id="5002840">[</span><span class="op" id="5002841">]</span><span class="builtintype" id="5002842">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002848">depth</span>&nbsp;<span class="op" id="5002854">:=</span>&nbsp;<span class="num" id="5002857">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002860">for</span>&nbsp;<span class="ident" id="5002864">depth</span>&nbsp;<span class="op" id="5002870">&gt;</span>&nbsp;<span class="num" id="5002872">0</span>&nbsp;<span class="op" id="5002874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002878">t</span><span class="op" id="5002879">,</span>&nbsp;<span class="ident" id="5002881">err</span>&nbsp;<span class="op" id="5002885">:=</span>&nbsp;<span class="ident" id="5002888">p</span><span class="op" id="5002889">.</span><span class="ident" id="5002890">Token</span><span class="op" id="5002895">(</span><span class="op" id="5002896">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002900">if</span>&nbsp;<span class="ident" id="5002903">err</span>&nbsp;<span class="op" id="5002907">!=</span>&nbsp;<span class="ident" id="5002910">nil</span>&nbsp;<span class="op" id="5002914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002919">return</span>&nbsp;<span class="ident" id="5002926">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5002932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002936">switch</span>&nbsp;<span class="ident" id="5002943">t</span>&nbsp;<span class="op" id="5002945">:=</span>&nbsp;<span class="ident" id="5002948">t</span><span class="op" id="5002949">.</span><span class="op" id="5002950">(</span><span class="keyword" id="5002951">type</span><span class="op" id="5002955">)</span>&nbsp;<span class="op" id="5002957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002961">case</span>&nbsp;<span class="ident" id="5002966">CharData</span><span class="op" id="5002974">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5002979">if</span>&nbsp;<span class="ident" id="5002982">depth</span>&nbsp;<span class="op" id="5002988">==</span>&nbsp;<span class="num" id="5002991">1</span>&nbsp;<span class="op" id="5002993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5002999">buf</span>&nbsp;<span class="op" id="5003003">=</span>&nbsp;<span class="builtinfunc" id="5003005">append</span><span class="op" id="5003011">(</span><span class="ident" id="5003012">buf</span><span class="op" id="5003015">,</span>&nbsp;<span class="ident" id="5003017">t</span><span class="op" id="5003018">...</span><span class="op" id="5003021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003030">case</span>&nbsp;<span class="ident" id="5003035">StartElement</span><span class="op" id="5003047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5003052">depth</span><span class="op" id="5003057">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003062">case</span>&nbsp;<span class="ident" id="5003067">EndElement</span><span class="op" id="5003077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5003082">depth</span><span class="op" id="5003087">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003098">return</span>&nbsp;<span class="ident" id="5003105">val</span><span class="op" id="5003108">.</span><span class="ident" id="5003109">UnmarshalText</span><span class="op" id="5003122">(</span><span class="ident" id="5003123">buf</span><span class="op" id="5003126">)</span><br>
<span class="lineno">225</span><span class="op" id="5003128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5003131">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5003192">func</span>&nbsp;<span class="op" id="5003197">(</span><span class="ident" id="5003198">p</span>&nbsp;<span class="op" id="5003200">*</span><span class="ident" id="5003201">Decoder</span><span class="op" id="5003208">)</span>&nbsp;<span class="ident" id="5003210">unmarshalAttr</span><span class="op" id="5003223">(</span><span class="ident" id="5003224">val</span>&nbsp;<span class="ident" id="5003228">reflect</span><span class="op" id="5003235">.</span><span class="ident" id="5003236">Value</span><span class="op" id="5003241">,</span>&nbsp;<span class="ident" id="5003243">attr</span>&nbsp;<span class="ident" id="5003248">Attr</span><span class="op" id="5003252">)</span>&nbsp;<span class="builtintype" id="5003254">error</span>&nbsp;<span class="op" id="5003260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003263">if</span>&nbsp;<span class="ident" id="5003266">val</span><span class="op" id="5003269">.</span><span class="ident" id="5003270">Kind</span><span class="op" id="5003274">(</span><span class="op" id="5003275">)</span>&nbsp;<span class="op" id="5003277">==</span>&nbsp;<span class="ident" id="5003280">reflect</span><span class="op" id="5003287">.</span><span class="ident" id="5003288">Ptr</span>&nbsp;<span class="op" id="5003292">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003296">if</span>&nbsp;<span class="ident" id="5003299">val</span><span class="op" id="5003302">.</span><span class="ident" id="5003303">IsNil</span><span class="op" id="5003308">(</span><span class="op" id="5003309">)</span>&nbsp;<span class="op" id="5003311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5003316">val</span><span class="op" id="5003319">.</span><span class="ident" id="5003320">Set</span><span class="op" id="5003323">(</span><span class="ident" id="5003324">reflect</span><span class="op" id="5003331">.</span><span class="ident" id="5003332">New</span><span class="op" id="5003335">(</span><span class="ident" id="5003336">val</span><span class="op" id="5003339">.</span><span class="ident" id="5003340">Type</span><span class="op" id="5003344">(</span><span class="op" id="5003345">)</span><span class="op" id="5003346">.</span><span class="ident" id="5003347">Elem</span><span class="op" id="5003351">(</span><span class="op" id="5003352">)</span><span class="op" id="5003353">)</span><span class="op" id="5003354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5003362">val</span>&nbsp;<span class="op" id="5003366">=</span>&nbsp;<span class="ident" id="5003368">val</span><span class="op" id="5003371">.</span><span class="ident" id="5003372">Elem</span><span class="op" id="5003376">(</span><span class="op" id="5003377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003380">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003384">if</span>&nbsp;<span class="ident" id="5003387">val</span><span class="op" id="5003390">.</span><span class="ident" id="5003391">CanInterface</span><span class="op" id="5003403">(</span><span class="op" id="5003404">)</span>&nbsp;<span class="op" id="5003406">&amp;&amp;</span>&nbsp;<span class="ident" id="5003409">val</span><span class="op" id="5003412">.</span><span class="ident" id="5003413">Type</span><span class="op" id="5003417">(</span><span class="op" id="5003418">)</span><span class="op" id="5003419">.</span><span class="ident" id="5003420">Implements</span><span class="op" id="5003430">(</span><span class="ident" id="5003431">unmarshalerAttrType</span><span class="op" id="5003450">)</span>&nbsp;<span class="op" id="5003452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5003456">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5003513">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003577">return</span>&nbsp;<span class="ident" id="5003584">val</span><span class="op" id="5003587">.</span><span class="ident" id="5003588">Interface</span><span class="op" id="5003597">(</span><span class="op" id="5003598">)</span><span class="op" id="5003599">.</span><span class="op" id="5003600">(</span><span class="ident" id="5003601">UnmarshalerAttr</span><span class="op" id="5003616">)</span><span class="op" id="5003617">.</span><span class="ident" id="5003618">UnmarshalXMLAttr</span><span class="op" id="5003634">(</span><span class="ident" id="5003635">attr</span><span class="op" id="5003639">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003645">if</span>&nbsp;<span class="ident" id="5003648">val</span><span class="op" id="5003651">.</span><span class="ident" id="5003652">CanAddr</span><span class="op" id="5003659">(</span><span class="op" id="5003660">)</span>&nbsp;<span class="op" id="5003662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5003666">pv</span>&nbsp;<span class="op" id="5003669">:=</span>&nbsp;<span class="ident" id="5003672">val</span><span class="op" id="5003675">.</span><span class="ident" id="5003676">Addr</span><span class="op" id="5003680">(</span><span class="op" id="5003681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003685">if</span>&nbsp;<span class="ident" id="5003688">pv</span><span class="op" id="5003690">.</span><span class="ident" id="5003691">CanInterface</span><span class="op" id="5003703">(</span><span class="op" id="5003704">)</span>&nbsp;<span class="op" id="5003706">&amp;&amp;</span>&nbsp;<span class="ident" id="5003709">pv</span><span class="op" id="5003711">.</span><span class="ident" id="5003712">Type</span><span class="op" id="5003716">(</span><span class="op" id="5003717">)</span><span class="op" id="5003718">.</span><span class="ident" id="5003719">Implements</span><span class="op" id="5003729">(</span><span class="ident" id="5003730">unmarshalerAttrType</span><span class="op" id="5003749">)</span>&nbsp;<span class="op" id="5003751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003756">return</span>&nbsp;<span class="ident" id="5003763">pv</span><span class="op" id="5003765">.</span><span class="ident" id="5003766">Interface</span><span class="op" id="5003775">(</span><span class="op" id="5003776">)</span><span class="op" id="5003777">.</span><span class="op" id="5003778">(</span><span class="ident" id="5003779">UnmarshalerAttr</span><span class="op" id="5003794">)</span><span class="op" id="5003795">.</span><span class="ident" id="5003796">UnmarshalXMLAttr</span><span class="op" id="5003812">(</span><span class="ident" id="5003813">attr</span><span class="op" id="5003817">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5003824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5003828">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5003886">if</span>&nbsp;<span class="ident" id="5003889">val</span><span class="op" id="5003892">.</span><span class="ident" id="5003893">CanInterface</span><span class="op" id="5003905">(</span><span class="op" id="5003906">)</span>&nbsp;<span class="op" id="5003908">&amp;&amp;</span>&nbsp;<span class="ident" id="5003911">val</span><span class="op" id="5003914">.</span><span class="ident" id="5003915">Type</span><span class="op" id="5003919">(</span><span class="op" id="5003920">)</span><span class="op" id="5003921">.</span><span class="ident" id="5003922">Implements</span><span class="op" id="5003932">(</span><span class="ident" id="5003933">textUnmarshalerType</span><span class="op" id="5003952">)</span>&nbsp;<span class="op" id="5003954">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5003958">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5004015">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004079">return</span>&nbsp;<span class="ident" id="5004086">val</span><span class="op" id="5004089">.</span><span class="ident" id="5004090">Interface</span><span class="op" id="5004099">(</span><span class="op" id="5004100">)</span><span class="op" id="5004101">.</span><span class="op" id="5004102">(</span><span class="ident" id="5004103">encoding</span><span class="op" id="5004111">.</span><span class="ident" id="5004112">TextUnmarshaler</span><span class="op" id="5004127">)</span><span class="op" id="5004128">.</span><span class="ident" id="5004129">UnmarshalText</span><span class="op" id="5004142">(</span><span class="op" id="5004143">[</span><span class="op" id="5004144">]</span><span class="builtintype" id="5004145">byte</span><span class="op" id="5004149">(</span><span class="ident" id="5004150">attr</span><span class="op" id="5004154">.</span><span class="ident" id="5004155">Value</span><span class="op" id="5004160">)</span><span class="op" id="5004161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004167">if</span>&nbsp;<span class="ident" id="5004170">val</span><span class="op" id="5004173">.</span><span class="ident" id="5004174">CanAddr</span><span class="op" id="5004181">(</span><span class="op" id="5004182">)</span>&nbsp;<span class="op" id="5004184">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004188">pv</span>&nbsp;<span class="op" id="5004191">:=</span>&nbsp;<span class="ident" id="5004194">val</span><span class="op" id="5004197">.</span><span class="ident" id="5004198">Addr</span><span class="op" id="5004202">(</span><span class="op" id="5004203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004207">if</span>&nbsp;<span class="ident" id="5004210">pv</span><span class="op" id="5004212">.</span><span class="ident" id="5004213">CanInterface</span><span class="op" id="5004225">(</span><span class="op" id="5004226">)</span>&nbsp;<span class="op" id="5004228">&amp;&amp;</span>&nbsp;<span class="ident" id="5004231">pv</span><span class="op" id="5004233">.</span><span class="ident" id="5004234">Type</span><span class="op" id="5004238">(</span><span class="op" id="5004239">)</span><span class="op" id="5004240">.</span><span class="ident" id="5004241">Implements</span><span class="op" id="5004251">(</span><span class="ident" id="5004252">textUnmarshalerType</span><span class="op" id="5004271">)</span>&nbsp;<span class="op" id="5004273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004278">return</span>&nbsp;<span class="ident" id="5004285">pv</span><span class="op" id="5004287">.</span><span class="ident" id="5004288">Interface</span><span class="op" id="5004297">(</span><span class="op" id="5004298">)</span><span class="op" id="5004299">.</span><span class="op" id="5004300">(</span><span class="ident" id="5004301">encoding</span><span class="op" id="5004309">.</span><span class="ident" id="5004310">TextUnmarshaler</span><span class="op" id="5004325">)</span><span class="op" id="5004326">.</span><span class="ident" id="5004327">UnmarshalText</span><span class="op" id="5004340">(</span><span class="op" id="5004341">[</span><span class="op" id="5004342">]</span><span class="builtintype" id="5004343">byte</span><span class="op" id="5004347">(</span><span class="ident" id="5004348">attr</span><span class="op" id="5004352">.</span><span class="ident" id="5004353">Value</span><span class="op" id="5004358">)</span><span class="op" id="5004359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004366">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004370">copyValue</span><span class="op" id="5004379">(</span><span class="ident" id="5004380">val</span><span class="op" id="5004383">,</span>&nbsp;<span class="op" id="5004385">[</span><span class="op" id="5004386">]</span><span class="builtintype" id="5004387">byte</span><span class="op" id="5004391">(</span><span class="ident" id="5004392">attr</span><span class="op" id="5004396">.</span><span class="ident" id="5004397">Value</span><span class="op" id="5004402">)</span><span class="op" id="5004403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004406">return</span>&nbsp;<span class="ident" id="5004413">nil</span><br>
<span class="lineno"></span><span class="op" id="5004417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5004420">var</span>&nbsp;<span class="op" id="5004424">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004427">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5004447">=</span>&nbsp;<span class="ident" id="5004449">reflect</span><span class="op" id="5004456">.</span><span class="ident" id="5004457">TypeOf</span><span class="op" id="5004463">(</span><span class="op" id="5004464">(</span><span class="op" id="5004465">*</span><span class="ident" id="5004466">Unmarshaler</span><span class="op" id="5004477">)</span><span class="op" id="5004478">(</span><span class="ident" id="5004479">nil</span><span class="op" id="5004482">)</span><span class="op" id="5004483">)</span><span class="op" id="5004484">.</span><span class="ident" id="5004485">Elem</span><span class="op" id="5004489">(</span><span class="op" id="5004490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004493">unmarshalerAttrType</span>&nbsp;<span class="op" id="5004513">=</span>&nbsp;<span class="ident" id="5004515">reflect</span><span class="op" id="5004522">.</span><span class="ident" id="5004523">TypeOf</span><span class="op" id="5004529">(</span><span class="op" id="5004530">(</span><span class="op" id="5004531">*</span><span class="ident" id="5004532">UnmarshalerAttr</span><span class="op" id="5004547">)</span><span class="op" id="5004548">(</span><span class="ident" id="5004549">nil</span><span class="op" id="5004552">)</span><span class="op" id="5004553">)</span><span class="op" id="5004554">.</span><span class="ident" id="5004555">Elem</span><span class="op" id="5004559">(</span><span class="op" id="5004560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004563">textUnmarshalerType</span>&nbsp;<span class="op" id="5004583">=</span>&nbsp;<span class="ident" id="5004585">reflect</span><span class="op" id="5004592">.</span><span class="ident" id="5004593">TypeOf</span><span class="op" id="5004599">(</span><span class="op" id="5004600">(</span><span class="op" id="5004601">*</span><span class="ident" id="5004602">encoding</span><span class="op" id="5004610">.</span><span class="ident" id="5004611">TextUnmarshaler</span><span class="op" id="5004626">)</span><span class="op" id="5004627">(</span><span class="ident" id="5004628">nil</span><span class="op" id="5004631">)</span><span class="op" id="5004632">)</span><span class="op" id="5004633">.</span><span class="ident" id="5004634">Elem</span><span class="op" id="5004638">(</span><span class="op" id="5004639">)</span><br>
<span class="lineno"></span><span class="op" id="5004641">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5004644">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5004688">func</span>&nbsp;<span class="op" id="5004693">(</span><span class="ident" id="5004694">p</span>&nbsp;<span class="op" id="5004696">*</span><span class="ident" id="5004697">Decoder</span><span class="op" id="5004704">)</span>&nbsp;<span class="ident" id="5004706">unmarshal</span><span class="op" id="5004715">(</span><span class="ident" id="5004716">val</span>&nbsp;<span class="ident" id="5004720">reflect</span><span class="op" id="5004727">.</span><span class="ident" id="5004728">Value</span><span class="op" id="5004733">,</span>&nbsp;<span class="ident" id="5004735">start</span>&nbsp;<span class="op" id="5004741">*</span><span class="ident" id="5004742">StartElement</span><span class="op" id="5004754">)</span>&nbsp;<span class="builtintype" id="5004756">error</span>&nbsp;<span class="op" id="5004762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5004765">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004803">if</span>&nbsp;<span class="ident" id="5004806">start</span>&nbsp;<span class="op" id="5004812">==</span>&nbsp;<span class="ident" id="5004815">nil</span>&nbsp;<span class="op" id="5004819">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004823">for</span>&nbsp;<span class="op" id="5004827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004832">tok</span><span class="op" id="5004835">,</span>&nbsp;<span class="ident" id="5004837">err</span>&nbsp;<span class="op" id="5004841">:=</span>&nbsp;<span class="ident" id="5004844">p</span><span class="op" id="5004845">.</span><span class="ident" id="5004846">Token</span><span class="op" id="5004851">(</span><span class="op" id="5004852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004857">if</span>&nbsp;<span class="ident" id="5004860">err</span>&nbsp;<span class="op" id="5004864">!=</span>&nbsp;<span class="ident" id="5004867">nil</span>&nbsp;<span class="op" id="5004871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004877">return</span>&nbsp;<span class="ident" id="5004884">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004891">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004896">if</span>&nbsp;<span class="ident" id="5004899">t</span><span class="op" id="5004900">,</span>&nbsp;<span class="ident" id="5004902">ok</span>&nbsp;<span class="op" id="5004905">:=</span>&nbsp;<span class="ident" id="5004908">tok</span><span class="op" id="5004911">.</span><span class="op" id="5004912">(</span><span class="ident" id="5004913">StartElement</span><span class="op" id="5004925">)</span><span class="op" id="5004926">;</span>&nbsp;<span class="ident" id="5004928">ok</span>&nbsp;<span class="op" id="5004931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5004937">start</span>&nbsp;<span class="op" id="5004943">=</span>&nbsp;<span class="op" id="5004945">&amp;</span><span class="ident" id="5004946">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5004952">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004965">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5004968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5004972">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5005034">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005060">if</span>&nbsp;<span class="ident" id="5005063">val</span><span class="op" id="5005066">.</span><span class="ident" id="5005067">Kind</span><span class="op" id="5005071">(</span><span class="op" id="5005072">)</span>&nbsp;<span class="op" id="5005074">==</span>&nbsp;<span class="ident" id="5005077">reflect</span><span class="op" id="5005084">.</span><span class="ident" id="5005085">Interface</span>&nbsp;<span class="op" id="5005095">&amp;&amp;</span>&nbsp;<span class="op" id="5005098">!</span><span class="ident" id="5005099">val</span><span class="op" id="5005102">.</span><span class="ident" id="5005103">IsNil</span><span class="op" id="5005108">(</span><span class="op" id="5005109">)</span>&nbsp;<span class="op" id="5005111">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005115">e</span>&nbsp;<span class="op" id="5005117">:=</span>&nbsp;<span class="ident" id="5005120">val</span><span class="op" id="5005123">.</span><span class="ident" id="5005124">Elem</span><span class="op" id="5005128">(</span><span class="op" id="5005129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005133">if</span>&nbsp;<span class="ident" id="5005136">e</span><span class="op" id="5005137">.</span><span class="ident" id="5005138">Kind</span><span class="op" id="5005142">(</span><span class="op" id="5005143">)</span>&nbsp;<span class="op" id="5005145">==</span>&nbsp;<span class="ident" id="5005148">reflect</span><span class="op" id="5005155">.</span><span class="ident" id="5005156">Ptr</span>&nbsp;<span class="op" id="5005160">&amp;&amp;</span>&nbsp;<span class="op" id="5005163">!</span><span class="ident" id="5005164">e</span><span class="op" id="5005165">.</span><span class="ident" id="5005166">IsNil</span><span class="op" id="5005171">(</span><span class="op" id="5005172">)</span>&nbsp;<span class="op" id="5005174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005179">val</span>&nbsp;<span class="op" id="5005183">=</span>&nbsp;<span class="ident" id="5005185">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005192">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005196">if</span>&nbsp;<span class="ident" id="5005199">val</span><span class="op" id="5005202">.</span><span class="ident" id="5005203">Kind</span><span class="op" id="5005207">(</span><span class="op" id="5005208">)</span>&nbsp;<span class="op" id="5005210">==</span>&nbsp;<span class="ident" id="5005213">reflect</span><span class="op" id="5005220">.</span><span class="ident" id="5005221">Ptr</span>&nbsp;<span class="op" id="5005225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005229">if</span>&nbsp;<span class="ident" id="5005232">val</span><span class="op" id="5005235">.</span><span class="ident" id="5005236">IsNil</span><span class="op" id="5005241">(</span><span class="op" id="5005242">)</span>&nbsp;<span class="op" id="5005244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005249">val</span><span class="op" id="5005252">.</span><span class="ident" id="5005253">Set</span><span class="op" id="5005256">(</span><span class="ident" id="5005257">reflect</span><span class="op" id="5005264">.</span><span class="ident" id="5005265">New</span><span class="op" id="5005268">(</span><span class="ident" id="5005269">val</span><span class="op" id="5005272">.</span><span class="ident" id="5005273">Type</span><span class="op" id="5005277">(</span><span class="op" id="5005278">)</span><span class="op" id="5005279">.</span><span class="ident" id="5005280">Elem</span><span class="op" id="5005284">(</span><span class="op" id="5005285">)</span><span class="op" id="5005286">)</span><span class="op" id="5005287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005291">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005295">val</span>&nbsp;<span class="op" id="5005299">=</span>&nbsp;<span class="ident" id="5005301">val</span><span class="op" id="5005304">.</span><span class="ident" id="5005305">Elem</span><span class="op" id="5005309">(</span><span class="op" id="5005310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005317">if</span>&nbsp;<span class="ident" id="5005320">val</span><span class="op" id="5005323">.</span><span class="ident" id="5005324">CanInterface</span><span class="op" id="5005336">(</span><span class="op" id="5005337">)</span>&nbsp;<span class="op" id="5005339">&amp;&amp;</span>&nbsp;<span class="ident" id="5005342">val</span><span class="op" id="5005345">.</span><span class="ident" id="5005346">Type</span><span class="op" id="5005350">(</span><span class="op" id="5005351">)</span><span class="op" id="5005352">.</span><span class="ident" id="5005353">Implements</span><span class="op" id="5005363">(</span><span class="ident" id="5005364">unmarshalerType</span><span class="op" id="5005379">)</span>&nbsp;<span class="op" id="5005381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5005385">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5005442">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005506">return</span>&nbsp;<span class="ident" id="5005513">p</span><span class="op" id="5005514">.</span><span class="ident" id="5005515">unmarshalInterface</span><span class="op" id="5005533">(</span><span class="ident" id="5005534">val</span><span class="op" id="5005537">.</span><span class="ident" id="5005538">Interface</span><span class="op" id="5005547">(</span><span class="op" id="5005548">)</span><span class="op" id="5005549">.</span><span class="op" id="5005550">(</span><span class="ident" id="5005551">Unmarshaler</span><span class="op" id="5005562">)</span><span class="op" id="5005563">,</span>&nbsp;<span class="ident" id="5005565">start</span><span class="op" id="5005570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005577">if</span>&nbsp;<span class="ident" id="5005580">val</span><span class="op" id="5005583">.</span><span class="ident" id="5005584">CanAddr</span><span class="op" id="5005591">(</span><span class="op" id="5005592">)</span>&nbsp;<span class="op" id="5005594">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005598">pv</span>&nbsp;<span class="op" id="5005601">:=</span>&nbsp;<span class="ident" id="5005604">val</span><span class="op" id="5005607">.</span><span class="ident" id="5005608">Addr</span><span class="op" id="5005612">(</span><span class="op" id="5005613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005617">if</span>&nbsp;<span class="ident" id="5005620">pv</span><span class="op" id="5005622">.</span><span class="ident" id="5005623">CanInterface</span><span class="op" id="5005635">(</span><span class="op" id="5005636">)</span>&nbsp;<span class="op" id="5005638">&amp;&amp;</span>&nbsp;<span class="ident" id="5005641">pv</span><span class="op" id="5005643">.</span><span class="ident" id="5005644">Type</span><span class="op" id="5005648">(</span><span class="op" id="5005649">)</span><span class="op" id="5005650">.</span><span class="ident" id="5005651">Implements</span><span class="op" id="5005661">(</span><span class="ident" id="5005662">unmarshalerType</span><span class="op" id="5005677">)</span>&nbsp;<span class="op" id="5005679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005684">return</span>&nbsp;<span class="ident" id="5005691">p</span><span class="op" id="5005692">.</span><span class="ident" id="5005693">unmarshalInterface</span><span class="op" id="5005711">(</span><span class="ident" id="5005712">pv</span><span class="op" id="5005714">.</span><span class="ident" id="5005715">Interface</span><span class="op" id="5005724">(</span><span class="op" id="5005725">)</span><span class="op" id="5005726">.</span><span class="op" id="5005727">(</span><span class="ident" id="5005728">Unmarshaler</span><span class="op" id="5005739">)</span><span class="op" id="5005740">,</span>&nbsp;<span class="ident" id="5005742">start</span><span class="op" id="5005747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005754">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005758">if</span>&nbsp;<span class="ident" id="5005761">val</span><span class="op" id="5005764">.</span><span class="ident" id="5005765">CanInterface</span><span class="op" id="5005777">(</span><span class="op" id="5005778">)</span>&nbsp;<span class="op" id="5005780">&amp;&amp;</span>&nbsp;<span class="ident" id="5005783">val</span><span class="op" id="5005786">.</span><span class="ident" id="5005787">Type</span><span class="op" id="5005791">(</span><span class="op" id="5005792">)</span><span class="op" id="5005793">.</span><span class="ident" id="5005794">Implements</span><span class="op" id="5005804">(</span><span class="ident" id="5005805">textUnmarshalerType</span><span class="op" id="5005824">)</span>&nbsp;<span class="op" id="5005826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005830">return</span>&nbsp;<span class="ident" id="5005837">p</span><span class="op" id="5005838">.</span><span class="ident" id="5005839">unmarshalTextInterface</span><span class="op" id="5005861">(</span><span class="ident" id="5005862">val</span><span class="op" id="5005865">.</span><span class="ident" id="5005866">Interface</span><span class="op" id="5005875">(</span><span class="op" id="5005876">)</span><span class="op" id="5005877">.</span><span class="op" id="5005878">(</span><span class="ident" id="5005879">encoding</span><span class="op" id="5005887">.</span><span class="ident" id="5005888">TextUnmarshaler</span><span class="op" id="5005903">)</span><span class="op" id="5005904">,</span>&nbsp;<span class="ident" id="5005906">start</span><span class="op" id="5005911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5005914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005918">if</span>&nbsp;<span class="ident" id="5005921">val</span><span class="op" id="5005924">.</span><span class="ident" id="5005925">CanAddr</span><span class="op" id="5005932">(</span><span class="op" id="5005933">)</span>&nbsp;<span class="op" id="5005935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5005939">pv</span>&nbsp;<span class="op" id="5005942">:=</span>&nbsp;<span class="ident" id="5005945">val</span><span class="op" id="5005948">.</span><span class="ident" id="5005949">Addr</span><span class="op" id="5005953">(</span><span class="op" id="5005954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5005958">if</span>&nbsp;<span class="ident" id="5005961">pv</span><span class="op" id="5005963">.</span><span class="ident" id="5005964">CanInterface</span><span class="op" id="5005976">(</span><span class="op" id="5005977">)</span>&nbsp;<span class="op" id="5005979">&amp;&amp;</span>&nbsp;<span class="ident" id="5005982">pv</span><span class="op" id="5005984">.</span><span class="ident" id="5005985">Type</span><span class="op" id="5005989">(</span><span class="op" id="5005990">)</span><span class="op" id="5005991">.</span><span class="ident" id="5005992">Implements</span><span class="op" id="5006002">(</span><span class="ident" id="5006003">textUnmarshalerType</span><span class="op" id="5006022">)</span>&nbsp;<span class="op" id="5006024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006029">return</span>&nbsp;<span class="ident" id="5006036">p</span><span class="op" id="5006037">.</span><span class="ident" id="5006038">unmarshalTextInterface</span><span class="op" id="5006060">(</span><span class="ident" id="5006061">pv</span><span class="op" id="5006063">.</span><span class="ident" id="5006064">Interface</span><span class="op" id="5006073">(</span><span class="op" id="5006074">)</span><span class="op" id="5006075">.</span><span class="op" id="5006076">(</span><span class="ident" id="5006077">encoding</span><span class="op" id="5006085">.</span><span class="ident" id="5006086">TextUnmarshaler</span><span class="op" id="5006101">)</span><span class="op" id="5006102">,</span>&nbsp;<span class="ident" id="5006104">start</span><span class="op" id="5006109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5006113">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5006116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006120">var</span>&nbsp;<span class="op" id="5006124">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006128">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5006141">[</span><span class="op" id="5006142">]</span><span class="builtintype" id="5006143">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006150">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5006163">reflect</span><span class="op" id="5006170">.</span><span class="ident" id="5006171">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006179">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5006192">[</span><span class="op" id="5006193">]</span><span class="builtintype" id="5006194">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006201">saveComment</span>&nbsp;&nbsp;<span class="ident" id="5006214">reflect</span><span class="op" id="5006221">.</span><span class="ident" id="5006222">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006230">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5006243">reflect</span><span class="op" id="5006250">.</span><span class="ident" id="5006251">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006259">saveXMLIndex</span>&nbsp;<span class="builtintype" id="5006272">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006278">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="5006291">[</span><span class="op" id="5006292">]</span><span class="builtintype" id="5006293">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006300">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5006313">reflect</span><span class="op" id="5006320">.</span><span class="ident" id="5006321">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006329">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5006342">reflect</span><span class="op" id="5006349">.</span><span class="ident" id="5006350">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006358">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5006371">*</span><span class="ident" id="5006372">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006383">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5006396">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5006403">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006407">switch</span>&nbsp;<span class="ident" id="5006414">v</span>&nbsp;<span class="op" id="5006416">:=</span>&nbsp;<span class="ident" id="5006419">val</span><span class="op" id="5006422">;</span>&nbsp;<span class="ident" id="5006424">v</span><span class="op" id="5006425">.</span><span class="ident" id="5006426">Kind</span><span class="op" id="5006430">(</span><span class="op" id="5006431">)</span>&nbsp;<span class="op" id="5006433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006436">default</span><span class="op" id="5006443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006447">return</span>&nbsp;<span class="ident" id="5006454">errors</span><span class="op" id="5006460">.</span><span class="ident" id="5006461">New</span><span class="op" id="5006464">(</span><span class="string" id="5006465">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5006481">+</span>&nbsp;<span class="ident" id="5006483">v</span><span class="op" id="5006484">.</span><span class="ident" id="5006485">Type</span><span class="op" id="5006489">(</span><span class="op" id="5006490">)</span><span class="op" id="5006491">.</span><span class="ident" id="5006492">String</span><span class="op" id="5006498">(</span><span class="op" id="5006499">)</span><span class="op" id="5006500">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006504">case</span>&nbsp;<span class="ident" id="5006509">reflect</span><span class="op" id="5006516">.</span><span class="ident" id="5006517">Interface</span><span class="op" id="5006526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006530">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006587">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006642">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006680">return</span>&nbsp;<span class="ident" id="5006687">p</span><span class="op" id="5006688">.</span><span class="ident" id="5006689">Skip</span><span class="op" id="5006693">(</span><span class="op" id="5006694">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006698">case</span>&nbsp;<span class="ident" id="5006703">reflect</span><span class="op" id="5006710">.</span><span class="ident" id="5006711">Slice</span><span class="op" id="5006716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006720">typ</span>&nbsp;<span class="op" id="5006724">:=</span>&nbsp;<span class="ident" id="5006727">v</span><span class="op" id="5006728">.</span><span class="ident" id="5006729">Type</span><span class="op" id="5006733">(</span><span class="op" id="5006734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006738">if</span>&nbsp;<span class="ident" id="5006741">typ</span><span class="op" id="5006744">.</span><span class="ident" id="5006745">Elem</span><span class="op" id="5006749">(</span><span class="op" id="5006750">)</span><span class="op" id="5006751">.</span><span class="ident" id="5006752">Kind</span><span class="op" id="5006756">(</span><span class="op" id="5006757">)</span>&nbsp;<span class="op" id="5006759">==</span>&nbsp;<span class="ident" id="5006762">reflect</span><span class="op" id="5006769">.</span><span class="ident" id="5006770">Uint8</span>&nbsp;<span class="op" id="5006776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006781">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006794">saveData</span>&nbsp;<span class="op" id="5006803">=</span>&nbsp;<span class="ident" id="5006805">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006810">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5006818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006823">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5006853">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006870">n</span>&nbsp;<span class="op" id="5006872">:=</span>&nbsp;<span class="ident" id="5006875">v</span><span class="op" id="5006876">.</span><span class="ident" id="5006877">Len</span><span class="op" id="5006880">(</span><span class="op" id="5006881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006885">if</span>&nbsp;<span class="ident" id="5006888">n</span>&nbsp;<span class="op" id="5006890">&gt;=</span>&nbsp;<span class="ident" id="5006893">v</span><span class="op" id="5006894">.</span><span class="ident" id="5006895">Cap</span><span class="op" id="5006898">(</span><span class="op" id="5006899">)</span>&nbsp;<span class="op" id="5006901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006906">ncap</span>&nbsp;<span class="op" id="5006911">:=</span>&nbsp;<span class="num" id="5006914">2</span>&nbsp;<span class="op" id="5006916">*</span>&nbsp;<span class="ident" id="5006918">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5006923">if</span>&nbsp;<span class="ident" id="5006926">ncap</span>&nbsp;<span class="op" id="5006931">&lt;</span>&nbsp;<span class="num" id="5006933">4</span>&nbsp;<span class="op" id="5006935">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5006941">ncap</span>&nbsp;<span class="op" id="5006946">=</span>&nbsp;<span class="num" id="5006948">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5006953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5006958">new</span>&nbsp;<span class="op" id="5006962">:=</span>&nbsp;<span class="ident" id="5006965">reflect</span><span class="op" id="5006972">.</span><span class="ident" id="5006973">MakeSlice</span><span class="op" id="5006982">(</span><span class="ident" id="5006983">typ</span><span class="op" id="5006986">,</span>&nbsp;<span class="ident" id="5006988">n</span><span class="op" id="5006989">,</span>&nbsp;<span class="ident" id="5006991">ncap</span><span class="op" id="5006995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007000">reflect</span><span class="op" id="5007007">.</span><span class="ident" id="5007008">Copy</span><span class="op" id="5007012">(</span><span class="builtinfunc" id="5007013">new</span><span class="op" id="5007016">,</span>&nbsp;<span class="ident" id="5007018">v</span><span class="op" id="5007019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007024">v</span><span class="op" id="5007025">.</span><span class="ident" id="5007026">Set</span><span class="op" id="5007029">(</span><span class="builtinfunc" id="5007030">new</span><span class="op" id="5007033">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5007037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007041">v</span><span class="op" id="5007042">.</span><span class="ident" id="5007043">SetLen</span><span class="op" id="5007049">(</span><span class="ident" id="5007050">n</span>&nbsp;<span class="op" id="5007052">+</span>&nbsp;<span class="num" id="5007054">1</span><span class="op" id="5007055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5007060">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007099">if</span>&nbsp;<span class="ident" id="5007102">err</span>&nbsp;<span class="op" id="5007106">:=</span>&nbsp;<span class="ident" id="5007109">p</span><span class="op" id="5007110">.</span><span class="ident" id="5007111">unmarshal</span><span class="op" id="5007120">(</span><span class="ident" id="5007121">v</span><span class="op" id="5007122">.</span><span class="ident" id="5007123">Index</span><span class="op" id="5007128">(</span><span class="ident" id="5007129">n</span><span class="op" id="5007130">)</span><span class="op" id="5007131">,</span>&nbsp;<span class="ident" id="5007133">start</span><span class="op" id="5007138">)</span><span class="op" id="5007139">;</span>&nbsp;<span class="ident" id="5007141">err</span>&nbsp;<span class="op" id="5007145">!=</span>&nbsp;<span class="ident" id="5007148">nil</span>&nbsp;<span class="op" id="5007152">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007157">v</span><span class="op" id="5007158">.</span><span class="ident" id="5007159">SetLen</span><span class="op" id="5007165">(</span><span class="ident" id="5007166">n</span><span class="op" id="5007167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007172">return</span>&nbsp;<span class="ident" id="5007179">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5007185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007189">return</span>&nbsp;<span class="ident" id="5007196">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007202">case</span>&nbsp;<span class="ident" id="5007207">reflect</span><span class="op" id="5007214">.</span><span class="ident" id="5007215">Bool</span><span class="op" id="5007219">,</span>&nbsp;<span class="ident" id="5007221">reflect</span><span class="op" id="5007228">.</span><span class="ident" id="5007229">Float32</span><span class="op" id="5007236">,</span>&nbsp;<span class="ident" id="5007238">reflect</span><span class="op" id="5007245">.</span><span class="ident" id="5007246">Float64</span><span class="op" id="5007253">,</span>&nbsp;<span class="ident" id="5007255">reflect</span><span class="op" id="5007262">.</span><span class="ident" id="5007263">Int</span><span class="op" id="5007266">,</span>&nbsp;<span class="ident" id="5007268">reflect</span><span class="op" id="5007275">.</span><span class="ident" id="5007276">Int8</span><span class="op" id="5007280">,</span>&nbsp;<span class="ident" id="5007282">reflect</span><span class="op" id="5007289">.</span><span class="ident" id="5007290">Int16</span><span class="op" id="5007295">,</span>&nbsp;<span class="ident" id="5007297">reflect</span><span class="op" id="5007304">.</span><span class="ident" id="5007305">Int32</span><span class="op" id="5007310">,</span>&nbsp;<span class="ident" id="5007312">reflect</span><span class="op" id="5007319">.</span><span class="ident" id="5007320">Int64</span><span class="op" id="5007325">,</span>&nbsp;<span class="ident" id="5007327">reflect</span><span class="op" id="5007334">.</span><span class="ident" id="5007335">Uint</span><span class="op" id="5007339">,</span>&nbsp;<span class="ident" id="5007341">reflect</span><span class="op" id="5007348">.</span><span class="ident" id="5007349">Uint8</span><span class="op" id="5007354">,</span>&nbsp;<span class="ident" id="5007356">reflect</span><span class="op" id="5007363">.</span><span class="ident" id="5007364">Uint16</span><span class="op" id="5007370">,</span>&nbsp;<span class="ident" id="5007372">reflect</span><span class="op" id="5007379">.</span><span class="ident" id="5007380">Uint32</span><span class="op" id="5007386">,</span>&nbsp;<span class="ident" id="5007388">reflect</span><span class="op" id="5007395">.</span><span class="ident" id="5007396">Uint64</span><span class="op" id="5007402">,</span>&nbsp;<span class="ident" id="5007404">reflect</span><span class="op" id="5007411">.</span><span class="ident" id="5007412">Uintptr</span><span class="op" id="5007419">,</span>&nbsp;<span class="ident" id="5007421">reflect</span><span class="op" id="5007428">.</span><span class="ident" id="5007429">String</span><span class="op" id="5007435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007439">saveData</span>&nbsp;<span class="op" id="5007448">=</span>&nbsp;<span class="ident" id="5007450">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007454">case</span>&nbsp;<span class="ident" id="5007459">reflect</span><span class="op" id="5007466">.</span><span class="ident" id="5007467">Struct</span><span class="op" id="5007473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007477">typ</span>&nbsp;<span class="op" id="5007481">:=</span>&nbsp;<span class="ident" id="5007484">v</span><span class="op" id="5007485">.</span><span class="ident" id="5007486">Type</span><span class="op" id="5007490">(</span><span class="op" id="5007491">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007495">if</span>&nbsp;<span class="ident" id="5007498">typ</span>&nbsp;<span class="op" id="5007502">==</span>&nbsp;<span class="ident" id="5007505">nameType</span>&nbsp;<span class="op" id="5007514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007519">v</span><span class="op" id="5007520">.</span><span class="ident" id="5007521">Set</span><span class="op" id="5007524">(</span><span class="ident" id="5007525">reflect</span><span class="op" id="5007532">.</span><span class="ident" id="5007533">ValueOf</span><span class="op" id="5007540">(</span><span class="ident" id="5007541">start</span><span class="op" id="5007546">.</span><span class="ident" id="5007547">Name</span><span class="op" id="5007551">)</span><span class="op" id="5007552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007557">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5007565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007570">sv</span>&nbsp;<span class="op" id="5007573">=</span>&nbsp;<span class="ident" id="5007575">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007579">tinfo</span><span class="op" id="5007584">,</span>&nbsp;<span class="ident" id="5007586">err</span>&nbsp;<span class="op" id="5007590">=</span>&nbsp;<span class="ident" id="5007592">getTypeInfo</span><span class="op" id="5007603">(</span><span class="ident" id="5007604">typ</span><span class="op" id="5007607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007611">if</span>&nbsp;<span class="ident" id="5007614">err</span>&nbsp;<span class="op" id="5007618">!=</span>&nbsp;<span class="ident" id="5007621">nil</span>&nbsp;<span class="op" id="5007625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007630">return</span>&nbsp;<span class="ident" id="5007637">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5007643">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5007648">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007687">if</span>&nbsp;<span class="ident" id="5007690">tinfo</span><span class="op" id="5007695">.</span><span class="ident" id="5007696">xmlname</span>&nbsp;<span class="op" id="5007704">!=</span>&nbsp;<span class="ident" id="5007707">nil</span>&nbsp;<span class="op" id="5007711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007716">finfo</span>&nbsp;<span class="op" id="5007722">:=</span>&nbsp;<span class="ident" id="5007725">tinfo</span><span class="op" id="5007730">.</span><span class="ident" id="5007731">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007742">if</span>&nbsp;<span class="ident" id="5007745">finfo</span><span class="op" id="5007750">.</span><span class="ident" id="5007751">name</span>&nbsp;<span class="op" id="5007756">!=</span>&nbsp;<span class="string" id="5007759">&#34;&#34;</span>&nbsp;<span class="op" id="5007762">&amp;&amp;</span>&nbsp;<span class="ident" id="5007765">finfo</span><span class="op" id="5007770">.</span><span class="ident" id="5007771">name</span>&nbsp;<span class="op" id="5007776">!=</span>&nbsp;<span class="ident" id="5007779">start</span><span class="op" id="5007784">.</span><span class="ident" id="5007785">Name</span><span class="op" id="5007789">.</span><span class="ident" id="5007790">Local</span>&nbsp;<span class="op" id="5007796">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007802">return</span>&nbsp;<span class="ident" id="5007809">UnmarshalError</span><span class="op" id="5007823">(</span><span class="string" id="5007824">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5007850">+</span>&nbsp;<span class="ident" id="5007852">finfo</span><span class="op" id="5007857">.</span><span class="ident" id="5007858">name</span>&nbsp;<span class="op" id="5007863">+</span>&nbsp;<span class="string" id="5007865">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5007880">+</span>&nbsp;<span class="ident" id="5007882">start</span><span class="op" id="5007887">.</span><span class="ident" id="5007888">Name</span><span class="op" id="5007892">.</span><span class="ident" id="5007893">Local</span>&nbsp;<span class="op" id="5007899">+</span>&nbsp;<span class="string" id="5007901">&#34;&gt;&#34;</span><span class="op" id="5007904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5007909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5007914">if</span>&nbsp;<span class="ident" id="5007917">finfo</span><span class="op" id="5007922">.</span><span class="ident" id="5007923">xmlns</span>&nbsp;<span class="op" id="5007929">!=</span>&nbsp;<span class="string" id="5007932">&#34;&#34;</span>&nbsp;<span class="op" id="5007935">&amp;&amp;</span>&nbsp;<span class="ident" id="5007938">finfo</span><span class="op" id="5007943">.</span><span class="ident" id="5007944">xmlns</span>&nbsp;<span class="op" id="5007950">!=</span>&nbsp;<span class="ident" id="5007953">start</span><span class="op" id="5007958">.</span><span class="ident" id="5007959">Name</span><span class="op" id="5007963">.</span><span class="ident" id="5007964">Space</span>&nbsp;<span class="op" id="5007970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5007976">e</span>&nbsp;<span class="op" id="5007978">:=</span>&nbsp;<span class="string" id="5007981">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5008002">+</span>&nbsp;<span class="ident" id="5008004">finfo</span><span class="op" id="5008009">.</span><span class="ident" id="5008010">name</span>&nbsp;<span class="op" id="5008015">+</span>&nbsp;<span class="string" id="5008017">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="5008036">+</span>&nbsp;<span class="ident" id="5008038">finfo</span><span class="op" id="5008043">.</span><span class="ident" id="5008044">xmlns</span>&nbsp;<span class="op" id="5008050">+</span>&nbsp;<span class="string" id="5008052">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008069">if</span>&nbsp;<span class="ident" id="5008072">start</span><span class="op" id="5008077">.</span><span class="ident" id="5008078">Name</span><span class="op" id="5008082">.</span><span class="ident" id="5008083">Space</span>&nbsp;<span class="op" id="5008089">==</span>&nbsp;<span class="string" id="5008092">&#34;&#34;</span>&nbsp;<span class="op" id="5008095">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008102">e</span>&nbsp;<span class="op" id="5008104">+=</span>&nbsp;<span class="string" id="5008107">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008127">}</span>&nbsp;<span class="keyword" id="5008129">else</span>&nbsp;<span class="op" id="5008134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008141">e</span>&nbsp;<span class="op" id="5008143">+=</span>&nbsp;<span class="ident" id="5008146">start</span><span class="op" id="5008151">.</span><span class="ident" id="5008152">Name</span><span class="op" id="5008156">.</span><span class="ident" id="5008157">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008173">return</span>&nbsp;<span class="ident" id="5008180">UnmarshalError</span><span class="op" id="5008194">(</span><span class="ident" id="5008195">e</span><span class="op" id="5008196">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008206">fv</span>&nbsp;<span class="op" id="5008209">:=</span>&nbsp;<span class="ident" id="5008212">finfo</span><span class="op" id="5008217">.</span><span class="ident" id="5008218">value</span><span class="op" id="5008223">(</span><span class="ident" id="5008224">sv</span><span class="op" id="5008226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008231">if</span>&nbsp;<span class="ident" id="5008234">_</span><span class="op" id="5008235">,</span>&nbsp;<span class="ident" id="5008237">ok</span>&nbsp;<span class="op" id="5008240">:=</span>&nbsp;<span class="ident" id="5008243">fv</span><span class="op" id="5008245">.</span><span class="ident" id="5008246">Interface</span><span class="op" id="5008255">(</span><span class="op" id="5008256">)</span><span class="op" id="5008257">.</span><span class="op" id="5008258">(</span><span class="ident" id="5008259">Name</span><span class="op" id="5008263">)</span><span class="op" id="5008264">;</span>&nbsp;<span class="ident" id="5008266">ok</span>&nbsp;<span class="op" id="5008269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008275">fv</span><span class="op" id="5008277">.</span><span class="ident" id="5008278">Set</span><span class="op" id="5008281">(</span><span class="ident" id="5008282">reflect</span><span class="op" id="5008289">.</span><span class="ident" id="5008290">ValueOf</span><span class="op" id="5008297">(</span><span class="ident" id="5008298">start</span><span class="op" id="5008303">.</span><span class="ident" id="5008304">Name</span><span class="op" id="5008308">)</span><span class="op" id="5008309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008314">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5008323">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5008347">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008420">for</span>&nbsp;<span class="ident" id="5008424">i</span>&nbsp;<span class="op" id="5008426">:=</span>&nbsp;<span class="keyword" id="5008429">range</span>&nbsp;<span class="ident" id="5008435">tinfo</span><span class="op" id="5008440">.</span><span class="ident" id="5008441">fields</span>&nbsp;<span class="op" id="5008448">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008453">finfo</span>&nbsp;<span class="op" id="5008459">:=</span>&nbsp;<span class="op" id="5008462">&amp;</span><span class="ident" id="5008463">tinfo</span><span class="op" id="5008468">.</span><span class="ident" id="5008469">fields</span><span class="op" id="5008475">[</span><span class="ident" id="5008476">i</span><span class="op" id="5008477">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008482">switch</span>&nbsp;<span class="ident" id="5008489">finfo</span><span class="op" id="5008494">.</span><span class="ident" id="5008495">flags</span>&nbsp;<span class="op" id="5008501">&amp;</span>&nbsp;<span class="ident" id="5008503">fMode</span>&nbsp;<span class="op" id="5008509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008514">case</span>&nbsp;<span class="ident" id="5008519">fAttr</span><span class="op" id="5008524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008530">strv</span>&nbsp;<span class="op" id="5008535">:=</span>&nbsp;<span class="ident" id="5008538">finfo</span><span class="op" id="5008543">.</span><span class="ident" id="5008544">value</span><span class="op" id="5008549">(</span><span class="ident" id="5008550">sv</span><span class="op" id="5008552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5008558">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008585">for</span>&nbsp;<span class="ident" id="5008589">_</span><span class="op" id="5008590">,</span>&nbsp;<span class="ident" id="5008592">a</span>&nbsp;<span class="op" id="5008594">:=</span>&nbsp;<span class="keyword" id="5008597">range</span>&nbsp;<span class="ident" id="5008603">start</span><span class="op" id="5008608">.</span><span class="ident" id="5008609">Attr</span>&nbsp;<span class="op" id="5008614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008621">if</span>&nbsp;<span class="ident" id="5008624">a</span><span class="op" id="5008625">.</span><span class="ident" id="5008626">Name</span><span class="op" id="5008630">.</span><span class="ident" id="5008631">Local</span>&nbsp;<span class="op" id="5008637">==</span>&nbsp;<span class="ident" id="5008640">finfo</span><span class="op" id="5008645">.</span><span class="ident" id="5008646">name</span>&nbsp;<span class="op" id="5008651">&amp;&amp;</span>&nbsp;<span class="op" id="5008654">(</span><span class="ident" id="5008655">finfo</span><span class="op" id="5008660">.</span><span class="ident" id="5008661">xmlns</span>&nbsp;<span class="op" id="5008667">==</span>&nbsp;<span class="string" id="5008670">&#34;&#34;</span>&nbsp;<span class="op" id="5008673">||</span>&nbsp;<span class="ident" id="5008676">finfo</span><span class="op" id="5008681">.</span><span class="ident" id="5008682">xmlns</span>&nbsp;<span class="op" id="5008688">==</span>&nbsp;<span class="ident" id="5008691">a</span><span class="op" id="5008692">.</span><span class="ident" id="5008693">Name</span><span class="op" id="5008697">.</span><span class="ident" id="5008698">Space</span><span class="op" id="5008703">)</span>&nbsp;<span class="op" id="5008705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008713">if</span>&nbsp;<span class="ident" id="5008716">err</span>&nbsp;<span class="op" id="5008720">:=</span>&nbsp;<span class="ident" id="5008723">p</span><span class="op" id="5008724">.</span><span class="ident" id="5008725">unmarshalAttr</span><span class="op" id="5008738">(</span><span class="ident" id="5008739">strv</span><span class="op" id="5008743">,</span>&nbsp;<span class="ident" id="5008745">a</span><span class="op" id="5008746">)</span><span class="op" id="5008747">;</span>&nbsp;<span class="ident" id="5008749">err</span>&nbsp;<span class="op" id="5008753">!=</span>&nbsp;<span class="ident" id="5008756">nil</span>&nbsp;<span class="op" id="5008760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008769">return</span>&nbsp;<span class="ident" id="5008776">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008786">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008794">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008817">case</span>&nbsp;<span class="ident" id="5008822">fCharData</span><span class="op" id="5008831">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008837">if</span>&nbsp;<span class="op" id="5008840">!</span><span class="ident" id="5008841">saveData</span><span class="op" id="5008849">.</span><span class="ident" id="5008850">IsValid</span><span class="op" id="5008857">(</span><span class="op" id="5008858">)</span>&nbsp;<span class="op" id="5008860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008867">saveData</span>&nbsp;<span class="op" id="5008876">=</span>&nbsp;<span class="ident" id="5008878">finfo</span><span class="op" id="5008883">.</span><span class="ident" id="5008884">value</span><span class="op" id="5008889">(</span><span class="ident" id="5008890">sv</span><span class="op" id="5008892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008904">case</span>&nbsp;<span class="ident" id="5008909">fComment</span><span class="op" id="5008917">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008923">if</span>&nbsp;<span class="op" id="5008926">!</span><span class="ident" id="5008927">saveComment</span><span class="op" id="5008938">.</span><span class="ident" id="5008939">IsValid</span><span class="op" id="5008946">(</span><span class="op" id="5008947">)</span>&nbsp;<span class="op" id="5008949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5008956">saveComment</span>&nbsp;<span class="op" id="5008968">=</span>&nbsp;<span class="ident" id="5008970">finfo</span><span class="op" id="5008975">.</span><span class="ident" id="5008976">value</span><span class="op" id="5008981">(</span><span class="ident" id="5008982">sv</span><span class="op" id="5008984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5008990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5008996">case</span>&nbsp;<span class="ident" id="5009001">fAny</span><span class="op" id="5009005">,</span>&nbsp;<span class="ident" id="5009007">fAny</span>&nbsp;<span class="op" id="5009012">|</span>&nbsp;<span class="ident" id="5009014">fElement</span><span class="op" id="5009022">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009028">if</span>&nbsp;<span class="op" id="5009031">!</span><span class="ident" id="5009032">saveAny</span><span class="op" id="5009039">.</span><span class="ident" id="5009040">IsValid</span><span class="op" id="5009047">(</span><span class="op" id="5009048">)</span>&nbsp;<span class="op" id="5009050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009057">saveAny</span>&nbsp;<span class="op" id="5009065">=</span>&nbsp;<span class="ident" id="5009067">finfo</span><span class="op" id="5009072">.</span><span class="ident" id="5009073">value</span><span class="op" id="5009078">(</span><span class="ident" id="5009079">sv</span><span class="op" id="5009081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009093">case</span>&nbsp;<span class="ident" id="5009098">fInnerXml</span><span class="op" id="5009107">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009113">if</span>&nbsp;<span class="op" id="5009116">!</span><span class="ident" id="5009117">saveXML</span><span class="op" id="5009124">.</span><span class="ident" id="5009125">IsValid</span><span class="op" id="5009132">(</span><span class="op" id="5009133">)</span>&nbsp;<span class="op" id="5009135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009142">saveXML</span>&nbsp;<span class="op" id="5009150">=</span>&nbsp;<span class="ident" id="5009152">finfo</span><span class="op" id="5009157">.</span><span class="ident" id="5009158">value</span><span class="op" id="5009163">(</span><span class="ident" id="5009164">sv</span><span class="op" id="5009166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009173">if</span>&nbsp;<span class="ident" id="5009176">p</span><span class="op" id="5009177">.</span><span class="ident" id="5009178">saved</span>&nbsp;<span class="op" id="5009184">==</span>&nbsp;<span class="ident" id="5009187">nil</span>&nbsp;<span class="op" id="5009191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009199">saveXMLIndex</span>&nbsp;<span class="op" id="5009212">=</span>&nbsp;<span class="num" id="5009214">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009222">p</span><span class="op" id="5009223">.</span><span class="ident" id="5009224">saved</span>&nbsp;<span class="op" id="5009230">=</span>&nbsp;<span class="builtinfunc" id="5009232">new</span><span class="op" id="5009235">(</span><span class="ident" id="5009236">bytes</span><span class="op" id="5009241">.</span><span class="ident" id="5009242">Buffer</span><span class="op" id="5009248">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009255">}</span>&nbsp;<span class="keyword" id="5009257">else</span>&nbsp;<span class="op" id="5009262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009270">saveXMLIndex</span>&nbsp;<span class="op" id="5009283">=</span>&nbsp;<span class="ident" id="5009285">p</span><span class="op" id="5009286">.</span><span class="ident" id="5009287">savedOffset</span><span class="op" id="5009298">(</span><span class="op" id="5009299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009317">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5009328">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5009350">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="5009389">Loop</span><span class="op" id="5009393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009396">for</span>&nbsp;<span class="op" id="5009400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009404">var</span>&nbsp;<span class="ident" id="5009408">savedOffset</span>&nbsp;<span class="builtintype" id="5009420">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009426">if</span>&nbsp;<span class="ident" id="5009429">saveXML</span><span class="op" id="5009436">.</span><span class="ident" id="5009437">IsValid</span><span class="op" id="5009444">(</span><span class="op" id="5009445">)</span>&nbsp;<span class="op" id="5009447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009452">savedOffset</span>&nbsp;<span class="op" id="5009464">=</span>&nbsp;<span class="ident" id="5009466">p</span><span class="op" id="5009467">.</span><span class="ident" id="5009468">savedOffset</span><span class="op" id="5009479">(</span><span class="op" id="5009480">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009488">tok</span><span class="op" id="5009491">,</span>&nbsp;<span class="ident" id="5009493">err</span>&nbsp;<span class="op" id="5009497">:=</span>&nbsp;<span class="ident" id="5009500">p</span><span class="op" id="5009501">.</span><span class="ident" id="5009502">Token</span><span class="op" id="5009507">(</span><span class="op" id="5009508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009512">if</span>&nbsp;<span class="ident" id="5009515">err</span>&nbsp;<span class="op" id="5009519">!=</span>&nbsp;<span class="ident" id="5009522">nil</span>&nbsp;<span class="op" id="5009526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009531">return</span>&nbsp;<span class="ident" id="5009538">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009544">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009548">switch</span>&nbsp;<span class="ident" id="5009555">t</span>&nbsp;<span class="op" id="5009557">:=</span>&nbsp;<span class="ident" id="5009560">tok</span><span class="op" id="5009563">.</span><span class="op" id="5009564">(</span><span class="keyword" id="5009565">type</span><span class="op" id="5009569">)</span>&nbsp;<span class="op" id="5009571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009575">case</span>&nbsp;<span class="ident" id="5009580">StartElement</span><span class="op" id="5009592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009597">consumed</span>&nbsp;<span class="op" id="5009606">:=</span>&nbsp;<span class="builtintype" id="5009609">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009618">if</span>&nbsp;<span class="ident" id="5009621">sv</span><span class="op" id="5009623">.</span><span class="ident" id="5009624">IsValid</span><span class="op" id="5009631">(</span><span class="op" id="5009632">)</span>&nbsp;<span class="op" id="5009634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009640">consumed</span><span class="op" id="5009648">,</span>&nbsp;<span class="ident" id="5009650">err</span>&nbsp;<span class="op" id="5009654">=</span>&nbsp;<span class="ident" id="5009656">p</span><span class="op" id="5009657">.</span><span class="ident" id="5009658">unmarshalPath</span><span class="op" id="5009671">(</span><span class="ident" id="5009672">tinfo</span><span class="op" id="5009677">,</span>&nbsp;<span class="ident" id="5009679">sv</span><span class="op" id="5009681">,</span>&nbsp;<span class="ident" id="5009683">nil</span><span class="op" id="5009686">,</span>&nbsp;<span class="op" id="5009688">&amp;</span><span class="ident" id="5009689">t</span><span class="op" id="5009690">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009696">if</span>&nbsp;<span class="ident" id="5009699">err</span>&nbsp;<span class="op" id="5009703">!=</span>&nbsp;<span class="ident" id="5009706">nil</span>&nbsp;<span class="op" id="5009710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009717">return</span>&nbsp;<span class="ident" id="5009724">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009738">if</span>&nbsp;<span class="op" id="5009741">!</span><span class="ident" id="5009742">consumed</span>&nbsp;<span class="op" id="5009751">&amp;&amp;</span>&nbsp;<span class="ident" id="5009754">saveAny</span><span class="op" id="5009761">.</span><span class="ident" id="5009762">IsValid</span><span class="op" id="5009769">(</span><span class="op" id="5009770">)</span>&nbsp;<span class="op" id="5009772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5009779">consumed</span>&nbsp;<span class="op" id="5009788">=</span>&nbsp;<span class="builtintype" id="5009790">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009800">if</span>&nbsp;<span class="ident" id="5009803">err</span>&nbsp;<span class="op" id="5009807">:=</span>&nbsp;<span class="ident" id="5009810">p</span><span class="op" id="5009811">.</span><span class="ident" id="5009812">unmarshal</span><span class="op" id="5009821">(</span><span class="ident" id="5009822">saveAny</span><span class="op" id="5009829">,</span>&nbsp;<span class="op" id="5009831">&amp;</span><span class="ident" id="5009832">t</span><span class="op" id="5009833">)</span><span class="op" id="5009834">;</span>&nbsp;<span class="ident" id="5009836">err</span>&nbsp;<span class="op" id="5009840">!=</span>&nbsp;<span class="ident" id="5009843">nil</span>&nbsp;<span class="op" id="5009847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009855">return</span>&nbsp;<span class="ident" id="5009862">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009882">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009887">if</span>&nbsp;<span class="op" id="5009890">!</span><span class="ident" id="5009891">consumed</span>&nbsp;<span class="op" id="5009900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009906">if</span>&nbsp;<span class="ident" id="5009909">err</span>&nbsp;<span class="op" id="5009913">:=</span>&nbsp;<span class="ident" id="5009916">p</span><span class="op" id="5009917">.</span><span class="ident" id="5009918">Skip</span><span class="op" id="5009922">(</span><span class="op" id="5009923">)</span><span class="op" id="5009924">;</span>&nbsp;<span class="ident" id="5009926">err</span>&nbsp;<span class="op" id="5009930">!=</span>&nbsp;<span class="ident" id="5009933">nil</span>&nbsp;<span class="op" id="5009937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009944">return</span>&nbsp;<span class="ident" id="5009951">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5009964">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009969">case</span>&nbsp;<span class="ident" id="5009974">EndElement</span><span class="op" id="5009984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5009989">if</span>&nbsp;<span class="ident" id="5009992">saveXML</span><span class="op" id="5009999">.</span><span class="ident" id="5010000">IsValid</span><span class="op" id="5010007">(</span><span class="op" id="5010008">)</span>&nbsp;<span class="op" id="5010010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010016">saveXMLData</span>&nbsp;<span class="op" id="5010028">=</span>&nbsp;<span class="ident" id="5010030">p</span><span class="op" id="5010031">.</span><span class="ident" id="5010032">saved</span><span class="op" id="5010037">.</span><span class="ident" id="5010038">Bytes</span><span class="op" id="5010043">(</span><span class="op" id="5010044">)</span><span class="op" id="5010045">[</span><span class="ident" id="5010046">saveXMLIndex</span><span class="op" id="5010058">:</span><span class="ident" id="5010059">savedOffset</span><span class="op" id="5010070">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010076">if</span>&nbsp;<span class="ident" id="5010079">saveXMLIndex</span>&nbsp;<span class="op" id="5010092">==</span>&nbsp;<span class="num" id="5010095">0</span>&nbsp;<span class="op" id="5010097">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010104">p</span><span class="op" id="5010105">.</span><span class="ident" id="5010106">saved</span>&nbsp;<span class="op" id="5010112">=</span>&nbsp;<span class="ident" id="5010114">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010132">break</span>&nbsp;<span class="ident" id="5010138">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010146">case</span>&nbsp;<span class="ident" id="5010151">CharData</span><span class="op" id="5010159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010164">if</span>&nbsp;<span class="ident" id="5010167">saveData</span><span class="op" id="5010175">.</span><span class="ident" id="5010176">IsValid</span><span class="op" id="5010183">(</span><span class="op" id="5010184">)</span>&nbsp;<span class="op" id="5010186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010192">data</span>&nbsp;<span class="op" id="5010197">=</span>&nbsp;<span class="builtinfunc" id="5010199">append</span><span class="op" id="5010205">(</span><span class="ident" id="5010206">data</span><span class="op" id="5010210">,</span>&nbsp;<span class="ident" id="5010212">t</span><span class="op" id="5010213">...</span><span class="op" id="5010216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010226">case</span>&nbsp;<span class="ident" id="5010231">Comment</span><span class="op" id="5010238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010243">if</span>&nbsp;<span class="ident" id="5010246">saveComment</span><span class="op" id="5010257">.</span><span class="ident" id="5010258">IsValid</span><span class="op" id="5010265">(</span><span class="op" id="5010266">)</span>&nbsp;<span class="op" id="5010268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010274">comment</span>&nbsp;<span class="op" id="5010282">=</span>&nbsp;<span class="builtinfunc" id="5010284">append</span><span class="op" id="5010290">(</span><span class="ident" id="5010291">comment</span><span class="op" id="5010298">,</span>&nbsp;<span class="ident" id="5010300">t</span><span class="op" id="5010301">...</span><span class="op" id="5010304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010313">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010320">if</span>&nbsp;<span class="ident" id="5010323">saveData</span><span class="op" id="5010331">.</span><span class="ident" id="5010332">IsValid</span><span class="op" id="5010339">(</span><span class="op" id="5010340">)</span>&nbsp;<span class="op" id="5010342">&amp;&amp;</span>&nbsp;<span class="ident" id="5010345">saveData</span><span class="op" id="5010353">.</span><span class="ident" id="5010354">CanInterface</span><span class="op" id="5010366">(</span><span class="op" id="5010367">)</span>&nbsp;<span class="op" id="5010369">&amp;&amp;</span>&nbsp;<span class="ident" id="5010372">saveData</span><span class="op" id="5010380">.</span><span class="ident" id="5010381">Type</span><span class="op" id="5010385">(</span><span class="op" id="5010386">)</span><span class="op" id="5010387">.</span><span class="ident" id="5010388">Implements</span><span class="op" id="5010398">(</span><span class="ident" id="5010399">textUnmarshalerType</span><span class="op" id="5010418">)</span>&nbsp;<span class="op" id="5010420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010424">if</span>&nbsp;<span class="ident" id="5010427">err</span>&nbsp;<span class="op" id="5010431">:=</span>&nbsp;<span class="ident" id="5010434">saveData</span><span class="op" id="5010442">.</span><span class="ident" id="5010443">Interface</span><span class="op" id="5010452">(</span><span class="op" id="5010453">)</span><span class="op" id="5010454">.</span><span class="op" id="5010455">(</span><span class="ident" id="5010456">encoding</span><span class="op" id="5010464">.</span><span class="ident" id="5010465">TextUnmarshaler</span><span class="op" id="5010480">)</span><span class="op" id="5010481">.</span><span class="ident" id="5010482">UnmarshalText</span><span class="op" id="5010495">(</span><span class="ident" id="5010496">data</span><span class="op" id="5010500">)</span><span class="op" id="5010501">;</span>&nbsp;<span class="ident" id="5010503">err</span>&nbsp;<span class="op" id="5010507">!=</span>&nbsp;<span class="ident" id="5010510">nil</span>&nbsp;<span class="op" id="5010514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010519">return</span>&nbsp;<span class="ident" id="5010526">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010536">saveData</span>&nbsp;<span class="op" id="5010545">=</span>&nbsp;<span class="ident" id="5010547">reflect</span><span class="op" id="5010554">.</span><span class="ident" id="5010555">Value</span><span class="op" id="5010560">{</span><span class="op" id="5010561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010568">if</span>&nbsp;<span class="ident" id="5010571">saveData</span><span class="op" id="5010579">.</span><span class="ident" id="5010580">IsValid</span><span class="op" id="5010587">(</span><span class="op" id="5010588">)</span>&nbsp;<span class="op" id="5010590">&amp;&amp;</span>&nbsp;<span class="ident" id="5010593">saveData</span><span class="op" id="5010601">.</span><span class="ident" id="5010602">CanAddr</span><span class="op" id="5010609">(</span><span class="op" id="5010610">)</span>&nbsp;<span class="op" id="5010612">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010616">pv</span>&nbsp;<span class="op" id="5010619">:=</span>&nbsp;<span class="ident" id="5010622">saveData</span><span class="op" id="5010630">.</span><span class="ident" id="5010631">Addr</span><span class="op" id="5010635">(</span><span class="op" id="5010636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010640">if</span>&nbsp;<span class="ident" id="5010643">pv</span><span class="op" id="5010645">.</span><span class="ident" id="5010646">CanInterface</span><span class="op" id="5010658">(</span><span class="op" id="5010659">)</span>&nbsp;<span class="op" id="5010661">&amp;&amp;</span>&nbsp;<span class="ident" id="5010664">pv</span><span class="op" id="5010666">.</span><span class="ident" id="5010667">Type</span><span class="op" id="5010671">(</span><span class="op" id="5010672">)</span><span class="op" id="5010673">.</span><span class="ident" id="5010674">Implements</span><span class="op" id="5010684">(</span><span class="ident" id="5010685">textUnmarshalerType</span><span class="op" id="5010704">)</span>&nbsp;<span class="op" id="5010706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010711">if</span>&nbsp;<span class="ident" id="5010714">err</span>&nbsp;<span class="op" id="5010718">:=</span>&nbsp;<span class="ident" id="5010721">pv</span><span class="op" id="5010723">.</span><span class="ident" id="5010724">Interface</span><span class="op" id="5010733">(</span><span class="op" id="5010734">)</span><span class="op" id="5010735">.</span><span class="op" id="5010736">(</span><span class="ident" id="5010737">encoding</span><span class="op" id="5010745">.</span><span class="ident" id="5010746">TextUnmarshaler</span><span class="op" id="5010761">)</span><span class="op" id="5010762">.</span><span class="ident" id="5010763">UnmarshalText</span><span class="op" id="5010776">(</span><span class="ident" id="5010777">data</span><span class="op" id="5010781">)</span><span class="op" id="5010782">;</span>&nbsp;<span class="ident" id="5010784">err</span>&nbsp;<span class="op" id="5010788">!=</span>&nbsp;<span class="ident" id="5010791">nil</span>&nbsp;<span class="op" id="5010795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010801">return</span>&nbsp;<span class="ident" id="5010808">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010815">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010820">saveData</span>&nbsp;<span class="op" id="5010829">=</span>&nbsp;<span class="ident" id="5010831">reflect</span><span class="op" id="5010838">.</span><span class="ident" id="5010839">Value</span><span class="op" id="5010844">{</span><span class="op" id="5010845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010856">if</span>&nbsp;<span class="ident" id="5010859">err</span>&nbsp;<span class="op" id="5010863">:=</span>&nbsp;<span class="ident" id="5010866">copyValue</span><span class="op" id="5010875">(</span><span class="ident" id="5010876">saveData</span><span class="op" id="5010884">,</span>&nbsp;<span class="ident" id="5010886">data</span><span class="op" id="5010890">)</span><span class="op" id="5010891">;</span>&nbsp;<span class="ident" id="5010893">err</span>&nbsp;<span class="op" id="5010897">!=</span>&nbsp;<span class="ident" id="5010900">nil</span>&nbsp;<span class="op" id="5010904">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010908">return</span>&nbsp;<span class="ident" id="5010915">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5010920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010924">switch</span>&nbsp;<span class="ident" id="5010931">t</span>&nbsp;<span class="op" id="5010933">:=</span>&nbsp;<span class="ident" id="5010936">saveComment</span><span class="op" id="5010947">;</span>&nbsp;<span class="ident" id="5010949">t</span><span class="op" id="5010950">.</span><span class="ident" id="5010951">Kind</span><span class="op" id="5010955">(</span><span class="op" id="5010956">)</span>&nbsp;<span class="op" id="5010958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5010961">case</span>&nbsp;<span class="ident" id="5010966">reflect</span><span class="op" id="5010973">.</span><span class="ident" id="5010974">String</span><span class="op" id="5010980">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5010984">t</span><span class="op" id="5010985">.</span><span class="ident" id="5010986">SetString</span><span class="op" id="5010995">(</span><span class="builtintype" id="5010996">string</span><span class="op" id="5011002">(</span><span class="ident" id="5011003">comment</span><span class="op" id="5011010">)</span><span class="op" id="5011011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011014">case</span>&nbsp;<span class="ident" id="5011019">reflect</span><span class="op" id="5011026">.</span><span class="ident" id="5011027">Slice</span><span class="op" id="5011032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011036">t</span><span class="op" id="5011037">.</span><span class="ident" id="5011038">Set</span><span class="op" id="5011041">(</span><span class="ident" id="5011042">reflect</span><span class="op" id="5011049">.</span><span class="ident" id="5011050">ValueOf</span><span class="op" id="5011057">(</span><span class="ident" id="5011058">comment</span><span class="op" id="5011065">)</span><span class="op" id="5011066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5011069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011073">switch</span>&nbsp;<span class="ident" id="5011080">t</span>&nbsp;<span class="op" id="5011082">:=</span>&nbsp;<span class="ident" id="5011085">saveXML</span><span class="op" id="5011092">;</span>&nbsp;<span class="ident" id="5011094">t</span><span class="op" id="5011095">.</span><span class="ident" id="5011096">Kind</span><span class="op" id="5011100">(</span><span class="op" id="5011101">)</span>&nbsp;<span class="op" id="5011103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011106">case</span>&nbsp;<span class="ident" id="5011111">reflect</span><span class="op" id="5011118">.</span><span class="ident" id="5011119">String</span><span class="op" id="5011125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011129">t</span><span class="op" id="5011130">.</span><span class="ident" id="5011131">SetString</span><span class="op" id="5011140">(</span><span class="builtintype" id="5011141">string</span><span class="op" id="5011147">(</span><span class="ident" id="5011148">saveXMLData</span><span class="op" id="5011159">)</span><span class="op" id="5011160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011163">case</span>&nbsp;<span class="ident" id="5011168">reflect</span><span class="op" id="5011175">.</span><span class="ident" id="5011176">Slice</span><span class="op" id="5011181">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011185">t</span><span class="op" id="5011186">.</span><span class="ident" id="5011187">Set</span><span class="op" id="5011190">(</span><span class="ident" id="5011191">reflect</span><span class="op" id="5011198">.</span><span class="ident" id="5011199">ValueOf</span><span class="op" id="5011206">(</span><span class="ident" id="5011207">saveXMLData</span><span class="op" id="5011218">)</span><span class="op" id="5011219">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5011222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011226">return</span>&nbsp;<span class="ident" id="5011233">nil</span><br>
<span class="lineno"></span><span class="op" id="5011237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5011240">func</span>&nbsp;<span class="ident" id="5011245">copyValue</span><span class="op" id="5011254">(</span><span class="ident" id="5011255">dst</span>&nbsp;<span class="ident" id="5011259">reflect</span><span class="op" id="5011266">.</span><span class="ident" id="5011267">Value</span><span class="op" id="5011272">,</span>&nbsp;<span class="ident" id="5011274">src</span>&nbsp;<span class="op" id="5011278">[</span><span class="op" id="5011279">]</span><span class="builtintype" id="5011280">byte</span><span class="op" id="5011284">)</span>&nbsp;<span class="op" id="5011286">(</span><span class="ident" id="5011287">err</span>&nbsp;<span class="builtintype" id="5011291">error</span><span class="op" id="5011296">)</span>&nbsp;<span class="op" id="5011298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011301">dst0</span>&nbsp;<span class="op" id="5011306">:=</span>&nbsp;<span class="ident" id="5011309">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011315">if</span>&nbsp;<span class="ident" id="5011318">dst</span><span class="op" id="5011321">.</span><span class="ident" id="5011322">Kind</span><span class="op" id="5011326">(</span><span class="op" id="5011327">)</span>&nbsp;<span class="op" id="5011329">==</span>&nbsp;<span class="ident" id="5011332">reflect</span><span class="op" id="5011339">.</span><span class="ident" id="5011340">Ptr</span>&nbsp;<span class="op" id="5011344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011348">if</span>&nbsp;<span class="ident" id="5011351">dst</span><span class="op" id="5011354">.</span><span class="ident" id="5011355">IsNil</span><span class="op" id="5011360">(</span><span class="op" id="5011361">)</span>&nbsp;<span class="op" id="5011363">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011368">dst</span><span class="op" id="5011371">.</span><span class="ident" id="5011372">Set</span><span class="op" id="5011375">(</span><span class="ident" id="5011376">reflect</span><span class="op" id="5011383">.</span><span class="ident" id="5011384">New</span><span class="op" id="5011387">(</span><span class="ident" id="5011388">dst</span><span class="op" id="5011391">.</span><span class="ident" id="5011392">Type</span><span class="op" id="5011396">(</span><span class="op" id="5011397">)</span><span class="op" id="5011398">.</span><span class="ident" id="5011399">Elem</span><span class="op" id="5011403">(</span><span class="op" id="5011404">)</span><span class="op" id="5011405">)</span><span class="op" id="5011406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5011410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011414">dst</span>&nbsp;<span class="op" id="5011418">=</span>&nbsp;<span class="ident" id="5011420">dst</span><span class="op" id="5011423">.</span><span class="ident" id="5011424">Elem</span><span class="op" id="5011428">(</span><span class="op" id="5011429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5011432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5011436">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011463">switch</span>&nbsp;<span class="ident" id="5011470">dst</span><span class="op" id="5011473">.</span><span class="ident" id="5011474">Kind</span><span class="op" id="5011478">(</span><span class="op" id="5011479">)</span>&nbsp;<span class="op" id="5011481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011484">case</span>&nbsp;<span class="ident" id="5011489">reflect</span><span class="op" id="5011496">.</span><span class="ident" id="5011497">Invalid</span><span class="op" id="5011504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5011508">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011532">default</span><span class="op" id="5011539">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011543">return</span>&nbsp;<span class="ident" id="5011550">errors</span><span class="op" id="5011556">.</span><span class="ident" id="5011557">New</span><span class="op" id="5011560">(</span><span class="string" id="5011561">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="5011586">+</span>&nbsp;<span class="ident" id="5011588">dst0</span><span class="op" id="5011592">.</span><span class="ident" id="5011593">Type</span><span class="op" id="5011597">(</span><span class="op" id="5011598">)</span><span class="op" id="5011599">.</span><span class="ident" id="5011600">String</span><span class="op" id="5011606">(</span><span class="op" id="5011607">)</span><span class="op" id="5011608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011611">case</span>&nbsp;<span class="ident" id="5011616">reflect</span><span class="op" id="5011623">.</span><span class="ident" id="5011624">Int</span><span class="op" id="5011627">,</span>&nbsp;<span class="ident" id="5011629">reflect</span><span class="op" id="5011636">.</span><span class="ident" id="5011637">Int8</span><span class="op" id="5011641">,</span>&nbsp;<span class="ident" id="5011643">reflect</span><span class="op" id="5011650">.</span><span class="ident" id="5011651">Int16</span><span class="op" id="5011656">,</span>&nbsp;<span class="ident" id="5011658">reflect</span><span class="op" id="5011665">.</span><span class="ident" id="5011666">Int32</span><span class="op" id="5011671">,</span>&nbsp;<span class="ident" id="5011673">reflect</span><span class="op" id="5011680">.</span><span class="ident" id="5011681">Int64</span><span class="op" id="5011686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011690">itmp</span><span class="op" id="5011694">,</span>&nbsp;<span class="ident" id="5011696">err</span>&nbsp;<span class="op" id="5011700">:=</span>&nbsp;<span class="ident" id="5011703">strconv</span><span class="op" id="5011710">.</span><span class="ident" id="5011711">ParseInt</span><span class="op" id="5011719">(</span><span class="builtintype" id="5011720">string</span><span class="op" id="5011726">(</span><span class="ident" id="5011727">src</span><span class="op" id="5011730">)</span><span class="op" id="5011731">,</span>&nbsp;<span class="num" id="5011733">10</span><span class="op" id="5011735">,</span>&nbsp;<span class="ident" id="5011737">dst</span><span class="op" id="5011740">.</span><span class="ident" id="5011741">Type</span><span class="op" id="5011745">(</span><span class="op" id="5011746">)</span><span class="op" id="5011747">.</span><span class="ident" id="5011748">Bits</span><span class="op" id="5011752">(</span><span class="op" id="5011753">)</span><span class="op" id="5011754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011758">if</span>&nbsp;<span class="ident" id="5011761">err</span>&nbsp;<span class="op" id="5011765">!=</span>&nbsp;<span class="ident" id="5011768">nil</span>&nbsp;<span class="op" id="5011772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011777">return</span>&nbsp;<span class="ident" id="5011784">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5011790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011794">dst</span><span class="op" id="5011797">.</span><span class="ident" id="5011798">SetInt</span><span class="op" id="5011804">(</span><span class="ident" id="5011805">itmp</span><span class="op" id="5011809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011812">case</span>&nbsp;<span class="ident" id="5011817">reflect</span><span class="op" id="5011824">.</span><span class="ident" id="5011825">Uint</span><span class="op" id="5011829">,</span>&nbsp;<span class="ident" id="5011831">reflect</span><span class="op" id="5011838">.</span><span class="ident" id="5011839">Uint8</span><span class="op" id="5011844">,</span>&nbsp;<span class="ident" id="5011846">reflect</span><span class="op" id="5011853">.</span><span class="ident" id="5011854">Uint16</span><span class="op" id="5011860">,</span>&nbsp;<span class="ident" id="5011862">reflect</span><span class="op" id="5011869">.</span><span class="ident" id="5011870">Uint32</span><span class="op" id="5011876">,</span>&nbsp;<span class="ident" id="5011878">reflect</span><span class="op" id="5011885">.</span><span class="ident" id="5011886">Uint64</span><span class="op" id="5011892">,</span>&nbsp;<span class="ident" id="5011894">reflect</span><span class="op" id="5011901">.</span><span class="ident" id="5011902">Uintptr</span><span class="op" id="5011909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5011913">utmp</span><span class="op" id="5011917">,</span>&nbsp;<span class="ident" id="5011919">err</span>&nbsp;<span class="op" id="5011923">:=</span>&nbsp;<span class="ident" id="5011926">strconv</span><span class="op" id="5011933">.</span><span class="ident" id="5011934">ParseUint</span><span class="op" id="5011943">(</span><span class="builtintype" id="5011944">string</span><span class="op" id="5011950">(</span><span class="ident" id="5011951">src</span><span class="op" id="5011954">)</span><span class="op" id="5011955">,</span>&nbsp;<span class="num" id="5011957">10</span><span class="op" id="5011959">,</span>&nbsp;<span class="ident" id="5011961">dst</span><span class="op" id="5011964">.</span><span class="ident" id="5011965">Type</span><span class="op" id="5011969">(</span><span class="op" id="5011970">)</span><span class="op" id="5011971">.</span><span class="ident" id="5011972">Bits</span><span class="op" id="5011976">(</span><span class="op" id="5011977">)</span><span class="op" id="5011978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5011982">if</span>&nbsp;<span class="ident" id="5011985">err</span>&nbsp;<span class="op" id="5011989">!=</span>&nbsp;<span class="ident" id="5011992">nil</span>&nbsp;<span class="op" id="5011996">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012001">return</span>&nbsp;<span class="ident" id="5012008">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5012014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012018">dst</span><span class="op" id="5012021">.</span><span class="ident" id="5012022">SetUint</span><span class="op" id="5012029">(</span><span class="ident" id="5012030">utmp</span><span class="op" id="5012034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012037">case</span>&nbsp;<span class="ident" id="5012042">reflect</span><span class="op" id="5012049">.</span><span class="ident" id="5012050">Float32</span><span class="op" id="5012057">,</span>&nbsp;<span class="ident" id="5012059">reflect</span><span class="op" id="5012066">.</span><span class="ident" id="5012067">Float64</span><span class="op" id="5012074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012078">ftmp</span><span class="op" id="5012082">,</span>&nbsp;<span class="ident" id="5012084">err</span>&nbsp;<span class="op" id="5012088">:=</span>&nbsp;<span class="ident" id="5012091">strconv</span><span class="op" id="5012098">.</span><span class="ident" id="5012099">ParseFloat</span><span class="op" id="5012109">(</span><span class="builtintype" id="5012110">string</span><span class="op" id="5012116">(</span><span class="ident" id="5012117">src</span><span class="op" id="5012120">)</span><span class="op" id="5012121">,</span>&nbsp;<span class="ident" id="5012123">dst</span><span class="op" id="5012126">.</span><span class="ident" id="5012127">Type</span><span class="op" id="5012131">(</span><span class="op" id="5012132">)</span><span class="op" id="5012133">.</span><span class="ident" id="5012134">Bits</span><span class="op" id="5012138">(</span><span class="op" id="5012139">)</span><span class="op" id="5012140">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012144">if</span>&nbsp;<span class="ident" id="5012147">err</span>&nbsp;<span class="op" id="5012151">!=</span>&nbsp;<span class="ident" id="5012154">nil</span>&nbsp;<span class="op" id="5012158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012163">return</span>&nbsp;<span class="ident" id="5012170">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5012176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012180">dst</span><span class="op" id="5012183">.</span><span class="ident" id="5012184">SetFloat</span><span class="op" id="5012192">(</span><span class="ident" id="5012193">ftmp</span><span class="op" id="5012197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012200">case</span>&nbsp;<span class="ident" id="5012205">reflect</span><span class="op" id="5012212">.</span><span class="ident" id="5012213">Bool</span><span class="op" id="5012217">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012221">value</span><span class="op" id="5012226">,</span>&nbsp;<span class="ident" id="5012228">err</span>&nbsp;<span class="op" id="5012232">:=</span>&nbsp;<span class="ident" id="5012235">strconv</span><span class="op" id="5012242">.</span><span class="ident" id="5012243">ParseBool</span><span class="op" id="5012252">(</span><span class="ident" id="5012253">strings</span><span class="op" id="5012260">.</span><span class="ident" id="5012261">TrimSpace</span><span class="op" id="5012270">(</span><span class="builtintype" id="5012271">string</span><span class="op" id="5012277">(</span><span class="ident" id="5012278">src</span><span class="op" id="5012281">)</span><span class="op" id="5012282">)</span><span class="op" id="5012283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012287">if</span>&nbsp;<span class="ident" id="5012290">err</span>&nbsp;<span class="op" id="5012294">!=</span>&nbsp;<span class="ident" id="5012297">nil</span>&nbsp;<span class="op" id="5012301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012306">return</span>&nbsp;<span class="ident" id="5012313">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5012319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012323">dst</span><span class="op" id="5012326">.</span><span class="ident" id="5012327">SetBool</span><span class="op" id="5012334">(</span><span class="ident" id="5012335">value</span><span class="op" id="5012340">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012343">case</span>&nbsp;<span class="ident" id="5012348">reflect</span><span class="op" id="5012355">.</span><span class="ident" id="5012356">String</span><span class="op" id="5012362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012366">dst</span><span class="op" id="5012369">.</span><span class="ident" id="5012370">SetString</span><span class="op" id="5012379">(</span><span class="builtintype" id="5012380">string</span><span class="op" id="5012386">(</span><span class="ident" id="5012387">src</span><span class="op" id="5012390">)</span><span class="op" id="5012391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012394">case</span>&nbsp;<span class="ident" id="5012399">reflect</span><span class="op" id="5012406">.</span><span class="ident" id="5012407">Slice</span><span class="op" id="5012412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012416">if</span>&nbsp;<span class="builtinfunc" id="5012419">len</span><span class="op" id="5012422">(</span><span class="ident" id="5012423">src</span><span class="op" id="5012426">)</span>&nbsp;<span class="op" id="5012428">==</span>&nbsp;<span class="num" id="5012431">0</span>&nbsp;<span class="op" id="5012433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5012438">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012469">src</span>&nbsp;<span class="op" id="5012473">=</span>&nbsp;<span class="op" id="5012475">[</span><span class="op" id="5012476">]</span><span class="builtintype" id="5012477">byte</span><span class="op" id="5012481">{</span><span class="op" id="5012482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5012486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012490">dst</span><span class="op" id="5012493">.</span><span class="ident" id="5012494">SetBytes</span><span class="op" id="5012502">(</span><span class="ident" id="5012503">src</span><span class="op" id="5012506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5012509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012512">return</span>&nbsp;<span class="ident" id="5012519">nil</span><br>
<span class="lineno">605</span><span class="op" id="5012523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5012526">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="5012590">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="5012629">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="5012698">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5012765">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="5012832">func</span>&nbsp;<span class="op" id="5012837">(</span><span class="ident" id="5012838">p</span>&nbsp;<span class="op" id="5012840">*</span><span class="ident" id="5012841">Decoder</span><span class="op" id="5012848">)</span>&nbsp;<span class="ident" id="5012850">unmarshalPath</span><span class="op" id="5012863">(</span><span class="ident" id="5012864">tinfo</span>&nbsp;<span class="op" id="5012870">*</span><span class="ident" id="5012871">typeInfo</span><span class="op" id="5012879">,</span>&nbsp;<span class="ident" id="5012881">sv</span>&nbsp;<span class="ident" id="5012884">reflect</span><span class="op" id="5012891">.</span><span class="ident" id="5012892">Value</span><span class="op" id="5012897">,</span>&nbsp;<span class="ident" id="5012899">parents</span>&nbsp;<span class="op" id="5012907">[</span><span class="op" id="5012908">]</span><span class="builtintype" id="5012909">string</span><span class="op" id="5012915">,</span>&nbsp;<span class="ident" id="5012917">start</span>&nbsp;<span class="op" id="5012923">*</span><span class="ident" id="5012924">StartElement</span><span class="op" id="5012936">)</span>&nbsp;<span class="op" id="5012938">(</span><span class="ident" id="5012939">consumed</span>&nbsp;<span class="builtintype" id="5012948">bool</span><span class="op" id="5012952">,</span>&nbsp;<span class="ident" id="5012954">err</span>&nbsp;<span class="builtintype" id="5012958">error</span><span class="op" id="5012963">)</span>&nbsp;<span class="op" id="5012965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5012968">recurse</span>&nbsp;<span class="op" id="5012976">:=</span>&nbsp;<span class="builtintype" id="5012979">false</span><br>
<span class="lineno"></span><span class="ident" id="5012985">Loop</span><span class="op" id="5012989">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5012992">for</span>&nbsp;<span class="ident" id="5012996">i</span>&nbsp;<span class="op" id="5012998">:=</span>&nbsp;<span class="keyword" id="5013001">range</span>&nbsp;<span class="ident" id="5013007">tinfo</span><span class="op" id="5013012">.</span><span class="ident" id="5013013">fields</span>&nbsp;<span class="op" id="5013020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5013024">finfo</span>&nbsp;<span class="op" id="5013030">:=</span>&nbsp;<span class="op" id="5013033">&amp;</span><span class="ident" id="5013034">tinfo</span><span class="op" id="5013039">.</span><span class="ident" id="5013040">fields</span><span class="op" id="5013046">[</span><span class="ident" id="5013047">i</span><span class="op" id="5013048">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013052">if</span>&nbsp;<span class="ident" id="5013055">finfo</span><span class="op" id="5013060">.</span><span class="ident" id="5013061">flags</span><span class="op" id="5013066">&amp;</span><span class="ident" id="5013067">fElement</span>&nbsp;<span class="op" id="5013076">==</span>&nbsp;<span class="num" id="5013079">0</span>&nbsp;<span class="op" id="5013081">||</span>&nbsp;<span class="builtinfunc" id="5013084">len</span><span class="op" id="5013087">(</span><span class="ident" id="5013088">finfo</span><span class="op" id="5013093">.</span><span class="ident" id="5013094">parents</span><span class="op" id="5013101">)</span>&nbsp;<span class="op" id="5013103">&lt;</span>&nbsp;<span class="builtinfunc" id="5013105">len</span><span class="op" id="5013108">(</span><span class="ident" id="5013109">parents</span><span class="op" id="5013116">)</span>&nbsp;<span class="op" id="5013118">||</span>&nbsp;<span class="ident" id="5013121">finfo</span><span class="op" id="5013126">.</span><span class="ident" id="5013127">xmlns</span>&nbsp;<span class="op" id="5013133">!=</span>&nbsp;<span class="string" id="5013136">&#34;&#34;</span>&nbsp;<span class="op" id="5013139">&amp;&amp;</span>&nbsp;<span class="ident" id="5013142">finfo</span><span class="op" id="5013147">.</span><span class="ident" id="5013148">xmlns</span>&nbsp;<span class="op" id="5013154">!=</span>&nbsp;<span class="ident" id="5013157">start</span><span class="op" id="5013162">.</span><span class="ident" id="5013163">Name</span><span class="op" id="5013167">.</span><span class="ident" id="5013168">Space</span>&nbsp;<span class="op" id="5013174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013179">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013190">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013194">for</span>&nbsp;<span class="ident" id="5013198">j</span>&nbsp;<span class="op" id="5013200">:=</span>&nbsp;<span class="keyword" id="5013203">range</span>&nbsp;<span class="ident" id="5013209">parents</span>&nbsp;<span class="op" id="5013217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013222">if</span>&nbsp;<span class="ident" id="5013225">parents</span><span class="op" id="5013232">[</span><span class="ident" id="5013233">j</span><span class="op" id="5013234">]</span>&nbsp;<span class="op" id="5013236">!=</span>&nbsp;<span class="ident" id="5013239">finfo</span><span class="op" id="5013244">.</span><span class="ident" id="5013245">parents</span><span class="op" id="5013252">[</span><span class="ident" id="5013253">j</span><span class="op" id="5013254">]</span>&nbsp;<span class="op" id="5013256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013262">continue</span>&nbsp;<span class="ident" id="5013271">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013283">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013287">if</span>&nbsp;<span class="builtinfunc" id="5013290">len</span><span class="op" id="5013293">(</span><span class="ident" id="5013294">finfo</span><span class="op" id="5013299">.</span><span class="ident" id="5013300">parents</span><span class="op" id="5013307">)</span>&nbsp;<span class="op" id="5013309">==</span>&nbsp;<span class="builtinfunc" id="5013312">len</span><span class="op" id="5013315">(</span><span class="ident" id="5013316">parents</span><span class="op" id="5013323">)</span>&nbsp;<span class="op" id="5013325">&amp;&amp;</span>&nbsp;<span class="ident" id="5013328">finfo</span><span class="op" id="5013333">.</span><span class="ident" id="5013334">name</span>&nbsp;<span class="op" id="5013339">==</span>&nbsp;<span class="ident" id="5013342">start</span><span class="op" id="5013347">.</span><span class="ident" id="5013348">Name</span><span class="op" id="5013352">.</span><span class="ident" id="5013353">Local</span>&nbsp;<span class="op" id="5013359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013364">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013413">return</span>&nbsp;<span class="builtintype" id="5013420">true</span><span class="op" id="5013424">,</span>&nbsp;<span class="ident" id="5013426">p</span><span class="op" id="5013427">.</span><span class="ident" id="5013428">unmarshal</span><span class="op" id="5013437">(</span><span class="ident" id="5013438">finfo</span><span class="op" id="5013443">.</span><span class="ident" id="5013444">value</span><span class="op" id="5013449">(</span><span class="ident" id="5013450">sv</span><span class="op" id="5013452">)</span><span class="op" id="5013453">,</span>&nbsp;<span class="ident" id="5013455">start</span><span class="op" id="5013460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013468">if</span>&nbsp;<span class="builtinfunc" id="5013471">len</span><span class="op" id="5013474">(</span><span class="ident" id="5013475">finfo</span><span class="op" id="5013480">.</span><span class="ident" id="5013481">parents</span><span class="op" id="5013488">)</span>&nbsp;<span class="op" id="5013490">&gt;</span>&nbsp;<span class="builtinfunc" id="5013492">len</span><span class="op" id="5013495">(</span><span class="ident" id="5013496">parents</span><span class="op" id="5013503">)</span>&nbsp;<span class="op" id="5013505">&amp;&amp;</span>&nbsp;<span class="ident" id="5013508">finfo</span><span class="op" id="5013513">.</span><span class="ident" id="5013514">parents</span><span class="op" id="5013521">[</span><span class="builtinfunc" id="5013522">len</span><span class="op" id="5013525">(</span><span class="ident" id="5013526">parents</span><span class="op" id="5013533">)</span><span class="op" id="5013534">]</span>&nbsp;<span class="op" id="5013536">==</span>&nbsp;<span class="ident" id="5013539">start</span><span class="op" id="5013544">.</span><span class="ident" id="5013545">Name</span><span class="op" id="5013549">.</span><span class="ident" id="5013550">Local</span>&nbsp;<span class="op" id="5013556">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013561">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013614">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013670">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5013711">recurse</span>&nbsp;<span class="op" id="5013719">=</span>&nbsp;<span class="builtintype" id="5013721">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013730">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013778">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5013811">parents</span>&nbsp;<span class="op" id="5013819">=</span>&nbsp;<span class="ident" id="5013821">finfo</span><span class="op" id="5013826">.</span><span class="ident" id="5013827">parents</span><span class="op" id="5013834">[</span><span class="op" id="5013835">:</span><span class="builtinfunc" id="5013836">len</span><span class="op" id="5013839">(</span><span class="ident" id="5013840">parents</span><span class="op" id="5013847">)</span><span class="op" id="5013848">+</span><span class="num" id="5013849">1</span><span class="op" id="5013850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013855">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013863">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013869">if</span>&nbsp;<span class="op" id="5013872">!</span><span class="ident" id="5013873">recurse</span>&nbsp;<span class="op" id="5013881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013885">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5013929">return</span>&nbsp;<span class="builtintype" id="5013936">false</span><span class="op" id="5013941">,</span>&nbsp;<span class="ident" id="5013943">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5013948">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5013951">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5014013">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5014074">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014122">for</span>&nbsp;<span class="op" id="5014126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014130">var</span>&nbsp;<span class="ident" id="5014134">tok</span>&nbsp;<span class="ident" id="5014138">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5014146">tok</span><span class="op" id="5014149">,</span>&nbsp;<span class="ident" id="5014151">err</span>&nbsp;<span class="op" id="5014155">=</span>&nbsp;<span class="ident" id="5014157">p</span><span class="op" id="5014158">.</span><span class="ident" id="5014159">Token</span><span class="op" id="5014164">(</span><span class="op" id="5014165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014169">if</span>&nbsp;<span class="ident" id="5014172">err</span>&nbsp;<span class="op" id="5014176">!=</span>&nbsp;<span class="ident" id="5014179">nil</span>&nbsp;<span class="op" id="5014183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014188">return</span>&nbsp;<span class="builtintype" id="5014195">true</span><span class="op" id="5014199">,</span>&nbsp;<span class="ident" id="5014201">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014211">switch</span>&nbsp;<span class="ident" id="5014218">t</span>&nbsp;<span class="op" id="5014220">:=</span>&nbsp;<span class="ident" id="5014223">tok</span><span class="op" id="5014226">.</span><span class="op" id="5014227">(</span><span class="keyword" id="5014228">type</span><span class="op" id="5014232">)</span>&nbsp;<span class="op" id="5014234">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014238">case</span>&nbsp;<span class="ident" id="5014243">StartElement</span><span class="op" id="5014255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5014260">consumed2</span><span class="op" id="5014269">,</span>&nbsp;<span class="ident" id="5014271">err</span>&nbsp;<span class="op" id="5014275">:=</span>&nbsp;<span class="ident" id="5014278">p</span><span class="op" id="5014279">.</span><span class="ident" id="5014280">unmarshalPath</span><span class="op" id="5014293">(</span><span class="ident" id="5014294">tinfo</span><span class="op" id="5014299">,</span>&nbsp;<span class="ident" id="5014301">sv</span><span class="op" id="5014303">,</span>&nbsp;<span class="ident" id="5014305">parents</span><span class="op" id="5014312">,</span>&nbsp;<span class="op" id="5014314">&amp;</span><span class="ident" id="5014315">t</span><span class="op" id="5014316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014321">if</span>&nbsp;<span class="ident" id="5014324">err</span>&nbsp;<span class="op" id="5014328">!=</span>&nbsp;<span class="ident" id="5014331">nil</span>&nbsp;<span class="op" id="5014335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014341">return</span>&nbsp;<span class="builtintype" id="5014348">true</span><span class="op" id="5014352">,</span>&nbsp;<span class="ident" id="5014354">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014361">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014366">if</span>&nbsp;<span class="op" id="5014369">!</span><span class="ident" id="5014370">consumed2</span>&nbsp;<span class="op" id="5014380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014386">if</span>&nbsp;<span class="ident" id="5014389">err</span>&nbsp;<span class="op" id="5014393">:=</span>&nbsp;<span class="ident" id="5014396">p</span><span class="op" id="5014397">.</span><span class="ident" id="5014398">Skip</span><span class="op" id="5014402">(</span><span class="op" id="5014403">)</span><span class="op" id="5014404">;</span>&nbsp;<span class="ident" id="5014406">err</span>&nbsp;<span class="op" id="5014410">!=</span>&nbsp;<span class="ident" id="5014413">nil</span>&nbsp;<span class="op" id="5014417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014424">return</span>&nbsp;<span class="builtintype" id="5014431">true</span><span class="op" id="5014435">,</span>&nbsp;<span class="ident" id="5014437">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014450">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014454">case</span>&nbsp;<span class="ident" id="5014459">EndElement</span><span class="op" id="5014469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014474">return</span>&nbsp;<span class="builtintype" id="5014481">true</span><span class="op" id="5014485">,</span>&nbsp;<span class="ident" id="5014487">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014496">}</span><br>
<span class="lineno"></span><span class="op" id="5014498">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5014501">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="5014560">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="5014620">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5014688">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="5014715">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5014779">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="5014845">func</span>&nbsp;<span class="op" id="5014850">(</span><span class="ident" id="5014851">d</span>&nbsp;<span class="op" id="5014853">*</span><span class="ident" id="5014854">Decoder</span><span class="op" id="5014861">)</span>&nbsp;<span class="ident" id="5014863">Skip</span><span class="op" id="5014867">(</span><span class="op" id="5014868">)</span>&nbsp;<span class="builtintype" id="5014870">error</span>&nbsp;<span class="op" id="5014876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014879">for</span>&nbsp;<span class="op" id="5014883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5014887">tok</span><span class="op" id="5014890">,</span>&nbsp;<span class="ident" id="5014892">err</span>&nbsp;<span class="op" id="5014896">:=</span>&nbsp;<span class="ident" id="5014899">d</span><span class="op" id="5014900">.</span><span class="ident" id="5014901">Token</span><span class="op" id="5014906">(</span><span class="op" id="5014907">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014911">if</span>&nbsp;<span class="ident" id="5014914">err</span>&nbsp;<span class="op" id="5014918">!=</span>&nbsp;<span class="ident" id="5014921">nil</span>&nbsp;<span class="op" id="5014925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014930">return</span>&nbsp;<span class="ident" id="5014937">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5014943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014947">switch</span>&nbsp;<span class="ident" id="5014954">tok</span><span class="op" id="5014957">.</span><span class="op" id="5014958">(</span><span class="keyword" id="5014959">type</span><span class="op" id="5014963">)</span>&nbsp;<span class="op" id="5014965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014969">case</span>&nbsp;<span class="ident" id="5014974">StartElement</span><span class="op" id="5014986">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5014991">if</span>&nbsp;<span class="ident" id="5014994">err</span>&nbsp;<span class="op" id="5014998">:=</span>&nbsp;<span class="ident" id="5015001">d</span><span class="op" id="5015002">.</span><span class="ident" id="5015003">Skip</span><span class="op" id="5015007">(</span><span class="op" id="5015008">)</span><span class="op" id="5015009">;</span>&nbsp;<span class="ident" id="5015011">err</span>&nbsp;<span class="op" id="5015015">!=</span>&nbsp;<span class="ident" id="5015018">nil</span>&nbsp;<span class="op" id="5015022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5015028">return</span>&nbsp;<span class="ident" id="5015035">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5015042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5015046">case</span>&nbsp;<span class="ident" id="5015051">EndElement</span><span class="op" id="5015061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5015066">return</span>&nbsp;<span class="ident" id="5015073">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5015079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5015082">}</span><br>
<span class="lineno"></span><span class="op" id="5015084">}</span>
</div>
</body>
</html>
