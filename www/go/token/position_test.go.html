<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8503976">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8504031">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8504085">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8504136">package</span>&nbsp;<span class="ident" id="8504144">token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8504151">import</span>&nbsp;<span class="op" id="8504158">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8504161">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8504168">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8504181">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8504189">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8504199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8504202">func</span>&nbsp;<span class="ident" id="8504207">checkPos</span><span class="op" id="8504215">(</span><span class="ident" id="8504216">t</span>&nbsp;<span class="op" id="8504218">*</span><span class="ident" id="8504219"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8504226">.</span><span class="ident" id="8504227">T</span><span class="op" id="8504228">,</span>&nbsp;<span class="ident" id="8504230">msg</span>&nbsp;<span class="builtintype" id="8504234">string</span><span class="op" id="8504240">,</span>&nbsp;<span class="ident" id="8504242">got</span><span class="op" id="8504245">,</span>&nbsp;<span class="ident" id="8504247">want</span>&nbsp;<span class="ident" id="8504252"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8504260">)</span>&nbsp;<span class="op" id="8504262">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504265">if</span>&nbsp;<span class="ident" id="8504268"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504271">.</span><span class="ident" id="8504272">Filename</span>&nbsp;<span class="op" id="8504281">!=</span>&nbsp;<span class="ident" id="8504284"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504288">.</span><span class="ident" id="8504289">Filename</span>&nbsp;<span class="op" id="8504298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504302"><a href="/go/token/position_test.go.html#8504216">t</a></span><span class="op" id="8504303">.</span><span class="ident" id="8504304">Errorf</span><span class="op" id="8504310">(</span><span class="string" id="8504311">&#34;%s:&nbsp;got&nbsp;filename&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8504343">,</span>&nbsp;<span class="ident" id="8504345"><a href="/go/token/position_test.go.html#8504230">msg</a></span><span class="op" id="8504348">,</span>&nbsp;<span class="ident" id="8504350"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504353">.</span><span class="ident" id="8504354">Filename</span><span class="op" id="8504362">,</span>&nbsp;<span class="ident" id="8504364"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504368">.</span><span class="ident" id="8504369">Filename</span><span class="op" id="8504377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504383">if</span>&nbsp;<span class="ident" id="8504386"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504389">.</span><span class="ident" id="8504390">Offset</span>&nbsp;<span class="op" id="8504397">!=</span>&nbsp;<span class="ident" id="8504400"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504404">.</span><span class="ident" id="8504405">Offset</span>&nbsp;<span class="op" id="8504412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504416"><a href="/go/token/position_test.go.html#8504216">t</a></span><span class="op" id="8504417">.</span><span class="ident" id="8504418">Errorf</span><span class="op" id="8504424">(</span><span class="string" id="8504425">&#34;%s:&nbsp;got&nbsp;offset&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8504455">,</span>&nbsp;<span class="ident" id="8504457"><a href="/go/token/position_test.go.html#8504230">msg</a></span><span class="op" id="8504460">,</span>&nbsp;<span class="ident" id="8504462"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504465">.</span><span class="ident" id="8504466">Offset</span><span class="op" id="8504472">,</span>&nbsp;<span class="ident" id="8504474"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504478">.</span><span class="ident" id="8504479">Offset</span><span class="op" id="8504485">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504491">if</span>&nbsp;<span class="ident" id="8504494"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504497">.</span><span class="ident" id="8504498">Line</span>&nbsp;<span class="op" id="8504503">!=</span>&nbsp;<span class="ident" id="8504506"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504510">.</span><span class="ident" id="8504511">Line</span>&nbsp;<span class="op" id="8504516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504520"><a href="/go/token/position_test.go.html#8504216">t</a></span><span class="op" id="8504521">.</span><span class="ident" id="8504522">Errorf</span><span class="op" id="8504528">(</span><span class="string" id="8504529">&#34;%s:&nbsp;got&nbsp;line&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8504557">,</span>&nbsp;<span class="ident" id="8504559"><a href="/go/token/position_test.go.html#8504230">msg</a></span><span class="op" id="8504562">,</span>&nbsp;<span class="ident" id="8504564"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504567">.</span><span class="ident" id="8504568">Line</span><span class="op" id="8504572">,</span>&nbsp;<span class="ident" id="8504574"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504578">.</span><span class="ident" id="8504579">Line</span><span class="op" id="8504583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504589">if</span>&nbsp;<span class="ident" id="8504592"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504595">.</span><span class="ident" id="8504596">Column</span>&nbsp;<span class="op" id="8504603">!=</span>&nbsp;<span class="ident" id="8504606"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504610">.</span><span class="ident" id="8504611">Column</span>&nbsp;<span class="op" id="8504618">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504622"><a href="/go/token/position_test.go.html#8504216">t</a></span><span class="op" id="8504623">.</span><span class="ident" id="8504624">Errorf</span><span class="op" id="8504630">(</span><span class="string" id="8504631">&#34;%s:&nbsp;got&nbsp;column&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8504661">,</span>&nbsp;<span class="ident" id="8504663"><a href="/go/token/position_test.go.html#8504230">msg</a></span><span class="op" id="8504666">,</span>&nbsp;<span class="ident" id="8504668"><a href="/go/token/position_test.go.html#8504242">got</a></span><span class="op" id="8504671">.</span><span class="ident" id="8504672">Column</span><span class="op" id="8504678">,</span>&nbsp;<span class="ident" id="8504680"><a href="/go/token/position_test.go.html#8504247">want</a></span><span class="op" id="8504684">.</span><span class="ident" id="8504685">Column</span><span class="op" id="8504691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504694">}</span><br>
<span class="lineno"></span><span class="op" id="8504696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8504699">func</span>&nbsp;<span class="ident" id="8504704">TestNoPos</span><span class="op" id="8504713">(</span><span class="ident" id="8504714">t</span>&nbsp;<span class="op" id="8504716">*</span><span class="ident" id="8504717"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8504724">.</span><span class="ident" id="8504725">T</span><span class="op" id="8504726">)</span>&nbsp;<span class="op" id="8504728">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504731">if</span>&nbsp;<span class="ident" id="8504734"><a href="/go/token/position.go.html#5934767">NoPos</a></span><span class="op" id="8504739">.</span><span class="ident" id="8504740">IsValid</span><span class="op" id="8504747">(</span><span class="op" id="8504748">)</span>&nbsp;<span class="op" id="8504750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504754"><a href="/go/token/position_test.go.html#8504714">t</a></span><span class="op" id="8504755">.</span><span class="ident" id="8504756">Errorf</span><span class="op" id="8504762">(</span><span class="string" id="8504763">&#34;NoPos&nbsp;should&nbsp;not&nbsp;be&nbsp;valid&#34;</span><span class="op" id="8504790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504796">var</span>&nbsp;<span class="ident" id="8504800">fset</span>&nbsp;<span class="op" id="8504805">*</span><span class="ident" id="8504806"><a href="/go/token/position.go.html#5942060">FileSet</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504815"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8504823">(</span><span class="ident" id="8504824"><a href="/go/token/position_test.go.html#8504714">t</a></span><span class="op" id="8504825">,</span>&nbsp;<span class="string" id="8504827">&#34;nil&nbsp;NoPos&#34;</span><span class="op" id="8504838">,</span>&nbsp;<span class="ident" id="8504840"><a href="/go/token/position_test.go.html#8504800">fset</a></span><span class="op" id="8504844">.</span><span class="ident" id="8504845">Position</span><span class="op" id="8504853">(</span><span class="ident" id="8504854"><a href="/go/token/position.go.html#5934767">NoPos</a></span><span class="op" id="8504859">)</span><span class="op" id="8504860">,</span>&nbsp;<span class="ident" id="8504862"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8504870">{</span><span class="op" id="8504871">}</span><span class="op" id="8504872">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504875"><a href="/go/token/position_test.go.html#8504800">fset</a></span>&nbsp;<span class="op" id="8504880">=</span>&nbsp;<span class="ident" id="8504882"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8504892">(</span><span class="op" id="8504893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504896"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8504904">(</span><span class="ident" id="8504905"><a href="/go/token/position_test.go.html#8504714">t</a></span><span class="op" id="8504906">,</span>&nbsp;<span class="string" id="8504908">&#34;fset&nbsp;NoPos&#34;</span><span class="op" id="8504920">,</span>&nbsp;<span class="ident" id="8504922"><a href="/go/token/position_test.go.html#8504800">fset</a></span><span class="op" id="8504926">.</span><span class="ident" id="8504927">Position</span><span class="op" id="8504935">(</span><span class="ident" id="8504936"><a href="/go/token/position.go.html#5934767">NoPos</a></span><span class="op" id="8504941">)</span><span class="op" id="8504942">,</span>&nbsp;<span class="ident" id="8504944"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8504952">{</span><span class="op" id="8504953">}</span><span class="op" id="8504954">)</span><br>
<span class="lineno"></span><span class="op" id="8504956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8504959">var</span>&nbsp;<span class="ident" id="8504963">tests</span>&nbsp;<span class="op" id="8504969">=</span>&nbsp;<span class="op" id="8504971">[</span><span class="op" id="8504972">]</span><span class="keyword" id="8504973">struct</span>&nbsp;<span class="op" id="8504980">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504983">filename</span>&nbsp;<span class="builtintype" id="8504992">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505000">source</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8505009">[</span><span class="op" id="8505010">]</span><span class="builtintype" id="8505011">byte</span>&nbsp;<span class="comment" id="8505016">//&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505031">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8505040">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505045">lines</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8505054">[</span><span class="op" id="8505055">]</span><span class="builtintype" id="8505056">int</span><br>
<span class="lineno"></span><span class="op" id="8505060">}</span><span class="op" id="8505061">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505064">{</span><span class="string" id="8505065">&#34;a&#34;</span><span class="op" id="8505068">,</span>&nbsp;<span class="op" id="8505070">[</span><span class="op" id="8505071">]</span><span class="builtintype" id="8505072">byte</span><span class="op" id="8505076">{</span><span class="op" id="8505077">}</span><span class="op" id="8505078">,</span>&nbsp;<span class="num" id="8505080">0</span><span class="op" id="8505081">,</span>&nbsp;<span class="op" id="8505083">[</span><span class="op" id="8505084">]</span><span class="builtintype" id="8505085">int</span><span class="op" id="8505088">{</span><span class="op" id="8505089">}</span><span class="op" id="8505090">}</span><span class="op" id="8505091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505094">{</span><span class="string" id="8505095">&#34;b&#34;</span><span class="op" id="8505098">,</span>&nbsp;<span class="op" id="8505100">[</span><span class="op" id="8505101">]</span><span class="builtintype" id="8505102">byte</span><span class="op" id="8505106">(</span><span class="string" id="8505107">&#34;01234&#34;</span><span class="op" id="8505114">)</span><span class="op" id="8505115">,</span>&nbsp;<span class="num" id="8505117">5</span><span class="op" id="8505118">,</span>&nbsp;<span class="op" id="8505120">[</span><span class="op" id="8505121">]</span><span class="builtintype" id="8505122">int</span><span class="op" id="8505125">{</span><span class="num" id="8505126">0</span><span class="op" id="8505127">}</span><span class="op" id="8505128">}</span><span class="op" id="8505129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505132">{</span><span class="string" id="8505133">&#34;c&#34;</span><span class="op" id="8505136">,</span>&nbsp;<span class="op" id="8505138">[</span><span class="op" id="8505139">]</span><span class="builtintype" id="8505140">byte</span><span class="op" id="8505144">(</span><span class="string" id="8505145">&#34;\n\n\n\n\n\n\n\n\n&#34;</span><span class="op" id="8505165">)</span><span class="op" id="8505166">,</span>&nbsp;<span class="num" id="8505168">9</span><span class="op" id="8505169">,</span>&nbsp;<span class="op" id="8505171">[</span><span class="op" id="8505172">]</span><span class="builtintype" id="8505173">int</span><span class="op" id="8505176">{</span><span class="num" id="8505177">0</span><span class="op" id="8505178">,</span>&nbsp;<span class="num" id="8505180">1</span><span class="op" id="8505181">,</span>&nbsp;<span class="num" id="8505183">2</span><span class="op" id="8505184">,</span>&nbsp;<span class="num" id="8505186">3</span><span class="op" id="8505187">,</span>&nbsp;<span class="num" id="8505189">4</span><span class="op" id="8505190">,</span>&nbsp;<span class="num" id="8505192">5</span><span class="op" id="8505193">,</span>&nbsp;<span class="num" id="8505195">6</span><span class="op" id="8505196">,</span>&nbsp;<span class="num" id="8505198">7</span><span class="op" id="8505199">,</span>&nbsp;<span class="num" id="8505201">8</span><span class="op" id="8505202">}</span><span class="op" id="8505203">}</span><span class="op" id="8505204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505207">{</span><span class="string" id="8505208">&#34;d&#34;</span><span class="op" id="8505211">,</span>&nbsp;<span class="ident" id="8505213">nil</span><span class="op" id="8505216">,</span>&nbsp;<span class="num" id="8505218">100</span><span class="op" id="8505221">,</span>&nbsp;<span class="op" id="8505223">[</span><span class="op" id="8505224">]</span><span class="builtintype" id="8505225">int</span><span class="op" id="8505228">{</span><span class="num" id="8505229">0</span><span class="op" id="8505230">,</span>&nbsp;<span class="num" id="8505232">5</span><span class="op" id="8505233">,</span>&nbsp;<span class="num" id="8505235">10</span><span class="op" id="8505237">,</span>&nbsp;<span class="num" id="8505239">20</span><span class="op" id="8505241">,</span>&nbsp;<span class="num" id="8505243">30</span><span class="op" id="8505245">,</span>&nbsp;<span class="num" id="8505247">70</span><span class="op" id="8505249">,</span>&nbsp;<span class="num" id="8505251">71</span><span class="op" id="8505253">,</span>&nbsp;<span class="num" id="8505255">72</span><span class="op" id="8505257">,</span>&nbsp;<span class="num" id="8505259">80</span><span class="op" id="8505261">,</span>&nbsp;<span class="num" id="8505263">85</span><span class="op" id="8505265">,</span>&nbsp;<span class="num" id="8505267">90</span><span class="op" id="8505269">,</span>&nbsp;<span class="num" id="8505271">99</span><span class="op" id="8505273">}</span><span class="op" id="8505274">}</span><span class="op" id="8505275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505278">{</span><span class="string" id="8505279">&#34;e&#34;</span><span class="op" id="8505282">,</span>&nbsp;<span class="ident" id="8505284">nil</span><span class="op" id="8505287">,</span>&nbsp;<span class="num" id="8505289">777</span><span class="op" id="8505292">,</span>&nbsp;<span class="op" id="8505294">[</span><span class="op" id="8505295">]</span><span class="builtintype" id="8505296">int</span><span class="op" id="8505299">{</span><span class="num" id="8505300">0</span><span class="op" id="8505301">,</span>&nbsp;<span class="num" id="8505303">80</span><span class="op" id="8505305">,</span>&nbsp;<span class="num" id="8505307">100</span><span class="op" id="8505310">,</span>&nbsp;<span class="num" id="8505312">120</span><span class="op" id="8505315">,</span>&nbsp;<span class="num" id="8505317">130</span><span class="op" id="8505320">,</span>&nbsp;<span class="num" id="8505322">180</span><span class="op" id="8505325">,</span>&nbsp;<span class="num" id="8505327">267</span><span class="op" id="8505330">,</span>&nbsp;<span class="num" id="8505332">455</span><span class="op" id="8505335">,</span>&nbsp;<span class="num" id="8505337">500</span><span class="op" id="8505340">,</span>&nbsp;<span class="num" id="8505342">567</span><span class="op" id="8505345">,</span>&nbsp;<span class="num" id="8505347">620</span><span class="op" id="8505350">}</span><span class="op" id="8505351">}</span><span class="op" id="8505352">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505355">{</span><span class="string" id="8505356">&#34;f&#34;</span><span class="op" id="8505359">,</span>&nbsp;<span class="op" id="8505361">[</span><span class="op" id="8505362">]</span><span class="builtintype" id="8505363">byte</span><span class="op" id="8505367">(</span><span class="string" id="8505368">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;&#34;</span><span class="op" id="8505397">)</span><span class="op" id="8505398">,</span>&nbsp;<span class="num" id="8505400">23</span><span class="op" id="8505402">,</span>&nbsp;<span class="op" id="8505404">[</span><span class="op" id="8505405">]</span><span class="builtintype" id="8505406">int</span><span class="op" id="8505409">{</span><span class="num" id="8505410">0</span><span class="op" id="8505411">,</span>&nbsp;<span class="num" id="8505413">10</span><span class="op" id="8505415">,</span>&nbsp;<span class="num" id="8505417">11</span><span class="op" id="8505419">}</span><span class="op" id="8505420">}</span><span class="op" id="8505421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505424">{</span><span class="string" id="8505425">&#34;g&#34;</span><span class="op" id="8505428">,</span>&nbsp;<span class="op" id="8505430">[</span><span class="op" id="8505431">]</span><span class="builtintype" id="8505432">byte</span><span class="op" id="8505436">(</span><span class="string" id="8505437">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;\n&#34;</span><span class="op" id="8505468">)</span><span class="op" id="8505469">,</span>&nbsp;<span class="num" id="8505471">24</span><span class="op" id="8505473">,</span>&nbsp;<span class="op" id="8505475">[</span><span class="op" id="8505476">]</span><span class="builtintype" id="8505477">int</span><span class="op" id="8505480">{</span><span class="num" id="8505481">0</span><span class="op" id="8505482">,</span>&nbsp;<span class="num" id="8505484">10</span><span class="op" id="8505486">,</span>&nbsp;<span class="num" id="8505488">11</span><span class="op" id="8505490">}</span><span class="op" id="8505491">}</span><span class="op" id="8505492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505495">{</span><span class="string" id="8505496">&#34;h&#34;</span><span class="op" id="8505499">,</span>&nbsp;<span class="op" id="8505501">[</span><span class="op" id="8505502">]</span><span class="builtintype" id="8505503">byte</span><span class="op" id="8505507">(</span><span class="string" id="8505508">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;\n&nbsp;&#34;</span><span class="op" id="8505540">)</span><span class="op" id="8505541">,</span>&nbsp;<span class="num" id="8505543">25</span><span class="op" id="8505545">,</span>&nbsp;<span class="op" id="8505547">[</span><span class="op" id="8505548">]</span><span class="builtintype" id="8505549">int</span><span class="op" id="8505552">{</span><span class="num" id="8505553">0</span><span class="op" id="8505554">,</span>&nbsp;<span class="num" id="8505556">10</span><span class="op" id="8505558">,</span>&nbsp;<span class="num" id="8505560">11</span><span class="op" id="8505562">,</span>&nbsp;<span class="num" id="8505564">24</span><span class="op" id="8505566">}</span><span class="op" id="8505567">}</span><span class="op" id="8505568">,</span><br>
<span class="lineno"></span><span class="op" id="8505570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="8505573">func</span>&nbsp;<span class="ident" id="8505578">linecol</span><span class="op" id="8505585">(</span><span class="ident" id="8505586">lines</span>&nbsp;<span class="op" id="8505592">[</span><span class="op" id="8505593">]</span><span class="builtintype" id="8505594">int</span><span class="op" id="8505597">,</span>&nbsp;<span class="ident" id="8505599">offs</span>&nbsp;<span class="builtintype" id="8505604">int</span><span class="op" id="8505607">)</span>&nbsp;<span class="op" id="8505609">(</span><span class="builtintype" id="8505610">int</span><span class="op" id="8505613">,</span>&nbsp;<span class="builtintype" id="8505615">int</span><span class="op" id="8505618">)</span>&nbsp;<span class="op" id="8505620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505623">prevLineOffs</span>&nbsp;<span class="op" id="8505636">:=</span>&nbsp;<span class="num" id="8505639">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505642">for</span>&nbsp;<span class="ident" id="8505646">line</span><span class="op" id="8505650">,</span>&nbsp;<span class="ident" id="8505652">lineOffs</span>&nbsp;<span class="op" id="8505661">:=</span>&nbsp;<span class="keyword" id="8505664">range</span>&nbsp;<span class="ident" id="8505670"><a href="/go/token/position_test.go.html#8505586">lines</a></span>&nbsp;<span class="op" id="8505676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505680">if</span>&nbsp;<span class="ident" id="8505683"><a href="/go/token/position_test.go.html#8505599">offs</a></span>&nbsp;<span class="op" id="8505688">&lt;</span>&nbsp;<span class="ident" id="8505690"><a href="/go/token/position_test.go.html#8505652">lineOffs</a></span>&nbsp;<span class="op" id="8505699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505704">return</span>&nbsp;<span class="ident" id="8505711"><a href="/go/token/position_test.go.html#8505646">line</a></span><span class="op" id="8505715">,</span>&nbsp;<span class="ident" id="8505717"><a href="/go/token/position_test.go.html#8505599">offs</a></span>&nbsp;<span class="op" id="8505722">-</span>&nbsp;<span class="ident" id="8505724"><a href="/go/token/position_test.go.html#8505623">prevLineOffs</a></span>&nbsp;<span class="op" id="8505737">+</span>&nbsp;<span class="num" id="8505739">1</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505747"><a href="/go/token/position_test.go.html#8505623">prevLineOffs</a></span>&nbsp;<span class="op" id="8505760">=</span>&nbsp;<span class="ident" id="8505762"><a href="/go/token/position_test.go.html#8505652">lineOffs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505775">return</span>&nbsp;<span class="builtinfunc" id="8505782">len</span><span class="op" id="8505785">(</span><span class="ident" id="8505786"><a href="/go/token/position_test.go.html#8505586">lines</a></span><span class="op" id="8505791">)</span><span class="op" id="8505792">,</span>&nbsp;<span class="ident" id="8505794"><a href="/go/token/position_test.go.html#8505599">offs</a></span>&nbsp;<span class="op" id="8505799">-</span>&nbsp;<span class="ident" id="8505801"><a href="/go/token/position_test.go.html#8505623">prevLineOffs</a></span>&nbsp;<span class="op" id="8505814">+</span>&nbsp;<span class="num" id="8505816">1</span><br>
<span class="lineno"></span><span class="op" id="8505818">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8505821">func</span>&nbsp;<span class="ident" id="8505826">verifyPositions</span><span class="op" id="8505841">(</span><span class="ident" id="8505842">t</span>&nbsp;<span class="op" id="8505844">*</span><span class="ident" id="8505845"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8505852">.</span><span class="ident" id="8505853">T</span><span class="op" id="8505854">,</span>&nbsp;<span class="ident" id="8505856">fset</span>&nbsp;<span class="op" id="8505861">*</span><span class="ident" id="8505862"><a href="/go/token/position.go.html#5942060">FileSet</a></span><span class="op" id="8505869">,</span>&nbsp;<span class="ident" id="8505871">f</span>&nbsp;<span class="op" id="8505873">*</span><span class="ident" id="8505874"><a href="/go/token/position.go.html#5935090">File</a></span><span class="op" id="8505878">,</span>&nbsp;<span class="ident" id="8505880">lines</span>&nbsp;<span class="op" id="8505886">[</span><span class="op" id="8505887">]</span><span class="builtintype" id="8505888">int</span><span class="op" id="8505891">)</span>&nbsp;<span class="op" id="8505893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505896">for</span>&nbsp;<span class="ident" id="8505900">offs</span>&nbsp;<span class="op" id="8505905">:=</span>&nbsp;<span class="num" id="8505908">0</span><span class="op" id="8505909">;</span>&nbsp;<span class="ident" id="8505911"><a href="/go/token/position_test.go.html#8505900">offs</a></span>&nbsp;<span class="op" id="8505916">&lt;</span>&nbsp;<span class="ident" id="8505918"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8505919">.</span><span class="ident" id="8505920">Size</span><span class="op" id="8505924">(</span><span class="op" id="8505925">)</span><span class="op" id="8505926">;</span>&nbsp;<span class="ident" id="8505928"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8505932">++</span>&nbsp;<span class="op" id="8505935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505939">p</span>&nbsp;<span class="op" id="8505941">:=</span>&nbsp;<span class="ident" id="8505944"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8505945">.</span><span class="ident" id="8505946">Pos</span><span class="op" id="8505949">(</span><span class="ident" id="8505950"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8505954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505958">offs2</span>&nbsp;<span class="op" id="8505964">:=</span>&nbsp;<span class="ident" id="8505967"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8505968">.</span><span class="ident" id="8505969">Offset</span><span class="op" id="8505975">(</span><span class="ident" id="8505976"><a href="/go/token/position_test.go.html#8505939">p</a></span><span class="op" id="8505977">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505981">if</span>&nbsp;<span class="ident" id="8505984"><a href="/go/token/position_test.go.html#8505958">offs2</a></span>&nbsp;<span class="op" id="8505990">!=</span>&nbsp;<span class="ident" id="8505993"><a href="/go/token/position_test.go.html#8505900">offs</a></span>&nbsp;<span class="op" id="8505998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506003"><a href="/go/token/position_test.go.html#8505842">t</a></span><span class="op" id="8506004">.</span><span class="ident" id="8506005">Errorf</span><span class="op" id="8506011">(</span><span class="string" id="8506012">&#34;%s,&nbsp;Offset:&nbsp;got&nbsp;offset&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8506048">,</span>&nbsp;<span class="ident" id="8506050"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506051">.</span><span class="ident" id="8506052">Name</span><span class="op" id="8506056">(</span><span class="op" id="8506057">)</span><span class="op" id="8506058">,</span>&nbsp;<span class="ident" id="8506060"><a href="/go/token/position_test.go.html#8505958">offs2</a></span><span class="op" id="8506065">,</span>&nbsp;<span class="ident" id="8506067"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506079">line</span><span class="op" id="8506083">,</span>&nbsp;<span class="ident" id="8506085">col</span>&nbsp;<span class="op" id="8506089">:=</span>&nbsp;<span class="ident" id="8506092"><a href="/go/token/position_test.go.html#8505578">linecol</a></span><span class="op" id="8506099">(</span><span class="ident" id="8506100"><a href="/go/token/position_test.go.html#8505880">lines</a></span><span class="op" id="8506105">,</span>&nbsp;<span class="ident" id="8506107"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506115">msg</span>&nbsp;<span class="op" id="8506119">:=</span>&nbsp;<span class="ident" id="8506122"><a href="/go/token/position_test.go.html#8504161">fmt</a></span><span class="op" id="8506125">.</span><span class="ident" id="8506126">Sprintf</span><span class="op" id="8506133">(</span><span class="string" id="8506134">&#34;%s&nbsp;(offs&nbsp;=&nbsp;%d,&nbsp;p&nbsp;=&nbsp;%d)&#34;</span><span class="op" id="8506158">,</span>&nbsp;<span class="ident" id="8506160"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506161">.</span><span class="ident" id="8506162">Name</span><span class="op" id="8506166">(</span><span class="op" id="8506167">)</span><span class="op" id="8506168">,</span>&nbsp;<span class="ident" id="8506170"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506174">,</span>&nbsp;<span class="ident" id="8506176"><a href="/go/token/position_test.go.html#8505939">p</a></span><span class="op" id="8506177">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506181"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8506189">(</span><span class="ident" id="8506190"><a href="/go/token/position_test.go.html#8505842">t</a></span><span class="op" id="8506191">,</span>&nbsp;<span class="ident" id="8506193"><a href="/go/token/position_test.go.html#8506115">msg</a></span><span class="op" id="8506196">,</span>&nbsp;<span class="ident" id="8506198"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506199">.</span><span class="ident" id="8506200">Position</span><span class="op" id="8506208">(</span><span class="ident" id="8506209"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506210">.</span><span class="ident" id="8506211">Pos</span><span class="op" id="8506214">(</span><span class="ident" id="8506215"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506219">)</span><span class="op" id="8506220">)</span><span class="op" id="8506221">,</span>&nbsp;<span class="ident" id="8506223"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8506231">{</span><span class="ident" id="8506232"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506233">.</span><span class="ident" id="8506234">Name</span><span class="op" id="8506238">(</span><span class="op" id="8506239">)</span><span class="op" id="8506240">,</span>&nbsp;<span class="ident" id="8506242"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506246">,</span>&nbsp;<span class="ident" id="8506248"><a href="/go/token/position_test.go.html#8506079">line</a></span><span class="op" id="8506252">,</span>&nbsp;<span class="ident" id="8506254"><a href="/go/token/position_test.go.html#8506085">col</a></span><span class="op" id="8506257">}</span><span class="op" id="8506258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506262"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8506270">(</span><span class="ident" id="8506271"><a href="/go/token/position_test.go.html#8505842">t</a></span><span class="op" id="8506272">,</span>&nbsp;<span class="ident" id="8506274"><a href="/go/token/position_test.go.html#8506115">msg</a></span><span class="op" id="8506277">,</span>&nbsp;<span class="ident" id="8506279"><a href="/go/token/position_test.go.html#8505856">fset</a></span><span class="op" id="8506283">.</span><span class="ident" id="8506284">Position</span><span class="op" id="8506292">(</span><span class="ident" id="8506293"><a href="/go/token/position_test.go.html#8505939">p</a></span><span class="op" id="8506294">)</span><span class="op" id="8506295">,</span>&nbsp;<span class="ident" id="8506297"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8506305">{</span><span class="ident" id="8506306"><a href="/go/token/position_test.go.html#8505871">f</a></span><span class="op" id="8506307">.</span><span class="ident" id="8506308">Name</span><span class="op" id="8506312">(</span><span class="op" id="8506313">)</span><span class="op" id="8506314">,</span>&nbsp;<span class="ident" id="8506316"><a href="/go/token/position_test.go.html#8505900">offs</a></span><span class="op" id="8506320">,</span>&nbsp;<span class="ident" id="8506322"><a href="/go/token/position_test.go.html#8506079">line</a></span><span class="op" id="8506326">,</span>&nbsp;<span class="ident" id="8506328"><a href="/go/token/position_test.go.html#8506085">col</a></span><span class="op" id="8506331">}</span><span class="op" id="8506332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506335">}</span><br>
<span class="lineno"></span><span class="op" id="8506337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="8506340">func</span>&nbsp;<span class="ident" id="8506345">makeTestSource</span><span class="op" id="8506359">(</span><span class="ident" id="8506360">size</span>&nbsp;<span class="builtintype" id="8506365">int</span><span class="op" id="8506368">,</span>&nbsp;<span class="ident" id="8506370">lines</span>&nbsp;<span class="op" id="8506376">[</span><span class="op" id="8506377">]</span><span class="builtintype" id="8506378">int</span><span class="op" id="8506381">)</span>&nbsp;<span class="op" id="8506383">[</span><span class="op" id="8506384">]</span><span class="builtintype" id="8506385">byte</span>&nbsp;<span class="op" id="8506390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506393">src</span>&nbsp;<span class="op" id="8506397">:=</span>&nbsp;<span class="builtinfunc" id="8506400">make</span><span class="op" id="8506404">(</span><span class="op" id="8506405">[</span><span class="op" id="8506406">]</span><span class="builtintype" id="8506407">byte</span><span class="op" id="8506411">,</span>&nbsp;<span class="ident" id="8506413"><a href="/go/token/position_test.go.html#8506360">size</a></span><span class="op" id="8506417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506420">for</span>&nbsp;<span class="ident" id="8506424">_</span><span class="op" id="8506425">,</span>&nbsp;<span class="ident" id="8506427">offs</span>&nbsp;<span class="op" id="8506432">:=</span>&nbsp;<span class="keyword" id="8506435">range</span>&nbsp;<span class="ident" id="8506441"><a href="/go/token/position_test.go.html#8506370">lines</a></span>&nbsp;<span class="op" id="8506447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506451">if</span>&nbsp;<span class="ident" id="8506454"><a href="/go/token/position_test.go.html#8506427">offs</a></span>&nbsp;<span class="op" id="8506459">&gt;</span>&nbsp;<span class="num" id="8506461">0</span>&nbsp;<span class="op" id="8506463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506468"><a href="/go/token/position_test.go.html#8506393">src</a></span><span class="op" id="8506471">[</span><span class="ident" id="8506472"><a href="/go/token/position_test.go.html#8506427">offs</a></span><span class="op" id="8506476">-</span><span class="num" id="8506477">1</span><span class="op" id="8506478">]</span>&nbsp;<span class="op" id="8506480">=</span>&nbsp;<span class="string" id="8506482">&#39;\n&#39;</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506495">return</span>&nbsp;<span class="ident" id="8506502"><a href="/go/token/position_test.go.html#8506393">src</a></span><br>
<span class="lineno"></span><span class="op" id="8506506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="8506509">func</span>&nbsp;<span class="ident" id="8506514">TestPositions</span><span class="op" id="8506527">(</span><span class="ident" id="8506528">t</span>&nbsp;<span class="op" id="8506530">*</span><span class="ident" id="8506531"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8506538">.</span><span class="ident" id="8506539">T</span><span class="op" id="8506540">)</span>&nbsp;<span class="op" id="8506542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506545">const</span>&nbsp;<span class="ident" id="8506551">delta</span>&nbsp;<span class="op" id="8506557">=</span>&nbsp;<span class="num" id="8506559">7</span>&nbsp;<span class="comment" id="8506561">//&nbsp;a&nbsp;non-zero&nbsp;base&nbsp;offset&nbsp;increment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506598">fset</span>&nbsp;<span class="op" id="8506603">:=</span>&nbsp;<span class="ident" id="8506606"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8506616">(</span><span class="op" id="8506617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506620">for</span>&nbsp;<span class="ident" id="8506624">_</span><span class="op" id="8506625">,</span>&nbsp;<span class="ident" id="8506627">test</span>&nbsp;<span class="op" id="8506632">:=</span>&nbsp;<span class="keyword" id="8506635">range</span>&nbsp;<span class="ident" id="8506641"><a href="/go/token/position_test.go.html#8504963">tests</a></span>&nbsp;<span class="op" id="8506647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8506651">//&nbsp;verify&nbsp;consistency&nbsp;of&nbsp;test&nbsp;case</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506688">if</span>&nbsp;<span class="ident" id="8506691"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506695">.</span><span class="ident" id="8506696">source</span>&nbsp;<span class="op" id="8506703">!=</span>&nbsp;<span class="ident" id="8506706">nil</span>&nbsp;<span class="op" id="8506710">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="8506713">len</span><span class="op" id="8506716">(</span><span class="ident" id="8506717"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506721">.</span><span class="ident" id="8506722">source</span><span class="op" id="8506728">)</span>&nbsp;<span class="op" id="8506730">!=</span>&nbsp;<span class="ident" id="8506733"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506737">.</span><span class="ident" id="8506738">size</span>&nbsp;<span class="op" id="8506743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506748"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8506749">.</span><span class="ident" id="8506750">Errorf</span><span class="op" id="8506756">(</span><span class="string" id="8506757">&#34;%s:&nbsp;inconsistent&nbsp;test&nbsp;case:&nbsp;got&nbsp;file&nbsp;size&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8506812">,</span>&nbsp;<span class="ident" id="8506814"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506818">.</span><span class="ident" id="8506819">filename</span><span class="op" id="8506827">,</span>&nbsp;<span class="builtinfunc" id="8506829">len</span><span class="op" id="8506832">(</span><span class="ident" id="8506833"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506837">.</span><span class="ident" id="8506838">source</span><span class="op" id="8506844">)</span><span class="op" id="8506845">,</span>&nbsp;<span class="ident" id="8506847"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506851">.</span><span class="ident" id="8506852">size</span><span class="op" id="8506856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8506865">//&nbsp;add&nbsp;file&nbsp;and&nbsp;verify&nbsp;name&nbsp;and&nbsp;size</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506904">f</span>&nbsp;<span class="op" id="8506906">:=</span>&nbsp;<span class="ident" id="8506909"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8506913">.</span><span class="ident" id="8506914">AddFile</span><span class="op" id="8506921">(</span><span class="ident" id="8506922"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506926">.</span><span class="ident" id="8506927">filename</span><span class="op" id="8506935">,</span>&nbsp;<span class="ident" id="8506937"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8506941">.</span><span class="ident" id="8506942">Base</span><span class="op" id="8506946">(</span><span class="op" id="8506947">)</span><span class="op" id="8506948">+</span><span class="ident" id="8506949"><a href="/go/token/position_test.go.html#8506551">delta</a></span><span class="op" id="8506954">,</span>&nbsp;<span class="ident" id="8506956"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506960">.</span><span class="ident" id="8506961">size</span><span class="op" id="8506965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506969">if</span>&nbsp;<span class="ident" id="8506972"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8506973">.</span><span class="ident" id="8506974">Name</span><span class="op" id="8506978">(</span><span class="op" id="8506979">)</span>&nbsp;<span class="op" id="8506981">!=</span>&nbsp;<span class="ident" id="8506984"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8506988">.</span><span class="ident" id="8506989">filename</span>&nbsp;<span class="op" id="8506998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507003"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507004">.</span><span class="ident" id="8507005">Errorf</span><span class="op" id="8507011">(</span><span class="string" id="8507012">&#34;got&nbsp;filename&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8507038">,</span>&nbsp;<span class="ident" id="8507040"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507041">.</span><span class="ident" id="8507042">Name</span><span class="op" id="8507046">(</span><span class="op" id="8507047">)</span><span class="op" id="8507048">,</span>&nbsp;<span class="ident" id="8507050"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507054">.</span><span class="ident" id="8507055">filename</span><span class="op" id="8507063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507071">if</span>&nbsp;<span class="ident" id="8507074"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507075">.</span><span class="ident" id="8507076">Size</span><span class="op" id="8507080">(</span><span class="op" id="8507081">)</span>&nbsp;<span class="op" id="8507083">!=</span>&nbsp;<span class="ident" id="8507086"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507090">.</span><span class="ident" id="8507091">size</span>&nbsp;<span class="op" id="8507096">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507101"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507102">.</span><span class="ident" id="8507103">Errorf</span><span class="op" id="8507109">(</span><span class="string" id="8507110">&#34;%s:&nbsp;got&nbsp;file&nbsp;size&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8507141">,</span>&nbsp;<span class="ident" id="8507143"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507144">.</span><span class="ident" id="8507145">Name</span><span class="op" id="8507149">(</span><span class="op" id="8507150">)</span><span class="op" id="8507151">,</span>&nbsp;<span class="ident" id="8507153"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507154">.</span><span class="ident" id="8507155">Size</span><span class="op" id="8507159">(</span><span class="op" id="8507160">)</span><span class="op" id="8507161">,</span>&nbsp;<span class="ident" id="8507163"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507167">.</span><span class="ident" id="8507168">size</span><span class="op" id="8507172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507180">if</span>&nbsp;<span class="ident" id="8507183"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8507187">.</span><span class="ident" id="8507188">File</span><span class="op" id="8507192">(</span><span class="ident" id="8507193"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507194">.</span><span class="ident" id="8507195">Pos</span><span class="op" id="8507198">(</span><span class="num" id="8507199">0</span><span class="op" id="8507200">)</span><span class="op" id="8507201">)</span>&nbsp;<span class="op" id="8507203">!=</span>&nbsp;<span class="ident" id="8507206"><a href="/go/token/position_test.go.html#8506904">f</a></span>&nbsp;<span class="op" id="8507208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507213"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507214">.</span><span class="ident" id="8507215">Errorf</span><span class="op" id="8507221">(</span><span class="string" id="8507222">&#34;%s:&nbsp;f.Pos(0)&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;f&#34;</span><span class="op" id="8507255">,</span>&nbsp;<span class="ident" id="8507257"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507258">.</span><span class="ident" id="8507259">Name</span><span class="op" id="8507263">(</span><span class="op" id="8507264">)</span><span class="op" id="8507265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507269">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8507274">//&nbsp;add&nbsp;lines&nbsp;individually&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507327">for</span>&nbsp;<span class="ident" id="8507331">i</span><span class="op" id="8507332">,</span>&nbsp;<span class="ident" id="8507334">offset</span>&nbsp;<span class="op" id="8507341">:=</span>&nbsp;<span class="keyword" id="8507344">range</span>&nbsp;<span class="ident" id="8507350"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507354">.</span><span class="ident" id="8507355">lines</span>&nbsp;<span class="op" id="8507361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507366"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507367">.</span><span class="ident" id="8507368">AddLine</span><span class="op" id="8507375">(</span><span class="ident" id="8507376"><a href="/go/token/position_test.go.html#8507334">offset</a></span><span class="op" id="8507382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507387">if</span>&nbsp;<span class="ident" id="8507390"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507391">.</span><span class="ident" id="8507392">LineCount</span><span class="op" id="8507401">(</span><span class="op" id="8507402">)</span>&nbsp;<span class="op" id="8507404">!=</span>&nbsp;<span class="ident" id="8507407"><a href="/go/token/position_test.go.html#8507331">i</a></span><span class="op" id="8507408">+</span><span class="num" id="8507409">1</span>&nbsp;<span class="op" id="8507411">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507417"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507418">.</span><span class="ident" id="8507419">Errorf</span><span class="op" id="8507425">(</span><span class="string" id="8507426">&#34;%s,&nbsp;AddLine:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8507467">,</span>&nbsp;<span class="ident" id="8507469"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507470">.</span><span class="ident" id="8507471">Name</span><span class="op" id="8507475">(</span><span class="op" id="8507476">)</span><span class="op" id="8507477">,</span>&nbsp;<span class="ident" id="8507479"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507480">.</span><span class="ident" id="8507481">LineCount</span><span class="op" id="8507490">(</span><span class="op" id="8507491">)</span><span class="op" id="8507492">,</span>&nbsp;<span class="ident" id="8507494"><a href="/go/token/position_test.go.html#8507331">i</a></span><span class="op" id="8507495">+</span><span class="num" id="8507496">1</span><span class="op" id="8507497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8507507">//&nbsp;adding&nbsp;the&nbsp;same&nbsp;offset&nbsp;again&nbsp;should&nbsp;be&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507560"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507561">.</span><span class="ident" id="8507562">AddLine</span><span class="op" id="8507569">(</span><span class="ident" id="8507570"><a href="/go/token/position_test.go.html#8507334">offset</a></span><span class="op" id="8507576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507581">if</span>&nbsp;<span class="ident" id="8507584"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507585">.</span><span class="ident" id="8507586">LineCount</span><span class="op" id="8507595">(</span><span class="op" id="8507596">)</span>&nbsp;<span class="op" id="8507598">!=</span>&nbsp;<span class="ident" id="8507601"><a href="/go/token/position_test.go.html#8507331">i</a></span><span class="op" id="8507602">+</span><span class="num" id="8507603">1</span>&nbsp;<span class="op" id="8507605">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507611"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507612">.</span><span class="ident" id="8507613">Errorf</span><span class="op" id="8507619">(</span><span class="string" id="8507620">&#34;%s,&nbsp;AddLine:&nbsp;got&nbsp;unchanged&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8507671">,</span>&nbsp;<span class="ident" id="8507673"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507674">.</span><span class="ident" id="8507675">Name</span><span class="op" id="8507679">(</span><span class="op" id="8507680">)</span><span class="op" id="8507681">,</span>&nbsp;<span class="ident" id="8507683"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507684">.</span><span class="ident" id="8507685">LineCount</span><span class="op" id="8507694">(</span><span class="op" id="8507695">)</span><span class="op" id="8507696">,</span>&nbsp;<span class="ident" id="8507698"><a href="/go/token/position_test.go.html#8507331">i</a></span><span class="op" id="8507699">+</span><span class="num" id="8507700">1</span><span class="op" id="8507701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507711"><a href="/go/token/position_test.go.html#8505826">verifyPositions</a></span><span class="op" id="8507726">(</span><span class="ident" id="8507727"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507728">,</span>&nbsp;<span class="ident" id="8507730"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8507734">,</span>&nbsp;<span class="ident" id="8507736"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507737">,</span>&nbsp;<span class="ident" id="8507739"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507743">.</span><span class="ident" id="8507744">lines</span><span class="op" id="8507749">[</span><span class="num" id="8507750">0</span><span class="op" id="8507751">:</span><span class="ident" id="8507752"><a href="/go/token/position_test.go.html#8507331">i</a></span><span class="op" id="8507753">+</span><span class="num" id="8507754">1</span><span class="op" id="8507755">]</span><span class="op" id="8507756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8507765">//&nbsp;add&nbsp;lines&nbsp;with&nbsp;SetLines&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507819">if</span>&nbsp;<span class="ident" id="8507822">ok</span>&nbsp;<span class="op" id="8507825">:=</span>&nbsp;<span class="ident" id="8507828"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507829">.</span><span class="ident" id="8507830">SetLines</span><span class="op" id="8507838">(</span><span class="ident" id="8507839"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507843">.</span><span class="ident" id="8507844">lines</span><span class="op" id="8507849">)</span><span class="op" id="8507850">;</span>&nbsp;<span class="op" id="8507852">!</span><span class="ident" id="8507853"><a href="/go/token/position_test.go.html#8507822">ok</a></span>&nbsp;<span class="op" id="8507856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507861"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507862">.</span><span class="ident" id="8507863">Errorf</span><span class="op" id="8507869">(</span><span class="string" id="8507870">&#34;%s:&nbsp;SetLines&nbsp;failed&#34;</span><span class="op" id="8507891">,</span>&nbsp;<span class="ident" id="8507893"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507894">.</span><span class="ident" id="8507895">Name</span><span class="op" id="8507899">(</span><span class="op" id="8507900">)</span><span class="op" id="8507901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8507905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8507909">if</span>&nbsp;<span class="ident" id="8507912"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8507913">.</span><span class="ident" id="8507914">LineCount</span><span class="op" id="8507923">(</span><span class="op" id="8507924">)</span>&nbsp;<span class="op" id="8507926">!=</span>&nbsp;<span class="builtinfunc" id="8507929">len</span><span class="op" id="8507932">(</span><span class="ident" id="8507933"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8507937">.</span><span class="ident" id="8507938">lines</span><span class="op" id="8507943">)</span>&nbsp;<span class="op" id="8507945">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8507950"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8507951">.</span><span class="ident" id="8507952">Errorf</span><span class="op" id="8507958">(</span><span class="string" id="8507959">&#34;%s,&nbsp;SetLines:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8508001">,</span>&nbsp;<span class="ident" id="8508003"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508004">.</span><span class="ident" id="8508005">Name</span><span class="op" id="8508009">(</span><span class="op" id="8508010">)</span><span class="op" id="8508011">,</span>&nbsp;<span class="ident" id="8508013"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508014">.</span><span class="ident" id="8508015">LineCount</span><span class="op" id="8508024">(</span><span class="op" id="8508025">)</span><span class="op" id="8508026">,</span>&nbsp;<span class="builtinfunc" id="8508028">len</span><span class="op" id="8508031">(</span><span class="ident" id="8508032"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508036">.</span><span class="ident" id="8508037">lines</span><span class="op" id="8508042">)</span><span class="op" id="8508043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508051"><a href="/go/token/position_test.go.html#8505826">verifyPositions</a></span><span class="op" id="8508066">(</span><span class="ident" id="8508067"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8508068">,</span>&nbsp;<span class="ident" id="8508070"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8508074">,</span>&nbsp;<span class="ident" id="8508076"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508077">,</span>&nbsp;<span class="ident" id="8508079"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508083">.</span><span class="ident" id="8508084">lines</span><span class="op" id="8508089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8508094">//&nbsp;add&nbsp;lines&nbsp;with&nbsp;SetLinesForContent&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508158">src</span>&nbsp;<span class="op" id="8508162">:=</span>&nbsp;<span class="ident" id="8508165"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508169">.</span><span class="ident" id="8508170">source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508179">if</span>&nbsp;<span class="ident" id="8508182"><a href="/go/token/position_test.go.html#8508158">src</a></span>&nbsp;<span class="op" id="8508186">==</span>&nbsp;<span class="ident" id="8508189">nil</span>&nbsp;<span class="op" id="8508193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8508198">//&nbsp;no&nbsp;test&nbsp;source&nbsp;available&nbsp;-&nbsp;create&nbsp;one&nbsp;from&nbsp;scratch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508255"><a href="/go/token/position_test.go.html#8508158">src</a></span>&nbsp;<span class="op" id="8508259">=</span>&nbsp;<span class="ident" id="8508261"><a href="/go/token/position_test.go.html#8506345">makeTestSource</a></span><span class="op" id="8508275">(</span><span class="ident" id="8508276"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508280">.</span><span class="ident" id="8508281">size</span><span class="op" id="8508285">,</span>&nbsp;<span class="ident" id="8508287"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508291">.</span><span class="ident" id="8508292">lines</span><span class="op" id="8508297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508301">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508305"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508306">.</span><span class="ident" id="8508307">SetLinesForContent</span><span class="op" id="8508325">(</span><span class="ident" id="8508326"><a href="/go/token/position_test.go.html#8508158">src</a></span><span class="op" id="8508329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508333">if</span>&nbsp;<span class="ident" id="8508336"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508337">.</span><span class="ident" id="8508338">LineCount</span><span class="op" id="8508347">(</span><span class="op" id="8508348">)</span>&nbsp;<span class="op" id="8508350">!=</span>&nbsp;<span class="builtinfunc" id="8508353">len</span><span class="op" id="8508356">(</span><span class="ident" id="8508357"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508361">.</span><span class="ident" id="8508362">lines</span><span class="op" id="8508367">)</span>&nbsp;<span class="op" id="8508369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508374"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8508375">.</span><span class="ident" id="8508376">Errorf</span><span class="op" id="8508382">(</span><span class="string" id="8508383">&#34;%s,&nbsp;SetLinesForContent:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8508435">,</span>&nbsp;<span class="ident" id="8508437"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508438">.</span><span class="ident" id="8508439">Name</span><span class="op" id="8508443">(</span><span class="op" id="8508444">)</span><span class="op" id="8508445">,</span>&nbsp;<span class="ident" id="8508447"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508448">.</span><span class="ident" id="8508449">LineCount</span><span class="op" id="8508458">(</span><span class="op" id="8508459">)</span><span class="op" id="8508460">,</span>&nbsp;<span class="builtinfunc" id="8508462">len</span><span class="op" id="8508465">(</span><span class="ident" id="8508466"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508470">.</span><span class="ident" id="8508471">lines</span><span class="op" id="8508476">)</span><span class="op" id="8508477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508485"><a href="/go/token/position_test.go.html#8505826">verifyPositions</a></span><span class="op" id="8508500">(</span><span class="ident" id="8508501"><a href="/go/token/position_test.go.html#8506528">t</a></span><span class="op" id="8508502">,</span>&nbsp;<span class="ident" id="8508504"><a href="/go/token/position_test.go.html#8506598">fset</a></span><span class="op" id="8508508">,</span>&nbsp;<span class="ident" id="8508510"><a href="/go/token/position_test.go.html#8506904">f</a></span><span class="op" id="8508511">,</span>&nbsp;<span class="ident" id="8508513"><a href="/go/token/position_test.go.html#8506627">test</a></span><span class="op" id="8508517">.</span><span class="ident" id="8508518">lines</span><span class="op" id="8508523">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508526">}</span><br>
<span class="lineno"></span><span class="op" id="8508528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8508531">func</span>&nbsp;<span class="ident" id="8508536">TestLineInfo</span><span class="op" id="8508548">(</span><span class="ident" id="8508549">t</span>&nbsp;<span class="op" id="8508551">*</span><span class="ident" id="8508552"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8508559">.</span><span class="ident" id="8508560">T</span><span class="op" id="8508561">)</span>&nbsp;<span class="op" id="8508563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508566">fset</span>&nbsp;<span class="op" id="8508571">:=</span>&nbsp;<span class="ident" id="8508574"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8508584">(</span><span class="op" id="8508585">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508588">f</span>&nbsp;<span class="op" id="8508590">:=</span>&nbsp;<span class="ident" id="8508593"><a href="/go/token/position_test.go.html#8508566">fset</a></span><span class="op" id="8508597">.</span><span class="ident" id="8508598">AddFile</span><span class="op" id="8508605">(</span><span class="string" id="8508606">&#34;foo&#34;</span><span class="op" id="8508611">,</span>&nbsp;<span class="ident" id="8508613"><a href="/go/token/position_test.go.html#8508566">fset</a></span><span class="op" id="8508617">.</span><span class="ident" id="8508618">Base</span><span class="op" id="8508622">(</span><span class="op" id="8508623">)</span><span class="op" id="8508624">,</span>&nbsp;<span class="num" id="8508626">500</span><span class="op" id="8508629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508632">lines</span>&nbsp;<span class="op" id="8508638">:=</span>&nbsp;<span class="op" id="8508641">[</span><span class="op" id="8508642">]</span><span class="builtintype" id="8508643">int</span><span class="op" id="8508646">{</span><span class="num" id="8508647">0</span><span class="op" id="8508648">,</span>&nbsp;<span class="num" id="8508650">42</span><span class="op" id="8508652">,</span>&nbsp;<span class="num" id="8508654">77</span><span class="op" id="8508656">,</span>&nbsp;<span class="num" id="8508658">100</span><span class="op" id="8508661">,</span>&nbsp;<span class="num" id="8508663">210</span><span class="op" id="8508666">,</span>&nbsp;<span class="num" id="8508668">220</span><span class="op" id="8508671">,</span>&nbsp;<span class="num" id="8508673">277</span><span class="op" id="8508676">,</span>&nbsp;<span class="num" id="8508678">300</span><span class="op" id="8508681">,</span>&nbsp;<span class="num" id="8508683">333</span><span class="op" id="8508686">,</span>&nbsp;<span class="num" id="8508688">401</span><span class="op" id="8508691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8508694">//&nbsp;add&nbsp;lines&nbsp;individually&nbsp;and&nbsp;provide&nbsp;alternative&nbsp;line&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508762">for</span>&nbsp;<span class="ident" id="8508766">_</span><span class="op" id="8508767">,</span>&nbsp;<span class="ident" id="8508769">offs</span>&nbsp;<span class="op" id="8508774">:=</span>&nbsp;<span class="keyword" id="8508777">range</span>&nbsp;<span class="ident" id="8508783"><a href="/go/token/position_test.go.html#8508632">lines</a></span>&nbsp;<span class="op" id="8508789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508793"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8508794">.</span><span class="ident" id="8508795">AddLine</span><span class="op" id="8508802">(</span><span class="ident" id="8508803"><a href="/go/token/position_test.go.html#8508769">offs</a></span><span class="op" id="8508807">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508811"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8508812">.</span><span class="ident" id="8508813">AddLineInfo</span><span class="op" id="8508824">(</span><span class="ident" id="8508825"><a href="/go/token/position_test.go.html#8508769">offs</a></span><span class="op" id="8508829">,</span>&nbsp;<span class="string" id="8508831">&#34;bar&#34;</span><span class="op" id="8508836">,</span>&nbsp;<span class="num" id="8508838">42</span><span class="op" id="8508840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8508843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8508846">//&nbsp;verify&nbsp;positions&nbsp;for&nbsp;all&nbsp;offsets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8508883">for</span>&nbsp;<span class="ident" id="8508887">offs</span>&nbsp;<span class="op" id="8508892">:=</span>&nbsp;<span class="num" id="8508895">0</span><span class="op" id="8508896">;</span>&nbsp;<span class="ident" id="8508898"><a href="/go/token/position_test.go.html#8508887">offs</a></span>&nbsp;<span class="op" id="8508903">&lt;=</span>&nbsp;<span class="ident" id="8508906"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8508907">.</span><span class="ident" id="8508908">Size</span><span class="op" id="8508912">(</span><span class="op" id="8508913">)</span><span class="op" id="8508914">;</span>&nbsp;<span class="ident" id="8508916"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8508920">++</span>&nbsp;<span class="op" id="8508923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508927">p</span>&nbsp;<span class="op" id="8508929">:=</span>&nbsp;<span class="ident" id="8508932"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8508933">.</span><span class="ident" id="8508934">Pos</span><span class="op" id="8508937">(</span><span class="ident" id="8508938"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8508942">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508946">_</span><span class="op" id="8508947">,</span>&nbsp;<span class="ident" id="8508949">col</span>&nbsp;<span class="op" id="8508953">:=</span>&nbsp;<span class="ident" id="8508956"><a href="/go/token/position_test.go.html#8505578">linecol</a></span><span class="op" id="8508963">(</span><span class="ident" id="8508964"><a href="/go/token/position_test.go.html#8508632">lines</a></span><span class="op" id="8508969">,</span>&nbsp;<span class="ident" id="8508971"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8508975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8508979">msg</span>&nbsp;<span class="op" id="8508983">:=</span>&nbsp;<span class="ident" id="8508986"><a href="/go/token/position_test.go.html#8504161">fmt</a></span><span class="op" id="8508989">.</span><span class="ident" id="8508990">Sprintf</span><span class="op" id="8508997">(</span><span class="string" id="8508998">&#34;%s&nbsp;(offs&nbsp;=&nbsp;%d,&nbsp;p&nbsp;=&nbsp;%d)&#34;</span><span class="op" id="8509022">,</span>&nbsp;<span class="ident" id="8509024"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8509025">.</span><span class="ident" id="8509026">Name</span><span class="op" id="8509030">(</span><span class="op" id="8509031">)</span><span class="op" id="8509032">,</span>&nbsp;<span class="ident" id="8509034"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8509038">,</span>&nbsp;<span class="ident" id="8509040"><a href="/go/token/position_test.go.html#8508927">p</a></span><span class="op" id="8509041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509045"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8509053">(</span><span class="ident" id="8509054"><a href="/go/token/position_test.go.html#8508549">t</a></span><span class="op" id="8509055">,</span>&nbsp;<span class="ident" id="8509057"><a href="/go/token/position_test.go.html#8508979">msg</a></span><span class="op" id="8509060">,</span>&nbsp;<span class="ident" id="8509062"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8509063">.</span><span class="ident" id="8509064">Position</span><span class="op" id="8509072">(</span><span class="ident" id="8509073"><a href="/go/token/position_test.go.html#8508588">f</a></span><span class="op" id="8509074">.</span><span class="ident" id="8509075">Pos</span><span class="op" id="8509078">(</span><span class="ident" id="8509079"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8509083">)</span><span class="op" id="8509084">)</span><span class="op" id="8509085">,</span>&nbsp;<span class="ident" id="8509087"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8509095">{</span><span class="string" id="8509096">&#34;bar&#34;</span><span class="op" id="8509101">,</span>&nbsp;<span class="ident" id="8509103"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8509107">,</span>&nbsp;<span class="num" id="8509109">42</span><span class="op" id="8509111">,</span>&nbsp;<span class="ident" id="8509113"><a href="/go/token/position_test.go.html#8508949">col</a></span><span class="op" id="8509116">}</span><span class="op" id="8509117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509121"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8509129">(</span><span class="ident" id="8509130"><a href="/go/token/position_test.go.html#8508549">t</a></span><span class="op" id="8509131">,</span>&nbsp;<span class="ident" id="8509133"><a href="/go/token/position_test.go.html#8508979">msg</a></span><span class="op" id="8509136">,</span>&nbsp;<span class="ident" id="8509138"><a href="/go/token/position_test.go.html#8508566">fset</a></span><span class="op" id="8509142">.</span><span class="ident" id="8509143">Position</span><span class="op" id="8509151">(</span><span class="ident" id="8509152"><a href="/go/token/position_test.go.html#8508927">p</a></span><span class="op" id="8509153">)</span><span class="op" id="8509154">,</span>&nbsp;<span class="ident" id="8509156"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8509164">{</span><span class="string" id="8509165">&#34;bar&#34;</span><span class="op" id="8509170">,</span>&nbsp;<span class="ident" id="8509172"><a href="/go/token/position_test.go.html#8508887">offs</a></span><span class="op" id="8509176">,</span>&nbsp;<span class="num" id="8509178">42</span><span class="op" id="8509180">,</span>&nbsp;<span class="ident" id="8509182"><a href="/go/token/position_test.go.html#8508949">col</a></span><span class="op" id="8509185">}</span><span class="op" id="8509186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509189">}</span><br>
<span class="lineno">165</span><span class="op" id="8509191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8509194">func</span>&nbsp;<span class="ident" id="8509199">TestFiles</span><span class="op" id="8509208">(</span><span class="ident" id="8509209">t</span>&nbsp;<span class="op" id="8509211">*</span><span class="ident" id="8509212"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8509219">.</span><span class="ident" id="8509220">T</span><span class="op" id="8509221">)</span>&nbsp;<span class="op" id="8509223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509226">fset</span>&nbsp;<span class="op" id="8509231">:=</span>&nbsp;<span class="ident" id="8509234"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8509244">(</span><span class="op" id="8509245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509248">for</span>&nbsp;<span class="ident" id="8509252">i</span><span class="op" id="8509253">,</span>&nbsp;<span class="ident" id="8509255">test</span>&nbsp;<span class="op" id="8509260">:=</span>&nbsp;<span class="keyword" id="8509263">range</span>&nbsp;<span class="ident" id="8509269"><a href="/go/token/position_test.go.html#8504963">tests</a></span>&nbsp;<span class="op" id="8509275">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509279">base</span>&nbsp;<span class="op" id="8509284">:=</span>&nbsp;<span class="ident" id="8509287"><a href="/go/token/position_test.go.html#8509226">fset</a></span><span class="op" id="8509291">.</span><span class="ident" id="8509292">Base</span><span class="op" id="8509296">(</span><span class="op" id="8509297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509301">if</span>&nbsp;<span class="ident" id="8509304"><a href="/go/token/position_test.go.html#8509252">i</a></span><span class="op" id="8509305">%</span><span class="num" id="8509306">2</span>&nbsp;<span class="op" id="8509308">==</span>&nbsp;<span class="num" id="8509311">1</span>&nbsp;<span class="op" id="8509313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8509318">//&nbsp;Setting&nbsp;a&nbsp;negative&nbsp;base&nbsp;is&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8509365">//&nbsp;fset.Base(),&nbsp;so&nbsp;test&nbsp;some&nbsp;of&nbsp;each.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509406"><a href="/go/token/position_test.go.html#8509279">base</a></span>&nbsp;<span class="op" id="8509411">=</span>&nbsp;<span class="op" id="8509413">-</span><span class="num" id="8509414">1</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509422"><a href="/go/token/position_test.go.html#8509226">fset</a></span><span class="op" id="8509426">.</span><span class="ident" id="8509427">AddFile</span><span class="op" id="8509434">(</span><span class="ident" id="8509435"><a href="/go/token/position_test.go.html#8509255">test</a></span><span class="op" id="8509439">.</span><span class="ident" id="8509440">filename</span><span class="op" id="8509448">,</span>&nbsp;<span class="ident" id="8509450"><a href="/go/token/position_test.go.html#8509279">base</a></span><span class="op" id="8509454">,</span>&nbsp;<span class="ident" id="8509456"><a href="/go/token/position_test.go.html#8509255">test</a></span><span class="op" id="8509460">.</span><span class="ident" id="8509461">size</span><span class="op" id="8509465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509469">j</span>&nbsp;<span class="op" id="8509471">:=</span>&nbsp;<span class="num" id="8509474">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509478"><a href="/go/token/position_test.go.html#8509226">fset</a></span><span class="op" id="8509482">.</span><span class="ident" id="8509483">Iterate</span><span class="op" id="8509490">(</span><span class="keyword" id="8509491">func</span><span class="op" id="8509495">(</span><span class="ident" id="8509496">f</span>&nbsp;<span class="op" id="8509498">*</span><span class="ident" id="8509499"><a href="/go/token/position.go.html#5935090">File</a></span><span class="op" id="8509503">)</span>&nbsp;<span class="builtintype" id="8509505">bool</span>&nbsp;<span class="op" id="8509510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509515">if</span>&nbsp;<span class="ident" id="8509518"><a href="/go/token/position_test.go.html#8509496">f</a></span><span class="op" id="8509519">.</span><span class="ident" id="8509520">Name</span><span class="op" id="8509524">(</span><span class="op" id="8509525">)</span>&nbsp;<span class="op" id="8509527">!=</span>&nbsp;<span class="ident" id="8509530"><a href="/go/token/position_test.go.html#8504963">tests</a></span><span class="op" id="8509535">[</span><span class="ident" id="8509536"><a href="/go/token/position_test.go.html#8509469">j</a></span><span class="op" id="8509537">]</span><span class="op" id="8509538">.</span><span class="ident" id="8509539">filename</span>&nbsp;<span class="op" id="8509548">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509554"><a href="/go/token/position_test.go.html#8509209">t</a></span><span class="op" id="8509555">.</span><span class="ident" id="8509556">Errorf</span><span class="op" id="8509562">(</span><span class="string" id="8509563">&#34;got&nbsp;filename&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8509591">,</span>&nbsp;<span class="ident" id="8509593"><a href="/go/token/position_test.go.html#8509496">f</a></span><span class="op" id="8509594">.</span><span class="ident" id="8509595">Name</span><span class="op" id="8509599">(</span><span class="op" id="8509600">)</span><span class="op" id="8509601">,</span>&nbsp;<span class="ident" id="8509603"><a href="/go/token/position_test.go.html#8504963">tests</a></span><span class="op" id="8509608">[</span><span class="ident" id="8509609"><a href="/go/token/position_test.go.html#8509469">j</a></span><span class="op" id="8509610">]</span><span class="op" id="8509611">.</span><span class="ident" id="8509612">filename</span><span class="op" id="8509620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509630"><a href="/go/token/position_test.go.html#8509469">j</a></span><span class="op" id="8509631">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509637">return</span>&nbsp;<span class="ident" id="8509644">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509651">}</span><span class="op" id="8509652">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509656">if</span>&nbsp;<span class="ident" id="8509659"><a href="/go/token/position_test.go.html#8509469">j</a></span>&nbsp;<span class="op" id="8509661">!=</span>&nbsp;<span class="ident" id="8509664"><a href="/go/token/position_test.go.html#8509252">i</a></span><span class="op" id="8509665">+</span><span class="num" id="8509666">1</span>&nbsp;<span class="op" id="8509668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509673"><a href="/go/token/position_test.go.html#8509209">t</a></span><span class="op" id="8509674">.</span><span class="ident" id="8509675">Errorf</span><span class="op" id="8509681">(</span><span class="string" id="8509682">&#34;got&nbsp;%d&nbsp;files;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8509705">,</span>&nbsp;<span class="ident" id="8509707"><a href="/go/token/position_test.go.html#8509469">j</a></span><span class="op" id="8509708">,</span>&nbsp;<span class="ident" id="8509710"><a href="/go/token/position_test.go.html#8509252">i</a></span><span class="op" id="8509711">+</span><span class="num" id="8509712">1</span><span class="op" id="8509713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509720">}</span><br>
<span class="lineno"></span><span class="op" id="8509722">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="8509725">//&nbsp;FileSet.File&nbsp;should&nbsp;return&nbsp;nil&nbsp;if&nbsp;Pos&nbsp;is&nbsp;past&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;FileSet.</span><br>
<span class="lineno"></span><span class="keyword" id="8509798">func</span>&nbsp;<span class="ident" id="8509803">TestFileSetPastEnd</span><span class="op" id="8509821">(</span><span class="ident" id="8509822">t</span>&nbsp;<span class="op" id="8509824">*</span><span class="ident" id="8509825"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8509832">.</span><span class="ident" id="8509833">T</span><span class="op" id="8509834">)</span>&nbsp;<span class="op" id="8509836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509839">fset</span>&nbsp;<span class="op" id="8509844">:=</span>&nbsp;<span class="ident" id="8509847"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8509857">(</span><span class="op" id="8509858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509861">for</span>&nbsp;<span class="ident" id="8509865">_</span><span class="op" id="8509866">,</span>&nbsp;<span class="ident" id="8509868">test</span>&nbsp;<span class="op" id="8509873">:=</span>&nbsp;<span class="keyword" id="8509876">range</span>&nbsp;<span class="ident" id="8509882"><a href="/go/token/position_test.go.html#8504963">tests</a></span>&nbsp;<span class="op" id="8509888">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509892"><a href="/go/token/position_test.go.html#8509839">fset</a></span><span class="op" id="8509896">.</span><span class="ident" id="8509897">AddFile</span><span class="op" id="8509904">(</span><span class="ident" id="8509905"><a href="/go/token/position_test.go.html#8509868">test</a></span><span class="op" id="8509909">.</span><span class="ident" id="8509910">filename</span><span class="op" id="8509918">,</span>&nbsp;<span class="ident" id="8509920"><a href="/go/token/position_test.go.html#8509839">fset</a></span><span class="op" id="8509924">.</span><span class="ident" id="8509925">Base</span><span class="op" id="8509929">(</span><span class="op" id="8509930">)</span><span class="op" id="8509931">,</span>&nbsp;<span class="ident" id="8509933"><a href="/go/token/position_test.go.html#8509868">test</a></span><span class="op" id="8509937">.</span><span class="ident" id="8509938">size</span><span class="op" id="8509942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8509945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8509948">if</span>&nbsp;<span class="ident" id="8509951">f</span>&nbsp;<span class="op" id="8509953">:=</span>&nbsp;<span class="ident" id="8509956"><a href="/go/token/position_test.go.html#8509839">fset</a></span><span class="op" id="8509960">.</span><span class="ident" id="8509961">File</span><span class="op" id="8509965">(</span><span class="ident" id="8509966"><a href="/go/token/position.go.html#5934489">Pos</a></span><span class="op" id="8509969">(</span><span class="ident" id="8509970"><a href="/go/token/position_test.go.html#8509839">fset</a></span><span class="op" id="8509974">.</span><span class="ident" id="8509975">Base</span><span class="op" id="8509979">(</span><span class="op" id="8509980">)</span><span class="op" id="8509981">)</span><span class="op" id="8509982">)</span><span class="op" id="8509983">;</span>&nbsp;<span class="ident" id="8509985"><a href="/go/token/position_test.go.html#8509951">f</a></span>&nbsp;<span class="op" id="8509987">!=</span>&nbsp;<span class="ident" id="8509990">nil</span>&nbsp;<span class="op" id="8509994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8509998"><a href="/go/token/position_test.go.html#8509822">t</a></span><span class="op" id="8509999">.</span><span class="ident" id="8510000">Errorf</span><span class="op" id="8510006">(</span><span class="string" id="8510007">&#34;got&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="8510025">,</span>&nbsp;<span class="ident" id="8510027"><a href="/go/token/position_test.go.html#8509951">f</a></span><span class="op" id="8510028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510031">}</span><br>
<span class="lineno">200</span><span class="op" id="8510033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8510036">func</span>&nbsp;<span class="ident" id="8510041">TestFileSetCacheUnlikely</span><span class="op" id="8510065">(</span><span class="ident" id="8510066">t</span>&nbsp;<span class="op" id="8510068">*</span><span class="ident" id="8510069"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8510076">.</span><span class="ident" id="8510077">T</span><span class="op" id="8510078">)</span>&nbsp;<span class="op" id="8510080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510083">fset</span>&nbsp;<span class="op" id="8510088">:=</span>&nbsp;<span class="ident" id="8510091"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8510101">(</span><span class="op" id="8510102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510105">offsets</span>&nbsp;<span class="op" id="8510113">:=</span>&nbsp;<span class="builtinfunc" id="8510116">make</span><span class="op" id="8510120">(</span><span class="keyword" id="8510121">map</span><span class="op" id="8510124">[</span><span class="builtintype" id="8510125">string</span><span class="op" id="8510131">]</span><span class="builtintype" id="8510132">int</span><span class="op" id="8510135">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510138">for</span>&nbsp;<span class="ident" id="8510142">_</span><span class="op" id="8510143">,</span>&nbsp;<span class="ident" id="8510145">test</span>&nbsp;<span class="op" id="8510150">:=</span>&nbsp;<span class="keyword" id="8510153">range</span>&nbsp;<span class="ident" id="8510159"><a href="/go/token/position_test.go.html#8504963">tests</a></span>&nbsp;<span class="op" id="8510165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510169"><a href="/go/token/position_test.go.html#8510105">offsets</a></span><span class="op" id="8510176">[</span><span class="ident" id="8510177"><a href="/go/token/position_test.go.html#8510145">test</a></span><span class="op" id="8510181">.</span><span class="ident" id="8510182">filename</span><span class="op" id="8510190">]</span>&nbsp;<span class="op" id="8510192">=</span>&nbsp;<span class="ident" id="8510194"><a href="/go/token/position_test.go.html#8510083">fset</a></span><span class="op" id="8510198">.</span><span class="ident" id="8510199">Base</span><span class="op" id="8510203">(</span><span class="op" id="8510204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510208"><a href="/go/token/position_test.go.html#8510083">fset</a></span><span class="op" id="8510212">.</span><span class="ident" id="8510213">AddFile</span><span class="op" id="8510220">(</span><span class="ident" id="8510221"><a href="/go/token/position_test.go.html#8510145">test</a></span><span class="op" id="8510225">.</span><span class="ident" id="8510226">filename</span><span class="op" id="8510234">,</span>&nbsp;<span class="ident" id="8510236"><a href="/go/token/position_test.go.html#8510083">fset</a></span><span class="op" id="8510240">.</span><span class="ident" id="8510241">Base</span><span class="op" id="8510245">(</span><span class="op" id="8510246">)</span><span class="op" id="8510247">,</span>&nbsp;<span class="ident" id="8510249"><a href="/go/token/position_test.go.html#8510145">test</a></span><span class="op" id="8510253">.</span><span class="ident" id="8510254">size</span><span class="op" id="8510258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510264">for</span>&nbsp;<span class="ident" id="8510268">file</span><span class="op" id="8510272">,</span>&nbsp;<span class="ident" id="8510274">pos</span>&nbsp;<span class="op" id="8510278">:=</span>&nbsp;<span class="keyword" id="8510281">range</span>&nbsp;<span class="ident" id="8510287"><a href="/go/token/position_test.go.html#8510105">offsets</a></span>&nbsp;<span class="op" id="8510295">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510299">f</span>&nbsp;<span class="op" id="8510301">:=</span>&nbsp;<span class="ident" id="8510304"><a href="/go/token/position_test.go.html#8510083">fset</a></span><span class="op" id="8510308">.</span><span class="ident" id="8510309">File</span><span class="op" id="8510313">(</span><span class="ident" id="8510314"><a href="/go/token/position.go.html#5934489">Pos</a></span><span class="op" id="8510317">(</span><span class="ident" id="8510318"><a href="/go/token/position_test.go.html#8510274">pos</a></span><span class="op" id="8510321">)</span><span class="op" id="8510322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510326">if</span>&nbsp;<span class="ident" id="8510329"><a href="/go/token/position_test.go.html#8510299">f</a></span><span class="op" id="8510330">.</span><span class="ident" id="8510331">Name</span><span class="op" id="8510335">(</span><span class="op" id="8510336">)</span>&nbsp;<span class="op" id="8510338">!=</span>&nbsp;<span class="ident" id="8510341"><a href="/go/token/position_test.go.html#8510268">file</a></span>&nbsp;<span class="op" id="8510346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510351"><a href="/go/token/position_test.go.html#8510066">t</a></span><span class="op" id="8510352">.</span><span class="ident" id="8510353">Errorf</span><span class="op" id="8510359">(</span><span class="string" id="8510360">&#34;got&nbsp;%q&nbsp;at&nbsp;position&nbsp;%d,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8510392">,</span>&nbsp;<span class="ident" id="8510394"><a href="/go/token/position_test.go.html#8510299">f</a></span><span class="op" id="8510395">.</span><span class="ident" id="8510396">Name</span><span class="op" id="8510400">(</span><span class="op" id="8510401">)</span><span class="op" id="8510402">,</span>&nbsp;<span class="ident" id="8510404"><a href="/go/token/position_test.go.html#8510274">pos</a></span><span class="op" id="8510407">,</span>&nbsp;<span class="ident" id="8510409"><a href="/go/token/position_test.go.html#8510268">file</a></span><span class="op" id="8510413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510420">}</span><br>
<span class="lineno">215</span><span class="op" id="8510422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8510425">//&nbsp;issue&nbsp;4345.&nbsp;Test&nbsp;concurrent&nbsp;use&nbsp;of&nbsp;FileSet.Pos&nbsp;does&nbsp;not&nbsp;trigger&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="8510494">//&nbsp;race&nbsp;in&nbsp;the&nbsp;FileSet&nbsp;position&nbsp;cache.</span><br>
<span class="lineno"></span><span class="keyword" id="8510533">func</span>&nbsp;<span class="ident" id="8510538">TestFileSetRace</span><span class="op" id="8510553">(</span><span class="ident" id="8510554">t</span>&nbsp;<span class="op" id="8510556">*</span><span class="ident" id="8510557"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8510564">.</span><span class="ident" id="8510565">T</span><span class="op" id="8510566">)</span>&nbsp;<span class="op" id="8510568">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510571">fset</span>&nbsp;<span class="op" id="8510576">:=</span>&nbsp;<span class="ident" id="8510579"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8510589">(</span><span class="op" id="8510590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510593">for</span>&nbsp;<span class="ident" id="8510597">i</span>&nbsp;<span class="op" id="8510599">:=</span>&nbsp;<span class="num" id="8510602">0</span><span class="op" id="8510603">;</span>&nbsp;<span class="ident" id="8510605"><a href="/go/token/position_test.go.html#8510597">i</a></span>&nbsp;<span class="op" id="8510607">&lt;</span>&nbsp;<span class="num" id="8510609">100</span><span class="op" id="8510612">;</span>&nbsp;<span class="ident" id="8510614"><a href="/go/token/position_test.go.html#8510597">i</a></span><span class="op" id="8510615">++</span>&nbsp;<span class="op" id="8510618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510622"><a href="/go/token/position_test.go.html#8510571">fset</a></span><span class="op" id="8510626">.</span><span class="ident" id="8510627">AddFile</span><span class="op" id="8510634">(</span><span class="ident" id="8510635"><a href="/go/token/position_test.go.html#8504161">fmt</a></span><span class="op" id="8510638">.</span><span class="ident" id="8510639">Sprintf</span><span class="op" id="8510646">(</span><span class="string" id="8510647">&#34;file-%d&#34;</span><span class="op" id="8510656">,</span>&nbsp;<span class="ident" id="8510658"><a href="/go/token/position_test.go.html#8510597">i</a></span><span class="op" id="8510659">)</span><span class="op" id="8510660">,</span>&nbsp;<span class="ident" id="8510662"><a href="/go/token/position_test.go.html#8510571">fset</a></span><span class="op" id="8510666">.</span><span class="ident" id="8510667">Base</span><span class="op" id="8510671">(</span><span class="op" id="8510672">)</span><span class="op" id="8510673">,</span>&nbsp;<span class="num" id="8510675">1031</span><span class="op" id="8510679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510685">max</span>&nbsp;<span class="op" id="8510689">:=</span>&nbsp;<span class="builtintype" id="8510692">int32</span><span class="op" id="8510697">(</span><span class="ident" id="8510698"><a href="/go/token/position_test.go.html#8510571">fset</a></span><span class="op" id="8510702">.</span><span class="ident" id="8510703">Base</span><span class="op" id="8510707">(</span><span class="op" id="8510708">)</span><span class="op" id="8510709">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510712">var</span>&nbsp;<span class="ident" id="8510716">stop</span>&nbsp;<span class="ident" id="8510721"><a href="/go/token/position_test.go.html#8504181">sync</a></span><span class="op" id="8510725">.</span><span class="ident" id="8510726">WaitGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510737">r</span>&nbsp;<span class="op" id="8510739">:=</span>&nbsp;<span class="ident" id="8510742"><a href="/go/token/position_test.go.html#8504168">rand</a></span><span class="op" id="8510746">.</span><span class="ident" id="8510747">New</span><span class="op" id="8510750">(</span><span class="ident" id="8510751"><a href="/go/token/position_test.go.html#8504168">rand</a></span><span class="op" id="8510755">.</span><span class="ident" id="8510756">NewSource</span><span class="op" id="8510765">(</span><span class="num" id="8510766">7</span><span class="op" id="8510767">)</span><span class="op" id="8510768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510771">for</span>&nbsp;<span class="ident" id="8510775">i</span>&nbsp;<span class="op" id="8510777">:=</span>&nbsp;<span class="num" id="8510780">0</span><span class="op" id="8510781">;</span>&nbsp;<span class="ident" id="8510783"><a href="/go/token/position_test.go.html#8510775">i</a></span>&nbsp;<span class="op" id="8510785">&lt;</span>&nbsp;<span class="num" id="8510787">2</span><span class="op" id="8510788">;</span>&nbsp;<span class="ident" id="8510790"><a href="/go/token/position_test.go.html#8510775">i</a></span><span class="op" id="8510791">++</span>&nbsp;<span class="op" id="8510794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510798">r</span>&nbsp;<span class="op" id="8510800">:=</span>&nbsp;<span class="ident" id="8510803"><a href="/go/token/position_test.go.html#8504168">rand</a></span><span class="op" id="8510807">.</span><span class="ident" id="8510808">New</span><span class="op" id="8510811">(</span><span class="ident" id="8510812"><a href="/go/token/position_test.go.html#8504168">rand</a></span><span class="op" id="8510816">.</span><span class="ident" id="8510817">NewSource</span><span class="op" id="8510826">(</span><span class="ident" id="8510827"><a href="/go/token/position_test.go.html#8510737">r</a></span><span class="op" id="8510828">.</span><span class="ident" id="8510829">Int63</span><span class="op" id="8510834">(</span><span class="op" id="8510835">)</span><span class="op" id="8510836">)</span><span class="op" id="8510837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510841"><a href="/go/token/position_test.go.html#8510716">stop</a></span><span class="op" id="8510845">.</span><span class="ident" id="8510846">Add</span><span class="op" id="8510849">(</span><span class="num" id="8510850">1</span><span class="op" id="8510851">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510855">go</span>&nbsp;<span class="keyword" id="8510858">func</span><span class="op" id="8510862">(</span><span class="op" id="8510863">)</span>&nbsp;<span class="op" id="8510865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8510870">for</span>&nbsp;<span class="ident" id="8510874">i</span>&nbsp;<span class="op" id="8510876">:=</span>&nbsp;<span class="num" id="8510879">0</span><span class="op" id="8510880">;</span>&nbsp;<span class="ident" id="8510882"><a href="/go/token/position_test.go.html#8510874">i</a></span>&nbsp;<span class="op" id="8510884">&lt;</span>&nbsp;<span class="num" id="8510886">1000</span><span class="op" id="8510890">;</span>&nbsp;<span class="ident" id="8510892"><a href="/go/token/position_test.go.html#8510874">i</a></span><span class="op" id="8510893">++</span>&nbsp;<span class="op" id="8510896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510902"><a href="/go/token/position_test.go.html#8510571">fset</a></span><span class="op" id="8510906">.</span><span class="ident" id="8510907">Position</span><span class="op" id="8510915">(</span><span class="ident" id="8510916"><a href="/go/token/position.go.html#5934489">Pos</a></span><span class="op" id="8510919">(</span><span class="ident" id="8510920"><a href="/go/token/position_test.go.html#8510798">r</a></span><span class="op" id="8510921">.</span><span class="ident" id="8510922">Int31n</span><span class="op" id="8510928">(</span><span class="ident" id="8510929"><a href="/go/token/position_test.go.html#8510685">max</a></span><span class="op" id="8510932">)</span><span class="op" id="8510933">)</span><span class="op" id="8510934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510944"><a href="/go/token/position_test.go.html#8510716">stop</a></span><span class="op" id="8510948">.</span><span class="ident" id="8510949">Done</span><span class="op" id="8510953">(</span><span class="op" id="8510954">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510958">}</span><span class="op" id="8510959">(</span><span class="op" id="8510960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8510963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8510966"><a href="/go/token/position_test.go.html#8510716">stop</a></span><span class="op" id="8510970">.</span><span class="ident" id="8510971">Wait</span><span class="op" id="8510975">(</span><span class="op" id="8510976">)</span><br>
<span class="lineno"></span><span class="op" id="8510978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8510981">func</span>&nbsp;<span class="ident" id="8510986">TestPositionFor</span><span class="op" id="8511001">(</span><span class="ident" id="8511002">t</span>&nbsp;<span class="op" id="8511004">*</span><span class="ident" id="8511005"><a href="/go/token/position_test.go.html#8504189">testing</a></span><span class="op" id="8511012">.</span><span class="ident" id="8511013">T</span><span class="op" id="8511014">)</span>&nbsp;<span class="op" id="8511016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511019">src</span>&nbsp;<span class="op" id="8511023">:=</span>&nbsp;<span class="op" id="8511026">[</span><span class="op" id="8511027">]</span><span class="builtintype" id="8511028">byte</span><span class="op" id="8511032">(</span><span class="string" id="8511033">`<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>b<br>
<span class="lineno"></span>ar<br>
<span class="lineno">245</span>//line&nbsp;:100<br>
<span class="lineno"></span>foobar<br>
<span class="lineno"></span>//line&nbsp;bar:3<br>
<span class="lineno"></span>done<br>
<span class="lineno"></span>`</span><span class="op" id="8511082">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8511086">const</span>&nbsp;<span class="ident" id="8511092">filename</span>&nbsp;<span class="op" id="8511101">=</span>&nbsp;<span class="string" id="8511103">&#34;foo&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511110">fset</span>&nbsp;<span class="op" id="8511115">:=</span>&nbsp;<span class="ident" id="8511118"><a href="/go/token/position.go.html#5942340">NewFileSet</a></span><span class="op" id="8511128">(</span><span class="op" id="8511129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511132">f</span>&nbsp;<span class="op" id="8511134">:=</span>&nbsp;<span class="ident" id="8511137"><a href="/go/token/position_test.go.html#8511110">fset</a></span><span class="op" id="8511141">.</span><span class="ident" id="8511142">AddFile</span><span class="op" id="8511149">(</span><span class="ident" id="8511150"><a href="/go/token/position_test.go.html#8511092">filename</a></span><span class="op" id="8511158">,</span>&nbsp;<span class="ident" id="8511160"><a href="/go/token/position_test.go.html#8511110">fset</a></span><span class="op" id="8511164">.</span><span class="ident" id="8511165">Base</span><span class="op" id="8511169">(</span><span class="op" id="8511170">)</span><span class="op" id="8511171">,</span>&nbsp;<span class="builtinfunc" id="8511173">len</span><span class="op" id="8511176">(</span><span class="ident" id="8511177"><a href="/go/token/position_test.go.html#8511019">src</a></span><span class="op" id="8511180">)</span><span class="op" id="8511181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511184"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511185">.</span><span class="ident" id="8511186">SetLinesForContent</span><span class="op" id="8511204">(</span><span class="ident" id="8511205"><a href="/go/token/position_test.go.html#8511019">src</a></span><span class="op" id="8511208">)</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511212">//&nbsp;verify&nbsp;position&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8511237">for</span>&nbsp;<span class="ident" id="8511241">i</span><span class="op" id="8511242">,</span>&nbsp;<span class="ident" id="8511244">offs</span>&nbsp;<span class="op" id="8511249">:=</span>&nbsp;<span class="keyword" id="8511252">range</span>&nbsp;<span class="ident" id="8511258"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511259">.</span><span class="ident" id="8511260">lines</span>&nbsp;<span class="op" id="8511266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511270">got1</span>&nbsp;<span class="op" id="8511275">:=</span>&nbsp;<span class="ident" id="8511278"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511279">.</span><span class="ident" id="8511280">PositionFor</span><span class="op" id="8511291">(</span><span class="ident" id="8511292"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511293">.</span><span class="ident" id="8511294">Pos</span><span class="op" id="8511297">(</span><span class="ident" id="8511298"><a href="/go/token/position_test.go.html#8511244">offs</a></span><span class="op" id="8511302">)</span><span class="op" id="8511303">,</span>&nbsp;<span class="ident" id="8511305">false</span><span class="op" id="8511310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511314">got2</span>&nbsp;<span class="op" id="8511319">:=</span>&nbsp;<span class="ident" id="8511322"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511323">.</span><span class="ident" id="8511324">PositionFor</span><span class="op" id="8511335">(</span><span class="ident" id="8511336"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511337">.</span><span class="ident" id="8511338">Pos</span><span class="op" id="8511341">(</span><span class="ident" id="8511342"><a href="/go/token/position_test.go.html#8511244">offs</a></span><span class="op" id="8511346">)</span><span class="op" id="8511347">,</span>&nbsp;<span class="ident" id="8511349">true</span><span class="op" id="8511353">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511357">got3</span>&nbsp;<span class="op" id="8511362">:=</span>&nbsp;<span class="ident" id="8511365"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511366">.</span><span class="ident" id="8511367">Position</span><span class="op" id="8511375">(</span><span class="ident" id="8511376"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511377">.</span><span class="ident" id="8511378">Pos</span><span class="op" id="8511381">(</span><span class="ident" id="8511382"><a href="/go/token/position_test.go.html#8511244">offs</a></span><span class="op" id="8511386">)</span><span class="op" id="8511387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511391">want</span>&nbsp;<span class="op" id="8511396">:=</span>&nbsp;<span class="ident" id="8511399"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8511407">{</span><span class="ident" id="8511408"><a href="/go/token/position_test.go.html#8511092">filename</a></span><span class="op" id="8511416">,</span>&nbsp;<span class="ident" id="8511418"><a href="/go/token/position_test.go.html#8511244">offs</a></span><span class="op" id="8511422">,</span>&nbsp;<span class="ident" id="8511424"><a href="/go/token/position_test.go.html#8511241">i</a></span>&nbsp;<span class="op" id="8511426">+</span>&nbsp;<span class="num" id="8511428">1</span><span class="op" id="8511429">,</span>&nbsp;<span class="num" id="8511431">1</span><span class="op" id="8511432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511436"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8511444">(</span><span class="ident" id="8511445"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8511446">,</span>&nbsp;<span class="string" id="8511448">&#34;1.&nbsp;PositionFor&nbsp;unadjusted&#34;</span><span class="op" id="8511475">,</span>&nbsp;<span class="ident" id="8511477"><a href="/go/token/position_test.go.html#8511270">got1</a></span><span class="op" id="8511481">,</span>&nbsp;<span class="ident" id="8511483"><a href="/go/token/position_test.go.html#8511391">want</a></span><span class="op" id="8511487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511491"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8511499">(</span><span class="ident" id="8511500"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8511501">,</span>&nbsp;<span class="string" id="8511503">&#34;1.&nbsp;PositionFor&nbsp;adjusted&#34;</span><span class="op" id="8511528">,</span>&nbsp;<span class="ident" id="8511530"><a href="/go/token/position_test.go.html#8511314">got2</a></span><span class="op" id="8511534">,</span>&nbsp;<span class="ident" id="8511536"><a href="/go/token/position_test.go.html#8511391">want</a></span><span class="op" id="8511540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511544"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8511552">(</span><span class="ident" id="8511553"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8511554">,</span>&nbsp;<span class="string" id="8511556">&#34;1.&nbsp;Position&#34;</span><span class="op" id="8511569">,</span>&nbsp;<span class="ident" id="8511571"><a href="/go/token/position_test.go.html#8511357">got3</a></span><span class="op" id="8511575">,</span>&nbsp;<span class="ident" id="8511577"><a href="/go/token/position_test.go.html#8511391">want</a></span><span class="op" id="8511581">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511588">//&nbsp;manually&nbsp;add&nbsp;//line&nbsp;info&nbsp;on&nbsp;lines&nbsp;l1,&nbsp;l2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8511633">const</span>&nbsp;<span class="ident" id="8511639">l1</span><span class="op" id="8511641">,</span>&nbsp;<span class="ident" id="8511643">l2</span>&nbsp;<span class="op" id="8511646">=</span>&nbsp;<span class="num" id="8511648">5</span><span class="op" id="8511649">,</span>&nbsp;<span class="num" id="8511651">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511654"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511655">.</span><span class="ident" id="8511656">AddLineInfo</span><span class="op" id="8511667">(</span><span class="ident" id="8511668"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511669">.</span><span class="ident" id="8511670">lines</span><span class="op" id="8511675">[</span><span class="ident" id="8511676"><a href="/go/token/position_test.go.html#8511639">l1</a></span><span class="op" id="8511678">-</span><span class="num" id="8511679">1</span><span class="op" id="8511680">]</span><span class="op" id="8511681">,</span>&nbsp;<span class="string" id="8511683">&#34;&#34;</span><span class="op" id="8511685">,</span>&nbsp;<span class="num" id="8511687">100</span><span class="op" id="8511690">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511693"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511694">.</span><span class="ident" id="8511695">AddLineInfo</span><span class="op" id="8511706">(</span><span class="ident" id="8511707"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511708">.</span><span class="ident" id="8511709">lines</span><span class="op" id="8511714">[</span><span class="ident" id="8511715"><a href="/go/token/position_test.go.html#8511643">l2</a></span><span class="op" id="8511717">-</span><span class="num" id="8511718">1</span><span class="op" id="8511719">]</span><span class="op" id="8511720">,</span>&nbsp;<span class="string" id="8511722">&#34;bar&#34;</span><span class="op" id="8511727">,</span>&nbsp;<span class="num" id="8511729">3</span><span class="op" id="8511730">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511734">//&nbsp;unadjusted&nbsp;position&nbsp;info&nbsp;must&nbsp;remain&nbsp;unchanged</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8511785">for</span>&nbsp;<span class="ident" id="8511789">i</span><span class="op" id="8511790">,</span>&nbsp;<span class="ident" id="8511792">offs</span>&nbsp;<span class="op" id="8511797">:=</span>&nbsp;<span class="keyword" id="8511800">range</span>&nbsp;<span class="ident" id="8511806"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511807">.</span><span class="ident" id="8511808">lines</span>&nbsp;<span class="op" id="8511814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511818">got1</span>&nbsp;<span class="op" id="8511823">:=</span>&nbsp;<span class="ident" id="8511826"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511827">.</span><span class="ident" id="8511828">PositionFor</span><span class="op" id="8511839">(</span><span class="ident" id="8511840"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8511841">.</span><span class="ident" id="8511842">Pos</span><span class="op" id="8511845">(</span><span class="ident" id="8511846"><a href="/go/token/position_test.go.html#8511792">offs</a></span><span class="op" id="8511850">)</span><span class="op" id="8511851">,</span>&nbsp;<span class="ident" id="8511853">false</span><span class="op" id="8511858">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511862">want</span>&nbsp;<span class="op" id="8511867">:=</span>&nbsp;<span class="ident" id="8511870"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8511878">{</span><span class="ident" id="8511879"><a href="/go/token/position_test.go.html#8511092">filename</a></span><span class="op" id="8511887">,</span>&nbsp;<span class="ident" id="8511889"><a href="/go/token/position_test.go.html#8511792">offs</a></span><span class="op" id="8511893">,</span>&nbsp;<span class="ident" id="8511895"><a href="/go/token/position_test.go.html#8511789">i</a></span>&nbsp;<span class="op" id="8511897">+</span>&nbsp;<span class="num" id="8511899">1</span><span class="op" id="8511900">,</span>&nbsp;<span class="num" id="8511902">1</span><span class="op" id="8511903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8511907"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8511915">(</span><span class="ident" id="8511916"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8511917">,</span>&nbsp;<span class="string" id="8511919">&#34;2.&nbsp;PositionFor&nbsp;unadjusted&#34;</span><span class="op" id="8511946">,</span>&nbsp;<span class="ident" id="8511948"><a href="/go/token/position_test.go.html#8511818">got1</a></span><span class="op" id="8511952">,</span>&nbsp;<span class="ident" id="8511954"><a href="/go/token/position_test.go.html#8511862">want</a></span><span class="op" id="8511958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8511961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8511965">//&nbsp;adjusted&nbsp;position&nbsp;info&nbsp;should&nbsp;have&nbsp;changed</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8512012">for</span>&nbsp;<span class="ident" id="8512016">i</span><span class="op" id="8512017">,</span>&nbsp;<span class="ident" id="8512019">offs</span>&nbsp;<span class="op" id="8512024">:=</span>&nbsp;<span class="keyword" id="8512027">range</span>&nbsp;<span class="ident" id="8512033"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8512034">.</span><span class="ident" id="8512035">lines</span>&nbsp;<span class="op" id="8512041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512045">got2</span>&nbsp;<span class="op" id="8512050">:=</span>&nbsp;<span class="ident" id="8512053"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8512054">.</span><span class="ident" id="8512055">PositionFor</span><span class="op" id="8512066">(</span><span class="ident" id="8512067"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8512068">.</span><span class="ident" id="8512069">Pos</span><span class="op" id="8512072">(</span><span class="ident" id="8512073"><a href="/go/token/position_test.go.html#8512019">offs</a></span><span class="op" id="8512077">)</span><span class="op" id="8512078">,</span>&nbsp;<span class="ident" id="8512080">true</span><span class="op" id="8512084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512088">got3</span>&nbsp;<span class="op" id="8512093">:=</span>&nbsp;<span class="ident" id="8512096"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8512097">.</span><span class="ident" id="8512098">Position</span><span class="op" id="8512106">(</span><span class="ident" id="8512107"><a href="/go/token/position_test.go.html#8511132">f</a></span><span class="op" id="8512108">.</span><span class="ident" id="8512109">Pos</span><span class="op" id="8512112">(</span><span class="ident" id="8512113"><a href="/go/token/position_test.go.html#8512019">offs</a></span><span class="op" id="8512117">)</span><span class="op" id="8512118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512122">want</span>&nbsp;<span class="op" id="8512127">:=</span>&nbsp;<span class="ident" id="8512130"><a href="/go/token/position.go.html#5932658">Position</a></span><span class="op" id="8512138">{</span><span class="ident" id="8512139"><a href="/go/token/position_test.go.html#8511092">filename</a></span><span class="op" id="8512147">,</span>&nbsp;<span class="ident" id="8512149"><a href="/go/token/position_test.go.html#8512019">offs</a></span><span class="op" id="8512153">,</span>&nbsp;<span class="ident" id="8512155"><a href="/go/token/position_test.go.html#8512016">i</a></span>&nbsp;<span class="op" id="8512157">+</span>&nbsp;<span class="num" id="8512159">1</span><span class="op" id="8512160">,</span>&nbsp;<span class="num" id="8512162">1</span><span class="op" id="8512163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8512167">//&nbsp;manually&nbsp;compute&nbsp;wanted&nbsp;filename&nbsp;and&nbsp;line</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512214">line</span>&nbsp;<span class="op" id="8512219">:=</span>&nbsp;<span class="ident" id="8512222"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512226">.</span><span class="ident" id="8512227">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8512234">if</span>&nbsp;<span class="ident" id="8512237"><a href="/go/token/position_test.go.html#8512016">i</a></span><span class="op" id="8512238">+</span><span class="num" id="8512239">1</span>&nbsp;<span class="op" id="8512241">&gt;=</span>&nbsp;<span class="ident" id="8512244"><a href="/go/token/position_test.go.html#8511639">l1</a></span>&nbsp;<span class="op" id="8512247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512252"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512256">.</span><span class="ident" id="8512257">Filename</span>&nbsp;<span class="op" id="8512266">=</span>&nbsp;<span class="string" id="8512268">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512274"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512278">.</span><span class="ident" id="8512279">Line</span>&nbsp;<span class="op" id="8512284">=</span>&nbsp;<span class="ident" id="8512286"><a href="/go/token/position_test.go.html#8512214">line</a></span>&nbsp;<span class="op" id="8512291">-</span>&nbsp;<span class="ident" id="8512293"><a href="/go/token/position_test.go.html#8511639">l1</a></span>&nbsp;<span class="op" id="8512296">+</span>&nbsp;<span class="num" id="8512298">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512304">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8512308">if</span>&nbsp;<span class="ident" id="8512311"><a href="/go/token/position_test.go.html#8512016">i</a></span><span class="op" id="8512312">+</span><span class="num" id="8512313">1</span>&nbsp;<span class="op" id="8512315">&gt;=</span>&nbsp;<span class="ident" id="8512318"><a href="/go/token/position_test.go.html#8511643">l2</a></span>&nbsp;<span class="op" id="8512321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512326"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512330">.</span><span class="ident" id="8512331">Filename</span>&nbsp;<span class="op" id="8512340">=</span>&nbsp;<span class="string" id="8512342">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512351"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512355">.</span><span class="ident" id="8512356">Line</span>&nbsp;<span class="op" id="8512361">=</span>&nbsp;<span class="ident" id="8512363"><a href="/go/token/position_test.go.html#8512214">line</a></span>&nbsp;<span class="op" id="8512368">-</span>&nbsp;<span class="ident" id="8512370"><a href="/go/token/position_test.go.html#8511643">l2</a></span>&nbsp;<span class="op" id="8512373">+</span>&nbsp;<span class="num" id="8512375">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512383"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8512391">(</span><span class="ident" id="8512392"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8512393">,</span>&nbsp;<span class="string" id="8512395">&#34;3.&nbsp;PositionFor&nbsp;adjusted&#34;</span><span class="op" id="8512420">,</span>&nbsp;<span class="ident" id="8512422"><a href="/go/token/position_test.go.html#8512045">got2</a></span><span class="op" id="8512426">,</span>&nbsp;<span class="ident" id="8512428"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512432">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8512436"><a href="/go/token/position_test.go.html#8504207">checkPos</a></span><span class="op" id="8512444">(</span><span class="ident" id="8512445"><a href="/go/token/position_test.go.html#8511002">t</a></span><span class="op" id="8512446">,</span>&nbsp;<span class="string" id="8512448">&#34;3.&nbsp;Position&#34;</span><span class="op" id="8512461">,</span>&nbsp;<span class="ident" id="8512463"><a href="/go/token/position_test.go.html#8512088">got3</a></span><span class="op" id="8512467">,</span>&nbsp;<span class="ident" id="8512469"><a href="/go/token/position_test.go.html#8512122">want</a></span><span class="op" id="8512473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8512476">}</span><br>
<span class="lineno"></span><span class="op" id="8512478">}</span>
</div>
</body>
</html>
