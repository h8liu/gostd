<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3611782">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3611837">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3611891">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3611942">package</span>&nbsp;<span class="ident" id="3611950">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3611960">import</span>&nbsp;<span class="op" id="3611967">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3611970">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3611980">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3611986">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3611997">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3612005">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3612016">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3612031">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3612034">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3612095">var</span>&nbsp;<span class="ident" id="3612099">ErrBadPattern</span>&nbsp;<span class="op" id="3612113">=</span>&nbsp;<span class="ident" id="3612115"><a href="/path/filepath/match.go.html#3611970">errors</a></span><span class="op" id="3612121">.</span><span class="ident" id="3612122">New</span><span class="op" id="3612125">(</span><span class="string" id="3612126">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3612151">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3612154">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3612221">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3612247">//</span><br>
<span class="lineno"></span><span class="comment" id="3612250">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3612262">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3612275">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3612284">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3612349">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3612408">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3612448">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3612500">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3612563">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3612599">//</span><br>
<span class="lineno"></span><span class="comment" id="3612602">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3612622">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3612680">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3612716">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3612770">//</span><br>
<span class="lineno"></span><span class="comment" id="3612773">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3612843">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3612910">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3612927">//</span><br>
<span class="lineno"></span><span class="comment" id="3612930">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3612995">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3613014">//</span><br>
<span class="lineno"></span><span class="keyword" id="3613017">func</span>&nbsp;<span class="ident" id="3613022">Match</span><span class="op" id="3613027">(</span><span class="ident" id="3613028">pattern</span><span class="op" id="3613035">,</span>&nbsp;<span class="ident" id="3613037">name</span>&nbsp;<span class="builtintype" id="3613042">string</span><span class="op" id="3613048">)</span>&nbsp;<span class="op" id="3613050">(</span><span class="ident" id="3613051">matched</span>&nbsp;<span class="builtintype" id="3613059">bool</span><span class="op" id="3613063">,</span>&nbsp;<span class="ident" id="3613065">err</span>&nbsp;<span class="builtintype" id="3613069">error</span><span class="op" id="3613074">)</span>&nbsp;<span class="op" id="3613076">{</span><br>
<span class="lineno">45</span><span class="ident" id="3613078">Pattern</span><span class="op" id="3613085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613088">for</span>&nbsp;<span class="builtinfunc" id="3613092">len</span><span class="op" id="3613095">(</span><span class="ident" id="3613096"><a href="/path/filepath/match.go.html#3613028">pattern</a></span><span class="op" id="3613103">)</span>&nbsp;<span class="op" id="3613105">&gt;</span>&nbsp;<span class="num" id="3613107">0</span>&nbsp;<span class="op" id="3613109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613113">var</span>&nbsp;<span class="ident" id="3613117">star</span>&nbsp;<span class="builtintype" id="3613122">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613129">var</span>&nbsp;<span class="ident" id="3613133">chunk</span>&nbsp;<span class="builtintype" id="3613139">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613148"><a href="/path/filepath/match.go.html#3613117">star</a></span><span class="op" id="3613152">,</span>&nbsp;<span class="ident" id="3613154"><a href="/path/filepath/match.go.html#3613133">chunk</a></span><span class="op" id="3613159">,</span>&nbsp;<span class="ident" id="3613161"><a href="/path/filepath/match.go.html#3613028">pattern</a></span>&nbsp;<span class="op" id="3613169">=</span>&nbsp;<span class="ident" id="3613171"><a href="/path/filepath/match.go.html#3614280">scanChunk</a></span><span class="op" id="3613180">(</span><span class="ident" id="3613181"><a href="/path/filepath/match.go.html#3613028">pattern</a></span><span class="op" id="3613188">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613192">if</span>&nbsp;<span class="ident" id="3613195"><a href="/path/filepath/match.go.html#3613117">star</a></span>&nbsp;<span class="op" id="3613200">&amp;&amp;</span>&nbsp;<span class="ident" id="3613203"><a href="/path/filepath/match.go.html#3613133">chunk</a></span>&nbsp;<span class="op" id="3613209">==</span>&nbsp;<span class="string" id="3613212">&#34;&#34;</span>&nbsp;<span class="op" id="3613215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613220">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613279">return</span>&nbsp;<span class="ident" id="3613286"><a href="/path/filepath/match.go.html#3612005">strings</a></span><span class="op" id="3613293">.</span><span class="ident" id="3613294">Index</span><span class="op" id="3613299">(</span><span class="ident" id="3613300"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3613304">,</span>&nbsp;<span class="builtintype" id="3613306">string</span><span class="op" id="3613312">(</span><span class="ident" id="3613313"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3613322">)</span><span class="op" id="3613323">)</span>&nbsp;<span class="op" id="3613325">&lt;</span>&nbsp;<span class="num" id="3613327">0</span><span class="op" id="3613328">,</span>&nbsp;<span class="ident" id="3613330">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613340">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613381">t</span><span class="op" id="3613382">,</span>&nbsp;<span class="ident" id="3613384">ok</span><span class="op" id="3613386">,</span>&nbsp;<span class="ident" id="3613388">err</span>&nbsp;<span class="op" id="3613392">:=</span>&nbsp;<span class="ident" id="3613395"><a href="/path/filepath/match.go.html#3615031">matchChunk</a></span><span class="op" id="3613405">(</span><span class="ident" id="3613406"><a href="/path/filepath/match.go.html#3613133">chunk</a></span><span class="op" id="3613411">,</span>&nbsp;<span class="ident" id="3613413"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3613417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613421">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613486">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613556">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613576">if</span>&nbsp;<span class="ident" id="3613579"><a href="/path/filepath/match.go.html#3613384">ok</a></span>&nbsp;<span class="op" id="3613582">&amp;&amp;</span>&nbsp;<span class="op" id="3613585">(</span><span class="builtinfunc" id="3613586">len</span><span class="op" id="3613589">(</span><span class="ident" id="3613590"><a href="/path/filepath/match.go.html#3613381">t</a></span><span class="op" id="3613591">)</span>&nbsp;<span class="op" id="3613593">==</span>&nbsp;<span class="num" id="3613596">0</span>&nbsp;<span class="op" id="3613598">||</span>&nbsp;<span class="builtinfunc" id="3613601">len</span><span class="op" id="3613604">(</span><span class="ident" id="3613605"><a href="/path/filepath/match.go.html#3613028">pattern</a></span><span class="op" id="3613612">)</span>&nbsp;<span class="op" id="3613614">&gt;</span>&nbsp;<span class="num" id="3613616">0</span><span class="op" id="3613617">)</span>&nbsp;<span class="op" id="3613619">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613624"><a href="/path/filepath/match.go.html#3613037">name</a></span>&nbsp;<span class="op" id="3613629">=</span>&nbsp;<span class="ident" id="3613631"><a href="/path/filepath/match.go.html#3613381">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613636">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613651">if</span>&nbsp;<span class="ident" id="3613654"><a href="/path/filepath/match.go.html#3613388">err</a></span>&nbsp;<span class="op" id="3613658">!=</span>&nbsp;<span class="ident" id="3613661">nil</span>&nbsp;<span class="op" id="3613665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613670">return</span>&nbsp;<span class="ident" id="3613677">false</span><span class="op" id="3613682">,</span>&nbsp;<span class="ident" id="3613684"><a href="/path/filepath/match.go.html#3613388">err</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613694">if</span>&nbsp;<span class="ident" id="3613697"><a href="/path/filepath/match.go.html#3613117">star</a></span>&nbsp;<span class="op" id="3613702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613707">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613748">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613769">for</span>&nbsp;<span class="ident" id="3613773">i</span>&nbsp;<span class="op" id="3613775">:=</span>&nbsp;<span class="num" id="3613778">0</span><span class="op" id="3613779">;</span>&nbsp;<span class="ident" id="3613781"><a href="/path/filepath/match.go.html#3613773">i</a></span>&nbsp;<span class="op" id="3613783">&lt;</span>&nbsp;<span class="builtinfunc" id="3613785">len</span><span class="op" id="3613788">(</span><span class="ident" id="3613789"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3613793">)</span>&nbsp;<span class="op" id="3613795">&amp;&amp;</span>&nbsp;<span class="ident" id="3613798"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3613802">[</span><span class="ident" id="3613803"><a href="/path/filepath/match.go.html#3613773">i</a></span><span class="op" id="3613804">]</span>&nbsp;<span class="op" id="3613806">!=</span>&nbsp;<span class="ident" id="3613809"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3613818">;</span>&nbsp;<span class="ident" id="3613820"><a href="/path/filepath/match.go.html#3613773">i</a></span><span class="op" id="3613821">++</span>&nbsp;<span class="op" id="3613824">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613830">t</span><span class="op" id="3613831">,</span>&nbsp;<span class="ident" id="3613833">ok</span><span class="op" id="3613835">,</span>&nbsp;<span class="ident" id="3613837">err</span>&nbsp;<span class="op" id="3613841">:=</span>&nbsp;<span class="ident" id="3613844"><a href="/path/filepath/match.go.html#3615031">matchChunk</a></span><span class="op" id="3613854">(</span><span class="ident" id="3613855"><a href="/path/filepath/match.go.html#3613133">chunk</a></span><span class="op" id="3613860">,</span>&nbsp;<span class="ident" id="3613862"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3613866">[</span><span class="ident" id="3613867"><a href="/path/filepath/match.go.html#3613773">i</a></span><span class="op" id="3613868">+</span><span class="num" id="3613869">1</span><span class="op" id="3613870">:</span><span class="op" id="3613871">]</span><span class="op" id="3613872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613878">if</span>&nbsp;<span class="ident" id="3613881"><a href="/path/filepath/match.go.html#3613833">ok</a></span>&nbsp;<span class="op" id="3613884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613891">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613956">if</span>&nbsp;<span class="builtinfunc" id="3613959">len</span><span class="op" id="3613962">(</span><span class="ident" id="3613963"><a href="/path/filepath/match.go.html#3613028">pattern</a></span><span class="op" id="3613970">)</span>&nbsp;<span class="op" id="3613972">==</span>&nbsp;<span class="num" id="3613975">0</span>&nbsp;<span class="op" id="3613977">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3613980">len</span><span class="op" id="3613983">(</span><span class="ident" id="3613984"><a href="/path/filepath/match.go.html#3613830">t</a></span><span class="op" id="3613985">)</span>&nbsp;<span class="op" id="3613987">&gt;</span>&nbsp;<span class="num" id="3613989">0</span>&nbsp;<span class="op" id="3613991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613999">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614020"><a href="/path/filepath/match.go.html#3613037">name</a></span>&nbsp;<span class="op" id="3614025">=</span>&nbsp;<span class="ident" id="3614027"><a href="/path/filepath/match.go.html#3613830">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614034">continue</span>&nbsp;<span class="ident" id="3614043">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614061">if</span>&nbsp;<span class="ident" id="3614064"><a href="/path/filepath/match.go.html#3613837">err</a></span>&nbsp;<span class="op" id="3614068">!=</span>&nbsp;<span class="ident" id="3614071">nil</span>&nbsp;<span class="op" id="3614075">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614082">return</span>&nbsp;<span class="ident" id="3614089">false</span><span class="op" id="3614094">,</span>&nbsp;<span class="ident" id="3614096"><a href="/path/filepath/match.go.html#3613837">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614117">return</span>&nbsp;<span class="ident" id="3614124">false</span><span class="op" id="3614129">,</span>&nbsp;<span class="ident" id="3614131">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614139">return</span>&nbsp;<span class="builtinfunc" id="3614146">len</span><span class="op" id="3614149">(</span><span class="ident" id="3614150"><a href="/path/filepath/match.go.html#3613037">name</a></span><span class="op" id="3614154">)</span>&nbsp;<span class="op" id="3614156">==</span>&nbsp;<span class="num" id="3614159">0</span><span class="op" id="3614160">,</span>&nbsp;<span class="ident" id="3614162">nil</span><br>
<span class="lineno"></span><span class="op" id="3614166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3614169">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3614243">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3614275">func</span>&nbsp;<span class="ident" id="3614280">scanChunk</span><span class="op" id="3614289">(</span><span class="ident" id="3614290">pattern</span>&nbsp;<span class="builtintype" id="3614298">string</span><span class="op" id="3614304">)</span>&nbsp;<span class="op" id="3614306">(</span><span class="ident" id="3614307">star</span>&nbsp;<span class="builtintype" id="3614312">bool</span><span class="op" id="3614316">,</span>&nbsp;<span class="ident" id="3614318">chunk</span><span class="op" id="3614323">,</span>&nbsp;<span class="ident" id="3614325">rest</span>&nbsp;<span class="builtintype" id="3614330">string</span><span class="op" id="3614336">)</span>&nbsp;<span class="op" id="3614338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614341">for</span>&nbsp;<span class="builtinfunc" id="3614345">len</span><span class="op" id="3614348">(</span><span class="ident" id="3614349"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614356">)</span>&nbsp;<span class="op" id="3614358">&gt;</span>&nbsp;<span class="num" id="3614360">0</span>&nbsp;<span class="op" id="3614362">&amp;&amp;</span>&nbsp;<span class="ident" id="3614365"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614372">[</span><span class="num" id="3614373">0</span><span class="op" id="3614374">]</span>&nbsp;<span class="op" id="3614376">==</span>&nbsp;<span class="string" id="3614379">&#39;*&#39;</span>&nbsp;<span class="op" id="3614383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614387"><a href="/path/filepath/match.go.html#3614290">pattern</a></span>&nbsp;<span class="op" id="3614395">=</span>&nbsp;<span class="ident" id="3614397"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614404">[</span><span class="num" id="3614405">1</span><span class="op" id="3614406">:</span><span class="op" id="3614407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614411"><a href="/path/filepath/match.go.html#3614307">star</a></span>&nbsp;<span class="op" id="3614416">=</span>&nbsp;<span class="ident" id="3614418">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614427">inrange</span>&nbsp;<span class="op" id="3614435">:=</span>&nbsp;<span class="ident" id="3614438">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614445">var</span>&nbsp;<span class="ident" id="3614449">i</span>&nbsp;<span class="builtintype" id="3614451">int</span><br>
<span class="lineno"></span><span class="ident" id="3614455">Scan</span><span class="op" id="3614459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614462">for</span>&nbsp;<span class="ident" id="3614466"><a href="/path/filepath/match.go.html#3614449">i</a></span>&nbsp;<span class="op" id="3614468">=</span>&nbsp;<span class="num" id="3614470">0</span><span class="op" id="3614471">;</span>&nbsp;<span class="ident" id="3614473"><a href="/path/filepath/match.go.html#3614449">i</a></span>&nbsp;<span class="op" id="3614475">&lt;</span>&nbsp;<span class="builtinfunc" id="3614477">len</span><span class="op" id="3614480">(</span><span class="ident" id="3614481"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614488">)</span><span class="op" id="3614489">;</span>&nbsp;<span class="ident" id="3614491"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614492">++</span>&nbsp;<span class="op" id="3614495">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614499">switch</span>&nbsp;<span class="ident" id="3614506"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614513">[</span><span class="ident" id="3614514"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614515">]</span>&nbsp;<span class="op" id="3614517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614521">case</span>&nbsp;<span class="string" id="3614526">&#39;\\&#39;</span><span class="op" id="3614530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614535">if</span>&nbsp;<span class="ident" id="3614538"><a href="/path/filepath/match.go.html#3611986">runtime</a></span><span class="op" id="3614545">.</span><span class="ident" id="3614546">GOOS</span>&nbsp;<span class="op" id="3614551">!=</span>&nbsp;<span class="string" id="3614554">&#34;windows&#34;</span>&nbsp;<span class="op" id="3614564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614570">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614625">if</span>&nbsp;<span class="ident" id="3614628"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614629">+</span><span class="num" id="3614630">1</span>&nbsp;<span class="op" id="3614632">&lt;</span>&nbsp;<span class="builtinfunc" id="3614634">len</span><span class="op" id="3614637">(</span><span class="ident" id="3614638"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614645">)</span>&nbsp;<span class="op" id="3614647">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614654"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614655">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614671">case</span>&nbsp;<span class="string" id="3614676">&#39;[&#39;</span><span class="op" id="3614679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614684"><a href="/path/filepath/match.go.html#3614427">inrange</a></span>&nbsp;<span class="op" id="3614692">=</span>&nbsp;<span class="ident" id="3614694">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614701">case</span>&nbsp;<span class="string" id="3614706">&#39;]&#39;</span><span class="op" id="3614709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614714"><a href="/path/filepath/match.go.html#3614427">inrange</a></span>&nbsp;<span class="op" id="3614722">=</span>&nbsp;<span class="ident" id="3614724">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614732">case</span>&nbsp;<span class="string" id="3614737">&#39;*&#39;</span><span class="op" id="3614740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614745">if</span>&nbsp;<span class="op" id="3614748">!</span><span class="ident" id="3614749"><a href="/path/filepath/match.go.html#3614427">inrange</a></span>&nbsp;<span class="op" id="3614757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614763">break</span>&nbsp;<span class="ident" id="3614769">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614787">return</span>&nbsp;<span class="ident" id="3614794"><a href="/path/filepath/match.go.html#3614307">star</a></span><span class="op" id="3614798">,</span>&nbsp;<span class="ident" id="3614800"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614807">[</span><span class="num" id="3614808">0</span><span class="op" id="3614809">:</span><span class="ident" id="3614810"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614811">]</span><span class="op" id="3614812">,</span>&nbsp;<span class="ident" id="3614814"><a href="/path/filepath/match.go.html#3614290">pattern</a></span><span class="op" id="3614821">[</span><span class="ident" id="3614822"><a href="/path/filepath/match.go.html#3614449">i</a></span><span class="op" id="3614823">:</span><span class="op" id="3614824">]</span><br>
<span class="lineno"></span><span class="op" id="3614826">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3614829">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3614892">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3614951">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3615026">func</span>&nbsp;<span class="ident" id="3615031">matchChunk</span><span class="op" id="3615041">(</span><span class="ident" id="3615042">chunk</span><span class="op" id="3615047">,</span>&nbsp;<span class="ident" id="3615049">s</span>&nbsp;<span class="builtintype" id="3615051">string</span><span class="op" id="3615057">)</span>&nbsp;<span class="op" id="3615059">(</span><span class="ident" id="3615060">rest</span>&nbsp;<span class="builtintype" id="3615065">string</span><span class="op" id="3615071">,</span>&nbsp;<span class="ident" id="3615073">ok</span>&nbsp;<span class="builtintype" id="3615076">bool</span><span class="op" id="3615080">,</span>&nbsp;<span class="ident" id="3615082">err</span>&nbsp;<span class="builtintype" id="3615086">error</span><span class="op" id="3615091">)</span>&nbsp;<span class="op" id="3615093">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615096">for</span>&nbsp;<span class="builtinfunc" id="3615100">len</span><span class="op" id="3615103">(</span><span class="ident" id="3615104"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615109">)</span>&nbsp;<span class="op" id="3615111">&gt;</span>&nbsp;<span class="num" id="3615113">0</span>&nbsp;<span class="op" id="3615115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615119">if</span>&nbsp;<span class="builtinfunc" id="3615122">len</span><span class="op" id="3615125">(</span><span class="ident" id="3615126"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3615127">)</span>&nbsp;<span class="op" id="3615129">==</span>&nbsp;<span class="num" id="3615132">0</span>&nbsp;<span class="op" id="3615134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615139">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615152">switch</span>&nbsp;<span class="ident" id="3615159"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615164">[</span><span class="num" id="3615165">0</span><span class="op" id="3615166">]</span>&nbsp;<span class="op" id="3615168">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615172">case</span>&nbsp;<span class="string" id="3615177">&#39;[&#39;</span><span class="op" id="3615180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615185">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615207">r</span><span class="op" id="3615208">,</span>&nbsp;<span class="ident" id="3615210">n</span>&nbsp;<span class="op" id="3615212">:=</span>&nbsp;<span class="ident" id="3615215"><a href="/path/filepath/match.go.html#3612016">utf8</a></span><span class="op" id="3615219">.</span><span class="ident" id="3615220">DecodeRuneInString</span><span class="op" id="3615238">(</span><span class="ident" id="3615239"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3615240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615245"><a href="/path/filepath/match.go.html#3615049">s</a></span>&nbsp;<span class="op" id="3615247">=</span>&nbsp;<span class="ident" id="3615249"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3615250">[</span><span class="ident" id="3615251"><a href="/path/filepath/match.go.html#3615210">n</a></span><span class="op" id="3615252">:</span><span class="op" id="3615253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615258"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3615264">=</span>&nbsp;<span class="ident" id="3615266"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615271">[</span><span class="num" id="3615272">1</span><span class="op" id="3615273">:</span><span class="op" id="3615274">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615279">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615340">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615386">if</span>&nbsp;<span class="builtinfunc" id="3615389">len</span><span class="op" id="3615392">(</span><span class="ident" id="3615393"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615398">)</span>&nbsp;<span class="op" id="3615400">==</span>&nbsp;<span class="num" id="3615403">0</span>&nbsp;<span class="op" id="3615405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615411"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3615415">=</span>&nbsp;<span class="ident" id="3615417"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615435">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615450">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615473">negated</span>&nbsp;<span class="op" id="3615481">:=</span>&nbsp;<span class="ident" id="3615484"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615489">[</span><span class="num" id="3615490">0</span><span class="op" id="3615491">]</span>&nbsp;<span class="op" id="3615493">==</span>&nbsp;<span class="string" id="3615496">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615503">if</span>&nbsp;<span class="ident" id="3615506"><a href="/path/filepath/match.go.html#3615473">negated</a></span>&nbsp;<span class="op" id="3615514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615520"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3615526">=</span>&nbsp;<span class="ident" id="3615528"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615533">[</span><span class="num" id="3615534">1</span><span class="op" id="3615535">:</span><span class="op" id="3615536">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615546">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615569">match</span>&nbsp;<span class="op" id="3615575">:=</span>&nbsp;<span class="ident" id="3615578">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615587">nrange</span>&nbsp;<span class="op" id="3615594">:=</span>&nbsp;<span class="num" id="3615597">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615602">for</span>&nbsp;<span class="op" id="3615606">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615612">if</span>&nbsp;<span class="builtinfunc" id="3615615">len</span><span class="op" id="3615618">(</span><span class="ident" id="3615619"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615624">)</span>&nbsp;<span class="op" id="3615626">&gt;</span>&nbsp;<span class="num" id="3615628">0</span>&nbsp;<span class="op" id="3615630">&amp;&amp;</span>&nbsp;<span class="ident" id="3615633"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615638">[</span><span class="num" id="3615639">0</span><span class="op" id="3615640">]</span>&nbsp;<span class="op" id="3615642">==</span>&nbsp;<span class="string" id="3615645">&#39;]&#39;</span>&nbsp;<span class="op" id="3615649">&amp;&amp;</span>&nbsp;<span class="ident" id="3615652"><a href="/path/filepath/match.go.html#3615587">nrange</a></span>&nbsp;<span class="op" id="3615659">&gt;</span>&nbsp;<span class="num" id="3615661">0</span>&nbsp;<span class="op" id="3615663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615670"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3615676">=</span>&nbsp;<span class="ident" id="3615678"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615683">[</span><span class="num" id="3615684">1</span><span class="op" id="3615685">:</span><span class="op" id="3615686">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615693">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615709">var</span>&nbsp;<span class="ident" id="3615713">lo</span><span class="op" id="3615715">,</span>&nbsp;<span class="ident" id="3615717">hi</span>&nbsp;<span class="builtintype" id="3615720">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615729">if</span>&nbsp;<span class="ident" id="3615732"><a href="/path/filepath/match.go.html#3615713">lo</a></span><span class="op" id="3615734">,</span>&nbsp;<span class="ident" id="3615736"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615741">,</span>&nbsp;<span class="ident" id="3615743"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3615747">=</span>&nbsp;<span class="ident" id="3615749"><a href="/path/filepath/match.go.html#3616513">getEsc</a></span><span class="op" id="3615755">(</span><span class="ident" id="3615756"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615761">)</span><span class="op" id="3615762">;</span>&nbsp;<span class="ident" id="3615764"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3615768">!=</span>&nbsp;<span class="ident" id="3615771">nil</span>&nbsp;<span class="op" id="3615775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615782">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615799"><a href="/path/filepath/match.go.html#3615717">hi</a></span>&nbsp;<span class="op" id="3615802">=</span>&nbsp;<span class="ident" id="3615804"><a href="/path/filepath/match.go.html#3615713">lo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615811">if</span>&nbsp;<span class="ident" id="3615814"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615819">[</span><span class="num" id="3615820">0</span><span class="op" id="3615821">]</span>&nbsp;<span class="op" id="3615823">==</span>&nbsp;<span class="string" id="3615826">&#39;-&#39;</span>&nbsp;<span class="op" id="3615830">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615837">if</span>&nbsp;<span class="ident" id="3615840"><a href="/path/filepath/match.go.html#3615717">hi</a></span><span class="op" id="3615842">,</span>&nbsp;<span class="ident" id="3615844"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615849">,</span>&nbsp;<span class="ident" id="3615851"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3615855">=</span>&nbsp;<span class="ident" id="3615857"><a href="/path/filepath/match.go.html#3616513">getEsc</a></span><span class="op" id="3615863">(</span><span class="ident" id="3615864"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3615869">[</span><span class="num" id="3615870">1</span><span class="op" id="3615871">:</span><span class="op" id="3615872">]</span><span class="op" id="3615873">)</span><span class="op" id="3615874">;</span>&nbsp;<span class="ident" id="3615876"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3615880">!=</span>&nbsp;<span class="ident" id="3615883">nil</span>&nbsp;<span class="op" id="3615887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615895">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615919">if</span>&nbsp;<span class="ident" id="3615922"><a href="/path/filepath/match.go.html#3615713">lo</a></span>&nbsp;<span class="op" id="3615925">&lt;=</span>&nbsp;<span class="ident" id="3615928"><a href="/path/filepath/match.go.html#3615207">r</a></span>&nbsp;<span class="op" id="3615930">&amp;&amp;</span>&nbsp;<span class="ident" id="3615933"><a href="/path/filepath/match.go.html#3615207">r</a></span>&nbsp;<span class="op" id="3615935">&lt;=</span>&nbsp;<span class="ident" id="3615938"><a href="/path/filepath/match.go.html#3615717">hi</a></span>&nbsp;<span class="op" id="3615941">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615948"><a href="/path/filepath/match.go.html#3615569">match</a></span>&nbsp;<span class="op" id="3615954">=</span>&nbsp;<span class="ident" id="3615956">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615971"><a href="/path/filepath/match.go.html#3615587">nrange</a></span><span class="op" id="3615977">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615988">if</span>&nbsp;<span class="ident" id="3615991"><a href="/path/filepath/match.go.html#3615569">match</a></span>&nbsp;<span class="op" id="3615997">==</span>&nbsp;<span class="ident" id="3616000"><a href="/path/filepath/match.go.html#3615473">negated</a></span>&nbsp;<span class="op" id="3616008">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616014">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616029">case</span>&nbsp;<span class="string" id="3616034">&#39;?&#39;</span><span class="op" id="3616037">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616042">if</span>&nbsp;<span class="ident" id="3616045"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616046">[</span><span class="num" id="3616047">0</span><span class="op" id="3616048">]</span>&nbsp;<span class="op" id="3616050">==</span>&nbsp;<span class="ident" id="3616053"><a href="/path/filepath/path.go.html#3620100">Separator</a></span>&nbsp;<span class="op" id="3616063">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616069">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616084">_</span><span class="op" id="3616085">,</span>&nbsp;<span class="ident" id="3616087">n</span>&nbsp;<span class="op" id="3616089">:=</span>&nbsp;<span class="ident" id="3616092"><a href="/path/filepath/match.go.html#3612016">utf8</a></span><span class="op" id="3616096">.</span><span class="ident" id="3616097">DecodeRuneInString</span><span class="op" id="3616115">(</span><span class="ident" id="3616116"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616122"><a href="/path/filepath/match.go.html#3615049">s</a></span>&nbsp;<span class="op" id="3616124">=</span>&nbsp;<span class="ident" id="3616126"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616127">[</span><span class="ident" id="3616128"><a href="/path/filepath/match.go.html#3616087">n</a></span><span class="op" id="3616129">:</span><span class="op" id="3616130">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616135"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3616141">=</span>&nbsp;<span class="ident" id="3616143"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3616148">[</span><span class="num" id="3616149">1</span><span class="op" id="3616150">:</span><span class="op" id="3616151">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616156">case</span>&nbsp;<span class="string" id="3616161">&#39;\\&#39;</span><span class="op" id="3616165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616170">if</span>&nbsp;<span class="ident" id="3616173"><a href="/path/filepath/match.go.html#3611986">runtime</a></span><span class="op" id="3616180">.</span><span class="ident" id="3616181">GOOS</span>&nbsp;<span class="op" id="3616186">!=</span>&nbsp;<span class="string" id="3616189">&#34;windows&#34;</span>&nbsp;<span class="op" id="3616199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616205"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3616211">=</span>&nbsp;<span class="ident" id="3616213"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3616218">[</span><span class="num" id="3616219">1</span><span class="op" id="3616220">:</span><span class="op" id="3616221">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616227">if</span>&nbsp;<span class="builtinfunc" id="3616230">len</span><span class="op" id="3616233">(</span><span class="ident" id="3616234"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3616239">)</span>&nbsp;<span class="op" id="3616241">==</span>&nbsp;<span class="num" id="3616244">0</span>&nbsp;<span class="op" id="3616246">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616253"><a href="/path/filepath/match.go.html#3615082">err</a></span>&nbsp;<span class="op" id="3616257">=</span>&nbsp;<span class="ident" id="3616259"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616278">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616299">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616314">default</span><span class="op" id="3616321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616326">if</span>&nbsp;<span class="ident" id="3616329"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3616334">[</span><span class="num" id="3616335">0</span><span class="op" id="3616336">]</span>&nbsp;<span class="op" id="3616338">!=</span>&nbsp;<span class="ident" id="3616341"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616342">[</span><span class="num" id="3616343">0</span><span class="op" id="3616344">]</span>&nbsp;<span class="op" id="3616346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616352">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616362">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616367"><a href="/path/filepath/match.go.html#3615049">s</a></span>&nbsp;<span class="op" id="3616369">=</span>&nbsp;<span class="ident" id="3616371"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616372">[</span><span class="num" id="3616373">1</span><span class="op" id="3616374">:</span><span class="op" id="3616375">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616380"><a href="/path/filepath/match.go.html#3615042">chunk</a></span>&nbsp;<span class="op" id="3616386">=</span>&nbsp;<span class="ident" id="3616388"><a href="/path/filepath/match.go.html#3615042">chunk</a></span><span class="op" id="3616393">[</span><span class="num" id="3616394">1</span><span class="op" id="3616395">:</span><span class="op" id="3616396">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616406">return</span>&nbsp;<span class="ident" id="3616413"><a href="/path/filepath/match.go.html#3615049">s</a></span><span class="op" id="3616414">,</span>&nbsp;<span class="ident" id="3616416">true</span><span class="op" id="3616420">,</span>&nbsp;<span class="ident" id="3616422">nil</span><br>
<span class="lineno">200</span><span class="op" id="3616426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3616429">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3616508">func</span>&nbsp;<span class="ident" id="3616513">getEsc</span><span class="op" id="3616519">(</span><span class="ident" id="3616520">chunk</span>&nbsp;<span class="builtintype" id="3616526">string</span><span class="op" id="3616532">)</span>&nbsp;<span class="op" id="3616534">(</span><span class="ident" id="3616535">r</span>&nbsp;<span class="builtintype" id="3616537">rune</span><span class="op" id="3616541">,</span>&nbsp;<span class="ident" id="3616543">nchunk</span>&nbsp;<span class="builtintype" id="3616550">string</span><span class="op" id="3616556">,</span>&nbsp;<span class="ident" id="3616558">err</span>&nbsp;<span class="builtintype" id="3616562">error</span><span class="op" id="3616567">)</span>&nbsp;<span class="op" id="3616569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616572">if</span>&nbsp;<span class="builtinfunc" id="3616575">len</span><span class="op" id="3616578">(</span><span class="ident" id="3616579"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616584">)</span>&nbsp;<span class="op" id="3616586">==</span>&nbsp;<span class="num" id="3616589">0</span>&nbsp;<span class="op" id="3616591">||</span>&nbsp;<span class="ident" id="3616594"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616599">[</span><span class="num" id="3616600">0</span><span class="op" id="3616601">]</span>&nbsp;<span class="op" id="3616603">==</span>&nbsp;<span class="string" id="3616606">&#39;-&#39;</span>&nbsp;<span class="op" id="3616610">||</span>&nbsp;<span class="ident" id="3616613"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616618">[</span><span class="num" id="3616619">0</span><span class="op" id="3616620">]</span>&nbsp;<span class="op" id="3616622">==</span>&nbsp;<span class="string" id="3616625">&#39;]&#39;</span>&nbsp;<span class="op" id="3616629">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616633"><a href="/path/filepath/match.go.html#3616558">err</a></span>&nbsp;<span class="op" id="3616637">=</span>&nbsp;<span class="ident" id="3616639"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616655">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616666">if</span>&nbsp;<span class="ident" id="3616669"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616674">[</span><span class="num" id="3616675">0</span><span class="op" id="3616676">]</span>&nbsp;<span class="op" id="3616678">==</span>&nbsp;<span class="string" id="3616681">&#39;\\&#39;</span>&nbsp;<span class="op" id="3616686">&amp;&amp;</span>&nbsp;<span class="ident" id="3616689"><a href="/path/filepath/match.go.html#3611986">runtime</a></span><span class="op" id="3616696">.</span><span class="ident" id="3616697">GOOS</span>&nbsp;<span class="op" id="3616702">!=</span>&nbsp;<span class="string" id="3616705">&#34;windows&#34;</span>&nbsp;<span class="op" id="3616715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616719"><a href="/path/filepath/match.go.html#3616520">chunk</a></span>&nbsp;<span class="op" id="3616725">=</span>&nbsp;<span class="ident" id="3616727"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616732">[</span><span class="num" id="3616733">1</span><span class="op" id="3616734">:</span><span class="op" id="3616735">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616739">if</span>&nbsp;<span class="builtinfunc" id="3616742">len</span><span class="op" id="3616745">(</span><span class="ident" id="3616746"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616751">)</span>&nbsp;<span class="op" id="3616753">==</span>&nbsp;<span class="num" id="3616756">0</span>&nbsp;<span class="op" id="3616758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616763"><a href="/path/filepath/match.go.html#3616558">err</a></span>&nbsp;<span class="op" id="3616767">=</span>&nbsp;<span class="ident" id="3616769"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616786">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616798">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616801"><a href="/path/filepath/match.go.html#3616535">r</a></span><span class="op" id="3616802">,</span>&nbsp;<span class="ident" id="3616804">n</span>&nbsp;<span class="op" id="3616806">:=</span>&nbsp;<span class="ident" id="3616809"><a href="/path/filepath/match.go.html#3612016">utf8</a></span><span class="op" id="3616813">.</span><span class="ident" id="3616814">DecodeRuneInString</span><span class="op" id="3616832">(</span><span class="ident" id="3616833"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616841">if</span>&nbsp;<span class="ident" id="3616844"><a href="/path/filepath/match.go.html#3616535">r</a></span>&nbsp;<span class="op" id="3616846">==</span>&nbsp;<span class="ident" id="3616849"><a href="/path/filepath/match.go.html#3612016">utf8</a></span><span class="op" id="3616853">.</span><span class="ident" id="3616854">RuneError</span>&nbsp;<span class="op" id="3616864">&amp;&amp;</span>&nbsp;<span class="ident" id="3616867"><a href="/path/filepath/match.go.html#3616804">n</a></span>&nbsp;<span class="op" id="3616869">==</span>&nbsp;<span class="num" id="3616872">1</span>&nbsp;<span class="op" id="3616874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616878"><a href="/path/filepath/match.go.html#3616558">err</a></span>&nbsp;<span class="op" id="3616882">=</span>&nbsp;<span class="ident" id="3616884"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616902"><a href="/path/filepath/match.go.html#3616543">nchunk</a></span>&nbsp;<span class="op" id="3616909">=</span>&nbsp;<span class="ident" id="3616911"><a href="/path/filepath/match.go.html#3616520">chunk</a></span><span class="op" id="3616916">[</span><span class="ident" id="3616917"><a href="/path/filepath/match.go.html#3616804">n</a></span><span class="op" id="3616918">:</span><span class="op" id="3616919">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616922">if</span>&nbsp;<span class="builtinfunc" id="3616925">len</span><span class="op" id="3616928">(</span><span class="ident" id="3616929"><a href="/path/filepath/match.go.html#3616543">nchunk</a></span><span class="op" id="3616935">)</span>&nbsp;<span class="op" id="3616937">==</span>&nbsp;<span class="num" id="3616940">0</span>&nbsp;<span class="op" id="3616942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616946"><a href="/path/filepath/match.go.html#3616558">err</a></span>&nbsp;<span class="op" id="3616950">=</span>&nbsp;<span class="ident" id="3616952"><a href="/path/filepath/match.go.html#3612099">ErrBadPattern</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616970">return</span><br>
<span class="lineno"></span><span class="op" id="3616977">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3616980">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3617043">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3617111">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3617179">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3617229">//</span><br>
<span class="lineno"></span><span class="comment" id="3617232">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3617307">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3617374">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3617391">func</span>&nbsp;<span class="ident" id="3617396">Glob</span><span class="op" id="3617400">(</span><span class="ident" id="3617401">pattern</span>&nbsp;<span class="builtintype" id="3617409">string</span><span class="op" id="3617415">)</span>&nbsp;<span class="op" id="3617417">(</span><span class="ident" id="3617418">matches</span>&nbsp;<span class="op" id="3617426">[</span><span class="op" id="3617427">]</span><span class="builtintype" id="3617428">string</span><span class="op" id="3617434">,</span>&nbsp;<span class="ident" id="3617436">err</span>&nbsp;<span class="builtintype" id="3617440">error</span><span class="op" id="3617445">)</span>&nbsp;<span class="op" id="3617447">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617450">if</span>&nbsp;<span class="op" id="3617453">!</span><span class="ident" id="3617454"><a href="/path/filepath/match.go.html#3618760">hasMeta</a></span><span class="op" id="3617461">(</span><span class="ident" id="3617462"><a href="/path/filepath/match.go.html#3617401">pattern</a></span><span class="op" id="3617469">)</span>&nbsp;<span class="op" id="3617471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617475">if</span>&nbsp;<span class="ident" id="3617478">_</span><span class="op" id="3617479">,</span>&nbsp;<span class="ident" id="3617481"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617485">=</span>&nbsp;<span class="ident" id="3617487"><a href="/path/filepath/match.go.html#3611980">os</a></span><span class="op" id="3617489">.</span><span class="ident" id="3617490">Lstat</span><span class="op" id="3617495">(</span><span class="ident" id="3617496"><a href="/path/filepath/match.go.html#3617401">pattern</a></span><span class="op" id="3617503">)</span><span class="op" id="3617504">;</span>&nbsp;<span class="ident" id="3617506"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617510">!=</span>&nbsp;<span class="ident" id="3617513">nil</span>&nbsp;<span class="op" id="3617517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617522">return</span>&nbsp;<span class="ident" id="3617529">nil</span><span class="op" id="3617532">,</span>&nbsp;<span class="ident" id="3617534">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617544">return</span>&nbsp;<span class="op" id="3617551">[</span><span class="op" id="3617552">]</span><span class="builtintype" id="3617553">string</span><span class="op" id="3617559">{</span><span class="ident" id="3617560"><a href="/path/filepath/match.go.html#3617401">pattern</a></span><span class="op" id="3617567">}</span><span class="op" id="3617568">,</span>&nbsp;<span class="ident" id="3617570">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617579">dir</span><span class="op" id="3617582">,</span>&nbsp;<span class="ident" id="3617584">file</span>&nbsp;<span class="op" id="3617589">:=</span>&nbsp;<span class="ident" id="3617592"><a href="/path/filepath/path.go.html#3624047">Split</a></span><span class="op" id="3617597">(</span><span class="ident" id="3617598"><a href="/path/filepath/match.go.html#3617401">pattern</a></span><span class="op" id="3617605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617608">switch</span>&nbsp;<span class="ident" id="3617615"><a href="/path/filepath/match.go.html#3617579">dir</a></span>&nbsp;<span class="op" id="3617619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617622">case</span>&nbsp;<span class="string" id="3617627">&#34;&#34;</span><span class="op" id="3617629">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617633"><a href="/path/filepath/match.go.html#3617579">dir</a></span>&nbsp;<span class="op" id="3617637">=</span>&nbsp;<span class="string" id="3617639">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617644">case</span>&nbsp;<span class="builtintype" id="3617649">string</span><span class="op" id="3617655">(</span><span class="ident" id="3617656"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3617665">)</span><span class="op" id="3617666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3617670">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617682">default</span><span class="op" id="3617689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617693"><a href="/path/filepath/match.go.html#3617579">dir</a></span>&nbsp;<span class="op" id="3617697">=</span>&nbsp;<span class="ident" id="3617699"><a href="/path/filepath/match.go.html#3617579">dir</a></span><span class="op" id="3617702">[</span><span class="num" id="3617703">0</span>&nbsp;<span class="op" id="3617705">:</span>&nbsp;<span class="builtinfunc" id="3617707">len</span><span class="op" id="3617710">(</span><span class="ident" id="3617711"><a href="/path/filepath/match.go.html#3617579">dir</a></span><span class="op" id="3617714">)</span><span class="op" id="3617715">-</span><span class="num" id="3617716">1</span><span class="op" id="3617717">]</span>&nbsp;<span class="comment" id="3617719">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617755">if</span>&nbsp;<span class="op" id="3617758">!</span><span class="ident" id="3617759"><a href="/path/filepath/match.go.html#3618760">hasMeta</a></span><span class="op" id="3617766">(</span><span class="ident" id="3617767"><a href="/path/filepath/match.go.html#3617579">dir</a></span><span class="op" id="3617770">)</span>&nbsp;<span class="op" id="3617772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617776">return</span>&nbsp;<span class="ident" id="3617783"><a href="/path/filepath/match.go.html#3618206">glob</a></span><span class="op" id="3617787">(</span><span class="ident" id="3617788"><a href="/path/filepath/match.go.html#3617579">dir</a></span><span class="op" id="3617791">,</span>&nbsp;<span class="ident" id="3617793"><a href="/path/filepath/match.go.html#3617584">file</a></span><span class="op" id="3617797">,</span>&nbsp;<span class="ident" id="3617799">nil</span><span class="op" id="3617802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617805">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617809">var</span>&nbsp;<span class="ident" id="3617813">m</span>&nbsp;<span class="op" id="3617815">[</span><span class="op" id="3617816">]</span><span class="builtintype" id="3617817">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617825"><a href="/path/filepath/match.go.html#3617813">m</a></span><span class="op" id="3617826">,</span>&nbsp;<span class="ident" id="3617828"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617832">=</span>&nbsp;<span class="ident" id="3617834"><a href="/path/filepath/match.go.html#3617396">Glob</a></span><span class="op" id="3617838">(</span><span class="ident" id="3617839"><a href="/path/filepath/match.go.html#3617579">dir</a></span><span class="op" id="3617842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617845">if</span>&nbsp;<span class="ident" id="3617848"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617852">!=</span>&nbsp;<span class="ident" id="3617855">nil</span>&nbsp;<span class="op" id="3617859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617863">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617874">for</span>&nbsp;<span class="ident" id="3617878">_</span><span class="op" id="3617879">,</span>&nbsp;<span class="ident" id="3617881">d</span>&nbsp;<span class="op" id="3617883">:=</span>&nbsp;<span class="keyword" id="3617886">range</span>&nbsp;<span class="ident" id="3617892"><a href="/path/filepath/match.go.html#3617813">m</a></span>&nbsp;<span class="op" id="3617894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617898"><a href="/path/filepath/match.go.html#3617418">matches</a></span><span class="op" id="3617905">,</span>&nbsp;<span class="ident" id="3617907"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617911">=</span>&nbsp;<span class="ident" id="3617913"><a href="/path/filepath/match.go.html#3618206">glob</a></span><span class="op" id="3617917">(</span><span class="ident" id="3617918"><a href="/path/filepath/match.go.html#3617881">d</a></span><span class="op" id="3617919">,</span>&nbsp;<span class="ident" id="3617921"><a href="/path/filepath/match.go.html#3617584">file</a></span><span class="op" id="3617925">,</span>&nbsp;<span class="ident" id="3617927"><a href="/path/filepath/match.go.html#3617418">matches</a></span><span class="op" id="3617934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617938">if</span>&nbsp;<span class="ident" id="3617941"><a href="/path/filepath/match.go.html#3617436">err</a></span>&nbsp;<span class="op" id="3617945">!=</span>&nbsp;<span class="ident" id="3617948">nil</span>&nbsp;<span class="op" id="3617952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617957">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617972">return</span><br>
<span class="lineno"></span><span class="op" id="3617979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3617982">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3618047">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3618106">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3618166">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3618201">func</span>&nbsp;<span class="ident" id="3618206">glob</span><span class="op" id="3618210">(</span><span class="ident" id="3618211">dir</span><span class="op" id="3618214">,</span>&nbsp;<span class="ident" id="3618216">pattern</span>&nbsp;<span class="builtintype" id="3618224">string</span><span class="op" id="3618230">,</span>&nbsp;<span class="ident" id="3618232">matches</span>&nbsp;<span class="op" id="3618240">[</span><span class="op" id="3618241">]</span><span class="builtintype" id="3618242">string</span><span class="op" id="3618248">)</span>&nbsp;<span class="op" id="3618250">(</span><span class="ident" id="3618251">m</span>&nbsp;<span class="op" id="3618253">[</span><span class="op" id="3618254">]</span><span class="builtintype" id="3618255">string</span><span class="op" id="3618261">,</span>&nbsp;<span class="ident" id="3618263">e</span>&nbsp;<span class="builtintype" id="3618265">error</span><span class="op" id="3618270">)</span>&nbsp;<span class="op" id="3618272">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618275"><a href="/path/filepath/match.go.html#3618251">m</a></span>&nbsp;<span class="op" id="3618277">=</span>&nbsp;<span class="ident" id="3618279"><a href="/path/filepath/match.go.html#3618232">matches</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618288">fi</span><span class="op" id="3618290">,</span>&nbsp;<span class="ident" id="3618292">err</span>&nbsp;<span class="op" id="3618296">:=</span>&nbsp;<span class="ident" id="3618299"><a href="/path/filepath/match.go.html#3611980">os</a></span><span class="op" id="3618301">.</span><span class="ident" id="3618302">Stat</span><span class="op" id="3618306">(</span><span class="ident" id="3618307"><a href="/path/filepath/match.go.html#3618211">dir</a></span><span class="op" id="3618310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618313">if</span>&nbsp;<span class="ident" id="3618316"><a href="/path/filepath/match.go.html#3618292">err</a></span>&nbsp;<span class="op" id="3618320">!=</span>&nbsp;<span class="ident" id="3618323">nil</span>&nbsp;<span class="op" id="3618327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618331">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618339">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618342">if</span>&nbsp;<span class="op" id="3618345">!</span><span class="ident" id="3618346"><a href="/path/filepath/match.go.html#3618288">fi</a></span><span class="op" id="3618348">.</span><span class="ident" id="3618349">IsDir</span><span class="op" id="3618354">(</span><span class="op" id="3618355">)</span>&nbsp;<span class="op" id="3618357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618361">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618372">d</span><span class="op" id="3618373">,</span>&nbsp;<span class="ident" id="3618375"><a href="/path/filepath/match.go.html#3618292">err</a></span>&nbsp;<span class="op" id="3618379">:=</span>&nbsp;<span class="ident" id="3618382"><a href="/path/filepath/match.go.html#3611980">os</a></span><span class="op" id="3618384">.</span><span class="ident" id="3618385">Open</span><span class="op" id="3618389">(</span><span class="ident" id="3618390"><a href="/path/filepath/match.go.html#3618211">dir</a></span><span class="op" id="3618393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618396">if</span>&nbsp;<span class="ident" id="3618399"><a href="/path/filepath/match.go.html#3618292">err</a></span>&nbsp;<span class="op" id="3618403">!=</span>&nbsp;<span class="ident" id="3618406">nil</span>&nbsp;<span class="op" id="3618410">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618414">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618425">defer</span>&nbsp;<span class="ident" id="3618431"><a href="/path/filepath/match.go.html#3618372">d</a></span><span class="op" id="3618432">.</span><span class="ident" id="3618433">Close</span><span class="op" id="3618438">(</span><span class="op" id="3618439">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618443">names</span><span class="op" id="3618448">,</span>&nbsp;<span class="ident" id="3618450">_</span>&nbsp;<span class="op" id="3618452">:=</span>&nbsp;<span class="ident" id="3618455"><a href="/path/filepath/match.go.html#3618372">d</a></span><span class="op" id="3618456">.</span><span class="ident" id="3618457">Readdirnames</span><span class="op" id="3618469">(</span><span class="op" id="3618470">-</span><span class="num" id="3618471">1</span><span class="op" id="3618472">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618475"><a href="/path/filepath/match.go.html#3611997">sort</a></span><span class="op" id="3618479">.</span><span class="ident" id="3618480">Strings</span><span class="op" id="3618487">(</span><span class="ident" id="3618488"><a href="/path/filepath/match.go.html#3618443">names</a></span><span class="op" id="3618493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618497">for</span>&nbsp;<span class="ident" id="3618501">_</span><span class="op" id="3618502">,</span>&nbsp;<span class="ident" id="3618504">n</span>&nbsp;<span class="op" id="3618506">:=</span>&nbsp;<span class="keyword" id="3618509">range</span>&nbsp;<span class="ident" id="3618515"><a href="/path/filepath/match.go.html#3618443">names</a></span>&nbsp;<span class="op" id="3618521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618525">matched</span><span class="op" id="3618532">,</span>&nbsp;<span class="ident" id="3618534">err</span>&nbsp;<span class="op" id="3618538">:=</span>&nbsp;<span class="ident" id="3618541"><a href="/path/filepath/match.go.html#3613022">Match</a></span><span class="op" id="3618546">(</span><span class="ident" id="3618547"><a href="/path/filepath/match.go.html#3618216">pattern</a></span><span class="op" id="3618554">,</span>&nbsp;<span class="ident" id="3618556"><a href="/path/filepath/match.go.html#3618504">n</a></span><span class="op" id="3618557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618561">if</span>&nbsp;<span class="ident" id="3618564"><a href="/path/filepath/match.go.html#3618534">err</a></span>&nbsp;<span class="op" id="3618568">!=</span>&nbsp;<span class="ident" id="3618571">nil</span>&nbsp;<span class="op" id="3618575">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618580">return</span>&nbsp;<span class="ident" id="3618587"><a href="/path/filepath/match.go.html#3618251">m</a></span><span class="op" id="3618588">,</span>&nbsp;<span class="ident" id="3618590"><a href="/path/filepath/match.go.html#3618534">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618600">if</span>&nbsp;<span class="ident" id="3618603"><a href="/path/filepath/match.go.html#3618525">matched</a></span>&nbsp;<span class="op" id="3618611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618616"><a href="/path/filepath/match.go.html#3618251">m</a></span>&nbsp;<span class="op" id="3618618">=</span>&nbsp;<span class="builtinfunc" id="3618620">append</span><span class="op" id="3618626">(</span><span class="ident" id="3618627"><a href="/path/filepath/match.go.html#3618251">m</a></span><span class="op" id="3618628">,</span>&nbsp;<span class="ident" id="3618630"><a href="/path/filepath/path.go.html#3624402">Join</a></span><span class="op" id="3618634">(</span><span class="ident" id="3618635"><a href="/path/filepath/match.go.html#3618211">dir</a></span><span class="op" id="3618638">,</span>&nbsp;<span class="ident" id="3618640"><a href="/path/filepath/match.go.html#3618504">n</a></span><span class="op" id="3618641">)</span><span class="op" id="3618642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618646">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618652">return</span><br>
<span class="lineno"></span><span class="op" id="3618659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3618662">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3618731">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3618755">func</span>&nbsp;<span class="ident" id="3618760">hasMeta</span><span class="op" id="3618767">(</span><span class="ident" id="3618768">path</span>&nbsp;<span class="builtintype" id="3618773">string</span><span class="op" id="3618779">)</span>&nbsp;<span class="builtintype" id="3618781">bool</span>&nbsp;<span class="op" id="3618786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3618789">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618854">return</span>&nbsp;<span class="ident" id="3618861"><a href="/path/filepath/match.go.html#3612005">strings</a></span><span class="op" id="3618868">.</span><span class="ident" id="3618869">IndexAny</span><span class="op" id="3618877">(</span><span class="ident" id="3618878"><a href="/path/filepath/match.go.html#3618768">path</a></span><span class="op" id="3618882">,</span>&nbsp;<span class="string" id="3618884">&#34;*?[&#34;</span><span class="op" id="3618889">)</span>&nbsp;<span class="op" id="3618891">&gt;=</span>&nbsp;<span class="num" id="3618894">0</span><br>
<span class="lineno"></span><span class="op" id="3618896">}</span>
</div>
</body>
</html>
