<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5336796">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5336851">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5336905">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5336956">package</span>&nbsp;<span class="ident" id="5336964">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5336970">import</span>&nbsp;<span class="op" id="5336977">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336980">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5336989">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5337004">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5337007">const</span>&nbsp;<span class="op" id="5337013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337016">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337029">=</span>&nbsp;<span class="op" id="5337031">^</span><span class="builtintype" id="5337032">byte</span><span class="op" id="5337036">(</span><span class="num" id="5337037">0x20</span><span class="op" id="5337041">)</span>&nbsp;<span class="comment" id="5337043">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337077">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5337090">=</span>&nbsp;<span class="string" id="5337092">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337102">smallLongEss</span>&nbsp;<span class="op" id="5337115">=</span>&nbsp;<span class="string" id="5337117">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="5337126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5337129">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="5337196">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="5337251">//</span><br>
<span class="lineno"></span><span class="comment" id="5337254">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="5337319">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="5337398">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="5337471">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="5337529">//</span><br>
<span class="lineno"></span><span class="comment" id="5337532">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="5337608">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="5337671">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="5337721">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="5337764">//</span><br>
<span class="lineno"></span><span class="comment" id="5337767">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5337834">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="5337903">func</span>&nbsp;<span class="ident" id="5337908">foldFunc</span><span class="op" id="5337916">(</span><span class="ident" id="5337917">s</span>&nbsp;<span class="op" id="5337919">[</span><span class="op" id="5337920">]</span><span class="builtintype" id="5337921">byte</span><span class="op" id="5337925">)</span>&nbsp;<span class="keyword" id="5337927">func</span><span class="op" id="5337931">(</span><span class="ident" id="5337932">s</span><span class="op" id="5337933">,</span>&nbsp;<span class="ident" id="5337935">t</span>&nbsp;<span class="op" id="5337937">[</span><span class="op" id="5337938">]</span><span class="builtintype" id="5337939">byte</span><span class="op" id="5337943">)</span>&nbsp;<span class="builtintype" id="5337945">bool</span>&nbsp;<span class="op" id="5337950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337953">nonLetter</span>&nbsp;<span class="op" id="5337963">:=</span>&nbsp;<span class="builtintype" id="5337966">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5337973">special</span>&nbsp;<span class="op" id="5337981">:=</span>&nbsp;<span class="builtintype" id="5337984">false</span>&nbsp;<span class="comment" id="5337990">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338009">for</span>&nbsp;<span class="ident" id="5338013">_</span><span class="op" id="5338014">,</span>&nbsp;<span class="ident" id="5338016">b</span>&nbsp;<span class="op" id="5338018">:=</span>&nbsp;<span class="keyword" id="5338021">range</span>&nbsp;<span class="ident" id="5338027">s</span>&nbsp;<span class="op" id="5338029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338033">if</span>&nbsp;<span class="ident" id="5338036">b</span>&nbsp;<span class="op" id="5338038">&gt;=</span>&nbsp;<span class="ident" id="5338041">utf8</span><span class="op" id="5338045">.</span><span class="ident" id="5338046">RuneSelf</span>&nbsp;<span class="op" id="5338055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338060">return</span>&nbsp;<span class="ident" id="5338067">bytes</span><span class="op" id="5338072">.</span><span class="ident" id="5338073">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338085">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338089">upper</span>&nbsp;<span class="op" id="5338095">:=</span>&nbsp;<span class="ident" id="5338098">b</span>&nbsp;<span class="op" id="5338100">&amp;</span>&nbsp;<span class="ident" id="5338102">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338113">if</span>&nbsp;<span class="ident" id="5338116">upper</span>&nbsp;<span class="op" id="5338122">&lt;</span>&nbsp;<span class="string" id="5338124">&#39;A&#39;</span>&nbsp;<span class="op" id="5338128">||</span>&nbsp;<span class="ident" id="5338131">upper</span>&nbsp;<span class="op" id="5338137">&gt;</span>&nbsp;<span class="string" id="5338139">&#39;Z&#39;</span>&nbsp;<span class="op" id="5338143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338148">nonLetter</span>&nbsp;<span class="op" id="5338158">=</span>&nbsp;<span class="builtintype" id="5338160">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338167">}</span>&nbsp;<span class="keyword" id="5338169">else</span>&nbsp;<span class="keyword" id="5338174">if</span>&nbsp;<span class="ident" id="5338177">upper</span>&nbsp;<span class="op" id="5338183">==</span>&nbsp;<span class="string" id="5338186">&#39;K&#39;</span>&nbsp;<span class="op" id="5338190">||</span>&nbsp;<span class="ident" id="5338193">upper</span>&nbsp;<span class="op" id="5338199">==</span>&nbsp;<span class="string" id="5338202">&#39;S&#39;</span>&nbsp;<span class="op" id="5338206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338211">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338262">special</span>&nbsp;<span class="op" id="5338270">=</span>&nbsp;<span class="builtintype" id="5338272">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338285">if</span>&nbsp;<span class="ident" id="5338288">special</span>&nbsp;<span class="op" id="5338296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338300">return</span>&nbsp;<span class="ident" id="5338307">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338326">if</span>&nbsp;<span class="ident" id="5338329">nonLetter</span>&nbsp;<span class="op" id="5338339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338343">return</span>&nbsp;<span class="ident" id="5338350">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338369">return</span>&nbsp;<span class="ident" id="5338376">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="5338398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5338401">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5338468">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="5338539">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="5338604">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5338633">func</span>&nbsp;<span class="ident" id="5338638">equalFoldRight</span><span class="op" id="5338652">(</span><span class="ident" id="5338653">s</span><span class="op" id="5338654">,</span>&nbsp;<span class="ident" id="5338656">t</span>&nbsp;<span class="op" id="5338658">[</span><span class="op" id="5338659">]</span><span class="builtintype" id="5338660">byte</span><span class="op" id="5338664">)</span>&nbsp;<span class="builtintype" id="5338666">bool</span>&nbsp;<span class="op" id="5338671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338674">for</span>&nbsp;<span class="ident" id="5338678">_</span><span class="op" id="5338679">,</span>&nbsp;<span class="ident" id="5338681">sb</span>&nbsp;<span class="op" id="5338684">:=</span>&nbsp;<span class="keyword" id="5338687">range</span>&nbsp;<span class="ident" id="5338693">s</span>&nbsp;<span class="op" id="5338695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338699">if</span>&nbsp;<span class="builtinfunc" id="5338702">len</span><span class="op" id="5338705">(</span><span class="ident" id="5338706">t</span><span class="op" id="5338707">)</span>&nbsp;<span class="op" id="5338709">==</span>&nbsp;<span class="num" id="5338712">0</span>&nbsp;<span class="op" id="5338714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338719">return</span>&nbsp;<span class="builtintype" id="5338726">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338738">tb</span>&nbsp;<span class="op" id="5338741">:=</span>&nbsp;<span class="ident" id="5338744">t</span><span class="op" id="5338745">[</span><span class="num" id="5338746">0</span><span class="op" id="5338747">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338751">if</span>&nbsp;<span class="ident" id="5338754">tb</span>&nbsp;<span class="op" id="5338757">&lt;</span>&nbsp;<span class="ident" id="5338759">utf8</span><span class="op" id="5338763">.</span><span class="ident" id="5338764">RuneSelf</span>&nbsp;<span class="op" id="5338773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338778">if</span>&nbsp;<span class="ident" id="5338781">sb</span>&nbsp;<span class="op" id="5338784">!=</span>&nbsp;<span class="ident" id="5338787">tb</span>&nbsp;<span class="op" id="5338790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338796">sbUpper</span>&nbsp;<span class="op" id="5338804">:=</span>&nbsp;<span class="ident" id="5338807">sb</span>&nbsp;<span class="op" id="5338810">&amp;</span>&nbsp;<span class="ident" id="5338812">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338825">if</span>&nbsp;<span class="string" id="5338828">&#39;A&#39;</span>&nbsp;<span class="op" id="5338832">&lt;=</span>&nbsp;<span class="ident" id="5338835">sbUpper</span>&nbsp;<span class="op" id="5338843">&amp;&amp;</span>&nbsp;<span class="ident" id="5338846">sbUpper</span>&nbsp;<span class="op" id="5338854">&lt;=</span>&nbsp;<span class="string" id="5338857">&#39;Z&#39;</span>&nbsp;<span class="op" id="5338861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338868">if</span>&nbsp;<span class="ident" id="5338871">sbUpper</span>&nbsp;<span class="op" id="5338879">!=</span>&nbsp;<span class="ident" id="5338882">tb</span><span class="op" id="5338884">&amp;</span><span class="ident" id="5338885">caseMask</span>&nbsp;<span class="op" id="5338894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338902">return</span>&nbsp;<span class="builtintype" id="5338909">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338926">}</span>&nbsp;<span class="keyword" id="5338928">else</span>&nbsp;<span class="op" id="5338933">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338940">return</span>&nbsp;<span class="builtintype" id="5338947">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5338967">t</span>&nbsp;<span class="op" id="5338969">=</span>&nbsp;<span class="ident" id="5338971">t</span><span class="op" id="5338972">[</span><span class="num" id="5338973">1</span><span class="op" id="5338974">:</span><span class="op" id="5338975">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5338980">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5338991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5338995">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5339050">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339097">tr</span><span class="op" id="5339099">,</span>&nbsp;<span class="ident" id="5339101">size</span>&nbsp;<span class="op" id="5339106">:=</span>&nbsp;<span class="ident" id="5339109">utf8</span><span class="op" id="5339113">.</span><span class="ident" id="5339114">DecodeRune</span><span class="op" id="5339124">(</span><span class="ident" id="5339125">t</span><span class="op" id="5339126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339130">switch</span>&nbsp;<span class="ident" id="5339137">sb</span>&nbsp;<span class="op" id="5339140">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339144">case</span>&nbsp;<span class="string" id="5339149">&#39;s&#39;</span><span class="op" id="5339152">,</span>&nbsp;<span class="string" id="5339154">&#39;S&#39;</span><span class="op" id="5339157">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339162">if</span>&nbsp;<span class="ident" id="5339165">tr</span>&nbsp;<span class="op" id="5339168">!=</span>&nbsp;<span class="ident" id="5339171">smallLongEss</span>&nbsp;<span class="op" id="5339184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339190">return</span>&nbsp;<span class="builtintype" id="5339197">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339210">case</span>&nbsp;<span class="string" id="5339215">&#39;k&#39;</span><span class="op" id="5339218">,</span>&nbsp;<span class="string" id="5339220">&#39;K&#39;</span><span class="op" id="5339223">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339228">if</span>&nbsp;<span class="ident" id="5339231">tr</span>&nbsp;<span class="op" id="5339234">!=</span>&nbsp;<span class="ident" id="5339237">kelvin</span>&nbsp;<span class="op" id="5339244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339250">return</span>&nbsp;<span class="builtintype" id="5339257">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339270">default</span><span class="op" id="5339277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339282">return</span>&nbsp;<span class="builtintype" id="5339289">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339301">t</span>&nbsp;<span class="op" id="5339303">=</span>&nbsp;<span class="ident" id="5339305">t</span><span class="op" id="5339306">[</span><span class="ident" id="5339307">size</span><span class="op" id="5339311">:</span><span class="op" id="5339312">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339319">if</span>&nbsp;<span class="builtinfunc" id="5339322">len</span><span class="op" id="5339325">(</span><span class="ident" id="5339326">t</span><span class="op" id="5339327">)</span>&nbsp;<span class="op" id="5339329">&gt;</span>&nbsp;<span class="num" id="5339331">0</span>&nbsp;<span class="op" id="5339333">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339337">return</span>&nbsp;<span class="builtintype" id="5339344">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339354">return</span>&nbsp;<span class="builtintype" id="5339361">true</span><br>
<span class="lineno"></span><span class="op" id="5339366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5339369">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5339439">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5339503">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="5339531">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5339560">func</span>&nbsp;<span class="ident" id="5339565">asciiEqualFold</span><span class="op" id="5339579">(</span><span class="ident" id="5339580">s</span><span class="op" id="5339581">,</span>&nbsp;<span class="ident" id="5339583">t</span>&nbsp;<span class="op" id="5339585">[</span><span class="op" id="5339586">]</span><span class="builtintype" id="5339587">byte</span><span class="op" id="5339591">)</span>&nbsp;<span class="builtintype" id="5339593">bool</span>&nbsp;<span class="op" id="5339598">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339601">if</span>&nbsp;<span class="builtinfunc" id="5339604">len</span><span class="op" id="5339607">(</span><span class="ident" id="5339608">s</span><span class="op" id="5339609">)</span>&nbsp;<span class="op" id="5339611">!=</span>&nbsp;<span class="builtinfunc" id="5339614">len</span><span class="op" id="5339617">(</span><span class="ident" id="5339618">t</span><span class="op" id="5339619">)</span>&nbsp;<span class="op" id="5339621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339625">return</span>&nbsp;<span class="builtintype" id="5339632">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339642">for</span>&nbsp;<span class="ident" id="5339646">i</span><span class="op" id="5339647">,</span>&nbsp;<span class="ident" id="5339649">sb</span>&nbsp;<span class="op" id="5339652">:=</span>&nbsp;<span class="keyword" id="5339655">range</span>&nbsp;<span class="ident" id="5339661">s</span>&nbsp;<span class="op" id="5339663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5339667">tb</span>&nbsp;<span class="op" id="5339670">:=</span>&nbsp;<span class="ident" id="5339673">t</span><span class="op" id="5339674">[</span><span class="ident" id="5339675">i</span><span class="op" id="5339676">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339680">if</span>&nbsp;<span class="ident" id="5339683">sb</span>&nbsp;<span class="op" id="5339686">==</span>&nbsp;<span class="ident" id="5339689">tb</span>&nbsp;<span class="op" id="5339692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339697">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339712">if</span>&nbsp;<span class="op" id="5339715">(</span><span class="string" id="5339716">&#39;a&#39;</span>&nbsp;<span class="op" id="5339720">&lt;=</span>&nbsp;<span class="ident" id="5339723">sb</span>&nbsp;<span class="op" id="5339726">&amp;&amp;</span>&nbsp;<span class="ident" id="5339729">sb</span>&nbsp;<span class="op" id="5339732">&lt;=</span>&nbsp;<span class="string" id="5339735">&#39;z&#39;</span><span class="op" id="5339738">)</span>&nbsp;<span class="op" id="5339740">||</span>&nbsp;<span class="op" id="5339743">(</span><span class="string" id="5339744">&#39;A&#39;</span>&nbsp;<span class="op" id="5339748">&lt;=</span>&nbsp;<span class="ident" id="5339751">sb</span>&nbsp;<span class="op" id="5339754">&amp;&amp;</span>&nbsp;<span class="ident" id="5339757">sb</span>&nbsp;<span class="op" id="5339760">&lt;=</span>&nbsp;<span class="string" id="5339763">&#39;Z&#39;</span><span class="op" id="5339766">)</span>&nbsp;<span class="op" id="5339768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339773">if</span>&nbsp;<span class="ident" id="5339776">sb</span><span class="op" id="5339778">&amp;</span><span class="ident" id="5339779">caseMask</span>&nbsp;<span class="op" id="5339788">!=</span>&nbsp;<span class="ident" id="5339791">tb</span><span class="op" id="5339793">&amp;</span><span class="ident" id="5339794">caseMask</span>&nbsp;<span class="op" id="5339803">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339809">return</span>&nbsp;<span class="builtintype" id="5339816">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339829">}</span>&nbsp;<span class="keyword" id="5339831">else</span>&nbsp;<span class="op" id="5339836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339841">return</span>&nbsp;<span class="builtintype" id="5339848">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339856">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5339859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5339862">return</span>&nbsp;<span class="builtintype" id="5339869">true</span><br>
<span class="lineno"></span><span class="op" id="5339874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5339877">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="5339945">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="5340011">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5340053">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="5340082">func</span>&nbsp;<span class="ident" id="5340087">simpleLetterEqualFold</span><span class="op" id="5340108">(</span><span class="ident" id="5340109">s</span><span class="op" id="5340110">,</span>&nbsp;<span class="ident" id="5340112">t</span>&nbsp;<span class="op" id="5340114">[</span><span class="op" id="5340115">]</span><span class="builtintype" id="5340116">byte</span><span class="op" id="5340120">)</span>&nbsp;<span class="builtintype" id="5340122">bool</span>&nbsp;<span class="op" id="5340127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340130">if</span>&nbsp;<span class="builtinfunc" id="5340133">len</span><span class="op" id="5340136">(</span><span class="ident" id="5340137">s</span><span class="op" id="5340138">)</span>&nbsp;<span class="op" id="5340140">!=</span>&nbsp;<span class="builtinfunc" id="5340143">len</span><span class="op" id="5340146">(</span><span class="ident" id="5340147">t</span><span class="op" id="5340148">)</span>&nbsp;<span class="op" id="5340150">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340154">return</span>&nbsp;<span class="builtintype" id="5340161">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340171">for</span>&nbsp;<span class="ident" id="5340175">i</span><span class="op" id="5340176">,</span>&nbsp;<span class="ident" id="5340178">b</span>&nbsp;<span class="op" id="5340180">:=</span>&nbsp;<span class="keyword" id="5340183">range</span>&nbsp;<span class="ident" id="5340189">s</span>&nbsp;<span class="op" id="5340191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340195">if</span>&nbsp;<span class="ident" id="5340198">b</span><span class="op" id="5340199">&amp;</span><span class="ident" id="5340200">caseMask</span>&nbsp;<span class="op" id="5340209">!=</span>&nbsp;<span class="ident" id="5340212">t</span><span class="op" id="5340213">[</span><span class="ident" id="5340214">i</span><span class="op" id="5340215">]</span><span class="op" id="5340216">&amp;</span><span class="ident" id="5340217">caseMask</span>&nbsp;<span class="op" id="5340226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340231">return</span>&nbsp;<span class="builtintype" id="5340238">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340252">return</span>&nbsp;<span class="builtintype" id="5340259">true</span><br>
<span class="lineno"></span><span class="op" id="5340264">}</span>
</div>
</body>
</html>
