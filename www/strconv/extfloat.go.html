<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2970350">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2970405">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2970459">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2970510">package</span>&nbsp;<span class="ident" id="2970518">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2970527">//&nbsp;An&nbsp;extFloat&nbsp;represents&nbsp;an&nbsp;extended&nbsp;floating-point&nbsp;number,&nbsp;with&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="2970598">//&nbsp;precision&nbsp;than&nbsp;a&nbsp;float64.&nbsp;It&nbsp;does&nbsp;not&nbsp;try&nbsp;to&nbsp;save&nbsp;bits:&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2970661">//&nbsp;number&nbsp;represented&nbsp;by&nbsp;the&nbsp;structure&nbsp;is&nbsp;mant*(2^exp),&nbsp;with&nbsp;a&nbsp;negative</span><br>
<span class="lineno">10</span><span class="comment" id="2970733">//&nbsp;sign&nbsp;if&nbsp;neg&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="2970757">type</span>&nbsp;<span class="ident" id="2970762">extFloat</span>&nbsp;<span class="keyword" id="2970771">struct</span>&nbsp;<span class="op" id="2970778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970781">mant</span>&nbsp;<span class="ident" id="2970786">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970794">exp</span>&nbsp;&nbsp;<span class="builtintype" id="2970799">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970804">neg</span>&nbsp;&nbsp;<span class="builtintype" id="2970809">bool</span><br>
<span class="lineno">15</span><span class="op" id="2970814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2970817">//&nbsp;Powers&nbsp;of&nbsp;ten&nbsp;taken&nbsp;from&nbsp;double-conversion&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="2970872">//&nbsp;http://code.google.com/p/double-conversion/</span><br>
<span class="lineno"></span><span class="keyword" id="2970919">const</span>&nbsp;<span class="op" id="2970925">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970928">firstPowerOfTen</span>&nbsp;<span class="op" id="2970944">=</span>&nbsp;<span class="op" id="2970946">-</span><span class="num" id="2970947">348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970952">stepPowerOfTen</span>&nbsp;&nbsp;<span class="op" id="2970968">=</span>&nbsp;<span class="num" id="2970970">8</span><br>
<span class="lineno"></span><span class="op" id="2970972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2970975">var</span>&nbsp;<span class="ident" id="2970979">smallPowersOfTen</span>&nbsp;<span class="op" id="2970996">=</span>&nbsp;<span class="op" id="2970998">[</span><span class="op" id="2970999">...</span><span class="op" id="2971002">]</span><span class="ident" id="2971003"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2971011">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971014">{</span><span class="num" id="2971015">1</span>&nbsp;<span class="op" id="2971017">&lt;&lt;</span>&nbsp;<span class="num" id="2971020">63</span><span class="op" id="2971022">,</span>&nbsp;<span class="op" id="2971024">-</span><span class="num" id="2971025">63</span><span class="op" id="2971027">,</span>&nbsp;<span class="builtintype" id="2971029">false</span><span class="op" id="2971034">}</span><span class="op" id="2971035">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2971044">//&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971050">{</span><span class="num" id="2971051">0xa</span>&nbsp;<span class="op" id="2971055">&lt;&lt;</span>&nbsp;<span class="num" id="2971058">60</span><span class="op" id="2971060">,</span>&nbsp;<span class="op" id="2971062">-</span><span class="num" id="2971063">60</span><span class="op" id="2971065">,</span>&nbsp;<span class="builtintype" id="2971067">false</span><span class="op" id="2971072">}</span><span class="op" id="2971073">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2971080">//&nbsp;1e1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971088">{</span><span class="num" id="2971089">0x64</span>&nbsp;<span class="op" id="2971094">&lt;&lt;</span>&nbsp;<span class="num" id="2971097">57</span><span class="op" id="2971099">,</span>&nbsp;<span class="op" id="2971101">-</span><span class="num" id="2971102">57</span><span class="op" id="2971104">,</span>&nbsp;<span class="builtintype" id="2971106">false</span><span class="op" id="2971111">}</span><span class="op" id="2971112">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2971118">//&nbsp;1e2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971126">{</span><span class="num" id="2971127">0x3e8</span>&nbsp;<span class="op" id="2971133">&lt;&lt;</span>&nbsp;<span class="num" id="2971136">54</span><span class="op" id="2971138">,</span>&nbsp;<span class="op" id="2971140">-</span><span class="num" id="2971141">54</span><span class="op" id="2971143">,</span>&nbsp;<span class="builtintype" id="2971145">false</span><span class="op" id="2971150">}</span><span class="op" id="2971151">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2971156">//&nbsp;1e3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971164">{</span><span class="num" id="2971165">0x2710</span>&nbsp;<span class="op" id="2971172">&lt;&lt;</span>&nbsp;<span class="num" id="2971175">50</span><span class="op" id="2971177">,</span>&nbsp;<span class="op" id="2971179">-</span><span class="num" id="2971180">50</span><span class="op" id="2971182">,</span>&nbsp;<span class="builtintype" id="2971184">false</span><span class="op" id="2971189">}</span><span class="op" id="2971190">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2971194">//&nbsp;1e4</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971202">{</span><span class="num" id="2971203">0x186a0</span>&nbsp;<span class="op" id="2971211">&lt;&lt;</span>&nbsp;<span class="num" id="2971214">47</span><span class="op" id="2971216">,</span>&nbsp;<span class="op" id="2971218">-</span><span class="num" id="2971219">47</span><span class="op" id="2971221">,</span>&nbsp;<span class="builtintype" id="2971223">false</span><span class="op" id="2971228">}</span><span class="op" id="2971229">,</span>&nbsp;&nbsp;<span class="comment" id="2971232">//&nbsp;1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971240">{</span><span class="num" id="2971241">0xf4240</span>&nbsp;<span class="op" id="2971249">&lt;&lt;</span>&nbsp;<span class="num" id="2971252">44</span><span class="op" id="2971254">,</span>&nbsp;<span class="op" id="2971256">-</span><span class="num" id="2971257">44</span><span class="op" id="2971259">,</span>&nbsp;<span class="builtintype" id="2971261">false</span><span class="op" id="2971266">}</span><span class="op" id="2971267">,</span>&nbsp;&nbsp;<span class="comment" id="2971270">//&nbsp;1e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971278">{</span><span class="num" id="2971279">0x989680</span>&nbsp;<span class="op" id="2971288">&lt;&lt;</span>&nbsp;<span class="num" id="2971291">40</span><span class="op" id="2971293">,</span>&nbsp;<span class="op" id="2971295">-</span><span class="num" id="2971296">40</span><span class="op" id="2971298">,</span>&nbsp;<span class="builtintype" id="2971300">false</span><span class="op" id="2971305">}</span><span class="op" id="2971306">,</span>&nbsp;<span class="comment" id="2971308">//&nbsp;1e7</span><br>
<span class="lineno"></span><span class="op" id="2971315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="2971318">var</span>&nbsp;<span class="ident" id="2971322">powersOfTen</span>&nbsp;<span class="op" id="2971334">=</span>&nbsp;<span class="op" id="2971336">[</span><span class="op" id="2971337">...</span><span class="op" id="2971340">]</span><span class="ident" id="2971341"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2971349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971352">{</span><span class="num" id="2971353">0xfa8fd5a0081c0288</span><span class="op" id="2971371">,</span>&nbsp;<span class="op" id="2971373">-</span><span class="num" id="2971374">1220</span><span class="op" id="2971378">,</span>&nbsp;<span class="builtintype" id="2971380">false</span><span class="op" id="2971385">}</span><span class="op" id="2971386">,</span>&nbsp;<span class="comment" id="2971388">//&nbsp;10^-348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971400">{</span><span class="num" id="2971401">0xbaaee17fa23ebf76</span><span class="op" id="2971419">,</span>&nbsp;<span class="op" id="2971421">-</span><span class="num" id="2971422">1193</span><span class="op" id="2971426">,</span>&nbsp;<span class="builtintype" id="2971428">false</span><span class="op" id="2971433">}</span><span class="op" id="2971434">,</span>&nbsp;<span class="comment" id="2971436">//&nbsp;10^-340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971448">{</span><span class="num" id="2971449">0x8b16fb203055ac76</span><span class="op" id="2971467">,</span>&nbsp;<span class="op" id="2971469">-</span><span class="num" id="2971470">1166</span><span class="op" id="2971474">,</span>&nbsp;<span class="builtintype" id="2971476">false</span><span class="op" id="2971481">}</span><span class="op" id="2971482">,</span>&nbsp;<span class="comment" id="2971484">//&nbsp;10^-332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971496">{</span><span class="num" id="2971497">0xcf42894a5dce35ea</span><span class="op" id="2971515">,</span>&nbsp;<span class="op" id="2971517">-</span><span class="num" id="2971518">1140</span><span class="op" id="2971522">,</span>&nbsp;<span class="builtintype" id="2971524">false</span><span class="op" id="2971529">}</span><span class="op" id="2971530">,</span>&nbsp;<span class="comment" id="2971532">//&nbsp;10^-324</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971544">{</span><span class="num" id="2971545">0x9a6bb0aa55653b2d</span><span class="op" id="2971563">,</span>&nbsp;<span class="op" id="2971565">-</span><span class="num" id="2971566">1113</span><span class="op" id="2971570">,</span>&nbsp;<span class="builtintype" id="2971572">false</span><span class="op" id="2971577">}</span><span class="op" id="2971578">,</span>&nbsp;<span class="comment" id="2971580">//&nbsp;10^-316</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971592">{</span><span class="num" id="2971593">0xe61acf033d1a45df</span><span class="op" id="2971611">,</span>&nbsp;<span class="op" id="2971613">-</span><span class="num" id="2971614">1087</span><span class="op" id="2971618">,</span>&nbsp;<span class="builtintype" id="2971620">false</span><span class="op" id="2971625">}</span><span class="op" id="2971626">,</span>&nbsp;<span class="comment" id="2971628">//&nbsp;10^-308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971640">{</span><span class="num" id="2971641">0xab70fe17c79ac6ca</span><span class="op" id="2971659">,</span>&nbsp;<span class="op" id="2971661">-</span><span class="num" id="2971662">1060</span><span class="op" id="2971666">,</span>&nbsp;<span class="builtintype" id="2971668">false</span><span class="op" id="2971673">}</span><span class="op" id="2971674">,</span>&nbsp;<span class="comment" id="2971676">//&nbsp;10^-300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971688">{</span><span class="num" id="2971689">0xff77b1fcbebcdc4f</span><span class="op" id="2971707">,</span>&nbsp;<span class="op" id="2971709">-</span><span class="num" id="2971710">1034</span><span class="op" id="2971714">,</span>&nbsp;<span class="builtintype" id="2971716">false</span><span class="op" id="2971721">}</span><span class="op" id="2971722">,</span>&nbsp;<span class="comment" id="2971724">//&nbsp;10^-292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971736">{</span><span class="num" id="2971737">0xbe5691ef416bd60c</span><span class="op" id="2971755">,</span>&nbsp;<span class="op" id="2971757">-</span><span class="num" id="2971758">1007</span><span class="op" id="2971762">,</span>&nbsp;<span class="builtintype" id="2971764">false</span><span class="op" id="2971769">}</span><span class="op" id="2971770">,</span>&nbsp;<span class="comment" id="2971772">//&nbsp;10^-284</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971784">{</span><span class="num" id="2971785">0x8dd01fad907ffc3c</span><span class="op" id="2971803">,</span>&nbsp;<span class="op" id="2971805">-</span><span class="num" id="2971806">980</span><span class="op" id="2971809">,</span>&nbsp;<span class="builtintype" id="2971811">false</span><span class="op" id="2971816">}</span><span class="op" id="2971817">,</span>&nbsp;&nbsp;<span class="comment" id="2971820">//&nbsp;10^-276</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971832">{</span><span class="num" id="2971833">0xd3515c2831559a83</span><span class="op" id="2971851">,</span>&nbsp;<span class="op" id="2971853">-</span><span class="num" id="2971854">954</span><span class="op" id="2971857">,</span>&nbsp;<span class="builtintype" id="2971859">false</span><span class="op" id="2971864">}</span><span class="op" id="2971865">,</span>&nbsp;&nbsp;<span class="comment" id="2971868">//&nbsp;10^-268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971880">{</span><span class="num" id="2971881">0x9d71ac8fada6c9b5</span><span class="op" id="2971899">,</span>&nbsp;<span class="op" id="2971901">-</span><span class="num" id="2971902">927</span><span class="op" id="2971905">,</span>&nbsp;<span class="builtintype" id="2971907">false</span><span class="op" id="2971912">}</span><span class="op" id="2971913">,</span>&nbsp;&nbsp;<span class="comment" id="2971916">//&nbsp;10^-260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971928">{</span><span class="num" id="2971929">0xea9c227723ee8bcb</span><span class="op" id="2971947">,</span>&nbsp;<span class="op" id="2971949">-</span><span class="num" id="2971950">901</span><span class="op" id="2971953">,</span>&nbsp;<span class="builtintype" id="2971955">false</span><span class="op" id="2971960">}</span><span class="op" id="2971961">,</span>&nbsp;&nbsp;<span class="comment" id="2971964">//&nbsp;10^-252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971976">{</span><span class="num" id="2971977">0xaecc49914078536d</span><span class="op" id="2971995">,</span>&nbsp;<span class="op" id="2971997">-</span><span class="num" id="2971998">874</span><span class="op" id="2972001">,</span>&nbsp;<span class="builtintype" id="2972003">false</span><span class="op" id="2972008">}</span><span class="op" id="2972009">,</span>&nbsp;&nbsp;<span class="comment" id="2972012">//&nbsp;10^-244</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972024">{</span><span class="num" id="2972025">0x823c12795db6ce57</span><span class="op" id="2972043">,</span>&nbsp;<span class="op" id="2972045">-</span><span class="num" id="2972046">847</span><span class="op" id="2972049">,</span>&nbsp;<span class="builtintype" id="2972051">false</span><span class="op" id="2972056">}</span><span class="op" id="2972057">,</span>&nbsp;&nbsp;<span class="comment" id="2972060">//&nbsp;10^-236</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972072">{</span><span class="num" id="2972073">0xc21094364dfb5637</span><span class="op" id="2972091">,</span>&nbsp;<span class="op" id="2972093">-</span><span class="num" id="2972094">821</span><span class="op" id="2972097">,</span>&nbsp;<span class="builtintype" id="2972099">false</span><span class="op" id="2972104">}</span><span class="op" id="2972105">,</span>&nbsp;&nbsp;<span class="comment" id="2972108">//&nbsp;10^-228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972120">{</span><span class="num" id="2972121">0x9096ea6f3848984f</span><span class="op" id="2972139">,</span>&nbsp;<span class="op" id="2972141">-</span><span class="num" id="2972142">794</span><span class="op" id="2972145">,</span>&nbsp;<span class="builtintype" id="2972147">false</span><span class="op" id="2972152">}</span><span class="op" id="2972153">,</span>&nbsp;&nbsp;<span class="comment" id="2972156">//&nbsp;10^-220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972168">{</span><span class="num" id="2972169">0xd77485cb25823ac7</span><span class="op" id="2972187">,</span>&nbsp;<span class="op" id="2972189">-</span><span class="num" id="2972190">768</span><span class="op" id="2972193">,</span>&nbsp;<span class="builtintype" id="2972195">false</span><span class="op" id="2972200">}</span><span class="op" id="2972201">,</span>&nbsp;&nbsp;<span class="comment" id="2972204">//&nbsp;10^-212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972216">{</span><span class="num" id="2972217">0xa086cfcd97bf97f4</span><span class="op" id="2972235">,</span>&nbsp;<span class="op" id="2972237">-</span><span class="num" id="2972238">741</span><span class="op" id="2972241">,</span>&nbsp;<span class="builtintype" id="2972243">false</span><span class="op" id="2972248">}</span><span class="op" id="2972249">,</span>&nbsp;&nbsp;<span class="comment" id="2972252">//&nbsp;10^-204</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972264">{</span><span class="num" id="2972265">0xef340a98172aace5</span><span class="op" id="2972283">,</span>&nbsp;<span class="op" id="2972285">-</span><span class="num" id="2972286">715</span><span class="op" id="2972289">,</span>&nbsp;<span class="builtintype" id="2972291">false</span><span class="op" id="2972296">}</span><span class="op" id="2972297">,</span>&nbsp;&nbsp;<span class="comment" id="2972300">//&nbsp;10^-196</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972312">{</span><span class="num" id="2972313">0xb23867fb2a35b28e</span><span class="op" id="2972331">,</span>&nbsp;<span class="op" id="2972333">-</span><span class="num" id="2972334">688</span><span class="op" id="2972337">,</span>&nbsp;<span class="builtintype" id="2972339">false</span><span class="op" id="2972344">}</span><span class="op" id="2972345">,</span>&nbsp;&nbsp;<span class="comment" id="2972348">//&nbsp;10^-188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972360">{</span><span class="num" id="2972361">0x84c8d4dfd2c63f3b</span><span class="op" id="2972379">,</span>&nbsp;<span class="op" id="2972381">-</span><span class="num" id="2972382">661</span><span class="op" id="2972385">,</span>&nbsp;<span class="builtintype" id="2972387">false</span><span class="op" id="2972392">}</span><span class="op" id="2972393">,</span>&nbsp;&nbsp;<span class="comment" id="2972396">//&nbsp;10^-180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972408">{</span><span class="num" id="2972409">0xc5dd44271ad3cdba</span><span class="op" id="2972427">,</span>&nbsp;<span class="op" id="2972429">-</span><span class="num" id="2972430">635</span><span class="op" id="2972433">,</span>&nbsp;<span class="builtintype" id="2972435">false</span><span class="op" id="2972440">}</span><span class="op" id="2972441">,</span>&nbsp;&nbsp;<span class="comment" id="2972444">//&nbsp;10^-172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972456">{</span><span class="num" id="2972457">0x936b9fcebb25c996</span><span class="op" id="2972475">,</span>&nbsp;<span class="op" id="2972477">-</span><span class="num" id="2972478">608</span><span class="op" id="2972481">,</span>&nbsp;<span class="builtintype" id="2972483">false</span><span class="op" id="2972488">}</span><span class="op" id="2972489">,</span>&nbsp;&nbsp;<span class="comment" id="2972492">//&nbsp;10^-164</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972504">{</span><span class="num" id="2972505">0xdbac6c247d62a584</span><span class="op" id="2972523">,</span>&nbsp;<span class="op" id="2972525">-</span><span class="num" id="2972526">582</span><span class="op" id="2972529">,</span>&nbsp;<span class="builtintype" id="2972531">false</span><span class="op" id="2972536">}</span><span class="op" id="2972537">,</span>&nbsp;&nbsp;<span class="comment" id="2972540">//&nbsp;10^-156</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972552">{</span><span class="num" id="2972553">0xa3ab66580d5fdaf6</span><span class="op" id="2972571">,</span>&nbsp;<span class="op" id="2972573">-</span><span class="num" id="2972574">555</span><span class="op" id="2972577">,</span>&nbsp;<span class="builtintype" id="2972579">false</span><span class="op" id="2972584">}</span><span class="op" id="2972585">,</span>&nbsp;&nbsp;<span class="comment" id="2972588">//&nbsp;10^-148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972600">{</span><span class="num" id="2972601">0xf3e2f893dec3f126</span><span class="op" id="2972619">,</span>&nbsp;<span class="op" id="2972621">-</span><span class="num" id="2972622">529</span><span class="op" id="2972625">,</span>&nbsp;<span class="builtintype" id="2972627">false</span><span class="op" id="2972632">}</span><span class="op" id="2972633">,</span>&nbsp;&nbsp;<span class="comment" id="2972636">//&nbsp;10^-140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972648">{</span><span class="num" id="2972649">0xb5b5ada8aaff80b8</span><span class="op" id="2972667">,</span>&nbsp;<span class="op" id="2972669">-</span><span class="num" id="2972670">502</span><span class="op" id="2972673">,</span>&nbsp;<span class="builtintype" id="2972675">false</span><span class="op" id="2972680">}</span><span class="op" id="2972681">,</span>&nbsp;&nbsp;<span class="comment" id="2972684">//&nbsp;10^-132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972696">{</span><span class="num" id="2972697">0x87625f056c7c4a8b</span><span class="op" id="2972715">,</span>&nbsp;<span class="op" id="2972717">-</span><span class="num" id="2972718">475</span><span class="op" id="2972721">,</span>&nbsp;<span class="builtintype" id="2972723">false</span><span class="op" id="2972728">}</span><span class="op" id="2972729">,</span>&nbsp;&nbsp;<span class="comment" id="2972732">//&nbsp;10^-124</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972744">{</span><span class="num" id="2972745">0xc9bcff6034c13053</span><span class="op" id="2972763">,</span>&nbsp;<span class="op" id="2972765">-</span><span class="num" id="2972766">449</span><span class="op" id="2972769">,</span>&nbsp;<span class="builtintype" id="2972771">false</span><span class="op" id="2972776">}</span><span class="op" id="2972777">,</span>&nbsp;&nbsp;<span class="comment" id="2972780">//&nbsp;10^-116</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972792">{</span><span class="num" id="2972793">0x964e858c91ba2655</span><span class="op" id="2972811">,</span>&nbsp;<span class="op" id="2972813">-</span><span class="num" id="2972814">422</span><span class="op" id="2972817">,</span>&nbsp;<span class="builtintype" id="2972819">false</span><span class="op" id="2972824">}</span><span class="op" id="2972825">,</span>&nbsp;&nbsp;<span class="comment" id="2972828">//&nbsp;10^-108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972840">{</span><span class="num" id="2972841">0xdff9772470297ebd</span><span class="op" id="2972859">,</span>&nbsp;<span class="op" id="2972861">-</span><span class="num" id="2972862">396</span><span class="op" id="2972865">,</span>&nbsp;<span class="builtintype" id="2972867">false</span><span class="op" id="2972872">}</span><span class="op" id="2972873">,</span>&nbsp;&nbsp;<span class="comment" id="2972876">//&nbsp;10^-100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972888">{</span><span class="num" id="2972889">0xa6dfbd9fb8e5b88f</span><span class="op" id="2972907">,</span>&nbsp;<span class="op" id="2972909">-</span><span class="num" id="2972910">369</span><span class="op" id="2972913">,</span>&nbsp;<span class="builtintype" id="2972915">false</span><span class="op" id="2972920">}</span><span class="op" id="2972921">,</span>&nbsp;&nbsp;<span class="comment" id="2972924">//&nbsp;10^-92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972935">{</span><span class="num" id="2972936">0xf8a95fcf88747d94</span><span class="op" id="2972954">,</span>&nbsp;<span class="op" id="2972956">-</span><span class="num" id="2972957">343</span><span class="op" id="2972960">,</span>&nbsp;<span class="builtintype" id="2972962">false</span><span class="op" id="2972967">}</span><span class="op" id="2972968">,</span>&nbsp;&nbsp;<span class="comment" id="2972971">//&nbsp;10^-84</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972982">{</span><span class="num" id="2972983">0xb94470938fa89bcf</span><span class="op" id="2973001">,</span>&nbsp;<span class="op" id="2973003">-</span><span class="num" id="2973004">316</span><span class="op" id="2973007">,</span>&nbsp;<span class="builtintype" id="2973009">false</span><span class="op" id="2973014">}</span><span class="op" id="2973015">,</span>&nbsp;&nbsp;<span class="comment" id="2973018">//&nbsp;10^-76</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973029">{</span><span class="num" id="2973030">0x8a08f0f8bf0f156b</span><span class="op" id="2973048">,</span>&nbsp;<span class="op" id="2973050">-</span><span class="num" id="2973051">289</span><span class="op" id="2973054">,</span>&nbsp;<span class="builtintype" id="2973056">false</span><span class="op" id="2973061">}</span><span class="op" id="2973062">,</span>&nbsp;&nbsp;<span class="comment" id="2973065">//&nbsp;10^-68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973076">{</span><span class="num" id="2973077">0xcdb02555653131b6</span><span class="op" id="2973095">,</span>&nbsp;<span class="op" id="2973097">-</span><span class="num" id="2973098">263</span><span class="op" id="2973101">,</span>&nbsp;<span class="builtintype" id="2973103">false</span><span class="op" id="2973108">}</span><span class="op" id="2973109">,</span>&nbsp;&nbsp;<span class="comment" id="2973112">//&nbsp;10^-60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973123">{</span><span class="num" id="2973124">0x993fe2c6d07b7fac</span><span class="op" id="2973142">,</span>&nbsp;<span class="op" id="2973144">-</span><span class="num" id="2973145">236</span><span class="op" id="2973148">,</span>&nbsp;<span class="builtintype" id="2973150">false</span><span class="op" id="2973155">}</span><span class="op" id="2973156">,</span>&nbsp;&nbsp;<span class="comment" id="2973159">//&nbsp;10^-52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973170">{</span><span class="num" id="2973171">0xe45c10c42a2b3b06</span><span class="op" id="2973189">,</span>&nbsp;<span class="op" id="2973191">-</span><span class="num" id="2973192">210</span><span class="op" id="2973195">,</span>&nbsp;<span class="builtintype" id="2973197">false</span><span class="op" id="2973202">}</span><span class="op" id="2973203">,</span>&nbsp;&nbsp;<span class="comment" id="2973206">//&nbsp;10^-44</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973217">{</span><span class="num" id="2973218">0xaa242499697392d3</span><span class="op" id="2973236">,</span>&nbsp;<span class="op" id="2973238">-</span><span class="num" id="2973239">183</span><span class="op" id="2973242">,</span>&nbsp;<span class="builtintype" id="2973244">false</span><span class="op" id="2973249">}</span><span class="op" id="2973250">,</span>&nbsp;&nbsp;<span class="comment" id="2973253">//&nbsp;10^-36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973264">{</span><span class="num" id="2973265">0xfd87b5f28300ca0e</span><span class="op" id="2973283">,</span>&nbsp;<span class="op" id="2973285">-</span><span class="num" id="2973286">157</span><span class="op" id="2973289">,</span>&nbsp;<span class="builtintype" id="2973291">false</span><span class="op" id="2973296">}</span><span class="op" id="2973297">,</span>&nbsp;&nbsp;<span class="comment" id="2973300">//&nbsp;10^-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973311">{</span><span class="num" id="2973312">0xbce5086492111aeb</span><span class="op" id="2973330">,</span>&nbsp;<span class="op" id="2973332">-</span><span class="num" id="2973333">130</span><span class="op" id="2973336">,</span>&nbsp;<span class="builtintype" id="2973338">false</span><span class="op" id="2973343">}</span><span class="op" id="2973344">,</span>&nbsp;&nbsp;<span class="comment" id="2973347">//&nbsp;10^-20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973358">{</span><span class="num" id="2973359">0x8cbccc096f5088cc</span><span class="op" id="2973377">,</span>&nbsp;<span class="op" id="2973379">-</span><span class="num" id="2973380">103</span><span class="op" id="2973383">,</span>&nbsp;<span class="builtintype" id="2973385">false</span><span class="op" id="2973390">}</span><span class="op" id="2973391">,</span>&nbsp;&nbsp;<span class="comment" id="2973394">//&nbsp;10^-12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973405">{</span><span class="num" id="2973406">0xd1b71758e219652c</span><span class="op" id="2973424">,</span>&nbsp;<span class="op" id="2973426">-</span><span class="num" id="2973427">77</span><span class="op" id="2973429">,</span>&nbsp;<span class="builtintype" id="2973431">false</span><span class="op" id="2973436">}</span><span class="op" id="2973437">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973441">//&nbsp;10^-4</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973451">{</span><span class="num" id="2973452">0x9c40000000000000</span><span class="op" id="2973470">,</span>&nbsp;<span class="op" id="2973472">-</span><span class="num" id="2973473">50</span><span class="op" id="2973475">,</span>&nbsp;<span class="builtintype" id="2973477">false</span><span class="op" id="2973482">}</span><span class="op" id="2973483">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973487">//&nbsp;10^4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973496">{</span><span class="num" id="2973497">0xe8d4a51000000000</span><span class="op" id="2973515">,</span>&nbsp;<span class="op" id="2973517">-</span><span class="num" id="2973518">24</span><span class="op" id="2973520">,</span>&nbsp;<span class="builtintype" id="2973522">false</span><span class="op" id="2973527">}</span><span class="op" id="2973528">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973532">//&nbsp;10^12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973542">{</span><span class="num" id="2973543">0xad78ebc5ac620000</span><span class="op" id="2973561">,</span>&nbsp;<span class="num" id="2973563">3</span><span class="op" id="2973564">,</span>&nbsp;<span class="builtintype" id="2973566">false</span><span class="op" id="2973571">}</span><span class="op" id="2973572">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2973578">//&nbsp;10^20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973588">{</span><span class="num" id="2973589">0x813f3978f8940984</span><span class="op" id="2973607">,</span>&nbsp;<span class="num" id="2973609">30</span><span class="op" id="2973611">,</span>&nbsp;<span class="builtintype" id="2973613">false</span><span class="op" id="2973618">}</span><span class="op" id="2973619">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2973624">//&nbsp;10^28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973634">{</span><span class="num" id="2973635">0xc097ce7bc90715b3</span><span class="op" id="2973653">,</span>&nbsp;<span class="num" id="2973655">56</span><span class="op" id="2973657">,</span>&nbsp;<span class="builtintype" id="2973659">false</span><span class="op" id="2973664">}</span><span class="op" id="2973665">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2973670">//&nbsp;10^36</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973680">{</span><span class="num" id="2973681">0x8f7e32ce7bea5c70</span><span class="op" id="2973699">,</span>&nbsp;<span class="num" id="2973701">83</span><span class="op" id="2973703">,</span>&nbsp;<span class="builtintype" id="2973705">false</span><span class="op" id="2973710">}</span><span class="op" id="2973711">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2973716">//&nbsp;10^44</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973726">{</span><span class="num" id="2973727">0xd5d238a4abe98068</span><span class="op" id="2973745">,</span>&nbsp;<span class="num" id="2973747">109</span><span class="op" id="2973750">,</span>&nbsp;<span class="builtintype" id="2973752">false</span><span class="op" id="2973757">}</span><span class="op" id="2973758">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973762">//&nbsp;10^52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973772">{</span><span class="num" id="2973773">0x9f4f2726179a2245</span><span class="op" id="2973791">,</span>&nbsp;<span class="num" id="2973793">136</span><span class="op" id="2973796">,</span>&nbsp;<span class="builtintype" id="2973798">false</span><span class="op" id="2973803">}</span><span class="op" id="2973804">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973808">//&nbsp;10^60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973818">{</span><span class="num" id="2973819">0xed63a231d4c4fb27</span><span class="op" id="2973837">,</span>&nbsp;<span class="num" id="2973839">162</span><span class="op" id="2973842">,</span>&nbsp;<span class="builtintype" id="2973844">false</span><span class="op" id="2973849">}</span><span class="op" id="2973850">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973854">//&nbsp;10^68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973864">{</span><span class="num" id="2973865">0xb0de65388cc8ada8</span><span class="op" id="2973883">,</span>&nbsp;<span class="num" id="2973885">189</span><span class="op" id="2973888">,</span>&nbsp;<span class="builtintype" id="2973890">false</span><span class="op" id="2973895">}</span><span class="op" id="2973896">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973900">//&nbsp;10^76</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973910">{</span><span class="num" id="2973911">0x83c7088e1aab65db</span><span class="op" id="2973929">,</span>&nbsp;<span class="num" id="2973931">216</span><span class="op" id="2973934">,</span>&nbsp;<span class="builtintype" id="2973936">false</span><span class="op" id="2973941">}</span><span class="op" id="2973942">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973946">//&nbsp;10^84</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973956">{</span><span class="num" id="2973957">0xc45d1df942711d9a</span><span class="op" id="2973975">,</span>&nbsp;<span class="num" id="2973977">242</span><span class="op" id="2973980">,</span>&nbsp;<span class="builtintype" id="2973982">false</span><span class="op" id="2973987">}</span><span class="op" id="2973988">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2973992">//&nbsp;10^92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974002">{</span><span class="num" id="2974003">0x924d692ca61be758</span><span class="op" id="2974021">,</span>&nbsp;<span class="num" id="2974023">269</span><span class="op" id="2974026">,</span>&nbsp;<span class="builtintype" id="2974028">false</span><span class="op" id="2974033">}</span><span class="op" id="2974034">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974038">//&nbsp;10^100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974049">{</span><span class="num" id="2974050">0xda01ee641a708dea</span><span class="op" id="2974068">,</span>&nbsp;<span class="num" id="2974070">295</span><span class="op" id="2974073">,</span>&nbsp;<span class="builtintype" id="2974075">false</span><span class="op" id="2974080">}</span><span class="op" id="2974081">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974085">//&nbsp;10^108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974096">{</span><span class="num" id="2974097">0xa26da3999aef774a</span><span class="op" id="2974115">,</span>&nbsp;<span class="num" id="2974117">322</span><span class="op" id="2974120">,</span>&nbsp;<span class="builtintype" id="2974122">false</span><span class="op" id="2974127">}</span><span class="op" id="2974128">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974132">//&nbsp;10^116</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974143">{</span><span class="num" id="2974144">0xf209787bb47d6b85</span><span class="op" id="2974162">,</span>&nbsp;<span class="num" id="2974164">348</span><span class="op" id="2974167">,</span>&nbsp;<span class="builtintype" id="2974169">false</span><span class="op" id="2974174">}</span><span class="op" id="2974175">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974179">//&nbsp;10^124</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974190">{</span><span class="num" id="2974191">0xb454e4a179dd1877</span><span class="op" id="2974209">,</span>&nbsp;<span class="num" id="2974211">375</span><span class="op" id="2974214">,</span>&nbsp;<span class="builtintype" id="2974216">false</span><span class="op" id="2974221">}</span><span class="op" id="2974222">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974226">//&nbsp;10^132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974237">{</span><span class="num" id="2974238">0x865b86925b9bc5c2</span><span class="op" id="2974256">,</span>&nbsp;<span class="num" id="2974258">402</span><span class="op" id="2974261">,</span>&nbsp;<span class="builtintype" id="2974263">false</span><span class="op" id="2974268">}</span><span class="op" id="2974269">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974273">//&nbsp;10^140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974284">{</span><span class="num" id="2974285">0xc83553c5c8965d3d</span><span class="op" id="2974303">,</span>&nbsp;<span class="num" id="2974305">428</span><span class="op" id="2974308">,</span>&nbsp;<span class="builtintype" id="2974310">false</span><span class="op" id="2974315">}</span><span class="op" id="2974316">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974320">//&nbsp;10^148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974331">{</span><span class="num" id="2974332">0x952ab45cfa97a0b3</span><span class="op" id="2974350">,</span>&nbsp;<span class="num" id="2974352">455</span><span class="op" id="2974355">,</span>&nbsp;<span class="builtintype" id="2974357">false</span><span class="op" id="2974362">}</span><span class="op" id="2974363">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974367">//&nbsp;10^156</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974378">{</span><span class="num" id="2974379">0xde469fbd99a05fe3</span><span class="op" id="2974397">,</span>&nbsp;<span class="num" id="2974399">481</span><span class="op" id="2974402">,</span>&nbsp;<span class="builtintype" id="2974404">false</span><span class="op" id="2974409">}</span><span class="op" id="2974410">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974414">//&nbsp;10^164</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974425">{</span><span class="num" id="2974426">0xa59bc234db398c25</span><span class="op" id="2974444">,</span>&nbsp;<span class="num" id="2974446">508</span><span class="op" id="2974449">,</span>&nbsp;<span class="builtintype" id="2974451">false</span><span class="op" id="2974456">}</span><span class="op" id="2974457">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974461">//&nbsp;10^172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974472">{</span><span class="num" id="2974473">0xf6c69a72a3989f5c</span><span class="op" id="2974491">,</span>&nbsp;<span class="num" id="2974493">534</span><span class="op" id="2974496">,</span>&nbsp;<span class="builtintype" id="2974498">false</span><span class="op" id="2974503">}</span><span class="op" id="2974504">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974508">//&nbsp;10^180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974519">{</span><span class="num" id="2974520">0xb7dcbf5354e9bece</span><span class="op" id="2974538">,</span>&nbsp;<span class="num" id="2974540">561</span><span class="op" id="2974543">,</span>&nbsp;<span class="builtintype" id="2974545">false</span><span class="op" id="2974550">}</span><span class="op" id="2974551">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974555">//&nbsp;10^188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974566">{</span><span class="num" id="2974567">0x88fcf317f22241e2</span><span class="op" id="2974585">,</span>&nbsp;<span class="num" id="2974587">588</span><span class="op" id="2974590">,</span>&nbsp;<span class="builtintype" id="2974592">false</span><span class="op" id="2974597">}</span><span class="op" id="2974598">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974602">//&nbsp;10^196</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974613">{</span><span class="num" id="2974614">0xcc20ce9bd35c78a5</span><span class="op" id="2974632">,</span>&nbsp;<span class="num" id="2974634">614</span><span class="op" id="2974637">,</span>&nbsp;<span class="builtintype" id="2974639">false</span><span class="op" id="2974644">}</span><span class="op" id="2974645">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974649">//&nbsp;10^204</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974660">{</span><span class="num" id="2974661">0x98165af37b2153df</span><span class="op" id="2974679">,</span>&nbsp;<span class="num" id="2974681">641</span><span class="op" id="2974684">,</span>&nbsp;<span class="builtintype" id="2974686">false</span><span class="op" id="2974691">}</span><span class="op" id="2974692">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974696">//&nbsp;10^212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974707">{</span><span class="num" id="2974708">0xe2a0b5dc971f303a</span><span class="op" id="2974726">,</span>&nbsp;<span class="num" id="2974728">667</span><span class="op" id="2974731">,</span>&nbsp;<span class="builtintype" id="2974733">false</span><span class="op" id="2974738">}</span><span class="op" id="2974739">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974743">//&nbsp;10^220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974754">{</span><span class="num" id="2974755">0xa8d9d1535ce3b396</span><span class="op" id="2974773">,</span>&nbsp;<span class="num" id="2974775">694</span><span class="op" id="2974778">,</span>&nbsp;<span class="builtintype" id="2974780">false</span><span class="op" id="2974785">}</span><span class="op" id="2974786">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974790">//&nbsp;10^228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974801">{</span><span class="num" id="2974802">0xfb9b7cd9a4a7443c</span><span class="op" id="2974820">,</span>&nbsp;<span class="num" id="2974822">720</span><span class="op" id="2974825">,</span>&nbsp;<span class="builtintype" id="2974827">false</span><span class="op" id="2974832">}</span><span class="op" id="2974833">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974837">//&nbsp;10^236</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974848">{</span><span class="num" id="2974849">0xbb764c4ca7a44410</span><span class="op" id="2974867">,</span>&nbsp;<span class="num" id="2974869">747</span><span class="op" id="2974872">,</span>&nbsp;<span class="builtintype" id="2974874">false</span><span class="op" id="2974879">}</span><span class="op" id="2974880">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974884">//&nbsp;10^244</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974895">{</span><span class="num" id="2974896">0x8bab8eefb6409c1a</span><span class="op" id="2974914">,</span>&nbsp;<span class="num" id="2974916">774</span><span class="op" id="2974919">,</span>&nbsp;<span class="builtintype" id="2974921">false</span><span class="op" id="2974926">}</span><span class="op" id="2974927">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974931">//&nbsp;10^252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974942">{</span><span class="num" id="2974943">0xd01fef10a657842c</span><span class="op" id="2974961">,</span>&nbsp;<span class="num" id="2974963">800</span><span class="op" id="2974966">,</span>&nbsp;<span class="builtintype" id="2974968">false</span><span class="op" id="2974973">}</span><span class="op" id="2974974">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2974978">//&nbsp;10^260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974989">{</span><span class="num" id="2974990">0x9b10a4e5e9913129</span><span class="op" id="2975008">,</span>&nbsp;<span class="num" id="2975010">827</span><span class="op" id="2975013">,</span>&nbsp;<span class="builtintype" id="2975015">false</span><span class="op" id="2975020">}</span><span class="op" id="2975021">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975025">//&nbsp;10^268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975036">{</span><span class="num" id="2975037">0xe7109bfba19c0c9d</span><span class="op" id="2975055">,</span>&nbsp;<span class="num" id="2975057">853</span><span class="op" id="2975060">,</span>&nbsp;<span class="builtintype" id="2975062">false</span><span class="op" id="2975067">}</span><span class="op" id="2975068">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975072">//&nbsp;10^276</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975083">{</span><span class="num" id="2975084">0xac2820d9623bf429</span><span class="op" id="2975102">,</span>&nbsp;<span class="num" id="2975104">880</span><span class="op" id="2975107">,</span>&nbsp;<span class="builtintype" id="2975109">false</span><span class="op" id="2975114">}</span><span class="op" id="2975115">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975119">//&nbsp;10^284</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975130">{</span><span class="num" id="2975131">0x80444b5e7aa7cf85</span><span class="op" id="2975149">,</span>&nbsp;<span class="num" id="2975151">907</span><span class="op" id="2975154">,</span>&nbsp;<span class="builtintype" id="2975156">false</span><span class="op" id="2975161">}</span><span class="op" id="2975162">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975166">//&nbsp;10^292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975177">{</span><span class="num" id="2975178">0xbf21e44003acdd2d</span><span class="op" id="2975196">,</span>&nbsp;<span class="num" id="2975198">933</span><span class="op" id="2975201">,</span>&nbsp;<span class="builtintype" id="2975203">false</span><span class="op" id="2975208">}</span><span class="op" id="2975209">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975213">//&nbsp;10^300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975224">{</span><span class="num" id="2975225">0x8e679c2f5e44ff8f</span><span class="op" id="2975243">,</span>&nbsp;<span class="num" id="2975245">960</span><span class="op" id="2975248">,</span>&nbsp;<span class="builtintype" id="2975250">false</span><span class="op" id="2975255">}</span><span class="op" id="2975256">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975260">//&nbsp;10^308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975271">{</span><span class="num" id="2975272">0xd433179d9c8cb841</span><span class="op" id="2975290">,</span>&nbsp;<span class="num" id="2975292">986</span><span class="op" id="2975295">,</span>&nbsp;<span class="builtintype" id="2975297">false</span><span class="op" id="2975302">}</span><span class="op" id="2975303">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2975307">//&nbsp;10^316</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975318">{</span><span class="num" id="2975319">0x9e19db92b4e31ba9</span><span class="op" id="2975337">,</span>&nbsp;<span class="num" id="2975339">1013</span><span class="op" id="2975343">,</span>&nbsp;<span class="builtintype" id="2975345">false</span><span class="op" id="2975350">}</span><span class="op" id="2975351">,</span>&nbsp;&nbsp;<span class="comment" id="2975354">//&nbsp;10^324</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975365">{</span><span class="num" id="2975366">0xeb96bf6ebadf77d9</span><span class="op" id="2975384">,</span>&nbsp;<span class="num" id="2975386">1039</span><span class="op" id="2975390">,</span>&nbsp;<span class="builtintype" id="2975392">false</span><span class="op" id="2975397">}</span><span class="op" id="2975398">,</span>&nbsp;&nbsp;<span class="comment" id="2975401">//&nbsp;10^332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975412">{</span><span class="num" id="2975413">0xaf87023b9bf0ee6b</span><span class="op" id="2975431">,</span>&nbsp;<span class="num" id="2975433">1066</span><span class="op" id="2975437">,</span>&nbsp;<span class="builtintype" id="2975439">false</span><span class="op" id="2975444">}</span><span class="op" id="2975445">,</span>&nbsp;&nbsp;<span class="comment" id="2975448">//&nbsp;10^340</span><br>
<span class="lineno"></span><span class="op" id="2975458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="2975461">//&nbsp;floatBits&nbsp;returns&nbsp;the&nbsp;bits&nbsp;of&nbsp;the&nbsp;float64&nbsp;that&nbsp;best&nbsp;approximates</span><br>
<span class="lineno"></span><span class="comment" id="2975529">//&nbsp;the&nbsp;extFloat&nbsp;passed&nbsp;as&nbsp;receiver.&nbsp;Overflow&nbsp;is&nbsp;set&nbsp;to&nbsp;true&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2975592">//&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;is&nbsp;±Inf.</span><br>
<span class="lineno"></span><span class="keyword" id="2975627">func</span>&nbsp;<span class="op" id="2975632">(</span><span class="ident" id="2975633">f</span>&nbsp;<span class="op" id="2975635">*</span><span class="ident" id="2975636"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2975644">)</span>&nbsp;<span class="ident" id="2975646">floatBits</span><span class="op" id="2975655">(</span><span class="ident" id="2975656">flt</span>&nbsp;<span class="op" id="2975660">*</span><span class="ident" id="2975661"><a href="/strconv/ftoa.go.html#2991005">floatInfo</a></span><span class="op" id="2975670">)</span>&nbsp;<span class="op" id="2975672">(</span><span class="ident" id="2975673">bits</span>&nbsp;<span class="ident" id="2975678">uint64</span><span class="op" id="2975684">,</span>&nbsp;<span class="ident" id="2975686">overflow</span>&nbsp;<span class="builtintype" id="2975695">bool</span><span class="op" id="2975699">)</span>&nbsp;<span class="op" id="2975701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975704"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2975705">.</span><span class="ident" id="2975706">Normalize</span><span class="op" id="2975715">(</span><span class="op" id="2975716">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975720">exp</span>&nbsp;<span class="op" id="2975724">:=</span>&nbsp;<span class="ident" id="2975727"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2975728">.</span><span class="ident" id="2975729">exp</span>&nbsp;<span class="op" id="2975733">+</span>&nbsp;<span class="num" id="2975735">63</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2975740">//&nbsp;Exponent&nbsp;too&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975764">if</span>&nbsp;<span class="ident" id="2975767"><a href="/strconv/extfloat.go.html#2975720">exp</a></span>&nbsp;<span class="op" id="2975771">&lt;</span>&nbsp;<span class="ident" id="2975773"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2975776">.</span><span class="ident" id="2975777">bias</span><span class="op" id="2975781">+</span><span class="num" id="2975782">1</span>&nbsp;<span class="op" id="2975784">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975788">n</span>&nbsp;<span class="op" id="2975790">:=</span>&nbsp;<span class="ident" id="2975793"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2975796">.</span><span class="ident" id="2975797">bias</span>&nbsp;<span class="op" id="2975802">+</span>&nbsp;<span class="num" id="2975804">1</span>&nbsp;<span class="op" id="2975806">-</span>&nbsp;<span class="ident" id="2975808"><a href="/strconv/extfloat.go.html#2975720">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975814"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2975815">.</span><span class="ident" id="2975816">mant</span>&nbsp;<span class="op" id="2975821">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2975825">uint</span><span class="op" id="2975829">(</span><span class="ident" id="2975830"><a href="/strconv/extfloat.go.html#2975788">n</a></span><span class="op" id="2975831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975835"><a href="/strconv/extfloat.go.html#2975720">exp</a></span>&nbsp;<span class="op" id="2975839">+=</span>&nbsp;<span class="ident" id="2975842"><a href="/strconv/extfloat.go.html#2975788">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2975849">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits&nbsp;from&nbsp;the&nbsp;64-bit&nbsp;mantissa.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975907">mant</span>&nbsp;<span class="op" id="2975912">:=</span>&nbsp;<span class="ident" id="2975915"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2975916">.</span><span class="ident" id="2975917">mant</span>&nbsp;<span class="op" id="2975922">&gt;&gt;</span>&nbsp;<span class="op" id="2975925">(</span><span class="num" id="2975926">63</span>&nbsp;<span class="op" id="2975929">-</span>&nbsp;<span class="ident" id="2975931"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2975934">.</span><span class="ident" id="2975935">mantbits</span><span class="op" id="2975943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975946">if</span>&nbsp;<span class="ident" id="2975949"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2975950">.</span><span class="ident" id="2975951">mant</span><span class="op" id="2975955">&amp;</span><span class="op" id="2975956">(</span><span class="num" id="2975957">1</span><span class="op" id="2975958">&lt;&lt;</span><span class="op" id="2975960">(</span><span class="num" id="2975961">62</span><span class="op" id="2975963">-</span><span class="ident" id="2975964"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2975967">.</span><span class="ident" id="2975968">mantbits</span><span class="op" id="2975976">)</span><span class="op" id="2975977">)</span>&nbsp;<span class="op" id="2975979">!=</span>&nbsp;<span class="num" id="2975982">0</span>&nbsp;<span class="op" id="2975984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2975988">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976003"><a href="/strconv/extfloat.go.html#2975907">mant</a></span>&nbsp;<span class="op" id="2976008">+=</span>&nbsp;<span class="num" id="2976011">1</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976018">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976067">if</span>&nbsp;<span class="ident" id="2976070"><a href="/strconv/extfloat.go.html#2975907">mant</a></span>&nbsp;<span class="op" id="2976075">==</span>&nbsp;<span class="num" id="2976078">2</span><span class="op" id="2976079">&lt;&lt;</span><span class="ident" id="2976081"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976084">.</span><span class="ident" id="2976085">mantbits</span>&nbsp;<span class="op" id="2976094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976098"><a href="/strconv/extfloat.go.html#2975907">mant</a></span>&nbsp;<span class="op" id="2976103">&gt;&gt;=</span>&nbsp;<span class="num" id="2976107">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976111"><a href="/strconv/extfloat.go.html#2975720">exp</a></span><span class="op" id="2976114">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976122">//&nbsp;Infinities.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976138">if</span>&nbsp;<span class="ident" id="2976141"><a href="/strconv/extfloat.go.html#2975720">exp</a></span><span class="op" id="2976144">-</span><span class="ident" id="2976145"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976148">.</span><span class="ident" id="2976149">bias</span>&nbsp;<span class="op" id="2976154">&gt;=</span>&nbsp;<span class="num" id="2976157">1</span><span class="op" id="2976158">&lt;&lt;</span><span class="ident" id="2976160"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976163">.</span><span class="ident" id="2976164">expbits</span><span class="op" id="2976171">-</span><span class="num" id="2976172">1</span>&nbsp;<span class="op" id="2976174">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976178">//&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976189"><a href="/strconv/extfloat.go.html#2975907">mant</a></span>&nbsp;<span class="op" id="2976194">=</span>&nbsp;<span class="num" id="2976196">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976200"><a href="/strconv/extfloat.go.html#2975720">exp</a></span>&nbsp;<span class="op" id="2976204">=</span>&nbsp;<span class="num" id="2976206">1</span><span class="op" id="2976207">&lt;&lt;</span><span class="ident" id="2976209"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976212">.</span><span class="ident" id="2976213">expbits</span>&nbsp;<span class="op" id="2976221">-</span>&nbsp;<span class="num" id="2976223">1</span>&nbsp;<span class="op" id="2976225">+</span>&nbsp;<span class="ident" id="2976227"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976230">.</span><span class="ident" id="2976231">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976238"><a href="/strconv/extfloat.go.html#2975686">overflow</a></span>&nbsp;<span class="op" id="2976247">=</span>&nbsp;<span class="builtintype" id="2976249">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976255">}</span>&nbsp;<span class="keyword" id="2976257">else</span>&nbsp;<span class="keyword" id="2976262">if</span>&nbsp;<span class="ident" id="2976265"><a href="/strconv/extfloat.go.html#2975907">mant</a></span><span class="op" id="2976269">&amp;</span><span class="op" id="2976270">(</span><span class="num" id="2976271">1</span><span class="op" id="2976272">&lt;&lt;</span><span class="ident" id="2976274"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976277">.</span><span class="ident" id="2976278">mantbits</span><span class="op" id="2976286">)</span>&nbsp;<span class="op" id="2976288">==</span>&nbsp;<span class="num" id="2976291">0</span>&nbsp;<span class="op" id="2976293">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976297">//&nbsp;Denormalized?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976316"><a href="/strconv/extfloat.go.html#2975720">exp</a></span>&nbsp;<span class="op" id="2976320">=</span>&nbsp;<span class="ident" id="2976322"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976325">.</span><span class="ident" id="2976326">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2976335">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976354"><a href="/strconv/extfloat.go.html#2975673">bits</a></span>&nbsp;<span class="op" id="2976359">=</span>&nbsp;<span class="ident" id="2976361"><a href="/strconv/extfloat.go.html#2975907">mant</a></span>&nbsp;<span class="op" id="2976366">&amp;</span>&nbsp;<span class="op" id="2976368">(</span><span class="ident" id="2976369">uint64</span><span class="op" id="2976375">(</span><span class="num" id="2976376">1</span><span class="op" id="2976377">)</span><span class="op" id="2976378">&lt;&lt;</span><span class="ident" id="2976380"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976383">.</span><span class="ident" id="2976384">mantbits</span>&nbsp;<span class="op" id="2976393">-</span>&nbsp;<span class="num" id="2976395">1</span><span class="op" id="2976396">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976399"><a href="/strconv/extfloat.go.html#2975673">bits</a></span>&nbsp;<span class="op" id="2976404">|=</span>&nbsp;<span class="ident" id="2976407">uint64</span><span class="op" id="2976413">(</span><span class="op" id="2976414">(</span><span class="ident" id="2976415"><a href="/strconv/extfloat.go.html#2975720">exp</a></span><span class="op" id="2976418">-</span><span class="ident" id="2976419"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976422">.</span><span class="ident" id="2976423">bias</span><span class="op" id="2976427">)</span><span class="op" id="2976428">&amp;</span><span class="op" id="2976429">(</span><span class="num" id="2976430">1</span><span class="op" id="2976431">&lt;&lt;</span><span class="ident" id="2976433"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976436">.</span><span class="ident" id="2976437">expbits</span><span class="op" id="2976444">-</span><span class="num" id="2976445">1</span><span class="op" id="2976446">)</span><span class="op" id="2976447">)</span>&nbsp;<span class="op" id="2976449">&lt;&lt;</span>&nbsp;<span class="ident" id="2976452"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976455">.</span><span class="ident" id="2976456">mantbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976466">if</span>&nbsp;<span class="ident" id="2976469"><a href="/strconv/extfloat.go.html#2975633">f</a></span><span class="op" id="2976470">.</span><span class="ident" id="2976471">neg</span>&nbsp;<span class="op" id="2976475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976479"><a href="/strconv/extfloat.go.html#2975673">bits</a></span>&nbsp;<span class="op" id="2976484">|=</span>&nbsp;<span class="num" id="2976487">1</span>&nbsp;<span class="op" id="2976489">&lt;&lt;</span>&nbsp;<span class="op" id="2976492">(</span><span class="ident" id="2976493"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976496">.</span><span class="ident" id="2976497">mantbits</span>&nbsp;<span class="op" id="2976506">+</span>&nbsp;<span class="ident" id="2976508"><a href="/strconv/extfloat.go.html#2975656">flt</a></span><span class="op" id="2976511">.</span><span class="ident" id="2976512">expbits</span><span class="op" id="2976519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976525">return</span><br>
<span class="lineno">170</span><span class="op" id="2976532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2976535">//&nbsp;AssignComputeBounds&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;floating&nbsp;point&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2976593">//&nbsp;defined&nbsp;by&nbsp;mant,&nbsp;exp&nbsp;and&nbsp;precision&nbsp;given&nbsp;by&nbsp;flt.&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="2976656">//&nbsp;lower,&nbsp;upper&nbsp;such&nbsp;that&nbsp;any&nbsp;number&nbsp;in&nbsp;the&nbsp;closed&nbsp;interval</span><br>
<span class="lineno">175</span><span class="comment" id="2976716">//&nbsp;[lower,&nbsp;upper]&nbsp;is&nbsp;converted&nbsp;back&nbsp;to&nbsp;the&nbsp;same&nbsp;floating&nbsp;point&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="2976787">func</span>&nbsp;<span class="op" id="2976792">(</span><span class="ident" id="2976793">f</span>&nbsp;<span class="op" id="2976795">*</span><span class="ident" id="2976796"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2976804">)</span>&nbsp;<span class="ident" id="2976806">AssignComputeBounds</span><span class="op" id="2976825">(</span><span class="ident" id="2976826">mant</span>&nbsp;<span class="ident" id="2976831">uint64</span><span class="op" id="2976837">,</span>&nbsp;<span class="ident" id="2976839">exp</span>&nbsp;<span class="builtintype" id="2976843">int</span><span class="op" id="2976846">,</span>&nbsp;<span class="ident" id="2976848">neg</span>&nbsp;<span class="builtintype" id="2976852">bool</span><span class="op" id="2976856">,</span>&nbsp;<span class="ident" id="2976858">flt</span>&nbsp;<span class="op" id="2976862">*</span><span class="ident" id="2976863"><a href="/strconv/ftoa.go.html#2991005">floatInfo</a></span><span class="op" id="2976872">)</span>&nbsp;<span class="op" id="2976874">(</span><span class="ident" id="2976875">lower</span><span class="op" id="2976880">,</span>&nbsp;<span class="ident" id="2976882">upper</span>&nbsp;<span class="ident" id="2976888"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2976896">)</span>&nbsp;<span class="op" id="2976898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976901"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2976902">.</span><span class="ident" id="2976903">mant</span>&nbsp;<span class="op" id="2976908">=</span>&nbsp;<span class="ident" id="2976910"><a href="/strconv/extfloat.go.html#2976826">mant</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976916"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2976917">.</span><span class="ident" id="2976918">exp</span>&nbsp;<span class="op" id="2976922">=</span>&nbsp;<span class="ident" id="2976924"><a href="/strconv/extfloat.go.html#2976839">exp</a></span>&nbsp;<span class="op" id="2976928">-</span>&nbsp;<span class="builtintype" id="2976930">int</span><span class="op" id="2976933">(</span><span class="ident" id="2976934"><a href="/strconv/extfloat.go.html#2976858">flt</a></span><span class="op" id="2976937">.</span><span class="ident" id="2976938">mantbits</span><span class="op" id="2976946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976949"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2976950">.</span><span class="ident" id="2976951">neg</span>&nbsp;<span class="op" id="2976955">=</span>&nbsp;<span class="ident" id="2976957"><a href="/strconv/extfloat.go.html#2976848">neg</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976962">if</span>&nbsp;<span class="ident" id="2976965"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2976966">.</span><span class="ident" id="2976967">exp</span>&nbsp;<span class="op" id="2976971">&lt;=</span>&nbsp;<span class="num" id="2976974">0</span>&nbsp;<span class="op" id="2976976">&amp;&amp;</span>&nbsp;<span class="ident" id="2976979"><a href="/strconv/extfloat.go.html#2976826">mant</a></span>&nbsp;<span class="op" id="2976984">==</span>&nbsp;<span class="op" id="2976987">(</span><span class="ident" id="2976988"><a href="/strconv/extfloat.go.html#2976826">mant</a></span><span class="op" id="2976992">&gt;&gt;</span><span class="builtintype" id="2976994">uint</span><span class="op" id="2976998">(</span><span class="op" id="2976999">-</span><span class="ident" id="2977000"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977001">.</span><span class="ident" id="2977002">exp</span><span class="op" id="2977005">)</span><span class="op" id="2977006">)</span><span class="op" id="2977007">&lt;&lt;</span><span class="builtintype" id="2977009">uint</span><span class="op" id="2977013">(</span><span class="op" id="2977014">-</span><span class="ident" id="2977015"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977016">.</span><span class="ident" id="2977017">exp</span><span class="op" id="2977020">)</span>&nbsp;<span class="op" id="2977022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2977026">//&nbsp;An&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977048"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977049">.</span><span class="ident" id="2977050">mant</span>&nbsp;<span class="op" id="2977055">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2977059">uint</span><span class="op" id="2977063">(</span><span class="op" id="2977064">-</span><span class="ident" id="2977065"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977066">.</span><span class="ident" id="2977067">exp</span><span class="op" id="2977070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977074"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977075">.</span><span class="ident" id="2977076">exp</span>&nbsp;<span class="op" id="2977080">=</span>&nbsp;<span class="num" id="2977082">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977086">return</span>&nbsp;<span class="op" id="2977093">*</span><span class="ident" id="2977094"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977095">,</span>&nbsp;<span class="op" id="2977097">*</span><span class="ident" id="2977098"><a href="/strconv/extfloat.go.html#2976793">f</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977104">expBiased</span>&nbsp;<span class="op" id="2977114">:=</span>&nbsp;<span class="ident" id="2977117"><a href="/strconv/extfloat.go.html#2976839">exp</a></span>&nbsp;<span class="op" id="2977121">-</span>&nbsp;<span class="ident" id="2977123"><a href="/strconv/extfloat.go.html#2976858">flt</a></span><span class="op" id="2977126">.</span><span class="ident" id="2977127">bias</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977134"><a href="/strconv/extfloat.go.html#2976882">upper</a></span>&nbsp;<span class="op" id="2977140">=</span>&nbsp;<span class="ident" id="2977142"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2977150">{</span><span class="ident" id="2977151">mant</span><span class="op" id="2977155">:</span>&nbsp;<span class="num" id="2977157">2</span><span class="op" id="2977158">*</span><span class="ident" id="2977159"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977160">.</span><span class="ident" id="2977161">mant</span>&nbsp;<span class="op" id="2977166">+</span>&nbsp;<span class="num" id="2977168">1</span><span class="op" id="2977169">,</span>&nbsp;<span class="ident" id="2977171">exp</span><span class="op" id="2977174">:</span>&nbsp;<span class="ident" id="2977176"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977177">.</span><span class="ident" id="2977178">exp</span>&nbsp;<span class="op" id="2977182">-</span>&nbsp;<span class="num" id="2977184">1</span><span class="op" id="2977185">,</span>&nbsp;<span class="ident" id="2977187">neg</span><span class="op" id="2977190">:</span>&nbsp;<span class="ident" id="2977192"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977193">.</span><span class="ident" id="2977194">neg</span><span class="op" id="2977197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977200">if</span>&nbsp;<span class="ident" id="2977203"><a href="/strconv/extfloat.go.html#2976826">mant</a></span>&nbsp;<span class="op" id="2977208">!=</span>&nbsp;<span class="num" id="2977211">1</span><span class="op" id="2977212">&lt;&lt;</span><span class="ident" id="2977214"><a href="/strconv/extfloat.go.html#2976858">flt</a></span><span class="op" id="2977217">.</span><span class="ident" id="2977218">mantbits</span>&nbsp;<span class="op" id="2977227">||</span>&nbsp;<span class="ident" id="2977230"><a href="/strconv/extfloat.go.html#2977104">expBiased</a></span>&nbsp;<span class="op" id="2977240">==</span>&nbsp;<span class="num" id="2977243">1</span>&nbsp;<span class="op" id="2977245">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977249"><a href="/strconv/extfloat.go.html#2976875">lower</a></span>&nbsp;<span class="op" id="2977255">=</span>&nbsp;<span class="ident" id="2977257"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2977265">{</span><span class="ident" id="2977266">mant</span><span class="op" id="2977270">:</span>&nbsp;<span class="num" id="2977272">2</span><span class="op" id="2977273">*</span><span class="ident" id="2977274"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977275">.</span><span class="ident" id="2977276">mant</span>&nbsp;<span class="op" id="2977281">-</span>&nbsp;<span class="num" id="2977283">1</span><span class="op" id="2977284">,</span>&nbsp;<span class="ident" id="2977286">exp</span><span class="op" id="2977289">:</span>&nbsp;<span class="ident" id="2977291"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977292">.</span><span class="ident" id="2977293">exp</span>&nbsp;<span class="op" id="2977297">-</span>&nbsp;<span class="num" id="2977299">1</span><span class="op" id="2977300">,</span>&nbsp;<span class="ident" id="2977302">neg</span><span class="op" id="2977305">:</span>&nbsp;<span class="ident" id="2977307"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977308">.</span><span class="ident" id="2977309">neg</span><span class="op" id="2977312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977315">}</span>&nbsp;<span class="keyword" id="2977317">else</span>&nbsp;<span class="op" id="2977322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977326"><a href="/strconv/extfloat.go.html#2976875">lower</a></span>&nbsp;<span class="op" id="2977332">=</span>&nbsp;<span class="ident" id="2977334"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2977342">{</span><span class="ident" id="2977343">mant</span><span class="op" id="2977347">:</span>&nbsp;<span class="num" id="2977349">4</span><span class="op" id="2977350">*</span><span class="ident" id="2977351"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977352">.</span><span class="ident" id="2977353">mant</span>&nbsp;<span class="op" id="2977358">-</span>&nbsp;<span class="num" id="2977360">1</span><span class="op" id="2977361">,</span>&nbsp;<span class="ident" id="2977363">exp</span><span class="op" id="2977366">:</span>&nbsp;<span class="ident" id="2977368"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977369">.</span><span class="ident" id="2977370">exp</span>&nbsp;<span class="op" id="2977374">-</span>&nbsp;<span class="num" id="2977376">2</span><span class="op" id="2977377">,</span>&nbsp;<span class="ident" id="2977379">neg</span><span class="op" id="2977382">:</span>&nbsp;<span class="ident" id="2977384"><a href="/strconv/extfloat.go.html#2976793">f</a></span><span class="op" id="2977385">.</span><span class="ident" id="2977386">neg</span><span class="op" id="2977389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977395">return</span><br>
<span class="lineno">195</span><span class="op" id="2977402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2977405">//&nbsp;Normalize&nbsp;normalizes&nbsp;f&nbsp;so&nbsp;that&nbsp;the&nbsp;highest&nbsp;bit&nbsp;of&nbsp;the&nbsp;mantissa&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2977474">//&nbsp;set,&nbsp;and&nbsp;returns&nbsp;the&nbsp;number&nbsp;by&nbsp;which&nbsp;the&nbsp;mantissa&nbsp;was&nbsp;left-shifted.</span><br>
<span class="lineno"></span><span class="keyword" id="2977545">func</span>&nbsp;<span class="op" id="2977550">(</span><span class="ident" id="2977551">f</span>&nbsp;<span class="op" id="2977553">*</span><span class="ident" id="2977554"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2977562">)</span>&nbsp;<span class="ident" id="2977564">Normalize</span><span class="op" id="2977573">(</span><span class="op" id="2977574">)</span>&nbsp;<span class="op" id="2977576">(</span><span class="ident" id="2977577">shift</span>&nbsp;<span class="builtintype" id="2977583">uint</span><span class="op" id="2977587">)</span>&nbsp;<span class="op" id="2977589">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977592">mant</span><span class="op" id="2977596">,</span>&nbsp;<span class="ident" id="2977598">exp</span>&nbsp;<span class="op" id="2977602">:=</span>&nbsp;<span class="ident" id="2977605"><a href="/strconv/extfloat.go.html#2977551">f</a></span><span class="op" id="2977606">.</span><span class="ident" id="2977607">mant</span><span class="op" id="2977611">,</span>&nbsp;<span class="ident" id="2977613"><a href="/strconv/extfloat.go.html#2977551">f</a></span><span class="op" id="2977614">.</span><span class="ident" id="2977615">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977620">if</span>&nbsp;<span class="ident" id="2977623"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977628">==</span>&nbsp;<span class="num" id="2977631">0</span>&nbsp;<span class="op" id="2977633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977637">return</span>&nbsp;<span class="num" id="2977644">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977650">if</span>&nbsp;<span class="ident" id="2977653"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977657">&gt;&gt;</span><span class="op" id="2977659">(</span><span class="num" id="2977660">64</span><span class="op" id="2977662">-</span><span class="num" id="2977663">32</span><span class="op" id="2977665">)</span>&nbsp;<span class="op" id="2977667">==</span>&nbsp;<span class="num" id="2977670">0</span>&nbsp;<span class="op" id="2977672">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977676"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977681">&lt;&lt;=</span>&nbsp;<span class="num" id="2977685">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977690"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977694">-=</span>&nbsp;<span class="num" id="2977697">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977704">if</span>&nbsp;<span class="ident" id="2977707"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977711">&gt;&gt;</span><span class="op" id="2977713">(</span><span class="num" id="2977714">64</span><span class="op" id="2977716">-</span><span class="num" id="2977717">16</span><span class="op" id="2977719">)</span>&nbsp;<span class="op" id="2977721">==</span>&nbsp;<span class="num" id="2977724">0</span>&nbsp;<span class="op" id="2977726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977730"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977735">&lt;&lt;=</span>&nbsp;<span class="num" id="2977739">16</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977744"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977748">-=</span>&nbsp;<span class="num" id="2977751">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977758">if</span>&nbsp;<span class="ident" id="2977761"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977765">&gt;&gt;</span><span class="op" id="2977767">(</span><span class="num" id="2977768">64</span><span class="op" id="2977770">-</span><span class="num" id="2977771">8</span><span class="op" id="2977772">)</span>&nbsp;<span class="op" id="2977774">==</span>&nbsp;<span class="num" id="2977777">0</span>&nbsp;<span class="op" id="2977779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977783"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977788">&lt;&lt;=</span>&nbsp;<span class="num" id="2977792">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977796"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977800">-=</span>&nbsp;<span class="num" id="2977803">8</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977809">if</span>&nbsp;<span class="ident" id="2977812"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977816">&gt;&gt;</span><span class="op" id="2977818">(</span><span class="num" id="2977819">64</span><span class="op" id="2977821">-</span><span class="num" id="2977822">4</span><span class="op" id="2977823">)</span>&nbsp;<span class="op" id="2977825">==</span>&nbsp;<span class="num" id="2977828">0</span>&nbsp;<span class="op" id="2977830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977834"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977839">&lt;&lt;=</span>&nbsp;<span class="num" id="2977843">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977847"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977851">-=</span>&nbsp;<span class="num" id="2977854">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977857">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977860">if</span>&nbsp;<span class="ident" id="2977863"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977867">&gt;&gt;</span><span class="op" id="2977869">(</span><span class="num" id="2977870">64</span><span class="op" id="2977872">-</span><span class="num" id="2977873">2</span><span class="op" id="2977874">)</span>&nbsp;<span class="op" id="2977876">==</span>&nbsp;<span class="num" id="2977879">0</span>&nbsp;<span class="op" id="2977881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977885"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977890">&lt;&lt;=</span>&nbsp;<span class="num" id="2977894">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977898"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977902">-=</span>&nbsp;<span class="num" id="2977905">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977911">if</span>&nbsp;<span class="ident" id="2977914"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2977918">&gt;&gt;</span><span class="op" id="2977920">(</span><span class="num" id="2977921">64</span><span class="op" id="2977923">-</span><span class="num" id="2977924">1</span><span class="op" id="2977925">)</span>&nbsp;<span class="op" id="2977927">==</span>&nbsp;<span class="num" id="2977930">0</span>&nbsp;<span class="op" id="2977932">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977936"><a href="/strconv/extfloat.go.html#2977592">mant</a></span>&nbsp;<span class="op" id="2977941">&lt;&lt;=</span>&nbsp;<span class="num" id="2977945">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977949"><a href="/strconv/extfloat.go.html#2977598">exp</a></span>&nbsp;<span class="op" id="2977953">-=</span>&nbsp;<span class="num" id="2977956">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977962"><a href="/strconv/extfloat.go.html#2977577">shift</a></span>&nbsp;<span class="op" id="2977968">=</span>&nbsp;<span class="builtintype" id="2977970">uint</span><span class="op" id="2977974">(</span><span class="ident" id="2977975"><a href="/strconv/extfloat.go.html#2977551">f</a></span><span class="op" id="2977976">.</span><span class="ident" id="2977977">exp</span>&nbsp;<span class="op" id="2977981">-</span>&nbsp;<span class="ident" id="2977983"><a href="/strconv/extfloat.go.html#2977598">exp</a></span><span class="op" id="2977986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977989"><a href="/strconv/extfloat.go.html#2977551">f</a></span><span class="op" id="2977990">.</span><span class="ident" id="2977991">mant</span><span class="op" id="2977995">,</span>&nbsp;<span class="ident" id="2977997"><a href="/strconv/extfloat.go.html#2977551">f</a></span><span class="op" id="2977998">.</span><span class="ident" id="2977999">exp</span>&nbsp;<span class="op" id="2978003">=</span>&nbsp;<span class="ident" id="2978005"><a href="/strconv/extfloat.go.html#2977592">mant</a></span><span class="op" id="2978009">,</span>&nbsp;<span class="ident" id="2978011"><a href="/strconv/extfloat.go.html#2977598">exp</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978016">return</span><br>
<span class="lineno"></span><span class="op" id="2978023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2978026">//&nbsp;Multiply&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;product&nbsp;f*g:&nbsp;the&nbsp;result&nbsp;is&nbsp;correctly&nbsp;rounded,</span><br>
<span class="lineno"></span><span class="comment" id="2978098">//&nbsp;but&nbsp;not&nbsp;normalized.</span><br>
<span class="lineno">235</span><span class="keyword" id="2978121">func</span>&nbsp;<span class="op" id="2978126">(</span><span class="ident" id="2978127">f</span>&nbsp;<span class="op" id="2978129">*</span><span class="ident" id="2978130"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2978138">)</span>&nbsp;<span class="ident" id="2978140">Multiply</span><span class="op" id="2978148">(</span><span class="ident" id="2978149">g</span>&nbsp;<span class="ident" id="2978151"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2978159">)</span>&nbsp;<span class="op" id="2978161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978164">fhi</span><span class="op" id="2978167">,</span>&nbsp;<span class="ident" id="2978169">flo</span>&nbsp;<span class="op" id="2978173">:=</span>&nbsp;<span class="ident" id="2978176"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978177">.</span><span class="ident" id="2978178">mant</span><span class="op" id="2978182">&gt;&gt;</span><span class="num" id="2978184">32</span><span class="op" id="2978186">,</span>&nbsp;<span class="ident" id="2978188">uint64</span><span class="op" id="2978194">(</span><span class="builtintype" id="2978195">uint32</span><span class="op" id="2978201">(</span><span class="ident" id="2978202"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978203">.</span><span class="ident" id="2978204">mant</span><span class="op" id="2978208">)</span><span class="op" id="2978209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978212">ghi</span><span class="op" id="2978215">,</span>&nbsp;<span class="ident" id="2978217">glo</span>&nbsp;<span class="op" id="2978221">:=</span>&nbsp;<span class="ident" id="2978224"><a href="/strconv/extfloat.go.html#2978149">g</a></span><span class="op" id="2978225">.</span><span class="ident" id="2978226">mant</span><span class="op" id="2978230">&gt;&gt;</span><span class="num" id="2978232">32</span><span class="op" id="2978234">,</span>&nbsp;<span class="ident" id="2978236">uint64</span><span class="op" id="2978242">(</span><span class="builtintype" id="2978243">uint32</span><span class="op" id="2978249">(</span><span class="ident" id="2978250"><a href="/strconv/extfloat.go.html#2978149">g</a></span><span class="op" id="2978251">.</span><span class="ident" id="2978252">mant</span><span class="op" id="2978256">)</span><span class="op" id="2978257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2978261">//&nbsp;Cross&nbsp;products.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978281">cross1</span>&nbsp;<span class="op" id="2978288">:=</span>&nbsp;<span class="ident" id="2978291"><a href="/strconv/extfloat.go.html#2978164">fhi</a></span>&nbsp;<span class="op" id="2978295">*</span>&nbsp;<span class="ident" id="2978297"><a href="/strconv/extfloat.go.html#2978217">glo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978302">cross2</span>&nbsp;<span class="op" id="2978309">:=</span>&nbsp;<span class="ident" id="2978312"><a href="/strconv/extfloat.go.html#2978169">flo</a></span>&nbsp;<span class="op" id="2978316">*</span>&nbsp;<span class="ident" id="2978318"><a href="/strconv/extfloat.go.html#2978212">ghi</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2978324">//&nbsp;f.mant*g.mant&nbsp;is&nbsp;fhi*ghi&nbsp;&lt;&lt;&nbsp;64&nbsp;+&nbsp;(cross1+cross2)&nbsp;&lt;&lt;&nbsp;32&nbsp;+&nbsp;flo*glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978393"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978394">.</span><span class="ident" id="2978395">mant</span>&nbsp;<span class="op" id="2978400">=</span>&nbsp;<span class="ident" id="2978402"><a href="/strconv/extfloat.go.html#2978164">fhi</a></span><span class="op" id="2978405">*</span><span class="ident" id="2978406"><a href="/strconv/extfloat.go.html#2978212">ghi</a></span>&nbsp;<span class="op" id="2978410">+</span>&nbsp;<span class="op" id="2978412">(</span><span class="ident" id="2978413"><a href="/strconv/extfloat.go.html#2978281">cross1</a></span>&nbsp;<span class="op" id="2978420">&gt;&gt;</span>&nbsp;<span class="num" id="2978423">32</span><span class="op" id="2978425">)</span>&nbsp;<span class="op" id="2978427">+</span>&nbsp;<span class="op" id="2978429">(</span><span class="ident" id="2978430"><a href="/strconv/extfloat.go.html#2978302">cross2</a></span>&nbsp;<span class="op" id="2978437">&gt;&gt;</span>&nbsp;<span class="num" id="2978440">32</span><span class="op" id="2978442">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978445">rem</span>&nbsp;<span class="op" id="2978449">:=</span>&nbsp;<span class="ident" id="2978452">uint64</span><span class="op" id="2978458">(</span><span class="builtintype" id="2978459">uint32</span><span class="op" id="2978465">(</span><span class="ident" id="2978466"><a href="/strconv/extfloat.go.html#2978281">cross1</a></span><span class="op" id="2978472">)</span><span class="op" id="2978473">)</span>&nbsp;<span class="op" id="2978475">+</span>&nbsp;<span class="ident" id="2978477">uint64</span><span class="op" id="2978483">(</span><span class="builtintype" id="2978484">uint32</span><span class="op" id="2978490">(</span><span class="ident" id="2978491"><a href="/strconv/extfloat.go.html#2978302">cross2</a></span><span class="op" id="2978497">)</span><span class="op" id="2978498">)</span>&nbsp;<span class="op" id="2978500">+</span>&nbsp;<span class="op" id="2978502">(</span><span class="op" id="2978503">(</span><span class="ident" id="2978504"><a href="/strconv/extfloat.go.html#2978169">flo</a></span>&nbsp;<span class="op" id="2978508">*</span>&nbsp;<span class="ident" id="2978510"><a href="/strconv/extfloat.go.html#2978217">glo</a></span><span class="op" id="2978513">)</span>&nbsp;<span class="op" id="2978515">&gt;&gt;</span>&nbsp;<span class="num" id="2978518">32</span><span class="op" id="2978520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2978523">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978537"><a href="/strconv/extfloat.go.html#2978445">rem</a></span>&nbsp;<span class="op" id="2978541">+=</span>&nbsp;<span class="op" id="2978544">(</span><span class="num" id="2978545">1</span>&nbsp;<span class="op" id="2978547">&lt;&lt;</span>&nbsp;<span class="num" id="2978550">31</span><span class="op" id="2978552">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978556"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978557">.</span><span class="ident" id="2978558">mant</span>&nbsp;<span class="op" id="2978563">+=</span>&nbsp;<span class="op" id="2978566">(</span><span class="ident" id="2978567"><a href="/strconv/extfloat.go.html#2978445">rem</a></span>&nbsp;<span class="op" id="2978571">&gt;&gt;</span>&nbsp;<span class="num" id="2978574">32</span><span class="op" id="2978576">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978579"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978580">.</span><span class="ident" id="2978581">exp</span>&nbsp;<span class="op" id="2978585">=</span>&nbsp;<span class="ident" id="2978587"><a href="/strconv/extfloat.go.html#2978127">f</a></span><span class="op" id="2978588">.</span><span class="ident" id="2978589">exp</span>&nbsp;<span class="op" id="2978593">+</span>&nbsp;<span class="ident" id="2978595"><a href="/strconv/extfloat.go.html#2978149">g</a></span><span class="op" id="2978596">.</span><span class="ident" id="2978597">exp</span>&nbsp;<span class="op" id="2978601">+</span>&nbsp;<span class="num" id="2978603">64</span><br>
<span class="lineno"></span><span class="op" id="2978606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2978609">var</span>&nbsp;<span class="ident" id="2978613">uint64pow10</span>&nbsp;<span class="op" id="2978625">=</span>&nbsp;<span class="op" id="2978627">[</span><span class="op" id="2978628">...</span><span class="op" id="2978631">]</span><span class="ident" id="2978632">uint64</span><span class="op" id="2978638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2978641">1</span><span class="op" id="2978642">,</span>&nbsp;<span class="num" id="2978644">1e1</span><span class="op" id="2978647">,</span>&nbsp;<span class="num" id="2978649">1e2</span><span class="op" id="2978652">,</span>&nbsp;<span class="num" id="2978654">1e3</span><span class="op" id="2978657">,</span>&nbsp;<span class="num" id="2978659">1e4</span><span class="op" id="2978662">,</span>&nbsp;<span class="num" id="2978664">1e5</span><span class="op" id="2978667">,</span>&nbsp;<span class="num" id="2978669">1e6</span><span class="op" id="2978672">,</span>&nbsp;<span class="num" id="2978674">1e7</span><span class="op" id="2978677">,</span>&nbsp;<span class="num" id="2978679">1e8</span><span class="op" id="2978682">,</span>&nbsp;<span class="num" id="2978684">1e9</span><span class="op" id="2978687">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2978690">1e10</span><span class="op" id="2978694">,</span>&nbsp;<span class="num" id="2978696">1e11</span><span class="op" id="2978700">,</span>&nbsp;<span class="num" id="2978702">1e12</span><span class="op" id="2978706">,</span>&nbsp;<span class="num" id="2978708">1e13</span><span class="op" id="2978712">,</span>&nbsp;<span class="num" id="2978714">1e14</span><span class="op" id="2978718">,</span>&nbsp;<span class="num" id="2978720">1e15</span><span class="op" id="2978724">,</span>&nbsp;<span class="num" id="2978726">1e16</span><span class="op" id="2978730">,</span>&nbsp;<span class="num" id="2978732">1e17</span><span class="op" id="2978736">,</span>&nbsp;<span class="num" id="2978738">1e18</span><span class="op" id="2978742">,</span>&nbsp;<span class="num" id="2978744">1e19</span><span class="op" id="2978748">,</span><br>
<span class="lineno"></span><span class="op" id="2978750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2978753">//&nbsp;AssignDecimal&nbsp;sets&nbsp;f&nbsp;to&nbsp;an&nbsp;approximate&nbsp;value&nbsp;mantissa*10^exp.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2978821">//&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;f&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="2978891">//&nbsp;best&nbsp;approximation&nbsp;of&nbsp;d&nbsp;after&nbsp;being&nbsp;rounded&nbsp;to&nbsp;a&nbsp;float64&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2978954">//&nbsp;float32&nbsp;depending&nbsp;on&nbsp;flt.</span><br>
<span class="lineno"></span><span class="keyword" id="2978983">func</span>&nbsp;<span class="op" id="2978988">(</span><span class="ident" id="2978989">f</span>&nbsp;<span class="op" id="2978991">*</span><span class="ident" id="2978992"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2979000">)</span>&nbsp;<span class="ident" id="2979002">AssignDecimal</span><span class="op" id="2979015">(</span><span class="ident" id="2979016">mantissa</span>&nbsp;<span class="ident" id="2979025">uint64</span><span class="op" id="2979031">,</span>&nbsp;<span class="ident" id="2979033">exp10</span>&nbsp;<span class="builtintype" id="2979039">int</span><span class="op" id="2979042">,</span>&nbsp;<span class="ident" id="2979044">neg</span>&nbsp;<span class="builtintype" id="2979048">bool</span><span class="op" id="2979052">,</span>&nbsp;<span class="ident" id="2979054">trunc</span>&nbsp;<span class="builtintype" id="2979060">bool</span><span class="op" id="2979064">,</span>&nbsp;<span class="ident" id="2979066">flt</span>&nbsp;<span class="op" id="2979070">*</span><span class="ident" id="2979071"><a href="/strconv/ftoa.go.html#2991005">floatInfo</a></span><span class="op" id="2979080">)</span>&nbsp;<span class="op" id="2979082">(</span><span class="ident" id="2979083">ok</span>&nbsp;<span class="builtintype" id="2979086">bool</span><span class="op" id="2979090">)</span>&nbsp;<span class="op" id="2979092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979095">const</span>&nbsp;<span class="ident" id="2979101">uint64digits</span>&nbsp;<span class="op" id="2979114">=</span>&nbsp;<span class="num" id="2979116">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979120">const</span>&nbsp;<span class="ident" id="2979126">errorscale</span>&nbsp;<span class="op" id="2979137">=</span>&nbsp;<span class="num" id="2979139">8</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979142">errors</span>&nbsp;<span class="op" id="2979149">:=</span>&nbsp;<span class="num" id="2979152">0</span>&nbsp;<span class="comment" id="2979154">//&nbsp;An&nbsp;upper&nbsp;bound&nbsp;for&nbsp;error,&nbsp;computed&nbsp;in&nbsp;errorscale*ulp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979212">if</span>&nbsp;<span class="ident" id="2979215"><a href="/strconv/extfloat.go.html#2979054">trunc</a></span>&nbsp;<span class="op" id="2979221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979225">//&nbsp;the&nbsp;decimal&nbsp;number&nbsp;was&nbsp;truncated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979264"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2979271">+=</span>&nbsp;<span class="ident" id="2979274"><a href="/strconv/extfloat.go.html#2979126">errorscale</a></span>&nbsp;<span class="op" id="2979285">/</span>&nbsp;<span class="num" id="2979287">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979290">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979294"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979295">.</span><span class="ident" id="2979296">mant</span>&nbsp;<span class="op" id="2979301">=</span>&nbsp;<span class="ident" id="2979303"><a href="/strconv/extfloat.go.html#2979016">mantissa</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979313"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979314">.</span><span class="ident" id="2979315">exp</span>&nbsp;<span class="op" id="2979319">=</span>&nbsp;<span class="num" id="2979321">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979324"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979325">.</span><span class="ident" id="2979326">neg</span>&nbsp;<span class="op" id="2979330">=</span>&nbsp;<span class="ident" id="2979332"><a href="/strconv/extfloat.go.html#2979044">neg</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979338">//&nbsp;Multiply&nbsp;by&nbsp;powers&nbsp;of&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979369">i</span>&nbsp;<span class="op" id="2979371">:=</span>&nbsp;<span class="op" id="2979374">(</span><span class="ident" id="2979375"><a href="/strconv/extfloat.go.html#2979033">exp10</a></span>&nbsp;<span class="op" id="2979381">-</span>&nbsp;<span class="ident" id="2979383"><a href="/strconv/extfloat.go.html#2970928">firstPowerOfTen</a></span><span class="op" id="2979398">)</span>&nbsp;<span class="op" id="2979400">/</span>&nbsp;<span class="ident" id="2979402"><a href="/strconv/extfloat.go.html#2970952">stepPowerOfTen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979418">if</span>&nbsp;<span class="ident" id="2979421"><a href="/strconv/extfloat.go.html#2979033">exp10</a></span>&nbsp;<span class="op" id="2979427">&lt;</span>&nbsp;<span class="ident" id="2979429"><a href="/strconv/extfloat.go.html#2970928">firstPowerOfTen</a></span>&nbsp;<span class="op" id="2979445">||</span>&nbsp;<span class="ident" id="2979448"><a href="/strconv/extfloat.go.html#2979369">i</a></span>&nbsp;<span class="op" id="2979450">&gt;=</span>&nbsp;<span class="builtinfunc" id="2979453">len</span><span class="op" id="2979456">(</span><span class="ident" id="2979457"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2979468">)</span>&nbsp;<span class="op" id="2979470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979474">return</span>&nbsp;<span class="builtintype" id="2979481">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979488">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979491">adjExp</span>&nbsp;<span class="op" id="2979498">:=</span>&nbsp;<span class="op" id="2979501">(</span><span class="ident" id="2979502"><a href="/strconv/extfloat.go.html#2979033">exp10</a></span>&nbsp;<span class="op" id="2979508">-</span>&nbsp;<span class="ident" id="2979510"><a href="/strconv/extfloat.go.html#2970928">firstPowerOfTen</a></span><span class="op" id="2979525">)</span>&nbsp;<span class="op" id="2979527">%</span>&nbsp;<span class="ident" id="2979529"><a href="/strconv/extfloat.go.html#2970952">stepPowerOfTen</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979546">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;exp%step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979574">if</span>&nbsp;<span class="ident" id="2979577"><a href="/strconv/extfloat.go.html#2979491">adjExp</a></span>&nbsp;<span class="op" id="2979584">&lt;</span>&nbsp;<span class="ident" id="2979586"><a href="/strconv/extfloat.go.html#2979101">uint64digits</a></span>&nbsp;<span class="op" id="2979599">&amp;&amp;</span>&nbsp;<span class="ident" id="2979602"><a href="/strconv/extfloat.go.html#2979016">mantissa</a></span>&nbsp;<span class="op" id="2979611">&lt;</span>&nbsp;<span class="ident" id="2979613"><a href="/strconv/extfloat.go.html#2978613">uint64pow10</a></span><span class="op" id="2979624">[</span><span class="ident" id="2979625"><a href="/strconv/extfloat.go.html#2979101">uint64digits</a></span><span class="op" id="2979637">-</span><span class="ident" id="2979638"><a href="/strconv/extfloat.go.html#2979491">adjExp</a></span><span class="op" id="2979644">]</span>&nbsp;<span class="op" id="2979646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979650">//&nbsp;We&nbsp;can&nbsp;multiply&nbsp;the&nbsp;mantissa&nbsp;exactly.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979693"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979694">.</span><span class="ident" id="2979695">mant</span>&nbsp;<span class="op" id="2979700">*=</span>&nbsp;<span class="ident" id="2979703"><a href="/strconv/extfloat.go.html#2978613">uint64pow10</a></span><span class="op" id="2979714">[</span><span class="ident" id="2979715"><a href="/strconv/extfloat.go.html#2979491">adjExp</a></span><span class="op" id="2979721">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979725"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979726">.</span><span class="ident" id="2979727">Normalize</span><span class="op" id="2979736">(</span><span class="op" id="2979737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979740">}</span>&nbsp;<span class="keyword" id="2979742">else</span>&nbsp;<span class="op" id="2979747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979751"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979752">.</span><span class="ident" id="2979753">Normalize</span><span class="op" id="2979762">(</span><span class="op" id="2979763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979767"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979768">.</span><span class="ident" id="2979769">Multiply</span><span class="op" id="2979777">(</span><span class="ident" id="2979778"><a href="/strconv/extfloat.go.html#2970979">smallPowersOfTen</a></span><span class="op" id="2979794">[</span><span class="ident" id="2979795"><a href="/strconv/extfloat.go.html#2979491">adjExp</a></span><span class="op" id="2979801">]</span><span class="op" id="2979802">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979806"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2979813">+=</span>&nbsp;<span class="ident" id="2979816"><a href="/strconv/extfloat.go.html#2979126">errorscale</a></span>&nbsp;<span class="op" id="2979827">/</span>&nbsp;<span class="num" id="2979829">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979836">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;10&nbsp;to&nbsp;the&nbsp;exp&nbsp;-&nbsp;exp%step.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979881"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979882">.</span><span class="ident" id="2979883">Multiply</span><span class="op" id="2979891">(</span><span class="ident" id="2979892"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2979903">[</span><span class="ident" id="2979904"><a href="/strconv/extfloat.go.html#2979369">i</a></span><span class="op" id="2979905">]</span><span class="op" id="2979906">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979909">if</span>&nbsp;<span class="ident" id="2979912"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2979919">&gt;</span>&nbsp;<span class="num" id="2979921">0</span>&nbsp;<span class="op" id="2979923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979927"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2979934">+=</span>&nbsp;<span class="num" id="2979937">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979943"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2979950">+=</span>&nbsp;<span class="ident" id="2979953"><a href="/strconv/extfloat.go.html#2979126">errorscale</a></span>&nbsp;<span class="op" id="2979964">/</span>&nbsp;<span class="num" id="2979966">2</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2979970">//&nbsp;Normalize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979984">shift</span>&nbsp;<span class="op" id="2979990">:=</span>&nbsp;<span class="ident" id="2979993"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2979994">.</span><span class="ident" id="2979995">Normalize</span><span class="op" id="2980004">(</span><span class="op" id="2980005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980008"><a href="/strconv/extfloat.go.html#2979142">errors</a></span>&nbsp;<span class="op" id="2980015">&lt;&lt;=</span>&nbsp;<span class="ident" id="2980019"><a href="/strconv/extfloat.go.html#2979984">shift</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980027">//&nbsp;Now&nbsp;f&nbsp;is&nbsp;a&nbsp;good&nbsp;approximation&nbsp;of&nbsp;the&nbsp;decimal.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980077">//&nbsp;Check&nbsp;whether&nbsp;the&nbsp;error&nbsp;is&nbsp;too&nbsp;large:&nbsp;that&nbsp;is,&nbsp;if&nbsp;the&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980144">//&nbsp;is&nbsp;perturbated&nbsp;by&nbsp;the&nbsp;error,&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;will&nbsp;change.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980212">//&nbsp;The&nbsp;64&nbsp;bits&nbsp;mantissa&nbsp;is&nbsp;1&nbsp;+&nbsp;52&nbsp;bits&nbsp;for&nbsp;float64&nbsp;+&nbsp;11&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980281">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980285">//&nbsp;In&nbsp;many&nbsp;cases&nbsp;the&nbsp;approximation&nbsp;will&nbsp;be&nbsp;good&nbsp;enough.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980342">denormalExp</span>&nbsp;<span class="op" id="2980354">:=</span>&nbsp;<span class="ident" id="2980357"><a href="/strconv/extfloat.go.html#2979066">flt</a></span><span class="op" id="2980360">.</span><span class="ident" id="2980361">bias</span>&nbsp;<span class="op" id="2980366">-</span>&nbsp;<span class="num" id="2980368">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980372">var</span>&nbsp;<span class="ident" id="2980376">extrabits</span>&nbsp;<span class="builtintype" id="2980386">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980392">if</span>&nbsp;<span class="ident" id="2980395"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2980396">.</span><span class="ident" id="2980397">exp</span>&nbsp;<span class="op" id="2980401">&lt;=</span>&nbsp;<span class="ident" id="2980404"><a href="/strconv/extfloat.go.html#2980342">denormalExp</a></span>&nbsp;<span class="op" id="2980416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980420">//&nbsp;f.mant&nbsp;*&nbsp;2^f.exp&nbsp;is&nbsp;smaller&nbsp;than&nbsp;2^(flt.bias+1).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980474"><a href="/strconv/extfloat.go.html#2980376">extrabits</a></span>&nbsp;<span class="op" id="2980484">=</span>&nbsp;<span class="builtintype" id="2980486">uint</span><span class="op" id="2980490">(</span><span class="num" id="2980491">63</span>&nbsp;<span class="op" id="2980494">-</span>&nbsp;<span class="ident" id="2980496"><a href="/strconv/extfloat.go.html#2979066">flt</a></span><span class="op" id="2980499">.</span><span class="ident" id="2980500">mantbits</span>&nbsp;<span class="op" id="2980509">+</span>&nbsp;<span class="num" id="2980511">1</span>&nbsp;<span class="op" id="2980513">+</span>&nbsp;<span class="builtintype" id="2980515">uint</span><span class="op" id="2980519">(</span><span class="ident" id="2980520"><a href="/strconv/extfloat.go.html#2980342">denormalExp</a></span><span class="op" id="2980531">-</span><span class="ident" id="2980532"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2980533">.</span><span class="ident" id="2980534">exp</span><span class="op" id="2980537">)</span><span class="op" id="2980538">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980541">}</span>&nbsp;<span class="keyword" id="2980543">else</span>&nbsp;<span class="op" id="2980548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980552"><a href="/strconv/extfloat.go.html#2980376">extrabits</a></span>&nbsp;<span class="op" id="2980562">=</span>&nbsp;<span class="builtintype" id="2980564">uint</span><span class="op" id="2980568">(</span><span class="num" id="2980569">63</span>&nbsp;<span class="op" id="2980572">-</span>&nbsp;<span class="ident" id="2980574"><a href="/strconv/extfloat.go.html#2979066">flt</a></span><span class="op" id="2980577">.</span><span class="ident" id="2980578">mantbits</span><span class="op" id="2980586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980593">halfway</span>&nbsp;<span class="op" id="2980601">:=</span>&nbsp;<span class="ident" id="2980604">uint64</span><span class="op" id="2980610">(</span><span class="num" id="2980611">1</span><span class="op" id="2980612">)</span>&nbsp;<span class="op" id="2980614">&lt;&lt;</span>&nbsp;<span class="op" id="2980617">(</span><span class="ident" id="2980618"><a href="/strconv/extfloat.go.html#2980376">extrabits</a></span>&nbsp;<span class="op" id="2980628">-</span>&nbsp;<span class="num" id="2980630">1</span><span class="op" id="2980631">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980634">mant_extra</span>&nbsp;<span class="op" id="2980645">:=</span>&nbsp;<span class="ident" id="2980648"><a href="/strconv/extfloat.go.html#2978989">f</a></span><span class="op" id="2980649">.</span><span class="ident" id="2980650">mant</span>&nbsp;<span class="op" id="2980655">&amp;</span>&nbsp;<span class="op" id="2980657">(</span><span class="num" id="2980658">1</span><span class="op" id="2980659">&lt;&lt;</span><span class="ident" id="2980661"><a href="/strconv/extfloat.go.html#2980376">extrabits</a></span>&nbsp;<span class="op" id="2980671">-</span>&nbsp;<span class="num" id="2980673">1</span><span class="op" id="2980674">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980678">//&nbsp;Do&nbsp;a&nbsp;signed&nbsp;comparison&nbsp;here!&nbsp;If&nbsp;the&nbsp;error&nbsp;estimate&nbsp;could&nbsp;make</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980744">//&nbsp;the&nbsp;mantissa&nbsp;round&nbsp;differently&nbsp;for&nbsp;the&nbsp;conversion&nbsp;to&nbsp;double,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2980809">//&nbsp;then&nbsp;we&nbsp;can&#39;t&nbsp;give&nbsp;a&nbsp;definite&nbsp;answer.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980851">if</span>&nbsp;<span class="ident" id="2980854">int64</span><span class="op" id="2980859">(</span><span class="ident" id="2980860"><a href="/strconv/extfloat.go.html#2980593">halfway</a></span><span class="op" id="2980867">)</span><span class="op" id="2980868">-</span><span class="ident" id="2980869">int64</span><span class="op" id="2980874">(</span><span class="ident" id="2980875"><a href="/strconv/extfloat.go.html#2979142">errors</a></span><span class="op" id="2980881">)</span>&nbsp;<span class="op" id="2980883">&lt;</span>&nbsp;<span class="ident" id="2980885">int64</span><span class="op" id="2980890">(</span><span class="ident" id="2980891"><a href="/strconv/extfloat.go.html#2980634">mant_extra</a></span><span class="op" id="2980901">)</span>&nbsp;<span class="op" id="2980903">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980908">int64</span><span class="op" id="2980913">(</span><span class="ident" id="2980914"><a href="/strconv/extfloat.go.html#2980634">mant_extra</a></span><span class="op" id="2980924">)</span>&nbsp;<span class="op" id="2980926">&lt;</span>&nbsp;<span class="ident" id="2980928">int64</span><span class="op" id="2980933">(</span><span class="ident" id="2980934"><a href="/strconv/extfloat.go.html#2980593">halfway</a></span><span class="op" id="2980941">)</span><span class="op" id="2980942">+</span><span class="ident" id="2980943">int64</span><span class="op" id="2980948">(</span><span class="ident" id="2980949"><a href="/strconv/extfloat.go.html#2979142">errors</a></span><span class="op" id="2980955">)</span>&nbsp;<span class="op" id="2980957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980961">return</span>&nbsp;<span class="builtintype" id="2980968">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980978">return</span>&nbsp;<span class="builtintype" id="2980985">true</span><br>
<span class="lineno">330</span><span class="op" id="2980990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2980993">//&nbsp;Frexp10&nbsp;is&nbsp;an&nbsp;analogue&nbsp;of&nbsp;math.Frexp&nbsp;for&nbsp;decimal&nbsp;powers.&nbsp;It&nbsp;scales</span><br>
<span class="lineno"></span><span class="comment" id="2981063">//&nbsp;f&nbsp;by&nbsp;an&nbsp;approximate&nbsp;power&nbsp;of&nbsp;ten&nbsp;10^-exp,&nbsp;and&nbsp;returns&nbsp;exp10,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2981130">//&nbsp;that&nbsp;f*10^exp10&nbsp;has&nbsp;the&nbsp;same&nbsp;value&nbsp;as&nbsp;the&nbsp;old&nbsp;f,&nbsp;up&nbsp;to&nbsp;an&nbsp;ulp,</span><br>
<span class="lineno">335</span><span class="comment" id="2981196">//&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;index&nbsp;of&nbsp;10^-exp&nbsp;in&nbsp;the&nbsp;powersOfTen&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="2981257">func</span>&nbsp;<span class="op" id="2981262">(</span><span class="ident" id="2981263">f</span>&nbsp;<span class="op" id="2981265">*</span><span class="ident" id="2981266"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2981274">)</span>&nbsp;<span class="ident" id="2981276">frexp10</span><span class="op" id="2981283">(</span><span class="op" id="2981284">)</span>&nbsp;<span class="op" id="2981286">(</span><span class="ident" id="2981287">exp10</span><span class="op" id="2981292">,</span>&nbsp;<span class="ident" id="2981294">index</span>&nbsp;<span class="builtintype" id="2981300">int</span><span class="op" id="2981303">)</span>&nbsp;<span class="op" id="2981305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981308">//&nbsp;The&nbsp;constants&nbsp;expMin&nbsp;and&nbsp;expMax&nbsp;constrain&nbsp;the&nbsp;final&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981377">//&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;f.&nbsp;We&nbsp;want&nbsp;a&nbsp;small&nbsp;integral&nbsp;part&nbsp;in&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981447">//&nbsp;because&nbsp;finding&nbsp;digits&nbsp;of&nbsp;an&nbsp;integer&nbsp;requires&nbsp;divisions,&nbsp;whereas</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981516">//&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part&nbsp;can&nbsp;be&nbsp;found&nbsp;by&nbsp;repeatedly&nbsp;multiplying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981589">//&nbsp;by&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981600">const</span>&nbsp;<span class="ident" id="2981606">expMin</span>&nbsp;<span class="op" id="2981613">=</span>&nbsp;<span class="op" id="2981615">-</span><span class="num" id="2981616">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981620">const</span>&nbsp;<span class="ident" id="2981626">expMax</span>&nbsp;<span class="op" id="2981633">=</span>&nbsp;<span class="op" id="2981635">-</span><span class="num" id="2981636">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981640">//&nbsp;Find&nbsp;power&nbsp;of&nbsp;ten&nbsp;such&nbsp;that&nbsp;x&nbsp;*&nbsp;10^n&nbsp;has&nbsp;a&nbsp;binary&nbsp;exponent</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981703">//&nbsp;between&nbsp;expMin&nbsp;and&nbsp;expMax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981734">approxExp10</span>&nbsp;<span class="op" id="2981746">:=</span>&nbsp;<span class="op" id="2981749">(</span><span class="op" id="2981750">(</span><span class="ident" id="2981751"><a href="/strconv/extfloat.go.html#2981606">expMin</a></span><span class="op" id="2981757">+</span><span class="ident" id="2981758"><a href="/strconv/extfloat.go.html#2981626">expMax</a></span><span class="op" id="2981764">)</span><span class="op" id="2981765">/</span><span class="num" id="2981766">2</span>&nbsp;<span class="op" id="2981768">-</span>&nbsp;<span class="ident" id="2981770"><a href="/strconv/extfloat.go.html#2981263">f</a></span><span class="op" id="2981771">.</span><span class="ident" id="2981772">exp</span><span class="op" id="2981775">)</span>&nbsp;<span class="op" id="2981777">*</span>&nbsp;<span class="num" id="2981779">28</span>&nbsp;<span class="op" id="2981782">/</span>&nbsp;<span class="num" id="2981784">93</span>&nbsp;<span class="comment" id="2981787">//&nbsp;log(10)/log(2)&nbsp;is&nbsp;close&nbsp;to&nbsp;93/28.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981825">i</span>&nbsp;<span class="op" id="2981827">:=</span>&nbsp;<span class="op" id="2981830">(</span><span class="ident" id="2981831"><a href="/strconv/extfloat.go.html#2981734">approxExp10</a></span>&nbsp;<span class="op" id="2981843">-</span>&nbsp;<span class="ident" id="2981845"><a href="/strconv/extfloat.go.html#2970928">firstPowerOfTen</a></span><span class="op" id="2981860">)</span>&nbsp;<span class="op" id="2981862">/</span>&nbsp;<span class="ident" id="2981864"><a href="/strconv/extfloat.go.html#2970952">stepPowerOfTen</a></span><br>
<span class="lineno"></span><span class="ident" id="2981879">Loop</span><span class="op" id="2981883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981886">for</span>&nbsp;<span class="op" id="2981890">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981894">exp</span>&nbsp;<span class="op" id="2981898">:=</span>&nbsp;<span class="ident" id="2981901"><a href="/strconv/extfloat.go.html#2981263">f</a></span><span class="op" id="2981902">.</span><span class="ident" id="2981903">exp</span>&nbsp;<span class="op" id="2981907">+</span>&nbsp;<span class="ident" id="2981909"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2981920">[</span><span class="ident" id="2981921"><a href="/strconv/extfloat.go.html#2981825">i</a></span><span class="op" id="2981922">]</span><span class="op" id="2981923">.</span><span class="ident" id="2981924">exp</span>&nbsp;<span class="op" id="2981928">+</span>&nbsp;<span class="num" id="2981930">64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981935">switch</span>&nbsp;<span class="op" id="2981942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981946">case</span>&nbsp;<span class="ident" id="2981951"><a href="/strconv/extfloat.go.html#2981894">exp</a></span>&nbsp;<span class="op" id="2981955">&lt;</span>&nbsp;<span class="ident" id="2981957"><a href="/strconv/extfloat.go.html#2981606">expMin</a></span><span class="op" id="2981963">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981968"><a href="/strconv/extfloat.go.html#2981825">i</a></span><span class="op" id="2981969">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981974">case</span>&nbsp;<span class="ident" id="2981979"><a href="/strconv/extfloat.go.html#2981894">exp</a></span>&nbsp;<span class="op" id="2981983">&gt;</span>&nbsp;<span class="ident" id="2981985"><a href="/strconv/extfloat.go.html#2981626">expMax</a></span><span class="op" id="2981991">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981996"><a href="/strconv/extfloat.go.html#2981825">i</a></span><span class="op" id="2981997">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982002">default</span><span class="op" id="2982009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982014">break</span>&nbsp;<span class="ident" id="2982020">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982030">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982033">//&nbsp;Apply&nbsp;the&nbsp;desired&nbsp;decimal&nbsp;shift&nbsp;on&nbsp;f.&nbsp;It&nbsp;will&nbsp;have&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982097">//&nbsp;in&nbsp;the&nbsp;desired&nbsp;range.&nbsp;This&nbsp;is&nbsp;multiplication&nbsp;by&nbsp;10^-exp10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982160"><a href="/strconv/extfloat.go.html#2981263">f</a></span><span class="op" id="2982161">.</span><span class="ident" id="2982162">Multiply</span><span class="op" id="2982170">(</span><span class="ident" id="2982171"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2982182">[</span><span class="ident" id="2982183"><a href="/strconv/extfloat.go.html#2981825">i</a></span><span class="op" id="2982184">]</span><span class="op" id="2982185">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982189">return</span>&nbsp;<span class="op" id="2982196">-</span><span class="op" id="2982197">(</span><span class="ident" id="2982198"><a href="/strconv/extfloat.go.html#2970928">firstPowerOfTen</a></span>&nbsp;<span class="op" id="2982214">+</span>&nbsp;<span class="ident" id="2982216"><a href="/strconv/extfloat.go.html#2981825">i</a></span><span class="op" id="2982217">*</span><span class="ident" id="2982218"><a href="/strconv/extfloat.go.html#2970952">stepPowerOfTen</a></span><span class="op" id="2982232">)</span><span class="op" id="2982233">,</span>&nbsp;<span class="ident" id="2982235"><a href="/strconv/extfloat.go.html#2981825">i</a></span><br>
<span class="lineno">365</span><span class="op" id="2982237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2982240">//&nbsp;frexp10Many&nbsp;applies&nbsp;a&nbsp;common&nbsp;shift&nbsp;by&nbsp;a&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;a,&nbsp;b,&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="2982308">func</span>&nbsp;<span class="ident" id="2982313">frexp10Many</span><span class="op" id="2982324">(</span><span class="ident" id="2982325">a</span><span class="op" id="2982326">,</span>&nbsp;<span class="ident" id="2982328">b</span><span class="op" id="2982329">,</span>&nbsp;<span class="ident" id="2982331">c</span>&nbsp;<span class="op" id="2982333">*</span><span class="ident" id="2982334"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2982342">)</span>&nbsp;<span class="op" id="2982344">(</span><span class="ident" id="2982345">exp10</span>&nbsp;<span class="builtintype" id="2982351">int</span><span class="op" id="2982354">)</span>&nbsp;<span class="op" id="2982356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982359"><a href="/strconv/extfloat.go.html#2982345">exp10</a></span><span class="op" id="2982364">,</span>&nbsp;<span class="ident" id="2982366">i</span>&nbsp;<span class="op" id="2982368">:=</span>&nbsp;<span class="ident" id="2982371"><a href="/strconv/extfloat.go.html#2982331">c</a></span><span class="op" id="2982372">.</span><span class="ident" id="2982373">frexp10</span><span class="op" id="2982380">(</span><span class="op" id="2982381">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982384"><a href="/strconv/extfloat.go.html#2982325">a</a></span><span class="op" id="2982385">.</span><span class="ident" id="2982386">Multiply</span><span class="op" id="2982394">(</span><span class="ident" id="2982395"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2982406">[</span><span class="ident" id="2982407"><a href="/strconv/extfloat.go.html#2982366">i</a></span><span class="op" id="2982408">]</span><span class="op" id="2982409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982412"><a href="/strconv/extfloat.go.html#2982328">b</a></span><span class="op" id="2982413">.</span><span class="ident" id="2982414">Multiply</span><span class="op" id="2982422">(</span><span class="ident" id="2982423"><a href="/strconv/extfloat.go.html#2971322">powersOfTen</a></span><span class="op" id="2982434">[</span><span class="ident" id="2982435"><a href="/strconv/extfloat.go.html#2982366">i</a></span><span class="op" id="2982436">]</span><span class="op" id="2982437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982440">return</span><br>
<span class="lineno"></span><span class="op" id="2982447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span><span class="comment" id="2982450">//&nbsp;FixedDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;first&nbsp;n&nbsp;significant&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2982509">//&nbsp;of&nbsp;the&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f.&nbsp;It&nbsp;returns&nbsp;false</span><br>
<span class="lineno"></span><span class="comment" id="2982565">//&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be&nbsp;sure&nbsp;of&nbsp;the&nbsp;answer.</span><br>
<span class="lineno"></span><span class="keyword" id="2982604">func</span>&nbsp;<span class="op" id="2982609">(</span><span class="ident" id="2982610">f</span>&nbsp;<span class="op" id="2982612">*</span><span class="ident" id="2982613"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2982621">)</span>&nbsp;<span class="ident" id="2982623">FixedDecimal</span><span class="op" id="2982635">(</span><span class="ident" id="2982636">d</span>&nbsp;<span class="op" id="2982638">*</span><span class="ident" id="2982639"><a href="/strconv/ftoa.go.html#2999738">decimalSlice</a></span><span class="op" id="2982651">,</span>&nbsp;<span class="ident" id="2982653">n</span>&nbsp;<span class="builtintype" id="2982655">int</span><span class="op" id="2982658">)</span>&nbsp;<span class="builtintype" id="2982660">bool</span>&nbsp;<span class="op" id="2982665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982668">if</span>&nbsp;<span class="ident" id="2982671"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2982672">.</span><span class="ident" id="2982673">mant</span>&nbsp;<span class="op" id="2982678">==</span>&nbsp;<span class="num" id="2982681">0</span>&nbsp;<span class="op" id="2982683">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982687"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2982688">.</span><span class="ident" id="2982689">nd</span>&nbsp;<span class="op" id="2982692">=</span>&nbsp;<span class="num" id="2982694">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982698"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2982699">.</span><span class="ident" id="2982700">dp</span>&nbsp;<span class="op" id="2982703">=</span>&nbsp;<span class="num" id="2982705">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982709"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2982710">.</span><span class="ident" id="2982711">neg</span>&nbsp;<span class="op" id="2982715">=</span>&nbsp;<span class="ident" id="2982717"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2982718">.</span><span class="ident" id="2982719">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982725">return</span>&nbsp;<span class="builtintype" id="2982732">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982738">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982741">if</span>&nbsp;<span class="ident" id="2982744"><a href="/strconv/extfloat.go.html#2982653">n</a></span>&nbsp;<span class="op" id="2982746">==</span>&nbsp;<span class="num" id="2982749">0</span>&nbsp;<span class="op" id="2982751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2982755">panic</span><span class="op" id="2982760">(</span><span class="string" id="2982761">&#34;strconv:&nbsp;internal&nbsp;error:&nbsp;extFloat.FixedDecimal&nbsp;called&nbsp;with&nbsp;n&nbsp;==&nbsp;0&#34;</span><span class="op" id="2982828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982834">//&nbsp;Multiply&nbsp;by&nbsp;an&nbsp;appropriate&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;have&nbsp;a&nbsp;reasonable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982899">//&nbsp;number&nbsp;to&nbsp;process.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982922"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2982923">.</span><span class="ident" id="2982924">Normalize</span><span class="op" id="2982933">(</span><span class="op" id="2982934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982937">exp10</span><span class="op" id="2982942">,</span>&nbsp;<span class="ident" id="2982944">_</span>&nbsp;<span class="op" id="2982946">:=</span>&nbsp;<span class="ident" id="2982949"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2982950">.</span><span class="ident" id="2982951">frexp10</span><span class="op" id="2982958">(</span><span class="op" id="2982959">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982963">shift</span>&nbsp;<span class="op" id="2982969">:=</span>&nbsp;<span class="builtintype" id="2982972">uint</span><span class="op" id="2982976">(</span><span class="op" id="2982977">-</span><span class="ident" id="2982978"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2982979">.</span><span class="ident" id="2982980">exp</span><span class="op" id="2982983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982986">integer</span>&nbsp;<span class="op" id="2982994">:=</span>&nbsp;<span class="builtintype" id="2982997">uint32</span><span class="op" id="2983003">(</span><span class="ident" id="2983004"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2983005">.</span><span class="ident" id="2983006">mant</span>&nbsp;<span class="op" id="2983011">&gt;&gt;</span>&nbsp;<span class="ident" id="2983014"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><span class="op" id="2983019">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983022">fraction</span>&nbsp;<span class="op" id="2983031">:=</span>&nbsp;<span class="ident" id="2983034"><a href="/strconv/extfloat.go.html#2982610">f</a></span><span class="op" id="2983035">.</span><span class="ident" id="2983036">mant</span>&nbsp;<span class="op" id="2983041">-</span>&nbsp;<span class="op" id="2983043">(</span><span class="ident" id="2983044">uint64</span><span class="op" id="2983050">(</span><span class="ident" id="2983051"><a href="/strconv/extfloat.go.html#2982986">integer</a></span><span class="op" id="2983058">)</span>&nbsp;<span class="op" id="2983060">&lt;&lt;</span>&nbsp;<span class="ident" id="2983063"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><span class="op" id="2983068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983071">ε</span>&nbsp;<span class="op" id="2983074">:=</span>&nbsp;<span class="ident" id="2983077">uint64</span><span class="op" id="2983083">(</span><span class="num" id="2983084">1</span><span class="op" id="2983085">)</span>&nbsp;<span class="comment" id="2983087">//&nbsp;ε&nbsp;is&nbsp;the&nbsp;uncertainty&nbsp;we&nbsp;have&nbsp;on&nbsp;the&nbsp;mantissa&nbsp;of&nbsp;f.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983144">//&nbsp;Write&nbsp;exactly&nbsp;n&nbsp;digits&nbsp;to&nbsp;d.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983177">needed</span>&nbsp;<span class="op" id="2983184">:=</span>&nbsp;<span class="ident" id="2983187"><a href="/strconv/extfloat.go.html#2982653">n</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2983196">//&nbsp;how&nbsp;many&nbsp;digits&nbsp;are&nbsp;left&nbsp;to&nbsp;write.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983235">integerDigits</span>&nbsp;<span class="op" id="2983249">:=</span>&nbsp;<span class="num" id="2983252">0</span>&nbsp;<span class="comment" id="2983254">//&nbsp;the&nbsp;number&nbsp;of&nbsp;decimal&nbsp;digits&nbsp;of&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983299">pow10</span>&nbsp;<span class="op" id="2983305">:=</span>&nbsp;<span class="ident" id="2983308">uint64</span><span class="op" id="2983314">(</span><span class="num" id="2983315">1</span><span class="op" id="2983316">)</span>&nbsp;<span class="comment" id="2983318">//&nbsp;the&nbsp;power&nbsp;of&nbsp;ten&nbsp;by&nbsp;which&nbsp;f&nbsp;was&nbsp;scaled.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983362">for</span>&nbsp;<span class="ident" id="2983366">i</span><span class="op" id="2983367">,</span>&nbsp;<span class="ident" id="2983369">pow</span>&nbsp;<span class="op" id="2983373">:=</span>&nbsp;<span class="num" id="2983376">0</span><span class="op" id="2983377">,</span>&nbsp;<span class="ident" id="2983379">uint64</span><span class="op" id="2983385">(</span><span class="num" id="2983386">1</span><span class="op" id="2983387">)</span><span class="op" id="2983388">;</span>&nbsp;<span class="ident" id="2983390"><a href="/strconv/extfloat.go.html#2983366">i</a></span>&nbsp;<span class="op" id="2983392">&lt;</span>&nbsp;<span class="num" id="2983394">20</span><span class="op" id="2983396">;</span>&nbsp;<span class="ident" id="2983398"><a href="/strconv/extfloat.go.html#2983366">i</a></span><span class="op" id="2983399">++</span>&nbsp;<span class="op" id="2983402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983406">if</span>&nbsp;<span class="ident" id="2983409"><a href="/strconv/extfloat.go.html#2983369">pow</a></span>&nbsp;<span class="op" id="2983413">&gt;</span>&nbsp;<span class="ident" id="2983415">uint64</span><span class="op" id="2983421">(</span><span class="ident" id="2983422"><a href="/strconv/extfloat.go.html#2982986">integer</a></span><span class="op" id="2983429">)</span>&nbsp;<span class="op" id="2983431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983436"><a href="/strconv/extfloat.go.html#2983235">integerDigits</a></span>&nbsp;<span class="op" id="2983450">=</span>&nbsp;<span class="ident" id="2983452"><a href="/strconv/extfloat.go.html#2983366">i</a></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983457">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983469"><a href="/strconv/extfloat.go.html#2983369">pow</a></span>&nbsp;<span class="op" id="2983473">*=</span>&nbsp;<span class="num" id="2983476">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983483">rest</span>&nbsp;<span class="op" id="2983488">:=</span>&nbsp;<span class="ident" id="2983491"><a href="/strconv/extfloat.go.html#2982986">integer</a></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983500">if</span>&nbsp;<span class="ident" id="2983503"><a href="/strconv/extfloat.go.html#2983235">integerDigits</a></span>&nbsp;<span class="op" id="2983517">&gt;</span>&nbsp;<span class="ident" id="2983519"><a href="/strconv/extfloat.go.html#2983177">needed</a></span>&nbsp;<span class="op" id="2983526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983530">//&nbsp;the&nbsp;integral&nbsp;part&nbsp;is&nbsp;already&nbsp;large,&nbsp;trim&nbsp;the&nbsp;last&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983593"><a href="/strconv/extfloat.go.html#2983299">pow10</a></span>&nbsp;<span class="op" id="2983599">=</span>&nbsp;<span class="ident" id="2983601"><a href="/strconv/extfloat.go.html#2978613">uint64pow10</a></span><span class="op" id="2983612">[</span><span class="ident" id="2983613"><a href="/strconv/extfloat.go.html#2983235">integerDigits</a></span><span class="op" id="2983626">-</span><span class="ident" id="2983627"><a href="/strconv/extfloat.go.html#2983177">needed</a></span><span class="op" id="2983633">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983637"><a href="/strconv/extfloat.go.html#2982986">integer</a></span>&nbsp;<span class="op" id="2983645">/=</span>&nbsp;<span class="builtintype" id="2983648">uint32</span><span class="op" id="2983654">(</span><span class="ident" id="2983655"><a href="/strconv/extfloat.go.html#2983299">pow10</a></span><span class="op" id="2983660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983664"><a href="/strconv/extfloat.go.html#2983483">rest</a></span>&nbsp;<span class="op" id="2983669">-=</span>&nbsp;<span class="ident" id="2983672"><a href="/strconv/extfloat.go.html#2982986">integer</a></span>&nbsp;<span class="op" id="2983680">*</span>&nbsp;<span class="builtintype" id="2983682">uint32</span><span class="op" id="2983688">(</span><span class="ident" id="2983689"><a href="/strconv/extfloat.go.html#2983299">pow10</a></span><span class="op" id="2983694">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983697">}</span>&nbsp;<span class="keyword" id="2983699">else</span>&nbsp;<span class="op" id="2983704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983708"><a href="/strconv/extfloat.go.html#2983483">rest</a></span>&nbsp;<span class="op" id="2983713">=</span>&nbsp;<span class="num" id="2983715">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983722">//&nbsp;Write&nbsp;the&nbsp;digits&nbsp;of&nbsp;integer:&nbsp;the&nbsp;digits&nbsp;of&nbsp;rest&nbsp;are&nbsp;omitted.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983787">var</span>&nbsp;<span class="ident" id="2983791">buf</span>&nbsp;<span class="op" id="2983795">[</span><span class="num" id="2983796">32</span><span class="op" id="2983798">]</span><span class="builtintype" id="2983799">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983805">pos</span>&nbsp;<span class="op" id="2983809">:=</span>&nbsp;<span class="builtinfunc" id="2983812">len</span><span class="op" id="2983815">(</span><span class="ident" id="2983816"><a href="/strconv/extfloat.go.html#2983791">buf</a></span><span class="op" id="2983819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983822">for</span>&nbsp;<span class="ident" id="2983826">v</span>&nbsp;<span class="op" id="2983828">:=</span>&nbsp;<span class="ident" id="2983831"><a href="/strconv/extfloat.go.html#2982986">integer</a></span><span class="op" id="2983838">;</span>&nbsp;<span class="ident" id="2983840"><a href="/strconv/extfloat.go.html#2983826">v</a></span>&nbsp;<span class="op" id="2983842">&gt;</span>&nbsp;<span class="num" id="2983844">0</span><span class="op" id="2983845">;</span>&nbsp;<span class="op" id="2983847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983851">v1</span>&nbsp;<span class="op" id="2983854">:=</span>&nbsp;<span class="ident" id="2983857"><a href="/strconv/extfloat.go.html#2983826">v</a></span>&nbsp;<span class="op" id="2983859">/</span>&nbsp;<span class="num" id="2983861">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983866"><a href="/strconv/extfloat.go.html#2983826">v</a></span>&nbsp;<span class="op" id="2983868">-=</span>&nbsp;<span class="num" id="2983871">10</span>&nbsp;<span class="op" id="2983874">*</span>&nbsp;<span class="ident" id="2983876"><a href="/strconv/extfloat.go.html#2983851">v1</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983881"><a href="/strconv/extfloat.go.html#2983805">pos</a></span><span class="op" id="2983884">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983889"><a href="/strconv/extfloat.go.html#2983791">buf</a></span><span class="op" id="2983892">[</span><span class="ident" id="2983893"><a href="/strconv/extfloat.go.html#2983805">pos</a></span><span class="op" id="2983896">]</span>&nbsp;<span class="op" id="2983898">=</span>&nbsp;<span class="builtintype" id="2983900">byte</span><span class="op" id="2983904">(</span><span class="ident" id="2983905"><a href="/strconv/extfloat.go.html#2983826">v</a></span>&nbsp;<span class="op" id="2983907">+</span>&nbsp;<span class="string" id="2983909">&#39;0&#39;</span><span class="op" id="2983912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983916"><a href="/strconv/extfloat.go.html#2983826">v</a></span>&nbsp;<span class="op" id="2983918">=</span>&nbsp;<span class="ident" id="2983920"><a href="/strconv/extfloat.go.html#2983851">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983927">for</span>&nbsp;<span class="ident" id="2983931">i</span>&nbsp;<span class="op" id="2983933">:=</span>&nbsp;<span class="ident" id="2983936"><a href="/strconv/extfloat.go.html#2983805">pos</a></span><span class="op" id="2983939">;</span>&nbsp;<span class="ident" id="2983941"><a href="/strconv/extfloat.go.html#2983931">i</a></span>&nbsp;<span class="op" id="2983943">&lt;</span>&nbsp;<span class="builtinfunc" id="2983945">len</span><span class="op" id="2983948">(</span><span class="ident" id="2983949"><a href="/strconv/extfloat.go.html#2983791">buf</a></span><span class="op" id="2983952">)</span><span class="op" id="2983953">;</span>&nbsp;<span class="ident" id="2983955"><a href="/strconv/extfloat.go.html#2983931">i</a></span><span class="op" id="2983956">++</span>&nbsp;<span class="op" id="2983959">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983963"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2983964">.</span><span class="ident" id="2983965">d</span><span class="op" id="2983966">[</span><span class="ident" id="2983967"><a href="/strconv/extfloat.go.html#2983931">i</a></span><span class="op" id="2983968">-</span><span class="ident" id="2983969"><a href="/strconv/extfloat.go.html#2983805">pos</a></span><span class="op" id="2983972">]</span>&nbsp;<span class="op" id="2983974">=</span>&nbsp;<span class="ident" id="2983976"><a href="/strconv/extfloat.go.html#2983791">buf</a></span><span class="op" id="2983979">[</span><span class="ident" id="2983980"><a href="/strconv/extfloat.go.html#2983931">i</a></span><span class="op" id="2983981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983987">nd</span>&nbsp;<span class="op" id="2983990">:=</span>&nbsp;<span class="builtinfunc" id="2983993">len</span><span class="op" id="2983996">(</span><span class="ident" id="2983997"><a href="/strconv/extfloat.go.html#2983791">buf</a></span><span class="op" id="2984000">)</span>&nbsp;<span class="op" id="2984002">-</span>&nbsp;<span class="ident" id="2984004"><a href="/strconv/extfloat.go.html#2983805">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984009"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2984010">.</span><span class="ident" id="2984011">nd</span>&nbsp;<span class="op" id="2984014">=</span>&nbsp;<span class="ident" id="2984016"><a href="/strconv/extfloat.go.html#2983987">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984020"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2984021">.</span><span class="ident" id="2984022">dp</span>&nbsp;<span class="op" id="2984025">=</span>&nbsp;<span class="ident" id="2984027"><a href="/strconv/extfloat.go.html#2983235">integerDigits</a></span>&nbsp;<span class="op" id="2984041">+</span>&nbsp;<span class="ident" id="2984043"><a href="/strconv/extfloat.go.html#2982937">exp10</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984050"><a href="/strconv/extfloat.go.html#2983177">needed</a></span>&nbsp;<span class="op" id="2984057">-=</span>&nbsp;<span class="ident" id="2984060"><a href="/strconv/extfloat.go.html#2983987">nd</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984065">if</span>&nbsp;<span class="ident" id="2984068"><a href="/strconv/extfloat.go.html#2983177">needed</a></span>&nbsp;<span class="op" id="2984075">&gt;</span>&nbsp;<span class="num" id="2984077">0</span>&nbsp;<span class="op" id="2984079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984083">if</span>&nbsp;<span class="ident" id="2984086"><a href="/strconv/extfloat.go.html#2983483">rest</a></span>&nbsp;<span class="op" id="2984091">!=</span>&nbsp;<span class="num" id="2984094">0</span>&nbsp;<span class="op" id="2984096">||</span>&nbsp;<span class="ident" id="2984099"><a href="/strconv/extfloat.go.html#2983299">pow10</a></span>&nbsp;<span class="op" id="2984105">!=</span>&nbsp;<span class="num" id="2984108">1</span>&nbsp;<span class="op" id="2984110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2984115">panic</span><span class="op" id="2984120">(</span><span class="string" id="2984121">&#34;strconv:&nbsp;internal&nbsp;error,&nbsp;rest&nbsp;!=&nbsp;0&nbsp;but&nbsp;needed&nbsp;&gt;&nbsp;0&#34;</span><span class="op" id="2984172">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984180">//&nbsp;Emit&nbsp;digits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;Each&nbsp;time,&nbsp;10*fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984245">//&nbsp;fits&nbsp;in&nbsp;a&nbsp;uint64&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984285">for</span>&nbsp;<span class="ident" id="2984289"><a href="/strconv/extfloat.go.html#2983177">needed</a></span>&nbsp;<span class="op" id="2984296">&gt;</span>&nbsp;<span class="num" id="2984298">0</span>&nbsp;<span class="op" id="2984300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984305"><a href="/strconv/extfloat.go.html#2983022">fraction</a></span>&nbsp;<span class="op" id="2984314">*=</span>&nbsp;<span class="num" id="2984317">10</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984323"><a href="/strconv/extfloat.go.html#2983071">ε</a></span>&nbsp;<span class="op" id="2984326">*=</span>&nbsp;<span class="num" id="2984329">10</span>&nbsp;<span class="comment" id="2984332">//&nbsp;the&nbsp;uncertainty&nbsp;scales&nbsp;as&nbsp;we&nbsp;multiply&nbsp;by&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984384">if</span>&nbsp;<span class="num" id="2984387">2</span><span class="op" id="2984388">*</span><span class="ident" id="2984389"><a href="/strconv/extfloat.go.html#2983071">ε</a></span>&nbsp;<span class="op" id="2984392">&gt;</span>&nbsp;<span class="num" id="2984394">1</span><span class="op" id="2984395">&lt;&lt;</span><span class="ident" id="2984397"><a href="/strconv/extfloat.go.html#2982963">shift</a></span>&nbsp;<span class="op" id="2984403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984409">//&nbsp;the&nbsp;error&nbsp;is&nbsp;so&nbsp;large&nbsp;it&nbsp;could&nbsp;modify&nbsp;which&nbsp;digit&nbsp;to&nbsp;write,&nbsp;abort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984483">return</span>&nbsp;<span class="builtintype" id="2984490">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984499">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984504">digit</span>&nbsp;<span class="op" id="2984510">:=</span>&nbsp;<span class="ident" id="2984513"><a href="/strconv/extfloat.go.html#2983022">fraction</a></span>&nbsp;<span class="op" id="2984522">&gt;&gt;</span>&nbsp;<span class="ident" id="2984525"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984534"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2984535">.</span><span class="ident" id="2984536">d</span><span class="op" id="2984537">[</span><span class="ident" id="2984538"><a href="/strconv/extfloat.go.html#2983987">nd</a></span><span class="op" id="2984540">]</span>&nbsp;<span class="op" id="2984542">=</span>&nbsp;<span class="builtintype" id="2984544">byte</span><span class="op" id="2984548">(</span><span class="ident" id="2984549"><a href="/strconv/extfloat.go.html#2984504">digit</a></span>&nbsp;<span class="op" id="2984555">+</span>&nbsp;<span class="string" id="2984557">&#39;0&#39;</span><span class="op" id="2984560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984565"><a href="/strconv/extfloat.go.html#2983022">fraction</a></span>&nbsp;<span class="op" id="2984574">-=</span>&nbsp;<span class="ident" id="2984577"><a href="/strconv/extfloat.go.html#2984504">digit</a></span>&nbsp;<span class="op" id="2984583">&lt;&lt;</span>&nbsp;<span class="ident" id="2984586"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984595"><a href="/strconv/extfloat.go.html#2983987">nd</a></span><span class="op" id="2984597">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984603"><a href="/strconv/extfloat.go.html#2983177">needed</a></span><span class="op" id="2984609">--</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984618"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2984619">.</span><span class="ident" id="2984620">nd</span>&nbsp;<span class="op" id="2984623">=</span>&nbsp;<span class="ident" id="2984625"><a href="/strconv/extfloat.go.html#2983987">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984633">//&nbsp;We&nbsp;have&nbsp;written&nbsp;a&nbsp;truncation&nbsp;of&nbsp;f&nbsp;(a&nbsp;numerator&nbsp;/&nbsp;10^d.dp).&nbsp;The&nbsp;remaining&nbsp;part</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984715">//&nbsp;can&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;small&nbsp;number&nbsp;(&lt;&nbsp;1)&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;last&nbsp;digit&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984799">//&nbsp;numerator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984814">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984818">//&nbsp;If&nbsp;rest&nbsp;&gt;&nbsp;0,&nbsp;the&nbsp;amount&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984850">//&nbsp;&nbsp;&nbsp;&nbsp;(rest&lt;&lt;shift&nbsp;|&nbsp;fraction)&nbsp;/&nbsp;(pow10&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984901">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;±ε&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984954">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;fact&nbsp;that&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;guarantees&nbsp;that&nbsp;pow10&nbsp;&lt;&lt;&nbsp;shift&nbsp;does&nbsp;not&nbsp;overflow&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985040">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985044">//&nbsp;If&nbsp;rest&nbsp;=&nbsp;0,&nbsp;pow10&nbsp;==&nbsp;1&nbsp;and&nbsp;the&nbsp;amount&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985090">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;/&nbsp;(1&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985121">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;±ε&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985174">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985178">//&nbsp;We&nbsp;pass&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;rounding&nbsp;routine&nbsp;for&nbsp;adjustment.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985248">ok</span>&nbsp;<span class="op" id="2985251">:=</span>&nbsp;<span class="ident" id="2985254"><a href="/strconv/extfloat.go.html#2985962">adjustLastDigitFixed</a></span><span class="op" id="2985274">(</span><span class="ident" id="2985275"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2985276">,</span>&nbsp;<span class="ident" id="2985278">uint64</span><span class="op" id="2985284">(</span><span class="ident" id="2985285"><a href="/strconv/extfloat.go.html#2983483">rest</a></span><span class="op" id="2985289">)</span><span class="op" id="2985290">&lt;&lt;</span><span class="ident" id="2985292"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><span class="op" id="2985297">|</span><span class="ident" id="2985298"><a href="/strconv/extfloat.go.html#2983022">fraction</a></span><span class="op" id="2985306">,</span>&nbsp;<span class="ident" id="2985308"><a href="/strconv/extfloat.go.html#2983299">pow10</a></span><span class="op" id="2985313">,</span>&nbsp;<span class="ident" id="2985315"><a href="/strconv/extfloat.go.html#2982963">shift</a></span><span class="op" id="2985320">,</span>&nbsp;<span class="ident" id="2985322"><a href="/strconv/extfloat.go.html#2983071">ε</a></span><span class="op" id="2985324">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985327">if</span>&nbsp;<span class="op" id="2985330">!</span><span class="ident" id="2985331"><a href="/strconv/extfloat.go.html#2985248">ok</a></span>&nbsp;<span class="op" id="2985334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985338">return</span>&nbsp;<span class="builtintype" id="2985345">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985355">//&nbsp;Trim&nbsp;trailing&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985380">for</span>&nbsp;<span class="ident" id="2985384">i</span>&nbsp;<span class="op" id="2985386">:=</span>&nbsp;<span class="ident" id="2985389"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2985390">.</span><span class="ident" id="2985391">nd</span>&nbsp;<span class="op" id="2985394">-</span>&nbsp;<span class="num" id="2985396">1</span><span class="op" id="2985397">;</span>&nbsp;<span class="ident" id="2985399"><a href="/strconv/extfloat.go.html#2985384">i</a></span>&nbsp;<span class="op" id="2985401">&gt;=</span>&nbsp;<span class="num" id="2985404">0</span><span class="op" id="2985405">;</span>&nbsp;<span class="ident" id="2985407"><a href="/strconv/extfloat.go.html#2985384">i</a></span><span class="op" id="2985408">--</span>&nbsp;<span class="op" id="2985411">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985415">if</span>&nbsp;<span class="ident" id="2985418"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2985419">.</span><span class="ident" id="2985420">d</span><span class="op" id="2985421">[</span><span class="ident" id="2985422"><a href="/strconv/extfloat.go.html#2985384">i</a></span><span class="op" id="2985423">]</span>&nbsp;<span class="op" id="2985425">!=</span>&nbsp;<span class="string" id="2985428">&#39;0&#39;</span>&nbsp;<span class="op" id="2985432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985437"><a href="/strconv/extfloat.go.html#2982636">d</a></span><span class="op" id="2985438">.</span><span class="ident" id="2985439">nd</span>&nbsp;<span class="op" id="2985442">=</span>&nbsp;<span class="ident" id="2985444"><a href="/strconv/extfloat.go.html#2985384">i</a></span>&nbsp;<span class="op" id="2985446">+</span>&nbsp;<span class="num" id="2985448">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985453">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985464">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985467">return</span>&nbsp;<span class="builtintype" id="2985474">true</span><br>
<span class="lineno"></span><span class="op" id="2985479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2985482">//&nbsp;adjustLastDigitFixed&nbsp;assumes&nbsp;d&nbsp;contains&nbsp;the&nbsp;representation&nbsp;of&nbsp;the&nbsp;integral&nbsp;part</span><br>
<span class="lineno"></span><span class="comment" id="2985565">//&nbsp;of&nbsp;some&nbsp;number,&nbsp;whose&nbsp;fractional&nbsp;part&nbsp;is&nbsp;num&nbsp;/&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift).&nbsp;The&nbsp;numerator</span><br>
<span class="lineno">490</span><span class="comment" id="2985645">//&nbsp;num&nbsp;is&nbsp;only&nbsp;known&nbsp;up&nbsp;to&nbsp;an&nbsp;uncertainty&nbsp;of&nbsp;size&nbsp;ε,&nbsp;assumed&nbsp;to&nbsp;be&nbsp;less&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2985723">//&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift)/2.</span><br>
<span class="lineno"></span><span class="comment" id="2985744">//</span><br>
<span class="lineno"></span><span class="comment" id="2985747">//&nbsp;It&nbsp;will&nbsp;increase&nbsp;the&nbsp;last&nbsp;digit&nbsp;by&nbsp;one&nbsp;to&nbsp;account&nbsp;for&nbsp;correct&nbsp;rounding,&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="2985832">//&nbsp;when&nbsp;the&nbsp;fractional&nbsp;part&nbsp;is&nbsp;greater&nbsp;than&nbsp;1/2,&nbsp;and&nbsp;will&nbsp;return&nbsp;false&nbsp;if&nbsp;ε&nbsp;is&nbsp;such</span><br>
<span class="lineno">495</span><span class="comment" id="2985917">//&nbsp;that&nbsp;no&nbsp;correct&nbsp;answer&nbsp;can&nbsp;be&nbsp;given.</span><br>
<span class="lineno"></span><span class="keyword" id="2985957">func</span>&nbsp;<span class="ident" id="2985962">adjustLastDigitFixed</span><span class="op" id="2985982">(</span><span class="ident" id="2985983">d</span>&nbsp;<span class="op" id="2985985">*</span><span class="ident" id="2985986"><a href="/strconv/ftoa.go.html#2999738">decimalSlice</a></span><span class="op" id="2985998">,</span>&nbsp;<span class="ident" id="2986000">num</span><span class="op" id="2986003">,</span>&nbsp;<span class="ident" id="2986005">den</span>&nbsp;<span class="ident" id="2986009">uint64</span><span class="op" id="2986015">,</span>&nbsp;<span class="ident" id="2986017">shift</span>&nbsp;<span class="builtintype" id="2986023">uint</span><span class="op" id="2986027">,</span>&nbsp;<span class="ident" id="2986029">ε</span>&nbsp;<span class="ident" id="2986032">uint64</span><span class="op" id="2986038">)</span>&nbsp;<span class="builtintype" id="2986040">bool</span>&nbsp;<span class="op" id="2986045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986048">if</span>&nbsp;<span class="ident" id="2986051"><a href="/strconv/extfloat.go.html#2986000">num</a></span>&nbsp;<span class="op" id="2986055">&gt;</span>&nbsp;<span class="ident" id="2986057"><a href="/strconv/extfloat.go.html#2986005">den</a></span><span class="op" id="2986060">&lt;&lt;</span><span class="ident" id="2986062"><a href="/strconv/extfloat.go.html#2986017">shift</a></span>&nbsp;<span class="op" id="2986068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2986072">panic</span><span class="op" id="2986077">(</span><span class="string" id="2986078">&#34;strconv:&nbsp;num&nbsp;&gt;&nbsp;den&lt;&lt;shift&nbsp;in&nbsp;adjustLastDigitFixed&#34;</span><span class="op" id="2986129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986132">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986135">if</span>&nbsp;<span class="num" id="2986138">2</span><span class="op" id="2986139">*</span><span class="ident" id="2986140"><a href="/strconv/extfloat.go.html#2986029">ε</a></span>&nbsp;<span class="op" id="2986143">&gt;</span>&nbsp;<span class="ident" id="2986145"><a href="/strconv/extfloat.go.html#2986005">den</a></span><span class="op" id="2986148">&lt;&lt;</span><span class="ident" id="2986150"><a href="/strconv/extfloat.go.html#2986017">shift</a></span>&nbsp;<span class="op" id="2986156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2986160">panic</span><span class="op" id="2986165">(</span><span class="string" id="2986166">&#34;strconv:&nbsp;ε&nbsp;&gt;&nbsp;(den&lt;&lt;shift)/2&#34;</span><span class="op" id="2986196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986202">if</span>&nbsp;<span class="num" id="2986205">2</span><span class="op" id="2986206">*</span><span class="op" id="2986207">(</span><span class="ident" id="2986208"><a href="/strconv/extfloat.go.html#2986000">num</a></span><span class="op" id="2986211">+</span><span class="ident" id="2986212"><a href="/strconv/extfloat.go.html#2986029">ε</a></span><span class="op" id="2986214">)</span>&nbsp;<span class="op" id="2986216">&lt;</span>&nbsp;<span class="ident" id="2986218"><a href="/strconv/extfloat.go.html#2986005">den</a></span><span class="op" id="2986221">&lt;&lt;</span><span class="ident" id="2986223"><a href="/strconv/extfloat.go.html#2986017">shift</a></span>&nbsp;<span class="op" id="2986229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986233">return</span>&nbsp;<span class="builtintype" id="2986240">true</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986249">if</span>&nbsp;<span class="num" id="2986252">2</span><span class="op" id="2986253">*</span><span class="op" id="2986254">(</span><span class="ident" id="2986255"><a href="/strconv/extfloat.go.html#2986000">num</a></span><span class="op" id="2986258">-</span><span class="ident" id="2986259"><a href="/strconv/extfloat.go.html#2986029">ε</a></span><span class="op" id="2986261">)</span>&nbsp;<span class="op" id="2986263">&gt;</span>&nbsp;<span class="ident" id="2986265"><a href="/strconv/extfloat.go.html#2986005">den</a></span><span class="op" id="2986268">&lt;&lt;</span><span class="ident" id="2986270"><a href="/strconv/extfloat.go.html#2986017">shift</a></span>&nbsp;<span class="op" id="2986276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986280">//&nbsp;increment&nbsp;d&nbsp;by&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986303">i</span>&nbsp;<span class="op" id="2986305">:=</span>&nbsp;<span class="ident" id="2986308"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986309">.</span><span class="ident" id="2986310">nd</span>&nbsp;<span class="op" id="2986313">-</span>&nbsp;<span class="num" id="2986315">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986319">for</span>&nbsp;<span class="op" id="2986323">;</span>&nbsp;<span class="ident" id="2986325"><a href="/strconv/extfloat.go.html#2986303">i</a></span>&nbsp;<span class="op" id="2986327">&gt;=</span>&nbsp;<span class="num" id="2986330">0</span><span class="op" id="2986331">;</span>&nbsp;<span class="ident" id="2986333"><a href="/strconv/extfloat.go.html#2986303">i</a></span><span class="op" id="2986334">--</span>&nbsp;<span class="op" id="2986337">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986342">if</span>&nbsp;<span class="ident" id="2986345"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986346">.</span><span class="ident" id="2986347">d</span><span class="op" id="2986348">[</span><span class="ident" id="2986349"><a href="/strconv/extfloat.go.html#2986303">i</a></span><span class="op" id="2986350">]</span>&nbsp;<span class="op" id="2986352">==</span>&nbsp;<span class="string" id="2986355">&#39;9&#39;</span>&nbsp;<span class="op" id="2986359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986365"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986366">.</span><span class="ident" id="2986367">nd</span><span class="op" id="2986369">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986375">}</span>&nbsp;<span class="keyword" id="2986377">else</span>&nbsp;<span class="op" id="2986382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986388">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986397">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986405">if</span>&nbsp;<span class="ident" id="2986408"><a href="/strconv/extfloat.go.html#2986303">i</a></span>&nbsp;<span class="op" id="2986410">&lt;</span>&nbsp;<span class="num" id="2986412">0</span>&nbsp;<span class="op" id="2986414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986419"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986420">.</span><span class="ident" id="2986421">d</span><span class="op" id="2986422">[</span><span class="num" id="2986423">0</span><span class="op" id="2986424">]</span>&nbsp;<span class="op" id="2986426">=</span>&nbsp;<span class="string" id="2986428">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986435"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986436">.</span><span class="ident" id="2986437">nd</span>&nbsp;<span class="op" id="2986440">=</span>&nbsp;<span class="num" id="2986442">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986447"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986448">.</span><span class="ident" id="2986449">dp</span><span class="op" id="2986451">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986456">}</span>&nbsp;<span class="keyword" id="2986458">else</span>&nbsp;<span class="op" id="2986463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986468"><a href="/strconv/extfloat.go.html#2985983">d</a></span><span class="op" id="2986469">.</span><span class="ident" id="2986470">d</span><span class="op" id="2986471">[</span><span class="ident" id="2986472"><a href="/strconv/extfloat.go.html#2986303">i</a></span><span class="op" id="2986473">]</span><span class="op" id="2986474">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986483">return</span>&nbsp;<span class="builtintype" id="2986490">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986496">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986499">return</span>&nbsp;<span class="builtintype" id="2986506">false</span><br>
<span class="lineno"></span><span class="op" id="2986512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986515">//&nbsp;ShortestDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;shortest&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f</span><br>
<span class="lineno"></span><span class="comment" id="2986587">//&nbsp;which&nbsp;belongs&nbsp;to&nbsp;the&nbsp;open&nbsp;interval&nbsp;(lower,&nbsp;upper),&nbsp;where&nbsp;f&nbsp;is&nbsp;supposed</span><br>
<span class="lineno">530</span><span class="comment" id="2986661">//&nbsp;to&nbsp;lie.&nbsp;It&nbsp;returns&nbsp;false&nbsp;whenever&nbsp;the&nbsp;result&nbsp;is&nbsp;unsure.&nbsp;The&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="2986739">//&nbsp;uses&nbsp;the&nbsp;Grisu3&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2986769">func</span>&nbsp;<span class="op" id="2986774">(</span><span class="ident" id="2986775">f</span>&nbsp;<span class="op" id="2986777">*</span><span class="ident" id="2986778"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2986786">)</span>&nbsp;<span class="ident" id="2986788">ShortestDecimal</span><span class="op" id="2986803">(</span><span class="ident" id="2986804">d</span>&nbsp;<span class="op" id="2986806">*</span><span class="ident" id="2986807"><a href="/strconv/ftoa.go.html#2999738">decimalSlice</a></span><span class="op" id="2986819">,</span>&nbsp;<span class="ident" id="2986821">lower</span><span class="op" id="2986826">,</span>&nbsp;<span class="ident" id="2986828">upper</span>&nbsp;<span class="op" id="2986834">*</span><span class="ident" id="2986835"><a href="/strconv/extfloat.go.html#2970762">extFloat</a></span><span class="op" id="2986843">)</span>&nbsp;<span class="builtintype" id="2986845">bool</span>&nbsp;<span class="op" id="2986850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986853">if</span>&nbsp;<span class="ident" id="2986856"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2986857">.</span><span class="ident" id="2986858">mant</span>&nbsp;<span class="op" id="2986863">==</span>&nbsp;<span class="num" id="2986866">0</span>&nbsp;<span class="op" id="2986868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986872"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2986873">.</span><span class="ident" id="2986874">nd</span>&nbsp;<span class="op" id="2986877">=</span>&nbsp;<span class="num" id="2986879">0</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986883"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2986884">.</span><span class="ident" id="2986885">dp</span>&nbsp;<span class="op" id="2986888">=</span>&nbsp;<span class="num" id="2986890">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986894"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2986895">.</span><span class="ident" id="2986896">neg</span>&nbsp;<span class="op" id="2986900">=</span>&nbsp;<span class="ident" id="2986902"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2986903">.</span><span class="ident" id="2986904">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986910">return</span>&nbsp;<span class="builtintype" id="2986917">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986926">if</span>&nbsp;<span class="ident" id="2986929"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2986930">.</span><span class="ident" id="2986931">exp</span>&nbsp;<span class="op" id="2986935">==</span>&nbsp;<span class="num" id="2986938">0</span>&nbsp;<span class="op" id="2986940">&amp;&amp;</span>&nbsp;<span class="op" id="2986943">*</span><span class="ident" id="2986944"><a href="/strconv/extfloat.go.html#2986821">lower</a></span>&nbsp;<span class="op" id="2986950">==</span>&nbsp;<span class="op" id="2986953">*</span><span class="ident" id="2986954"><a href="/strconv/extfloat.go.html#2986775">f</a></span>&nbsp;<span class="op" id="2986956">&amp;&amp;</span>&nbsp;<span class="op" id="2986959">*</span><span class="ident" id="2986960"><a href="/strconv/extfloat.go.html#2986821">lower</a></span>&nbsp;<span class="op" id="2986966">==</span>&nbsp;<span class="op" id="2986969">*</span><span class="ident" id="2986970"><a href="/strconv/extfloat.go.html#2986828">upper</a></span>&nbsp;<span class="op" id="2986976">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986980">//&nbsp;an&nbsp;exact&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987003">var</span>&nbsp;<span class="ident" id="2987007">buf</span>&nbsp;<span class="op" id="2987011">[</span><span class="num" id="2987012">24</span><span class="op" id="2987014">]</span><span class="builtintype" id="2987015">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987022">n</span>&nbsp;<span class="op" id="2987024">:=</span>&nbsp;<span class="builtinfunc" id="2987027">len</span><span class="op" id="2987030">(</span><span class="ident" id="2987031"><a href="/strconv/extfloat.go.html#2987007">buf</a></span><span class="op" id="2987034">)</span>&nbsp;<span class="op" id="2987036">-</span>&nbsp;<span class="num" id="2987038">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987042">for</span>&nbsp;<span class="ident" id="2987046">v</span>&nbsp;<span class="op" id="2987048">:=</span>&nbsp;<span class="ident" id="2987051"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987052">.</span><span class="ident" id="2987053">mant</span><span class="op" id="2987057">;</span>&nbsp;<span class="ident" id="2987059"><a href="/strconv/extfloat.go.html#2987046">v</a></span>&nbsp;<span class="op" id="2987061">&gt;</span>&nbsp;<span class="num" id="2987063">0</span><span class="op" id="2987064">;</span>&nbsp;<span class="op" id="2987066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987071">v1</span>&nbsp;<span class="op" id="2987074">:=</span>&nbsp;<span class="ident" id="2987077"><a href="/strconv/extfloat.go.html#2987046">v</a></span>&nbsp;<span class="op" id="2987079">/</span>&nbsp;<span class="num" id="2987081">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987087"><a href="/strconv/extfloat.go.html#2987046">v</a></span>&nbsp;<span class="op" id="2987089">-=</span>&nbsp;<span class="num" id="2987092">10</span>&nbsp;<span class="op" id="2987095">*</span>&nbsp;<span class="ident" id="2987097"><a href="/strconv/extfloat.go.html#2987071">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987103"><a href="/strconv/extfloat.go.html#2987007">buf</a></span><span class="op" id="2987106">[</span><span class="ident" id="2987107"><a href="/strconv/extfloat.go.html#2987022">n</a></span><span class="op" id="2987108">]</span>&nbsp;<span class="op" id="2987110">=</span>&nbsp;<span class="builtintype" id="2987112">byte</span><span class="op" id="2987116">(</span><span class="ident" id="2987117"><a href="/strconv/extfloat.go.html#2987046">v</a></span>&nbsp;<span class="op" id="2987119">+</span>&nbsp;<span class="string" id="2987121">&#39;0&#39;</span><span class="op" id="2987124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987129"><a href="/strconv/extfloat.go.html#2987022">n</a></span><span class="op" id="2987130">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987136"><a href="/strconv/extfloat.go.html#2987046">v</a></span>&nbsp;<span class="op" id="2987138">=</span>&nbsp;<span class="ident" id="2987140"><a href="/strconv/extfloat.go.html#2987071">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987145">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987149">nd</span>&nbsp;<span class="op" id="2987152">:=</span>&nbsp;<span class="builtinfunc" id="2987155">len</span><span class="op" id="2987158">(</span><span class="ident" id="2987159"><a href="/strconv/extfloat.go.html#2987007">buf</a></span><span class="op" id="2987162">)</span>&nbsp;<span class="op" id="2987164">-</span>&nbsp;<span class="ident" id="2987166"><a href="/strconv/extfloat.go.html#2987022">n</a></span>&nbsp;<span class="op" id="2987168">-</span>&nbsp;<span class="num" id="2987170">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987174">for</span>&nbsp;<span class="ident" id="2987178">i</span>&nbsp;<span class="op" id="2987180">:=</span>&nbsp;<span class="num" id="2987183">0</span><span class="op" id="2987184">;</span>&nbsp;<span class="ident" id="2987186"><a href="/strconv/extfloat.go.html#2987178">i</a></span>&nbsp;<span class="op" id="2987188">&lt;</span>&nbsp;<span class="ident" id="2987190"><a href="/strconv/extfloat.go.html#2987149">nd</a></span><span class="op" id="2987192">;</span>&nbsp;<span class="ident" id="2987194"><a href="/strconv/extfloat.go.html#2987178">i</a></span><span class="op" id="2987195">++</span>&nbsp;<span class="op" id="2987198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987203"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987204">.</span><span class="ident" id="2987205">d</span><span class="op" id="2987206">[</span><span class="ident" id="2987207"><a href="/strconv/extfloat.go.html#2987178">i</a></span><span class="op" id="2987208">]</span>&nbsp;<span class="op" id="2987210">=</span>&nbsp;<span class="ident" id="2987212"><a href="/strconv/extfloat.go.html#2987007">buf</a></span><span class="op" id="2987215">[</span><span class="ident" id="2987216"><a href="/strconv/extfloat.go.html#2987022">n</a></span><span class="op" id="2987217">+</span><span class="num" id="2987218">1</span><span class="op" id="2987219">+</span><span class="ident" id="2987220"><a href="/strconv/extfloat.go.html#2987178">i</a></span><span class="op" id="2987221">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987229"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987230">.</span><span class="ident" id="2987231">nd</span><span class="op" id="2987233">,</span>&nbsp;<span class="ident" id="2987235"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987236">.</span><span class="ident" id="2987237">dp</span>&nbsp;<span class="op" id="2987240">=</span>&nbsp;<span class="ident" id="2987242"><a href="/strconv/extfloat.go.html#2987149">nd</a></span><span class="op" id="2987244">,</span>&nbsp;<span class="ident" id="2987246"><a href="/strconv/extfloat.go.html#2987149">nd</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987251">for</span>&nbsp;<span class="ident" id="2987255"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987256">.</span><span class="ident" id="2987257">nd</span>&nbsp;<span class="op" id="2987260">&gt;</span>&nbsp;<span class="num" id="2987262">0</span>&nbsp;<span class="op" id="2987264">&amp;&amp;</span>&nbsp;<span class="ident" id="2987267"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987268">.</span><span class="ident" id="2987269">d</span><span class="op" id="2987270">[</span><span class="ident" id="2987271"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987272">.</span><span class="ident" id="2987273">nd</span><span class="op" id="2987275">-</span><span class="num" id="2987276">1</span><span class="op" id="2987277">]</span>&nbsp;<span class="op" id="2987279">==</span>&nbsp;<span class="string" id="2987282">&#39;0&#39;</span>&nbsp;<span class="op" id="2987286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987291"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987292">.</span><span class="ident" id="2987293">nd</span><span class="op" id="2987295">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987304">if</span>&nbsp;<span class="ident" id="2987307"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987308">.</span><span class="ident" id="2987309">nd</span>&nbsp;<span class="op" id="2987312">==</span>&nbsp;<span class="num" id="2987315">0</span>&nbsp;<span class="op" id="2987317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987322"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987323">.</span><span class="ident" id="2987324">dp</span>&nbsp;<span class="op" id="2987327">=</span>&nbsp;<span class="num" id="2987329">0</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987337"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2987338">.</span><span class="ident" id="2987339">neg</span>&nbsp;<span class="op" id="2987343">=</span>&nbsp;<span class="ident" id="2987345"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987346">.</span><span class="ident" id="2987347">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987353">return</span>&nbsp;<span class="builtintype" id="2987360">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987369"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987374">.</span><span class="ident" id="2987375">Normalize</span><span class="op" id="2987384">(</span><span class="op" id="2987385">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2987388">//&nbsp;Uniformize&nbsp;exponents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987414">if</span>&nbsp;<span class="ident" id="2987417"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987418">.</span><span class="ident" id="2987419">exp</span>&nbsp;<span class="op" id="2987423">&gt;</span>&nbsp;<span class="ident" id="2987425"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987430">.</span><span class="ident" id="2987431">exp</span>&nbsp;<span class="op" id="2987435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987439"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987440">.</span><span class="ident" id="2987441">mant</span>&nbsp;<span class="op" id="2987446">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2987450">uint</span><span class="op" id="2987454">(</span><span class="ident" id="2987455"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987456">.</span><span class="ident" id="2987457">exp</span>&nbsp;<span class="op" id="2987461">-</span>&nbsp;<span class="ident" id="2987463"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987468">.</span><span class="ident" id="2987469">exp</span><span class="op" id="2987472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987476"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987477">.</span><span class="ident" id="2987478">exp</span>&nbsp;<span class="op" id="2987482">=</span>&nbsp;<span class="ident" id="2987484"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987489">.</span><span class="ident" id="2987490">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987495">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987498">if</span>&nbsp;<span class="ident" id="2987501"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987506">.</span><span class="ident" id="2987507">exp</span>&nbsp;<span class="op" id="2987511">&gt;</span>&nbsp;<span class="ident" id="2987513"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987518">.</span><span class="ident" id="2987519">exp</span>&nbsp;<span class="op" id="2987523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987527"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987532">.</span><span class="ident" id="2987533">mant</span>&nbsp;<span class="op" id="2987538">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2987542">uint</span><span class="op" id="2987546">(</span><span class="ident" id="2987547"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987552">.</span><span class="ident" id="2987553">exp</span>&nbsp;<span class="op" id="2987557">-</span>&nbsp;<span class="ident" id="2987559"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987564">.</span><span class="ident" id="2987565">exp</span><span class="op" id="2987568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987572"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987577">.</span><span class="ident" id="2987578">exp</span>&nbsp;<span class="op" id="2987582">=</span>&nbsp;<span class="ident" id="2987584"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987589">.</span><span class="ident" id="2987590">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987599">exp10</span>&nbsp;<span class="op" id="2987605">:=</span>&nbsp;<span class="ident" id="2987608"><a href="/strconv/extfloat.go.html#2982313">frexp10Many</a></span><span class="op" id="2987619">(</span><span class="ident" id="2987620"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987625">,</span>&nbsp;<span class="ident" id="2987627"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2987628">,</span>&nbsp;<span class="ident" id="2987630"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2987638">//&nbsp;Take&nbsp;a&nbsp;safety&nbsp;margin&nbsp;due&nbsp;to&nbsp;rounding&nbsp;in&nbsp;frexp10Many,&nbsp;but&nbsp;we&nbsp;lose&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987718"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987723">.</span><span class="ident" id="2987724">mant</span><span class="op" id="2987728">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987732"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2987737">.</span><span class="ident" id="2987738">mant</span><span class="op" id="2987742">--</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2987747">//&nbsp;The&nbsp;shortest&nbsp;representation&nbsp;of&nbsp;f&nbsp;is&nbsp;either&nbsp;rounded&nbsp;up&nbsp;or&nbsp;down,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2987818">//&nbsp;in&nbsp;any&nbsp;case,&nbsp;it&nbsp;is&nbsp;a&nbsp;truncation&nbsp;of&nbsp;upper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987864">shift</span>&nbsp;<span class="op" id="2987870">:=</span>&nbsp;<span class="builtintype" id="2987873">uint</span><span class="op" id="2987877">(</span><span class="op" id="2987878">-</span><span class="ident" id="2987879"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987884">.</span><span class="ident" id="2987885">exp</span><span class="op" id="2987888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987891">integer</span>&nbsp;<span class="op" id="2987899">:=</span>&nbsp;<span class="builtintype" id="2987902">uint32</span><span class="op" id="2987908">(</span><span class="ident" id="2987909"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987914">.</span><span class="ident" id="2987915">mant</span>&nbsp;<span class="op" id="2987920">&gt;&gt;</span>&nbsp;<span class="ident" id="2987923"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><span class="op" id="2987928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987931">fraction</span>&nbsp;<span class="op" id="2987940">:=</span>&nbsp;<span class="ident" id="2987943"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2987948">.</span><span class="ident" id="2987949">mant</span>&nbsp;<span class="op" id="2987954">-</span>&nbsp;<span class="op" id="2987956">(</span><span class="ident" id="2987957">uint64</span><span class="op" id="2987963">(</span><span class="ident" id="2987964"><a href="/strconv/extfloat.go.html#2987891">integer</a></span><span class="op" id="2987971">)</span>&nbsp;<span class="op" id="2987973">&lt;&lt;</span>&nbsp;<span class="ident" id="2987976"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><span class="op" id="2987981">)</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2987985">//&nbsp;How&nbsp;far&nbsp;we&nbsp;can&nbsp;go&nbsp;down&nbsp;from&nbsp;upper&nbsp;until&nbsp;the&nbsp;result&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988050">allowance</span>&nbsp;<span class="op" id="2988060">:=</span>&nbsp;<span class="ident" id="2988063"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2988068">.</span><span class="ident" id="2988069">mant</span>&nbsp;<span class="op" id="2988074">-</span>&nbsp;<span class="ident" id="2988076"><a href="/strconv/extfloat.go.html#2986821">lower</a></span><span class="op" id="2988081">.</span><span class="ident" id="2988082">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988088">//&nbsp;How&nbsp;far&nbsp;we&nbsp;should&nbsp;go&nbsp;to&nbsp;get&nbsp;a&nbsp;very&nbsp;precise&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988143">targetDiff</span>&nbsp;<span class="op" id="2988154">:=</span>&nbsp;<span class="ident" id="2988157"><a href="/strconv/extfloat.go.html#2986828">upper</a></span><span class="op" id="2988162">.</span><span class="ident" id="2988163">mant</span>&nbsp;<span class="op" id="2988168">-</span>&nbsp;<span class="ident" id="2988170"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2988171">.</span><span class="ident" id="2988172">mant</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988179">//&nbsp;Count&nbsp;integral&nbsp;digits:&nbsp;there&nbsp;are&nbsp;at&nbsp;most&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988228">var</span>&nbsp;<span class="ident" id="2988232">integerDigits</span>&nbsp;<span class="builtintype" id="2988246">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988251">for</span>&nbsp;<span class="ident" id="2988255">i</span><span class="op" id="2988256">,</span>&nbsp;<span class="ident" id="2988258">pow</span>&nbsp;<span class="op" id="2988262">:=</span>&nbsp;<span class="num" id="2988265">0</span><span class="op" id="2988266">,</span>&nbsp;<span class="ident" id="2988268">uint64</span><span class="op" id="2988274">(</span><span class="num" id="2988275">1</span><span class="op" id="2988276">)</span><span class="op" id="2988277">;</span>&nbsp;<span class="ident" id="2988279"><a href="/strconv/extfloat.go.html#2988255">i</a></span>&nbsp;<span class="op" id="2988281">&lt;</span>&nbsp;<span class="num" id="2988283">20</span><span class="op" id="2988285">;</span>&nbsp;<span class="ident" id="2988287"><a href="/strconv/extfloat.go.html#2988255">i</a></span><span class="op" id="2988288">++</span>&nbsp;<span class="op" id="2988291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988295">if</span>&nbsp;<span class="ident" id="2988298"><a href="/strconv/extfloat.go.html#2988258">pow</a></span>&nbsp;<span class="op" id="2988302">&gt;</span>&nbsp;<span class="ident" id="2988304">uint64</span><span class="op" id="2988310">(</span><span class="ident" id="2988311"><a href="/strconv/extfloat.go.html#2987891">integer</a></span><span class="op" id="2988318">)</span>&nbsp;<span class="op" id="2988320">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988325"><a href="/strconv/extfloat.go.html#2988232">integerDigits</a></span>&nbsp;<span class="op" id="2988339">=</span>&nbsp;<span class="ident" id="2988341"><a href="/strconv/extfloat.go.html#2988255">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988346">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988358"><a href="/strconv/extfloat.go.html#2988258">pow</a></span>&nbsp;<span class="op" id="2988362">*=</span>&nbsp;<span class="num" id="2988365">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988369">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988372">for</span>&nbsp;<span class="ident" id="2988376">i</span>&nbsp;<span class="op" id="2988378">:=</span>&nbsp;<span class="num" id="2988381">0</span><span class="op" id="2988382">;</span>&nbsp;<span class="ident" id="2988384"><a href="/strconv/extfloat.go.html#2988376">i</a></span>&nbsp;<span class="op" id="2988386">&lt;</span>&nbsp;<span class="ident" id="2988388"><a href="/strconv/extfloat.go.html#2988232">integerDigits</a></span><span class="op" id="2988401">;</span>&nbsp;<span class="ident" id="2988403"><a href="/strconv/extfloat.go.html#2988376">i</a></span><span class="op" id="2988404">++</span>&nbsp;<span class="op" id="2988407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988411">pow</span>&nbsp;<span class="op" id="2988415">:=</span>&nbsp;<span class="ident" id="2988418"><a href="/strconv/extfloat.go.html#2978613">uint64pow10</a></span><span class="op" id="2988429">[</span><span class="ident" id="2988430"><a href="/strconv/extfloat.go.html#2988232">integerDigits</a></span><span class="op" id="2988443">-</span><span class="ident" id="2988444"><a href="/strconv/extfloat.go.html#2988376">i</a></span><span class="op" id="2988445">-</span><span class="num" id="2988446">1</span><span class="op" id="2988447">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988451">digit</span>&nbsp;<span class="op" id="2988457">:=</span>&nbsp;<span class="ident" id="2988460"><a href="/strconv/extfloat.go.html#2987891">integer</a></span>&nbsp;<span class="op" id="2988468">/</span>&nbsp;<span class="builtintype" id="2988470">uint32</span><span class="op" id="2988476">(</span><span class="ident" id="2988477"><a href="/strconv/extfloat.go.html#2988411">pow</a></span><span class="op" id="2988480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988484"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988485">.</span><span class="ident" id="2988486">d</span><span class="op" id="2988487">[</span><span class="ident" id="2988488"><a href="/strconv/extfloat.go.html#2988376">i</a></span><span class="op" id="2988489">]</span>&nbsp;<span class="op" id="2988491">=</span>&nbsp;<span class="builtintype" id="2988493">byte</span><span class="op" id="2988497">(</span><span class="ident" id="2988498"><a href="/strconv/extfloat.go.html#2988451">digit</a></span>&nbsp;<span class="op" id="2988504">+</span>&nbsp;<span class="string" id="2988506">&#39;0&#39;</span><span class="op" id="2988509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988513"><a href="/strconv/extfloat.go.html#2987891">integer</a></span>&nbsp;<span class="op" id="2988521">-=</span>&nbsp;<span class="ident" id="2988524"><a href="/strconv/extfloat.go.html#2988451">digit</a></span>&nbsp;<span class="op" id="2988530">*</span>&nbsp;<span class="builtintype" id="2988532">uint32</span><span class="op" id="2988538">(</span><span class="ident" id="2988539"><a href="/strconv/extfloat.go.html#2988411">pow</a></span><span class="op" id="2988542">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988546">//&nbsp;evaluate&nbsp;whether&nbsp;we&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988584">if</span>&nbsp;<span class="ident" id="2988587">currentDiff</span>&nbsp;<span class="op" id="2988599">:=</span>&nbsp;<span class="ident" id="2988602">uint64</span><span class="op" id="2988608">(</span><span class="ident" id="2988609"><a href="/strconv/extfloat.go.html#2987891">integer</a></span><span class="op" id="2988616">)</span><span class="op" id="2988617">&lt;&lt;</span><span class="ident" id="2988619"><a href="/strconv/extfloat.go.html#2987864">shift</a></span>&nbsp;<span class="op" id="2988625">+</span>&nbsp;<span class="ident" id="2988627"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span><span class="op" id="2988635">;</span>&nbsp;<span class="ident" id="2988637"><a href="/strconv/extfloat.go.html#2988587">currentDiff</a></span>&nbsp;<span class="op" id="2988649">&lt;</span>&nbsp;<span class="ident" id="2988651"><a href="/strconv/extfloat.go.html#2988050">allowance</a></span>&nbsp;<span class="op" id="2988661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988666"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988667">.</span><span class="ident" id="2988668">nd</span>&nbsp;<span class="op" id="2988671">=</span>&nbsp;<span class="ident" id="2988673"><a href="/strconv/extfloat.go.html#2988376">i</a></span>&nbsp;<span class="op" id="2988675">+</span>&nbsp;<span class="num" id="2988677">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988682"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988683">.</span><span class="ident" id="2988684">dp</span>&nbsp;<span class="op" id="2988687">=</span>&nbsp;<span class="ident" id="2988689"><a href="/strconv/extfloat.go.html#2988232">integerDigits</a></span>&nbsp;<span class="op" id="2988703">+</span>&nbsp;<span class="ident" id="2988705"><a href="/strconv/extfloat.go.html#2987599">exp10</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988714"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988715">.</span><span class="ident" id="2988716">neg</span>&nbsp;<span class="op" id="2988720">=</span>&nbsp;<span class="ident" id="2988722"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2988723">.</span><span class="ident" id="2988724">neg</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988731">//&nbsp;Sometimes&nbsp;allowance&nbsp;is&nbsp;so&nbsp;large&nbsp;the&nbsp;last&nbsp;digit&nbsp;might&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988801">//&nbsp;decremented&nbsp;to&nbsp;get&nbsp;closer&nbsp;to&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988839">return</span>&nbsp;<span class="ident" id="2988846"><a href="/strconv/extfloat.go.html#2989959">adjustLastDigit</a></span><span class="op" id="2988861">(</span><span class="ident" id="2988862"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988863">,</span>&nbsp;<span class="ident" id="2988865"><a href="/strconv/extfloat.go.html#2988587">currentDiff</a></span><span class="op" id="2988876">,</span>&nbsp;<span class="ident" id="2988878"><a href="/strconv/extfloat.go.html#2988143">targetDiff</a></span><span class="op" id="2988888">,</span>&nbsp;<span class="ident" id="2988890"><a href="/strconv/extfloat.go.html#2988050">allowance</a></span><span class="op" id="2988899">,</span>&nbsp;<span class="ident" id="2988901"><a href="/strconv/extfloat.go.html#2988411">pow</a></span><span class="op" id="2988904">&lt;&lt;</span><span class="ident" id="2988906"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><span class="op" id="2988911">,</span>&nbsp;<span class="num" id="2988913">2</span><span class="op" id="2988914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988921">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988924"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988925">.</span><span class="ident" id="2988926">nd</span>&nbsp;<span class="op" id="2988929">=</span>&nbsp;<span class="ident" id="2988931"><a href="/strconv/extfloat.go.html#2988232">integerDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988946"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988947">.</span><span class="ident" id="2988948">dp</span>&nbsp;<span class="op" id="2988951">=</span>&nbsp;<span class="ident" id="2988953"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988954">.</span><span class="ident" id="2988955">nd</span>&nbsp;<span class="op" id="2988958">+</span>&nbsp;<span class="ident" id="2988960"><a href="/strconv/extfloat.go.html#2987599">exp10</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988967"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2988968">.</span><span class="ident" id="2988969">neg</span>&nbsp;<span class="op" id="2988973">=</span>&nbsp;<span class="ident" id="2988975"><a href="/strconv/extfloat.go.html#2986775">f</a></span><span class="op" id="2988976">.</span><span class="ident" id="2988977">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2988983">//&nbsp;Compute&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;At&nbsp;each&nbsp;step&nbsp;fraction&nbsp;does&nbsp;not</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2989057">//&nbsp;overflow.&nbsp;The&nbsp;choice&nbsp;of&nbsp;minExp&nbsp;implies&nbsp;that&nbsp;fraction&nbsp;is&nbsp;less&nbsp;than&nbsp;2^60.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989133">var</span>&nbsp;<span class="ident" id="2989137">digit</span>&nbsp;<span class="builtintype" id="2989143">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989148">multiplier</span>&nbsp;<span class="op" id="2989159">:=</span>&nbsp;<span class="ident" id="2989162">uint64</span><span class="op" id="2989168">(</span><span class="num" id="2989169">1</span><span class="op" id="2989170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989173">for</span>&nbsp;<span class="op" id="2989177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989181"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span>&nbsp;<span class="op" id="2989190">*=</span>&nbsp;<span class="num" id="2989193">10</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989198"><a href="/strconv/extfloat.go.html#2989148">multiplier</a></span>&nbsp;<span class="op" id="2989209">*=</span>&nbsp;<span class="num" id="2989212">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989217"><a href="/strconv/extfloat.go.html#2989137">digit</a></span>&nbsp;<span class="op" id="2989223">=</span>&nbsp;<span class="builtintype" id="2989225">int</span><span class="op" id="2989228">(</span><span class="ident" id="2989229"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span>&nbsp;<span class="op" id="2989238">&gt;&gt;</span>&nbsp;<span class="ident" id="2989241"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><span class="op" id="2989246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989250"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2989251">.</span><span class="ident" id="2989252">d</span><span class="op" id="2989253">[</span><span class="ident" id="2989254"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2989255">.</span><span class="ident" id="2989256">nd</span><span class="op" id="2989258">]</span>&nbsp;<span class="op" id="2989260">=</span>&nbsp;<span class="builtintype" id="2989262">byte</span><span class="op" id="2989266">(</span><span class="ident" id="2989267"><a href="/strconv/extfloat.go.html#2989137">digit</a></span>&nbsp;<span class="op" id="2989273">+</span>&nbsp;<span class="string" id="2989275">&#39;0&#39;</span><span class="op" id="2989278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989282"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2989283">.</span><span class="ident" id="2989284">nd</span><span class="op" id="2989286">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989291"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span>&nbsp;<span class="op" id="2989300">-=</span>&nbsp;<span class="ident" id="2989303">uint64</span><span class="op" id="2989309">(</span><span class="ident" id="2989310"><a href="/strconv/extfloat.go.html#2989137">digit</a></span><span class="op" id="2989315">)</span>&nbsp;<span class="op" id="2989317">&lt;&lt;</span>&nbsp;<span class="ident" id="2989320"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989328">if</span>&nbsp;<span class="ident" id="2989331"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span>&nbsp;<span class="op" id="2989340">&lt;</span>&nbsp;<span class="ident" id="2989342"><a href="/strconv/extfloat.go.html#2988050">allowance</a></span><span class="op" id="2989351">*</span><span class="ident" id="2989352"><a href="/strconv/extfloat.go.html#2989148">multiplier</a></span>&nbsp;<span class="op" id="2989363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2989368">//&nbsp;We&nbsp;are&nbsp;in&nbsp;the&nbsp;admissible&nbsp;range.&nbsp;Note&nbsp;that&nbsp;if&nbsp;allowance&nbsp;is&nbsp;about&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2989441">//&nbsp;overflow,&nbsp;that&nbsp;is,&nbsp;allowance&nbsp;&gt;&nbsp;2^64/10,&nbsp;the&nbsp;condition&nbsp;is&nbsp;automatically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2989518">//&nbsp;true&nbsp;due&nbsp;to&nbsp;the&nbsp;limited&nbsp;range&nbsp;of&nbsp;fraction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989567">return</span>&nbsp;<span class="ident" id="2989574"><a href="/strconv/extfloat.go.html#2989959">adjustLastDigit</a></span><span class="op" id="2989589">(</span><span class="ident" id="2989590"><a href="/strconv/extfloat.go.html#2986804">d</a></span><span class="op" id="2989591">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989597"><a href="/strconv/extfloat.go.html#2987931">fraction</a></span><span class="op" id="2989605">,</span>&nbsp;<span class="ident" id="2989607"><a href="/strconv/extfloat.go.html#2988143">targetDiff</a></span><span class="op" id="2989617">*</span><span class="ident" id="2989618"><a href="/strconv/extfloat.go.html#2989148">multiplier</a></span><span class="op" id="2989628">,</span>&nbsp;<span class="ident" id="2989630"><a href="/strconv/extfloat.go.html#2988050">allowance</a></span><span class="op" id="2989639">*</span><span class="ident" id="2989640"><a href="/strconv/extfloat.go.html#2989148">multiplier</a></span><span class="op" id="2989650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2989656">1</span><span class="op" id="2989657">&lt;&lt;</span><span class="ident" id="2989659"><a href="/strconv/extfloat.go.html#2987864">shift</a></span><span class="op" id="2989664">,</span>&nbsp;<span class="ident" id="2989666"><a href="/strconv/extfloat.go.html#2989148">multiplier</a></span><span class="op" id="2989676">*</span><span class="num" id="2989677">2</span><span class="op" id="2989678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989685">}</span><br>
<span class="lineno"></span><span class="op" id="2989687">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2989690">//&nbsp;adjustLastDigit&nbsp;modifies&nbsp;d&nbsp;=&nbsp;x-currentDiff*ε,&nbsp;to&nbsp;get&nbsp;closest&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2989758">//&nbsp;d&nbsp;=&nbsp;x-targetDiff*ε,&nbsp;without&nbsp;becoming&nbsp;smaller&nbsp;than&nbsp;x-maxDiff*ε.</span><br>
<span class="lineno"></span><span class="comment" id="2989826">//&nbsp;It&nbsp;assumes&nbsp;that&nbsp;a&nbsp;decimal&nbsp;digit&nbsp;is&nbsp;worth&nbsp;ulpDecimal*ε,&nbsp;and&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2989894">//&nbsp;all&nbsp;data&nbsp;is&nbsp;known&nbsp;with&nbsp;a&nbsp;error&nbsp;estimate&nbsp;of&nbsp;ulpBinary*ε.</span><br>
<span class="lineno">645</span><span class="keyword" id="2989954">func</span>&nbsp;<span class="ident" id="2989959">adjustLastDigit</span><span class="op" id="2989974">(</span><span class="ident" id="2989975">d</span>&nbsp;<span class="op" id="2989977">*</span><span class="ident" id="2989978"><a href="/strconv/ftoa.go.html#2999738">decimalSlice</a></span><span class="op" id="2989990">,</span>&nbsp;<span class="ident" id="2989992">currentDiff</span><span class="op" id="2990003">,</span>&nbsp;<span class="ident" id="2990005">targetDiff</span><span class="op" id="2990015">,</span>&nbsp;<span class="ident" id="2990017">maxDiff</span><span class="op" id="2990024">,</span>&nbsp;<span class="ident" id="2990026">ulpDecimal</span><span class="op" id="2990036">,</span>&nbsp;<span class="ident" id="2990038">ulpBinary</span>&nbsp;<span class="ident" id="2990048">uint64</span><span class="op" id="2990054">)</span>&nbsp;<span class="builtintype" id="2990056">bool</span>&nbsp;<span class="op" id="2990061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990064">if</span>&nbsp;<span class="ident" id="2990067"><a href="/strconv/extfloat.go.html#2990026">ulpDecimal</a></span>&nbsp;<span class="op" id="2990078">&lt;</span>&nbsp;<span class="num" id="2990080">2</span><span class="op" id="2990081">*</span><span class="ident" id="2990082"><a href="/strconv/extfloat.go.html#2990038">ulpBinary</a></span>&nbsp;<span class="op" id="2990092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2990096">//&nbsp;Approximation&nbsp;is&nbsp;too&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990128">return</span>&nbsp;<span class="builtintype" id="2990135">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2990142">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990145">for</span>&nbsp;<span class="ident" id="2990149"><a href="/strconv/extfloat.go.html#2989992">currentDiff</a></span><span class="op" id="2990160">+</span><span class="ident" id="2990161"><a href="/strconv/extfloat.go.html#2990026">ulpDecimal</a></span><span class="op" id="2990171">/</span><span class="num" id="2990172">2</span><span class="op" id="2990173">+</span><span class="ident" id="2990174"><a href="/strconv/extfloat.go.html#2990038">ulpBinary</a></span>&nbsp;<span class="op" id="2990184">&lt;</span>&nbsp;<span class="ident" id="2990186"><a href="/strconv/extfloat.go.html#2990005">targetDiff</a></span>&nbsp;<span class="op" id="2990197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990201"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990202">.</span><span class="ident" id="2990203">d</span><span class="op" id="2990204">[</span><span class="ident" id="2990205"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990206">.</span><span class="ident" id="2990207">nd</span><span class="op" id="2990209">-</span><span class="num" id="2990210">1</span><span class="op" id="2990211">]</span><span class="op" id="2990212">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990217"><a href="/strconv/extfloat.go.html#2989992">currentDiff</a></span>&nbsp;<span class="op" id="2990229">+=</span>&nbsp;<span class="ident" id="2990232"><a href="/strconv/extfloat.go.html#2990026">ulpDecimal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2990244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990247">if</span>&nbsp;<span class="ident" id="2990250"><a href="/strconv/extfloat.go.html#2989992">currentDiff</a></span><span class="op" id="2990261">+</span><span class="ident" id="2990262"><a href="/strconv/extfloat.go.html#2990026">ulpDecimal</a></span>&nbsp;<span class="op" id="2990273">&lt;=</span>&nbsp;<span class="ident" id="2990276"><a href="/strconv/extfloat.go.html#2990005">targetDiff</a></span><span class="op" id="2990286">+</span><span class="ident" id="2990287"><a href="/strconv/extfloat.go.html#2990026">ulpDecimal</a></span><span class="op" id="2990297">/</span><span class="num" id="2990298">2</span><span class="op" id="2990299">+</span><span class="ident" id="2990300"><a href="/strconv/extfloat.go.html#2990038">ulpBinary</a></span>&nbsp;<span class="op" id="2990310">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2990314">//&nbsp;we&nbsp;have&nbsp;two&nbsp;choices,&nbsp;and&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;to&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990367">return</span>&nbsp;<span class="builtintype" id="2990374">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2990381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990384">if</span>&nbsp;<span class="ident" id="2990387"><a href="/strconv/extfloat.go.html#2989992">currentDiff</a></span>&nbsp;<span class="op" id="2990399">&lt;</span>&nbsp;<span class="ident" id="2990401"><a href="/strconv/extfloat.go.html#2990038">ulpBinary</a></span>&nbsp;<span class="op" id="2990411">||</span>&nbsp;<span class="ident" id="2990414"><a href="/strconv/extfloat.go.html#2989992">currentDiff</a></span>&nbsp;<span class="op" id="2990426">&gt;</span>&nbsp;<span class="ident" id="2990428"><a href="/strconv/extfloat.go.html#2990017">maxDiff</a></span><span class="op" id="2990435">-</span><span class="ident" id="2990436"><a href="/strconv/extfloat.go.html#2990038">ulpBinary</a></span>&nbsp;<span class="op" id="2990446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2990450">//&nbsp;we&nbsp;went&nbsp;too&nbsp;far</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990471">return</span>&nbsp;<span class="builtintype" id="2990478">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2990485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990488">if</span>&nbsp;<span class="ident" id="2990491"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990492">.</span><span class="ident" id="2990493">nd</span>&nbsp;<span class="op" id="2990496">==</span>&nbsp;<span class="num" id="2990499">1</span>&nbsp;<span class="op" id="2990501">&amp;&amp;</span>&nbsp;<span class="ident" id="2990504"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990505">.</span><span class="ident" id="2990506">d</span><span class="op" id="2990507">[</span><span class="num" id="2990508">0</span><span class="op" id="2990509">]</span>&nbsp;<span class="op" id="2990511">==</span>&nbsp;<span class="string" id="2990514">&#39;0&#39;</span>&nbsp;<span class="op" id="2990518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2990522">//&nbsp;the&nbsp;number&nbsp;has&nbsp;actually&nbsp;reached&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990565"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990566">.</span><span class="ident" id="2990567">nd</span>&nbsp;<span class="op" id="2990570">=</span>&nbsp;<span class="num" id="2990572">0</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990576"><a href="/strconv/extfloat.go.html#2989975">d</a></span><span class="op" id="2990577">.</span><span class="ident" id="2990578">dp</span>&nbsp;<span class="op" id="2990581">=</span>&nbsp;<span class="num" id="2990583">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2990586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2990589">return</span>&nbsp;<span class="builtintype" id="2990596">true</span><br>
<span class="lineno"></span><span class="op" id="2990601">}</span>
</div>
</body>
</html>
