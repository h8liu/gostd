<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3681334">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3681389">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3681443">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3681494">package</span>&nbsp;<span class="ident" id="3681502">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3681508">import</span>&nbsp;<span class="op" id="3681515">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3681518">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3681528">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3681539">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3681554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3681557">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3681618">var</span>&nbsp;<span class="ident" id="3681622">ErrBadPattern</span>&nbsp;<span class="op" id="3681636">=</span>&nbsp;<span class="ident" id="3681638">errors</span><span class="op" id="3681644">.</span><span class="ident" id="3681645">New</span><span class="op" id="3681648">(</span><span class="string" id="3681649">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3681674">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3681677">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3681744">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3681770">//</span><br>
<span class="lineno"></span><span class="comment" id="3681773">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3681785">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3681798">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="3681807">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3681864">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3681915">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3681955">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3682007">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3682070">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3682106">//</span><br>
<span class="lineno"></span><span class="comment" id="3682109">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3682129">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3682187">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3682223">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3682277">//</span><br>
<span class="lineno"></span><span class="comment" id="3682280">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3682350">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3682417">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3682434">//</span><br>
<span class="lineno"></span><span class="keyword" id="3682437">func</span>&nbsp;<span class="ident" id="3682442">Match</span><span class="op" id="3682447">(</span><span class="ident" id="3682448">pattern</span><span class="op" id="3682455">,</span>&nbsp;<span class="ident" id="3682457">name</span>&nbsp;<span class="builtintype" id="3682462">string</span><span class="op" id="3682468">)</span>&nbsp;<span class="op" id="3682470">(</span><span class="ident" id="3682471">matched</span>&nbsp;<span class="builtintype" id="3682479">bool</span><span class="op" id="3682483">,</span>&nbsp;<span class="ident" id="3682485">err</span>&nbsp;<span class="builtintype" id="3682489">error</span><span class="op" id="3682494">)</span>&nbsp;<span class="op" id="3682496">{</span><br>
<span class="lineno"></span><span class="ident" id="3682498">Pattern</span><span class="op" id="3682505">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682508">for</span>&nbsp;<span class="builtinfunc" id="3682512">len</span><span class="op" id="3682515">(</span><span class="ident" id="3682516">pattern</span><span class="op" id="3682523">)</span>&nbsp;<span class="op" id="3682525">&gt;</span>&nbsp;<span class="num" id="3682527">0</span>&nbsp;<span class="op" id="3682529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682533">var</span>&nbsp;<span class="ident" id="3682537">star</span>&nbsp;<span class="builtintype" id="3682542">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682549">var</span>&nbsp;<span class="ident" id="3682553">chunk</span>&nbsp;<span class="builtintype" id="3682559">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3682568">star</span><span class="op" id="3682572">,</span>&nbsp;<span class="ident" id="3682574">chunk</span><span class="op" id="3682579">,</span>&nbsp;<span class="ident" id="3682581">pattern</span>&nbsp;<span class="op" id="3682589">=</span>&nbsp;<span class="ident" id="3682591">scanChunk</span><span class="op" id="3682600">(</span><span class="ident" id="3682601">pattern</span><span class="op" id="3682608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682612">if</span>&nbsp;<span class="ident" id="3682615">star</span>&nbsp;<span class="op" id="3682620">&amp;&amp;</span>&nbsp;<span class="ident" id="3682623">chunk</span>&nbsp;<span class="op" id="3682629">==</span>&nbsp;<span class="string" id="3682632">&#34;&#34;</span>&nbsp;<span class="op" id="3682635">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3682640">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682699">return</span>&nbsp;<span class="ident" id="3682706">strings</span><span class="op" id="3682713">.</span><span class="ident" id="3682714">Index</span><span class="op" id="3682719">(</span><span class="ident" id="3682720">name</span><span class="op" id="3682724">,</span>&nbsp;<span class="string" id="3682726">&#34;/&#34;</span><span class="op" id="3682729">)</span>&nbsp;<span class="op" id="3682731">&lt;</span>&nbsp;<span class="num" id="3682733">0</span><span class="op" id="3682734">,</span>&nbsp;<span class="ident" id="3682736">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3682742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3682746">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3682787">t</span><span class="op" id="3682788">,</span>&nbsp;<span class="ident" id="3682790">ok</span><span class="op" id="3682792">,</span>&nbsp;<span class="ident" id="3682794">err</span>&nbsp;<span class="op" id="3682798">:=</span>&nbsp;<span class="ident" id="3682801">matchChunk</span><span class="op" id="3682811">(</span><span class="ident" id="3682812">chunk</span><span class="op" id="3682817">,</span>&nbsp;<span class="ident" id="3682819">name</span><span class="op" id="3682823">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3682827">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3682892">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3682962">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3682982">if</span>&nbsp;<span class="ident" id="3682985">ok</span>&nbsp;<span class="op" id="3682988">&amp;&amp;</span>&nbsp;<span class="op" id="3682991">(</span><span class="builtinfunc" id="3682992">len</span><span class="op" id="3682995">(</span><span class="ident" id="3682996">t</span><span class="op" id="3682997">)</span>&nbsp;<span class="op" id="3682999">==</span>&nbsp;<span class="num" id="3683002">0</span>&nbsp;<span class="op" id="3683004">||</span>&nbsp;<span class="builtinfunc" id="3683007">len</span><span class="op" id="3683010">(</span><span class="ident" id="3683011">pattern</span><span class="op" id="3683018">)</span>&nbsp;<span class="op" id="3683020">&gt;</span>&nbsp;<span class="num" id="3683022">0</span><span class="op" id="3683023">)</span>&nbsp;<span class="op" id="3683025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683030">name</span>&nbsp;<span class="op" id="3683035">=</span>&nbsp;<span class="ident" id="3683037">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683042">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683057">if</span>&nbsp;<span class="ident" id="3683060">err</span>&nbsp;<span class="op" id="3683064">!=</span>&nbsp;<span class="ident" id="3683067">nil</span>&nbsp;<span class="op" id="3683071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683076">return</span>&nbsp;<span class="builtintype" id="3683083">false</span><span class="op" id="3683088">,</span>&nbsp;<span class="ident" id="3683090">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683096">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683100">if</span>&nbsp;<span class="ident" id="3683103">star</span>&nbsp;<span class="op" id="3683108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3683113">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3683154">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683175">for</span>&nbsp;<span class="ident" id="3683179">i</span>&nbsp;<span class="op" id="3683181">:=</span>&nbsp;<span class="num" id="3683184">0</span><span class="op" id="3683185">;</span>&nbsp;<span class="ident" id="3683187">i</span>&nbsp;<span class="op" id="3683189">&lt;</span>&nbsp;<span class="builtinfunc" id="3683191">len</span><span class="op" id="3683194">(</span><span class="ident" id="3683195">name</span><span class="op" id="3683199">)</span>&nbsp;<span class="op" id="3683201">&amp;&amp;</span>&nbsp;<span class="ident" id="3683204">name</span><span class="op" id="3683208">[</span><span class="ident" id="3683209">i</span><span class="op" id="3683210">]</span>&nbsp;<span class="op" id="3683212">!=</span>&nbsp;<span class="string" id="3683215">&#39;/&#39;</span><span class="op" id="3683218">;</span>&nbsp;<span class="ident" id="3683220">i</span><span class="op" id="3683221">++</span>&nbsp;<span class="op" id="3683224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683230">t</span><span class="op" id="3683231">,</span>&nbsp;<span class="ident" id="3683233">ok</span><span class="op" id="3683235">,</span>&nbsp;<span class="ident" id="3683237">err</span>&nbsp;<span class="op" id="3683241">:=</span>&nbsp;<span class="ident" id="3683244">matchChunk</span><span class="op" id="3683254">(</span><span class="ident" id="3683255">chunk</span><span class="op" id="3683260">,</span>&nbsp;<span class="ident" id="3683262">name</span><span class="op" id="3683266">[</span><span class="ident" id="3683267">i</span><span class="op" id="3683268">+</span><span class="num" id="3683269">1</span><span class="op" id="3683270">:</span><span class="op" id="3683271">]</span><span class="op" id="3683272">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683278">if</span>&nbsp;<span class="ident" id="3683281">ok</span>&nbsp;<span class="op" id="3683284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3683291">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683356">if</span>&nbsp;<span class="builtinfunc" id="3683359">len</span><span class="op" id="3683362">(</span><span class="ident" id="3683363">pattern</span><span class="op" id="3683370">)</span>&nbsp;<span class="op" id="3683372">==</span>&nbsp;<span class="num" id="3683375">0</span>&nbsp;<span class="op" id="3683377">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3683380">len</span><span class="op" id="3683383">(</span><span class="ident" id="3683384">t</span><span class="op" id="3683385">)</span>&nbsp;<span class="op" id="3683387">&gt;</span>&nbsp;<span class="num" id="3683389">0</span>&nbsp;<span class="op" id="3683391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683399">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683413">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683420">name</span>&nbsp;<span class="op" id="3683425">=</span>&nbsp;<span class="ident" id="3683427">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683434">continue</span>&nbsp;<span class="ident" id="3683443">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683461">if</span>&nbsp;<span class="ident" id="3683464">err</span>&nbsp;<span class="op" id="3683468">!=</span>&nbsp;<span class="ident" id="3683471">nil</span>&nbsp;<span class="op" id="3683475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683482">return</span>&nbsp;<span class="builtintype" id="3683489">false</span><span class="op" id="3683494">,</span>&nbsp;<span class="ident" id="3683496">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683517">return</span>&nbsp;<span class="builtintype" id="3683524">false</span><span class="op" id="3683529">,</span>&nbsp;<span class="ident" id="3683531">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683536">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683539">return</span>&nbsp;<span class="builtinfunc" id="3683546">len</span><span class="op" id="3683549">(</span><span class="ident" id="3683550">name</span><span class="op" id="3683554">)</span>&nbsp;<span class="op" id="3683556">==</span>&nbsp;<span class="num" id="3683559">0</span><span class="op" id="3683560">,</span>&nbsp;<span class="ident" id="3683562">nil</span><br>
<span class="lineno"></span><span class="op" id="3683566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3683569">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3683643">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3683675">func</span>&nbsp;<span class="ident" id="3683680">scanChunk</span><span class="op" id="3683689">(</span><span class="ident" id="3683690">pattern</span>&nbsp;<span class="builtintype" id="3683698">string</span><span class="op" id="3683704">)</span>&nbsp;<span class="op" id="3683706">(</span><span class="ident" id="3683707">star</span>&nbsp;<span class="builtintype" id="3683712">bool</span><span class="op" id="3683716">,</span>&nbsp;<span class="ident" id="3683718">chunk</span><span class="op" id="3683723">,</span>&nbsp;<span class="ident" id="3683725">rest</span>&nbsp;<span class="builtintype" id="3683730">string</span><span class="op" id="3683736">)</span>&nbsp;<span class="op" id="3683738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683741">for</span>&nbsp;<span class="builtinfunc" id="3683745">len</span><span class="op" id="3683748">(</span><span class="ident" id="3683749">pattern</span><span class="op" id="3683756">)</span>&nbsp;<span class="op" id="3683758">&gt;</span>&nbsp;<span class="num" id="3683760">0</span>&nbsp;<span class="op" id="3683762">&amp;&amp;</span>&nbsp;<span class="ident" id="3683765">pattern</span><span class="op" id="3683772">[</span><span class="num" id="3683773">0</span><span class="op" id="3683774">]</span>&nbsp;<span class="op" id="3683776">==</span>&nbsp;<span class="string" id="3683779">&#39;*&#39;</span>&nbsp;<span class="op" id="3683783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683787">pattern</span>&nbsp;<span class="op" id="3683795">=</span>&nbsp;<span class="ident" id="3683797">pattern</span><span class="op" id="3683804">[</span><span class="num" id="3683805">1</span><span class="op" id="3683806">:</span><span class="op" id="3683807">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683811">star</span>&nbsp;<span class="op" id="3683816">=</span>&nbsp;<span class="builtintype" id="3683818">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3683824">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3683827">inrange</span>&nbsp;<span class="op" id="3683835">:=</span>&nbsp;<span class="builtintype" id="3683838">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683845">var</span>&nbsp;<span class="ident" id="3683849">i</span>&nbsp;<span class="builtintype" id="3683851">int</span><br>
<span class="lineno"></span><span class="ident" id="3683855">Scan</span><span class="op" id="3683859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683862">for</span>&nbsp;<span class="ident" id="3683866">i</span>&nbsp;<span class="op" id="3683868">=</span>&nbsp;<span class="num" id="3683870">0</span><span class="op" id="3683871">;</span>&nbsp;<span class="ident" id="3683873">i</span>&nbsp;<span class="op" id="3683875">&lt;</span>&nbsp;<span class="builtinfunc" id="3683877">len</span><span class="op" id="3683880">(</span><span class="ident" id="3683881">pattern</span><span class="op" id="3683888">)</span><span class="op" id="3683889">;</span>&nbsp;<span class="ident" id="3683891">i</span><span class="op" id="3683892">++</span>&nbsp;<span class="op" id="3683895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683899">switch</span>&nbsp;<span class="ident" id="3683906">pattern</span><span class="op" id="3683913">[</span><span class="ident" id="3683914">i</span><span class="op" id="3683915">]</span>&nbsp;<span class="op" id="3683917">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683921">case</span>&nbsp;<span class="string" id="3683926">&#39;\\&#39;</span><span class="op" id="3683930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3683935">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683989">if</span>&nbsp;<span class="ident" id="3683992">i</span><span class="op" id="3683993">+</span><span class="num" id="3683994">1</span>&nbsp;<span class="op" id="3683996">&lt;</span>&nbsp;<span class="builtinfunc" id="3683998">len</span><span class="op" id="3684001">(</span><span class="ident" id="3684002">pattern</span><span class="op" id="3684009">)</span>&nbsp;<span class="op" id="3684011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684017">i</span><span class="op" id="3684018">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684024">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684028">case</span>&nbsp;<span class="string" id="3684033">&#39;[&#39;</span><span class="op" id="3684036">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684041">inrange</span>&nbsp;<span class="op" id="3684049">=</span>&nbsp;<span class="builtintype" id="3684051">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684058">case</span>&nbsp;<span class="string" id="3684063">&#39;]&#39;</span><span class="op" id="3684066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684071">inrange</span>&nbsp;<span class="op" id="3684079">=</span>&nbsp;<span class="builtintype" id="3684081">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684089">case</span>&nbsp;<span class="string" id="3684094">&#39;*&#39;</span><span class="op" id="3684097">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684102">if</span>&nbsp;<span class="op" id="3684105">!</span><span class="ident" id="3684106">inrange</span>&nbsp;<span class="op" id="3684114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684120">break</span>&nbsp;<span class="ident" id="3684126">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684141">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684144">return</span>&nbsp;<span class="ident" id="3684151">star</span><span class="op" id="3684155">,</span>&nbsp;<span class="ident" id="3684157">pattern</span><span class="op" id="3684164">[</span><span class="num" id="3684165">0</span><span class="op" id="3684166">:</span><span class="ident" id="3684167">i</span><span class="op" id="3684168">]</span><span class="op" id="3684169">,</span>&nbsp;<span class="ident" id="3684171">pattern</span><span class="op" id="3684178">[</span><span class="ident" id="3684179">i</span><span class="op" id="3684180">:</span><span class="op" id="3684181">]</span><br>
<span class="lineno"></span><span class="op" id="3684183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3684186">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3684249">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3684308">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3684383">func</span>&nbsp;<span class="ident" id="3684388">matchChunk</span><span class="op" id="3684398">(</span><span class="ident" id="3684399">chunk</span><span class="op" id="3684404">,</span>&nbsp;<span class="ident" id="3684406">s</span>&nbsp;<span class="builtintype" id="3684408">string</span><span class="op" id="3684414">)</span>&nbsp;<span class="op" id="3684416">(</span><span class="ident" id="3684417">rest</span>&nbsp;<span class="builtintype" id="3684422">string</span><span class="op" id="3684428">,</span>&nbsp;<span class="ident" id="3684430">ok</span>&nbsp;<span class="builtintype" id="3684433">bool</span><span class="op" id="3684437">,</span>&nbsp;<span class="ident" id="3684439">err</span>&nbsp;<span class="builtintype" id="3684443">error</span><span class="op" id="3684448">)</span>&nbsp;<span class="op" id="3684450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684453">for</span>&nbsp;<span class="builtinfunc" id="3684457">len</span><span class="op" id="3684460">(</span><span class="ident" id="3684461">chunk</span><span class="op" id="3684466">)</span>&nbsp;<span class="op" id="3684468">&gt;</span>&nbsp;<span class="num" id="3684470">0</span>&nbsp;<span class="op" id="3684472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684476">if</span>&nbsp;<span class="builtinfunc" id="3684479">len</span><span class="op" id="3684482">(</span><span class="ident" id="3684483">s</span><span class="op" id="3684484">)</span>&nbsp;<span class="op" id="3684486">==</span>&nbsp;<span class="num" id="3684489">0</span>&nbsp;<span class="op" id="3684491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684496">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684509">switch</span>&nbsp;<span class="ident" id="3684516">chunk</span><span class="op" id="3684521">[</span><span class="num" id="3684522">0</span><span class="op" id="3684523">]</span>&nbsp;<span class="op" id="3684525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684529">case</span>&nbsp;<span class="string" id="3684534">&#39;[&#39;</span><span class="op" id="3684537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3684542">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684564">r</span><span class="op" id="3684565">,</span>&nbsp;<span class="ident" id="3684567">n</span>&nbsp;<span class="op" id="3684569">:=</span>&nbsp;<span class="ident" id="3684572">utf8</span><span class="op" id="3684576">.</span><span class="ident" id="3684577">DecodeRuneInString</span><span class="op" id="3684595">(</span><span class="ident" id="3684596">s</span><span class="op" id="3684597">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684602">s</span>&nbsp;<span class="op" id="3684604">=</span>&nbsp;<span class="ident" id="3684606">s</span><span class="op" id="3684607">[</span><span class="ident" id="3684608">n</span><span class="op" id="3684609">:</span><span class="op" id="3684610">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684615">chunk</span>&nbsp;<span class="op" id="3684621">=</span>&nbsp;<span class="ident" id="3684623">chunk</span><span class="op" id="3684628">[</span><span class="num" id="3684629">1</span><span class="op" id="3684630">:</span><span class="op" id="3684631">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3684636">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684659">notNegated</span>&nbsp;<span class="op" id="3684670">:=</span>&nbsp;<span class="builtintype" id="3684673">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684681">if</span>&nbsp;<span class="builtinfunc" id="3684684">len</span><span class="op" id="3684687">(</span><span class="ident" id="3684688">chunk</span><span class="op" id="3684693">)</span>&nbsp;<span class="op" id="3684695">&gt;</span>&nbsp;<span class="num" id="3684697">0</span>&nbsp;<span class="op" id="3684699">&amp;&amp;</span>&nbsp;<span class="ident" id="3684702">chunk</span><span class="op" id="3684707">[</span><span class="num" id="3684708">0</span><span class="op" id="3684709">]</span>&nbsp;<span class="op" id="3684711">==</span>&nbsp;<span class="string" id="3684714">&#39;^&#39;</span>&nbsp;<span class="op" id="3684718">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684724">notNegated</span>&nbsp;<span class="op" id="3684735">=</span>&nbsp;<span class="builtintype" id="3684737">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684747">chunk</span>&nbsp;<span class="op" id="3684753">=</span>&nbsp;<span class="ident" id="3684755">chunk</span><span class="op" id="3684760">[</span><span class="num" id="3684761">1</span><span class="op" id="3684762">:</span><span class="op" id="3684763">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3684773">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684796">match</span>&nbsp;<span class="op" id="3684802">:=</span>&nbsp;<span class="builtintype" id="3684805">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684814">nrange</span>&nbsp;<span class="op" id="3684821">:=</span>&nbsp;<span class="num" id="3684824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684829">for</span>&nbsp;<span class="op" id="3684833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684839">if</span>&nbsp;<span class="builtinfunc" id="3684842">len</span><span class="op" id="3684845">(</span><span class="ident" id="3684846">chunk</span><span class="op" id="3684851">)</span>&nbsp;<span class="op" id="3684853">&gt;</span>&nbsp;<span class="num" id="3684855">0</span>&nbsp;<span class="op" id="3684857">&amp;&amp;</span>&nbsp;<span class="ident" id="3684860">chunk</span><span class="op" id="3684865">[</span><span class="num" id="3684866">0</span><span class="op" id="3684867">]</span>&nbsp;<span class="op" id="3684869">==</span>&nbsp;<span class="string" id="3684872">&#39;]&#39;</span>&nbsp;<span class="op" id="3684876">&amp;&amp;</span>&nbsp;<span class="ident" id="3684879">nrange</span>&nbsp;<span class="op" id="3684886">&gt;</span>&nbsp;<span class="num" id="3684888">0</span>&nbsp;<span class="op" id="3684890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3684897">chunk</span>&nbsp;<span class="op" id="3684903">=</span>&nbsp;<span class="ident" id="3684905">chunk</span><span class="op" id="3684910">[</span><span class="num" id="3684911">1</span><span class="op" id="3684912">:</span><span class="op" id="3684913">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684920">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3684930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684936">var</span>&nbsp;<span class="ident" id="3684940">lo</span><span class="op" id="3684942">,</span>&nbsp;<span class="ident" id="3684944">hi</span>&nbsp;<span class="builtintype" id="3684947">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3684956">if</span>&nbsp;<span class="ident" id="3684959">lo</span><span class="op" id="3684961">,</span>&nbsp;<span class="ident" id="3684963">chunk</span><span class="op" id="3684968">,</span>&nbsp;<span class="ident" id="3684970">err</span>&nbsp;<span class="op" id="3684974">=</span>&nbsp;<span class="ident" id="3684976">getEsc</span><span class="op" id="3684982">(</span><span class="ident" id="3684983">chunk</span><span class="op" id="3684988">)</span><span class="op" id="3684989">;</span>&nbsp;<span class="ident" id="3684991">err</span>&nbsp;<span class="op" id="3684995">!=</span>&nbsp;<span class="ident" id="3684998">nil</span>&nbsp;<span class="op" id="3685002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685009">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685020">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685026">hi</span>&nbsp;<span class="op" id="3685029">=</span>&nbsp;<span class="ident" id="3685031">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685038">if</span>&nbsp;<span class="ident" id="3685041">chunk</span><span class="op" id="3685046">[</span><span class="num" id="3685047">0</span><span class="op" id="3685048">]</span>&nbsp;<span class="op" id="3685050">==</span>&nbsp;<span class="string" id="3685053">&#39;-&#39;</span>&nbsp;<span class="op" id="3685057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685064">if</span>&nbsp;<span class="ident" id="3685067">hi</span><span class="op" id="3685069">,</span>&nbsp;<span class="ident" id="3685071">chunk</span><span class="op" id="3685076">,</span>&nbsp;<span class="ident" id="3685078">err</span>&nbsp;<span class="op" id="3685082">=</span>&nbsp;<span class="ident" id="3685084">getEsc</span><span class="op" id="3685090">(</span><span class="ident" id="3685091">chunk</span><span class="op" id="3685096">[</span><span class="num" id="3685097">1</span><span class="op" id="3685098">:</span><span class="op" id="3685099">]</span><span class="op" id="3685100">)</span><span class="op" id="3685101">;</span>&nbsp;<span class="ident" id="3685103">err</span>&nbsp;<span class="op" id="3685107">!=</span>&nbsp;<span class="ident" id="3685110">nil</span>&nbsp;<span class="op" id="3685114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685122">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685134">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685146">if</span>&nbsp;<span class="ident" id="3685149">lo</span>&nbsp;<span class="op" id="3685152">&lt;=</span>&nbsp;<span class="ident" id="3685155">r</span>&nbsp;<span class="op" id="3685157">&amp;&amp;</span>&nbsp;<span class="ident" id="3685160">r</span>&nbsp;<span class="op" id="3685162">&lt;=</span>&nbsp;<span class="ident" id="3685165">hi</span>&nbsp;<span class="op" id="3685168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685175">match</span>&nbsp;<span class="op" id="3685181">=</span>&nbsp;<span class="builtintype" id="3685183">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685198">nrange</span><span class="op" id="3685204">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685215">if</span>&nbsp;<span class="ident" id="3685218">match</span>&nbsp;<span class="op" id="3685224">!=</span>&nbsp;<span class="ident" id="3685227">notNegated</span>&nbsp;<span class="op" id="3685238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685244">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685259">case</span>&nbsp;<span class="string" id="3685264">&#39;?&#39;</span><span class="op" id="3685267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685272">if</span>&nbsp;<span class="ident" id="3685275">s</span><span class="op" id="3685276">[</span><span class="num" id="3685277">0</span><span class="op" id="3685278">]</span>&nbsp;<span class="op" id="3685280">==</span>&nbsp;<span class="string" id="3685283">&#39;/&#39;</span>&nbsp;<span class="op" id="3685287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685293">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685308">_</span><span class="op" id="3685309">,</span>&nbsp;<span class="ident" id="3685311">n</span>&nbsp;<span class="op" id="3685313">:=</span>&nbsp;<span class="ident" id="3685316">utf8</span><span class="op" id="3685320">.</span><span class="ident" id="3685321">DecodeRuneInString</span><span class="op" id="3685339">(</span><span class="ident" id="3685340">s</span><span class="op" id="3685341">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685346">s</span>&nbsp;<span class="op" id="3685348">=</span>&nbsp;<span class="ident" id="3685350">s</span><span class="op" id="3685351">[</span><span class="ident" id="3685352">n</span><span class="op" id="3685353">:</span><span class="op" id="3685354">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685359">chunk</span>&nbsp;<span class="op" id="3685365">=</span>&nbsp;<span class="ident" id="3685367">chunk</span><span class="op" id="3685372">[</span><span class="num" id="3685373">1</span><span class="op" id="3685374">:</span><span class="op" id="3685375">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685380">case</span>&nbsp;<span class="string" id="3685385">&#39;\\&#39;</span><span class="op" id="3685389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685394">chunk</span>&nbsp;<span class="op" id="3685400">=</span>&nbsp;<span class="ident" id="3685402">chunk</span><span class="op" id="3685407">[</span><span class="num" id="3685408">1</span><span class="op" id="3685409">:</span><span class="op" id="3685410">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685415">if</span>&nbsp;<span class="builtinfunc" id="3685418">len</span><span class="op" id="3685421">(</span><span class="ident" id="3685422">chunk</span><span class="op" id="3685427">)</span>&nbsp;<span class="op" id="3685429">==</span>&nbsp;<span class="num" id="3685432">0</span>&nbsp;<span class="op" id="3685434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685440">err</span>&nbsp;<span class="op" id="3685444">=</span>&nbsp;<span class="ident" id="3685446">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685464">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685479">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685494">default</span><span class="op" id="3685501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685506">if</span>&nbsp;<span class="ident" id="3685509">chunk</span><span class="op" id="3685514">[</span><span class="num" id="3685515">0</span><span class="op" id="3685516">]</span>&nbsp;<span class="op" id="3685518">!=</span>&nbsp;<span class="ident" id="3685521">s</span><span class="op" id="3685522">[</span><span class="num" id="3685523">0</span><span class="op" id="3685524">]</span>&nbsp;<span class="op" id="3685526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685532">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685542">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685547">s</span>&nbsp;<span class="op" id="3685549">=</span>&nbsp;<span class="ident" id="3685551">s</span><span class="op" id="3685552">[</span><span class="num" id="3685553">1</span><span class="op" id="3685554">:</span><span class="op" id="3685555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685560">chunk</span>&nbsp;<span class="op" id="3685566">=</span>&nbsp;<span class="ident" id="3685568">chunk</span><span class="op" id="3685573">[</span><span class="num" id="3685574">1</span><span class="op" id="3685575">:</span><span class="op" id="3685576">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685586">return</span>&nbsp;<span class="ident" id="3685593">s</span><span class="op" id="3685594">,</span>&nbsp;<span class="builtintype" id="3685596">true</span><span class="op" id="3685600">,</span>&nbsp;<span class="ident" id="3685602">nil</span><br>
<span class="lineno">185</span><span class="op" id="3685606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3685609">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3685688">func</span>&nbsp;<span class="ident" id="3685693">getEsc</span><span class="op" id="3685699">(</span><span class="ident" id="3685700">chunk</span>&nbsp;<span class="builtintype" id="3685706">string</span><span class="op" id="3685712">)</span>&nbsp;<span class="op" id="3685714">(</span><span class="ident" id="3685715">r</span>&nbsp;<span class="builtintype" id="3685717">rune</span><span class="op" id="3685721">,</span>&nbsp;<span class="ident" id="3685723">nchunk</span>&nbsp;<span class="builtintype" id="3685730">string</span><span class="op" id="3685736">,</span>&nbsp;<span class="ident" id="3685738">err</span>&nbsp;<span class="builtintype" id="3685742">error</span><span class="op" id="3685747">)</span>&nbsp;<span class="op" id="3685749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685752">if</span>&nbsp;<span class="builtinfunc" id="3685755">len</span><span class="op" id="3685758">(</span><span class="ident" id="3685759">chunk</span><span class="op" id="3685764">)</span>&nbsp;<span class="op" id="3685766">==</span>&nbsp;<span class="num" id="3685769">0</span>&nbsp;<span class="op" id="3685771">||</span>&nbsp;<span class="ident" id="3685774">chunk</span><span class="op" id="3685779">[</span><span class="num" id="3685780">0</span><span class="op" id="3685781">]</span>&nbsp;<span class="op" id="3685783">==</span>&nbsp;<span class="string" id="3685786">&#39;-&#39;</span>&nbsp;<span class="op" id="3685790">||</span>&nbsp;<span class="ident" id="3685793">chunk</span><span class="op" id="3685798">[</span><span class="num" id="3685799">0</span><span class="op" id="3685800">]</span>&nbsp;<span class="op" id="3685802">==</span>&nbsp;<span class="string" id="3685805">&#39;]&#39;</span>&nbsp;<span class="op" id="3685809">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685813">err</span>&nbsp;<span class="op" id="3685817">=</span>&nbsp;<span class="ident" id="3685819">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685835">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685846">if</span>&nbsp;<span class="ident" id="3685849">chunk</span><span class="op" id="3685854">[</span><span class="num" id="3685855">0</span><span class="op" id="3685856">]</span>&nbsp;<span class="op" id="3685858">==</span>&nbsp;<span class="string" id="3685861">&#39;\\&#39;</span>&nbsp;<span class="op" id="3685866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685870">chunk</span>&nbsp;<span class="op" id="3685876">=</span>&nbsp;<span class="ident" id="3685878">chunk</span><span class="op" id="3685883">[</span><span class="num" id="3685884">1</span><span class="op" id="3685885">:</span><span class="op" id="3685886">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685890">if</span>&nbsp;<span class="builtinfunc" id="3685893">len</span><span class="op" id="3685896">(</span><span class="ident" id="3685897">chunk</span><span class="op" id="3685902">)</span>&nbsp;<span class="op" id="3685904">==</span>&nbsp;<span class="num" id="3685907">0</span>&nbsp;<span class="op" id="3685909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685914">err</span>&nbsp;<span class="op" id="3685918">=</span>&nbsp;<span class="ident" id="3685920">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685937">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3685949">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3685952">r</span><span class="op" id="3685953">,</span>&nbsp;<span class="ident" id="3685955">n</span>&nbsp;<span class="op" id="3685957">:=</span>&nbsp;<span class="ident" id="3685960">utf8</span><span class="op" id="3685964">.</span><span class="ident" id="3685965">DecodeRuneInString</span><span class="op" id="3685983">(</span><span class="ident" id="3685984">chunk</span><span class="op" id="3685989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3685992">if</span>&nbsp;<span class="ident" id="3685995">r</span>&nbsp;<span class="op" id="3685997">==</span>&nbsp;<span class="ident" id="3686000">utf8</span><span class="op" id="3686004">.</span><span class="ident" id="3686005">RuneError</span>&nbsp;<span class="op" id="3686015">&amp;&amp;</span>&nbsp;<span class="ident" id="3686018">n</span>&nbsp;<span class="op" id="3686020">==</span>&nbsp;<span class="num" id="3686023">1</span>&nbsp;<span class="op" id="3686025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686029">err</span>&nbsp;<span class="op" id="3686033">=</span>&nbsp;<span class="ident" id="3686035">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686053">nchunk</span>&nbsp;<span class="op" id="3686060">=</span>&nbsp;<span class="ident" id="3686062">chunk</span><span class="op" id="3686067">[</span><span class="ident" id="3686068">n</span><span class="op" id="3686069">:</span><span class="op" id="3686070">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686073">if</span>&nbsp;<span class="builtinfunc" id="3686076">len</span><span class="op" id="3686079">(</span><span class="ident" id="3686080">nchunk</span><span class="op" id="3686086">)</span>&nbsp;<span class="op" id="3686088">==</span>&nbsp;<span class="num" id="3686091">0</span>&nbsp;<span class="op" id="3686093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3686097">err</span>&nbsp;<span class="op" id="3686101">=</span>&nbsp;<span class="ident" id="3686103">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3686118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3686121">return</span><br>
<span class="lineno"></span><span class="op" id="3686128">}</span>
</div>
</body>
</html>
