<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html" class="current">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6404841">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6404896">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6404950">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6405001">package</span>&nbsp;<span class="ident" id="6405009">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405014">import</span>&nbsp;<span class="op" id="6405021">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405024">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405034">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405041">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405048">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405059">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405070">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6405080">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6405083">type</span>&nbsp;<span class="ident" id="6405088">shutdownCodec</span>&nbsp;<span class="keyword" id="6405102">struct</span>&nbsp;<span class="op" id="6405109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405112">responded</span>&nbsp;<span class="keyword" id="6405122">chan</span>&nbsp;<span class="builtintype" id="6405127">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405132">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405142">bool</span><br>
<span class="lineno"></span><span class="op" id="6405147">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6405150">func</span>&nbsp;<span class="op" id="6405155">(</span><span class="ident" id="6405156">c</span>&nbsp;<span class="op" id="6405158">*</span><span class="ident" id="6405159">shutdownCodec</span><span class="op" id="6405172">)</span>&nbsp;<span class="ident" id="6405174">WriteRequest</span><span class="op" id="6405186">(</span><span class="op" id="6405187">*</span><span class="ident" id="6405188">Request</span><span class="op" id="6405195">,</span>&nbsp;<span class="keyword" id="6405197">interface</span><span class="op" id="6405206">{</span><span class="op" id="6405207">}</span><span class="op" id="6405208">)</span>&nbsp;<span class="builtintype" id="6405210">error</span>&nbsp;<span class="op" id="6405216">{</span>&nbsp;<span class="keyword" id="6405218">return</span>&nbsp;<span class="ident" id="6405225">nil</span>&nbsp;<span class="op" id="6405229">}</span><br>
<span class="lineno"></span><span class="keyword" id="6405231">func</span>&nbsp;<span class="op" id="6405236">(</span><span class="ident" id="6405237">c</span>&nbsp;<span class="op" id="6405239">*</span><span class="ident" id="6405240">shutdownCodec</span><span class="op" id="6405253">)</span>&nbsp;<span class="ident" id="6405255">ReadResponseBody</span><span class="op" id="6405271">(</span><span class="keyword" id="6405272">interface</span><span class="op" id="6405281">{</span><span class="op" id="6405282">}</span><span class="op" id="6405283">)</span>&nbsp;<span class="builtintype" id="6405285">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405297">{</span>&nbsp;<span class="keyword" id="6405299">return</span>&nbsp;<span class="ident" id="6405306">nil</span>&nbsp;<span class="op" id="6405310">}</span><br>
<span class="lineno"></span><span class="keyword" id="6405312">func</span>&nbsp;<span class="op" id="6405317">(</span><span class="ident" id="6405318">c</span>&nbsp;<span class="op" id="6405320">*</span><span class="ident" id="6405321">shutdownCodec</span><span class="op" id="6405334">)</span>&nbsp;<span class="ident" id="6405336">ReadResponseHeader</span><span class="op" id="6405354">(</span><span class="op" id="6405355">*</span><span class="ident" id="6405356">Response</span><span class="op" id="6405364">)</span>&nbsp;<span class="builtintype" id="6405366">error</span>&nbsp;<span class="op" id="6405372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405375">c</span><span class="op" id="6405376">.</span><span class="ident" id="6405377">responded</span>&nbsp;<span class="op" id="6405387">&lt;-</span>&nbsp;<span class="num" id="6405390">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405393">return</span>&nbsp;<span class="ident" id="6405400">errors</span><span class="op" id="6405406">.</span><span class="ident" id="6405407">New</span><span class="op" id="6405410">(</span><span class="string" id="6405411">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="6405445">)</span><br>
<span class="lineno"></span><span class="op" id="6405447">}</span><br>
<span class="lineno"></span><span class="keyword" id="6405449">func</span>&nbsp;<span class="op" id="6405454">(</span><span class="ident" id="6405455">c</span>&nbsp;<span class="op" id="6405457">*</span><span class="ident" id="6405458">shutdownCodec</span><span class="op" id="6405471">)</span>&nbsp;<span class="ident" id="6405473">Close</span><span class="op" id="6405478">(</span><span class="op" id="6405479">)</span>&nbsp;<span class="builtintype" id="6405481">error</span>&nbsp;<span class="op" id="6405487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405490">c</span><span class="op" id="6405491">.</span><span class="ident" id="6405492">closed</span>&nbsp;<span class="op" id="6405499">=</span>&nbsp;<span class="builtintype" id="6405501">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405507">return</span>&nbsp;<span class="ident" id="6405514">nil</span><br>
<span class="lineno">30</span><span class="op" id="6405518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405521">func</span>&nbsp;<span class="ident" id="6405526">TestCloseCodec</span><span class="op" id="6405540">(</span><span class="ident" id="6405541">t</span>&nbsp;<span class="op" id="6405543">*</span><span class="ident" id="6405544">testing</span><span class="op" id="6405551">.</span><span class="ident" id="6405552">T</span><span class="op" id="6405553">)</span>&nbsp;<span class="op" id="6405555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405558">codec</span>&nbsp;<span class="op" id="6405564">:=</span>&nbsp;<span class="op" id="6405567">&amp;</span><span class="ident" id="6405568">shutdownCodec</span><span class="op" id="6405581">{</span><span class="ident" id="6405582">responded</span><span class="op" id="6405591">:</span>&nbsp;<span class="builtinfunc" id="6405593">make</span><span class="op" id="6405597">(</span><span class="keyword" id="6405598">chan</span>&nbsp;<span class="builtintype" id="6405603">int</span><span class="op" id="6405606">)</span><span class="op" id="6405607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405610">client</span>&nbsp;<span class="op" id="6405617">:=</span>&nbsp;<span class="ident" id="6405620">NewClientWithCodec</span><span class="op" id="6405638">(</span><span class="ident" id="6405639">codec</span><span class="op" id="6405644">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405647">&lt;-</span><span class="ident" id="6405649">codec</span><span class="op" id="6405654">.</span><span class="ident" id="6405655">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405666">client</span><span class="op" id="6405672">.</span><span class="ident" id="6405673">Close</span><span class="op" id="6405678">(</span><span class="op" id="6405679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405682">if</span>&nbsp;<span class="op" id="6405685">!</span><span class="ident" id="6405686">codec</span><span class="op" id="6405691">.</span><span class="ident" id="6405692">closed</span>&nbsp;<span class="op" id="6405699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405703">t</span><span class="op" id="6405704">.</span><span class="ident" id="6405705">Error</span><span class="op" id="6405710">(</span><span class="string" id="6405711">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="6405745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405748">}</span><br>
<span class="lineno">40</span><span class="op" id="6405750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6405753">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405819">type</span>&nbsp;<span class="ident" id="6405824">R</span>&nbsp;<span class="keyword" id="6405826">struct</span>&nbsp;<span class="op" id="6405833">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405836">msg</span>&nbsp;<span class="op" id="6405840">[</span><span class="op" id="6405841">]</span><span class="builtintype" id="6405842">byte</span>&nbsp;<span class="comment" id="6405847">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="6405893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405896">type</span>&nbsp;<span class="ident" id="6405901">S</span>&nbsp;<span class="keyword" id="6405903">struct</span><span class="op" id="6405909">{</span><span class="op" id="6405910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6405913">func</span>&nbsp;<span class="op" id="6405918">(</span><span class="ident" id="6405919">s</span>&nbsp;<span class="op" id="6405921">*</span><span class="ident" id="6405922">S</span><span class="op" id="6405923">)</span>&nbsp;<span class="ident" id="6405925">Recv</span><span class="op" id="6405929">(</span><span class="ident" id="6405930">nul</span>&nbsp;<span class="op" id="6405934">*</span><span class="keyword" id="6405935">struct</span><span class="op" id="6405941">{</span><span class="op" id="6405942">}</span><span class="op" id="6405943">,</span>&nbsp;<span class="ident" id="6405945">reply</span>&nbsp;<span class="op" id="6405951">*</span><span class="ident" id="6405952">R</span><span class="op" id="6405953">)</span>&nbsp;<span class="builtintype" id="6405955">error</span>&nbsp;<span class="op" id="6405961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405964">*</span><span class="ident" id="6405965">reply</span>&nbsp;<span class="op" id="6405971">=</span>&nbsp;<span class="ident" id="6405973">R</span><span class="op" id="6405974">{</span><span class="op" id="6405975">[</span><span class="op" id="6405976">]</span><span class="builtintype" id="6405977">byte</span><span class="op" id="6405981">(</span><span class="string" id="6405982">&#34;foo&#34;</span><span class="op" id="6405987">)</span><span class="op" id="6405988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405991">return</span>&nbsp;<span class="ident" id="6405998">nil</span><br>
<span class="lineno"></span><span class="op" id="6406002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="6406005">func</span>&nbsp;<span class="ident" id="6406010">TestGobError</span><span class="op" id="6406022">(</span><span class="ident" id="6406023">t</span>&nbsp;<span class="op" id="6406025">*</span><span class="ident" id="6406026">testing</span><span class="op" id="6406033">.</span><span class="ident" id="6406034">T</span><span class="op" id="6406035">)</span>&nbsp;<span class="op" id="6406037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406040">if</span>&nbsp;<span class="ident" id="6406043">runtime</span><span class="op" id="6406050">.</span><span class="ident" id="6406051">GOOS</span>&nbsp;<span class="op" id="6406056">==</span>&nbsp;<span class="string" id="6406059">&#34;plan9&#34;</span>&nbsp;<span class="op" id="6406067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406071">t</span><span class="op" id="6406072">.</span><span class="ident" id="6406073">Skip</span><span class="op" id="6406077">(</span><span class="string" id="6406078">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="6406127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406133">defer</span>&nbsp;<span class="keyword" id="6406139">func</span><span class="op" id="6406143">(</span><span class="op" id="6406144">)</span>&nbsp;<span class="op" id="6406146">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406150">err</span>&nbsp;<span class="op" id="6406154">:=</span>&nbsp;<span class="builtinfunc" id="6406157">recover</span><span class="op" id="6406164">(</span><span class="op" id="6406165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406169">if</span>&nbsp;<span class="ident" id="6406172">err</span>&nbsp;<span class="op" id="6406176">==</span>&nbsp;<span class="ident" id="6406179">nil</span>&nbsp;<span class="op" id="6406183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406188">t</span><span class="op" id="6406189">.</span><span class="ident" id="6406190">Fatal</span><span class="op" id="6406195">(</span><span class="string" id="6406196">&#34;no&nbsp;error&#34;</span><span class="op" id="6406206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406214">if</span>&nbsp;<span class="op" id="6406217">!</span><span class="ident" id="6406218">strings</span><span class="op" id="6406225">.</span><span class="ident" id="6406226">Contains</span><span class="op" id="6406234">(</span><span class="string" id="6406235">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="6406253">,</span>&nbsp;<span class="ident" id="6406255">err</span><span class="op" id="6406258">.</span><span class="op" id="6406259">(</span><span class="builtintype" id="6406260">error</span><span class="op" id="6406265">)</span><span class="op" id="6406266">.</span><span class="ident" id="6406267">Error</span><span class="op" id="6406272">(</span><span class="op" id="6406273">)</span><span class="op" id="6406274">)</span>&nbsp;<span class="op" id="6406276">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406281">t</span><span class="op" id="6406282">.</span><span class="ident" id="6406283">Fatal</span><span class="op" id="6406288">(</span><span class="string" id="6406289">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="6406323">,</span>&nbsp;<span class="ident" id="6406325">err</span><span class="op" id="6406328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406335">}</span><span class="op" id="6406336">(</span><span class="op" id="6406337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406340">Register</span><span class="op" id="6406348">(</span><span class="builtinfunc" id="6406349">new</span><span class="op" id="6406352">(</span><span class="ident" id="6406353">S</span><span class="op" id="6406354">)</span><span class="op" id="6406355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406359">listen</span><span class="op" id="6406365">,</span>&nbsp;<span class="ident" id="6406367">err</span>&nbsp;<span class="op" id="6406371">:=</span>&nbsp;<span class="ident" id="6406374">net</span><span class="op" id="6406377">.</span><span class="ident" id="6406378">Listen</span><span class="op" id="6406384">(</span><span class="string" id="6406385">&#34;tcp&#34;</span><span class="op" id="6406390">,</span>&nbsp;<span class="string" id="6406392">&#34;127.0.0.1:0&#34;</span><span class="op" id="6406405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406408">if</span>&nbsp;<span class="ident" id="6406411">err</span>&nbsp;<span class="op" id="6406415">!=</span>&nbsp;<span class="ident" id="6406418">nil</span>&nbsp;<span class="op" id="6406422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6406426">panic</span><span class="op" id="6406431">(</span><span class="ident" id="6406432">err</span><span class="op" id="6406435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406441">go</span>&nbsp;<span class="ident" id="6406444">Accept</span><span class="op" id="6406450">(</span><span class="ident" id="6406451">listen</span><span class="op" id="6406457">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406461">client</span><span class="op" id="6406467">,</span>&nbsp;<span class="ident" id="6406469">err</span>&nbsp;<span class="op" id="6406473">:=</span>&nbsp;<span class="ident" id="6406476">Dial</span><span class="op" id="6406480">(</span><span class="string" id="6406481">&#34;tcp&#34;</span><span class="op" id="6406486">,</span>&nbsp;<span class="ident" id="6406488">listen</span><span class="op" id="6406494">.</span><span class="ident" id="6406495">Addr</span><span class="op" id="6406499">(</span><span class="op" id="6406500">)</span><span class="op" id="6406501">.</span><span class="ident" id="6406502">String</span><span class="op" id="6406508">(</span><span class="op" id="6406509">)</span><span class="op" id="6406510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406513">if</span>&nbsp;<span class="ident" id="6406516">err</span>&nbsp;<span class="op" id="6406520">!=</span>&nbsp;<span class="ident" id="6406523">nil</span>&nbsp;<span class="op" id="6406527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6406531">panic</span><span class="op" id="6406536">(</span><span class="ident" id="6406537">err</span><span class="op" id="6406540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406543">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406547">var</span>&nbsp;<span class="ident" id="6406551">reply</span>&nbsp;<span class="ident" id="6406557">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406564">err</span>&nbsp;<span class="op" id="6406568">=</span>&nbsp;<span class="ident" id="6406570">client</span><span class="op" id="6406576">.</span><span class="ident" id="6406577">Call</span><span class="op" id="6406581">(</span><span class="string" id="6406582">&#34;S.Recv&#34;</span><span class="op" id="6406590">,</span>&nbsp;<span class="op" id="6406592">&amp;</span><span class="keyword" id="6406593">struct</span><span class="op" id="6406599">{</span><span class="op" id="6406600">}</span><span class="op" id="6406601">{</span><span class="op" id="6406602">}</span><span class="op" id="6406603">,</span>&nbsp;<span class="op" id="6406605">&amp;</span><span class="ident" id="6406606">reply</span><span class="op" id="6406611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406614">if</span>&nbsp;<span class="ident" id="6406617">err</span>&nbsp;<span class="op" id="6406621">!=</span>&nbsp;<span class="ident" id="6406624">nil</span>&nbsp;<span class="op" id="6406628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6406632">panic</span><span class="op" id="6406637">(</span><span class="ident" id="6406638">err</span><span class="op" id="6406641">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406648">fmt</span><span class="op" id="6406651">.</span><span class="ident" id="6406652">Printf</span><span class="op" id="6406658">(</span><span class="string" id="6406659">&#34;%#v\n&#34;</span><span class="op" id="6406666">,</span>&nbsp;<span class="ident" id="6406668">reply</span><span class="op" id="6406673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406676">client</span><span class="op" id="6406682">.</span><span class="ident" id="6406683">Close</span><span class="op" id="6406688">(</span><span class="op" id="6406689">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406693">listen</span><span class="op" id="6406699">.</span><span class="ident" id="6406700">Close</span><span class="op" id="6406705">(</span><span class="op" id="6406706">)</span><br>
<span class="lineno"></span><span class="op" id="6406708">}</span>
</div>
</body>
</html>
