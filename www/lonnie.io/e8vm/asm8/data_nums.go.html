<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5806355">package</span>&nbsp;<span class="ident" id="5806363">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5806369">import</span>&nbsp;<span class="op" id="5806376">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5806379">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5806388">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5806396">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5806408">&#34;lonnie.io/e8vm/arch8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5806432">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5806454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5806457">func</span>&nbsp;<span class="ident" id="5806462">nbitAlign</span><span class="op" id="5806471">(</span><span class="ident" id="5806472">nbit</span>&nbsp;<span class="builtintype" id="5806477">int</span><span class="op" id="5806480">)</span>&nbsp;<span class="builtintype" id="5806482">uint32</span>&nbsp;<span class="op" id="5806489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806492">if</span>&nbsp;<span class="ident" id="5806495">nbit</span>&nbsp;<span class="op" id="5806500">==</span>&nbsp;<span class="num" id="5806503">8</span>&nbsp;<span class="op" id="5806505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806509">return</span>&nbsp;<span class="num" id="5806516">0</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806519">}</span>&nbsp;<span class="keyword" id="5806521">else</span>&nbsp;<span class="keyword" id="5806526">if</span>&nbsp;<span class="ident" id="5806529">nbit</span>&nbsp;<span class="op" id="5806534">==</span>&nbsp;<span class="num" id="5806537">32</span>&nbsp;<span class="op" id="5806540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806544">return</span>&nbsp;<span class="num" id="5806551">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806554">}</span>&nbsp;<span class="keyword" id="5806556">else</span>&nbsp;<span class="op" id="5806561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5806565">panic</span><span class="op" id="5806570">(</span><span class="string" id="5806571">&#34;invalid&nbsp;nbit&#34;</span><span class="op" id="5806585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806588">}</span><br>
<span class="lineno">20</span><span class="op" id="5806590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5806593">const</span>&nbsp;<span class="op" id="5806599">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806602">modeSigned</span>&nbsp;<span class="op" id="5806613">=</span>&nbsp;<span class="num" id="5806615">0x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806620">modeWord</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5806631">=</span>&nbsp;<span class="num" id="5806633">0x2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806638">modeFloat</span>&nbsp;&nbsp;<span class="op" id="5806649">=</span>&nbsp;<span class="num" id="5806651">0x4</span><br>
<span class="lineno"></span><span class="op" id="5806655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5806658">func</span>&nbsp;<span class="ident" id="5806663">parseDataNums</span><span class="op" id="5806676">(</span><span class="ident" id="5806677">p</span>&nbsp;<span class="op" id="5806679">*</span><span class="ident" id="5806680">parser</span><span class="op" id="5806686">,</span>&nbsp;<span class="ident" id="5806688">args</span>&nbsp;<span class="op" id="5806693">[</span><span class="op" id="5806694">]</span><span class="op" id="5806695">*</span><span class="ident" id="5806696">lex8</span><span class="op" id="5806700">.</span><span class="ident" id="5806701">Token</span><span class="op" id="5806706">,</span>&nbsp;<span class="ident" id="5806708">mode</span>&nbsp;<span class="builtintype" id="5806713">int</span><span class="op" id="5806716">)</span>&nbsp;<span class="op" id="5806718">(</span><span class="op" id="5806719">[</span><span class="op" id="5806720">]</span><span class="builtintype" id="5806721">byte</span><span class="op" id="5806725">,</span>&nbsp;<span class="builtintype" id="5806727">uint32</span><span class="op" id="5806733">)</span>&nbsp;<span class="op" id="5806735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806738">if</span>&nbsp;<span class="op" id="5806741">!</span><span class="ident" id="5806742">checkAllType</span><span class="op" id="5806754">(</span><span class="ident" id="5806755">p</span><span class="op" id="5806756">,</span>&nbsp;<span class="ident" id="5806758">args</span><span class="op" id="5806762">,</span>&nbsp;<span class="ident" id="5806764">Operand</span><span class="op" id="5806771">)</span>&nbsp;<span class="op" id="5806773">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806777">return</span>&nbsp;<span class="ident" id="5806784">nil</span><span class="op" id="5806787">,</span>&nbsp;<span class="num" id="5806789">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806796">var</span>&nbsp;<span class="ident" id="5806800">ui</span>&nbsp;<span class="builtintype" id="5806803">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806811">nbit</span>&nbsp;<span class="op" id="5806816">:=</span>&nbsp;<span class="num" id="5806819">8</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806822">if</span>&nbsp;<span class="ident" id="5806825">mode</span><span class="op" id="5806829">&amp;</span><span class="ident" id="5806830">modeWord</span>&nbsp;<span class="op" id="5806839">!=</span>&nbsp;<span class="num" id="5806842">0</span>&nbsp;<span class="op" id="5806844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806848">nbit</span>&nbsp;<span class="op" id="5806853">=</span>&nbsp;<span class="num" id="5806855">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806859">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806862">var</span>&nbsp;<span class="ident" id="5806866">e</span>&nbsp;<span class="builtintype" id="5806868">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806876">buf</span>&nbsp;<span class="op" id="5806880">:=</span>&nbsp;<span class="builtinfunc" id="5806883">new</span><span class="op" id="5806886">(</span><span class="ident" id="5806887">bytes</span><span class="op" id="5806892">.</span><span class="ident" id="5806893">Buffer</span><span class="op" id="5806899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806902">for</span>&nbsp;<span class="ident" id="5806906">_</span><span class="op" id="5806907">,</span>&nbsp;<span class="ident" id="5806909">arg</span>&nbsp;<span class="op" id="5806913">:=</span>&nbsp;<span class="keyword" id="5806916">range</span>&nbsp;<span class="ident" id="5806922">args</span>&nbsp;<span class="op" id="5806927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806931">if</span>&nbsp;<span class="ident" id="5806934">mode</span><span class="op" id="5806938">&amp;</span><span class="ident" id="5806939">modeFloat</span>&nbsp;<span class="op" id="5806949">!=</span>&nbsp;<span class="num" id="5806952">0</span>&nbsp;<span class="op" id="5806954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806959">var</span>&nbsp;<span class="ident" id="5806963">f</span>&nbsp;<span class="builtintype" id="5806965">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806976">f</span><span class="op" id="5806977">,</span>&nbsp;<span class="ident" id="5806979">e</span>&nbsp;<span class="op" id="5806981">=</span>&nbsp;<span class="ident" id="5806983">strconv</span><span class="op" id="5806990">.</span><span class="ident" id="5806991">ParseFloat</span><span class="op" id="5807001">(</span><span class="ident" id="5807002">arg</span><span class="op" id="5807005">.</span><span class="ident" id="5807006">Lit</span><span class="op" id="5807009">,</span>&nbsp;<span class="num" id="5807011">32</span><span class="op" id="5807013">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807018">ui</span>&nbsp;<span class="op" id="5807021">=</span>&nbsp;<span class="ident" id="5807023">math</span><span class="op" id="5807027">.</span><span class="ident" id="5807028">Float32bits</span><span class="op" id="5807039">(</span><span class="builtintype" id="5807040">float32</span><span class="op" id="5807047">(</span><span class="ident" id="5807048">f</span><span class="op" id="5807049">)</span><span class="op" id="5807050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807054">}</span>&nbsp;<span class="keyword" id="5807056">else</span>&nbsp;<span class="keyword" id="5807061">if</span>&nbsp;<span class="ident" id="5807064">mode</span><span class="op" id="5807068">&amp;</span><span class="ident" id="5807069">modeSigned</span>&nbsp;<span class="op" id="5807080">!=</span>&nbsp;<span class="num" id="5807083">0</span>&nbsp;<span class="op" id="5807085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807090">var</span>&nbsp;<span class="ident" id="5807094">i</span>&nbsp;<span class="ident" id="5807096">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807105">i</span><span class="op" id="5807106">,</span>&nbsp;<span class="ident" id="5807108">e</span>&nbsp;<span class="op" id="5807110">=</span>&nbsp;<span class="ident" id="5807112">strconv</span><span class="op" id="5807119">.</span><span class="ident" id="5807120">ParseInt</span><span class="op" id="5807128">(</span><span class="ident" id="5807129">arg</span><span class="op" id="5807132">.</span><span class="ident" id="5807133">Lit</span><span class="op" id="5807136">,</span>&nbsp;<span class="num" id="5807138">0</span><span class="op" id="5807139">,</span>&nbsp;<span class="ident" id="5807141">nbit</span><span class="op" id="5807145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807150">ui</span>&nbsp;<span class="op" id="5807153">=</span>&nbsp;<span class="builtintype" id="5807155">uint32</span><span class="op" id="5807161">(</span><span class="ident" id="5807162">i</span><span class="op" id="5807163">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807167">}</span>&nbsp;<span class="keyword" id="5807169">else</span>&nbsp;<span class="op" id="5807174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807179">var</span>&nbsp;<span class="ident" id="5807183">ui64</span>&nbsp;<span class="ident" id="5807188">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807198">ui64</span><span class="op" id="5807202">,</span>&nbsp;<span class="ident" id="5807204">e</span>&nbsp;<span class="op" id="5807206">=</span>&nbsp;<span class="ident" id="5807208">strconv</span><span class="op" id="5807215">.</span><span class="ident" id="5807216">ParseUint</span><span class="op" id="5807225">(</span><span class="ident" id="5807226">arg</span><span class="op" id="5807229">.</span><span class="ident" id="5807230">Lit</span><span class="op" id="5807233">,</span>&nbsp;<span class="num" id="5807235">0</span><span class="op" id="5807236">,</span>&nbsp;<span class="ident" id="5807238">nbit</span><span class="op" id="5807242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807247">ui</span>&nbsp;<span class="op" id="5807250">=</span>&nbsp;<span class="builtintype" id="5807252">uint32</span><span class="op" id="5807258">(</span><span class="ident" id="5807259">ui64</span><span class="op" id="5807263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807267">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807271">if</span>&nbsp;<span class="ident" id="5807274">e</span>&nbsp;<span class="op" id="5807276">!=</span>&nbsp;<span class="ident" id="5807279">nil</span>&nbsp;<span class="op" id="5807283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807288">p</span><span class="op" id="5807289">.</span><span class="ident" id="5807290">err</span><span class="op" id="5807293">(</span><span class="ident" id="5807294">arg</span><span class="op" id="5807297">.</span><span class="ident" id="5807298">Pos</span><span class="op" id="5807301">,</span>&nbsp;<span class="string" id="5807303">&#34;%s&#34;</span><span class="op" id="5807307">,</span>&nbsp;<span class="ident" id="5807309">e</span><span class="op" id="5807310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807315">return</span>&nbsp;<span class="ident" id="5807322">nil</span><span class="op" id="5807325">,</span>&nbsp;<span class="num" id="5807327">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807336">if</span>&nbsp;<span class="ident" id="5807339">nbit</span>&nbsp;<span class="op" id="5807344">==</span>&nbsp;<span class="num" id="5807347">8</span>&nbsp;<span class="op" id="5807349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807354">buf</span><span class="op" id="5807357">.</span><span class="ident" id="5807358">WriteByte</span><span class="op" id="5807367">(</span><span class="builtintype" id="5807368">byte</span><span class="op" id="5807372">(</span><span class="ident" id="5807373">ui</span><span class="op" id="5807375">)</span><span class="op" id="5807376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807380">}</span>&nbsp;<span class="keyword" id="5807382">else</span>&nbsp;<span class="keyword" id="5807387">if</span>&nbsp;<span class="ident" id="5807390">nbit</span>&nbsp;<span class="op" id="5807395">==</span>&nbsp;<span class="num" id="5807398">32</span>&nbsp;<span class="op" id="5807401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807406">var</span>&nbsp;<span class="ident" id="5807410">bs</span>&nbsp;<span class="op" id="5807413">[</span><span class="num" id="5807414">4</span><span class="op" id="5807415">]</span><span class="builtintype" id="5807416">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807424">arch8</span><span class="op" id="5807429">.</span><span class="ident" id="5807430">Endian</span><span class="op" id="5807436">.</span><span class="ident" id="5807437">PutUint32</span><span class="op" id="5807446">(</span><span class="ident" id="5807447">bs</span><span class="op" id="5807449">[</span><span class="op" id="5807450">:</span><span class="op" id="5807451">]</span><span class="op" id="5807452">,</span>&nbsp;<span class="ident" id="5807454">ui</span><span class="op" id="5807456">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807461">buf</span><span class="op" id="5807464">.</span><span class="ident" id="5807465">Write</span><span class="op" id="5807470">(</span><span class="ident" id="5807471">bs</span><span class="op" id="5807473">[</span><span class="op" id="5807474">:</span><span class="op" id="5807475">]</span><span class="op" id="5807476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807487">return</span>&nbsp;<span class="ident" id="5807494">buf</span><span class="op" id="5807497">.</span><span class="ident" id="5807498">Bytes</span><span class="op" id="5807503">(</span><span class="op" id="5807504">)</span><span class="op" id="5807505">,</span>&nbsp;<span class="ident" id="5807507">nbitAlign</span><span class="op" id="5807516">(</span><span class="ident" id="5807517">nbit</span><span class="op" id="5807521">)</span><br>
<span class="lineno">70</span><span class="op" id="5807523">}</span>
</div>
</body>
</html>
