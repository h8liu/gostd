<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/printer</h2>
<ul>
<li><a href="/gostd/go/printer/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/printer/nodes.go.html">nodes.go</a></li>
<li><a href="/gostd/go/printer/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/printer/printer.go.html">printer.go</a></li>
<li><a href="/gostd/go/printer/printer_test.go.html" class="current">printer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7592201">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7592256">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7592310">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7592361">package</span>&nbsp;<span class="ident" id="7592369">printer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7592378">import</span>&nbsp;<span class="op" id="7592385">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592388">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592397">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592407">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592415">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592422">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592432">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592445">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592457">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592470">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592487">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7592498">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7592505">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7592508">const</span>&nbsp;<span class="op" id="7592514">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592517">dataDir</span>&nbsp;&nbsp;<span class="op" id="7592526">=</span>&nbsp;<span class="string" id="7592528">&#34;testdata&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592540">tabwidth</span>&nbsp;<span class="op" id="7592549">=</span>&nbsp;<span class="num" id="7592551">8</span><br>
<span class="lineno"></span><span class="op" id="7592553">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7592556">var</span>&nbsp;<span class="ident" id="7592560">update</span>&nbsp;<span class="op" id="7592567">=</span>&nbsp;<span class="ident" id="7592569"><a href="/gostd/go/printer/printer_test.go.html#7592407">flag</a></span><span class="op" id="7592573">.</span><span class="ident" id="7592574"><a href="/gostd/flag/flag.go.html#3948389">Bool</a></span><span class="op" id="7592578">(</span><span class="string" id="7592579">&#34;update&#34;</span><span class="op" id="7592587">,</span>&nbsp;<span class="builtintype" id="7592589">false</span><span class="op" id="7592594">,</span>&nbsp;<span class="string" id="7592596">&#34;update&nbsp;golden&nbsp;files&#34;</span><span class="op" id="7592617">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7592620">var</span>&nbsp;<span class="ident" id="7592624">fset</span>&nbsp;<span class="op" id="7592629">=</span>&nbsp;<span class="ident" id="7592631"><a href="/gostd/go/printer/printer_test.go.html#7592445">token</a></span><span class="op" id="7592636">.</span><span class="ident" id="7592637"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="7592647">(</span><span class="op" id="7592648">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7592651">type</span>&nbsp;<span class="ident" id="7592656">checkMode</span>&nbsp;<span class="builtintype" id="7592666">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7592672">const</span>&nbsp;<span class="op" id="7592678">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592681">export</span>&nbsp;<span class="ident" id="7592688"><a href="/gostd/go/printer/printer_test.go.html#7592656">checkMode</a></span>&nbsp;<span class="op" id="7592698">=</span>&nbsp;<span class="num" id="7592700">1</span>&nbsp;<span class="op" id="7592702">&lt;&lt;</span>&nbsp;<span class="ident" id="7592705">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592711">rawFormat</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592722">idempotent</span><br>
<span class="lineno"></span><span class="op" id="7592733">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7592736">//&nbsp;format&nbsp;parses&nbsp;src,&nbsp;prints&nbsp;the&nbsp;corresponding&nbsp;AST,&nbsp;verifies&nbsp;the&nbsp;resulting</span><br>
<span class="lineno"></span><span class="comment" id="7592811">//&nbsp;src&nbsp;is&nbsp;syntactically&nbsp;correct,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;src&nbsp;or&nbsp;an&nbsp;error</span><br>
<span class="lineno">40</span><span class="comment" id="7592886">//&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="7592897">func</span>&nbsp;<span class="ident" id="7592902">format</span><span class="op" id="7592908">(</span><span class="ident" id="7592909">src</span>&nbsp;<span class="op" id="7592913">[</span><span class="op" id="7592914">]</span><span class="builtintype" id="7592915">byte</span><span class="op" id="7592919">,</span>&nbsp;<span class="ident" id="7592921">mode</span>&nbsp;<span class="ident" id="7592926"><a href="/gostd/go/printer/printer_test.go.html#7592656">checkMode</a></span><span class="op" id="7592935">)</span>&nbsp;<span class="op" id="7592937">(</span><span class="op" id="7592938">[</span><span class="op" id="7592939">]</span><span class="builtintype" id="7592940">byte</span><span class="op" id="7592944">,</span>&nbsp;<span class="builtintype" id="7592946">error</span><span class="op" id="7592951">)</span>&nbsp;<span class="op" id="7592953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7592956">//&nbsp;parse&nbsp;src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7592970">f</span><span class="op" id="7592971">,</span>&nbsp;<span class="ident" id="7592973">err</span>&nbsp;<span class="op" id="7592977">:=</span>&nbsp;<span class="ident" id="7592980"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7592986">.</span><span class="ident" id="7592987"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7592996">(</span><span class="ident" id="7592997"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7593001">,</span>&nbsp;<span class="string" id="7593003">&#34;&#34;</span><span class="op" id="7593005">,</span>&nbsp;<span class="ident" id="7593007"><a href="/gostd/go/printer/printer_test.go.html#7592909">src</a></span><span class="op" id="7593010">,</span>&nbsp;<span class="ident" id="7593012"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7593018">.</span><span class="ident" id="7593019"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7593032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593035">if</span>&nbsp;<span class="ident" id="7593038"><a href="/gostd/go/printer/printer_test.go.html#7592973">err</a></span>&nbsp;<span class="op" id="7593042">!=</span>&nbsp;<span class="builtintype" id="7593045">nil</span>&nbsp;<span class="op" id="7593049">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593053">return</span>&nbsp;<span class="builtintype" id="7593060">nil</span><span class="op" id="7593063">,</span>&nbsp;<span class="ident" id="7593065"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7593068">.</span><span class="ident" id="7593069"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="7593075">(</span><span class="string" id="7593076">&#34;parse:&nbsp;%s\n%s&#34;</span><span class="op" id="7593091">,</span>&nbsp;<span class="ident" id="7593093"><a href="/gostd/go/printer/printer_test.go.html#7592973">err</a></span><span class="op" id="7593096">,</span>&nbsp;<span class="ident" id="7593098"><a href="/gostd/go/printer/printer_test.go.html#7592909">src</a></span><span class="op" id="7593101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7593108">//&nbsp;filter&nbsp;exports&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593140">if</span>&nbsp;<span class="ident" id="7593143"><a href="/gostd/go/printer/printer_test.go.html#7592921">mode</a></span><span class="op" id="7593147">&amp;</span><span class="ident" id="7593148"><a href="/gostd/go/printer/printer_test.go.html#7592681">export</a></span>&nbsp;<span class="op" id="7593155">!=</span>&nbsp;<span class="num" id="7593158">0</span>&nbsp;<span class="op" id="7593160">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593164"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7593167">.</span><span class="ident" id="7593168"><a href="/gostd/go/ast/filter.go.html#3834940">FileExports</a></span><span class="op" id="7593179">(</span><span class="ident" id="7593180"><a href="/gostd/go/printer/printer_test.go.html#7592970">f</a></span><span class="op" id="7593181">)</span>&nbsp;<span class="comment" id="7593183">//&nbsp;ignore&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593202"><a href="/gostd/go/printer/printer_test.go.html#7592970">f</a></span><span class="op" id="7593203">.</span><span class="ident" id="7593204"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span>&nbsp;<span class="op" id="7593213">=</span>&nbsp;<span class="builtintype" id="7593215">nil</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7593221">//&nbsp;don&#39;t&nbsp;print&nbsp;comments&nbsp;that&nbsp;are&nbsp;not&nbsp;in&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7593270">//&nbsp;determine&nbsp;printer&nbsp;configuration</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593306">cfg</span>&nbsp;<span class="op" id="7593310">:=</span>&nbsp;<span class="ident" id="7593313"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="7593319">{</span><span class="ident" id="7593320"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><span class="op" id="7593328">:</span>&nbsp;<span class="ident" id="7593330"><a href="/gostd/go/printer/printer_test.go.html#7592540">tabwidth</a></span><span class="op" id="7593338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593341">if</span>&nbsp;<span class="ident" id="7593344"><a href="/gostd/go/printer/printer_test.go.html#7592921">mode</a></span><span class="op" id="7593348">&amp;</span><span class="ident" id="7593349"><a href="/gostd/go/printer/printer_test.go.html#7592711">rawFormat</a></span>&nbsp;<span class="op" id="7593359">!=</span>&nbsp;<span class="num" id="7593362">0</span>&nbsp;<span class="op" id="7593364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593368"><a href="/gostd/go/printer/printer_test.go.html#7593306">cfg</a></span><span class="op" id="7593371">.</span><span class="ident" id="7593372"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span>&nbsp;<span class="op" id="7593377">|=</span>&nbsp;<span class="ident" id="7593380"><a href="/gostd/go/printer/printer.go.html#5877154">RawFormat</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7593395">//&nbsp;print&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593409">var</span>&nbsp;<span class="ident" id="7593413">buf</span>&nbsp;<span class="ident" id="7593417"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7593422">.</span><span class="ident" id="7593423"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593431">if</span>&nbsp;<span class="ident" id="7593434">err</span>&nbsp;<span class="op" id="7593438">:=</span>&nbsp;<span class="ident" id="7593441"><a href="/gostd/go/printer/printer_test.go.html#7593306">cfg</a></span><span class="op" id="7593444">.</span><span class="ident" id="7593445"><a href="/gostd/go/printer/printer.go.html#5879714">Fprint</a></span><span class="op" id="7593451">(</span><span class="op" id="7593452">&amp;</span><span class="ident" id="7593453"><a href="/gostd/go/printer/printer_test.go.html#7593413">buf</a></span><span class="op" id="7593456">,</span>&nbsp;<span class="ident" id="7593458"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7593462">,</span>&nbsp;<span class="ident" id="7593464"><a href="/gostd/go/printer/printer_test.go.html#7592970">f</a></span><span class="op" id="7593465">)</span><span class="op" id="7593466">;</span>&nbsp;<span class="ident" id="7593468"><a href="/gostd/go/printer/printer_test.go.html#7593434">err</a></span>&nbsp;<span class="op" id="7593472">!=</span>&nbsp;<span class="builtintype" id="7593475">nil</span>&nbsp;<span class="op" id="7593479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593483">return</span>&nbsp;<span class="builtintype" id="7593490">nil</span><span class="op" id="7593493">,</span>&nbsp;<span class="ident" id="7593495"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7593498">.</span><span class="ident" id="7593499"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="7593505">(</span><span class="string" id="7593506">&#34;print:&nbsp;%s&#34;</span><span class="op" id="7593517">,</span>&nbsp;<span class="ident" id="7593519"><a href="/gostd/go/printer/printer_test.go.html#7593434">err</a></span><span class="op" id="7593522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593525">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7593529">//&nbsp;make&nbsp;sure&nbsp;formatted&nbsp;output&nbsp;is&nbsp;syntactically&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593585">res</span>&nbsp;<span class="op" id="7593589">:=</span>&nbsp;<span class="ident" id="7593592"><a href="/gostd/go/printer/printer_test.go.html#7593413">buf</a></span><span class="op" id="7593595">.</span><span class="ident" id="7593596"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7593601">(</span><span class="op" id="7593602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593605">if</span>&nbsp;<span class="ident" id="7593608">_</span><span class="op" id="7593609">,</span>&nbsp;<span class="ident" id="7593611">err</span>&nbsp;<span class="op" id="7593615">:=</span>&nbsp;<span class="ident" id="7593618"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7593624">.</span><span class="ident" id="7593625"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7593634">(</span><span class="ident" id="7593635"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7593639">,</span>&nbsp;<span class="string" id="7593641">&#34;&#34;</span><span class="op" id="7593643">,</span>&nbsp;<span class="ident" id="7593645"><a href="/gostd/go/printer/printer_test.go.html#7593585">res</a></span><span class="op" id="7593648">,</span>&nbsp;<span class="num" id="7593650">0</span><span class="op" id="7593651">)</span><span class="op" id="7593652">;</span>&nbsp;<span class="ident" id="7593654"><a href="/gostd/go/printer/printer_test.go.html#7593611">err</a></span>&nbsp;<span class="op" id="7593658">!=</span>&nbsp;<span class="builtintype" id="7593661">nil</span>&nbsp;<span class="op" id="7593665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593669">return</span>&nbsp;<span class="builtintype" id="7593676">nil</span><span class="op" id="7593679">,</span>&nbsp;<span class="ident" id="7593681"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7593684">.</span><span class="ident" id="7593685"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="7593691">(</span><span class="string" id="7593692">&#34;re-parse:&nbsp;%s\n%s&#34;</span><span class="op" id="7593710">,</span>&nbsp;<span class="ident" id="7593712"><a href="/gostd/go/printer/printer_test.go.html#7593611">err</a></span><span class="op" id="7593715">,</span>&nbsp;<span class="ident" id="7593717"><a href="/gostd/go/printer/printer_test.go.html#7593413">buf</a></span><span class="op" id="7593720">.</span><span class="ident" id="7593721"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7593726">(</span><span class="op" id="7593727">)</span><span class="op" id="7593728">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593735">return</span>&nbsp;<span class="ident" id="7593742"><a href="/gostd/go/printer/printer_test.go.html#7593585">res</a></span><span class="op" id="7593745">,</span>&nbsp;<span class="builtintype" id="7593747">nil</span><br>
<span class="lineno"></span><span class="op" id="7593751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="7593754">//&nbsp;lineAt&nbsp;returns&nbsp;the&nbsp;line&nbsp;in&nbsp;text&nbsp;starting&nbsp;at&nbsp;offset&nbsp;offs.</span><br>
<span class="lineno"></span><span class="keyword" id="7593814">func</span>&nbsp;<span class="ident" id="7593819">lineAt</span><span class="op" id="7593825">(</span><span class="ident" id="7593826">text</span>&nbsp;<span class="op" id="7593831">[</span><span class="op" id="7593832">]</span><span class="builtintype" id="7593833">byte</span><span class="op" id="7593837">,</span>&nbsp;<span class="ident" id="7593839">offs</span>&nbsp;<span class="builtintype" id="7593844">int</span><span class="op" id="7593847">)</span>&nbsp;<span class="op" id="7593849">[</span><span class="op" id="7593850">]</span><span class="builtintype" id="7593851">byte</span>&nbsp;<span class="op" id="7593856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593859">i</span>&nbsp;<span class="op" id="7593861">:=</span>&nbsp;<span class="ident" id="7593864"><a href="/gostd/go/printer/printer_test.go.html#7593839">offs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593870">for</span>&nbsp;<span class="ident" id="7593874"><a href="/gostd/go/printer/printer_test.go.html#7593859">i</a></span>&nbsp;<span class="op" id="7593876">&lt;</span>&nbsp;<span class="builtinfunc" id="7593878">len</span><span class="op" id="7593881">(</span><span class="ident" id="7593882"><a href="/gostd/go/printer/printer_test.go.html#7593826">text</a></span><span class="op" id="7593886">)</span>&nbsp;<span class="op" id="7593888">&amp;&amp;</span>&nbsp;<span class="ident" id="7593891"><a href="/gostd/go/printer/printer_test.go.html#7593826">text</a></span><span class="op" id="7593895">[</span><span class="ident" id="7593896"><a href="/gostd/go/printer/printer_test.go.html#7593859">i</a></span><span class="op" id="7593897">]</span>&nbsp;<span class="op" id="7593899">!=</span>&nbsp;<span class="string" id="7593902">&#39;\n&#39;</span>&nbsp;<span class="op" id="7593907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7593911"><a href="/gostd/go/printer/printer_test.go.html#7593859">i</a></span><span class="op" id="7593912">++</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7593916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7593919">return</span>&nbsp;<span class="ident" id="7593926"><a href="/gostd/go/printer/printer_test.go.html#7593826">text</a></span><span class="op" id="7593930">[</span><span class="ident" id="7593931"><a href="/gostd/go/printer/printer_test.go.html#7593839">offs</a></span><span class="op" id="7593935">:</span><span class="ident" id="7593936"><a href="/gostd/go/printer/printer_test.go.html#7593859">i</a></span><span class="op" id="7593937">]</span><br>
<span class="lineno"></span><span class="op" id="7593939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7593942">//&nbsp;diff&nbsp;compares&nbsp;a&nbsp;and&nbsp;b.</span><br>
<span class="lineno">85</span><span class="keyword" id="7593968">func</span>&nbsp;<span class="ident" id="7593973">diff</span><span class="op" id="7593977">(</span><span class="ident" id="7593978">aname</span><span class="op" id="7593983">,</span>&nbsp;<span class="ident" id="7593985">bname</span>&nbsp;<span class="builtintype" id="7593991">string</span><span class="op" id="7593997">,</span>&nbsp;<span class="ident" id="7593999">a</span><span class="op" id="7594000">,</span>&nbsp;<span class="ident" id="7594002">b</span>&nbsp;<span class="op" id="7594004">[</span><span class="op" id="7594005">]</span><span class="builtintype" id="7594006">byte</span><span class="op" id="7594010">)</span>&nbsp;<span class="builtintype" id="7594012">error</span>&nbsp;<span class="op" id="7594018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594021">var</span>&nbsp;<span class="ident" id="7594025">buf</span>&nbsp;<span class="ident" id="7594029"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7594034">.</span><span class="ident" id="7594035"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span>&nbsp;<span class="comment" id="7594042">//&nbsp;holding&nbsp;long&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7594074">//&nbsp;compare&nbsp;lengths</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594094">if</span>&nbsp;<span class="builtinfunc" id="7594097">len</span><span class="op" id="7594100">(</span><span class="ident" id="7594101"><a href="/gostd/go/printer/printer_test.go.html#7593999">a</a></span><span class="op" id="7594102">)</span>&nbsp;<span class="op" id="7594104">!=</span>&nbsp;<span class="builtinfunc" id="7594107">len</span><span class="op" id="7594110">(</span><span class="ident" id="7594111"><a href="/gostd/go/printer/printer_test.go.html#7594002">b</a></span><span class="op" id="7594112">)</span>&nbsp;<span class="op" id="7594114">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594118"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7594121">.</span><span class="ident" id="7594122"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="7594129">(</span><span class="op" id="7594130">&amp;</span><span class="ident" id="7594131"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594134">,</span>&nbsp;<span class="string" id="7594136">&#34;\nlength&nbsp;changed:&nbsp;len(%s)&nbsp;=&nbsp;%d,&nbsp;len(%s)&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7594182">,</span>&nbsp;<span class="ident" id="7594184"><a href="/gostd/go/printer/printer_test.go.html#7593978">aname</a></span><span class="op" id="7594189">,</span>&nbsp;<span class="builtinfunc" id="7594191">len</span><span class="op" id="7594194">(</span><span class="ident" id="7594195"><a href="/gostd/go/printer/printer_test.go.html#7593999">a</a></span><span class="op" id="7594196">)</span><span class="op" id="7594197">,</span>&nbsp;<span class="ident" id="7594199"><a href="/gostd/go/printer/printer_test.go.html#7593985">bname</a></span><span class="op" id="7594204">,</span>&nbsp;<span class="builtinfunc" id="7594206">len</span><span class="op" id="7594209">(</span><span class="ident" id="7594210"><a href="/gostd/go/printer/printer_test.go.html#7594002">b</a></span><span class="op" id="7594211">)</span><span class="op" id="7594212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7594219">//&nbsp;compare&nbsp;contents</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594240">line</span>&nbsp;<span class="op" id="7594245">:=</span>&nbsp;<span class="num" id="7594248">1</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594251">offs</span>&nbsp;<span class="op" id="7594256">:=</span>&nbsp;<span class="num" id="7594259">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594262">for</span>&nbsp;<span class="ident" id="7594266">i</span>&nbsp;<span class="op" id="7594268">:=</span>&nbsp;<span class="num" id="7594271">0</span><span class="op" id="7594272">;</span>&nbsp;<span class="ident" id="7594274"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span>&nbsp;<span class="op" id="7594276">&lt;</span>&nbsp;<span class="builtinfunc" id="7594278">len</span><span class="op" id="7594281">(</span><span class="ident" id="7594282"><a href="/gostd/go/printer/printer_test.go.html#7593999">a</a></span><span class="op" id="7594283">)</span>&nbsp;<span class="op" id="7594285">&amp;&amp;</span>&nbsp;<span class="ident" id="7594288"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span>&nbsp;<span class="op" id="7594290">&lt;</span>&nbsp;<span class="builtinfunc" id="7594292">len</span><span class="op" id="7594295">(</span><span class="ident" id="7594296"><a href="/gostd/go/printer/printer_test.go.html#7594002">b</a></span><span class="op" id="7594297">)</span><span class="op" id="7594298">;</span>&nbsp;<span class="ident" id="7594300"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span><span class="op" id="7594301">++</span>&nbsp;<span class="op" id="7594304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594308">ch</span>&nbsp;<span class="op" id="7594311">:=</span>&nbsp;<span class="ident" id="7594314"><a href="/gostd/go/printer/printer_test.go.html#7593999">a</a></span><span class="op" id="7594315">[</span><span class="ident" id="7594316"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span><span class="op" id="7594317">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594321">if</span>&nbsp;<span class="ident" id="7594324"><a href="/gostd/go/printer/printer_test.go.html#7594308">ch</a></span>&nbsp;<span class="op" id="7594327">!=</span>&nbsp;<span class="ident" id="7594330"><a href="/gostd/go/printer/printer_test.go.html#7594002">b</a></span><span class="op" id="7594331">[</span><span class="ident" id="7594332"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span><span class="op" id="7594333">]</span>&nbsp;<span class="op" id="7594335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594340"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7594343">.</span><span class="ident" id="7594344"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="7594351">(</span><span class="op" id="7594352">&amp;</span><span class="ident" id="7594353"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594356">,</span>&nbsp;<span class="string" id="7594358">&#34;\n%s:%d:%d:&nbsp;%s&#34;</span><span class="op" id="7594374">,</span>&nbsp;<span class="ident" id="7594376"><a href="/gostd/go/printer/printer_test.go.html#7593978">aname</a></span><span class="op" id="7594381">,</span>&nbsp;<span class="ident" id="7594383"><a href="/gostd/go/printer/printer_test.go.html#7594240">line</a></span><span class="op" id="7594387">,</span>&nbsp;<span class="ident" id="7594389"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span><span class="op" id="7594390">-</span><span class="ident" id="7594391"><a href="/gostd/go/printer/printer_test.go.html#7594251">offs</a></span><span class="op" id="7594395">+</span><span class="num" id="7594396">1</span><span class="op" id="7594397">,</span>&nbsp;<span class="ident" id="7594399"><a href="/gostd/go/printer/printer_test.go.html#7593819">lineAt</a></span><span class="op" id="7594405">(</span><span class="ident" id="7594406"><a href="/gostd/go/printer/printer_test.go.html#7593999">a</a></span><span class="op" id="7594407">,</span>&nbsp;<span class="ident" id="7594409"><a href="/gostd/go/printer/printer_test.go.html#7594251">offs</a></span><span class="op" id="7594413">)</span><span class="op" id="7594414">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594419"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7594422">.</span><span class="ident" id="7594423"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="7594430">(</span><span class="op" id="7594431">&amp;</span><span class="ident" id="7594432"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594435">,</span>&nbsp;<span class="string" id="7594437">&#34;\n%s:%d:%d:&nbsp;%s&#34;</span><span class="op" id="7594453">,</span>&nbsp;<span class="ident" id="7594455"><a href="/gostd/go/printer/printer_test.go.html#7593985">bname</a></span><span class="op" id="7594460">,</span>&nbsp;<span class="ident" id="7594462"><a href="/gostd/go/printer/printer_test.go.html#7594240">line</a></span><span class="op" id="7594466">,</span>&nbsp;<span class="ident" id="7594468"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span><span class="op" id="7594469">-</span><span class="ident" id="7594470"><a href="/gostd/go/printer/printer_test.go.html#7594251">offs</a></span><span class="op" id="7594474">+</span><span class="num" id="7594475">1</span><span class="op" id="7594476">,</span>&nbsp;<span class="ident" id="7594478"><a href="/gostd/go/printer/printer_test.go.html#7593819">lineAt</a></span><span class="op" id="7594484">(</span><span class="ident" id="7594485"><a href="/gostd/go/printer/printer_test.go.html#7594002">b</a></span><span class="op" id="7594486">,</span>&nbsp;<span class="ident" id="7594488"><a href="/gostd/go/printer/printer_test.go.html#7594251">offs</a></span><span class="op" id="7594492">)</span><span class="op" id="7594493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594498"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7594501">.</span><span class="ident" id="7594502"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="7594509">(</span><span class="op" id="7594510">&amp;</span><span class="ident" id="7594511"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594514">,</span>&nbsp;<span class="string" id="7594516">&#34;\n\n&#34;</span><span class="op" id="7594522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594527">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594539">if</span>&nbsp;<span class="ident" id="7594542"><a href="/gostd/go/printer/printer_test.go.html#7594308">ch</a></span>&nbsp;<span class="op" id="7594545">==</span>&nbsp;<span class="string" id="7594548">&#39;\n&#39;</span>&nbsp;<span class="op" id="7594553">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594558"><a href="/gostd/go/printer/printer_test.go.html#7594240">line</a></span><span class="op" id="7594562">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594568"><a href="/gostd/go/printer/printer_test.go.html#7594251">offs</a></span>&nbsp;<span class="op" id="7594573">=</span>&nbsp;<span class="ident" id="7594575"><a href="/gostd/go/printer/printer_test.go.html#7594266">i</a></span>&nbsp;<span class="op" id="7594577">+</span>&nbsp;<span class="num" id="7594579">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594590">if</span>&nbsp;<span class="ident" id="7594593"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594596">.</span><span class="ident" id="7594597"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7594600">(</span><span class="op" id="7594601">)</span>&nbsp;<span class="op" id="7594603">&gt;</span>&nbsp;<span class="num" id="7594605">0</span>&nbsp;<span class="op" id="7594607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594611">return</span>&nbsp;<span class="ident" id="7594618"><a href="/gostd/go/printer/printer_test.go.html#7592397">errors</a></span><span class="op" id="7594624">.</span><span class="ident" id="7594625"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="7594628">(</span><span class="ident" id="7594629"><a href="/gostd/go/printer/printer_test.go.html#7594025">buf</a></span><span class="op" id="7594632">.</span><span class="ident" id="7594633"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7594639">(</span><span class="op" id="7594640">)</span><span class="op" id="7594641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594647">return</span>&nbsp;<span class="builtintype" id="7594654">nil</span><br>
<span class="lineno"></span><span class="op" id="7594658">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="7594661">func</span>&nbsp;<span class="ident" id="7594666">runcheck</span><span class="op" id="7594674">(</span><span class="ident" id="7594675">t</span>&nbsp;<span class="op" id="7594677">*</span><span class="ident" id="7594678"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7594685">.</span><span class="ident" id="7594686"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7594687">,</span>&nbsp;<span class="ident" id="7594689">source</span><span class="op" id="7594695">,</span>&nbsp;<span class="ident" id="7594697">golden</span>&nbsp;<span class="builtintype" id="7594704">string</span><span class="op" id="7594710">,</span>&nbsp;<span class="ident" id="7594712">mode</span>&nbsp;<span class="ident" id="7594717"><a href="/gostd/go/printer/printer_test.go.html#7592656">checkMode</a></span><span class="op" id="7594726">)</span>&nbsp;<span class="op" id="7594728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594731">src</span><span class="op" id="7594734">,</span>&nbsp;<span class="ident" id="7594736">err</span>&nbsp;<span class="op" id="7594740">:=</span>&nbsp;<span class="ident" id="7594743"><a href="/gostd/go/printer/printer_test.go.html#7592457">ioutil</a></span><span class="op" id="7594749">.</span><span class="ident" id="7594750"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="7594758">(</span><span class="ident" id="7594759"><a href="/gostd/go/printer/printer_test.go.html#7594689">source</a></span><span class="op" id="7594765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594768">if</span>&nbsp;<span class="ident" id="7594771"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7594775">!=</span>&nbsp;<span class="builtintype" id="7594778">nil</span>&nbsp;<span class="op" id="7594782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594786"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7594787">.</span><span class="ident" id="7594788"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7594793">(</span><span class="ident" id="7594794"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span><span class="op" id="7594797">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594801">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594813">res</span><span class="op" id="7594816">,</span>&nbsp;<span class="ident" id="7594818"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7594822">:=</span>&nbsp;<span class="ident" id="7594825"><a href="/gostd/go/printer/printer_test.go.html#7592902">format</a></span><span class="op" id="7594831">(</span><span class="ident" id="7594832"><a href="/gostd/go/printer/printer_test.go.html#7594731">src</a></span><span class="op" id="7594835">,</span>&nbsp;<span class="ident" id="7594837"><a href="/gostd/go/printer/printer_test.go.html#7594712">mode</a></span><span class="op" id="7594841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594844">if</span>&nbsp;<span class="ident" id="7594847"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7594851">!=</span>&nbsp;<span class="builtintype" id="7594854">nil</span>&nbsp;<span class="op" id="7594858">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7594862"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7594863">.</span><span class="ident" id="7594864"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7594869">(</span><span class="ident" id="7594870"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span><span class="op" id="7594873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594877">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7594885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7594889">//&nbsp;update&nbsp;golden&nbsp;files&nbsp;if&nbsp;necessary</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594926">if</span>&nbsp;<span class="op" id="7594929">*</span><span class="ident" id="7594930"><a href="/gostd/go/printer/printer_test.go.html#7592560">update</a></span>&nbsp;<span class="op" id="7594937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7594941">if</span>&nbsp;<span class="ident" id="7594944">err</span>&nbsp;<span class="op" id="7594948">:=</span>&nbsp;<span class="ident" id="7594951"><a href="/gostd/go/printer/printer_test.go.html#7592457">ioutil</a></span><span class="op" id="7594957">.</span><span class="ident" id="7594958"><a href="/gostd/io/ioutil/ioutil.go.html#3766490">WriteFile</a></span><span class="op" id="7594967">(</span><span class="ident" id="7594968"><a href="/gostd/go/printer/printer_test.go.html#7594697">golden</a></span><span class="op" id="7594974">,</span>&nbsp;<span class="ident" id="7594976"><a href="/gostd/go/printer/printer_test.go.html#7594813">res</a></span><span class="op" id="7594979">,</span>&nbsp;<span class="num" id="7594981">0644</span><span class="op" id="7594985">)</span><span class="op" id="7594986">;</span>&nbsp;<span class="ident" id="7594988"><a href="/gostd/go/printer/printer_test.go.html#7594944">err</a></span>&nbsp;<span class="op" id="7594992">!=</span>&nbsp;<span class="builtintype" id="7594995">nil</span>&nbsp;<span class="op" id="7594999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595004"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7595005">.</span><span class="ident" id="7595006"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7595011">(</span><span class="ident" id="7595012"><a href="/gostd/go/printer/printer_test.go.html#7594944">err</a></span><span class="op" id="7595015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595023">return</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595035">//&nbsp;get&nbsp;golden</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595050">gld</span><span class="op" id="7595053">,</span>&nbsp;<span class="ident" id="7595055"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7595059">:=</span>&nbsp;<span class="ident" id="7595062"><a href="/gostd/go/printer/printer_test.go.html#7592457">ioutil</a></span><span class="op" id="7595068">.</span><span class="ident" id="7595069"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="7595077">(</span><span class="ident" id="7595078"><a href="/gostd/go/printer/printer_test.go.html#7594697">golden</a></span><span class="op" id="7595084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595087">if</span>&nbsp;<span class="ident" id="7595090"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7595094">!=</span>&nbsp;<span class="builtintype" id="7595097">nil</span>&nbsp;<span class="op" id="7595101">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595105"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7595106">.</span><span class="ident" id="7595107"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7595112">(</span><span class="ident" id="7595113"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span><span class="op" id="7595116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595120">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595132">//&nbsp;formatted&nbsp;source&nbsp;and&nbsp;golden&nbsp;must&nbsp;be&nbsp;the&nbsp;same</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595181">if</span>&nbsp;<span class="ident" id="7595184">err</span>&nbsp;<span class="op" id="7595188">:=</span>&nbsp;<span class="ident" id="7595191"><a href="/gostd/go/printer/printer_test.go.html#7593973">diff</a></span><span class="op" id="7595195">(</span><span class="ident" id="7595196"><a href="/gostd/go/printer/printer_test.go.html#7594689">source</a></span><span class="op" id="7595202">,</span>&nbsp;<span class="ident" id="7595204"><a href="/gostd/go/printer/printer_test.go.html#7594697">golden</a></span><span class="op" id="7595210">,</span>&nbsp;<span class="ident" id="7595212"><a href="/gostd/go/printer/printer_test.go.html#7594813">res</a></span><span class="op" id="7595215">,</span>&nbsp;<span class="ident" id="7595217"><a href="/gostd/go/printer/printer_test.go.html#7595050">gld</a></span><span class="op" id="7595220">)</span><span class="op" id="7595221">;</span>&nbsp;<span class="ident" id="7595223"><a href="/gostd/go/printer/printer_test.go.html#7595184">err</a></span>&nbsp;<span class="op" id="7595227">!=</span>&nbsp;<span class="builtintype" id="7595230">nil</span>&nbsp;<span class="op" id="7595234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595238"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7595239">.</span><span class="ident" id="7595240"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7595245">(</span><span class="ident" id="7595246"><a href="/gostd/go/printer/printer_test.go.html#7595184">err</a></span><span class="op" id="7595249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595253">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595265">if</span>&nbsp;<span class="ident" id="7595268"><a href="/gostd/go/printer/printer_test.go.html#7594712">mode</a></span><span class="op" id="7595272">&amp;</span><span class="ident" id="7595273"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span>&nbsp;<span class="op" id="7595284">!=</span>&nbsp;<span class="num" id="7595287">0</span>&nbsp;<span class="op" id="7595289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595293">//&nbsp;formatting&nbsp;golden&nbsp;must&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595335">//&nbsp;(This&nbsp;is&nbsp;very&nbsp;difficult&nbsp;to&nbsp;achieve&nbsp;in&nbsp;general&nbsp;and&nbsp;for&nbsp;now</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595398">//&nbsp;it&nbsp;is&nbsp;only&nbsp;checked&nbsp;for&nbsp;files&nbsp;explicitly&nbsp;marked&nbsp;as&nbsp;such.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595460"><a href="/gostd/go/printer/printer_test.go.html#7594813">res</a></span><span class="op" id="7595463">,</span>&nbsp;<span class="ident" id="7595465"><a href="/gostd/go/printer/printer_test.go.html#7594736">err</a></span>&nbsp;<span class="op" id="7595469">=</span>&nbsp;<span class="ident" id="7595471"><a href="/gostd/go/printer/printer_test.go.html#7592902">format</a></span><span class="op" id="7595477">(</span><span class="ident" id="7595478"><a href="/gostd/go/printer/printer_test.go.html#7595050">gld</a></span><span class="op" id="7595481">,</span>&nbsp;<span class="ident" id="7595483"><a href="/gostd/go/printer/printer_test.go.html#7594712">mode</a></span><span class="op" id="7595487">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595491">if</span>&nbsp;<span class="ident" id="7595494">err</span>&nbsp;<span class="op" id="7595498">:=</span>&nbsp;<span class="ident" id="7595501"><a href="/gostd/go/printer/printer_test.go.html#7593973">diff</a></span><span class="op" id="7595505">(</span><span class="ident" id="7595506"><a href="/gostd/go/printer/printer_test.go.html#7594697">golden</a></span><span class="op" id="7595512">,</span>&nbsp;<span class="ident" id="7595514"><a href="/gostd/go/printer/printer_test.go.html#7592415">fmt</a></span><span class="op" id="7595517">.</span><span class="ident" id="7595518"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7595525">(</span><span class="string" id="7595526">&#34;format(%s)&#34;</span><span class="op" id="7595538">,</span>&nbsp;<span class="ident" id="7595540"><a href="/gostd/go/printer/printer_test.go.html#7594697">golden</a></span><span class="op" id="7595546">)</span><span class="op" id="7595547">,</span>&nbsp;<span class="ident" id="7595549"><a href="/gostd/go/printer/printer_test.go.html#7595050">gld</a></span><span class="op" id="7595552">,</span>&nbsp;<span class="ident" id="7595554"><a href="/gostd/go/printer/printer_test.go.html#7594813">res</a></span><span class="op" id="7595557">)</span><span class="op" id="7595558">;</span>&nbsp;<span class="ident" id="7595560"><a href="/gostd/go/printer/printer_test.go.html#7595494">err</a></span>&nbsp;<span class="op" id="7595564">!=</span>&nbsp;<span class="builtintype" id="7595567">nil</span>&nbsp;<span class="op" id="7595571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595576"><a href="/gostd/go/printer/printer_test.go.html#7594675">t</a></span><span class="op" id="7595577">.</span><span class="ident" id="7595578"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7595584">(</span><span class="string" id="7595585">&#34;golden&nbsp;is&nbsp;not&nbsp;idempotent:&nbsp;%s&#34;</span><span class="op" id="7595615">,</span>&nbsp;<span class="ident" id="7595617"><a href="/gostd/go/printer/printer_test.go.html#7595494">err</a></span><span class="op" id="7595620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595627">}</span><br>
<span class="lineno"></span><span class="op" id="7595629">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7595632">func</span>&nbsp;<span class="ident" id="7595637">check</span><span class="op" id="7595642">(</span><span class="ident" id="7595643">t</span>&nbsp;<span class="op" id="7595645">*</span><span class="ident" id="7595646"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7595653">.</span><span class="ident" id="7595654"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7595655">,</span>&nbsp;<span class="ident" id="7595657">source</span><span class="op" id="7595663">,</span>&nbsp;<span class="ident" id="7595665">golden</span>&nbsp;<span class="builtintype" id="7595672">string</span><span class="op" id="7595678">,</span>&nbsp;<span class="ident" id="7595680">mode</span>&nbsp;<span class="ident" id="7595685"><a href="/gostd/go/printer/printer_test.go.html#7592656">checkMode</a></span><span class="op" id="7595694">)</span>&nbsp;<span class="op" id="7595696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595699">//&nbsp;run&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595716">cc</span>&nbsp;<span class="op" id="7595719">:=</span>&nbsp;<span class="builtinfunc" id="7595722">make</span><span class="op" id="7595726">(</span><span class="keyword" id="7595727">chan</span>&nbsp;<span class="builtintype" id="7595732">int</span><span class="op" id="7595735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595738">go</span>&nbsp;<span class="keyword" id="7595741">func</span><span class="op" id="7595745">(</span><span class="op" id="7595746">)</span>&nbsp;<span class="op" id="7595748">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595752"><a href="/gostd/go/printer/printer_test.go.html#7594666">runcheck</a></span><span class="op" id="7595760">(</span><span class="ident" id="7595761"><a href="/gostd/go/printer/printer_test.go.html#7595643">t</a></span><span class="op" id="7595762">,</span>&nbsp;<span class="ident" id="7595764"><a href="/gostd/go/printer/printer_test.go.html#7595657">source</a></span><span class="op" id="7595770">,</span>&nbsp;<span class="ident" id="7595772"><a href="/gostd/go/printer/printer_test.go.html#7595665">golden</a></span><span class="op" id="7595778">,</span>&nbsp;<span class="ident" id="7595780"><a href="/gostd/go/printer/printer_test.go.html#7595680">mode</a></span><span class="op" id="7595784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595788"><a href="/gostd/go/printer/printer_test.go.html#7595716">cc</a></span>&nbsp;<span class="op" id="7595791">&lt;-</span>&nbsp;<span class="num" id="7595794">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7595797">}</span><span class="op" id="7595798">(</span><span class="op" id="7595799">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595803">//&nbsp;wait&nbsp;with&nbsp;timeout</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595825">select</span>&nbsp;<span class="op" id="7595832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7595835">case</span>&nbsp;<span class="op" id="7595840">&lt;-</span><span class="ident" id="7595842"><a href="/gostd/go/printer/printer_test.go.html#7592498">time</a></span><span class="op" id="7595846">.</span><span class="ident" id="7595847"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="7595852">(</span><span class="num" id="7595853">10</span>&nbsp;<span class="op" id="7595856">*</span>&nbsp;<span class="ident" id="7595858"><a href="/gostd/go/printer/printer_test.go.html#7592498">time</a></span><span class="op" id="7595862">.</span><span class="ident" id="7595863"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="7595869">)</span><span class="op" id="7595870">:</span>&nbsp;<span class="comment" id="7595872">//&nbsp;plenty&nbsp;of&nbsp;a&nbsp;safety&nbsp;margin,&nbsp;even&nbsp;for&nbsp;very&nbsp;slow&nbsp;machines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7595932">//&nbsp;test&nbsp;running&nbsp;past&nbsp;time&nbsp;out</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7595964"><a href="/gostd/go/printer/printer_test.go.html#7595643">t</a></span><span class="op" id="7595965">.</span><span class="ident" id="7595966"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7595972">(</span><span class="string" id="7595973">&#34;%s:&nbsp;running&nbsp;too&nbsp;slowly&#34;</span><span class="op" id="7595997">,</span>&nbsp;<span class="ident" id="7595999"><a href="/gostd/go/printer/printer_test.go.html#7595657">source</a></span><span class="op" id="7596005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7596008">case</span>&nbsp;<span class="op" id="7596013">&lt;-</span><span class="ident" id="7596015"><a href="/gostd/go/printer/printer_test.go.html#7595716">cc</a></span><span class="op" id="7596017">:</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7596021">//&nbsp;test&nbsp;finished&nbsp;within&nbsp;allotted&nbsp;time&nbsp;margin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596067">}</span><br>
<span class="lineno"></span><span class="op" id="7596069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596072">type</span>&nbsp;<span class="ident" id="7596077">entry</span>&nbsp;<span class="keyword" id="7596083">struct</span>&nbsp;<span class="op" id="7596090">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596093">source</span><span class="op" id="7596099">,</span>&nbsp;<span class="ident" id="7596101">golden</span>&nbsp;<span class="builtintype" id="7596108">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596116">mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596131"><a href="/gostd/go/printer/printer_test.go.html#7592656">checkMode</a></span><br>
<span class="lineno"></span><span class="op" id="7596141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7596144">//&nbsp;Use&nbsp;go&nbsp;test&nbsp;-update&nbsp;to&nbsp;create/update&nbsp;the&nbsp;respective&nbsp;golden&nbsp;files.</span><br>
<span class="lineno">185</span><span class="keyword" id="7596213">var</span>&nbsp;<span class="ident" id="7596217">data</span>&nbsp;<span class="op" id="7596222">=</span>&nbsp;<span class="op" id="7596224">[</span><span class="op" id="7596225">]</span><span class="ident" id="7596226"><a href="/gostd/go/printer/printer_test.go.html#7596077">entry</a></span><span class="op" id="7596231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596234">{</span><span class="string" id="7596235">&#34;empty.input&#34;</span><span class="op" id="7596248">,</span>&nbsp;<span class="string" id="7596250">&#34;empty.golden&#34;</span><span class="op" id="7596264">,</span>&nbsp;<span class="ident" id="7596266"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596276">}</span><span class="op" id="7596277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596280">{</span><span class="string" id="7596281">&#34;comments.input&#34;</span><span class="op" id="7596297">,</span>&nbsp;<span class="string" id="7596299">&#34;comments.golden&#34;</span><span class="op" id="7596316">,</span>&nbsp;<span class="num" id="7596318">0</span><span class="op" id="7596319">}</span><span class="op" id="7596320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596323">{</span><span class="string" id="7596324">&#34;comments.input&#34;</span><span class="op" id="7596340">,</span>&nbsp;<span class="string" id="7596342">&#34;comments.x&#34;</span><span class="op" id="7596354">,</span>&nbsp;<span class="ident" id="7596356"><a href="/gostd/go/printer/printer_test.go.html#7592681">export</a></span><span class="op" id="7596362">}</span><span class="op" id="7596363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596366">{</span><span class="string" id="7596367">&#34;comments2.input&#34;</span><span class="op" id="7596384">,</span>&nbsp;<span class="string" id="7596386">&#34;comments2.golden&#34;</span><span class="op" id="7596404">,</span>&nbsp;<span class="ident" id="7596406"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596416">}</span><span class="op" id="7596417">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596420">{</span><span class="string" id="7596421">&#34;linebreaks.input&#34;</span><span class="op" id="7596439">,</span>&nbsp;<span class="string" id="7596441">&#34;linebreaks.golden&#34;</span><span class="op" id="7596460">,</span>&nbsp;<span class="ident" id="7596462"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596472">}</span><span class="op" id="7596473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596476">{</span><span class="string" id="7596477">&#34;expressions.input&#34;</span><span class="op" id="7596496">,</span>&nbsp;<span class="string" id="7596498">&#34;expressions.golden&#34;</span><span class="op" id="7596518">,</span>&nbsp;<span class="ident" id="7596520"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596530">}</span><span class="op" id="7596531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596534">{</span><span class="string" id="7596535">&#34;expressions.input&#34;</span><span class="op" id="7596554">,</span>&nbsp;<span class="string" id="7596556">&#34;expressions.raw&#34;</span><span class="op" id="7596573">,</span>&nbsp;<span class="ident" id="7596575"><a href="/gostd/go/printer/printer_test.go.html#7592711">rawFormat</a></span>&nbsp;<span class="op" id="7596585">|</span>&nbsp;<span class="ident" id="7596587"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596597">}</span><span class="op" id="7596598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596601">{</span><span class="string" id="7596602">&#34;declarations.input&#34;</span><span class="op" id="7596622">,</span>&nbsp;<span class="string" id="7596624">&#34;declarations.golden&#34;</span><span class="op" id="7596645">,</span>&nbsp;<span class="num" id="7596647">0</span><span class="op" id="7596648">}</span><span class="op" id="7596649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596652">{</span><span class="string" id="7596653">&#34;statements.input&#34;</span><span class="op" id="7596671">,</span>&nbsp;<span class="string" id="7596673">&#34;statements.golden&#34;</span><span class="op" id="7596692">,</span>&nbsp;<span class="num" id="7596694">0</span><span class="op" id="7596695">}</span><span class="op" id="7596696">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7596699">{</span><span class="string" id="7596700">&#34;slow.input&#34;</span><span class="op" id="7596712">,</span>&nbsp;<span class="string" id="7596714">&#34;slow.golden&#34;</span><span class="op" id="7596727">,</span>&nbsp;<span class="ident" id="7596729"><a href="/gostd/go/printer/printer_test.go.html#7592722">idempotent</a></span><span class="op" id="7596739">}</span><span class="op" id="7596740">,</span><br>
<span class="lineno"></span><span class="op" id="7596742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596745">func</span>&nbsp;<span class="ident" id="7596750">TestFiles</span><span class="op" id="7596759">(</span><span class="ident" id="7596760">t</span>&nbsp;<span class="op" id="7596762">*</span><span class="ident" id="7596763"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7596770">.</span><span class="ident" id="7596771"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7596772">)</span>&nbsp;<span class="op" id="7596774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7596777">for</span>&nbsp;<span class="ident" id="7596781">_</span><span class="op" id="7596782">,</span>&nbsp;<span class="ident" id="7596784">e</span>&nbsp;<span class="op" id="7596786">:=</span>&nbsp;<span class="keyword" id="7596789">range</span>&nbsp;<span class="ident" id="7596795"><a href="/gostd/go/printer/printer_test.go.html#7596217">data</a></span>&nbsp;<span class="op" id="7596800">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596804">source</span>&nbsp;<span class="op" id="7596811">:=</span>&nbsp;<span class="ident" id="7596814"><a href="/gostd/go/printer/printer_test.go.html#7592470">filepath</a></span><span class="op" id="7596822">.</span><span class="ident" id="7596823"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="7596827">(</span><span class="ident" id="7596828"><a href="/gostd/go/printer/printer_test.go.html#7592517">dataDir</a></span><span class="op" id="7596835">,</span>&nbsp;<span class="ident" id="7596837"><a href="/gostd/go/printer/printer_test.go.html#7596784">e</a></span><span class="op" id="7596838">.</span><span class="ident" id="7596839"><a href="/gostd/go/printer/printer_test.go.html#7596093">source</a></span><span class="op" id="7596845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596849">golden</span>&nbsp;<span class="op" id="7596856">:=</span>&nbsp;<span class="ident" id="7596859"><a href="/gostd/go/printer/printer_test.go.html#7592470">filepath</a></span><span class="op" id="7596867">.</span><span class="ident" id="7596868"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="7596872">(</span><span class="ident" id="7596873"><a href="/gostd/go/printer/printer_test.go.html#7592517">dataDir</a></span><span class="op" id="7596880">,</span>&nbsp;<span class="ident" id="7596882"><a href="/gostd/go/printer/printer_test.go.html#7596784">e</a></span><span class="op" id="7596883">.</span><span class="ident" id="7596884"><a href="/gostd/go/printer/printer_test.go.html#7596101">golden</a></span><span class="op" id="7596890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7596894"><a href="/gostd/go/printer/printer_test.go.html#7595637">check</a></span><span class="op" id="7596899">(</span><span class="ident" id="7596900"><a href="/gostd/go/printer/printer_test.go.html#7596760">t</a></span><span class="op" id="7596901">,</span>&nbsp;<span class="ident" id="7596903"><a href="/gostd/go/printer/printer_test.go.html#7596804">source</a></span><span class="op" id="7596909">,</span>&nbsp;<span class="ident" id="7596911"><a href="/gostd/go/printer/printer_test.go.html#7596849">golden</a></span><span class="op" id="7596917">,</span>&nbsp;<span class="ident" id="7596919"><a href="/gostd/go/printer/printer_test.go.html#7596784">e</a></span><span class="op" id="7596920">.</span><span class="ident" id="7596921"><a href="/gostd/go/printer/printer_test.go.html#7596116">mode</a></span><span class="op" id="7596925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7596929">//&nbsp;TODO(gri)&nbsp;check&nbsp;that&nbsp;golden&nbsp;is&nbsp;idempotent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7596976">//check(t,&nbsp;golden,&nbsp;golden,&nbsp;e.mode)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7597012">}</span><br>
<span class="lineno"></span><span class="op" id="7597014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7597017">//&nbsp;TestLineComments,&nbsp;using&nbsp;a&nbsp;simple&nbsp;test&nbsp;case,&nbsp;checks&nbsp;that&nbsp;consecutive&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="7597093">//&nbsp;comments&nbsp;are&nbsp;properly&nbsp;terminated&nbsp;with&nbsp;a&nbsp;newline&nbsp;even&nbsp;if&nbsp;the&nbsp;AST&nbsp;position</span><br>
<span class="lineno">210</span><span class="comment" id="7597169">//&nbsp;information&nbsp;is&nbsp;incorrect.</span><br>
<span class="lineno"></span><span class="comment" id="7597198">//</span><br>
<span class="lineno"></span><span class="keyword" id="7597201">func</span>&nbsp;<span class="ident" id="7597206">TestLineComments</span><span class="op" id="7597222">(</span><span class="ident" id="7597223">t</span>&nbsp;<span class="op" id="7597225">*</span><span class="ident" id="7597226"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7597233">.</span><span class="ident" id="7597234"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7597235">)</span>&nbsp;<span class="op" id="7597237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597240">const</span>&nbsp;<span class="ident" id="7597246">src</span>&nbsp;<span class="op" id="7597250">=</span>&nbsp;<span class="string" id="7597252">`//&nbsp;comment&nbsp;1<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment&nbsp;2<br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;comment&nbsp;3<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;main<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597313">fset</span>&nbsp;<span class="op" id="7597318">:=</span>&nbsp;<span class="ident" id="7597321"><a href="/gostd/go/printer/printer_test.go.html#7592445">token</a></span><span class="op" id="7597326">.</span><span class="ident" id="7597327"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="7597337">(</span><span class="op" id="7597338">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597341">f</span><span class="op" id="7597342">,</span>&nbsp;<span class="ident" id="7597344">err</span>&nbsp;<span class="op" id="7597348">:=</span>&nbsp;<span class="ident" id="7597351"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7597357">.</span><span class="ident" id="7597358"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7597367">(</span><span class="ident" id="7597368"><a href="/gostd/go/printer/printer_test.go.html#7597313">fset</a></span><span class="op" id="7597372">,</span>&nbsp;<span class="string" id="7597374">&#34;&#34;</span><span class="op" id="7597376">,</span>&nbsp;<span class="ident" id="7597378"><a href="/gostd/go/printer/printer_test.go.html#7597246">src</a></span><span class="op" id="7597381">,</span>&nbsp;<span class="ident" id="7597383"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7597389">.</span><span class="ident" id="7597390"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7597403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597406">if</span>&nbsp;<span class="ident" id="7597409"><a href="/gostd/go/printer/printer_test.go.html#7597344">err</a></span>&nbsp;<span class="op" id="7597413">!=</span>&nbsp;<span class="builtintype" id="7597416">nil</span>&nbsp;<span class="op" id="7597420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7597424">panic</span><span class="op" id="7597429">(</span><span class="ident" id="7597430"><a href="/gostd/go/printer/printer_test.go.html#7597344">err</a></span><span class="op" id="7597433">)</span>&nbsp;<span class="comment" id="7597435">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7597453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597457">var</span>&nbsp;<span class="ident" id="7597461">buf</span>&nbsp;<span class="ident" id="7597465"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7597470">.</span><span class="ident" id="7597471"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597479"><a href="/gostd/go/printer/printer_test.go.html#7597313">fset</a></span>&nbsp;<span class="op" id="7597484">=</span>&nbsp;<span class="ident" id="7597486"><a href="/gostd/go/printer/printer_test.go.html#7592445">token</a></span><span class="op" id="7597491">.</span><span class="ident" id="7597492"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="7597502">(</span><span class="op" id="7597503">)</span>&nbsp;<span class="comment" id="7597505">//&nbsp;use&nbsp;the&nbsp;wrong&nbsp;file&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597532"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7597538">(</span><span class="op" id="7597539">&amp;</span><span class="ident" id="7597540"><a href="/gostd/go/printer/printer_test.go.html#7597461">buf</a></span><span class="op" id="7597543">,</span>&nbsp;<span class="ident" id="7597545"><a href="/gostd/go/printer/printer_test.go.html#7597313">fset</a></span><span class="op" id="7597549">,</span>&nbsp;<span class="ident" id="7597551"><a href="/gostd/go/printer/printer_test.go.html#7597341">f</a></span><span class="op" id="7597552">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597556">nlines</span>&nbsp;<span class="op" id="7597563">:=</span>&nbsp;<span class="num" id="7597566">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597569">for</span>&nbsp;<span class="ident" id="7597573">_</span><span class="op" id="7597574">,</span>&nbsp;<span class="ident" id="7597576">ch</span>&nbsp;<span class="op" id="7597579">:=</span>&nbsp;<span class="keyword" id="7597582">range</span>&nbsp;<span class="ident" id="7597588"><a href="/gostd/go/printer/printer_test.go.html#7597461">buf</a></span><span class="op" id="7597591">.</span><span class="ident" id="7597592"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7597597">(</span><span class="op" id="7597598">)</span>&nbsp;<span class="op" id="7597600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597604">if</span>&nbsp;<span class="ident" id="7597607"><a href="/gostd/go/printer/printer_test.go.html#7597576">ch</a></span>&nbsp;<span class="op" id="7597610">==</span>&nbsp;<span class="string" id="7597613">&#39;\n&#39;</span>&nbsp;<span class="op" id="7597618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597623"><a href="/gostd/go/printer/printer_test.go.html#7597556">nlines</a></span><span class="op" id="7597629">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7597634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7597637">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597641">const</span>&nbsp;<span class="ident" id="7597647">expected</span>&nbsp;<span class="op" id="7597656">=</span>&nbsp;<span class="num" id="7597658">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597661">if</span>&nbsp;<span class="ident" id="7597664"><a href="/gostd/go/printer/printer_test.go.html#7597556">nlines</a></span>&nbsp;<span class="op" id="7597671">&lt;</span>&nbsp;<span class="ident" id="7597673"><a href="/gostd/go/printer/printer_test.go.html#7597647">expected</a></span>&nbsp;<span class="op" id="7597682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597686"><a href="/gostd/go/printer/printer_test.go.html#7597223">t</a></span><span class="op" id="7597687">.</span><span class="ident" id="7597688"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7597694">(</span><span class="string" id="7597695">&#34;got&nbsp;%d,&nbsp;expected&nbsp;%d\n&#34;</span><span class="op" id="7597718">,</span>&nbsp;<span class="ident" id="7597720"><a href="/gostd/go/printer/printer_test.go.html#7597556">nlines</a></span><span class="op" id="7597726">,</span>&nbsp;<span class="ident" id="7597728"><a href="/gostd/go/printer/printer_test.go.html#7597647">expected</a></span><span class="op" id="7597736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7597740"><a href="/gostd/go/printer/printer_test.go.html#7597223">t</a></span><span class="op" id="7597741">.</span><span class="ident" id="7597742"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7597748">(</span><span class="string" id="7597749">&#34;result:\n%s&#34;</span><span class="op" id="7597762">,</span>&nbsp;<span class="ident" id="7597764"><a href="/gostd/go/printer/printer_test.go.html#7597461">buf</a></span><span class="op" id="7597767">.</span><span class="ident" id="7597768"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7597773">(</span><span class="op" id="7597774">)</span><span class="op" id="7597775">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7597778">}</span><br>
<span class="lineno"></span><span class="op" id="7597780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7597783">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;printer&nbsp;can&nbsp;be&nbsp;invoked&nbsp;during&nbsp;initialization.</span><br>
<span class="lineno"></span><span class="keyword" id="7597848">func</span>&nbsp;<span class="ident" id="7597853">init</span><span class="op" id="7597857">(</span><span class="op" id="7597858">)</span>&nbsp;<span class="op" id="7597860">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597863">const</span>&nbsp;<span class="ident" id="7597869">name</span>&nbsp;<span class="op" id="7597874">=</span>&nbsp;<span class="string" id="7597876">&#34;foobar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597886">var</span>&nbsp;<span class="ident" id="7597890">buf</span>&nbsp;<span class="ident" id="7597894"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7597899">.</span><span class="ident" id="7597900"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7597908">if</span>&nbsp;<span class="ident" id="7597911">err</span>&nbsp;<span class="op" id="7597915">:=</span>&nbsp;<span class="ident" id="7597918"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7597924">(</span><span class="op" id="7597925">&amp;</span><span class="ident" id="7597926"><a href="/gostd/go/printer/printer_test.go.html#7597890">buf</a></span><span class="op" id="7597929">,</span>&nbsp;<span class="ident" id="7597931"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7597935">,</span>&nbsp;<span class="op" id="7597937">&amp;</span><span class="ident" id="7597938"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7597941">.</span><span class="ident" id="7597942"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="7597947">{</span><span class="ident" id="7597948"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7597952">:</span>&nbsp;<span class="ident" id="7597954"><a href="/gostd/go/printer/printer_test.go.html#7597869">name</a></span><span class="op" id="7597958">}</span><span class="op" id="7597959">)</span><span class="op" id="7597960">;</span>&nbsp;<span class="ident" id="7597962"><a href="/gostd/go/printer/printer_test.go.html#7597911">err</a></span>&nbsp;<span class="op" id="7597966">!=</span>&nbsp;<span class="builtintype" id="7597969">nil</span>&nbsp;<span class="op" id="7597973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7597977">panic</span><span class="op" id="7597982">(</span><span class="ident" id="7597983"><a href="/gostd/go/printer/printer_test.go.html#7597911">err</a></span><span class="op" id="7597986">)</span>&nbsp;<span class="comment" id="7597988">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598006">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598009">//&nbsp;in&nbsp;debug&nbsp;mode,&nbsp;the&nbsp;result&nbsp;contains&nbsp;additional&nbsp;information;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598072">//&nbsp;ignore&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598086">if</span>&nbsp;<span class="ident" id="7598089">s</span>&nbsp;<span class="op" id="7598091">:=</span>&nbsp;<span class="ident" id="7598094"><a href="/gostd/go/printer/printer_test.go.html#7597890">buf</a></span><span class="op" id="7598097">.</span><span class="ident" id="7598098"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7598104">(</span><span class="op" id="7598105">)</span><span class="op" id="7598106">;</span>&nbsp;<span class="op" id="7598108">!</span><span class="ident" id="7598109"><a href="/gostd/go/printer/printer.go.html#5842897">debug</a></span>&nbsp;<span class="op" id="7598115">&amp;&amp;</span>&nbsp;<span class="ident" id="7598118"><a href="/gostd/go/printer/printer_test.go.html#7598089">s</a></span>&nbsp;<span class="op" id="7598120">!=</span>&nbsp;<span class="ident" id="7598123"><a href="/gostd/go/printer/printer_test.go.html#7597869">name</a></span>&nbsp;<span class="op" id="7598128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7598132">panic</span><span class="op" id="7598137">(</span><span class="string" id="7598138">&#34;got&nbsp;&#34;</span>&nbsp;<span class="op" id="7598145">+</span>&nbsp;<span class="ident" id="7598147"><a href="/gostd/go/printer/printer_test.go.html#7598089">s</a></span>&nbsp;<span class="op" id="7598149">+</span>&nbsp;<span class="string" id="7598151">&#34;,&nbsp;want&nbsp;&#34;</span>&nbsp;<span class="op" id="7598161">+</span>&nbsp;<span class="ident" id="7598163"><a href="/gostd/go/printer/printer_test.go.html#7597869">name</a></span><span class="op" id="7598167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598170">}</span><br>
<span class="lineno">255</span><span class="op" id="7598172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7598175">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;printer&nbsp;doesn&#39;t&nbsp;crash&nbsp;if&nbsp;the&nbsp;AST&nbsp;contains&nbsp;BadXXX&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="7598250">func</span>&nbsp;<span class="ident" id="7598255">TestBadNodes</span><span class="op" id="7598267">(</span><span class="ident" id="7598268">t</span>&nbsp;<span class="op" id="7598270">*</span><span class="ident" id="7598271"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7598278">.</span><span class="ident" id="7598279"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7598280">)</span>&nbsp;<span class="op" id="7598282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598285">const</span>&nbsp;<span class="ident" id="7598291">src</span>&nbsp;<span class="op" id="7598295">=</span>&nbsp;<span class="string" id="7598297">&#34;package&nbsp;p\n(&#34;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598313">const</span>&nbsp;<span class="ident" id="7598319">res</span>&nbsp;<span class="op" id="7598323">=</span>&nbsp;<span class="string" id="7598325">&#34;package&nbsp;p\nBadDecl\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598349">f</span><span class="op" id="7598350">,</span>&nbsp;<span class="ident" id="7598352">err</span>&nbsp;<span class="op" id="7598356">:=</span>&nbsp;<span class="ident" id="7598359"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7598365">.</span><span class="ident" id="7598366"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7598375">(</span><span class="ident" id="7598376"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7598380">,</span>&nbsp;<span class="string" id="7598382">&#34;&#34;</span><span class="op" id="7598384">,</span>&nbsp;<span class="ident" id="7598386"><a href="/gostd/go/printer/printer_test.go.html#7598291">src</a></span><span class="op" id="7598389">,</span>&nbsp;<span class="ident" id="7598391"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7598397">.</span><span class="ident" id="7598398"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7598411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598414">if</span>&nbsp;<span class="ident" id="7598417"><a href="/gostd/go/printer/printer_test.go.html#7598352">err</a></span>&nbsp;<span class="op" id="7598421">==</span>&nbsp;<span class="builtintype" id="7598424">nil</span>&nbsp;<span class="op" id="7598428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598432"><a href="/gostd/go/printer/printer_test.go.html#7598268">t</a></span><span class="op" id="7598433">.</span><span class="ident" id="7598434"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7598439">(</span><span class="string" id="7598440">&#34;expected&nbsp;illegal&nbsp;program&#34;</span><span class="op" id="7598466">)</span>&nbsp;<span class="comment" id="7598468">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598486">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598489">var</span>&nbsp;<span class="ident" id="7598493">buf</span>&nbsp;<span class="ident" id="7598497"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7598502">.</span><span class="ident" id="7598503"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598511"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7598517">(</span><span class="op" id="7598518">&amp;</span><span class="ident" id="7598519"><a href="/gostd/go/printer/printer_test.go.html#7598493">buf</a></span><span class="op" id="7598522">,</span>&nbsp;<span class="ident" id="7598524"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7598528">,</span>&nbsp;<span class="ident" id="7598530"><a href="/gostd/go/printer/printer_test.go.html#7598349">f</a></span><span class="op" id="7598531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598534">if</span>&nbsp;<span class="ident" id="7598537"><a href="/gostd/go/printer/printer_test.go.html#7598493">buf</a></span><span class="op" id="7598540">.</span><span class="ident" id="7598541"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7598547">(</span><span class="op" id="7598548">)</span>&nbsp;<span class="op" id="7598550">!=</span>&nbsp;<span class="ident" id="7598553"><a href="/gostd/go/printer/printer_test.go.html#7598319">res</a></span>&nbsp;<span class="op" id="7598557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598561"><a href="/gostd/go/printer/printer_test.go.html#7598268">t</a></span><span class="op" id="7598562">.</span><span class="ident" id="7598563"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7598569">(</span><span class="string" id="7598570">&#34;got&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7598591">,</span>&nbsp;<span class="ident" id="7598593"><a href="/gostd/go/printer/printer_test.go.html#7598493">buf</a></span><span class="op" id="7598596">.</span><span class="ident" id="7598597"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7598603">(</span><span class="op" id="7598604">)</span><span class="op" id="7598605">,</span>&nbsp;<span class="ident" id="7598607"><a href="/gostd/go/printer/printer_test.go.html#7598319">res</a></span><span class="op" id="7598610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7598613">}</span><br>
<span class="lineno">270</span><span class="op" id="7598615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7598618">//&nbsp;testComment&nbsp;verifies&nbsp;that&nbsp;f&nbsp;can&nbsp;be&nbsp;parsed&nbsp;again&nbsp;after&nbsp;printing&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="7598687">//&nbsp;with&nbsp;its&nbsp;first&nbsp;comment&nbsp;set&nbsp;to&nbsp;comment&nbsp;at&nbsp;any&nbsp;possible&nbsp;source&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="7598759">func</span>&nbsp;<span class="ident" id="7598764">testComment</span><span class="op" id="7598775">(</span><span class="ident" id="7598776">t</span>&nbsp;<span class="op" id="7598778">*</span><span class="ident" id="7598779"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7598786">.</span><span class="ident" id="7598787"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7598788">,</span>&nbsp;<span class="ident" id="7598790">f</span>&nbsp;<span class="op" id="7598792">*</span><span class="ident" id="7598793"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7598796">.</span><span class="ident" id="7598797"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="7598801">,</span>&nbsp;<span class="ident" id="7598803">srclen</span>&nbsp;<span class="builtintype" id="7598810">int</span><span class="op" id="7598813">,</span>&nbsp;<span class="ident" id="7598815">comment</span>&nbsp;<span class="op" id="7598823">*</span><span class="ident" id="7598824"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7598827">.</span><span class="ident" id="7598828"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="7598835">)</span>&nbsp;<span class="op" id="7598837">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598840"><a href="/gostd/go/printer/printer_test.go.html#7598790">f</a></span><span class="op" id="7598841">.</span><span class="ident" id="7598842"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="7598850">[</span><span class="num" id="7598851">0</span><span class="op" id="7598852">]</span><span class="op" id="7598853">.</span><span class="ident" id="7598854"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span><span class="op" id="7598858">[</span><span class="num" id="7598859">0</span><span class="op" id="7598860">]</span>&nbsp;<span class="op" id="7598862">=</span>&nbsp;<span class="ident" id="7598864"><a href="/gostd/go/printer/printer_test.go.html#7598815">comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598873">var</span>&nbsp;<span class="ident" id="7598877">buf</span>&nbsp;<span class="ident" id="7598881"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7598886">.</span><span class="ident" id="7598887"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7598895">for</span>&nbsp;<span class="ident" id="7598899">offs</span>&nbsp;<span class="op" id="7598904">:=</span>&nbsp;<span class="num" id="7598907">0</span><span class="op" id="7598908">;</span>&nbsp;<span class="ident" id="7598910"><a href="/gostd/go/printer/printer_test.go.html#7598899">offs</a></span>&nbsp;<span class="op" id="7598915">&lt;=</span>&nbsp;<span class="ident" id="7598918"><a href="/gostd/go/printer/printer_test.go.html#7598803">srclen</a></span><span class="op" id="7598924">;</span>&nbsp;<span class="ident" id="7598926"><a href="/gostd/go/printer/printer_test.go.html#7598899">offs</a></span><span class="op" id="7598930">++</span>&nbsp;<span class="op" id="7598933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7598937"><a href="/gostd/go/printer/printer_test.go.html#7598877">buf</a></span><span class="op" id="7598940">.</span><span class="ident" id="7598941"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="7598946">(</span><span class="op" id="7598947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7598951">//&nbsp;Printing&nbsp;f&nbsp;should&nbsp;result&nbsp;in&nbsp;a&nbsp;correct&nbsp;program&nbsp;no</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7599005">//&nbsp;matter&nbsp;what&nbsp;the&nbsp;(incorrect)&nbsp;comment&nbsp;position&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599059">if</span>&nbsp;<span class="ident" id="7599062">err</span>&nbsp;<span class="op" id="7599066">:=</span>&nbsp;<span class="ident" id="7599069"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7599075">(</span><span class="op" id="7599076">&amp;</span><span class="ident" id="7599077"><a href="/gostd/go/printer/printer_test.go.html#7598877">buf</a></span><span class="op" id="7599080">,</span>&nbsp;<span class="ident" id="7599082"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7599086">,</span>&nbsp;<span class="ident" id="7599088"><a href="/gostd/go/printer/printer_test.go.html#7598790">f</a></span><span class="op" id="7599089">)</span><span class="op" id="7599090">;</span>&nbsp;<span class="ident" id="7599092"><a href="/gostd/go/printer/printer_test.go.html#7599062">err</a></span>&nbsp;<span class="op" id="7599096">!=</span>&nbsp;<span class="builtintype" id="7599099">nil</span>&nbsp;<span class="op" id="7599103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599108"><a href="/gostd/go/printer/printer_test.go.html#7598776">t</a></span><span class="op" id="7599109">.</span><span class="ident" id="7599110"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7599115">(</span><span class="ident" id="7599116"><a href="/gostd/go/printer/printer_test.go.html#7599062">err</a></span><span class="op" id="7599119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599127">if</span>&nbsp;<span class="ident" id="7599130">_</span><span class="op" id="7599131">,</span>&nbsp;<span class="ident" id="7599133">err</span>&nbsp;<span class="op" id="7599137">:=</span>&nbsp;<span class="ident" id="7599140"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7599146">.</span><span class="ident" id="7599147"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7599156">(</span><span class="ident" id="7599157"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7599161">,</span>&nbsp;<span class="string" id="7599163">&#34;&#34;</span><span class="op" id="7599165">,</span>&nbsp;<span class="ident" id="7599167"><a href="/gostd/go/printer/printer_test.go.html#7598877">buf</a></span><span class="op" id="7599170">.</span><span class="ident" id="7599171"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7599176">(</span><span class="op" id="7599177">)</span><span class="op" id="7599178">,</span>&nbsp;<span class="num" id="7599180">0</span><span class="op" id="7599181">)</span><span class="op" id="7599182">;</span>&nbsp;<span class="ident" id="7599184"><a href="/gostd/go/printer/printer_test.go.html#7599133">err</a></span>&nbsp;<span class="op" id="7599188">!=</span>&nbsp;<span class="builtintype" id="7599191">nil</span>&nbsp;<span class="op" id="7599195">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599200"><a href="/gostd/go/printer/printer_test.go.html#7598776">t</a></span><span class="op" id="7599201">.</span><span class="ident" id="7599202"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7599208">(</span><span class="string" id="7599209">&#34;incorrect&nbsp;program&nbsp;for&nbsp;pos&nbsp;=&nbsp;%d:\n%s&#34;</span><span class="op" id="7599246">,</span>&nbsp;<span class="ident" id="7599248"><a href="/gostd/go/printer/printer_test.go.html#7598815">comment</a></span><span class="op" id="7599255">.</span><span class="ident" id="7599256"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7599261">,</span>&nbsp;<span class="ident" id="7599263"><a href="/gostd/go/printer/printer_test.go.html#7598877">buf</a></span><span class="op" id="7599266">.</span><span class="ident" id="7599267"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7599273">(</span><span class="op" id="7599274">)</span><span class="op" id="7599275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7599283">//&nbsp;Position&nbsp;information&nbsp;is&nbsp;just&nbsp;an&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7599328">//&nbsp;Move&nbsp;comment&nbsp;one&nbsp;byte&nbsp;down&nbsp;in&nbsp;the&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599375"><a href="/gostd/go/printer/printer_test.go.html#7598815">comment</a></span><span class="op" id="7599382">.</span><span class="ident" id="7599383"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7599388">++</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599392">}</span><br>
<span class="lineno"></span><span class="op" id="7599394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7599397">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;printer&nbsp;produces&nbsp;a&nbsp;correct&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="7599451">//&nbsp;even&nbsp;if&nbsp;the&nbsp;position&nbsp;information&nbsp;of&nbsp;comments&nbsp;introducing&nbsp;newlines</span><br>
<span class="lineno">295</span><span class="comment" id="7599520">//&nbsp;is&nbsp;incorrect.</span><br>
<span class="lineno"></span><span class="keyword" id="7599537">func</span>&nbsp;<span class="ident" id="7599542">TestBadComments</span><span class="op" id="7599557">(</span><span class="ident" id="7599558">t</span>&nbsp;<span class="op" id="7599560">*</span><span class="ident" id="7599561"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7599568">.</span><span class="ident" id="7599569"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7599570">)</span>&nbsp;<span class="op" id="7599572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599575">const</span>&nbsp;<span class="ident" id="7599581">src</span>&nbsp;<span class="op" id="7599585">=</span>&nbsp;<span class="string" id="7599587">`<br>
<span class="lineno"></span>//&nbsp;first&nbsp;comment&nbsp;-&nbsp;text&nbsp;and&nbsp;position&nbsp;changed&nbsp;by&nbsp;test<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno">300</span>import&nbsp;&#34;fmt&#34;<br>
<span class="lineno"></span>const&nbsp;pi&nbsp;=&nbsp;3.14&nbsp;//&nbsp;rough&nbsp;circle<br>
<span class="lineno"></span>var&nbsp;(<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;x,&nbsp;y,&nbsp;z&nbsp;int&nbsp;=&nbsp;1,&nbsp;2,&nbsp;3<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;u,&nbsp;v&nbsp;float64<br>
<span class="lineno">305</span>)<br>
<span class="lineno"></span>func&nbsp;fibo(n&nbsp;int)&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;n&nbsp;&lt;&nbsp;2&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;n&nbsp;/*&nbsp;seed&nbsp;values&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fibo(n-1)&nbsp;+&nbsp;fibo(n-2)<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599841">f</span><span class="op" id="7599842">,</span>&nbsp;<span class="ident" id="7599844">err</span>&nbsp;<span class="op" id="7599848">:=</span>&nbsp;<span class="ident" id="7599851"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7599857">.</span><span class="ident" id="7599858"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7599867">(</span><span class="ident" id="7599868"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7599872">,</span>&nbsp;<span class="string" id="7599874">&#34;&#34;</span><span class="op" id="7599876">,</span>&nbsp;<span class="ident" id="7599878"><a href="/gostd/go/printer/printer_test.go.html#7599581">src</a></span><span class="op" id="7599881">,</span>&nbsp;<span class="ident" id="7599883"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7599889">.</span><span class="ident" id="7599890"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7599903">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7599906">if</span>&nbsp;<span class="ident" id="7599909"><a href="/gostd/go/printer/printer_test.go.html#7599844">err</a></span>&nbsp;<span class="op" id="7599913">!=</span>&nbsp;<span class="builtintype" id="7599916">nil</span>&nbsp;<span class="op" id="7599920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599924"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7599925">.</span><span class="ident" id="7599926"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7599931">(</span><span class="ident" id="7599932"><a href="/gostd/go/printer/printer_test.go.html#7599844">err</a></span><span class="op" id="7599935">)</span>&nbsp;<span class="comment" id="7599937">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7599955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599959">comment</span>&nbsp;<span class="op" id="7599967">:=</span>&nbsp;<span class="ident" id="7599970"><a href="/gostd/go/printer/printer_test.go.html#7599841">f</a></span><span class="op" id="7599971">.</span><span class="ident" id="7599972"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><span class="op" id="7599980">[</span><span class="num" id="7599981">0</span><span class="op" id="7599982">]</span><span class="op" id="7599983">.</span><span class="ident" id="7599984"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span><span class="op" id="7599988">[</span><span class="num" id="7599989">0</span><span class="op" id="7599990">]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7599993">pos</span>&nbsp;<span class="op" id="7599997">:=</span>&nbsp;<span class="ident" id="7600000"><a href="/gostd/go/printer/printer_test.go.html#7599959">comment</a></span><span class="op" id="7600007">.</span><span class="ident" id="7600008"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="7600011">(</span><span class="op" id="7600012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600015">if</span>&nbsp;<span class="ident" id="7600018"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7600022">.</span><span class="ident" id="7600023"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="7600031">(</span><span class="ident" id="7600032"><a href="/gostd/go/printer/printer_test.go.html#7599993">pos</a></span><span class="op" id="7600035">)</span><span class="op" id="7600036">.</span><span class="ident" id="7600037"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span>&nbsp;<span class="op" id="7600044">!=</span>&nbsp;<span class="num" id="7600047">1</span>&nbsp;<span class="op" id="7600049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600053"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7600054">.</span><span class="ident" id="7600055"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7600060">(</span><span class="string" id="7600061">&#34;expected&nbsp;offset&nbsp;1&#34;</span><span class="op" id="7600080">)</span>&nbsp;<span class="comment" id="7600082">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600104"><a href="/gostd/go/printer/printer_test.go.html#7598764">testComment</a></span><span class="op" id="7600115">(</span><span class="ident" id="7600116"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7600117">,</span>&nbsp;<span class="ident" id="7600119"><a href="/gostd/go/printer/printer_test.go.html#7599841">f</a></span><span class="op" id="7600120">,</span>&nbsp;<span class="builtinfunc" id="7600122">len</span><span class="op" id="7600125">(</span><span class="ident" id="7600126"><a href="/gostd/go/printer/printer_test.go.html#7599581">src</a></span><span class="op" id="7600129">)</span><span class="op" id="7600130">,</span>&nbsp;<span class="op" id="7600132">&amp;</span><span class="ident" id="7600133"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600136">.</span><span class="ident" id="7600137"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="7600144">{</span><span class="ident" id="7600145"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7600150">:</span>&nbsp;<span class="ident" id="7600152"><a href="/gostd/go/printer/printer_test.go.html#7599993">pos</a></span><span class="op" id="7600155">,</span>&nbsp;<span class="ident" id="7600157"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="7600161">:</span>&nbsp;<span class="string" id="7600163">&#34;//-style&nbsp;comment&#34;</span><span class="op" id="7600181">}</span><span class="op" id="7600182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600185"><a href="/gostd/go/printer/printer_test.go.html#7598764">testComment</a></span><span class="op" id="7600196">(</span><span class="ident" id="7600197"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7600198">,</span>&nbsp;<span class="ident" id="7600200"><a href="/gostd/go/printer/printer_test.go.html#7599841">f</a></span><span class="op" id="7600201">,</span>&nbsp;<span class="builtinfunc" id="7600203">len</span><span class="op" id="7600206">(</span><span class="ident" id="7600207"><a href="/gostd/go/printer/printer_test.go.html#7599581">src</a></span><span class="op" id="7600210">)</span><span class="op" id="7600211">,</span>&nbsp;<span class="op" id="7600213">&amp;</span><span class="ident" id="7600214"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600217">.</span><span class="ident" id="7600218"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="7600225">{</span><span class="ident" id="7600226"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7600231">:</span>&nbsp;<span class="ident" id="7600233"><a href="/gostd/go/printer/printer_test.go.html#7599993">pos</a></span><span class="op" id="7600236">,</span>&nbsp;<span class="ident" id="7600238"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="7600242">:</span>&nbsp;<span class="string" id="7600244">&#34;/*-style&nbsp;comment&nbsp;*/&#34;</span><span class="op" id="7600265">}</span><span class="op" id="7600266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600269"><a href="/gostd/go/printer/printer_test.go.html#7598764">testComment</a></span><span class="op" id="7600280">(</span><span class="ident" id="7600281"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7600282">,</span>&nbsp;<span class="ident" id="7600284"><a href="/gostd/go/printer/printer_test.go.html#7599841">f</a></span><span class="op" id="7600285">,</span>&nbsp;<span class="builtinfunc" id="7600287">len</span><span class="op" id="7600290">(</span><span class="ident" id="7600291"><a href="/gostd/go/printer/printer_test.go.html#7599581">src</a></span><span class="op" id="7600294">)</span><span class="op" id="7600295">,</span>&nbsp;<span class="op" id="7600297">&amp;</span><span class="ident" id="7600298"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600301">.</span><span class="ident" id="7600302"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="7600309">{</span><span class="ident" id="7600310"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7600315">:</span>&nbsp;<span class="ident" id="7600317"><a href="/gostd/go/printer/printer_test.go.html#7599993">pos</a></span><span class="op" id="7600320">,</span>&nbsp;<span class="ident" id="7600322"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="7600326">:</span>&nbsp;<span class="string" id="7600328">&#34;/*-style&nbsp;\n&nbsp;comment&nbsp;*/&#34;</span><span class="op" id="7600352">}</span><span class="op" id="7600353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600356"><a href="/gostd/go/printer/printer_test.go.html#7598764">testComment</a></span><span class="op" id="7600367">(</span><span class="ident" id="7600368"><a href="/gostd/go/printer/printer_test.go.html#7599558">t</a></span><span class="op" id="7600369">,</span>&nbsp;<span class="ident" id="7600371"><a href="/gostd/go/printer/printer_test.go.html#7599841">f</a></span><span class="op" id="7600372">,</span>&nbsp;<span class="builtinfunc" id="7600374">len</span><span class="op" id="7600377">(</span><span class="ident" id="7600378"><a href="/gostd/go/printer/printer_test.go.html#7599581">src</a></span><span class="op" id="7600381">)</span><span class="op" id="7600382">,</span>&nbsp;<span class="op" id="7600384">&amp;</span><span class="ident" id="7600385"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600388">.</span><span class="ident" id="7600389"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="7600396">{</span><span class="ident" id="7600397"><a href="/gostd/go/ast/ast.go.html#3795654">Slash</a></span><span class="op" id="7600402">:</span>&nbsp;<span class="ident" id="7600404"><a href="/gostd/go/printer/printer_test.go.html#7599993">pos</a></span><span class="op" id="7600407">,</span>&nbsp;<span class="ident" id="7600409"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="7600413">:</span>&nbsp;<span class="string" id="7600415">&#34;/*-style&nbsp;comment&nbsp;\n\n\n&nbsp;*/&#34;</span><span class="op" id="7600443">}</span><span class="op" id="7600444">)</span><br>
<span class="lineno"></span><span class="op" id="7600446">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="7600449">type</span>&nbsp;<span class="ident" id="7600454">visitor</span>&nbsp;<span class="keyword" id="7600462">chan</span>&nbsp;<span class="op" id="7600467">*</span><span class="ident" id="7600468"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600471">.</span><span class="ident" id="7600472"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7600479">func</span>&nbsp;<span class="op" id="7600484">(</span><span class="ident" id="7600485">v</span>&nbsp;<span class="ident" id="7600487"><a href="/gostd/go/printer/printer_test.go.html#7600454">visitor</a></span><span class="op" id="7600494">)</span>&nbsp;<span class="ident" id="7600496">Visit</span><span class="op" id="7600501">(</span><span class="ident" id="7600502">n</span>&nbsp;<span class="ident" id="7600504"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600507">.</span><span class="ident" id="7600508"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="7600512">)</span>&nbsp;<span class="op" id="7600514">(</span><span class="ident" id="7600515">w</span>&nbsp;<span class="ident" id="7600517"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600520">.</span><span class="ident" id="7600521"><a href="/gostd/go/ast/walk.go.html#3867564">Visitor</a></span><span class="op" id="7600528">)</span>&nbsp;<span class="op" id="7600530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600533">if</span>&nbsp;<span class="ident" id="7600536">ident</span><span class="op" id="7600541">,</span>&nbsp;<span class="ident" id="7600543">ok</span>&nbsp;<span class="op" id="7600546">:=</span>&nbsp;<span class="ident" id="7600549"><a href="/gostd/go/printer/printer_test.go.html#7600502">n</a></span><span class="op" id="7600550">.</span><span class="op" id="7600551">(</span><span class="op" id="7600552">*</span><span class="ident" id="7600553"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600556">.</span><span class="ident" id="7600557"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="7600562">)</span><span class="op" id="7600563">;</span>&nbsp;<span class="ident" id="7600565"><a href="/gostd/go/printer/printer_test.go.html#7600543">ok</a></span>&nbsp;<span class="op" id="7600568">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600572"><a href="/gostd/go/printer/printer_test.go.html#7600485">v</a></span>&nbsp;<span class="op" id="7600574">&lt;-</span>&nbsp;<span class="ident" id="7600577"><a href="/gostd/go/printer/printer_test.go.html#7600536">ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600587">return</span>&nbsp;<span class="ident" id="7600594"><a href="/gostd/go/printer/printer_test.go.html#7600485">v</a></span><br>
<span class="lineno"></span><span class="op" id="7600596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="7600599">//&nbsp;idents&nbsp;is&nbsp;an&nbsp;iterator&nbsp;that&nbsp;returns&nbsp;all&nbsp;idents&nbsp;in&nbsp;f&nbsp;via&nbsp;the&nbsp;result&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="7600677">func</span>&nbsp;<span class="ident" id="7600682">idents</span><span class="op" id="7600688">(</span><span class="ident" id="7600689">f</span>&nbsp;<span class="op" id="7600691">*</span><span class="ident" id="7600692"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600695">.</span><span class="ident" id="7600696"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="7600700">)</span>&nbsp;<span class="op" id="7600702">&lt;-</span><span class="keyword" id="7600704">chan</span>&nbsp;<span class="op" id="7600709">*</span><span class="ident" id="7600710"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600713">.</span><span class="ident" id="7600714"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span>&nbsp;<span class="op" id="7600720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600723">v</span>&nbsp;<span class="op" id="7600725">:=</span>&nbsp;<span class="builtinfunc" id="7600728">make</span><span class="op" id="7600732">(</span><span class="ident" id="7600733"><a href="/gostd/go/printer/printer_test.go.html#7600454">visitor</a></span><span class="op" id="7600740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600743">go</span>&nbsp;<span class="keyword" id="7600746">func</span><span class="op" id="7600750">(</span><span class="op" id="7600751">)</span>&nbsp;<span class="op" id="7600753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600757"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600760">.</span><span class="ident" id="7600761"><a href="/gostd/go/ast/walk.go.html#3868475">Walk</a></span><span class="op" id="7600765">(</span><span class="ident" id="7600766"><a href="/gostd/go/printer/printer_test.go.html#7600723">v</a></span><span class="op" id="7600767">,</span>&nbsp;<span class="ident" id="7600769"><a href="/gostd/go/printer/printer_test.go.html#7600689">f</a></span><span class="op" id="7600770">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7600774">close</span><span class="op" id="7600779">(</span><span class="ident" id="7600780"><a href="/gostd/go/printer/printer_test.go.html#7600723">v</a></span><span class="op" id="7600781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600784">}</span><span class="op" id="7600785">(</span><span class="op" id="7600786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600789">return</span>&nbsp;<span class="ident" id="7600796"><a href="/gostd/go/printer/printer_test.go.html#7600723">v</a></span><br>
<span class="lineno"></span><span class="op" id="7600798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="comment" id="7600801">//&nbsp;identCount&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;identifiers&nbsp;found&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7600861">func</span>&nbsp;<span class="ident" id="7600866">identCount</span><span class="op" id="7600876">(</span><span class="ident" id="7600877">f</span>&nbsp;<span class="op" id="7600879">*</span><span class="ident" id="7600880"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7600883">.</span><span class="ident" id="7600884"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="7600888">)</span>&nbsp;<span class="builtintype" id="7600890">int</span>&nbsp;<span class="op" id="7600894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600897">n</span>&nbsp;<span class="op" id="7600899">:=</span>&nbsp;<span class="num" id="7600902">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600905">for</span>&nbsp;<span class="keyword" id="7600909">range</span>&nbsp;<span class="ident" id="7600915"><a href="/gostd/go/printer/printer_test.go.html#7600682">idents</a></span><span class="op" id="7600921">(</span><span class="ident" id="7600922"><a href="/gostd/go/printer/printer_test.go.html#7600877">f</a></span><span class="op" id="7600923">)</span>&nbsp;<span class="op" id="7600925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7600929"><a href="/gostd/go/printer/printer_test.go.html#7600897">n</a></span><span class="op" id="7600930">++</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7600934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7600937">return</span>&nbsp;<span class="ident" id="7600944"><a href="/gostd/go/printer/printer_test.go.html#7600897">n</a></span><br>
<span class="lineno"></span><span class="op" id="7600946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7600949">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;SourcePos&nbsp;mode&nbsp;emits&nbsp;correct&nbsp;//line&nbsp;comments</span><br>
<span class="lineno">360</span><span class="comment" id="7601013">//&nbsp;by&nbsp;testing&nbsp;that&nbsp;position&nbsp;information&nbsp;for&nbsp;matching&nbsp;identifiers</span><br>
<span class="lineno"></span><span class="comment" id="7601078">//&nbsp;is&nbsp;maintained.</span><br>
<span class="lineno"></span><span class="keyword" id="7601096">func</span>&nbsp;<span class="ident" id="7601101">TestSourcePos</span><span class="op" id="7601114">(</span><span class="ident" id="7601115">t</span>&nbsp;<span class="op" id="7601117">*</span><span class="ident" id="7601118"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7601125">.</span><span class="ident" id="7601126"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7601127">)</span>&nbsp;<span class="op" id="7601129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601132">const</span>&nbsp;<span class="ident" id="7601138">src</span>&nbsp;<span class="op" id="7601142">=</span>&nbsp;<span class="string" id="7601144">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno">365</span>import&nbsp;(&nbsp;&#34;go/printer&#34;;&nbsp;&#34;math&#34;&nbsp;)<br>
<span class="lineno"></span>const&nbsp;pi&nbsp;=&nbsp;3.14;&nbsp;var&nbsp;x&nbsp;=&nbsp;0<br>
<span class="lineno"></span>type&nbsp;t&nbsp;struct{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;int;&nbsp;u,&nbsp;v,&nbsp;w&nbsp;float32&nbsp;}<br>
<span class="lineno"></span>func&nbsp;(t&nbsp;*t)&nbsp;foo(a,&nbsp;b,&nbsp;c&nbsp;int)&nbsp;int&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a*t.x&nbsp;+&nbsp;b*t.y&nbsp;+<br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;two&nbsp;extra&nbsp;lines&nbsp;here<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c*t.z<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601369">//&nbsp;parse&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601388">f1</span><span class="op" id="7601390">,</span>&nbsp;<span class="ident" id="7601392">err</span>&nbsp;<span class="op" id="7601396">:=</span>&nbsp;<span class="ident" id="7601399"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7601405">.</span><span class="ident" id="7601406"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7601415">(</span><span class="ident" id="7601416"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7601420">,</span>&nbsp;<span class="string" id="7601422">&#34;src&#34;</span><span class="op" id="7601427">,</span>&nbsp;<span class="ident" id="7601429"><a href="/gostd/go/printer/printer_test.go.html#7601138">src</a></span><span class="op" id="7601432">,</span>&nbsp;<span class="ident" id="7601434"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7601440">.</span><span class="ident" id="7601441"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7601454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601457">if</span>&nbsp;<span class="ident" id="7601460"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span>&nbsp;<span class="op" id="7601464">!=</span>&nbsp;<span class="builtintype" id="7601467">nil</span>&nbsp;<span class="op" id="7601471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601475"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7601476">.</span><span class="ident" id="7601477"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7601482">(</span><span class="ident" id="7601483"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span><span class="op" id="7601486">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601493">//&nbsp;pretty-print&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601519">var</span>&nbsp;<span class="ident" id="7601523">buf</span>&nbsp;<span class="ident" id="7601527"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7601532">.</span><span class="ident" id="7601533"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601541"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span>&nbsp;<span class="op" id="7601545">=</span>&nbsp;<span class="op" id="7601547">(</span><span class="op" id="7601548">&amp;</span><span class="ident" id="7601549"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="7601555">{</span><span class="ident" id="7601556"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span><span class="op" id="7601560">:</span>&nbsp;<span class="ident" id="7601562"><a href="/gostd/go/printer/printer.go.html#5877319">UseSpaces</a></span>&nbsp;<span class="op" id="7601572">|</span>&nbsp;<span class="ident" id="7601574"><a href="/gostd/go/printer/printer.go.html#5877391">SourcePos</a></span><span class="op" id="7601583">,</span>&nbsp;<span class="ident" id="7601585"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><span class="op" id="7601593">:</span>&nbsp;<span class="num" id="7601595">8</span><span class="op" id="7601596">}</span><span class="op" id="7601597">)</span><span class="op" id="7601598">.</span><span class="ident" id="7601599"><a href="/gostd/go/printer/printer.go.html#5879714">Fprint</a></span><span class="op" id="7601605">(</span><span class="op" id="7601606">&amp;</span><span class="ident" id="7601607"><a href="/gostd/go/printer/printer_test.go.html#7601523">buf</a></span><span class="op" id="7601610">,</span>&nbsp;<span class="ident" id="7601612"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7601616">,</span>&nbsp;<span class="ident" id="7601618"><a href="/gostd/go/printer/printer_test.go.html#7601388">f1</a></span><span class="op" id="7601620">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601623">if</span>&nbsp;<span class="ident" id="7601626"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span>&nbsp;<span class="op" id="7601630">!=</span>&nbsp;<span class="builtintype" id="7601633">nil</span>&nbsp;<span class="op" id="7601637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601641"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7601642">.</span><span class="ident" id="7601643"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7601648">(</span><span class="ident" id="7601649"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span><span class="op" id="7601652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601659">//&nbsp;parse&nbsp;pretty&nbsp;printed&nbsp;original</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601693">//&nbsp;(//line&nbsp;comments&nbsp;must&nbsp;be&nbsp;interpreted&nbsp;even&nbsp;w/o&nbsp;parser.ParseComments&nbsp;set)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601769">f2</span><span class="op" id="7601771">,</span>&nbsp;<span class="ident" id="7601773"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span>&nbsp;<span class="op" id="7601777">:=</span>&nbsp;<span class="ident" id="7601780"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7601786">.</span><span class="ident" id="7601787"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7601796">(</span><span class="ident" id="7601797"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7601801">,</span>&nbsp;<span class="string" id="7601803">&#34;&#34;</span><span class="op" id="7601805">,</span>&nbsp;<span class="ident" id="7601807"><a href="/gostd/go/printer/printer_test.go.html#7601523">buf</a></span><span class="op" id="7601810">.</span><span class="ident" id="7601811"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7601816">(</span><span class="op" id="7601817">)</span><span class="op" id="7601818">,</span>&nbsp;<span class="num" id="7601820">0</span><span class="op" id="7601821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7601824">if</span>&nbsp;<span class="ident" id="7601827"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span>&nbsp;<span class="op" id="7601831">!=</span>&nbsp;<span class="builtintype" id="7601834">nil</span>&nbsp;<span class="op" id="7601838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7601842"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7601843">.</span><span class="ident" id="7601844"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7601850">(</span><span class="string" id="7601851">&#34;%s\n%s&#34;</span><span class="op" id="7601859">,</span>&nbsp;<span class="ident" id="7601861"><a href="/gostd/go/printer/printer_test.go.html#7601392">err</a></span><span class="op" id="7601864">,</span>&nbsp;<span class="ident" id="7601866"><a href="/gostd/go/printer/printer_test.go.html#7601523">buf</a></span><span class="op" id="7601869">.</span><span class="ident" id="7601870"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7601875">(</span><span class="op" id="7601876">)</span><span class="op" id="7601877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7601880">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601884">//&nbsp;At&nbsp;this&nbsp;point&nbsp;the&nbsp;position&nbsp;information&nbsp;of&nbsp;identifiers&nbsp;in&nbsp;f2&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7601955">//&nbsp;match&nbsp;the&nbsp;position&nbsp;information&nbsp;of&nbsp;corresponding&nbsp;identifiers&nbsp;in&nbsp;f1.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602027">//&nbsp;number&nbsp;of&nbsp;identifiers&nbsp;must&nbsp;be&nbsp;&gt;&nbsp;0&nbsp;(test&nbsp;should&nbsp;run)&nbsp;and&nbsp;must&nbsp;match</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602098">n1</span>&nbsp;<span class="op" id="7602101">:=</span>&nbsp;<span class="ident" id="7602104"><a href="/gostd/go/printer/printer_test.go.html#7600866">identCount</a></span><span class="op" id="7602114">(</span><span class="ident" id="7602115"><a href="/gostd/go/printer/printer_test.go.html#7601388">f1</a></span><span class="op" id="7602117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602120">n2</span>&nbsp;<span class="op" id="7602123">:=</span>&nbsp;<span class="ident" id="7602126"><a href="/gostd/go/printer/printer_test.go.html#7600866">identCount</a></span><span class="op" id="7602136">(</span><span class="ident" id="7602137"><a href="/gostd/go/printer/printer_test.go.html#7601769">f2</a></span><span class="op" id="7602139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602142">if</span>&nbsp;<span class="ident" id="7602145"><a href="/gostd/go/printer/printer_test.go.html#7602098">n1</a></span>&nbsp;<span class="op" id="7602148">==</span>&nbsp;<span class="num" id="7602151">0</span>&nbsp;<span class="op" id="7602153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602157"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602158">.</span><span class="ident" id="7602159"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7602164">(</span><span class="string" id="7602165">&#34;got&nbsp;no&nbsp;idents&#34;</span><span class="op" id="7602180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602183">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602186">if</span>&nbsp;<span class="ident" id="7602189"><a href="/gostd/go/printer/printer_test.go.html#7602120">n2</a></span>&nbsp;<span class="op" id="7602192">!=</span>&nbsp;<span class="ident" id="7602195"><a href="/gostd/go/printer/printer_test.go.html#7602098">n1</a></span>&nbsp;<span class="op" id="7602198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602202"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602203">.</span><span class="ident" id="7602204"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7602210">(</span><span class="string" id="7602211">&#34;got&nbsp;%d&nbsp;idents;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7602235">,</span>&nbsp;<span class="ident" id="7602237"><a href="/gostd/go/printer/printer_test.go.html#7602120">n2</a></span><span class="op" id="7602239">,</span>&nbsp;<span class="ident" id="7602241"><a href="/gostd/go/printer/printer_test.go.html#7602098">n1</a></span><span class="op" id="7602243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7602250">//&nbsp;verify&nbsp;that&nbsp;all&nbsp;identifiers&nbsp;have&nbsp;correct&nbsp;line&nbsp;information</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602312">i2range</span>&nbsp;<span class="op" id="7602320">:=</span>&nbsp;<span class="ident" id="7602323"><a href="/gostd/go/printer/printer_test.go.html#7600682">idents</a></span><span class="op" id="7602329">(</span><span class="ident" id="7602330"><a href="/gostd/go/printer/printer_test.go.html#7601769">f2</a></span><span class="op" id="7602332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602335">for</span>&nbsp;<span class="ident" id="7602339">i1</span>&nbsp;<span class="op" id="7602342">:=</span>&nbsp;<span class="keyword" id="7602345">range</span>&nbsp;<span class="ident" id="7602351"><a href="/gostd/go/printer/printer_test.go.html#7600682">idents</a></span><span class="op" id="7602357">(</span><span class="ident" id="7602358"><a href="/gostd/go/printer/printer_test.go.html#7601388">f1</a></span><span class="op" id="7602360">)</span>&nbsp;<span class="op" id="7602362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602366">i2</span>&nbsp;<span class="op" id="7602369">:=</span>&nbsp;<span class="op" id="7602372">&lt;-</span><span class="ident" id="7602374"><a href="/gostd/go/printer/printer_test.go.html#7602312">i2range</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602385">if</span>&nbsp;<span class="ident" id="7602388"><a href="/gostd/go/printer/printer_test.go.html#7602366">i2</a></span><span class="op" id="7602390">.</span><span class="ident" id="7602391"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="7602396">!=</span>&nbsp;<span class="ident" id="7602399"><a href="/gostd/go/printer/printer_test.go.html#7602339">i1</a></span><span class="op" id="7602401">.</span><span class="ident" id="7602402"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span>&nbsp;<span class="op" id="7602407">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602412"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602413">.</span><span class="ident" id="7602414"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7602420">(</span><span class="string" id="7602421">&#34;got&nbsp;ident&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7602444">,</span>&nbsp;<span class="ident" id="7602446"><a href="/gostd/go/printer/printer_test.go.html#7602366">i2</a></span><span class="op" id="7602448">.</span><span class="ident" id="7602449"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7602453">,</span>&nbsp;<span class="ident" id="7602455"><a href="/gostd/go/printer/printer_test.go.html#7602339">i1</a></span><span class="op" id="7602457">.</span><span class="ident" id="7602458"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7602462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602471">l1</span>&nbsp;<span class="op" id="7602474">:=</span>&nbsp;<span class="ident" id="7602477"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7602481">.</span><span class="ident" id="7602482"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="7602490">(</span><span class="ident" id="7602491"><a href="/gostd/go/printer/printer_test.go.html#7602339">i1</a></span><span class="op" id="7602493">.</span><span class="ident" id="7602494"><a href="/gostd/go/ast/ast.go.html#3805815">Pos</a></span><span class="op" id="7602497">(</span><span class="op" id="7602498">)</span><span class="op" id="7602499">)</span><span class="op" id="7602500">.</span><span class="ident" id="7602501"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602508">l2</span>&nbsp;<span class="op" id="7602511">:=</span>&nbsp;<span class="ident" id="7602514"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7602518">.</span><span class="ident" id="7602519"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="7602527">(</span><span class="ident" id="7602528"><a href="/gostd/go/printer/printer_test.go.html#7602366">i2</a></span><span class="op" id="7602530">.</span><span class="ident" id="7602531"><a href="/gostd/go/ast/ast.go.html#3805815">Pos</a></span><span class="op" id="7602534">(</span><span class="op" id="7602535">)</span><span class="op" id="7602536">)</span><span class="op" id="7602537">.</span><span class="ident" id="7602538"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602545">if</span>&nbsp;<span class="ident" id="7602548"><a href="/gostd/go/printer/printer_test.go.html#7602508">l2</a></span>&nbsp;<span class="op" id="7602551">!=</span>&nbsp;<span class="ident" id="7602554"><a href="/gostd/go/printer/printer_test.go.html#7602471">l1</a></span>&nbsp;<span class="op" id="7602557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602562"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602563">.</span><span class="ident" id="7602564"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7602570">(</span><span class="string" id="7602571">&#34;got&nbsp;line&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;%s&#34;</span><span class="op" id="7602600">,</span>&nbsp;<span class="ident" id="7602602"><a href="/gostd/go/printer/printer_test.go.html#7602508">l2</a></span><span class="op" id="7602604">,</span>&nbsp;<span class="ident" id="7602606"><a href="/gostd/go/printer/printer_test.go.html#7602471">l1</a></span><span class="op" id="7602608">,</span>&nbsp;<span class="ident" id="7602610"><a href="/gostd/go/printer/printer_test.go.html#7602339">i1</a></span><span class="op" id="7602612">.</span><span class="ident" id="7602613"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7602617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602628">if</span>&nbsp;<span class="ident" id="7602631"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602632">.</span><span class="ident" id="7602633"><a href="/gostd/testing/testing.go.html#5477786">Failed</a></span><span class="op" id="7602639">(</span><span class="op" id="7602640">)</span>&nbsp;<span class="op" id="7602642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602646"><a href="/gostd/go/printer/printer_test.go.html#7601115">t</a></span><span class="op" id="7602647">.</span><span class="ident" id="7602648"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="7602652">(</span><span class="string" id="7602653">&#34;\n%s&#34;</span><span class="op" id="7602659">,</span>&nbsp;<span class="ident" id="7602661"><a href="/gostd/go/printer/printer_test.go.html#7601523">buf</a></span><span class="op" id="7602664">.</span><span class="ident" id="7602665"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7602670">(</span><span class="op" id="7602671">)</span><span class="op" id="7602672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7602675">}</span><br>
<span class="lineno"></span><span class="op" id="7602677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="keyword" id="7602680">var</span>&nbsp;<span class="ident" id="7602684">decls</span>&nbsp;<span class="op" id="7602690">=</span>&nbsp;<span class="op" id="7602692">[</span><span class="op" id="7602693">]</span><span class="builtintype" id="7602694">string</span><span class="op" id="7602700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7602703">`import&nbsp;&#34;fmt&#34;`</span><span class="op" id="7602717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7602720">&#34;const&nbsp;pi&nbsp;=&nbsp;3.1415\nconst&nbsp;e&nbsp;=&nbsp;2.71828\n\nvar&nbsp;x&nbsp;=&nbsp;pi&#34;</span><span class="op" id="7602772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7602775">&#34;func&nbsp;sum(x,&nbsp;y&nbsp;int)&nbsp;int\t{&nbsp;return&nbsp;x&nbsp;+&nbsp;y&nbsp;}&#34;</span><span class="op" id="7602817">,</span><br>
<span class="lineno"></span><span class="op" id="7602819">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7602822">func</span>&nbsp;<span class="ident" id="7602827">TestDeclLists</span><span class="op" id="7602840">(</span><span class="ident" id="7602841">t</span>&nbsp;<span class="op" id="7602843">*</span><span class="ident" id="7602844"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7602851">.</span><span class="ident" id="7602852"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7602853">)</span>&nbsp;<span class="op" id="7602855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602858">for</span>&nbsp;<span class="ident" id="7602862">_</span><span class="op" id="7602863">,</span>&nbsp;<span class="ident" id="7602865">src</span>&nbsp;<span class="op" id="7602869">:=</span>&nbsp;<span class="keyword" id="7602872">range</span>&nbsp;<span class="ident" id="7602878"><a href="/gostd/go/printer/printer_test.go.html#7602684">decls</a></span>&nbsp;<span class="op" id="7602884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7602888">file</span><span class="op" id="7602892">,</span>&nbsp;<span class="ident" id="7602894">err</span>&nbsp;<span class="op" id="7602898">:=</span>&nbsp;<span class="ident" id="7602901"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7602907">.</span><span class="ident" id="7602908"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7602917">(</span><span class="ident" id="7602918"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7602922">,</span>&nbsp;<span class="string" id="7602924">&#34;&#34;</span><span class="op" id="7602926">,</span>&nbsp;<span class="string" id="7602928">&#34;package&nbsp;p;&#34;</span><span class="op" id="7602940">+</span><span class="ident" id="7602941"><a href="/gostd/go/printer/printer_test.go.html#7602865">src</a></span><span class="op" id="7602944">,</span>&nbsp;<span class="ident" id="7602946"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7602952">.</span><span class="ident" id="7602953"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7602966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7602970">if</span>&nbsp;<span class="ident" id="7602973"><a href="/gostd/go/printer/printer_test.go.html#7602894">err</a></span>&nbsp;<span class="op" id="7602977">!=</span>&nbsp;<span class="builtintype" id="7602980">nil</span>&nbsp;<span class="op" id="7602984">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7602989">panic</span><span class="op" id="7602994">(</span><span class="ident" id="7602995"><a href="/gostd/go/printer/printer_test.go.html#7602894">err</a></span><span class="op" id="7602998">)</span>&nbsp;<span class="comment" id="7603000">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603024">var</span>&nbsp;<span class="ident" id="7603028">buf</span>&nbsp;<span class="ident" id="7603032"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7603037">.</span><span class="ident" id="7603038"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603047"><a href="/gostd/go/printer/printer_test.go.html#7602894">err</a></span>&nbsp;<span class="op" id="7603051">=</span>&nbsp;<span class="ident" id="7603053"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7603059">(</span><span class="op" id="7603060">&amp;</span><span class="ident" id="7603061"><a href="/gostd/go/printer/printer_test.go.html#7603028">buf</a></span><span class="op" id="7603064">,</span>&nbsp;<span class="ident" id="7603066"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7603070">,</span>&nbsp;<span class="ident" id="7603072"><a href="/gostd/go/printer/printer_test.go.html#7602888">file</a></span><span class="op" id="7603076">.</span><span class="ident" id="7603077"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="7603082">)</span>&nbsp;<span class="comment" id="7603084">//&nbsp;only&nbsp;print&nbsp;declarations</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603113">if</span>&nbsp;<span class="ident" id="7603116"><a href="/gostd/go/printer/printer_test.go.html#7602894">err</a></span>&nbsp;<span class="op" id="7603120">!=</span>&nbsp;<span class="builtintype" id="7603123">nil</span>&nbsp;<span class="op" id="7603127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7603132">panic</span><span class="op" id="7603137">(</span><span class="ident" id="7603138"><a href="/gostd/go/printer/printer_test.go.html#7602894">err</a></span><span class="op" id="7603141">)</span>&nbsp;<span class="comment" id="7603143">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603167">out</span>&nbsp;<span class="op" id="7603171">:=</span>&nbsp;<span class="ident" id="7603174"><a href="/gostd/go/printer/printer_test.go.html#7603028">buf</a></span><span class="op" id="7603177">.</span><span class="ident" id="7603178"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7603184">(</span><span class="op" id="7603185">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603189">if</span>&nbsp;<span class="ident" id="7603192"><a href="/gostd/go/printer/printer_test.go.html#7603167">out</a></span>&nbsp;<span class="op" id="7603196">!=</span>&nbsp;<span class="ident" id="7603199"><a href="/gostd/go/printer/printer_test.go.html#7602865">src</a></span>&nbsp;<span class="op" id="7603203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603208"><a href="/gostd/go/printer/printer_test.go.html#7602841">t</a></span><span class="op" id="7603209">.</span><span class="ident" id="7603210"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7603216">(</span><span class="string" id="7603217">&#34;\ngot&nbsp;:&nbsp;%q\nwant:&nbsp;%q\n&#34;</span><span class="op" id="7603241">,</span>&nbsp;<span class="ident" id="7603243"><a href="/gostd/go/printer/printer_test.go.html#7603167">out</a></span><span class="op" id="7603246">,</span>&nbsp;<span class="ident" id="7603248"><a href="/gostd/go/printer/printer_test.go.html#7602865">src</a></span><span class="op" id="7603251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603258">}</span><br>
<span class="lineno"></span><span class="op" id="7603260">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="keyword" id="7603263">var</span>&nbsp;<span class="ident" id="7603267">stmts</span>&nbsp;<span class="op" id="7603273">=</span>&nbsp;<span class="op" id="7603275">[</span><span class="op" id="7603276">]</span><span class="builtintype" id="7603277">string</span><span class="op" id="7603283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7603286">&#34;i&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7603294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7603297">&#34;select&nbsp;{}\nvar&nbsp;a,&nbsp;b&nbsp;=&nbsp;1,&nbsp;2\nreturn&nbsp;a&nbsp;+&nbsp;b&#34;</span><span class="op" id="7603339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7603342">&#34;go&nbsp;f()\ndefer&nbsp;func()&nbsp;{}()&#34;</span><span class="op" id="7603369">,</span><br>
<span class="lineno">460</span><span class="op" id="7603371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7603374">func</span>&nbsp;<span class="ident" id="7603379">TestStmtLists</span><span class="op" id="7603392">(</span><span class="ident" id="7603393">t</span>&nbsp;<span class="op" id="7603395">*</span><span class="ident" id="7603396"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7603403">.</span><span class="ident" id="7603404"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7603405">)</span>&nbsp;<span class="op" id="7603407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603410">for</span>&nbsp;<span class="ident" id="7603414">_</span><span class="op" id="7603415">,</span>&nbsp;<span class="ident" id="7603417">src</span>&nbsp;<span class="op" id="7603421">:=</span>&nbsp;<span class="keyword" id="7603424">range</span>&nbsp;<span class="ident" id="7603430"><a href="/gostd/go/printer/printer_test.go.html#7603267">stmts</a></span>&nbsp;<span class="op" id="7603436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603440">file</span><span class="op" id="7603444">,</span>&nbsp;<span class="ident" id="7603446">err</span>&nbsp;<span class="op" id="7603450">:=</span>&nbsp;<span class="ident" id="7603453"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7603459">.</span><span class="ident" id="7603460"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7603469">(</span><span class="ident" id="7603470"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7603474">,</span>&nbsp;<span class="string" id="7603476">&#34;&#34;</span><span class="op" id="7603478">,</span>&nbsp;<span class="string" id="7603480">&#34;package&nbsp;p;&nbsp;func&nbsp;_()&nbsp;{&#34;</span><span class="op" id="7603503">+</span><span class="ident" id="7603504"><a href="/gostd/go/printer/printer_test.go.html#7603417">src</a></span><span class="op" id="7603507">+</span><span class="string" id="7603508">&#34;}&#34;</span><span class="op" id="7603511">,</span>&nbsp;<span class="ident" id="7603513"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7603519">.</span><span class="ident" id="7603520"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="7603533">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603537">if</span>&nbsp;<span class="ident" id="7603540"><a href="/gostd/go/printer/printer_test.go.html#7603446">err</a></span>&nbsp;<span class="op" id="7603544">!=</span>&nbsp;<span class="builtintype" id="7603547">nil</span>&nbsp;<span class="op" id="7603551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7603556">panic</span><span class="op" id="7603561">(</span><span class="ident" id="7603562"><a href="/gostd/go/printer/printer_test.go.html#7603446">err</a></span><span class="op" id="7603565">)</span>&nbsp;<span class="comment" id="7603567">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603591">var</span>&nbsp;<span class="ident" id="7603595">buf</span>&nbsp;<span class="ident" id="7603599"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7603604">.</span><span class="ident" id="7603605"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603614"><a href="/gostd/go/printer/printer_test.go.html#7603446">err</a></span>&nbsp;<span class="op" id="7603618">=</span>&nbsp;<span class="ident" id="7603620"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7603626">(</span><span class="op" id="7603627">&amp;</span><span class="ident" id="7603628"><a href="/gostd/go/printer/printer_test.go.html#7603595">buf</a></span><span class="op" id="7603631">,</span>&nbsp;<span class="ident" id="7603633"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7603637">,</span>&nbsp;<span class="ident" id="7603639"><a href="/gostd/go/printer/printer_test.go.html#7603440">file</a></span><span class="op" id="7603643">.</span><span class="ident" id="7603644"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="7603649">[</span><span class="num" id="7603650">0</span><span class="op" id="7603651">]</span><span class="op" id="7603652">.</span><span class="op" id="7603653">(</span><span class="op" id="7603654">*</span><span class="ident" id="7603655"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7603658">.</span><span class="ident" id="7603659"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="7603667">)</span><span class="op" id="7603668">.</span><span class="ident" id="7603669"><a href="/gostd/go/ast/ast.go.html#3822784">Body</a></span><span class="op" id="7603673">.</span><span class="ident" id="7603674"><a href="/gostd/go/ast/ast.go.html#3813020">List</a></span><span class="op" id="7603678">)</span>&nbsp;<span class="comment" id="7603680">//&nbsp;only&nbsp;print&nbsp;statements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603707">if</span>&nbsp;<span class="ident" id="7603710"><a href="/gostd/go/printer/printer_test.go.html#7603446">err</a></span>&nbsp;<span class="op" id="7603714">!=</span>&nbsp;<span class="builtintype" id="7603717">nil</span>&nbsp;<span class="op" id="7603721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7603726">panic</span><span class="op" id="7603731">(</span><span class="ident" id="7603732"><a href="/gostd/go/printer/printer_test.go.html#7603446">err</a></span><span class="op" id="7603735">)</span>&nbsp;<span class="comment" id="7603737">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603761">out</span>&nbsp;<span class="op" id="7603765">:=</span>&nbsp;<span class="ident" id="7603768"><a href="/gostd/go/printer/printer_test.go.html#7603595">buf</a></span><span class="op" id="7603771">.</span><span class="ident" id="7603772"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7603778">(</span><span class="op" id="7603779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7603783">if</span>&nbsp;<span class="ident" id="7603786"><a href="/gostd/go/printer/printer_test.go.html#7603761">out</a></span>&nbsp;<span class="op" id="7603790">!=</span>&nbsp;<span class="ident" id="7603793"><a href="/gostd/go/printer/printer_test.go.html#7603417">src</a></span>&nbsp;<span class="op" id="7603797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7603802"><a href="/gostd/go/printer/printer_test.go.html#7603393">t</a></span><span class="op" id="7603803">.</span><span class="ident" id="7603804"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7603810">(</span><span class="string" id="7603811">&#34;\ngot&nbsp;:&nbsp;%q\nwant:&nbsp;%q\n&#34;</span><span class="op" id="7603835">,</span>&nbsp;<span class="ident" id="7603837"><a href="/gostd/go/printer/printer_test.go.html#7603761">out</a></span><span class="op" id="7603840">,</span>&nbsp;<span class="ident" id="7603842"><a href="/gostd/go/printer/printer_test.go.html#7603417">src</a></span><span class="op" id="7603845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7603852">}</span><br>
<span class="lineno">480</span><span class="op" id="7603854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7603857">func</span>&nbsp;<span class="ident" id="7603862">TestBaseIndent</span><span class="op" id="7603876">(</span><span class="ident" id="7603877">t</span>&nbsp;<span class="op" id="7603879">*</span><span class="ident" id="7603880"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7603887">.</span><span class="ident" id="7603888"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7603889">)</span>&nbsp;<span class="op" id="7603891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603894">//&nbsp;The&nbsp;testfile&nbsp;must&nbsp;not&nbsp;contain&nbsp;multi-line&nbsp;raw&nbsp;strings&nbsp;since&nbsp;those</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7603963">//&nbsp;are&nbsp;not&nbsp;indented&nbsp;(because&nbsp;their&nbsp;values&nbsp;must&nbsp;not&nbsp;change)&nbsp;and&nbsp;make</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7604032">//&nbsp;this&nbsp;test&nbsp;fail.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604052">const</span>&nbsp;<span class="ident" id="7604058">filename</span>&nbsp;<span class="op" id="7604067">=</span>&nbsp;<span class="string" id="7604069">&#34;printer.go&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604083">src</span><span class="op" id="7604086">,</span>&nbsp;<span class="ident" id="7604088">err</span>&nbsp;<span class="op" id="7604092">:=</span>&nbsp;<span class="ident" id="7604095"><a href="/gostd/go/printer/printer_test.go.html#7592457">ioutil</a></span><span class="op" id="7604101">.</span><span class="ident" id="7604102"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="7604110">(</span><span class="ident" id="7604111"><a href="/gostd/go/printer/printer_test.go.html#7604058">filename</a></span><span class="op" id="7604119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604122">if</span>&nbsp;<span class="ident" id="7604125"><a href="/gostd/go/printer/printer_test.go.html#7604088">err</a></span>&nbsp;<span class="op" id="7604129">!=</span>&nbsp;<span class="builtintype" id="7604132">nil</span>&nbsp;<span class="op" id="7604136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7604140">panic</span><span class="op" id="7604145">(</span><span class="ident" id="7604146"><a href="/gostd/go/printer/printer_test.go.html#7604088">err</a></span><span class="op" id="7604149">)</span>&nbsp;<span class="comment" id="7604151">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604173">file</span><span class="op" id="7604177">,</span>&nbsp;<span class="ident" id="7604179"><a href="/gostd/go/printer/printer_test.go.html#7604088">err</a></span>&nbsp;<span class="op" id="7604183">:=</span>&nbsp;<span class="ident" id="7604186"><a href="/gostd/go/printer/printer_test.go.html#7592432">parser</a></span><span class="op" id="7604192">.</span><span class="ident" id="7604193"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="7604202">(</span><span class="ident" id="7604203"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7604207">,</span>&nbsp;<span class="ident" id="7604209"><a href="/gostd/go/printer/printer_test.go.html#7604058">filename</a></span><span class="op" id="7604217">,</span>&nbsp;<span class="ident" id="7604219"><a href="/gostd/go/printer/printer_test.go.html#7604083">src</a></span><span class="op" id="7604222">,</span>&nbsp;<span class="num" id="7604224">0</span><span class="op" id="7604225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604228">if</span>&nbsp;<span class="ident" id="7604231"><a href="/gostd/go/printer/printer_test.go.html#7604088">err</a></span>&nbsp;<span class="op" id="7604235">!=</span>&nbsp;<span class="builtintype" id="7604238">nil</span>&nbsp;<span class="op" id="7604242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7604246">panic</span><span class="op" id="7604251">(</span><span class="ident" id="7604252"><a href="/gostd/go/printer/printer_test.go.html#7604088">err</a></span><span class="op" id="7604255">)</span>&nbsp;<span class="comment" id="7604257">//&nbsp;error&nbsp;in&nbsp;test</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604279">var</span>&nbsp;<span class="ident" id="7604283">buf</span>&nbsp;<span class="ident" id="7604287"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7604292">.</span><span class="ident" id="7604293"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604301">for</span>&nbsp;<span class="ident" id="7604305">indent</span>&nbsp;<span class="op" id="7604312">:=</span>&nbsp;<span class="num" id="7604315">0</span><span class="op" id="7604316">;</span>&nbsp;<span class="ident" id="7604318"><a href="/gostd/go/printer/printer_test.go.html#7604305">indent</a></span>&nbsp;<span class="op" id="7604325">&lt;</span>&nbsp;<span class="num" id="7604327">4</span><span class="op" id="7604328">;</span>&nbsp;<span class="ident" id="7604330"><a href="/gostd/go/printer/printer_test.go.html#7604305">indent</a></span><span class="op" id="7604336">++</span>&nbsp;<span class="op" id="7604339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604343"><a href="/gostd/go/printer/printer_test.go.html#7604283">buf</a></span><span class="op" id="7604346">.</span><span class="ident" id="7604347"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="7604352">(</span><span class="op" id="7604353">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604357">(</span><span class="op" id="7604358">&amp;</span><span class="ident" id="7604359"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="7604365">{</span><span class="ident" id="7604366"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><span class="op" id="7604374">:</span>&nbsp;<span class="ident" id="7604376"><a href="/gostd/go/printer/printer_test.go.html#7592540">tabwidth</a></span><span class="op" id="7604384">,</span>&nbsp;<span class="ident" id="7604386"><a href="/gostd/go/printer/printer.go.html#5877611">Indent</a></span><span class="op" id="7604392">:</span>&nbsp;<span class="ident" id="7604394"><a href="/gostd/go/printer/printer_test.go.html#7604305">indent</a></span><span class="op" id="7604400">}</span><span class="op" id="7604401">)</span><span class="op" id="7604402">.</span><span class="ident" id="7604403"><a href="/gostd/go/printer/printer.go.html#5879714">Fprint</a></span><span class="op" id="7604409">(</span><span class="op" id="7604410">&amp;</span><span class="ident" id="7604411"><a href="/gostd/go/printer/printer_test.go.html#7604283">buf</a></span><span class="op" id="7604414">,</span>&nbsp;<span class="ident" id="7604416"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7604420">,</span>&nbsp;<span class="ident" id="7604422"><a href="/gostd/go/printer/printer_test.go.html#7604173">file</a></span><span class="op" id="7604426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7604430">//&nbsp;all&nbsp;code&nbsp;must&nbsp;be&nbsp;indented&nbsp;by&nbsp;at&nbsp;least&nbsp;&#39;indent&#39;&nbsp;tabs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604487">lines</span>&nbsp;<span class="op" id="7604493">:=</span>&nbsp;<span class="ident" id="7604496"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7604501">.</span><span class="ident" id="7604502"><a href="/gostd/bytes/bytes.go.html#1401692">Split</a></span><span class="op" id="7604507">(</span><span class="ident" id="7604508"><a href="/gostd/go/printer/printer_test.go.html#7604283">buf</a></span><span class="op" id="7604511">.</span><span class="ident" id="7604512"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7604517">(</span><span class="op" id="7604518">)</span><span class="op" id="7604519">,</span>&nbsp;<span class="op" id="7604521">[</span><span class="op" id="7604522">]</span><span class="builtintype" id="7604523">byte</span><span class="op" id="7604527">{</span><span class="string" id="7604528">&#39;\n&#39;</span><span class="op" id="7604532">}</span><span class="op" id="7604533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604537">for</span>&nbsp;<span class="ident" id="7604541">i</span><span class="op" id="7604542">,</span>&nbsp;<span class="ident" id="7604544">line</span>&nbsp;<span class="op" id="7604549">:=</span>&nbsp;<span class="keyword" id="7604552">range</span>&nbsp;<span class="ident" id="7604558"><a href="/gostd/go/printer/printer_test.go.html#7604487">lines</a></span>&nbsp;<span class="op" id="7604564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604569">if</span>&nbsp;<span class="builtinfunc" id="7604572">len</span><span class="op" id="7604575">(</span><span class="ident" id="7604576"><a href="/gostd/go/printer/printer_test.go.html#7604544">line</a></span><span class="op" id="7604580">)</span>&nbsp;<span class="op" id="7604582">==</span>&nbsp;<span class="num" id="7604585">0</span>&nbsp;<span class="op" id="7604587">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604593">continue</span>&nbsp;<span class="comment" id="7604602">//&nbsp;empty&nbsp;lines&nbsp;don&#39;t&nbsp;have&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604648">n</span>&nbsp;<span class="op" id="7604650">:=</span>&nbsp;<span class="num" id="7604653">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604658">for</span>&nbsp;<span class="ident" id="7604662">j</span><span class="op" id="7604663">,</span>&nbsp;<span class="ident" id="7604665">b</span>&nbsp;<span class="op" id="7604667">:=</span>&nbsp;<span class="keyword" id="7604670">range</span>&nbsp;<span class="ident" id="7604676"><a href="/gostd/go/printer/printer_test.go.html#7604544">line</a></span>&nbsp;<span class="op" id="7604681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604687">if</span>&nbsp;<span class="ident" id="7604690"><a href="/gostd/go/printer/printer_test.go.html#7604665">b</a></span>&nbsp;<span class="op" id="7604692">!=</span>&nbsp;<span class="string" id="7604695">&#39;\t&#39;</span>&nbsp;<span class="op" id="7604700">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7604707">//&nbsp;end&nbsp;of&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604734"><a href="/gostd/go/printer/printer_test.go.html#7604648">n</a></span>&nbsp;<span class="op" id="7604736">=</span>&nbsp;<span class="ident" id="7604738"><a href="/gostd/go/printer/printer_test.go.html#7604662">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604745">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604760">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7604765">if</span>&nbsp;<span class="ident" id="7604768"><a href="/gostd/go/printer/printer_test.go.html#7604648">n</a></span>&nbsp;<span class="op" id="7604770">&lt;</span>&nbsp;<span class="ident" id="7604772"><a href="/gostd/go/printer/printer_test.go.html#7604305">indent</a></span>&nbsp;<span class="op" id="7604779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7604785"><a href="/gostd/go/printer/printer_test.go.html#7603877">t</a></span><span class="op" id="7604786">.</span><span class="ident" id="7604787"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7604793">(</span><span class="string" id="7604794">&#34;line&nbsp;%d:&nbsp;got&nbsp;only&nbsp;%d&nbsp;tabs;&nbsp;want&nbsp;at&nbsp;least&nbsp;%d:&nbsp;%q&#34;</span><span class="op" id="7604843">,</span>&nbsp;<span class="ident" id="7604845"><a href="/gostd/go/printer/printer_test.go.html#7604541">i</a></span><span class="op" id="7604846">,</span>&nbsp;<span class="ident" id="7604848"><a href="/gostd/go/printer/printer_test.go.html#7604648">n</a></span><span class="op" id="7604849">,</span>&nbsp;<span class="ident" id="7604851"><a href="/gostd/go/printer/printer_test.go.html#7604305">indent</a></span><span class="op" id="7604857">,</span>&nbsp;<span class="ident" id="7604859"><a href="/gostd/go/printer/printer_test.go.html#7604544">line</a></span><span class="op" id="7604863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7604875">}</span><br>
<span class="lineno">520</span><span class="op" id="7604877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7604880">//&nbsp;TestFuncType&nbsp;tests&nbsp;that&nbsp;an&nbsp;ast.FuncType&nbsp;with&nbsp;a&nbsp;nil&nbsp;Params&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="7604947">//&nbsp;can&nbsp;be&nbsp;printed&nbsp;(per&nbsp;go/ast&nbsp;specification).&nbsp;Test&nbsp;case&nbsp;for&nbsp;issue&nbsp;3870.</span><br>
<span class="lineno"></span><span class="keyword" id="7605019">func</span>&nbsp;<span class="ident" id="7605024">TestFuncType</span><span class="op" id="7605036">(</span><span class="ident" id="7605037">t</span>&nbsp;<span class="op" id="7605039">*</span><span class="ident" id="7605040"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7605047">.</span><span class="ident" id="7605048"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7605049">)</span>&nbsp;<span class="op" id="7605051">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605054">src</span>&nbsp;<span class="op" id="7605058">:=</span>&nbsp;<span class="op" id="7605061">&amp;</span><span class="ident" id="7605062"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605065">.</span><span class="ident" id="7605066"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="7605070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605074"><a href="/gostd/go/ast/ast.go.html#3824009">Name</a></span><span class="op" id="7605078">:</span>&nbsp;<span class="op" id="7605080">&amp;</span><span class="ident" id="7605081"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605084">.</span><span class="ident" id="7605085"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="7605090">{</span><span class="ident" id="7605091"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7605095">:</span>&nbsp;<span class="string" id="7605097">&#34;p&#34;</span><span class="op" id="7605100">}</span><span class="op" id="7605101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605105"><a href="/gostd/go/ast/ast.go.html#3824053">Decls</a></span><span class="op" id="7605110">:</span>&nbsp;<span class="op" id="7605112">[</span><span class="op" id="7605113">]</span><span class="ident" id="7605114"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605117">.</span><span class="ident" id="7605118"><a href="/gostd/go/ast/ast.go.html#3795432">Decl</a></span><span class="op" id="7605122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605127">&amp;</span><span class="ident" id="7605128"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605131">.</span><span class="ident" id="7605132"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="7605140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605146"><a href="/gostd/go/ast/ast.go.html#3822643">Name</a></span><span class="op" id="7605150">:</span>&nbsp;<span class="op" id="7605152">&amp;</span><span class="ident" id="7605153"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605156">.</span><span class="ident" id="7605157"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="7605162">{</span><span class="ident" id="7605163"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><span class="op" id="7605167">:</span>&nbsp;<span class="string" id="7605169">&#34;f&#34;</span><span class="op" id="7605172">}</span><span class="op" id="7605173">,</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605179"><a href="/gostd/go/ast/ast.go.html#3822688">Type</a></span><span class="op" id="7605183">:</span>&nbsp;<span class="op" id="7605185">&amp;</span><span class="ident" id="7605186"><a href="/gostd/go/printer/printer_test.go.html#7592422">ast</a></span><span class="op" id="7605189">.</span><span class="ident" id="7605190"><a href="/gostd/go/ast/ast.go.html#3804768">FuncType</a></span><span class="op" id="7605198">{</span><span class="op" id="7605199">}</span><span class="op" id="7605200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605205">}</span><span class="op" id="7605206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605210">}</span><span class="op" id="7605211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605218">var</span>&nbsp;<span class="ident" id="7605222">buf</span>&nbsp;<span class="ident" id="7605226"><a href="/gostd/go/printer/printer_test.go.html#7592388">bytes</a></span><span class="op" id="7605231">.</span><span class="ident" id="7605232"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605240">if</span>&nbsp;<span class="ident" id="7605243">err</span>&nbsp;<span class="op" id="7605247">:=</span>&nbsp;<span class="ident" id="7605250"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="7605256">(</span><span class="op" id="7605257">&amp;</span><span class="ident" id="7605258"><a href="/gostd/go/printer/printer_test.go.html#7605222">buf</a></span><span class="op" id="7605261">,</span>&nbsp;<span class="ident" id="7605263"><a href="/gostd/go/printer/printer_test.go.html#7592624">fset</a></span><span class="op" id="7605267">,</span>&nbsp;<span class="ident" id="7605269"><a href="/gostd/go/printer/printer_test.go.html#7605054">src</a></span><span class="op" id="7605272">)</span><span class="op" id="7605273">;</span>&nbsp;<span class="ident" id="7605275"><a href="/gostd/go/printer/printer_test.go.html#7605243">err</a></span>&nbsp;<span class="op" id="7605279">!=</span>&nbsp;<span class="builtintype" id="7605282">nil</span>&nbsp;<span class="op" id="7605286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605290"><a href="/gostd/go/printer/printer_test.go.html#7605037">t</a></span><span class="op" id="7605291">.</span><span class="ident" id="7605292"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7605297">(</span><span class="ident" id="7605298"><a href="/gostd/go/printer/printer_test.go.html#7605243">err</a></span><span class="op" id="7605301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605307">got</span>&nbsp;<span class="op" id="7605311">:=</span>&nbsp;<span class="ident" id="7605314"><a href="/gostd/go/printer/printer_test.go.html#7605222">buf</a></span><span class="op" id="7605317">.</span><span class="ident" id="7605318"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7605324">(</span><span class="op" id="7605325">)</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605329">const</span>&nbsp;<span class="ident" id="7605335">want</span>&nbsp;<span class="op" id="7605340">=</span>&nbsp;<span class="string" id="7605342">`package&nbsp;p<br>
<span class="lineno"></span><br>
<span class="lineno"></span>func&nbsp;f()<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605367">if</span>&nbsp;<span class="ident" id="7605370"><a href="/gostd/go/printer/printer_test.go.html#7605307">got</a></span>&nbsp;<span class="op" id="7605374">!=</span>&nbsp;<span class="ident" id="7605377"><a href="/gostd/go/printer/printer_test.go.html#7605335">want</a></span>&nbsp;<span class="op" id="7605382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605386"><a href="/gostd/go/printer/printer_test.go.html#7605037">t</a></span><span class="op" id="7605387">.</span><span class="ident" id="7605388"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7605394">(</span><span class="string" id="7605395">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="7605418">,</span>&nbsp;<span class="ident" id="7605420"><a href="/gostd/go/printer/printer_test.go.html#7605307">got</a></span><span class="op" id="7605423">,</span>&nbsp;<span class="ident" id="7605425"><a href="/gostd/go/printer/printer_test.go.html#7605335">want</a></span><span class="op" id="7605429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605432">}</span><br>
<span class="lineno"></span><span class="op" id="7605434">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="comment" id="7605437">//&nbsp;TextX&nbsp;is&nbsp;a&nbsp;skeleton&nbsp;test&nbsp;that&nbsp;can&nbsp;be&nbsp;filled&nbsp;in&nbsp;for&nbsp;debugging&nbsp;one-off&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="7605516">//&nbsp;Do&nbsp;not&nbsp;remove.</span><br>
<span class="lineno"></span><span class="keyword" id="7605534">func</span>&nbsp;<span class="ident" id="7605539">TestX</span><span class="op" id="7605544">(</span><span class="ident" id="7605545">t</span>&nbsp;<span class="op" id="7605547">*</span><span class="ident" id="7605548"><a href="/gostd/go/printer/printer_test.go.html#7592487">testing</a></span><span class="op" id="7605555">.</span><span class="ident" id="7605556"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7605557">)</span>&nbsp;<span class="op" id="7605559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605562">const</span>&nbsp;<span class="ident" id="7605568">src</span>&nbsp;<span class="op" id="7605572">=</span>&nbsp;<span class="string" id="7605574">`<br>
<span class="lineno">555</span>package&nbsp;p<br>
<span class="lineno"></span>func&nbsp;_()&nbsp;{}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605601">_</span><span class="op" id="7605602">,</span>&nbsp;<span class="ident" id="7605604">err</span>&nbsp;<span class="op" id="7605608">:=</span>&nbsp;<span class="ident" id="7605611"><a href="/gostd/go/printer/printer_test.go.html#7592902">format</a></span><span class="op" id="7605617">(</span><span class="op" id="7605618">[</span><span class="op" id="7605619">]</span><span class="builtintype" id="7605620">byte</span><span class="op" id="7605624">(</span><span class="ident" id="7605625"><a href="/gostd/go/printer/printer_test.go.html#7605568">src</a></span><span class="op" id="7605628">)</span><span class="op" id="7605629">,</span>&nbsp;<span class="num" id="7605631">0</span><span class="op" id="7605632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7605635">if</span>&nbsp;<span class="ident" id="7605638"><a href="/gostd/go/printer/printer_test.go.html#7605604">err</a></span>&nbsp;<span class="op" id="7605642">!=</span>&nbsp;<span class="builtintype" id="7605645">nil</span>&nbsp;<span class="op" id="7605649">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7605653"><a href="/gostd/go/printer/printer_test.go.html#7605545">t</a></span><span class="op" id="7605654">.</span><span class="ident" id="7605655"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7605660">(</span><span class="ident" id="7605661"><a href="/gostd/go/printer/printer_test.go.html#7605604">err</a></span><span class="op" id="7605664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7605667">}</span><br>
<span class="lineno"></span><span class="op" id="7605669">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
