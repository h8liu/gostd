<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7528528">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7528584">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7528638">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7528689">package</span>&nbsp;<span class="ident" id="7528697">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7528703">import</span>&nbsp;<span class="op" id="7528710">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528713">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528722">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528740">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7528746">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7528756">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7528759">func</span>&nbsp;<span class="ident" id="7528764">TestRead</span><span class="op" id="7528772">(</span><span class="ident" id="7528773">t</span>&nbsp;<span class="op" id="7528775">*</span><span class="ident" id="7528776"><a href="/crypto/rand/rand_test.go.html#7528746">testing</a></span><span class="op" id="7528783">.</span><span class="ident" id="7528784">T</span><span class="op" id="7528785">)</span>&nbsp;<span class="op" id="7528787">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528790">var</span>&nbsp;<span class="ident" id="7528794">n</span>&nbsp;<span class="builtintype" id="7528796">int</span>&nbsp;<span class="op" id="7528800">=</span>&nbsp;<span class="num" id="7528802">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528807">if</span>&nbsp;<span class="ident" id="7528810"><a href="/crypto/rand/rand_test.go.html#7528746">testing</a></span><span class="op" id="7528817">.</span><span class="ident" id="7528818">Short</span><span class="op" id="7528823">(</span><span class="op" id="7528824">)</span>&nbsp;<span class="op" id="7528826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528830"><a href="/crypto/rand/rand_test.go.html#7528794">n</a></span>&nbsp;<span class="op" id="7528832">=</span>&nbsp;<span class="num" id="7528834">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528842">b</span>&nbsp;<span class="op" id="7528844">:=</span>&nbsp;<span class="builtinfunc" id="7528847">make</span><span class="op" id="7528851">(</span><span class="op" id="7528852">[</span><span class="op" id="7528853">]</span><span class="builtintype" id="7528854">byte</span><span class="op" id="7528858">,</span>&nbsp;<span class="ident" id="7528860"><a href="/crypto/rand/rand_test.go.html#7528794">n</a></span><span class="op" id="7528861">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528864"><a href="/crypto/rand/rand_test.go.html#7528794">n</a></span><span class="op" id="7528865">,</span>&nbsp;<span class="ident" id="7528867">err</span>&nbsp;<span class="op" id="7528871">:=</span>&nbsp;<span class="ident" id="7528874"><a href="/crypto/rand/rand_test.go.html#7528740">io</a></span><span class="op" id="7528876">.</span><span class="ident" id="7528877">ReadFull</span><span class="op" id="7528885">(</span><span class="ident" id="7528886"><a href="/crypto/rand/rand.go.html#4011150">Reader</a></span><span class="op" id="7528892">,</span>&nbsp;<span class="ident" id="7528894"><a href="/crypto/rand/rand_test.go.html#7528842">b</a></span><span class="op" id="7528895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528898">if</span>&nbsp;<span class="ident" id="7528901"><a href="/crypto/rand/rand_test.go.html#7528794">n</a></span>&nbsp;<span class="op" id="7528903">!=</span>&nbsp;<span class="builtinfunc" id="7528906">len</span><span class="op" id="7528909">(</span><span class="ident" id="7528910"><a href="/crypto/rand/rand_test.go.html#7528842">b</a></span><span class="op" id="7528911">)</span>&nbsp;<span class="op" id="7528913">||</span>&nbsp;<span class="ident" id="7528916"><a href="/crypto/rand/rand_test.go.html#7528867">err</a></span>&nbsp;<span class="op" id="7528920">!=</span>&nbsp;<span class="ident" id="7528923">nil</span>&nbsp;<span class="op" id="7528927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528931"><a href="/crypto/rand/rand_test.go.html#7528773">t</a></span><span class="op" id="7528932">.</span><span class="ident" id="7528933">Fatalf</span><span class="op" id="7528939">(</span><span class="string" id="7528940">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7528964">,</span>&nbsp;<span class="ident" id="7528966"><a href="/crypto/rand/rand_test.go.html#7528794">n</a></span><span class="op" id="7528967">,</span>&nbsp;<span class="ident" id="7528969"><a href="/crypto/rand/rand_test.go.html#7528867">err</a></span><span class="op" id="7528972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7528975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7528979">var</span>&nbsp;<span class="ident" id="7528983">z</span>&nbsp;<span class="ident" id="7528985"><a href="/crypto/rand/rand_test.go.html#7528713">bytes</a></span><span class="op" id="7528990">.</span><span class="ident" id="7528991">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7528999">f</span><span class="op" id="7529000">,</span>&nbsp;<span class="ident" id="7529002">_</span>&nbsp;<span class="op" id="7529004">:=</span>&nbsp;<span class="ident" id="7529007"><a href="/crypto/rand/rand_test.go.html#7528722">flate</a></span><span class="op" id="7529012">.</span><span class="ident" id="7529013">NewWriter</span><span class="op" id="7529022">(</span><span class="op" id="7529023">&amp;</span><span class="ident" id="7529024"><a href="/crypto/rand/rand_test.go.html#7528983">z</a></span><span class="op" id="7529025">,</span>&nbsp;<span class="num" id="7529027">5</span><span class="op" id="7529028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529031"><a href="/crypto/rand/rand_test.go.html#7528999">f</a></span><span class="op" id="7529032">.</span><span class="ident" id="7529033">Write</span><span class="op" id="7529038">(</span><span class="ident" id="7529039"><a href="/crypto/rand/rand_test.go.html#7528842">b</a></span><span class="op" id="7529040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529043"><a href="/crypto/rand/rand_test.go.html#7528999">f</a></span><span class="op" id="7529044">.</span><span class="ident" id="7529045">Close</span><span class="op" id="7529050">(</span><span class="op" id="7529051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529054">if</span>&nbsp;<span class="ident" id="7529057"><a href="/crypto/rand/rand_test.go.html#7528983">z</a></span><span class="op" id="7529058">.</span><span class="ident" id="7529059">Len</span><span class="op" id="7529062">(</span><span class="op" id="7529063">)</span>&nbsp;<span class="op" id="7529065">&lt;</span>&nbsp;<span class="builtinfunc" id="7529067">len</span><span class="op" id="7529070">(</span><span class="ident" id="7529071"><a href="/crypto/rand/rand_test.go.html#7528842">b</a></span><span class="op" id="7529072">)</span><span class="op" id="7529073">*</span><span class="num" id="7529074">99</span><span class="op" id="7529076">/</span><span class="num" id="7529077">100</span>&nbsp;<span class="op" id="7529081">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529085"><a href="/crypto/rand/rand_test.go.html#7528773">t</a></span><span class="op" id="7529086">.</span><span class="ident" id="7529087">Fatalf</span><span class="op" id="7529093">(</span><span class="string" id="7529094">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7529115">,</span>&nbsp;<span class="builtinfunc" id="7529117">len</span><span class="op" id="7529120">(</span><span class="ident" id="7529121"><a href="/crypto/rand/rand_test.go.html#7528842">b</a></span><span class="op" id="7529122">)</span><span class="op" id="7529123">,</span>&nbsp;<span class="ident" id="7529125"><a href="/crypto/rand/rand_test.go.html#7528983">z</a></span><span class="op" id="7529126">.</span><span class="ident" id="7529127">Len</span><span class="op" id="7529130">(</span><span class="op" id="7529131">)</span><span class="op" id="7529132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529135">}</span><br>
<span class="lineno"></span><span class="op" id="7529137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7529140">func</span>&nbsp;<span class="ident" id="7529145">TestReadEmpty</span><span class="op" id="7529158">(</span><span class="ident" id="7529159">t</span>&nbsp;<span class="op" id="7529161">*</span><span class="ident" id="7529162"><a href="/crypto/rand/rand_test.go.html#7528746">testing</a></span><span class="op" id="7529169">.</span><span class="ident" id="7529170">T</span><span class="op" id="7529171">)</span>&nbsp;<span class="op" id="7529173">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529176">n</span><span class="op" id="7529177">,</span>&nbsp;<span class="ident" id="7529179">err</span>&nbsp;<span class="op" id="7529183">:=</span>&nbsp;<span class="ident" id="7529186"><a href="/crypto/rand/rand.go.html#4011150">Reader</a></span><span class="op" id="7529192">.</span><span class="ident" id="7529193">Read</span><span class="op" id="7529197">(</span><span class="builtinfunc" id="7529198">make</span><span class="op" id="7529202">(</span><span class="op" id="7529203">[</span><span class="op" id="7529204">]</span><span class="builtintype" id="7529205">byte</span><span class="op" id="7529209">,</span>&nbsp;<span class="num" id="7529211">0</span><span class="op" id="7529212">)</span><span class="op" id="7529213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529216">if</span>&nbsp;<span class="ident" id="7529219"><a href="/crypto/rand/rand_test.go.html#7529176">n</a></span>&nbsp;<span class="op" id="7529221">!=</span>&nbsp;<span class="num" id="7529224">0</span>&nbsp;<span class="op" id="7529226">||</span>&nbsp;<span class="ident" id="7529229"><a href="/crypto/rand/rand_test.go.html#7529179">err</a></span>&nbsp;<span class="op" id="7529233">!=</span>&nbsp;<span class="ident" id="7529236">nil</span>&nbsp;<span class="op" id="7529240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529244"><a href="/crypto/rand/rand_test.go.html#7529159">t</a></span><span class="op" id="7529245">.</span><span class="ident" id="7529246">Fatalf</span><span class="op" id="7529252">(</span><span class="string" id="7529253">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7529285">,</span>&nbsp;<span class="ident" id="7529287"><a href="/crypto/rand/rand_test.go.html#7529176">n</a></span><span class="op" id="7529288">,</span>&nbsp;<span class="ident" id="7529290"><a href="/crypto/rand/rand_test.go.html#7529179">err</a></span><span class="op" id="7529293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529299"><a href="/crypto/rand/rand_test.go.html#7529176">n</a></span><span class="op" id="7529300">,</span>&nbsp;<span class="ident" id="7529302"><a href="/crypto/rand/rand_test.go.html#7529179">err</a></span>&nbsp;<span class="op" id="7529306">=</span>&nbsp;<span class="ident" id="7529308"><a href="/crypto/rand/rand.go.html#4011150">Reader</a></span><span class="op" id="7529314">.</span><span class="ident" id="7529315">Read</span><span class="op" id="7529319">(</span><span class="ident" id="7529320">nil</span><span class="op" id="7529323">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7529326">if</span>&nbsp;<span class="ident" id="7529329"><a href="/crypto/rand/rand_test.go.html#7529176">n</a></span>&nbsp;<span class="op" id="7529331">!=</span>&nbsp;<span class="num" id="7529334">0</span>&nbsp;<span class="op" id="7529336">||</span>&nbsp;<span class="ident" id="7529339"><a href="/crypto/rand/rand_test.go.html#7529179">err</a></span>&nbsp;<span class="op" id="7529343">!=</span>&nbsp;<span class="ident" id="7529346">nil</span>&nbsp;<span class="op" id="7529350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7529354"><a href="/crypto/rand/rand_test.go.html#7529159">t</a></span><span class="op" id="7529355">.</span><span class="ident" id="7529356">Fatalf</span><span class="op" id="7529362">(</span><span class="string" id="7529363">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7529383">,</span>&nbsp;<span class="ident" id="7529385"><a href="/crypto/rand/rand_test.go.html#7529176">n</a></span><span class="op" id="7529386">,</span>&nbsp;<span class="ident" id="7529388"><a href="/crypto/rand/rand_test.go.html#7529179">err</a></span><span class="op" id="7529391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7529394">}</span><br>
<span class="lineno"></span><span class="op" id="7529396">}</span>
</div>
</body>
</html>
