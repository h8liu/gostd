<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/md5</h2>
<ul>
<li><a href="/gostd/crypto/md5/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5.go.html">md5.go</a></li>
<li><a href="/gostd/crypto/md5/md5_test.go.html" class="current">md5_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5block.go.html">md5block.go</a></li>
<li><a href="/gostd/crypto/md5/md5block_decl.go.html">md5block_decl.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7947815">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7947870">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7947924">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7947975">package</span>&nbsp;<span class="ident" id="7947983">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7947988">import</span>&nbsp;<span class="op" id="7947995">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7947998">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7948013">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7948020">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7948026">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7948037">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="7948046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7948049">type</span>&nbsp;<span class="ident" id="7948054">md5Test</span>&nbsp;<span class="keyword" id="7948062">struct</span>&nbsp;<span class="op" id="7948069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7948072">out</span>&nbsp;<span class="builtintype" id="7948076">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7948084">in</span>&nbsp;&nbsp;<span class="builtintype" id="7948088">string</span><br>
<span class="lineno"></span><span class="op" id="7948095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7948098">var</span>&nbsp;<span class="ident" id="7948102">golden</span>&nbsp;<span class="op" id="7948109">=</span>&nbsp;<span class="op" id="7948111">[</span><span class="op" id="7948112">]</span><span class="ident" id="7948113">md5Test</span><span class="op" id="7948120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948123">{</span><span class="string" id="7948124">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="7948158">,</span>&nbsp;<span class="string" id="7948160">&#34;&#34;</span><span class="op" id="7948162">}</span><span class="op" id="7948163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948166">{</span><span class="string" id="7948167">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="7948201">,</span>&nbsp;<span class="string" id="7948203">&#34;a&#34;</span><span class="op" id="7948206">}</span><span class="op" id="7948207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948210">{</span><span class="string" id="7948211">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="7948245">,</span>&nbsp;<span class="string" id="7948247">&#34;ab&#34;</span><span class="op" id="7948251">}</span><span class="op" id="7948252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948255">{</span><span class="string" id="7948256">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="7948290">,</span>&nbsp;<span class="string" id="7948292">&#34;abc&#34;</span><span class="op" id="7948297">}</span><span class="op" id="7948298">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948301">{</span><span class="string" id="7948302">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="7948336">,</span>&nbsp;<span class="string" id="7948338">&#34;abcd&#34;</span><span class="op" id="7948344">}</span><span class="op" id="7948345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948348">{</span><span class="string" id="7948349">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="7948383">,</span>&nbsp;<span class="string" id="7948385">&#34;abcde&#34;</span><span class="op" id="7948392">}</span><span class="op" id="7948393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948396">{</span><span class="string" id="7948397">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="7948431">,</span>&nbsp;<span class="string" id="7948433">&#34;abcdef&#34;</span><span class="op" id="7948441">}</span><span class="op" id="7948442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948445">{</span><span class="string" id="7948446">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="7948480">,</span>&nbsp;<span class="string" id="7948482">&#34;abcdefg&#34;</span><span class="op" id="7948491">}</span><span class="op" id="7948492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948495">{</span><span class="string" id="7948496">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="7948530">,</span>&nbsp;<span class="string" id="7948532">&#34;abcdefgh&#34;</span><span class="op" id="7948542">}</span><span class="op" id="7948543">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948546">{</span><span class="string" id="7948547">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="7948581">,</span>&nbsp;<span class="string" id="7948583">&#34;abcdefghi&#34;</span><span class="op" id="7948594">}</span><span class="op" id="7948595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948598">{</span><span class="string" id="7948599">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="7948633">,</span>&nbsp;<span class="string" id="7948635">&#34;abcdefghij&#34;</span><span class="op" id="7948647">}</span><span class="op" id="7948648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948651">{</span><span class="string" id="7948652">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="7948686">,</span>&nbsp;<span class="string" id="7948688">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7948731">}</span><span class="op" id="7948732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948735">{</span><span class="string" id="7948736">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="7948770">,</span>&nbsp;<span class="string" id="7948772">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7948831">}</span><span class="op" id="7948832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948835">{</span><span class="string" id="7948836">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="7948870">,</span>&nbsp;<span class="string" id="7948872">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7948916">}</span><span class="op" id="7948917">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7948920">{</span><span class="string" id="7948921">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="7948955">,</span>&nbsp;<span class="string" id="7948957">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7949016">}</span><span class="op" id="7949017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949020">{</span><span class="string" id="7949021">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="7949055">,</span>&nbsp;<span class="string" id="7949057">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7949117">}</span><span class="op" id="7949118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949121">{</span><span class="string" id="7949122">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="7949156">,</span>&nbsp;<span class="string" id="7949158">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7949187">}</span><span class="op" id="7949188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949191">{</span><span class="string" id="7949192">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="7949226">,</span>&nbsp;<span class="string" id="7949228">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7949297">}</span><span class="op" id="7949298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949301">{</span><span class="string" id="7949302">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="7949336">,</span>&nbsp;<span class="string" id="7949338">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7949397">}</span><span class="op" id="7949398">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949401">{</span><span class="string" id="7949402">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="7949436">,</span>&nbsp;<span class="string" id="7949438">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7949528">}</span><span class="op" id="7949529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949532">{</span><span class="string" id="7949533">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="7949567">,</span>&nbsp;<span class="string" id="7949569">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7949646">}</span><span class="op" id="7949647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949650">{</span><span class="string" id="7949651">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="7949685">,</span>&nbsp;<span class="string" id="7949687">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7949713">}</span><span class="op" id="7949714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949717">{</span><span class="string" id="7949718">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="7949752">,</span>&nbsp;<span class="string" id="7949754">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7949805">}</span><span class="op" id="7949806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949809">{</span><span class="string" id="7949810">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="7949844">,</span>&nbsp;<span class="string" id="7949846">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7949920">}</span><span class="op" id="7949921">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7949924">{</span><span class="string" id="7949925">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="7949959">,</span>&nbsp;<span class="string" id="7949961">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7950009">}</span><span class="op" id="7950010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950013">{</span><span class="string" id="7950014">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="7950048">,</span>&nbsp;<span class="string" id="7950050">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7950122">}</span><span class="op" id="7950123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950126">{</span><span class="string" id="7950127">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="7950161">,</span>&nbsp;<span class="string" id="7950163">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7950233">}</span><span class="op" id="7950234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950237">{</span><span class="string" id="7950238">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="7950272">,</span>&nbsp;<span class="string" id="7950274">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7950308">}</span><span class="op" id="7950309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950312">{</span><span class="string" id="7950313">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="7950347">,</span>&nbsp;<span class="string" id="7950349">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7950439">}</span><span class="op" id="7950440">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950443">{</span><span class="string" id="7950444">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="7950478">,</span>&nbsp;<span class="string" id="7950480">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7950614">}</span><span class="op" id="7950615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950618">{</span><span class="string" id="7950619">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="7950653">,</span>&nbsp;<span class="string" id="7950655">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7950713">}</span><span class="op" id="7950714">,</span><br>
<span class="lineno"></span><span class="op" id="7950716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7950719">func</span>&nbsp;<span class="ident" id="7950724">TestGolden</span><span class="op" id="7950734">(</span><span class="ident" id="7950735">t</span>&nbsp;<span class="op" id="7950737">*</span><span class="ident" id="7950738">testing</span><span class="op" id="7950745">.</span><span class="ident" id="7950746">T</span><span class="op" id="7950747">)</span>&nbsp;<span class="op" id="7950749">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7950752">for</span>&nbsp;<span class="ident" id="7950756">i</span>&nbsp;<span class="op" id="7950758">:=</span>&nbsp;<span class="num" id="7950761">0</span><span class="op" id="7950762">;</span>&nbsp;<span class="ident" id="7950764">i</span>&nbsp;<span class="op" id="7950766">&lt;</span>&nbsp;<span class="builtinfunc" id="7950768">len</span><span class="op" id="7950771">(</span><span class="ident" id="7950772">golden</span><span class="op" id="7950778">)</span><span class="op" id="7950779">;</span>&nbsp;<span class="ident" id="7950781">i</span><span class="op" id="7950782">++</span>&nbsp;<span class="op" id="7950785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7950789">g</span>&nbsp;<span class="op" id="7950791">:=</span>&nbsp;<span class="ident" id="7950794">golden</span><span class="op" id="7950800">[</span><span class="ident" id="7950801">i</span><span class="op" id="7950802">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7950806">s</span>&nbsp;<span class="op" id="7950808">:=</span>&nbsp;<span class="ident" id="7950811">fmt</span><span class="op" id="7950814">.</span><span class="ident" id="7950815">Sprintf</span><span class="op" id="7950822">(</span><span class="string" id="7950823">&#34;%x&#34;</span><span class="op" id="7950827">,</span>&nbsp;<span class="ident" id="7950829">Sum</span><span class="op" id="7950832">(</span><span class="op" id="7950833">[</span><span class="op" id="7950834">]</span><span class="builtintype" id="7950835">byte</span><span class="op" id="7950839">(</span><span class="ident" id="7950840">g</span><span class="op" id="7950841">.</span><span class="ident" id="7950842">in</span><span class="op" id="7950844">)</span><span class="op" id="7950845">)</span><span class="op" id="7950846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7950850">if</span>&nbsp;<span class="ident" id="7950853">s</span>&nbsp;<span class="op" id="7950855">!=</span>&nbsp;<span class="ident" id="7950858">g</span><span class="op" id="7950859">.</span><span class="ident" id="7950860">out</span>&nbsp;<span class="op" id="7950864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7950869">t</span><span class="op" id="7950870">.</span><span class="ident" id="7950871">Fatalf</span><span class="op" id="7950877">(</span><span class="string" id="7950878">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7950914">,</span>&nbsp;<span class="ident" id="7950916">g</span><span class="op" id="7950917">.</span><span class="ident" id="7950918">in</span><span class="op" id="7950920">,</span>&nbsp;<span class="ident" id="7950922">s</span><span class="op" id="7950923">,</span>&nbsp;<span class="ident" id="7950925">g</span><span class="op" id="7950926">.</span><span class="ident" id="7950927">out</span><span class="op" id="7950930">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7950934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7950938">c</span>&nbsp;<span class="op" id="7950940">:=</span>&nbsp;<span class="ident" id="7950943">New</span><span class="op" id="7950946">(</span><span class="op" id="7950947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7950951">buf</span>&nbsp;<span class="op" id="7950955">:=</span>&nbsp;<span class="builtinfunc" id="7950958">make</span><span class="op" id="7950962">(</span><span class="op" id="7950963">[</span><span class="op" id="7950964">]</span><span class="builtintype" id="7950965">byte</span><span class="op" id="7950969">,</span>&nbsp;<span class="builtinfunc" id="7950971">len</span><span class="op" id="7950974">(</span><span class="ident" id="7950975">g</span><span class="op" id="7950976">.</span><span class="ident" id="7950977">in</span><span class="op" id="7950979">)</span><span class="op" id="7950980">+</span><span class="num" id="7950981">4</span><span class="op" id="7950982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7950986">for</span>&nbsp;<span class="ident" id="7950990">j</span>&nbsp;<span class="op" id="7950992">:=</span>&nbsp;<span class="num" id="7950995">0</span><span class="op" id="7950996">;</span>&nbsp;<span class="ident" id="7950998">j</span>&nbsp;<span class="op" id="7951000">&lt;</span>&nbsp;<span class="num" id="7951002">3</span><span class="op" id="7951003">+</span><span class="num" id="7951004">4</span><span class="op" id="7951005">;</span>&nbsp;<span class="ident" id="7951007">j</span><span class="op" id="7951008">++</span>&nbsp;<span class="op" id="7951011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951016">if</span>&nbsp;<span class="ident" id="7951019">j</span>&nbsp;<span class="op" id="7951021">&lt;</span>&nbsp;<span class="num" id="7951023">2</span>&nbsp;<span class="op" id="7951025">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951031">io</span><span class="op" id="7951033">.</span><span class="ident" id="7951034">WriteString</span><span class="op" id="7951045">(</span><span class="ident" id="7951046">c</span><span class="op" id="7951047">,</span>&nbsp;<span class="ident" id="7951049">g</span><span class="op" id="7951050">.</span><span class="ident" id="7951051">in</span><span class="op" id="7951053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951058">}</span>&nbsp;<span class="keyword" id="7951060">else</span>&nbsp;<span class="keyword" id="7951065">if</span>&nbsp;<span class="ident" id="7951068">j</span>&nbsp;<span class="op" id="7951070">==</span>&nbsp;<span class="num" id="7951073">2</span>&nbsp;<span class="op" id="7951075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951081">io</span><span class="op" id="7951083">.</span><span class="ident" id="7951084">WriteString</span><span class="op" id="7951095">(</span><span class="ident" id="7951096">c</span><span class="op" id="7951097">,</span>&nbsp;<span class="ident" id="7951099">g</span><span class="op" id="7951100">.</span><span class="ident" id="7951101">in</span><span class="op" id="7951103">[</span><span class="num" id="7951104">0</span><span class="op" id="7951105">:</span><span class="builtinfunc" id="7951106">len</span><span class="op" id="7951109">(</span><span class="ident" id="7951110">g</span><span class="op" id="7951111">.</span><span class="ident" id="7951112">in</span><span class="op" id="7951114">)</span><span class="op" id="7951115">/</span><span class="num" id="7951116">2</span><span class="op" id="7951117">]</span><span class="op" id="7951118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951124">c</span><span class="op" id="7951125">.</span><span class="ident" id="7951126">Sum</span><span class="op" id="7951129">(</span><span class="builtintype" id="7951130">nil</span><span class="op" id="7951133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951139">io</span><span class="op" id="7951141">.</span><span class="ident" id="7951142">WriteString</span><span class="op" id="7951153">(</span><span class="ident" id="7951154">c</span><span class="op" id="7951155">,</span>&nbsp;<span class="ident" id="7951157">g</span><span class="op" id="7951158">.</span><span class="ident" id="7951159">in</span><span class="op" id="7951161">[</span><span class="builtinfunc" id="7951162">len</span><span class="op" id="7951165">(</span><span class="ident" id="7951166">g</span><span class="op" id="7951167">.</span><span class="ident" id="7951168">in</span><span class="op" id="7951170">)</span><span class="op" id="7951171">/</span><span class="num" id="7951172">2</span><span class="op" id="7951173">:</span><span class="op" id="7951174">]</span><span class="op" id="7951175">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951180">}</span>&nbsp;<span class="keyword" id="7951182">else</span>&nbsp;<span class="keyword" id="7951187">if</span>&nbsp;<span class="ident" id="7951190">j</span>&nbsp;<span class="op" id="7951192">&gt;</span>&nbsp;<span class="num" id="7951194">2</span>&nbsp;<span class="op" id="7951196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7951202">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951230">buf</span>&nbsp;<span class="op" id="7951234">=</span>&nbsp;<span class="ident" id="7951236">buf</span><span class="op" id="7951239">[</span><span class="num" id="7951240">1</span><span class="op" id="7951241">:</span><span class="op" id="7951242">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7951248">copy</span><span class="op" id="7951252">(</span><span class="ident" id="7951253">buf</span><span class="op" id="7951256">,</span>&nbsp;<span class="ident" id="7951258">g</span><span class="op" id="7951259">.</span><span class="ident" id="7951260">in</span><span class="op" id="7951262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951268">c</span><span class="op" id="7951269">.</span><span class="ident" id="7951270">Write</span><span class="op" id="7951275">(</span><span class="ident" id="7951276">buf</span><span class="op" id="7951279">[</span><span class="op" id="7951280">:</span><span class="builtinfunc" id="7951281">len</span><span class="op" id="7951284">(</span><span class="ident" id="7951285">g</span><span class="op" id="7951286">.</span><span class="ident" id="7951287">in</span><span class="op" id="7951289">)</span><span class="op" id="7951290">]</span><span class="op" id="7951291">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951301">s</span>&nbsp;<span class="op" id="7951303">:=</span>&nbsp;<span class="ident" id="7951306">fmt</span><span class="op" id="7951309">.</span><span class="ident" id="7951310">Sprintf</span><span class="op" id="7951317">(</span><span class="string" id="7951318">&#34;%x&#34;</span><span class="op" id="7951322">,</span>&nbsp;<span class="ident" id="7951324">c</span><span class="op" id="7951325">.</span><span class="ident" id="7951326">Sum</span><span class="op" id="7951329">(</span><span class="builtintype" id="7951330">nil</span><span class="op" id="7951333">)</span><span class="op" id="7951334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951339">if</span>&nbsp;<span class="ident" id="7951342">s</span>&nbsp;<span class="op" id="7951344">!=</span>&nbsp;<span class="ident" id="7951347">g</span><span class="op" id="7951348">.</span><span class="ident" id="7951349">out</span>&nbsp;<span class="op" id="7951353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951359">t</span><span class="op" id="7951360">.</span><span class="ident" id="7951361">Fatalf</span><span class="op" id="7951367">(</span><span class="string" id="7951368">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7951394">,</span>&nbsp;<span class="ident" id="7951396">j</span><span class="op" id="7951397">,</span>&nbsp;<span class="ident" id="7951399">g</span><span class="op" id="7951400">.</span><span class="ident" id="7951401">in</span><span class="op" id="7951403">,</span>&nbsp;<span class="ident" id="7951405">s</span><span class="op" id="7951406">,</span>&nbsp;<span class="ident" id="7951408">g</span><span class="op" id="7951409">.</span><span class="ident" id="7951410">out</span><span class="op" id="7951413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951418">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951423">c</span><span class="op" id="7951424">.</span><span class="ident" id="7951425">Reset</span><span class="op" id="7951430">(</span><span class="op" id="7951431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951438">}</span><br>
<span class="lineno"></span><span class="op" id="7951440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7951443">func</span>&nbsp;<span class="ident" id="7951448">TestLarge</span><span class="op" id="7951457">(</span><span class="ident" id="7951458">t</span>&nbsp;<span class="op" id="7951460">*</span><span class="ident" id="7951461">testing</span><span class="op" id="7951468">.</span><span class="ident" id="7951469">T</span><span class="op" id="7951470">)</span>&nbsp;<span class="op" id="7951472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951475">const</span>&nbsp;<span class="ident" id="7951481">N</span>&nbsp;<span class="op" id="7951483">=</span>&nbsp;<span class="num" id="7951485">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951492">ok</span>&nbsp;<span class="op" id="7951495">:=</span>&nbsp;<span class="string" id="7951498">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="7951533">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951567">block</span>&nbsp;<span class="op" id="7951573">:=</span>&nbsp;<span class="builtinfunc" id="7951576">make</span><span class="op" id="7951580">(</span><span class="op" id="7951581">[</span><span class="op" id="7951582">]</span><span class="builtintype" id="7951583">byte</span><span class="op" id="7951587">,</span>&nbsp;<span class="num" id="7951589">10004</span><span class="op" id="7951594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951597">c</span>&nbsp;<span class="op" id="7951599">:=</span>&nbsp;<span class="ident" id="7951602">New</span><span class="op" id="7951605">(</span><span class="op" id="7951606">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951609">for</span>&nbsp;<span class="ident" id="7951613">offset</span>&nbsp;<span class="op" id="7951620">:=</span>&nbsp;<span class="num" id="7951623">0</span><span class="op" id="7951624">;</span>&nbsp;<span class="ident" id="7951626">offset</span>&nbsp;<span class="op" id="7951633">&lt;</span>&nbsp;<span class="num" id="7951635">4</span><span class="op" id="7951636">;</span>&nbsp;<span class="ident" id="7951638">offset</span><span class="op" id="7951644">++</span>&nbsp;<span class="op" id="7951647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951651">for</span>&nbsp;<span class="ident" id="7951655">i</span>&nbsp;<span class="op" id="7951657">:=</span>&nbsp;<span class="num" id="7951660">0</span><span class="op" id="7951661">;</span>&nbsp;<span class="ident" id="7951663">i</span>&nbsp;<span class="op" id="7951665">&lt;</span>&nbsp;<span class="ident" id="7951667">N</span><span class="op" id="7951668">;</span>&nbsp;<span class="ident" id="7951670">i</span><span class="op" id="7951671">++</span>&nbsp;<span class="op" id="7951674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951679">block</span><span class="op" id="7951684">[</span><span class="ident" id="7951685">offset</span><span class="op" id="7951691">+</span><span class="ident" id="7951692">i</span><span class="op" id="7951693">]</span>&nbsp;<span class="op" id="7951695">=</span>&nbsp;<span class="string" id="7951697">&#39;0&#39;</span>&nbsp;<span class="op" id="7951701">+</span>&nbsp;<span class="builtintype" id="7951703">byte</span><span class="op" id="7951707">(</span><span class="ident" id="7951708">i</span><span class="op" id="7951709">%</span><span class="num" id="7951710">10</span><span class="op" id="7951712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951720">for</span>&nbsp;<span class="ident" id="7951724">blockSize</span>&nbsp;<span class="op" id="7951734">:=</span>&nbsp;<span class="num" id="7951737">10</span><span class="op" id="7951739">;</span>&nbsp;<span class="ident" id="7951741">blockSize</span>&nbsp;<span class="op" id="7951751">&lt;=</span>&nbsp;<span class="ident" id="7951754">N</span><span class="op" id="7951755">;</span>&nbsp;<span class="ident" id="7951757">blockSize</span>&nbsp;<span class="op" id="7951767">*=</span>&nbsp;<span class="num" id="7951770">10</span>&nbsp;<span class="op" id="7951773">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951778">blocks</span>&nbsp;<span class="op" id="7951785">:=</span>&nbsp;<span class="ident" id="7951788">N</span>&nbsp;<span class="op" id="7951790">/</span>&nbsp;<span class="ident" id="7951792">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951805">b</span>&nbsp;<span class="op" id="7951807">:=</span>&nbsp;<span class="ident" id="7951810">block</span><span class="op" id="7951815">[</span><span class="ident" id="7951816">offset</span>&nbsp;<span class="op" id="7951823">:</span>&nbsp;<span class="ident" id="7951825">offset</span><span class="op" id="7951831">+</span><span class="ident" id="7951832">blockSize</span><span class="op" id="7951841">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951846">c</span><span class="op" id="7951847">.</span><span class="ident" id="7951848">Reset</span><span class="op" id="7951853">(</span><span class="op" id="7951854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951859">for</span>&nbsp;<span class="ident" id="7951863">i</span>&nbsp;<span class="op" id="7951865">:=</span>&nbsp;<span class="num" id="7951868">0</span><span class="op" id="7951869">;</span>&nbsp;<span class="ident" id="7951871">i</span>&nbsp;<span class="op" id="7951873">&lt;</span>&nbsp;<span class="ident" id="7951875">blocks</span><span class="op" id="7951881">;</span>&nbsp;<span class="ident" id="7951883">i</span><span class="op" id="7951884">++</span>&nbsp;<span class="op" id="7951887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951893">c</span><span class="op" id="7951894">.</span><span class="ident" id="7951895">Write</span><span class="op" id="7951900">(</span><span class="ident" id="7951901">b</span><span class="op" id="7951902">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7951907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951912">s</span>&nbsp;<span class="op" id="7951914">:=</span>&nbsp;<span class="ident" id="7951917">fmt</span><span class="op" id="7951920">.</span><span class="ident" id="7951921">Sprintf</span><span class="op" id="7951928">(</span><span class="string" id="7951929">&#34;%x&#34;</span><span class="op" id="7951933">,</span>&nbsp;<span class="ident" id="7951935">c</span><span class="op" id="7951936">.</span><span class="ident" id="7951937">Sum</span><span class="op" id="7951940">(</span><span class="builtintype" id="7951941">nil</span><span class="op" id="7951944">)</span><span class="op" id="7951945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7951950">if</span>&nbsp;<span class="ident" id="7951953">s</span>&nbsp;<span class="op" id="7951955">!=</span>&nbsp;<span class="ident" id="7951958">ok</span>&nbsp;<span class="op" id="7951961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7951967">t</span><span class="op" id="7951968">.</span><span class="ident" id="7951969">Fatalf</span><span class="op" id="7951975">(</span><span class="string" id="7951976">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7952028">,</span>&nbsp;<span class="ident" id="7952030">offset</span><span class="op" id="7952036">,</span>&nbsp;<span class="ident" id="7952038">blockSize</span><span class="op" id="7952047">,</span>&nbsp;<span class="ident" id="7952049">s</span><span class="op" id="7952050">,</span>&nbsp;<span class="ident" id="7952052">ok</span><span class="op" id="7952054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952059">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952066">}</span><br>
<span class="lineno"></span><span class="op" id="7952068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7952071">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="7952159">func</span>&nbsp;<span class="ident" id="7952164">TestBlockGeneric</span><span class="op" id="7952180">(</span><span class="ident" id="7952181">t</span>&nbsp;<span class="op" id="7952183">*</span><span class="ident" id="7952184">testing</span><span class="op" id="7952191">.</span><span class="ident" id="7952192">T</span><span class="op" id="7952193">)</span>&nbsp;<span class="op" id="7952195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952198">gen</span><span class="op" id="7952201">,</span>&nbsp;<span class="ident" id="7952203">asm</span>&nbsp;<span class="op" id="7952207">:=</span>&nbsp;<span class="ident" id="7952210">New</span><span class="op" id="7952213">(</span><span class="op" id="7952214">)</span><span class="op" id="7952215">.</span><span class="op" id="7952216">(</span><span class="op" id="7952217">*</span><span class="ident" id="7952218">digest</span><span class="op" id="7952224">)</span><span class="op" id="7952225">,</span>&nbsp;<span class="ident" id="7952227">New</span><span class="op" id="7952230">(</span><span class="op" id="7952231">)</span><span class="op" id="7952232">.</span><span class="op" id="7952233">(</span><span class="op" id="7952234">*</span><span class="ident" id="7952235">digest</span><span class="op" id="7952241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952244">buf</span>&nbsp;<span class="op" id="7952248">:=</span>&nbsp;<span class="builtinfunc" id="7952251">make</span><span class="op" id="7952255">(</span><span class="op" id="7952256">[</span><span class="op" id="7952257">]</span><span class="builtintype" id="7952258">byte</span><span class="op" id="7952262">,</span>&nbsp;<span class="ident" id="7952264">BlockSize</span><span class="op" id="7952273">*</span><span class="num" id="7952274">20</span><span class="op" id="7952276">)</span>&nbsp;<span class="comment" id="7952278">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952299">rand</span><span class="op" id="7952303">.</span><span class="ident" id="7952304">Read</span><span class="op" id="7952308">(</span><span class="ident" id="7952309">buf</span><span class="op" id="7952312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952315">blockGeneric</span><span class="op" id="7952327">(</span><span class="ident" id="7952328">gen</span><span class="op" id="7952331">,</span>&nbsp;<span class="ident" id="7952333">buf</span><span class="op" id="7952336">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952339">block</span><span class="op" id="7952344">(</span><span class="ident" id="7952345">asm</span><span class="op" id="7952348">,</span>&nbsp;<span class="ident" id="7952350">buf</span><span class="op" id="7952353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7952356">if</span>&nbsp;<span class="op" id="7952359">*</span><span class="ident" id="7952360">gen</span>&nbsp;<span class="op" id="7952364">!=</span>&nbsp;<span class="op" id="7952367">*</span><span class="ident" id="7952368">asm</span>&nbsp;<span class="op" id="7952372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952376">t</span><span class="op" id="7952377">.</span><span class="ident" id="7952378">Error</span><span class="op" id="7952383">(</span><span class="string" id="7952384">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="7952437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952440">}</span><br>
<span class="lineno"></span><span class="op" id="7952442">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7952445">var</span>&nbsp;<span class="ident" id="7952449">bench</span>&nbsp;<span class="op" id="7952455">=</span>&nbsp;<span class="ident" id="7952457">New</span><span class="op" id="7952460">(</span><span class="op" id="7952461">)</span><br>
<span class="lineno"></span><span class="keyword" id="7952463">var</span>&nbsp;<span class="ident" id="7952467">buf</span>&nbsp;<span class="op" id="7952471">=</span>&nbsp;<span class="builtinfunc" id="7952473">make</span><span class="op" id="7952477">(</span><span class="op" id="7952478">[</span><span class="op" id="7952479">]</span><span class="builtintype" id="7952480">byte</span><span class="op" id="7952484">,</span>&nbsp;<span class="num" id="7952486">8192</span><span class="op" id="7952490">+</span><span class="num" id="7952491">1</span><span class="op" id="7952492">)</span><br>
<span class="lineno"></span><span class="keyword" id="7952494">var</span>&nbsp;<span class="ident" id="7952498">sum</span>&nbsp;<span class="op" id="7952502">=</span>&nbsp;<span class="builtinfunc" id="7952504">make</span><span class="op" id="7952508">(</span><span class="op" id="7952509">[</span><span class="op" id="7952510">]</span><span class="builtintype" id="7952511">byte</span><span class="op" id="7952515">,</span>&nbsp;<span class="ident" id="7952517">bench</span><span class="op" id="7952522">.</span><span class="ident" id="7952523">Size</span><span class="op" id="7952527">(</span><span class="op" id="7952528">)</span><span class="op" id="7952529">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7952532">func</span>&nbsp;<span class="ident" id="7952537">benchmarkSize</span><span class="op" id="7952550">(</span><span class="ident" id="7952551">b</span>&nbsp;<span class="op" id="7952553">*</span><span class="ident" id="7952554">testing</span><span class="op" id="7952561">.</span><span class="ident" id="7952562">B</span><span class="op" id="7952563">,</span>&nbsp;<span class="ident" id="7952565">size</span>&nbsp;<span class="builtintype" id="7952570">int</span><span class="op" id="7952573">,</span>&nbsp;<span class="ident" id="7952575">unaligned</span>&nbsp;<span class="builtintype" id="7952585">bool</span><span class="op" id="7952589">)</span>&nbsp;<span class="op" id="7952591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952594">b</span><span class="op" id="7952595">.</span><span class="ident" id="7952596">SetBytes</span><span class="op" id="7952604">(</span><span class="ident" id="7952605">int64</span><span class="op" id="7952610">(</span><span class="ident" id="7952611">size</span><span class="op" id="7952615">)</span><span class="op" id="7952616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952619">buf</span>&nbsp;<span class="op" id="7952623">:=</span>&nbsp;<span class="ident" id="7952626">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7952631">if</span>&nbsp;<span class="ident" id="7952634">unaligned</span>&nbsp;<span class="op" id="7952644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7952648">if</span>&nbsp;<span class="builtintype" id="7952651">uintptr</span><span class="op" id="7952658">(</span><span class="ident" id="7952659">unsafe</span><span class="op" id="7952665">.</span><span class="ident" id="7952666">Pointer</span><span class="op" id="7952673">(</span><span class="op" id="7952674">&amp;</span><span class="ident" id="7952675">buf</span><span class="op" id="7952678">[</span><span class="num" id="7952679">0</span><span class="op" id="7952680">]</span><span class="op" id="7952681">)</span><span class="op" id="7952682">)</span><span class="op" id="7952683">&amp;</span><span class="op" id="7952684">(</span><span class="ident" id="7952685">unsafe</span><span class="op" id="7952691">.</span><span class="ident" id="7952692">Alignof</span><span class="op" id="7952699">(</span><span class="builtintype" id="7952700">uint32</span><span class="op" id="7952706">(</span><span class="num" id="7952707">0</span><span class="op" id="7952708">)</span><span class="op" id="7952709">)</span><span class="op" id="7952710">-</span><span class="num" id="7952711">1</span><span class="op" id="7952712">)</span>&nbsp;<span class="op" id="7952714">==</span>&nbsp;<span class="num" id="7952717">0</span>&nbsp;<span class="op" id="7952719">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952724">buf</span>&nbsp;<span class="op" id="7952728">=</span>&nbsp;<span class="ident" id="7952730">buf</span><span class="op" id="7952733">[</span><span class="num" id="7952734">1</span><span class="op" id="7952735">:</span><span class="op" id="7952736">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952746">b</span><span class="op" id="7952747">.</span><span class="ident" id="7952748">ResetTimer</span><span class="op" id="7952758">(</span><span class="op" id="7952759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7952762">for</span>&nbsp;<span class="ident" id="7952766">i</span>&nbsp;<span class="op" id="7952768">:=</span>&nbsp;<span class="num" id="7952771">0</span><span class="op" id="7952772">;</span>&nbsp;<span class="ident" id="7952774">i</span>&nbsp;<span class="op" id="7952776">&lt;</span>&nbsp;<span class="ident" id="7952778">b</span><span class="op" id="7952779">.</span><span class="ident" id="7952780">N</span><span class="op" id="7952781">;</span>&nbsp;<span class="ident" id="7952783">i</span><span class="op" id="7952784">++</span>&nbsp;<span class="op" id="7952787">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952791">bench</span><span class="op" id="7952796">.</span><span class="ident" id="7952797">Reset</span><span class="op" id="7952802">(</span><span class="op" id="7952803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952807">bench</span><span class="op" id="7952812">.</span><span class="ident" id="7952813">Write</span><span class="op" id="7952818">(</span><span class="ident" id="7952819">buf</span><span class="op" id="7952822">[</span><span class="op" id="7952823">:</span><span class="ident" id="7952824">size</span><span class="op" id="7952828">]</span><span class="op" id="7952829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952833">bench</span><span class="op" id="7952838">.</span><span class="ident" id="7952839">Sum</span><span class="op" id="7952842">(</span><span class="ident" id="7952843">sum</span><span class="op" id="7952846">[</span><span class="op" id="7952847">:</span><span class="num" id="7952848">0</span><span class="op" id="7952849">]</span><span class="op" id="7952850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7952853">}</span><br>
<span class="lineno"></span><span class="op" id="7952855">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7952858">func</span>&nbsp;<span class="ident" id="7952863">BenchmarkHash8Bytes</span><span class="op" id="7952882">(</span><span class="ident" id="7952883">b</span>&nbsp;<span class="op" id="7952885">*</span><span class="ident" id="7952886">testing</span><span class="op" id="7952893">.</span><span class="ident" id="7952894">B</span><span class="op" id="7952895">)</span>&nbsp;<span class="op" id="7952897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952900">benchmarkSize</span><span class="op" id="7952913">(</span><span class="ident" id="7952914">b</span><span class="op" id="7952915">,</span>&nbsp;<span class="num" id="7952917">8</span><span class="op" id="7952918">,</span>&nbsp;<span class="builtintype" id="7952920">false</span><span class="op" id="7952925">)</span><br>
<span class="lineno"></span><span class="op" id="7952927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="7952930">func</span>&nbsp;<span class="ident" id="7952935">BenchmarkHash1K</span><span class="op" id="7952950">(</span><span class="ident" id="7952951">b</span>&nbsp;<span class="op" id="7952953">*</span><span class="ident" id="7952954">testing</span><span class="op" id="7952961">.</span><span class="ident" id="7952962">B</span><span class="op" id="7952963">)</span>&nbsp;<span class="op" id="7952965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7952968">benchmarkSize</span><span class="op" id="7952981">(</span><span class="ident" id="7952982">b</span><span class="op" id="7952983">,</span>&nbsp;<span class="num" id="7952985">1024</span><span class="op" id="7952989">,</span>&nbsp;<span class="builtintype" id="7952991">false</span><span class="op" id="7952996">)</span><br>
<span class="lineno"></span><span class="op" id="7952998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7953001">func</span>&nbsp;<span class="ident" id="7953006">BenchmarkHash8K</span><span class="op" id="7953021">(</span><span class="ident" id="7953022">b</span>&nbsp;<span class="op" id="7953024">*</span><span class="ident" id="7953025">testing</span><span class="op" id="7953032">.</span><span class="ident" id="7953033">B</span><span class="op" id="7953034">)</span>&nbsp;<span class="op" id="7953036">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7953039">benchmarkSize</span><span class="op" id="7953052">(</span><span class="ident" id="7953053">b</span><span class="op" id="7953054">,</span>&nbsp;<span class="num" id="7953056">8192</span><span class="op" id="7953060">,</span>&nbsp;<span class="builtintype" id="7953062">false</span><span class="op" id="7953067">)</span><br>
<span class="lineno"></span><span class="op" id="7953069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7953072">func</span>&nbsp;<span class="ident" id="7953077">BenchmarkHash8BytesUnaligned</span><span class="op" id="7953105">(</span><span class="ident" id="7953106">b</span>&nbsp;<span class="op" id="7953108">*</span><span class="ident" id="7953109">testing</span><span class="op" id="7953116">.</span><span class="ident" id="7953117">B</span><span class="op" id="7953118">)</span>&nbsp;<span class="op" id="7953120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7953123">benchmarkSize</span><span class="op" id="7953136">(</span><span class="ident" id="7953137">b</span><span class="op" id="7953138">,</span>&nbsp;<span class="num" id="7953140">8</span><span class="op" id="7953141">,</span>&nbsp;<span class="builtintype" id="7953143">true</span><span class="op" id="7953147">)</span><br>
<span class="lineno">155</span><span class="op" id="7953149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7953152">func</span>&nbsp;<span class="ident" id="7953157">BenchmarkHash1KUnaligned</span><span class="op" id="7953181">(</span><span class="ident" id="7953182">b</span>&nbsp;<span class="op" id="7953184">*</span><span class="ident" id="7953185">testing</span><span class="op" id="7953192">.</span><span class="ident" id="7953193">B</span><span class="op" id="7953194">)</span>&nbsp;<span class="op" id="7953196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7953199">benchmarkSize</span><span class="op" id="7953212">(</span><span class="ident" id="7953213">b</span><span class="op" id="7953214">,</span>&nbsp;<span class="num" id="7953216">1024</span><span class="op" id="7953220">,</span>&nbsp;<span class="builtintype" id="7953222">true</span><span class="op" id="7953226">)</span><br>
<span class="lineno"></span><span class="op" id="7953228">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7953231">func</span>&nbsp;<span class="ident" id="7953236">BenchmarkHash8KUnaligned</span><span class="op" id="7953260">(</span><span class="ident" id="7953261">b</span>&nbsp;<span class="op" id="7953263">*</span><span class="ident" id="7953264">testing</span><span class="op" id="7953271">.</span><span class="ident" id="7953272">B</span><span class="op" id="7953273">)</span>&nbsp;<span class="op" id="7953275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7953278">benchmarkSize</span><span class="op" id="7953291">(</span><span class="ident" id="7953292">b</span><span class="op" id="7953293">,</span>&nbsp;<span class="num" id="7953295">8192</span><span class="op" id="7953299">,</span>&nbsp;<span class="builtintype" id="7953301">true</span><span class="op" id="7953305">)</span><br>
<span class="lineno"></span><span class="op" id="7953307">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
