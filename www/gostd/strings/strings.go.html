<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html" class="current">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1363360">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1363415">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1363469">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1363520">//&nbsp;Package&nbsp;strings&nbsp;implements&nbsp;simple&nbsp;functions&nbsp;to&nbsp;manipulate&nbsp;strings.</span><br>
<span class="lineno"></span><span class="keyword" id="1363590">package</span>&nbsp;<span class="ident" id="1363598">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1363607">import</span>&nbsp;<span class="op" id="1363614">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1363617">&#34;unicode&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1363628">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1363643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1363646">//&nbsp;explode&nbsp;splits&nbsp;s&nbsp;into&nbsp;an&nbsp;array&nbsp;of&nbsp;UTF-8&nbsp;sequences,&nbsp;one&nbsp;per&nbsp;Unicode&nbsp;character&nbsp;(still&nbsp;strings)&nbsp;up&nbsp;to&nbsp;a&nbsp;maximum&nbsp;of&nbsp;n&nbsp;(n&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;no&nbsp;limit).</span><br>
<span class="lineno"></span><span class="comment" id="1363787">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequences&nbsp;become&nbsp;correct&nbsp;encodings&nbsp;of&nbsp;U+FFF8.</span><br>
<span class="lineno">15</span><span class="keyword" id="1363850">func</span>&nbsp;<span class="ident" id="1363855">explode</span><span class="op" id="1363862">(</span><span class="ident" id="1363863">s</span>&nbsp;<span class="builtintype" id="1363865">string</span><span class="op" id="1363871">,</span>&nbsp;<span class="ident" id="1363873">n</span>&nbsp;<span class="builtintype" id="1363875">int</span><span class="op" id="1363878">)</span>&nbsp;<span class="op" id="1363880">[</span><span class="op" id="1363881">]</span><span class="builtintype" id="1363882">string</span>&nbsp;<span class="op" id="1363889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363892">if</span>&nbsp;<span class="ident" id="1363895">n</span>&nbsp;<span class="op" id="1363897">==</span>&nbsp;<span class="num" id="1363900">0</span>&nbsp;<span class="op" id="1363902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363906">return</span>&nbsp;<span class="builtintype" id="1363913">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363921">l</span>&nbsp;<span class="op" id="1363923">:=</span>&nbsp;<span class="ident" id="1363926">utf8</span><span class="op" id="1363930">.</span><span class="ident" id="1363931">RuneCountInString</span><span class="op" id="1363948">(</span><span class="ident" id="1363949">s</span><span class="op" id="1363950">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363953">if</span>&nbsp;<span class="ident" id="1363956">n</span>&nbsp;<span class="op" id="1363958">&lt;=</span>&nbsp;<span class="num" id="1363961">0</span>&nbsp;<span class="op" id="1363963">||</span>&nbsp;<span class="ident" id="1363966">n</span>&nbsp;<span class="op" id="1363968">&gt;</span>&nbsp;<span class="ident" id="1363970">l</span>&nbsp;<span class="op" id="1363972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363976">n</span>&nbsp;<span class="op" id="1363978">=</span>&nbsp;<span class="ident" id="1363980">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363986">a</span>&nbsp;<span class="op" id="1363988">:=</span>&nbsp;<span class="builtinfunc" id="1363991">make</span><span class="op" id="1363995">(</span><span class="op" id="1363996">[</span><span class="op" id="1363997">]</span><span class="builtintype" id="1363998">string</span><span class="op" id="1364004">,</span>&nbsp;<span class="ident" id="1364006">n</span><span class="op" id="1364007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364010">var</span>&nbsp;<span class="ident" id="1364014">size</span>&nbsp;<span class="builtintype" id="1364019">int</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364024">var</span>&nbsp;<span class="ident" id="1364028">ch</span>&nbsp;<span class="builtintype" id="1364031">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364037">i</span><span class="op" id="1364038">,</span>&nbsp;<span class="ident" id="1364040">cur</span>&nbsp;<span class="op" id="1364044">:=</span>&nbsp;<span class="num" id="1364047">0</span><span class="op" id="1364048">,</span>&nbsp;<span class="num" id="1364050">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364053">for</span>&nbsp;<span class="op" id="1364057">;</span>&nbsp;<span class="ident" id="1364059">i</span><span class="op" id="1364060">+</span><span class="num" id="1364061">1</span>&nbsp;<span class="op" id="1364063">&lt;</span>&nbsp;<span class="ident" id="1364065">n</span><span class="op" id="1364066">;</span>&nbsp;<span class="ident" id="1364068">i</span><span class="op" id="1364069">++</span>&nbsp;<span class="op" id="1364072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364076">ch</span><span class="op" id="1364078">,</span>&nbsp;<span class="ident" id="1364080">size</span>&nbsp;<span class="op" id="1364085">=</span>&nbsp;<span class="ident" id="1364087">utf8</span><span class="op" id="1364091">.</span><span class="ident" id="1364092">DecodeRuneInString</span><span class="op" id="1364110">(</span><span class="ident" id="1364111">s</span><span class="op" id="1364112">[</span><span class="ident" id="1364113">cur</span><span class="op" id="1364116">:</span><span class="op" id="1364117">]</span><span class="op" id="1364118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364122">if</span>&nbsp;<span class="ident" id="1364125">ch</span>&nbsp;<span class="op" id="1364128">==</span>&nbsp;<span class="ident" id="1364131">utf8</span><span class="op" id="1364135">.</span><span class="ident" id="1364136">RuneError</span>&nbsp;<span class="op" id="1364146">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364151">a</span><span class="op" id="1364152">[</span><span class="ident" id="1364153">i</span><span class="op" id="1364154">]</span>&nbsp;<span class="op" id="1364156">=</span>&nbsp;<span class="builtintype" id="1364158">string</span><span class="op" id="1364164">(</span><span class="ident" id="1364165">utf8</span><span class="op" id="1364169">.</span><span class="ident" id="1364170">RuneError</span><span class="op" id="1364179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364183">}</span>&nbsp;<span class="keyword" id="1364185">else</span>&nbsp;<span class="op" id="1364190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364195">a</span><span class="op" id="1364196">[</span><span class="ident" id="1364197">i</span><span class="op" id="1364198">]</span>&nbsp;<span class="op" id="1364200">=</span>&nbsp;<span class="ident" id="1364202">s</span><span class="op" id="1364203">[</span><span class="ident" id="1364204">cur</span>&nbsp;<span class="op" id="1364208">:</span>&nbsp;<span class="ident" id="1364210">cur</span><span class="op" id="1364213">+</span><span class="ident" id="1364214">size</span><span class="op" id="1364218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364226">cur</span>&nbsp;<span class="op" id="1364230">+=</span>&nbsp;<span class="ident" id="1364233">size</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1364242">//&nbsp;add&nbsp;the&nbsp;rest,&nbsp;if&nbsp;there&nbsp;is&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364276">if</span>&nbsp;<span class="ident" id="1364279">cur</span>&nbsp;<span class="op" id="1364283">&lt;</span>&nbsp;<span class="builtinfunc" id="1364285">len</span><span class="op" id="1364288">(</span><span class="ident" id="1364289">s</span><span class="op" id="1364290">)</span>&nbsp;<span class="op" id="1364292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364296">a</span><span class="op" id="1364297">[</span><span class="ident" id="1364298">i</span><span class="op" id="1364299">]</span>&nbsp;<span class="op" id="1364301">=</span>&nbsp;<span class="ident" id="1364303">s</span><span class="op" id="1364304">[</span><span class="ident" id="1364305">cur</span><span class="op" id="1364308">:</span><span class="op" id="1364309">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364312">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364315">return</span>&nbsp;<span class="ident" id="1364322">a</span><br>
<span class="lineno"></span><span class="op" id="1364324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1364327">//&nbsp;primeRK&nbsp;is&nbsp;the&nbsp;prime&nbsp;base&nbsp;used&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="1364386">const</span>&nbsp;<span class="ident" id="1364392">primeRK</span>&nbsp;<span class="op" id="1364400">=</span>&nbsp;<span class="num" id="1364402">16777619</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1364412">//&nbsp;hashStr&nbsp;returns&nbsp;the&nbsp;hash&nbsp;and&nbsp;the&nbsp;appropriate&nbsp;multiplicative</span><br>
<span class="lineno"></span><span class="comment" id="1364475">//&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="1364518">func</span>&nbsp;<span class="ident" id="1364523">hashStr</span><span class="op" id="1364530">(</span><span class="ident" id="1364531">sep</span>&nbsp;<span class="builtintype" id="1364535">string</span><span class="op" id="1364541">)</span>&nbsp;<span class="op" id="1364543">(</span><span class="builtintype" id="1364544">uint32</span><span class="op" id="1364550">,</span>&nbsp;<span class="builtintype" id="1364552">uint32</span><span class="op" id="1364558">)</span>&nbsp;<span class="op" id="1364560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364563">hash</span>&nbsp;<span class="op" id="1364568">:=</span>&nbsp;<span class="builtintype" id="1364571">uint32</span><span class="op" id="1364577">(</span><span class="num" id="1364578">0</span><span class="op" id="1364579">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364582">for</span>&nbsp;<span class="ident" id="1364586">i</span>&nbsp;<span class="op" id="1364588">:=</span>&nbsp;<span class="num" id="1364591">0</span><span class="op" id="1364592">;</span>&nbsp;<span class="ident" id="1364594">i</span>&nbsp;<span class="op" id="1364596">&lt;</span>&nbsp;<span class="builtinfunc" id="1364598">len</span><span class="op" id="1364601">(</span><span class="ident" id="1364602">sep</span><span class="op" id="1364605">)</span><span class="op" id="1364606">;</span>&nbsp;<span class="ident" id="1364608">i</span><span class="op" id="1364609">++</span>&nbsp;<span class="op" id="1364612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364616">hash</span>&nbsp;<span class="op" id="1364621">=</span>&nbsp;<span class="ident" id="1364623">hash</span><span class="op" id="1364627">*</span><span class="ident" id="1364628">primeRK</span>&nbsp;<span class="op" id="1364636">+</span>&nbsp;<span class="builtintype" id="1364638">uint32</span><span class="op" id="1364644">(</span><span class="ident" id="1364645">sep</span><span class="op" id="1364648">[</span><span class="ident" id="1364649">i</span><span class="op" id="1364650">]</span><span class="op" id="1364651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364657">var</span>&nbsp;<span class="ident" id="1364661">pow</span><span class="op" id="1364664">,</span>&nbsp;<span class="ident" id="1364666">sq</span>&nbsp;<span class="builtintype" id="1364669">uint32</span>&nbsp;<span class="op" id="1364676">=</span>&nbsp;<span class="num" id="1364678">1</span><span class="op" id="1364679">,</span>&nbsp;<span class="ident" id="1364681">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364690">for</span>&nbsp;<span class="ident" id="1364694">i</span>&nbsp;<span class="op" id="1364696">:=</span>&nbsp;<span class="builtinfunc" id="1364699">len</span><span class="op" id="1364702">(</span><span class="ident" id="1364703">sep</span><span class="op" id="1364706">)</span><span class="op" id="1364707">;</span>&nbsp;<span class="ident" id="1364709">i</span>&nbsp;<span class="op" id="1364711">&gt;</span>&nbsp;<span class="num" id="1364713">0</span><span class="op" id="1364714">;</span>&nbsp;<span class="ident" id="1364716">i</span>&nbsp;<span class="op" id="1364718">&gt;&gt;=</span>&nbsp;<span class="num" id="1364722">1</span>&nbsp;<span class="op" id="1364724">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364728">if</span>&nbsp;<span class="ident" id="1364731">i</span><span class="op" id="1364732">&amp;</span><span class="num" id="1364733">1</span>&nbsp;<span class="op" id="1364735">!=</span>&nbsp;<span class="num" id="1364738">0</span>&nbsp;<span class="op" id="1364740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364745">pow</span>&nbsp;<span class="op" id="1364749">*=</span>&nbsp;<span class="ident" id="1364752">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364761">sq</span>&nbsp;<span class="op" id="1364764">*=</span>&nbsp;<span class="ident" id="1364767">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364771">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364774">return</span>&nbsp;<span class="ident" id="1364781">hash</span><span class="op" id="1364785">,</span>&nbsp;<span class="ident" id="1364787">pow</span><br>
<span class="lineno"></span><span class="op" id="1364791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1364794">//&nbsp;hashStrRev&nbsp;returns&nbsp;the&nbsp;hash&nbsp;of&nbsp;the&nbsp;reverse&nbsp;of&nbsp;sep&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1364855">//&nbsp;appropriate&nbsp;multiplicative&nbsp;factor&nbsp;for&nbsp;use&nbsp;in&nbsp;Rabin-Karp&nbsp;algorithm.</span><br>
<span class="lineno">65</span><span class="keyword" id="1364925">func</span>&nbsp;<span class="ident" id="1364930">hashStrRev</span><span class="op" id="1364940">(</span><span class="ident" id="1364941">sep</span>&nbsp;<span class="builtintype" id="1364945">string</span><span class="op" id="1364951">)</span>&nbsp;<span class="op" id="1364953">(</span><span class="builtintype" id="1364954">uint32</span><span class="op" id="1364960">,</span>&nbsp;<span class="builtintype" id="1364962">uint32</span><span class="op" id="1364968">)</span>&nbsp;<span class="op" id="1364970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364973">hash</span>&nbsp;<span class="op" id="1364978">:=</span>&nbsp;<span class="builtintype" id="1364981">uint32</span><span class="op" id="1364987">(</span><span class="num" id="1364988">0</span><span class="op" id="1364989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364992">for</span>&nbsp;<span class="ident" id="1364996">i</span>&nbsp;<span class="op" id="1364998">:=</span>&nbsp;<span class="builtinfunc" id="1365001">len</span><span class="op" id="1365004">(</span><span class="ident" id="1365005">sep</span><span class="op" id="1365008">)</span>&nbsp;<span class="op" id="1365010">-</span>&nbsp;<span class="num" id="1365012">1</span><span class="op" id="1365013">;</span>&nbsp;<span class="ident" id="1365015">i</span>&nbsp;<span class="op" id="1365017">&gt;=</span>&nbsp;<span class="num" id="1365020">0</span><span class="op" id="1365021">;</span>&nbsp;<span class="ident" id="1365023">i</span><span class="op" id="1365024">--</span>&nbsp;<span class="op" id="1365027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365031">hash</span>&nbsp;<span class="op" id="1365036">=</span>&nbsp;<span class="ident" id="1365038">hash</span><span class="op" id="1365042">*</span><span class="ident" id="1365043">primeRK</span>&nbsp;<span class="op" id="1365051">+</span>&nbsp;<span class="builtintype" id="1365053">uint32</span><span class="op" id="1365059">(</span><span class="ident" id="1365060">sep</span><span class="op" id="1365063">[</span><span class="ident" id="1365064">i</span><span class="op" id="1365065">]</span><span class="op" id="1365066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365069">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365072">var</span>&nbsp;<span class="ident" id="1365076">pow</span><span class="op" id="1365079">,</span>&nbsp;<span class="ident" id="1365081">sq</span>&nbsp;<span class="builtintype" id="1365084">uint32</span>&nbsp;<span class="op" id="1365091">=</span>&nbsp;<span class="num" id="1365093">1</span><span class="op" id="1365094">,</span>&nbsp;<span class="ident" id="1365096">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365105">for</span>&nbsp;<span class="ident" id="1365109">i</span>&nbsp;<span class="op" id="1365111">:=</span>&nbsp;<span class="builtinfunc" id="1365114">len</span><span class="op" id="1365117">(</span><span class="ident" id="1365118">sep</span><span class="op" id="1365121">)</span><span class="op" id="1365122">;</span>&nbsp;<span class="ident" id="1365124">i</span>&nbsp;<span class="op" id="1365126">&gt;</span>&nbsp;<span class="num" id="1365128">0</span><span class="op" id="1365129">;</span>&nbsp;<span class="ident" id="1365131">i</span>&nbsp;<span class="op" id="1365133">&gt;&gt;=</span>&nbsp;<span class="num" id="1365137">1</span>&nbsp;<span class="op" id="1365139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365143">if</span>&nbsp;<span class="ident" id="1365146">i</span><span class="op" id="1365147">&amp;</span><span class="num" id="1365148">1</span>&nbsp;<span class="op" id="1365150">!=</span>&nbsp;<span class="num" id="1365153">0</span>&nbsp;<span class="op" id="1365155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365160">pow</span>&nbsp;<span class="op" id="1365164">*=</span>&nbsp;<span class="ident" id="1365167">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365172">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365176">sq</span>&nbsp;<span class="op" id="1365179">*=</span>&nbsp;<span class="ident" id="1365182">sq</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365189">return</span>&nbsp;<span class="ident" id="1365196">hash</span><span class="op" id="1365200">,</span>&nbsp;<span class="ident" id="1365202">pow</span><br>
<span class="lineno"></span><span class="op" id="1365206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="1365209">//&nbsp;Count&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;sep&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1365278">func</span>&nbsp;<span class="ident" id="1365283">Count</span><span class="op" id="1365288">(</span><span class="ident" id="1365289">s</span><span class="op" id="1365290">,</span>&nbsp;<span class="ident" id="1365292">sep</span>&nbsp;<span class="builtintype" id="1365296">string</span><span class="op" id="1365302">)</span>&nbsp;<span class="builtintype" id="1365304">int</span>&nbsp;<span class="op" id="1365308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365311">n</span>&nbsp;<span class="op" id="1365313">:=</span>&nbsp;<span class="num" id="1365316">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1365319">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365337">switch</span>&nbsp;<span class="op" id="1365344">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365347">case</span>&nbsp;<span class="builtinfunc" id="1365352">len</span><span class="op" id="1365355">(</span><span class="ident" id="1365356">sep</span><span class="op" id="1365359">)</span>&nbsp;<span class="op" id="1365361">==</span>&nbsp;<span class="num" id="1365364">0</span><span class="op" id="1365365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365369">return</span>&nbsp;<span class="ident" id="1365376">utf8</span><span class="op" id="1365380">.</span><span class="ident" id="1365381">RuneCountInString</span><span class="op" id="1365398">(</span><span class="ident" id="1365399">s</span><span class="op" id="1365400">)</span>&nbsp;<span class="op" id="1365402">+</span>&nbsp;<span class="num" id="1365404">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365407">case</span>&nbsp;<span class="builtinfunc" id="1365412">len</span><span class="op" id="1365415">(</span><span class="ident" id="1365416">sep</span><span class="op" id="1365419">)</span>&nbsp;<span class="op" id="1365421">==</span>&nbsp;<span class="num" id="1365424">1</span><span class="op" id="1365425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1365429">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365465">c</span>&nbsp;<span class="op" id="1365467">:=</span>&nbsp;<span class="ident" id="1365470">sep</span><span class="op" id="1365473">[</span><span class="num" id="1365474">0</span><span class="op" id="1365475">]</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365479">for</span>&nbsp;<span class="ident" id="1365483">i</span>&nbsp;<span class="op" id="1365485">:=</span>&nbsp;<span class="num" id="1365488">0</span><span class="op" id="1365489">;</span>&nbsp;<span class="ident" id="1365491">i</span>&nbsp;<span class="op" id="1365493">&lt;</span>&nbsp;<span class="builtinfunc" id="1365495">len</span><span class="op" id="1365498">(</span><span class="ident" id="1365499">s</span><span class="op" id="1365500">)</span><span class="op" id="1365501">;</span>&nbsp;<span class="ident" id="1365503">i</span><span class="op" id="1365504">++</span>&nbsp;<span class="op" id="1365507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365512">if</span>&nbsp;<span class="ident" id="1365515">s</span><span class="op" id="1365516">[</span><span class="ident" id="1365517">i</span><span class="op" id="1365518">]</span>&nbsp;<span class="op" id="1365520">==</span>&nbsp;<span class="ident" id="1365523">c</span>&nbsp;<span class="op" id="1365525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365531">n</span><span class="op" id="1365532">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365542">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365546">return</span>&nbsp;<span class="ident" id="1365553">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365556">case</span>&nbsp;<span class="builtinfunc" id="1365561">len</span><span class="op" id="1365564">(</span><span class="ident" id="1365565">sep</span><span class="op" id="1365568">)</span>&nbsp;<span class="op" id="1365570">&gt;</span>&nbsp;<span class="builtinfunc" id="1365572">len</span><span class="op" id="1365575">(</span><span class="ident" id="1365576">s</span><span class="op" id="1365577">)</span><span class="op" id="1365578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365582">return</span>&nbsp;<span class="num" id="1365589">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365592">case</span>&nbsp;<span class="builtinfunc" id="1365597">len</span><span class="op" id="1365600">(</span><span class="ident" id="1365601">sep</span><span class="op" id="1365604">)</span>&nbsp;<span class="op" id="1365606">==</span>&nbsp;<span class="builtinfunc" id="1365609">len</span><span class="op" id="1365612">(</span><span class="ident" id="1365613">s</span><span class="op" id="1365614">)</span><span class="op" id="1365615">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365619">if</span>&nbsp;<span class="ident" id="1365622">sep</span>&nbsp;<span class="op" id="1365626">==</span>&nbsp;<span class="ident" id="1365629">s</span>&nbsp;<span class="op" id="1365631">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365636">return</span>&nbsp;<span class="num" id="1365643">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365651">return</span>&nbsp;<span class="num" id="1365658">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1365664">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365686">hashsep</span><span class="op" id="1365693">,</span>&nbsp;<span class="ident" id="1365695">pow</span>&nbsp;<span class="op" id="1365699">:=</span>&nbsp;<span class="ident" id="1365702">hashStr</span><span class="op" id="1365709">(</span><span class="ident" id="1365710">sep</span><span class="op" id="1365713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365716">h</span>&nbsp;<span class="op" id="1365718">:=</span>&nbsp;<span class="builtintype" id="1365721">uint32</span><span class="op" id="1365727">(</span><span class="num" id="1365728">0</span><span class="op" id="1365729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365732">for</span>&nbsp;<span class="ident" id="1365736">i</span>&nbsp;<span class="op" id="1365738">:=</span>&nbsp;<span class="num" id="1365741">0</span><span class="op" id="1365742">;</span>&nbsp;<span class="ident" id="1365744">i</span>&nbsp;<span class="op" id="1365746">&lt;</span>&nbsp;<span class="builtinfunc" id="1365748">len</span><span class="op" id="1365751">(</span><span class="ident" id="1365752">sep</span><span class="op" id="1365755">)</span><span class="op" id="1365756">;</span>&nbsp;<span class="ident" id="1365758">i</span><span class="op" id="1365759">++</span>&nbsp;<span class="op" id="1365762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365766">h</span>&nbsp;<span class="op" id="1365768">=</span>&nbsp;<span class="ident" id="1365770">h</span><span class="op" id="1365771">*</span><span class="ident" id="1365772">primeRK</span>&nbsp;<span class="op" id="1365780">+</span>&nbsp;<span class="builtintype" id="1365782">uint32</span><span class="op" id="1365788">(</span><span class="ident" id="1365789">s</span><span class="op" id="1365790">[</span><span class="ident" id="1365791">i</span><span class="op" id="1365792">]</span><span class="op" id="1365793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365796">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365799">lastmatch</span>&nbsp;<span class="op" id="1365809">:=</span>&nbsp;<span class="num" id="1365812">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365815">if</span>&nbsp;<span class="ident" id="1365818">h</span>&nbsp;<span class="op" id="1365820">==</span>&nbsp;<span class="ident" id="1365823">hashsep</span>&nbsp;<span class="op" id="1365831">&amp;&amp;</span>&nbsp;<span class="ident" id="1365834">s</span><span class="op" id="1365835">[</span><span class="op" id="1365836">:</span><span class="builtinfunc" id="1365837">len</span><span class="op" id="1365840">(</span><span class="ident" id="1365841">sep</span><span class="op" id="1365844">)</span><span class="op" id="1365845">]</span>&nbsp;<span class="op" id="1365847">==</span>&nbsp;<span class="ident" id="1365850">sep</span>&nbsp;<span class="op" id="1365854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365858">n</span><span class="op" id="1365859">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365864">lastmatch</span>&nbsp;<span class="op" id="1365874">=</span>&nbsp;<span class="builtinfunc" id="1365876">len</span><span class="op" id="1365879">(</span><span class="ident" id="1365880">sep</span><span class="op" id="1365883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365886">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365889">for</span>&nbsp;<span class="ident" id="1365893">i</span>&nbsp;<span class="op" id="1365895">:=</span>&nbsp;<span class="builtinfunc" id="1365898">len</span><span class="op" id="1365901">(</span><span class="ident" id="1365902">sep</span><span class="op" id="1365905">)</span><span class="op" id="1365906">;</span>&nbsp;<span class="ident" id="1365908">i</span>&nbsp;<span class="op" id="1365910">&lt;</span>&nbsp;<span class="builtinfunc" id="1365912">len</span><span class="op" id="1365915">(</span><span class="ident" id="1365916">s</span><span class="op" id="1365917">)</span><span class="op" id="1365918">;</span>&nbsp;<span class="op" id="1365920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365924">h</span>&nbsp;<span class="op" id="1365926">*=</span>&nbsp;<span class="ident" id="1365929">primeRK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365939">h</span>&nbsp;<span class="op" id="1365941">+=</span>&nbsp;<span class="builtintype" id="1365944">uint32</span><span class="op" id="1365950">(</span><span class="ident" id="1365951">s</span><span class="op" id="1365952">[</span><span class="ident" id="1365953">i</span><span class="op" id="1365954">]</span><span class="op" id="1365955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365959">h</span>&nbsp;<span class="op" id="1365961">-=</span>&nbsp;<span class="ident" id="1365964">pow</span>&nbsp;<span class="op" id="1365968">*</span>&nbsp;<span class="builtintype" id="1365970">uint32</span><span class="op" id="1365976">(</span><span class="ident" id="1365977">s</span><span class="op" id="1365978">[</span><span class="ident" id="1365979">i</span><span class="op" id="1365980">-</span><span class="builtinfunc" id="1365981">len</span><span class="op" id="1365984">(</span><span class="ident" id="1365985">sep</span><span class="op" id="1365988">)</span><span class="op" id="1365989">]</span><span class="op" id="1365990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365994">i</span><span class="op" id="1365995">++</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366000">if</span>&nbsp;<span class="ident" id="1366003">h</span>&nbsp;<span class="op" id="1366005">==</span>&nbsp;<span class="ident" id="1366008">hashsep</span>&nbsp;<span class="op" id="1366016">&amp;&amp;</span>&nbsp;<span class="ident" id="1366019">lastmatch</span>&nbsp;<span class="op" id="1366029">&lt;=</span>&nbsp;<span class="ident" id="1366032">i</span><span class="op" id="1366033">-</span><span class="builtinfunc" id="1366034">len</span><span class="op" id="1366037">(</span><span class="ident" id="1366038">sep</span><span class="op" id="1366041">)</span>&nbsp;<span class="op" id="1366043">&amp;&amp;</span>&nbsp;<span class="ident" id="1366046">s</span><span class="op" id="1366047">[</span><span class="ident" id="1366048">i</span><span class="op" id="1366049">-</span><span class="builtinfunc" id="1366050">len</span><span class="op" id="1366053">(</span><span class="ident" id="1366054">sep</span><span class="op" id="1366057">)</span><span class="op" id="1366058">:</span><span class="ident" id="1366059">i</span><span class="op" id="1366060">]</span>&nbsp;<span class="op" id="1366062">==</span>&nbsp;<span class="ident" id="1366065">sep</span>&nbsp;<span class="op" id="1366069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366074">n</span><span class="op" id="1366075">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366081">lastmatch</span>&nbsp;<span class="op" id="1366091">=</span>&nbsp;<span class="ident" id="1366093">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366100">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366103">return</span>&nbsp;<span class="ident" id="1366110">n</span><br>
<span class="lineno"></span><span class="op" id="1366112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1366115">//&nbsp;Contains&nbsp;returns&nbsp;true&nbsp;if&nbsp;substr&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1366163">func</span>&nbsp;<span class="ident" id="1366168">Contains</span><span class="op" id="1366176">(</span><span class="ident" id="1366177">s</span><span class="op" id="1366178">,</span>&nbsp;<span class="ident" id="1366180">substr</span>&nbsp;<span class="builtintype" id="1366187">string</span><span class="op" id="1366193">)</span>&nbsp;<span class="builtintype" id="1366195">bool</span>&nbsp;<span class="op" id="1366200">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366203">return</span>&nbsp;<span class="ident" id="1366210">Index</span><span class="op" id="1366215">(</span><span class="ident" id="1366216">s</span><span class="op" id="1366217">,</span>&nbsp;<span class="ident" id="1366219">substr</span><span class="op" id="1366225">)</span>&nbsp;<span class="op" id="1366227">&gt;=</span>&nbsp;<span class="num" id="1366230">0</span><br>
<span class="lineno"></span><span class="op" id="1366232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1366235">//&nbsp;ContainsAny&nbsp;returns&nbsp;true&nbsp;if&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;in&nbsp;chars&nbsp;are&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1366313">func</span>&nbsp;<span class="ident" id="1366318">ContainsAny</span><span class="op" id="1366329">(</span><span class="ident" id="1366330">s</span><span class="op" id="1366331">,</span>&nbsp;<span class="ident" id="1366333">chars</span>&nbsp;<span class="builtintype" id="1366339">string</span><span class="op" id="1366345">)</span>&nbsp;<span class="builtintype" id="1366347">bool</span>&nbsp;<span class="op" id="1366352">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366355">return</span>&nbsp;<span class="ident" id="1366362">IndexAny</span><span class="op" id="1366370">(</span><span class="ident" id="1366371">s</span><span class="op" id="1366372">,</span>&nbsp;<span class="ident" id="1366374">chars</span><span class="op" id="1366379">)</span>&nbsp;<span class="op" id="1366381">&gt;=</span>&nbsp;<span class="num" id="1366384">0</span><br>
<span class="lineno"></span><span class="op" id="1366386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1366389">//&nbsp;ContainsRune&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;r&nbsp;is&nbsp;within&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1366459">func</span>&nbsp;<span class="ident" id="1366464">ContainsRune</span><span class="op" id="1366476">(</span><span class="ident" id="1366477">s</span>&nbsp;<span class="builtintype" id="1366479">string</span><span class="op" id="1366485">,</span>&nbsp;<span class="ident" id="1366487">r</span>&nbsp;<span class="builtintype" id="1366489">rune</span><span class="op" id="1366493">)</span>&nbsp;<span class="builtintype" id="1366495">bool</span>&nbsp;<span class="op" id="1366500">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366503">return</span>&nbsp;<span class="ident" id="1366510">IndexRune</span><span class="op" id="1366519">(</span><span class="ident" id="1366520">s</span><span class="op" id="1366521">,</span>&nbsp;<span class="ident" id="1366523">r</span><span class="op" id="1366524">)</span>&nbsp;<span class="op" id="1366526">&gt;=</span>&nbsp;<span class="num" id="1366529">0</span><br>
<span class="lineno"></span><span class="op" id="1366531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1366534">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1366630">func</span>&nbsp;<span class="ident" id="1366635">Index</span><span class="op" id="1366640">(</span><span class="ident" id="1366641">s</span><span class="op" id="1366642">,</span>&nbsp;<span class="ident" id="1366644">sep</span>&nbsp;<span class="builtintype" id="1366648">string</span><span class="op" id="1366654">)</span>&nbsp;<span class="builtintype" id="1366656">int</span>&nbsp;<span class="op" id="1366660">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366663">n</span>&nbsp;<span class="op" id="1366665">:=</span>&nbsp;<span class="builtinfunc" id="1366668">len</span><span class="op" id="1366671">(</span><span class="ident" id="1366672">sep</span><span class="op" id="1366675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366678">switch</span>&nbsp;<span class="op" id="1366685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366688">case</span>&nbsp;<span class="ident" id="1366693">n</span>&nbsp;<span class="op" id="1366695">==</span>&nbsp;<span class="num" id="1366698">0</span><span class="op" id="1366699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366703">return</span>&nbsp;<span class="num" id="1366710">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366713">case</span>&nbsp;<span class="ident" id="1366718">n</span>&nbsp;<span class="op" id="1366720">==</span>&nbsp;<span class="num" id="1366723">1</span><span class="op" id="1366724">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366728">return</span>&nbsp;<span class="ident" id="1366735">IndexByte</span><span class="op" id="1366744">(</span><span class="ident" id="1366745">s</span><span class="op" id="1366746">,</span>&nbsp;<span class="ident" id="1366748">sep</span><span class="op" id="1366751">[</span><span class="num" id="1366752">0</span><span class="op" id="1366753">]</span><span class="op" id="1366754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366757">case</span>&nbsp;<span class="ident" id="1366762">n</span>&nbsp;<span class="op" id="1366764">==</span>&nbsp;<span class="builtinfunc" id="1366767">len</span><span class="op" id="1366770">(</span><span class="ident" id="1366771">s</span><span class="op" id="1366772">)</span><span class="op" id="1366773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366777">if</span>&nbsp;<span class="ident" id="1366780">sep</span>&nbsp;<span class="op" id="1366784">==</span>&nbsp;<span class="ident" id="1366787">s</span>&nbsp;<span class="op" id="1366789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366794">return</span>&nbsp;<span class="num" id="1366801">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366805">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366809">return</span>&nbsp;<span class="op" id="1366816">-</span><span class="num" id="1366817">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366820">case</span>&nbsp;<span class="ident" id="1366825">n</span>&nbsp;<span class="op" id="1366827">&gt;</span>&nbsp;<span class="builtinfunc" id="1366829">len</span><span class="op" id="1366832">(</span><span class="ident" id="1366833">s</span><span class="op" id="1366834">)</span><span class="op" id="1366835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366839">return</span>&nbsp;<span class="op" id="1366846">-</span><span class="num" id="1366847">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1366853">//&nbsp;Rabin-Karp&nbsp;search</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366875">hashsep</span><span class="op" id="1366882">,</span>&nbsp;<span class="ident" id="1366884">pow</span>&nbsp;<span class="op" id="1366888">:=</span>&nbsp;<span class="ident" id="1366891">hashStr</span><span class="op" id="1366898">(</span><span class="ident" id="1366899">sep</span><span class="op" id="1366902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366905">var</span>&nbsp;<span class="ident" id="1366909">h</span>&nbsp;<span class="builtintype" id="1366911">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366919">for</span>&nbsp;<span class="ident" id="1366923">i</span>&nbsp;<span class="op" id="1366925">:=</span>&nbsp;<span class="num" id="1366928">0</span><span class="op" id="1366929">;</span>&nbsp;<span class="ident" id="1366931">i</span>&nbsp;<span class="op" id="1366933">&lt;</span>&nbsp;<span class="ident" id="1366935">n</span><span class="op" id="1366936">;</span>&nbsp;<span class="ident" id="1366938">i</span><span class="op" id="1366939">++</span>&nbsp;<span class="op" id="1366942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366946">h</span>&nbsp;<span class="op" id="1366948">=</span>&nbsp;<span class="ident" id="1366950">h</span><span class="op" id="1366951">*</span><span class="ident" id="1366952">primeRK</span>&nbsp;<span class="op" id="1366960">+</span>&nbsp;<span class="builtintype" id="1366962">uint32</span><span class="op" id="1366968">(</span><span class="ident" id="1366969">s</span><span class="op" id="1366970">[</span><span class="ident" id="1366971">i</span><span class="op" id="1366972">]</span><span class="op" id="1366973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366976">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366979">if</span>&nbsp;<span class="ident" id="1366982">h</span>&nbsp;<span class="op" id="1366984">==</span>&nbsp;<span class="ident" id="1366987">hashsep</span>&nbsp;<span class="op" id="1366995">&amp;&amp;</span>&nbsp;<span class="ident" id="1366998">s</span><span class="op" id="1366999">[</span><span class="op" id="1367000">:</span><span class="ident" id="1367001">n</span><span class="op" id="1367002">]</span>&nbsp;<span class="op" id="1367004">==</span>&nbsp;<span class="ident" id="1367007">sep</span>&nbsp;<span class="op" id="1367011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367015">return</span>&nbsp;<span class="num" id="1367022">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367028">for</span>&nbsp;<span class="ident" id="1367032">i</span>&nbsp;<span class="op" id="1367034">:=</span>&nbsp;<span class="ident" id="1367037">n</span><span class="op" id="1367038">;</span>&nbsp;<span class="ident" id="1367040">i</span>&nbsp;<span class="op" id="1367042">&lt;</span>&nbsp;<span class="builtinfunc" id="1367044">len</span><span class="op" id="1367047">(</span><span class="ident" id="1367048">s</span><span class="op" id="1367049">)</span><span class="op" id="1367050">;</span>&nbsp;<span class="op" id="1367052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367056">h</span>&nbsp;<span class="op" id="1367058">*=</span>&nbsp;<span class="ident" id="1367061">primeRK</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367071">h</span>&nbsp;<span class="op" id="1367073">+=</span>&nbsp;<span class="builtintype" id="1367076">uint32</span><span class="op" id="1367082">(</span><span class="ident" id="1367083">s</span><span class="op" id="1367084">[</span><span class="ident" id="1367085">i</span><span class="op" id="1367086">]</span><span class="op" id="1367087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367091">h</span>&nbsp;<span class="op" id="1367093">-=</span>&nbsp;<span class="ident" id="1367096">pow</span>&nbsp;<span class="op" id="1367100">*</span>&nbsp;<span class="builtintype" id="1367102">uint32</span><span class="op" id="1367108">(</span><span class="ident" id="1367109">s</span><span class="op" id="1367110">[</span><span class="ident" id="1367111">i</span><span class="op" id="1367112">-</span><span class="ident" id="1367113">n</span><span class="op" id="1367114">]</span><span class="op" id="1367115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367119">i</span><span class="op" id="1367120">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367125">if</span>&nbsp;<span class="ident" id="1367128">h</span>&nbsp;<span class="op" id="1367130">==</span>&nbsp;<span class="ident" id="1367133">hashsep</span>&nbsp;<span class="op" id="1367141">&amp;&amp;</span>&nbsp;<span class="ident" id="1367144">s</span><span class="op" id="1367145">[</span><span class="ident" id="1367146">i</span><span class="op" id="1367147">-</span><span class="ident" id="1367148">n</span><span class="op" id="1367149">:</span><span class="ident" id="1367150">i</span><span class="op" id="1367151">]</span>&nbsp;<span class="op" id="1367153">==</span>&nbsp;<span class="ident" id="1367156">sep</span>&nbsp;<span class="op" id="1367160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367165">return</span>&nbsp;<span class="ident" id="1367172">i</span>&nbsp;<span class="op" id="1367174">-</span>&nbsp;<span class="ident" id="1367176">n</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367186">return</span>&nbsp;<span class="op" id="1367193">-</span><span class="num" id="1367194">1</span><br>
<span class="lineno"></span><span class="op" id="1367196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="1367199">//&nbsp;LastIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;sep&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;sep&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1367298">func</span>&nbsp;<span class="ident" id="1367303">LastIndex</span><span class="op" id="1367312">(</span><span class="ident" id="1367313">s</span><span class="op" id="1367314">,</span>&nbsp;<span class="ident" id="1367316">sep</span>&nbsp;<span class="builtintype" id="1367320">string</span><span class="op" id="1367326">)</span>&nbsp;<span class="builtintype" id="1367328">int</span>&nbsp;<span class="op" id="1367332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367335">n</span>&nbsp;<span class="op" id="1367337">:=</span>&nbsp;<span class="builtinfunc" id="1367340">len</span><span class="op" id="1367343">(</span><span class="ident" id="1367344">sep</span><span class="op" id="1367347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367350">switch</span>&nbsp;<span class="op" id="1367357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367360">case</span>&nbsp;<span class="ident" id="1367365">n</span>&nbsp;<span class="op" id="1367367">==</span>&nbsp;<span class="num" id="1367370">0</span><span class="op" id="1367371">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367375">return</span>&nbsp;<span class="builtinfunc" id="1367382">len</span><span class="op" id="1367385">(</span><span class="ident" id="1367386">s</span><span class="op" id="1367387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367390">case</span>&nbsp;<span class="ident" id="1367395">n</span>&nbsp;<span class="op" id="1367397">==</span>&nbsp;<span class="num" id="1367400">1</span><span class="op" id="1367401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1367405">//&nbsp;special&nbsp;case&nbsp;worth&nbsp;making&nbsp;fast</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367441">c</span>&nbsp;<span class="op" id="1367443">:=</span>&nbsp;<span class="ident" id="1367446">sep</span><span class="op" id="1367449">[</span><span class="num" id="1367450">0</span><span class="op" id="1367451">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367455">for</span>&nbsp;<span class="ident" id="1367459">i</span>&nbsp;<span class="op" id="1367461">:=</span>&nbsp;<span class="builtinfunc" id="1367464">len</span><span class="op" id="1367467">(</span><span class="ident" id="1367468">s</span><span class="op" id="1367469">)</span>&nbsp;<span class="op" id="1367471">-</span>&nbsp;<span class="num" id="1367473">1</span><span class="op" id="1367474">;</span>&nbsp;<span class="ident" id="1367476">i</span>&nbsp;<span class="op" id="1367478">&gt;=</span>&nbsp;<span class="num" id="1367481">0</span><span class="op" id="1367482">;</span>&nbsp;<span class="ident" id="1367484">i</span><span class="op" id="1367485">--</span>&nbsp;<span class="op" id="1367488">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367493">if</span>&nbsp;<span class="ident" id="1367496">s</span><span class="op" id="1367497">[</span><span class="ident" id="1367498">i</span><span class="op" id="1367499">]</span>&nbsp;<span class="op" id="1367501">==</span>&nbsp;<span class="ident" id="1367504">c</span>&nbsp;<span class="op" id="1367506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367512">return</span>&nbsp;<span class="ident" id="1367519">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367532">return</span>&nbsp;<span class="op" id="1367539">-</span><span class="num" id="1367540">1</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367543">case</span>&nbsp;<span class="ident" id="1367548">n</span>&nbsp;<span class="op" id="1367550">==</span>&nbsp;<span class="builtinfunc" id="1367553">len</span><span class="op" id="1367556">(</span><span class="ident" id="1367557">s</span><span class="op" id="1367558">)</span><span class="op" id="1367559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367563">if</span>&nbsp;<span class="ident" id="1367566">sep</span>&nbsp;<span class="op" id="1367570">==</span>&nbsp;<span class="ident" id="1367573">s</span>&nbsp;<span class="op" id="1367575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367580">return</span>&nbsp;<span class="num" id="1367587">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367595">return</span>&nbsp;<span class="op" id="1367602">-</span><span class="num" id="1367603">1</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367606">case</span>&nbsp;<span class="ident" id="1367611">n</span>&nbsp;<span class="op" id="1367613">&gt;</span>&nbsp;<span class="builtinfunc" id="1367615">len</span><span class="op" id="1367618">(</span><span class="ident" id="1367619">s</span><span class="op" id="1367620">)</span><span class="op" id="1367621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367625">return</span>&nbsp;<span class="op" id="1367632">-</span><span class="num" id="1367633">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1367639">//&nbsp;Rabin-Karp&nbsp;search&nbsp;from&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367688">hashsep</span><span class="op" id="1367695">,</span>&nbsp;<span class="ident" id="1367697">pow</span>&nbsp;<span class="op" id="1367701">:=</span>&nbsp;<span class="ident" id="1367704">hashStrRev</span><span class="op" id="1367714">(</span><span class="ident" id="1367715">sep</span><span class="op" id="1367718">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367721">last</span>&nbsp;<span class="op" id="1367726">:=</span>&nbsp;<span class="builtinfunc" id="1367729">len</span><span class="op" id="1367732">(</span><span class="ident" id="1367733">s</span><span class="op" id="1367734">)</span>&nbsp;<span class="op" id="1367736">-</span>&nbsp;<span class="ident" id="1367738">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367741">var</span>&nbsp;<span class="ident" id="1367745">h</span>&nbsp;<span class="builtintype" id="1367747">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367755">for</span>&nbsp;<span class="ident" id="1367759">i</span>&nbsp;<span class="op" id="1367761">:=</span>&nbsp;<span class="builtinfunc" id="1367764">len</span><span class="op" id="1367767">(</span><span class="ident" id="1367768">s</span><span class="op" id="1367769">)</span>&nbsp;<span class="op" id="1367771">-</span>&nbsp;<span class="num" id="1367773">1</span><span class="op" id="1367774">;</span>&nbsp;<span class="ident" id="1367776">i</span>&nbsp;<span class="op" id="1367778">&gt;=</span>&nbsp;<span class="ident" id="1367781">last</span><span class="op" id="1367785">;</span>&nbsp;<span class="ident" id="1367787">i</span><span class="op" id="1367788">--</span>&nbsp;<span class="op" id="1367791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367795">h</span>&nbsp;<span class="op" id="1367797">=</span>&nbsp;<span class="ident" id="1367799">h</span><span class="op" id="1367800">*</span><span class="ident" id="1367801">primeRK</span>&nbsp;<span class="op" id="1367809">+</span>&nbsp;<span class="builtintype" id="1367811">uint32</span><span class="op" id="1367817">(</span><span class="ident" id="1367818">s</span><span class="op" id="1367819">[</span><span class="ident" id="1367820">i</span><span class="op" id="1367821">]</span><span class="op" id="1367822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367825">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367828">if</span>&nbsp;<span class="ident" id="1367831">h</span>&nbsp;<span class="op" id="1367833">==</span>&nbsp;<span class="ident" id="1367836">hashsep</span>&nbsp;<span class="op" id="1367844">&amp;&amp;</span>&nbsp;<span class="ident" id="1367847">s</span><span class="op" id="1367848">[</span><span class="ident" id="1367849">last</span><span class="op" id="1367853">:</span><span class="op" id="1367854">]</span>&nbsp;<span class="op" id="1367856">==</span>&nbsp;<span class="ident" id="1367859">sep</span>&nbsp;<span class="op" id="1367863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367867">return</span>&nbsp;<span class="ident" id="1367874">last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367883">for</span>&nbsp;<span class="ident" id="1367887">i</span>&nbsp;<span class="op" id="1367889">:=</span>&nbsp;<span class="ident" id="1367892">last</span>&nbsp;<span class="op" id="1367897">-</span>&nbsp;<span class="num" id="1367899">1</span><span class="op" id="1367900">;</span>&nbsp;<span class="ident" id="1367902">i</span>&nbsp;<span class="op" id="1367904">&gt;=</span>&nbsp;<span class="num" id="1367907">0</span><span class="op" id="1367908">;</span>&nbsp;<span class="ident" id="1367910">i</span><span class="op" id="1367911">--</span>&nbsp;<span class="op" id="1367914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367918">h</span>&nbsp;<span class="op" id="1367920">*=</span>&nbsp;<span class="ident" id="1367923">primeRK</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367933">h</span>&nbsp;<span class="op" id="1367935">+=</span>&nbsp;<span class="builtintype" id="1367938">uint32</span><span class="op" id="1367944">(</span><span class="ident" id="1367945">s</span><span class="op" id="1367946">[</span><span class="ident" id="1367947">i</span><span class="op" id="1367948">]</span><span class="op" id="1367949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367953">h</span>&nbsp;<span class="op" id="1367955">-=</span>&nbsp;<span class="ident" id="1367958">pow</span>&nbsp;<span class="op" id="1367962">*</span>&nbsp;<span class="builtintype" id="1367964">uint32</span><span class="op" id="1367970">(</span><span class="ident" id="1367971">s</span><span class="op" id="1367972">[</span><span class="ident" id="1367973">i</span><span class="op" id="1367974">+</span><span class="ident" id="1367975">n</span><span class="op" id="1367976">]</span><span class="op" id="1367977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367981">if</span>&nbsp;<span class="ident" id="1367984">h</span>&nbsp;<span class="op" id="1367986">==</span>&nbsp;<span class="ident" id="1367989">hashsep</span>&nbsp;<span class="op" id="1367997">&amp;&amp;</span>&nbsp;<span class="ident" id="1368000">s</span><span class="op" id="1368001">[</span><span class="ident" id="1368002">i</span><span class="op" id="1368003">:</span><span class="ident" id="1368004">i</span><span class="op" id="1368005">+</span><span class="ident" id="1368006">n</span><span class="op" id="1368007">]</span>&nbsp;<span class="op" id="1368009">==</span>&nbsp;<span class="ident" id="1368012">sep</span>&nbsp;<span class="op" id="1368016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368021">return</span>&nbsp;<span class="ident" id="1368028">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368032">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368038">return</span>&nbsp;<span class="op" id="1368045">-</span><span class="num" id="1368046">1</span><br>
<span class="lineno"></span><span class="op" id="1368048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1368051">//&nbsp;IndexRune&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;the&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno">225</span><span class="comment" id="1368130">//&nbsp;r,&nbsp;or&nbsp;-1&nbsp;if&nbsp;rune&nbsp;is&nbsp;not&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1368171">func</span>&nbsp;<span class="ident" id="1368176">IndexRune</span><span class="op" id="1368185">(</span><span class="ident" id="1368186">s</span>&nbsp;<span class="builtintype" id="1368188">string</span><span class="op" id="1368194">,</span>&nbsp;<span class="ident" id="1368196">r</span>&nbsp;<span class="builtintype" id="1368198">rune</span><span class="op" id="1368202">)</span>&nbsp;<span class="builtintype" id="1368204">int</span>&nbsp;<span class="op" id="1368208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368211">switch</span>&nbsp;<span class="op" id="1368218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368221">case</span>&nbsp;<span class="ident" id="1368226">r</span>&nbsp;<span class="op" id="1368228">&lt;</span>&nbsp;<span class="ident" id="1368230">utf8</span><span class="op" id="1368234">.</span><span class="ident" id="1368235">RuneSelf</span><span class="op" id="1368243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368247">return</span>&nbsp;<span class="ident" id="1368254">IndexByte</span><span class="op" id="1368263">(</span><span class="ident" id="1368264">s</span><span class="op" id="1368265">,</span>&nbsp;<span class="builtintype" id="1368267">byte</span><span class="op" id="1368271">(</span><span class="ident" id="1368272">r</span><span class="op" id="1368273">)</span><span class="op" id="1368274">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368277">default</span><span class="op" id="1368284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368288">for</span>&nbsp;<span class="ident" id="1368292">i</span><span class="op" id="1368293">,</span>&nbsp;<span class="ident" id="1368295">c</span>&nbsp;<span class="op" id="1368297">:=</span>&nbsp;<span class="keyword" id="1368300">range</span>&nbsp;<span class="ident" id="1368306">s</span>&nbsp;<span class="op" id="1368308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368313">if</span>&nbsp;<span class="ident" id="1368316">c</span>&nbsp;<span class="op" id="1368318">==</span>&nbsp;<span class="ident" id="1368321">r</span>&nbsp;<span class="op" id="1368323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368329">return</span>&nbsp;<span class="ident" id="1368336">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368341">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368351">return</span>&nbsp;<span class="op" id="1368358">-</span><span class="num" id="1368359">1</span><br>
<span class="lineno"></span><span class="op" id="1368361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="comment" id="1368364">//&nbsp;IndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code&nbsp;point</span><br>
<span class="lineno"></span><span class="comment" id="1368442">//&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1368521">func</span>&nbsp;<span class="ident" id="1368526">IndexAny</span><span class="op" id="1368534">(</span><span class="ident" id="1368535">s</span><span class="op" id="1368536">,</span>&nbsp;<span class="ident" id="1368538">chars</span>&nbsp;<span class="builtintype" id="1368544">string</span><span class="op" id="1368550">)</span>&nbsp;<span class="builtintype" id="1368552">int</span>&nbsp;<span class="op" id="1368556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368559">if</span>&nbsp;<span class="builtinfunc" id="1368562">len</span><span class="op" id="1368565">(</span><span class="ident" id="1368566">chars</span><span class="op" id="1368571">)</span>&nbsp;<span class="op" id="1368573">&gt;</span>&nbsp;<span class="num" id="1368575">0</span>&nbsp;<span class="op" id="1368577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368581">for</span>&nbsp;<span class="ident" id="1368585">i</span><span class="op" id="1368586">,</span>&nbsp;<span class="ident" id="1368588">c</span>&nbsp;<span class="op" id="1368590">:=</span>&nbsp;<span class="keyword" id="1368593">range</span>&nbsp;<span class="ident" id="1368599">s</span>&nbsp;<span class="op" id="1368601">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368606">for</span>&nbsp;<span class="ident" id="1368610">_</span><span class="op" id="1368611">,</span>&nbsp;<span class="ident" id="1368613">m</span>&nbsp;<span class="op" id="1368615">:=</span>&nbsp;<span class="keyword" id="1368618">range</span>&nbsp;<span class="ident" id="1368624">chars</span>&nbsp;<span class="op" id="1368630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368636">if</span>&nbsp;<span class="ident" id="1368639">c</span>&nbsp;<span class="op" id="1368641">==</span>&nbsp;<span class="ident" id="1368644">m</span>&nbsp;<span class="op" id="1368646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368653">return</span>&nbsp;<span class="ident" id="1368660">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368671">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368681">return</span>&nbsp;<span class="op" id="1368688">-</span><span class="num" id="1368689">1</span><br>
<span class="lineno"></span><span class="op" id="1368691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="1368694">//&nbsp;LastIndexAny&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;last&nbsp;instance&nbsp;of&nbsp;any&nbsp;Unicode&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="1368769">//&nbsp;point&nbsp;from&nbsp;chars&nbsp;in&nbsp;s,&nbsp;or&nbsp;-1&nbsp;if&nbsp;no&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;from&nbsp;chars&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1368840">//&nbsp;present&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1368857">func</span>&nbsp;<span class="ident" id="1368862">LastIndexAny</span><span class="op" id="1368874">(</span><span class="ident" id="1368875">s</span><span class="op" id="1368876">,</span>&nbsp;<span class="ident" id="1368878">chars</span>&nbsp;<span class="builtintype" id="1368884">string</span><span class="op" id="1368890">)</span>&nbsp;<span class="builtintype" id="1368892">int</span>&nbsp;<span class="op" id="1368896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368899">if</span>&nbsp;<span class="builtinfunc" id="1368902">len</span><span class="op" id="1368905">(</span><span class="ident" id="1368906">chars</span><span class="op" id="1368911">)</span>&nbsp;<span class="op" id="1368913">&gt;</span>&nbsp;<span class="num" id="1368915">0</span>&nbsp;<span class="op" id="1368917">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368921">for</span>&nbsp;<span class="ident" id="1368925">i</span>&nbsp;<span class="op" id="1368927">:=</span>&nbsp;<span class="builtinfunc" id="1368930">len</span><span class="op" id="1368933">(</span><span class="ident" id="1368934">s</span><span class="op" id="1368935">)</span><span class="op" id="1368936">;</span>&nbsp;<span class="ident" id="1368938">i</span>&nbsp;<span class="op" id="1368940">&gt;</span>&nbsp;<span class="num" id="1368942">0</span><span class="op" id="1368943">;</span>&nbsp;<span class="op" id="1368945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1368950">rune</span><span class="op" id="1368954">,</span>&nbsp;<span class="ident" id="1368956">size</span>&nbsp;<span class="op" id="1368961">:=</span>&nbsp;<span class="ident" id="1368964">utf8</span><span class="op" id="1368968">.</span><span class="ident" id="1368969">DecodeLastRuneInString</span><span class="op" id="1368991">(</span><span class="ident" id="1368992">s</span><span class="op" id="1368993">[</span><span class="num" id="1368994">0</span><span class="op" id="1368995">:</span><span class="ident" id="1368996">i</span><span class="op" id="1368997">]</span><span class="op" id="1368998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369003">i</span>&nbsp;<span class="op" id="1369005">-=</span>&nbsp;<span class="ident" id="1369008">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369016">for</span>&nbsp;<span class="ident" id="1369020">_</span><span class="op" id="1369021">,</span>&nbsp;<span class="ident" id="1369023">m</span>&nbsp;<span class="op" id="1369025">:=</span>&nbsp;<span class="keyword" id="1369028">range</span>&nbsp;<span class="ident" id="1369034">chars</span>&nbsp;<span class="op" id="1369040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369046">if</span>&nbsp;<span class="builtintype" id="1369049">rune</span>&nbsp;<span class="op" id="1369054">==</span>&nbsp;<span class="ident" id="1369057">m</span>&nbsp;<span class="op" id="1369059">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369066">return</span>&nbsp;<span class="ident" id="1369073">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369091">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369094">return</span>&nbsp;<span class="op" id="1369101">-</span><span class="num" id="1369102">1</span><br>
<span class="lineno"></span><span class="op" id="1369104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1369107">//&nbsp;Generic&nbsp;split:&nbsp;splits&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep,</span><br>
<span class="lineno"></span><span class="comment" id="1369160">//&nbsp;including&nbsp;sepSave&nbsp;bytes&nbsp;of&nbsp;sep&nbsp;in&nbsp;the&nbsp;subarrays.</span><br>
<span class="lineno">275</span><span class="keyword" id="1369212">func</span>&nbsp;<span class="ident" id="1369217">genSplit</span><span class="op" id="1369225">(</span><span class="ident" id="1369226">s</span><span class="op" id="1369227">,</span>&nbsp;<span class="ident" id="1369229">sep</span>&nbsp;<span class="builtintype" id="1369233">string</span><span class="op" id="1369239">,</span>&nbsp;<span class="ident" id="1369241">sepSave</span><span class="op" id="1369248">,</span>&nbsp;<span class="ident" id="1369250">n</span>&nbsp;<span class="builtintype" id="1369252">int</span><span class="op" id="1369255">)</span>&nbsp;<span class="op" id="1369257">[</span><span class="op" id="1369258">]</span><span class="builtintype" id="1369259">string</span>&nbsp;<span class="op" id="1369266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369269">if</span>&nbsp;<span class="ident" id="1369272">n</span>&nbsp;<span class="op" id="1369274">==</span>&nbsp;<span class="num" id="1369277">0</span>&nbsp;<span class="op" id="1369279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369283">return</span>&nbsp;<span class="builtintype" id="1369290">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369298">if</span>&nbsp;<span class="ident" id="1369301">sep</span>&nbsp;<span class="op" id="1369305">==</span>&nbsp;<span class="string" id="1369308">&#34;&#34;</span>&nbsp;<span class="op" id="1369311">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369315">return</span>&nbsp;<span class="ident" id="1369322">explode</span><span class="op" id="1369329">(</span><span class="ident" id="1369330">s</span><span class="op" id="1369331">,</span>&nbsp;<span class="ident" id="1369333">n</span><span class="op" id="1369334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369340">if</span>&nbsp;<span class="ident" id="1369343">n</span>&nbsp;<span class="op" id="1369345">&lt;</span>&nbsp;<span class="num" id="1369347">0</span>&nbsp;<span class="op" id="1369349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369353">n</span>&nbsp;<span class="op" id="1369355">=</span>&nbsp;<span class="ident" id="1369357">Count</span><span class="op" id="1369362">(</span><span class="ident" id="1369363">s</span><span class="op" id="1369364">,</span>&nbsp;<span class="ident" id="1369366">sep</span><span class="op" id="1369369">)</span>&nbsp;<span class="op" id="1369371">+</span>&nbsp;<span class="num" id="1369373">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369376">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369379">c</span>&nbsp;<span class="op" id="1369381">:=</span>&nbsp;<span class="ident" id="1369384">sep</span><span class="op" id="1369387">[</span><span class="num" id="1369388">0</span><span class="op" id="1369389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369392">start</span>&nbsp;<span class="op" id="1369398">:=</span>&nbsp;<span class="num" id="1369401">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369404">a</span>&nbsp;<span class="op" id="1369406">:=</span>&nbsp;<span class="builtinfunc" id="1369409">make</span><span class="op" id="1369413">(</span><span class="op" id="1369414">[</span><span class="op" id="1369415">]</span><span class="builtintype" id="1369416">string</span><span class="op" id="1369422">,</span>&nbsp;<span class="ident" id="1369424">n</span><span class="op" id="1369425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369428">na</span>&nbsp;<span class="op" id="1369431">:=</span>&nbsp;<span class="num" id="1369434">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369437">for</span>&nbsp;<span class="ident" id="1369441">i</span>&nbsp;<span class="op" id="1369443">:=</span>&nbsp;<span class="num" id="1369446">0</span><span class="op" id="1369447">;</span>&nbsp;<span class="ident" id="1369449">i</span><span class="op" id="1369450">+</span><span class="builtinfunc" id="1369451">len</span><span class="op" id="1369454">(</span><span class="ident" id="1369455">sep</span><span class="op" id="1369458">)</span>&nbsp;<span class="op" id="1369460">&lt;=</span>&nbsp;<span class="builtinfunc" id="1369463">len</span><span class="op" id="1369466">(</span><span class="ident" id="1369467">s</span><span class="op" id="1369468">)</span>&nbsp;<span class="op" id="1369470">&amp;&amp;</span>&nbsp;<span class="ident" id="1369473">na</span><span class="op" id="1369475">+</span><span class="num" id="1369476">1</span>&nbsp;<span class="op" id="1369478">&lt;</span>&nbsp;<span class="ident" id="1369480">n</span><span class="op" id="1369481">;</span>&nbsp;<span class="ident" id="1369483">i</span><span class="op" id="1369484">++</span>&nbsp;<span class="op" id="1369487">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369491">if</span>&nbsp;<span class="ident" id="1369494">s</span><span class="op" id="1369495">[</span><span class="ident" id="1369496">i</span><span class="op" id="1369497">]</span>&nbsp;<span class="op" id="1369499">==</span>&nbsp;<span class="ident" id="1369502">c</span>&nbsp;<span class="op" id="1369504">&amp;&amp;</span>&nbsp;<span class="op" id="1369507">(</span><span class="builtinfunc" id="1369508">len</span><span class="op" id="1369511">(</span><span class="ident" id="1369512">sep</span><span class="op" id="1369515">)</span>&nbsp;<span class="op" id="1369517">==</span>&nbsp;<span class="num" id="1369520">1</span>&nbsp;<span class="op" id="1369522">||</span>&nbsp;<span class="ident" id="1369525">s</span><span class="op" id="1369526">[</span><span class="ident" id="1369527">i</span><span class="op" id="1369528">:</span><span class="ident" id="1369529">i</span><span class="op" id="1369530">+</span><span class="builtinfunc" id="1369531">len</span><span class="op" id="1369534">(</span><span class="ident" id="1369535">sep</span><span class="op" id="1369538">)</span><span class="op" id="1369539">]</span>&nbsp;<span class="op" id="1369541">==</span>&nbsp;<span class="ident" id="1369544">sep</span><span class="op" id="1369547">)</span>&nbsp;<span class="op" id="1369549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369554">a</span><span class="op" id="1369555">[</span><span class="ident" id="1369556">na</span><span class="op" id="1369558">]</span>&nbsp;<span class="op" id="1369560">=</span>&nbsp;<span class="ident" id="1369562">s</span><span class="op" id="1369563">[</span><span class="ident" id="1369564">start</span>&nbsp;<span class="op" id="1369570">:</span>&nbsp;<span class="ident" id="1369572">i</span><span class="op" id="1369573">+</span><span class="ident" id="1369574">sepSave</span><span class="op" id="1369581">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369586">na</span><span class="op" id="1369588">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369594">start</span>&nbsp;<span class="op" id="1369600">=</span>&nbsp;<span class="ident" id="1369602">i</span>&nbsp;<span class="op" id="1369604">+</span>&nbsp;<span class="builtinfunc" id="1369606">len</span><span class="op" id="1369609">(</span><span class="ident" id="1369610">sep</span><span class="op" id="1369613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369618">i</span>&nbsp;<span class="op" id="1369620">+=</span>&nbsp;<span class="builtinfunc" id="1369623">len</span><span class="op" id="1369626">(</span><span class="ident" id="1369627">sep</span><span class="op" id="1369630">)</span>&nbsp;<span class="op" id="1369632">-</span>&nbsp;<span class="num" id="1369634">1</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369644">a</span><span class="op" id="1369645">[</span><span class="ident" id="1369646">na</span><span class="op" id="1369648">]</span>&nbsp;<span class="op" id="1369650">=</span>&nbsp;<span class="ident" id="1369652">s</span><span class="op" id="1369653">[</span><span class="ident" id="1369654">start</span><span class="op" id="1369659">:</span><span class="op" id="1369660">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369663">return</span>&nbsp;<span class="ident" id="1369670">a</span><span class="op" id="1369671">[</span><span class="num" id="1369672">0</span>&nbsp;<span class="op" id="1369674">:</span>&nbsp;<span class="ident" id="1369676">na</span><span class="op" id="1369678">+</span><span class="num" id="1369679">1</span><span class="op" id="1369680">]</span><br>
<span class="lineno"></span><span class="op" id="1369682">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="1369685">//&nbsp;SplitN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1369760">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="1369804">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="1369865">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">305</span><span class="comment" id="1369925">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1370009">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="1370058">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="1370085">func</span>&nbsp;<span class="ident" id="1370090">SplitN</span><span class="op" id="1370096">(</span><span class="ident" id="1370097">s</span><span class="op" id="1370098">,</span>&nbsp;<span class="ident" id="1370100">sep</span>&nbsp;<span class="builtintype" id="1370104">string</span><span class="op" id="1370110">,</span>&nbsp;<span class="ident" id="1370112">n</span>&nbsp;<span class="builtintype" id="1370114">int</span><span class="op" id="1370117">)</span>&nbsp;<span class="op" id="1370119">[</span><span class="op" id="1370120">]</span><span class="builtintype" id="1370121">string</span>&nbsp;<span class="op" id="1370128">{</span>&nbsp;<span class="keyword" id="1370130">return</span>&nbsp;<span class="ident" id="1370137">genSplit</span><span class="op" id="1370145">(</span><span class="ident" id="1370146">s</span><span class="op" id="1370147">,</span>&nbsp;<span class="ident" id="1370149">sep</span><span class="op" id="1370152">,</span>&nbsp;<span class="num" id="1370154">0</span><span class="op" id="1370155">,</span>&nbsp;<span class="ident" id="1370157">n</span><span class="op" id="1370158">)</span>&nbsp;<span class="op" id="1370160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="1370163">//&nbsp;SplitAfterN&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1370234">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="1370274">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfterN&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="1370340">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno"></span><span class="comment" id="1370400">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno">315</span><span class="comment" id="1370484">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="1370533">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="1370560">func</span>&nbsp;<span class="ident" id="1370565">SplitAfterN</span><span class="op" id="1370576">(</span><span class="ident" id="1370577">s</span><span class="op" id="1370578">,</span>&nbsp;<span class="ident" id="1370580">sep</span>&nbsp;<span class="builtintype" id="1370584">string</span><span class="op" id="1370590">,</span>&nbsp;<span class="ident" id="1370592">n</span>&nbsp;<span class="builtintype" id="1370594">int</span><span class="op" id="1370597">)</span>&nbsp;<span class="op" id="1370599">[</span><span class="op" id="1370600">]</span><span class="builtintype" id="1370601">string</span>&nbsp;<span class="op" id="1370608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370611">return</span>&nbsp;<span class="ident" id="1370618">genSplit</span><span class="op" id="1370626">(</span><span class="ident" id="1370627">s</span><span class="op" id="1370628">,</span>&nbsp;<span class="ident" id="1370630">sep</span><span class="op" id="1370633">,</span>&nbsp;<span class="builtinfunc" id="1370635">len</span><span class="op" id="1370638">(</span><span class="ident" id="1370639">sep</span><span class="op" id="1370642">)</span><span class="op" id="1370643">,</span>&nbsp;<span class="ident" id="1370645">n</span><span class="op" id="1370646">)</span><br>
<span class="lineno"></span><span class="op" id="1370648">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="1370651">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;sep&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1370729">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;separators.</span><br>
<span class="lineno"></span><span class="comment" id="1370773">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;Split&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno"></span><span class="comment" id="1370833">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno">325</span><span class="keyword" id="1370883">func</span>&nbsp;<span class="ident" id="1370888">Split</span><span class="op" id="1370893">(</span><span class="ident" id="1370894">s</span><span class="op" id="1370895">,</span>&nbsp;<span class="ident" id="1370897">sep</span>&nbsp;<span class="builtintype" id="1370901">string</span><span class="op" id="1370907">)</span>&nbsp;<span class="op" id="1370909">[</span><span class="op" id="1370910">]</span><span class="builtintype" id="1370911">string</span>&nbsp;<span class="op" id="1370918">{</span>&nbsp;<span class="keyword" id="1370920">return</span>&nbsp;<span class="ident" id="1370927">genSplit</span><span class="op" id="1370935">(</span><span class="ident" id="1370936">s</span><span class="op" id="1370937">,</span>&nbsp;<span class="ident" id="1370939">sep</span><span class="op" id="1370942">,</span>&nbsp;<span class="num" id="1370944">0</span><span class="op" id="1370945">,</span>&nbsp;<span class="op" id="1370947">-</span><span class="num" id="1370948">1</span><span class="op" id="1370949">)</span>&nbsp;<span class="op" id="1370951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1370954">//&nbsp;SplitAfter&nbsp;slices&nbsp;s&nbsp;into&nbsp;all&nbsp;substrings&nbsp;after&nbsp;each&nbsp;instance&nbsp;of&nbsp;sep&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1371028">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;those&nbsp;substrings.</span><br>
<span class="lineno"></span><span class="comment" id="1371068">//&nbsp;If&nbsp;sep&nbsp;is&nbsp;empty,&nbsp;SplitAfter&nbsp;splits&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence.</span><br>
<span class="lineno">330</span><span class="comment" id="1371133">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;SplitAfterN&nbsp;with&nbsp;a&nbsp;count&nbsp;of&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="1371188">func</span>&nbsp;<span class="ident" id="1371193">SplitAfter</span><span class="op" id="1371203">(</span><span class="ident" id="1371204">s</span><span class="op" id="1371205">,</span>&nbsp;<span class="ident" id="1371207">sep</span>&nbsp;<span class="builtintype" id="1371211">string</span><span class="op" id="1371217">)</span>&nbsp;<span class="op" id="1371219">[</span><span class="op" id="1371220">]</span><span class="builtintype" id="1371221">string</span>&nbsp;<span class="op" id="1371228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1371231">return</span>&nbsp;<span class="ident" id="1371238">genSplit</span><span class="op" id="1371246">(</span><span class="ident" id="1371247">s</span><span class="op" id="1371248">,</span>&nbsp;<span class="ident" id="1371250">sep</span><span class="op" id="1371253">,</span>&nbsp;<span class="builtinfunc" id="1371255">len</span><span class="op" id="1371258">(</span><span class="ident" id="1371259">sep</span><span class="op" id="1371262">)</span><span class="op" id="1371263">,</span>&nbsp;<span class="op" id="1371265">-</span><span class="num" id="1371266">1</span><span class="op" id="1371267">)</span><br>
<span class="lineno"></span><span class="op" id="1371269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="1371272">//&nbsp;Fields&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="1371362">//&nbsp;characters,&nbsp;as&nbsp;defined&nbsp;by&nbsp;unicode.IsSpace,&nbsp;returning&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="1371452">//&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="1371498">func</span>&nbsp;<span class="ident" id="1371503">Fields</span><span class="op" id="1371509">(</span><span class="ident" id="1371510">s</span>&nbsp;<span class="builtintype" id="1371512">string</span><span class="op" id="1371518">)</span>&nbsp;<span class="op" id="1371520">[</span><span class="op" id="1371521">]</span><span class="builtintype" id="1371522">string</span>&nbsp;<span class="op" id="1371529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1371532">return</span>&nbsp;<span class="ident" id="1371539">FieldsFunc</span><span class="op" id="1371549">(</span><span class="ident" id="1371550">s</span><span class="op" id="1371551">,</span>&nbsp;<span class="ident" id="1371553">unicode</span><span class="op" id="1371560">.</span><span class="ident" id="1371561">IsSpace</span><span class="op" id="1371568">)</span><br>
<span class="lineno">340</span><span class="op" id="1371570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1371573">//&nbsp;FieldsFunc&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;at&nbsp;each&nbsp;run&nbsp;of&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)</span><br>
<span class="lineno"></span><span class="comment" id="1371660">//&nbsp;and&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;slices&nbsp;of&nbsp;s.&nbsp;If&nbsp;all&nbsp;code&nbsp;points&nbsp;in&nbsp;s&nbsp;satisfy&nbsp;f(c)&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1371744">//&nbsp;string&nbsp;is&nbsp;empty,&nbsp;an&nbsp;empty&nbsp;slice&nbsp;is&nbsp;returned.</span><br>
<span class="lineno">345</span><span class="comment" id="1371792">//&nbsp;FieldsFunc&nbsp;makes&nbsp;no&nbsp;guarantees&nbsp;about&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;it&nbsp;calls&nbsp;f(c).</span><br>
<span class="lineno"></span><span class="comment" id="1371866">//&nbsp;If&nbsp;f&nbsp;does&nbsp;not&nbsp;return&nbsp;consistent&nbsp;results&nbsp;for&nbsp;a&nbsp;given&nbsp;c,&nbsp;FieldsFunc&nbsp;may&nbsp;crash.</span><br>
<span class="lineno"></span><span class="keyword" id="1371946">func</span>&nbsp;<span class="ident" id="1371951">FieldsFunc</span><span class="op" id="1371961">(</span><span class="ident" id="1371962">s</span>&nbsp;<span class="builtintype" id="1371964">string</span><span class="op" id="1371970">,</span>&nbsp;<span class="ident" id="1371972">f</span>&nbsp;<span class="keyword" id="1371974">func</span><span class="op" id="1371978">(</span><span class="builtintype" id="1371979">rune</span><span class="op" id="1371983">)</span>&nbsp;<span class="builtintype" id="1371985">bool</span><span class="op" id="1371989">)</span>&nbsp;<span class="op" id="1371991">[</span><span class="op" id="1371992">]</span><span class="builtintype" id="1371993">string</span>&nbsp;<span class="op" id="1372000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372003">//&nbsp;First&nbsp;count&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372031">n</span>&nbsp;<span class="op" id="1372033">:=</span>&nbsp;<span class="num" id="1372036">0</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372039">inField</span>&nbsp;<span class="op" id="1372047">:=</span>&nbsp;<span class="builtintype" id="1372050">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372057">for</span>&nbsp;<span class="ident" id="1372061">_</span><span class="op" id="1372062">,</span>&nbsp;<span class="builtintype" id="1372064">rune</span>&nbsp;<span class="op" id="1372069">:=</span>&nbsp;<span class="keyword" id="1372072">range</span>&nbsp;<span class="ident" id="1372078">s</span>&nbsp;<span class="op" id="1372080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372084">wasInField</span>&nbsp;<span class="op" id="1372095">:=</span>&nbsp;<span class="ident" id="1372098">inField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372108">inField</span>&nbsp;<span class="op" id="1372116">=</span>&nbsp;<span class="op" id="1372118">!</span><span class="ident" id="1372119">f</span><span class="op" id="1372120">(</span><span class="builtintype" id="1372121">rune</span><span class="op" id="1372125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372129">if</span>&nbsp;<span class="ident" id="1372132">inField</span>&nbsp;<span class="op" id="1372140">&amp;&amp;</span>&nbsp;<span class="op" id="1372143">!</span><span class="ident" id="1372144">wasInField</span>&nbsp;<span class="op" id="1372155">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372160">n</span><span class="op" id="1372161">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372173">//&nbsp;Now&nbsp;create&nbsp;them.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372194">a</span>&nbsp;<span class="op" id="1372196">:=</span>&nbsp;<span class="builtinfunc" id="1372199">make</span><span class="op" id="1372203">(</span><span class="op" id="1372204">[</span><span class="op" id="1372205">]</span><span class="builtintype" id="1372206">string</span><span class="op" id="1372212">,</span>&nbsp;<span class="ident" id="1372214">n</span><span class="op" id="1372215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372218">na</span>&nbsp;<span class="op" id="1372221">:=</span>&nbsp;<span class="num" id="1372224">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372227">fieldStart</span>&nbsp;<span class="op" id="1372238">:=</span>&nbsp;<span class="op" id="1372241">-</span><span class="num" id="1372242">1</span>&nbsp;<span class="comment" id="1372244">//&nbsp;Set&nbsp;to&nbsp;-1&nbsp;when&nbsp;looking&nbsp;for&nbsp;start&nbsp;of&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372291">for</span>&nbsp;<span class="ident" id="1372295">i</span><span class="op" id="1372296">,</span>&nbsp;<span class="builtintype" id="1372298">rune</span>&nbsp;<span class="op" id="1372303">:=</span>&nbsp;<span class="keyword" id="1372306">range</span>&nbsp;<span class="ident" id="1372312">s</span>&nbsp;<span class="op" id="1372314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372318">if</span>&nbsp;<span class="ident" id="1372321">f</span><span class="op" id="1372322">(</span><span class="builtintype" id="1372323">rune</span><span class="op" id="1372327">)</span>&nbsp;<span class="op" id="1372329">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372334">if</span>&nbsp;<span class="ident" id="1372337">fieldStart</span>&nbsp;<span class="op" id="1372348">&gt;=</span>&nbsp;<span class="num" id="1372351">0</span>&nbsp;<span class="op" id="1372353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372359">a</span><span class="op" id="1372360">[</span><span class="ident" id="1372361">na</span><span class="op" id="1372363">]</span>&nbsp;<span class="op" id="1372365">=</span>&nbsp;<span class="ident" id="1372367">s</span><span class="op" id="1372368">[</span><span class="ident" id="1372369">fieldStart</span><span class="op" id="1372379">:</span><span class="ident" id="1372380">i</span><span class="op" id="1372381">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372387">na</span><span class="op" id="1372389">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372396">fieldStart</span>&nbsp;<span class="op" id="1372407">=</span>&nbsp;<span class="op" id="1372409">-</span><span class="num" id="1372410">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372415">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372419">}</span>&nbsp;<span class="keyword" id="1372421">else</span>&nbsp;<span class="keyword" id="1372426">if</span>&nbsp;<span class="ident" id="1372429">fieldStart</span>&nbsp;<span class="op" id="1372440">==</span>&nbsp;<span class="op" id="1372443">-</span><span class="num" id="1372444">1</span>&nbsp;<span class="op" id="1372446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372451">fieldStart</span>&nbsp;<span class="op" id="1372462">=</span>&nbsp;<span class="ident" id="1372464">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372474">if</span>&nbsp;<span class="ident" id="1372477">fieldStart</span>&nbsp;<span class="op" id="1372488">&gt;=</span>&nbsp;<span class="num" id="1372491">0</span>&nbsp;<span class="op" id="1372493">{</span>&nbsp;<span class="comment" id="1372495">//&nbsp;Last&nbsp;field&nbsp;might&nbsp;end&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372529">a</span><span class="op" id="1372530">[</span><span class="ident" id="1372531">na</span><span class="op" id="1372533">]</span>&nbsp;<span class="op" id="1372535">=</span>&nbsp;<span class="ident" id="1372537">s</span><span class="op" id="1372538">[</span><span class="ident" id="1372539">fieldStart</span><span class="op" id="1372549">:</span><span class="op" id="1372550">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372556">return</span>&nbsp;<span class="ident" id="1372563">a</span><br>
<span class="lineno"></span><span class="op" id="1372565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="comment" id="1372568">//&nbsp;Join&nbsp;concatenates&nbsp;the&nbsp;elements&nbsp;of&nbsp;a&nbsp;to&nbsp;create&nbsp;a&nbsp;single&nbsp;string.&nbsp;&nbsp;&nbsp;The&nbsp;separator&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="1372657">//&nbsp;sep&nbsp;is&nbsp;placed&nbsp;between&nbsp;elements&nbsp;in&nbsp;the&nbsp;resulting&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="1372716">func</span>&nbsp;<span class="ident" id="1372721">Join</span><span class="op" id="1372725">(</span><span class="ident" id="1372726">a</span>&nbsp;<span class="op" id="1372728">[</span><span class="op" id="1372729">]</span><span class="builtintype" id="1372730">string</span><span class="op" id="1372736">,</span>&nbsp;<span class="ident" id="1372738">sep</span>&nbsp;<span class="builtintype" id="1372742">string</span><span class="op" id="1372748">)</span>&nbsp;<span class="builtintype" id="1372750">string</span>&nbsp;<span class="op" id="1372757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372760">if</span>&nbsp;<span class="builtinfunc" id="1372763">len</span><span class="op" id="1372766">(</span><span class="ident" id="1372767">a</span><span class="op" id="1372768">)</span>&nbsp;<span class="op" id="1372770">==</span>&nbsp;<span class="num" id="1372773">0</span>&nbsp;<span class="op" id="1372775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372779">return</span>&nbsp;<span class="string" id="1372786">&#34;&#34;</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372793">if</span>&nbsp;<span class="builtinfunc" id="1372796">len</span><span class="op" id="1372799">(</span><span class="ident" id="1372800">a</span><span class="op" id="1372801">)</span>&nbsp;<span class="op" id="1372803">==</span>&nbsp;<span class="num" id="1372806">1</span>&nbsp;<span class="op" id="1372808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372812">return</span>&nbsp;<span class="ident" id="1372819">a</span><span class="op" id="1372820">[</span><span class="num" id="1372821">0</span><span class="op" id="1372822">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372828">n</span>&nbsp;<span class="op" id="1372830">:=</span>&nbsp;<span class="builtinfunc" id="1372833">len</span><span class="op" id="1372836">(</span><span class="ident" id="1372837">sep</span><span class="op" id="1372840">)</span>&nbsp;<span class="op" id="1372842">*</span>&nbsp;<span class="op" id="1372844">(</span><span class="builtinfunc" id="1372845">len</span><span class="op" id="1372848">(</span><span class="ident" id="1372849">a</span><span class="op" id="1372850">)</span>&nbsp;<span class="op" id="1372852">-</span>&nbsp;<span class="num" id="1372854">1</span><span class="op" id="1372855">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372858">for</span>&nbsp;<span class="ident" id="1372862">i</span>&nbsp;<span class="op" id="1372864">:=</span>&nbsp;<span class="num" id="1372867">0</span><span class="op" id="1372868">;</span>&nbsp;<span class="ident" id="1372870">i</span>&nbsp;<span class="op" id="1372872">&lt;</span>&nbsp;<span class="builtinfunc" id="1372874">len</span><span class="op" id="1372877">(</span><span class="ident" id="1372878">a</span><span class="op" id="1372879">)</span><span class="op" id="1372880">;</span>&nbsp;<span class="ident" id="1372882">i</span><span class="op" id="1372883">++</span>&nbsp;<span class="op" id="1372886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372890">n</span>&nbsp;<span class="op" id="1372892">+=</span>&nbsp;<span class="builtinfunc" id="1372895">len</span><span class="op" id="1372898">(</span><span class="ident" id="1372899">a</span><span class="op" id="1372900">[</span><span class="ident" id="1372901">i</span><span class="op" id="1372902">]</span><span class="op" id="1372903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372910">b</span>&nbsp;<span class="op" id="1372912">:=</span>&nbsp;<span class="builtinfunc" id="1372915">make</span><span class="op" id="1372919">(</span><span class="op" id="1372920">[</span><span class="op" id="1372921">]</span><span class="builtintype" id="1372922">byte</span><span class="op" id="1372926">,</span>&nbsp;<span class="ident" id="1372928">n</span><span class="op" id="1372929">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372932">bp</span>&nbsp;<span class="op" id="1372935">:=</span>&nbsp;<span class="builtinfunc" id="1372938">copy</span><span class="op" id="1372942">(</span><span class="ident" id="1372943">b</span><span class="op" id="1372944">,</span>&nbsp;<span class="ident" id="1372946">a</span><span class="op" id="1372947">[</span><span class="num" id="1372948">0</span><span class="op" id="1372949">]</span><span class="op" id="1372950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1372953">for</span>&nbsp;<span class="ident" id="1372957">_</span><span class="op" id="1372958">,</span>&nbsp;<span class="ident" id="1372960">s</span>&nbsp;<span class="op" id="1372962">:=</span>&nbsp;<span class="keyword" id="1372965">range</span>&nbsp;<span class="ident" id="1372971">a</span><span class="op" id="1372972">[</span><span class="num" id="1372973">1</span><span class="op" id="1372974">:</span><span class="op" id="1372975">]</span>&nbsp;<span class="op" id="1372977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372981">bp</span>&nbsp;<span class="op" id="1372984">+=</span>&nbsp;<span class="builtinfunc" id="1372987">copy</span><span class="op" id="1372991">(</span><span class="ident" id="1372992">b</span><span class="op" id="1372993">[</span><span class="ident" id="1372994">bp</span><span class="op" id="1372996">:</span><span class="op" id="1372997">]</span><span class="op" id="1372998">,</span>&nbsp;<span class="ident" id="1373000">sep</span><span class="op" id="1373003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1373007">bp</span>&nbsp;<span class="op" id="1373010">+=</span>&nbsp;<span class="builtinfunc" id="1373013">copy</span><span class="op" id="1373017">(</span><span class="ident" id="1373018">b</span><span class="op" id="1373019">[</span><span class="ident" id="1373020">bp</span><span class="op" id="1373022">:</span><span class="op" id="1373023">]</span><span class="op" id="1373024">,</span>&nbsp;<span class="ident" id="1373026">s</span><span class="op" id="1373027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1373030">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1373033">return</span>&nbsp;<span class="builtintype" id="1373040">string</span><span class="op" id="1373046">(</span><span class="ident" id="1373047">b</span><span class="op" id="1373048">)</span><br>
<span class="lineno"></span><span class="op" id="1373050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1373053">//&nbsp;HasPrefix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;begins&nbsp;with&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="1373113">func</span>&nbsp;<span class="ident" id="1373118">HasPrefix</span><span class="op" id="1373127">(</span><span class="ident" id="1373128">s</span><span class="op" id="1373129">,</span>&nbsp;<span class="ident" id="1373131">prefix</span>&nbsp;<span class="builtintype" id="1373138">string</span><span class="op" id="1373144">)</span>&nbsp;<span class="builtintype" id="1373146">bool</span>&nbsp;<span class="op" id="1373151">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1373154">return</span>&nbsp;<span class="builtinfunc" id="1373161">len</span><span class="op" id="1373164">(</span><span class="ident" id="1373165">s</span><span class="op" id="1373166">)</span>&nbsp;<span class="op" id="1373168">&gt;=</span>&nbsp;<span class="builtinfunc" id="1373171">len</span><span class="op" id="1373174">(</span><span class="ident" id="1373175">prefix</span><span class="op" id="1373181">)</span>&nbsp;<span class="op" id="1373183">&amp;&amp;</span>&nbsp;<span class="ident" id="1373186">s</span><span class="op" id="1373187">[</span><span class="num" id="1373188">0</span><span class="op" id="1373189">:</span><span class="builtinfunc" id="1373190">len</span><span class="op" id="1373193">(</span><span class="ident" id="1373194">prefix</span><span class="op" id="1373200">)</span><span class="op" id="1373201">]</span>&nbsp;<span class="op" id="1373203">==</span>&nbsp;<span class="ident" id="1373206">prefix</span><br>
<span class="lineno"></span><span class="op" id="1373213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1373216">//&nbsp;HasSuffix&nbsp;tests&nbsp;whether&nbsp;the&nbsp;string&nbsp;s&nbsp;ends&nbsp;with&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="1373274">func</span>&nbsp;<span class="ident" id="1373279">HasSuffix</span><span class="op" id="1373288">(</span><span class="ident" id="1373289">s</span><span class="op" id="1373290">,</span>&nbsp;<span class="ident" id="1373292">suffix</span>&nbsp;<span class="builtintype" id="1373299">string</span><span class="op" id="1373305">)</span>&nbsp;<span class="builtintype" id="1373307">bool</span>&nbsp;<span class="op" id="1373312">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1373315">return</span>&nbsp;<span class="builtinfunc" id="1373322">len</span><span class="op" id="1373325">(</span><span class="ident" id="1373326">s</span><span class="op" id="1373327">)</span>&nbsp;<span class="op" id="1373329">&gt;=</span>&nbsp;<span class="builtinfunc" id="1373332">len</span><span class="op" id="1373335">(</span><span class="ident" id="1373336">suffix</span><span class="op" id="1373342">)</span>&nbsp;<span class="op" id="1373344">&amp;&amp;</span>&nbsp;<span class="ident" id="1373347">s</span><span class="op" id="1373348">[</span><span class="builtinfunc" id="1373349">len</span><span class="op" id="1373352">(</span><span class="ident" id="1373353">s</span><span class="op" id="1373354">)</span><span class="op" id="1373355">-</span><span class="builtinfunc" id="1373356">len</span><span class="op" id="1373359">(</span><span class="ident" id="1373360">suffix</span><span class="op" id="1373366">)</span><span class="op" id="1373367">:</span><span class="op" id="1373368">]</span>&nbsp;<span class="op" id="1373370">==</span>&nbsp;<span class="ident" id="1373373">suffix</span><br>
<span class="lineno"></span><span class="op" id="1373380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1373383">//&nbsp;Map&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;its&nbsp;characters&nbsp;modified</span><br>
<span class="lineno"></span><span class="comment" id="1373454">//&nbsp;according&nbsp;to&nbsp;the&nbsp;mapping&nbsp;function.&nbsp;If&nbsp;mapping&nbsp;returns&nbsp;a&nbsp;negative&nbsp;value,&nbsp;the&nbsp;character&nbsp;is</span><br>
<span class="lineno">415</span><span class="comment" id="1373546">//&nbsp;dropped&nbsp;from&nbsp;the&nbsp;string&nbsp;with&nbsp;no&nbsp;replacement.</span><br>
<span class="lineno"></span><span class="keyword" id="1373594">func</span>&nbsp;<span class="ident" id="1373599">Map</span><span class="op" id="1373602">(</span><span class="ident" id="1373603">mapping</span>&nbsp;<span class="keyword" id="1373611">func</span><span class="op" id="1373615">(</span><span class="builtintype" id="1373616">rune</span><span class="op" id="1373620">)</span>&nbsp;<span class="builtintype" id="1373622">rune</span><span class="op" id="1373626">,</span>&nbsp;<span class="ident" id="1373628">s</span>&nbsp;<span class="builtintype" id="1373630">string</span><span class="op" id="1373636">)</span>&nbsp;<span class="builtintype" id="1373638">string</span>&nbsp;<span class="op" id="1373645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373648">//&nbsp;In&nbsp;the&nbsp;worst&nbsp;case,&nbsp;the&nbsp;string&nbsp;can&nbsp;grow&nbsp;when&nbsp;mapped,&nbsp;making</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373711">//&nbsp;things&nbsp;unpleasant.&nbsp;&nbsp;But&nbsp;it&#39;s&nbsp;so&nbsp;rare&nbsp;we&nbsp;barge&nbsp;in&nbsp;assuming&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373778">//&nbsp;fine.&nbsp;&nbsp;It&nbsp;could&nbsp;also&nbsp;shrink&nbsp;but&nbsp;that&nbsp;falls&nbsp;out&nbsp;naturally.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1373840">maxbytes</span>&nbsp;<span class="op" id="1373849">:=</span>&nbsp;<span class="builtinfunc" id="1373852">len</span><span class="op" id="1373855">(</span><span class="ident" id="1373856">s</span><span class="op" id="1373857">)</span>&nbsp;<span class="comment" id="1373859">//&nbsp;length&nbsp;of&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1373875">nbytes</span>&nbsp;<span class="op" id="1373882">:=</span>&nbsp;<span class="num" id="1373885">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373894">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;encoded&nbsp;in&nbsp;b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373927">//&nbsp;The&nbsp;output&nbsp;buffer&nbsp;b&nbsp;is&nbsp;initialized&nbsp;on&nbsp;demand,&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1373987">//&nbsp;time&nbsp;a&nbsp;character&nbsp;differs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374017">var</span>&nbsp;<span class="ident" id="1374021">b</span>&nbsp;<span class="op" id="1374023">[</span><span class="op" id="1374024">]</span><span class="builtintype" id="1374025">byte</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374032">for</span>&nbsp;<span class="ident" id="1374036">i</span><span class="op" id="1374037">,</span>&nbsp;<span class="ident" id="1374039">c</span>&nbsp;<span class="op" id="1374041">:=</span>&nbsp;<span class="keyword" id="1374044">range</span>&nbsp;<span class="ident" id="1374050">s</span>&nbsp;<span class="op" id="1374052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374056">r</span>&nbsp;<span class="op" id="1374058">:=</span>&nbsp;<span class="ident" id="1374061">mapping</span><span class="op" id="1374068">(</span><span class="ident" id="1374069">c</span><span class="op" id="1374070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374074">if</span>&nbsp;<span class="ident" id="1374077">b</span>&nbsp;<span class="op" id="1374079">==</span>&nbsp;<span class="builtintype" id="1374082">nil</span>&nbsp;<span class="op" id="1374086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374091">if</span>&nbsp;<span class="ident" id="1374094">r</span>&nbsp;<span class="op" id="1374096">==</span>&nbsp;<span class="ident" id="1374099">c</span>&nbsp;<span class="op" id="1374101">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374107">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374124">b</span>&nbsp;<span class="op" id="1374126">=</span>&nbsp;<span class="builtinfunc" id="1374128">make</span><span class="op" id="1374132">(</span><span class="op" id="1374133">[</span><span class="op" id="1374134">]</span><span class="builtintype" id="1374135">byte</span><span class="op" id="1374139">,</span>&nbsp;<span class="ident" id="1374141">maxbytes</span><span class="op" id="1374149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374154">nbytes</span>&nbsp;<span class="op" id="1374161">=</span>&nbsp;<span class="builtinfunc" id="1374163">copy</span><span class="op" id="1374167">(</span><span class="ident" id="1374168">b</span><span class="op" id="1374169">,</span>&nbsp;<span class="ident" id="1374171">s</span><span class="op" id="1374172">[</span><span class="op" id="1374173">:</span><span class="ident" id="1374174">i</span><span class="op" id="1374175">]</span><span class="op" id="1374176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374180">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374184">if</span>&nbsp;<span class="ident" id="1374187">r</span>&nbsp;<span class="op" id="1374189">&gt;=</span>&nbsp;<span class="num" id="1374192">0</span>&nbsp;<span class="op" id="1374194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374199">wid</span>&nbsp;<span class="op" id="1374203">:=</span>&nbsp;<span class="num" id="1374206">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374211">if</span>&nbsp;<span class="ident" id="1374214">r</span>&nbsp;<span class="op" id="1374216">&gt;=</span>&nbsp;<span class="ident" id="1374219">utf8</span><span class="op" id="1374223">.</span><span class="ident" id="1374224">RuneSelf</span>&nbsp;<span class="op" id="1374233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374239">wid</span>&nbsp;<span class="op" id="1374243">=</span>&nbsp;<span class="ident" id="1374245">utf8</span><span class="op" id="1374249">.</span><span class="ident" id="1374250">RuneLen</span><span class="op" id="1374257">(</span><span class="ident" id="1374258">r</span><span class="op" id="1374259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374264">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374269">if</span>&nbsp;<span class="ident" id="1374272">nbytes</span><span class="op" id="1374278">+</span><span class="ident" id="1374279">wid</span>&nbsp;<span class="op" id="1374283">&gt;</span>&nbsp;<span class="ident" id="1374285">maxbytes</span>&nbsp;<span class="op" id="1374294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1374300">//&nbsp;Grow&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374324">maxbytes</span>&nbsp;<span class="op" id="1374333">=</span>&nbsp;<span class="ident" id="1374335">maxbytes</span><span class="op" id="1374343">*</span><span class="num" id="1374344">2</span>&nbsp;<span class="op" id="1374346">+</span>&nbsp;<span class="ident" id="1374348">utf8</span><span class="op" id="1374352">.</span><span class="ident" id="1374353">UTFMax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374364">nb</span>&nbsp;<span class="op" id="1374367">:=</span>&nbsp;<span class="builtinfunc" id="1374370">make</span><span class="op" id="1374374">(</span><span class="op" id="1374375">[</span><span class="op" id="1374376">]</span><span class="builtintype" id="1374377">byte</span><span class="op" id="1374381">,</span>&nbsp;<span class="ident" id="1374383">maxbytes</span><span class="op" id="1374391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1374397">copy</span><span class="op" id="1374401">(</span><span class="ident" id="1374402">nb</span><span class="op" id="1374404">,</span>&nbsp;<span class="ident" id="1374406">b</span><span class="op" id="1374407">[</span><span class="num" id="1374408">0</span><span class="op" id="1374409">:</span><span class="ident" id="1374410">nbytes</span><span class="op" id="1374416">]</span><span class="op" id="1374417">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374423">b</span>&nbsp;<span class="op" id="1374425">=</span>&nbsp;<span class="ident" id="1374427">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374438">nbytes</span>&nbsp;<span class="op" id="1374445">+=</span>&nbsp;<span class="ident" id="1374448">utf8</span><span class="op" id="1374452">.</span><span class="ident" id="1374453">EncodeRune</span><span class="op" id="1374463">(</span><span class="ident" id="1374464">b</span><span class="op" id="1374465">[</span><span class="ident" id="1374466">nbytes</span><span class="op" id="1374472">:</span><span class="ident" id="1374473">maxbytes</span><span class="op" id="1374481">]</span><span class="op" id="1374482">,</span>&nbsp;<span class="ident" id="1374484">r</span><span class="op" id="1374485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374492">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374495">if</span>&nbsp;<span class="ident" id="1374498">b</span>&nbsp;<span class="op" id="1374500">==</span>&nbsp;<span class="builtintype" id="1374503">nil</span>&nbsp;<span class="op" id="1374507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374511">return</span>&nbsp;<span class="ident" id="1374518">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374524">return</span>&nbsp;<span class="builtintype" id="1374531">string</span><span class="op" id="1374537">(</span><span class="ident" id="1374538">b</span><span class="op" id="1374539">[</span><span class="num" id="1374540">0</span><span class="op" id="1374541">:</span><span class="ident" id="1374542">nbytes</span><span class="op" id="1374548">]</span><span class="op" id="1374549">)</span><br>
<span class="lineno"></span><span class="op" id="1374551">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="1374554">//&nbsp;Repeat&nbsp;returns&nbsp;a&nbsp;new&nbsp;string&nbsp;consisting&nbsp;of&nbsp;count&nbsp;copies&nbsp;of&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="1374629">func</span>&nbsp;<span class="ident" id="1374634">Repeat</span><span class="op" id="1374640">(</span><span class="ident" id="1374641">s</span>&nbsp;<span class="builtintype" id="1374643">string</span><span class="op" id="1374649">,</span>&nbsp;<span class="ident" id="1374651">count</span>&nbsp;<span class="builtintype" id="1374657">int</span><span class="op" id="1374660">)</span>&nbsp;<span class="builtintype" id="1374662">string</span>&nbsp;<span class="op" id="1374669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374672">b</span>&nbsp;<span class="op" id="1374674">:=</span>&nbsp;<span class="builtinfunc" id="1374677">make</span><span class="op" id="1374681">(</span><span class="op" id="1374682">[</span><span class="op" id="1374683">]</span><span class="builtintype" id="1374684">byte</span><span class="op" id="1374688">,</span>&nbsp;<span class="builtinfunc" id="1374690">len</span><span class="op" id="1374693">(</span><span class="ident" id="1374694">s</span><span class="op" id="1374695">)</span><span class="op" id="1374696">*</span><span class="ident" id="1374697">count</span><span class="op" id="1374702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374705">bp</span>&nbsp;<span class="op" id="1374708">:=</span>&nbsp;<span class="builtinfunc" id="1374711">copy</span><span class="op" id="1374715">(</span><span class="ident" id="1374716">b</span><span class="op" id="1374717">,</span>&nbsp;<span class="ident" id="1374719">s</span><span class="op" id="1374720">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374723">for</span>&nbsp;<span class="ident" id="1374727">bp</span>&nbsp;<span class="op" id="1374730">&lt;</span>&nbsp;<span class="builtinfunc" id="1374732">len</span><span class="op" id="1374735">(</span><span class="ident" id="1374736">b</span><span class="op" id="1374737">)</span>&nbsp;<span class="op" id="1374739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1374743">copy</span><span class="op" id="1374747">(</span><span class="ident" id="1374748">b</span><span class="op" id="1374749">[</span><span class="ident" id="1374750">bp</span><span class="op" id="1374752">:</span><span class="op" id="1374753">]</span><span class="op" id="1374754">,</span>&nbsp;<span class="ident" id="1374756">b</span><span class="op" id="1374757">[</span><span class="op" id="1374758">:</span><span class="ident" id="1374759">bp</span><span class="op" id="1374761">]</span><span class="op" id="1374762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374766">bp</span>&nbsp;<span class="op" id="1374769">*=</span>&nbsp;<span class="num" id="1374772">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374778">return</span>&nbsp;<span class="builtintype" id="1374785">string</span><span class="op" id="1374791">(</span><span class="ident" id="1374792">b</span><span class="op" id="1374793">)</span><br>
<span class="lineno">465</span><span class="op" id="1374795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1374798">//&nbsp;ToUpper&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;upper&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="1374893">func</span>&nbsp;<span class="ident" id="1374898">ToUpper</span><span class="op" id="1374905">(</span><span class="ident" id="1374906">s</span>&nbsp;<span class="builtintype" id="1374908">string</span><span class="op" id="1374914">)</span>&nbsp;<span class="builtintype" id="1374916">string</span>&nbsp;<span class="op" id="1374923">{</span>&nbsp;<span class="keyword" id="1374925">return</span>&nbsp;<span class="ident" id="1374932">Map</span><span class="op" id="1374935">(</span><span class="ident" id="1374936">unicode</span><span class="op" id="1374943">.</span><span class="ident" id="1374944">ToUpper</span><span class="op" id="1374951">,</span>&nbsp;<span class="ident" id="1374953">s</span><span class="op" id="1374954">)</span>&nbsp;<span class="op" id="1374956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span><span class="comment" id="1374959">//&nbsp;ToLower&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="1375054">func</span>&nbsp;<span class="ident" id="1375059">ToLower</span><span class="op" id="1375066">(</span><span class="ident" id="1375067">s</span>&nbsp;<span class="builtintype" id="1375069">string</span><span class="op" id="1375075">)</span>&nbsp;<span class="builtintype" id="1375077">string</span>&nbsp;<span class="op" id="1375084">{</span>&nbsp;<span class="keyword" id="1375086">return</span>&nbsp;<span class="ident" id="1375093">Map</span><span class="op" id="1375096">(</span><span class="ident" id="1375097">unicode</span><span class="op" id="1375104">.</span><span class="ident" id="1375105">ToLower</span><span class="op" id="1375112">,</span>&nbsp;<span class="ident" id="1375114">s</span><span class="op" id="1375115">)</span>&nbsp;<span class="op" id="1375117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1375120">//&nbsp;ToTitle&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="1375215">func</span>&nbsp;<span class="ident" id="1375220">ToTitle</span><span class="op" id="1375227">(</span><span class="ident" id="1375228">s</span>&nbsp;<span class="builtintype" id="1375230">string</span><span class="op" id="1375236">)</span>&nbsp;<span class="builtintype" id="1375238">string</span>&nbsp;<span class="op" id="1375245">{</span>&nbsp;<span class="keyword" id="1375247">return</span>&nbsp;<span class="ident" id="1375254">Map</span><span class="op" id="1375257">(</span><span class="ident" id="1375258">unicode</span><span class="op" id="1375265">.</span><span class="ident" id="1375266">ToTitle</span><span class="op" id="1375273">,</span>&nbsp;<span class="ident" id="1375275">s</span><span class="op" id="1375276">)</span>&nbsp;<span class="op" id="1375278">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="1375281">//&nbsp;ToUpperSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="1375371">//&nbsp;upper&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="1375431">func</span>&nbsp;<span class="ident" id="1375436">ToUpperSpecial</span><span class="op" id="1375450">(</span><span class="ident" id="1375451">_case</span>&nbsp;<span class="ident" id="1375457">unicode</span><span class="op" id="1375464">.</span><span class="ident" id="1375465">SpecialCase</span><span class="op" id="1375476">,</span>&nbsp;<span class="ident" id="1375478">s</span>&nbsp;<span class="builtintype" id="1375480">string</span><span class="op" id="1375486">)</span>&nbsp;<span class="builtintype" id="1375488">string</span>&nbsp;<span class="op" id="1375495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1375498">return</span>&nbsp;<span class="ident" id="1375505">Map</span><span class="op" id="1375508">(</span><span class="keyword" id="1375509">func</span><span class="op" id="1375513">(</span><span class="ident" id="1375514">r</span>&nbsp;<span class="builtintype" id="1375516">rune</span><span class="op" id="1375520">)</span>&nbsp;<span class="builtintype" id="1375522">rune</span>&nbsp;<span class="op" id="1375527">{</span>&nbsp;<span class="keyword" id="1375529">return</span>&nbsp;<span class="ident" id="1375536">_case</span><span class="op" id="1375541">.</span><span class="ident" id="1375542">ToUpper</span><span class="op" id="1375549">(</span><span class="ident" id="1375550">r</span><span class="op" id="1375551">)</span>&nbsp;<span class="op" id="1375553">}</span><span class="op" id="1375554">,</span>&nbsp;<span class="ident" id="1375556">s</span><span class="op" id="1375557">)</span><br>
<span class="lineno">480</span><span class="op" id="1375559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1375562">//&nbsp;ToLowerSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="1375652">//&nbsp;lower&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="1375712">func</span>&nbsp;<span class="ident" id="1375717">ToLowerSpecial</span><span class="op" id="1375731">(</span><span class="ident" id="1375732">_case</span>&nbsp;<span class="ident" id="1375738">unicode</span><span class="op" id="1375745">.</span><span class="ident" id="1375746">SpecialCase</span><span class="op" id="1375757">,</span>&nbsp;<span class="ident" id="1375759">s</span>&nbsp;<span class="builtintype" id="1375761">string</span><span class="op" id="1375767">)</span>&nbsp;<span class="builtintype" id="1375769">string</span>&nbsp;<span class="op" id="1375776">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1375779">return</span>&nbsp;<span class="ident" id="1375786">Map</span><span class="op" id="1375789">(</span><span class="keyword" id="1375790">func</span><span class="op" id="1375794">(</span><span class="ident" id="1375795">r</span>&nbsp;<span class="builtintype" id="1375797">rune</span><span class="op" id="1375801">)</span>&nbsp;<span class="builtintype" id="1375803">rune</span>&nbsp;<span class="op" id="1375808">{</span>&nbsp;<span class="keyword" id="1375810">return</span>&nbsp;<span class="ident" id="1375817">_case</span><span class="op" id="1375822">.</span><span class="ident" id="1375823">ToLower</span><span class="op" id="1375830">(</span><span class="ident" id="1375831">r</span><span class="op" id="1375832">)</span>&nbsp;<span class="op" id="1375834">}</span><span class="op" id="1375835">,</span>&nbsp;<span class="ident" id="1375837">s</span><span class="op" id="1375838">)</span><br>
<span class="lineno"></span><span class="op" id="1375840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1375843">//&nbsp;ToTitleSpecial&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;mapped&nbsp;to&nbsp;their</span><br>
<span class="lineno"></span><span class="comment" id="1375933">//&nbsp;title&nbsp;case,&nbsp;giving&nbsp;priority&nbsp;to&nbsp;the&nbsp;special&nbsp;casing&nbsp;rules.</span><br>
<span class="lineno">490</span><span class="keyword" id="1375993">func</span>&nbsp;<span class="ident" id="1375998">ToTitleSpecial</span><span class="op" id="1376012">(</span><span class="ident" id="1376013">_case</span>&nbsp;<span class="ident" id="1376019">unicode</span><span class="op" id="1376026">.</span><span class="ident" id="1376027">SpecialCase</span><span class="op" id="1376038">,</span>&nbsp;<span class="ident" id="1376040">s</span>&nbsp;<span class="builtintype" id="1376042">string</span><span class="op" id="1376048">)</span>&nbsp;<span class="builtintype" id="1376050">string</span>&nbsp;<span class="op" id="1376057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376060">return</span>&nbsp;<span class="ident" id="1376067">Map</span><span class="op" id="1376070">(</span><span class="keyword" id="1376071">func</span><span class="op" id="1376075">(</span><span class="ident" id="1376076">r</span>&nbsp;<span class="builtintype" id="1376078">rune</span><span class="op" id="1376082">)</span>&nbsp;<span class="builtintype" id="1376084">rune</span>&nbsp;<span class="op" id="1376089">{</span>&nbsp;<span class="keyword" id="1376091">return</span>&nbsp;<span class="ident" id="1376098">_case</span><span class="op" id="1376103">.</span><span class="ident" id="1376104">ToTitle</span><span class="op" id="1376111">(</span><span class="ident" id="1376112">r</span><span class="op" id="1376113">)</span>&nbsp;<span class="op" id="1376115">}</span><span class="op" id="1376116">,</span>&nbsp;<span class="ident" id="1376118">s</span><span class="op" id="1376119">)</span><br>
<span class="lineno"></span><span class="op" id="1376121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1376124">//&nbsp;isSeparator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;rune&nbsp;could&nbsp;mark&nbsp;a&nbsp;word&nbsp;boundary.</span><br>
<span class="lineno">495</span><span class="comment" id="1376192">//&nbsp;TODO:&nbsp;update&nbsp;when&nbsp;package&nbsp;unicode&nbsp;captures&nbsp;more&nbsp;of&nbsp;the&nbsp;properties.</span><br>
<span class="lineno"></span><span class="keyword" id="1376262">func</span>&nbsp;<span class="ident" id="1376267">isSeparator</span><span class="op" id="1376278">(</span><span class="ident" id="1376279">r</span>&nbsp;<span class="builtintype" id="1376281">rune</span><span class="op" id="1376285">)</span>&nbsp;<span class="builtintype" id="1376287">bool</span>&nbsp;<span class="op" id="1376292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376295">//&nbsp;ASCII&nbsp;alphanumerics&nbsp;and&nbsp;underscore&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376353">if</span>&nbsp;<span class="ident" id="1376356">r</span>&nbsp;<span class="op" id="1376358">&lt;=</span>&nbsp;<span class="num" id="1376361">0x7F</span>&nbsp;<span class="op" id="1376366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376370">switch</span>&nbsp;<span class="op" id="1376377">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376381">case</span>&nbsp;<span class="string" id="1376386">&#39;0&#39;</span>&nbsp;<span class="op" id="1376390">&lt;=</span>&nbsp;<span class="ident" id="1376393">r</span>&nbsp;<span class="op" id="1376395">&amp;&amp;</span>&nbsp;<span class="ident" id="1376398">r</span>&nbsp;<span class="op" id="1376400">&lt;=</span>&nbsp;<span class="string" id="1376403">&#39;9&#39;</span><span class="op" id="1376406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376411">return</span>&nbsp;<span class="builtintype" id="1376418">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376426">case</span>&nbsp;<span class="string" id="1376431">&#39;a&#39;</span>&nbsp;<span class="op" id="1376435">&lt;=</span>&nbsp;<span class="ident" id="1376438">r</span>&nbsp;<span class="op" id="1376440">&amp;&amp;</span>&nbsp;<span class="ident" id="1376443">r</span>&nbsp;<span class="op" id="1376445">&lt;=</span>&nbsp;<span class="string" id="1376448">&#39;z&#39;</span><span class="op" id="1376451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376456">return</span>&nbsp;<span class="builtintype" id="1376463">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376471">case</span>&nbsp;<span class="string" id="1376476">&#39;A&#39;</span>&nbsp;<span class="op" id="1376480">&lt;=</span>&nbsp;<span class="ident" id="1376483">r</span>&nbsp;<span class="op" id="1376485">&amp;&amp;</span>&nbsp;<span class="ident" id="1376488">r</span>&nbsp;<span class="op" id="1376490">&lt;=</span>&nbsp;<span class="string" id="1376493">&#39;Z&#39;</span><span class="op" id="1376496">:</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376501">return</span>&nbsp;<span class="builtintype" id="1376508">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376516">case</span>&nbsp;<span class="ident" id="1376521">r</span>&nbsp;<span class="op" id="1376523">==</span>&nbsp;<span class="string" id="1376526">&#39;_&#39;</span><span class="op" id="1376529">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376534">return</span>&nbsp;<span class="builtintype" id="1376541">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376553">return</span>&nbsp;<span class="builtintype" id="1376560">true</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376569">//&nbsp;Letters&nbsp;and&nbsp;digits&nbsp;are&nbsp;not&nbsp;separators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376611">if</span>&nbsp;<span class="ident" id="1376614">unicode</span><span class="op" id="1376621">.</span><span class="ident" id="1376622">IsLetter</span><span class="op" id="1376630">(</span><span class="ident" id="1376631">r</span><span class="op" id="1376632">)</span>&nbsp;<span class="op" id="1376634">||</span>&nbsp;<span class="ident" id="1376637">unicode</span><span class="op" id="1376644">.</span><span class="ident" id="1376645">IsDigit</span><span class="op" id="1376652">(</span><span class="ident" id="1376653">r</span><span class="op" id="1376654">)</span>&nbsp;<span class="op" id="1376656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376660">return</span>&nbsp;<span class="builtintype" id="1376667">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376674">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376677">//&nbsp;Otherwise,&nbsp;all&nbsp;we&nbsp;can&nbsp;do&nbsp;for&nbsp;now&nbsp;is&nbsp;treat&nbsp;spaces&nbsp;as&nbsp;separators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376745">return</span>&nbsp;<span class="ident" id="1376752">unicode</span><span class="op" id="1376759">.</span><span class="ident" id="1376760">IsSpace</span><span class="op" id="1376767">(</span><span class="ident" id="1376768">r</span><span class="op" id="1376769">)</span><br>
<span class="lineno"></span><span class="op" id="1376771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1376774">//&nbsp;Title&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;Unicode&nbsp;letters&nbsp;that&nbsp;begin&nbsp;words</span><br>
<span class="lineno">520</span><span class="comment" id="1376856">//&nbsp;mapped&nbsp;to&nbsp;their&nbsp;title&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="1376887">//</span><br>
<span class="lineno"></span><span class="comment" id="1376890">//&nbsp;BUG:&nbsp;The&nbsp;rule&nbsp;Title&nbsp;uses&nbsp;for&nbsp;word&nbsp;boundaries&nbsp;does&nbsp;not&nbsp;handle&nbsp;Unicode&nbsp;punctuation&nbsp;properly.</span><br>
<span class="lineno"></span><span class="keyword" id="1376984">func</span>&nbsp;<span class="ident" id="1376989">Title</span><span class="op" id="1376994">(</span><span class="ident" id="1376995">s</span>&nbsp;<span class="builtintype" id="1376997">string</span><span class="op" id="1377003">)</span>&nbsp;<span class="builtintype" id="1377005">string</span>&nbsp;<span class="op" id="1377012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377015">//&nbsp;Use&nbsp;a&nbsp;closure&nbsp;here&nbsp;to&nbsp;remember&nbsp;state.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377057">//&nbsp;Hackish&nbsp;but&nbsp;effective.&nbsp;Depends&nbsp;on&nbsp;Map&nbsp;scanning&nbsp;in&nbsp;order&nbsp;and&nbsp;calling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377129">//&nbsp;the&nbsp;closure&nbsp;once&nbsp;per&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377160">prev</span>&nbsp;<span class="op" id="1377165">:=</span>&nbsp;<span class="string" id="1377168">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377173">return</span>&nbsp;<span class="ident" id="1377180">Map</span><span class="op" id="1377183">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377187">func</span><span class="op" id="1377191">(</span><span class="ident" id="1377192">r</span>&nbsp;<span class="builtintype" id="1377194">rune</span><span class="op" id="1377198">)</span>&nbsp;<span class="builtintype" id="1377200">rune</span>&nbsp;<span class="op" id="1377205">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377210">if</span>&nbsp;<span class="ident" id="1377213">isSeparator</span><span class="op" id="1377224">(</span><span class="ident" id="1377225">prev</span><span class="op" id="1377229">)</span>&nbsp;<span class="op" id="1377231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377237">prev</span>&nbsp;<span class="op" id="1377242">=</span>&nbsp;<span class="ident" id="1377244">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377250">return</span>&nbsp;<span class="ident" id="1377257">unicode</span><span class="op" id="1377264">.</span><span class="ident" id="1377265">ToTitle</span><span class="op" id="1377272">(</span><span class="ident" id="1377273">r</span><span class="op" id="1377274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377284">prev</span>&nbsp;<span class="op" id="1377289">=</span>&nbsp;<span class="ident" id="1377291">r</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377296">return</span>&nbsp;<span class="ident" id="1377303">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377307">}</span><span class="op" id="1377308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377312">s</span><span class="op" id="1377313">)</span><br>
<span class="lineno"></span><span class="op" id="1377315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">540</span><span class="comment" id="1377318">//&nbsp;TrimLeftFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="1377383">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="1377433">func</span>&nbsp;<span class="ident" id="1377438">TrimLeftFunc</span><span class="op" id="1377450">(</span><span class="ident" id="1377451">s</span>&nbsp;<span class="builtintype" id="1377453">string</span><span class="op" id="1377459">,</span>&nbsp;<span class="ident" id="1377461">f</span>&nbsp;<span class="keyword" id="1377463">func</span><span class="op" id="1377467">(</span><span class="builtintype" id="1377468">rune</span><span class="op" id="1377472">)</span>&nbsp;<span class="builtintype" id="1377474">bool</span><span class="op" id="1377478">)</span>&nbsp;<span class="builtintype" id="1377480">string</span>&nbsp;<span class="op" id="1377487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377490">i</span>&nbsp;<span class="op" id="1377492">:=</span>&nbsp;<span class="ident" id="1377495">indexFunc</span><span class="op" id="1377504">(</span><span class="ident" id="1377505">s</span><span class="op" id="1377506">,</span>&nbsp;<span class="ident" id="1377508">f</span><span class="op" id="1377509">,</span>&nbsp;<span class="builtintype" id="1377511">false</span><span class="op" id="1377516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377519">if</span>&nbsp;<span class="ident" id="1377522">i</span>&nbsp;<span class="op" id="1377524">==</span>&nbsp;<span class="op" id="1377527">-</span><span class="num" id="1377528">1</span>&nbsp;<span class="op" id="1377530">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377534">return</span>&nbsp;<span class="string" id="1377541">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377548">return</span>&nbsp;<span class="ident" id="1377555">s</span><span class="op" id="1377556">[</span><span class="ident" id="1377557">i</span><span class="op" id="1377558">:</span><span class="op" id="1377559">]</span><br>
<span class="lineno"></span><span class="op" id="1377561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment" id="1377564">//&nbsp;TrimRightFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="1377631">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="1377681">func</span>&nbsp;<span class="ident" id="1377686">TrimRightFunc</span><span class="op" id="1377699">(</span><span class="ident" id="1377700">s</span>&nbsp;<span class="builtintype" id="1377702">string</span><span class="op" id="1377708">,</span>&nbsp;<span class="ident" id="1377710">f</span>&nbsp;<span class="keyword" id="1377712">func</span><span class="op" id="1377716">(</span><span class="builtintype" id="1377717">rune</span><span class="op" id="1377721">)</span>&nbsp;<span class="builtintype" id="1377723">bool</span><span class="op" id="1377727">)</span>&nbsp;<span class="builtintype" id="1377729">string</span>&nbsp;<span class="op" id="1377736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377739">i</span>&nbsp;<span class="op" id="1377741">:=</span>&nbsp;<span class="ident" id="1377744">lastIndexFunc</span><span class="op" id="1377757">(</span><span class="ident" id="1377758">s</span><span class="op" id="1377759">,</span>&nbsp;<span class="ident" id="1377761">f</span><span class="op" id="1377762">,</span>&nbsp;<span class="builtintype" id="1377764">false</span><span class="op" id="1377769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377772">if</span>&nbsp;<span class="ident" id="1377775">i</span>&nbsp;<span class="op" id="1377777">&gt;=</span>&nbsp;<span class="num" id="1377780">0</span>&nbsp;<span class="op" id="1377782">&amp;&amp;</span>&nbsp;<span class="ident" id="1377785">s</span><span class="op" id="1377786">[</span><span class="ident" id="1377787">i</span><span class="op" id="1377788">]</span>&nbsp;<span class="op" id="1377790">&gt;=</span>&nbsp;<span class="ident" id="1377793">utf8</span><span class="op" id="1377797">.</span><span class="ident" id="1377798">RuneSelf</span>&nbsp;<span class="op" id="1377807">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377811">_</span><span class="op" id="1377812">,</span>&nbsp;<span class="ident" id="1377814">wid</span>&nbsp;<span class="op" id="1377818">:=</span>&nbsp;<span class="ident" id="1377821">utf8</span><span class="op" id="1377825">.</span><span class="ident" id="1377826">DecodeRuneInString</span><span class="op" id="1377844">(</span><span class="ident" id="1377845">s</span><span class="op" id="1377846">[</span><span class="ident" id="1377847">i</span><span class="op" id="1377848">:</span><span class="op" id="1377849">]</span><span class="op" id="1377850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377854">i</span>&nbsp;<span class="op" id="1377856">+=</span>&nbsp;<span class="ident" id="1377859">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377864">}</span>&nbsp;<span class="keyword" id="1377866">else</span>&nbsp;<span class="op" id="1377871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377875">i</span><span class="op" id="1377876">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377880">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377883">return</span>&nbsp;<span class="ident" id="1377890">s</span><span class="op" id="1377891">[</span><span class="num" id="1377892">0</span><span class="op" id="1377893">:</span><span class="ident" id="1377894">i</span><span class="op" id="1377895">]</span><br>
<span class="lineno"></span><span class="op" id="1377897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1377900">//&nbsp;TrimFunc&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="1377961">//&nbsp;and&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;c&nbsp;satisfying&nbsp;f(c)&nbsp;removed.</span><br>
<span class="lineno">565</span><span class="keyword" id="1378024">func</span>&nbsp;<span class="ident" id="1378029">TrimFunc</span><span class="op" id="1378037">(</span><span class="ident" id="1378038">s</span>&nbsp;<span class="builtintype" id="1378040">string</span><span class="op" id="1378046">,</span>&nbsp;<span class="ident" id="1378048">f</span>&nbsp;<span class="keyword" id="1378050">func</span><span class="op" id="1378054">(</span><span class="builtintype" id="1378055">rune</span><span class="op" id="1378059">)</span>&nbsp;<span class="builtintype" id="1378061">bool</span><span class="op" id="1378065">)</span>&nbsp;<span class="builtintype" id="1378067">string</span>&nbsp;<span class="op" id="1378074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378077">return</span>&nbsp;<span class="ident" id="1378084">TrimRightFunc</span><span class="op" id="1378097">(</span><span class="ident" id="1378098">TrimLeftFunc</span><span class="op" id="1378110">(</span><span class="ident" id="1378111">s</span><span class="op" id="1378112">,</span>&nbsp;<span class="ident" id="1378114">f</span><span class="op" id="1378115">)</span><span class="op" id="1378116">,</span>&nbsp;<span class="ident" id="1378118">f</span><span class="op" id="1378119">)</span><br>
<span class="lineno"></span><span class="op" id="1378121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1378124">//&nbsp;IndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;first&nbsp;Unicode</span><br>
<span class="lineno">570</span><span class="comment" id="1378183">//&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="1378232">func</span>&nbsp;<span class="ident" id="1378237">IndexFunc</span><span class="op" id="1378246">(</span><span class="ident" id="1378247">s</span>&nbsp;<span class="builtintype" id="1378249">string</span><span class="op" id="1378255">,</span>&nbsp;<span class="ident" id="1378257">f</span>&nbsp;<span class="keyword" id="1378259">func</span><span class="op" id="1378263">(</span><span class="builtintype" id="1378264">rune</span><span class="op" id="1378268">)</span>&nbsp;<span class="builtintype" id="1378270">bool</span><span class="op" id="1378274">)</span>&nbsp;<span class="builtintype" id="1378276">int</span>&nbsp;<span class="op" id="1378280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378283">return</span>&nbsp;<span class="ident" id="1378290">indexFunc</span><span class="op" id="1378299">(</span><span class="ident" id="1378300">s</span><span class="op" id="1378301">,</span>&nbsp;<span class="ident" id="1378303">f</span><span class="op" id="1378304">,</span>&nbsp;<span class="builtintype" id="1378306">true</span><span class="op" id="1378310">)</span><br>
<span class="lineno"></span><span class="op" id="1378312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="1378315">//&nbsp;LastIndexFunc&nbsp;returns&nbsp;the&nbsp;index&nbsp;into&nbsp;s&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span><span class="comment" id="1378369">//&nbsp;Unicode&nbsp;code&nbsp;point&nbsp;satisfying&nbsp;f(c),&nbsp;or&nbsp;-1&nbsp;if&nbsp;none&nbsp;do.</span><br>
<span class="lineno"></span><span class="keyword" id="1378426">func</span>&nbsp;<span class="ident" id="1378431">LastIndexFunc</span><span class="op" id="1378444">(</span><span class="ident" id="1378445">s</span>&nbsp;<span class="builtintype" id="1378447">string</span><span class="op" id="1378453">,</span>&nbsp;<span class="ident" id="1378455">f</span>&nbsp;<span class="keyword" id="1378457">func</span><span class="op" id="1378461">(</span><span class="builtintype" id="1378462">rune</span><span class="op" id="1378466">)</span>&nbsp;<span class="builtintype" id="1378468">bool</span><span class="op" id="1378472">)</span>&nbsp;<span class="builtintype" id="1378474">int</span>&nbsp;<span class="op" id="1378478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378481">return</span>&nbsp;<span class="ident" id="1378488">lastIndexFunc</span><span class="op" id="1378501">(</span><span class="ident" id="1378502">s</span><span class="op" id="1378503">,</span>&nbsp;<span class="ident" id="1378505">f</span><span class="op" id="1378506">,</span>&nbsp;<span class="builtintype" id="1378508">true</span><span class="op" id="1378512">)</span><br>
<span class="lineno"></span><span class="op" id="1378514">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="1378517">//&nbsp;indexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;IndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1378570">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1378626">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="1378639">func</span>&nbsp;<span class="ident" id="1378644">indexFunc</span><span class="op" id="1378653">(</span><span class="ident" id="1378654">s</span>&nbsp;<span class="builtintype" id="1378656">string</span><span class="op" id="1378662">,</span>&nbsp;<span class="ident" id="1378664">f</span>&nbsp;<span class="keyword" id="1378666">func</span><span class="op" id="1378670">(</span><span class="builtintype" id="1378671">rune</span><span class="op" id="1378675">)</span>&nbsp;<span class="builtintype" id="1378677">bool</span><span class="op" id="1378681">,</span>&nbsp;<span class="ident" id="1378683">truth</span>&nbsp;<span class="builtintype" id="1378689">bool</span><span class="op" id="1378693">)</span>&nbsp;<span class="builtintype" id="1378695">int</span>&nbsp;<span class="op" id="1378699">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378702">start</span>&nbsp;<span class="op" id="1378708">:=</span>&nbsp;<span class="num" id="1378711">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378714">for</span>&nbsp;<span class="ident" id="1378718">start</span>&nbsp;<span class="op" id="1378724">&lt;</span>&nbsp;<span class="builtinfunc" id="1378726">len</span><span class="op" id="1378729">(</span><span class="ident" id="1378730">s</span><span class="op" id="1378731">)</span>&nbsp;<span class="op" id="1378733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378737">wid</span>&nbsp;<span class="op" id="1378741">:=</span>&nbsp;<span class="num" id="1378744">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378748">r</span>&nbsp;<span class="op" id="1378750">:=</span>&nbsp;<span class="builtintype" id="1378753">rune</span><span class="op" id="1378757">(</span><span class="ident" id="1378758">s</span><span class="op" id="1378759">[</span><span class="ident" id="1378760">start</span><span class="op" id="1378765">]</span><span class="op" id="1378766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378770">if</span>&nbsp;<span class="ident" id="1378773">r</span>&nbsp;<span class="op" id="1378775">&gt;=</span>&nbsp;<span class="ident" id="1378778">utf8</span><span class="op" id="1378782">.</span><span class="ident" id="1378783">RuneSelf</span>&nbsp;<span class="op" id="1378792">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378797">r</span><span class="op" id="1378798">,</span>&nbsp;<span class="ident" id="1378800">wid</span>&nbsp;<span class="op" id="1378804">=</span>&nbsp;<span class="ident" id="1378806">utf8</span><span class="op" id="1378810">.</span><span class="ident" id="1378811">DecodeRuneInString</span><span class="op" id="1378829">(</span><span class="ident" id="1378830">s</span><span class="op" id="1378831">[</span><span class="ident" id="1378832">start</span><span class="op" id="1378837">:</span><span class="op" id="1378838">]</span><span class="op" id="1378839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378847">if</span>&nbsp;<span class="ident" id="1378850">f</span><span class="op" id="1378851">(</span><span class="ident" id="1378852">r</span><span class="op" id="1378853">)</span>&nbsp;<span class="op" id="1378855">==</span>&nbsp;<span class="ident" id="1378858">truth</span>&nbsp;<span class="op" id="1378864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378869">return</span>&nbsp;<span class="ident" id="1378876">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378884">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378888">start</span>&nbsp;<span class="op" id="1378894">+=</span>&nbsp;<span class="ident" id="1378897">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378905">return</span>&nbsp;<span class="op" id="1378912">-</span><span class="num" id="1378913">1</span><br>
<span class="lineno"></span><span class="op" id="1378915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="1378918">//&nbsp;lastIndexFunc&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;LastIndexFunc&nbsp;except&nbsp;that&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1378979">//&nbsp;truth==false,&nbsp;the&nbsp;sense&nbsp;of&nbsp;the&nbsp;predicate&nbsp;function&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1379035">//&nbsp;inverted.</span><br>
<span class="lineno"></span><span class="keyword" id="1379048">func</span>&nbsp;<span class="ident" id="1379053">lastIndexFunc</span><span class="op" id="1379066">(</span><span class="ident" id="1379067">s</span>&nbsp;<span class="builtintype" id="1379069">string</span><span class="op" id="1379075">,</span>&nbsp;<span class="ident" id="1379077">f</span>&nbsp;<span class="keyword" id="1379079">func</span><span class="op" id="1379083">(</span><span class="builtintype" id="1379084">rune</span><span class="op" id="1379088">)</span>&nbsp;<span class="builtintype" id="1379090">bool</span><span class="op" id="1379094">,</span>&nbsp;<span class="ident" id="1379096">truth</span>&nbsp;<span class="builtintype" id="1379102">bool</span><span class="op" id="1379106">)</span>&nbsp;<span class="builtintype" id="1379108">int</span>&nbsp;<span class="op" id="1379112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379115">for</span>&nbsp;<span class="ident" id="1379119">i</span>&nbsp;<span class="op" id="1379121">:=</span>&nbsp;<span class="builtinfunc" id="1379124">len</span><span class="op" id="1379127">(</span><span class="ident" id="1379128">s</span><span class="op" id="1379129">)</span><span class="op" id="1379130">;</span>&nbsp;<span class="ident" id="1379132">i</span>&nbsp;<span class="op" id="1379134">&gt;</span>&nbsp;<span class="num" id="1379136">0</span><span class="op" id="1379137">;</span>&nbsp;<span class="op" id="1379139">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1379143">r</span><span class="op" id="1379144">,</span>&nbsp;<span class="ident" id="1379146">size</span>&nbsp;<span class="op" id="1379151">:=</span>&nbsp;<span class="ident" id="1379154">utf8</span><span class="op" id="1379158">.</span><span class="ident" id="1379159">DecodeLastRuneInString</span><span class="op" id="1379181">(</span><span class="ident" id="1379182">s</span><span class="op" id="1379183">[</span><span class="num" id="1379184">0</span><span class="op" id="1379185">:</span><span class="ident" id="1379186">i</span><span class="op" id="1379187">]</span><span class="op" id="1379188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1379192">i</span>&nbsp;<span class="op" id="1379194">-=</span>&nbsp;<span class="ident" id="1379197">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379204">if</span>&nbsp;<span class="ident" id="1379207">f</span><span class="op" id="1379208">(</span><span class="ident" id="1379209">r</span><span class="op" id="1379210">)</span>&nbsp;<span class="op" id="1379212">==</span>&nbsp;<span class="ident" id="1379215">truth</span>&nbsp;<span class="op" id="1379221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379226">return</span>&nbsp;<span class="ident" id="1379233">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379237">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379243">return</span>&nbsp;<span class="op" id="1379250">-</span><span class="num" id="1379251">1</span><br>
<span class="lineno"></span><span class="op" id="1379253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1379256">func</span>&nbsp;<span class="ident" id="1379261">makeCutsetFunc</span><span class="op" id="1379275">(</span><span class="ident" id="1379276">cutset</span>&nbsp;<span class="builtintype" id="1379283">string</span><span class="op" id="1379289">)</span>&nbsp;<span class="keyword" id="1379291">func</span><span class="op" id="1379295">(</span><span class="builtintype" id="1379296">rune</span><span class="op" id="1379300">)</span>&nbsp;<span class="builtintype" id="1379302">bool</span>&nbsp;<span class="op" id="1379307">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379310">return</span>&nbsp;<span class="keyword" id="1379317">func</span><span class="op" id="1379321">(</span><span class="ident" id="1379322">r</span>&nbsp;<span class="builtintype" id="1379324">rune</span><span class="op" id="1379328">)</span>&nbsp;<span class="builtintype" id="1379330">bool</span>&nbsp;<span class="op" id="1379335">{</span>&nbsp;<span class="keyword" id="1379337">return</span>&nbsp;<span class="ident" id="1379344">IndexRune</span><span class="op" id="1379353">(</span><span class="ident" id="1379354">cutset</span><span class="op" id="1379360">,</span>&nbsp;<span class="ident" id="1379362">r</span><span class="op" id="1379363">)</span>&nbsp;<span class="op" id="1379365">&gt;=</span>&nbsp;<span class="num" id="1379368">0</span>&nbsp;<span class="op" id="1379370">}</span><br>
<span class="lineno"></span><span class="op" id="1379372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1379375">//&nbsp;Trim&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1379436">//&nbsp;trailing&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno">620</span><span class="keyword" id="1379497">func</span>&nbsp;<span class="ident" id="1379502">Trim</span><span class="op" id="1379506">(</span><span class="ident" id="1379507">s</span>&nbsp;<span class="builtintype" id="1379509">string</span><span class="op" id="1379515">,</span>&nbsp;<span class="ident" id="1379517">cutset</span>&nbsp;<span class="builtintype" id="1379524">string</span><span class="op" id="1379530">)</span>&nbsp;<span class="builtintype" id="1379532">string</span>&nbsp;<span class="op" id="1379539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379542">if</span>&nbsp;<span class="ident" id="1379545">s</span>&nbsp;<span class="op" id="1379547">==</span>&nbsp;<span class="string" id="1379550">&#34;&#34;</span>&nbsp;<span class="op" id="1379553">||</span>&nbsp;<span class="ident" id="1379556">cutset</span>&nbsp;<span class="op" id="1379563">==</span>&nbsp;<span class="string" id="1379566">&#34;&#34;</span>&nbsp;<span class="op" id="1379569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379573">return</span>&nbsp;<span class="ident" id="1379580">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379586">return</span>&nbsp;<span class="ident" id="1379593">TrimFunc</span><span class="op" id="1379601">(</span><span class="ident" id="1379602">s</span><span class="op" id="1379603">,</span>&nbsp;<span class="ident" id="1379605">makeCutsetFunc</span><span class="op" id="1379619">(</span><span class="ident" id="1379620">cutset</span><span class="op" id="1379626">)</span><span class="op" id="1379627">)</span><br>
<span class="lineno">625</span><span class="op" id="1379629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1379632">//&nbsp;TrimLeft&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="1379693">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="1379745">func</span>&nbsp;<span class="ident" id="1379750">TrimLeft</span><span class="op" id="1379758">(</span><span class="ident" id="1379759">s</span>&nbsp;<span class="builtintype" id="1379761">string</span><span class="op" id="1379767">,</span>&nbsp;<span class="ident" id="1379769">cutset</span>&nbsp;<span class="builtintype" id="1379776">string</span><span class="op" id="1379782">)</span>&nbsp;<span class="builtintype" id="1379784">string</span>&nbsp;<span class="op" id="1379791">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379794">if</span>&nbsp;<span class="ident" id="1379797">s</span>&nbsp;<span class="op" id="1379799">==</span>&nbsp;<span class="string" id="1379802">&#34;&#34;</span>&nbsp;<span class="op" id="1379805">||</span>&nbsp;<span class="ident" id="1379808">cutset</span>&nbsp;<span class="op" id="1379815">==</span>&nbsp;<span class="string" id="1379818">&#34;&#34;</span>&nbsp;<span class="op" id="1379821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379825">return</span>&nbsp;<span class="ident" id="1379832">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379838">return</span>&nbsp;<span class="ident" id="1379845">TrimLeftFunc</span><span class="op" id="1379857">(</span><span class="ident" id="1379858">s</span><span class="op" id="1379859">,</span>&nbsp;<span class="ident" id="1379861">makeCutsetFunc</span><span class="op" id="1379875">(</span><span class="ident" id="1379876">cutset</span><span class="op" id="1379882">)</span><span class="op" id="1379883">)</span><br>
<span class="lineno"></span><span class="op" id="1379885">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="1379888">//&nbsp;TrimRight&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="1379952">//&nbsp;Unicode&nbsp;code&nbsp;points&nbsp;contained&nbsp;in&nbsp;cutset&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="1380004">func</span>&nbsp;<span class="ident" id="1380009">TrimRight</span><span class="op" id="1380018">(</span><span class="ident" id="1380019">s</span>&nbsp;<span class="builtintype" id="1380021">string</span><span class="op" id="1380027">,</span>&nbsp;<span class="ident" id="1380029">cutset</span>&nbsp;<span class="builtintype" id="1380036">string</span><span class="op" id="1380042">)</span>&nbsp;<span class="builtintype" id="1380044">string</span>&nbsp;<span class="op" id="1380051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380054">if</span>&nbsp;<span class="ident" id="1380057">s</span>&nbsp;<span class="op" id="1380059">==</span>&nbsp;<span class="string" id="1380062">&#34;&#34;</span>&nbsp;<span class="op" id="1380065">||</span>&nbsp;<span class="ident" id="1380068">cutset</span>&nbsp;<span class="op" id="1380075">==</span>&nbsp;<span class="string" id="1380078">&#34;&#34;</span>&nbsp;<span class="op" id="1380081">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380085">return</span>&nbsp;<span class="ident" id="1380092">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1380095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380098">return</span>&nbsp;<span class="ident" id="1380105">TrimRightFunc</span><span class="op" id="1380118">(</span><span class="ident" id="1380119">s</span><span class="op" id="1380120">,</span>&nbsp;<span class="ident" id="1380122">makeCutsetFunc</span><span class="op" id="1380136">(</span><span class="ident" id="1380137">cutset</span><span class="op" id="1380143">)</span><span class="op" id="1380144">)</span><br>
<span class="lineno"></span><span class="op" id="1380146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="1380149">//&nbsp;TrimSpace&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;string&nbsp;s,&nbsp;with&nbsp;all&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="1380212">//&nbsp;and&nbsp;trailing&nbsp;white&nbsp;space&nbsp;removed,&nbsp;as&nbsp;defined&nbsp;by&nbsp;Unicode.</span><br>
<span class="lineno"></span><span class="keyword" id="1380272">func</span>&nbsp;<span class="ident" id="1380277">TrimSpace</span><span class="op" id="1380286">(</span><span class="ident" id="1380287">s</span>&nbsp;<span class="builtintype" id="1380289">string</span><span class="op" id="1380295">)</span>&nbsp;<span class="builtintype" id="1380297">string</span>&nbsp;<span class="op" id="1380304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380307">return</span>&nbsp;<span class="ident" id="1380314">TrimFunc</span><span class="op" id="1380322">(</span><span class="ident" id="1380323">s</span><span class="op" id="1380324">,</span>&nbsp;<span class="ident" id="1380326">unicode</span><span class="op" id="1380333">.</span><span class="ident" id="1380334">IsSpace</span><span class="op" id="1380341">)</span><br>
<span class="lineno"></span><span class="op" id="1380343">}</span><br>
<span class="lineno">650</span><br>
<span class="lineno"></span><span class="comment" id="1380346">//&nbsp;TrimPrefix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;leading&nbsp;prefix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1380414">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;start&nbsp;with&nbsp;prefix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="1380474">func</span>&nbsp;<span class="ident" id="1380479">TrimPrefix</span><span class="op" id="1380489">(</span><span class="ident" id="1380490">s</span><span class="op" id="1380491">,</span>&nbsp;<span class="ident" id="1380493">prefix</span>&nbsp;<span class="builtintype" id="1380500">string</span><span class="op" id="1380506">)</span>&nbsp;<span class="builtintype" id="1380508">string</span>&nbsp;<span class="op" id="1380515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380518">if</span>&nbsp;<span class="ident" id="1380521">HasPrefix</span><span class="op" id="1380530">(</span><span class="ident" id="1380531">s</span><span class="op" id="1380532">,</span>&nbsp;<span class="ident" id="1380534">prefix</span><span class="op" id="1380540">)</span>&nbsp;<span class="op" id="1380542">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380546">return</span>&nbsp;<span class="ident" id="1380553">s</span><span class="op" id="1380554">[</span><span class="builtinfunc" id="1380555">len</span><span class="op" id="1380558">(</span><span class="ident" id="1380559">prefix</span><span class="op" id="1380565">)</span><span class="op" id="1380566">:</span><span class="op" id="1380567">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1380570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380573">return</span>&nbsp;<span class="ident" id="1380580">s</span><br>
<span class="lineno"></span><span class="op" id="1380582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="comment" id="1380585">//&nbsp;TrimSuffix&nbsp;returns&nbsp;s&nbsp;without&nbsp;the&nbsp;provided&nbsp;trailing&nbsp;suffix&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1380654">//&nbsp;If&nbsp;s&nbsp;doesn&#39;t&nbsp;end&nbsp;with&nbsp;suffix,&nbsp;s&nbsp;is&nbsp;returned&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="1380712">func</span>&nbsp;<span class="ident" id="1380717">TrimSuffix</span><span class="op" id="1380727">(</span><span class="ident" id="1380728">s</span><span class="op" id="1380729">,</span>&nbsp;<span class="ident" id="1380731">suffix</span>&nbsp;<span class="builtintype" id="1380738">string</span><span class="op" id="1380744">)</span>&nbsp;<span class="builtintype" id="1380746">string</span>&nbsp;<span class="op" id="1380753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380756">if</span>&nbsp;<span class="ident" id="1380759">HasSuffix</span><span class="op" id="1380768">(</span><span class="ident" id="1380769">s</span><span class="op" id="1380770">,</span>&nbsp;<span class="ident" id="1380772">suffix</span><span class="op" id="1380778">)</span>&nbsp;<span class="op" id="1380780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380784">return</span>&nbsp;<span class="ident" id="1380791">s</span><span class="op" id="1380792">[</span><span class="op" id="1380793">:</span><span class="builtinfunc" id="1380794">len</span><span class="op" id="1380797">(</span><span class="ident" id="1380798">s</span><span class="op" id="1380799">)</span><span class="op" id="1380800">-</span><span class="builtinfunc" id="1380801">len</span><span class="op" id="1380804">(</span><span class="ident" id="1380805">suffix</span><span class="op" id="1380811">)</span><span class="op" id="1380812">]</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1380815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380818">return</span>&nbsp;<span class="ident" id="1380825">s</span><br>
<span class="lineno"></span><span class="op" id="1380827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1380830">//&nbsp;Replace&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;with&nbsp;the&nbsp;first&nbsp;n</span><br>
<span class="lineno">670</span><span class="comment" id="1380889">//&nbsp;non-overlapping&nbsp;instances&nbsp;of&nbsp;old&nbsp;replaced&nbsp;by&nbsp;new.</span><br>
<span class="lineno"></span><span class="comment" id="1380942">//&nbsp;If&nbsp;old&nbsp;is&nbsp;empty,&nbsp;it&nbsp;matches&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="1381004">//&nbsp;and&nbsp;after&nbsp;each&nbsp;UTF-8&nbsp;sequence,&nbsp;yielding&nbsp;up&nbsp;to&nbsp;k+1&nbsp;replacements</span><br>
<span class="lineno"></span><span class="comment" id="1381070">//&nbsp;for&nbsp;a&nbsp;k-rune&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1381094">//&nbsp;If&nbsp;n&nbsp;&lt;&nbsp;0,&nbsp;there&nbsp;is&nbsp;no&nbsp;limit&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno">675</span><span class="keyword" id="1381156">func</span>&nbsp;<span class="ident" id="1381161">Replace</span><span class="op" id="1381168">(</span><span class="ident" id="1381169">s</span><span class="op" id="1381170">,</span>&nbsp;<span class="ident" id="1381172">old</span><span class="op" id="1381175">,</span>&nbsp;<span class="builtinfunc" id="1381177">new</span>&nbsp;<span class="builtintype" id="1381181">string</span><span class="op" id="1381187">,</span>&nbsp;<span class="ident" id="1381189">n</span>&nbsp;<span class="builtintype" id="1381191">int</span><span class="op" id="1381194">)</span>&nbsp;<span class="builtintype" id="1381196">string</span>&nbsp;<span class="op" id="1381203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381206">if</span>&nbsp;<span class="ident" id="1381209">old</span>&nbsp;<span class="op" id="1381213">==</span>&nbsp;<span class="builtinfunc" id="1381216">new</span>&nbsp;<span class="op" id="1381220">||</span>&nbsp;<span class="ident" id="1381223">n</span>&nbsp;<span class="op" id="1381225">==</span>&nbsp;<span class="num" id="1381228">0</span>&nbsp;<span class="op" id="1381230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381234">return</span>&nbsp;<span class="ident" id="1381241">s</span>&nbsp;<span class="comment" id="1381243">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381268">//&nbsp;Compute&nbsp;number&nbsp;of&nbsp;replacements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381304">if</span>&nbsp;<span class="ident" id="1381307">m</span>&nbsp;<span class="op" id="1381309">:=</span>&nbsp;<span class="ident" id="1381312">Count</span><span class="op" id="1381317">(</span><span class="ident" id="1381318">s</span><span class="op" id="1381319">,</span>&nbsp;<span class="ident" id="1381321">old</span><span class="op" id="1381324">)</span><span class="op" id="1381325">;</span>&nbsp;<span class="ident" id="1381327">m</span>&nbsp;<span class="op" id="1381329">==</span>&nbsp;<span class="num" id="1381332">0</span>&nbsp;<span class="op" id="1381334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381338">return</span>&nbsp;<span class="ident" id="1381345">s</span>&nbsp;<span class="comment" id="1381347">//&nbsp;avoid&nbsp;allocation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381368">}</span>&nbsp;<span class="keyword" id="1381370">else</span>&nbsp;<span class="keyword" id="1381375">if</span>&nbsp;<span class="ident" id="1381378">n</span>&nbsp;<span class="op" id="1381380">&lt;</span>&nbsp;<span class="num" id="1381382">0</span>&nbsp;<span class="op" id="1381384">||</span>&nbsp;<span class="ident" id="1381387">m</span>&nbsp;<span class="op" id="1381389">&lt;</span>&nbsp;<span class="ident" id="1381391">n</span>&nbsp;<span class="op" id="1381393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381397">n</span>&nbsp;<span class="op" id="1381399">=</span>&nbsp;<span class="ident" id="1381401">m</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381408">//&nbsp;Apply&nbsp;replacements&nbsp;to&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381442">t</span>&nbsp;<span class="op" id="1381444">:=</span>&nbsp;<span class="builtinfunc" id="1381447">make</span><span class="op" id="1381451">(</span><span class="op" id="1381452">[</span><span class="op" id="1381453">]</span><span class="builtintype" id="1381454">byte</span><span class="op" id="1381458">,</span>&nbsp;<span class="builtinfunc" id="1381460">len</span><span class="op" id="1381463">(</span><span class="ident" id="1381464">s</span><span class="op" id="1381465">)</span><span class="op" id="1381466">+</span><span class="ident" id="1381467">n</span><span class="op" id="1381468">*</span><span class="op" id="1381469">(</span><span class="builtinfunc" id="1381470">len</span><span class="op" id="1381473">(</span><span class="builtinfunc" id="1381474">new</span><span class="op" id="1381477">)</span><span class="op" id="1381478">-</span><span class="builtinfunc" id="1381479">len</span><span class="op" id="1381482">(</span><span class="ident" id="1381483">old</span><span class="op" id="1381486">)</span><span class="op" id="1381487">)</span><span class="op" id="1381488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381491">w</span>&nbsp;<span class="op" id="1381493">:=</span>&nbsp;<span class="num" id="1381496">0</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381499">start</span>&nbsp;<span class="op" id="1381505">:=</span>&nbsp;<span class="num" id="1381508">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381511">for</span>&nbsp;<span class="ident" id="1381515">i</span>&nbsp;<span class="op" id="1381517">:=</span>&nbsp;<span class="num" id="1381520">0</span><span class="op" id="1381521">;</span>&nbsp;<span class="ident" id="1381523">i</span>&nbsp;<span class="op" id="1381525">&lt;</span>&nbsp;<span class="ident" id="1381527">n</span><span class="op" id="1381528">;</span>&nbsp;<span class="ident" id="1381530">i</span><span class="op" id="1381531">++</span>&nbsp;<span class="op" id="1381534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381538">j</span>&nbsp;<span class="op" id="1381540">:=</span>&nbsp;<span class="ident" id="1381543">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381551">if</span>&nbsp;<span class="builtinfunc" id="1381554">len</span><span class="op" id="1381557">(</span><span class="ident" id="1381558">old</span><span class="op" id="1381561">)</span>&nbsp;<span class="op" id="1381563">==</span>&nbsp;<span class="num" id="1381566">0</span>&nbsp;<span class="op" id="1381568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381573">if</span>&nbsp;<span class="ident" id="1381576">i</span>&nbsp;<span class="op" id="1381578">&gt;</span>&nbsp;<span class="num" id="1381580">0</span>&nbsp;<span class="op" id="1381582">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381588">_</span><span class="op" id="1381589">,</span>&nbsp;<span class="ident" id="1381591">wid</span>&nbsp;<span class="op" id="1381595">:=</span>&nbsp;<span class="ident" id="1381598">utf8</span><span class="op" id="1381602">.</span><span class="ident" id="1381603">DecodeRuneInString</span><span class="op" id="1381621">(</span><span class="ident" id="1381622">s</span><span class="op" id="1381623">[</span><span class="ident" id="1381624">start</span><span class="op" id="1381629">:</span><span class="op" id="1381630">]</span><span class="op" id="1381631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381637">j</span>&nbsp;<span class="op" id="1381639">+=</span>&nbsp;<span class="ident" id="1381642">wid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381653">}</span>&nbsp;<span class="keyword" id="1381655">else</span>&nbsp;<span class="op" id="1381660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381665">j</span>&nbsp;<span class="op" id="1381667">+=</span>&nbsp;<span class="ident" id="1381670">Index</span><span class="op" id="1381675">(</span><span class="ident" id="1381676">s</span><span class="op" id="1381677">[</span><span class="ident" id="1381678">start</span><span class="op" id="1381683">:</span><span class="op" id="1381684">]</span><span class="op" id="1381685">,</span>&nbsp;<span class="ident" id="1381687">old</span><span class="op" id="1381690">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381698">w</span>&nbsp;<span class="op" id="1381700">+=</span>&nbsp;<span class="builtinfunc" id="1381703">copy</span><span class="op" id="1381707">(</span><span class="ident" id="1381708">t</span><span class="op" id="1381709">[</span><span class="ident" id="1381710">w</span><span class="op" id="1381711">:</span><span class="op" id="1381712">]</span><span class="op" id="1381713">,</span>&nbsp;<span class="ident" id="1381715">s</span><span class="op" id="1381716">[</span><span class="ident" id="1381717">start</span><span class="op" id="1381722">:</span><span class="ident" id="1381723">j</span><span class="op" id="1381724">]</span><span class="op" id="1381725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381729">w</span>&nbsp;<span class="op" id="1381731">+=</span>&nbsp;<span class="builtinfunc" id="1381734">copy</span><span class="op" id="1381738">(</span><span class="ident" id="1381739">t</span><span class="op" id="1381740">[</span><span class="ident" id="1381741">w</span><span class="op" id="1381742">:</span><span class="op" id="1381743">]</span><span class="op" id="1381744">,</span>&nbsp;<span class="builtinfunc" id="1381746">new</span><span class="op" id="1381749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381753">start</span>&nbsp;<span class="op" id="1381759">=</span>&nbsp;<span class="ident" id="1381761">j</span>&nbsp;<span class="op" id="1381763">+</span>&nbsp;<span class="builtinfunc" id="1381765">len</span><span class="op" id="1381768">(</span><span class="ident" id="1381769">old</span><span class="op" id="1381772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381775">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1381778">w</span>&nbsp;<span class="op" id="1381780">+=</span>&nbsp;<span class="builtinfunc" id="1381783">copy</span><span class="op" id="1381787">(</span><span class="ident" id="1381788">t</span><span class="op" id="1381789">[</span><span class="ident" id="1381790">w</span><span class="op" id="1381791">:</span><span class="op" id="1381792">]</span><span class="op" id="1381793">,</span>&nbsp;<span class="ident" id="1381795">s</span><span class="op" id="1381796">[</span><span class="ident" id="1381797">start</span><span class="op" id="1381802">:</span><span class="op" id="1381803">]</span><span class="op" id="1381804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381807">return</span>&nbsp;<span class="builtintype" id="1381814">string</span><span class="op" id="1381820">(</span><span class="ident" id="1381821">t</span><span class="op" id="1381822">[</span><span class="num" id="1381823">0</span><span class="op" id="1381824">:</span><span class="ident" id="1381825">w</span><span class="op" id="1381826">]</span><span class="op" id="1381827">)</span><br>
<span class="lineno"></span><span class="op" id="1381829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1381832">//&nbsp;EqualFold&nbsp;reports&nbsp;whether&nbsp;s&nbsp;and&nbsp;t,&nbsp;interpreted&nbsp;as&nbsp;UTF-8&nbsp;strings,</span><br>
<span class="lineno">710</span><span class="comment" id="1381900">//&nbsp;are&nbsp;equal&nbsp;under&nbsp;Unicode&nbsp;case-folding.</span><br>
<span class="lineno"></span><span class="keyword" id="1381941">func</span>&nbsp;<span class="ident" id="1381946">EqualFold</span><span class="op" id="1381955">(</span><span class="ident" id="1381956">s</span><span class="op" id="1381957">,</span>&nbsp;<span class="ident" id="1381959">t</span>&nbsp;<span class="builtintype" id="1381961">string</span><span class="op" id="1381967">)</span>&nbsp;<span class="builtintype" id="1381969">bool</span>&nbsp;<span class="op" id="1381974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381977">for</span>&nbsp;<span class="ident" id="1381981">s</span>&nbsp;<span class="op" id="1381983">!=</span>&nbsp;<span class="string" id="1381986">&#34;&#34;</span>&nbsp;<span class="op" id="1381989">&amp;&amp;</span>&nbsp;<span class="ident" id="1381992">t</span>&nbsp;<span class="op" id="1381994">!=</span>&nbsp;<span class="string" id="1381997">&#34;&#34;</span>&nbsp;<span class="op" id="1382000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382004">//&nbsp;Extract&nbsp;first&nbsp;rune&nbsp;from&nbsp;each&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382046">var</span>&nbsp;<span class="ident" id="1382050">sr</span><span class="op" id="1382052">,</span>&nbsp;<span class="ident" id="1382054">tr</span>&nbsp;<span class="builtintype" id="1382057">rune</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382064">if</span>&nbsp;<span class="ident" id="1382067">s</span><span class="op" id="1382068">[</span><span class="num" id="1382069">0</span><span class="op" id="1382070">]</span>&nbsp;<span class="op" id="1382072">&lt;</span>&nbsp;<span class="ident" id="1382074">utf8</span><span class="op" id="1382078">.</span><span class="ident" id="1382079">RuneSelf</span>&nbsp;<span class="op" id="1382088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382093">sr</span><span class="op" id="1382095">,</span>&nbsp;<span class="ident" id="1382097">s</span>&nbsp;<span class="op" id="1382099">=</span>&nbsp;<span class="builtintype" id="1382101">rune</span><span class="op" id="1382105">(</span><span class="ident" id="1382106">s</span><span class="op" id="1382107">[</span><span class="num" id="1382108">0</span><span class="op" id="1382109">]</span><span class="op" id="1382110">)</span><span class="op" id="1382111">,</span>&nbsp;<span class="ident" id="1382113">s</span><span class="op" id="1382114">[</span><span class="num" id="1382115">1</span><span class="op" id="1382116">:</span><span class="op" id="1382117">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382121">}</span>&nbsp;<span class="keyword" id="1382123">else</span>&nbsp;<span class="op" id="1382128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382133">r</span><span class="op" id="1382134">,</span>&nbsp;<span class="ident" id="1382136">size</span>&nbsp;<span class="op" id="1382141">:=</span>&nbsp;<span class="ident" id="1382144">utf8</span><span class="op" id="1382148">.</span><span class="ident" id="1382149">DecodeRuneInString</span><span class="op" id="1382167">(</span><span class="ident" id="1382168">s</span><span class="op" id="1382169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382174">sr</span><span class="op" id="1382176">,</span>&nbsp;<span class="ident" id="1382178">s</span>&nbsp;<span class="op" id="1382180">=</span>&nbsp;<span class="ident" id="1382182">r</span><span class="op" id="1382183">,</span>&nbsp;<span class="ident" id="1382185">s</span><span class="op" id="1382186">[</span><span class="ident" id="1382187">size</span><span class="op" id="1382191">:</span><span class="op" id="1382192">]</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382200">if</span>&nbsp;<span class="ident" id="1382203">t</span><span class="op" id="1382204">[</span><span class="num" id="1382205">0</span><span class="op" id="1382206">]</span>&nbsp;<span class="op" id="1382208">&lt;</span>&nbsp;<span class="ident" id="1382210">utf8</span><span class="op" id="1382214">.</span><span class="ident" id="1382215">RuneSelf</span>&nbsp;<span class="op" id="1382224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382229">tr</span><span class="op" id="1382231">,</span>&nbsp;<span class="ident" id="1382233">t</span>&nbsp;<span class="op" id="1382235">=</span>&nbsp;<span class="builtintype" id="1382237">rune</span><span class="op" id="1382241">(</span><span class="ident" id="1382242">t</span><span class="op" id="1382243">[</span><span class="num" id="1382244">0</span><span class="op" id="1382245">]</span><span class="op" id="1382246">)</span><span class="op" id="1382247">,</span>&nbsp;<span class="ident" id="1382249">t</span><span class="op" id="1382250">[</span><span class="num" id="1382251">1</span><span class="op" id="1382252">:</span><span class="op" id="1382253">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382257">}</span>&nbsp;<span class="keyword" id="1382259">else</span>&nbsp;<span class="op" id="1382264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382269">r</span><span class="op" id="1382270">,</span>&nbsp;<span class="ident" id="1382272">size</span>&nbsp;<span class="op" id="1382277">:=</span>&nbsp;<span class="ident" id="1382280">utf8</span><span class="op" id="1382284">.</span><span class="ident" id="1382285">DecodeRuneInString</span><span class="op" id="1382303">(</span><span class="ident" id="1382304">t</span><span class="op" id="1382305">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382310">tr</span><span class="op" id="1382312">,</span>&nbsp;<span class="ident" id="1382314">t</span>&nbsp;<span class="op" id="1382316">=</span>&nbsp;<span class="ident" id="1382318">r</span><span class="op" id="1382319">,</span>&nbsp;<span class="ident" id="1382321">t</span><span class="op" id="1382322">[</span><span class="ident" id="1382323">size</span><span class="op" id="1382327">:</span><span class="op" id="1382328">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382337">//&nbsp;If&nbsp;they&nbsp;match,&nbsp;keep&nbsp;going;&nbsp;if&nbsp;not,&nbsp;return&nbsp;false.</span><br>
<span class="lineno"></span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382392">//&nbsp;Easy&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382408">if</span>&nbsp;<span class="ident" id="1382411">tr</span>&nbsp;<span class="op" id="1382414">==</span>&nbsp;<span class="ident" id="1382417">sr</span>&nbsp;<span class="op" id="1382420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382425">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382441">//&nbsp;Make&nbsp;sr&nbsp;&lt;&nbsp;tr&nbsp;to&nbsp;simplify&nbsp;what&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382485">if</span>&nbsp;<span class="ident" id="1382488">tr</span>&nbsp;<span class="op" id="1382491">&lt;</span>&nbsp;<span class="ident" id="1382493">sr</span>&nbsp;<span class="op" id="1382496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382501">tr</span><span class="op" id="1382503">,</span>&nbsp;<span class="ident" id="1382505">sr</span>&nbsp;<span class="op" id="1382508">=</span>&nbsp;<span class="ident" id="1382510">sr</span><span class="op" id="1382512">,</span>&nbsp;<span class="ident" id="1382514">tr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382523">//&nbsp;Fast&nbsp;check&nbsp;for&nbsp;ASCII.</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382550">if</span>&nbsp;<span class="ident" id="1382553">tr</span>&nbsp;<span class="op" id="1382556">&lt;</span>&nbsp;<span class="ident" id="1382558">utf8</span><span class="op" id="1382562">.</span><span class="ident" id="1382563">RuneSelf</span>&nbsp;<span class="op" id="1382572">&amp;&amp;</span>&nbsp;<span class="string" id="1382575">&#39;A&#39;</span>&nbsp;<span class="op" id="1382579">&lt;=</span>&nbsp;<span class="ident" id="1382582">sr</span>&nbsp;<span class="op" id="1382585">&amp;&amp;</span>&nbsp;<span class="ident" id="1382588">sr</span>&nbsp;<span class="op" id="1382591">&lt;=</span>&nbsp;<span class="string" id="1382594">&#39;Z&#39;</span>&nbsp;<span class="op" id="1382598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382603">//&nbsp;ASCII,&nbsp;and&nbsp;sr&nbsp;is&nbsp;upper&nbsp;case.&nbsp;&nbsp;tr&nbsp;must&nbsp;be&nbsp;lower&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382662">if</span>&nbsp;<span class="ident" id="1382665">tr</span>&nbsp;<span class="op" id="1382668">==</span>&nbsp;<span class="ident" id="1382671">sr</span><span class="op" id="1382673">+</span><span class="string" id="1382674">&#39;a&#39;</span><span class="op" id="1382677">-</span><span class="string" id="1382678">&#39;A&#39;</span>&nbsp;<span class="op" id="1382682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382688">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382700">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382705">return</span>&nbsp;<span class="builtintype" id="1382712">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382725">//&nbsp;General&nbsp;case.&nbsp;&nbsp;SimpleFold(x)&nbsp;returns&nbsp;the&nbsp;next&nbsp;equivalent&nbsp;rune&nbsp;&gt;&nbsp;x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382796">//&nbsp;or&nbsp;wraps&nbsp;around&nbsp;to&nbsp;smaller&nbsp;values.</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382836">r</span>&nbsp;<span class="op" id="1382838">:=</span>&nbsp;<span class="ident" id="1382841">unicode</span><span class="op" id="1382848">.</span><span class="ident" id="1382849">SimpleFold</span><span class="op" id="1382859">(</span><span class="ident" id="1382860">sr</span><span class="op" id="1382862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382866">for</span>&nbsp;<span class="ident" id="1382870">r</span>&nbsp;<span class="op" id="1382872">!=</span>&nbsp;<span class="ident" id="1382875">sr</span>&nbsp;<span class="op" id="1382878">&amp;&amp;</span>&nbsp;<span class="ident" id="1382881">r</span>&nbsp;<span class="op" id="1382883">&lt;</span>&nbsp;<span class="ident" id="1382885">tr</span>&nbsp;<span class="op" id="1382888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382893">r</span>&nbsp;<span class="op" id="1382895">=</span>&nbsp;<span class="ident" id="1382897">unicode</span><span class="op" id="1382904">.</span><span class="ident" id="1382905">SimpleFold</span><span class="op" id="1382915">(</span><span class="ident" id="1382916">r</span><span class="op" id="1382917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382925">if</span>&nbsp;<span class="ident" id="1382928">r</span>&nbsp;<span class="op" id="1382930">==</span>&nbsp;<span class="ident" id="1382933">tr</span>&nbsp;<span class="op" id="1382936">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382941">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382956">return</span>&nbsp;<span class="builtintype" id="1382963">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382974">//&nbsp;One&nbsp;string&nbsp;is&nbsp;empty.&nbsp;&nbsp;Are&nbsp;both?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1383010">return</span>&nbsp;<span class="ident" id="1383017">s</span>&nbsp;<span class="op" id="1383019">==</span>&nbsp;<span class="ident" id="1383022">t</span><br>
<span class="lineno"></span><span class="op" id="1383024">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
