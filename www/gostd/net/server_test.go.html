<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7951451">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7951506">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7951560">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7951611">package</span>&nbsp;<span class="ident" id="7951619">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7951624">import</span>&nbsp;<span class="op" id="7951631">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951634">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951642">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951648">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951654">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951665">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7951676">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7951683">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7951686">func</span>&nbsp;<span class="ident" id="7951691">skipServerTest</span><span class="op" id="7951705">(</span><span class="ident" id="7951706">net</span><span class="op" id="7951709">,</span>&nbsp;<span class="ident" id="7951711">unixsotype</span><span class="op" id="7951721">,</span>&nbsp;<span class="ident" id="7951723">addr</span>&nbsp;<span class="builtintype" id="7951728">string</span><span class="op" id="7951734">,</span>&nbsp;<span class="ident" id="7951736">ipv6</span><span class="op" id="7951740">,</span>&nbsp;<span class="ident" id="7951742">ipv4map</span><span class="op" id="7951749">,</span>&nbsp;<span class="ident" id="7951751">linuxOnly</span>&nbsp;<span class="builtintype" id="7951761">bool</span><span class="op" id="7951765">)</span>&nbsp;<span class="builtintype" id="7951767">bool</span>&nbsp;<span class="op" id="7951772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951775">switch</span>&nbsp;<span class="ident" id="7951782">runtime</span><span class="op" id="7951789">.</span><span class="ident" id="7951790">GOOS</span>&nbsp;<span class="op" id="7951795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951798">case</span>&nbsp;<span class="string" id="7951803">&#34;linux&#34;</span><span class="op" id="7951810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951813">case</span>&nbsp;<span class="string" id="7951818">&#34;nacl&#34;</span><span class="op" id="7951824">,</span>&nbsp;<span class="string" id="7951826">&#34;plan9&#34;</span><span class="op" id="7951833">,</span>&nbsp;<span class="string" id="7951835">&#34;windows&#34;</span><span class="op" id="7951844">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7951848">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951909">if</span>&nbsp;<span class="ident" id="7951912">net</span>&nbsp;<span class="op" id="7951916">==</span>&nbsp;<span class="ident" id="7951919">unixsotype</span>&nbsp;<span class="op" id="7951930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951935">return</span>&nbsp;<span class="builtintype" id="7951942">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7951949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951952">default</span><span class="op" id="7951959">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7951963">if</span>&nbsp;<span class="ident" id="7951966">net</span>&nbsp;<span class="op" id="7951970">==</span>&nbsp;<span class="ident" id="7951973">unixsotype</span>&nbsp;<span class="op" id="7951984">&amp;&amp;</span>&nbsp;<span class="ident" id="7951987">linuxOnly</span>&nbsp;<span class="op" id="7951997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952002">return</span>&nbsp;<span class="builtintype" id="7952009">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952022">switch</span>&nbsp;<span class="ident" id="7952029">addr</span>&nbsp;<span class="op" id="7952034">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952037">case</span>&nbsp;<span class="string" id="7952042">&#34;&#34;</span><span class="op" id="7952044">,</span>&nbsp;<span class="string" id="7952046">&#34;0.0.0.0&#34;</span><span class="op" id="7952055">,</span>&nbsp;<span class="string" id="7952057">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7952075">,</span>&nbsp;<span class="string" id="7952077">&#34;[::]&#34;</span><span class="op" id="7952083">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952087">if</span>&nbsp;<span class="ident" id="7952090">testing</span><span class="op" id="7952097">.</span><span class="ident" id="7952098">Short</span><span class="op" id="7952103">(</span><span class="op" id="7952104">)</span>&nbsp;<span class="op" id="7952106">||</span>&nbsp;<span class="op" id="7952109">!</span><span class="op" id="7952110">*</span><span class="ident" id="7952111">testExternal</span>&nbsp;<span class="op" id="7952124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952129">return</span>&nbsp;<span class="builtintype" id="7952136">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952146">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952149">if</span>&nbsp;<span class="ident" id="7952152">ipv6</span>&nbsp;<span class="op" id="7952157">&amp;&amp;</span>&nbsp;<span class="op" id="7952160">!</span><span class="ident" id="7952161">supportsIPv6</span>&nbsp;<span class="op" id="7952174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952178">return</span>&nbsp;<span class="builtintype" id="7952185">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952194">if</span>&nbsp;<span class="ident" id="7952197">ipv4map</span>&nbsp;<span class="op" id="7952205">&amp;&amp;</span>&nbsp;<span class="op" id="7952208">!</span><span class="ident" id="7952209">supportsIPv4map</span>&nbsp;<span class="op" id="7952225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952229">return</span>&nbsp;<span class="builtintype" id="7952236">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7952245">return</span>&nbsp;<span class="builtintype" id="7952252">false</span><br>
<span class="lineno"></span><span class="op" id="7952258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7952261">var</span>&nbsp;<span class="ident" id="7952265">streamConnServerTests</span>&nbsp;<span class="op" id="7952287">=</span>&nbsp;<span class="op" id="7952289">[</span><span class="op" id="7952290">]</span><span class="keyword" id="7952291">struct</span>&nbsp;<span class="op" id="7952298">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952301">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952311">string</span>&nbsp;<span class="comment" id="7952318">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952334">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952344">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952352">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952362">string</span>&nbsp;<span class="comment" id="7952369">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952385">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952395">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952403">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952413">bool</span>&nbsp;<span class="comment" id="7952418">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952459">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952469">bool</span>&nbsp;<span class="comment" id="7952474">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952520">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7952530">bool</span>&nbsp;<span class="comment" id="7952535">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7952560">linuxOnly</span>&nbsp;<span class="builtintype" id="7952570">bool</span>&nbsp;<span class="comment" id="7952575">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7952629">}</span><span class="op" id="7952630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952633">{</span><span class="ident" id="7952634">snet</span><span class="op" id="7952638">:</span>&nbsp;<span class="string" id="7952640">&#34;tcp&#34;</span><span class="op" id="7952645">,</span>&nbsp;<span class="ident" id="7952647">saddr</span><span class="op" id="7952652">:</span>&nbsp;<span class="string" id="7952654">&#34;&#34;</span><span class="op" id="7952656">,</span>&nbsp;<span class="ident" id="7952658">cnet</span><span class="op" id="7952662">:</span>&nbsp;<span class="string" id="7952664">&#34;tcp&#34;</span><span class="op" id="7952669">,</span>&nbsp;<span class="ident" id="7952671">caddr</span><span class="op" id="7952676">:</span>&nbsp;<span class="string" id="7952678">&#34;127.0.0.1&#34;</span><span class="op" id="7952689">}</span><span class="op" id="7952690">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952693">{</span><span class="ident" id="7952694">snet</span><span class="op" id="7952698">:</span>&nbsp;<span class="string" id="7952700">&#34;tcp&#34;</span><span class="op" id="7952705">,</span>&nbsp;<span class="ident" id="7952707">saddr</span><span class="op" id="7952712">:</span>&nbsp;<span class="string" id="7952714">&#34;0.0.0.0&#34;</span><span class="op" id="7952723">,</span>&nbsp;<span class="ident" id="7952725">cnet</span><span class="op" id="7952729">:</span>&nbsp;<span class="string" id="7952731">&#34;tcp&#34;</span><span class="op" id="7952736">,</span>&nbsp;<span class="ident" id="7952738">caddr</span><span class="op" id="7952743">:</span>&nbsp;<span class="string" id="7952745">&#34;127.0.0.1&#34;</span><span class="op" id="7952756">}</span><span class="op" id="7952757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952760">{</span><span class="ident" id="7952761">snet</span><span class="op" id="7952765">:</span>&nbsp;<span class="string" id="7952767">&#34;tcp&#34;</span><span class="op" id="7952772">,</span>&nbsp;<span class="ident" id="7952774">saddr</span><span class="op" id="7952779">:</span>&nbsp;<span class="string" id="7952781">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7952799">,</span>&nbsp;<span class="ident" id="7952801">cnet</span><span class="op" id="7952805">:</span>&nbsp;<span class="string" id="7952807">&#34;tcp&#34;</span><span class="op" id="7952812">,</span>&nbsp;<span class="ident" id="7952814">caddr</span><span class="op" id="7952819">:</span>&nbsp;<span class="string" id="7952821">&#34;127.0.0.1&#34;</span><span class="op" id="7952832">}</span><span class="op" id="7952833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952836">{</span><span class="ident" id="7952837">snet</span><span class="op" id="7952841">:</span>&nbsp;<span class="string" id="7952843">&#34;tcp&#34;</span><span class="op" id="7952848">,</span>&nbsp;<span class="ident" id="7952850">saddr</span><span class="op" id="7952855">:</span>&nbsp;<span class="string" id="7952857">&#34;[::]&#34;</span><span class="op" id="7952863">,</span>&nbsp;<span class="ident" id="7952865">cnet</span><span class="op" id="7952869">:</span>&nbsp;<span class="string" id="7952871">&#34;tcp&#34;</span><span class="op" id="7952876">,</span>&nbsp;<span class="ident" id="7952878">caddr</span><span class="op" id="7952883">:</span>&nbsp;<span class="string" id="7952885">&#34;[::1]&#34;</span><span class="op" id="7952892">,</span>&nbsp;<span class="ident" id="7952894">ipv6</span><span class="op" id="7952898">:</span>&nbsp;<span class="builtintype" id="7952900">true</span><span class="op" id="7952904">}</span><span class="op" id="7952905">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952909">{</span><span class="ident" id="7952910">snet</span><span class="op" id="7952914">:</span>&nbsp;<span class="string" id="7952916">&#34;tcp&#34;</span><span class="op" id="7952921">,</span>&nbsp;<span class="ident" id="7952923">saddr</span><span class="op" id="7952928">:</span>&nbsp;<span class="string" id="7952930">&#34;&#34;</span><span class="op" id="7952932">,</span>&nbsp;<span class="ident" id="7952934">cnet</span><span class="op" id="7952938">:</span>&nbsp;<span class="string" id="7952940">&#34;tcp&#34;</span><span class="op" id="7952945">,</span>&nbsp;<span class="ident" id="7952947">caddr</span><span class="op" id="7952952">:</span>&nbsp;<span class="string" id="7952954">&#34;[::1]&#34;</span><span class="op" id="7952961">,</span>&nbsp;<span class="ident" id="7952963">ipv4map</span><span class="op" id="7952970">:</span>&nbsp;<span class="builtintype" id="7952972">true</span><span class="op" id="7952976">}</span><span class="op" id="7952977">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7952980">{</span><span class="ident" id="7952981">snet</span><span class="op" id="7952985">:</span>&nbsp;<span class="string" id="7952987">&#34;tcp&#34;</span><span class="op" id="7952992">,</span>&nbsp;<span class="ident" id="7952994">saddr</span><span class="op" id="7952999">:</span>&nbsp;<span class="string" id="7953001">&#34;0.0.0.0&#34;</span><span class="op" id="7953010">,</span>&nbsp;<span class="ident" id="7953012">cnet</span><span class="op" id="7953016">:</span>&nbsp;<span class="string" id="7953018">&#34;tcp&#34;</span><span class="op" id="7953023">,</span>&nbsp;<span class="ident" id="7953025">caddr</span><span class="op" id="7953030">:</span>&nbsp;<span class="string" id="7953032">&#34;[::1]&#34;</span><span class="op" id="7953039">,</span>&nbsp;<span class="ident" id="7953041">ipv4map</span><span class="op" id="7953048">:</span>&nbsp;<span class="builtintype" id="7953050">true</span><span class="op" id="7953054">}</span><span class="op" id="7953055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953058">{</span><span class="ident" id="7953059">snet</span><span class="op" id="7953063">:</span>&nbsp;<span class="string" id="7953065">&#34;tcp&#34;</span><span class="op" id="7953070">,</span>&nbsp;<span class="ident" id="7953072">saddr</span><span class="op" id="7953077">:</span>&nbsp;<span class="string" id="7953079">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7953097">,</span>&nbsp;<span class="ident" id="7953099">cnet</span><span class="op" id="7953103">:</span>&nbsp;<span class="string" id="7953105">&#34;tcp&#34;</span><span class="op" id="7953110">,</span>&nbsp;<span class="ident" id="7953112">caddr</span><span class="op" id="7953117">:</span>&nbsp;<span class="string" id="7953119">&#34;[::1]&#34;</span><span class="op" id="7953126">,</span>&nbsp;<span class="ident" id="7953128">ipv4map</span><span class="op" id="7953135">:</span>&nbsp;<span class="builtintype" id="7953137">true</span><span class="op" id="7953141">}</span><span class="op" id="7953142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953145">{</span><span class="ident" id="7953146">snet</span><span class="op" id="7953150">:</span>&nbsp;<span class="string" id="7953152">&#34;tcp&#34;</span><span class="op" id="7953157">,</span>&nbsp;<span class="ident" id="7953159">saddr</span><span class="op" id="7953164">:</span>&nbsp;<span class="string" id="7953166">&#34;[::]&#34;</span><span class="op" id="7953172">,</span>&nbsp;<span class="ident" id="7953174">cnet</span><span class="op" id="7953178">:</span>&nbsp;<span class="string" id="7953180">&#34;tcp&#34;</span><span class="op" id="7953185">,</span>&nbsp;<span class="ident" id="7953187">caddr</span><span class="op" id="7953192">:</span>&nbsp;<span class="string" id="7953194">&#34;127.0.0.1&#34;</span><span class="op" id="7953205">,</span>&nbsp;<span class="ident" id="7953207">ipv4map</span><span class="op" id="7953214">:</span>&nbsp;<span class="builtintype" id="7953216">true</span><span class="op" id="7953220">}</span><span class="op" id="7953221">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953225">{</span><span class="ident" id="7953226">snet</span><span class="op" id="7953230">:</span>&nbsp;<span class="string" id="7953232">&#34;tcp&#34;</span><span class="op" id="7953237">,</span>&nbsp;<span class="ident" id="7953239">saddr</span><span class="op" id="7953244">:</span>&nbsp;<span class="string" id="7953246">&#34;&#34;</span><span class="op" id="7953248">,</span>&nbsp;<span class="ident" id="7953250">cnet</span><span class="op" id="7953254">:</span>&nbsp;<span class="string" id="7953256">&#34;tcp4&#34;</span><span class="op" id="7953262">,</span>&nbsp;<span class="ident" id="7953264">caddr</span><span class="op" id="7953269">:</span>&nbsp;<span class="string" id="7953271">&#34;127.0.0.1&#34;</span><span class="op" id="7953282">}</span><span class="op" id="7953283">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953286">{</span><span class="ident" id="7953287">snet</span><span class="op" id="7953291">:</span>&nbsp;<span class="string" id="7953293">&#34;tcp&#34;</span><span class="op" id="7953298">,</span>&nbsp;<span class="ident" id="7953300">saddr</span><span class="op" id="7953305">:</span>&nbsp;<span class="string" id="7953307">&#34;0.0.0.0&#34;</span><span class="op" id="7953316">,</span>&nbsp;<span class="ident" id="7953318">cnet</span><span class="op" id="7953322">:</span>&nbsp;<span class="string" id="7953324">&#34;tcp4&#34;</span><span class="op" id="7953330">,</span>&nbsp;<span class="ident" id="7953332">caddr</span><span class="op" id="7953337">:</span>&nbsp;<span class="string" id="7953339">&#34;127.0.0.1&#34;</span><span class="op" id="7953350">}</span><span class="op" id="7953351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953354">{</span><span class="ident" id="7953355">snet</span><span class="op" id="7953359">:</span>&nbsp;<span class="string" id="7953361">&#34;tcp&#34;</span><span class="op" id="7953366">,</span>&nbsp;<span class="ident" id="7953368">saddr</span><span class="op" id="7953373">:</span>&nbsp;<span class="string" id="7953375">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7953393">,</span>&nbsp;<span class="ident" id="7953395">cnet</span><span class="op" id="7953399">:</span>&nbsp;<span class="string" id="7953401">&#34;tcp4&#34;</span><span class="op" id="7953407">,</span>&nbsp;<span class="ident" id="7953409">caddr</span><span class="op" id="7953414">:</span>&nbsp;<span class="string" id="7953416">&#34;127.0.0.1&#34;</span><span class="op" id="7953427">}</span><span class="op" id="7953428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953431">{</span><span class="ident" id="7953432">snet</span><span class="op" id="7953436">:</span>&nbsp;<span class="string" id="7953438">&#34;tcp&#34;</span><span class="op" id="7953443">,</span>&nbsp;<span class="ident" id="7953445">saddr</span><span class="op" id="7953450">:</span>&nbsp;<span class="string" id="7953452">&#34;[::]&#34;</span><span class="op" id="7953458">,</span>&nbsp;<span class="ident" id="7953460">cnet</span><span class="op" id="7953464">:</span>&nbsp;<span class="string" id="7953466">&#34;tcp6&#34;</span><span class="op" id="7953472">,</span>&nbsp;<span class="ident" id="7953474">caddr</span><span class="op" id="7953479">:</span>&nbsp;<span class="string" id="7953481">&#34;[::1]&#34;</span><span class="op" id="7953488">,</span>&nbsp;<span class="ident" id="7953490">ipv6</span><span class="op" id="7953494">:</span>&nbsp;<span class="builtintype" id="7953496">true</span><span class="op" id="7953500">}</span><span class="op" id="7953501">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953505">{</span><span class="ident" id="7953506">snet</span><span class="op" id="7953510">:</span>&nbsp;<span class="string" id="7953512">&#34;tcp&#34;</span><span class="op" id="7953517">,</span>&nbsp;<span class="ident" id="7953519">saddr</span><span class="op" id="7953524">:</span>&nbsp;<span class="string" id="7953526">&#34;&#34;</span><span class="op" id="7953528">,</span>&nbsp;<span class="ident" id="7953530">cnet</span><span class="op" id="7953534">:</span>&nbsp;<span class="string" id="7953536">&#34;tcp6&#34;</span><span class="op" id="7953542">,</span>&nbsp;<span class="ident" id="7953544">caddr</span><span class="op" id="7953549">:</span>&nbsp;<span class="string" id="7953551">&#34;[::1]&#34;</span><span class="op" id="7953558">,</span>&nbsp;<span class="ident" id="7953560">ipv4map</span><span class="op" id="7953567">:</span>&nbsp;<span class="builtintype" id="7953569">true</span><span class="op" id="7953573">}</span><span class="op" id="7953574">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953577">{</span><span class="ident" id="7953578">snet</span><span class="op" id="7953582">:</span>&nbsp;<span class="string" id="7953584">&#34;tcp&#34;</span><span class="op" id="7953589">,</span>&nbsp;<span class="ident" id="7953591">saddr</span><span class="op" id="7953596">:</span>&nbsp;<span class="string" id="7953598">&#34;0.0.0.0&#34;</span><span class="op" id="7953607">,</span>&nbsp;<span class="ident" id="7953609">cnet</span><span class="op" id="7953613">:</span>&nbsp;<span class="string" id="7953615">&#34;tcp6&#34;</span><span class="op" id="7953621">,</span>&nbsp;<span class="ident" id="7953623">caddr</span><span class="op" id="7953628">:</span>&nbsp;<span class="string" id="7953630">&#34;[::1]&#34;</span><span class="op" id="7953637">,</span>&nbsp;<span class="ident" id="7953639">ipv4map</span><span class="op" id="7953646">:</span>&nbsp;<span class="builtintype" id="7953648">true</span><span class="op" id="7953652">}</span><span class="op" id="7953653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953656">{</span><span class="ident" id="7953657">snet</span><span class="op" id="7953661">:</span>&nbsp;<span class="string" id="7953663">&#34;tcp&#34;</span><span class="op" id="7953668">,</span>&nbsp;<span class="ident" id="7953670">saddr</span><span class="op" id="7953675">:</span>&nbsp;<span class="string" id="7953677">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7953695">,</span>&nbsp;<span class="ident" id="7953697">cnet</span><span class="op" id="7953701">:</span>&nbsp;<span class="string" id="7953703">&#34;tcp6&#34;</span><span class="op" id="7953709">,</span>&nbsp;<span class="ident" id="7953711">caddr</span><span class="op" id="7953716">:</span>&nbsp;<span class="string" id="7953718">&#34;[::1]&#34;</span><span class="op" id="7953725">,</span>&nbsp;<span class="ident" id="7953727">ipv4map</span><span class="op" id="7953734">:</span>&nbsp;<span class="builtintype" id="7953736">true</span><span class="op" id="7953740">}</span><span class="op" id="7953741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953744">{</span><span class="ident" id="7953745">snet</span><span class="op" id="7953749">:</span>&nbsp;<span class="string" id="7953751">&#34;tcp&#34;</span><span class="op" id="7953756">,</span>&nbsp;<span class="ident" id="7953758">saddr</span><span class="op" id="7953763">:</span>&nbsp;<span class="string" id="7953765">&#34;[::]&#34;</span><span class="op" id="7953771">,</span>&nbsp;<span class="ident" id="7953773">cnet</span><span class="op" id="7953777">:</span>&nbsp;<span class="string" id="7953779">&#34;tcp4&#34;</span><span class="op" id="7953785">,</span>&nbsp;<span class="ident" id="7953787">caddr</span><span class="op" id="7953792">:</span>&nbsp;<span class="string" id="7953794">&#34;127.0.0.1&#34;</span><span class="op" id="7953805">,</span>&nbsp;<span class="ident" id="7953807">ipv4map</span><span class="op" id="7953814">:</span>&nbsp;<span class="builtintype" id="7953816">true</span><span class="op" id="7953820">}</span><span class="op" id="7953821">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953825">{</span><span class="ident" id="7953826">snet</span><span class="op" id="7953830">:</span>&nbsp;<span class="string" id="7953832">&#34;tcp&#34;</span><span class="op" id="7953837">,</span>&nbsp;<span class="ident" id="7953839">saddr</span><span class="op" id="7953844">:</span>&nbsp;<span class="string" id="7953846">&#34;127.0.0.1&#34;</span><span class="op" id="7953857">,</span>&nbsp;<span class="ident" id="7953859">cnet</span><span class="op" id="7953863">:</span>&nbsp;<span class="string" id="7953865">&#34;tcp&#34;</span><span class="op" id="7953870">,</span>&nbsp;<span class="ident" id="7953872">caddr</span><span class="op" id="7953877">:</span>&nbsp;<span class="string" id="7953879">&#34;127.0.0.1&#34;</span><span class="op" id="7953890">}</span><span class="op" id="7953891">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953894">{</span><span class="ident" id="7953895">snet</span><span class="op" id="7953899">:</span>&nbsp;<span class="string" id="7953901">&#34;tcp&#34;</span><span class="op" id="7953906">,</span>&nbsp;<span class="ident" id="7953908">saddr</span><span class="op" id="7953913">:</span>&nbsp;<span class="string" id="7953915">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7953935">,</span>&nbsp;<span class="ident" id="7953937">cnet</span><span class="op" id="7953941">:</span>&nbsp;<span class="string" id="7953943">&#34;tcp&#34;</span><span class="op" id="7953948">,</span>&nbsp;<span class="ident" id="7953950">caddr</span><span class="op" id="7953955">:</span>&nbsp;<span class="string" id="7953957">&#34;127.0.0.1&#34;</span><span class="op" id="7953968">}</span><span class="op" id="7953969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7953972">{</span><span class="ident" id="7953973">snet</span><span class="op" id="7953977">:</span>&nbsp;<span class="string" id="7953979">&#34;tcp&#34;</span><span class="op" id="7953984">,</span>&nbsp;<span class="ident" id="7953986">saddr</span><span class="op" id="7953991">:</span>&nbsp;<span class="string" id="7953993">&#34;[::1]&#34;</span><span class="op" id="7954000">,</span>&nbsp;<span class="ident" id="7954002">cnet</span><span class="op" id="7954006">:</span>&nbsp;<span class="string" id="7954008">&#34;tcp&#34;</span><span class="op" id="7954013">,</span>&nbsp;<span class="ident" id="7954015">caddr</span><span class="op" id="7954020">:</span>&nbsp;<span class="string" id="7954022">&#34;[::1]&#34;</span><span class="op" id="7954029">,</span>&nbsp;<span class="ident" id="7954031">ipv6</span><span class="op" id="7954035">:</span>&nbsp;<span class="builtintype" id="7954037">true</span><span class="op" id="7954041">}</span><span class="op" id="7954042">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954046">{</span><span class="ident" id="7954047">snet</span><span class="op" id="7954051">:</span>&nbsp;<span class="string" id="7954053">&#34;tcp4&#34;</span><span class="op" id="7954059">,</span>&nbsp;<span class="ident" id="7954061">saddr</span><span class="op" id="7954066">:</span>&nbsp;<span class="string" id="7954068">&#34;&#34;</span><span class="op" id="7954070">,</span>&nbsp;<span class="ident" id="7954072">cnet</span><span class="op" id="7954076">:</span>&nbsp;<span class="string" id="7954078">&#34;tcp4&#34;</span><span class="op" id="7954084">,</span>&nbsp;<span class="ident" id="7954086">caddr</span><span class="op" id="7954091">:</span>&nbsp;<span class="string" id="7954093">&#34;127.0.0.1&#34;</span><span class="op" id="7954104">}</span><span class="op" id="7954105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954108">{</span><span class="ident" id="7954109">snet</span><span class="op" id="7954113">:</span>&nbsp;<span class="string" id="7954115">&#34;tcp4&#34;</span><span class="op" id="7954121">,</span>&nbsp;<span class="ident" id="7954123">saddr</span><span class="op" id="7954128">:</span>&nbsp;<span class="string" id="7954130">&#34;0.0.0.0&#34;</span><span class="op" id="7954139">,</span>&nbsp;<span class="ident" id="7954141">cnet</span><span class="op" id="7954145">:</span>&nbsp;<span class="string" id="7954147">&#34;tcp4&#34;</span><span class="op" id="7954153">,</span>&nbsp;<span class="ident" id="7954155">caddr</span><span class="op" id="7954160">:</span>&nbsp;<span class="string" id="7954162">&#34;127.0.0.1&#34;</span><span class="op" id="7954173">}</span><span class="op" id="7954174">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954177">{</span><span class="ident" id="7954178">snet</span><span class="op" id="7954182">:</span>&nbsp;<span class="string" id="7954184">&#34;tcp4&#34;</span><span class="op" id="7954190">,</span>&nbsp;<span class="ident" id="7954192">saddr</span><span class="op" id="7954197">:</span>&nbsp;<span class="string" id="7954199">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7954217">,</span>&nbsp;<span class="ident" id="7954219">cnet</span><span class="op" id="7954223">:</span>&nbsp;<span class="string" id="7954225">&#34;tcp4&#34;</span><span class="op" id="7954231">,</span>&nbsp;<span class="ident" id="7954233">caddr</span><span class="op" id="7954238">:</span>&nbsp;<span class="string" id="7954240">&#34;127.0.0.1&#34;</span><span class="op" id="7954251">}</span><span class="op" id="7954252">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954256">{</span><span class="ident" id="7954257">snet</span><span class="op" id="7954261">:</span>&nbsp;<span class="string" id="7954263">&#34;tcp4&#34;</span><span class="op" id="7954269">,</span>&nbsp;<span class="ident" id="7954271">saddr</span><span class="op" id="7954276">:</span>&nbsp;<span class="string" id="7954278">&#34;127.0.0.1&#34;</span><span class="op" id="7954289">,</span>&nbsp;<span class="ident" id="7954291">cnet</span><span class="op" id="7954295">:</span>&nbsp;<span class="string" id="7954297">&#34;tcp4&#34;</span><span class="op" id="7954303">,</span>&nbsp;<span class="ident" id="7954305">caddr</span><span class="op" id="7954310">:</span>&nbsp;<span class="string" id="7954312">&#34;127.0.0.1&#34;</span><span class="op" id="7954323">}</span><span class="op" id="7954324">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954328">{</span><span class="ident" id="7954329">snet</span><span class="op" id="7954333">:</span>&nbsp;<span class="string" id="7954335">&#34;tcp6&#34;</span><span class="op" id="7954341">,</span>&nbsp;<span class="ident" id="7954343">saddr</span><span class="op" id="7954348">:</span>&nbsp;<span class="string" id="7954350">&#34;&#34;</span><span class="op" id="7954352">,</span>&nbsp;<span class="ident" id="7954354">cnet</span><span class="op" id="7954358">:</span>&nbsp;<span class="string" id="7954360">&#34;tcp6&#34;</span><span class="op" id="7954366">,</span>&nbsp;<span class="ident" id="7954368">caddr</span><span class="op" id="7954373">:</span>&nbsp;<span class="string" id="7954375">&#34;[::1]&#34;</span><span class="op" id="7954382">,</span>&nbsp;<span class="ident" id="7954384">ipv6</span><span class="op" id="7954388">:</span>&nbsp;<span class="builtintype" id="7954390">true</span><span class="op" id="7954394">}</span><span class="op" id="7954395">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954398">{</span><span class="ident" id="7954399">snet</span><span class="op" id="7954403">:</span>&nbsp;<span class="string" id="7954405">&#34;tcp6&#34;</span><span class="op" id="7954411">,</span>&nbsp;<span class="ident" id="7954413">saddr</span><span class="op" id="7954418">:</span>&nbsp;<span class="string" id="7954420">&#34;[::]&#34;</span><span class="op" id="7954426">,</span>&nbsp;<span class="ident" id="7954428">cnet</span><span class="op" id="7954432">:</span>&nbsp;<span class="string" id="7954434">&#34;tcp6&#34;</span><span class="op" id="7954440">,</span>&nbsp;<span class="ident" id="7954442">caddr</span><span class="op" id="7954447">:</span>&nbsp;<span class="string" id="7954449">&#34;[::1]&#34;</span><span class="op" id="7954456">,</span>&nbsp;<span class="ident" id="7954458">ipv6</span><span class="op" id="7954462">:</span>&nbsp;<span class="builtintype" id="7954464">true</span><span class="op" id="7954468">}</span><span class="op" id="7954469">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954473">{</span><span class="ident" id="7954474">snet</span><span class="op" id="7954478">:</span>&nbsp;<span class="string" id="7954480">&#34;tcp6&#34;</span><span class="op" id="7954486">,</span>&nbsp;<span class="ident" id="7954488">saddr</span><span class="op" id="7954493">:</span>&nbsp;<span class="string" id="7954495">&#34;[::1]&#34;</span><span class="op" id="7954502">,</span>&nbsp;<span class="ident" id="7954504">cnet</span><span class="op" id="7954508">:</span>&nbsp;<span class="string" id="7954510">&#34;tcp6&#34;</span><span class="op" id="7954516">,</span>&nbsp;<span class="ident" id="7954518">caddr</span><span class="op" id="7954523">:</span>&nbsp;<span class="string" id="7954525">&#34;[::1]&#34;</span><span class="op" id="7954532">,</span>&nbsp;<span class="ident" id="7954534">ipv6</span><span class="op" id="7954538">:</span>&nbsp;<span class="builtintype" id="7954540">true</span><span class="op" id="7954544">}</span><span class="op" id="7954545">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954549">{</span><span class="ident" id="7954550">snet</span><span class="op" id="7954554">:</span>&nbsp;<span class="string" id="7954556">&#34;unix&#34;</span><span class="op" id="7954562">,</span>&nbsp;<span class="ident" id="7954564">saddr</span><span class="op" id="7954569">:</span>&nbsp;<span class="ident" id="7954571">testUnixAddr</span><span class="op" id="7954583">(</span><span class="op" id="7954584">)</span><span class="op" id="7954585">,</span>&nbsp;<span class="ident" id="7954587">cnet</span><span class="op" id="7954591">:</span>&nbsp;<span class="string" id="7954593">&#34;unix&#34;</span><span class="op" id="7954599">,</span>&nbsp;<span class="ident" id="7954601">caddr</span><span class="op" id="7954606">:</span>&nbsp;<span class="ident" id="7954608">testUnixAddr</span><span class="op" id="7954620">(</span><span class="op" id="7954621">)</span><span class="op" id="7954622">}</span><span class="op" id="7954623">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954626">{</span><span class="ident" id="7954627">snet</span><span class="op" id="7954631">:</span>&nbsp;<span class="string" id="7954633">&#34;unix&#34;</span><span class="op" id="7954639">,</span>&nbsp;<span class="ident" id="7954641">saddr</span><span class="op" id="7954646">:</span>&nbsp;<span class="string" id="7954648">&#34;@gotest2/net&#34;</span><span class="op" id="7954662">,</span>&nbsp;<span class="ident" id="7954664">cnet</span><span class="op" id="7954668">:</span>&nbsp;<span class="string" id="7954670">&#34;unix&#34;</span><span class="op" id="7954676">,</span>&nbsp;<span class="ident" id="7954678">caddr</span><span class="op" id="7954683">:</span>&nbsp;<span class="string" id="7954685">&#34;@gotest2/net.local&#34;</span><span class="op" id="7954705">,</span>&nbsp;<span class="ident" id="7954707">linuxOnly</span><span class="op" id="7954716">:</span>&nbsp;<span class="builtintype" id="7954718">true</span><span class="op" id="7954722">}</span><span class="op" id="7954723">,</span><br>
<span class="lineno"></span><span class="op" id="7954725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7954728">func</span>&nbsp;<span class="ident" id="7954733">TestStreamConnServer</span><span class="op" id="7954753">(</span><span class="ident" id="7954754">t</span>&nbsp;<span class="op" id="7954756">*</span><span class="ident" id="7954757">testing</span><span class="op" id="7954764">.</span><span class="ident" id="7954765">T</span><span class="op" id="7954766">)</span>&nbsp;<span class="op" id="7954768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954771">for</span>&nbsp;<span class="ident" id="7954775">_</span><span class="op" id="7954776">,</span>&nbsp;<span class="ident" id="7954778">tt</span>&nbsp;<span class="op" id="7954781">:=</span>&nbsp;<span class="keyword" id="7954784">range</span>&nbsp;<span class="ident" id="7954790">streamConnServerTests</span>&nbsp;<span class="op" id="7954812">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954816">if</span>&nbsp;<span class="ident" id="7954819">skipServerTest</span><span class="op" id="7954833">(</span><span class="ident" id="7954834">tt</span><span class="op" id="7954836">.</span><span class="ident" id="7954837">snet</span><span class="op" id="7954841">,</span>&nbsp;<span class="string" id="7954843">&#34;unix&#34;</span><span class="op" id="7954849">,</span>&nbsp;<span class="ident" id="7954851">tt</span><span class="op" id="7954853">.</span><span class="ident" id="7954854">saddr</span><span class="op" id="7954859">,</span>&nbsp;<span class="ident" id="7954861">tt</span><span class="op" id="7954863">.</span><span class="ident" id="7954864">ipv6</span><span class="op" id="7954868">,</span>&nbsp;<span class="ident" id="7954870">tt</span><span class="op" id="7954872">.</span><span class="ident" id="7954873">ipv4map</span><span class="op" id="7954880">,</span>&nbsp;<span class="ident" id="7954882">tt</span><span class="op" id="7954884">.</span><span class="ident" id="7954885">linuxOnly</span><span class="op" id="7954894">)</span>&nbsp;<span class="op" id="7954896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954901">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954917">listening</span>&nbsp;<span class="op" id="7954927">:=</span>&nbsp;<span class="builtinfunc" id="7954930">make</span><span class="op" id="7954934">(</span><span class="keyword" id="7954935">chan</span>&nbsp;<span class="builtintype" id="7954940">string</span><span class="op" id="7954946">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954950">done</span>&nbsp;<span class="op" id="7954955">:=</span>&nbsp;<span class="builtinfunc" id="7954958">make</span><span class="op" id="7954962">(</span><span class="keyword" id="7954963">chan</span>&nbsp;<span class="builtintype" id="7954968">int</span><span class="op" id="7954971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954975">switch</span>&nbsp;<span class="ident" id="7954982">tt</span><span class="op" id="7954984">.</span><span class="ident" id="7954985">snet</span>&nbsp;<span class="op" id="7954990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7954994">case</span>&nbsp;<span class="string" id="7954999">&#34;tcp&#34;</span><span class="op" id="7955004">,</span>&nbsp;<span class="string" id="7955006">&#34;tcp4&#34;</span><span class="op" id="7955012">,</span>&nbsp;<span class="string" id="7955014">&#34;tcp6&#34;</span><span class="op" id="7955020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955025">tt</span><span class="op" id="7955027">.</span><span class="ident" id="7955028">saddr</span>&nbsp;<span class="op" id="7955034">+=</span>&nbsp;<span class="string" id="7955037">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955044">case</span>&nbsp;<span class="string" id="7955049">&#34;unix&#34;</span><span class="op" id="7955055">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955060">os</span><span class="op" id="7955062">.</span><span class="ident" id="7955063">Remove</span><span class="op" id="7955069">(</span><span class="ident" id="7955070">tt</span><span class="op" id="7955072">.</span><span class="ident" id="7955073">saddr</span><span class="op" id="7955078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955083">os</span><span class="op" id="7955085">.</span><span class="ident" id="7955086">Remove</span><span class="op" id="7955092">(</span><span class="ident" id="7955093">tt</span><span class="op" id="7955095">.</span><span class="ident" id="7955096">caddr</span><span class="op" id="7955101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955110">go</span>&nbsp;<span class="ident" id="7955113">runStreamConnServer</span><span class="op" id="7955132">(</span><span class="ident" id="7955133">t</span><span class="op" id="7955134">,</span>&nbsp;<span class="ident" id="7955136">tt</span><span class="op" id="7955138">.</span><span class="ident" id="7955139">snet</span><span class="op" id="7955143">,</span>&nbsp;<span class="ident" id="7955145">tt</span><span class="op" id="7955147">.</span><span class="ident" id="7955148">saddr</span><span class="op" id="7955153">,</span>&nbsp;<span class="ident" id="7955155">listening</span><span class="op" id="7955164">,</span>&nbsp;<span class="ident" id="7955166">done</span><span class="op" id="7955170">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955174">taddr</span>&nbsp;<span class="op" id="7955180">:=</span>&nbsp;<span class="op" id="7955183">&lt;-</span><span class="ident" id="7955185">listening</span>&nbsp;<span class="comment" id="7955195">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955226">switch</span>&nbsp;<span class="ident" id="7955233">tt</span><span class="op" id="7955235">.</span><span class="ident" id="7955236">cnet</span>&nbsp;<span class="op" id="7955241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955245">case</span>&nbsp;<span class="string" id="7955250">&#34;tcp&#34;</span><span class="op" id="7955255">,</span>&nbsp;<span class="string" id="7955257">&#34;tcp4&#34;</span><span class="op" id="7955263">,</span>&nbsp;<span class="string" id="7955265">&#34;tcp6&#34;</span><span class="op" id="7955271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955276">_</span><span class="op" id="7955277">,</span>&nbsp;<span class="ident" id="7955279">port</span><span class="op" id="7955283">,</span>&nbsp;<span class="ident" id="7955285">err</span>&nbsp;<span class="op" id="7955289">:=</span>&nbsp;<span class="ident" id="7955292">SplitHostPort</span><span class="op" id="7955305">(</span><span class="ident" id="7955306">taddr</span><span class="op" id="7955311">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955316">if</span>&nbsp;<span class="ident" id="7955319">err</span>&nbsp;<span class="op" id="7955323">!=</span>&nbsp;<span class="ident" id="7955326">nil</span>&nbsp;<span class="op" id="7955330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955336">t</span><span class="op" id="7955337">.</span><span class="ident" id="7955338">Fatalf</span><span class="op" id="7955344">(</span><span class="string" id="7955345">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7955375">,</span>&nbsp;<span class="ident" id="7955377">taddr</span><span class="op" id="7955382">,</span>&nbsp;<span class="ident" id="7955384">err</span><span class="op" id="7955387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955397">taddr</span>&nbsp;<span class="op" id="7955403">=</span>&nbsp;<span class="ident" id="7955405">tt</span><span class="op" id="7955407">.</span><span class="ident" id="7955408">caddr</span>&nbsp;<span class="op" id="7955414">+</span>&nbsp;<span class="string" id="7955416">&#34;:&#34;</span>&nbsp;<span class="op" id="7955420">+</span>&nbsp;<span class="ident" id="7955422">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955429">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955434">runStreamConnClient</span><span class="op" id="7955453">(</span><span class="ident" id="7955454">t</span><span class="op" id="7955455">,</span>&nbsp;<span class="ident" id="7955457">tt</span><span class="op" id="7955459">.</span><span class="ident" id="7955460">cnet</span><span class="op" id="7955464">,</span>&nbsp;<span class="ident" id="7955466">taddr</span><span class="op" id="7955471">,</span>&nbsp;<span class="ident" id="7955473">tt</span><span class="op" id="7955475">.</span><span class="ident" id="7955476">empty</span><span class="op" id="7955481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955485">&lt;-</span><span class="ident" id="7955487">done</span>&nbsp;<span class="comment" id="7955492">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955523">switch</span>&nbsp;<span class="ident" id="7955530">tt</span><span class="op" id="7955532">.</span><span class="ident" id="7955533">snet</span>&nbsp;<span class="op" id="7955538">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955542">case</span>&nbsp;<span class="string" id="7955547">&#34;unix&#34;</span><span class="op" id="7955553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955558">os</span><span class="op" id="7955560">.</span><span class="ident" id="7955561">Remove</span><span class="op" id="7955567">(</span><span class="ident" id="7955568">tt</span><span class="op" id="7955570">.</span><span class="ident" id="7955571">saddr</span><span class="op" id="7955576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955581">os</span><span class="op" id="7955583">.</span><span class="ident" id="7955584">Remove</span><span class="op" id="7955590">(</span><span class="ident" id="7955591">tt</span><span class="op" id="7955593">.</span><span class="ident" id="7955594">caddr</span><span class="op" id="7955599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955606">}</span><br>
<span class="lineno">130</span><span class="op" id="7955608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955611">var</span>&nbsp;<span class="ident" id="7955615">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7955640">=</span>&nbsp;<span class="op" id="7955642">[</span><span class="op" id="7955643">]</span><span class="keyword" id="7955644">struct</span>&nbsp;<span class="op" id="7955651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955654">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955664">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955672">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955682">string</span>&nbsp;<span class="comment" id="7955689">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955708">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955718">string</span>&nbsp;<span class="comment" id="7955725">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955744">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955754">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7955761">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955786">linuxOnly</span>&nbsp;<span class="builtintype" id="7955796">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7955803">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7955857">}</span><span class="op" id="7955858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955861">{</span><span class="ident" id="7955862">net</span><span class="op" id="7955865">:</span>&nbsp;<span class="string" id="7955867">&#34;unixpacket&#34;</span><span class="op" id="7955879">,</span>&nbsp;<span class="ident" id="7955881">saddr</span><span class="op" id="7955886">:</span>&nbsp;<span class="ident" id="7955888">testUnixAddr</span><span class="op" id="7955900">(</span><span class="op" id="7955901">)</span><span class="op" id="7955902">,</span>&nbsp;<span class="ident" id="7955904">caddr</span><span class="op" id="7955909">:</span>&nbsp;<span class="ident" id="7955911">testUnixAddr</span><span class="op" id="7955923">(</span><span class="op" id="7955924">)</span><span class="op" id="7955925">}</span><span class="op" id="7955926">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955929">{</span><span class="ident" id="7955930">net</span><span class="op" id="7955933">:</span>&nbsp;<span class="string" id="7955935">&#34;unixpacket&#34;</span><span class="op" id="7955947">,</span>&nbsp;<span class="ident" id="7955949">saddr</span><span class="op" id="7955954">:</span>&nbsp;<span class="string" id="7955956">&#34;@gotest4/net&#34;</span><span class="op" id="7955970">,</span>&nbsp;<span class="ident" id="7955972">caddr</span><span class="op" id="7955977">:</span>&nbsp;<span class="string" id="7955979">&#34;@gotest4/net.local&#34;</span><span class="op" id="7955999">,</span>&nbsp;<span class="ident" id="7956001">linuxOnly</span><span class="op" id="7956010">:</span>&nbsp;<span class="builtintype" id="7956012">true</span><span class="op" id="7956016">}</span><span class="op" id="7956017">,</span><br>
<span class="lineno"></span><span class="op" id="7956019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7956022">func</span>&nbsp;<span class="ident" id="7956027">TestSeqpacketConnServer</span><span class="op" id="7956050">(</span><span class="ident" id="7956051">t</span>&nbsp;<span class="op" id="7956053">*</span><span class="ident" id="7956054">testing</span><span class="op" id="7956061">.</span><span class="ident" id="7956062">T</span><span class="op" id="7956063">)</span>&nbsp;<span class="op" id="7956065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956068">switch</span>&nbsp;<span class="ident" id="7956075">runtime</span><span class="op" id="7956082">.</span><span class="ident" id="7956083">GOOS</span>&nbsp;<span class="op" id="7956088">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956091">case</span>&nbsp;<span class="string" id="7956096">&#34;darwin&#34;</span><span class="op" id="7956104">,</span>&nbsp;<span class="string" id="7956106">&#34;nacl&#34;</span><span class="op" id="7956112">,</span>&nbsp;<span class="string" id="7956114">&#34;openbsd&#34;</span><span class="op" id="7956123">,</span>&nbsp;<span class="string" id="7956125">&#34;plan9&#34;</span><span class="op" id="7956132">,</span>&nbsp;<span class="string" id="7956134">&#34;windows&#34;</span><span class="op" id="7956143">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956147">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956160">case</span>&nbsp;<span class="string" id="7956165">&#34;freebsd&#34;</span><span class="op" id="7956174">:</span>&nbsp;<span class="comment" id="7956176">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956218">t</span><span class="op" id="7956219">.</span><span class="ident" id="7956220">Skipf</span><span class="op" id="7956225">(</span><span class="string" id="7956226">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7956247">,</span>&nbsp;<span class="ident" id="7956249">runtime</span><span class="op" id="7956256">.</span><span class="ident" id="7956257">GOOS</span><span class="op" id="7956261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956264">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956268">for</span>&nbsp;<span class="ident" id="7956272">_</span><span class="op" id="7956273">,</span>&nbsp;<span class="ident" id="7956275">tt</span>&nbsp;<span class="op" id="7956278">:=</span>&nbsp;<span class="keyword" id="7956281">range</span>&nbsp;<span class="ident" id="7956287">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7956312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956316">if</span>&nbsp;<span class="ident" id="7956319">runtime</span><span class="op" id="7956326">.</span><span class="ident" id="7956327">GOOS</span>&nbsp;<span class="op" id="7956332">!=</span>&nbsp;<span class="string" id="7956335">&#34;linux&#34;</span>&nbsp;<span class="op" id="7956343">&amp;&amp;</span>&nbsp;<span class="ident" id="7956346">tt</span><span class="op" id="7956348">.</span><span class="ident" id="7956349">linuxOnly</span>&nbsp;<span class="op" id="7956359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956364">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956375">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956379">listening</span>&nbsp;<span class="op" id="7956389">:=</span>&nbsp;<span class="builtinfunc" id="7956392">make</span><span class="op" id="7956396">(</span><span class="keyword" id="7956397">chan</span>&nbsp;<span class="builtintype" id="7956402">string</span><span class="op" id="7956408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956412">done</span>&nbsp;<span class="op" id="7956417">:=</span>&nbsp;<span class="builtinfunc" id="7956420">make</span><span class="op" id="7956424">(</span><span class="keyword" id="7956425">chan</span>&nbsp;<span class="builtintype" id="7956430">int</span><span class="op" id="7956433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956437">switch</span>&nbsp;<span class="ident" id="7956444">tt</span><span class="op" id="7956446">.</span><span class="ident" id="7956447">net</span>&nbsp;<span class="op" id="7956451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956455">case</span>&nbsp;<span class="string" id="7956460">&#34;unixpacket&#34;</span><span class="op" id="7956472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956477">os</span><span class="op" id="7956479">.</span><span class="ident" id="7956480">Remove</span><span class="op" id="7956486">(</span><span class="ident" id="7956487">tt</span><span class="op" id="7956489">.</span><span class="ident" id="7956490">saddr</span><span class="op" id="7956495">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956500">os</span><span class="op" id="7956502">.</span><span class="ident" id="7956503">Remove</span><span class="op" id="7956509">(</span><span class="ident" id="7956510">tt</span><span class="op" id="7956512">.</span><span class="ident" id="7956513">caddr</span><span class="op" id="7956518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956527">go</span>&nbsp;<span class="ident" id="7956530">runStreamConnServer</span><span class="op" id="7956549">(</span><span class="ident" id="7956550">t</span><span class="op" id="7956551">,</span>&nbsp;<span class="ident" id="7956553">tt</span><span class="op" id="7956555">.</span><span class="ident" id="7956556">net</span><span class="op" id="7956559">,</span>&nbsp;<span class="ident" id="7956561">tt</span><span class="op" id="7956563">.</span><span class="ident" id="7956564">saddr</span><span class="op" id="7956569">,</span>&nbsp;<span class="ident" id="7956571">listening</span><span class="op" id="7956580">,</span>&nbsp;<span class="ident" id="7956582">done</span><span class="op" id="7956586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956590">taddr</span>&nbsp;<span class="op" id="7956596">:=</span>&nbsp;<span class="op" id="7956599">&lt;-</span><span class="ident" id="7956601">listening</span>&nbsp;<span class="comment" id="7956611">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956642">runStreamConnClient</span><span class="op" id="7956661">(</span><span class="ident" id="7956662">t</span><span class="op" id="7956663">,</span>&nbsp;<span class="ident" id="7956665">tt</span><span class="op" id="7956667">.</span><span class="ident" id="7956668">net</span><span class="op" id="7956671">,</span>&nbsp;<span class="ident" id="7956673">taddr</span><span class="op" id="7956678">,</span>&nbsp;<span class="ident" id="7956680">tt</span><span class="op" id="7956682">.</span><span class="ident" id="7956683">empty</span><span class="op" id="7956688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956692">&lt;-</span><span class="ident" id="7956694">done</span>&nbsp;<span class="comment" id="7956699">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956730">switch</span>&nbsp;<span class="ident" id="7956737">tt</span><span class="op" id="7956739">.</span><span class="ident" id="7956740">net</span>&nbsp;<span class="op" id="7956744">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956748">case</span>&nbsp;<span class="string" id="7956753">&#34;unixpacket&#34;</span><span class="op" id="7956765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956770">os</span><span class="op" id="7956772">.</span><span class="ident" id="7956773">Remove</span><span class="op" id="7956779">(</span><span class="ident" id="7956780">tt</span><span class="op" id="7956782">.</span><span class="ident" id="7956783">saddr</span><span class="op" id="7956788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956793">os</span><span class="op" id="7956795">.</span><span class="ident" id="7956796">Remove</span><span class="op" id="7956802">(</span><span class="ident" id="7956803">tt</span><span class="op" id="7956805">.</span><span class="ident" id="7956806">caddr</span><span class="op" id="7956811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956818">}</span><br>
<span class="lineno">175</span><span class="op" id="7956820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7956823">func</span>&nbsp;<span class="ident" id="7956828">runStreamConnServer</span><span class="op" id="7956847">(</span><span class="ident" id="7956848">t</span>&nbsp;<span class="op" id="7956850">*</span><span class="ident" id="7956851">testing</span><span class="op" id="7956858">.</span><span class="ident" id="7956859">T</span><span class="op" id="7956860">,</span>&nbsp;<span class="ident" id="7956862">net</span><span class="op" id="7956865">,</span>&nbsp;<span class="ident" id="7956867">laddr</span>&nbsp;<span class="builtintype" id="7956873">string</span><span class="op" id="7956879">,</span>&nbsp;<span class="ident" id="7956881">listening</span>&nbsp;<span class="keyword" id="7956891">chan</span><span class="op" id="7956895">&lt;-</span>&nbsp;<span class="builtintype" id="7956898">string</span><span class="op" id="7956904">,</span>&nbsp;<span class="ident" id="7956906">done</span>&nbsp;<span class="keyword" id="7956911">chan</span><span class="op" id="7956915">&lt;-</span>&nbsp;<span class="builtintype" id="7956918">int</span><span class="op" id="7956921">)</span>&nbsp;<span class="op" id="7956923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956926">defer</span>&nbsp;<span class="builtinfunc" id="7956932">close</span><span class="op" id="7956937">(</span><span class="ident" id="7956938">done</span><span class="op" id="7956942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956945">l</span><span class="op" id="7956946">,</span>&nbsp;<span class="ident" id="7956948">err</span>&nbsp;<span class="op" id="7956952">:=</span>&nbsp;<span class="ident" id="7956955">Listen</span><span class="op" id="7956961">(</span><span class="ident" id="7956962">net</span><span class="op" id="7956965">,</span>&nbsp;<span class="ident" id="7956967">laddr</span><span class="op" id="7956972">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7956975">if</span>&nbsp;<span class="ident" id="7956978">err</span>&nbsp;<span class="op" id="7956982">!=</span>&nbsp;<span class="ident" id="7956985">nil</span>&nbsp;<span class="op" id="7956989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956993">t</span><span class="op" id="7956994">.</span><span class="ident" id="7956995">Errorf</span><span class="op" id="7957001">(</span><span class="string" id="7957002">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7957029">,</span>&nbsp;<span class="ident" id="7957031">net</span><span class="op" id="7957034">,</span>&nbsp;<span class="ident" id="7957036">laddr</span><span class="op" id="7957041">,</span>&nbsp;<span class="ident" id="7957043">err</span><span class="op" id="7957046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957050">listening</span>&nbsp;<span class="op" id="7957060">&lt;-</span>&nbsp;<span class="string" id="7957063">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957073">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957081">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957084">defer</span>&nbsp;<span class="ident" id="7957090">l</span><span class="op" id="7957091">.</span><span class="ident" id="7957092">Close</span><span class="op" id="7957097">(</span><span class="op" id="7957098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957101">listening</span>&nbsp;<span class="op" id="7957111">&lt;-</span>&nbsp;<span class="ident" id="7957114">l</span><span class="op" id="7957115">.</span><span class="ident" id="7957116">Addr</span><span class="op" id="7957120">(</span><span class="op" id="7957121">)</span><span class="op" id="7957122">.</span><span class="ident" id="7957123">String</span><span class="op" id="7957129">(</span><span class="op" id="7957130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957134">echo</span>&nbsp;<span class="op" id="7957139">:=</span>&nbsp;<span class="keyword" id="7957142">func</span><span class="op" id="7957146">(</span><span class="ident" id="7957147">rw</span>&nbsp;<span class="ident" id="7957150">io</span><span class="op" id="7957152">.</span><span class="ident" id="7957153">ReadWriter</span><span class="op" id="7957163">,</span>&nbsp;<span class="ident" id="7957165">done</span>&nbsp;<span class="keyword" id="7957170">chan</span><span class="op" id="7957174">&lt;-</span>&nbsp;<span class="builtintype" id="7957177">int</span><span class="op" id="7957180">)</span>&nbsp;<span class="op" id="7957182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957186">buf</span>&nbsp;<span class="op" id="7957190">:=</span>&nbsp;<span class="builtinfunc" id="7957193">make</span><span class="op" id="7957197">(</span><span class="op" id="7957198">[</span><span class="op" id="7957199">]</span><span class="builtintype" id="7957200">byte</span><span class="op" id="7957204">,</span>&nbsp;<span class="num" id="7957206">1024</span><span class="op" id="7957210">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957214">for</span>&nbsp;<span class="op" id="7957218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957223">n</span><span class="op" id="7957224">,</span>&nbsp;<span class="ident" id="7957226">err</span>&nbsp;<span class="op" id="7957230">:=</span>&nbsp;<span class="ident" id="7957233">rw</span><span class="op" id="7957235">.</span><span class="ident" id="7957236">Read</span><span class="op" id="7957240">(</span><span class="ident" id="7957241">buf</span><span class="op" id="7957244">[</span><span class="num" id="7957245">0</span><span class="op" id="7957246">:</span><span class="op" id="7957247">]</span><span class="op" id="7957248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957253">if</span>&nbsp;<span class="ident" id="7957256">err</span>&nbsp;<span class="op" id="7957260">!=</span>&nbsp;<span class="ident" id="7957263">nil</span>&nbsp;<span class="op" id="7957267">||</span>&nbsp;<span class="ident" id="7957270">n</span>&nbsp;<span class="op" id="7957272">==</span>&nbsp;<span class="num" id="7957275">0</span>&nbsp;<span class="op" id="7957277">||</span>&nbsp;<span class="builtintype" id="7957280">string</span><span class="op" id="7957286">(</span><span class="ident" id="7957287">buf</span><span class="op" id="7957290">[</span><span class="op" id="7957291">:</span><span class="ident" id="7957292">n</span><span class="op" id="7957293">]</span><span class="op" id="7957294">)</span>&nbsp;<span class="op" id="7957296">==</span>&nbsp;<span class="string" id="7957299">&#34;END&#34;</span>&nbsp;<span class="op" id="7957305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957311">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957320">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957325">rw</span><span class="op" id="7957327">.</span><span class="ident" id="7957328">Write</span><span class="op" id="7957333">(</span><span class="ident" id="7957334">buf</span><span class="op" id="7957337">[</span><span class="num" id="7957338">0</span><span class="op" id="7957339">:</span><span class="ident" id="7957340">n</span><span class="op" id="7957341">]</span><span class="op" id="7957342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7957350">close</span><span class="op" id="7957355">(</span><span class="ident" id="7957356">done</span><span class="op" id="7957360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="7957366">run</span><span class="op" id="7957369">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957372">for</span>&nbsp;<span class="op" id="7957376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957380">c</span><span class="op" id="7957381">,</span>&nbsp;<span class="ident" id="7957383">err</span>&nbsp;<span class="op" id="7957387">:=</span>&nbsp;<span class="ident" id="7957390">l</span><span class="op" id="7957391">.</span><span class="ident" id="7957392">Accept</span><span class="op" id="7957398">(</span><span class="op" id="7957399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957403">if</span>&nbsp;<span class="ident" id="7957406">err</span>&nbsp;<span class="op" id="7957410">!=</span>&nbsp;<span class="ident" id="7957413">nil</span>&nbsp;<span class="op" id="7957417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957422">t</span><span class="op" id="7957423">.</span><span class="ident" id="7957424">Logf</span><span class="op" id="7957428">(</span><span class="string" id="7957429">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7957448">,</span>&nbsp;<span class="ident" id="7957450">err</span><span class="op" id="7957453">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957458">continue</span>&nbsp;<span class="ident" id="7957467">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957477">echodone</span>&nbsp;<span class="op" id="7957486">:=</span>&nbsp;<span class="builtinfunc" id="7957489">make</span><span class="op" id="7957493">(</span><span class="keyword" id="7957494">chan</span>&nbsp;<span class="builtintype" id="7957499">int</span><span class="op" id="7957502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957506">go</span>&nbsp;<span class="ident" id="7957509">echo</span><span class="op" id="7957513">(</span><span class="ident" id="7957514">c</span><span class="op" id="7957515">,</span>&nbsp;<span class="ident" id="7957517">echodone</span><span class="op" id="7957525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957529">&lt;-</span><span class="ident" id="7957531">echodone</span>&nbsp;<span class="comment" id="7957540">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957568">c</span><span class="op" id="7957569">.</span><span class="ident" id="7957570">Close</span><span class="op" id="7957575">(</span><span class="op" id="7957576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957580">break</span>&nbsp;<span class="ident" id="7957586">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957591">}</span><br>
<span class="lineno"></span><span class="op" id="7957593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7957596">func</span>&nbsp;<span class="ident" id="7957601">runStreamConnClient</span><span class="op" id="7957620">(</span><span class="ident" id="7957621">t</span>&nbsp;<span class="op" id="7957623">*</span><span class="ident" id="7957624">testing</span><span class="op" id="7957631">.</span><span class="ident" id="7957632">T</span><span class="op" id="7957633">,</span>&nbsp;<span class="ident" id="7957635">net</span><span class="op" id="7957638">,</span>&nbsp;<span class="ident" id="7957640">taddr</span>&nbsp;<span class="builtintype" id="7957646">string</span><span class="op" id="7957652">,</span>&nbsp;<span class="ident" id="7957654">isEmpty</span>&nbsp;<span class="builtintype" id="7957662">bool</span><span class="op" id="7957666">)</span>&nbsp;<span class="op" id="7957668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957671">c</span><span class="op" id="7957672">,</span>&nbsp;<span class="ident" id="7957674">err</span>&nbsp;<span class="op" id="7957678">:=</span>&nbsp;<span class="ident" id="7957681">Dial</span><span class="op" id="7957685">(</span><span class="ident" id="7957686">net</span><span class="op" id="7957689">,</span>&nbsp;<span class="ident" id="7957691">taddr</span><span class="op" id="7957696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957699">if</span>&nbsp;<span class="ident" id="7957702">err</span>&nbsp;<span class="op" id="7957706">!=</span>&nbsp;<span class="ident" id="7957709">nil</span>&nbsp;<span class="op" id="7957713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957717">t</span><span class="op" id="7957718">.</span><span class="ident" id="7957719">Fatalf</span><span class="op" id="7957725">(</span><span class="string" id="7957726">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7957751">,</span>&nbsp;<span class="ident" id="7957753">net</span><span class="op" id="7957756">,</span>&nbsp;<span class="ident" id="7957758">taddr</span><span class="op" id="7957763">,</span>&nbsp;<span class="ident" id="7957765">err</span><span class="op" id="7957768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957771">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957774">defer</span>&nbsp;<span class="ident" id="7957780">c</span><span class="op" id="7957781">.</span><span class="ident" id="7957782">Close</span><span class="op" id="7957787">(</span><span class="op" id="7957788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957791">c</span><span class="op" id="7957792">.</span><span class="ident" id="7957793">SetReadDeadline</span><span class="op" id="7957808">(</span><span class="ident" id="7957809">time</span><span class="op" id="7957813">.</span><span class="ident" id="7957814">Now</span><span class="op" id="7957817">(</span><span class="op" id="7957818">)</span><span class="op" id="7957819">.</span><span class="ident" id="7957820">Add</span><span class="op" id="7957823">(</span><span class="num" id="7957824">1</span>&nbsp;<span class="op" id="7957826">*</span>&nbsp;<span class="ident" id="7957828">time</span><span class="op" id="7957832">.</span><span class="ident" id="7957833">Second</span><span class="op" id="7957839">)</span><span class="op" id="7957840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957844">var</span>&nbsp;<span class="ident" id="7957848">wb</span>&nbsp;<span class="op" id="7957851">[</span><span class="op" id="7957852">]</span><span class="builtintype" id="7957853">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957859">if</span>&nbsp;<span class="op" id="7957862">!</span><span class="ident" id="7957863">isEmpty</span>&nbsp;<span class="op" id="7957871">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957875">wb</span>&nbsp;<span class="op" id="7957878">=</span>&nbsp;<span class="op" id="7957880">[</span><span class="op" id="7957881">]</span><span class="builtintype" id="7957882">byte</span><span class="op" id="7957886">(</span><span class="string" id="7957887">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7957915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7957921">if</span>&nbsp;<span class="ident" id="7957924">n</span><span class="op" id="7957925">,</span>&nbsp;<span class="ident" id="7957927">err</span>&nbsp;<span class="op" id="7957931">:=</span>&nbsp;<span class="ident" id="7957934">c</span><span class="op" id="7957935">.</span><span class="ident" id="7957936">Write</span><span class="op" id="7957941">(</span><span class="ident" id="7957942">wb</span><span class="op" id="7957944">)</span><span class="op" id="7957945">;</span>&nbsp;<span class="ident" id="7957947">err</span>&nbsp;<span class="op" id="7957951">!=</span>&nbsp;<span class="ident" id="7957954">nil</span>&nbsp;<span class="op" id="7957958">||</span>&nbsp;<span class="ident" id="7957961">n</span>&nbsp;<span class="op" id="7957963">!=</span>&nbsp;<span class="builtinfunc" id="7957966">len</span><span class="op" id="7957969">(</span><span class="ident" id="7957970">wb</span><span class="op" id="7957972">)</span>&nbsp;<span class="op" id="7957974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957978">t</span><span class="op" id="7957979">.</span><span class="ident" id="7957980">Fatalf</span><span class="op" id="7957986">(</span><span class="string" id="7957987">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7958025">,</span>&nbsp;<span class="ident" id="7958027">n</span><span class="op" id="7958028">,</span>&nbsp;<span class="ident" id="7958030">err</span><span class="op" id="7958033">,</span>&nbsp;<span class="builtinfunc" id="7958035">len</span><span class="op" id="7958038">(</span><span class="ident" id="7958039">wb</span><span class="op" id="7958041">)</span><span class="op" id="7958042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958045">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958049">rb</span>&nbsp;<span class="op" id="7958052">:=</span>&nbsp;<span class="builtinfunc" id="7958055">make</span><span class="op" id="7958059">(</span><span class="op" id="7958060">[</span><span class="op" id="7958061">]</span><span class="builtintype" id="7958062">byte</span><span class="op" id="7958066">,</span>&nbsp;<span class="num" id="7958068">1024</span><span class="op" id="7958072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958075">if</span>&nbsp;<span class="ident" id="7958078">n</span><span class="op" id="7958079">,</span>&nbsp;<span class="ident" id="7958081">err</span>&nbsp;<span class="op" id="7958085">:=</span>&nbsp;<span class="ident" id="7958088">c</span><span class="op" id="7958089">.</span><span class="ident" id="7958090">Read</span><span class="op" id="7958094">(</span><span class="ident" id="7958095">rb</span><span class="op" id="7958097">[</span><span class="num" id="7958098">0</span><span class="op" id="7958099">:</span><span class="op" id="7958100">]</span><span class="op" id="7958101">)</span><span class="op" id="7958102">;</span>&nbsp;<span class="ident" id="7958104">err</span>&nbsp;<span class="op" id="7958108">!=</span>&nbsp;<span class="ident" id="7958111">nil</span>&nbsp;<span class="op" id="7958115">||</span>&nbsp;<span class="ident" id="7958118">n</span>&nbsp;<span class="op" id="7958120">!=</span>&nbsp;<span class="builtinfunc" id="7958123">len</span><span class="op" id="7958126">(</span><span class="ident" id="7958127">wb</span><span class="op" id="7958129">)</span>&nbsp;<span class="op" id="7958131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958135">t</span><span class="op" id="7958136">.</span><span class="ident" id="7958137">Fatalf</span><span class="op" id="7958143">(</span><span class="string" id="7958144">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7958181">,</span>&nbsp;<span class="ident" id="7958183">n</span><span class="op" id="7958184">,</span>&nbsp;<span class="ident" id="7958186">err</span><span class="op" id="7958189">,</span>&nbsp;<span class="builtinfunc" id="7958191">len</span><span class="op" id="7958194">(</span><span class="ident" id="7958195">wb</span><span class="op" id="7958197">)</span><span class="op" id="7958198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958201">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7958205">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7958246">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958298">switch</span>&nbsp;<span class="ident" id="7958305">net</span>&nbsp;<span class="op" id="7958309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958312">case</span>&nbsp;<span class="string" id="7958317">&#34;unixpacket&#34;</span><span class="op" id="7958329">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958333">c</span><span class="op" id="7958334">.</span><span class="ident" id="7958335">Write</span><span class="op" id="7958340">(</span><span class="op" id="7958341">[</span><span class="op" id="7958342">]</span><span class="builtintype" id="7958343">byte</span><span class="op" id="7958347">(</span><span class="string" id="7958348">&#34;END&#34;</span><span class="op" id="7958353">)</span><span class="op" id="7958354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958357">}</span><br>
<span class="lineno"></span><span class="op" id="7958359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7958362">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="7958405">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="7958456">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="7958508">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="7958538">var</span>&nbsp;<span class="ident" id="7958542">testDatagram</span>&nbsp;<span class="op" id="7958555">=</span>&nbsp;<span class="ident" id="7958557">flag</span><span class="op" id="7958561">.</span><span class="ident" id="7958562">Bool</span><span class="op" id="7958566">(</span><span class="string" id="7958567">&#34;datagram&#34;</span><span class="op" id="7958577">,</span>&nbsp;<span class="builtintype" id="7958579">false</span><span class="op" id="7958584">,</span>&nbsp;<span class="string" id="7958586">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="7958620">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7958623">var</span>&nbsp;<span class="ident" id="7958627">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7958657">=</span>&nbsp;<span class="op" id="7958659">[</span><span class="op" id="7958660">]</span><span class="keyword" id="7958661">struct</span>&nbsp;<span class="op" id="7958668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958671">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958681">string</span>&nbsp;<span class="comment" id="7958688">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958704">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958714">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958722">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958732">string</span>&nbsp;<span class="comment" id="7958739">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958755">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958765">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958773">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958783">bool</span>&nbsp;<span class="comment" id="7958788">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958829">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958839">bool</span>&nbsp;<span class="comment" id="7958844">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958890">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958900">bool</span>&nbsp;<span class="comment" id="7958905">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958936">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7958946">bool</span>&nbsp;<span class="comment" id="7958951">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958976">linuxOnly</span>&nbsp;<span class="builtintype" id="7958986">bool</span>&nbsp;<span class="comment" id="7958991">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="7959045">}</span><span class="op" id="7959046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959049">{</span><span class="ident" id="7959050">snet</span><span class="op" id="7959054">:</span>&nbsp;<span class="string" id="7959056">&#34;udp&#34;</span><span class="op" id="7959061">,</span>&nbsp;<span class="ident" id="7959063">saddr</span><span class="op" id="7959068">:</span>&nbsp;<span class="string" id="7959070">&#34;&#34;</span><span class="op" id="7959072">,</span>&nbsp;<span class="ident" id="7959074">cnet</span><span class="op" id="7959078">:</span>&nbsp;<span class="string" id="7959080">&#34;udp&#34;</span><span class="op" id="7959085">,</span>&nbsp;<span class="ident" id="7959087">caddr</span><span class="op" id="7959092">:</span>&nbsp;<span class="string" id="7959094">&#34;127.0.0.1&#34;</span><span class="op" id="7959105">}</span><span class="op" id="7959106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959109">{</span><span class="ident" id="7959110">snet</span><span class="op" id="7959114">:</span>&nbsp;<span class="string" id="7959116">&#34;udp&#34;</span><span class="op" id="7959121">,</span>&nbsp;<span class="ident" id="7959123">saddr</span><span class="op" id="7959128">:</span>&nbsp;<span class="string" id="7959130">&#34;0.0.0.0&#34;</span><span class="op" id="7959139">,</span>&nbsp;<span class="ident" id="7959141">cnet</span><span class="op" id="7959145">:</span>&nbsp;<span class="string" id="7959147">&#34;udp&#34;</span><span class="op" id="7959152">,</span>&nbsp;<span class="ident" id="7959154">caddr</span><span class="op" id="7959159">:</span>&nbsp;<span class="string" id="7959161">&#34;127.0.0.1&#34;</span><span class="op" id="7959172">}</span><span class="op" id="7959173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959176">{</span><span class="ident" id="7959177">snet</span><span class="op" id="7959181">:</span>&nbsp;<span class="string" id="7959183">&#34;udp&#34;</span><span class="op" id="7959188">,</span>&nbsp;<span class="ident" id="7959190">saddr</span><span class="op" id="7959195">:</span>&nbsp;<span class="string" id="7959197">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7959215">,</span>&nbsp;<span class="ident" id="7959217">cnet</span><span class="op" id="7959221">:</span>&nbsp;<span class="string" id="7959223">&#34;udp&#34;</span><span class="op" id="7959228">,</span>&nbsp;<span class="ident" id="7959230">caddr</span><span class="op" id="7959235">:</span>&nbsp;<span class="string" id="7959237">&#34;127.0.0.1&#34;</span><span class="op" id="7959248">}</span><span class="op" id="7959249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959252">{</span><span class="ident" id="7959253">snet</span><span class="op" id="7959257">:</span>&nbsp;<span class="string" id="7959259">&#34;udp&#34;</span><span class="op" id="7959264">,</span>&nbsp;<span class="ident" id="7959266">saddr</span><span class="op" id="7959271">:</span>&nbsp;<span class="string" id="7959273">&#34;[::]&#34;</span><span class="op" id="7959279">,</span>&nbsp;<span class="ident" id="7959281">cnet</span><span class="op" id="7959285">:</span>&nbsp;<span class="string" id="7959287">&#34;udp&#34;</span><span class="op" id="7959292">,</span>&nbsp;<span class="ident" id="7959294">caddr</span><span class="op" id="7959299">:</span>&nbsp;<span class="string" id="7959301">&#34;[::1]&#34;</span><span class="op" id="7959308">,</span>&nbsp;<span class="ident" id="7959310">ipv6</span><span class="op" id="7959314">:</span>&nbsp;<span class="builtintype" id="7959316">true</span><span class="op" id="7959320">}</span><span class="op" id="7959321">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959325">{</span><span class="ident" id="7959326">snet</span><span class="op" id="7959330">:</span>&nbsp;<span class="string" id="7959332">&#34;udp&#34;</span><span class="op" id="7959337">,</span>&nbsp;<span class="ident" id="7959339">saddr</span><span class="op" id="7959344">:</span>&nbsp;<span class="string" id="7959346">&#34;&#34;</span><span class="op" id="7959348">,</span>&nbsp;<span class="ident" id="7959350">cnet</span><span class="op" id="7959354">:</span>&nbsp;<span class="string" id="7959356">&#34;udp&#34;</span><span class="op" id="7959361">,</span>&nbsp;<span class="ident" id="7959363">caddr</span><span class="op" id="7959368">:</span>&nbsp;<span class="string" id="7959370">&#34;[::1]&#34;</span><span class="op" id="7959377">,</span>&nbsp;<span class="ident" id="7959379">ipv4map</span><span class="op" id="7959386">:</span>&nbsp;<span class="builtintype" id="7959388">true</span><span class="op" id="7959392">}</span><span class="op" id="7959393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959396">{</span><span class="ident" id="7959397">snet</span><span class="op" id="7959401">:</span>&nbsp;<span class="string" id="7959403">&#34;udp&#34;</span><span class="op" id="7959408">,</span>&nbsp;<span class="ident" id="7959410">saddr</span><span class="op" id="7959415">:</span>&nbsp;<span class="string" id="7959417">&#34;0.0.0.0&#34;</span><span class="op" id="7959426">,</span>&nbsp;<span class="ident" id="7959428">cnet</span><span class="op" id="7959432">:</span>&nbsp;<span class="string" id="7959434">&#34;udp&#34;</span><span class="op" id="7959439">,</span>&nbsp;<span class="ident" id="7959441">caddr</span><span class="op" id="7959446">:</span>&nbsp;<span class="string" id="7959448">&#34;[::1]&#34;</span><span class="op" id="7959455">,</span>&nbsp;<span class="ident" id="7959457">ipv4map</span><span class="op" id="7959464">:</span>&nbsp;<span class="builtintype" id="7959466">true</span><span class="op" id="7959470">}</span><span class="op" id="7959471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959474">{</span><span class="ident" id="7959475">snet</span><span class="op" id="7959479">:</span>&nbsp;<span class="string" id="7959481">&#34;udp&#34;</span><span class="op" id="7959486">,</span>&nbsp;<span class="ident" id="7959488">saddr</span><span class="op" id="7959493">:</span>&nbsp;<span class="string" id="7959495">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7959513">,</span>&nbsp;<span class="ident" id="7959515">cnet</span><span class="op" id="7959519">:</span>&nbsp;<span class="string" id="7959521">&#34;udp&#34;</span><span class="op" id="7959526">,</span>&nbsp;<span class="ident" id="7959528">caddr</span><span class="op" id="7959533">:</span>&nbsp;<span class="string" id="7959535">&#34;[::1]&#34;</span><span class="op" id="7959542">,</span>&nbsp;<span class="ident" id="7959544">ipv4map</span><span class="op" id="7959551">:</span>&nbsp;<span class="builtintype" id="7959553">true</span><span class="op" id="7959557">}</span><span class="op" id="7959558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959561">{</span><span class="ident" id="7959562">snet</span><span class="op" id="7959566">:</span>&nbsp;<span class="string" id="7959568">&#34;udp&#34;</span><span class="op" id="7959573">,</span>&nbsp;<span class="ident" id="7959575">saddr</span><span class="op" id="7959580">:</span>&nbsp;<span class="string" id="7959582">&#34;[::]&#34;</span><span class="op" id="7959588">,</span>&nbsp;<span class="ident" id="7959590">cnet</span><span class="op" id="7959594">:</span>&nbsp;<span class="string" id="7959596">&#34;udp&#34;</span><span class="op" id="7959601">,</span>&nbsp;<span class="ident" id="7959603">caddr</span><span class="op" id="7959608">:</span>&nbsp;<span class="string" id="7959610">&#34;127.0.0.1&#34;</span><span class="op" id="7959621">,</span>&nbsp;<span class="ident" id="7959623">ipv4map</span><span class="op" id="7959630">:</span>&nbsp;<span class="builtintype" id="7959632">true</span><span class="op" id="7959636">}</span><span class="op" id="7959637">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959641">{</span><span class="ident" id="7959642">snet</span><span class="op" id="7959646">:</span>&nbsp;<span class="string" id="7959648">&#34;udp&#34;</span><span class="op" id="7959653">,</span>&nbsp;<span class="ident" id="7959655">saddr</span><span class="op" id="7959660">:</span>&nbsp;<span class="string" id="7959662">&#34;&#34;</span><span class="op" id="7959664">,</span>&nbsp;<span class="ident" id="7959666">cnet</span><span class="op" id="7959670">:</span>&nbsp;<span class="string" id="7959672">&#34;udp4&#34;</span><span class="op" id="7959678">,</span>&nbsp;<span class="ident" id="7959680">caddr</span><span class="op" id="7959685">:</span>&nbsp;<span class="string" id="7959687">&#34;127.0.0.1&#34;</span><span class="op" id="7959698">}</span><span class="op" id="7959699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959702">{</span><span class="ident" id="7959703">snet</span><span class="op" id="7959707">:</span>&nbsp;<span class="string" id="7959709">&#34;udp&#34;</span><span class="op" id="7959714">,</span>&nbsp;<span class="ident" id="7959716">saddr</span><span class="op" id="7959721">:</span>&nbsp;<span class="string" id="7959723">&#34;0.0.0.0&#34;</span><span class="op" id="7959732">,</span>&nbsp;<span class="ident" id="7959734">cnet</span><span class="op" id="7959738">:</span>&nbsp;<span class="string" id="7959740">&#34;udp4&#34;</span><span class="op" id="7959746">,</span>&nbsp;<span class="ident" id="7959748">caddr</span><span class="op" id="7959753">:</span>&nbsp;<span class="string" id="7959755">&#34;127.0.0.1&#34;</span><span class="op" id="7959766">}</span><span class="op" id="7959767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959770">{</span><span class="ident" id="7959771">snet</span><span class="op" id="7959775">:</span>&nbsp;<span class="string" id="7959777">&#34;udp&#34;</span><span class="op" id="7959782">,</span>&nbsp;<span class="ident" id="7959784">saddr</span><span class="op" id="7959789">:</span>&nbsp;<span class="string" id="7959791">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7959809">,</span>&nbsp;<span class="ident" id="7959811">cnet</span><span class="op" id="7959815">:</span>&nbsp;<span class="string" id="7959817">&#34;udp4&#34;</span><span class="op" id="7959823">,</span>&nbsp;<span class="ident" id="7959825">caddr</span><span class="op" id="7959830">:</span>&nbsp;<span class="string" id="7959832">&#34;127.0.0.1&#34;</span><span class="op" id="7959843">}</span><span class="op" id="7959844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959847">{</span><span class="ident" id="7959848">snet</span><span class="op" id="7959852">:</span>&nbsp;<span class="string" id="7959854">&#34;udp&#34;</span><span class="op" id="7959859">,</span>&nbsp;<span class="ident" id="7959861">saddr</span><span class="op" id="7959866">:</span>&nbsp;<span class="string" id="7959868">&#34;[::]&#34;</span><span class="op" id="7959874">,</span>&nbsp;<span class="ident" id="7959876">cnet</span><span class="op" id="7959880">:</span>&nbsp;<span class="string" id="7959882">&#34;udp6&#34;</span><span class="op" id="7959888">,</span>&nbsp;<span class="ident" id="7959890">caddr</span><span class="op" id="7959895">:</span>&nbsp;<span class="string" id="7959897">&#34;[::1]&#34;</span><span class="op" id="7959904">,</span>&nbsp;<span class="ident" id="7959906">ipv6</span><span class="op" id="7959910">:</span>&nbsp;<span class="builtintype" id="7959912">true</span><span class="op" id="7959916">}</span><span class="op" id="7959917">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959921">{</span><span class="ident" id="7959922">snet</span><span class="op" id="7959926">:</span>&nbsp;<span class="string" id="7959928">&#34;udp&#34;</span><span class="op" id="7959933">,</span>&nbsp;<span class="ident" id="7959935">saddr</span><span class="op" id="7959940">:</span>&nbsp;<span class="string" id="7959942">&#34;&#34;</span><span class="op" id="7959944">,</span>&nbsp;<span class="ident" id="7959946">cnet</span><span class="op" id="7959950">:</span>&nbsp;<span class="string" id="7959952">&#34;udp6&#34;</span><span class="op" id="7959958">,</span>&nbsp;<span class="ident" id="7959960">caddr</span><span class="op" id="7959965">:</span>&nbsp;<span class="string" id="7959967">&#34;[::1]&#34;</span><span class="op" id="7959974">,</span>&nbsp;<span class="ident" id="7959976">ipv4map</span><span class="op" id="7959983">:</span>&nbsp;<span class="builtintype" id="7959985">true</span><span class="op" id="7959989">}</span><span class="op" id="7959990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959993">{</span><span class="ident" id="7959994">snet</span><span class="op" id="7959998">:</span>&nbsp;<span class="string" id="7960000">&#34;udp&#34;</span><span class="op" id="7960005">,</span>&nbsp;<span class="ident" id="7960007">saddr</span><span class="op" id="7960012">:</span>&nbsp;<span class="string" id="7960014">&#34;0.0.0.0&#34;</span><span class="op" id="7960023">,</span>&nbsp;<span class="ident" id="7960025">cnet</span><span class="op" id="7960029">:</span>&nbsp;<span class="string" id="7960031">&#34;udp6&#34;</span><span class="op" id="7960037">,</span>&nbsp;<span class="ident" id="7960039">caddr</span><span class="op" id="7960044">:</span>&nbsp;<span class="string" id="7960046">&#34;[::1]&#34;</span><span class="op" id="7960053">,</span>&nbsp;<span class="ident" id="7960055">ipv4map</span><span class="op" id="7960062">:</span>&nbsp;<span class="builtintype" id="7960064">true</span><span class="op" id="7960068">}</span><span class="op" id="7960069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960072">{</span><span class="ident" id="7960073">snet</span><span class="op" id="7960077">:</span>&nbsp;<span class="string" id="7960079">&#34;udp&#34;</span><span class="op" id="7960084">,</span>&nbsp;<span class="ident" id="7960086">saddr</span><span class="op" id="7960091">:</span>&nbsp;<span class="string" id="7960093">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7960111">,</span>&nbsp;<span class="ident" id="7960113">cnet</span><span class="op" id="7960117">:</span>&nbsp;<span class="string" id="7960119">&#34;udp6&#34;</span><span class="op" id="7960125">,</span>&nbsp;<span class="ident" id="7960127">caddr</span><span class="op" id="7960132">:</span>&nbsp;<span class="string" id="7960134">&#34;[::1]&#34;</span><span class="op" id="7960141">,</span>&nbsp;<span class="ident" id="7960143">ipv4map</span><span class="op" id="7960150">:</span>&nbsp;<span class="builtintype" id="7960152">true</span><span class="op" id="7960156">}</span><span class="op" id="7960157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960160">{</span><span class="ident" id="7960161">snet</span><span class="op" id="7960165">:</span>&nbsp;<span class="string" id="7960167">&#34;udp&#34;</span><span class="op" id="7960172">,</span>&nbsp;<span class="ident" id="7960174">saddr</span><span class="op" id="7960179">:</span>&nbsp;<span class="string" id="7960181">&#34;[::]&#34;</span><span class="op" id="7960187">,</span>&nbsp;<span class="ident" id="7960189">cnet</span><span class="op" id="7960193">:</span>&nbsp;<span class="string" id="7960195">&#34;udp4&#34;</span><span class="op" id="7960201">,</span>&nbsp;<span class="ident" id="7960203">caddr</span><span class="op" id="7960208">:</span>&nbsp;<span class="string" id="7960210">&#34;127.0.0.1&#34;</span><span class="op" id="7960221">,</span>&nbsp;<span class="ident" id="7960223">ipv4map</span><span class="op" id="7960230">:</span>&nbsp;<span class="builtintype" id="7960232">true</span><span class="op" id="7960236">}</span><span class="op" id="7960237">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960241">{</span><span class="ident" id="7960242">snet</span><span class="op" id="7960246">:</span>&nbsp;<span class="string" id="7960248">&#34;udp&#34;</span><span class="op" id="7960253">,</span>&nbsp;<span class="ident" id="7960255">saddr</span><span class="op" id="7960260">:</span>&nbsp;<span class="string" id="7960262">&#34;127.0.0.1&#34;</span><span class="op" id="7960273">,</span>&nbsp;<span class="ident" id="7960275">cnet</span><span class="op" id="7960279">:</span>&nbsp;<span class="string" id="7960281">&#34;udp&#34;</span><span class="op" id="7960286">,</span>&nbsp;<span class="ident" id="7960288">caddr</span><span class="op" id="7960293">:</span>&nbsp;<span class="string" id="7960295">&#34;127.0.0.1&#34;</span><span class="op" id="7960306">}</span><span class="op" id="7960307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960310">{</span><span class="ident" id="7960311">snet</span><span class="op" id="7960315">:</span>&nbsp;<span class="string" id="7960317">&#34;udp&#34;</span><span class="op" id="7960322">,</span>&nbsp;<span class="ident" id="7960324">saddr</span><span class="op" id="7960329">:</span>&nbsp;<span class="string" id="7960331">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7960351">,</span>&nbsp;<span class="ident" id="7960353">cnet</span><span class="op" id="7960357">:</span>&nbsp;<span class="string" id="7960359">&#34;udp&#34;</span><span class="op" id="7960364">,</span>&nbsp;<span class="ident" id="7960366">caddr</span><span class="op" id="7960371">:</span>&nbsp;<span class="string" id="7960373">&#34;127.0.0.1&#34;</span><span class="op" id="7960384">}</span><span class="op" id="7960385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960388">{</span><span class="ident" id="7960389">snet</span><span class="op" id="7960393">:</span>&nbsp;<span class="string" id="7960395">&#34;udp&#34;</span><span class="op" id="7960400">,</span>&nbsp;<span class="ident" id="7960402">saddr</span><span class="op" id="7960407">:</span>&nbsp;<span class="string" id="7960409">&#34;[::1]&#34;</span><span class="op" id="7960416">,</span>&nbsp;<span class="ident" id="7960418">cnet</span><span class="op" id="7960422">:</span>&nbsp;<span class="string" id="7960424">&#34;udp&#34;</span><span class="op" id="7960429">,</span>&nbsp;<span class="ident" id="7960431">caddr</span><span class="op" id="7960436">:</span>&nbsp;<span class="string" id="7960438">&#34;[::1]&#34;</span><span class="op" id="7960445">,</span>&nbsp;<span class="ident" id="7960447">ipv6</span><span class="op" id="7960451">:</span>&nbsp;<span class="builtintype" id="7960453">true</span><span class="op" id="7960457">}</span><span class="op" id="7960458">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960462">{</span><span class="ident" id="7960463">snet</span><span class="op" id="7960467">:</span>&nbsp;<span class="string" id="7960469">&#34;udp4&#34;</span><span class="op" id="7960475">,</span>&nbsp;<span class="ident" id="7960477">saddr</span><span class="op" id="7960482">:</span>&nbsp;<span class="string" id="7960484">&#34;&#34;</span><span class="op" id="7960486">,</span>&nbsp;<span class="ident" id="7960488">cnet</span><span class="op" id="7960492">:</span>&nbsp;<span class="string" id="7960494">&#34;udp4&#34;</span><span class="op" id="7960500">,</span>&nbsp;<span class="ident" id="7960502">caddr</span><span class="op" id="7960507">:</span>&nbsp;<span class="string" id="7960509">&#34;127.0.0.1&#34;</span><span class="op" id="7960520">}</span><span class="op" id="7960521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960524">{</span><span class="ident" id="7960525">snet</span><span class="op" id="7960529">:</span>&nbsp;<span class="string" id="7960531">&#34;udp4&#34;</span><span class="op" id="7960537">,</span>&nbsp;<span class="ident" id="7960539">saddr</span><span class="op" id="7960544">:</span>&nbsp;<span class="string" id="7960546">&#34;0.0.0.0&#34;</span><span class="op" id="7960555">,</span>&nbsp;<span class="ident" id="7960557">cnet</span><span class="op" id="7960561">:</span>&nbsp;<span class="string" id="7960563">&#34;udp4&#34;</span><span class="op" id="7960569">,</span>&nbsp;<span class="ident" id="7960571">caddr</span><span class="op" id="7960576">:</span>&nbsp;<span class="string" id="7960578">&#34;127.0.0.1&#34;</span><span class="op" id="7960589">}</span><span class="op" id="7960590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960593">{</span><span class="ident" id="7960594">snet</span><span class="op" id="7960598">:</span>&nbsp;<span class="string" id="7960600">&#34;udp4&#34;</span><span class="op" id="7960606">,</span>&nbsp;<span class="ident" id="7960608">saddr</span><span class="op" id="7960613">:</span>&nbsp;<span class="string" id="7960615">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7960633">,</span>&nbsp;<span class="ident" id="7960635">cnet</span><span class="op" id="7960639">:</span>&nbsp;<span class="string" id="7960641">&#34;udp4&#34;</span><span class="op" id="7960647">,</span>&nbsp;<span class="ident" id="7960649">caddr</span><span class="op" id="7960654">:</span>&nbsp;<span class="string" id="7960656">&#34;127.0.0.1&#34;</span><span class="op" id="7960667">}</span><span class="op" id="7960668">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960672">{</span><span class="ident" id="7960673">snet</span><span class="op" id="7960677">:</span>&nbsp;<span class="string" id="7960679">&#34;udp4&#34;</span><span class="op" id="7960685">,</span>&nbsp;<span class="ident" id="7960687">saddr</span><span class="op" id="7960692">:</span>&nbsp;<span class="string" id="7960694">&#34;127.0.0.1&#34;</span><span class="op" id="7960705">,</span>&nbsp;<span class="ident" id="7960707">cnet</span><span class="op" id="7960711">:</span>&nbsp;<span class="string" id="7960713">&#34;udp4&#34;</span><span class="op" id="7960719">,</span>&nbsp;<span class="ident" id="7960721">caddr</span><span class="op" id="7960726">:</span>&nbsp;<span class="string" id="7960728">&#34;127.0.0.1&#34;</span><span class="op" id="7960739">}</span><span class="op" id="7960740">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960744">{</span><span class="ident" id="7960745">snet</span><span class="op" id="7960749">:</span>&nbsp;<span class="string" id="7960751">&#34;udp6&#34;</span><span class="op" id="7960757">,</span>&nbsp;<span class="ident" id="7960759">saddr</span><span class="op" id="7960764">:</span>&nbsp;<span class="string" id="7960766">&#34;&#34;</span><span class="op" id="7960768">,</span>&nbsp;<span class="ident" id="7960770">cnet</span><span class="op" id="7960774">:</span>&nbsp;<span class="string" id="7960776">&#34;udp6&#34;</span><span class="op" id="7960782">,</span>&nbsp;<span class="ident" id="7960784">caddr</span><span class="op" id="7960789">:</span>&nbsp;<span class="string" id="7960791">&#34;[::1]&#34;</span><span class="op" id="7960798">,</span>&nbsp;<span class="ident" id="7960800">ipv6</span><span class="op" id="7960804">:</span>&nbsp;<span class="builtintype" id="7960806">true</span><span class="op" id="7960810">}</span><span class="op" id="7960811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960814">{</span><span class="ident" id="7960815">snet</span><span class="op" id="7960819">:</span>&nbsp;<span class="string" id="7960821">&#34;udp6&#34;</span><span class="op" id="7960827">,</span>&nbsp;<span class="ident" id="7960829">saddr</span><span class="op" id="7960834">:</span>&nbsp;<span class="string" id="7960836">&#34;[::]&#34;</span><span class="op" id="7960842">,</span>&nbsp;<span class="ident" id="7960844">cnet</span><span class="op" id="7960848">:</span>&nbsp;<span class="string" id="7960850">&#34;udp6&#34;</span><span class="op" id="7960856">,</span>&nbsp;<span class="ident" id="7960858">caddr</span><span class="op" id="7960863">:</span>&nbsp;<span class="string" id="7960865">&#34;[::1]&#34;</span><span class="op" id="7960872">,</span>&nbsp;<span class="ident" id="7960874">ipv6</span><span class="op" id="7960878">:</span>&nbsp;<span class="builtintype" id="7960880">true</span><span class="op" id="7960884">}</span><span class="op" id="7960885">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960889">{</span><span class="ident" id="7960890">snet</span><span class="op" id="7960894">:</span>&nbsp;<span class="string" id="7960896">&#34;udp6&#34;</span><span class="op" id="7960902">,</span>&nbsp;<span class="ident" id="7960904">saddr</span><span class="op" id="7960909">:</span>&nbsp;<span class="string" id="7960911">&#34;[::1]&#34;</span><span class="op" id="7960918">,</span>&nbsp;<span class="ident" id="7960920">cnet</span><span class="op" id="7960924">:</span>&nbsp;<span class="string" id="7960926">&#34;udp6&#34;</span><span class="op" id="7960932">,</span>&nbsp;<span class="ident" id="7960934">caddr</span><span class="op" id="7960939">:</span>&nbsp;<span class="string" id="7960941">&#34;[::1]&#34;</span><span class="op" id="7960948">,</span>&nbsp;<span class="ident" id="7960950">ipv6</span><span class="op" id="7960954">:</span>&nbsp;<span class="builtintype" id="7960956">true</span><span class="op" id="7960960">}</span><span class="op" id="7960961">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960965">{</span><span class="ident" id="7960966">snet</span><span class="op" id="7960970">:</span>&nbsp;<span class="string" id="7960972">&#34;udp&#34;</span><span class="op" id="7960977">,</span>&nbsp;<span class="ident" id="7960979">saddr</span><span class="op" id="7960984">:</span>&nbsp;<span class="string" id="7960986">&#34;127.0.0.1&#34;</span><span class="op" id="7960997">,</span>&nbsp;<span class="ident" id="7960999">cnet</span><span class="op" id="7961003">:</span>&nbsp;<span class="string" id="7961005">&#34;udp&#34;</span><span class="op" id="7961010">,</span>&nbsp;<span class="ident" id="7961012">caddr</span><span class="op" id="7961017">:</span>&nbsp;<span class="string" id="7961019">&#34;127.0.0.1&#34;</span><span class="op" id="7961030">,</span>&nbsp;<span class="ident" id="7961032">dial</span><span class="op" id="7961036">:</span>&nbsp;<span class="builtintype" id="7961038">true</span><span class="op" id="7961042">}</span><span class="op" id="7961043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961046">{</span><span class="ident" id="7961047">snet</span><span class="op" id="7961051">:</span>&nbsp;<span class="string" id="7961053">&#34;udp&#34;</span><span class="op" id="7961058">,</span>&nbsp;<span class="ident" id="7961060">saddr</span><span class="op" id="7961065">:</span>&nbsp;<span class="string" id="7961067">&#34;127.0.0.1&#34;</span><span class="op" id="7961078">,</span>&nbsp;<span class="ident" id="7961080">cnet</span><span class="op" id="7961084">:</span>&nbsp;<span class="string" id="7961086">&#34;udp&#34;</span><span class="op" id="7961091">,</span>&nbsp;<span class="ident" id="7961093">caddr</span><span class="op" id="7961098">:</span>&nbsp;<span class="string" id="7961100">&#34;127.0.0.1&#34;</span><span class="op" id="7961111">,</span>&nbsp;<span class="ident" id="7961113">empty</span><span class="op" id="7961118">:</span>&nbsp;<span class="builtintype" id="7961120">true</span><span class="op" id="7961124">}</span><span class="op" id="7961125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961128">{</span><span class="ident" id="7961129">snet</span><span class="op" id="7961133">:</span>&nbsp;<span class="string" id="7961135">&#34;udp&#34;</span><span class="op" id="7961140">,</span>&nbsp;<span class="ident" id="7961142">saddr</span><span class="op" id="7961147">:</span>&nbsp;<span class="string" id="7961149">&#34;127.0.0.1&#34;</span><span class="op" id="7961160">,</span>&nbsp;<span class="ident" id="7961162">cnet</span><span class="op" id="7961166">:</span>&nbsp;<span class="string" id="7961168">&#34;udp&#34;</span><span class="op" id="7961173">,</span>&nbsp;<span class="ident" id="7961175">caddr</span><span class="op" id="7961180">:</span>&nbsp;<span class="string" id="7961182">&#34;127.0.0.1&#34;</span><span class="op" id="7961193">,</span>&nbsp;<span class="ident" id="7961195">dial</span><span class="op" id="7961199">:</span>&nbsp;<span class="builtintype" id="7961201">true</span><span class="op" id="7961205">,</span>&nbsp;<span class="ident" id="7961207">empty</span><span class="op" id="7961212">:</span>&nbsp;<span class="builtintype" id="7961214">true</span><span class="op" id="7961218">}</span><span class="op" id="7961219">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961223">{</span><span class="ident" id="7961224">snet</span><span class="op" id="7961228">:</span>&nbsp;<span class="string" id="7961230">&#34;udp&#34;</span><span class="op" id="7961235">,</span>&nbsp;<span class="ident" id="7961237">saddr</span><span class="op" id="7961242">:</span>&nbsp;<span class="string" id="7961244">&#34;[::1]&#34;</span><span class="op" id="7961251">,</span>&nbsp;<span class="ident" id="7961253">cnet</span><span class="op" id="7961257">:</span>&nbsp;<span class="string" id="7961259">&#34;udp&#34;</span><span class="op" id="7961264">,</span>&nbsp;<span class="ident" id="7961266">caddr</span><span class="op" id="7961271">:</span>&nbsp;<span class="string" id="7961273">&#34;[::1]&#34;</span><span class="op" id="7961280">,</span>&nbsp;<span class="ident" id="7961282">ipv6</span><span class="op" id="7961286">:</span>&nbsp;<span class="builtintype" id="7961288">true</span><span class="op" id="7961292">,</span>&nbsp;<span class="ident" id="7961294">dial</span><span class="op" id="7961298">:</span>&nbsp;<span class="builtintype" id="7961300">true</span><span class="op" id="7961304">}</span><span class="op" id="7961305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961308">{</span><span class="ident" id="7961309">snet</span><span class="op" id="7961313">:</span>&nbsp;<span class="string" id="7961315">&#34;udp&#34;</span><span class="op" id="7961320">,</span>&nbsp;<span class="ident" id="7961322">saddr</span><span class="op" id="7961327">:</span>&nbsp;<span class="string" id="7961329">&#34;[::1]&#34;</span><span class="op" id="7961336">,</span>&nbsp;<span class="ident" id="7961338">cnet</span><span class="op" id="7961342">:</span>&nbsp;<span class="string" id="7961344">&#34;udp&#34;</span><span class="op" id="7961349">,</span>&nbsp;<span class="ident" id="7961351">caddr</span><span class="op" id="7961356">:</span>&nbsp;<span class="string" id="7961358">&#34;[::1]&#34;</span><span class="op" id="7961365">,</span>&nbsp;<span class="ident" id="7961367">ipv6</span><span class="op" id="7961371">:</span>&nbsp;<span class="builtintype" id="7961373">true</span><span class="op" id="7961377">,</span>&nbsp;<span class="ident" id="7961379">empty</span><span class="op" id="7961384">:</span>&nbsp;<span class="builtintype" id="7961386">true</span><span class="op" id="7961390">}</span><span class="op" id="7961391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961394">{</span><span class="ident" id="7961395">snet</span><span class="op" id="7961399">:</span>&nbsp;<span class="string" id="7961401">&#34;udp&#34;</span><span class="op" id="7961406">,</span>&nbsp;<span class="ident" id="7961408">saddr</span><span class="op" id="7961413">:</span>&nbsp;<span class="string" id="7961415">&#34;[::1]&#34;</span><span class="op" id="7961422">,</span>&nbsp;<span class="ident" id="7961424">cnet</span><span class="op" id="7961428">:</span>&nbsp;<span class="string" id="7961430">&#34;udp&#34;</span><span class="op" id="7961435">,</span>&nbsp;<span class="ident" id="7961437">caddr</span><span class="op" id="7961442">:</span>&nbsp;<span class="string" id="7961444">&#34;[::1]&#34;</span><span class="op" id="7961451">,</span>&nbsp;<span class="ident" id="7961453">ipv6</span><span class="op" id="7961457">:</span>&nbsp;<span class="builtintype" id="7961459">true</span><span class="op" id="7961463">,</span>&nbsp;<span class="ident" id="7961465">dial</span><span class="op" id="7961469">:</span>&nbsp;<span class="builtintype" id="7961471">true</span><span class="op" id="7961475">,</span>&nbsp;<span class="ident" id="7961477">empty</span><span class="op" id="7961482">:</span>&nbsp;<span class="builtintype" id="7961484">true</span><span class="op" id="7961488">}</span><span class="op" id="7961489">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961493">{</span><span class="ident" id="7961494">snet</span><span class="op" id="7961498">:</span>&nbsp;<span class="string" id="7961500">&#34;unixgram&#34;</span><span class="op" id="7961510">,</span>&nbsp;<span class="ident" id="7961512">saddr</span><span class="op" id="7961517">:</span>&nbsp;<span class="ident" id="7961519">testUnixAddr</span><span class="op" id="7961531">(</span><span class="op" id="7961532">)</span><span class="op" id="7961533">,</span>&nbsp;<span class="ident" id="7961535">cnet</span><span class="op" id="7961539">:</span>&nbsp;<span class="string" id="7961541">&#34;unixgram&#34;</span><span class="op" id="7961551">,</span>&nbsp;<span class="ident" id="7961553">caddr</span><span class="op" id="7961558">:</span>&nbsp;<span class="ident" id="7961560">testUnixAddr</span><span class="op" id="7961572">(</span><span class="op" id="7961573">)</span><span class="op" id="7961574">}</span><span class="op" id="7961575">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961578">{</span><span class="ident" id="7961579">snet</span><span class="op" id="7961583">:</span>&nbsp;<span class="string" id="7961585">&#34;unixgram&#34;</span><span class="op" id="7961595">,</span>&nbsp;<span class="ident" id="7961597">saddr</span><span class="op" id="7961602">:</span>&nbsp;<span class="ident" id="7961604">testUnixAddr</span><span class="op" id="7961616">(</span><span class="op" id="7961617">)</span><span class="op" id="7961618">,</span>&nbsp;<span class="ident" id="7961620">cnet</span><span class="op" id="7961624">:</span>&nbsp;<span class="string" id="7961626">&#34;unixgram&#34;</span><span class="op" id="7961636">,</span>&nbsp;<span class="ident" id="7961638">caddr</span><span class="op" id="7961643">:</span>&nbsp;<span class="ident" id="7961645">testUnixAddr</span><span class="op" id="7961657">(</span><span class="op" id="7961658">)</span><span class="op" id="7961659">,</span>&nbsp;<span class="ident" id="7961661">dial</span><span class="op" id="7961665">:</span>&nbsp;<span class="builtintype" id="7961667">true</span><span class="op" id="7961671">}</span><span class="op" id="7961672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961675">{</span><span class="ident" id="7961676">snet</span><span class="op" id="7961680">:</span>&nbsp;<span class="string" id="7961682">&#34;unixgram&#34;</span><span class="op" id="7961692">,</span>&nbsp;<span class="ident" id="7961694">saddr</span><span class="op" id="7961699">:</span>&nbsp;<span class="ident" id="7961701">testUnixAddr</span><span class="op" id="7961713">(</span><span class="op" id="7961714">)</span><span class="op" id="7961715">,</span>&nbsp;<span class="ident" id="7961717">cnet</span><span class="op" id="7961721">:</span>&nbsp;<span class="string" id="7961723">&#34;unixgram&#34;</span><span class="op" id="7961733">,</span>&nbsp;<span class="ident" id="7961735">caddr</span><span class="op" id="7961740">:</span>&nbsp;<span class="ident" id="7961742">testUnixAddr</span><span class="op" id="7961754">(</span><span class="op" id="7961755">)</span><span class="op" id="7961756">,</span>&nbsp;<span class="ident" id="7961758">empty</span><span class="op" id="7961763">:</span>&nbsp;<span class="builtintype" id="7961765">true</span><span class="op" id="7961769">}</span><span class="op" id="7961770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961773">{</span><span class="ident" id="7961774">snet</span><span class="op" id="7961778">:</span>&nbsp;<span class="string" id="7961780">&#34;unixgram&#34;</span><span class="op" id="7961790">,</span>&nbsp;<span class="ident" id="7961792">saddr</span><span class="op" id="7961797">:</span>&nbsp;<span class="ident" id="7961799">testUnixAddr</span><span class="op" id="7961811">(</span><span class="op" id="7961812">)</span><span class="op" id="7961813">,</span>&nbsp;<span class="ident" id="7961815">cnet</span><span class="op" id="7961819">:</span>&nbsp;<span class="string" id="7961821">&#34;unixgram&#34;</span><span class="op" id="7961831">,</span>&nbsp;<span class="ident" id="7961833">caddr</span><span class="op" id="7961838">:</span>&nbsp;<span class="ident" id="7961840">testUnixAddr</span><span class="op" id="7961852">(</span><span class="op" id="7961853">)</span><span class="op" id="7961854">,</span>&nbsp;<span class="ident" id="7961856">dial</span><span class="op" id="7961860">:</span>&nbsp;<span class="builtintype" id="7961862">true</span><span class="op" id="7961866">,</span>&nbsp;<span class="ident" id="7961868">empty</span><span class="op" id="7961873">:</span>&nbsp;<span class="builtintype" id="7961875">true</span><span class="op" id="7961879">}</span><span class="op" id="7961880">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961884">{</span><span class="ident" id="7961885">snet</span><span class="op" id="7961889">:</span>&nbsp;<span class="string" id="7961891">&#34;unixgram&#34;</span><span class="op" id="7961901">,</span>&nbsp;<span class="ident" id="7961903">saddr</span><span class="op" id="7961908">:</span>&nbsp;<span class="string" id="7961910">&#34;@gotest6/net&#34;</span><span class="op" id="7961924">,</span>&nbsp;<span class="ident" id="7961926">cnet</span><span class="op" id="7961930">:</span>&nbsp;<span class="string" id="7961932">&#34;unixgram&#34;</span><span class="op" id="7961942">,</span>&nbsp;<span class="ident" id="7961944">caddr</span><span class="op" id="7961949">:</span>&nbsp;<span class="string" id="7961951">&#34;@gotest6/net.local&#34;</span><span class="op" id="7961971">,</span>&nbsp;<span class="ident" id="7961973">linuxOnly</span><span class="op" id="7961982">:</span>&nbsp;<span class="builtintype" id="7961984">true</span><span class="op" id="7961988">}</span><span class="op" id="7961989">,</span><br>
<span class="lineno">310</span><span class="op" id="7961991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7961994">func</span>&nbsp;<span class="ident" id="7961999">TestDatagramPacketConnServer</span><span class="op" id="7962027">(</span><span class="ident" id="7962028">t</span>&nbsp;<span class="op" id="7962030">*</span><span class="ident" id="7962031">testing</span><span class="op" id="7962038">.</span><span class="ident" id="7962039">T</span><span class="op" id="7962040">)</span>&nbsp;<span class="op" id="7962042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962045">if</span>&nbsp;<span class="op" id="7962048">!</span><span class="op" id="7962049">*</span><span class="ident" id="7962050">testDatagram</span>&nbsp;<span class="op" id="7962063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962067">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962079">for</span>&nbsp;<span class="ident" id="7962083">_</span><span class="op" id="7962084">,</span>&nbsp;<span class="ident" id="7962086">tt</span>&nbsp;<span class="op" id="7962089">:=</span>&nbsp;<span class="keyword" id="7962092">range</span>&nbsp;<span class="ident" id="7962098">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7962128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962132">if</span>&nbsp;<span class="ident" id="7962135">skipServerTest</span><span class="op" id="7962149">(</span><span class="ident" id="7962150">tt</span><span class="op" id="7962152">.</span><span class="ident" id="7962153">snet</span><span class="op" id="7962157">,</span>&nbsp;<span class="string" id="7962159">&#34;unixgram&#34;</span><span class="op" id="7962169">,</span>&nbsp;<span class="ident" id="7962171">tt</span><span class="op" id="7962173">.</span><span class="ident" id="7962174">saddr</span><span class="op" id="7962179">,</span>&nbsp;<span class="ident" id="7962181">tt</span><span class="op" id="7962183">.</span><span class="ident" id="7962184">ipv6</span><span class="op" id="7962188">,</span>&nbsp;<span class="ident" id="7962190">tt</span><span class="op" id="7962192">.</span><span class="ident" id="7962193">ipv4map</span><span class="op" id="7962200">,</span>&nbsp;<span class="ident" id="7962202">tt</span><span class="op" id="7962204">.</span><span class="ident" id="7962205">linuxOnly</span><span class="op" id="7962214">)</span>&nbsp;<span class="op" id="7962216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962221">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962237">listening</span>&nbsp;<span class="op" id="7962247">:=</span>&nbsp;<span class="builtinfunc" id="7962250">make</span><span class="op" id="7962254">(</span><span class="keyword" id="7962255">chan</span>&nbsp;<span class="builtintype" id="7962260">string</span><span class="op" id="7962266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962270">done</span>&nbsp;<span class="op" id="7962275">:=</span>&nbsp;<span class="builtinfunc" id="7962278">make</span><span class="op" id="7962282">(</span><span class="keyword" id="7962283">chan</span>&nbsp;<span class="builtintype" id="7962288">int</span><span class="op" id="7962291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962295">switch</span>&nbsp;<span class="ident" id="7962302">tt</span><span class="op" id="7962304">.</span><span class="ident" id="7962305">snet</span>&nbsp;<span class="op" id="7962310">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962314">case</span>&nbsp;<span class="string" id="7962319">&#34;udp&#34;</span><span class="op" id="7962324">,</span>&nbsp;<span class="string" id="7962326">&#34;udp4&#34;</span><span class="op" id="7962332">,</span>&nbsp;<span class="string" id="7962334">&#34;udp6&#34;</span><span class="op" id="7962340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962345">tt</span><span class="op" id="7962347">.</span><span class="ident" id="7962348">saddr</span>&nbsp;<span class="op" id="7962354">+=</span>&nbsp;<span class="string" id="7962357">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962364">case</span>&nbsp;<span class="string" id="7962369">&#34;unixgram&#34;</span><span class="op" id="7962379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962384">os</span><span class="op" id="7962386">.</span><span class="ident" id="7962387">Remove</span><span class="op" id="7962393">(</span><span class="ident" id="7962394">tt</span><span class="op" id="7962396">.</span><span class="ident" id="7962397">saddr</span><span class="op" id="7962402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962407">os</span><span class="op" id="7962409">.</span><span class="ident" id="7962410">Remove</span><span class="op" id="7962416">(</span><span class="ident" id="7962417">tt</span><span class="op" id="7962419">.</span><span class="ident" id="7962420">caddr</span><span class="op" id="7962425">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962434">go</span>&nbsp;<span class="ident" id="7962437">runDatagramPacketConnServer</span><span class="op" id="7962464">(</span><span class="ident" id="7962465">t</span><span class="op" id="7962466">,</span>&nbsp;<span class="ident" id="7962468">tt</span><span class="op" id="7962470">.</span><span class="ident" id="7962471">snet</span><span class="op" id="7962475">,</span>&nbsp;<span class="ident" id="7962477">tt</span><span class="op" id="7962479">.</span><span class="ident" id="7962480">saddr</span><span class="op" id="7962485">,</span>&nbsp;<span class="ident" id="7962487">listening</span><span class="op" id="7962496">,</span>&nbsp;<span class="ident" id="7962498">done</span><span class="op" id="7962502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962506">taddr</span>&nbsp;<span class="op" id="7962512">:=</span>&nbsp;<span class="op" id="7962515">&lt;-</span><span class="ident" id="7962517">listening</span>&nbsp;<span class="comment" id="7962527">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962558">switch</span>&nbsp;<span class="ident" id="7962565">tt</span><span class="op" id="7962567">.</span><span class="ident" id="7962568">cnet</span>&nbsp;<span class="op" id="7962573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962577">case</span>&nbsp;<span class="string" id="7962582">&#34;udp&#34;</span><span class="op" id="7962587">,</span>&nbsp;<span class="string" id="7962589">&#34;udp4&#34;</span><span class="op" id="7962595">,</span>&nbsp;<span class="string" id="7962597">&#34;udp6&#34;</span><span class="op" id="7962603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962608">_</span><span class="op" id="7962609">,</span>&nbsp;<span class="ident" id="7962611">port</span><span class="op" id="7962615">,</span>&nbsp;<span class="ident" id="7962617">err</span>&nbsp;<span class="op" id="7962621">:=</span>&nbsp;<span class="ident" id="7962624">SplitHostPort</span><span class="op" id="7962637">(</span><span class="ident" id="7962638">taddr</span><span class="op" id="7962643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962648">if</span>&nbsp;<span class="ident" id="7962651">err</span>&nbsp;<span class="op" id="7962655">!=</span>&nbsp;<span class="ident" id="7962658">nil</span>&nbsp;<span class="op" id="7962662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962668">t</span><span class="op" id="7962669">.</span><span class="ident" id="7962670">Fatalf</span><span class="op" id="7962676">(</span><span class="string" id="7962677">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7962707">,</span>&nbsp;<span class="ident" id="7962709">taddr</span><span class="op" id="7962714">,</span>&nbsp;<span class="ident" id="7962716">err</span><span class="op" id="7962719">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962729">taddr</span>&nbsp;<span class="op" id="7962735">=</span>&nbsp;<span class="ident" id="7962737">tt</span><span class="op" id="7962739">.</span><span class="ident" id="7962740">caddr</span>&nbsp;<span class="op" id="7962746">+</span>&nbsp;<span class="string" id="7962748">&#34;:&#34;</span>&nbsp;<span class="op" id="7962752">+</span>&nbsp;<span class="ident" id="7962754">port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962762">tt</span><span class="op" id="7962764">.</span><span class="ident" id="7962765">caddr</span>&nbsp;<span class="op" id="7962771">+=</span>&nbsp;<span class="string" id="7962774">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962785">if</span>&nbsp;<span class="ident" id="7962788">tt</span><span class="op" id="7962790">.</span><span class="ident" id="7962791">dial</span>&nbsp;<span class="op" id="7962796">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962801">runDatagramConnClient</span><span class="op" id="7962822">(</span><span class="ident" id="7962823">t</span><span class="op" id="7962824">,</span>&nbsp;<span class="ident" id="7962826">tt</span><span class="op" id="7962828">.</span><span class="ident" id="7962829">cnet</span><span class="op" id="7962833">,</span>&nbsp;<span class="ident" id="7962835">tt</span><span class="op" id="7962837">.</span><span class="ident" id="7962838">caddr</span><span class="op" id="7962843">,</span>&nbsp;<span class="ident" id="7962845">taddr</span><span class="op" id="7962850">,</span>&nbsp;<span class="ident" id="7962852">tt</span><span class="op" id="7962854">.</span><span class="ident" id="7962855">empty</span><span class="op" id="7962860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962864">}</span>&nbsp;<span class="keyword" id="7962866">else</span>&nbsp;<span class="op" id="7962871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962876">runDatagramPacketConnClient</span><span class="op" id="7962903">(</span><span class="ident" id="7962904">t</span><span class="op" id="7962905">,</span>&nbsp;<span class="ident" id="7962907">tt</span><span class="op" id="7962909">.</span><span class="ident" id="7962910">cnet</span><span class="op" id="7962914">,</span>&nbsp;<span class="ident" id="7962916">tt</span><span class="op" id="7962918">.</span><span class="ident" id="7962919">caddr</span><span class="op" id="7962924">,</span>&nbsp;<span class="ident" id="7962926">taddr</span><span class="op" id="7962931">,</span>&nbsp;<span class="ident" id="7962933">tt</span><span class="op" id="7962935">.</span><span class="ident" id="7962936">empty</span><span class="op" id="7962941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962949">&lt;-</span><span class="ident" id="7962951">done</span>&nbsp;<span class="comment" id="7962956">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962981">&lt;-</span><span class="ident" id="7962983">done</span>&nbsp;<span class="comment" id="7962988">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963019">switch</span>&nbsp;<span class="ident" id="7963026">tt</span><span class="op" id="7963028">.</span><span class="ident" id="7963029">snet</span>&nbsp;<span class="op" id="7963034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963038">case</span>&nbsp;<span class="string" id="7963043">&#34;unixgram&#34;</span><span class="op" id="7963053">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963058">os</span><span class="op" id="7963060">.</span><span class="ident" id="7963061">Remove</span><span class="op" id="7963067">(</span><span class="ident" id="7963068">tt</span><span class="op" id="7963070">.</span><span class="ident" id="7963071">saddr</span><span class="op" id="7963076">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963081">os</span><span class="op" id="7963083">.</span><span class="ident" id="7963084">Remove</span><span class="op" id="7963090">(</span><span class="ident" id="7963091">tt</span><span class="op" id="7963093">.</span><span class="ident" id="7963094">caddr</span><span class="op" id="7963099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963106">}</span><br>
<span class="lineno"></span><span class="op" id="7963108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="7963111">func</span>&nbsp;<span class="ident" id="7963116">runDatagramPacketConnServer</span><span class="op" id="7963143">(</span><span class="ident" id="7963144">t</span>&nbsp;<span class="op" id="7963146">*</span><span class="ident" id="7963147">testing</span><span class="op" id="7963154">.</span><span class="ident" id="7963155">T</span><span class="op" id="7963156">,</span>&nbsp;<span class="ident" id="7963158">net</span><span class="op" id="7963161">,</span>&nbsp;<span class="ident" id="7963163">laddr</span>&nbsp;<span class="builtintype" id="7963169">string</span><span class="op" id="7963175">,</span>&nbsp;<span class="ident" id="7963177">listening</span>&nbsp;<span class="keyword" id="7963187">chan</span><span class="op" id="7963191">&lt;-</span>&nbsp;<span class="builtintype" id="7963194">string</span><span class="op" id="7963200">,</span>&nbsp;<span class="ident" id="7963202">done</span>&nbsp;<span class="keyword" id="7963207">chan</span><span class="op" id="7963211">&lt;-</span>&nbsp;<span class="builtintype" id="7963214">int</span><span class="op" id="7963217">)</span>&nbsp;<span class="op" id="7963219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963222">c</span><span class="op" id="7963223">,</span>&nbsp;<span class="ident" id="7963225">err</span>&nbsp;<span class="op" id="7963229">:=</span>&nbsp;<span class="ident" id="7963232">ListenPacket</span><span class="op" id="7963244">(</span><span class="ident" id="7963245">net</span><span class="op" id="7963248">,</span>&nbsp;<span class="ident" id="7963250">laddr</span><span class="op" id="7963255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963258">if</span>&nbsp;<span class="ident" id="7963261">err</span>&nbsp;<span class="op" id="7963265">!=</span>&nbsp;<span class="ident" id="7963268">nil</span>&nbsp;<span class="op" id="7963272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963276">t</span><span class="op" id="7963277">.</span><span class="ident" id="7963278">Errorf</span><span class="op" id="7963284">(</span><span class="string" id="7963285">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7963318">,</span>&nbsp;<span class="ident" id="7963320">net</span><span class="op" id="7963323">,</span>&nbsp;<span class="ident" id="7963325">laddr</span><span class="op" id="7963330">,</span>&nbsp;<span class="ident" id="7963332">err</span><span class="op" id="7963335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963339">listening</span>&nbsp;<span class="op" id="7963349">&lt;-</span>&nbsp;<span class="string" id="7963352">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963362">done</span>&nbsp;<span class="op" id="7963367">&lt;-</span>&nbsp;<span class="num" id="7963370">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963374">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963385">defer</span>&nbsp;<span class="ident" id="7963391">c</span><span class="op" id="7963392">.</span><span class="ident" id="7963393">Close</span><span class="op" id="7963398">(</span><span class="op" id="7963399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963402">listening</span>&nbsp;<span class="op" id="7963412">&lt;-</span>&nbsp;<span class="ident" id="7963415">c</span><span class="op" id="7963416">.</span><span class="ident" id="7963417">LocalAddr</span><span class="op" id="7963426">(</span><span class="op" id="7963427">)</span><span class="op" id="7963428">.</span><span class="ident" id="7963429">String</span><span class="op" id="7963435">(</span><span class="op" id="7963436">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963440">buf</span>&nbsp;<span class="op" id="7963444">:=</span>&nbsp;<span class="builtinfunc" id="7963447">make</span><span class="op" id="7963451">(</span><span class="op" id="7963452">[</span><span class="op" id="7963453">]</span><span class="builtintype" id="7963454">byte</span><span class="op" id="7963458">,</span>&nbsp;<span class="num" id="7963460">1024</span><span class="op" id="7963464">)</span><br>
<span class="lineno"></span><span class="ident" id="7963466">run</span><span class="op" id="7963469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963472">for</span>&nbsp;<span class="op" id="7963476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963480">c</span><span class="op" id="7963481">.</span><span class="ident" id="7963482">SetReadDeadline</span><span class="op" id="7963497">(</span><span class="ident" id="7963498">time</span><span class="op" id="7963502">.</span><span class="ident" id="7963503">Now</span><span class="op" id="7963506">(</span><span class="op" id="7963507">)</span><span class="op" id="7963508">.</span><span class="ident" id="7963509">Add</span><span class="op" id="7963512">(</span><span class="num" id="7963513">10</span>&nbsp;<span class="op" id="7963516">*</span>&nbsp;<span class="ident" id="7963518">time</span><span class="op" id="7963522">.</span><span class="ident" id="7963523">Millisecond</span><span class="op" id="7963534">)</span><span class="op" id="7963535">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963539">n</span><span class="op" id="7963540">,</span>&nbsp;<span class="ident" id="7963542">ra</span><span class="op" id="7963544">,</span>&nbsp;<span class="ident" id="7963546">err</span>&nbsp;<span class="op" id="7963550">:=</span>&nbsp;<span class="ident" id="7963553">c</span><span class="op" id="7963554">.</span><span class="ident" id="7963555">ReadFrom</span><span class="op" id="7963563">(</span><span class="ident" id="7963564">buf</span><span class="op" id="7963567">[</span><span class="num" id="7963568">0</span><span class="op" id="7963569">:</span><span class="op" id="7963570">]</span><span class="op" id="7963571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963575">if</span>&nbsp;<span class="ident" id="7963578">nerr</span><span class="op" id="7963582">,</span>&nbsp;<span class="ident" id="7963584">ok</span>&nbsp;<span class="op" id="7963587">:=</span>&nbsp;<span class="ident" id="7963590">err</span><span class="op" id="7963593">.</span><span class="op" id="7963594">(</span><span class="ident" id="7963595">Error</span><span class="op" id="7963600">)</span><span class="op" id="7963601">;</span>&nbsp;<span class="ident" id="7963603">ok</span>&nbsp;<span class="op" id="7963606">&amp;&amp;</span>&nbsp;<span class="ident" id="7963609">nerr</span><span class="op" id="7963613">.</span><span class="ident" id="7963614">Timeout</span><span class="op" id="7963621">(</span><span class="op" id="7963622">)</span>&nbsp;<span class="op" id="7963624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963629">select</span>&nbsp;<span class="op" id="7963636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963641">case</span>&nbsp;<span class="ident" id="7963646">done</span>&nbsp;<span class="op" id="7963651">&lt;-</span>&nbsp;<span class="num" id="7963654">1</span><span class="op" id="7963655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963661">break</span>&nbsp;<span class="ident" id="7963667">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963674">default</span><span class="op" id="7963681">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963687">continue</span>&nbsp;<span class="ident" id="7963696">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963711">if</span>&nbsp;<span class="ident" id="7963714">err</span>&nbsp;<span class="op" id="7963718">!=</span>&nbsp;<span class="ident" id="7963721">nil</span>&nbsp;<span class="op" id="7963725">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963730">break</span>&nbsp;<span class="ident" id="7963736">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963746">if</span>&nbsp;<span class="ident" id="7963749">_</span><span class="op" id="7963750">,</span>&nbsp;<span class="ident" id="7963752">err</span>&nbsp;<span class="op" id="7963756">=</span>&nbsp;<span class="ident" id="7963758">c</span><span class="op" id="7963759">.</span><span class="ident" id="7963760">WriteTo</span><span class="op" id="7963767">(</span><span class="ident" id="7963768">buf</span><span class="op" id="7963771">[</span><span class="num" id="7963772">0</span><span class="op" id="7963773">:</span><span class="ident" id="7963774">n</span><span class="op" id="7963775">]</span><span class="op" id="7963776">,</span>&nbsp;<span class="ident" id="7963778">ra</span><span class="op" id="7963780">)</span><span class="op" id="7963781">;</span>&nbsp;<span class="ident" id="7963783">err</span>&nbsp;<span class="op" id="7963787">!=</span>&nbsp;<span class="ident" id="7963790">nil</span>&nbsp;<span class="op" id="7963794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963799">t</span><span class="op" id="7963800">.</span><span class="ident" id="7963801">Errorf</span><span class="op" id="7963807">(</span><span class="string" id="7963808">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7963832">,</span>&nbsp;<span class="ident" id="7963834">ra</span><span class="op" id="7963836">,</span>&nbsp;<span class="ident" id="7963838">err</span><span class="op" id="7963841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963846">break</span>&nbsp;<span class="ident" id="7963852">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963864">done</span>&nbsp;<span class="op" id="7963869">&lt;-</span>&nbsp;<span class="num" id="7963872">1</span><br>
<span class="lineno"></span><span class="op" id="7963874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="7963877">func</span>&nbsp;<span class="ident" id="7963882">runDatagramConnClient</span><span class="op" id="7963903">(</span><span class="ident" id="7963904">t</span>&nbsp;<span class="op" id="7963906">*</span><span class="ident" id="7963907">testing</span><span class="op" id="7963914">.</span><span class="ident" id="7963915">T</span><span class="op" id="7963916">,</span>&nbsp;<span class="ident" id="7963918">net</span><span class="op" id="7963921">,</span>&nbsp;<span class="ident" id="7963923">laddr</span><span class="op" id="7963928">,</span>&nbsp;<span class="ident" id="7963930">taddr</span>&nbsp;<span class="builtintype" id="7963936">string</span><span class="op" id="7963942">,</span>&nbsp;<span class="ident" id="7963944">isEmpty</span>&nbsp;<span class="builtintype" id="7963952">bool</span><span class="op" id="7963956">)</span>&nbsp;<span class="op" id="7963958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963961">var</span>&nbsp;<span class="ident" id="7963965">c</span>&nbsp;<span class="ident" id="7963967">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963973">var</span>&nbsp;<span class="ident" id="7963977">err</span>&nbsp;<span class="builtintype" id="7963981">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963988">switch</span>&nbsp;<span class="ident" id="7963995">net</span>&nbsp;<span class="op" id="7963999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964002">case</span>&nbsp;<span class="string" id="7964007">&#34;udp&#34;</span><span class="op" id="7964012">,</span>&nbsp;<span class="string" id="7964014">&#34;udp4&#34;</span><span class="op" id="7964020">,</span>&nbsp;<span class="string" id="7964022">&#34;udp6&#34;</span><span class="op" id="7964028">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964032">c</span><span class="op" id="7964033">,</span>&nbsp;<span class="ident" id="7964035">err</span>&nbsp;<span class="op" id="7964039">=</span>&nbsp;<span class="ident" id="7964041">Dial</span><span class="op" id="7964045">(</span><span class="ident" id="7964046">net</span><span class="op" id="7964049">,</span>&nbsp;<span class="ident" id="7964051">taddr</span><span class="op" id="7964056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964060">if</span>&nbsp;<span class="ident" id="7964063">err</span>&nbsp;<span class="op" id="7964067">!=</span>&nbsp;<span class="ident" id="7964070">nil</span>&nbsp;<span class="op" id="7964074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964079">t</span><span class="op" id="7964080">.</span><span class="ident" id="7964081">Fatalf</span><span class="op" id="7964087">(</span><span class="string" id="7964088">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7964113">,</span>&nbsp;<span class="ident" id="7964115">net</span><span class="op" id="7964118">,</span>&nbsp;<span class="ident" id="7964120">taddr</span><span class="op" id="7964125">,</span>&nbsp;<span class="ident" id="7964127">err</span><span class="op" id="7964130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964137">case</span>&nbsp;<span class="string" id="7964142">&#34;unixgram&#34;</span><span class="op" id="7964152">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964156">c</span><span class="op" id="7964157">,</span>&nbsp;<span class="ident" id="7964159">err</span>&nbsp;<span class="op" id="7964163">=</span>&nbsp;<span class="ident" id="7964165">DialUnix</span><span class="op" id="7964173">(</span><span class="ident" id="7964174">net</span><span class="op" id="7964177">,</span>&nbsp;<span class="op" id="7964179">&amp;</span><span class="ident" id="7964180">UnixAddr</span><span class="op" id="7964188">{</span><span class="ident" id="7964189">Name</span><span class="op" id="7964193">:</span>&nbsp;<span class="ident" id="7964195">laddr</span><span class="op" id="7964200">,</span>&nbsp;<span class="ident" id="7964202">Net</span><span class="op" id="7964205">:</span>&nbsp;<span class="ident" id="7964207">net</span><span class="op" id="7964210">}</span><span class="op" id="7964211">,</span>&nbsp;<span class="op" id="7964213">&amp;</span><span class="ident" id="7964214">UnixAddr</span><span class="op" id="7964222">{</span><span class="ident" id="7964223">Name</span><span class="op" id="7964227">:</span>&nbsp;<span class="ident" id="7964229">taddr</span><span class="op" id="7964234">,</span>&nbsp;<span class="ident" id="7964236">Net</span><span class="op" id="7964239">:</span>&nbsp;<span class="ident" id="7964241">net</span><span class="op" id="7964244">}</span><span class="op" id="7964245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964249">if</span>&nbsp;<span class="ident" id="7964252">err</span>&nbsp;<span class="op" id="7964256">!=</span>&nbsp;<span class="ident" id="7964259">nil</span>&nbsp;<span class="op" id="7964263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964268">t</span><span class="op" id="7964269">.</span><span class="ident" id="7964270">Fatalf</span><span class="op" id="7964276">(</span><span class="string" id="7964277">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7964312">,</span>&nbsp;<span class="ident" id="7964314">net</span><span class="op" id="7964317">,</span>&nbsp;<span class="ident" id="7964319">laddr</span><span class="op" id="7964324">,</span>&nbsp;<span class="ident" id="7964326">taddr</span><span class="op" id="7964331">,</span>&nbsp;<span class="ident" id="7964333">err</span><span class="op" id="7964336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964343">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964346">defer</span>&nbsp;<span class="ident" id="7964352">c</span><span class="op" id="7964353">.</span><span class="ident" id="7964354">Close</span><span class="op" id="7964359">(</span><span class="op" id="7964360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964363">c</span><span class="op" id="7964364">.</span><span class="ident" id="7964365">SetReadDeadline</span><span class="op" id="7964380">(</span><span class="ident" id="7964381">time</span><span class="op" id="7964385">.</span><span class="ident" id="7964386">Now</span><span class="op" id="7964389">(</span><span class="op" id="7964390">)</span><span class="op" id="7964391">.</span><span class="ident" id="7964392">Add</span><span class="op" id="7964395">(</span><span class="num" id="7964396">1</span>&nbsp;<span class="op" id="7964398">*</span>&nbsp;<span class="ident" id="7964400">time</span><span class="op" id="7964404">.</span><span class="ident" id="7964405">Second</span><span class="op" id="7964411">)</span><span class="op" id="7964412">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964416">var</span>&nbsp;<span class="ident" id="7964420">wb</span>&nbsp;<span class="op" id="7964423">[</span><span class="op" id="7964424">]</span><span class="builtintype" id="7964425">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964431">if</span>&nbsp;<span class="op" id="7964434">!</span><span class="ident" id="7964435">isEmpty</span>&nbsp;<span class="op" id="7964443">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964447">wb</span>&nbsp;<span class="op" id="7964450">=</span>&nbsp;<span class="op" id="7964452">[</span><span class="op" id="7964453">]</span><span class="builtintype" id="7964454">byte</span><span class="op" id="7964458">(</span><span class="string" id="7964459">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7964489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964495">if</span>&nbsp;<span class="ident" id="7964498">n</span><span class="op" id="7964499">,</span>&nbsp;<span class="ident" id="7964501">err</span>&nbsp;<span class="op" id="7964505">:=</span>&nbsp;<span class="ident" id="7964508">c</span><span class="op" id="7964509">.</span><span class="ident" id="7964510">Write</span><span class="op" id="7964515">(</span><span class="ident" id="7964516">wb</span><span class="op" id="7964518">[</span><span class="num" id="7964519">0</span><span class="op" id="7964520">:</span><span class="op" id="7964521">]</span><span class="op" id="7964522">)</span><span class="op" id="7964523">;</span>&nbsp;<span class="ident" id="7964525">err</span>&nbsp;<span class="op" id="7964529">!=</span>&nbsp;<span class="ident" id="7964532">nil</span>&nbsp;<span class="op" id="7964536">||</span>&nbsp;<span class="ident" id="7964539">n</span>&nbsp;<span class="op" id="7964541">!=</span>&nbsp;<span class="builtinfunc" id="7964544">len</span><span class="op" id="7964547">(</span><span class="ident" id="7964548">wb</span><span class="op" id="7964550">)</span>&nbsp;<span class="op" id="7964552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964556">t</span><span class="op" id="7964557">.</span><span class="ident" id="7964558">Fatalf</span><span class="op" id="7964564">(</span><span class="string" id="7964565">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7964603">,</span>&nbsp;<span class="ident" id="7964605">n</span><span class="op" id="7964606">,</span>&nbsp;<span class="ident" id="7964608">err</span><span class="op" id="7964611">,</span>&nbsp;<span class="builtinfunc" id="7964613">len</span><span class="op" id="7964616">(</span><span class="ident" id="7964617">wb</span><span class="op" id="7964619">)</span><span class="op" id="7964620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964623">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964627">rb</span>&nbsp;<span class="op" id="7964630">:=</span>&nbsp;<span class="builtinfunc" id="7964633">make</span><span class="op" id="7964637">(</span><span class="op" id="7964638">[</span><span class="op" id="7964639">]</span><span class="builtintype" id="7964640">byte</span><span class="op" id="7964644">,</span>&nbsp;<span class="num" id="7964646">1024</span><span class="op" id="7964650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964653">if</span>&nbsp;<span class="ident" id="7964656">n</span><span class="op" id="7964657">,</span>&nbsp;<span class="ident" id="7964659">err</span>&nbsp;<span class="op" id="7964663">:=</span>&nbsp;<span class="ident" id="7964666">c</span><span class="op" id="7964667">.</span><span class="ident" id="7964668">Read</span><span class="op" id="7964672">(</span><span class="ident" id="7964673">rb</span><span class="op" id="7964675">[</span><span class="num" id="7964676">0</span><span class="op" id="7964677">:</span><span class="op" id="7964678">]</span><span class="op" id="7964679">)</span><span class="op" id="7964680">;</span>&nbsp;<span class="ident" id="7964682">err</span>&nbsp;<span class="op" id="7964686">!=</span>&nbsp;<span class="ident" id="7964689">nil</span>&nbsp;<span class="op" id="7964693">||</span>&nbsp;<span class="ident" id="7964696">n</span>&nbsp;<span class="op" id="7964698">!=</span>&nbsp;<span class="builtinfunc" id="7964701">len</span><span class="op" id="7964704">(</span><span class="ident" id="7964705">wb</span><span class="op" id="7964707">)</span>&nbsp;<span class="op" id="7964709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964713">t</span><span class="op" id="7964714">.</span><span class="ident" id="7964715">Fatalf</span><span class="op" id="7964721">(</span><span class="string" id="7964722">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7964759">,</span>&nbsp;<span class="ident" id="7964761">n</span><span class="op" id="7964762">,</span>&nbsp;<span class="ident" id="7964764">err</span><span class="op" id="7964767">,</span>&nbsp;<span class="builtinfunc" id="7964769">len</span><span class="op" id="7964772">(</span><span class="ident" id="7964773">wb</span><span class="op" id="7964775">)</span><span class="op" id="7964776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964779">}</span><br>
<span class="lineno">425</span><span class="op" id="7964781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7964784">func</span>&nbsp;<span class="ident" id="7964789">runDatagramPacketConnClient</span><span class="op" id="7964816">(</span><span class="ident" id="7964817">t</span>&nbsp;<span class="op" id="7964819">*</span><span class="ident" id="7964820">testing</span><span class="op" id="7964827">.</span><span class="ident" id="7964828">T</span><span class="op" id="7964829">,</span>&nbsp;<span class="ident" id="7964831">net</span><span class="op" id="7964834">,</span>&nbsp;<span class="ident" id="7964836">laddr</span><span class="op" id="7964841">,</span>&nbsp;<span class="ident" id="7964843">taddr</span>&nbsp;<span class="builtintype" id="7964849">string</span><span class="op" id="7964855">,</span>&nbsp;<span class="ident" id="7964857">isEmpty</span>&nbsp;<span class="builtintype" id="7964865">bool</span><span class="op" id="7964869">)</span>&nbsp;<span class="op" id="7964871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964874">var</span>&nbsp;<span class="ident" id="7964878">ra</span>&nbsp;<span class="ident" id="7964881">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964887">var</span>&nbsp;<span class="ident" id="7964891">err</span>&nbsp;<span class="builtintype" id="7964895">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964902">switch</span>&nbsp;<span class="ident" id="7964909">net</span>&nbsp;<span class="op" id="7964913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964916">case</span>&nbsp;<span class="string" id="7964921">&#34;udp&#34;</span><span class="op" id="7964926">,</span>&nbsp;<span class="string" id="7964928">&#34;udp4&#34;</span><span class="op" id="7964934">,</span>&nbsp;<span class="string" id="7964936">&#34;udp6&#34;</span><span class="op" id="7964942">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964946">ra</span><span class="op" id="7964948">,</span>&nbsp;<span class="ident" id="7964950">err</span>&nbsp;<span class="op" id="7964954">=</span>&nbsp;<span class="ident" id="7964956">ResolveUDPAddr</span><span class="op" id="7964970">(</span><span class="ident" id="7964971">net</span><span class="op" id="7964974">,</span>&nbsp;<span class="ident" id="7964976">taddr</span><span class="op" id="7964981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964985">if</span>&nbsp;<span class="ident" id="7964988">err</span>&nbsp;<span class="op" id="7964992">!=</span>&nbsp;<span class="ident" id="7964995">nil</span>&nbsp;<span class="op" id="7964999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965004">t</span><span class="op" id="7965005">.</span><span class="ident" id="7965006">Fatalf</span><span class="op" id="7965012">(</span><span class="string" id="7965013">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7965048">,</span>&nbsp;<span class="ident" id="7965050">net</span><span class="op" id="7965053">,</span>&nbsp;<span class="ident" id="7965055">taddr</span><span class="op" id="7965060">,</span>&nbsp;<span class="ident" id="7965062">err</span><span class="op" id="7965065">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965072">case</span>&nbsp;<span class="string" id="7965077">&#34;unixgram&#34;</span><span class="op" id="7965087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965091">ra</span><span class="op" id="7965093">,</span>&nbsp;<span class="ident" id="7965095">err</span>&nbsp;<span class="op" id="7965099">=</span>&nbsp;<span class="ident" id="7965101">ResolveUnixAddr</span><span class="op" id="7965116">(</span><span class="ident" id="7965117">net</span><span class="op" id="7965120">,</span>&nbsp;<span class="ident" id="7965122">taddr</span><span class="op" id="7965127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965131">if</span>&nbsp;<span class="ident" id="7965134">err</span>&nbsp;<span class="op" id="7965138">!=</span>&nbsp;<span class="ident" id="7965141">nil</span>&nbsp;<span class="op" id="7965145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965150">t</span><span class="op" id="7965151">.</span><span class="ident" id="7965152">Fatalf</span><span class="op" id="7965158">(</span><span class="string" id="7965159">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7965195">,</span>&nbsp;<span class="ident" id="7965197">net</span><span class="op" id="7965200">,</span>&nbsp;<span class="ident" id="7965202">taddr</span><span class="op" id="7965207">,</span>&nbsp;<span class="ident" id="7965209">err</span><span class="op" id="7965212">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965222">c</span><span class="op" id="7965223">,</span>&nbsp;<span class="ident" id="7965225">err</span>&nbsp;<span class="op" id="7965229">:=</span>&nbsp;<span class="ident" id="7965232">ListenPacket</span><span class="op" id="7965244">(</span><span class="ident" id="7965245">net</span><span class="op" id="7965248">,</span>&nbsp;<span class="ident" id="7965250">laddr</span><span class="op" id="7965255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965258">if</span>&nbsp;<span class="ident" id="7965261">err</span>&nbsp;<span class="op" id="7965265">!=</span>&nbsp;<span class="ident" id="7965268">nil</span>&nbsp;<span class="op" id="7965272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965276">t</span><span class="op" id="7965277">.</span><span class="ident" id="7965278">Fatalf</span><span class="op" id="7965284">(</span><span class="string" id="7965285">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="7965317">,</span>&nbsp;<span class="ident" id="7965319">net</span><span class="op" id="7965322">,</span>&nbsp;<span class="ident" id="7965324">laddr</span><span class="op" id="7965329">,</span>&nbsp;<span class="ident" id="7965331">err</span><span class="op" id="7965334">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965340">defer</span>&nbsp;<span class="ident" id="7965346">c</span><span class="op" id="7965347">.</span><span class="ident" id="7965348">Close</span><span class="op" id="7965353">(</span><span class="op" id="7965354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965357">c</span><span class="op" id="7965358">.</span><span class="ident" id="7965359">SetReadDeadline</span><span class="op" id="7965374">(</span><span class="ident" id="7965375">time</span><span class="op" id="7965379">.</span><span class="ident" id="7965380">Now</span><span class="op" id="7965383">(</span><span class="op" id="7965384">)</span><span class="op" id="7965385">.</span><span class="ident" id="7965386">Add</span><span class="op" id="7965389">(</span><span class="num" id="7965390">1</span>&nbsp;<span class="op" id="7965392">*</span>&nbsp;<span class="ident" id="7965394">time</span><span class="op" id="7965398">.</span><span class="ident" id="7965399">Second</span><span class="op" id="7965405">)</span><span class="op" id="7965406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965410">var</span>&nbsp;<span class="ident" id="7965414">wb</span>&nbsp;<span class="op" id="7965417">[</span><span class="op" id="7965418">]</span><span class="builtintype" id="7965419">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965425">if</span>&nbsp;<span class="op" id="7965428">!</span><span class="ident" id="7965429">isEmpty</span>&nbsp;<span class="op" id="7965437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965441">wb</span>&nbsp;<span class="op" id="7965444">=</span>&nbsp;<span class="op" id="7965446">[</span><span class="op" id="7965447">]</span><span class="builtintype" id="7965448">byte</span><span class="op" id="7965452">(</span><span class="string" id="7965453">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="7965497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965503">if</span>&nbsp;<span class="ident" id="7965506">n</span><span class="op" id="7965507">,</span>&nbsp;<span class="ident" id="7965509">err</span>&nbsp;<span class="op" id="7965513">:=</span>&nbsp;<span class="ident" id="7965516">c</span><span class="op" id="7965517">.</span><span class="ident" id="7965518">WriteTo</span><span class="op" id="7965525">(</span><span class="ident" id="7965526">wb</span><span class="op" id="7965528">[</span><span class="num" id="7965529">0</span><span class="op" id="7965530">:</span><span class="op" id="7965531">]</span><span class="op" id="7965532">,</span>&nbsp;<span class="ident" id="7965534">ra</span><span class="op" id="7965536">)</span><span class="op" id="7965537">;</span>&nbsp;<span class="ident" id="7965539">err</span>&nbsp;<span class="op" id="7965543">!=</span>&nbsp;<span class="ident" id="7965546">nil</span>&nbsp;<span class="op" id="7965550">||</span>&nbsp;<span class="ident" id="7965553">n</span>&nbsp;<span class="op" id="7965555">!=</span>&nbsp;<span class="builtinfunc" id="7965558">len</span><span class="op" id="7965561">(</span><span class="ident" id="7965562">wb</span><span class="op" id="7965564">)</span>&nbsp;<span class="op" id="7965566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965570">t</span><span class="op" id="7965571">.</span><span class="ident" id="7965572">Fatalf</span><span class="op" id="7965578">(</span><span class="string" id="7965579">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7965623">,</span>&nbsp;<span class="ident" id="7965625">ra</span><span class="op" id="7965627">,</span>&nbsp;<span class="ident" id="7965629">n</span><span class="op" id="7965630">,</span>&nbsp;<span class="ident" id="7965632">err</span><span class="op" id="7965635">,</span>&nbsp;<span class="builtinfunc" id="7965637">len</span><span class="op" id="7965640">(</span><span class="ident" id="7965641">wb</span><span class="op" id="7965643">)</span><span class="op" id="7965644">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965651">rb</span>&nbsp;<span class="op" id="7965654">:=</span>&nbsp;<span class="builtinfunc" id="7965657">make</span><span class="op" id="7965661">(</span><span class="op" id="7965662">[</span><span class="op" id="7965663">]</span><span class="builtintype" id="7965664">byte</span><span class="op" id="7965668">,</span>&nbsp;<span class="num" id="7965670">1024</span><span class="op" id="7965674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965677">if</span>&nbsp;<span class="ident" id="7965680">n</span><span class="op" id="7965681">,</span>&nbsp;<span class="ident" id="7965683">_</span><span class="op" id="7965684">,</span>&nbsp;<span class="ident" id="7965686">err</span>&nbsp;<span class="op" id="7965690">:=</span>&nbsp;<span class="ident" id="7965693">c</span><span class="op" id="7965694">.</span><span class="ident" id="7965695">ReadFrom</span><span class="op" id="7965703">(</span><span class="ident" id="7965704">rb</span><span class="op" id="7965706">[</span><span class="num" id="7965707">0</span><span class="op" id="7965708">:</span><span class="op" id="7965709">]</span><span class="op" id="7965710">)</span><span class="op" id="7965711">;</span>&nbsp;<span class="ident" id="7965713">err</span>&nbsp;<span class="op" id="7965717">!=</span>&nbsp;<span class="ident" id="7965720">nil</span>&nbsp;<span class="op" id="7965724">||</span>&nbsp;<span class="ident" id="7965727">n</span>&nbsp;<span class="op" id="7965729">!=</span>&nbsp;<span class="builtinfunc" id="7965732">len</span><span class="op" id="7965735">(</span><span class="ident" id="7965736">wb</span><span class="op" id="7965738">)</span>&nbsp;<span class="op" id="7965740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965744">t</span><span class="op" id="7965745">.</span><span class="ident" id="7965746">Fatalf</span><span class="op" id="7965752">(</span><span class="string" id="7965753">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7965794">,</span>&nbsp;<span class="ident" id="7965796">n</span><span class="op" id="7965797">,</span>&nbsp;<span class="ident" id="7965799">err</span><span class="op" id="7965802">,</span>&nbsp;<span class="builtinfunc" id="7965804">len</span><span class="op" id="7965807">(</span><span class="ident" id="7965808">wb</span><span class="op" id="7965810">)</span><span class="op" id="7965811">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965814">}</span><br>
<span class="lineno"></span><span class="op" id="7965816">}</span>
</div>
</body>
</html>
