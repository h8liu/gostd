<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html" class="current">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2080842">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2080897">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2080951">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2081002">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2081037">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2081097">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2081158">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2081226">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2081284">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2081324">package</span>&nbsp;<span class="ident" id="2081332">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2081341">type</span>&nbsp;<span class="ident" id="2081346">decimal</span>&nbsp;<span class="keyword" id="2081354">struct</span>&nbsp;<span class="op" id="2081361">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081364">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081370">[</span><span class="num" id="2081371">800</span><span class="op" id="2081374">]</span><span class="builtintype" id="2081375">byte</span>&nbsp;<span class="comment" id="2081380">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081391">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2081397">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081407">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081433">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2081439">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081449">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081467">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2081473">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081479">trunc</span>&nbsp;<span class="builtintype" id="2081485">bool</span>&nbsp;<span class="comment" id="2081490">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2081532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2081535">func</span>&nbsp;<span class="op" id="2081540">(</span><span class="ident" id="2081541">a</span>&nbsp;<span class="op" id="2081543">*</span><span class="ident" id="2081544">decimal</span><span class="op" id="2081551">)</span>&nbsp;<span class="ident" id="2081553">String</span><span class="op" id="2081559">(</span><span class="op" id="2081560">)</span>&nbsp;<span class="builtintype" id="2081562">string</span>&nbsp;<span class="op" id="2081569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081572">n</span>&nbsp;<span class="op" id="2081574">:=</span>&nbsp;<span class="num" id="2081577">10</span>&nbsp;<span class="op" id="2081580">+</span>&nbsp;<span class="ident" id="2081582">a</span><span class="op" id="2081583">.</span><span class="ident" id="2081584">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081588">if</span>&nbsp;<span class="ident" id="2081591">a</span><span class="op" id="2081592">.</span><span class="ident" id="2081593">dp</span>&nbsp;<span class="op" id="2081596">&gt;</span>&nbsp;<span class="num" id="2081598">0</span>&nbsp;<span class="op" id="2081600">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081604">n</span>&nbsp;<span class="op" id="2081606">+=</span>&nbsp;<span class="ident" id="2081609">a</span><span class="op" id="2081610">.</span><span class="ident" id="2081611">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081618">if</span>&nbsp;<span class="ident" id="2081621">a</span><span class="op" id="2081622">.</span><span class="ident" id="2081623">dp</span>&nbsp;<span class="op" id="2081626">&lt;</span>&nbsp;<span class="num" id="2081628">0</span>&nbsp;<span class="op" id="2081630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081634">n</span>&nbsp;<span class="op" id="2081636">+=</span>&nbsp;<span class="op" id="2081639">-</span><span class="ident" id="2081640">a</span><span class="op" id="2081641">.</span><span class="ident" id="2081642">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2081646">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081650">buf</span>&nbsp;<span class="op" id="2081654">:=</span>&nbsp;<span class="builtinfunc" id="2081657">make</span><span class="op" id="2081661">(</span><span class="op" id="2081662">[</span><span class="op" id="2081663">]</span><span class="builtintype" id="2081664">byte</span><span class="op" id="2081668">,</span>&nbsp;<span class="ident" id="2081670">n</span><span class="op" id="2081671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081674">w</span>&nbsp;<span class="op" id="2081676">:=</span>&nbsp;<span class="num" id="2081679">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081682">switch</span>&nbsp;<span class="op" id="2081689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081692">case</span>&nbsp;<span class="ident" id="2081697">a</span><span class="op" id="2081698">.</span><span class="ident" id="2081699">nd</span>&nbsp;<span class="op" id="2081702">==</span>&nbsp;<span class="num" id="2081705">0</span><span class="op" id="2081706">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081710">return</span>&nbsp;<span class="string" id="2081717">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081723">case</span>&nbsp;<span class="ident" id="2081728">a</span><span class="op" id="2081729">.</span><span class="ident" id="2081730">dp</span>&nbsp;<span class="op" id="2081733">&lt;=</span>&nbsp;<span class="num" id="2081736">0</span><span class="op" id="2081737">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081741">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081796">buf</span><span class="op" id="2081799">[</span><span class="ident" id="2081800">w</span><span class="op" id="2081801">]</span>&nbsp;<span class="op" id="2081803">=</span>&nbsp;<span class="string" id="2081805">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081811">w</span><span class="op" id="2081812">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081817">buf</span><span class="op" id="2081820">[</span><span class="ident" id="2081821">w</span><span class="op" id="2081822">]</span>&nbsp;<span class="op" id="2081824">=</span>&nbsp;<span class="string" id="2081826">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081832">w</span><span class="op" id="2081833">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081838">w</span>&nbsp;<span class="op" id="2081840">+=</span>&nbsp;<span class="ident" id="2081843">digitZero</span><span class="op" id="2081852">(</span><span class="ident" id="2081853">buf</span><span class="op" id="2081856">[</span><span class="ident" id="2081857">w</span>&nbsp;<span class="op" id="2081859">:</span>&nbsp;<span class="ident" id="2081861">w</span><span class="op" id="2081862">+</span><span class="op" id="2081863">-</span><span class="ident" id="2081864">a</span><span class="op" id="2081865">.</span><span class="ident" id="2081866">dp</span><span class="op" id="2081868">]</span><span class="op" id="2081869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081873">w</span>&nbsp;<span class="op" id="2081875">+=</span>&nbsp;<span class="builtinfunc" id="2081878">copy</span><span class="op" id="2081882">(</span><span class="ident" id="2081883">buf</span><span class="op" id="2081886">[</span><span class="ident" id="2081887">w</span><span class="op" id="2081888">:</span><span class="op" id="2081889">]</span><span class="op" id="2081890">,</span>&nbsp;<span class="ident" id="2081892">a</span><span class="op" id="2081893">.</span><span class="ident" id="2081894">d</span><span class="op" id="2081895">[</span><span class="num" id="2081896">0</span><span class="op" id="2081897">:</span><span class="ident" id="2081898">a</span><span class="op" id="2081899">.</span><span class="ident" id="2081900">nd</span><span class="op" id="2081902">]</span><span class="op" id="2081903">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2081907">case</span>&nbsp;<span class="ident" id="2081912">a</span><span class="op" id="2081913">.</span><span class="ident" id="2081914">dp</span>&nbsp;<span class="op" id="2081917">&lt;</span>&nbsp;<span class="ident" id="2081919">a</span><span class="op" id="2081920">.</span><span class="ident" id="2081921">nd</span><span class="op" id="2081923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2081927">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2081966">w</span>&nbsp;<span class="op" id="2081968">+=</span>&nbsp;<span class="builtinfunc" id="2081971">copy</span><span class="op" id="2081975">(</span><span class="ident" id="2081976">buf</span><span class="op" id="2081979">[</span><span class="ident" id="2081980">w</span><span class="op" id="2081981">:</span><span class="op" id="2081982">]</span><span class="op" id="2081983">,</span>&nbsp;<span class="ident" id="2081985">a</span><span class="op" id="2081986">.</span><span class="ident" id="2081987">d</span><span class="op" id="2081988">[</span><span class="num" id="2081989">0</span><span class="op" id="2081990">:</span><span class="ident" id="2081991">a</span><span class="op" id="2081992">.</span><span class="ident" id="2081993">dp</span><span class="op" id="2081995">]</span><span class="op" id="2081996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082000">buf</span><span class="op" id="2082003">[</span><span class="ident" id="2082004">w</span><span class="op" id="2082005">]</span>&nbsp;<span class="op" id="2082007">=</span>&nbsp;<span class="string" id="2082009">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082015">w</span><span class="op" id="2082016">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082021">w</span>&nbsp;<span class="op" id="2082023">+=</span>&nbsp;<span class="builtinfunc" id="2082026">copy</span><span class="op" id="2082030">(</span><span class="ident" id="2082031">buf</span><span class="op" id="2082034">[</span><span class="ident" id="2082035">w</span><span class="op" id="2082036">:</span><span class="op" id="2082037">]</span><span class="op" id="2082038">,</span>&nbsp;<span class="ident" id="2082040">a</span><span class="op" id="2082041">.</span><span class="ident" id="2082042">d</span><span class="op" id="2082043">[</span><span class="ident" id="2082044">a</span><span class="op" id="2082045">.</span><span class="ident" id="2082046">dp</span><span class="op" id="2082048">:</span><span class="ident" id="2082049">a</span><span class="op" id="2082050">.</span><span class="ident" id="2082051">nd</span><span class="op" id="2082053">]</span><span class="op" id="2082054">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082058">default</span><span class="op" id="2082065">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082069">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082124">w</span>&nbsp;<span class="op" id="2082126">+=</span>&nbsp;<span class="builtinfunc" id="2082129">copy</span><span class="op" id="2082133">(</span><span class="ident" id="2082134">buf</span><span class="op" id="2082137">[</span><span class="ident" id="2082138">w</span><span class="op" id="2082139">:</span><span class="op" id="2082140">]</span><span class="op" id="2082141">,</span>&nbsp;<span class="ident" id="2082143">a</span><span class="op" id="2082144">.</span><span class="ident" id="2082145">d</span><span class="op" id="2082146">[</span><span class="num" id="2082147">0</span><span class="op" id="2082148">:</span><span class="ident" id="2082149">a</span><span class="op" id="2082150">.</span><span class="ident" id="2082151">nd</span><span class="op" id="2082153">]</span><span class="op" id="2082154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082158">w</span>&nbsp;<span class="op" id="2082160">+=</span>&nbsp;<span class="ident" id="2082163">digitZero</span><span class="op" id="2082172">(</span><span class="ident" id="2082173">buf</span><span class="op" id="2082176">[</span><span class="ident" id="2082177">w</span>&nbsp;<span class="op" id="2082179">:</span>&nbsp;<span class="ident" id="2082181">w</span><span class="op" id="2082182">+</span><span class="ident" id="2082183">a</span><span class="op" id="2082184">.</span><span class="ident" id="2082185">dp</span><span class="op" id="2082187">-</span><span class="ident" id="2082188">a</span><span class="op" id="2082189">.</span><span class="ident" id="2082190">nd</span><span class="op" id="2082192">]</span><span class="op" id="2082193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082199">return</span>&nbsp;<span class="builtintype" id="2082206">string</span><span class="op" id="2082212">(</span><span class="ident" id="2082213">buf</span><span class="op" id="2082216">[</span><span class="num" id="2082217">0</span><span class="op" id="2082218">:</span><span class="ident" id="2082219">w</span><span class="op" id="2082220">]</span><span class="op" id="2082221">)</span><br>
<span class="lineno"></span><span class="op" id="2082223">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2082226">func</span>&nbsp;<span class="ident" id="2082231">digitZero</span><span class="op" id="2082240">(</span><span class="ident" id="2082241">dst</span>&nbsp;<span class="op" id="2082245">[</span><span class="op" id="2082246">]</span><span class="builtintype" id="2082247">byte</span><span class="op" id="2082251">)</span>&nbsp;<span class="builtintype" id="2082253">int</span>&nbsp;<span class="op" id="2082257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082260">for</span>&nbsp;<span class="ident" id="2082264">i</span>&nbsp;<span class="op" id="2082266">:=</span>&nbsp;<span class="keyword" id="2082269">range</span>&nbsp;<span class="ident" id="2082275">dst</span>&nbsp;<span class="op" id="2082279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082283">dst</span><span class="op" id="2082286">[</span><span class="ident" id="2082287">i</span><span class="op" id="2082288">]</span>&nbsp;<span class="op" id="2082290">=</span>&nbsp;<span class="string" id="2082292">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082297">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082300">return</span>&nbsp;<span class="builtinfunc" id="2082307">len</span><span class="op" id="2082310">(</span><span class="ident" id="2082311">dst</span><span class="op" id="2082314">)</span><br>
<span class="lineno"></span><span class="op" id="2082316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2082319">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2082355">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2082410">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2082451">func</span>&nbsp;<span class="ident" id="2082456">trim</span><span class="op" id="2082460">(</span><span class="ident" id="2082461">a</span>&nbsp;<span class="op" id="2082463">*</span><span class="ident" id="2082464">decimal</span><span class="op" id="2082471">)</span>&nbsp;<span class="op" id="2082473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082476">for</span>&nbsp;<span class="ident" id="2082480">a</span><span class="op" id="2082481">.</span><span class="ident" id="2082482">nd</span>&nbsp;<span class="op" id="2082485">&gt;</span>&nbsp;<span class="num" id="2082487">0</span>&nbsp;<span class="op" id="2082489">&amp;&amp;</span>&nbsp;<span class="ident" id="2082492">a</span><span class="op" id="2082493">.</span><span class="ident" id="2082494">d</span><span class="op" id="2082495">[</span><span class="ident" id="2082496">a</span><span class="op" id="2082497">.</span><span class="ident" id="2082498">nd</span><span class="op" id="2082500">-</span><span class="num" id="2082501">1</span><span class="op" id="2082502">]</span>&nbsp;<span class="op" id="2082504">==</span>&nbsp;<span class="string" id="2082507">&#39;0&#39;</span>&nbsp;<span class="op" id="2082511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082515">a</span><span class="op" id="2082516">.</span><span class="ident" id="2082517">nd</span><span class="op" id="2082519">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082523">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082526">if</span>&nbsp;<span class="ident" id="2082529">a</span><span class="op" id="2082530">.</span><span class="ident" id="2082531">nd</span>&nbsp;<span class="op" id="2082534">==</span>&nbsp;<span class="num" id="2082537">0</span>&nbsp;<span class="op" id="2082539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082543">a</span><span class="op" id="2082544">.</span><span class="ident" id="2082545">dp</span>&nbsp;<span class="op" id="2082548">=</span>&nbsp;<span class="num" id="2082550">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082553">}</span><br>
<span class="lineno"></span><span class="op" id="2082555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2082558">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2082576">func</span>&nbsp;<span class="op" id="2082581">(</span><span class="ident" id="2082582">a</span>&nbsp;<span class="op" id="2082584">*</span><span class="ident" id="2082585">decimal</span><span class="op" id="2082592">)</span>&nbsp;<span class="ident" id="2082594">Assign</span><span class="op" id="2082600">(</span><span class="ident" id="2082601">v</span>&nbsp;<span class="ident" id="2082603">uint64</span><span class="op" id="2082609">)</span>&nbsp;<span class="op" id="2082611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082614">var</span>&nbsp;<span class="ident" id="2082618">buf</span>&nbsp;<span class="op" id="2082622">[</span><span class="num" id="2082623">24</span><span class="op" id="2082625">]</span><span class="builtintype" id="2082626">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082633">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082668">n</span>&nbsp;<span class="op" id="2082670">:=</span>&nbsp;<span class="num" id="2082673">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082676">for</span>&nbsp;<span class="ident" id="2082680">v</span>&nbsp;<span class="op" id="2082682">&gt;</span>&nbsp;<span class="num" id="2082684">0</span>&nbsp;<span class="op" id="2082686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082690">v1</span>&nbsp;<span class="op" id="2082693">:=</span>&nbsp;<span class="ident" id="2082696">v</span>&nbsp;<span class="op" id="2082698">/</span>&nbsp;<span class="num" id="2082700">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082705">v</span>&nbsp;<span class="op" id="2082707">-=</span>&nbsp;<span class="num" id="2082710">10</span>&nbsp;<span class="op" id="2082713">*</span>&nbsp;<span class="ident" id="2082715">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082720">buf</span><span class="op" id="2082723">[</span><span class="ident" id="2082724">n</span><span class="op" id="2082725">]</span>&nbsp;<span class="op" id="2082727">=</span>&nbsp;<span class="builtintype" id="2082729">byte</span><span class="op" id="2082733">(</span><span class="ident" id="2082734">v</span>&nbsp;<span class="op" id="2082736">+</span>&nbsp;<span class="string" id="2082738">&#39;0&#39;</span><span class="op" id="2082741">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082745">n</span><span class="op" id="2082746">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082751">v</span>&nbsp;<span class="op" id="2082753">=</span>&nbsp;<span class="ident" id="2082755">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2082763">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082816">a</span><span class="op" id="2082817">.</span><span class="ident" id="2082818">nd</span>&nbsp;<span class="op" id="2082821">=</span>&nbsp;<span class="num" id="2082823">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2082826">for</span>&nbsp;<span class="ident" id="2082830">n</span><span class="op" id="2082831">--</span><span class="op" id="2082833">;</span>&nbsp;<span class="ident" id="2082835">n</span>&nbsp;<span class="op" id="2082837">&gt;=</span>&nbsp;<span class="num" id="2082840">0</span><span class="op" id="2082841">;</span>&nbsp;<span class="ident" id="2082843">n</span><span class="op" id="2082844">--</span>&nbsp;<span class="op" id="2082847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082851">a</span><span class="op" id="2082852">.</span><span class="ident" id="2082853">d</span><span class="op" id="2082854">[</span><span class="ident" id="2082855">a</span><span class="op" id="2082856">.</span><span class="ident" id="2082857">nd</span><span class="op" id="2082859">]</span>&nbsp;<span class="op" id="2082861">=</span>&nbsp;<span class="ident" id="2082863">buf</span><span class="op" id="2082866">[</span><span class="ident" id="2082867">n</span><span class="op" id="2082868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082872">a</span><span class="op" id="2082873">.</span><span class="ident" id="2082874">nd</span><span class="op" id="2082876">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082880">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082883">a</span><span class="op" id="2082884">.</span><span class="ident" id="2082885">dp</span>&nbsp;<span class="op" id="2082888">=</span>&nbsp;<span class="ident" id="2082890">a</span><span class="op" id="2082891">.</span><span class="ident" id="2082892">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2082896">trim</span><span class="op" id="2082900">(</span><span class="ident" id="2082901">a</span><span class="op" id="2082902">)</span><br>
<span class="lineno"></span><span class="op" id="2082904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2082907">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2082969">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2083040">const</span>&nbsp;<span class="ident" id="2083046">maxShift</span>&nbsp;<span class="op" id="2083055">=</span>&nbsp;<span class="num" id="2083057">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2083061">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2083134">func</span>&nbsp;<span class="ident" id="2083139">rightShift</span><span class="op" id="2083149">(</span><span class="ident" id="2083150">a</span>&nbsp;<span class="op" id="2083152">*</span><span class="ident" id="2083153">decimal</span><span class="op" id="2083160">,</span>&nbsp;<span class="ident" id="2083162">k</span>&nbsp;<span class="builtintype" id="2083164">uint</span><span class="op" id="2083168">)</span>&nbsp;<span class="op" id="2083170">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083173">r</span>&nbsp;<span class="op" id="2083175">:=</span>&nbsp;<span class="num" id="2083178">0</span>&nbsp;<span class="comment" id="2083180">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083197">w</span>&nbsp;<span class="op" id="2083199">:=</span>&nbsp;<span class="num" id="2083202">0</span>&nbsp;<span class="comment" id="2083204">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2083223">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083279">n</span>&nbsp;<span class="op" id="2083281">:=</span>&nbsp;<span class="num" id="2083284">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083287">for</span>&nbsp;<span class="op" id="2083291">;</span>&nbsp;<span class="ident" id="2083293">n</span><span class="op" id="2083294">&gt;&gt;</span><span class="ident" id="2083296">k</span>&nbsp;<span class="op" id="2083298">==</span>&nbsp;<span class="num" id="2083301">0</span><span class="op" id="2083302">;</span>&nbsp;<span class="ident" id="2083304">r</span><span class="op" id="2083305">++</span>&nbsp;<span class="op" id="2083308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083312">if</span>&nbsp;<span class="ident" id="2083315">r</span>&nbsp;<span class="op" id="2083317">&gt;=</span>&nbsp;<span class="ident" id="2083320">a</span><span class="op" id="2083321">.</span><span class="ident" id="2083322">nd</span>&nbsp;<span class="op" id="2083325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083330">if</span>&nbsp;<span class="ident" id="2083333">n</span>&nbsp;<span class="op" id="2083335">==</span>&nbsp;<span class="num" id="2083338">0</span>&nbsp;<span class="op" id="2083340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2083346">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083400">a</span><span class="op" id="2083401">.</span><span class="ident" id="2083402">nd</span>&nbsp;<span class="op" id="2083405">=</span>&nbsp;<span class="num" id="2083407">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083413">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083428">for</span>&nbsp;<span class="ident" id="2083432">n</span><span class="op" id="2083433">&gt;&gt;</span><span class="ident" id="2083435">k</span>&nbsp;<span class="op" id="2083437">==</span>&nbsp;<span class="num" id="2083440">0</span>&nbsp;<span class="op" id="2083442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083448">n</span>&nbsp;<span class="op" id="2083450">=</span>&nbsp;<span class="ident" id="2083452">n</span>&nbsp;<span class="op" id="2083454">*</span>&nbsp;<span class="num" id="2083456">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083463">r</span><span class="op" id="2083464">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083475">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083487">c</span>&nbsp;<span class="op" id="2083489">:=</span>&nbsp;<span class="builtintype" id="2083492">int</span><span class="op" id="2083495">(</span><span class="ident" id="2083496">a</span><span class="op" id="2083497">.</span><span class="ident" id="2083498">d</span><span class="op" id="2083499">[</span><span class="ident" id="2083500">r</span><span class="op" id="2083501">]</span><span class="op" id="2083502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083506">n</span>&nbsp;<span class="op" id="2083508">=</span>&nbsp;<span class="ident" id="2083510">n</span><span class="op" id="2083511">*</span><span class="num" id="2083512">10</span>&nbsp;<span class="op" id="2083515">+</span>&nbsp;<span class="ident" id="2083517">c</span>&nbsp;<span class="op" id="2083519">-</span>&nbsp;<span class="string" id="2083521">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083529">a</span><span class="op" id="2083530">.</span><span class="ident" id="2083531">dp</span>&nbsp;<span class="op" id="2083534">-=</span>&nbsp;<span class="ident" id="2083537">r</span>&nbsp;<span class="op" id="2083539">-</span>&nbsp;<span class="num" id="2083541">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2083545">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083584">for</span>&nbsp;<span class="op" id="2083588">;</span>&nbsp;<span class="ident" id="2083590">r</span>&nbsp;<span class="op" id="2083592">&lt;</span>&nbsp;<span class="ident" id="2083594">a</span><span class="op" id="2083595">.</span><span class="ident" id="2083596">nd</span><span class="op" id="2083598">;</span>&nbsp;<span class="ident" id="2083600">r</span><span class="op" id="2083601">++</span>&nbsp;<span class="op" id="2083604">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083608">c</span>&nbsp;<span class="op" id="2083610">:=</span>&nbsp;<span class="builtintype" id="2083613">int</span><span class="op" id="2083616">(</span><span class="ident" id="2083617">a</span><span class="op" id="2083618">.</span><span class="ident" id="2083619">d</span><span class="op" id="2083620">[</span><span class="ident" id="2083621">r</span><span class="op" id="2083622">]</span><span class="op" id="2083623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083627">dig</span>&nbsp;<span class="op" id="2083631">:=</span>&nbsp;<span class="ident" id="2083634">n</span>&nbsp;<span class="op" id="2083636">&gt;&gt;</span>&nbsp;<span class="ident" id="2083639">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083643">n</span>&nbsp;<span class="op" id="2083645">-=</span>&nbsp;<span class="ident" id="2083648">dig</span>&nbsp;<span class="op" id="2083652">&lt;&lt;</span>&nbsp;<span class="ident" id="2083655">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083659">a</span><span class="op" id="2083660">.</span><span class="ident" id="2083661">d</span><span class="op" id="2083662">[</span><span class="ident" id="2083663">w</span><span class="op" id="2083664">]</span>&nbsp;<span class="op" id="2083666">=</span>&nbsp;<span class="builtintype" id="2083668">byte</span><span class="op" id="2083672">(</span><span class="ident" id="2083673">dig</span>&nbsp;<span class="op" id="2083677">+</span>&nbsp;<span class="string" id="2083679">&#39;0&#39;</span><span class="op" id="2083682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083686">w</span><span class="op" id="2083687">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083692">n</span>&nbsp;<span class="op" id="2083694">=</span>&nbsp;<span class="ident" id="2083696">n</span><span class="op" id="2083697">*</span><span class="num" id="2083698">10</span>&nbsp;<span class="op" id="2083701">+</span>&nbsp;<span class="ident" id="2083703">c</span>&nbsp;<span class="op" id="2083705">-</span>&nbsp;<span class="string" id="2083707">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2083716">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083743">for</span>&nbsp;<span class="ident" id="2083747">n</span>&nbsp;<span class="op" id="2083749">&gt;</span>&nbsp;<span class="num" id="2083751">0</span>&nbsp;<span class="op" id="2083753">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083757">dig</span>&nbsp;<span class="op" id="2083761">:=</span>&nbsp;<span class="ident" id="2083764">n</span>&nbsp;<span class="op" id="2083766">&gt;&gt;</span>&nbsp;<span class="ident" id="2083769">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083773">n</span>&nbsp;<span class="op" id="2083775">-=</span>&nbsp;<span class="ident" id="2083778">dig</span>&nbsp;<span class="op" id="2083782">&lt;&lt;</span>&nbsp;<span class="ident" id="2083785">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2083789">if</span>&nbsp;<span class="ident" id="2083792">w</span>&nbsp;<span class="op" id="2083794">&lt;</span>&nbsp;<span class="builtinfunc" id="2083796">len</span><span class="op" id="2083799">(</span><span class="ident" id="2083800">a</span><span class="op" id="2083801">.</span><span class="ident" id="2083802">d</span><span class="op" id="2083803">)</span>&nbsp;<span class="op" id="2083805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083810">a</span><span class="op" id="2083811">.</span><span class="ident" id="2083812">d</span><span class="op" id="2083813">[</span><span class="ident" id="2083814">w</span><span class="op" id="2083815">]</span>&nbsp;<span class="op" id="2083817">=</span>&nbsp;<span class="builtintype" id="2083819">byte</span><span class="op" id="2083823">(</span><span class="ident" id="2083824">dig</span>&nbsp;<span class="op" id="2083828">+</span>&nbsp;<span class="string" id="2083830">&#39;0&#39;</span><span class="op" id="2083833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083838">w</span><span class="op" id="2083839">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083844">}</span>&nbsp;<span class="keyword" id="2083846">else</span>&nbsp;<span class="keyword" id="2083851">if</span>&nbsp;<span class="ident" id="2083854">dig</span>&nbsp;<span class="op" id="2083858">&gt;</span>&nbsp;<span class="num" id="2083860">0</span>&nbsp;<span class="op" id="2083862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083867">a</span><span class="op" id="2083868">.</span><span class="ident" id="2083869">trunc</span>&nbsp;<span class="op" id="2083875">=</span>&nbsp;<span class="builtintype" id="2083877">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083888">n</span>&nbsp;<span class="op" id="2083890">=</span>&nbsp;<span class="ident" id="2083892">n</span>&nbsp;<span class="op" id="2083894">*</span>&nbsp;<span class="num" id="2083896">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2083900">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083904">a</span><span class="op" id="2083905">.</span><span class="ident" id="2083906">nd</span>&nbsp;<span class="op" id="2083909">=</span>&nbsp;<span class="ident" id="2083911">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2083914">trim</span><span class="op" id="2083918">(</span><span class="ident" id="2083919">a</span><span class="op" id="2083920">)</span><br>
<span class="lineno"></span><span class="op" id="2083922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2083925">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2083992">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2084055">//</span><br>
<span class="lineno"></span><span class="comment" id="2084058">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2084119">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2084188">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2084258">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2084306">//</span><br>
<span class="lineno"></span><span class="comment" id="2084309">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2084348">type</span>&nbsp;<span class="ident" id="2084353">leftCheat</span>&nbsp;<span class="keyword" id="2084363">struct</span>&nbsp;<span class="op" id="2084370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084373">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2084380">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084387">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2084412">cutoff</span>&nbsp;<span class="builtintype" id="2084419">string</span>&nbsp;<span class="comment" id="2084426">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2084464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2084467">var</span>&nbsp;<span class="ident" id="2084471">leftcheats</span>&nbsp;<span class="op" id="2084482">=</span>&nbsp;<span class="op" id="2084484">[</span><span class="op" id="2084485">]</span><span class="ident" id="2084486">leftCheat</span><span class="op" id="2084495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084498">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084533">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084588">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084624">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084828">{</span><span class="num" id="2084829">0</span><span class="op" id="2084830">,</span>&nbsp;<span class="string" id="2084832">&#34;&#34;</span><span class="op" id="2084834">}</span><span class="op" id="2084835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084838">{</span><span class="num" id="2084839">1</span><span class="op" id="2084840">,</span>&nbsp;<span class="string" id="2084842">&#34;5&#34;</span><span class="op" id="2084845">}</span><span class="op" id="2084846">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084866">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084874">{</span><span class="num" id="2084875">1</span><span class="op" id="2084876">,</span>&nbsp;<span class="string" id="2084878">&#34;25&#34;</span><span class="op" id="2084882">}</span><span class="op" id="2084883">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084902">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084910">{</span><span class="num" id="2084911">1</span><span class="op" id="2084912">,</span>&nbsp;<span class="string" id="2084914">&#34;125&#34;</span><span class="op" id="2084919">}</span><span class="op" id="2084920">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084938">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084946">{</span><span class="num" id="2084947">2</span><span class="op" id="2084948">,</span>&nbsp;<span class="string" id="2084950">&#34;625&#34;</span><span class="op" id="2084955">}</span><span class="op" id="2084956">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2084974">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2084983">{</span><span class="num" id="2084984">2</span><span class="op" id="2084985">,</span>&nbsp;<span class="string" id="2084987">&#34;3125&#34;</span><span class="op" id="2084993">}</span><span class="op" id="2084994">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085011">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085020">{</span><span class="num" id="2085021">2</span><span class="op" id="2085022">,</span>&nbsp;<span class="string" id="2085024">&#34;15625&#34;</span><span class="op" id="2085031">}</span><span class="op" id="2085032">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085048">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085057">{</span><span class="num" id="2085058">3</span><span class="op" id="2085059">,</span>&nbsp;<span class="string" id="2085061">&#34;78125&#34;</span><span class="op" id="2085068">}</span><span class="op" id="2085069">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085085">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085095">{</span><span class="num" id="2085096">3</span><span class="op" id="2085097">,</span>&nbsp;<span class="string" id="2085099">&#34;390625&#34;</span><span class="op" id="2085107">}</span><span class="op" id="2085108">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085123">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085133">{</span><span class="num" id="2085134">3</span><span class="op" id="2085135">,</span>&nbsp;<span class="string" id="2085137">&#34;1953125&#34;</span><span class="op" id="2085146">}</span><span class="op" id="2085147">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085161">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085171">{</span><span class="num" id="2085172">4</span><span class="op" id="2085173">,</span>&nbsp;<span class="string" id="2085175">&#34;9765625&#34;</span><span class="op" id="2085184">}</span><span class="op" id="2085185">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085199">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085210">{</span><span class="num" id="2085211">4</span><span class="op" id="2085212">,</span>&nbsp;<span class="string" id="2085214">&#34;48828125&#34;</span><span class="op" id="2085224">}</span><span class="op" id="2085225">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085238">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085249">{</span><span class="num" id="2085250">4</span><span class="op" id="2085251">,</span>&nbsp;<span class="string" id="2085253">&#34;244140625&#34;</span><span class="op" id="2085264">}</span><span class="op" id="2085265">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085277">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085288">{</span><span class="num" id="2085289">4</span><span class="op" id="2085290">,</span>&nbsp;<span class="string" id="2085292">&#34;1220703125&#34;</span><span class="op" id="2085304">}</span><span class="op" id="2085305">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085316">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085327">{</span><span class="num" id="2085328">5</span><span class="op" id="2085329">,</span>&nbsp;<span class="string" id="2085331">&#34;6103515625&#34;</span><span class="op" id="2085343">}</span><span class="op" id="2085344">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085355">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085367">{</span><span class="num" id="2085368">5</span><span class="op" id="2085369">,</span>&nbsp;<span class="string" id="2085371">&#34;30517578125&#34;</span><span class="op" id="2085384">}</span><span class="op" id="2085385">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085395">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085407">{</span><span class="num" id="2085408">5</span><span class="op" id="2085409">,</span>&nbsp;<span class="string" id="2085411">&#34;152587890625&#34;</span><span class="op" id="2085425">}</span><span class="op" id="2085426">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085435">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085447">{</span><span class="num" id="2085448">6</span><span class="op" id="2085449">,</span>&nbsp;<span class="string" id="2085451">&#34;762939453125&#34;</span><span class="op" id="2085465">}</span><span class="op" id="2085466">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085475">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085488">{</span><span class="num" id="2085489">6</span><span class="op" id="2085490">,</span>&nbsp;<span class="string" id="2085492">&#34;3814697265625&#34;</span><span class="op" id="2085507">}</span><span class="op" id="2085508">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085516">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085529">{</span><span class="num" id="2085530">6</span><span class="op" id="2085531">,</span>&nbsp;<span class="string" id="2085533">&#34;19073486328125&#34;</span><span class="op" id="2085549">}</span><span class="op" id="2085550">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085557">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085570">{</span><span class="num" id="2085571">7</span><span class="op" id="2085572">,</span>&nbsp;<span class="string" id="2085574">&#34;95367431640625&#34;</span><span class="op" id="2085590">}</span><span class="op" id="2085591">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085598">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085612">{</span><span class="num" id="2085613">7</span><span class="op" id="2085614">,</span>&nbsp;<span class="string" id="2085616">&#34;476837158203125&#34;</span><span class="op" id="2085633">}</span><span class="op" id="2085634">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085640">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085654">{</span><span class="num" id="2085655">7</span><span class="op" id="2085656">,</span>&nbsp;<span class="string" id="2085658">&#34;2384185791015625&#34;</span><span class="op" id="2085676">}</span><span class="op" id="2085677">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2085682">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085696">{</span><span class="num" id="2085697">7</span><span class="op" id="2085698">,</span>&nbsp;<span class="string" id="2085700">&#34;11920928955078125&#34;</span><span class="op" id="2085719">}</span><span class="op" id="2085720">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2085724">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085738">{</span><span class="num" id="2085739">8</span><span class="op" id="2085740">,</span>&nbsp;<span class="string" id="2085742">&#34;59604644775390625&#34;</span><span class="op" id="2085761">}</span><span class="op" id="2085762">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2085766">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085781">{</span><span class="num" id="2085782">8</span><span class="op" id="2085783">,</span>&nbsp;<span class="string" id="2085785">&#34;298023223876953125&#34;</span><span class="op" id="2085805">}</span><span class="op" id="2085806">,</span>&nbsp;&nbsp;<span class="comment" id="2085809">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085824">{</span><span class="num" id="2085825">8</span><span class="op" id="2085826">,</span>&nbsp;<span class="string" id="2085828">&#34;1490116119384765625&#34;</span><span class="op" id="2085849">}</span><span class="op" id="2085850">,</span>&nbsp;<span class="comment" id="2085852">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2085867">{</span><span class="num" id="2085868">9</span><span class="op" id="2085869">,</span>&nbsp;<span class="string" id="2085871">&#34;7450580596923828125&#34;</span><span class="op" id="2085892">}</span><span class="op" id="2085893">,</span>&nbsp;<span class="comment" id="2085895">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2085910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085913">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2085974">func</span>&nbsp;<span class="ident" id="2085979">prefixIsLessThan</span><span class="op" id="2085995">(</span><span class="ident" id="2085996">b</span>&nbsp;<span class="op" id="2085998">[</span><span class="op" id="2085999">]</span><span class="builtintype" id="2086000">byte</span><span class="op" id="2086004">,</span>&nbsp;<span class="ident" id="2086006">s</span>&nbsp;<span class="builtintype" id="2086008">string</span><span class="op" id="2086014">)</span>&nbsp;<span class="builtintype" id="2086016">bool</span>&nbsp;<span class="op" id="2086021">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086024">for</span>&nbsp;<span class="ident" id="2086028">i</span>&nbsp;<span class="op" id="2086030">:=</span>&nbsp;<span class="num" id="2086033">0</span><span class="op" id="2086034">;</span>&nbsp;<span class="ident" id="2086036">i</span>&nbsp;<span class="op" id="2086038">&lt;</span>&nbsp;<span class="builtinfunc" id="2086040">len</span><span class="op" id="2086043">(</span><span class="ident" id="2086044">s</span><span class="op" id="2086045">)</span><span class="op" id="2086046">;</span>&nbsp;<span class="ident" id="2086048">i</span><span class="op" id="2086049">++</span>&nbsp;<span class="op" id="2086052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086056">if</span>&nbsp;<span class="ident" id="2086059">i</span>&nbsp;<span class="op" id="2086061">&gt;=</span>&nbsp;<span class="builtinfunc" id="2086064">len</span><span class="op" id="2086067">(</span><span class="ident" id="2086068">b</span><span class="op" id="2086069">)</span>&nbsp;<span class="op" id="2086071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086076">return</span>&nbsp;<span class="builtintype" id="2086083">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086094">if</span>&nbsp;<span class="ident" id="2086097">b</span><span class="op" id="2086098">[</span><span class="ident" id="2086099">i</span><span class="op" id="2086100">]</span>&nbsp;<span class="op" id="2086102">!=</span>&nbsp;<span class="ident" id="2086105">s</span><span class="op" id="2086106">[</span><span class="ident" id="2086107">i</span><span class="op" id="2086108">]</span>&nbsp;<span class="op" id="2086110">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086115">return</span>&nbsp;<span class="ident" id="2086122">b</span><span class="op" id="2086123">[</span><span class="ident" id="2086124">i</span><span class="op" id="2086125">]</span>&nbsp;<span class="op" id="2086127">&lt;</span>&nbsp;<span class="ident" id="2086129">s</span><span class="op" id="2086130">[</span><span class="ident" id="2086131">i</span><span class="op" id="2086132">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086142">return</span>&nbsp;<span class="builtintype" id="2086149">false</span><br>
<span class="lineno"></span><span class="op" id="2086155">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2086158">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2086230">func</span>&nbsp;<span class="ident" id="2086235">leftShift</span><span class="op" id="2086244">(</span><span class="ident" id="2086245">a</span>&nbsp;<span class="op" id="2086247">*</span><span class="ident" id="2086248">decimal</span><span class="op" id="2086255">,</span>&nbsp;<span class="ident" id="2086257">k</span>&nbsp;<span class="builtintype" id="2086259">uint</span><span class="op" id="2086263">)</span>&nbsp;<span class="op" id="2086265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086268">delta</span>&nbsp;<span class="op" id="2086274">:=</span>&nbsp;<span class="ident" id="2086277">leftcheats</span><span class="op" id="2086287">[</span><span class="ident" id="2086288">k</span><span class="op" id="2086289">]</span><span class="op" id="2086290">.</span><span class="ident" id="2086291">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086298">if</span>&nbsp;<span class="ident" id="2086301">prefixIsLessThan</span><span class="op" id="2086317">(</span><span class="ident" id="2086318">a</span><span class="op" id="2086319">.</span><span class="ident" id="2086320">d</span><span class="op" id="2086321">[</span><span class="num" id="2086322">0</span><span class="op" id="2086323">:</span><span class="ident" id="2086324">a</span><span class="op" id="2086325">.</span><span class="ident" id="2086326">nd</span><span class="op" id="2086328">]</span><span class="op" id="2086329">,</span>&nbsp;<span class="ident" id="2086331">leftcheats</span><span class="op" id="2086341">[</span><span class="ident" id="2086342">k</span><span class="op" id="2086343">]</span><span class="op" id="2086344">.</span><span class="ident" id="2086345">cutoff</span><span class="op" id="2086351">)</span>&nbsp;<span class="op" id="2086353">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086357">delta</span><span class="op" id="2086362">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086370">r</span>&nbsp;<span class="op" id="2086372">:=</span>&nbsp;<span class="ident" id="2086375">a</span><span class="op" id="2086376">.</span><span class="ident" id="2086377">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2086388">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086403">w</span>&nbsp;<span class="op" id="2086405">:=</span>&nbsp;<span class="ident" id="2086408">a</span><span class="op" id="2086409">.</span><span class="ident" id="2086410">nd</span>&nbsp;<span class="op" id="2086413">+</span>&nbsp;<span class="ident" id="2086415">delta</span>&nbsp;<span class="comment" id="2086421">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086437">n</span>&nbsp;<span class="op" id="2086439">:=</span>&nbsp;<span class="num" id="2086442">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2086446">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086485">for</span>&nbsp;<span class="ident" id="2086489">r</span><span class="op" id="2086490">--</span><span class="op" id="2086492">;</span>&nbsp;<span class="ident" id="2086494">r</span>&nbsp;<span class="op" id="2086496">&gt;=</span>&nbsp;<span class="num" id="2086499">0</span><span class="op" id="2086500">;</span>&nbsp;<span class="ident" id="2086502">r</span><span class="op" id="2086503">--</span>&nbsp;<span class="op" id="2086506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086510">n</span>&nbsp;<span class="op" id="2086512">+=</span>&nbsp;<span class="op" id="2086515">(</span><span class="builtintype" id="2086516">int</span><span class="op" id="2086519">(</span><span class="ident" id="2086520">a</span><span class="op" id="2086521">.</span><span class="ident" id="2086522">d</span><span class="op" id="2086523">[</span><span class="ident" id="2086524">r</span><span class="op" id="2086525">]</span><span class="op" id="2086526">)</span>&nbsp;<span class="op" id="2086528">-</span>&nbsp;<span class="string" id="2086530">&#39;0&#39;</span><span class="op" id="2086533">)</span>&nbsp;<span class="op" id="2086535">&lt;&lt;</span>&nbsp;<span class="ident" id="2086538">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086542">quo</span>&nbsp;<span class="op" id="2086546">:=</span>&nbsp;<span class="ident" id="2086549">n</span>&nbsp;<span class="op" id="2086551">/</span>&nbsp;<span class="num" id="2086553">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086558">rem</span>&nbsp;<span class="op" id="2086562">:=</span>&nbsp;<span class="ident" id="2086565">n</span>&nbsp;<span class="op" id="2086567">-</span>&nbsp;<span class="num" id="2086569">10</span><span class="op" id="2086571">*</span><span class="ident" id="2086572">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086578">w</span><span class="op" id="2086579">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086584">if</span>&nbsp;<span class="ident" id="2086587">w</span>&nbsp;<span class="op" id="2086589">&lt;</span>&nbsp;<span class="builtinfunc" id="2086591">len</span><span class="op" id="2086594">(</span><span class="ident" id="2086595">a</span><span class="op" id="2086596">.</span><span class="ident" id="2086597">d</span><span class="op" id="2086598">)</span>&nbsp;<span class="op" id="2086600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086605">a</span><span class="op" id="2086606">.</span><span class="ident" id="2086607">d</span><span class="op" id="2086608">[</span><span class="ident" id="2086609">w</span><span class="op" id="2086610">]</span>&nbsp;<span class="op" id="2086612">=</span>&nbsp;<span class="builtintype" id="2086614">byte</span><span class="op" id="2086618">(</span><span class="ident" id="2086619">rem</span>&nbsp;<span class="op" id="2086623">+</span>&nbsp;<span class="string" id="2086625">&#39;0&#39;</span><span class="op" id="2086628">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086632">}</span>&nbsp;<span class="keyword" id="2086634">else</span>&nbsp;<span class="keyword" id="2086639">if</span>&nbsp;<span class="ident" id="2086642">rem</span>&nbsp;<span class="op" id="2086646">!=</span>&nbsp;<span class="num" id="2086649">0</span>&nbsp;<span class="op" id="2086651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086656">a</span><span class="op" id="2086657">.</span><span class="ident" id="2086658">trunc</span>&nbsp;<span class="op" id="2086664">=</span>&nbsp;<span class="builtintype" id="2086666">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086677">n</span>&nbsp;<span class="op" id="2086679">=</span>&nbsp;<span class="ident" id="2086681">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086686">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2086690">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086717">for</span>&nbsp;<span class="ident" id="2086721">n</span>&nbsp;<span class="op" id="2086723">&gt;</span>&nbsp;<span class="num" id="2086725">0</span>&nbsp;<span class="op" id="2086727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086731">quo</span>&nbsp;<span class="op" id="2086735">:=</span>&nbsp;<span class="ident" id="2086738">n</span>&nbsp;<span class="op" id="2086740">/</span>&nbsp;<span class="num" id="2086742">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086747">rem</span>&nbsp;<span class="op" id="2086751">:=</span>&nbsp;<span class="ident" id="2086754">n</span>&nbsp;<span class="op" id="2086756">-</span>&nbsp;<span class="num" id="2086758">10</span><span class="op" id="2086760">*</span><span class="ident" id="2086761">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086767">w</span><span class="op" id="2086768">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086773">if</span>&nbsp;<span class="ident" id="2086776">w</span>&nbsp;<span class="op" id="2086778">&lt;</span>&nbsp;<span class="builtinfunc" id="2086780">len</span><span class="op" id="2086783">(</span><span class="ident" id="2086784">a</span><span class="op" id="2086785">.</span><span class="ident" id="2086786">d</span><span class="op" id="2086787">)</span>&nbsp;<span class="op" id="2086789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086794">a</span><span class="op" id="2086795">.</span><span class="ident" id="2086796">d</span><span class="op" id="2086797">[</span><span class="ident" id="2086798">w</span><span class="op" id="2086799">]</span>&nbsp;<span class="op" id="2086801">=</span>&nbsp;<span class="builtintype" id="2086803">byte</span><span class="op" id="2086807">(</span><span class="ident" id="2086808">rem</span>&nbsp;<span class="op" id="2086812">+</span>&nbsp;<span class="string" id="2086814">&#39;0&#39;</span><span class="op" id="2086817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086821">}</span>&nbsp;<span class="keyword" id="2086823">else</span>&nbsp;<span class="keyword" id="2086828">if</span>&nbsp;<span class="ident" id="2086831">rem</span>&nbsp;<span class="op" id="2086835">!=</span>&nbsp;<span class="num" id="2086838">0</span>&nbsp;<span class="op" id="2086840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086845">a</span><span class="op" id="2086846">.</span><span class="ident" id="2086847">trunc</span>&nbsp;<span class="op" id="2086853">=</span>&nbsp;<span class="builtintype" id="2086855">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086866">n</span>&nbsp;<span class="op" id="2086868">=</span>&nbsp;<span class="ident" id="2086870">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086879">a</span><span class="op" id="2086880">.</span><span class="ident" id="2086881">nd</span>&nbsp;<span class="op" id="2086884">+=</span>&nbsp;<span class="ident" id="2086887">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2086894">if</span>&nbsp;<span class="ident" id="2086897">a</span><span class="op" id="2086898">.</span><span class="ident" id="2086899">nd</span>&nbsp;<span class="op" id="2086902">&gt;=</span>&nbsp;<span class="builtinfunc" id="2086905">len</span><span class="op" id="2086908">(</span><span class="ident" id="2086909">a</span><span class="op" id="2086910">.</span><span class="ident" id="2086911">d</span><span class="op" id="2086912">)</span>&nbsp;<span class="op" id="2086914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086918">a</span><span class="op" id="2086919">.</span><span class="ident" id="2086920">nd</span>&nbsp;<span class="op" id="2086923">=</span>&nbsp;<span class="builtinfunc" id="2086925">len</span><span class="op" id="2086928">(</span><span class="ident" id="2086929">a</span><span class="op" id="2086930">.</span><span class="ident" id="2086931">d</span><span class="op" id="2086932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2086935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086938">a</span><span class="op" id="2086939">.</span><span class="ident" id="2086940">dp</span>&nbsp;<span class="op" id="2086943">+=</span>&nbsp;<span class="ident" id="2086946">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2086953">trim</span><span class="op" id="2086957">(</span><span class="ident" id="2086958">a</span><span class="op" id="2086959">)</span><br>
<span class="lineno">275</span><span class="op" id="2086961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2086964">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2087011">func</span>&nbsp;<span class="op" id="2087016">(</span><span class="ident" id="2087017">a</span>&nbsp;<span class="op" id="2087019">*</span><span class="ident" id="2087020">decimal</span><span class="op" id="2087027">)</span>&nbsp;<span class="ident" id="2087029">Shift</span><span class="op" id="2087034">(</span><span class="ident" id="2087035">k</span>&nbsp;<span class="builtintype" id="2087037">int</span><span class="op" id="2087040">)</span>&nbsp;<span class="op" id="2087042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087045">switch</span>&nbsp;<span class="op" id="2087052">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087055">case</span>&nbsp;<span class="ident" id="2087060">a</span><span class="op" id="2087061">.</span><span class="ident" id="2087062">nd</span>&nbsp;<span class="op" id="2087065">==</span>&nbsp;<span class="num" id="2087068">0</span><span class="op" id="2087069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087073">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087099">case</span>&nbsp;<span class="ident" id="2087104">k</span>&nbsp;<span class="op" id="2087106">&gt;</span>&nbsp;<span class="num" id="2087108">0</span><span class="op" id="2087109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087113">for</span>&nbsp;<span class="ident" id="2087117">k</span>&nbsp;<span class="op" id="2087119">&gt;</span>&nbsp;<span class="ident" id="2087121">maxShift</span>&nbsp;<span class="op" id="2087130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087135">leftShift</span><span class="op" id="2087144">(</span><span class="ident" id="2087145">a</span><span class="op" id="2087146">,</span>&nbsp;<span class="ident" id="2087148">maxShift</span><span class="op" id="2087156">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087161">k</span>&nbsp;<span class="op" id="2087163">-=</span>&nbsp;<span class="ident" id="2087166">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087181">leftShift</span><span class="op" id="2087190">(</span><span class="ident" id="2087191">a</span><span class="op" id="2087192">,</span>&nbsp;<span class="builtintype" id="2087194">uint</span><span class="op" id="2087198">(</span><span class="ident" id="2087199">k</span><span class="op" id="2087200">)</span><span class="op" id="2087201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087204">case</span>&nbsp;<span class="ident" id="2087209">k</span>&nbsp;<span class="op" id="2087211">&lt;</span>&nbsp;<span class="num" id="2087213">0</span><span class="op" id="2087214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087218">for</span>&nbsp;<span class="ident" id="2087222">k</span>&nbsp;<span class="op" id="2087224">&lt;</span>&nbsp;<span class="op" id="2087226">-</span><span class="ident" id="2087227">maxShift</span>&nbsp;<span class="op" id="2087236">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087241">rightShift</span><span class="op" id="2087251">(</span><span class="ident" id="2087252">a</span><span class="op" id="2087253">,</span>&nbsp;<span class="ident" id="2087255">maxShift</span><span class="op" id="2087263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087268">k</span>&nbsp;<span class="op" id="2087270">+=</span>&nbsp;<span class="ident" id="2087273">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087288">rightShift</span><span class="op" id="2087298">(</span><span class="ident" id="2087299">a</span><span class="op" id="2087300">,</span>&nbsp;<span class="builtintype" id="2087302">uint</span><span class="op" id="2087306">(</span><span class="op" id="2087307">-</span><span class="ident" id="2087308">k</span><span class="op" id="2087309">)</span><span class="op" id="2087310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087313">}</span><br>
<span class="lineno">295</span><span class="op" id="2087315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2087318">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2087368">func</span>&nbsp;<span class="ident" id="2087373">shouldRoundUp</span><span class="op" id="2087386">(</span><span class="ident" id="2087387">a</span>&nbsp;<span class="op" id="2087389">*</span><span class="ident" id="2087390">decimal</span><span class="op" id="2087397">,</span>&nbsp;<span class="ident" id="2087399">nd</span>&nbsp;<span class="builtintype" id="2087402">int</span><span class="op" id="2087405">)</span>&nbsp;<span class="builtintype" id="2087407">bool</span>&nbsp;<span class="op" id="2087412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087415">if</span>&nbsp;<span class="ident" id="2087418">nd</span>&nbsp;<span class="op" id="2087421">&lt;</span>&nbsp;<span class="num" id="2087423">0</span>&nbsp;<span class="op" id="2087425">||</span>&nbsp;<span class="ident" id="2087428">nd</span>&nbsp;<span class="op" id="2087431">&gt;=</span>&nbsp;<span class="ident" id="2087434">a</span><span class="op" id="2087435">.</span><span class="ident" id="2087436">nd</span>&nbsp;<span class="op" id="2087439">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087443">return</span>&nbsp;<span class="builtintype" id="2087450">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087460">if</span>&nbsp;<span class="ident" id="2087463">a</span><span class="op" id="2087464">.</span><span class="ident" id="2087465">d</span><span class="op" id="2087466">[</span><span class="ident" id="2087467">nd</span><span class="op" id="2087469">]</span>&nbsp;<span class="op" id="2087471">==</span>&nbsp;<span class="string" id="2087474">&#39;5&#39;</span>&nbsp;<span class="op" id="2087478">&amp;&amp;</span>&nbsp;<span class="ident" id="2087481">nd</span><span class="op" id="2087483">+</span><span class="num" id="2087484">1</span>&nbsp;<span class="op" id="2087486">==</span>&nbsp;<span class="ident" id="2087489">a</span><span class="op" id="2087490">.</span><span class="ident" id="2087491">nd</span>&nbsp;<span class="op" id="2087494">{</span>&nbsp;<span class="comment" id="2087496">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087533">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087610">if</span>&nbsp;<span class="ident" id="2087613">a</span><span class="op" id="2087614">.</span><span class="ident" id="2087615">trunc</span>&nbsp;<span class="op" id="2087621">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087626">return</span>&nbsp;<span class="builtintype" id="2087633">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087644">return</span>&nbsp;<span class="ident" id="2087651">nd</span>&nbsp;<span class="op" id="2087654">&gt;</span>&nbsp;<span class="num" id="2087656">0</span>&nbsp;<span class="op" id="2087658">&amp;&amp;</span>&nbsp;<span class="op" id="2087661">(</span><span class="ident" id="2087662">a</span><span class="op" id="2087663">.</span><span class="ident" id="2087664">d</span><span class="op" id="2087665">[</span><span class="ident" id="2087666">nd</span><span class="op" id="2087668">-</span><span class="num" id="2087669">1</span><span class="op" id="2087670">]</span><span class="op" id="2087671">-</span><span class="string" id="2087672">&#39;0&#39;</span><span class="op" id="2087675">)</span><span class="op" id="2087676">%</span><span class="num" id="2087677">2</span>&nbsp;<span class="op" id="2087679">!=</span>&nbsp;<span class="num" id="2087682">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2087688">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087722">return</span>&nbsp;<span class="ident" id="2087729">a</span><span class="op" id="2087730">.</span><span class="ident" id="2087731">d</span><span class="op" id="2087732">[</span><span class="ident" id="2087733">nd</span><span class="op" id="2087735">]</span>&nbsp;<span class="op" id="2087737">&gt;=</span>&nbsp;<span class="string" id="2087740">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2087744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2087747">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2087783">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2087825">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2087866">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2087882">func</span>&nbsp;<span class="op" id="2087887">(</span><span class="ident" id="2087888">a</span>&nbsp;<span class="op" id="2087890">*</span><span class="ident" id="2087891">decimal</span><span class="op" id="2087898">)</span>&nbsp;<span class="ident" id="2087900">Round</span><span class="op" id="2087905">(</span><span class="ident" id="2087906">nd</span>&nbsp;<span class="builtintype" id="2087909">int</span><span class="op" id="2087912">)</span>&nbsp;<span class="op" id="2087914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087917">if</span>&nbsp;<span class="ident" id="2087920">nd</span>&nbsp;<span class="op" id="2087923">&lt;</span>&nbsp;<span class="num" id="2087925">0</span>&nbsp;<span class="op" id="2087927">||</span>&nbsp;<span class="ident" id="2087930">nd</span>&nbsp;<span class="op" id="2087933">&gt;=</span>&nbsp;<span class="ident" id="2087936">a</span><span class="op" id="2087937">.</span><span class="ident" id="2087938">nd</span>&nbsp;<span class="op" id="2087941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087945">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2087956">if</span>&nbsp;<span class="ident" id="2087959">shouldRoundUp</span><span class="op" id="2087972">(</span><span class="ident" id="2087973">a</span><span class="op" id="2087974">,</span>&nbsp;<span class="ident" id="2087976">nd</span><span class="op" id="2087978">)</span>&nbsp;<span class="op" id="2087980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2087984">a</span><span class="op" id="2087985">.</span><span class="ident" id="2087986">RoundUp</span><span class="op" id="2087993">(</span><span class="ident" id="2087994">nd</span><span class="op" id="2087996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2087999">}</span>&nbsp;<span class="keyword" id="2088001">else</span>&nbsp;<span class="op" id="2088006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088010">a</span><span class="op" id="2088011">.</span><span class="ident" id="2088012">RoundDown</span><span class="op" id="2088021">(</span><span class="ident" id="2088022">nd</span><span class="op" id="2088024">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088027">}</span><br>
<span class="lineno"></span><span class="op" id="2088029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2088032">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2088073">func</span>&nbsp;<span class="op" id="2088078">(</span><span class="ident" id="2088079">a</span>&nbsp;<span class="op" id="2088081">*</span><span class="ident" id="2088082">decimal</span><span class="op" id="2088089">)</span>&nbsp;<span class="ident" id="2088091">RoundDown</span><span class="op" id="2088100">(</span><span class="ident" id="2088101">nd</span>&nbsp;<span class="builtintype" id="2088104">int</span><span class="op" id="2088107">)</span>&nbsp;<span class="op" id="2088109">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088112">if</span>&nbsp;<span class="ident" id="2088115">nd</span>&nbsp;<span class="op" id="2088118">&lt;</span>&nbsp;<span class="num" id="2088120">0</span>&nbsp;<span class="op" id="2088122">||</span>&nbsp;<span class="ident" id="2088125">nd</span>&nbsp;<span class="op" id="2088128">&gt;=</span>&nbsp;<span class="ident" id="2088131">a</span><span class="op" id="2088132">.</span><span class="ident" id="2088133">nd</span>&nbsp;<span class="op" id="2088136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088140">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088151">a</span><span class="op" id="2088152">.</span><span class="ident" id="2088153">nd</span>&nbsp;<span class="op" id="2088156">=</span>&nbsp;<span class="ident" id="2088158">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088162">trim</span><span class="op" id="2088166">(</span><span class="ident" id="2088167">a</span><span class="op" id="2088168">)</span><br>
<span class="lineno">335</span><span class="op" id="2088170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2088173">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2088212">func</span>&nbsp;<span class="op" id="2088217">(</span><span class="ident" id="2088218">a</span>&nbsp;<span class="op" id="2088220">*</span><span class="ident" id="2088221">decimal</span><span class="op" id="2088228">)</span>&nbsp;<span class="ident" id="2088230">RoundUp</span><span class="op" id="2088237">(</span><span class="ident" id="2088238">nd</span>&nbsp;<span class="builtintype" id="2088241">int</span><span class="op" id="2088244">)</span>&nbsp;<span class="op" id="2088246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088249">if</span>&nbsp;<span class="ident" id="2088252">nd</span>&nbsp;<span class="op" id="2088255">&lt;</span>&nbsp;<span class="num" id="2088257">0</span>&nbsp;<span class="op" id="2088259">||</span>&nbsp;<span class="ident" id="2088262">nd</span>&nbsp;<span class="op" id="2088265">&gt;=</span>&nbsp;<span class="ident" id="2088268">a</span><span class="op" id="2088269">.</span><span class="ident" id="2088270">nd</span>&nbsp;<span class="op" id="2088273">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088277">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2088289">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088302">for</span>&nbsp;<span class="ident" id="2088306">i</span>&nbsp;<span class="op" id="2088308">:=</span>&nbsp;<span class="ident" id="2088311">nd</span>&nbsp;<span class="op" id="2088314">-</span>&nbsp;<span class="num" id="2088316">1</span><span class="op" id="2088317">;</span>&nbsp;<span class="ident" id="2088319">i</span>&nbsp;<span class="op" id="2088321">&gt;=</span>&nbsp;<span class="num" id="2088324">0</span><span class="op" id="2088325">;</span>&nbsp;<span class="ident" id="2088327">i</span><span class="op" id="2088328">--</span>&nbsp;<span class="op" id="2088331">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088335">c</span>&nbsp;<span class="op" id="2088337">:=</span>&nbsp;<span class="ident" id="2088340">a</span><span class="op" id="2088341">.</span><span class="ident" id="2088342">d</span><span class="op" id="2088343">[</span><span class="ident" id="2088344">i</span><span class="op" id="2088345">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088349">if</span>&nbsp;<span class="ident" id="2088352">c</span>&nbsp;<span class="op" id="2088354">&lt;</span>&nbsp;<span class="string" id="2088356">&#39;9&#39;</span>&nbsp;<span class="op" id="2088360">{</span>&nbsp;<span class="comment" id="2088362">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088394">a</span><span class="op" id="2088395">.</span><span class="ident" id="2088396">d</span><span class="op" id="2088397">[</span><span class="ident" id="2088398">i</span><span class="op" id="2088399">]</span><span class="op" id="2088400">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088406">a</span><span class="op" id="2088407">.</span><span class="ident" id="2088408">nd</span>&nbsp;<span class="op" id="2088411">=</span>&nbsp;<span class="ident" id="2088413">i</span>&nbsp;<span class="op" id="2088415">+</span>&nbsp;<span class="num" id="2088417">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088422">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2088438">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2088460">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088512">a</span><span class="op" id="2088513">.</span><span class="ident" id="2088514">d</span><span class="op" id="2088515">[</span><span class="num" id="2088516">0</span><span class="op" id="2088517">]</span>&nbsp;<span class="op" id="2088519">=</span>&nbsp;<span class="string" id="2088521">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088526">a</span><span class="op" id="2088527">.</span><span class="ident" id="2088528">nd</span>&nbsp;<span class="op" id="2088531">=</span>&nbsp;<span class="num" id="2088533">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088536">a</span><span class="op" id="2088537">.</span><span class="ident" id="2088538">dp</span><span class="op" id="2088540">++</span><br>
<span class="lineno"></span><span class="op" id="2088543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2088546">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2088594">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2088627">func</span>&nbsp;<span class="op" id="2088632">(</span><span class="ident" id="2088633">a</span>&nbsp;<span class="op" id="2088635">*</span><span class="ident" id="2088636">decimal</span><span class="op" id="2088643">)</span>&nbsp;<span class="ident" id="2088645">RoundedInteger</span><span class="op" id="2088659">(</span><span class="op" id="2088660">)</span>&nbsp;<span class="ident" id="2088662">uint64</span>&nbsp;<span class="op" id="2088669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088672">if</span>&nbsp;<span class="ident" id="2088675">a</span><span class="op" id="2088676">.</span><span class="ident" id="2088677">dp</span>&nbsp;<span class="op" id="2088680">&gt;</span>&nbsp;<span class="num" id="2088682">20</span>&nbsp;<span class="op" id="2088685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088689">return</span>&nbsp;<span class="num" id="2088696">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088719">var</span>&nbsp;<span class="ident" id="2088723">i</span>&nbsp;<span class="builtintype" id="2088725">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088730">n</span>&nbsp;<span class="op" id="2088732">:=</span>&nbsp;<span class="ident" id="2088735">uint64</span><span class="op" id="2088741">(</span><span class="num" id="2088742">0</span><span class="op" id="2088743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088746">for</span>&nbsp;<span class="ident" id="2088750">i</span>&nbsp;<span class="op" id="2088752">=</span>&nbsp;<span class="num" id="2088754">0</span><span class="op" id="2088755">;</span>&nbsp;<span class="ident" id="2088757">i</span>&nbsp;<span class="op" id="2088759">&lt;</span>&nbsp;<span class="ident" id="2088761">a</span><span class="op" id="2088762">.</span><span class="ident" id="2088763">dp</span>&nbsp;<span class="op" id="2088766">&amp;&amp;</span>&nbsp;<span class="ident" id="2088769">i</span>&nbsp;<span class="op" id="2088771">&lt;</span>&nbsp;<span class="ident" id="2088773">a</span><span class="op" id="2088774">.</span><span class="ident" id="2088775">nd</span><span class="op" id="2088777">;</span>&nbsp;<span class="ident" id="2088779">i</span><span class="op" id="2088780">++</span>&nbsp;<span class="op" id="2088783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088787">n</span>&nbsp;<span class="op" id="2088789">=</span>&nbsp;<span class="ident" id="2088791">n</span><span class="op" id="2088792">*</span><span class="num" id="2088793">10</span>&nbsp;<span class="op" id="2088796">+</span>&nbsp;<span class="ident" id="2088798">uint64</span><span class="op" id="2088804">(</span><span class="ident" id="2088805">a</span><span class="op" id="2088806">.</span><span class="ident" id="2088807">d</span><span class="op" id="2088808">[</span><span class="ident" id="2088809">i</span><span class="op" id="2088810">]</span><span class="op" id="2088811">-</span><span class="string" id="2088812">&#39;0&#39;</span><span class="op" id="2088815">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088821">for</span>&nbsp;<span class="op" id="2088825">;</span>&nbsp;<span class="ident" id="2088827">i</span>&nbsp;<span class="op" id="2088829">&lt;</span>&nbsp;<span class="ident" id="2088831">a</span><span class="op" id="2088832">.</span><span class="ident" id="2088833">dp</span><span class="op" id="2088835">;</span>&nbsp;<span class="ident" id="2088837">i</span><span class="op" id="2088838">++</span>&nbsp;<span class="op" id="2088841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088845">n</span>&nbsp;<span class="op" id="2088847">*=</span>&nbsp;<span class="num" id="2088850">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088857">if</span>&nbsp;<span class="ident" id="2088860">shouldRoundUp</span><span class="op" id="2088873">(</span><span class="ident" id="2088874">a</span><span class="op" id="2088875">,</span>&nbsp;<span class="ident" id="2088877">a</span><span class="op" id="2088878">.</span><span class="ident" id="2088879">dp</span><span class="op" id="2088881">)</span>&nbsp;<span class="op" id="2088883">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2088887">n</span><span class="op" id="2088888">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2088892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2088895">return</span>&nbsp;<span class="ident" id="2088902">n</span><br>
<span class="lineno"></span><span class="op" id="2088904">}</span>
</div>
</body>
</html>
