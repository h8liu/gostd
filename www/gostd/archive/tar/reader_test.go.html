<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6448403">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6448458">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6448512">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6448563">package</span>&nbsp;<span class="ident" id="6448571">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6448576">import</span>&nbsp;<span class="op" id="6448583">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448586">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448595">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448609">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448616">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448622">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448635">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448641">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448652">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448663">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6448674">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6448681">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6448684">type</span>&nbsp;<span class="ident" id="6448689">untarTest</span>&nbsp;<span class="keyword" id="6448699">struct</span>&nbsp;<span class="op" id="6448706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448709">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6448717">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448725">headers</span>&nbsp;<span class="op" id="6448733">[</span><span class="op" id="6448734">]</span><span class="op" id="6448735">*</span><span class="ident" id="6448736">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448744">cksums</span>&nbsp;&nbsp;<span class="op" id="6448752">[</span><span class="op" id="6448753">]</span><span class="builtintype" id="6448754">string</span><br>
<span class="lineno"></span><span class="op" id="6448761">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6448764">var</span>&nbsp;<span class="ident" id="6448768">gnuTarTest</span>&nbsp;<span class="op" id="6448779">=</span>&nbsp;<span class="op" id="6448781">&amp;</span><span class="ident" id="6448782">untarTest</span><span class="op" id="6448791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448794">file</span><span class="op" id="6448798">:</span>&nbsp;<span class="string" id="6448800">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6448818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448821">headers</span><span class="op" id="6448828">:</span>&nbsp;<span class="op" id="6448830">[</span><span class="op" id="6448831">]</span><span class="op" id="6448832">*</span><span class="ident" id="6448833">Header</span><span class="op" id="6448839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448843">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448848">Name</span><span class="op" id="6448852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448858">&#34;small.txt&#34;</span><span class="op" id="6448869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448874">Mode</span><span class="op" id="6448878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6448884">0640</span><span class="op" id="6448888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448893">Uid</span><span class="op" id="6448896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6448903">73025</span><span class="op" id="6448908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448913">Gid</span><span class="op" id="6448916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6448923">5000</span><span class="op" id="6448927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448932">Size</span><span class="op" id="6448936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6448942">5</span><span class="op" id="6448943">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448948">ModTime</span><span class="op" id="6448955">:</span>&nbsp;&nbsp;<span class="ident" id="6448958">time</span><span class="op" id="6448962">.</span><span class="ident" id="6448963">Unix</span><span class="op" id="6448967">(</span><span class="num" id="6448968">1244428340</span><span class="op" id="6448978">,</span>&nbsp;<span class="num" id="6448980">0</span><span class="op" id="6448981">)</span><span class="op" id="6448982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448987">Typeflag</span><span class="op" id="6448995">:</span>&nbsp;<span class="string" id="6448997">&#39;0&#39;</span><span class="op" id="6449000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449005">Uname</span><span class="op" id="6449010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449015">&#34;dsymonds&#34;</span><span class="op" id="6449025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449030">Gname</span><span class="op" id="6449035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449040">&#34;eng&#34;</span><span class="op" id="6449045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449049">}</span><span class="op" id="6449050">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449059">Name</span><span class="op" id="6449063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449069">&#34;small2.txt&#34;</span><span class="op" id="6449081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449086">Mode</span><span class="op" id="6449090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449096">0640</span><span class="op" id="6449100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449105">Uid</span><span class="op" id="6449108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449115">73025</span><span class="op" id="6449120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449125">Gid</span><span class="op" id="6449128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449135">5000</span><span class="op" id="6449139">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449144">Size</span><span class="op" id="6449148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449154">11</span><span class="op" id="6449156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449161">ModTime</span><span class="op" id="6449168">:</span>&nbsp;&nbsp;<span class="ident" id="6449171">time</span><span class="op" id="6449175">.</span><span class="ident" id="6449176">Unix</span><span class="op" id="6449180">(</span><span class="num" id="6449181">1244436044</span><span class="op" id="6449191">,</span>&nbsp;<span class="num" id="6449193">0</span><span class="op" id="6449194">)</span><span class="op" id="6449195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449200">Typeflag</span><span class="op" id="6449208">:</span>&nbsp;<span class="string" id="6449210">&#39;0&#39;</span><span class="op" id="6449213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449218">Uname</span><span class="op" id="6449223">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449228">&#34;dsymonds&#34;</span><span class="op" id="6449238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449243">Gname</span><span class="op" id="6449248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449253">&#34;eng&#34;</span><span class="op" id="6449258">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449262">}</span><span class="op" id="6449263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449266">}</span><span class="op" id="6449267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449270">cksums</span><span class="op" id="6449276">:</span>&nbsp;<span class="op" id="6449278">[</span><span class="op" id="6449279">]</span><span class="builtintype" id="6449280">string</span><span class="op" id="6449286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6449290">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6449324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6449328">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6449362">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449365">}</span><span class="op" id="6449366">,</span><br>
<span class="lineno"></span><span class="op" id="6449368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6449371">var</span>&nbsp;<span class="ident" id="6449375">sparseTarTest</span>&nbsp;<span class="op" id="6449389">=</span>&nbsp;<span class="op" id="6449391">&amp;</span><span class="ident" id="6449392">untarTest</span><span class="op" id="6449401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449404">file</span><span class="op" id="6449408">:</span>&nbsp;<span class="string" id="6449410">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6449439">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449442">headers</span><span class="op" id="6449449">:</span>&nbsp;<span class="op" id="6449451">[</span><span class="op" id="6449452">]</span><span class="op" id="6449453">*</span><span class="ident" id="6449454">Header</span><span class="op" id="6449460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449469">Name</span><span class="op" id="6449473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449479">&#34;sparse-gnu&#34;</span><span class="op" id="6449491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449496">Mode</span><span class="op" id="6449500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449506">420</span><span class="op" id="6449509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449514">Uid</span><span class="op" id="6449517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449524">1000</span><span class="op" id="6449528">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449533">Gid</span><span class="op" id="6449536">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449543">1000</span><span class="op" id="6449547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449552">Size</span><span class="op" id="6449556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449562">200</span><span class="op" id="6449565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449570">ModTime</span><span class="op" id="6449577">:</span>&nbsp;&nbsp;<span class="ident" id="6449580">time</span><span class="op" id="6449584">.</span><span class="ident" id="6449585">Unix</span><span class="op" id="6449589">(</span><span class="num" id="6449590">1392395740</span><span class="op" id="6449600">,</span>&nbsp;<span class="num" id="6449602">0</span><span class="op" id="6449603">)</span><span class="op" id="6449604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449609">Typeflag</span><span class="op" id="6449617">:</span>&nbsp;<span class="num" id="6449619">0x53</span><span class="op" id="6449623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449628">Linkname</span><span class="op" id="6449636">:</span>&nbsp;<span class="string" id="6449638">&#34;&#34;</span><span class="op" id="6449640">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449645">Uname</span><span class="op" id="6449650">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449655">&#34;david&#34;</span><span class="op" id="6449662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449667">Gname</span><span class="op" id="6449672">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449677">&#34;david&#34;</span><span class="op" id="6449684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449689">Devmajor</span><span class="op" id="6449697">:</span>&nbsp;<span class="num" id="6449699">0</span><span class="op" id="6449700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449705">Devminor</span><span class="op" id="6449713">:</span>&nbsp;<span class="num" id="6449715">0</span><span class="op" id="6449716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449720">}</span><span class="op" id="6449721">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449730">Name</span><span class="op" id="6449734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449740">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6449758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449763">Mode</span><span class="op" id="6449767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449773">420</span><span class="op" id="6449776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449781">Uid</span><span class="op" id="6449784">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449791">1000</span><span class="op" id="6449795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449800">Gid</span><span class="op" id="6449803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449810">1000</span><span class="op" id="6449814">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449819">Size</span><span class="op" id="6449823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6449829">200</span><span class="op" id="6449832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449837">ModTime</span><span class="op" id="6449844">:</span>&nbsp;&nbsp;<span class="ident" id="6449847">time</span><span class="op" id="6449851">.</span><span class="ident" id="6449852">Unix</span><span class="op" id="6449856">(</span><span class="num" id="6449857">1392342187</span><span class="op" id="6449867">,</span>&nbsp;<span class="num" id="6449869">0</span><span class="op" id="6449870">)</span><span class="op" id="6449871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449876">Typeflag</span><span class="op" id="6449884">:</span>&nbsp;<span class="num" id="6449886">0x30</span><span class="op" id="6449890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449895">Linkname</span><span class="op" id="6449903">:</span>&nbsp;<span class="string" id="6449905">&#34;&#34;</span><span class="op" id="6449907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449912">Uname</span><span class="op" id="6449917">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449922">&#34;david&#34;</span><span class="op" id="6449929">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449934">Gname</span><span class="op" id="6449939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6449944">&#34;david&#34;</span><span class="op" id="6449951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449956">Devmajor</span><span class="op" id="6449964">:</span>&nbsp;<span class="num" id="6449966">0</span><span class="op" id="6449967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449972">Devminor</span><span class="op" id="6449980">:</span>&nbsp;<span class="num" id="6449982">0</span><span class="op" id="6449983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449987">}</span><span class="op" id="6449988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449992">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449997">Name</span><span class="op" id="6450001">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450007">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6450025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450030">Mode</span><span class="op" id="6450034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450040">420</span><span class="op" id="6450043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450048">Uid</span><span class="op" id="6450051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450058">1000</span><span class="op" id="6450062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450067">Gid</span><span class="op" id="6450070">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450077">1000</span><span class="op" id="6450081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450086">Size</span><span class="op" id="6450090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450096">200</span><span class="op" id="6450099">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450104">ModTime</span><span class="op" id="6450111">:</span>&nbsp;&nbsp;<span class="ident" id="6450114">time</span><span class="op" id="6450118">.</span><span class="ident" id="6450119">Unix</span><span class="op" id="6450123">(</span><span class="num" id="6450124">1392340456</span><span class="op" id="6450134">,</span>&nbsp;<span class="num" id="6450136">0</span><span class="op" id="6450137">)</span><span class="op" id="6450138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450143">Typeflag</span><span class="op" id="6450151">:</span>&nbsp;<span class="num" id="6450153">0x30</span><span class="op" id="6450157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450162">Linkname</span><span class="op" id="6450170">:</span>&nbsp;<span class="string" id="6450172">&#34;&#34;</span><span class="op" id="6450174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450179">Uname</span><span class="op" id="6450184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450189">&#34;david&#34;</span><span class="op" id="6450196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450201">Gname</span><span class="op" id="6450206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450211">&#34;david&#34;</span><span class="op" id="6450218">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450223">Devmajor</span><span class="op" id="6450231">:</span>&nbsp;<span class="num" id="6450233">0</span><span class="op" id="6450234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450239">Devminor</span><span class="op" id="6450247">:</span>&nbsp;<span class="num" id="6450249">0</span><span class="op" id="6450250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450254">}</span><span class="op" id="6450255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450264">Name</span><span class="op" id="6450268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450274">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6450292">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450297">Mode</span><span class="op" id="6450301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450307">420</span><span class="op" id="6450310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450315">Uid</span><span class="op" id="6450318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450325">1000</span><span class="op" id="6450329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450334">Gid</span><span class="op" id="6450337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450344">1000</span><span class="op" id="6450348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450353">Size</span><span class="op" id="6450357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450363">200</span><span class="op" id="6450366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450371">ModTime</span><span class="op" id="6450378">:</span>&nbsp;&nbsp;<span class="ident" id="6450381">time</span><span class="op" id="6450385">.</span><span class="ident" id="6450386">Unix</span><span class="op" id="6450390">(</span><span class="num" id="6450391">1392337404</span><span class="op" id="6450401">,</span>&nbsp;<span class="num" id="6450403">0</span><span class="op" id="6450404">)</span><span class="op" id="6450405">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450410">Typeflag</span><span class="op" id="6450418">:</span>&nbsp;<span class="num" id="6450420">0x30</span><span class="op" id="6450424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450429">Linkname</span><span class="op" id="6450437">:</span>&nbsp;<span class="string" id="6450439">&#34;&#34;</span><span class="op" id="6450441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450446">Uname</span><span class="op" id="6450451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450456">&#34;david&#34;</span><span class="op" id="6450463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450468">Gname</span><span class="op" id="6450473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450478">&#34;david&#34;</span><span class="op" id="6450485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450490">Devmajor</span><span class="op" id="6450498">:</span>&nbsp;<span class="num" id="6450500">0</span><span class="op" id="6450501">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450506">Devminor</span><span class="op" id="6450514">:</span>&nbsp;<span class="num" id="6450516">0</span><span class="op" id="6450517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450521">}</span><span class="op" id="6450522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450531">Name</span><span class="op" id="6450535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450541">&#34;end&#34;</span><span class="op" id="6450546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450551">Mode</span><span class="op" id="6450555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450561">420</span><span class="op" id="6450564">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450569">Uid</span><span class="op" id="6450572">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450579">1000</span><span class="op" id="6450583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450588">Gid</span><span class="op" id="6450591">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450598">1000</span><span class="op" id="6450602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450607">Size</span><span class="op" id="6450611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6450617">4</span><span class="op" id="6450618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450623">ModTime</span><span class="op" id="6450630">:</span>&nbsp;&nbsp;<span class="ident" id="6450633">time</span><span class="op" id="6450637">.</span><span class="ident" id="6450638">Unix</span><span class="op" id="6450642">(</span><span class="num" id="6450643">1392398319</span><span class="op" id="6450653">,</span>&nbsp;<span class="num" id="6450655">0</span><span class="op" id="6450656">)</span><span class="op" id="6450657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450662">Typeflag</span><span class="op" id="6450670">:</span>&nbsp;<span class="num" id="6450672">0x30</span><span class="op" id="6450676">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450681">Linkname</span><span class="op" id="6450689">:</span>&nbsp;<span class="string" id="6450691">&#34;&#34;</span><span class="op" id="6450693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450698">Uname</span><span class="op" id="6450703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450708">&#34;david&#34;</span><span class="op" id="6450715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450720">Gname</span><span class="op" id="6450725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6450730">&#34;david&#34;</span><span class="op" id="6450737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450742">Devmajor</span><span class="op" id="6450750">:</span>&nbsp;<span class="num" id="6450752">0</span><span class="op" id="6450753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450758">Devminor</span><span class="op" id="6450766">:</span>&nbsp;<span class="num" id="6450768">0</span><span class="op" id="6450769">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450773">}</span><span class="op" id="6450774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450777">}</span><span class="op" id="6450778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450781">cksums</span><span class="op" id="6450787">:</span>&nbsp;<span class="op" id="6450789">[</span><span class="op" id="6450790">]</span><span class="builtintype" id="6450791">string</span><span class="op" id="6450797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450801">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6450835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450839">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6450873">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450877">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6450911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450915">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6450949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450953">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6450987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450990">}</span><span class="op" id="6450991">,</span><br>
<span class="lineno"></span><span class="op" id="6450993">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6450996">var</span>&nbsp;<span class="ident" id="6451000">untarTests</span>&nbsp;<span class="op" id="6451011">=</span>&nbsp;<span class="op" id="6451013">[</span><span class="op" id="6451014">]</span><span class="op" id="6451015">*</span><span class="ident" id="6451016">untarTest</span><span class="op" id="6451025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451028">gnuTarTest</span><span class="op" id="6451038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451041">sparseTarTest</span><span class="op" id="6451054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451057">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451061">file</span><span class="op" id="6451065">:</span>&nbsp;<span class="string" id="6451067">&#34;testdata/star.tar&#34;</span><span class="op" id="6451086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451090">headers</span><span class="op" id="6451097">:</span>&nbsp;<span class="op" id="6451099">[</span><span class="op" id="6451100">]</span><span class="op" id="6451101">*</span><span class="ident" id="6451102">Header</span><span class="op" id="6451108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451119">Name</span><span class="op" id="6451123">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451131">&#34;small.txt&#34;</span><span class="op" id="6451142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451148">Mode</span><span class="op" id="6451152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451160">0640</span><span class="op" id="6451164">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451170">Uid</span><span class="op" id="6451173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451182">73025</span><span class="op" id="6451187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451193">Gid</span><span class="op" id="6451196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451205">5000</span><span class="op" id="6451209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451215">Size</span><span class="op" id="6451219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451227">5</span><span class="op" id="6451228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451234">ModTime</span><span class="op" id="6451241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451246">time</span><span class="op" id="6451250">.</span><span class="ident" id="6451251">Unix</span><span class="op" id="6451255">(</span><span class="num" id="6451256">1244592783</span><span class="op" id="6451266">,</span>&nbsp;<span class="num" id="6451268">0</span><span class="op" id="6451269">)</span><span class="op" id="6451270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451276">Typeflag</span><span class="op" id="6451284">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6451288">&#39;0&#39;</span><span class="op" id="6451291">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451297">Uname</span><span class="op" id="6451302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451309">&#34;dsymonds&#34;</span><span class="op" id="6451319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451325">Gname</span><span class="op" id="6451330">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451337">&#34;eng&#34;</span><span class="op" id="6451342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451348">AccessTime</span><span class="op" id="6451358">:</span>&nbsp;<span class="ident" id="6451360">time</span><span class="op" id="6451364">.</span><span class="ident" id="6451365">Unix</span><span class="op" id="6451369">(</span><span class="num" id="6451370">1244592783</span><span class="op" id="6451380">,</span>&nbsp;<span class="num" id="6451382">0</span><span class="op" id="6451383">)</span><span class="op" id="6451384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451390">ChangeTime</span><span class="op" id="6451400">:</span>&nbsp;<span class="ident" id="6451402">time</span><span class="op" id="6451406">.</span><span class="ident" id="6451407">Unix</span><span class="op" id="6451411">(</span><span class="num" id="6451412">1244592783</span><span class="op" id="6451422">,</span>&nbsp;<span class="num" id="6451424">0</span><span class="op" id="6451425">)</span><span class="op" id="6451426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451431">}</span><span class="op" id="6451432">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451443">Name</span><span class="op" id="6451447">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451455">&#34;small2.txt&#34;</span><span class="op" id="6451467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451473">Mode</span><span class="op" id="6451477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451485">0640</span><span class="op" id="6451489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451495">Uid</span><span class="op" id="6451498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451507">73025</span><span class="op" id="6451512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451518">Gid</span><span class="op" id="6451521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451530">5000</span><span class="op" id="6451534">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451540">Size</span><span class="op" id="6451544">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451552">11</span><span class="op" id="6451554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451560">ModTime</span><span class="op" id="6451567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451572">time</span><span class="op" id="6451576">.</span><span class="ident" id="6451577">Unix</span><span class="op" id="6451581">(</span><span class="num" id="6451582">1244592783</span><span class="op" id="6451592">,</span>&nbsp;<span class="num" id="6451594">0</span><span class="op" id="6451595">)</span><span class="op" id="6451596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451602">Typeflag</span><span class="op" id="6451610">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6451614">&#39;0&#39;</span><span class="op" id="6451617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451623">Uname</span><span class="op" id="6451628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451635">&#34;dsymonds&#34;</span><span class="op" id="6451645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451651">Gname</span><span class="op" id="6451656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451663">&#34;eng&#34;</span><span class="op" id="6451668">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451674">AccessTime</span><span class="op" id="6451684">:</span>&nbsp;<span class="ident" id="6451686">time</span><span class="op" id="6451690">.</span><span class="ident" id="6451691">Unix</span><span class="op" id="6451695">(</span><span class="num" id="6451696">1244592783</span><span class="op" id="6451706">,</span>&nbsp;<span class="num" id="6451708">0</span><span class="op" id="6451709">)</span><span class="op" id="6451710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451716">ChangeTime</span><span class="op" id="6451726">:</span>&nbsp;<span class="ident" id="6451728">time</span><span class="op" id="6451732">.</span><span class="ident" id="6451733">Unix</span><span class="op" id="6451737">(</span><span class="num" id="6451738">1244592783</span><span class="op" id="6451748">,</span>&nbsp;<span class="num" id="6451750">0</span><span class="op" id="6451751">)</span><span class="op" id="6451752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451757">}</span><span class="op" id="6451758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451762">}</span><span class="op" id="6451763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451766">}</span><span class="op" id="6451767">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451774">file</span><span class="op" id="6451778">:</span>&nbsp;<span class="string" id="6451780">&#34;testdata/v7.tar&#34;</span><span class="op" id="6451797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451801">headers</span><span class="op" id="6451808">:</span>&nbsp;<span class="op" id="6451810">[</span><span class="op" id="6451811">]</span><span class="op" id="6451812">*</span><span class="ident" id="6451813">Header</span><span class="op" id="6451819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451830">Name</span><span class="op" id="6451834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6451840">&#34;small.txt&#34;</span><span class="op" id="6451851">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451857">Mode</span><span class="op" id="6451861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451867">0444</span><span class="op" id="6451871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451877">Uid</span><span class="op" id="6451880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451887">73025</span><span class="op" id="6451892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451898">Gid</span><span class="op" id="6451901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451908">5000</span><span class="op" id="6451912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451918">Size</span><span class="op" id="6451922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6451928">5</span><span class="op" id="6451929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451935">ModTime</span><span class="op" id="6451942">:</span>&nbsp;&nbsp;<span class="ident" id="6451945">time</span><span class="op" id="6451949">.</span><span class="ident" id="6451950">Unix</span><span class="op" id="6451954">(</span><span class="num" id="6451955">1244593104</span><span class="op" id="6451965">,</span>&nbsp;<span class="num" id="6451967">0</span><span class="op" id="6451968">)</span><span class="op" id="6451969">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451975">Typeflag</span><span class="op" id="6451983">:</span>&nbsp;<span class="string" id="6451985">&#39;\x00&#39;</span><span class="op" id="6451991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451996">}</span><span class="op" id="6451997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452008">Name</span><span class="op" id="6452012">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452018">&#34;small2.txt&#34;</span><span class="op" id="6452030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452036">Mode</span><span class="op" id="6452040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452046">0444</span><span class="op" id="6452050">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452056">Uid</span><span class="op" id="6452059">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452066">73025</span><span class="op" id="6452071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452077">Gid</span><span class="op" id="6452080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452087">5000</span><span class="op" id="6452091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452097">Size</span><span class="op" id="6452101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452107">11</span><span class="op" id="6452109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452115">ModTime</span><span class="op" id="6452122">:</span>&nbsp;&nbsp;<span class="ident" id="6452125">time</span><span class="op" id="6452129">.</span><span class="ident" id="6452130">Unix</span><span class="op" id="6452134">(</span><span class="num" id="6452135">1244593104</span><span class="op" id="6452145">,</span>&nbsp;<span class="num" id="6452147">0</span><span class="op" id="6452148">)</span><span class="op" id="6452149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452155">Typeflag</span><span class="op" id="6452163">:</span>&nbsp;<span class="string" id="6452165">&#39;\x00&#39;</span><span class="op" id="6452171">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452176">}</span><span class="op" id="6452177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452181">}</span><span class="op" id="6452182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452185">}</span><span class="op" id="6452186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452193">file</span><span class="op" id="6452197">:</span>&nbsp;<span class="string" id="6452199">&#34;testdata/pax.tar&#34;</span><span class="op" id="6452217">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452221">headers</span><span class="op" id="6452228">:</span>&nbsp;<span class="op" id="6452230">[</span><span class="op" id="6452231">]</span><span class="op" id="6452232">*</span><span class="ident" id="6452233">Header</span><span class="op" id="6452239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452250">Name</span><span class="op" id="6452254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452262">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6452458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452464">Mode</span><span class="op" id="6452468">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452476">0664</span><span class="op" id="6452480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452486">Uid</span><span class="op" id="6452489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452498">1000</span><span class="op" id="6452502">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452508">Gid</span><span class="op" id="6452511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452520">1000</span><span class="op" id="6452524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452530">Uname</span><span class="op" id="6452535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452542">&#34;shane&#34;</span><span class="op" id="6452549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452555">Gname</span><span class="op" id="6452560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452567">&#34;shane&#34;</span><span class="op" id="6452574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452580">Size</span><span class="op" id="6452584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452592">7</span><span class="op" id="6452593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452599">ModTime</span><span class="op" id="6452606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452611">time</span><span class="op" id="6452615">.</span><span class="ident" id="6452616">Unix</span><span class="op" id="6452620">(</span><span class="num" id="6452621">1350244992</span><span class="op" id="6452631">,</span>&nbsp;<span class="num" id="6452633">23960108</span><span class="op" id="6452641">)</span><span class="op" id="6452642">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452648">ChangeTime</span><span class="op" id="6452658">:</span>&nbsp;<span class="ident" id="6452660">time</span><span class="op" id="6452664">.</span><span class="ident" id="6452665">Unix</span><span class="op" id="6452669">(</span><span class="num" id="6452670">1350244992</span><span class="op" id="6452680">,</span>&nbsp;<span class="num" id="6452682">23960108</span><span class="op" id="6452690">)</span><span class="op" id="6452691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452697">AccessTime</span><span class="op" id="6452707">:</span>&nbsp;<span class="ident" id="6452709">time</span><span class="op" id="6452713">.</span><span class="ident" id="6452714">Unix</span><span class="op" id="6452718">(</span><span class="num" id="6452719">1350244992</span><span class="op" id="6452729">,</span>&nbsp;<span class="num" id="6452731">23960108</span><span class="op" id="6452739">)</span><span class="op" id="6452740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452746">Typeflag</span><span class="op" id="6452754">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6452758">TypeReg</span><span class="op" id="6452765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452770">}</span><span class="op" id="6452771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452776">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452782">Name</span><span class="op" id="6452786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452794">&#34;a/b&#34;</span><span class="op" id="6452799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452805">Mode</span><span class="op" id="6452809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452817">0777</span><span class="op" id="6452821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452827">Uid</span><span class="op" id="6452830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452839">1000</span><span class="op" id="6452843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452849">Gid</span><span class="op" id="6452852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452861">1000</span><span class="op" id="6452865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452871">Uname</span><span class="op" id="6452876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452883">&#34;shane&#34;</span><span class="op" id="6452890">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452896">Gname</span><span class="op" id="6452901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452908">&#34;shane&#34;</span><span class="op" id="6452915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452921">Size</span><span class="op" id="6452925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6452933">0</span><span class="op" id="6452934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452940">ModTime</span><span class="op" id="6452947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452952">time</span><span class="op" id="6452956">.</span><span class="ident" id="6452957">Unix</span><span class="op" id="6452961">(</span><span class="num" id="6452962">1350266320</span><span class="op" id="6452972">,</span>&nbsp;<span class="num" id="6452974">910238425</span><span class="op" id="6452983">)</span><span class="op" id="6452984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452990">ChangeTime</span><span class="op" id="6453000">:</span>&nbsp;<span class="ident" id="6453002">time</span><span class="op" id="6453006">.</span><span class="ident" id="6453007">Unix</span><span class="op" id="6453011">(</span><span class="num" id="6453012">1350266320</span><span class="op" id="6453022">,</span>&nbsp;<span class="num" id="6453024">910238425</span><span class="op" id="6453033">)</span><span class="op" id="6453034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453040">AccessTime</span><span class="op" id="6453050">:</span>&nbsp;<span class="ident" id="6453052">time</span><span class="op" id="6453056">.</span><span class="ident" id="6453057">Unix</span><span class="op" id="6453061">(</span><span class="num" id="6453062">1350266320</span><span class="op" id="6453072">,</span>&nbsp;<span class="num" id="6453074">910238425</span><span class="op" id="6453083">)</span><span class="op" id="6453084">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453090">Typeflag</span><span class="op" id="6453098">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6453102">TypeSymlink</span><span class="op" id="6453113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453119">Linkname</span><span class="op" id="6453127">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6453131">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6453325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453330">}</span><span class="op" id="6453331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453335">}</span><span class="op" id="6453336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453339">}</span><span class="op" id="6453340">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453347">file</span><span class="op" id="6453351">:</span>&nbsp;<span class="string" id="6453353">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6453375">,</span>&nbsp;<span class="comment" id="6453377">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453404">headers</span><span class="op" id="6453411">:</span>&nbsp;<span class="op" id="6453413">[</span><span class="op" id="6453414">]</span><span class="op" id="6453415">*</span><span class="ident" id="6453416">Header</span><span class="op" id="6453422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453433">Name</span><span class="op" id="6453437">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453443">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6453461">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453467">Mode</span><span class="op" id="6453471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453477">0664</span><span class="op" id="6453481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453487">Uid</span><span class="op" id="6453490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453497">0</span><span class="op" id="6453498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453504">Gid</span><span class="op" id="6453507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453514">0</span><span class="op" id="6453515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453521">Size</span><span class="op" id="6453525">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453531">14</span><span class="op" id="6453533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453539">ModTime</span><span class="op" id="6453546">:</span>&nbsp;&nbsp;<span class="ident" id="6453549">time</span><span class="op" id="6453553">.</span><span class="ident" id="6453554">Unix</span><span class="op" id="6453558">(</span><span class="num" id="6453559">1365454838</span><span class="op" id="6453569">,</span>&nbsp;<span class="num" id="6453571">0</span><span class="op" id="6453572">)</span><span class="op" id="6453573">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453579">Typeflag</span><span class="op" id="6453587">:</span>&nbsp;<span class="ident" id="6453589">TypeReg</span><span class="op" id="6453596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453602">Linkname</span><span class="op" id="6453610">:</span>&nbsp;<span class="string" id="6453612">&#34;&#34;</span><span class="op" id="6453614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453620">Uname</span><span class="op" id="6453625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453630">&#34;eyefi&#34;</span><span class="op" id="6453637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453643">Gname</span><span class="op" id="6453648">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453653">&#34;eyefi&#34;</span><span class="op" id="6453660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453666">Devmajor</span><span class="op" id="6453674">:</span>&nbsp;<span class="num" id="6453676">0</span><span class="op" id="6453677">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453683">Devminor</span><span class="op" id="6453691">:</span>&nbsp;<span class="num" id="6453693">0</span><span class="op" id="6453694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453699">}</span><span class="op" id="6453700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453704">}</span><span class="op" id="6453705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453708">}</span><span class="op" id="6453709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453712">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453716">file</span><span class="op" id="6453720">:</span>&nbsp;<span class="string" id="6453722">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6453743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453747">headers</span><span class="op" id="6453754">:</span>&nbsp;<span class="op" id="6453756">[</span><span class="op" id="6453757">]</span><span class="op" id="6453758">*</span><span class="ident" id="6453759">Header</span><span class="op" id="6453765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6453770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453776">Name</span><span class="op" id="6453780">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453788">&#34;small.txt&#34;</span><span class="op" id="6453799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453805">Mode</span><span class="op" id="6453809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453817">0644</span><span class="op" id="6453821">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453827">Uid</span><span class="op" id="6453830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453839">1000</span><span class="op" id="6453843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453849">Gid</span><span class="op" id="6453852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453861">10</span><span class="op" id="6453863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453869">Size</span><span class="op" id="6453873">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6453881">5</span><span class="op" id="6453882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453888">ModTime</span><span class="op" id="6453895">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453900">time</span><span class="op" id="6453904">.</span><span class="ident" id="6453905">Unix</span><span class="op" id="6453909">(</span><span class="num" id="6453910">1386065770</span><span class="op" id="6453920">,</span>&nbsp;<span class="num" id="6453922">448252320</span><span class="op" id="6453931">)</span><span class="op" id="6453932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453938">Typeflag</span><span class="op" id="6453946">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6453950">&#39;0&#39;</span><span class="op" id="6453953">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453959">Uname</span><span class="op" id="6453964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453971">&#34;alex&#34;</span><span class="op" id="6453977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6453983">Gname</span><span class="op" id="6453988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6453995">&#34;wheel&#34;</span><span class="op" id="6454002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454008">AccessTime</span><span class="op" id="6454018">:</span>&nbsp;<span class="ident" id="6454020">time</span><span class="op" id="6454024">.</span><span class="ident" id="6454025">Unix</span><span class="op" id="6454029">(</span><span class="num" id="6454030">1389782991</span><span class="op" id="6454040">,</span>&nbsp;<span class="num" id="6454042">419875220</span><span class="op" id="6454051">)</span><span class="op" id="6454052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454058">ChangeTime</span><span class="op" id="6454068">:</span>&nbsp;<span class="ident" id="6454070">time</span><span class="op" id="6454074">.</span><span class="ident" id="6454075">Unix</span><span class="op" id="6454079">(</span><span class="num" id="6454080">1389782956</span><span class="op" id="6454090">,</span>&nbsp;<span class="num" id="6454092">794414986</span><span class="op" id="6454101">)</span><span class="op" id="6454102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454108">Xattrs</span><span class="op" id="6454114">:</span>&nbsp;<span class="keyword" id="6454116">map</span><span class="op" id="6454119">[</span><span class="builtintype" id="6454120">string</span><span class="op" id="6454126">]</span><span class="builtintype" id="6454127">string</span><span class="op" id="6454133">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454140">&#34;user.key&#34;</span><span class="op" id="6454150">:</span>&nbsp;&nbsp;<span class="string" id="6454153">&#34;value&#34;</span><span class="op" id="6454160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454167">&#34;user.key2&#34;</span><span class="op" id="6454178">:</span>&nbsp;<span class="string" id="6454180">&#34;value2&#34;</span><span class="op" id="6454188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6454195">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454272">&#34;security.selinux&#34;</span><span class="op" id="6454290">:</span>&nbsp;<span class="string" id="6454292">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6454332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454338">}</span><span class="op" id="6454339">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454344">}</span><span class="op" id="6454345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454356">Name</span><span class="op" id="6454360">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454368">&#34;small2.txt&#34;</span><span class="op" id="6454380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454386">Mode</span><span class="op" id="6454390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6454398">0644</span><span class="op" id="6454402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454408">Uid</span><span class="op" id="6454411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6454420">1000</span><span class="op" id="6454424">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454430">Gid</span><span class="op" id="6454433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6454442">10</span><span class="op" id="6454444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454450">Size</span><span class="op" id="6454454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6454462">11</span><span class="op" id="6454464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454470">ModTime</span><span class="op" id="6454477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454482">time</span><span class="op" id="6454486">.</span><span class="ident" id="6454487">Unix</span><span class="op" id="6454491">(</span><span class="num" id="6454492">1386065770</span><span class="op" id="6454502">,</span>&nbsp;<span class="num" id="6454504">449252304</span><span class="op" id="6454513">)</span><span class="op" id="6454514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454520">Typeflag</span><span class="op" id="6454528">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6454532">&#39;0&#39;</span><span class="op" id="6454535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454541">Uname</span><span class="op" id="6454546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454553">&#34;alex&#34;</span><span class="op" id="6454559">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454565">Gname</span><span class="op" id="6454570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6454577">&#34;wheel&#34;</span><span class="op" id="6454584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454590">AccessTime</span><span class="op" id="6454600">:</span>&nbsp;<span class="ident" id="6454602">time</span><span class="op" id="6454606">.</span><span class="ident" id="6454607">Unix</span><span class="op" id="6454611">(</span><span class="num" id="6454612">1389782991</span><span class="op" id="6454622">,</span>&nbsp;<span class="num" id="6454624">419875220</span><span class="op" id="6454633">)</span><span class="op" id="6454634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454640">ChangeTime</span><span class="op" id="6454650">:</span>&nbsp;<span class="ident" id="6454652">time</span><span class="op" id="6454656">.</span><span class="ident" id="6454657">Unix</span><span class="op" id="6454661">(</span><span class="num" id="6454662">1386065770</span><span class="op" id="6454672">,</span>&nbsp;<span class="num" id="6454674">449252304</span><span class="op" id="6454683">)</span><span class="op" id="6454684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454690">Xattrs</span><span class="op" id="6454696">:</span>&nbsp;<span class="keyword" id="6454698">map</span><span class="op" id="6454701">[</span><span class="builtintype" id="6454702">string</span><span class="op" id="6454708">]</span><span class="builtintype" id="6454709">string</span><span class="op" id="6454715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6454722">&#34;security.selinux&#34;</span><span class="op" id="6454740">:</span>&nbsp;<span class="string" id="6454742">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6454782">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454788">}</span><span class="op" id="6454789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454794">}</span><span class="op" id="6454795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454799">}</span><span class="op" id="6454800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6454803">}</span><span class="op" id="6454804">,</span><br>
<span class="lineno"></span><span class="op" id="6454806">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6454809">func</span>&nbsp;<span class="ident" id="6454814">TestReader</span><span class="op" id="6454824">(</span><span class="ident" id="6454825">t</span>&nbsp;<span class="op" id="6454827">*</span><span class="ident" id="6454828">testing</span><span class="op" id="6454835">.</span><span class="ident" id="6454836">T</span><span class="op" id="6454837">)</span>&nbsp;<span class="op" id="6454839">{</span><br>
<span class="lineno"></span><span class="ident" id="6454841">testLoop</span><span class="op" id="6454849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454852">for</span>&nbsp;<span class="ident" id="6454856">i</span><span class="op" id="6454857">,</span>&nbsp;<span class="ident" id="6454859">test</span>&nbsp;<span class="op" id="6454864">:=</span>&nbsp;<span class="keyword" id="6454867">range</span>&nbsp;<span class="ident" id="6454873">untarTests</span>&nbsp;<span class="op" id="6454884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454888">f</span><span class="op" id="6454889">,</span>&nbsp;<span class="ident" id="6454891">err</span>&nbsp;<span class="op" id="6454895">:=</span>&nbsp;<span class="ident" id="6454898">os</span><span class="op" id="6454900">.</span><span class="ident" id="6454901">Open</span><span class="op" id="6454905">(</span><span class="ident" id="6454906">test</span><span class="op" id="6454910">.</span><span class="ident" id="6454911">file</span><span class="op" id="6454915">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454919">if</span>&nbsp;<span class="ident" id="6454922">err</span>&nbsp;<span class="op" id="6454926">!=</span>&nbsp;<span class="ident" id="6454929">nil</span>&nbsp;<span class="op" id="6454933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6454938">t</span><span class="op" id="6454939">.</span><span class="ident" id="6454940">Errorf</span><span class="op" id="6454946">(</span><span class="string" id="6454947">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6454978">,</span>&nbsp;<span class="ident" id="6454980">i</span><span class="op" id="6454981">,</span>&nbsp;<span class="ident" id="6454983">err</span><span class="op" id="6454986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6454991">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455006">defer</span>&nbsp;<span class="ident" id="6455012">f</span><span class="op" id="6455013">.</span><span class="ident" id="6455014">Close</span><span class="op" id="6455019">(</span><span class="op" id="6455020">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455024">tr</span>&nbsp;<span class="op" id="6455027">:=</span>&nbsp;<span class="ident" id="6455030">NewReader</span><span class="op" id="6455039">(</span><span class="ident" id="6455040">f</span><span class="op" id="6455041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455045">for</span>&nbsp;<span class="ident" id="6455049">j</span><span class="op" id="6455050">,</span>&nbsp;<span class="ident" id="6455052">header</span>&nbsp;<span class="op" id="6455059">:=</span>&nbsp;<span class="keyword" id="6455062">range</span>&nbsp;<span class="ident" id="6455068">test</span><span class="op" id="6455072">.</span><span class="ident" id="6455073">headers</span>&nbsp;<span class="op" id="6455081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455086">hdr</span><span class="op" id="6455089">,</span>&nbsp;<span class="ident" id="6455091">err</span>&nbsp;<span class="op" id="6455095">:=</span>&nbsp;<span class="ident" id="6455098">tr</span><span class="op" id="6455100">.</span><span class="ident" id="6455101">Next</span><span class="op" id="6455105">(</span><span class="op" id="6455106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455111">if</span>&nbsp;<span class="ident" id="6455114">err</span>&nbsp;<span class="op" id="6455118">!=</span>&nbsp;<span class="ident" id="6455121">nil</span>&nbsp;<span class="op" id="6455125">||</span>&nbsp;<span class="ident" id="6455128">hdr</span>&nbsp;<span class="op" id="6455132">==</span>&nbsp;<span class="ident" id="6455135">nil</span>&nbsp;<span class="op" id="6455139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455145">t</span><span class="op" id="6455146">.</span><span class="ident" id="6455147">Errorf</span><span class="op" id="6455153">(</span><span class="string" id="6455154">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6455195">,</span>&nbsp;<span class="ident" id="6455197">i</span><span class="op" id="6455198">,</span>&nbsp;<span class="ident" id="6455200">j</span><span class="op" id="6455201">,</span>&nbsp;<span class="ident" id="6455203">err</span><span class="op" id="6455206">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455212">f</span><span class="op" id="6455213">.</span><span class="ident" id="6455214">Close</span><span class="op" id="6455219">(</span><span class="op" id="6455220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455226">continue</span>&nbsp;<span class="ident" id="6455235">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455252">if</span>&nbsp;<span class="op" id="6455255">!</span><span class="ident" id="6455256">reflect</span><span class="op" id="6455263">.</span><span class="ident" id="6455264">DeepEqual</span><span class="op" id="6455273">(</span><span class="op" id="6455274">*</span><span class="ident" id="6455275">hdr</span><span class="op" id="6455278">,</span>&nbsp;<span class="op" id="6455280">*</span><span class="ident" id="6455281">header</span><span class="op" id="6455287">)</span>&nbsp;<span class="op" id="6455289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455295">t</span><span class="op" id="6455296">.</span><span class="ident" id="6455297">Errorf</span><span class="op" id="6455303">(</span><span class="string" id="6455304">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6455362">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455369">i</span><span class="op" id="6455370">,</span>&nbsp;<span class="ident" id="6455372">j</span><span class="op" id="6455373">,</span>&nbsp;<span class="op" id="6455375">*</span><span class="ident" id="6455376">hdr</span><span class="op" id="6455379">,</span>&nbsp;<span class="op" id="6455381">*</span><span class="ident" id="6455382">header</span><span class="op" id="6455388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455401">hdr</span><span class="op" id="6455404">,</span>&nbsp;<span class="ident" id="6455406">err</span>&nbsp;<span class="op" id="6455410">:=</span>&nbsp;<span class="ident" id="6455413">tr</span><span class="op" id="6455415">.</span><span class="ident" id="6455416">Next</span><span class="op" id="6455420">(</span><span class="op" id="6455421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455425">if</span>&nbsp;<span class="ident" id="6455428">err</span>&nbsp;<span class="op" id="6455432">==</span>&nbsp;<span class="ident" id="6455435">io</span><span class="op" id="6455437">.</span><span class="ident" id="6455438">EOF</span>&nbsp;<span class="op" id="6455442">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455447">continue</span>&nbsp;<span class="ident" id="6455456">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455471">if</span>&nbsp;<span class="ident" id="6455474">hdr</span>&nbsp;<span class="op" id="6455478">!=</span>&nbsp;<span class="ident" id="6455481">nil</span>&nbsp;<span class="op" id="6455485">||</span>&nbsp;<span class="ident" id="6455488">err</span>&nbsp;<span class="op" id="6455492">!=</span>&nbsp;<span class="ident" id="6455495">nil</span>&nbsp;<span class="op" id="6455499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455504">t</span><span class="op" id="6455505">.</span><span class="ident" id="6455506">Errorf</span><span class="op" id="6455512">(</span><span class="string" id="6455513">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6455564">,</span>&nbsp;<span class="ident" id="6455566">i</span><span class="op" id="6455567">,</span>&nbsp;<span class="ident" id="6455569">hdr</span><span class="op" id="6455572">,</span>&nbsp;<span class="ident" id="6455574">err</span><span class="op" id="6455577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455581">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455584">}</span><br>
<span class="lineno"></span><span class="op" id="6455586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6455589">func</span>&nbsp;<span class="ident" id="6455594">TestPartialRead</span><span class="op" id="6455609">(</span><span class="ident" id="6455610">t</span>&nbsp;<span class="op" id="6455612">*</span><span class="ident" id="6455613">testing</span><span class="op" id="6455620">.</span><span class="ident" id="6455621">T</span><span class="op" id="6455622">)</span>&nbsp;<span class="op" id="6455624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455627">f</span><span class="op" id="6455628">,</span>&nbsp;<span class="ident" id="6455630">err</span>&nbsp;<span class="op" id="6455634">:=</span>&nbsp;<span class="ident" id="6455637">os</span><span class="op" id="6455639">.</span><span class="ident" id="6455640">Open</span><span class="op" id="6455644">(</span><span class="string" id="6455645">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6455663">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455666">if</span>&nbsp;<span class="ident" id="6455669">err</span>&nbsp;<span class="op" id="6455673">!=</span>&nbsp;<span class="ident" id="6455676">nil</span>&nbsp;<span class="op" id="6455680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455684">t</span><span class="op" id="6455685">.</span><span class="ident" id="6455686">Fatalf</span><span class="op" id="6455692">(</span><span class="string" id="6455693">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6455715">,</span>&nbsp;<span class="ident" id="6455717">err</span><span class="op" id="6455720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455726">defer</span>&nbsp;<span class="ident" id="6455732">f</span><span class="op" id="6455733">.</span><span class="ident" id="6455734">Close</span><span class="op" id="6455739">(</span><span class="op" id="6455740">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455744">tr</span>&nbsp;<span class="op" id="6455747">:=</span>&nbsp;<span class="ident" id="6455750">NewReader</span><span class="op" id="6455759">(</span><span class="ident" id="6455760">f</span><span class="op" id="6455761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6455765">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455830">hdr</span><span class="op" id="6455833">,</span>&nbsp;<span class="ident" id="6455835">err</span>&nbsp;<span class="op" id="6455839">:=</span>&nbsp;<span class="ident" id="6455842">tr</span><span class="op" id="6455844">.</span><span class="ident" id="6455845">Next</span><span class="op" id="6455849">(</span><span class="op" id="6455850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455853">if</span>&nbsp;<span class="ident" id="6455856">err</span>&nbsp;<span class="op" id="6455860">!=</span>&nbsp;<span class="ident" id="6455863">nil</span>&nbsp;<span class="op" id="6455867">||</span>&nbsp;<span class="ident" id="6455870">hdr</span>&nbsp;<span class="op" id="6455874">==</span>&nbsp;<span class="ident" id="6455877">nil</span>&nbsp;<span class="op" id="6455881">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455885">t</span><span class="op" id="6455886">.</span><span class="ident" id="6455887">Fatalf</span><span class="op" id="6455893">(</span><span class="string" id="6455894">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6455921">,</span>&nbsp;<span class="ident" id="6455923">err</span><span class="op" id="6455926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6455929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6455932">buf</span>&nbsp;<span class="op" id="6455936">:=</span>&nbsp;<span class="builtinfunc" id="6455939">make</span><span class="op" id="6455943">(</span><span class="op" id="6455944">[</span><span class="op" id="6455945">]</span><span class="builtintype" id="6455946">byte</span><span class="op" id="6455950">,</span>&nbsp;<span class="num" id="6455952">4</span><span class="op" id="6455953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6455956">if</span>&nbsp;<span class="ident" id="6455959">_</span><span class="op" id="6455960">,</span>&nbsp;<span class="ident" id="6455962">err</span>&nbsp;<span class="op" id="6455966">:=</span>&nbsp;<span class="ident" id="6455969">io</span><span class="op" id="6455971">.</span><span class="ident" id="6455972">ReadFull</span><span class="op" id="6455980">(</span><span class="ident" id="6455981">tr</span><span class="op" id="6455983">,</span>&nbsp;<span class="ident" id="6455985">buf</span><span class="op" id="6455988">)</span><span class="op" id="6455989">;</span>&nbsp;<span class="ident" id="6455991">err</span>&nbsp;<span class="op" id="6455995">!=</span>&nbsp;<span class="ident" id="6455998">nil</span>&nbsp;<span class="op" id="6456002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456006">t</span><span class="op" id="6456007">.</span><span class="ident" id="6456008">Fatalf</span><span class="op" id="6456014">(</span><span class="string" id="6456015">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6456037">,</span>&nbsp;<span class="ident" id="6456039">err</span><span class="op" id="6456042">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456048">if</span>&nbsp;<span class="ident" id="6456051">expected</span>&nbsp;<span class="op" id="6456060">:=</span>&nbsp;<span class="op" id="6456063">[</span><span class="op" id="6456064">]</span><span class="builtintype" id="6456065">byte</span><span class="op" id="6456069">(</span><span class="string" id="6456070">&#34;Kilt&#34;</span><span class="op" id="6456076">)</span><span class="op" id="6456077">;</span>&nbsp;<span class="op" id="6456079">!</span><span class="ident" id="6456080">bytes</span><span class="op" id="6456085">.</span><span class="ident" id="6456086">Equal</span><span class="op" id="6456091">(</span><span class="ident" id="6456092">buf</span><span class="op" id="6456095">,</span>&nbsp;<span class="ident" id="6456097">expected</span><span class="op" id="6456105">)</span>&nbsp;<span class="op" id="6456107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456111">t</span><span class="op" id="6456112">.</span><span class="ident" id="6456113">Errorf</span><span class="op" id="6456119">(</span><span class="string" id="6456120">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6456144">,</span>&nbsp;<span class="ident" id="6456146">buf</span><span class="op" id="6456149">,</span>&nbsp;<span class="ident" id="6456151">expected</span><span class="op" id="6456159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6456166">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456182">hdr</span><span class="op" id="6456185">,</span>&nbsp;<span class="ident" id="6456187">err</span>&nbsp;<span class="op" id="6456191">=</span>&nbsp;<span class="ident" id="6456193">tr</span><span class="op" id="6456195">.</span><span class="ident" id="6456196">Next</span><span class="op" id="6456200">(</span><span class="op" id="6456201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456204">if</span>&nbsp;<span class="ident" id="6456207">err</span>&nbsp;<span class="op" id="6456211">!=</span>&nbsp;<span class="ident" id="6456214">nil</span>&nbsp;<span class="op" id="6456218">||</span>&nbsp;<span class="ident" id="6456221">hdr</span>&nbsp;<span class="op" id="6456225">==</span>&nbsp;<span class="ident" id="6456228">nil</span>&nbsp;<span class="op" id="6456232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456236">t</span><span class="op" id="6456237">.</span><span class="ident" id="6456238">Fatalf</span><span class="op" id="6456244">(</span><span class="string" id="6456245">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6456273">,</span>&nbsp;<span class="ident" id="6456275">err</span><span class="op" id="6456278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456281">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456284">buf</span>&nbsp;<span class="op" id="6456288">=</span>&nbsp;<span class="builtinfunc" id="6456290">make</span><span class="op" id="6456294">(</span><span class="op" id="6456295">[</span><span class="op" id="6456296">]</span><span class="builtintype" id="6456297">byte</span><span class="op" id="6456301">,</span>&nbsp;<span class="num" id="6456303">6</span><span class="op" id="6456304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456307">if</span>&nbsp;<span class="ident" id="6456310">_</span><span class="op" id="6456311">,</span>&nbsp;<span class="ident" id="6456313">err</span>&nbsp;<span class="op" id="6456317">:=</span>&nbsp;<span class="ident" id="6456320">io</span><span class="op" id="6456322">.</span><span class="ident" id="6456323">ReadFull</span><span class="op" id="6456331">(</span><span class="ident" id="6456332">tr</span><span class="op" id="6456334">,</span>&nbsp;<span class="ident" id="6456336">buf</span><span class="op" id="6456339">)</span><span class="op" id="6456340">;</span>&nbsp;<span class="ident" id="6456342">err</span>&nbsp;<span class="op" id="6456346">!=</span>&nbsp;<span class="ident" id="6456349">nil</span>&nbsp;<span class="op" id="6456353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456357">t</span><span class="op" id="6456358">.</span><span class="ident" id="6456359">Fatalf</span><span class="op" id="6456365">(</span><span class="string" id="6456366">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6456388">,</span>&nbsp;<span class="ident" id="6456390">err</span><span class="op" id="6456393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456399">if</span>&nbsp;<span class="ident" id="6456402">expected</span>&nbsp;<span class="op" id="6456411">:=</span>&nbsp;<span class="op" id="6456414">[</span><span class="op" id="6456415">]</span><span class="builtintype" id="6456416">byte</span><span class="op" id="6456420">(</span><span class="string" id="6456421">&#34;Google&#34;</span><span class="op" id="6456429">)</span><span class="op" id="6456430">;</span>&nbsp;<span class="op" id="6456432">!</span><span class="ident" id="6456433">bytes</span><span class="op" id="6456438">.</span><span class="ident" id="6456439">Equal</span><span class="op" id="6456444">(</span><span class="ident" id="6456445">buf</span><span class="op" id="6456448">,</span>&nbsp;<span class="ident" id="6456450">expected</span><span class="op" id="6456458">)</span>&nbsp;<span class="op" id="6456460">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456464">t</span><span class="op" id="6456465">.</span><span class="ident" id="6456466">Errorf</span><span class="op" id="6456472">(</span><span class="string" id="6456473">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6456497">,</span>&nbsp;<span class="ident" id="6456499">buf</span><span class="op" id="6456502">,</span>&nbsp;<span class="ident" id="6456504">expected</span><span class="op" id="6456512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456515">}</span><br>
<span class="lineno"></span><span class="op" id="6456517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6456520">func</span>&nbsp;<span class="ident" id="6456525">TestIncrementalRead</span><span class="op" id="6456544">(</span><span class="ident" id="6456545">t</span>&nbsp;<span class="op" id="6456547">*</span><span class="ident" id="6456548">testing</span><span class="op" id="6456555">.</span><span class="ident" id="6456556">T</span><span class="op" id="6456557">)</span>&nbsp;<span class="op" id="6456559">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456562">test</span>&nbsp;<span class="op" id="6456567">:=</span>&nbsp;<span class="ident" id="6456570">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456582">f</span><span class="op" id="6456583">,</span>&nbsp;<span class="ident" id="6456585">err</span>&nbsp;<span class="op" id="6456589">:=</span>&nbsp;<span class="ident" id="6456592">os</span><span class="op" id="6456594">.</span><span class="ident" id="6456595">Open</span><span class="op" id="6456599">(</span><span class="ident" id="6456600">test</span><span class="op" id="6456604">.</span><span class="ident" id="6456605">file</span><span class="op" id="6456609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456612">if</span>&nbsp;<span class="ident" id="6456615">err</span>&nbsp;<span class="op" id="6456619">!=</span>&nbsp;<span class="ident" id="6456622">nil</span>&nbsp;<span class="op" id="6456626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456630">t</span><span class="op" id="6456631">.</span><span class="ident" id="6456632">Fatalf</span><span class="op" id="6456638">(</span><span class="string" id="6456639">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6456661">,</span>&nbsp;<span class="ident" id="6456663">err</span><span class="op" id="6456666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456669">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456672">defer</span>&nbsp;<span class="ident" id="6456678">f</span><span class="op" id="6456679">.</span><span class="ident" id="6456680">Close</span><span class="op" id="6456685">(</span><span class="op" id="6456686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456690">tr</span>&nbsp;<span class="op" id="6456693">:=</span>&nbsp;<span class="ident" id="6456696">NewReader</span><span class="op" id="6456705">(</span><span class="ident" id="6456706">f</span><span class="op" id="6456707">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456711">headers</span>&nbsp;<span class="op" id="6456719">:=</span>&nbsp;<span class="ident" id="6456722">test</span><span class="op" id="6456726">.</span><span class="ident" id="6456727">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456736">cksums</span>&nbsp;<span class="op" id="6456743">:=</span>&nbsp;<span class="ident" id="6456746">test</span><span class="op" id="6456750">.</span><span class="ident" id="6456751">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456759">nread</span>&nbsp;<span class="op" id="6456765">:=</span>&nbsp;<span class="num" id="6456768">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6456772">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456796">for</span>&nbsp;<span class="op" id="6456800">;</span>&nbsp;<span class="op" id="6456802">;</span>&nbsp;<span class="ident" id="6456804">nread</span><span class="op" id="6456809">++</span>&nbsp;<span class="op" id="6456812">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456816">hdr</span><span class="op" id="6456819">,</span>&nbsp;<span class="ident" id="6456821">err</span>&nbsp;<span class="op" id="6456825">:=</span>&nbsp;<span class="ident" id="6456828">tr</span><span class="op" id="6456830">.</span><span class="ident" id="6456831">Next</span><span class="op" id="6456835">(</span><span class="op" id="6456836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456840">if</span>&nbsp;<span class="ident" id="6456843">hdr</span>&nbsp;<span class="op" id="6456847">==</span>&nbsp;<span class="ident" id="6456850">nil</span>&nbsp;<span class="op" id="6456854">||</span>&nbsp;<span class="ident" id="6456857">err</span>&nbsp;<span class="op" id="6456861">==</span>&nbsp;<span class="ident" id="6456864">io</span><span class="op" id="6456866">.</span><span class="ident" id="6456867">EOF</span>&nbsp;<span class="op" id="6456871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456876">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6456884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6456889">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6456911">if</span>&nbsp;<span class="op" id="6456914">!</span><span class="ident" id="6456915">reflect</span><span class="op" id="6456922">.</span><span class="ident" id="6456923">DeepEqual</span><span class="op" id="6456932">(</span><span class="op" id="6456933">*</span><span class="ident" id="6456934">hdr</span><span class="op" id="6456937">,</span>&nbsp;<span class="op" id="6456939">*</span><span class="ident" id="6456940">headers</span><span class="op" id="6456947">[</span><span class="ident" id="6456948">nread</span><span class="op" id="6456953">]</span><span class="op" id="6456954">)</span>&nbsp;<span class="op" id="6456956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6456961">t</span><span class="op" id="6456962">.</span><span class="ident" id="6456963">Errorf</span><span class="op" id="6456969">(</span><span class="string" id="6456970">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6457009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457015">*</span><span class="ident" id="6457016">hdr</span><span class="op" id="6457019">,</span>&nbsp;<span class="ident" id="6457021">headers</span><span class="op" id="6457028">[</span><span class="ident" id="6457029">nread</span><span class="op" id="6457034">]</span><span class="op" id="6457035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457039">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457044">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457090">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457120">h</span>&nbsp;<span class="op" id="6457122">:=</span>&nbsp;<span class="ident" id="6457125">md5</span><span class="op" id="6457128">.</span><span class="ident" id="6457129">New</span><span class="op" id="6457132">(</span><span class="op" id="6457133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457137">rdbuf</span>&nbsp;<span class="op" id="6457143">:=</span>&nbsp;<span class="builtinfunc" id="6457146">make</span><span class="op" id="6457150">(</span><span class="op" id="6457151">[</span><span class="op" id="6457152">]</span><span class="builtintype" id="6457153">uint8</span><span class="op" id="6457158">,</span>&nbsp;<span class="num" id="6457160">8</span><span class="op" id="6457161">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457165">for</span>&nbsp;<span class="op" id="6457169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457174">nr</span><span class="op" id="6457176">,</span>&nbsp;<span class="ident" id="6457178">err</span>&nbsp;<span class="op" id="6457182">:=</span>&nbsp;<span class="ident" id="6457185">tr</span><span class="op" id="6457187">.</span><span class="ident" id="6457188">Read</span><span class="op" id="6457192">(</span><span class="ident" id="6457193">rdbuf</span><span class="op" id="6457198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457203">if</span>&nbsp;<span class="ident" id="6457206">err</span>&nbsp;<span class="op" id="6457210">==</span>&nbsp;<span class="ident" id="6457213">io</span><span class="op" id="6457215">.</span><span class="ident" id="6457216">EOF</span>&nbsp;<span class="op" id="6457220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457226">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457235">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457240">if</span>&nbsp;<span class="ident" id="6457243">err</span>&nbsp;<span class="op" id="6457247">!=</span>&nbsp;<span class="ident" id="6457250">nil</span>&nbsp;<span class="op" id="6457254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457260">t</span><span class="op" id="6457261">.</span><span class="ident" id="6457262">Errorf</span><span class="op" id="6457268">(</span><span class="string" id="6457269">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6457298">,</span>&nbsp;<span class="ident" id="6457300">err</span><span class="op" id="6457303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457309">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457323">h</span><span class="op" id="6457324">.</span><span class="ident" id="6457325">Write</span><span class="op" id="6457330">(</span><span class="ident" id="6457331">rdbuf</span><span class="op" id="6457336">[</span><span class="num" id="6457337">0</span><span class="op" id="6457338">:</span><span class="ident" id="6457339">nr</span><span class="op" id="6457341">]</span><span class="op" id="6457342">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6457350">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457371">have</span>&nbsp;<span class="op" id="6457376">:=</span>&nbsp;<span class="ident" id="6457379">fmt</span><span class="op" id="6457382">.</span><span class="ident" id="6457383">Sprintf</span><span class="op" id="6457390">(</span><span class="string" id="6457391">&#34;%x&#34;</span><span class="op" id="6457395">,</span>&nbsp;<span class="ident" id="6457397">h</span><span class="op" id="6457398">.</span><span class="ident" id="6457399">Sum</span><span class="op" id="6457402">(</span><span class="ident" id="6457403">nil</span><span class="op" id="6457406">)</span><span class="op" id="6457407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457411">want</span>&nbsp;<span class="op" id="6457416">:=</span>&nbsp;<span class="ident" id="6457419">cksums</span><span class="op" id="6457425">[</span><span class="ident" id="6457426">nread</span><span class="op" id="6457431">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457435">if</span>&nbsp;<span class="ident" id="6457438">want</span>&nbsp;<span class="op" id="6457443">!=</span>&nbsp;<span class="ident" id="6457446">have</span>&nbsp;<span class="op" id="6457451">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457456">t</span><span class="op" id="6457457">.</span><span class="ident" id="6457458">Errorf</span><span class="op" id="6457464">(</span><span class="string" id="6457465">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6457511">,</span>&nbsp;<span class="ident" id="6457513">hdr</span><span class="op" id="6457516">.</span><span class="ident" id="6457517">Name</span><span class="op" id="6457521">,</span>&nbsp;<span class="ident" id="6457523">have</span><span class="op" id="6457527">,</span>&nbsp;<span class="ident" id="6457529">want</span><span class="op" id="6457533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457543">if</span>&nbsp;<span class="ident" id="6457546">nread</span>&nbsp;<span class="op" id="6457552">!=</span>&nbsp;<span class="builtinfunc" id="6457555">len</span><span class="op" id="6457558">(</span><span class="ident" id="6457559">headers</span><span class="op" id="6457566">)</span>&nbsp;<span class="op" id="6457568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457572">t</span><span class="op" id="6457573">.</span><span class="ident" id="6457574">Errorf</span><span class="op" id="6457580">(</span><span class="string" id="6457581">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6457637">,</span>&nbsp;<span class="builtinfunc" id="6457639">len</span><span class="op" id="6457642">(</span><span class="ident" id="6457643">headers</span><span class="op" id="6457650">)</span><span class="op" id="6457651">,</span>&nbsp;<span class="ident" id="6457653">nread</span><span class="op" id="6457658">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457661">}</span><br>
<span class="lineno"></span><span class="op" id="6457663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6457666">func</span>&nbsp;<span class="ident" id="6457671">TestNonSeekable</span><span class="op" id="6457686">(</span><span class="ident" id="6457687">t</span>&nbsp;<span class="op" id="6457689">*</span><span class="ident" id="6457690">testing</span><span class="op" id="6457697">.</span><span class="ident" id="6457698">T</span><span class="op" id="6457699">)</span>&nbsp;<span class="op" id="6457701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457704">test</span>&nbsp;<span class="op" id="6457709">:=</span>&nbsp;<span class="ident" id="6457712">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457724">f</span><span class="op" id="6457725">,</span>&nbsp;<span class="ident" id="6457727">err</span>&nbsp;<span class="op" id="6457731">:=</span>&nbsp;<span class="ident" id="6457734">os</span><span class="op" id="6457736">.</span><span class="ident" id="6457737">Open</span><span class="op" id="6457741">(</span><span class="ident" id="6457742">test</span><span class="op" id="6457746">.</span><span class="ident" id="6457747">file</span><span class="op" id="6457751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457754">if</span>&nbsp;<span class="ident" id="6457757">err</span>&nbsp;<span class="op" id="6457761">!=</span>&nbsp;<span class="ident" id="6457764">nil</span>&nbsp;<span class="op" id="6457768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457772">t</span><span class="op" id="6457773">.</span><span class="ident" id="6457774">Fatalf</span><span class="op" id="6457780">(</span><span class="string" id="6457781">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6457803">,</span>&nbsp;<span class="ident" id="6457805">err</span><span class="op" id="6457808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457814">defer</span>&nbsp;<span class="ident" id="6457820">f</span><span class="op" id="6457821">.</span><span class="ident" id="6457822">Close</span><span class="op" id="6457827">(</span><span class="op" id="6457828">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457832">type</span>&nbsp;<span class="ident" id="6457837">readerOnly</span>&nbsp;<span class="keyword" id="6457848">struct</span>&nbsp;<span class="op" id="6457855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457859">io</span><span class="op" id="6457861">.</span><span class="ident" id="6457862">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457873">tr</span>&nbsp;<span class="op" id="6457876">:=</span>&nbsp;<span class="ident" id="6457879">NewReader</span><span class="op" id="6457888">(</span><span class="ident" id="6457889">readerOnly</span><span class="op" id="6457899">{</span><span class="ident" id="6457900">f</span><span class="op" id="6457901">}</span><span class="op" id="6457902">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457905">nread</span>&nbsp;<span class="op" id="6457911">:=</span>&nbsp;<span class="num" id="6457914">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457918">for</span>&nbsp;<span class="op" id="6457922">;</span>&nbsp;<span class="op" id="6457924">;</span>&nbsp;<span class="ident" id="6457926">nread</span><span class="op" id="6457931">++</span>&nbsp;<span class="op" id="6457934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6457938">_</span><span class="op" id="6457939">,</span>&nbsp;<span class="ident" id="6457941">err</span>&nbsp;<span class="op" id="6457945">:=</span>&nbsp;<span class="ident" id="6457948">tr</span><span class="op" id="6457950">.</span><span class="ident" id="6457951">Next</span><span class="op" id="6457955">(</span><span class="op" id="6457956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457960">if</span>&nbsp;<span class="ident" id="6457963">err</span>&nbsp;<span class="op" id="6457967">==</span>&nbsp;<span class="ident" id="6457970">io</span><span class="op" id="6457972">.</span><span class="ident" id="6457973">EOF</span>&nbsp;<span class="op" id="6457977">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457982">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6457990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6457994">if</span>&nbsp;<span class="ident" id="6457997">err</span>&nbsp;<span class="op" id="6458001">!=</span>&nbsp;<span class="ident" id="6458004">nil</span>&nbsp;<span class="op" id="6458008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458013">t</span><span class="op" id="6458014">.</span><span class="ident" id="6458015">Fatalf</span><span class="op" id="6458021">(</span><span class="string" id="6458022">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6458044">,</span>&nbsp;<span class="ident" id="6458046">err</span><span class="op" id="6458049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458053">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458060">if</span>&nbsp;<span class="ident" id="6458063">nread</span>&nbsp;<span class="op" id="6458069">!=</span>&nbsp;<span class="builtinfunc" id="6458072">len</span><span class="op" id="6458075">(</span><span class="ident" id="6458076">test</span><span class="op" id="6458080">.</span><span class="ident" id="6458081">headers</span><span class="op" id="6458088">)</span>&nbsp;<span class="op" id="6458090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458094">t</span><span class="op" id="6458095">.</span><span class="ident" id="6458096">Errorf</span><span class="op" id="6458102">(</span><span class="string" id="6458103">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6458159">,</span>&nbsp;<span class="builtinfunc" id="6458161">len</span><span class="op" id="6458164">(</span><span class="ident" id="6458165">test</span><span class="op" id="6458169">.</span><span class="ident" id="6458170">headers</span><span class="op" id="6458177">)</span><span class="op" id="6458178">,</span>&nbsp;<span class="ident" id="6458180">nread</span><span class="op" id="6458185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458188">}</span><br>
<span class="lineno">440</span><span class="op" id="6458190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6458193">func</span>&nbsp;<span class="ident" id="6458198">TestParsePAXHeader</span><span class="op" id="6458216">(</span><span class="ident" id="6458217">t</span>&nbsp;<span class="op" id="6458219">*</span><span class="ident" id="6458220">testing</span><span class="op" id="6458227">.</span><span class="ident" id="6458228">T</span><span class="op" id="6458229">)</span>&nbsp;<span class="op" id="6458231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458234">paxTests</span>&nbsp;<span class="op" id="6458243">:=</span>&nbsp;<span class="op" id="6458246">[</span><span class="op" id="6458247">]</span><span class="op" id="6458248">[</span><span class="num" id="6458249">3</span><span class="op" id="6458250">]</span><span class="builtintype" id="6458251">string</span><span class="op" id="6458257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458261">{</span><span class="string" id="6458262">&#34;a&#34;</span><span class="op" id="6458265">,</span>&nbsp;<span class="string" id="6458267">&#34;a=name&#34;</span><span class="op" id="6458275">,</span>&nbsp;<span class="string" id="6458277">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6458290">}</span><span class="op" id="6458291">,</span>&nbsp;<span class="comment" id="6458293">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458346">{</span><span class="string" id="6458347">&#34;a&#34;</span><span class="op" id="6458350">,</span>&nbsp;<span class="string" id="6458352">&#34;a=name&#34;</span><span class="op" id="6458360">,</span>&nbsp;<span class="string" id="6458362">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6458374">}</span><span class="op" id="6458375">,</span>&nbsp;&nbsp;<span class="comment" id="6458378">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458430">{</span><span class="string" id="6458431">&#34;mtime&#34;</span><span class="op" id="6458438">,</span>&nbsp;<span class="string" id="6458440">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6458468">,</span>&nbsp;<span class="string" id="6458470">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6458503">}</span><span class="op" id="6458504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458507">for</span>&nbsp;<span class="ident" id="6458511">_</span><span class="op" id="6458512">,</span>&nbsp;<span class="ident" id="6458514">test</span>&nbsp;<span class="op" id="6458519">:=</span>&nbsp;<span class="keyword" id="6458522">range</span>&nbsp;<span class="ident" id="6458528">paxTests</span>&nbsp;<span class="op" id="6458537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458541">key</span><span class="op" id="6458544">,</span>&nbsp;<span class="ident" id="6458546">expected</span><span class="op" id="6458554">,</span>&nbsp;<span class="ident" id="6458556">raw</span>&nbsp;<span class="op" id="6458560">:=</span>&nbsp;<span class="ident" id="6458563">test</span><span class="op" id="6458567">[</span><span class="num" id="6458568">0</span><span class="op" id="6458569">]</span><span class="op" id="6458570">,</span>&nbsp;<span class="ident" id="6458572">test</span><span class="op" id="6458576">[</span><span class="num" id="6458577">1</span><span class="op" id="6458578">]</span><span class="op" id="6458579">,</span>&nbsp;<span class="ident" id="6458581">test</span><span class="op" id="6458585">[</span><span class="num" id="6458586">2</span><span class="op" id="6458587">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458591">reader</span>&nbsp;<span class="op" id="6458598">:=</span>&nbsp;<span class="ident" id="6458601">bytes</span><span class="op" id="6458606">.</span><span class="ident" id="6458607">NewReader</span><span class="op" id="6458616">(</span><span class="op" id="6458617">[</span><span class="op" id="6458618">]</span><span class="builtintype" id="6458619">byte</span><span class="op" id="6458623">(</span><span class="ident" id="6458624">raw</span><span class="op" id="6458627">)</span><span class="op" id="6458628">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458632">headers</span><span class="op" id="6458639">,</span>&nbsp;<span class="ident" id="6458641">err</span>&nbsp;<span class="op" id="6458645">:=</span>&nbsp;<span class="ident" id="6458648">parsePAX</span><span class="op" id="6458656">(</span><span class="ident" id="6458657">reader</span><span class="op" id="6458663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458667">if</span>&nbsp;<span class="ident" id="6458670">err</span>&nbsp;<span class="op" id="6458674">!=</span>&nbsp;<span class="ident" id="6458677">nil</span>&nbsp;<span class="op" id="6458681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458686">t</span><span class="op" id="6458687">.</span><span class="ident" id="6458688">Errorf</span><span class="op" id="6458694">(</span><span class="string" id="6458695">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6458743">,</span>&nbsp;<span class="ident" id="6458745">err</span><span class="op" id="6458748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458753">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458764">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458768">if</span>&nbsp;<span class="ident" id="6458771">strings</span><span class="op" id="6458778">.</span><span class="ident" id="6458779">EqualFold</span><span class="op" id="6458788">(</span><span class="ident" id="6458789">headers</span><span class="op" id="6458796">[</span><span class="ident" id="6458797">key</span><span class="op" id="6458800">]</span><span class="op" id="6458801">,</span>&nbsp;<span class="ident" id="6458803">expected</span><span class="op" id="6458811">)</span>&nbsp;<span class="op" id="6458813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458818">t</span><span class="op" id="6458819">.</span><span class="ident" id="6458820">Errorf</span><span class="op" id="6458826">(</span><span class="string" id="6458827">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6458879">,</span>&nbsp;<span class="ident" id="6458881">headers</span><span class="op" id="6458888">[</span><span class="ident" id="6458889">key</span><span class="op" id="6458892">]</span><span class="op" id="6458893">,</span>&nbsp;<span class="ident" id="6458895">expected</span><span class="op" id="6458903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458908">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6458919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458923">trailer</span>&nbsp;<span class="op" id="6458931">:=</span>&nbsp;<span class="builtinfunc" id="6458934">make</span><span class="op" id="6458938">(</span><span class="op" id="6458939">[</span><span class="op" id="6458940">]</span><span class="builtintype" id="6458941">byte</span><span class="op" id="6458945">,</span>&nbsp;<span class="num" id="6458947">100</span><span class="op" id="6458950">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6458954">n</span><span class="op" id="6458955">,</span>&nbsp;<span class="ident" id="6458957">err</span>&nbsp;<span class="op" id="6458961">:=</span>&nbsp;<span class="ident" id="6458964">reader</span><span class="op" id="6458970">.</span><span class="ident" id="6458971">Read</span><span class="op" id="6458975">(</span><span class="ident" id="6458976">trailer</span><span class="op" id="6458983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6458987">if</span>&nbsp;<span class="ident" id="6458990">err</span>&nbsp;<span class="op" id="6458994">!=</span>&nbsp;<span class="ident" id="6458997">io</span><span class="op" id="6458999">.</span><span class="ident" id="6459000">EOF</span>&nbsp;<span class="op" id="6459004">||</span>&nbsp;<span class="ident" id="6459007">n</span>&nbsp;<span class="op" id="6459009">!=</span>&nbsp;<span class="num" id="6459012">0</span>&nbsp;<span class="op" id="6459014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459019">t</span><span class="op" id="6459020">.</span><span class="ident" id="6459021">Error</span><span class="op" id="6459026">(</span><span class="string" id="6459027">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6459051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459058">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459061">badHeader</span>&nbsp;<span class="op" id="6459071">:=</span>&nbsp;<span class="ident" id="6459074">bytes</span><span class="op" id="6459079">.</span><span class="ident" id="6459080">NewReader</span><span class="op" id="6459089">(</span><span class="op" id="6459090">[</span><span class="op" id="6459091">]</span><span class="builtintype" id="6459092">byte</span><span class="op" id="6459096">(</span><span class="string" id="6459097">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6459113">)</span><span class="op" id="6459114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459117">if</span>&nbsp;<span class="ident" id="6459120">_</span><span class="op" id="6459121">,</span>&nbsp;<span class="ident" id="6459123">err</span>&nbsp;<span class="op" id="6459127">:=</span>&nbsp;<span class="ident" id="6459130">parsePAX</span><span class="op" id="6459138">(</span><span class="ident" id="6459139">badHeader</span><span class="op" id="6459148">)</span><span class="op" id="6459149">;</span>&nbsp;<span class="ident" id="6459151">err</span>&nbsp;<span class="op" id="6459155">!=</span>&nbsp;<span class="ident" id="6459158">ErrHeader</span>&nbsp;<span class="op" id="6459168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459172">t</span><span class="op" id="6459173">.</span><span class="ident" id="6459174">Fatal</span><span class="op" id="6459179">(</span><span class="string" id="6459180">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6459224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459227">}</span><br>
<span class="lineno"></span><span class="op" id="6459229">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6459232">func</span>&nbsp;<span class="ident" id="6459237">TestParsePAXTime</span><span class="op" id="6459253">(</span><span class="ident" id="6459254">t</span>&nbsp;<span class="op" id="6459256">*</span><span class="ident" id="6459257">testing</span><span class="op" id="6459264">.</span><span class="ident" id="6459265">T</span><span class="op" id="6459266">)</span>&nbsp;<span class="op" id="6459268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6459271">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459302">timestamps</span>&nbsp;<span class="op" id="6459313">:=</span>&nbsp;<span class="keyword" id="6459316">map</span><span class="op" id="6459319">[</span><span class="builtintype" id="6459320">string</span><span class="op" id="6459326">]</span><span class="ident" id="6459327">time</span><span class="op" id="6459331">.</span><span class="ident" id="6459332">Time</span><span class="op" id="6459336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6459340">&#34;1350244992.023960108&#34;</span><span class="op" id="6459362">:</span>&nbsp;&nbsp;<span class="ident" id="6459365">time</span><span class="op" id="6459369">.</span><span class="ident" id="6459370">Unix</span><span class="op" id="6459374">(</span><span class="num" id="6459375">1350244992</span><span class="op" id="6459385">,</span>&nbsp;<span class="num" id="6459387">23960108</span><span class="op" id="6459395">)</span><span class="op" id="6459396">,</span>&nbsp;<span class="comment" id="6459398">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6459419">&#34;1350244992.02396010&#34;</span><span class="op" id="6459440">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6459444">time</span><span class="op" id="6459448">.</span><span class="ident" id="6459449">Unix</span><span class="op" id="6459453">(</span><span class="num" id="6459454">1350244992</span><span class="op" id="6459464">,</span>&nbsp;<span class="num" id="6459466">23960100</span><span class="op" id="6459474">)</span><span class="op" id="6459475">,</span>&nbsp;<span class="comment" id="6459477">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6459504">&#34;1350244992.0239601089&#34;</span><span class="op" id="6459527">:</span>&nbsp;<span class="ident" id="6459529">time</span><span class="op" id="6459533">.</span><span class="ident" id="6459534">Unix</span><span class="op" id="6459538">(</span><span class="num" id="6459539">1350244992</span><span class="op" id="6459549">,</span>&nbsp;<span class="num" id="6459551">23960108</span><span class="op" id="6459559">)</span><span class="op" id="6459560">,</span>&nbsp;<span class="comment" id="6459562">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6459590">&#34;1350244992&#34;</span><span class="op" id="6459602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6459615">time</span><span class="op" id="6459619">.</span><span class="ident" id="6459620">Unix</span><span class="op" id="6459624">(</span><span class="num" id="6459625">1350244992</span><span class="op" id="6459635">,</span>&nbsp;<span class="num" id="6459637">0</span><span class="op" id="6459638">)</span><span class="op" id="6459639">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6459648">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459675">for</span>&nbsp;<span class="ident" id="6459679">input</span><span class="op" id="6459684">,</span>&nbsp;<span class="ident" id="6459686">expected</span>&nbsp;<span class="op" id="6459695">:=</span>&nbsp;<span class="keyword" id="6459698">range</span>&nbsp;<span class="ident" id="6459704">timestamps</span>&nbsp;<span class="op" id="6459715">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459719">ts</span><span class="op" id="6459721">,</span>&nbsp;<span class="ident" id="6459723">err</span>&nbsp;<span class="op" id="6459727">:=</span>&nbsp;<span class="ident" id="6459730">parsePAXTime</span><span class="op" id="6459742">(</span><span class="ident" id="6459743">input</span><span class="op" id="6459748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459752">if</span>&nbsp;<span class="ident" id="6459755">err</span>&nbsp;<span class="op" id="6459759">!=</span>&nbsp;<span class="ident" id="6459762">nil</span>&nbsp;<span class="op" id="6459766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459771">t</span><span class="op" id="6459772">.</span><span class="ident" id="6459773">Fatal</span><span class="op" id="6459778">(</span><span class="ident" id="6459779">err</span><span class="op" id="6459782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6459790">if</span>&nbsp;<span class="op" id="6459793">!</span><span class="ident" id="6459794">ts</span><span class="op" id="6459796">.</span><span class="ident" id="6459797">Equal</span><span class="op" id="6459802">(</span><span class="ident" id="6459803">expected</span><span class="op" id="6459811">)</span>&nbsp;<span class="op" id="6459813">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459818">t</span><span class="op" id="6459819">.</span><span class="ident" id="6459820">Fatalf</span><span class="op" id="6459826">(</span><span class="string" id="6459827">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6459855">,</span>&nbsp;<span class="ident" id="6459857">ts</span><span class="op" id="6459859">,</span>&nbsp;<span class="ident" id="6459861">expected</span><span class="op" id="6459869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6459876">}</span><br>
<span class="lineno"></span><span class="op" id="6459878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6459881">func</span>&nbsp;<span class="ident" id="6459886">TestMergePAX</span><span class="op" id="6459898">(</span><span class="ident" id="6459899">t</span>&nbsp;<span class="op" id="6459901">*</span><span class="ident" id="6459902">testing</span><span class="op" id="6459909">.</span><span class="ident" id="6459910">T</span><span class="op" id="6459911">)</span>&nbsp;<span class="op" id="6459913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459916">hdr</span>&nbsp;<span class="op" id="6459920">:=</span>&nbsp;<span class="builtinfunc" id="6459923">new</span><span class="op" id="6459926">(</span><span class="ident" id="6459927">Header</span><span class="op" id="6459933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6459936">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6459986">headers</span>&nbsp;<span class="op" id="6459994">:=</span>&nbsp;<span class="keyword" id="6459997">map</span><span class="op" id="6460000">[</span><span class="builtintype" id="6460001">string</span><span class="op" id="6460007">]</span><span class="builtintype" id="6460008">string</span><span class="op" id="6460014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6460018">&#34;path&#34;</span><span class="op" id="6460024">:</span>&nbsp;&nbsp;<span class="string" id="6460027">&#34;a/b/c&#34;</span><span class="op" id="6460034">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6460038">&#34;uid&#34;</span><span class="op" id="6460043">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6460047">&#34;1000&#34;</span><span class="op" id="6460053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6460057">&#34;mtime&#34;</span><span class="op" id="6460064">:</span>&nbsp;<span class="string" id="6460066">&#34;1350244992.023960108&#34;</span><span class="op" id="6460088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460094">err</span>&nbsp;<span class="op" id="6460098">:=</span>&nbsp;<span class="ident" id="6460101">mergePAX</span><span class="op" id="6460109">(</span><span class="ident" id="6460110">hdr</span><span class="op" id="6460113">,</span>&nbsp;<span class="ident" id="6460115">headers</span><span class="op" id="6460122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460125">if</span>&nbsp;<span class="ident" id="6460128">err</span>&nbsp;<span class="op" id="6460132">!=</span>&nbsp;<span class="ident" id="6460135">nil</span>&nbsp;<span class="op" id="6460139">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460143">t</span><span class="op" id="6460144">.</span><span class="ident" id="6460145">Fatal</span><span class="op" id="6460150">(</span><span class="ident" id="6460151">err</span><span class="op" id="6460154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460160">want</span>&nbsp;<span class="op" id="6460165">:=</span>&nbsp;<span class="op" id="6460168">&amp;</span><span class="ident" id="6460169">Header</span><span class="op" id="6460175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460179">Name</span><span class="op" id="6460183">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6460188">&#34;a/b/c&#34;</span><span class="op" id="6460195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460199">Uid</span><span class="op" id="6460202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6460208">1000</span><span class="op" id="6460212">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460216">ModTime</span><span class="op" id="6460223">:</span>&nbsp;<span class="ident" id="6460225">time</span><span class="op" id="6460229">.</span><span class="ident" id="6460230">Unix</span><span class="op" id="6460234">(</span><span class="num" id="6460235">1350244992</span><span class="op" id="6460245">,</span>&nbsp;<span class="num" id="6460247">23960108</span><span class="op" id="6460255">)</span><span class="op" id="6460256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460262">if</span>&nbsp;<span class="op" id="6460265">!</span><span class="ident" id="6460266">reflect</span><span class="op" id="6460273">.</span><span class="ident" id="6460274">DeepEqual</span><span class="op" id="6460283">(</span><span class="ident" id="6460284">hdr</span><span class="op" id="6460287">,</span>&nbsp;<span class="ident" id="6460289">want</span><span class="op" id="6460293">)</span>&nbsp;<span class="op" id="6460295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460299">t</span><span class="op" id="6460300">.</span><span class="ident" id="6460301">Errorf</span><span class="op" id="6460307">(</span><span class="string" id="6460308">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6460344">,</span>&nbsp;<span class="ident" id="6460346">hdr</span><span class="op" id="6460349">,</span>&nbsp;<span class="ident" id="6460351">want</span><span class="op" id="6460355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460358">}</span><br>
<span class="lineno">510</span><span class="op" id="6460360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6460363">func</span>&nbsp;<span class="ident" id="6460368">TestSparseEndToEnd</span><span class="op" id="6460386">(</span><span class="ident" id="6460387">t</span>&nbsp;<span class="op" id="6460389">*</span><span class="ident" id="6460390">testing</span><span class="op" id="6460397">.</span><span class="ident" id="6460398">T</span><span class="op" id="6460399">)</span>&nbsp;<span class="op" id="6460401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460404">test</span>&nbsp;<span class="op" id="6460409">:=</span>&nbsp;<span class="ident" id="6460412">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460427">f</span><span class="op" id="6460428">,</span>&nbsp;<span class="ident" id="6460430">err</span>&nbsp;<span class="op" id="6460434">:=</span>&nbsp;<span class="ident" id="6460437">os</span><span class="op" id="6460439">.</span><span class="ident" id="6460440">Open</span><span class="op" id="6460444">(</span><span class="ident" id="6460445">test</span><span class="op" id="6460449">.</span><span class="ident" id="6460450">file</span><span class="op" id="6460454">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460457">if</span>&nbsp;<span class="ident" id="6460460">err</span>&nbsp;<span class="op" id="6460464">!=</span>&nbsp;<span class="ident" id="6460467">nil</span>&nbsp;<span class="op" id="6460471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460475">t</span><span class="op" id="6460476">.</span><span class="ident" id="6460477">Fatalf</span><span class="op" id="6460483">(</span><span class="string" id="6460484">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6460506">,</span>&nbsp;<span class="ident" id="6460508">err</span><span class="op" id="6460511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460517">defer</span>&nbsp;<span class="ident" id="6460523">f</span><span class="op" id="6460524">.</span><span class="ident" id="6460525">Close</span><span class="op" id="6460530">(</span><span class="op" id="6460531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460535">tr</span>&nbsp;<span class="op" id="6460538">:=</span>&nbsp;<span class="ident" id="6460541">NewReader</span><span class="op" id="6460550">(</span><span class="ident" id="6460551">f</span><span class="op" id="6460552">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460556">headers</span>&nbsp;<span class="op" id="6460564">:=</span>&nbsp;<span class="ident" id="6460567">test</span><span class="op" id="6460571">.</span><span class="ident" id="6460572">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460581">cksums</span>&nbsp;<span class="op" id="6460588">:=</span>&nbsp;<span class="ident" id="6460591">test</span><span class="op" id="6460595">.</span><span class="ident" id="6460596">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460604">nread</span>&nbsp;<span class="op" id="6460610">:=</span>&nbsp;<span class="num" id="6460613">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6460617">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460641">for</span>&nbsp;<span class="op" id="6460645">;</span>&nbsp;<span class="op" id="6460647">;</span>&nbsp;<span class="ident" id="6460649">nread</span><span class="op" id="6460654">++</span>&nbsp;<span class="op" id="6460657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460661">hdr</span><span class="op" id="6460664">,</span>&nbsp;<span class="ident" id="6460666">err</span>&nbsp;<span class="op" id="6460670">:=</span>&nbsp;<span class="ident" id="6460673">tr</span><span class="op" id="6460675">.</span><span class="ident" id="6460676">Next</span><span class="op" id="6460680">(</span><span class="op" id="6460681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460685">if</span>&nbsp;<span class="ident" id="6460688">hdr</span>&nbsp;<span class="op" id="6460692">==</span>&nbsp;<span class="ident" id="6460695">nil</span>&nbsp;<span class="op" id="6460699">||</span>&nbsp;<span class="ident" id="6460702">err</span>&nbsp;<span class="op" id="6460706">==</span>&nbsp;<span class="ident" id="6460709">io</span><span class="op" id="6460711">.</span><span class="ident" id="6460712">EOF</span>&nbsp;<span class="op" id="6460716">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460721">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6460734">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460756">if</span>&nbsp;<span class="op" id="6460759">!</span><span class="ident" id="6460760">reflect</span><span class="op" id="6460767">.</span><span class="ident" id="6460768">DeepEqual</span><span class="op" id="6460777">(</span><span class="op" id="6460778">*</span><span class="ident" id="6460779">hdr</span><span class="op" id="6460782">,</span>&nbsp;<span class="op" id="6460784">*</span><span class="ident" id="6460785">headers</span><span class="op" id="6460792">[</span><span class="ident" id="6460793">nread</span><span class="op" id="6460798">]</span><span class="op" id="6460799">)</span>&nbsp;<span class="op" id="6460801">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460806">t</span><span class="op" id="6460807">.</span><span class="ident" id="6460808">Errorf</span><span class="op" id="6460814">(</span><span class="string" id="6460815">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6460854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460860">*</span><span class="ident" id="6460861">hdr</span><span class="op" id="6460864">,</span>&nbsp;<span class="ident" id="6460866">headers</span><span class="op" id="6460873">[</span><span class="ident" id="6460874">nread</span><span class="op" id="6460879">]</span><span class="op" id="6460880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6460884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6460889">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460926">h</span>&nbsp;<span class="op" id="6460928">:=</span>&nbsp;<span class="ident" id="6460931">md5</span><span class="op" id="6460934">.</span><span class="ident" id="6460935">New</span><span class="op" id="6460938">(</span><span class="op" id="6460939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460943">_</span><span class="op" id="6460944">,</span>&nbsp;<span class="ident" id="6460946">err</span>&nbsp;<span class="op" id="6460950">=</span>&nbsp;<span class="ident" id="6460952">io</span><span class="op" id="6460954">.</span><span class="ident" id="6460955">Copy</span><span class="op" id="6460959">(</span><span class="ident" id="6460960">h</span><span class="op" id="6460961">,</span>&nbsp;<span class="ident" id="6460963">tr</span><span class="op" id="6460965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6460969">if</span>&nbsp;<span class="ident" id="6460972">err</span>&nbsp;<span class="op" id="6460976">!=</span>&nbsp;<span class="ident" id="6460979">nil</span>&nbsp;<span class="op" id="6460983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6460988">t</span><span class="op" id="6460989">.</span><span class="ident" id="6460990">Fatalf</span><span class="op" id="6460996">(</span><span class="string" id="6460997">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6461019">,</span>&nbsp;<span class="ident" id="6461021">err</span><span class="op" id="6461024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461028">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6461033">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461054">have</span>&nbsp;<span class="op" id="6461059">:=</span>&nbsp;<span class="ident" id="6461062">fmt</span><span class="op" id="6461065">.</span><span class="ident" id="6461066">Sprintf</span><span class="op" id="6461073">(</span><span class="string" id="6461074">&#34;%x&#34;</span><span class="op" id="6461078">,</span>&nbsp;<span class="ident" id="6461080">h</span><span class="op" id="6461081">.</span><span class="ident" id="6461082">Sum</span><span class="op" id="6461085">(</span><span class="ident" id="6461086">nil</span><span class="op" id="6461089">)</span><span class="op" id="6461090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461094">want</span>&nbsp;<span class="op" id="6461099">:=</span>&nbsp;<span class="ident" id="6461102">cksums</span><span class="op" id="6461108">[</span><span class="ident" id="6461109">nread</span><span class="op" id="6461114">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461118">if</span>&nbsp;<span class="ident" id="6461121">want</span>&nbsp;<span class="op" id="6461126">!=</span>&nbsp;<span class="ident" id="6461129">have</span>&nbsp;<span class="op" id="6461134">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461139">t</span><span class="op" id="6461140">.</span><span class="ident" id="6461141">Errorf</span><span class="op" id="6461147">(</span><span class="string" id="6461148">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6461194">,</span>&nbsp;<span class="ident" id="6461196">hdr</span><span class="op" id="6461199">.</span><span class="ident" id="6461200">Name</span><span class="op" id="6461204">,</span>&nbsp;<span class="ident" id="6461206">have</span><span class="op" id="6461210">,</span>&nbsp;<span class="ident" id="6461212">want</span><span class="op" id="6461216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6461226">if</span>&nbsp;<span class="ident" id="6461229">nread</span>&nbsp;<span class="op" id="6461235">!=</span>&nbsp;<span class="builtinfunc" id="6461238">len</span><span class="op" id="6461241">(</span><span class="ident" id="6461242">headers</span><span class="op" id="6461249">)</span>&nbsp;<span class="op" id="6461251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461255">t</span><span class="op" id="6461256">.</span><span class="ident" id="6461257">Errorf</span><span class="op" id="6461263">(</span><span class="string" id="6461264">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6461320">,</span>&nbsp;<span class="builtinfunc" id="6461322">len</span><span class="op" id="6461325">(</span><span class="ident" id="6461326">headers</span><span class="op" id="6461333">)</span><span class="op" id="6461334">,</span>&nbsp;<span class="ident" id="6461336">nread</span><span class="op" id="6461341">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461344">}</span><br>
<span class="lineno"></span><span class="op" id="6461346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6461349">type</span>&nbsp;<span class="ident" id="6461354">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6461373">struct</span>&nbsp;<span class="op" id="6461380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461383">sparseData</span>&nbsp;<span class="op" id="6461394">[</span><span class="op" id="6461395">]</span><span class="builtintype" id="6461396">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461402">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6461413">[</span><span class="op" id="6461414">]</span><span class="ident" id="6461415">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461428">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6461439">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461446">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6461457">[</span><span class="op" id="6461458">]</span><span class="builtintype" id="6461459">byte</span><br>
<span class="lineno"></span><span class="op" id="6461464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6461467">var</span>&nbsp;<span class="ident" id="6461471">sparseFileReadTests</span>&nbsp;<span class="op" id="6461491">=</span>&nbsp;<span class="op" id="6461493">[</span><span class="op" id="6461494">]</span><span class="ident" id="6461495">sparseFileReadTest</span><span class="op" id="6461513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461520">sparseData</span><span class="op" id="6461530">:</span>&nbsp;<span class="op" id="6461532">[</span><span class="op" id="6461533">]</span><span class="builtintype" id="6461534">byte</span><span class="op" id="6461538">(</span><span class="string" id="6461539">&#34;abcde&#34;</span><span class="op" id="6461546">)</span><span class="op" id="6461547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461551">sparseMap</span><span class="op" id="6461560">:</span>&nbsp;<span class="op" id="6461562">[</span><span class="op" id="6461563">]</span><span class="ident" id="6461564">sparseEntry</span><span class="op" id="6461575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461580">{</span><span class="ident" id="6461581">offset</span><span class="op" id="6461587">:</span>&nbsp;<span class="num" id="6461589">0</span><span class="op" id="6461590">,</span>&nbsp;<span class="ident" id="6461592">numBytes</span><span class="op" id="6461600">:</span>&nbsp;<span class="num" id="6461602">2</span><span class="op" id="6461603">}</span><span class="op" id="6461604">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461609">{</span><span class="ident" id="6461610">offset</span><span class="op" id="6461616">:</span>&nbsp;<span class="num" id="6461618">5</span><span class="op" id="6461619">,</span>&nbsp;<span class="ident" id="6461621">numBytes</span><span class="op" id="6461629">:</span>&nbsp;<span class="num" id="6461631">3</span><span class="op" id="6461632">}</span><span class="op" id="6461633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461637">}</span><span class="op" id="6461638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461642">realSize</span><span class="op" id="6461650">:</span>&nbsp;<span class="num" id="6461652">8</span><span class="op" id="6461653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461657">expected</span><span class="op" id="6461665">:</span>&nbsp;<span class="op" id="6461667">[</span><span class="op" id="6461668">]</span><span class="builtintype" id="6461669">byte</span><span class="op" id="6461673">(</span><span class="string" id="6461674">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6461693">)</span><span class="op" id="6461694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461697">}</span><span class="op" id="6461698">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461705">sparseData</span><span class="op" id="6461715">:</span>&nbsp;<span class="op" id="6461717">[</span><span class="op" id="6461718">]</span><span class="builtintype" id="6461719">byte</span><span class="op" id="6461723">(</span><span class="string" id="6461724">&#34;abcde&#34;</span><span class="op" id="6461731">)</span><span class="op" id="6461732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461736">sparseMap</span><span class="op" id="6461745">:</span>&nbsp;<span class="op" id="6461747">[</span><span class="op" id="6461748">]</span><span class="ident" id="6461749">sparseEntry</span><span class="op" id="6461760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461765">{</span><span class="ident" id="6461766">offset</span><span class="op" id="6461772">:</span>&nbsp;<span class="num" id="6461774">0</span><span class="op" id="6461775">,</span>&nbsp;<span class="ident" id="6461777">numBytes</span><span class="op" id="6461785">:</span>&nbsp;<span class="num" id="6461787">2</span><span class="op" id="6461788">}</span><span class="op" id="6461789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461794">{</span><span class="ident" id="6461795">offset</span><span class="op" id="6461801">:</span>&nbsp;<span class="num" id="6461803">5</span><span class="op" id="6461804">,</span>&nbsp;<span class="ident" id="6461806">numBytes</span><span class="op" id="6461814">:</span>&nbsp;<span class="num" id="6461816">3</span><span class="op" id="6461817">}</span><span class="op" id="6461818">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461822">}</span><span class="op" id="6461823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461827">realSize</span><span class="op" id="6461835">:</span>&nbsp;<span class="num" id="6461837">10</span><span class="op" id="6461839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461843">expected</span><span class="op" id="6461851">:</span>&nbsp;<span class="op" id="6461853">[</span><span class="op" id="6461854">]</span><span class="builtintype" id="6461855">byte</span><span class="op" id="6461859">(</span><span class="string" id="6461860">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6461887">)</span><span class="op" id="6461888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461891">}</span><span class="op" id="6461892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461895">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461899">sparseData</span><span class="op" id="6461909">:</span>&nbsp;<span class="op" id="6461911">[</span><span class="op" id="6461912">]</span><span class="builtintype" id="6461913">byte</span><span class="op" id="6461917">(</span><span class="string" id="6461918">&#34;abcde&#34;</span><span class="op" id="6461925">)</span><span class="op" id="6461926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6461930">sparseMap</span><span class="op" id="6461939">:</span>&nbsp;<span class="op" id="6461941">[</span><span class="op" id="6461942">]</span><span class="ident" id="6461943">sparseEntry</span><span class="op" id="6461954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461959">{</span><span class="ident" id="6461960">offset</span><span class="op" id="6461966">:</span>&nbsp;<span class="num" id="6461968">1</span><span class="op" id="6461969">,</span>&nbsp;<span class="ident" id="6461971">numBytes</span><span class="op" id="6461979">:</span>&nbsp;<span class="num" id="6461981">3</span><span class="op" id="6461982">}</span><span class="op" id="6461983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6461988">{</span><span class="ident" id="6461989">offset</span><span class="op" id="6461995">:</span>&nbsp;<span class="num" id="6461997">6</span><span class="op" id="6461998">,</span>&nbsp;<span class="ident" id="6462000">numBytes</span><span class="op" id="6462008">:</span>&nbsp;<span class="num" id="6462010">2</span><span class="op" id="6462011">}</span><span class="op" id="6462012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462016">}</span><span class="op" id="6462017">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462021">realSize</span><span class="op" id="6462029">:</span>&nbsp;<span class="num" id="6462031">8</span><span class="op" id="6462032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462036">expected</span><span class="op" id="6462044">:</span>&nbsp;<span class="op" id="6462046">[</span><span class="op" id="6462047">]</span><span class="builtintype" id="6462048">byte</span><span class="op" id="6462052">(</span><span class="string" id="6462053">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6462072">)</span><span class="op" id="6462073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462076">}</span><span class="op" id="6462077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462084">sparseData</span><span class="op" id="6462094">:</span>&nbsp;<span class="op" id="6462096">[</span><span class="op" id="6462097">]</span><span class="builtintype" id="6462098">byte</span><span class="op" id="6462102">(</span><span class="string" id="6462103">&#34;abcde&#34;</span><span class="op" id="6462110">)</span><span class="op" id="6462111">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462115">sparseMap</span><span class="op" id="6462124">:</span>&nbsp;<span class="op" id="6462126">[</span><span class="op" id="6462127">]</span><span class="ident" id="6462128">sparseEntry</span><span class="op" id="6462139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462144">{</span><span class="ident" id="6462145">offset</span><span class="op" id="6462151">:</span>&nbsp;<span class="num" id="6462153">1</span><span class="op" id="6462154">,</span>&nbsp;<span class="ident" id="6462156">numBytes</span><span class="op" id="6462164">:</span>&nbsp;<span class="num" id="6462166">3</span><span class="op" id="6462167">}</span><span class="op" id="6462168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462173">{</span><span class="ident" id="6462174">offset</span><span class="op" id="6462180">:</span>&nbsp;<span class="num" id="6462182">6</span><span class="op" id="6462183">,</span>&nbsp;<span class="ident" id="6462185">numBytes</span><span class="op" id="6462193">:</span>&nbsp;<span class="num" id="6462195">2</span><span class="op" id="6462196">}</span><span class="op" id="6462197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462201">}</span><span class="op" id="6462202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462206">realSize</span><span class="op" id="6462214">:</span>&nbsp;<span class="num" id="6462216">10</span><span class="op" id="6462218">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462222">expected</span><span class="op" id="6462230">:</span>&nbsp;<span class="op" id="6462232">[</span><span class="op" id="6462233">]</span><span class="builtintype" id="6462234">byte</span><span class="op" id="6462238">(</span><span class="string" id="6462239">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6462266">)</span><span class="op" id="6462267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462270">}</span><span class="op" id="6462271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462278">sparseData</span><span class="op" id="6462288">:</span>&nbsp;<span class="op" id="6462290">[</span><span class="op" id="6462291">]</span><span class="builtintype" id="6462292">byte</span><span class="op" id="6462296">(</span><span class="string" id="6462297">&#34;&#34;</span><span class="op" id="6462299">)</span><span class="op" id="6462300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462304">sparseMap</span><span class="op" id="6462313">:</span>&nbsp;&nbsp;<span class="ident" id="6462316">nil</span><span class="op" id="6462319">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462323">realSize</span><span class="op" id="6462331">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6462335">2</span><span class="op" id="6462336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462340">expected</span><span class="op" id="6462348">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6462352">[</span><span class="op" id="6462353">]</span><span class="builtintype" id="6462354">byte</span><span class="op" id="6462358">(</span><span class="string" id="6462359">&#34;\x00\x00&#34;</span><span class="op" id="6462369">)</span><span class="op" id="6462370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462373">}</span><span class="op" id="6462374">,</span><br>
<span class="lineno"></span><span class="op" id="6462376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6462379">func</span>&nbsp;<span class="ident" id="6462384">TestSparseFileReader</span><span class="op" id="6462404">(</span><span class="ident" id="6462405">t</span>&nbsp;<span class="op" id="6462407">*</span><span class="ident" id="6462408">testing</span><span class="op" id="6462415">.</span><span class="ident" id="6462416">T</span><span class="op" id="6462417">)</span>&nbsp;<span class="op" id="6462419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462422">for</span>&nbsp;<span class="ident" id="6462426">i</span><span class="op" id="6462427">,</span>&nbsp;<span class="ident" id="6462429">test</span>&nbsp;<span class="op" id="6462434">:=</span>&nbsp;<span class="keyword" id="6462437">range</span>&nbsp;<span class="ident" id="6462443">sparseFileReadTests</span>&nbsp;<span class="op" id="6462463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462467">r</span>&nbsp;<span class="op" id="6462469">:=</span>&nbsp;<span class="ident" id="6462472">bytes</span><span class="op" id="6462477">.</span><span class="ident" id="6462478">NewReader</span><span class="op" id="6462487">(</span><span class="ident" id="6462488">test</span><span class="op" id="6462492">.</span><span class="ident" id="6462493">sparseData</span><span class="op" id="6462503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462507">nb</span>&nbsp;<span class="op" id="6462510">:=</span>&nbsp;<span class="ident" id="6462513">int64</span><span class="op" id="6462518">(</span><span class="ident" id="6462519">r</span><span class="op" id="6462520">.</span><span class="ident" id="6462521">Len</span><span class="op" id="6462524">(</span><span class="op" id="6462525">)</span><span class="op" id="6462526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462530">sfr</span>&nbsp;<span class="op" id="6462534">:=</span>&nbsp;<span class="op" id="6462537">&amp;</span><span class="ident" id="6462538">sparseFileReader</span><span class="op" id="6462554">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462559">rfr</span><span class="op" id="6462562">:</span>&nbsp;<span class="op" id="6462564">&amp;</span><span class="ident" id="6462565">regFileReader</span><span class="op" id="6462578">{</span><span class="ident" id="6462579">r</span><span class="op" id="6462580">:</span>&nbsp;<span class="ident" id="6462582">r</span><span class="op" id="6462583">,</span>&nbsp;<span class="ident" id="6462585">nb</span><span class="op" id="6462587">:</span>&nbsp;<span class="ident" id="6462589">nb</span><span class="op" id="6462591">}</span><span class="op" id="6462592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462597">sp</span><span class="op" id="6462599">:</span>&nbsp;&nbsp;<span class="ident" id="6462602">test</span><span class="op" id="6462606">.</span><span class="ident" id="6462607">sparseMap</span><span class="op" id="6462616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462621">pos</span><span class="op" id="6462624">:</span>&nbsp;<span class="num" id="6462626">0</span><span class="op" id="6462627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462632">tot</span><span class="op" id="6462635">:</span>&nbsp;<span class="ident" id="6462637">test</span><span class="op" id="6462641">.</span><span class="ident" id="6462642">realSize</span><span class="op" id="6462650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462654">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462658">if</span>&nbsp;<span class="ident" id="6462661">sfr</span><span class="op" id="6462664">.</span><span class="ident" id="6462665">numBytes</span><span class="op" id="6462673">(</span><span class="op" id="6462674">)</span>&nbsp;<span class="op" id="6462676">!=</span>&nbsp;<span class="ident" id="6462679">nb</span>&nbsp;<span class="op" id="6462682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462687">t</span><span class="op" id="6462688">.</span><span class="ident" id="6462689">Errorf</span><span class="op" id="6462695">(</span><span class="string" id="6462696">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6462751">,</span>&nbsp;<span class="ident" id="6462753">i</span><span class="op" id="6462754">,</span>&nbsp;<span class="ident" id="6462756">sfr</span><span class="op" id="6462759">.</span><span class="ident" id="6462760">numBytes</span><span class="op" id="6462768">(</span><span class="op" id="6462769">)</span><span class="op" id="6462770">,</span>&nbsp;<span class="ident" id="6462772">nb</span><span class="op" id="6462774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462782">buf</span><span class="op" id="6462785">,</span>&nbsp;<span class="ident" id="6462787">err</span>&nbsp;<span class="op" id="6462791">:=</span>&nbsp;<span class="ident" id="6462794">ioutil</span><span class="op" id="6462800">.</span><span class="ident" id="6462801">ReadAll</span><span class="op" id="6462808">(</span><span class="ident" id="6462809">sfr</span><span class="op" id="6462812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462816">if</span>&nbsp;<span class="ident" id="6462819">err</span>&nbsp;<span class="op" id="6462823">!=</span>&nbsp;<span class="ident" id="6462826">nil</span>&nbsp;<span class="op" id="6462830">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462835">t</span><span class="op" id="6462836">.</span><span class="ident" id="6462837">Errorf</span><span class="op" id="6462843">(</span><span class="string" id="6462844">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6462875">,</span>&nbsp;<span class="ident" id="6462877">i</span><span class="op" id="6462878">,</span>&nbsp;<span class="ident" id="6462880">err</span><span class="op" id="6462883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6462891">if</span>&nbsp;<span class="ident" id="6462894">e</span>&nbsp;<span class="op" id="6462896">:=</span>&nbsp;<span class="ident" id="6462899">test</span><span class="op" id="6462903">.</span><span class="ident" id="6462904">expected</span><span class="op" id="6462912">;</span>&nbsp;<span class="op" id="6462914">!</span><span class="ident" id="6462915">bytes</span><span class="op" id="6462920">.</span><span class="ident" id="6462921">Equal</span><span class="op" id="6462926">(</span><span class="ident" id="6462927">buf</span><span class="op" id="6462930">,</span>&nbsp;<span class="ident" id="6462932">e</span><span class="op" id="6462933">)</span>&nbsp;<span class="op" id="6462935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6462940">t</span><span class="op" id="6462941">.</span><span class="ident" id="6462942">Errorf</span><span class="op" id="6462948">(</span><span class="string" id="6462949">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6462982">,</span>&nbsp;<span class="ident" id="6462984">i</span><span class="op" id="6462985">,</span>&nbsp;<span class="ident" id="6462987">buf</span><span class="op" id="6462990">,</span>&nbsp;<span class="ident" id="6462992">e</span><span class="op" id="6462993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6462997">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463001">if</span>&nbsp;<span class="ident" id="6463004">sfr</span><span class="op" id="6463007">.</span><span class="ident" id="6463008">numBytes</span><span class="op" id="6463016">(</span><span class="op" id="6463017">)</span>&nbsp;<span class="op" id="6463019">!=</span>&nbsp;<span class="num" id="6463022">0</span>&nbsp;<span class="op" id="6463024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463029">t</span><span class="op" id="6463030">.</span><span class="ident" id="6463031">Errorf</span><span class="op" id="6463037">(</span><span class="string" id="6463038">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6463098">,</span>&nbsp;<span class="ident" id="6463100">i</span><span class="op" id="6463101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463108">}</span><br>
<span class="lineno"></span><span class="op" id="6463110">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6463113">func</span>&nbsp;<span class="ident" id="6463118">TestSparseIncrementalRead</span><span class="op" id="6463143">(</span><span class="ident" id="6463144">t</span>&nbsp;<span class="op" id="6463146">*</span><span class="ident" id="6463147">testing</span><span class="op" id="6463154">.</span><span class="ident" id="6463155">T</span><span class="op" id="6463156">)</span>&nbsp;<span class="op" id="6463158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463161">sparseMap</span>&nbsp;<span class="op" id="6463171">:=</span>&nbsp;<span class="op" id="6463174">[</span><span class="op" id="6463175">]</span><span class="ident" id="6463176">sparseEntry</span><span class="op" id="6463187">{</span><span class="op" id="6463188">{</span><span class="num" id="6463189">10</span><span class="op" id="6463191">,</span>&nbsp;<span class="num" id="6463193">2</span><span class="op" id="6463194">}</span><span class="op" id="6463195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463198">sparseData</span>&nbsp;<span class="op" id="6463209">:=</span>&nbsp;<span class="op" id="6463212">[</span><span class="op" id="6463213">]</span><span class="builtintype" id="6463214">byte</span><span class="op" id="6463218">(</span><span class="string" id="6463219">&#34;Go&#34;</span><span class="op" id="6463223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463226">expected</span>&nbsp;<span class="op" id="6463235">:=</span>&nbsp;<span class="string" id="6463238">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463317">r</span>&nbsp;<span class="op" id="6463319">:=</span>&nbsp;<span class="ident" id="6463322">bytes</span><span class="op" id="6463327">.</span><span class="ident" id="6463328">NewReader</span><span class="op" id="6463337">(</span><span class="ident" id="6463338">sparseData</span><span class="op" id="6463348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463351">nb</span>&nbsp;<span class="op" id="6463354">:=</span>&nbsp;<span class="ident" id="6463357">int64</span><span class="op" id="6463362">(</span><span class="ident" id="6463363">r</span><span class="op" id="6463364">.</span><span class="ident" id="6463365">Len</span><span class="op" id="6463368">(</span><span class="op" id="6463369">)</span><span class="op" id="6463370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463373">sfr</span>&nbsp;<span class="op" id="6463377">:=</span>&nbsp;<span class="op" id="6463380">&amp;</span><span class="ident" id="6463381">sparseFileReader</span><span class="op" id="6463397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463401">rfr</span><span class="op" id="6463404">:</span>&nbsp;<span class="op" id="6463406">&amp;</span><span class="ident" id="6463407">regFileReader</span><span class="op" id="6463420">{</span><span class="ident" id="6463421">r</span><span class="op" id="6463422">:</span>&nbsp;<span class="ident" id="6463424">r</span><span class="op" id="6463425">,</span>&nbsp;<span class="ident" id="6463427">nb</span><span class="op" id="6463429">:</span>&nbsp;<span class="ident" id="6463431">nb</span><span class="op" id="6463433">}</span><span class="op" id="6463434">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463438">sp</span><span class="op" id="6463440">:</span>&nbsp;&nbsp;<span class="ident" id="6463443">sparseMap</span><span class="op" id="6463452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463456">pos</span><span class="op" id="6463459">:</span>&nbsp;<span class="num" id="6463461">0</span><span class="op" id="6463462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463466">tot</span><span class="op" id="6463469">:</span>&nbsp;<span class="ident" id="6463471">int64</span><span class="op" id="6463476">(</span><span class="builtinfunc" id="6463477">len</span><span class="op" id="6463480">(</span><span class="ident" id="6463481">expected</span><span class="op" id="6463489">)</span><span class="op" id="6463490">)</span><span class="op" id="6463491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463498">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6463567">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463615">var</span>&nbsp;<span class="ident" id="6463619">outputBuf</span>&nbsp;<span class="ident" id="6463629">bytes</span><span class="op" id="6463634">.</span><span class="ident" id="6463635">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463643">buf</span>&nbsp;<span class="op" id="6463647">:=</span>&nbsp;<span class="builtinfunc" id="6463650">make</span><span class="op" id="6463654">(</span><span class="op" id="6463655">[</span><span class="op" id="6463656">]</span><span class="builtintype" id="6463657">byte</span><span class="op" id="6463661">,</span>&nbsp;<span class="num" id="6463663">6</span><span class="op" id="6463664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463667">for</span>&nbsp;<span class="op" id="6463671">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463675">n</span><span class="op" id="6463676">,</span>&nbsp;<span class="ident" id="6463678">err</span>&nbsp;<span class="op" id="6463682">:=</span>&nbsp;<span class="ident" id="6463685">sfr</span><span class="op" id="6463688">.</span><span class="ident" id="6463689">Read</span><span class="op" id="6463693">(</span><span class="ident" id="6463694">buf</span><span class="op" id="6463697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463701">if</span>&nbsp;<span class="ident" id="6463704">err</span>&nbsp;<span class="op" id="6463708">==</span>&nbsp;<span class="ident" id="6463711">io</span><span class="op" id="6463713">.</span><span class="ident" id="6463714">EOF</span>&nbsp;<span class="op" id="6463718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463723">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463735">if</span>&nbsp;<span class="ident" id="6463738">err</span>&nbsp;<span class="op" id="6463742">!=</span>&nbsp;<span class="ident" id="6463745">nil</span>&nbsp;<span class="op" id="6463749">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463754">t</span><span class="op" id="6463755">.</span><span class="ident" id="6463756">Errorf</span><span class="op" id="6463762">(</span><span class="string" id="6463763">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6463792">,</span>&nbsp;<span class="ident" id="6463794">err</span><span class="op" id="6463797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463805">if</span>&nbsp;<span class="ident" id="6463808">n</span>&nbsp;<span class="op" id="6463810">&gt;</span>&nbsp;<span class="num" id="6463812">0</span>&nbsp;<span class="op" id="6463814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463819">_</span><span class="op" id="6463820">,</span>&nbsp;<span class="ident" id="6463822">err</span>&nbsp;<span class="op" id="6463826">:=</span>&nbsp;<span class="ident" id="6463829">outputBuf</span><span class="op" id="6463838">.</span><span class="ident" id="6463839">Write</span><span class="op" id="6463844">(</span><span class="ident" id="6463845">buf</span><span class="op" id="6463848">[</span><span class="op" id="6463849">:</span><span class="ident" id="6463850">n</span><span class="op" id="6463851">]</span><span class="op" id="6463852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463857">if</span>&nbsp;<span class="ident" id="6463860">err</span>&nbsp;<span class="op" id="6463864">!=</span>&nbsp;<span class="ident" id="6463867">nil</span>&nbsp;<span class="op" id="6463871">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463877">t</span><span class="op" id="6463878">.</span><span class="ident" id="6463879">Errorf</span><span class="op" id="6463885">(</span><span class="string" id="6463886">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6463916">,</span>&nbsp;<span class="ident" id="6463918">err</span><span class="op" id="6463921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6463933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463936">got</span>&nbsp;<span class="op" id="6463940">:=</span>&nbsp;<span class="ident" id="6463943">outputBuf</span><span class="op" id="6463952">.</span><span class="ident" id="6463953">String</span><span class="op" id="6463959">(</span><span class="op" id="6463960">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6463963">if</span>&nbsp;<span class="ident" id="6463966">got</span>&nbsp;<span class="op" id="6463970">!=</span>&nbsp;<span class="ident" id="6463973">expected</span>&nbsp;<span class="op" id="6463982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6463986">t</span><span class="op" id="6463987">.</span><span class="ident" id="6463988">Errorf</span><span class="op" id="6463994">(</span><span class="string" id="6463995">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6464019">,</span>&nbsp;<span class="ident" id="6464021">got</span><span class="op" id="6464024">,</span>&nbsp;<span class="ident" id="6464026">expected</span><span class="op" id="6464034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464037">}</span><br>
<span class="lineno"></span><span class="op" id="6464039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6464042">func</span>&nbsp;<span class="ident" id="6464047">TestReadGNUSparseMap0x1</span><span class="op" id="6464070">(</span><span class="ident" id="6464071">t</span>&nbsp;<span class="op" id="6464073">*</span><span class="ident" id="6464074">testing</span><span class="op" id="6464081">.</span><span class="ident" id="6464082">T</span><span class="op" id="6464083">)</span>&nbsp;<span class="op" id="6464085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464088">headers</span>&nbsp;<span class="op" id="6464096">:=</span>&nbsp;<span class="keyword" id="6464099">map</span><span class="op" id="6464102">[</span><span class="builtintype" id="6464103">string</span><span class="op" id="6464109">]</span><span class="builtintype" id="6464110">string</span><span class="op" id="6464116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464120">paxGNUSparseNumBlocks</span><span class="op" id="6464141">:</span>&nbsp;<span class="string" id="6464143">&#34;4&#34;</span><span class="op" id="6464146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464150">paxGNUSparseMap</span><span class="op" id="6464165">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6464173">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6464193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464196">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464199">expected</span>&nbsp;<span class="op" id="6464208">:=</span>&nbsp;<span class="op" id="6464211">[</span><span class="op" id="6464212">]</span><span class="ident" id="6464213">sparseEntry</span><span class="op" id="6464224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464228">{</span><span class="ident" id="6464229">offset</span><span class="op" id="6464235">:</span>&nbsp;<span class="num" id="6464237">0</span><span class="op" id="6464238">,</span>&nbsp;<span class="ident" id="6464240">numBytes</span><span class="op" id="6464248">:</span>&nbsp;<span class="num" id="6464250">5</span><span class="op" id="6464251">}</span><span class="op" id="6464252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464256">{</span><span class="ident" id="6464257">offset</span><span class="op" id="6464263">:</span>&nbsp;<span class="num" id="6464265">10</span><span class="op" id="6464267">,</span>&nbsp;<span class="ident" id="6464269">numBytes</span><span class="op" id="6464277">:</span>&nbsp;<span class="num" id="6464279">5</span><span class="op" id="6464280">}</span><span class="op" id="6464281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464285">{</span><span class="ident" id="6464286">offset</span><span class="op" id="6464292">:</span>&nbsp;<span class="num" id="6464294">20</span><span class="op" id="6464296">,</span>&nbsp;<span class="ident" id="6464298">numBytes</span><span class="op" id="6464306">:</span>&nbsp;<span class="num" id="6464308">5</span><span class="op" id="6464309">}</span><span class="op" id="6464310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464314">{</span><span class="ident" id="6464315">offset</span><span class="op" id="6464321">:</span>&nbsp;<span class="num" id="6464323">30</span><span class="op" id="6464325">,</span>&nbsp;<span class="ident" id="6464327">numBytes</span><span class="op" id="6464335">:</span>&nbsp;<span class="num" id="6464337">5</span><span class="op" id="6464338">}</span><span class="op" id="6464339">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464346">sp</span><span class="op" id="6464348">,</span>&nbsp;<span class="ident" id="6464350">err</span>&nbsp;<span class="op" id="6464354">:=</span>&nbsp;<span class="ident" id="6464357">readGNUSparseMap0x1</span><span class="op" id="6464376">(</span><span class="ident" id="6464377">headers</span><span class="op" id="6464384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464387">if</span>&nbsp;<span class="ident" id="6464390">err</span>&nbsp;<span class="op" id="6464394">!=</span>&nbsp;<span class="ident" id="6464397">nil</span>&nbsp;<span class="op" id="6464401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464405">t</span><span class="op" id="6464406">.</span><span class="ident" id="6464407">Errorf</span><span class="op" id="6464413">(</span><span class="string" id="6464414">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6464436">,</span>&nbsp;<span class="ident" id="6464438">err</span><span class="op" id="6464441">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464447">if</span>&nbsp;<span class="op" id="6464450">!</span><span class="ident" id="6464451">reflect</span><span class="op" id="6464458">.</span><span class="ident" id="6464459">DeepEqual</span><span class="op" id="6464468">(</span><span class="ident" id="6464469">sp</span><span class="op" id="6464471">,</span>&nbsp;<span class="ident" id="6464473">expected</span><span class="op" id="6464481">)</span>&nbsp;<span class="op" id="6464483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464487">t</span><span class="op" id="6464488">.</span><span class="ident" id="6464489">Errorf</span><span class="op" id="6464495">(</span><span class="string" id="6464496">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6464537">,</span>&nbsp;<span class="ident" id="6464539">sp</span><span class="op" id="6464541">,</span>&nbsp;<span class="ident" id="6464543">expected</span><span class="op" id="6464551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6464554">}</span><br>
<span class="lineno"></span><span class="op" id="6464556">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6464559">func</span>&nbsp;<span class="ident" id="6464564">TestReadGNUSparseMap1x0</span><span class="op" id="6464587">(</span><span class="ident" id="6464588">t</span>&nbsp;<span class="op" id="6464590">*</span><span class="ident" id="6464591">testing</span><span class="op" id="6464598">.</span><span class="ident" id="6464599">T</span><span class="op" id="6464600">)</span>&nbsp;<span class="op" id="6464602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6464605">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464689">numEntries</span>&nbsp;<span class="op" id="6464700">:=</span>&nbsp;<span class="num" id="6464703">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464708">expected</span>&nbsp;<span class="op" id="6464717">:=</span>&nbsp;<span class="builtinfunc" id="6464720">make</span><span class="op" id="6464724">(</span><span class="op" id="6464725">[</span><span class="op" id="6464726">]</span><span class="ident" id="6464727">sparseEntry</span><span class="op" id="6464738">,</span>&nbsp;<span class="num" id="6464740">0</span><span class="op" id="6464741">,</span>&nbsp;<span class="ident" id="6464743">numEntries</span><span class="op" id="6464753">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464756">sparseMap</span>&nbsp;<span class="op" id="6464766">:=</span>&nbsp;<span class="builtinfunc" id="6464769">new</span><span class="op" id="6464772">(</span><span class="ident" id="6464773">bytes</span><span class="op" id="6464778">.</span><span class="ident" id="6464779">Buffer</span><span class="op" id="6464785">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464789">fmt</span><span class="op" id="6464792">.</span><span class="ident" id="6464793">Fprintf</span><span class="op" id="6464800">(</span><span class="ident" id="6464801">sparseMap</span><span class="op" id="6464810">,</span>&nbsp;<span class="string" id="6464812">&#34;%d\n&#34;</span><span class="op" id="6464818">,</span>&nbsp;<span class="ident" id="6464820">numEntries</span><span class="op" id="6464830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6464833">for</span>&nbsp;<span class="ident" id="6464837">i</span>&nbsp;<span class="op" id="6464839">:=</span>&nbsp;<span class="num" id="6464842">0</span><span class="op" id="6464843">;</span>&nbsp;<span class="ident" id="6464845">i</span>&nbsp;<span class="op" id="6464847">&lt;</span>&nbsp;<span class="ident" id="6464849">numEntries</span><span class="op" id="6464859">;</span>&nbsp;<span class="ident" id="6464861">i</span><span class="op" id="6464862">++</span>&nbsp;<span class="op" id="6464865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464869">offset</span>&nbsp;<span class="op" id="6464876">:=</span>&nbsp;<span class="ident" id="6464879">int64</span><span class="op" id="6464884">(</span><span class="num" id="6464885">2048</span>&nbsp;<span class="op" id="6464890">*</span>&nbsp;<span class="ident" id="6464892">i</span><span class="op" id="6464893">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464897">numBytes</span>&nbsp;<span class="op" id="6464906">:=</span>&nbsp;<span class="ident" id="6464909">int64</span><span class="op" id="6464914">(</span><span class="num" id="6464915">1024</span><span class="op" id="6464919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6464923">expected</span>&nbsp;<span class="op" id="6464932">=</span>&nbsp;<span class="builtinfunc" id="6464934">append</span><span class="op" id="6464940">(</span><span class="ident" id="6464941">expected</span><span class="op" id="6464949">,</span>&nbsp;<span class="ident" id="6464951">sparseEntry</span><span class="op" id="6464962">{</span><span class="ident" id="6464963">offset</span><span class="op" id="6464969">:</span>&nbsp;<span class="ident" id="6464971">offset</span><span class="op" id="6464977">,</span>&nbsp;<span class="ident" id="6464979">numBytes</span><span class="op" id="6464987">:</span>&nbsp;<span class="ident" id="6464989">numBytes</span><span class="op" id="6464997">}</span><span class="op" id="6464998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465002">fmt</span><span class="op" id="6465005">.</span><span class="ident" id="6465006">Fprintf</span><span class="op" id="6465013">(</span><span class="ident" id="6465014">sparseMap</span><span class="op" id="6465023">,</span>&nbsp;<span class="string" id="6465025">&#34;%d\n%d\n&#34;</span><span class="op" id="6465035">,</span>&nbsp;<span class="ident" id="6465037">offset</span><span class="op" id="6465043">,</span>&nbsp;<span class="ident" id="6465045">numBytes</span><span class="op" id="6465053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6465060">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465139">headerBlocks</span>&nbsp;<span class="op" id="6465152">:=</span>&nbsp;<span class="op" id="6465155">(</span><span class="ident" id="6465156">sparseMap</span><span class="op" id="6465165">.</span><span class="ident" id="6465166">Len</span><span class="op" id="6465169">(</span><span class="op" id="6465170">)</span>&nbsp;<span class="op" id="6465172">+</span>&nbsp;<span class="ident" id="6465174">blockSize</span>&nbsp;<span class="op" id="6465184">-</span>&nbsp;<span class="num" id="6465186">1</span><span class="op" id="6465187">)</span>&nbsp;<span class="op" id="6465189">/</span>&nbsp;<span class="ident" id="6465191">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465202">bufLen</span>&nbsp;<span class="op" id="6465209">:=</span>&nbsp;<span class="ident" id="6465212">blockSize</span>&nbsp;<span class="op" id="6465222">*</span>&nbsp;<span class="ident" id="6465224">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465238">buf</span>&nbsp;<span class="op" id="6465242">:=</span>&nbsp;<span class="builtinfunc" id="6465245">make</span><span class="op" id="6465249">(</span><span class="op" id="6465250">[</span><span class="op" id="6465251">]</span><span class="builtintype" id="6465252">byte</span><span class="op" id="6465256">,</span>&nbsp;<span class="ident" id="6465258">bufLen</span><span class="op" id="6465264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6465267">copy</span><span class="op" id="6465271">(</span><span class="ident" id="6465272">buf</span><span class="op" id="6465275">,</span>&nbsp;<span class="ident" id="6465277">sparseMap</span><span class="op" id="6465286">.</span><span class="ident" id="6465287">Bytes</span><span class="op" id="6465292">(</span><span class="op" id="6465293">)</span><span class="op" id="6465294">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6465298">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465339">r</span>&nbsp;<span class="op" id="6465341">:=</span>&nbsp;<span class="ident" id="6465344">bytes</span><span class="op" id="6465349">.</span><span class="ident" id="6465350">NewReader</span><span class="op" id="6465359">(</span><span class="ident" id="6465360">buf</span><span class="op" id="6465363">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6465367">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465391">sp</span><span class="op" id="6465393">,</span>&nbsp;<span class="ident" id="6465395">err</span>&nbsp;<span class="op" id="6465399">:=</span>&nbsp;<span class="ident" id="6465402">readGNUSparseMap1x0</span><span class="op" id="6465421">(</span><span class="ident" id="6465422">r</span><span class="op" id="6465423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465426">if</span>&nbsp;<span class="ident" id="6465429">err</span>&nbsp;<span class="op" id="6465433">!=</span>&nbsp;<span class="ident" id="6465436">nil</span>&nbsp;<span class="op" id="6465440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465444">t</span><span class="op" id="6465445">.</span><span class="ident" id="6465446">Errorf</span><span class="op" id="6465452">(</span><span class="string" id="6465453">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6465475">,</span>&nbsp;<span class="ident" id="6465477">err</span><span class="op" id="6465480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465486">if</span>&nbsp;<span class="op" id="6465489">!</span><span class="ident" id="6465490">reflect</span><span class="op" id="6465497">.</span><span class="ident" id="6465498">DeepEqual</span><span class="op" id="6465507">(</span><span class="ident" id="6465508">sp</span><span class="op" id="6465510">,</span>&nbsp;<span class="ident" id="6465512">expected</span><span class="op" id="6465520">)</span>&nbsp;<span class="op" id="6465522">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465526">t</span><span class="op" id="6465527">.</span><span class="ident" id="6465528">Errorf</span><span class="op" id="6465534">(</span><span class="string" id="6465535">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6465576">,</span>&nbsp;<span class="ident" id="6465578">sp</span><span class="op" id="6465580">,</span>&nbsp;<span class="ident" id="6465582">expected</span><span class="op" id="6465590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465593">}</span><br>
<span class="lineno"></span><span class="op" id="6465595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6465598">func</span>&nbsp;<span class="ident" id="6465603">TestUninitializedRead</span><span class="op" id="6465624">(</span><span class="ident" id="6465625">t</span>&nbsp;<span class="op" id="6465627">*</span><span class="ident" id="6465628">testing</span><span class="op" id="6465635">.</span><span class="ident" id="6465636">T</span><span class="op" id="6465637">)</span>&nbsp;<span class="op" id="6465639">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465642">test</span>&nbsp;<span class="op" id="6465647">:=</span>&nbsp;<span class="ident" id="6465650">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465662">f</span><span class="op" id="6465663">,</span>&nbsp;<span class="ident" id="6465665">err</span>&nbsp;<span class="op" id="6465669">:=</span>&nbsp;<span class="ident" id="6465672">os</span><span class="op" id="6465674">.</span><span class="ident" id="6465675">Open</span><span class="op" id="6465679">(</span><span class="ident" id="6465680">test</span><span class="op" id="6465684">.</span><span class="ident" id="6465685">file</span><span class="op" id="6465689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465692">if</span>&nbsp;<span class="ident" id="6465695">err</span>&nbsp;<span class="op" id="6465699">!=</span>&nbsp;<span class="ident" id="6465702">nil</span>&nbsp;<span class="op" id="6465706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465710">t</span><span class="op" id="6465711">.</span><span class="ident" id="6465712">Fatalf</span><span class="op" id="6465718">(</span><span class="string" id="6465719">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6465741">,</span>&nbsp;<span class="ident" id="6465743">err</span><span class="op" id="6465746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465749">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465752">defer</span>&nbsp;<span class="ident" id="6465758">f</span><span class="op" id="6465759">.</span><span class="ident" id="6465760">Close</span><span class="op" id="6465765">(</span><span class="op" id="6465766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465770">tr</span>&nbsp;<span class="op" id="6465773">:=</span>&nbsp;<span class="ident" id="6465776">NewReader</span><span class="op" id="6465785">(</span><span class="ident" id="6465786">f</span><span class="op" id="6465787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465790">_</span><span class="op" id="6465791">,</span>&nbsp;<span class="ident" id="6465793">err</span>&nbsp;<span class="op" id="6465797">=</span>&nbsp;<span class="ident" id="6465799">tr</span><span class="op" id="6465801">.</span><span class="ident" id="6465802">Read</span><span class="op" id="6465806">(</span><span class="op" id="6465807">[</span><span class="op" id="6465808">]</span><span class="builtintype" id="6465809">byte</span><span class="op" id="6465813">{</span><span class="op" id="6465814">}</span><span class="op" id="6465815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6465818">if</span>&nbsp;<span class="ident" id="6465821">err</span>&nbsp;<span class="op" id="6465825">==</span>&nbsp;<span class="ident" id="6465828">nil</span>&nbsp;<span class="op" id="6465832">||</span>&nbsp;<span class="ident" id="6465835">err</span>&nbsp;<span class="op" id="6465839">!=</span>&nbsp;<span class="ident" id="6465842">io</span><span class="op" id="6465844">.</span><span class="ident" id="6465845">EOF</span>&nbsp;<span class="op" id="6465849">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465853">t</span><span class="op" id="6465854">.</span><span class="ident" id="6465855">Errorf</span><span class="op" id="6465861">(</span><span class="string" id="6465862">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6465895">,</span>&nbsp;<span class="ident" id="6465897">err</span><span class="op" id="6465900">,</span>&nbsp;<span class="ident" id="6465902">io</span><span class="op" id="6465904">.</span><span class="ident" id="6465905">EOF</span><span class="op" id="6465908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6465911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6465914">}</span>
</div>
</body>
</html>
