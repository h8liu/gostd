<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html" class="current">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7660905">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7660960">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7661014">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7661065">package</span>&nbsp;<span class="ident" id="7661073">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7661081">import</span>&nbsp;<span class="op" id="7661088">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661091">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661100">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661113">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661125">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661138">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7661149">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7661159">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7661162">const</span>&nbsp;<span class="ident" id="7661168">testfile</span>&nbsp;<span class="op" id="7661177">=</span>&nbsp;<span class="string" id="7661179">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7661197">func</span>&nbsp;<span class="ident" id="7661202">diff</span><span class="op" id="7661206">(</span><span class="ident" id="7661207">t</span>&nbsp;<span class="op" id="7661209">*</span><span class="ident" id="7661210">testing</span><span class="op" id="7661217">.</span><span class="ident" id="7661218">T</span><span class="op" id="7661219">,</span>&nbsp;<span class="ident" id="7661221">dst</span><span class="op" id="7661224">,</span>&nbsp;<span class="ident" id="7661226">src</span>&nbsp;<span class="op" id="7661230">[</span><span class="op" id="7661231">]</span><span class="builtintype" id="7661232">byte</span><span class="op" id="7661236">)</span>&nbsp;<span class="op" id="7661238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661241">line</span>&nbsp;<span class="op" id="7661246">:=</span>&nbsp;<span class="num" id="7661249">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661252">offs</span>&nbsp;<span class="op" id="7661257">:=</span>&nbsp;<span class="num" id="7661260">0</span>&nbsp;<span class="comment" id="7661262">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661278">for</span>&nbsp;<span class="ident" id="7661282">i</span>&nbsp;<span class="op" id="7661284">:=</span>&nbsp;<span class="num" id="7661287">0</span><span class="op" id="7661288">;</span>&nbsp;<span class="ident" id="7661290">i</span>&nbsp;<span class="op" id="7661292">&lt;</span>&nbsp;<span class="builtinfunc" id="7661294">len</span><span class="op" id="7661297">(</span><span class="ident" id="7661298">dst</span><span class="op" id="7661301">)</span>&nbsp;<span class="op" id="7661303">&amp;&amp;</span>&nbsp;<span class="ident" id="7661306">i</span>&nbsp;<span class="op" id="7661308">&lt;</span>&nbsp;<span class="builtinfunc" id="7661310">len</span><span class="op" id="7661313">(</span><span class="ident" id="7661314">src</span><span class="op" id="7661317">)</span><span class="op" id="7661318">;</span>&nbsp;<span class="ident" id="7661320">i</span><span class="op" id="7661321">++</span>&nbsp;<span class="op" id="7661324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661328">d</span>&nbsp;<span class="op" id="7661330">:=</span>&nbsp;<span class="ident" id="7661333">dst</span><span class="op" id="7661336">[</span><span class="ident" id="7661337">i</span><span class="op" id="7661338">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661342">s</span>&nbsp;<span class="op" id="7661344">:=</span>&nbsp;<span class="ident" id="7661347">src</span><span class="op" id="7661350">[</span><span class="ident" id="7661351">i</span><span class="op" id="7661352">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661356">if</span>&nbsp;<span class="ident" id="7661359">d</span>&nbsp;<span class="op" id="7661361">!=</span>&nbsp;<span class="ident" id="7661364">s</span>&nbsp;<span class="op" id="7661366">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661371">t</span><span class="op" id="7661372">.</span><span class="ident" id="7661373">Errorf</span><span class="op" id="7661379">(</span><span class="string" id="7661380">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="7661394">,</span>&nbsp;<span class="ident" id="7661396">line</span><span class="op" id="7661400">,</span>&nbsp;<span class="ident" id="7661402">dst</span><span class="op" id="7661405">[</span><span class="ident" id="7661406">offs</span><span class="op" id="7661410">:</span><span class="ident" id="7661411">i</span><span class="op" id="7661412">+</span><span class="num" id="7661413">1</span><span class="op" id="7661414">]</span><span class="op" id="7661415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661420">t</span><span class="op" id="7661421">.</span><span class="ident" id="7661422">Errorf</span><span class="op" id="7661428">(</span><span class="string" id="7661429">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="7661443">,</span>&nbsp;<span class="ident" id="7661445">line</span><span class="op" id="7661449">,</span>&nbsp;<span class="ident" id="7661451">src</span><span class="op" id="7661454">[</span><span class="ident" id="7661455">offs</span><span class="op" id="7661459">:</span><span class="ident" id="7661460">i</span><span class="op" id="7661461">+</span><span class="num" id="7661462">1</span><span class="op" id="7661463">]</span><span class="op" id="7661464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661469">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661482">if</span>&nbsp;<span class="ident" id="7661485">s</span>&nbsp;<span class="op" id="7661487">==</span>&nbsp;<span class="string" id="7661490">&#39;\n&#39;</span>&nbsp;<span class="op" id="7661495">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661500">line</span><span class="op" id="7661504">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661510">offs</span>&nbsp;<span class="op" id="7661515">=</span>&nbsp;<span class="ident" id="7661517">i</span>&nbsp;<span class="op" id="7661519">+</span>&nbsp;<span class="num" id="7661521">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661531">if</span>&nbsp;<span class="builtinfunc" id="7661534">len</span><span class="op" id="7661537">(</span><span class="ident" id="7661538">dst</span><span class="op" id="7661541">)</span>&nbsp;<span class="op" id="7661543">!=</span>&nbsp;<span class="builtinfunc" id="7661546">len</span><span class="op" id="7661549">(</span><span class="ident" id="7661550">src</span><span class="op" id="7661553">)</span>&nbsp;<span class="op" id="7661555">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661559">t</span><span class="op" id="7661560">.</span><span class="ident" id="7661561">Errorf</span><span class="op" id="7661567">(</span><span class="string" id="7661568">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="7661608">,</span>&nbsp;<span class="builtinfunc" id="7661610">len</span><span class="op" id="7661613">(</span><span class="ident" id="7661614">dst</span><span class="op" id="7661617">)</span><span class="op" id="7661618">,</span>&nbsp;<span class="builtinfunc" id="7661620">len</span><span class="op" id="7661623">(</span><span class="ident" id="7661624">src</span><span class="op" id="7661627">)</span><span class="op" id="7661628">,</span>&nbsp;<span class="ident" id="7661630">src</span><span class="op" id="7661633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661636">}</span><br>
<span class="lineno"></span><span class="op" id="7661638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7661641">func</span>&nbsp;<span class="ident" id="7661646">TestNode</span><span class="op" id="7661654">(</span><span class="ident" id="7661655">t</span>&nbsp;<span class="op" id="7661657">*</span><span class="ident" id="7661658">testing</span><span class="op" id="7661665">.</span><span class="ident" id="7661666">T</span><span class="op" id="7661667">)</span>&nbsp;<span class="op" id="7661669">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661672">src</span><span class="op" id="7661675">,</span>&nbsp;<span class="ident" id="7661677">err</span>&nbsp;<span class="op" id="7661681">:=</span>&nbsp;<span class="ident" id="7661684">ioutil</span><span class="op" id="7661690">.</span><span class="ident" id="7661691">ReadFile</span><span class="op" id="7661699">(</span><span class="ident" id="7661700">testfile</span><span class="op" id="7661708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661711">if</span>&nbsp;<span class="ident" id="7661714">err</span>&nbsp;<span class="op" id="7661718">!=</span>&nbsp;<span class="builtintype" id="7661721">nil</span>&nbsp;<span class="op" id="7661725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661729">t</span><span class="op" id="7661730">.</span><span class="ident" id="7661731">Fatal</span><span class="op" id="7661736">(</span><span class="ident" id="7661737">err</span><span class="op" id="7661740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661747">fset</span>&nbsp;<span class="op" id="7661752">:=</span>&nbsp;<span class="ident" id="7661755">token</span><span class="op" id="7661760">.</span><span class="ident" id="7661761">NewFileSet</span><span class="op" id="7661771">(</span><span class="op" id="7661772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661775">file</span><span class="op" id="7661779">,</span>&nbsp;<span class="ident" id="7661781">err</span>&nbsp;<span class="op" id="7661785">:=</span>&nbsp;<span class="ident" id="7661788">parser</span><span class="op" id="7661794">.</span><span class="ident" id="7661795">ParseFile</span><span class="op" id="7661804">(</span><span class="ident" id="7661805">fset</span><span class="op" id="7661809">,</span>&nbsp;<span class="ident" id="7661811">testfile</span><span class="op" id="7661819">,</span>&nbsp;<span class="ident" id="7661821">src</span><span class="op" id="7661824">,</span>&nbsp;<span class="ident" id="7661826">parser</span><span class="op" id="7661832">.</span><span class="ident" id="7661833">ParseComments</span><span class="op" id="7661846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661849">if</span>&nbsp;<span class="ident" id="7661852">err</span>&nbsp;<span class="op" id="7661856">!=</span>&nbsp;<span class="builtintype" id="7661859">nil</span>&nbsp;<span class="op" id="7661863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661867">t</span><span class="op" id="7661868">.</span><span class="ident" id="7661869">Fatal</span><span class="op" id="7661874">(</span><span class="ident" id="7661875">err</span><span class="op" id="7661878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661881">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661885">var</span>&nbsp;<span class="ident" id="7661889">buf</span>&nbsp;<span class="ident" id="7661893">bytes</span><span class="op" id="7661898">.</span><span class="ident" id="7661899">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7661908">if</span>&nbsp;<span class="ident" id="7661911">err</span>&nbsp;<span class="op" id="7661915">=</span>&nbsp;<span class="ident" id="7661917">Node</span><span class="op" id="7661921">(</span><span class="op" id="7661922">&amp;</span><span class="ident" id="7661923">buf</span><span class="op" id="7661926">,</span>&nbsp;<span class="ident" id="7661928">fset</span><span class="op" id="7661932">,</span>&nbsp;<span class="ident" id="7661934">file</span><span class="op" id="7661938">)</span><span class="op" id="7661939">;</span>&nbsp;<span class="ident" id="7661941">err</span>&nbsp;<span class="op" id="7661945">!=</span>&nbsp;<span class="builtintype" id="7661948">nil</span>&nbsp;<span class="op" id="7661952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661956">t</span><span class="op" id="7661957">.</span><span class="ident" id="7661958">Fatal</span><span class="op" id="7661963">(</span><span class="string" id="7661964">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="7661978">,</span>&nbsp;<span class="ident" id="7661980">err</span><span class="op" id="7661983">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7661986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7661990">diff</span><span class="op" id="7661994">(</span><span class="ident" id="7661995">t</span><span class="op" id="7661996">,</span>&nbsp;<span class="ident" id="7661998">buf</span><span class="op" id="7662001">.</span><span class="ident" id="7662002">Bytes</span><span class="op" id="7662007">(</span><span class="op" id="7662008">)</span><span class="op" id="7662009">,</span>&nbsp;<span class="ident" id="7662011">src</span><span class="op" id="7662014">)</span><br>
<span class="lineno"></span><span class="op" id="7662016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7662019">func</span>&nbsp;<span class="ident" id="7662024">TestSource</span><span class="op" id="7662034">(</span><span class="ident" id="7662035">t</span>&nbsp;<span class="op" id="7662037">*</span><span class="ident" id="7662038">testing</span><span class="op" id="7662045">.</span><span class="ident" id="7662046">T</span><span class="op" id="7662047">)</span>&nbsp;<span class="op" id="7662049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7662052">src</span><span class="op" id="7662055">,</span>&nbsp;<span class="ident" id="7662057">err</span>&nbsp;<span class="op" id="7662061">:=</span>&nbsp;<span class="ident" id="7662064">ioutil</span><span class="op" id="7662070">.</span><span class="ident" id="7662071">ReadFile</span><span class="op" id="7662079">(</span><span class="ident" id="7662080">testfile</span><span class="op" id="7662088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7662091">if</span>&nbsp;<span class="ident" id="7662094">err</span>&nbsp;<span class="op" id="7662098">!=</span>&nbsp;<span class="builtintype" id="7662101">nil</span>&nbsp;<span class="op" id="7662105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7662109">t</span><span class="op" id="7662110">.</span><span class="ident" id="7662111">Fatal</span><span class="op" id="7662116">(</span><span class="ident" id="7662117">err</span><span class="op" id="7662120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7662123">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7662127">res</span><span class="op" id="7662130">,</span>&nbsp;<span class="ident" id="7662132">err</span>&nbsp;<span class="op" id="7662136">:=</span>&nbsp;<span class="ident" id="7662139">Source</span><span class="op" id="7662145">(</span><span class="ident" id="7662146">src</span><span class="op" id="7662149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7662152">if</span>&nbsp;<span class="ident" id="7662155">err</span>&nbsp;<span class="op" id="7662159">!=</span>&nbsp;<span class="builtintype" id="7662162">nil</span>&nbsp;<span class="op" id="7662166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7662170">t</span><span class="op" id="7662171">.</span><span class="ident" id="7662172">Fatal</span><span class="op" id="7662177">(</span><span class="string" id="7662178">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="7662194">,</span>&nbsp;<span class="ident" id="7662196">err</span><span class="op" id="7662199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7662202">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7662206">diff</span><span class="op" id="7662210">(</span><span class="ident" id="7662211">t</span><span class="op" id="7662212">,</span>&nbsp;<span class="ident" id="7662214">res</span><span class="op" id="7662217">,</span>&nbsp;<span class="ident" id="7662219">src</span><span class="op" id="7662222">)</span><br>
<span class="lineno"></span><span class="op" id="7662224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7662227">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="7662301">var</span>&nbsp;<span class="ident" id="7662305">tests</span>&nbsp;<span class="op" id="7662311">=</span>&nbsp;<span class="op" id="7662313">[</span><span class="op" id="7662314">]</span><span class="builtintype" id="7662315">string</span><span class="op" id="7662321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662324">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662346">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="7662366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662369">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="7662380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662383">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="7662413">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662417">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662437">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="7662445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662448">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="7662484">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662488">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662532">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="7662552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662555">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7662581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662584">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7662620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662623">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="7662667">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662670">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="7662727">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662733">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662777">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="7662838">,</span>&nbsp;<span class="comment" id="7662840">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662887">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662900">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="7662922">,</span>&nbsp;<span class="comment" id="7662924">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7662941">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662964">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="7662978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7662981">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="7662995">,</span><br>
<span class="lineno"></span><span class="op" id="7662997">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="7663000">func</span>&nbsp;<span class="ident" id="7663005">String</span><span class="op" id="7663011">(</span><span class="ident" id="7663012">s</span>&nbsp;<span class="builtintype" id="7663014">string</span><span class="op" id="7663020">)</span>&nbsp;<span class="op" id="7663022">(</span><span class="builtintype" id="7663023">string</span><span class="op" id="7663029">,</span>&nbsp;<span class="builtintype" id="7663031">error</span><span class="op" id="7663036">)</span>&nbsp;<span class="op" id="7663038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663041">res</span><span class="op" id="7663044">,</span>&nbsp;<span class="ident" id="7663046">err</span>&nbsp;<span class="op" id="7663050">:=</span>&nbsp;<span class="ident" id="7663053">Source</span><span class="op" id="7663059">(</span><span class="op" id="7663060">[</span><span class="op" id="7663061">]</span><span class="builtintype" id="7663062">byte</span><span class="op" id="7663066">(</span><span class="ident" id="7663067">s</span><span class="op" id="7663068">)</span><span class="op" id="7663069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663072">if</span>&nbsp;<span class="ident" id="7663075">err</span>&nbsp;<span class="op" id="7663079">!=</span>&nbsp;<span class="builtintype" id="7663082">nil</span>&nbsp;<span class="op" id="7663086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663090">return</span>&nbsp;<span class="string" id="7663097">&#34;&#34;</span><span class="op" id="7663099">,</span>&nbsp;<span class="ident" id="7663101">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663109">return</span>&nbsp;<span class="builtintype" id="7663116">string</span><span class="op" id="7663122">(</span><span class="ident" id="7663123">res</span><span class="op" id="7663126">)</span><span class="op" id="7663127">,</span>&nbsp;<span class="builtintype" id="7663129">nil</span><br>
<span class="lineno"></span><span class="op" id="7663133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7663136">func</span>&nbsp;<span class="ident" id="7663141">TestPartial</span><span class="op" id="7663152">(</span><span class="ident" id="7663153">t</span>&nbsp;<span class="op" id="7663155">*</span><span class="ident" id="7663156">testing</span><span class="op" id="7663163">.</span><span class="ident" id="7663164">T</span><span class="op" id="7663165">)</span>&nbsp;<span class="op" id="7663167">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663170">for</span>&nbsp;<span class="ident" id="7663174">_</span><span class="op" id="7663175">,</span>&nbsp;<span class="ident" id="7663177">src</span>&nbsp;<span class="op" id="7663181">:=</span>&nbsp;<span class="keyword" id="7663184">range</span>&nbsp;<span class="ident" id="7663190">tests</span>&nbsp;<span class="op" id="7663196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663200">if</span>&nbsp;<span class="ident" id="7663203">strings</span><span class="op" id="7663210">.</span><span class="ident" id="7663211">HasPrefix</span><span class="op" id="7663220">(</span><span class="ident" id="7663221">src</span><span class="op" id="7663224">,</span>&nbsp;<span class="string" id="7663226">&#34;ERROR&#34;</span><span class="op" id="7663233">)</span>&nbsp;<span class="op" id="7663235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7663240">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663268">src</span>&nbsp;<span class="op" id="7663272">=</span>&nbsp;<span class="ident" id="7663274">src</span><span class="op" id="7663277">[</span><span class="num" id="7663278">5</span><span class="op" id="7663279">:</span><span class="op" id="7663280">]</span>&nbsp;<span class="comment" id="7663282">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663308">res</span><span class="op" id="7663311">,</span>&nbsp;<span class="ident" id="7663313">err</span>&nbsp;<span class="op" id="7663317">:=</span>&nbsp;<span class="ident" id="7663320">String</span><span class="op" id="7663326">(</span><span class="ident" id="7663327">src</span><span class="op" id="7663330">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663335">if</span>&nbsp;<span class="ident" id="7663338">err</span>&nbsp;<span class="op" id="7663342">==</span>&nbsp;<span class="builtintype" id="7663345">nil</span>&nbsp;<span class="op" id="7663349">&amp;&amp;</span>&nbsp;<span class="ident" id="7663352">res</span>&nbsp;<span class="op" id="7663356">==</span>&nbsp;<span class="ident" id="7663359">src</span>&nbsp;<span class="op" id="7663363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663369">t</span><span class="op" id="7663370">.</span><span class="ident" id="7663371">Errorf</span><span class="op" id="7663377">(</span><span class="string" id="7663378">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="7663430">,</span>&nbsp;<span class="ident" id="7663432">src</span><span class="op" id="7663435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663444">}</span>&nbsp;<span class="keyword" id="7663446">else</span>&nbsp;<span class="op" id="7663451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7663456">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663487">res</span><span class="op" id="7663490">,</span>&nbsp;<span class="ident" id="7663492">err</span>&nbsp;<span class="op" id="7663496">:=</span>&nbsp;<span class="ident" id="7663499">String</span><span class="op" id="7663505">(</span><span class="ident" id="7663506">src</span><span class="op" id="7663509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7663514">if</span>&nbsp;<span class="ident" id="7663517">err</span>&nbsp;<span class="op" id="7663521">!=</span>&nbsp;<span class="builtintype" id="7663524">nil</span>&nbsp;<span class="op" id="7663528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663534">t</span><span class="op" id="7663535">.</span><span class="ident" id="7663536">Errorf</span><span class="op" id="7663542">(</span><span class="string" id="7663543">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="7663572">,</span>&nbsp;<span class="ident" id="7663574">err</span><span class="op" id="7663577">,</span>&nbsp;<span class="ident" id="7663579">src</span><span class="op" id="7663582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663587">}</span>&nbsp;<span class="keyword" id="7663589">else</span>&nbsp;<span class="keyword" id="7663594">if</span>&nbsp;<span class="ident" id="7663597">res</span>&nbsp;<span class="op" id="7663601">!=</span>&nbsp;<span class="ident" id="7663604">src</span>&nbsp;<span class="op" id="7663608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7663614">t</span><span class="op" id="7663615">.</span><span class="ident" id="7663616">Errorf</span><span class="op" id="7663622">(</span><span class="string" id="7663623">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="7663670">,</span>&nbsp;<span class="ident" id="7663672">src</span><span class="op" id="7663675">,</span>&nbsp;<span class="ident" id="7663677">res</span><span class="op" id="7663680">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7663692">}</span><br>
<span class="lineno"></span><span class="op" id="7663694">}</span>
</div>
</body>
</html>
