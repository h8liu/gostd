<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3306880">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3306935">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3306989">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3307040">package</span>&nbsp;<span class="ident" id="3307048">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3307059">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3307122">import</span>&nbsp;<span class="op" id="3307129">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3307132">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3307139">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3307150">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3307165">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3307168">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="3307222">//</span><br>
<span class="lineno"></span><span class="comment" id="3307225">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="3307304">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="3307354">const</span>&nbsp;<span class="op" id="3307360">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307363">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307375">int32</span>&nbsp;<span class="op" id="3307381">=</span>&nbsp;<span class="num" id="3307383">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307387">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307399">int32</span>&nbsp;<span class="op" id="3307405">=</span>&nbsp;<span class="num" id="3307407">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307412">initialBias</span>&nbsp;<span class="builtintype" id="3307424">int32</span>&nbsp;<span class="op" id="3307430">=</span>&nbsp;<span class="num" id="3307432">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307436">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307448">int32</span>&nbsp;<span class="op" id="3307454">=</span>&nbsp;<span class="num" id="3307456">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307461">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307473">int32</span>&nbsp;<span class="op" id="3307479">=</span>&nbsp;<span class="num" id="3307481">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307485">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307497">int32</span>&nbsp;<span class="op" id="3307503">=</span>&nbsp;<span class="num" id="3307505">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307509">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3307521">int32</span>&nbsp;<span class="op" id="3307527">=</span>&nbsp;<span class="num" id="3307529">1</span><br>
<span class="lineno"></span><span class="op" id="3307531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3307534">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="3307612">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="3307627">//</span><br>
<span class="lineno"></span><span class="comment" id="3307630">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="3307702">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="3307782">func</span>&nbsp;<span class="ident" id="3307787">encode</span><span class="op" id="3307793">(</span><span class="ident" id="3307794">prefix</span><span class="op" id="3307800">,</span>&nbsp;<span class="ident" id="3307802">s</span>&nbsp;<span class="builtintype" id="3307804">string</span><span class="op" id="3307810">)</span>&nbsp;<span class="op" id="3307812">(</span><span class="builtintype" id="3307813">string</span><span class="op" id="3307819">,</span>&nbsp;<span class="builtintype" id="3307821">error</span><span class="op" id="3307826">)</span>&nbsp;<span class="op" id="3307828">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307831">output</span>&nbsp;<span class="op" id="3307838">:=</span>&nbsp;<span class="builtinfunc" id="3307841">make</span><span class="op" id="3307845">(</span><span class="op" id="3307846">[</span><span class="op" id="3307847">]</span><span class="builtintype" id="3307848">byte</span><span class="op" id="3307852">,</span>&nbsp;<span class="builtinfunc" id="3307854">len</span><span class="op" id="3307857">(</span><span class="ident" id="3307858"><a href="/net/http/cookiejar/punycode.go.html#3307794">prefix</a></span><span class="op" id="3307864">)</span><span class="op" id="3307865">,</span>&nbsp;<span class="builtinfunc" id="3307867">len</span><span class="op" id="3307870">(</span><span class="ident" id="3307871"><a href="/net/http/cookiejar/punycode.go.html#3307794">prefix</a></span><span class="op" id="3307877">)</span><span class="op" id="3307878">+</span><span class="num" id="3307879">1</span><span class="op" id="3307880">+</span><span class="num" id="3307881">2</span><span class="op" id="3307882">*</span><span class="builtinfunc" id="3307883">len</span><span class="op" id="3307886">(</span><span class="ident" id="3307887"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span><span class="op" id="3307888">)</span><span class="op" id="3307889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3307892">copy</span><span class="op" id="3307896">(</span><span class="ident" id="3307897"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3307903">,</span>&nbsp;<span class="ident" id="3307905"><a href="/net/http/cookiejar/punycode.go.html#3307794">prefix</a></span><span class="op" id="3307911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307914">delta</span><span class="op" id="3307919">,</span>&nbsp;<span class="ident" id="3307921">n</span><span class="op" id="3307922">,</span>&nbsp;<span class="ident" id="3307924">bias</span>&nbsp;<span class="op" id="3307929">:=</span>&nbsp;<span class="builtintype" id="3307932">int32</span><span class="op" id="3307937">(</span><span class="num" id="3307938">0</span><span class="op" id="3307939">)</span><span class="op" id="3307940">,</span>&nbsp;<span class="ident" id="3307942"><a href="/net/http/cookiejar/punycode.go.html#3307436">initialN</a></span><span class="op" id="3307950">,</span>&nbsp;<span class="ident" id="3307952"><a href="/net/http/cookiejar/punycode.go.html#3307412">initialBias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3307965">b</span><span class="op" id="3307966">,</span>&nbsp;<span class="ident" id="3307968">remaining</span>&nbsp;<span class="op" id="3307978">:=</span>&nbsp;<span class="builtintype" id="3307981">int32</span><span class="op" id="3307986">(</span><span class="num" id="3307987">0</span><span class="op" id="3307988">)</span><span class="op" id="3307989">,</span>&nbsp;<span class="builtintype" id="3307991">int32</span><span class="op" id="3307996">(</span><span class="num" id="3307997">0</span><span class="op" id="3307998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308001">for</span>&nbsp;<span class="ident" id="3308005">_</span><span class="op" id="3308006">,</span>&nbsp;<span class="ident" id="3308008">r</span>&nbsp;<span class="op" id="3308010">:=</span>&nbsp;<span class="keyword" id="3308013">range</span>&nbsp;<span class="ident" id="3308019"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span>&nbsp;<span class="op" id="3308021">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308025">if</span>&nbsp;<span class="ident" id="3308028"><a href="/net/http/cookiejar/punycode.go.html#3308008">r</a></span>&nbsp;<span class="op" id="3308030">&lt;</span>&nbsp;<span class="num" id="3308032">0x80</span>&nbsp;<span class="op" id="3308037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308042"><a href="/net/http/cookiejar/punycode.go.html#3307965">b</a></span><span class="op" id="3308043">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308049"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span>&nbsp;<span class="op" id="3308056">=</span>&nbsp;<span class="builtinfunc" id="3308058">append</span><span class="op" id="3308064">(</span><span class="ident" id="3308065"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3308071">,</span>&nbsp;<span class="builtintype" id="3308073">byte</span><span class="op" id="3308077">(</span><span class="ident" id="3308078"><a href="/net/http/cookiejar/punycode.go.html#3308008">r</a></span><span class="op" id="3308079">)</span><span class="op" id="3308080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308084">}</span>&nbsp;<span class="keyword" id="3308086">else</span>&nbsp;<span class="op" id="3308091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308096"><a href="/net/http/cookiejar/punycode.go.html#3307968">remaining</a></span><span class="op" id="3308105">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308116">h</span>&nbsp;<span class="op" id="3308118">:=</span>&nbsp;<span class="ident" id="3308121"><a href="/net/http/cookiejar/punycode.go.html#3307965">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308124">if</span>&nbsp;<span class="ident" id="3308127"><a href="/net/http/cookiejar/punycode.go.html#3307965">b</a></span>&nbsp;<span class="op" id="3308129">&gt;</span>&nbsp;<span class="num" id="3308131">0</span>&nbsp;<span class="op" id="3308133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308137"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span>&nbsp;<span class="op" id="3308144">=</span>&nbsp;<span class="builtinfunc" id="3308146">append</span><span class="op" id="3308152">(</span><span class="ident" id="3308153"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3308159">,</span>&nbsp;<span class="string" id="3308161">&#39;-&#39;</span><span class="op" id="3308164">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308170">for</span>&nbsp;<span class="ident" id="3308174"><a href="/net/http/cookiejar/punycode.go.html#3307968">remaining</a></span>&nbsp;<span class="op" id="3308184">!=</span>&nbsp;<span class="num" id="3308187">0</span>&nbsp;<span class="op" id="3308189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308193">m</span>&nbsp;<span class="op" id="3308195">:=</span>&nbsp;<span class="builtintype" id="3308198">int32</span><span class="op" id="3308203">(</span><span class="num" id="3308204">0x7fffffff</span><span class="op" id="3308214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308218">for</span>&nbsp;<span class="ident" id="3308222">_</span><span class="op" id="3308223">,</span>&nbsp;<span class="ident" id="3308225">r</span>&nbsp;<span class="op" id="3308227">:=</span>&nbsp;<span class="keyword" id="3308230">range</span>&nbsp;<span class="ident" id="3308236"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span>&nbsp;<span class="op" id="3308238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308243">if</span>&nbsp;<span class="ident" id="3308246"><a href="/net/http/cookiejar/punycode.go.html#3308193">m</a></span>&nbsp;<span class="op" id="3308248">&gt;</span>&nbsp;<span class="ident" id="3308250"><a href="/net/http/cookiejar/punycode.go.html#3308225">r</a></span>&nbsp;<span class="op" id="3308252">&amp;&amp;</span>&nbsp;<span class="ident" id="3308255"><a href="/net/http/cookiejar/punycode.go.html#3308225">r</a></span>&nbsp;<span class="op" id="3308257">&gt;=</span>&nbsp;<span class="ident" id="3308260"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span>&nbsp;<span class="op" id="3308262">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308268"><a href="/net/http/cookiejar/punycode.go.html#3308193">m</a></span>&nbsp;<span class="op" id="3308270">=</span>&nbsp;<span class="ident" id="3308272"><a href="/net/http/cookiejar/punycode.go.html#3308225">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308285"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span>&nbsp;<span class="op" id="3308291">+=</span>&nbsp;<span class="op" id="3308294">(</span><span class="ident" id="3308295"><a href="/net/http/cookiejar/punycode.go.html#3308193">m</a></span>&nbsp;<span class="op" id="3308297">-</span>&nbsp;<span class="ident" id="3308299"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span><span class="op" id="3308300">)</span>&nbsp;<span class="op" id="3308302">*</span>&nbsp;<span class="op" id="3308304">(</span><span class="ident" id="3308305"><a href="/net/http/cookiejar/punycode.go.html#3308116">h</a></span>&nbsp;<span class="op" id="3308307">+</span>&nbsp;<span class="num" id="3308309">1</span><span class="op" id="3308310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308314">if</span>&nbsp;<span class="ident" id="3308317"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span>&nbsp;<span class="op" id="3308323">&lt;</span>&nbsp;<span class="num" id="3308325">0</span>&nbsp;<span class="op" id="3308327">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308332">return</span>&nbsp;<span class="string" id="3308339">&#34;&#34;</span><span class="op" id="3308341">,</span>&nbsp;<span class="ident" id="3308343"><a href="/net/http/cookiejar/punycode.go.html#3307132">fmt</a></span><span class="op" id="3308346">.</span><span class="ident" id="3308347">Errorf</span><span class="op" id="3308353">(</span><span class="string" id="3308354">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="3308383">,</span>&nbsp;<span class="ident" id="3308385"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span><span class="op" id="3308386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308394"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span>&nbsp;<span class="op" id="3308396">=</span>&nbsp;<span class="ident" id="3308398"><a href="/net/http/cookiejar/punycode.go.html#3308193">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308402">for</span>&nbsp;<span class="ident" id="3308406">_</span><span class="op" id="3308407">,</span>&nbsp;<span class="ident" id="3308409">r</span>&nbsp;<span class="op" id="3308411">:=</span>&nbsp;<span class="keyword" id="3308414">range</span>&nbsp;<span class="ident" id="3308420"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span>&nbsp;<span class="op" id="3308422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308427">if</span>&nbsp;<span class="ident" id="3308430"><a href="/net/http/cookiejar/punycode.go.html#3308409">r</a></span>&nbsp;<span class="op" id="3308432">&lt;</span>&nbsp;<span class="ident" id="3308434"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span>&nbsp;<span class="op" id="3308436">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308442"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span><span class="op" id="3308447">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308454">if</span>&nbsp;<span class="ident" id="3308457"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span>&nbsp;<span class="op" id="3308463">&lt;</span>&nbsp;<span class="num" id="3308465">0</span>&nbsp;<span class="op" id="3308467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308474">return</span>&nbsp;<span class="string" id="3308481">&#34;&#34;</span><span class="op" id="3308483">,</span>&nbsp;<span class="ident" id="3308485"><a href="/net/http/cookiejar/punycode.go.html#3307132">fmt</a></span><span class="op" id="3308488">.</span><span class="ident" id="3308489">Errorf</span><span class="op" id="3308495">(</span><span class="string" id="3308496">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="3308525">,</span>&nbsp;<span class="ident" id="3308527"><a href="/net/http/cookiejar/punycode.go.html#3307802">s</a></span><span class="op" id="3308528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308540">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308557">if</span>&nbsp;<span class="ident" id="3308560"><a href="/net/http/cookiejar/punycode.go.html#3308409">r</a></span>&nbsp;<span class="op" id="3308562">&gt;</span>&nbsp;<span class="ident" id="3308564"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span>&nbsp;<span class="op" id="3308566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308572">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308589">q</span>&nbsp;<span class="op" id="3308591">:=</span>&nbsp;<span class="ident" id="3308594"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308603">for</span>&nbsp;<span class="ident" id="3308607">k</span>&nbsp;<span class="op" id="3308609">:=</span>&nbsp;<span class="ident" id="3308612"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span><span class="op" id="3308616">;</span>&nbsp;<span class="op" id="3308618">;</span>&nbsp;<span class="ident" id="3308620"><a href="/net/http/cookiejar/punycode.go.html#3308607">k</a></span>&nbsp;<span class="op" id="3308622">+=</span>&nbsp;<span class="ident" id="3308625"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span>&nbsp;<span class="op" id="3308630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308636">t</span>&nbsp;<span class="op" id="3308638">:=</span>&nbsp;<span class="ident" id="3308641"><a href="/net/http/cookiejar/punycode.go.html#3308607">k</a></span>&nbsp;<span class="op" id="3308643">-</span>&nbsp;<span class="ident" id="3308645"><a href="/net/http/cookiejar/punycode.go.html#3307924">bias</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308654">if</span>&nbsp;<span class="ident" id="3308657"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span>&nbsp;<span class="op" id="3308659">&lt;</span>&nbsp;<span class="ident" id="3308661"><a href="/net/http/cookiejar/punycode.go.html#3307509">tmin</a></span>&nbsp;<span class="op" id="3308666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308673"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span>&nbsp;<span class="op" id="3308675">=</span>&nbsp;<span class="ident" id="3308677"><a href="/net/http/cookiejar/punycode.go.html#3307509">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308686">}</span>&nbsp;<span class="keyword" id="3308688">else</span>&nbsp;<span class="keyword" id="3308693">if</span>&nbsp;<span class="ident" id="3308696"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span>&nbsp;<span class="op" id="3308698">&gt;</span>&nbsp;<span class="ident" id="3308700"><a href="/net/http/cookiejar/punycode.go.html#3307485">tmax</a></span>&nbsp;<span class="op" id="3308705">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308712"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span>&nbsp;<span class="op" id="3308714">=</span>&nbsp;<span class="ident" id="3308716"><a href="/net/http/cookiejar/punycode.go.html#3307485">tmax</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308731">if</span>&nbsp;<span class="ident" id="3308734"><a href="/net/http/cookiejar/punycode.go.html#3308589">q</a></span>&nbsp;<span class="op" id="3308736">&lt;</span>&nbsp;<span class="ident" id="3308738"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span>&nbsp;<span class="op" id="3308740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308747">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308757">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308763"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span>&nbsp;<span class="op" id="3308770">=</span>&nbsp;<span class="builtinfunc" id="3308772">append</span><span class="op" id="3308778">(</span><span class="ident" id="3308779"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3308785">,</span>&nbsp;<span class="ident" id="3308787"><a href="/net/http/cookiejar/punycode.go.html#3309025">encodeDigit</a></span><span class="op" id="3308798">(</span><span class="ident" id="3308799"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span><span class="op" id="3308800">+</span><span class="op" id="3308801">(</span><span class="ident" id="3308802"><a href="/net/http/cookiejar/punycode.go.html#3308589">q</a></span><span class="op" id="3308803">-</span><span class="ident" id="3308804"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span><span class="op" id="3308805">)</span><span class="op" id="3308806">%</span><span class="op" id="3308807">(</span><span class="ident" id="3308808"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span><span class="op" id="3308812">-</span><span class="ident" id="3308813"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span><span class="op" id="3308814">)</span><span class="op" id="3308815">)</span><span class="op" id="3308816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308822"><a href="/net/http/cookiejar/punycode.go.html#3308589">q</a></span>&nbsp;<span class="op" id="3308824">=</span>&nbsp;<span class="op" id="3308826">(</span><span class="ident" id="3308827"><a href="/net/http/cookiejar/punycode.go.html#3308589">q</a></span>&nbsp;<span class="op" id="3308829">-</span>&nbsp;<span class="ident" id="3308831"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span><span class="op" id="3308832">)</span>&nbsp;<span class="op" id="3308834">/</span>&nbsp;<span class="op" id="3308836">(</span><span class="ident" id="3308837"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span>&nbsp;<span class="op" id="3308842">-</span>&nbsp;<span class="ident" id="3308844"><a href="/net/http/cookiejar/punycode.go.html#3308636">t</a></span><span class="op" id="3308845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308855"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span>&nbsp;<span class="op" id="3308862">=</span>&nbsp;<span class="builtinfunc" id="3308864">append</span><span class="op" id="3308870">(</span><span class="ident" id="3308871"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3308877">,</span>&nbsp;<span class="ident" id="3308879"><a href="/net/http/cookiejar/punycode.go.html#3309025">encodeDigit</a></span><span class="op" id="3308890">(</span><span class="ident" id="3308891"><a href="/net/http/cookiejar/punycode.go.html#3308589">q</a></span><span class="op" id="3308892">)</span><span class="op" id="3308893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308898"><a href="/net/http/cookiejar/punycode.go.html#3307924">bias</a></span>&nbsp;<span class="op" id="3308903">=</span>&nbsp;<span class="ident" id="3308905"><a href="/net/http/cookiejar/punycode.go.html#3309328">adapt</a></span><span class="op" id="3308910">(</span><span class="ident" id="3308911"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span><span class="op" id="3308916">,</span>&nbsp;<span class="ident" id="3308918"><a href="/net/http/cookiejar/punycode.go.html#3308116">h</a></span><span class="op" id="3308919">+</span><span class="num" id="3308920">1</span><span class="op" id="3308921">,</span>&nbsp;<span class="ident" id="3308923"><a href="/net/http/cookiejar/punycode.go.html#3308116">h</a></span>&nbsp;<span class="op" id="3308925">==</span>&nbsp;<span class="ident" id="3308928"><a href="/net/http/cookiejar/punycode.go.html#3307965">b</a></span><span class="op" id="3308929">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308934"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span>&nbsp;<span class="op" id="3308940">=</span>&nbsp;<span class="num" id="3308942">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308947"><a href="/net/http/cookiejar/punycode.go.html#3308116">h</a></span><span class="op" id="3308948">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308954"><a href="/net/http/cookiejar/punycode.go.html#3307968">remaining</a></span><span class="op" id="3308963">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308972"><a href="/net/http/cookiejar/punycode.go.html#3307914">delta</a></span><span class="op" id="3308977">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3308982"><a href="/net/http/cookiejar/punycode.go.html#3307921">n</a></span><span class="op" id="3308983">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3308987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3308990">return</span>&nbsp;<span class="builtintype" id="3308997">string</span><span class="op" id="3309003">(</span><span class="ident" id="3309004"><a href="/net/http/cookiejar/punycode.go.html#3307831">output</a></span><span class="op" id="3309010">)</span><span class="op" id="3309011">,</span>&nbsp;<span class="ident" id="3309013">nil</span><br>
<span class="lineno"></span><span class="op" id="3309017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3309020">func</span>&nbsp;<span class="ident" id="3309025">encodeDigit</span><span class="op" id="3309036">(</span><span class="ident" id="3309037">digit</span>&nbsp;<span class="builtintype" id="3309043">int32</span><span class="op" id="3309048">)</span>&nbsp;<span class="builtintype" id="3309050">byte</span>&nbsp;<span class="op" id="3309055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309058">switch</span>&nbsp;<span class="op" id="3309065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309068">case</span>&nbsp;<span class="num" id="3309073">0</span>&nbsp;<span class="op" id="3309075">&lt;=</span>&nbsp;<span class="ident" id="3309078"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309084">&amp;&amp;</span>&nbsp;<span class="ident" id="3309087"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309093">&lt;</span>&nbsp;<span class="num" id="3309095">26</span><span class="op" id="3309097">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309101">return</span>&nbsp;<span class="builtintype" id="3309108">byte</span><span class="op" id="3309112">(</span><span class="ident" id="3309113"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309119">+</span>&nbsp;<span class="string" id="3309121">&#39;a&#39;</span><span class="op" id="3309124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309127">case</span>&nbsp;<span class="num" id="3309132">26</span>&nbsp;<span class="op" id="3309135">&lt;=</span>&nbsp;<span class="ident" id="3309138"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309144">&amp;&amp;</span>&nbsp;<span class="ident" id="3309147"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309153">&lt;</span>&nbsp;<span class="num" id="3309155">36</span><span class="op" id="3309157">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309161">return</span>&nbsp;<span class="builtintype" id="3309168">byte</span><span class="op" id="3309172">(</span><span class="ident" id="3309173"><a href="/net/http/cookiejar/punycode.go.html#3309037">digit</a></span>&nbsp;<span class="op" id="3309179">+</span>&nbsp;<span class="op" id="3309181">(</span><span class="string" id="3309182">&#39;0&#39;</span>&nbsp;<span class="op" id="3309186">-</span>&nbsp;<span class="num" id="3309188">26</span><span class="op" id="3309190">)</span><span class="op" id="3309191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3309194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3309197">panic</span><span class="op" id="3309202">(</span><span class="string" id="3309203">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="3309251">)</span><br>
<span class="lineno"></span><span class="op" id="3309253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3309256">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="3309323">func</span>&nbsp;<span class="ident" id="3309328">adapt</span><span class="op" id="3309333">(</span><span class="ident" id="3309334">delta</span><span class="op" id="3309339">,</span>&nbsp;<span class="ident" id="3309341">numPoints</span>&nbsp;<span class="builtintype" id="3309351">int32</span><span class="op" id="3309356">,</span>&nbsp;<span class="ident" id="3309358">firstTime</span>&nbsp;<span class="builtintype" id="3309368">bool</span><span class="op" id="3309372">)</span>&nbsp;<span class="builtintype" id="3309374">int32</span>&nbsp;<span class="op" id="3309380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309383">if</span>&nbsp;<span class="ident" id="3309386"><a href="/net/http/cookiejar/punycode.go.html#3309358">firstTime</a></span>&nbsp;<span class="op" id="3309396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309400"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309406">/=</span>&nbsp;<span class="ident" id="3309409"><a href="/net/http/cookiejar/punycode.go.html#3307387">damp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3309415">}</span>&nbsp;<span class="keyword" id="3309417">else</span>&nbsp;<span class="op" id="3309422">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309426"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309432">/=</span>&nbsp;<span class="num" id="3309435">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3309438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309441"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309447">+=</span>&nbsp;<span class="ident" id="3309450"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309456">/</span>&nbsp;<span class="ident" id="3309458"><a href="/net/http/cookiejar/punycode.go.html#3309341">numPoints</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309469">k</span>&nbsp;<span class="op" id="3309471">:=</span>&nbsp;<span class="builtintype" id="3309474">int32</span><span class="op" id="3309479">(</span><span class="num" id="3309480">0</span><span class="op" id="3309481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309484">for</span>&nbsp;<span class="ident" id="3309488"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309494">&gt;</span>&nbsp;<span class="op" id="3309496">(</span><span class="op" id="3309497">(</span><span class="ident" id="3309498"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span><span class="op" id="3309502">-</span><span class="ident" id="3309503"><a href="/net/http/cookiejar/punycode.go.html#3307509">tmin</a></span><span class="op" id="3309507">)</span><span class="op" id="3309508">*</span><span class="ident" id="3309509"><a href="/net/http/cookiejar/punycode.go.html#3307485">tmax</a></span><span class="op" id="3309513">)</span><span class="op" id="3309514">/</span><span class="num" id="3309515">2</span>&nbsp;<span class="op" id="3309517">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309521"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span>&nbsp;<span class="op" id="3309527">/=</span>&nbsp;<span class="ident" id="3309530"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span>&nbsp;<span class="op" id="3309535">-</span>&nbsp;<span class="ident" id="3309537"><a href="/net/http/cookiejar/punycode.go.html#3307509">tmin</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3309544"><a href="/net/http/cookiejar/punycode.go.html#3309469">k</a></span>&nbsp;<span class="op" id="3309546">+=</span>&nbsp;<span class="ident" id="3309549"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3309555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3309558">return</span>&nbsp;<span class="ident" id="3309565"><a href="/net/http/cookiejar/punycode.go.html#3309469">k</a></span>&nbsp;<span class="op" id="3309567">+</span>&nbsp;<span class="op" id="3309569">(</span><span class="ident" id="3309570"><a href="/net/http/cookiejar/punycode.go.html#3307363">base</a></span><span class="op" id="3309574">-</span><span class="ident" id="3309575"><a href="/net/http/cookiejar/punycode.go.html#3307509">tmin</a></span><span class="op" id="3309579">+</span><span class="num" id="3309580">1</span><span class="op" id="3309581">)</span><span class="op" id="3309582">*</span><span class="ident" id="3309583"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span><span class="op" id="3309588">/</span><span class="op" id="3309589">(</span><span class="ident" id="3309590"><a href="/net/http/cookiejar/punycode.go.html#3309334">delta</a></span><span class="op" id="3309595">+</span><span class="ident" id="3309596"><a href="/net/http/cookiejar/punycode.go.html#3307461">skew</a></span><span class="op" id="3309600">)</span><br>
<span class="lineno"></span><span class="op" id="3309602">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="3309605">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3309682">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3309731">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="3309785">const</span>&nbsp;<span class="ident" id="3309791">acePrefix</span>&nbsp;<span class="op" id="3309801">=</span>&nbsp;<span class="string" id="3309803">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3309811">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="3309888">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3309958">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="3309992">func</span>&nbsp;<span class="ident" id="3309997">toASCII</span><span class="op" id="3310004">(</span><span class="ident" id="3310005">s</span>&nbsp;<span class="builtintype" id="3310007">string</span><span class="op" id="3310013">)</span>&nbsp;<span class="op" id="3310015">(</span><span class="builtintype" id="3310016">string</span><span class="op" id="3310022">,</span>&nbsp;<span class="builtintype" id="3310024">error</span><span class="op" id="3310029">)</span>&nbsp;<span class="op" id="3310031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310034">if</span>&nbsp;<span class="ident" id="3310037"><a href="/net/http/cookiejar/punycode.go.html#3310305">ascii</a></span><span class="op" id="3310042">(</span><span class="ident" id="3310043"><a href="/net/http/cookiejar/punycode.go.html#3310005">s</a></span><span class="op" id="3310044">)</span>&nbsp;<span class="op" id="3310046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310050">return</span>&nbsp;<span class="ident" id="3310057"><a href="/net/http/cookiejar/punycode.go.html#3310005">s</a></span><span class="op" id="3310058">,</span>&nbsp;<span class="ident" id="3310060">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3310068">labels</span>&nbsp;<span class="op" id="3310075">:=</span>&nbsp;<span class="ident" id="3310078"><a href="/net/http/cookiejar/punycode.go.html#3307139">strings</a></span><span class="op" id="3310085">.</span><span class="ident" id="3310086">Split</span><span class="op" id="3310091">(</span><span class="ident" id="3310092"><a href="/net/http/cookiejar/punycode.go.html#3310005">s</a></span><span class="op" id="3310093">,</span>&nbsp;<span class="string" id="3310095">&#34;.&#34;</span><span class="op" id="3310098">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310101">for</span>&nbsp;<span class="ident" id="3310105">i</span><span class="op" id="3310106">,</span>&nbsp;<span class="ident" id="3310108">label</span>&nbsp;<span class="op" id="3310114">:=</span>&nbsp;<span class="keyword" id="3310117">range</span>&nbsp;<span class="ident" id="3310123"><a href="/net/http/cookiejar/punycode.go.html#3310068">labels</a></span>&nbsp;<span class="op" id="3310130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310134">if</span>&nbsp;<span class="op" id="3310137">!</span><span class="ident" id="3310138"><a href="/net/http/cookiejar/punycode.go.html#3310305">ascii</a></span><span class="op" id="3310143">(</span><span class="ident" id="3310144"><a href="/net/http/cookiejar/punycode.go.html#3310108">label</a></span><span class="op" id="3310149">)</span>&nbsp;<span class="op" id="3310151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3310156">a</span><span class="op" id="3310157">,</span>&nbsp;<span class="ident" id="3310159">err</span>&nbsp;<span class="op" id="3310163">:=</span>&nbsp;<span class="ident" id="3310166"><a href="/net/http/cookiejar/punycode.go.html#3307787">encode</a></span><span class="op" id="3310172">(</span><span class="ident" id="3310173"><a href="/net/http/cookiejar/punycode.go.html#3309791">acePrefix</a></span><span class="op" id="3310182">,</span>&nbsp;<span class="ident" id="3310184"><a href="/net/http/cookiejar/punycode.go.html#3310108">label</a></span><span class="op" id="3310189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310194">if</span>&nbsp;<span class="ident" id="3310197"><a href="/net/http/cookiejar/punycode.go.html#3310159">err</a></span>&nbsp;<span class="op" id="3310201">!=</span>&nbsp;<span class="ident" id="3310204">nil</span>&nbsp;<span class="op" id="3310208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310214">return</span>&nbsp;<span class="string" id="3310221">&#34;&#34;</span><span class="op" id="3310223">,</span>&nbsp;<span class="ident" id="3310225"><a href="/net/http/cookiejar/punycode.go.html#3310159">err</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3310237"><a href="/net/http/cookiejar/punycode.go.html#3310068">labels</a></span><span class="op" id="3310243">[</span><span class="ident" id="3310244"><a href="/net/http/cookiejar/punycode.go.html#3310105">i</a></span><span class="op" id="3310245">]</span>&nbsp;<span class="op" id="3310247">=</span>&nbsp;<span class="ident" id="3310249"><a href="/net/http/cookiejar/punycode.go.html#3310156">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310259">return</span>&nbsp;<span class="ident" id="3310266"><a href="/net/http/cookiejar/punycode.go.html#3307139">strings</a></span><span class="op" id="3310273">.</span><span class="ident" id="3310274">Join</span><span class="op" id="3310278">(</span><span class="ident" id="3310279"><a href="/net/http/cookiejar/punycode.go.html#3310068">labels</a></span><span class="op" id="3310285">,</span>&nbsp;<span class="string" id="3310287">&#34;.&#34;</span><span class="op" id="3310290">)</span><span class="op" id="3310291">,</span>&nbsp;<span class="ident" id="3310293">nil</span><br>
<span class="lineno">150</span><span class="op" id="3310297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3310300">func</span>&nbsp;<span class="ident" id="3310305">ascii</span><span class="op" id="3310310">(</span><span class="ident" id="3310311">s</span>&nbsp;<span class="builtintype" id="3310313">string</span><span class="op" id="3310319">)</span>&nbsp;<span class="builtintype" id="3310321">bool</span>&nbsp;<span class="op" id="3310326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310329">for</span>&nbsp;<span class="ident" id="3310333">i</span>&nbsp;<span class="op" id="3310335">:=</span>&nbsp;<span class="num" id="3310338">0</span><span class="op" id="3310339">;</span>&nbsp;<span class="ident" id="3310341"><a href="/net/http/cookiejar/punycode.go.html#3310333">i</a></span>&nbsp;<span class="op" id="3310343">&lt;</span>&nbsp;<span class="builtinfunc" id="3310345">len</span><span class="op" id="3310348">(</span><span class="ident" id="3310349"><a href="/net/http/cookiejar/punycode.go.html#3310311">s</a></span><span class="op" id="3310350">)</span><span class="op" id="3310351">;</span>&nbsp;<span class="ident" id="3310353"><a href="/net/http/cookiejar/punycode.go.html#3310333">i</a></span><span class="op" id="3310354">++</span>&nbsp;<span class="op" id="3310357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310361">if</span>&nbsp;<span class="ident" id="3310364"><a href="/net/http/cookiejar/punycode.go.html#3310311">s</a></span><span class="op" id="3310365">[</span><span class="ident" id="3310366"><a href="/net/http/cookiejar/punycode.go.html#3310333">i</a></span><span class="op" id="3310367">]</span>&nbsp;<span class="op" id="3310369">&gt;=</span>&nbsp;<span class="ident" id="3310372"><a href="/net/http/cookiejar/punycode.go.html#3307150">utf8</a></span><span class="op" id="3310376">.</span><span class="ident" id="3310377">RuneSelf</span>&nbsp;<span class="op" id="3310386">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310391">return</span>&nbsp;<span class="builtintype" id="3310398">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3310409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3310412">return</span>&nbsp;<span class="builtintype" id="3310419">true</span><br>
<span class="lineno"></span><span class="op" id="3310424">}</span>
</div>
</body>
</html>
