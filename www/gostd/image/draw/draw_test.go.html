<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6436434">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6436489">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6436543">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6436594">package</span>&nbsp;<span class="ident" id="6436602">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6436608">import</span>&nbsp;<span class="op" id="6436615">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6436618">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6436627">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6436642">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6436655">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6436661">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6436671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6436674">func</span>&nbsp;<span class="ident" id="6436679">eq</span><span class="op" id="6436681">(</span><span class="ident" id="6436682">c0</span><span class="op" id="6436684">,</span>&nbsp;<span class="ident" id="6436686">c1</span>&nbsp;<span class="ident" id="6436689">color</span><span class="op" id="6436694">.</span><span class="ident" id="6436695">Color</span><span class="op" id="6436700">)</span>&nbsp;<span class="builtintype" id="6436702">bool</span>&nbsp;<span class="op" id="6436707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436710">r0</span><span class="op" id="6436712">,</span>&nbsp;<span class="ident" id="6436714">g0</span><span class="op" id="6436716">,</span>&nbsp;<span class="ident" id="6436718">b0</span><span class="op" id="6436720">,</span>&nbsp;<span class="ident" id="6436722">a0</span>&nbsp;<span class="op" id="6436725">:=</span>&nbsp;<span class="ident" id="6436728">c0</span><span class="op" id="6436730">.</span><span class="ident" id="6436731">RGBA</span><span class="op" id="6436735">(</span><span class="op" id="6436736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6436739">r1</span><span class="op" id="6436741">,</span>&nbsp;<span class="ident" id="6436743">g1</span><span class="op" id="6436745">,</span>&nbsp;<span class="ident" id="6436747">b1</span><span class="op" id="6436749">,</span>&nbsp;<span class="ident" id="6436751">a1</span>&nbsp;<span class="op" id="6436754">:=</span>&nbsp;<span class="ident" id="6436757">c1</span><span class="op" id="6436759">.</span><span class="ident" id="6436760">RGBA</span><span class="op" id="6436764">(</span><span class="op" id="6436765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436768">return</span>&nbsp;<span class="ident" id="6436775">r0</span>&nbsp;<span class="op" id="6436778">==</span>&nbsp;<span class="ident" id="6436781">r1</span>&nbsp;<span class="op" id="6436784">&amp;&amp;</span>&nbsp;<span class="ident" id="6436787">g0</span>&nbsp;<span class="op" id="6436790">==</span>&nbsp;<span class="ident" id="6436793">g1</span>&nbsp;<span class="op" id="6436796">&amp;&amp;</span>&nbsp;<span class="ident" id="6436799">b0</span>&nbsp;<span class="op" id="6436802">==</span>&nbsp;<span class="ident" id="6436805">b1</span>&nbsp;<span class="op" id="6436808">&amp;&amp;</span>&nbsp;<span class="ident" id="6436811">a0</span>&nbsp;<span class="op" id="6436814">==</span>&nbsp;<span class="ident" id="6436817">a1</span><br>
<span class="lineno"></span><span class="op" id="6436820">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6436823">func</span>&nbsp;<span class="ident" id="6436828">fillBlue</span><span class="op" id="6436836">(</span><span class="ident" id="6436837">alpha</span>&nbsp;<span class="builtintype" id="6436843">int</span><span class="op" id="6436846">)</span>&nbsp;<span class="ident" id="6436848">image</span><span class="op" id="6436853">.</span><span class="ident" id="6436854">Image</span>&nbsp;<span class="op" id="6436860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436863">return</span>&nbsp;<span class="ident" id="6436870">image</span><span class="op" id="6436875">.</span><span class="ident" id="6436876">NewUniform</span><span class="op" id="6436886">(</span><span class="ident" id="6436887">color</span><span class="op" id="6436892">.</span><span class="ident" id="6436893">RGBA</span><span class="op" id="6436897">{</span><span class="num" id="6436898">0</span><span class="op" id="6436899">,</span>&nbsp;<span class="num" id="6436901">0</span><span class="op" id="6436902">,</span>&nbsp;<span class="builtintype" id="6436904">uint8</span><span class="op" id="6436909">(</span><span class="ident" id="6436910">alpha</span><span class="op" id="6436915">)</span><span class="op" id="6436916">,</span>&nbsp;<span class="builtintype" id="6436918">uint8</span><span class="op" id="6436923">(</span><span class="ident" id="6436924">alpha</span><span class="op" id="6436929">)</span><span class="op" id="6436930">}</span><span class="op" id="6436931">)</span><br>
<span class="lineno"></span><span class="op" id="6436933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6436936">func</span>&nbsp;<span class="ident" id="6436941">fillAlpha</span><span class="op" id="6436950">(</span><span class="ident" id="6436951">alpha</span>&nbsp;<span class="builtintype" id="6436957">int</span><span class="op" id="6436960">)</span>&nbsp;<span class="ident" id="6436962">image</span><span class="op" id="6436967">.</span><span class="ident" id="6436968">Image</span>&nbsp;<span class="op" id="6436974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6436977">return</span>&nbsp;<span class="ident" id="6436984">image</span><span class="op" id="6436989">.</span><span class="ident" id="6436990">NewUniform</span><span class="op" id="6437000">(</span><span class="ident" id="6437001">color</span><span class="op" id="6437006">.</span><span class="ident" id="6437007">Alpha</span><span class="op" id="6437012">{</span><span class="builtintype" id="6437013">uint8</span><span class="op" id="6437018">(</span><span class="ident" id="6437019">alpha</span><span class="op" id="6437024">)</span><span class="op" id="6437025">}</span><span class="op" id="6437026">)</span><br>
<span class="lineno"></span><span class="op" id="6437028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437031">func</span>&nbsp;<span class="ident" id="6437036">vgradGreen</span><span class="op" id="6437046">(</span><span class="ident" id="6437047">alpha</span>&nbsp;<span class="builtintype" id="6437053">int</span><span class="op" id="6437056">)</span>&nbsp;<span class="ident" id="6437058">image</span><span class="op" id="6437063">.</span><span class="ident" id="6437064">Image</span>&nbsp;<span class="op" id="6437070">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437073">m</span>&nbsp;<span class="op" id="6437075">:=</span>&nbsp;<span class="ident" id="6437078">image</span><span class="op" id="6437083">.</span><span class="ident" id="6437084">NewRGBA</span><span class="op" id="6437091">(</span><span class="ident" id="6437092">image</span><span class="op" id="6437097">.</span><span class="ident" id="6437098">Rect</span><span class="op" id="6437102">(</span><span class="num" id="6437103">0</span><span class="op" id="6437104">,</span>&nbsp;<span class="num" id="6437106">0</span><span class="op" id="6437107">,</span>&nbsp;<span class="num" id="6437109">16</span><span class="op" id="6437111">,</span>&nbsp;<span class="num" id="6437113">16</span><span class="op" id="6437115">)</span><span class="op" id="6437116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437119">for</span>&nbsp;<span class="ident" id="6437123">y</span>&nbsp;<span class="op" id="6437125">:=</span>&nbsp;<span class="num" id="6437128">0</span><span class="op" id="6437129">;</span>&nbsp;<span class="ident" id="6437131">y</span>&nbsp;<span class="op" id="6437133">&lt;</span>&nbsp;<span class="num" id="6437135">16</span><span class="op" id="6437137">;</span>&nbsp;<span class="ident" id="6437139">y</span><span class="op" id="6437140">++</span>&nbsp;<span class="op" id="6437143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437147">for</span>&nbsp;<span class="ident" id="6437151">x</span>&nbsp;<span class="op" id="6437153">:=</span>&nbsp;<span class="num" id="6437156">0</span><span class="op" id="6437157">;</span>&nbsp;<span class="ident" id="6437159">x</span>&nbsp;<span class="op" id="6437161">&lt;</span>&nbsp;<span class="num" id="6437163">16</span><span class="op" id="6437165">;</span>&nbsp;<span class="ident" id="6437167">x</span><span class="op" id="6437168">++</span>&nbsp;<span class="op" id="6437171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437176">m</span><span class="op" id="6437177">.</span><span class="ident" id="6437178">Set</span><span class="op" id="6437181">(</span><span class="ident" id="6437182">x</span><span class="op" id="6437183">,</span>&nbsp;<span class="ident" id="6437185">y</span><span class="op" id="6437186">,</span>&nbsp;<span class="ident" id="6437188">color</span><span class="op" id="6437193">.</span><span class="ident" id="6437194">RGBA</span><span class="op" id="6437198">{</span><span class="num" id="6437199">0</span><span class="op" id="6437200">,</span>&nbsp;<span class="builtintype" id="6437202">uint8</span><span class="op" id="6437207">(</span><span class="ident" id="6437208">y</span>&nbsp;<span class="op" id="6437210">*</span>&nbsp;<span class="ident" id="6437212">alpha</span>&nbsp;<span class="op" id="6437218">/</span>&nbsp;<span class="num" id="6437220">15</span><span class="op" id="6437222">)</span><span class="op" id="6437223">,</span>&nbsp;<span class="num" id="6437225">0</span><span class="op" id="6437226">,</span>&nbsp;<span class="builtintype" id="6437228">uint8</span><span class="op" id="6437233">(</span><span class="ident" id="6437234">alpha</span><span class="op" id="6437239">)</span><span class="op" id="6437240">}</span><span class="op" id="6437241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437245">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437251">return</span>&nbsp;<span class="ident" id="6437258">m</span><br>
<span class="lineno"></span><span class="op" id="6437260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437263">func</span>&nbsp;<span class="ident" id="6437268">vgradAlpha</span><span class="op" id="6437278">(</span><span class="ident" id="6437279">alpha</span>&nbsp;<span class="builtintype" id="6437285">int</span><span class="op" id="6437288">)</span>&nbsp;<span class="ident" id="6437290">image</span><span class="op" id="6437295">.</span><span class="ident" id="6437296">Image</span>&nbsp;<span class="op" id="6437302">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437305">m</span>&nbsp;<span class="op" id="6437307">:=</span>&nbsp;<span class="ident" id="6437310">image</span><span class="op" id="6437315">.</span><span class="ident" id="6437316">NewAlpha</span><span class="op" id="6437324">(</span><span class="ident" id="6437325">image</span><span class="op" id="6437330">.</span><span class="ident" id="6437331">Rect</span><span class="op" id="6437335">(</span><span class="num" id="6437336">0</span><span class="op" id="6437337">,</span>&nbsp;<span class="num" id="6437339">0</span><span class="op" id="6437340">,</span>&nbsp;<span class="num" id="6437342">16</span><span class="op" id="6437344">,</span>&nbsp;<span class="num" id="6437346">16</span><span class="op" id="6437348">)</span><span class="op" id="6437349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437352">for</span>&nbsp;<span class="ident" id="6437356">y</span>&nbsp;<span class="op" id="6437358">:=</span>&nbsp;<span class="num" id="6437361">0</span><span class="op" id="6437362">;</span>&nbsp;<span class="ident" id="6437364">y</span>&nbsp;<span class="op" id="6437366">&lt;</span>&nbsp;<span class="num" id="6437368">16</span><span class="op" id="6437370">;</span>&nbsp;<span class="ident" id="6437372">y</span><span class="op" id="6437373">++</span>&nbsp;<span class="op" id="6437376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437380">for</span>&nbsp;<span class="ident" id="6437384">x</span>&nbsp;<span class="op" id="6437386">:=</span>&nbsp;<span class="num" id="6437389">0</span><span class="op" id="6437390">;</span>&nbsp;<span class="ident" id="6437392">x</span>&nbsp;<span class="op" id="6437394">&lt;</span>&nbsp;<span class="num" id="6437396">16</span><span class="op" id="6437398">;</span>&nbsp;<span class="ident" id="6437400">x</span><span class="op" id="6437401">++</span>&nbsp;<span class="op" id="6437404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437409">m</span><span class="op" id="6437410">.</span><span class="ident" id="6437411">Set</span><span class="op" id="6437414">(</span><span class="ident" id="6437415">x</span><span class="op" id="6437416">,</span>&nbsp;<span class="ident" id="6437418">y</span><span class="op" id="6437419">,</span>&nbsp;<span class="ident" id="6437421">color</span><span class="op" id="6437426">.</span><span class="ident" id="6437427">Alpha</span><span class="op" id="6437432">{</span><span class="builtintype" id="6437433">uint8</span><span class="op" id="6437438">(</span><span class="ident" id="6437439">y</span>&nbsp;<span class="op" id="6437441">*</span>&nbsp;<span class="ident" id="6437443">alpha</span>&nbsp;<span class="op" id="6437449">/</span>&nbsp;<span class="num" id="6437451">15</span><span class="op" id="6437453">)</span><span class="op" id="6437454">}</span><span class="op" id="6437455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437459">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437465">return</span>&nbsp;<span class="ident" id="6437472">m</span><br>
<span class="lineno"></span><span class="op" id="6437474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437477">func</span>&nbsp;<span class="ident" id="6437482">vgradGreenNRGBA</span><span class="op" id="6437497">(</span><span class="ident" id="6437498">alpha</span>&nbsp;<span class="builtintype" id="6437504">int</span><span class="op" id="6437507">)</span>&nbsp;<span class="ident" id="6437509">image</span><span class="op" id="6437514">.</span><span class="ident" id="6437515">Image</span>&nbsp;<span class="op" id="6437521">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437524">m</span>&nbsp;<span class="op" id="6437526">:=</span>&nbsp;<span class="ident" id="6437529">image</span><span class="op" id="6437534">.</span><span class="ident" id="6437535">NewNRGBA</span><span class="op" id="6437543">(</span><span class="ident" id="6437544">image</span><span class="op" id="6437549">.</span><span class="ident" id="6437550">Rect</span><span class="op" id="6437554">(</span><span class="num" id="6437555">0</span><span class="op" id="6437556">,</span>&nbsp;<span class="num" id="6437558">0</span><span class="op" id="6437559">,</span>&nbsp;<span class="num" id="6437561">16</span><span class="op" id="6437563">,</span>&nbsp;<span class="num" id="6437565">16</span><span class="op" id="6437567">)</span><span class="op" id="6437568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437571">for</span>&nbsp;<span class="ident" id="6437575">y</span>&nbsp;<span class="op" id="6437577">:=</span>&nbsp;<span class="num" id="6437580">0</span><span class="op" id="6437581">;</span>&nbsp;<span class="ident" id="6437583">y</span>&nbsp;<span class="op" id="6437585">&lt;</span>&nbsp;<span class="num" id="6437587">16</span><span class="op" id="6437589">;</span>&nbsp;<span class="ident" id="6437591">y</span><span class="op" id="6437592">++</span>&nbsp;<span class="op" id="6437595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437599">for</span>&nbsp;<span class="ident" id="6437603">x</span>&nbsp;<span class="op" id="6437605">:=</span>&nbsp;<span class="num" id="6437608">0</span><span class="op" id="6437609">;</span>&nbsp;<span class="ident" id="6437611">x</span>&nbsp;<span class="op" id="6437613">&lt;</span>&nbsp;<span class="num" id="6437615">16</span><span class="op" id="6437617">;</span>&nbsp;<span class="ident" id="6437619">x</span><span class="op" id="6437620">++</span>&nbsp;<span class="op" id="6437623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437628">m</span><span class="op" id="6437629">.</span><span class="ident" id="6437630">Set</span><span class="op" id="6437633">(</span><span class="ident" id="6437634">x</span><span class="op" id="6437635">,</span>&nbsp;<span class="ident" id="6437637">y</span><span class="op" id="6437638">,</span>&nbsp;<span class="ident" id="6437640">color</span><span class="op" id="6437645">.</span><span class="ident" id="6437646">RGBA</span><span class="op" id="6437650">{</span><span class="num" id="6437651">0</span><span class="op" id="6437652">,</span>&nbsp;<span class="builtintype" id="6437654">uint8</span><span class="op" id="6437659">(</span><span class="ident" id="6437660">y</span>&nbsp;<span class="op" id="6437662">*</span>&nbsp;<span class="num" id="6437664">0x11</span><span class="op" id="6437668">)</span><span class="op" id="6437669">,</span>&nbsp;<span class="num" id="6437671">0</span><span class="op" id="6437672">,</span>&nbsp;<span class="builtintype" id="6437674">uint8</span><span class="op" id="6437679">(</span><span class="ident" id="6437680">alpha</span><span class="op" id="6437685">)</span><span class="op" id="6437686">}</span><span class="op" id="6437687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437691">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437697">return</span>&nbsp;<span class="ident" id="6437704">m</span><br>
<span class="lineno"></span><span class="op" id="6437706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437709">func</span>&nbsp;<span class="ident" id="6437714">vgradCr</span><span class="op" id="6437721">(</span><span class="op" id="6437722">)</span>&nbsp;<span class="ident" id="6437724">image</span><span class="op" id="6437729">.</span><span class="ident" id="6437730">Image</span>&nbsp;<span class="op" id="6437736">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437739">m</span>&nbsp;<span class="op" id="6437741">:=</span>&nbsp;<span class="op" id="6437744">&amp;</span><span class="ident" id="6437745">image</span><span class="op" id="6437750">.</span><span class="ident" id="6437751">YCbCr</span><span class="op" id="6437756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437760">Y</span><span class="op" id="6437761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6437776">make</span><span class="op" id="6437780">(</span><span class="op" id="6437781">[</span><span class="op" id="6437782">]</span><span class="builtintype" id="6437783">byte</span><span class="op" id="6437787">,</span>&nbsp;<span class="num" id="6437789">16</span><span class="op" id="6437791">*</span><span class="num" id="6437792">16</span><span class="op" id="6437794">)</span><span class="op" id="6437795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437799">Cb</span><span class="op" id="6437801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6437815">make</span><span class="op" id="6437819">(</span><span class="op" id="6437820">[</span><span class="op" id="6437821">]</span><span class="builtintype" id="6437822">byte</span><span class="op" id="6437826">,</span>&nbsp;<span class="num" id="6437828">16</span><span class="op" id="6437830">*</span><span class="num" id="6437831">16</span><span class="op" id="6437833">)</span><span class="op" id="6437834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437838">Cr</span><span class="op" id="6437840">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6437854">make</span><span class="op" id="6437858">(</span><span class="op" id="6437859">[</span><span class="op" id="6437860">]</span><span class="builtintype" id="6437861">byte</span><span class="op" id="6437865">,</span>&nbsp;<span class="num" id="6437867">16</span><span class="op" id="6437869">*</span><span class="num" id="6437870">16</span><span class="op" id="6437872">)</span><span class="op" id="6437873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437877">YStride</span><span class="op" id="6437884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437893">16</span><span class="op" id="6437895">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437899">CStride</span><span class="op" id="6437906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437915">16</span><span class="op" id="6437917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437921">SubsampleRatio</span><span class="op" id="6437935">:</span>&nbsp;<span class="ident" id="6437937">image</span><span class="op" id="6437942">.</span><span class="ident" id="6437943">YCbCrSubsampleRatio444</span><span class="op" id="6437965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437969">Rect</span><span class="op" id="6437973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437985">image</span><span class="op" id="6437990">.</span><span class="ident" id="6437991">Rect</span><span class="op" id="6437995">(</span><span class="num" id="6437996">0</span><span class="op" id="6437997">,</span>&nbsp;<span class="num" id="6437999">0</span><span class="op" id="6438000">,</span>&nbsp;<span class="num" id="6438002">16</span><span class="op" id="6438004">,</span>&nbsp;<span class="num" id="6438006">16</span><span class="op" id="6438008">)</span><span class="op" id="6438009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438015">for</span>&nbsp;<span class="ident" id="6438019">y</span>&nbsp;<span class="op" id="6438021">:=</span>&nbsp;<span class="num" id="6438024">0</span><span class="op" id="6438025">;</span>&nbsp;<span class="ident" id="6438027">y</span>&nbsp;<span class="op" id="6438029">&lt;</span>&nbsp;<span class="num" id="6438031">16</span><span class="op" id="6438033">;</span>&nbsp;<span class="ident" id="6438035">y</span><span class="op" id="6438036">++</span>&nbsp;<span class="op" id="6438039">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438043">for</span>&nbsp;<span class="ident" id="6438047">x</span>&nbsp;<span class="op" id="6438049">:=</span>&nbsp;<span class="num" id="6438052">0</span><span class="op" id="6438053">;</span>&nbsp;<span class="ident" id="6438055">x</span>&nbsp;<span class="op" id="6438057">&lt;</span>&nbsp;<span class="num" id="6438059">16</span><span class="op" id="6438061">;</span>&nbsp;<span class="ident" id="6438063">x</span><span class="op" id="6438064">++</span>&nbsp;<span class="op" id="6438067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438072">m</span><span class="op" id="6438073">.</span><span class="ident" id="6438074">Cr</span><span class="op" id="6438076">[</span><span class="ident" id="6438077">y</span><span class="op" id="6438078">*</span><span class="ident" id="6438079">m</span><span class="op" id="6438080">.</span><span class="ident" id="6438081">CStride</span><span class="op" id="6438088">+</span><span class="ident" id="6438089">x</span><span class="op" id="6438090">]</span>&nbsp;<span class="op" id="6438092">=</span>&nbsp;<span class="builtintype" id="6438094">uint8</span><span class="op" id="6438099">(</span><span class="ident" id="6438100">y</span>&nbsp;<span class="op" id="6438102">*</span>&nbsp;<span class="num" id="6438104">0x11</span><span class="op" id="6438108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438118">return</span>&nbsp;<span class="ident" id="6438125">m</span><br>
<span class="lineno">75</span><span class="op" id="6438127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438130">func</span>&nbsp;<span class="ident" id="6438135">hgradRed</span><span class="op" id="6438143">(</span><span class="ident" id="6438144">alpha</span>&nbsp;<span class="builtintype" id="6438150">int</span><span class="op" id="6438153">)</span>&nbsp;<span class="ident" id="6438155">Image</span>&nbsp;<span class="op" id="6438161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438164">m</span>&nbsp;<span class="op" id="6438166">:=</span>&nbsp;<span class="ident" id="6438169">image</span><span class="op" id="6438174">.</span><span class="ident" id="6438175">NewRGBA</span><span class="op" id="6438182">(</span><span class="ident" id="6438183">image</span><span class="op" id="6438188">.</span><span class="ident" id="6438189">Rect</span><span class="op" id="6438193">(</span><span class="num" id="6438194">0</span><span class="op" id="6438195">,</span>&nbsp;<span class="num" id="6438197">0</span><span class="op" id="6438198">,</span>&nbsp;<span class="num" id="6438200">16</span><span class="op" id="6438202">,</span>&nbsp;<span class="num" id="6438204">16</span><span class="op" id="6438206">)</span><span class="op" id="6438207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438210">for</span>&nbsp;<span class="ident" id="6438214">y</span>&nbsp;<span class="op" id="6438216">:=</span>&nbsp;<span class="num" id="6438219">0</span><span class="op" id="6438220">;</span>&nbsp;<span class="ident" id="6438222">y</span>&nbsp;<span class="op" id="6438224">&lt;</span>&nbsp;<span class="num" id="6438226">16</span><span class="op" id="6438228">;</span>&nbsp;<span class="ident" id="6438230">y</span><span class="op" id="6438231">++</span>&nbsp;<span class="op" id="6438234">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438238">for</span>&nbsp;<span class="ident" id="6438242">x</span>&nbsp;<span class="op" id="6438244">:=</span>&nbsp;<span class="num" id="6438247">0</span><span class="op" id="6438248">;</span>&nbsp;<span class="ident" id="6438250">x</span>&nbsp;<span class="op" id="6438252">&lt;</span>&nbsp;<span class="num" id="6438254">16</span><span class="op" id="6438256">;</span>&nbsp;<span class="ident" id="6438258">x</span><span class="op" id="6438259">++</span>&nbsp;<span class="op" id="6438262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438267">m</span><span class="op" id="6438268">.</span><span class="ident" id="6438269">Set</span><span class="op" id="6438272">(</span><span class="ident" id="6438273">x</span><span class="op" id="6438274">,</span>&nbsp;<span class="ident" id="6438276">y</span><span class="op" id="6438277">,</span>&nbsp;<span class="ident" id="6438279">color</span><span class="op" id="6438284">.</span><span class="ident" id="6438285">RGBA</span><span class="op" id="6438289">{</span><span class="builtintype" id="6438290">uint8</span><span class="op" id="6438295">(</span><span class="ident" id="6438296">x</span>&nbsp;<span class="op" id="6438298">*</span>&nbsp;<span class="ident" id="6438300">alpha</span>&nbsp;<span class="op" id="6438306">/</span>&nbsp;<span class="num" id="6438308">15</span><span class="op" id="6438310">)</span><span class="op" id="6438311">,</span>&nbsp;<span class="num" id="6438313">0</span><span class="op" id="6438314">,</span>&nbsp;<span class="num" id="6438316">0</span><span class="op" id="6438317">,</span>&nbsp;<span class="builtintype" id="6438319">uint8</span><span class="op" id="6438324">(</span><span class="ident" id="6438325">alpha</span><span class="op" id="6438330">)</span><span class="op" id="6438331">}</span><span class="op" id="6438332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438342">return</span>&nbsp;<span class="ident" id="6438349">m</span><br>
<span class="lineno">85</span><span class="op" id="6438351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438354">func</span>&nbsp;<span class="ident" id="6438359">gradYellow</span><span class="op" id="6438369">(</span><span class="ident" id="6438370">alpha</span>&nbsp;<span class="builtintype" id="6438376">int</span><span class="op" id="6438379">)</span>&nbsp;<span class="ident" id="6438381">Image</span>&nbsp;<span class="op" id="6438387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438390">m</span>&nbsp;<span class="op" id="6438392">:=</span>&nbsp;<span class="ident" id="6438395">image</span><span class="op" id="6438400">.</span><span class="ident" id="6438401">NewRGBA</span><span class="op" id="6438408">(</span><span class="ident" id="6438409">image</span><span class="op" id="6438414">.</span><span class="ident" id="6438415">Rect</span><span class="op" id="6438419">(</span><span class="num" id="6438420">0</span><span class="op" id="6438421">,</span>&nbsp;<span class="num" id="6438423">0</span><span class="op" id="6438424">,</span>&nbsp;<span class="num" id="6438426">16</span><span class="op" id="6438428">,</span>&nbsp;<span class="num" id="6438430">16</span><span class="op" id="6438432">)</span><span class="op" id="6438433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438436">for</span>&nbsp;<span class="ident" id="6438440">y</span>&nbsp;<span class="op" id="6438442">:=</span>&nbsp;<span class="num" id="6438445">0</span><span class="op" id="6438446">;</span>&nbsp;<span class="ident" id="6438448">y</span>&nbsp;<span class="op" id="6438450">&lt;</span>&nbsp;<span class="num" id="6438452">16</span><span class="op" id="6438454">;</span>&nbsp;<span class="ident" id="6438456">y</span><span class="op" id="6438457">++</span>&nbsp;<span class="op" id="6438460">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438464">for</span>&nbsp;<span class="ident" id="6438468">x</span>&nbsp;<span class="op" id="6438470">:=</span>&nbsp;<span class="num" id="6438473">0</span><span class="op" id="6438474">;</span>&nbsp;<span class="ident" id="6438476">x</span>&nbsp;<span class="op" id="6438478">&lt;</span>&nbsp;<span class="num" id="6438480">16</span><span class="op" id="6438482">;</span>&nbsp;<span class="ident" id="6438484">x</span><span class="op" id="6438485">++</span>&nbsp;<span class="op" id="6438488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438493">m</span><span class="op" id="6438494">.</span><span class="ident" id="6438495">Set</span><span class="op" id="6438498">(</span><span class="ident" id="6438499">x</span><span class="op" id="6438500">,</span>&nbsp;<span class="ident" id="6438502">y</span><span class="op" id="6438503">,</span>&nbsp;<span class="ident" id="6438505">color</span><span class="op" id="6438510">.</span><span class="ident" id="6438511">RGBA</span><span class="op" id="6438515">{</span><span class="builtintype" id="6438516">uint8</span><span class="op" id="6438521">(</span><span class="ident" id="6438522">x</span>&nbsp;<span class="op" id="6438524">*</span>&nbsp;<span class="ident" id="6438526">alpha</span>&nbsp;<span class="op" id="6438532">/</span>&nbsp;<span class="num" id="6438534">15</span><span class="op" id="6438536">)</span><span class="op" id="6438537">,</span>&nbsp;<span class="builtintype" id="6438539">uint8</span><span class="op" id="6438544">(</span><span class="ident" id="6438545">y</span>&nbsp;<span class="op" id="6438547">*</span>&nbsp;<span class="ident" id="6438549">alpha</span>&nbsp;<span class="op" id="6438555">/</span>&nbsp;<span class="num" id="6438557">15</span><span class="op" id="6438559">)</span><span class="op" id="6438560">,</span>&nbsp;<span class="num" id="6438562">0</span><span class="op" id="6438563">,</span>&nbsp;<span class="builtintype" id="6438565">uint8</span><span class="op" id="6438570">(</span><span class="ident" id="6438571">alpha</span><span class="op" id="6438576">)</span><span class="op" id="6438577">}</span><span class="op" id="6438578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6438588">return</span>&nbsp;<span class="ident" id="6438595">m</span><br>
<span class="lineno">95</span><span class="op" id="6438597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438600">type</span>&nbsp;<span class="ident" id="6438605">drawTest</span>&nbsp;<span class="keyword" id="6438614">struct</span>&nbsp;<span class="op" id="6438621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438624">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6438633">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438641">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438650">image</span><span class="op" id="6438655">.</span><span class="ident" id="6438656">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438663">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438672">image</span><span class="op" id="6438677">.</span><span class="ident" id="6438678">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438685">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438694">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438698">expected</span>&nbsp;<span class="ident" id="6438707">color</span><span class="op" id="6438712">.</span><span class="ident" id="6438713">Color</span><br>
<span class="lineno"></span><span class="op" id="6438719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6438722">var</span>&nbsp;<span class="ident" id="6438726">drawTests</span>&nbsp;<span class="op" id="6438736">=</span>&nbsp;<span class="op" id="6438738">[</span><span class="op" id="6438739">]</span><span class="ident" id="6438740">drawTest</span><span class="op" id="6438748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6438751">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438781">{</span><span class="string" id="6438782">&#34;nop&#34;</span><span class="op" id="6438787">,</span>&nbsp;<span class="ident" id="6438789">vgradGreen</span><span class="op" id="6438799">(</span><span class="num" id="6438800">255</span><span class="op" id="6438803">)</span><span class="op" id="6438804">,</span>&nbsp;<span class="ident" id="6438806">fillAlpha</span><span class="op" id="6438815">(</span><span class="num" id="6438816">0</span><span class="op" id="6438817">)</span><span class="op" id="6438818">,</span>&nbsp;<span class="ident" id="6438820">Over</span><span class="op" id="6438824">,</span>&nbsp;<span class="ident" id="6438826">color</span><span class="op" id="6438831">.</span><span class="ident" id="6438832">RGBA</span><span class="op" id="6438836">{</span><span class="num" id="6438837">136</span><span class="op" id="6438840">,</span>&nbsp;<span class="num" id="6438842">0</span><span class="op" id="6438843">,</span>&nbsp;<span class="num" id="6438845">0</span><span class="op" id="6438846">,</span>&nbsp;<span class="num" id="6438848">255</span><span class="op" id="6438851">}</span><span class="op" id="6438852">}</span><span class="op" id="6438853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6438856">{</span><span class="string" id="6438857">&#34;clear&#34;</span><span class="op" id="6438864">,</span>&nbsp;<span class="ident" id="6438866">vgradGreen</span><span class="op" id="6438876">(</span><span class="num" id="6438877">255</span><span class="op" id="6438880">)</span><span class="op" id="6438881">,</span>&nbsp;<span class="ident" id="6438883">fillAlpha</span><span class="op" id="6438892">(</span><span class="num" id="6438893">0</span><span class="op" id="6438894">)</span><span class="op" id="6438895">,</span>&nbsp;<span class="ident" id="6438897">Src</span><span class="op" id="6438900">,</span>&nbsp;<span class="ident" id="6438902">color</span><span class="op" id="6438907">.</span><span class="ident" id="6438908">RGBA</span><span class="op" id="6438912">{</span><span class="num" id="6438913">0</span><span class="op" id="6438914">,</span>&nbsp;<span class="num" id="6438916">0</span><span class="op" id="6438917">,</span>&nbsp;<span class="num" id="6438919">0</span><span class="op" id="6438920">,</span>&nbsp;<span class="num" id="6438922">0</span><span class="op" id="6438923">}</span><span class="op" id="6438924">}</span><span class="op" id="6438925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6438928">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6438982">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439007">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439054">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439094">{</span><span class="string" id="6439095">&#34;fill&#34;</span><span class="op" id="6439101">,</span>&nbsp;<span class="ident" id="6439103">fillBlue</span><span class="op" id="6439111">(</span><span class="num" id="6439112">90</span><span class="op" id="6439114">)</span><span class="op" id="6439115">,</span>&nbsp;<span class="ident" id="6439117">fillAlpha</span><span class="op" id="6439126">(</span><span class="num" id="6439127">255</span><span class="op" id="6439130">)</span><span class="op" id="6439131">,</span>&nbsp;<span class="ident" id="6439133">Over</span><span class="op" id="6439137">,</span>&nbsp;<span class="ident" id="6439139">color</span><span class="op" id="6439144">.</span><span class="ident" id="6439145">RGBA</span><span class="op" id="6439149">{</span><span class="num" id="6439150">88</span><span class="op" id="6439152">,</span>&nbsp;<span class="num" id="6439154">0</span><span class="op" id="6439155">,</span>&nbsp;<span class="num" id="6439157">90</span><span class="op" id="6439159">,</span>&nbsp;<span class="num" id="6439161">255</span><span class="op" id="6439164">}</span><span class="op" id="6439165">}</span><span class="op" id="6439166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439169">{</span><span class="string" id="6439170">&#34;fillSrc&#34;</span><span class="op" id="6439179">,</span>&nbsp;<span class="ident" id="6439181">fillBlue</span><span class="op" id="6439189">(</span><span class="num" id="6439190">90</span><span class="op" id="6439192">)</span><span class="op" id="6439193">,</span>&nbsp;<span class="ident" id="6439195">fillAlpha</span><span class="op" id="6439204">(</span><span class="num" id="6439205">255</span><span class="op" id="6439208">)</span><span class="op" id="6439209">,</span>&nbsp;<span class="ident" id="6439211">Src</span><span class="op" id="6439214">,</span>&nbsp;<span class="ident" id="6439216">color</span><span class="op" id="6439221">.</span><span class="ident" id="6439222">RGBA</span><span class="op" id="6439226">{</span><span class="num" id="6439227">0</span><span class="op" id="6439228">,</span>&nbsp;<span class="num" id="6439230">0</span><span class="op" id="6439231">,</span>&nbsp;<span class="num" id="6439233">90</span><span class="op" id="6439235">,</span>&nbsp;<span class="num" id="6439237">90</span><span class="op" id="6439239">}</span><span class="op" id="6439240">}</span><span class="op" id="6439241">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439244">{</span><span class="string" id="6439245">&#34;fillAlpha&#34;</span><span class="op" id="6439256">,</span>&nbsp;<span class="ident" id="6439258">fillBlue</span><span class="op" id="6439266">(</span><span class="num" id="6439267">90</span><span class="op" id="6439269">)</span><span class="op" id="6439270">,</span>&nbsp;<span class="ident" id="6439272">fillAlpha</span><span class="op" id="6439281">(</span><span class="num" id="6439282">192</span><span class="op" id="6439285">)</span><span class="op" id="6439286">,</span>&nbsp;<span class="ident" id="6439288">Over</span><span class="op" id="6439292">,</span>&nbsp;<span class="ident" id="6439294">color</span><span class="op" id="6439299">.</span><span class="ident" id="6439300">RGBA</span><span class="op" id="6439304">{</span><span class="num" id="6439305">100</span><span class="op" id="6439308">,</span>&nbsp;<span class="num" id="6439310">0</span><span class="op" id="6439311">,</span>&nbsp;<span class="num" id="6439313">68</span><span class="op" id="6439315">,</span>&nbsp;<span class="num" id="6439317">255</span><span class="op" id="6439320">}</span><span class="op" id="6439321">}</span><span class="op" id="6439322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439325">{</span><span class="string" id="6439326">&#34;fillAlphaSrc&#34;</span><span class="op" id="6439340">,</span>&nbsp;<span class="ident" id="6439342">fillBlue</span><span class="op" id="6439350">(</span><span class="num" id="6439351">90</span><span class="op" id="6439353">)</span><span class="op" id="6439354">,</span>&nbsp;<span class="ident" id="6439356">fillAlpha</span><span class="op" id="6439365">(</span><span class="num" id="6439366">192</span><span class="op" id="6439369">)</span><span class="op" id="6439370">,</span>&nbsp;<span class="ident" id="6439372">Src</span><span class="op" id="6439375">,</span>&nbsp;<span class="ident" id="6439377">color</span><span class="op" id="6439382">.</span><span class="ident" id="6439383">RGBA</span><span class="op" id="6439387">{</span><span class="num" id="6439388">0</span><span class="op" id="6439389">,</span>&nbsp;<span class="num" id="6439391">0</span><span class="op" id="6439392">,</span>&nbsp;<span class="num" id="6439394">68</span><span class="op" id="6439396">,</span>&nbsp;<span class="num" id="6439398">68</span><span class="op" id="6439400">}</span><span class="op" id="6439401">}</span><span class="op" id="6439402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439405">{</span><span class="string" id="6439406">&#34;fillNil&#34;</span><span class="op" id="6439415">,</span>&nbsp;<span class="ident" id="6439417">fillBlue</span><span class="op" id="6439425">(</span><span class="num" id="6439426">90</span><span class="op" id="6439428">)</span><span class="op" id="6439429">,</span>&nbsp;<span class="ident" id="6439431">nil</span><span class="op" id="6439434">,</span>&nbsp;<span class="ident" id="6439436">Over</span><span class="op" id="6439440">,</span>&nbsp;<span class="ident" id="6439442">color</span><span class="op" id="6439447">.</span><span class="ident" id="6439448">RGBA</span><span class="op" id="6439452">{</span><span class="num" id="6439453">88</span><span class="op" id="6439455">,</span>&nbsp;<span class="num" id="6439457">0</span><span class="op" id="6439458">,</span>&nbsp;<span class="num" id="6439460">90</span><span class="op" id="6439462">,</span>&nbsp;<span class="num" id="6439464">255</span><span class="op" id="6439467">}</span><span class="op" id="6439468">}</span><span class="op" id="6439469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439472">{</span><span class="string" id="6439473">&#34;fillNilSrc&#34;</span><span class="op" id="6439485">,</span>&nbsp;<span class="ident" id="6439487">fillBlue</span><span class="op" id="6439495">(</span><span class="num" id="6439496">90</span><span class="op" id="6439498">)</span><span class="op" id="6439499">,</span>&nbsp;<span class="ident" id="6439501">nil</span><span class="op" id="6439504">,</span>&nbsp;<span class="ident" id="6439506">Src</span><span class="op" id="6439509">,</span>&nbsp;<span class="ident" id="6439511">color</span><span class="op" id="6439516">.</span><span class="ident" id="6439517">RGBA</span><span class="op" id="6439521">{</span><span class="num" id="6439522">0</span><span class="op" id="6439523">,</span>&nbsp;<span class="num" id="6439525">0</span><span class="op" id="6439526">,</span>&nbsp;<span class="num" id="6439528">90</span><span class="op" id="6439530">,</span>&nbsp;<span class="num" id="6439532">90</span><span class="op" id="6439534">}</span><span class="op" id="6439535">}</span><span class="op" id="6439536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439539">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439594">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439619">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439666">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439706">{</span><span class="string" id="6439707">&#34;copy&#34;</span><span class="op" id="6439713">,</span>&nbsp;<span class="ident" id="6439715">vgradGreen</span><span class="op" id="6439725">(</span><span class="num" id="6439726">90</span><span class="op" id="6439728">)</span><span class="op" id="6439729">,</span>&nbsp;<span class="ident" id="6439731">fillAlpha</span><span class="op" id="6439740">(</span><span class="num" id="6439741">255</span><span class="op" id="6439744">)</span><span class="op" id="6439745">,</span>&nbsp;<span class="ident" id="6439747">Over</span><span class="op" id="6439751">,</span>&nbsp;<span class="ident" id="6439753">color</span><span class="op" id="6439758">.</span><span class="ident" id="6439759">RGBA</span><span class="op" id="6439763">{</span><span class="num" id="6439764">88</span><span class="op" id="6439766">,</span>&nbsp;<span class="num" id="6439768">48</span><span class="op" id="6439770">,</span>&nbsp;<span class="num" id="6439772">0</span><span class="op" id="6439773">,</span>&nbsp;<span class="num" id="6439775">255</span><span class="op" id="6439778">}</span><span class="op" id="6439779">}</span><span class="op" id="6439780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439783">{</span><span class="string" id="6439784">&#34;copySrc&#34;</span><span class="op" id="6439793">,</span>&nbsp;<span class="ident" id="6439795">vgradGreen</span><span class="op" id="6439805">(</span><span class="num" id="6439806">90</span><span class="op" id="6439808">)</span><span class="op" id="6439809">,</span>&nbsp;<span class="ident" id="6439811">fillAlpha</span><span class="op" id="6439820">(</span><span class="num" id="6439821">255</span><span class="op" id="6439824">)</span><span class="op" id="6439825">,</span>&nbsp;<span class="ident" id="6439827">Src</span><span class="op" id="6439830">,</span>&nbsp;<span class="ident" id="6439832">color</span><span class="op" id="6439837">.</span><span class="ident" id="6439838">RGBA</span><span class="op" id="6439842">{</span><span class="num" id="6439843">0</span><span class="op" id="6439844">,</span>&nbsp;<span class="num" id="6439846">48</span><span class="op" id="6439848">,</span>&nbsp;<span class="num" id="6439850">0</span><span class="op" id="6439851">,</span>&nbsp;<span class="num" id="6439853">90</span><span class="op" id="6439855">}</span><span class="op" id="6439856">}</span><span class="op" id="6439857">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439860">{</span><span class="string" id="6439861">&#34;copyAlpha&#34;</span><span class="op" id="6439872">,</span>&nbsp;<span class="ident" id="6439874">vgradGreen</span><span class="op" id="6439884">(</span><span class="num" id="6439885">90</span><span class="op" id="6439887">)</span><span class="op" id="6439888">,</span>&nbsp;<span class="ident" id="6439890">fillAlpha</span><span class="op" id="6439899">(</span><span class="num" id="6439900">192</span><span class="op" id="6439903">)</span><span class="op" id="6439904">,</span>&nbsp;<span class="ident" id="6439906">Over</span><span class="op" id="6439910">,</span>&nbsp;<span class="ident" id="6439912">color</span><span class="op" id="6439917">.</span><span class="ident" id="6439918">RGBA</span><span class="op" id="6439922">{</span><span class="num" id="6439923">100</span><span class="op" id="6439926">,</span>&nbsp;<span class="num" id="6439928">36</span><span class="op" id="6439930">,</span>&nbsp;<span class="num" id="6439932">0</span><span class="op" id="6439933">,</span>&nbsp;<span class="num" id="6439935">255</span><span class="op" id="6439938">}</span><span class="op" id="6439939">}</span><span class="op" id="6439940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439943">{</span><span class="string" id="6439944">&#34;copyAlphaSrc&#34;</span><span class="op" id="6439958">,</span>&nbsp;<span class="ident" id="6439960">vgradGreen</span><span class="op" id="6439970">(</span><span class="num" id="6439971">90</span><span class="op" id="6439973">)</span><span class="op" id="6439974">,</span>&nbsp;<span class="ident" id="6439976">fillAlpha</span><span class="op" id="6439985">(</span><span class="num" id="6439986">192</span><span class="op" id="6439989">)</span><span class="op" id="6439990">,</span>&nbsp;<span class="ident" id="6439992">Src</span><span class="op" id="6439995">,</span>&nbsp;<span class="ident" id="6439997">color</span><span class="op" id="6440002">.</span><span class="ident" id="6440003">RGBA</span><span class="op" id="6440007">{</span><span class="num" id="6440008">0</span><span class="op" id="6440009">,</span>&nbsp;<span class="num" id="6440011">36</span><span class="op" id="6440013">,</span>&nbsp;<span class="num" id="6440015">0</span><span class="op" id="6440016">,</span>&nbsp;<span class="num" id="6440018">68</span><span class="op" id="6440020">}</span><span class="op" id="6440021">}</span><span class="op" id="6440022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440025">{</span><span class="string" id="6440026">&#34;copyNil&#34;</span><span class="op" id="6440035">,</span>&nbsp;<span class="ident" id="6440037">vgradGreen</span><span class="op" id="6440047">(</span><span class="num" id="6440048">90</span><span class="op" id="6440050">)</span><span class="op" id="6440051">,</span>&nbsp;<span class="ident" id="6440053">nil</span><span class="op" id="6440056">,</span>&nbsp;<span class="ident" id="6440058">Over</span><span class="op" id="6440062">,</span>&nbsp;<span class="ident" id="6440064">color</span><span class="op" id="6440069">.</span><span class="ident" id="6440070">RGBA</span><span class="op" id="6440074">{</span><span class="num" id="6440075">88</span><span class="op" id="6440077">,</span>&nbsp;<span class="num" id="6440079">48</span><span class="op" id="6440081">,</span>&nbsp;<span class="num" id="6440083">0</span><span class="op" id="6440084">,</span>&nbsp;<span class="num" id="6440086">255</span><span class="op" id="6440089">}</span><span class="op" id="6440090">}</span><span class="op" id="6440091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440094">{</span><span class="string" id="6440095">&#34;copyNilSrc&#34;</span><span class="op" id="6440107">,</span>&nbsp;<span class="ident" id="6440109">vgradGreen</span><span class="op" id="6440119">(</span><span class="num" id="6440120">90</span><span class="op" id="6440122">)</span><span class="op" id="6440123">,</span>&nbsp;<span class="ident" id="6440125">nil</span><span class="op" id="6440128">,</span>&nbsp;<span class="ident" id="6440130">Src</span><span class="op" id="6440133">,</span>&nbsp;<span class="ident" id="6440135">color</span><span class="op" id="6440140">.</span><span class="ident" id="6440141">RGBA</span><span class="op" id="6440145">{</span><span class="num" id="6440146">0</span><span class="op" id="6440147">,</span>&nbsp;<span class="num" id="6440149">48</span><span class="op" id="6440151">,</span>&nbsp;<span class="num" id="6440153">0</span><span class="op" id="6440154">,</span>&nbsp;<span class="num" id="6440156">90</span><span class="op" id="6440158">}</span><span class="op" id="6440159">}</span><span class="op" id="6440160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440163">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440224">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440249">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440296">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440391">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440484">{</span><span class="string" id="6440485">&#34;nrgba&#34;</span><span class="op" id="6440492">,</span>&nbsp;<span class="ident" id="6440494">vgradGreenNRGBA</span><span class="op" id="6440509">(</span><span class="num" id="6440510">90</span><span class="op" id="6440512">)</span><span class="op" id="6440513">,</span>&nbsp;<span class="ident" id="6440515">fillAlpha</span><span class="op" id="6440524">(</span><span class="num" id="6440525">255</span><span class="op" id="6440528">)</span><span class="op" id="6440529">,</span>&nbsp;<span class="ident" id="6440531">Over</span><span class="op" id="6440535">,</span>&nbsp;<span class="ident" id="6440537">color</span><span class="op" id="6440542">.</span><span class="ident" id="6440543">RGBA</span><span class="op" id="6440547">{</span><span class="num" id="6440548">88</span><span class="op" id="6440550">,</span>&nbsp;<span class="num" id="6440552">46</span><span class="op" id="6440554">,</span>&nbsp;<span class="num" id="6440556">0</span><span class="op" id="6440557">,</span>&nbsp;<span class="num" id="6440559">255</span><span class="op" id="6440562">}</span><span class="op" id="6440563">}</span><span class="op" id="6440564">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440567">{</span><span class="string" id="6440568">&#34;nrgbaSrc&#34;</span><span class="op" id="6440578">,</span>&nbsp;<span class="ident" id="6440580">vgradGreenNRGBA</span><span class="op" id="6440595">(</span><span class="num" id="6440596">90</span><span class="op" id="6440598">)</span><span class="op" id="6440599">,</span>&nbsp;<span class="ident" id="6440601">fillAlpha</span><span class="op" id="6440610">(</span><span class="num" id="6440611">255</span><span class="op" id="6440614">)</span><span class="op" id="6440615">,</span>&nbsp;<span class="ident" id="6440617">Src</span><span class="op" id="6440620">,</span>&nbsp;<span class="ident" id="6440622">color</span><span class="op" id="6440627">.</span><span class="ident" id="6440628">RGBA</span><span class="op" id="6440632">{</span><span class="num" id="6440633">0</span><span class="op" id="6440634">,</span>&nbsp;<span class="num" id="6440636">46</span><span class="op" id="6440638">,</span>&nbsp;<span class="num" id="6440640">0</span><span class="op" id="6440641">,</span>&nbsp;<span class="num" id="6440643">90</span><span class="op" id="6440645">}</span><span class="op" id="6440646">}</span><span class="op" id="6440647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440650">{</span><span class="string" id="6440651">&#34;nrgbaAlpha&#34;</span><span class="op" id="6440663">,</span>&nbsp;<span class="ident" id="6440665">vgradGreenNRGBA</span><span class="op" id="6440680">(</span><span class="num" id="6440681">90</span><span class="op" id="6440683">)</span><span class="op" id="6440684">,</span>&nbsp;<span class="ident" id="6440686">fillAlpha</span><span class="op" id="6440695">(</span><span class="num" id="6440696">192</span><span class="op" id="6440699">)</span><span class="op" id="6440700">,</span>&nbsp;<span class="ident" id="6440702">Over</span><span class="op" id="6440706">,</span>&nbsp;<span class="ident" id="6440708">color</span><span class="op" id="6440713">.</span><span class="ident" id="6440714">RGBA</span><span class="op" id="6440718">{</span><span class="num" id="6440719">100</span><span class="op" id="6440722">,</span>&nbsp;<span class="num" id="6440724">34</span><span class="op" id="6440726">,</span>&nbsp;<span class="num" id="6440728">0</span><span class="op" id="6440729">,</span>&nbsp;<span class="num" id="6440731">255</span><span class="op" id="6440734">}</span><span class="op" id="6440735">}</span><span class="op" id="6440736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440739">{</span><span class="string" id="6440740">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6440755">,</span>&nbsp;<span class="ident" id="6440757">vgradGreenNRGBA</span><span class="op" id="6440772">(</span><span class="num" id="6440773">90</span><span class="op" id="6440775">)</span><span class="op" id="6440776">,</span>&nbsp;<span class="ident" id="6440778">fillAlpha</span><span class="op" id="6440787">(</span><span class="num" id="6440788">192</span><span class="op" id="6440791">)</span><span class="op" id="6440792">,</span>&nbsp;<span class="ident" id="6440794">Src</span><span class="op" id="6440797">,</span>&nbsp;<span class="ident" id="6440799">color</span><span class="op" id="6440804">.</span><span class="ident" id="6440805">RGBA</span><span class="op" id="6440809">{</span><span class="num" id="6440810">0</span><span class="op" id="6440811">,</span>&nbsp;<span class="num" id="6440813">34</span><span class="op" id="6440815">,</span>&nbsp;<span class="num" id="6440817">0</span><span class="op" id="6440818">,</span>&nbsp;<span class="num" id="6440820">68</span><span class="op" id="6440822">}</span><span class="op" id="6440823">}</span><span class="op" id="6440824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440827">{</span><span class="string" id="6440828">&#34;nrgbaNil&#34;</span><span class="op" id="6440838">,</span>&nbsp;<span class="ident" id="6440840">vgradGreenNRGBA</span><span class="op" id="6440855">(</span><span class="num" id="6440856">90</span><span class="op" id="6440858">)</span><span class="op" id="6440859">,</span>&nbsp;<span class="ident" id="6440861">nil</span><span class="op" id="6440864">,</span>&nbsp;<span class="ident" id="6440866">Over</span><span class="op" id="6440870">,</span>&nbsp;<span class="ident" id="6440872">color</span><span class="op" id="6440877">.</span><span class="ident" id="6440878">RGBA</span><span class="op" id="6440882">{</span><span class="num" id="6440883">88</span><span class="op" id="6440885">,</span>&nbsp;<span class="num" id="6440887">46</span><span class="op" id="6440889">,</span>&nbsp;<span class="num" id="6440891">0</span><span class="op" id="6440892">,</span>&nbsp;<span class="num" id="6440894">255</span><span class="op" id="6440897">}</span><span class="op" id="6440898">}</span><span class="op" id="6440899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440902">{</span><span class="string" id="6440903">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6440916">,</span>&nbsp;<span class="ident" id="6440918">vgradGreenNRGBA</span><span class="op" id="6440933">(</span><span class="num" id="6440934">90</span><span class="op" id="6440936">)</span><span class="op" id="6440937">,</span>&nbsp;<span class="ident" id="6440939">nil</span><span class="op" id="6440942">,</span>&nbsp;<span class="ident" id="6440944">Src</span><span class="op" id="6440947">,</span>&nbsp;<span class="ident" id="6440949">color</span><span class="op" id="6440954">.</span><span class="ident" id="6440955">RGBA</span><span class="op" id="6440959">{</span><span class="num" id="6440960">0</span><span class="op" id="6440961">,</span>&nbsp;<span class="num" id="6440963">46</span><span class="op" id="6440965">,</span>&nbsp;<span class="num" id="6440967">0</span><span class="op" id="6440968">,</span>&nbsp;<span class="num" id="6440970">90</span><span class="op" id="6440972">}</span><span class="op" id="6440973">}</span><span class="op" id="6440974">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440977">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441038">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441063">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441110">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441202">{</span><span class="string" id="6441203">&#34;ycbcr&#34;</span><span class="op" id="6441210">,</span>&nbsp;<span class="ident" id="6441212">vgradCr</span><span class="op" id="6441219">(</span><span class="op" id="6441220">)</span><span class="op" id="6441221">,</span>&nbsp;<span class="ident" id="6441223">fillAlpha</span><span class="op" id="6441232">(</span><span class="num" id="6441233">255</span><span class="op" id="6441236">)</span><span class="op" id="6441237">,</span>&nbsp;<span class="ident" id="6441239">Over</span><span class="op" id="6441243">,</span>&nbsp;<span class="ident" id="6441245">color</span><span class="op" id="6441250">.</span><span class="ident" id="6441251">RGBA</span><span class="op" id="6441255">{</span><span class="num" id="6441256">11</span><span class="op" id="6441258">,</span>&nbsp;<span class="num" id="6441260">38</span><span class="op" id="6441262">,</span>&nbsp;<span class="num" id="6441264">0</span><span class="op" id="6441265">,</span>&nbsp;<span class="num" id="6441267">255</span><span class="op" id="6441270">}</span><span class="op" id="6441271">}</span><span class="op" id="6441272">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441275">{</span><span class="string" id="6441276">&#34;ycbcrSrc&#34;</span><span class="op" id="6441286">,</span>&nbsp;<span class="ident" id="6441288">vgradCr</span><span class="op" id="6441295">(</span><span class="op" id="6441296">)</span><span class="op" id="6441297">,</span>&nbsp;<span class="ident" id="6441299">fillAlpha</span><span class="op" id="6441308">(</span><span class="num" id="6441309">255</span><span class="op" id="6441312">)</span><span class="op" id="6441313">,</span>&nbsp;<span class="ident" id="6441315">Src</span><span class="op" id="6441318">,</span>&nbsp;<span class="ident" id="6441320">color</span><span class="op" id="6441325">.</span><span class="ident" id="6441326">RGBA</span><span class="op" id="6441330">{</span><span class="num" id="6441331">11</span><span class="op" id="6441333">,</span>&nbsp;<span class="num" id="6441335">38</span><span class="op" id="6441337">,</span>&nbsp;<span class="num" id="6441339">0</span><span class="op" id="6441340">,</span>&nbsp;<span class="num" id="6441342">255</span><span class="op" id="6441345">}</span><span class="op" id="6441346">}</span><span class="op" id="6441347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441350">{</span><span class="string" id="6441351">&#34;ycbcrAlpha&#34;</span><span class="op" id="6441363">,</span>&nbsp;<span class="ident" id="6441365">vgradCr</span><span class="op" id="6441372">(</span><span class="op" id="6441373">)</span><span class="op" id="6441374">,</span>&nbsp;<span class="ident" id="6441376">fillAlpha</span><span class="op" id="6441385">(</span><span class="num" id="6441386">192</span><span class="op" id="6441389">)</span><span class="op" id="6441390">,</span>&nbsp;<span class="ident" id="6441392">Over</span><span class="op" id="6441396">,</span>&nbsp;<span class="ident" id="6441398">color</span><span class="op" id="6441403">.</span><span class="ident" id="6441404">RGBA</span><span class="op" id="6441408">{</span><span class="num" id="6441409">42</span><span class="op" id="6441411">,</span>&nbsp;<span class="num" id="6441413">28</span><span class="op" id="6441415">,</span>&nbsp;<span class="num" id="6441417">0</span><span class="op" id="6441418">,</span>&nbsp;<span class="num" id="6441420">255</span><span class="op" id="6441423">}</span><span class="op" id="6441424">}</span><span class="op" id="6441425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441428">{</span><span class="string" id="6441429">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6441444">,</span>&nbsp;<span class="ident" id="6441446">vgradCr</span><span class="op" id="6441453">(</span><span class="op" id="6441454">)</span><span class="op" id="6441455">,</span>&nbsp;<span class="ident" id="6441457">fillAlpha</span><span class="op" id="6441466">(</span><span class="num" id="6441467">192</span><span class="op" id="6441470">)</span><span class="op" id="6441471">,</span>&nbsp;<span class="ident" id="6441473">Src</span><span class="op" id="6441476">,</span>&nbsp;<span class="ident" id="6441478">color</span><span class="op" id="6441483">.</span><span class="ident" id="6441484">RGBA</span><span class="op" id="6441488">{</span><span class="num" id="6441489">8</span><span class="op" id="6441490">,</span>&nbsp;<span class="num" id="6441492">28</span><span class="op" id="6441494">,</span>&nbsp;<span class="num" id="6441496">0</span><span class="op" id="6441497">,</span>&nbsp;<span class="num" id="6441499">192</span><span class="op" id="6441502">}</span><span class="op" id="6441503">}</span><span class="op" id="6441504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441507">{</span><span class="string" id="6441508">&#34;ycbcrNil&#34;</span><span class="op" id="6441518">,</span>&nbsp;<span class="ident" id="6441520">vgradCr</span><span class="op" id="6441527">(</span><span class="op" id="6441528">)</span><span class="op" id="6441529">,</span>&nbsp;<span class="ident" id="6441531">nil</span><span class="op" id="6441534">,</span>&nbsp;<span class="ident" id="6441536">Over</span><span class="op" id="6441540">,</span>&nbsp;<span class="ident" id="6441542">color</span><span class="op" id="6441547">.</span><span class="ident" id="6441548">RGBA</span><span class="op" id="6441552">{</span><span class="num" id="6441553">11</span><span class="op" id="6441555">,</span>&nbsp;<span class="num" id="6441557">38</span><span class="op" id="6441559">,</span>&nbsp;<span class="num" id="6441561">0</span><span class="op" id="6441562">,</span>&nbsp;<span class="num" id="6441564">255</span><span class="op" id="6441567">}</span><span class="op" id="6441568">}</span><span class="op" id="6441569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441572">{</span><span class="string" id="6441573">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6441586">,</span>&nbsp;<span class="ident" id="6441588">vgradCr</span><span class="op" id="6441595">(</span><span class="op" id="6441596">)</span><span class="op" id="6441597">,</span>&nbsp;<span class="ident" id="6441599">nil</span><span class="op" id="6441602">,</span>&nbsp;<span class="ident" id="6441604">Src</span><span class="op" id="6441607">,</span>&nbsp;<span class="ident" id="6441609">color</span><span class="op" id="6441614">.</span><span class="ident" id="6441615">RGBA</span><span class="op" id="6441619">{</span><span class="num" id="6441620">11</span><span class="op" id="6441622">,</span>&nbsp;<span class="num" id="6441624">38</span><span class="op" id="6441626">,</span>&nbsp;<span class="num" id="6441628">0</span><span class="op" id="6441629">,</span>&nbsp;<span class="num" id="6441631">255</span><span class="op" id="6441634">}</span><span class="op" id="6441635">}</span><span class="op" id="6441636">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441639">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441678">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441703">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441750">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441792">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441835">{</span><span class="string" id="6441836">&#34;generic&#34;</span><span class="op" id="6441845">,</span>&nbsp;<span class="ident" id="6441847">fillBlue</span><span class="op" id="6441855">(</span><span class="num" id="6441856">255</span><span class="op" id="6441859">)</span><span class="op" id="6441860">,</span>&nbsp;<span class="ident" id="6441862">vgradAlpha</span><span class="op" id="6441872">(</span><span class="num" id="6441873">192</span><span class="op" id="6441876">)</span><span class="op" id="6441877">,</span>&nbsp;<span class="ident" id="6441879">Over</span><span class="op" id="6441883">,</span>&nbsp;<span class="ident" id="6441885">color</span><span class="op" id="6441890">.</span><span class="ident" id="6441891">RGBA</span><span class="op" id="6441895">{</span><span class="num" id="6441896">81</span><span class="op" id="6441898">,</span>&nbsp;<span class="num" id="6441900">0</span><span class="op" id="6441901">,</span>&nbsp;<span class="num" id="6441903">102</span><span class="op" id="6441906">,</span>&nbsp;<span class="num" id="6441908">255</span><span class="op" id="6441911">}</span><span class="op" id="6441912">}</span><span class="op" id="6441913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441916">{</span><span class="string" id="6441917">&#34;genericSrc&#34;</span><span class="op" id="6441929">,</span>&nbsp;<span class="ident" id="6441931">fillBlue</span><span class="op" id="6441939">(</span><span class="num" id="6441940">255</span><span class="op" id="6441943">)</span><span class="op" id="6441944">,</span>&nbsp;<span class="ident" id="6441946">vgradAlpha</span><span class="op" id="6441956">(</span><span class="num" id="6441957">192</span><span class="op" id="6441960">)</span><span class="op" id="6441961">,</span>&nbsp;<span class="ident" id="6441963">Src</span><span class="op" id="6441966">,</span>&nbsp;<span class="ident" id="6441968">color</span><span class="op" id="6441973">.</span><span class="ident" id="6441974">RGBA</span><span class="op" id="6441978">{</span><span class="num" id="6441979">0</span><span class="op" id="6441980">,</span>&nbsp;<span class="num" id="6441982">0</span><span class="op" id="6441983">,</span>&nbsp;<span class="num" id="6441985">102</span><span class="op" id="6441988">,</span>&nbsp;<span class="num" id="6441990">102</span><span class="op" id="6441993">}</span><span class="op" id="6441994">}</span><span class="op" id="6441995">,</span><br>
<span class="lineno"></span><span class="op" id="6441997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6442000">func</span>&nbsp;<span class="ident" id="6442005">makeGolden</span><span class="op" id="6442015">(</span><span class="ident" id="6442016">dst</span>&nbsp;<span class="ident" id="6442020">image</span><span class="op" id="6442025">.</span><span class="ident" id="6442026">Image</span><span class="op" id="6442031">,</span>&nbsp;<span class="ident" id="6442033">r</span>&nbsp;<span class="ident" id="6442035">image</span><span class="op" id="6442040">.</span><span class="ident" id="6442041">Rectangle</span><span class="op" id="6442050">,</span>&nbsp;<span class="ident" id="6442052">src</span>&nbsp;<span class="ident" id="6442056">image</span><span class="op" id="6442061">.</span><span class="ident" id="6442062">Image</span><span class="op" id="6442067">,</span>&nbsp;<span class="ident" id="6442069">sp</span>&nbsp;<span class="ident" id="6442072">image</span><span class="op" id="6442077">.</span><span class="ident" id="6442078">Point</span><span class="op" id="6442083">,</span>&nbsp;<span class="ident" id="6442085">mask</span>&nbsp;<span class="ident" id="6442090">image</span><span class="op" id="6442095">.</span><span class="ident" id="6442096">Image</span><span class="op" id="6442101">,</span>&nbsp;<span class="ident" id="6442103">mp</span>&nbsp;<span class="ident" id="6442106">image</span><span class="op" id="6442111">.</span><span class="ident" id="6442112">Point</span><span class="op" id="6442117">,</span>&nbsp;<span class="ident" id="6442119">op</span>&nbsp;<span class="ident" id="6442122">Op</span><span class="op" id="6442124">)</span>&nbsp;<span class="ident" id="6442126">image</span><span class="op" id="6442131">.</span><span class="ident" id="6442132">Image</span>&nbsp;<span class="op" id="6442138">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442141">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442216">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442286">b</span>&nbsp;<span class="op" id="6442288">:=</span>&nbsp;<span class="ident" id="6442291">dst</span><span class="op" id="6442294">.</span><span class="ident" id="6442295">Bounds</span><span class="op" id="6442301">(</span><span class="op" id="6442302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442305">sb</span>&nbsp;<span class="op" id="6442308">:=</span>&nbsp;<span class="ident" id="6442311">src</span><span class="op" id="6442314">.</span><span class="ident" id="6442315">Bounds</span><span class="op" id="6442321">(</span><span class="op" id="6442322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442325">mb</span>&nbsp;<span class="op" id="6442328">:=</span>&nbsp;<span class="ident" id="6442331">image</span><span class="op" id="6442336">.</span><span class="ident" id="6442337">Rect</span><span class="op" id="6442341">(</span><span class="op" id="6442342">-</span><span class="num" id="6442343">1e9</span><span class="op" id="6442346">,</span>&nbsp;<span class="op" id="6442348">-</span><span class="num" id="6442349">1e9</span><span class="op" id="6442352">,</span>&nbsp;<span class="num" id="6442354">1e9</span><span class="op" id="6442357">,</span>&nbsp;<span class="num" id="6442359">1e9</span><span class="op" id="6442362">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442365">if</span>&nbsp;<span class="ident" id="6442368">mask</span>&nbsp;<span class="op" id="6442373">!=</span>&nbsp;<span class="ident" id="6442376">nil</span>&nbsp;<span class="op" id="6442380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442384">mb</span>&nbsp;<span class="op" id="6442387">=</span>&nbsp;<span class="ident" id="6442389">mask</span><span class="op" id="6442393">.</span><span class="ident" id="6442394">Bounds</span><span class="op" id="6442400">(</span><span class="op" id="6442401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442407">golden</span>&nbsp;<span class="op" id="6442414">:=</span>&nbsp;<span class="ident" id="6442417">image</span><span class="op" id="6442422">.</span><span class="ident" id="6442423">NewRGBA</span><span class="op" id="6442430">(</span><span class="ident" id="6442431">image</span><span class="op" id="6442436">.</span><span class="ident" id="6442437">Rect</span><span class="op" id="6442441">(</span><span class="num" id="6442442">0</span><span class="op" id="6442443">,</span>&nbsp;<span class="num" id="6442445">0</span><span class="op" id="6442446">,</span>&nbsp;<span class="ident" id="6442448">b</span><span class="op" id="6442449">.</span><span class="ident" id="6442450">Max</span><span class="op" id="6442453">.</span><span class="ident" id="6442454">X</span><span class="op" id="6442455">,</span>&nbsp;<span class="ident" id="6442457">b</span><span class="op" id="6442458">.</span><span class="ident" id="6442459">Max</span><span class="op" id="6442462">.</span><span class="ident" id="6442463">Y</span><span class="op" id="6442464">)</span><span class="op" id="6442465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442468">for</span>&nbsp;<span class="ident" id="6442472">y</span>&nbsp;<span class="op" id="6442474">:=</span>&nbsp;<span class="ident" id="6442477">r</span><span class="op" id="6442478">.</span><span class="ident" id="6442479">Min</span><span class="op" id="6442482">.</span><span class="ident" id="6442483">Y</span><span class="op" id="6442484">;</span>&nbsp;<span class="ident" id="6442486">y</span>&nbsp;<span class="op" id="6442488">&lt;</span>&nbsp;<span class="ident" id="6442490">r</span><span class="op" id="6442491">.</span><span class="ident" id="6442492">Max</span><span class="op" id="6442495">.</span><span class="ident" id="6442496">Y</span><span class="op" id="6442497">;</span>&nbsp;<span class="ident" id="6442499">y</span><span class="op" id="6442500">++</span>&nbsp;<span class="op" id="6442503">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442507">sy</span>&nbsp;<span class="op" id="6442510">:=</span>&nbsp;<span class="ident" id="6442513">y</span>&nbsp;<span class="op" id="6442515">+</span>&nbsp;<span class="ident" id="6442517">sp</span><span class="op" id="6442519">.</span><span class="ident" id="6442520">Y</span>&nbsp;<span class="op" id="6442522">-</span>&nbsp;<span class="ident" id="6442524">r</span><span class="op" id="6442525">.</span><span class="ident" id="6442526">Min</span><span class="op" id="6442529">.</span><span class="ident" id="6442530">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442534">my</span>&nbsp;<span class="op" id="6442537">:=</span>&nbsp;<span class="ident" id="6442540">y</span>&nbsp;<span class="op" id="6442542">+</span>&nbsp;<span class="ident" id="6442544">mp</span><span class="op" id="6442546">.</span><span class="ident" id="6442547">Y</span>&nbsp;<span class="op" id="6442549">-</span>&nbsp;<span class="ident" id="6442551">r</span><span class="op" id="6442552">.</span><span class="ident" id="6442553">Min</span><span class="op" id="6442556">.</span><span class="ident" id="6442557">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442561">for</span>&nbsp;<span class="ident" id="6442565">x</span>&nbsp;<span class="op" id="6442567">:=</span>&nbsp;<span class="ident" id="6442570">r</span><span class="op" id="6442571">.</span><span class="ident" id="6442572">Min</span><span class="op" id="6442575">.</span><span class="ident" id="6442576">X</span><span class="op" id="6442577">;</span>&nbsp;<span class="ident" id="6442579">x</span>&nbsp;<span class="op" id="6442581">&lt;</span>&nbsp;<span class="ident" id="6442583">r</span><span class="op" id="6442584">.</span><span class="ident" id="6442585">Max</span><span class="op" id="6442588">.</span><span class="ident" id="6442589">X</span><span class="op" id="6442590">;</span>&nbsp;<span class="ident" id="6442592">x</span><span class="op" id="6442593">++</span>&nbsp;<span class="op" id="6442596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442601">if</span>&nbsp;<span class="op" id="6442604">!</span><span class="op" id="6442605">(</span><span class="ident" id="6442606">image</span><span class="op" id="6442611">.</span><span class="ident" id="6442612">Pt</span><span class="op" id="6442614">(</span><span class="ident" id="6442615">x</span><span class="op" id="6442616">,</span>&nbsp;<span class="ident" id="6442618">y</span><span class="op" id="6442619">)</span><span class="op" id="6442620">.</span><span class="ident" id="6442621">In</span><span class="op" id="6442623">(</span><span class="ident" id="6442624">b</span><span class="op" id="6442625">)</span><span class="op" id="6442626">)</span>&nbsp;<span class="op" id="6442628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442634">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442651">sx</span>&nbsp;<span class="op" id="6442654">:=</span>&nbsp;<span class="ident" id="6442657">x</span>&nbsp;<span class="op" id="6442659">+</span>&nbsp;<span class="ident" id="6442661">sp</span><span class="op" id="6442663">.</span><span class="ident" id="6442664">X</span>&nbsp;<span class="op" id="6442666">-</span>&nbsp;<span class="ident" id="6442668">r</span><span class="op" id="6442669">.</span><span class="ident" id="6442670">Min</span><span class="op" id="6442673">.</span><span class="ident" id="6442674">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442679">if</span>&nbsp;<span class="op" id="6442682">!</span><span class="op" id="6442683">(</span><span class="ident" id="6442684">image</span><span class="op" id="6442689">.</span><span class="ident" id="6442690">Pt</span><span class="op" id="6442692">(</span><span class="ident" id="6442693">sx</span><span class="op" id="6442695">,</span>&nbsp;<span class="ident" id="6442697">sy</span><span class="op" id="6442699">)</span><span class="op" id="6442700">.</span><span class="ident" id="6442701">In</span><span class="op" id="6442703">(</span><span class="ident" id="6442704">sb</span><span class="op" id="6442706">)</span><span class="op" id="6442707">)</span>&nbsp;<span class="op" id="6442709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442715">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442727">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442732">mx</span>&nbsp;<span class="op" id="6442735">:=</span>&nbsp;<span class="ident" id="6442738">x</span>&nbsp;<span class="op" id="6442740">+</span>&nbsp;<span class="ident" id="6442742">mp</span><span class="op" id="6442744">.</span><span class="ident" id="6442745">X</span>&nbsp;<span class="op" id="6442747">-</span>&nbsp;<span class="ident" id="6442749">r</span><span class="op" id="6442750">.</span><span class="ident" id="6442751">Min</span><span class="op" id="6442754">.</span><span class="ident" id="6442755">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442760">if</span>&nbsp;<span class="op" id="6442763">!</span><span class="op" id="6442764">(</span><span class="ident" id="6442765">image</span><span class="op" id="6442770">.</span><span class="ident" id="6442771">Pt</span><span class="op" id="6442773">(</span><span class="ident" id="6442774">mx</span><span class="op" id="6442776">,</span>&nbsp;<span class="ident" id="6442778">my</span><span class="op" id="6442780">)</span><span class="op" id="6442781">.</span><span class="ident" id="6442782">In</span><span class="op" id="6442784">(</span><span class="ident" id="6442785">mb</span><span class="op" id="6442787">)</span><span class="op" id="6442788">)</span>&nbsp;<span class="op" id="6442790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442796">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442814">const</span>&nbsp;<span class="ident" id="6442820">M</span>&nbsp;<span class="op" id="6442822">=</span>&nbsp;<span class="num" id="6442824">1</span><span class="op" id="6442825">&lt;&lt;</span><span class="num" id="6442827">16</span>&nbsp;<span class="op" id="6442830">-</span>&nbsp;<span class="num" id="6442832">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442837">var</span>&nbsp;<span class="ident" id="6442841">dr</span><span class="op" id="6442843">,</span>&nbsp;<span class="ident" id="6442845">dg</span><span class="op" id="6442847">,</span>&nbsp;<span class="ident" id="6442849">db</span><span class="op" id="6442851">,</span>&nbsp;<span class="ident" id="6442853">da</span>&nbsp;<span class="builtintype" id="6442856">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442866">if</span>&nbsp;<span class="ident" id="6442869">op</span>&nbsp;<span class="op" id="6442872">==</span>&nbsp;<span class="ident" id="6442875">Over</span>&nbsp;<span class="op" id="6442880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442886">dr</span><span class="op" id="6442888">,</span>&nbsp;<span class="ident" id="6442890">dg</span><span class="op" id="6442892">,</span>&nbsp;<span class="ident" id="6442894">db</span><span class="op" id="6442896">,</span>&nbsp;<span class="ident" id="6442898">da</span>&nbsp;<span class="op" id="6442901">=</span>&nbsp;<span class="ident" id="6442903">dst</span><span class="op" id="6442906">.</span><span class="ident" id="6442907">At</span><span class="op" id="6442909">(</span><span class="ident" id="6442910">x</span><span class="op" id="6442911">,</span>&nbsp;<span class="ident" id="6442913">y</span><span class="op" id="6442914">)</span><span class="op" id="6442915">.</span><span class="ident" id="6442916">RGBA</span><span class="op" id="6442920">(</span><span class="op" id="6442921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442926">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442931">sr</span><span class="op" id="6442933">,</span>&nbsp;<span class="ident" id="6442935">sg</span><span class="op" id="6442937">,</span>&nbsp;<span class="ident" id="6442939">sb</span><span class="op" id="6442941">,</span>&nbsp;<span class="ident" id="6442943">sa</span>&nbsp;<span class="op" id="6442946">:=</span>&nbsp;<span class="ident" id="6442949">src</span><span class="op" id="6442952">.</span><span class="ident" id="6442953">At</span><span class="op" id="6442955">(</span><span class="ident" id="6442956">sx</span><span class="op" id="6442958">,</span>&nbsp;<span class="ident" id="6442960">sy</span><span class="op" id="6442962">)</span><span class="op" id="6442963">.</span><span class="ident" id="6442964">RGBA</span><span class="op" id="6442968">(</span><span class="op" id="6442969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442974">ma</span>&nbsp;<span class="op" id="6442977">:=</span>&nbsp;<span class="builtintype" id="6442980">uint32</span><span class="op" id="6442986">(</span><span class="ident" id="6442987">M</span><span class="op" id="6442988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442993">if</span>&nbsp;<span class="ident" id="6442996">mask</span>&nbsp;<span class="op" id="6443001">!=</span>&nbsp;<span class="ident" id="6443004">nil</span>&nbsp;<span class="op" id="6443008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443014">_</span><span class="op" id="6443015">,</span>&nbsp;<span class="ident" id="6443017">_</span><span class="op" id="6443018">,</span>&nbsp;<span class="ident" id="6443020">_</span><span class="op" id="6443021">,</span>&nbsp;<span class="ident" id="6443023">ma</span>&nbsp;<span class="op" id="6443026">=</span>&nbsp;<span class="ident" id="6443028">mask</span><span class="op" id="6443032">.</span><span class="ident" id="6443033">At</span><span class="op" id="6443035">(</span><span class="ident" id="6443036">mx</span><span class="op" id="6443038">,</span>&nbsp;<span class="ident" id="6443040">my</span><span class="op" id="6443042">)</span><span class="op" id="6443043">.</span><span class="ident" id="6443044">RGBA</span><span class="op" id="6443048">(</span><span class="op" id="6443049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443054">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443059">a</span>&nbsp;<span class="op" id="6443061">:=</span>&nbsp;<span class="ident" id="6443064">M</span>&nbsp;<span class="op" id="6443066">-</span>&nbsp;<span class="op" id="6443068">(</span><span class="ident" id="6443069">sa</span>&nbsp;<span class="op" id="6443072">*</span>&nbsp;<span class="ident" id="6443074">ma</span>&nbsp;<span class="op" id="6443077">/</span>&nbsp;<span class="ident" id="6443079">M</span><span class="op" id="6443080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443085">golden</span><span class="op" id="6443091">.</span><span class="ident" id="6443092">Set</span><span class="op" id="6443095">(</span><span class="ident" id="6443096">x</span><span class="op" id="6443097">,</span>&nbsp;<span class="ident" id="6443099">y</span><span class="op" id="6443100">,</span>&nbsp;<span class="ident" id="6443102">color</span><span class="op" id="6443107">.</span><span class="ident" id="6443108">RGBA64</span><span class="op" id="6443114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6443120">uint16</span><span class="op" id="6443126">(</span><span class="op" id="6443127">(</span><span class="ident" id="6443128">dr</span><span class="op" id="6443130">*</span><span class="ident" id="6443131">a</span>&nbsp;<span class="op" id="6443133">+</span>&nbsp;<span class="ident" id="6443135">sr</span><span class="op" id="6443137">*</span><span class="ident" id="6443138">ma</span><span class="op" id="6443140">)</span>&nbsp;<span class="op" id="6443142">/</span>&nbsp;<span class="ident" id="6443144">M</span><span class="op" id="6443145">)</span><span class="op" id="6443146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6443152">uint16</span><span class="op" id="6443158">(</span><span class="op" id="6443159">(</span><span class="ident" id="6443160">dg</span><span class="op" id="6443162">*</span><span class="ident" id="6443163">a</span>&nbsp;<span class="op" id="6443165">+</span>&nbsp;<span class="ident" id="6443167">sg</span><span class="op" id="6443169">*</span><span class="ident" id="6443170">ma</span><span class="op" id="6443172">)</span>&nbsp;<span class="op" id="6443174">/</span>&nbsp;<span class="ident" id="6443176">M</span><span class="op" id="6443177">)</span><span class="op" id="6443178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6443184">uint16</span><span class="op" id="6443190">(</span><span class="op" id="6443191">(</span><span class="ident" id="6443192">db</span><span class="op" id="6443194">*</span><span class="ident" id="6443195">a</span>&nbsp;<span class="op" id="6443197">+</span>&nbsp;<span class="ident" id="6443199">sb</span><span class="op" id="6443201">*</span><span class="ident" id="6443202">ma</span><span class="op" id="6443204">)</span>&nbsp;<span class="op" id="6443206">/</span>&nbsp;<span class="ident" id="6443208">M</span><span class="op" id="6443209">)</span><span class="op" id="6443210">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6443216">uint16</span><span class="op" id="6443222">(</span><span class="op" id="6443223">(</span><span class="ident" id="6443224">da</span><span class="op" id="6443226">*</span><span class="ident" id="6443227">a</span>&nbsp;<span class="op" id="6443229">+</span>&nbsp;<span class="ident" id="6443231">sa</span><span class="op" id="6443233">*</span><span class="ident" id="6443234">ma</span><span class="op" id="6443236">)</span>&nbsp;<span class="op" id="6443238">/</span>&nbsp;<span class="ident" id="6443240">M</span><span class="op" id="6443241">)</span><span class="op" id="6443242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443247">}</span><span class="op" id="6443248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443258">return</span>&nbsp;<span class="ident" id="6443265">golden</span><span class="op" id="6443271">.</span><span class="ident" id="6443272">SubImage</span><span class="op" id="6443280">(</span><span class="ident" id="6443281">b</span><span class="op" id="6443282">)</span><br>
<span class="lineno">205</span><span class="op" id="6443284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6443287">func</span>&nbsp;<span class="ident" id="6443292">TestDraw</span><span class="op" id="6443300">(</span><span class="ident" id="6443301">t</span>&nbsp;<span class="op" id="6443303">*</span><span class="ident" id="6443304">testing</span><span class="op" id="6443311">.</span><span class="ident" id="6443312">T</span><span class="op" id="6443313">)</span>&nbsp;<span class="op" id="6443315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443318">rr</span>&nbsp;<span class="op" id="6443321">:=</span>&nbsp;<span class="op" id="6443324">[</span><span class="op" id="6443325">]</span><span class="ident" id="6443326">image</span><span class="op" id="6443331">.</span><span class="ident" id="6443332">Rectangle</span><span class="op" id="6443341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443345">image</span><span class="op" id="6443350">.</span><span class="ident" id="6443351">Rect</span><span class="op" id="6443355">(</span><span class="num" id="6443356">0</span><span class="op" id="6443357">,</span>&nbsp;<span class="num" id="6443359">0</span><span class="op" id="6443360">,</span>&nbsp;<span class="num" id="6443362">0</span><span class="op" id="6443363">,</span>&nbsp;<span class="num" id="6443365">0</span><span class="op" id="6443366">)</span><span class="op" id="6443367">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443371">image</span><span class="op" id="6443376">.</span><span class="ident" id="6443377">Rect</span><span class="op" id="6443381">(</span><span class="num" id="6443382">0</span><span class="op" id="6443383">,</span>&nbsp;<span class="num" id="6443385">0</span><span class="op" id="6443386">,</span>&nbsp;<span class="num" id="6443388">16</span><span class="op" id="6443390">,</span>&nbsp;<span class="num" id="6443392">16</span><span class="op" id="6443394">)</span><span class="op" id="6443395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443399">image</span><span class="op" id="6443404">.</span><span class="ident" id="6443405">Rect</span><span class="op" id="6443409">(</span><span class="num" id="6443410">3</span><span class="op" id="6443411">,</span>&nbsp;<span class="num" id="6443413">5</span><span class="op" id="6443414">,</span>&nbsp;<span class="num" id="6443416">12</span><span class="op" id="6443418">,</span>&nbsp;<span class="num" id="6443420">10</span><span class="op" id="6443422">)</span><span class="op" id="6443423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443427">image</span><span class="op" id="6443432">.</span><span class="ident" id="6443433">Rect</span><span class="op" id="6443437">(</span><span class="num" id="6443438">0</span><span class="op" id="6443439">,</span>&nbsp;<span class="num" id="6443441">0</span><span class="op" id="6443442">,</span>&nbsp;<span class="num" id="6443444">9</span><span class="op" id="6443445">,</span>&nbsp;<span class="num" id="6443447">9</span><span class="op" id="6443448">)</span><span class="op" id="6443449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443453">image</span><span class="op" id="6443458">.</span><span class="ident" id="6443459">Rect</span><span class="op" id="6443463">(</span><span class="num" id="6443464">8</span><span class="op" id="6443465">,</span>&nbsp;<span class="num" id="6443467">8</span><span class="op" id="6443468">,</span>&nbsp;<span class="num" id="6443470">16</span><span class="op" id="6443472">,</span>&nbsp;<span class="num" id="6443474">16</span><span class="op" id="6443476">)</span><span class="op" id="6443477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443481">image</span><span class="op" id="6443486">.</span><span class="ident" id="6443487">Rect</span><span class="op" id="6443491">(</span><span class="num" id="6443492">8</span><span class="op" id="6443493">,</span>&nbsp;<span class="num" id="6443495">0</span><span class="op" id="6443496">,</span>&nbsp;<span class="num" id="6443498">9</span><span class="op" id="6443499">,</span>&nbsp;<span class="num" id="6443501">16</span><span class="op" id="6443503">)</span><span class="op" id="6443504">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443508">image</span><span class="op" id="6443513">.</span><span class="ident" id="6443514">Rect</span><span class="op" id="6443518">(</span><span class="num" id="6443519">0</span><span class="op" id="6443520">,</span>&nbsp;<span class="num" id="6443522">8</span><span class="op" id="6443523">,</span>&nbsp;<span class="num" id="6443525">16</span><span class="op" id="6443527">,</span>&nbsp;<span class="num" id="6443529">9</span><span class="op" id="6443530">)</span><span class="op" id="6443531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443535">image</span><span class="op" id="6443540">.</span><span class="ident" id="6443541">Rect</span><span class="op" id="6443545">(</span><span class="num" id="6443546">8</span><span class="op" id="6443547">,</span>&nbsp;<span class="num" id="6443549">8</span><span class="op" id="6443550">,</span>&nbsp;<span class="num" id="6443552">9</span><span class="op" id="6443553">,</span>&nbsp;<span class="num" id="6443555">9</span><span class="op" id="6443556">)</span><span class="op" id="6443557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443561">image</span><span class="op" id="6443566">.</span><span class="ident" id="6443567">Rect</span><span class="op" id="6443571">(</span><span class="num" id="6443572">8</span><span class="op" id="6443573">,</span>&nbsp;<span class="num" id="6443575">8</span><span class="op" id="6443576">,</span>&nbsp;<span class="num" id="6443578">8</span><span class="op" id="6443579">,</span>&nbsp;<span class="num" id="6443581">8</span><span class="op" id="6443582">)</span><span class="op" id="6443583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443589">for</span>&nbsp;<span class="ident" id="6443593">_</span><span class="op" id="6443594">,</span>&nbsp;<span class="ident" id="6443596">r</span>&nbsp;<span class="op" id="6443598">:=</span>&nbsp;<span class="keyword" id="6443601">range</span>&nbsp;<span class="ident" id="6443607">rr</span>&nbsp;<span class="op" id="6443610">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443613">loop</span><span class="op" id="6443617">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443621">for</span>&nbsp;<span class="ident" id="6443625">_</span><span class="op" id="6443626">,</span>&nbsp;<span class="ident" id="6443628">test</span>&nbsp;<span class="op" id="6443633">:=</span>&nbsp;<span class="keyword" id="6443636">range</span>&nbsp;<span class="ident" id="6443642">drawTests</span>&nbsp;<span class="op" id="6443652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443657">dst</span>&nbsp;<span class="op" id="6443661">:=</span>&nbsp;<span class="ident" id="6443664">hgradRed</span><span class="op" id="6443672">(</span><span class="num" id="6443673">255</span><span class="op" id="6443676">)</span><span class="op" id="6443677">.</span><span class="op" id="6443678">(</span><span class="op" id="6443679">*</span><span class="ident" id="6443680">image</span><span class="op" id="6443685">.</span><span class="ident" id="6443686">RGBA</span><span class="op" id="6443690">)</span><span class="op" id="6443691">.</span><span class="ident" id="6443692">SubImage</span><span class="op" id="6443700">(</span><span class="ident" id="6443701">r</span><span class="op" id="6443702">)</span><span class="op" id="6443703">.</span><span class="op" id="6443704">(</span><span class="ident" id="6443705">Image</span><span class="op" id="6443710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6443715">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443816">golden</span>&nbsp;<span class="op" id="6443823">:=</span>&nbsp;<span class="ident" id="6443826">makeGolden</span><span class="op" id="6443836">(</span><span class="ident" id="6443837">dst</span><span class="op" id="6443840">,</span>&nbsp;<span class="ident" id="6443842">image</span><span class="op" id="6443847">.</span><span class="ident" id="6443848">Rect</span><span class="op" id="6443852">(</span><span class="num" id="6443853">0</span><span class="op" id="6443854">,</span>&nbsp;<span class="num" id="6443856">0</span><span class="op" id="6443857">,</span>&nbsp;<span class="num" id="6443859">16</span><span class="op" id="6443861">,</span>&nbsp;<span class="num" id="6443863">16</span><span class="op" id="6443865">)</span><span class="op" id="6443866">,</span>&nbsp;<span class="ident" id="6443868">test</span><span class="op" id="6443872">.</span><span class="ident" id="6443873">src</span><span class="op" id="6443876">,</span>&nbsp;<span class="ident" id="6443878">image</span><span class="op" id="6443883">.</span><span class="ident" id="6443884">ZP</span><span class="op" id="6443886">,</span>&nbsp;<span class="ident" id="6443888">test</span><span class="op" id="6443892">.</span><span class="ident" id="6443893">mask</span><span class="op" id="6443897">,</span>&nbsp;<span class="ident" id="6443899">image</span><span class="op" id="6443904">.</span><span class="ident" id="6443905">ZP</span><span class="op" id="6443907">,</span>&nbsp;<span class="ident" id="6443909">test</span><span class="op" id="6443913">.</span><span class="ident" id="6443914">op</span><span class="op" id="6443916">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443921">b</span>&nbsp;<span class="op" id="6443923">:=</span>&nbsp;<span class="ident" id="6443926">dst</span><span class="op" id="6443929">.</span><span class="ident" id="6443930">Bounds</span><span class="op" id="6443936">(</span><span class="op" id="6443937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443942">if</span>&nbsp;<span class="op" id="6443945">!</span><span class="ident" id="6443946">b</span><span class="op" id="6443947">.</span><span class="ident" id="6443948">Eq</span><span class="op" id="6443950">(</span><span class="ident" id="6443951">golden</span><span class="op" id="6443957">.</span><span class="ident" id="6443958">Bounds</span><span class="op" id="6443964">(</span><span class="op" id="6443965">)</span><span class="op" id="6443966">)</span>&nbsp;<span class="op" id="6443968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443974">t</span><span class="op" id="6443975">.</span><span class="ident" id="6443976">Errorf</span><span class="op" id="6443982">(</span><span class="string" id="6443983">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6444016">,</span>&nbsp;<span class="ident" id="6444018">r</span><span class="op" id="6444019">,</span>&nbsp;<span class="ident" id="6444021">test</span><span class="op" id="6444025">.</span><span class="ident" id="6444026">desc</span><span class="op" id="6444030">,</span>&nbsp;<span class="ident" id="6444032">dst</span><span class="op" id="6444035">.</span><span class="ident" id="6444036">Bounds</span><span class="op" id="6444042">(</span><span class="op" id="6444043">)</span><span class="op" id="6444044">,</span>&nbsp;<span class="ident" id="6444046">golden</span><span class="op" id="6444052">.</span><span class="ident" id="6444053">Bounds</span><span class="op" id="6444059">(</span><span class="op" id="6444060">)</span><span class="op" id="6444061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444067">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444079">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444084">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444181">DrawMask</span><span class="op" id="6444189">(</span><span class="ident" id="6444190">dst</span><span class="op" id="6444193">,</span>&nbsp;<span class="ident" id="6444195">image</span><span class="op" id="6444200">.</span><span class="ident" id="6444201">Rect</span><span class="op" id="6444205">(</span><span class="num" id="6444206">0</span><span class="op" id="6444207">,</span>&nbsp;<span class="num" id="6444209">0</span><span class="op" id="6444210">,</span>&nbsp;<span class="num" id="6444212">16</span><span class="op" id="6444214">,</span>&nbsp;<span class="num" id="6444216">16</span><span class="op" id="6444218">)</span><span class="op" id="6444219">,</span>&nbsp;<span class="ident" id="6444221">test</span><span class="op" id="6444225">.</span><span class="ident" id="6444226">src</span><span class="op" id="6444229">,</span>&nbsp;<span class="ident" id="6444231">image</span><span class="op" id="6444236">.</span><span class="ident" id="6444237">ZP</span><span class="op" id="6444239">,</span>&nbsp;<span class="ident" id="6444241">test</span><span class="op" id="6444245">.</span><span class="ident" id="6444246">mask</span><span class="op" id="6444250">,</span>&nbsp;<span class="ident" id="6444252">image</span><span class="op" id="6444257">.</span><span class="ident" id="6444258">ZP</span><span class="op" id="6444260">,</span>&nbsp;<span class="ident" id="6444262">test</span><span class="op" id="6444266">.</span><span class="ident" id="6444267">op</span><span class="op" id="6444269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444274">if</span>&nbsp;<span class="ident" id="6444277">image</span><span class="op" id="6444282">.</span><span class="ident" id="6444283">Pt</span><span class="op" id="6444285">(</span><span class="num" id="6444286">8</span><span class="op" id="6444287">,</span>&nbsp;<span class="num" id="6444289">8</span><span class="op" id="6444290">)</span><span class="op" id="6444291">.</span><span class="ident" id="6444292">In</span><span class="op" id="6444294">(</span><span class="ident" id="6444295">r</span><span class="op" id="6444296">)</span>&nbsp;<span class="op" id="6444298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444304">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444375">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444428">if</span>&nbsp;<span class="op" id="6444431">!</span><span class="ident" id="6444432">eq</span><span class="op" id="6444434">(</span><span class="ident" id="6444435">dst</span><span class="op" id="6444438">.</span><span class="ident" id="6444439">At</span><span class="op" id="6444441">(</span><span class="num" id="6444442">8</span><span class="op" id="6444443">,</span>&nbsp;<span class="num" id="6444445">8</span><span class="op" id="6444446">)</span><span class="op" id="6444447">,</span>&nbsp;<span class="ident" id="6444449">test</span><span class="op" id="6444453">.</span><span class="ident" id="6444454">expected</span><span class="op" id="6444462">)</span>&nbsp;<span class="op" id="6444464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444471">t</span><span class="op" id="6444472">.</span><span class="ident" id="6444473">Errorf</span><span class="op" id="6444479">(</span><span class="string" id="6444480">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6444516">,</span>&nbsp;<span class="ident" id="6444518">r</span><span class="op" id="6444519">,</span>&nbsp;<span class="ident" id="6444521">test</span><span class="op" id="6444525">.</span><span class="ident" id="6444526">desc</span><span class="op" id="6444530">,</span>&nbsp;<span class="ident" id="6444532">dst</span><span class="op" id="6444535">.</span><span class="ident" id="6444536">At</span><span class="op" id="6444538">(</span><span class="num" id="6444539">8</span><span class="op" id="6444540">,</span>&nbsp;<span class="num" id="6444542">8</span><span class="op" id="6444543">)</span><span class="op" id="6444544">,</span>&nbsp;<span class="ident" id="6444546">test</span><span class="op" id="6444550">.</span><span class="ident" id="6444551">expected</span><span class="op" id="6444559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444566">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444584">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444589">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444657">for</span>&nbsp;<span class="ident" id="6444661">y</span>&nbsp;<span class="op" id="6444663">:=</span>&nbsp;<span class="ident" id="6444666">b</span><span class="op" id="6444667">.</span><span class="ident" id="6444668">Min</span><span class="op" id="6444671">.</span><span class="ident" id="6444672">Y</span><span class="op" id="6444673">;</span>&nbsp;<span class="ident" id="6444675">y</span>&nbsp;<span class="op" id="6444677">&lt;</span>&nbsp;<span class="ident" id="6444679">b</span><span class="op" id="6444680">.</span><span class="ident" id="6444681">Max</span><span class="op" id="6444684">.</span><span class="ident" id="6444685">Y</span><span class="op" id="6444686">;</span>&nbsp;<span class="ident" id="6444688">y</span><span class="op" id="6444689">++</span>&nbsp;<span class="op" id="6444692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444698">for</span>&nbsp;<span class="ident" id="6444702">x</span>&nbsp;<span class="op" id="6444704">:=</span>&nbsp;<span class="ident" id="6444707">b</span><span class="op" id="6444708">.</span><span class="ident" id="6444709">Min</span><span class="op" id="6444712">.</span><span class="ident" id="6444713">X</span><span class="op" id="6444714">;</span>&nbsp;<span class="ident" id="6444716">x</span>&nbsp;<span class="op" id="6444718">&lt;</span>&nbsp;<span class="ident" id="6444720">b</span><span class="op" id="6444721">.</span><span class="ident" id="6444722">Max</span><span class="op" id="6444725">.</span><span class="ident" id="6444726">X</span><span class="op" id="6444727">;</span>&nbsp;<span class="ident" id="6444729">x</span><span class="op" id="6444730">++</span>&nbsp;<span class="op" id="6444733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444740">if</span>&nbsp;<span class="op" id="6444743">!</span><span class="ident" id="6444744">eq</span><span class="op" id="6444746">(</span><span class="ident" id="6444747">dst</span><span class="op" id="6444750">.</span><span class="ident" id="6444751">At</span><span class="op" id="6444753">(</span><span class="ident" id="6444754">x</span><span class="op" id="6444755">,</span>&nbsp;<span class="ident" id="6444757">y</span><span class="op" id="6444758">)</span><span class="op" id="6444759">,</span>&nbsp;<span class="ident" id="6444761">golden</span><span class="op" id="6444767">.</span><span class="ident" id="6444768">At</span><span class="op" id="6444770">(</span><span class="ident" id="6444771">x</span><span class="op" id="6444772">,</span>&nbsp;<span class="ident" id="6444774">y</span><span class="op" id="6444775">)</span><span class="op" id="6444776">)</span>&nbsp;<span class="op" id="6444778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444786">t</span><span class="op" id="6444787">.</span><span class="ident" id="6444788">Errorf</span><span class="op" id="6444794">(</span><span class="string" id="6444795">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6444841">,</span>&nbsp;<span class="ident" id="6444843">r</span><span class="op" id="6444844">,</span>&nbsp;<span class="ident" id="6444846">test</span><span class="op" id="6444850">.</span><span class="ident" id="6444851">desc</span><span class="op" id="6444855">,</span>&nbsp;<span class="ident" id="6444857">x</span><span class="op" id="6444858">,</span>&nbsp;<span class="ident" id="6444860">y</span><span class="op" id="6444861">,</span>&nbsp;<span class="ident" id="6444863">dst</span><span class="op" id="6444866">.</span><span class="ident" id="6444867">At</span><span class="op" id="6444869">(</span><span class="ident" id="6444870">x</span><span class="op" id="6444871">,</span>&nbsp;<span class="ident" id="6444873">y</span><span class="op" id="6444874">)</span><span class="op" id="6444875">,</span>&nbsp;<span class="ident" id="6444877">golden</span><span class="op" id="6444883">.</span><span class="ident" id="6444884">At</span><span class="op" id="6444886">(</span><span class="ident" id="6444887">x</span><span class="op" id="6444888">,</span>&nbsp;<span class="ident" id="6444890">y</span><span class="op" id="6444891">)</span><span class="op" id="6444892">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444900">continue</span>&nbsp;<span class="ident" id="6444909">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444934">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444937">}</span><br>
<span class="lineno"></span><span class="op" id="6444939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6444942">func</span>&nbsp;<span class="ident" id="6444947">TestDrawOverlap</span><span class="op" id="6444962">(</span><span class="ident" id="6444963">t</span>&nbsp;<span class="op" id="6444965">*</span><span class="ident" id="6444966">testing</span><span class="op" id="6444973">.</span><span class="ident" id="6444974">T</span><span class="op" id="6444975">)</span>&nbsp;<span class="op" id="6444977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444980">for</span>&nbsp;<span class="ident" id="6444984">_</span><span class="op" id="6444985">,</span>&nbsp;<span class="ident" id="6444987">op</span>&nbsp;<span class="op" id="6444990">:=</span>&nbsp;<span class="keyword" id="6444993">range</span>&nbsp;<span class="op" id="6444999">[</span><span class="op" id="6445000">]</span><span class="ident" id="6445001">Op</span><span class="op" id="6445003">{</span><span class="ident" id="6445004">Over</span><span class="op" id="6445008">,</span>&nbsp;<span class="ident" id="6445010">Src</span><span class="op" id="6445013">}</span>&nbsp;<span class="op" id="6445015">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445019">for</span>&nbsp;<span class="ident" id="6445023">yoff</span>&nbsp;<span class="op" id="6445028">:=</span>&nbsp;<span class="op" id="6445031">-</span><span class="num" id="6445032">2</span><span class="op" id="6445033">;</span>&nbsp;<span class="ident" id="6445035">yoff</span>&nbsp;<span class="op" id="6445040">&lt;=</span>&nbsp;<span class="num" id="6445043">2</span><span class="op" id="6445044">;</span>&nbsp;<span class="ident" id="6445046">yoff</span><span class="op" id="6445050">++</span>&nbsp;<span class="op" id="6445053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445057">loop</span><span class="op" id="6445061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445066">for</span>&nbsp;<span class="ident" id="6445070">xoff</span>&nbsp;<span class="op" id="6445075">:=</span>&nbsp;<span class="op" id="6445078">-</span><span class="num" id="6445079">2</span><span class="op" id="6445080">;</span>&nbsp;<span class="ident" id="6445082">xoff</span>&nbsp;<span class="op" id="6445087">&lt;=</span>&nbsp;<span class="num" id="6445090">2</span><span class="op" id="6445091">;</span>&nbsp;<span class="ident" id="6445093">xoff</span><span class="op" id="6445097">++</span>&nbsp;<span class="op" id="6445100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445106">m</span>&nbsp;<span class="op" id="6445108">:=</span>&nbsp;<span class="ident" id="6445111">gradYellow</span><span class="op" id="6445121">(</span><span class="num" id="6445122">127</span><span class="op" id="6445125">)</span><span class="op" id="6445126">.</span><span class="op" id="6445127">(</span><span class="op" id="6445128">*</span><span class="ident" id="6445129">image</span><span class="op" id="6445134">.</span><span class="ident" id="6445135">RGBA</span><span class="op" id="6445139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445145">dst</span>&nbsp;<span class="op" id="6445149">:=</span>&nbsp;<span class="ident" id="6445152">m</span><span class="op" id="6445153">.</span><span class="ident" id="6445154">SubImage</span><span class="op" id="6445162">(</span><span class="ident" id="6445163">image</span><span class="op" id="6445168">.</span><span class="ident" id="6445169">Rect</span><span class="op" id="6445173">(</span><span class="num" id="6445174">5</span><span class="op" id="6445175">,</span>&nbsp;<span class="num" id="6445177">5</span><span class="op" id="6445178">,</span>&nbsp;<span class="num" id="6445180">10</span><span class="op" id="6445182">,</span>&nbsp;<span class="num" id="6445184">10</span><span class="op" id="6445186">)</span><span class="op" id="6445187">)</span><span class="op" id="6445188">.</span><span class="op" id="6445189">(</span><span class="op" id="6445190">*</span><span class="ident" id="6445191">image</span><span class="op" id="6445196">.</span><span class="ident" id="6445197">RGBA</span><span class="op" id="6445201">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445207">src</span>&nbsp;<span class="op" id="6445211">:=</span>&nbsp;<span class="ident" id="6445214">m</span><span class="op" id="6445215">.</span><span class="ident" id="6445216">SubImage</span><span class="op" id="6445224">(</span><span class="ident" id="6445225">image</span><span class="op" id="6445230">.</span><span class="ident" id="6445231">Rect</span><span class="op" id="6445235">(</span><span class="num" id="6445236">5</span><span class="op" id="6445237">+</span><span class="ident" id="6445238">xoff</span><span class="op" id="6445242">,</span>&nbsp;<span class="num" id="6445244">5</span><span class="op" id="6445245">+</span><span class="ident" id="6445246">yoff</span><span class="op" id="6445250">,</span>&nbsp;<span class="num" id="6445252">10</span><span class="op" id="6445254">+</span><span class="ident" id="6445255">xoff</span><span class="op" id="6445259">,</span>&nbsp;<span class="num" id="6445261">10</span><span class="op" id="6445263">+</span><span class="ident" id="6445264">yoff</span><span class="op" id="6445268">)</span><span class="op" id="6445269">)</span><span class="op" id="6445270">.</span><span class="op" id="6445271">(</span><span class="op" id="6445272">*</span><span class="ident" id="6445273">image</span><span class="op" id="6445278">.</span><span class="ident" id="6445279">RGBA</span><span class="op" id="6445283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445289">b</span>&nbsp;<span class="op" id="6445291">:=</span>&nbsp;<span class="ident" id="6445294">dst</span><span class="op" id="6445297">.</span><span class="ident" id="6445298">Bounds</span><span class="op" id="6445304">(</span><span class="op" id="6445305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445311">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445413">golden</span>&nbsp;<span class="op" id="6445420">:=</span>&nbsp;<span class="ident" id="6445423">makeGolden</span><span class="op" id="6445433">(</span><span class="ident" id="6445434">dst</span><span class="op" id="6445437">,</span>&nbsp;<span class="ident" id="6445439">b</span><span class="op" id="6445440">,</span>&nbsp;<span class="ident" id="6445442">src</span><span class="op" id="6445445">,</span>&nbsp;<span class="ident" id="6445447">src</span><span class="op" id="6445450">.</span><span class="ident" id="6445451">Bounds</span><span class="op" id="6445457">(</span><span class="op" id="6445458">)</span><span class="op" id="6445459">.</span><span class="ident" id="6445460">Min</span><span class="op" id="6445463">,</span>&nbsp;<span class="ident" id="6445465">nil</span><span class="op" id="6445468">,</span>&nbsp;<span class="ident" id="6445470">image</span><span class="op" id="6445475">.</span><span class="ident" id="6445476">ZP</span><span class="op" id="6445478">,</span>&nbsp;<span class="ident" id="6445480">op</span><span class="op" id="6445482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445488">if</span>&nbsp;<span class="op" id="6445491">!</span><span class="ident" id="6445492">b</span><span class="op" id="6445493">.</span><span class="ident" id="6445494">Eq</span><span class="op" id="6445496">(</span><span class="ident" id="6445497">golden</span><span class="op" id="6445503">.</span><span class="ident" id="6445504">Bounds</span><span class="op" id="6445510">(</span><span class="op" id="6445511">)</span><span class="op" id="6445512">)</span>&nbsp;<span class="op" id="6445514">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445521">t</span><span class="op" id="6445522">.</span><span class="ident" id="6445523">Errorf</span><span class="op" id="6445529">(</span><span class="string" id="6445530">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6445580">,</span>&nbsp;<span class="ident" id="6445582">xoff</span><span class="op" id="6445586">,</span>&nbsp;<span class="ident" id="6445588">yoff</span><span class="op" id="6445592">,</span>&nbsp;<span class="ident" id="6445594">dst</span><span class="op" id="6445597">.</span><span class="ident" id="6445598">Bounds</span><span class="op" id="6445604">(</span><span class="op" id="6445605">)</span><span class="op" id="6445606">,</span>&nbsp;<span class="ident" id="6445608">golden</span><span class="op" id="6445614">.</span><span class="ident" id="6445615">Bounds</span><span class="op" id="6445621">(</span><span class="op" id="6445622">)</span><span class="op" id="6445623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445630">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445649">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445747">DrawMask</span><span class="op" id="6445755">(</span><span class="ident" id="6445756">dst</span><span class="op" id="6445759">,</span>&nbsp;<span class="ident" id="6445761">b</span><span class="op" id="6445762">,</span>&nbsp;<span class="ident" id="6445764">src</span><span class="op" id="6445767">,</span>&nbsp;<span class="ident" id="6445769">src</span><span class="op" id="6445772">.</span><span class="ident" id="6445773">Bounds</span><span class="op" id="6445779">(</span><span class="op" id="6445780">)</span><span class="op" id="6445781">.</span><span class="ident" id="6445782">Min</span><span class="op" id="6445785">,</span>&nbsp;<span class="ident" id="6445787">nil</span><span class="op" id="6445790">,</span>&nbsp;<span class="ident" id="6445792">image</span><span class="op" id="6445797">.</span><span class="ident" id="6445798">ZP</span><span class="op" id="6445800">,</span>&nbsp;<span class="ident" id="6445802">op</span><span class="op" id="6445804">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445810">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445879">for</span>&nbsp;<span class="ident" id="6445883">y</span>&nbsp;<span class="op" id="6445885">:=</span>&nbsp;<span class="ident" id="6445888">b</span><span class="op" id="6445889">.</span><span class="ident" id="6445890">Min</span><span class="op" id="6445893">.</span><span class="ident" id="6445894">Y</span><span class="op" id="6445895">;</span>&nbsp;<span class="ident" id="6445897">y</span>&nbsp;<span class="op" id="6445899">&lt;</span>&nbsp;<span class="ident" id="6445901">b</span><span class="op" id="6445902">.</span><span class="ident" id="6445903">Max</span><span class="op" id="6445906">.</span><span class="ident" id="6445907">Y</span><span class="op" id="6445908">;</span>&nbsp;<span class="ident" id="6445910">y</span><span class="op" id="6445911">++</span>&nbsp;<span class="op" id="6445914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445921">for</span>&nbsp;<span class="ident" id="6445925">x</span>&nbsp;<span class="op" id="6445927">:=</span>&nbsp;<span class="ident" id="6445930">b</span><span class="op" id="6445931">.</span><span class="ident" id="6445932">Min</span><span class="op" id="6445935">.</span><span class="ident" id="6445936">X</span><span class="op" id="6445937">;</span>&nbsp;<span class="ident" id="6445939">x</span>&nbsp;<span class="op" id="6445941">&lt;</span>&nbsp;<span class="ident" id="6445943">b</span><span class="op" id="6445944">.</span><span class="ident" id="6445945">Max</span><span class="op" id="6445948">.</span><span class="ident" id="6445949">X</span><span class="op" id="6445950">;</span>&nbsp;<span class="ident" id="6445952">x</span><span class="op" id="6445953">++</span>&nbsp;<span class="op" id="6445956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445964">if</span>&nbsp;<span class="op" id="6445967">!</span><span class="ident" id="6445968">eq</span><span class="op" id="6445970">(</span><span class="ident" id="6445971">dst</span><span class="op" id="6445974">.</span><span class="ident" id="6445975">At</span><span class="op" id="6445977">(</span><span class="ident" id="6445978">x</span><span class="op" id="6445979">,</span>&nbsp;<span class="ident" id="6445981">y</span><span class="op" id="6445982">)</span><span class="op" id="6445983">,</span>&nbsp;<span class="ident" id="6445985">golden</span><span class="op" id="6445991">.</span><span class="ident" id="6445992">At</span><span class="op" id="6445994">(</span><span class="ident" id="6445995">x</span><span class="op" id="6445996">,</span>&nbsp;<span class="ident" id="6445998">y</span><span class="op" id="6445999">)</span><span class="op" id="6446000">)</span>&nbsp;<span class="op" id="6446002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446011">t</span><span class="op" id="6446012">.</span><span class="ident" id="6446013">Errorf</span><span class="op" id="6446019">(</span><span class="string" id="6446020">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6446083">,</span>&nbsp;<span class="ident" id="6446085">xoff</span><span class="op" id="6446089">,</span>&nbsp;<span class="ident" id="6446091">yoff</span><span class="op" id="6446095">,</span>&nbsp;<span class="ident" id="6446097">x</span><span class="op" id="6446098">,</span>&nbsp;<span class="ident" id="6446100">y</span><span class="op" id="6446101">,</span>&nbsp;<span class="ident" id="6446103">dst</span><span class="op" id="6446106">.</span><span class="ident" id="6446107">At</span><span class="op" id="6446109">(</span><span class="ident" id="6446110">x</span><span class="op" id="6446111">,</span>&nbsp;<span class="ident" id="6446113">y</span><span class="op" id="6446114">)</span><span class="op" id="6446115">,</span>&nbsp;<span class="ident" id="6446117">golden</span><span class="op" id="6446123">.</span><span class="ident" id="6446124">At</span><span class="op" id="6446126">(</span><span class="ident" id="6446127">x</span><span class="op" id="6446128">,</span>&nbsp;<span class="ident" id="6446130">y</span><span class="op" id="6446131">)</span><span class="op" id="6446132">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446141">continue</span>&nbsp;<span class="ident" id="6446150">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446179">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446186">}</span><br>
<span class="lineno"></span><span class="op" id="6446188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6446191">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6446263">func</span>&nbsp;<span class="ident" id="6446268">TestNonZeroSrcPt</span><span class="op" id="6446284">(</span><span class="ident" id="6446285">t</span>&nbsp;<span class="op" id="6446287">*</span><span class="ident" id="6446288">testing</span><span class="op" id="6446295">.</span><span class="ident" id="6446296">T</span><span class="op" id="6446297">)</span>&nbsp;<span class="op" id="6446299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446302">a</span>&nbsp;<span class="op" id="6446304">:=</span>&nbsp;<span class="ident" id="6446307">image</span><span class="op" id="6446312">.</span><span class="ident" id="6446313">NewRGBA</span><span class="op" id="6446320">(</span><span class="ident" id="6446321">image</span><span class="op" id="6446326">.</span><span class="ident" id="6446327">Rect</span><span class="op" id="6446331">(</span><span class="num" id="6446332">0</span><span class="op" id="6446333">,</span>&nbsp;<span class="num" id="6446335">0</span><span class="op" id="6446336">,</span>&nbsp;<span class="num" id="6446338">1</span><span class="op" id="6446339">,</span>&nbsp;<span class="num" id="6446341">1</span><span class="op" id="6446342">)</span><span class="op" id="6446343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446346">b</span>&nbsp;<span class="op" id="6446348">:=</span>&nbsp;<span class="ident" id="6446351">image</span><span class="op" id="6446356">.</span><span class="ident" id="6446357">NewRGBA</span><span class="op" id="6446364">(</span><span class="ident" id="6446365">image</span><span class="op" id="6446370">.</span><span class="ident" id="6446371">Rect</span><span class="op" id="6446375">(</span><span class="num" id="6446376">0</span><span class="op" id="6446377">,</span>&nbsp;<span class="num" id="6446379">0</span><span class="op" id="6446380">,</span>&nbsp;<span class="num" id="6446382">2</span><span class="op" id="6446383">,</span>&nbsp;<span class="num" id="6446385">2</span><span class="op" id="6446386">)</span><span class="op" id="6446387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446390">b</span><span class="op" id="6446391">.</span><span class="ident" id="6446392">Set</span><span class="op" id="6446395">(</span><span class="num" id="6446396">0</span><span class="op" id="6446397">,</span>&nbsp;<span class="num" id="6446399">0</span><span class="op" id="6446400">,</span>&nbsp;<span class="ident" id="6446402">color</span><span class="op" id="6446407">.</span><span class="ident" id="6446408">RGBA</span><span class="op" id="6446412">{</span><span class="num" id="6446413">0</span><span class="op" id="6446414">,</span>&nbsp;<span class="num" id="6446416">0</span><span class="op" id="6446417">,</span>&nbsp;<span class="num" id="6446419">0</span><span class="op" id="6446420">,</span>&nbsp;<span class="num" id="6446422">5</span><span class="op" id="6446423">}</span><span class="op" id="6446424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446427">b</span><span class="op" id="6446428">.</span><span class="ident" id="6446429">Set</span><span class="op" id="6446432">(</span><span class="num" id="6446433">1</span><span class="op" id="6446434">,</span>&nbsp;<span class="num" id="6446436">0</span><span class="op" id="6446437">,</span>&nbsp;<span class="ident" id="6446439">color</span><span class="op" id="6446444">.</span><span class="ident" id="6446445">RGBA</span><span class="op" id="6446449">{</span><span class="num" id="6446450">0</span><span class="op" id="6446451">,</span>&nbsp;<span class="num" id="6446453">0</span><span class="op" id="6446454">,</span>&nbsp;<span class="num" id="6446456">5</span><span class="op" id="6446457">,</span>&nbsp;<span class="num" id="6446459">5</span><span class="op" id="6446460">}</span><span class="op" id="6446461">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446464">b</span><span class="op" id="6446465">.</span><span class="ident" id="6446466">Set</span><span class="op" id="6446469">(</span><span class="num" id="6446470">0</span><span class="op" id="6446471">,</span>&nbsp;<span class="num" id="6446473">1</span><span class="op" id="6446474">,</span>&nbsp;<span class="ident" id="6446476">color</span><span class="op" id="6446481">.</span><span class="ident" id="6446482">RGBA</span><span class="op" id="6446486">{</span><span class="num" id="6446487">0</span><span class="op" id="6446488">,</span>&nbsp;<span class="num" id="6446490">5</span><span class="op" id="6446491">,</span>&nbsp;<span class="num" id="6446493">0</span><span class="op" id="6446494">,</span>&nbsp;<span class="num" id="6446496">5</span><span class="op" id="6446497">}</span><span class="op" id="6446498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446501">b</span><span class="op" id="6446502">.</span><span class="ident" id="6446503">Set</span><span class="op" id="6446506">(</span><span class="num" id="6446507">1</span><span class="op" id="6446508">,</span>&nbsp;<span class="num" id="6446510">1</span><span class="op" id="6446511">,</span>&nbsp;<span class="ident" id="6446513">color</span><span class="op" id="6446518">.</span><span class="ident" id="6446519">RGBA</span><span class="op" id="6446523">{</span><span class="num" id="6446524">5</span><span class="op" id="6446525">,</span>&nbsp;<span class="num" id="6446527">0</span><span class="op" id="6446528">,</span>&nbsp;<span class="num" id="6446530">0</span><span class="op" id="6446531">,</span>&nbsp;<span class="num" id="6446533">5</span><span class="op" id="6446534">}</span><span class="op" id="6446535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446538">Draw</span><span class="op" id="6446542">(</span><span class="ident" id="6446543">a</span><span class="op" id="6446544">,</span>&nbsp;<span class="ident" id="6446546">image</span><span class="op" id="6446551">.</span><span class="ident" id="6446552">Rect</span><span class="op" id="6446556">(</span><span class="num" id="6446557">0</span><span class="op" id="6446558">,</span>&nbsp;<span class="num" id="6446560">0</span><span class="op" id="6446561">,</span>&nbsp;<span class="num" id="6446563">1</span><span class="op" id="6446564">,</span>&nbsp;<span class="num" id="6446566">1</span><span class="op" id="6446567">)</span><span class="op" id="6446568">,</span>&nbsp;<span class="ident" id="6446570">b</span><span class="op" id="6446571">,</span>&nbsp;<span class="ident" id="6446573">image</span><span class="op" id="6446578">.</span><span class="ident" id="6446579">Pt</span><span class="op" id="6446581">(</span><span class="num" id="6446582">1</span><span class="op" id="6446583">,</span>&nbsp;<span class="num" id="6446585">1</span><span class="op" id="6446586">)</span><span class="op" id="6446587">,</span>&nbsp;<span class="ident" id="6446589">Over</span><span class="op" id="6446593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446596">if</span>&nbsp;<span class="op" id="6446599">!</span><span class="ident" id="6446600">eq</span><span class="op" id="6446602">(</span><span class="ident" id="6446603">color</span><span class="op" id="6446608">.</span><span class="ident" id="6446609">RGBA</span><span class="op" id="6446613">{</span><span class="num" id="6446614">5</span><span class="op" id="6446615">,</span>&nbsp;<span class="num" id="6446617">0</span><span class="op" id="6446618">,</span>&nbsp;<span class="num" id="6446620">0</span><span class="op" id="6446621">,</span>&nbsp;<span class="num" id="6446623">5</span><span class="op" id="6446624">}</span><span class="op" id="6446625">,</span>&nbsp;<span class="ident" id="6446627">a</span><span class="op" id="6446628">.</span><span class="ident" id="6446629">At</span><span class="op" id="6446631">(</span><span class="num" id="6446632">0</span><span class="op" id="6446633">,</span>&nbsp;<span class="num" id="6446635">0</span><span class="op" id="6446636">)</span><span class="op" id="6446637">)</span>&nbsp;<span class="op" id="6446639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446643">t</span><span class="op" id="6446644">.</span><span class="ident" id="6446645">Errorf</span><span class="op" id="6446651">(</span><span class="string" id="6446652">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6446685">,</span>&nbsp;<span class="ident" id="6446687">color</span><span class="op" id="6446692">.</span><span class="ident" id="6446693">RGBA</span><span class="op" id="6446697">{</span><span class="num" id="6446698">5</span><span class="op" id="6446699">,</span>&nbsp;<span class="num" id="6446701">0</span><span class="op" id="6446702">,</span>&nbsp;<span class="num" id="6446704">0</span><span class="op" id="6446705">,</span>&nbsp;<span class="num" id="6446707">5</span><span class="op" id="6446708">}</span><span class="op" id="6446709">,</span>&nbsp;<span class="ident" id="6446711">a</span><span class="op" id="6446712">.</span><span class="ident" id="6446713">At</span><span class="op" id="6446715">(</span><span class="num" id="6446716">0</span><span class="op" id="6446717">,</span>&nbsp;<span class="num" id="6446719">0</span><span class="op" id="6446720">)</span><span class="op" id="6446721">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446724">}</span><br>
<span class="lineno"></span><span class="op" id="6446726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6446729">func</span>&nbsp;<span class="ident" id="6446734">TestFill</span><span class="op" id="6446742">(</span><span class="ident" id="6446743">t</span>&nbsp;<span class="op" id="6446745">*</span><span class="ident" id="6446746">testing</span><span class="op" id="6446753">.</span><span class="ident" id="6446754">T</span><span class="op" id="6446755">)</span>&nbsp;<span class="op" id="6446757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446760">rr</span>&nbsp;<span class="op" id="6446763">:=</span>&nbsp;<span class="op" id="6446766">[</span><span class="op" id="6446767">]</span><span class="ident" id="6446768">image</span><span class="op" id="6446773">.</span><span class="ident" id="6446774">Rectangle</span><span class="op" id="6446783">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446787">image</span><span class="op" id="6446792">.</span><span class="ident" id="6446793">Rect</span><span class="op" id="6446797">(</span><span class="num" id="6446798">0</span><span class="op" id="6446799">,</span>&nbsp;<span class="num" id="6446801">0</span><span class="op" id="6446802">,</span>&nbsp;<span class="num" id="6446804">0</span><span class="op" id="6446805">,</span>&nbsp;<span class="num" id="6446807">0</span><span class="op" id="6446808">)</span><span class="op" id="6446809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446813">image</span><span class="op" id="6446818">.</span><span class="ident" id="6446819">Rect</span><span class="op" id="6446823">(</span><span class="num" id="6446824">0</span><span class="op" id="6446825">,</span>&nbsp;<span class="num" id="6446827">0</span><span class="op" id="6446828">,</span>&nbsp;<span class="num" id="6446830">40</span><span class="op" id="6446832">,</span>&nbsp;<span class="num" id="6446834">30</span><span class="op" id="6446836">)</span><span class="op" id="6446837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446841">image</span><span class="op" id="6446846">.</span><span class="ident" id="6446847">Rect</span><span class="op" id="6446851">(</span><span class="num" id="6446852">10</span><span class="op" id="6446854">,</span>&nbsp;<span class="num" id="6446856">0</span><span class="op" id="6446857">,</span>&nbsp;<span class="num" id="6446859">40</span><span class="op" id="6446861">,</span>&nbsp;<span class="num" id="6446863">30</span><span class="op" id="6446865">)</span><span class="op" id="6446866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446870">image</span><span class="op" id="6446875">.</span><span class="ident" id="6446876">Rect</span><span class="op" id="6446880">(</span><span class="num" id="6446881">0</span><span class="op" id="6446882">,</span>&nbsp;<span class="num" id="6446884">20</span><span class="op" id="6446886">,</span>&nbsp;<span class="num" id="6446888">40</span><span class="op" id="6446890">,</span>&nbsp;<span class="num" id="6446892">30</span><span class="op" id="6446894">)</span><span class="op" id="6446895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446899">image</span><span class="op" id="6446904">.</span><span class="ident" id="6446905">Rect</span><span class="op" id="6446909">(</span><span class="num" id="6446910">10</span><span class="op" id="6446912">,</span>&nbsp;<span class="num" id="6446914">20</span><span class="op" id="6446916">,</span>&nbsp;<span class="num" id="6446918">40</span><span class="op" id="6446920">,</span>&nbsp;<span class="num" id="6446922">30</span><span class="op" id="6446924">)</span><span class="op" id="6446925">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446929">image</span><span class="op" id="6446934">.</span><span class="ident" id="6446935">Rect</span><span class="op" id="6446939">(</span><span class="num" id="6446940">10</span><span class="op" id="6446942">,</span>&nbsp;<span class="num" id="6446944">20</span><span class="op" id="6446946">,</span>&nbsp;<span class="num" id="6446948">15</span><span class="op" id="6446950">,</span>&nbsp;<span class="num" id="6446952">25</span><span class="op" id="6446954">)</span><span class="op" id="6446955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446959">image</span><span class="op" id="6446964">.</span><span class="ident" id="6446965">Rect</span><span class="op" id="6446969">(</span><span class="num" id="6446970">10</span><span class="op" id="6446972">,</span>&nbsp;<span class="num" id="6446974">0</span><span class="op" id="6446975">,</span>&nbsp;<span class="num" id="6446977">35</span><span class="op" id="6446979">,</span>&nbsp;<span class="num" id="6446981">30</span><span class="op" id="6446983">)</span><span class="op" id="6446984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446988">image</span><span class="op" id="6446993">.</span><span class="ident" id="6446994">Rect</span><span class="op" id="6446998">(</span><span class="num" id="6446999">0</span><span class="op" id="6447000">,</span>&nbsp;<span class="num" id="6447002">15</span><span class="op" id="6447004">,</span>&nbsp;<span class="num" id="6447006">40</span><span class="op" id="6447008">,</span>&nbsp;<span class="num" id="6447010">16</span><span class="op" id="6447012">)</span><span class="op" id="6447013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447017">image</span><span class="op" id="6447022">.</span><span class="ident" id="6447023">Rect</span><span class="op" id="6447027">(</span><span class="num" id="6447028">24</span><span class="op" id="6447030">,</span>&nbsp;<span class="num" id="6447032">24</span><span class="op" id="6447034">,</span>&nbsp;<span class="num" id="6447036">25</span><span class="op" id="6447038">,</span>&nbsp;<span class="num" id="6447040">25</span><span class="op" id="6447042">)</span><span class="op" id="6447043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447047">image</span><span class="op" id="6447052">.</span><span class="ident" id="6447053">Rect</span><span class="op" id="6447057">(</span><span class="num" id="6447058">23</span><span class="op" id="6447060">,</span>&nbsp;<span class="num" id="6447062">23</span><span class="op" id="6447064">,</span>&nbsp;<span class="num" id="6447066">26</span><span class="op" id="6447068">,</span>&nbsp;<span class="num" id="6447070">26</span><span class="op" id="6447072">)</span><span class="op" id="6447073">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447077">image</span><span class="op" id="6447082">.</span><span class="ident" id="6447083">Rect</span><span class="op" id="6447087">(</span><span class="num" id="6447088">22</span><span class="op" id="6447090">,</span>&nbsp;<span class="num" id="6447092">22</span><span class="op" id="6447094">,</span>&nbsp;<span class="num" id="6447096">27</span><span class="op" id="6447098">,</span>&nbsp;<span class="num" id="6447100">27</span><span class="op" id="6447102">)</span><span class="op" id="6447103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447107">image</span><span class="op" id="6447112">.</span><span class="ident" id="6447113">Rect</span><span class="op" id="6447117">(</span><span class="num" id="6447118">21</span><span class="op" id="6447120">,</span>&nbsp;<span class="num" id="6447122">21</span><span class="op" id="6447124">,</span>&nbsp;<span class="num" id="6447126">28</span><span class="op" id="6447128">,</span>&nbsp;<span class="num" id="6447130">28</span><span class="op" id="6447132">)</span><span class="op" id="6447133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447137">image</span><span class="op" id="6447142">.</span><span class="ident" id="6447143">Rect</span><span class="op" id="6447147">(</span><span class="num" id="6447148">20</span><span class="op" id="6447150">,</span>&nbsp;<span class="num" id="6447152">20</span><span class="op" id="6447154">,</span>&nbsp;<span class="num" id="6447156">29</span><span class="op" id="6447158">,</span>&nbsp;<span class="num" id="6447160">29</span><span class="op" id="6447162">)</span><span class="op" id="6447163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447169">for</span>&nbsp;<span class="ident" id="6447173">_</span><span class="op" id="6447174">,</span>&nbsp;<span class="ident" id="6447176">r</span>&nbsp;<span class="op" id="6447178">:=</span>&nbsp;<span class="keyword" id="6447181">range</span>&nbsp;<span class="ident" id="6447187">rr</span>&nbsp;<span class="op" id="6447190">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447194">m</span>&nbsp;<span class="op" id="6447196">:=</span>&nbsp;<span class="ident" id="6447199">image</span><span class="op" id="6447204">.</span><span class="ident" id="6447205">NewRGBA</span><span class="op" id="6447212">(</span><span class="ident" id="6447213">image</span><span class="op" id="6447218">.</span><span class="ident" id="6447219">Rect</span><span class="op" id="6447223">(</span><span class="num" id="6447224">0</span><span class="op" id="6447225">,</span>&nbsp;<span class="num" id="6447227">0</span><span class="op" id="6447228">,</span>&nbsp;<span class="num" id="6447230">40</span><span class="op" id="6447232">,</span>&nbsp;<span class="num" id="6447234">30</span><span class="op" id="6447236">)</span><span class="op" id="6447237">)</span><span class="op" id="6447238">.</span><span class="ident" id="6447239">SubImage</span><span class="op" id="6447247">(</span><span class="ident" id="6447248">r</span><span class="op" id="6447249">)</span><span class="op" id="6447250">.</span><span class="op" id="6447251">(</span><span class="op" id="6447252">*</span><span class="ident" id="6447253">image</span><span class="op" id="6447258">.</span><span class="ident" id="6447259">RGBA</span><span class="op" id="6447263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447267">b</span>&nbsp;<span class="op" id="6447269">:=</span>&nbsp;<span class="ident" id="6447272">m</span><span class="op" id="6447273">.</span><span class="ident" id="6447274">Bounds</span><span class="op" id="6447280">(</span><span class="op" id="6447281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447285">c</span>&nbsp;<span class="op" id="6447287">:=</span>&nbsp;<span class="ident" id="6447290">color</span><span class="op" id="6447295">.</span><span class="ident" id="6447296">RGBA</span><span class="op" id="6447300">{</span><span class="num" id="6447301">11</span><span class="op" id="6447303">,</span>&nbsp;<span class="num" id="6447305">0</span><span class="op" id="6447306">,</span>&nbsp;<span class="num" id="6447308">0</span><span class="op" id="6447309">,</span>&nbsp;<span class="num" id="6447311">255</span><span class="op" id="6447314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447318">src</span>&nbsp;<span class="op" id="6447322">:=</span>&nbsp;<span class="op" id="6447325">&amp;</span><span class="ident" id="6447326">image</span><span class="op" id="6447331">.</span><span class="ident" id="6447332">Uniform</span><span class="op" id="6447339">{</span><span class="ident" id="6447340">C</span><span class="op" id="6447341">:</span>&nbsp;<span class="ident" id="6447343">c</span><span class="op" id="6447344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447348">check</span>&nbsp;<span class="op" id="6447354">:=</span>&nbsp;<span class="keyword" id="6447357">func</span><span class="op" id="6447361">(</span><span class="ident" id="6447362">desc</span>&nbsp;<span class="builtintype" id="6447367">string</span><span class="op" id="6447373">)</span>&nbsp;<span class="op" id="6447375">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447380">for</span>&nbsp;<span class="ident" id="6447384">y</span>&nbsp;<span class="op" id="6447386">:=</span>&nbsp;<span class="ident" id="6447389">b</span><span class="op" id="6447390">.</span><span class="ident" id="6447391">Min</span><span class="op" id="6447394">.</span><span class="ident" id="6447395">Y</span><span class="op" id="6447396">;</span>&nbsp;<span class="ident" id="6447398">y</span>&nbsp;<span class="op" id="6447400">&lt;</span>&nbsp;<span class="ident" id="6447402">b</span><span class="op" id="6447403">.</span><span class="ident" id="6447404">Max</span><span class="op" id="6447407">.</span><span class="ident" id="6447408">Y</span><span class="op" id="6447409">;</span>&nbsp;<span class="ident" id="6447411">y</span><span class="op" id="6447412">++</span>&nbsp;<span class="op" id="6447415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447421">for</span>&nbsp;<span class="ident" id="6447425">x</span>&nbsp;<span class="op" id="6447427">:=</span>&nbsp;<span class="ident" id="6447430">b</span><span class="op" id="6447431">.</span><span class="ident" id="6447432">Min</span><span class="op" id="6447435">.</span><span class="ident" id="6447436">X</span><span class="op" id="6447437">;</span>&nbsp;<span class="ident" id="6447439">x</span>&nbsp;<span class="op" id="6447441">&lt;</span>&nbsp;<span class="ident" id="6447443">b</span><span class="op" id="6447444">.</span><span class="ident" id="6447445">Max</span><span class="op" id="6447448">.</span><span class="ident" id="6447449">X</span><span class="op" id="6447450">;</span>&nbsp;<span class="ident" id="6447452">x</span><span class="op" id="6447453">++</span>&nbsp;<span class="op" id="6447456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447463">if</span>&nbsp;<span class="op" id="6447466">!</span><span class="ident" id="6447467">eq</span><span class="op" id="6447469">(</span><span class="ident" id="6447470">c</span><span class="op" id="6447471">,</span>&nbsp;<span class="ident" id="6447473">m</span><span class="op" id="6447474">.</span><span class="ident" id="6447475">At</span><span class="op" id="6447477">(</span><span class="ident" id="6447478">x</span><span class="op" id="6447479">,</span>&nbsp;<span class="ident" id="6447481">y</span><span class="op" id="6447482">)</span><span class="op" id="6447483">)</span>&nbsp;<span class="op" id="6447485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447493">t</span><span class="op" id="6447494">.</span><span class="ident" id="6447495">Errorf</span><span class="op" id="6447501">(</span><span class="string" id="6447502">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6447561">,</span>&nbsp;<span class="ident" id="6447563">desc</span><span class="op" id="6447567">,</span>&nbsp;<span class="ident" id="6447569">x</span><span class="op" id="6447570">,</span>&nbsp;<span class="ident" id="6447572">y</span><span class="op" id="6447573">,</span>&nbsp;<span class="ident" id="6447575">r</span><span class="op" id="6447576">,</span>&nbsp;<span class="ident" id="6447578">c</span><span class="op" id="6447579">,</span>&nbsp;<span class="ident" id="6447581">m</span><span class="op" id="6447582">.</span><span class="ident" id="6447583">At</span><span class="op" id="6447585">(</span><span class="ident" id="6447586">x</span><span class="op" id="6447587">,</span>&nbsp;<span class="ident" id="6447589">y</span><span class="op" id="6447590">)</span><span class="op" id="6447591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447599">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6447630">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447659">for</span>&nbsp;<span class="ident" id="6447663">y</span>&nbsp;<span class="op" id="6447665">:=</span>&nbsp;<span class="ident" id="6447668">b</span><span class="op" id="6447669">.</span><span class="ident" id="6447670">Min</span><span class="op" id="6447673">.</span><span class="ident" id="6447674">Y</span><span class="op" id="6447675">;</span>&nbsp;<span class="ident" id="6447677">y</span>&nbsp;<span class="op" id="6447679">&lt;</span>&nbsp;<span class="ident" id="6447681">b</span><span class="op" id="6447682">.</span><span class="ident" id="6447683">Max</span><span class="op" id="6447686">.</span><span class="ident" id="6447687">Y</span><span class="op" id="6447688">;</span>&nbsp;<span class="ident" id="6447690">y</span><span class="op" id="6447691">++</span>&nbsp;<span class="op" id="6447694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447699">for</span>&nbsp;<span class="ident" id="6447703">x</span>&nbsp;<span class="op" id="6447705">:=</span>&nbsp;<span class="ident" id="6447708">b</span><span class="op" id="6447709">.</span><span class="ident" id="6447710">Min</span><span class="op" id="6447713">.</span><span class="ident" id="6447714">X</span><span class="op" id="6447715">;</span>&nbsp;<span class="ident" id="6447717">x</span>&nbsp;<span class="op" id="6447719">&lt;</span>&nbsp;<span class="ident" id="6447721">b</span><span class="op" id="6447722">.</span><span class="ident" id="6447723">Max</span><span class="op" id="6447726">.</span><span class="ident" id="6447727">X</span><span class="op" id="6447728">;</span>&nbsp;<span class="ident" id="6447730">x</span><span class="op" id="6447731">++</span>&nbsp;<span class="op" id="6447734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447740">DrawMask</span><span class="op" id="6447748">(</span><span class="ident" id="6447749">m</span><span class="op" id="6447750">,</span>&nbsp;<span class="ident" id="6447752">image</span><span class="op" id="6447757">.</span><span class="ident" id="6447758">Rect</span><span class="op" id="6447762">(</span><span class="ident" id="6447763">x</span><span class="op" id="6447764">,</span>&nbsp;<span class="ident" id="6447766">y</span><span class="op" id="6447767">,</span>&nbsp;<span class="ident" id="6447769">x</span><span class="op" id="6447770">+</span><span class="num" id="6447771">1</span><span class="op" id="6447772">,</span>&nbsp;<span class="ident" id="6447774">y</span><span class="op" id="6447775">+</span><span class="num" id="6447776">1</span><span class="op" id="6447777">)</span><span class="op" id="6447778">,</span>&nbsp;<span class="ident" id="6447780">src</span><span class="op" id="6447783">,</span>&nbsp;<span class="ident" id="6447785">image</span><span class="op" id="6447790">.</span><span class="ident" id="6447791">ZP</span><span class="op" id="6447793">,</span>&nbsp;<span class="ident" id="6447795">nil</span><span class="op" id="6447798">,</span>&nbsp;<span class="ident" id="6447800">image</span><span class="op" id="6447805">.</span><span class="ident" id="6447806">ZP</span><span class="op" id="6447808">,</span>&nbsp;<span class="ident" id="6447810">Src</span><span class="op" id="6447813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447822">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447826">check</span><span class="op" id="6447831">(</span><span class="string" id="6447832">&#34;pixel&#34;</span><span class="op" id="6447839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6447843">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447870">c</span>&nbsp;<span class="op" id="6447872">=</span>&nbsp;<span class="ident" id="6447874">color</span><span class="op" id="6447879">.</span><span class="ident" id="6447880">RGBA</span><span class="op" id="6447884">{</span><span class="num" id="6447885">0</span><span class="op" id="6447886">,</span>&nbsp;<span class="num" id="6447888">22</span><span class="op" id="6447890">,</span>&nbsp;<span class="num" id="6447892">0</span><span class="op" id="6447893">,</span>&nbsp;<span class="num" id="6447895">255</span><span class="op" id="6447898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447902">src</span>&nbsp;<span class="op" id="6447906">=</span>&nbsp;<span class="op" id="6447908">&amp;</span><span class="ident" id="6447909">image</span><span class="op" id="6447914">.</span><span class="ident" id="6447915">Uniform</span><span class="op" id="6447922">{</span><span class="ident" id="6447923">C</span><span class="op" id="6447924">:</span>&nbsp;<span class="ident" id="6447926">c</span><span class="op" id="6447927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447931">for</span>&nbsp;<span class="ident" id="6447935">y</span>&nbsp;<span class="op" id="6447937">:=</span>&nbsp;<span class="ident" id="6447940">b</span><span class="op" id="6447941">.</span><span class="ident" id="6447942">Min</span><span class="op" id="6447945">.</span><span class="ident" id="6447946">Y</span><span class="op" id="6447947">;</span>&nbsp;<span class="ident" id="6447949">y</span>&nbsp;<span class="op" id="6447951">&lt;</span>&nbsp;<span class="ident" id="6447953">b</span><span class="op" id="6447954">.</span><span class="ident" id="6447955">Max</span><span class="op" id="6447958">.</span><span class="ident" id="6447959">Y</span><span class="op" id="6447960">;</span>&nbsp;<span class="ident" id="6447962">y</span><span class="op" id="6447963">++</span>&nbsp;<span class="op" id="6447966">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447971">DrawMask</span><span class="op" id="6447979">(</span><span class="ident" id="6447980">m</span><span class="op" id="6447981">,</span>&nbsp;<span class="ident" id="6447983">image</span><span class="op" id="6447988">.</span><span class="ident" id="6447989">Rect</span><span class="op" id="6447993">(</span><span class="ident" id="6447994">b</span><span class="op" id="6447995">.</span><span class="ident" id="6447996">Min</span><span class="op" id="6447999">.</span><span class="ident" id="6448000">X</span><span class="op" id="6448001">,</span>&nbsp;<span class="ident" id="6448003">y</span><span class="op" id="6448004">,</span>&nbsp;<span class="ident" id="6448006">b</span><span class="op" id="6448007">.</span><span class="ident" id="6448008">Max</span><span class="op" id="6448011">.</span><span class="ident" id="6448012">X</span><span class="op" id="6448013">,</span>&nbsp;<span class="ident" id="6448015">y</span><span class="op" id="6448016">+</span><span class="num" id="6448017">1</span><span class="op" id="6448018">)</span><span class="op" id="6448019">,</span>&nbsp;<span class="ident" id="6448021">src</span><span class="op" id="6448024">,</span>&nbsp;<span class="ident" id="6448026">image</span><span class="op" id="6448031">.</span><span class="ident" id="6448032">ZP</span><span class="op" id="6448034">,</span>&nbsp;<span class="ident" id="6448036">nil</span><span class="op" id="6448039">,</span>&nbsp;<span class="ident" id="6448041">image</span><span class="op" id="6448046">.</span><span class="ident" id="6448047">ZP</span><span class="op" id="6448049">,</span>&nbsp;<span class="ident" id="6448051">Src</span><span class="op" id="6448054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448062">check</span><span class="op" id="6448067">(</span><span class="string" id="6448068">&#34;row&#34;</span><span class="op" id="6448073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6448077">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448107">c</span>&nbsp;<span class="op" id="6448109">=</span>&nbsp;<span class="ident" id="6448111">color</span><span class="op" id="6448116">.</span><span class="ident" id="6448117">RGBA</span><span class="op" id="6448121">{</span><span class="num" id="6448122">0</span><span class="op" id="6448123">,</span>&nbsp;<span class="num" id="6448125">0</span><span class="op" id="6448126">,</span>&nbsp;<span class="num" id="6448128">33</span><span class="op" id="6448130">,</span>&nbsp;<span class="num" id="6448132">255</span><span class="op" id="6448135">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448139">src</span>&nbsp;<span class="op" id="6448143">=</span>&nbsp;<span class="op" id="6448145">&amp;</span><span class="ident" id="6448146">image</span><span class="op" id="6448151">.</span><span class="ident" id="6448152">Uniform</span><span class="op" id="6448159">{</span><span class="ident" id="6448160">C</span><span class="op" id="6448161">:</span>&nbsp;<span class="ident" id="6448163">c</span><span class="op" id="6448164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448168">for</span>&nbsp;<span class="ident" id="6448172">x</span>&nbsp;<span class="op" id="6448174">:=</span>&nbsp;<span class="ident" id="6448177">b</span><span class="op" id="6448178">.</span><span class="ident" id="6448179">Min</span><span class="op" id="6448182">.</span><span class="ident" id="6448183">X</span><span class="op" id="6448184">;</span>&nbsp;<span class="ident" id="6448186">x</span>&nbsp;<span class="op" id="6448188">&lt;</span>&nbsp;<span class="ident" id="6448190">b</span><span class="op" id="6448191">.</span><span class="ident" id="6448192">Max</span><span class="op" id="6448195">.</span><span class="ident" id="6448196">X</span><span class="op" id="6448197">;</span>&nbsp;<span class="ident" id="6448199">x</span><span class="op" id="6448200">++</span>&nbsp;<span class="op" id="6448203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448208">DrawMask</span><span class="op" id="6448216">(</span><span class="ident" id="6448217">m</span><span class="op" id="6448218">,</span>&nbsp;<span class="ident" id="6448220">image</span><span class="op" id="6448225">.</span><span class="ident" id="6448226">Rect</span><span class="op" id="6448230">(</span><span class="ident" id="6448231">x</span><span class="op" id="6448232">,</span>&nbsp;<span class="ident" id="6448234">b</span><span class="op" id="6448235">.</span><span class="ident" id="6448236">Min</span><span class="op" id="6448239">.</span><span class="ident" id="6448240">Y</span><span class="op" id="6448241">,</span>&nbsp;<span class="ident" id="6448243">x</span><span class="op" id="6448244">+</span><span class="num" id="6448245">1</span><span class="op" id="6448246">,</span>&nbsp;<span class="ident" id="6448248">b</span><span class="op" id="6448249">.</span><span class="ident" id="6448250">Max</span><span class="op" id="6448253">.</span><span class="ident" id="6448254">Y</span><span class="op" id="6448255">)</span><span class="op" id="6448256">,</span>&nbsp;<span class="ident" id="6448258">src</span><span class="op" id="6448261">,</span>&nbsp;<span class="ident" id="6448263">image</span><span class="op" id="6448268">.</span><span class="ident" id="6448269">ZP</span><span class="op" id="6448271">,</span>&nbsp;<span class="ident" id="6448273">nil</span><span class="op" id="6448276">,</span>&nbsp;<span class="ident" id="6448278">image</span><span class="op" id="6448283">.</span><span class="ident" id="6448284">ZP</span><span class="op" id="6448286">,</span>&nbsp;<span class="ident" id="6448288">Src</span><span class="op" id="6448291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448299">check</span><span class="op" id="6448304">(</span><span class="string" id="6448305">&#34;column&#34;</span><span class="op" id="6448313">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6448317">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448352">c</span>&nbsp;<span class="op" id="6448354">=</span>&nbsp;<span class="ident" id="6448356">color</span><span class="op" id="6448361">.</span><span class="ident" id="6448362">RGBA</span><span class="op" id="6448366">{</span><span class="num" id="6448367">44</span><span class="op" id="6448369">,</span>&nbsp;<span class="num" id="6448371">55</span><span class="op" id="6448373">,</span>&nbsp;<span class="num" id="6448375">66</span><span class="op" id="6448377">,</span>&nbsp;<span class="num" id="6448379">77</span><span class="op" id="6448381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448385">src</span>&nbsp;<span class="op" id="6448389">=</span>&nbsp;<span class="op" id="6448391">&amp;</span><span class="ident" id="6448392">image</span><span class="op" id="6448397">.</span><span class="ident" id="6448398">Uniform</span><span class="op" id="6448405">{</span><span class="ident" id="6448406">C</span><span class="op" id="6448407">:</span>&nbsp;<span class="ident" id="6448409">c</span><span class="op" id="6448410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448414">DrawMask</span><span class="op" id="6448422">(</span><span class="ident" id="6448423">m</span><span class="op" id="6448424">,</span>&nbsp;<span class="ident" id="6448426">b</span><span class="op" id="6448427">,</span>&nbsp;<span class="ident" id="6448429">src</span><span class="op" id="6448432">,</span>&nbsp;<span class="ident" id="6448434">image</span><span class="op" id="6448439">.</span><span class="ident" id="6448440">ZP</span><span class="op" id="6448442">,</span>&nbsp;<span class="ident" id="6448444">nil</span><span class="op" id="6448447">,</span>&nbsp;<span class="ident" id="6448449">image</span><span class="op" id="6448454">.</span><span class="ident" id="6448455">ZP</span><span class="op" id="6448457">,</span>&nbsp;<span class="ident" id="6448459">Src</span><span class="op" id="6448462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448466">check</span><span class="op" id="6448471">(</span><span class="string" id="6448472">&#34;whole&#34;</span><span class="op" id="6448479">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448482">}</span><br>
<span class="lineno"></span><span class="op" id="6448484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6448487">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6448562">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6448639">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6448677">func</span>&nbsp;<span class="ident" id="6448682">TestFloydSteinbergCheckerboard</span><span class="op" id="6448712">(</span><span class="ident" id="6448713">t</span>&nbsp;<span class="op" id="6448715">*</span><span class="ident" id="6448716">testing</span><span class="op" id="6448723">.</span><span class="ident" id="6448724">T</span><span class="op" id="6448725">)</span>&nbsp;<span class="op" id="6448727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448730">b</span>&nbsp;<span class="op" id="6448732">:=</span>&nbsp;<span class="ident" id="6448735">image</span><span class="op" id="6448740">.</span><span class="ident" id="6448741">Rect</span><span class="op" id="6448745">(</span><span class="num" id="6448746">0</span><span class="op" id="6448747">,</span>&nbsp;<span class="num" id="6448749">0</span><span class="op" id="6448750">,</span>&nbsp;<span class="num" id="6448752">640</span><span class="op" id="6448755">,</span>&nbsp;<span class="num" id="6448757">480</span><span class="op" id="6448760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6448763">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448836">src</span>&nbsp;<span class="op" id="6448840">:=</span>&nbsp;<span class="op" id="6448843">&amp;</span><span class="ident" id="6448844">image</span><span class="op" id="6448849">.</span><span class="ident" id="6448850">Uniform</span><span class="op" id="6448857">{</span><span class="ident" id="6448858">color</span><span class="op" id="6448863">.</span><span class="ident" id="6448864">Gray16</span><span class="op" id="6448870">{</span><span class="num" id="6448871">0x7fff</span><span class="op" id="6448877">}</span><span class="op" id="6448878">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448881">dst</span>&nbsp;<span class="op" id="6448885">:=</span>&nbsp;<span class="ident" id="6448888">image</span><span class="op" id="6448893">.</span><span class="ident" id="6448894">NewPaletted</span><span class="op" id="6448905">(</span><span class="ident" id="6448906">b</span><span class="op" id="6448907">,</span>&nbsp;<span class="ident" id="6448909">color</span><span class="op" id="6448914">.</span><span class="ident" id="6448915">Palette</span><span class="op" id="6448922">{</span><span class="ident" id="6448923">color</span><span class="op" id="6448928">.</span><span class="ident" id="6448929">Black</span><span class="op" id="6448934">,</span>&nbsp;<span class="ident" id="6448936">color</span><span class="op" id="6448941">.</span><span class="ident" id="6448942">White</span><span class="op" id="6448947">}</span><span class="op" id="6448948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448951">FloydSteinberg</span><span class="op" id="6448965">.</span><span class="ident" id="6448966">Draw</span><span class="op" id="6448970">(</span><span class="ident" id="6448971">dst</span><span class="op" id="6448974">,</span>&nbsp;<span class="ident" id="6448976">b</span><span class="op" id="6448977">,</span>&nbsp;<span class="ident" id="6448979">src</span><span class="op" id="6448982">,</span>&nbsp;<span class="ident" id="6448984">image</span><span class="op" id="6448989">.</span><span class="ident" id="6448990">Point</span><span class="op" id="6448995">{</span><span class="op" id="6448996">}</span><span class="op" id="6448997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449000">nErr</span>&nbsp;<span class="op" id="6449005">:=</span>&nbsp;<span class="num" id="6449008">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449011">for</span>&nbsp;<span class="ident" id="6449015">y</span>&nbsp;<span class="op" id="6449017">:=</span>&nbsp;<span class="ident" id="6449020">b</span><span class="op" id="6449021">.</span><span class="ident" id="6449022">Min</span><span class="op" id="6449025">.</span><span class="ident" id="6449026">Y</span><span class="op" id="6449027">;</span>&nbsp;<span class="ident" id="6449029">y</span>&nbsp;<span class="op" id="6449031">&lt;</span>&nbsp;<span class="ident" id="6449033">b</span><span class="op" id="6449034">.</span><span class="ident" id="6449035">Max</span><span class="op" id="6449038">.</span><span class="ident" id="6449039">Y</span><span class="op" id="6449040">;</span>&nbsp;<span class="ident" id="6449042">y</span><span class="op" id="6449043">++</span>&nbsp;<span class="op" id="6449046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449050">for</span>&nbsp;<span class="ident" id="6449054">x</span>&nbsp;<span class="op" id="6449056">:=</span>&nbsp;<span class="ident" id="6449059">b</span><span class="op" id="6449060">.</span><span class="ident" id="6449061">Min</span><span class="op" id="6449064">.</span><span class="ident" id="6449065">X</span><span class="op" id="6449066">;</span>&nbsp;<span class="ident" id="6449068">x</span>&nbsp;<span class="op" id="6449070">&lt;</span>&nbsp;<span class="ident" id="6449072">b</span><span class="op" id="6449073">.</span><span class="ident" id="6449074">Max</span><span class="op" id="6449077">.</span><span class="ident" id="6449078">X</span><span class="op" id="6449079">;</span>&nbsp;<span class="ident" id="6449081">x</span><span class="op" id="6449082">++</span>&nbsp;<span class="op" id="6449085">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449090">got</span>&nbsp;<span class="op" id="6449094">:=</span>&nbsp;<span class="ident" id="6449097">dst</span><span class="op" id="6449100">.</span><span class="ident" id="6449101">Pix</span><span class="op" id="6449104">[</span><span class="ident" id="6449105">dst</span><span class="op" id="6449108">.</span><span class="ident" id="6449109">PixOffset</span><span class="op" id="6449118">(</span><span class="ident" id="6449119">x</span><span class="op" id="6449120">,</span>&nbsp;<span class="ident" id="6449122">y</span><span class="op" id="6449123">)</span><span class="op" id="6449124">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449129">want</span>&nbsp;<span class="op" id="6449134">:=</span>&nbsp;<span class="builtintype" id="6449137">uint8</span><span class="op" id="6449142">(</span><span class="ident" id="6449143">x</span><span class="op" id="6449144">+</span><span class="ident" id="6449145">y</span><span class="op" id="6449146">)</span>&nbsp;<span class="op" id="6449148">%</span>&nbsp;<span class="num" id="6449150">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449155">if</span>&nbsp;<span class="ident" id="6449158">got</span>&nbsp;<span class="op" id="6449162">!=</span>&nbsp;<span class="ident" id="6449165">want</span>&nbsp;<span class="op" id="6449170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449176">t</span><span class="op" id="6449177">.</span><span class="ident" id="6449178">Errorf</span><span class="op" id="6449184">(</span><span class="string" id="6449185">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6449215">,</span>&nbsp;<span class="ident" id="6449217">x</span><span class="op" id="6449218">,</span>&nbsp;<span class="ident" id="6449220">y</span><span class="op" id="6449221">,</span>&nbsp;<span class="ident" id="6449223">got</span><span class="op" id="6449226">,</span>&nbsp;<span class="ident" id="6449228">want</span><span class="op" id="6449232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449238">if</span>&nbsp;<span class="ident" id="6449241">nErr</span><span class="op" id="6449245">++</span><span class="op" id="6449247">;</span>&nbsp;<span class="ident" id="6449249">nErr</span>&nbsp;<span class="op" id="6449254">==</span>&nbsp;<span class="num" id="6449257">10</span>&nbsp;<span class="op" id="6449260">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449267">t</span><span class="op" id="6449268">.</span><span class="ident" id="6449269">Fatal</span><span class="op" id="6449274">(</span><span class="string" id="6449275">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6449301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449319">}</span><br>
<span class="lineno">380</span><span class="op" id="6449321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6449324">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6449403">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6449435">type</span>&nbsp;<span class="ident" id="6449440">embeddedPaletted</span>&nbsp;<span class="keyword" id="6449457">struct</span>&nbsp;<span class="op" id="6449464">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449467">*</span><span class="ident" id="6449468">image</span><span class="op" id="6449473">.</span><span class="ident" id="6449474">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6449483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6449486">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6449556">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6449608">func</span>&nbsp;<span class="ident" id="6449613">TestPaletted</span><span class="op" id="6449625">(</span><span class="ident" id="6449626">t</span>&nbsp;<span class="op" id="6449628">*</span><span class="ident" id="6449629">testing</span><span class="op" id="6449636">.</span><span class="ident" id="6449637">T</span><span class="op" id="6449638">)</span>&nbsp;<span class="op" id="6449640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449643">f</span><span class="op" id="6449644">,</span>&nbsp;<span class="ident" id="6449646">err</span>&nbsp;<span class="op" id="6449650">:=</span>&nbsp;<span class="ident" id="6449653">os</span><span class="op" id="6449655">.</span><span class="ident" id="6449656">Open</span><span class="op" id="6449660">(</span><span class="string" id="6449661">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6449688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449691">if</span>&nbsp;<span class="ident" id="6449694">err</span>&nbsp;<span class="op" id="6449698">!=</span>&nbsp;<span class="ident" id="6449701">nil</span>&nbsp;<span class="op" id="6449705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449709">t</span><span class="op" id="6449710">.</span><span class="ident" id="6449711">Fatalf</span><span class="op" id="6449717">(</span><span class="string" id="6449718">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6449728">,</span>&nbsp;<span class="ident" id="6449730">err</span><span class="op" id="6449733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449736">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449739">defer</span>&nbsp;<span class="ident" id="6449745">f</span><span class="op" id="6449746">.</span><span class="ident" id="6449747">Close</span><span class="op" id="6449752">(</span><span class="op" id="6449753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449756">src</span><span class="op" id="6449759">,</span>&nbsp;<span class="ident" id="6449761">err</span>&nbsp;<span class="op" id="6449765">:=</span>&nbsp;<span class="ident" id="6449768">png</span><span class="op" id="6449771">.</span><span class="ident" id="6449772">Decode</span><span class="op" id="6449778">(</span><span class="ident" id="6449779">f</span><span class="op" id="6449780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449783">if</span>&nbsp;<span class="ident" id="6449786">err</span>&nbsp;<span class="op" id="6449790">!=</span>&nbsp;<span class="ident" id="6449793">nil</span>&nbsp;<span class="op" id="6449797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449801">t</span><span class="op" id="6449802">.</span><span class="ident" id="6449803">Fatalf</span><span class="op" id="6449809">(</span><span class="string" id="6449810">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6449822">,</span>&nbsp;<span class="ident" id="6449824">err</span><span class="op" id="6449827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449830">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449833">b</span>&nbsp;<span class="op" id="6449835">:=</span>&nbsp;<span class="ident" id="6449838">src</span><span class="op" id="6449841">.</span><span class="ident" id="6449842">Bounds</span><span class="op" id="6449848">(</span><span class="op" id="6449849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449853">cgaPalette</span>&nbsp;<span class="op" id="6449864">:=</span>&nbsp;<span class="ident" id="6449867">color</span><span class="op" id="6449872">.</span><span class="ident" id="6449873">Palette</span><span class="op" id="6449880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449884">color</span><span class="op" id="6449889">.</span><span class="ident" id="6449890">RGBA</span><span class="op" id="6449894">{</span><span class="num" id="6449895">0x00</span><span class="op" id="6449899">,</span>&nbsp;<span class="num" id="6449901">0x00</span><span class="op" id="6449905">,</span>&nbsp;<span class="num" id="6449907">0x00</span><span class="op" id="6449911">,</span>&nbsp;<span class="num" id="6449913">0xff</span><span class="op" id="6449917">}</span><span class="op" id="6449918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449922">color</span><span class="op" id="6449927">.</span><span class="ident" id="6449928">RGBA</span><span class="op" id="6449932">{</span><span class="num" id="6449933">0x55</span><span class="op" id="6449937">,</span>&nbsp;<span class="num" id="6449939">0xff</span><span class="op" id="6449943">,</span>&nbsp;<span class="num" id="6449945">0xff</span><span class="op" id="6449949">,</span>&nbsp;<span class="num" id="6449951">0xff</span><span class="op" id="6449955">}</span><span class="op" id="6449956">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449960">color</span><span class="op" id="6449965">.</span><span class="ident" id="6449966">RGBA</span><span class="op" id="6449970">{</span><span class="num" id="6449971">0xff</span><span class="op" id="6449975">,</span>&nbsp;<span class="num" id="6449977">0x55</span><span class="op" id="6449981">,</span>&nbsp;<span class="num" id="6449983">0xff</span><span class="op" id="6449987">,</span>&nbsp;<span class="num" id="6449989">0xff</span><span class="op" id="6449993">}</span><span class="op" id="6449994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449998">color</span><span class="op" id="6450003">.</span><span class="ident" id="6450004">RGBA</span><span class="op" id="6450008">{</span><span class="num" id="6450009">0xff</span><span class="op" id="6450013">,</span>&nbsp;<span class="num" id="6450015">0xff</span><span class="op" id="6450019">,</span>&nbsp;<span class="num" id="6450021">0xff</span><span class="op" id="6450025">,</span>&nbsp;<span class="num" id="6450027">0xff</span><span class="op" id="6450031">}</span><span class="op" id="6450032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450038">drawers</span>&nbsp;<span class="op" id="6450046">:=</span>&nbsp;<span class="keyword" id="6450049">map</span><span class="op" id="6450052">[</span><span class="builtintype" id="6450053">string</span><span class="op" id="6450059">]</span><span class="ident" id="6450060">Drawer</span><span class="op" id="6450066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450070">&#34;src&#34;</span><span class="op" id="6450075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450089">Src</span><span class="op" id="6450092">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6450096">&#34;floyd-steinberg&#34;</span><span class="op" id="6450113">:</span>&nbsp;<span class="ident" id="6450115">FloydSteinberg</span><span class="op" id="6450129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6450135">loop</span><span class="op" id="6450139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450142">for</span>&nbsp;<span class="ident" id="6450146">dName</span><span class="op" id="6450151">,</span>&nbsp;<span class="ident" id="6450153">d</span>&nbsp;<span class="op" id="6450155">:=</span>&nbsp;<span class="keyword" id="6450158">range</span>&nbsp;<span class="ident" id="6450164">drawers</span>&nbsp;<span class="op" id="6450172">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450176">dst0</span>&nbsp;<span class="op" id="6450181">:=</span>&nbsp;<span class="ident" id="6450184">image</span><span class="op" id="6450189">.</span><span class="ident" id="6450190">NewPaletted</span><span class="op" id="6450201">(</span><span class="ident" id="6450202">b</span><span class="op" id="6450203">,</span>&nbsp;<span class="ident" id="6450205">cgaPalette</span><span class="op" id="6450215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450219">dst1</span>&nbsp;<span class="op" id="6450224">:=</span>&nbsp;<span class="ident" id="6450227">image</span><span class="op" id="6450232">.</span><span class="ident" id="6450233">NewPaletted</span><span class="op" id="6450244">(</span><span class="ident" id="6450245">b</span><span class="op" id="6450246">,</span>&nbsp;<span class="ident" id="6450248">cgaPalette</span><span class="op" id="6450258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450262">d</span><span class="op" id="6450263">.</span><span class="ident" id="6450264">Draw</span><span class="op" id="6450268">(</span><span class="ident" id="6450269">dst0</span><span class="op" id="6450273">,</span>&nbsp;<span class="ident" id="6450275">b</span><span class="op" id="6450276">,</span>&nbsp;<span class="ident" id="6450278">src</span><span class="op" id="6450281">,</span>&nbsp;<span class="ident" id="6450283">image</span><span class="op" id="6450288">.</span><span class="ident" id="6450289">Point</span><span class="op" id="6450294">{</span><span class="op" id="6450295">}</span><span class="op" id="6450296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450300">d</span><span class="op" id="6450301">.</span><span class="ident" id="6450302">Draw</span><span class="op" id="6450306">(</span><span class="ident" id="6450307">embeddedPaletted</span><span class="op" id="6450323">{</span><span class="ident" id="6450324">dst1</span><span class="op" id="6450328">}</span><span class="op" id="6450329">,</span>&nbsp;<span class="ident" id="6450331">b</span><span class="op" id="6450332">,</span>&nbsp;<span class="ident" id="6450334">src</span><span class="op" id="6450337">,</span>&nbsp;<span class="ident" id="6450339">image</span><span class="op" id="6450344">.</span><span class="ident" id="6450345">Point</span><span class="op" id="6450350">{</span><span class="op" id="6450351">}</span><span class="op" id="6450352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450356">for</span>&nbsp;<span class="ident" id="6450360">y</span>&nbsp;<span class="op" id="6450362">:=</span>&nbsp;<span class="ident" id="6450365">b</span><span class="op" id="6450366">.</span><span class="ident" id="6450367">Min</span><span class="op" id="6450370">.</span><span class="ident" id="6450371">Y</span><span class="op" id="6450372">;</span>&nbsp;<span class="ident" id="6450374">y</span>&nbsp;<span class="op" id="6450376">&lt;</span>&nbsp;<span class="ident" id="6450378">b</span><span class="op" id="6450379">.</span><span class="ident" id="6450380">Max</span><span class="op" id="6450383">.</span><span class="ident" id="6450384">Y</span><span class="op" id="6450385">;</span>&nbsp;<span class="ident" id="6450387">y</span><span class="op" id="6450388">++</span>&nbsp;<span class="op" id="6450391">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450396">for</span>&nbsp;<span class="ident" id="6450400">x</span>&nbsp;<span class="op" id="6450402">:=</span>&nbsp;<span class="ident" id="6450405">b</span><span class="op" id="6450406">.</span><span class="ident" id="6450407">Min</span><span class="op" id="6450410">.</span><span class="ident" id="6450411">X</span><span class="op" id="6450412">;</span>&nbsp;<span class="ident" id="6450414">x</span>&nbsp;<span class="op" id="6450416">&lt;</span>&nbsp;<span class="ident" id="6450418">b</span><span class="op" id="6450419">.</span><span class="ident" id="6450420">Max</span><span class="op" id="6450423">.</span><span class="ident" id="6450424">X</span><span class="op" id="6450425">;</span>&nbsp;<span class="ident" id="6450427">x</span><span class="op" id="6450428">++</span>&nbsp;<span class="op" id="6450431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450437">if</span>&nbsp;<span class="op" id="6450440">!</span><span class="ident" id="6450441">eq</span><span class="op" id="6450443">(</span><span class="ident" id="6450444">dst0</span><span class="op" id="6450448">.</span><span class="ident" id="6450449">At</span><span class="op" id="6450451">(</span><span class="ident" id="6450452">x</span><span class="op" id="6450453">,</span>&nbsp;<span class="ident" id="6450455">y</span><span class="op" id="6450456">)</span><span class="op" id="6450457">,</span>&nbsp;<span class="ident" id="6450459">dst1</span><span class="op" id="6450463">.</span><span class="ident" id="6450464">At</span><span class="op" id="6450466">(</span><span class="ident" id="6450467">x</span><span class="op" id="6450468">,</span>&nbsp;<span class="ident" id="6450470">y</span><span class="op" id="6450471">)</span><span class="op" id="6450472">)</span>&nbsp;<span class="op" id="6450474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450481">t</span><span class="op" id="6450482">.</span><span class="ident" id="6450483">Errorf</span><span class="op" id="6450489">(</span><span class="string" id="6450490">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6450521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450529">dName</span><span class="op" id="6450534">,</span>&nbsp;<span class="ident" id="6450536">x</span><span class="op" id="6450537">,</span>&nbsp;<span class="ident" id="6450539">y</span><span class="op" id="6450540">,</span>&nbsp;<span class="ident" id="6450542">dst0</span><span class="op" id="6450546">.</span><span class="ident" id="6450547">At</span><span class="op" id="6450549">(</span><span class="ident" id="6450550">x</span><span class="op" id="6450551">,</span>&nbsp;<span class="ident" id="6450553">y</span><span class="op" id="6450554">)</span><span class="op" id="6450555">,</span>&nbsp;<span class="ident" id="6450557">dst1</span><span class="op" id="6450561">.</span><span class="ident" id="6450562">At</span><span class="op" id="6450564">(</span><span class="ident" id="6450565">x</span><span class="op" id="6450566">,</span>&nbsp;<span class="ident" id="6450568">y</span><span class="op" id="6450569">)</span><span class="op" id="6450570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450577">continue</span>&nbsp;<span class="ident" id="6450586">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450607">}</span><br>
<span class="lineno"></span><span class="op" id="6450609">}</span>
</div>
</body>
</html>
