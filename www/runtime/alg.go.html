<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1458690">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1458745">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1458799">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1458850">package</span>&nbsp;<span class="ident" id="1458858">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1458867">import</span>&nbsp;<span class="string" id="1458874">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1458884">const</span>&nbsp;<span class="op" id="1458890">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1458893">c0</span>&nbsp;<span class="op" id="1458896">=</span>&nbsp;<span class="builtintype" id="1458898">uintptr</span><span class="op" id="1458905">(</span><span class="op" id="1458906">(</span><span class="num" id="1458907">8</span><span class="op" id="1458908">-</span><span class="ident" id="1458909">ptrSize</span><span class="op" id="1458916">)</span><span class="op" id="1458917">/</span><span class="num" id="1458918">4</span><span class="op" id="1458919">*</span><span class="num" id="1458920">2860486313</span>&nbsp;<span class="op" id="1458931">+</span>&nbsp;<span class="op" id="1458933">(</span><span class="ident" id="1458934">ptrSize</span><span class="op" id="1458941">-</span><span class="num" id="1458942">4</span><span class="op" id="1458943">)</span><span class="op" id="1458944">/</span><span class="num" id="1458945">4</span><span class="op" id="1458946">*</span><span class="num" id="1458947">33054211828000289</span><span class="op" id="1458964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1458967">c1</span>&nbsp;<span class="op" id="1458970">=</span>&nbsp;<span class="builtintype" id="1458972">uintptr</span><span class="op" id="1458979">(</span><span class="op" id="1458980">(</span><span class="num" id="1458981">8</span><span class="op" id="1458982">-</span><span class="ident" id="1458983">ptrSize</span><span class="op" id="1458990">)</span><span class="op" id="1458991">/</span><span class="num" id="1458992">4</span><span class="op" id="1458993">*</span><span class="num" id="1458994">3267000013</span>&nbsp;<span class="op" id="1459005">+</span>&nbsp;<span class="op" id="1459007">(</span><span class="ident" id="1459008">ptrSize</span><span class="op" id="1459015">-</span><span class="num" id="1459016">4</span><span class="op" id="1459017">)</span><span class="op" id="1459018">/</span><span class="num" id="1459019">4</span><span class="op" id="1459020">*</span><span class="num" id="1459021">23344194077549503</span><span class="op" id="1459038">)</span><br>
<span class="lineno"></span><span class="op" id="1459040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1459043">//&nbsp;type&nbsp;algorithms&nbsp;-&nbsp;known&nbsp;to&nbsp;compiler</span><br>
<span class="lineno">15</span><span class="keyword" id="1459082">const</span>&nbsp;<span class="op" id="1459088">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459091">alg_MEM</span>&nbsp;<span class="op" id="1459099">=</span>&nbsp;<span class="ident" id="1459101">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459107">alg_MEM0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459117">alg_MEM8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459127">alg_MEM16</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459138">alg_MEM32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459149">alg_MEM64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459160">alg_MEM128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459172">alg_NOEQ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459182">alg_NOEQ0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459193">alg_NOEQ8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459204">alg_NOEQ16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459216">alg_NOEQ32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459228">alg_NOEQ64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459240">alg_NOEQ128</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459253">alg_STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459265">alg_INTER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459276">alg_NILINTER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459290">alg_SLICE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459301">alg_FLOAT32</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459314">alg_FLOAT64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459327">alg_CPLX64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459339">alg_CPLX128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459352">alg_max</span><br>
<span class="lineno"></span><span class="op" id="1459360">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1459363">type</span>&nbsp;<span class="ident" id="1459368">typeAlg</span>&nbsp;<span class="keyword" id="1459376">struct</span>&nbsp;<span class="op" id="1459383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1459386">//&nbsp;function&nbsp;for&nbsp;hashing&nbsp;objects&nbsp;of&nbsp;this&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1459432">//&nbsp;(ptr&nbsp;to&nbsp;object,&nbsp;size,&nbsp;seed)&nbsp;-&gt;&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459472">hash</span>&nbsp;<span class="keyword" id="1459477">func</span><span class="op" id="1459481">(</span><span class="ident" id="1459482">unsafe</span><span class="op" id="1459488">.</span><span class="ident" id="1459489">Pointer</span><span class="op" id="1459496">,</span>&nbsp;<span class="builtintype" id="1459498">uintptr</span><span class="op" id="1459505">,</span>&nbsp;<span class="builtintype" id="1459507">uintptr</span><span class="op" id="1459514">)</span>&nbsp;<span class="builtintype" id="1459516">uintptr</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1459525">//&nbsp;function&nbsp;for&nbsp;comparing&nbsp;objects&nbsp;of&nbsp;this&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1459573">//&nbsp;(ptr&nbsp;to&nbsp;object&nbsp;A,&nbsp;ptr&nbsp;to&nbsp;object&nbsp;B,&nbsp;size)&nbsp;-&gt;&nbsp;==?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459625">equal</span>&nbsp;<span class="keyword" id="1459631">func</span><span class="op" id="1459635">(</span><span class="ident" id="1459636">unsafe</span><span class="op" id="1459642">.</span><span class="ident" id="1459643">Pointer</span><span class="op" id="1459650">,</span>&nbsp;<span class="ident" id="1459652">unsafe</span><span class="op" id="1459658">.</span><span class="ident" id="1459659">Pointer</span><span class="op" id="1459666">,</span>&nbsp;<span class="builtintype" id="1459668">uintptr</span><span class="op" id="1459675">)</span>&nbsp;<span class="builtintype" id="1459677">bool</span><br>
<span class="lineno"></span><span class="op" id="1459682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="1459685">var</span>&nbsp;<span class="ident" id="1459689">algarray</span>&nbsp;<span class="op" id="1459698">=</span>&nbsp;<span class="op" id="1459700">[</span><span class="ident" id="1459701">alg_max</span><span class="op" id="1459708">]</span><span class="ident" id="1459709">typeAlg</span><span class="op" id="1459716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459719">alg_MEM</span><span class="op" id="1459726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459733">{</span><span class="ident" id="1459734">memhash</span><span class="op" id="1459741">,</span>&nbsp;<span class="ident" id="1459743">memequal</span><span class="op" id="1459751">}</span><span class="op" id="1459752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459755">alg_MEM0</span><span class="op" id="1459763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459769">{</span><span class="ident" id="1459770">memhash</span><span class="op" id="1459777">,</span>&nbsp;<span class="ident" id="1459779">memequal0</span><span class="op" id="1459788">}</span><span class="op" id="1459789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459792">alg_MEM8</span><span class="op" id="1459800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459806">{</span><span class="ident" id="1459807">memhash</span><span class="op" id="1459814">,</span>&nbsp;<span class="ident" id="1459816">memequal8</span><span class="op" id="1459825">}</span><span class="op" id="1459826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459829">alg_MEM16</span><span class="op" id="1459838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459843">{</span><span class="ident" id="1459844">memhash</span><span class="op" id="1459851">,</span>&nbsp;<span class="ident" id="1459853">memequal16</span><span class="op" id="1459863">}</span><span class="op" id="1459864">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459867">alg_MEM32</span><span class="op" id="1459876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459881">{</span><span class="ident" id="1459882">memhash</span><span class="op" id="1459889">,</span>&nbsp;<span class="ident" id="1459891">memequal32</span><span class="op" id="1459901">}</span><span class="op" id="1459902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459905">alg_MEM64</span><span class="op" id="1459914">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459919">{</span><span class="ident" id="1459920">memhash</span><span class="op" id="1459927">,</span>&nbsp;<span class="ident" id="1459929">memequal64</span><span class="op" id="1459939">}</span><span class="op" id="1459940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459943">alg_MEM128</span><span class="op" id="1459953">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1459957">{</span><span class="ident" id="1459958">memhash</span><span class="op" id="1459965">,</span>&nbsp;<span class="ident" id="1459967">memequal128</span><span class="op" id="1459978">}</span><span class="op" id="1459979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459982">alg_NOEQ</span><span class="op" id="1459990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1459996">{</span><span class="ident" id="1459997">nil</span><span class="op" id="1460000">,</span>&nbsp;<span class="ident" id="1460002">nil</span><span class="op" id="1460005">}</span><span class="op" id="1460006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460009">alg_NOEQ0</span><span class="op" id="1460018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1460023">{</span><span class="ident" id="1460024">nil</span><span class="op" id="1460027">,</span>&nbsp;<span class="ident" id="1460029">nil</span><span class="op" id="1460032">}</span><span class="op" id="1460033">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460036">alg_NOEQ8</span><span class="op" id="1460045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1460050">{</span><span class="ident" id="1460051">nil</span><span class="op" id="1460054">,</span>&nbsp;<span class="ident" id="1460056">nil</span><span class="op" id="1460059">}</span><span class="op" id="1460060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460063">alg_NOEQ16</span><span class="op" id="1460073">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1460077">{</span><span class="ident" id="1460078">nil</span><span class="op" id="1460081">,</span>&nbsp;<span class="ident" id="1460083">nil</span><span class="op" id="1460086">}</span><span class="op" id="1460087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460090">alg_NOEQ32</span><span class="op" id="1460100">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1460104">{</span><span class="ident" id="1460105">nil</span><span class="op" id="1460108">,</span>&nbsp;<span class="ident" id="1460110">nil</span><span class="op" id="1460113">}</span><span class="op" id="1460114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460117">alg_NOEQ64</span><span class="op" id="1460127">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1460131">{</span><span class="ident" id="1460132">nil</span><span class="op" id="1460135">,</span>&nbsp;<span class="ident" id="1460137">nil</span><span class="op" id="1460140">}</span><span class="op" id="1460141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460144">alg_NOEQ128</span><span class="op" id="1460155">:</span>&nbsp;&nbsp;<span class="op" id="1460158">{</span><span class="ident" id="1460159">nil</span><span class="op" id="1460162">,</span>&nbsp;<span class="ident" id="1460164">nil</span><span class="op" id="1460167">}</span><span class="op" id="1460168">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460171">alg_STRING</span><span class="op" id="1460181">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1460185">{</span><span class="ident" id="1460186">strhash</span><span class="op" id="1460193">,</span>&nbsp;<span class="ident" id="1460195">strequal</span><span class="op" id="1460203">}</span><span class="op" id="1460204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460207">alg_INTER</span><span class="op" id="1460216">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1460221">{</span><span class="ident" id="1460222">interhash</span><span class="op" id="1460231">,</span>&nbsp;<span class="ident" id="1460233">interequal</span><span class="op" id="1460243">}</span><span class="op" id="1460244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460247">alg_NILINTER</span><span class="op" id="1460259">:</span>&nbsp;<span class="op" id="1460261">{</span><span class="ident" id="1460262">nilinterhash</span><span class="op" id="1460274">,</span>&nbsp;<span class="ident" id="1460276">nilinterequal</span><span class="op" id="1460289">}</span><span class="op" id="1460290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460293">alg_SLICE</span><span class="op" id="1460302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1460307">{</span><span class="ident" id="1460308">nil</span><span class="op" id="1460311">,</span>&nbsp;<span class="ident" id="1460313">nil</span><span class="op" id="1460316">}</span><span class="op" id="1460317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460320">alg_FLOAT32</span><span class="op" id="1460331">:</span>&nbsp;&nbsp;<span class="op" id="1460334">{</span><span class="ident" id="1460335">f32hash</span><span class="op" id="1460342">,</span>&nbsp;<span class="ident" id="1460344">f32equal</span><span class="op" id="1460352">}</span><span class="op" id="1460353">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460356">alg_FLOAT64</span><span class="op" id="1460367">:</span>&nbsp;&nbsp;<span class="op" id="1460370">{</span><span class="ident" id="1460371">f64hash</span><span class="op" id="1460378">,</span>&nbsp;<span class="ident" id="1460380">f64equal</span><span class="op" id="1460388">}</span><span class="op" id="1460389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460392">alg_CPLX64</span><span class="op" id="1460402">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1460406">{</span><span class="ident" id="1460407">c64hash</span><span class="op" id="1460414">,</span>&nbsp;<span class="ident" id="1460416">c64equal</span><span class="op" id="1460424">}</span><span class="op" id="1460425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460428">alg_CPLX128</span><span class="op" id="1460439">:</span>&nbsp;&nbsp;<span class="op" id="1460442">{</span><span class="ident" id="1460443">c128hash</span><span class="op" id="1460451">,</span>&nbsp;<span class="ident" id="1460453">c128equal</span><span class="op" id="1460462">}</span><span class="op" id="1460463">,</span><br>
<span class="lineno"></span><span class="op" id="1460465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="1460468">const</span>&nbsp;<span class="ident" id="1460474">nacl</span>&nbsp;<span class="op" id="1460479">=</span>&nbsp;<span class="ident" id="1460481">GOOS</span>&nbsp;<span class="op" id="1460486">==</span>&nbsp;<span class="string" id="1460489">&#34;nacl&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460497">var</span>&nbsp;<span class="ident" id="1460501">useAeshash</span>&nbsp;<span class="builtintype" id="1460512">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1460518">//&nbsp;in&nbsp;asm_*.s</span><br>
<span class="lineno">80</span><span class="keyword" id="1460532">func</span>&nbsp;<span class="ident" id="1460537">aeshash</span><span class="op" id="1460544">(</span><span class="ident" id="1460545">p</span>&nbsp;<span class="ident" id="1460547">unsafe</span><span class="op" id="1460553">.</span><span class="ident" id="1460554">Pointer</span><span class="op" id="1460561">,</span>&nbsp;<span class="ident" id="1460563">s</span><span class="op" id="1460564">,</span>&nbsp;<span class="ident" id="1460566">h</span>&nbsp;<span class="builtintype" id="1460568">uintptr</span><span class="op" id="1460575">)</span>&nbsp;<span class="builtintype" id="1460577">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1460585">func</span>&nbsp;<span class="ident" id="1460590">aeshash32</span><span class="op" id="1460599">(</span><span class="ident" id="1460600">p</span>&nbsp;<span class="ident" id="1460602">unsafe</span><span class="op" id="1460608">.</span><span class="ident" id="1460609">Pointer</span><span class="op" id="1460616">,</span>&nbsp;<span class="ident" id="1460618">s</span><span class="op" id="1460619">,</span>&nbsp;<span class="ident" id="1460621">h</span>&nbsp;<span class="builtintype" id="1460623">uintptr</span><span class="op" id="1460630">)</span>&nbsp;<span class="builtintype" id="1460632">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1460640">func</span>&nbsp;<span class="ident" id="1460645">aeshash64</span><span class="op" id="1460654">(</span><span class="ident" id="1460655">p</span>&nbsp;<span class="ident" id="1460657">unsafe</span><span class="op" id="1460663">.</span><span class="ident" id="1460664">Pointer</span><span class="op" id="1460671">,</span>&nbsp;<span class="ident" id="1460673">s</span><span class="op" id="1460674">,</span>&nbsp;<span class="ident" id="1460676">h</span>&nbsp;<span class="builtintype" id="1460678">uintptr</span><span class="op" id="1460685">)</span>&nbsp;<span class="builtintype" id="1460687">uintptr</span><br>
<span class="lineno"></span><span class="keyword" id="1460695">func</span>&nbsp;<span class="ident" id="1460700">aeshashstr</span><span class="op" id="1460710">(</span><span class="ident" id="1460711">p</span>&nbsp;<span class="ident" id="1460713">unsafe</span><span class="op" id="1460719">.</span><span class="ident" id="1460720">Pointer</span><span class="op" id="1460727">,</span>&nbsp;<span class="ident" id="1460729">s</span><span class="op" id="1460730">,</span>&nbsp;<span class="ident" id="1460732">h</span>&nbsp;<span class="builtintype" id="1460734">uintptr</span><span class="op" id="1460741">)</span>&nbsp;<span class="builtintype" id="1460743">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="1460752">func</span>&nbsp;<span class="ident" id="1460757">memhash</span><span class="op" id="1460764">(</span><span class="ident" id="1460765">p</span>&nbsp;<span class="ident" id="1460767">unsafe</span><span class="op" id="1460773">.</span><span class="ident" id="1460774">Pointer</span><span class="op" id="1460781">,</span>&nbsp;<span class="ident" id="1460783">s</span><span class="op" id="1460784">,</span>&nbsp;<span class="ident" id="1460786">h</span>&nbsp;<span class="builtintype" id="1460788">uintptr</span><span class="op" id="1460795">)</span>&nbsp;<span class="builtintype" id="1460797">uintptr</span>&nbsp;<span class="op" id="1460805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460808">if</span>&nbsp;<span class="op" id="1460811">!</span><span class="ident" id="1460812">nacl</span>&nbsp;<span class="op" id="1460817">&amp;&amp;</span>&nbsp;<span class="ident" id="1460820">useAeshash</span>&nbsp;<span class="op" id="1460831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460835">return</span>&nbsp;<span class="ident" id="1460842">aeshash</span><span class="op" id="1460849">(</span><span class="ident" id="1460850">p</span><span class="op" id="1460851">,</span>&nbsp;<span class="ident" id="1460853">s</span><span class="op" id="1460854">,</span>&nbsp;<span class="ident" id="1460856">h</span><span class="op" id="1460857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460864">h</span>&nbsp;<span class="op" id="1460866">^=</span>&nbsp;<span class="ident" id="1460869">c0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460873">for</span>&nbsp;<span class="ident" id="1460877">s</span>&nbsp;<span class="op" id="1460879">&gt;</span>&nbsp;<span class="num" id="1460881">0</span>&nbsp;<span class="op" id="1460883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460887">h</span>&nbsp;<span class="op" id="1460889">=</span>&nbsp;<span class="op" id="1460891">(</span><span class="ident" id="1460892">h</span>&nbsp;<span class="op" id="1460894">^</span>&nbsp;<span class="builtintype" id="1460896">uintptr</span><span class="op" id="1460903">(</span><span class="op" id="1460904">*</span><span class="op" id="1460905">(</span><span class="op" id="1460906">*</span><span class="builtintype" id="1460907">byte</span><span class="op" id="1460911">)</span><span class="op" id="1460912">(</span><span class="ident" id="1460913">p</span><span class="op" id="1460914">)</span><span class="op" id="1460915">)</span><span class="op" id="1460916">)</span>&nbsp;<span class="op" id="1460918">*</span>&nbsp;<span class="ident" id="1460920">c1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460925">p</span>&nbsp;<span class="op" id="1460927">=</span>&nbsp;<span class="ident" id="1460929">add</span><span class="op" id="1460932">(</span><span class="ident" id="1460933">p</span><span class="op" id="1460934">,</span>&nbsp;<span class="num" id="1460936">1</span><span class="op" id="1460937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460941">s</span><span class="op" id="1460942">--</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460949">return</span>&nbsp;<span class="ident" id="1460956">h</span><br>
<span class="lineno"></span><span class="op" id="1460958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460961">func</span>&nbsp;<span class="ident" id="1460966">strhash</span><span class="op" id="1460973">(</span><span class="ident" id="1460974">a</span>&nbsp;<span class="ident" id="1460976">unsafe</span><span class="op" id="1460982">.</span><span class="ident" id="1460983">Pointer</span><span class="op" id="1460990">,</span>&nbsp;<span class="ident" id="1460992">s</span><span class="op" id="1460993">,</span>&nbsp;<span class="ident" id="1460995">h</span>&nbsp;<span class="builtintype" id="1460997">uintptr</span><span class="op" id="1461004">)</span>&nbsp;<span class="builtintype" id="1461006">uintptr</span>&nbsp;<span class="op" id="1461014">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461017">return</span>&nbsp;<span class="ident" id="1461024">memhash</span><span class="op" id="1461031">(</span><span class="op" id="1461032">(</span><span class="op" id="1461033">*</span><span class="ident" id="1461034">stringStruct</span><span class="op" id="1461046">)</span><span class="op" id="1461047">(</span><span class="ident" id="1461048">a</span><span class="op" id="1461049">)</span><span class="op" id="1461050">.</span><span class="ident" id="1461051">str</span><span class="op" id="1461054">,</span>&nbsp;<span class="builtintype" id="1461056">uintptr</span><span class="op" id="1461063">(</span><span class="builtinfunc" id="1461064">len</span><span class="op" id="1461067">(</span><span class="op" id="1461068">*</span><span class="op" id="1461069">(</span><span class="op" id="1461070">*</span><span class="builtintype" id="1461071">string</span><span class="op" id="1461077">)</span><span class="op" id="1461078">(</span><span class="ident" id="1461079">a</span><span class="op" id="1461080">)</span><span class="op" id="1461081">)</span><span class="op" id="1461082">)</span><span class="op" id="1461083">,</span>&nbsp;<span class="ident" id="1461085">h</span><span class="op" id="1461086">)</span><br>
<span class="lineno"></span><span class="op" id="1461088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1461091">//&nbsp;NOTE:&nbsp;Because&nbsp;NaN&nbsp;!=&nbsp;NaN,&nbsp;a&nbsp;map&nbsp;can&nbsp;contain&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="1461142">//&nbsp;number&nbsp;of&nbsp;(mostly&nbsp;useless)&nbsp;entries&nbsp;keyed&nbsp;with&nbsp;NaNs.</span><br>
<span class="lineno">105</span><span class="comment" id="1461197">//&nbsp;To&nbsp;avoid&nbsp;long&nbsp;hash&nbsp;chains,&nbsp;we&nbsp;assign&nbsp;a&nbsp;random&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="1461253">//&nbsp;as&nbsp;the&nbsp;hash&nbsp;value&nbsp;for&nbsp;a&nbsp;NaN.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1461286">func</span>&nbsp;<span class="ident" id="1461291">f32hash</span><span class="op" id="1461298">(</span><span class="ident" id="1461299">p</span>&nbsp;<span class="ident" id="1461301">unsafe</span><span class="op" id="1461307">.</span><span class="ident" id="1461308">Pointer</span><span class="op" id="1461315">,</span>&nbsp;<span class="ident" id="1461317">s</span><span class="op" id="1461318">,</span>&nbsp;<span class="ident" id="1461320">h</span>&nbsp;<span class="builtintype" id="1461322">uintptr</span><span class="op" id="1461329">)</span>&nbsp;<span class="builtintype" id="1461331">uintptr</span>&nbsp;<span class="op" id="1461339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461342">f</span>&nbsp;<span class="op" id="1461344">:=</span>&nbsp;<span class="op" id="1461347">*</span><span class="op" id="1461348">(</span><span class="op" id="1461349">*</span><span class="builtintype" id="1461350">float32</span><span class="op" id="1461357">)</span><span class="op" id="1461358">(</span><span class="ident" id="1461359">p</span><span class="op" id="1461360">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461363">switch</span>&nbsp;<span class="op" id="1461370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461373">case</span>&nbsp;<span class="ident" id="1461378">f</span>&nbsp;<span class="op" id="1461380">==</span>&nbsp;<span class="num" id="1461383">0</span><span class="op" id="1461384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461388">return</span>&nbsp;<span class="ident" id="1461395">c1</span>&nbsp;<span class="op" id="1461398">*</span>&nbsp;<span class="op" id="1461400">(</span><span class="ident" id="1461401">c0</span>&nbsp;<span class="op" id="1461404">^</span>&nbsp;<span class="ident" id="1461406">h</span><span class="op" id="1461407">)</span>&nbsp;<span class="comment" id="1461409">//&nbsp;+0,&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461420">case</span>&nbsp;<span class="ident" id="1461425">f</span>&nbsp;<span class="op" id="1461427">!=</span>&nbsp;<span class="ident" id="1461430">f</span><span class="op" id="1461431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461435">return</span>&nbsp;<span class="ident" id="1461442">c1</span>&nbsp;<span class="op" id="1461445">*</span>&nbsp;<span class="op" id="1461447">(</span><span class="ident" id="1461448">c0</span>&nbsp;<span class="op" id="1461451">^</span>&nbsp;<span class="ident" id="1461453">h</span>&nbsp;<span class="op" id="1461455">^</span>&nbsp;<span class="builtintype" id="1461457">uintptr</span><span class="op" id="1461464">(</span><span class="ident" id="1461465">fastrand1</span><span class="op" id="1461474">(</span><span class="op" id="1461475">)</span><span class="op" id="1461476">)</span><span class="op" id="1461477">)</span>&nbsp;<span class="comment" id="1461479">//&nbsp;any&nbsp;kind&nbsp;of&nbsp;NaN</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461499">default</span><span class="op" id="1461506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461510">return</span>&nbsp;<span class="ident" id="1461517">memhash</span><span class="op" id="1461524">(</span><span class="ident" id="1461525">p</span><span class="op" id="1461526">,</span>&nbsp;<span class="num" id="1461528">4</span><span class="op" id="1461529">,</span>&nbsp;<span class="ident" id="1461531">h</span><span class="op" id="1461532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461535">}</span><br>
<span class="lineno"></span><span class="op" id="1461537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="1461540">func</span>&nbsp;<span class="ident" id="1461545">f64hash</span><span class="op" id="1461552">(</span><span class="ident" id="1461553">p</span>&nbsp;<span class="ident" id="1461555">unsafe</span><span class="op" id="1461561">.</span><span class="ident" id="1461562">Pointer</span><span class="op" id="1461569">,</span>&nbsp;<span class="ident" id="1461571">s</span><span class="op" id="1461572">,</span>&nbsp;<span class="ident" id="1461574">h</span>&nbsp;<span class="builtintype" id="1461576">uintptr</span><span class="op" id="1461583">)</span>&nbsp;<span class="builtintype" id="1461585">uintptr</span>&nbsp;<span class="op" id="1461593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461596">f</span>&nbsp;<span class="op" id="1461598">:=</span>&nbsp;<span class="op" id="1461601">*</span><span class="op" id="1461602">(</span><span class="op" id="1461603">*</span><span class="builtintype" id="1461604">float64</span><span class="op" id="1461611">)</span><span class="op" id="1461612">(</span><span class="ident" id="1461613">p</span><span class="op" id="1461614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461617">switch</span>&nbsp;<span class="op" id="1461624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461627">case</span>&nbsp;<span class="ident" id="1461632">f</span>&nbsp;<span class="op" id="1461634">==</span>&nbsp;<span class="num" id="1461637">0</span><span class="op" id="1461638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461642">return</span>&nbsp;<span class="ident" id="1461649">c1</span>&nbsp;<span class="op" id="1461652">*</span>&nbsp;<span class="op" id="1461654">(</span><span class="ident" id="1461655">c0</span>&nbsp;<span class="op" id="1461658">^</span>&nbsp;<span class="ident" id="1461660">h</span><span class="op" id="1461661">)</span>&nbsp;<span class="comment" id="1461663">//&nbsp;+0,&nbsp;-0</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461674">case</span>&nbsp;<span class="ident" id="1461679">f</span>&nbsp;<span class="op" id="1461681">!=</span>&nbsp;<span class="ident" id="1461684">f</span><span class="op" id="1461685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461689">return</span>&nbsp;<span class="ident" id="1461696">c1</span>&nbsp;<span class="op" id="1461699">*</span>&nbsp;<span class="op" id="1461701">(</span><span class="ident" id="1461702">c0</span>&nbsp;<span class="op" id="1461705">^</span>&nbsp;<span class="ident" id="1461707">h</span>&nbsp;<span class="op" id="1461709">^</span>&nbsp;<span class="builtintype" id="1461711">uintptr</span><span class="op" id="1461718">(</span><span class="ident" id="1461719">fastrand1</span><span class="op" id="1461728">(</span><span class="op" id="1461729">)</span><span class="op" id="1461730">)</span><span class="op" id="1461731">)</span>&nbsp;<span class="comment" id="1461733">//&nbsp;any&nbsp;kind&nbsp;of&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461753">default</span><span class="op" id="1461760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461764">return</span>&nbsp;<span class="ident" id="1461771">memhash</span><span class="op" id="1461778">(</span><span class="ident" id="1461779">p</span><span class="op" id="1461780">,</span>&nbsp;<span class="num" id="1461782">8</span><span class="op" id="1461783">,</span>&nbsp;<span class="ident" id="1461785">h</span><span class="op" id="1461786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461789">}</span><br>
<span class="lineno">130</span><span class="op" id="1461791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1461794">func</span>&nbsp;<span class="ident" id="1461799">c64hash</span><span class="op" id="1461806">(</span><span class="ident" id="1461807">p</span>&nbsp;<span class="ident" id="1461809">unsafe</span><span class="op" id="1461815">.</span><span class="ident" id="1461816">Pointer</span><span class="op" id="1461823">,</span>&nbsp;<span class="ident" id="1461825">s</span><span class="op" id="1461826">,</span>&nbsp;<span class="ident" id="1461828">h</span>&nbsp;<span class="builtintype" id="1461830">uintptr</span><span class="op" id="1461837">)</span>&nbsp;<span class="builtintype" id="1461839">uintptr</span>&nbsp;<span class="op" id="1461847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461850">x</span>&nbsp;<span class="op" id="1461852">:=</span>&nbsp;<span class="op" id="1461855">(</span><span class="op" id="1461856">*</span><span class="op" id="1461857">[</span><span class="num" id="1461858">2</span><span class="op" id="1461859">]</span><span class="builtintype" id="1461860">float32</span><span class="op" id="1461867">)</span><span class="op" id="1461868">(</span><span class="ident" id="1461869">p</span><span class="op" id="1461870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461873">return</span>&nbsp;<span class="ident" id="1461880">f32hash</span><span class="op" id="1461887">(</span><span class="ident" id="1461888">unsafe</span><span class="op" id="1461894">.</span><span class="ident" id="1461895">Pointer</span><span class="op" id="1461902">(</span><span class="op" id="1461903">&amp;</span><span class="ident" id="1461904">x</span><span class="op" id="1461905">[</span><span class="num" id="1461906">1</span><span class="op" id="1461907">]</span><span class="op" id="1461908">)</span><span class="op" id="1461909">,</span>&nbsp;<span class="num" id="1461911">4</span><span class="op" id="1461912">,</span>&nbsp;<span class="ident" id="1461914">f32hash</span><span class="op" id="1461921">(</span><span class="ident" id="1461922">unsafe</span><span class="op" id="1461928">.</span><span class="ident" id="1461929">Pointer</span><span class="op" id="1461936">(</span><span class="op" id="1461937">&amp;</span><span class="ident" id="1461938">x</span><span class="op" id="1461939">[</span><span class="num" id="1461940">0</span><span class="op" id="1461941">]</span><span class="op" id="1461942">)</span><span class="op" id="1461943">,</span>&nbsp;<span class="num" id="1461945">4</span><span class="op" id="1461946">,</span>&nbsp;<span class="ident" id="1461948">h</span><span class="op" id="1461949">)</span><span class="op" id="1461950">)</span><br>
<span class="lineno">135</span><span class="op" id="1461952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1461955">func</span>&nbsp;<span class="ident" id="1461960">c128hash</span><span class="op" id="1461968">(</span><span class="ident" id="1461969">p</span>&nbsp;<span class="ident" id="1461971">unsafe</span><span class="op" id="1461977">.</span><span class="ident" id="1461978">Pointer</span><span class="op" id="1461985">,</span>&nbsp;<span class="ident" id="1461987">s</span><span class="op" id="1461988">,</span>&nbsp;<span class="ident" id="1461990">h</span>&nbsp;<span class="builtintype" id="1461992">uintptr</span><span class="op" id="1461999">)</span>&nbsp;<span class="builtintype" id="1462001">uintptr</span>&nbsp;<span class="op" id="1462009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462012">x</span>&nbsp;<span class="op" id="1462014">:=</span>&nbsp;<span class="op" id="1462017">(</span><span class="op" id="1462018">*</span><span class="op" id="1462019">[</span><span class="num" id="1462020">2</span><span class="op" id="1462021">]</span><span class="builtintype" id="1462022">float64</span><span class="op" id="1462029">)</span><span class="op" id="1462030">(</span><span class="ident" id="1462031">p</span><span class="op" id="1462032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462035">return</span>&nbsp;<span class="ident" id="1462042">f64hash</span><span class="op" id="1462049">(</span><span class="ident" id="1462050">unsafe</span><span class="op" id="1462056">.</span><span class="ident" id="1462057">Pointer</span><span class="op" id="1462064">(</span><span class="op" id="1462065">&amp;</span><span class="ident" id="1462066">x</span><span class="op" id="1462067">[</span><span class="num" id="1462068">1</span><span class="op" id="1462069">]</span><span class="op" id="1462070">)</span><span class="op" id="1462071">,</span>&nbsp;<span class="num" id="1462073">8</span><span class="op" id="1462074">,</span>&nbsp;<span class="ident" id="1462076">f64hash</span><span class="op" id="1462083">(</span><span class="ident" id="1462084">unsafe</span><span class="op" id="1462090">.</span><span class="ident" id="1462091">Pointer</span><span class="op" id="1462098">(</span><span class="op" id="1462099">&amp;</span><span class="ident" id="1462100">x</span><span class="op" id="1462101">[</span><span class="num" id="1462102">0</span><span class="op" id="1462103">]</span><span class="op" id="1462104">)</span><span class="op" id="1462105">,</span>&nbsp;<span class="num" id="1462107">8</span><span class="op" id="1462108">,</span>&nbsp;<span class="ident" id="1462110">h</span><span class="op" id="1462111">)</span><span class="op" id="1462112">)</span><br>
<span class="lineno">140</span><span class="op" id="1462114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1462117">func</span>&nbsp;<span class="ident" id="1462122">interhash</span><span class="op" id="1462131">(</span><span class="ident" id="1462132">p</span>&nbsp;<span class="ident" id="1462134">unsafe</span><span class="op" id="1462140">.</span><span class="ident" id="1462141">Pointer</span><span class="op" id="1462148">,</span>&nbsp;<span class="ident" id="1462150">s</span><span class="op" id="1462151">,</span>&nbsp;<span class="ident" id="1462153">h</span>&nbsp;<span class="builtintype" id="1462155">uintptr</span><span class="op" id="1462162">)</span>&nbsp;<span class="builtintype" id="1462164">uintptr</span>&nbsp;<span class="op" id="1462172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462175">a</span>&nbsp;<span class="op" id="1462177">:=</span>&nbsp;<span class="op" id="1462180">(</span><span class="op" id="1462181">*</span><span class="ident" id="1462182">iface</span><span class="op" id="1462187">)</span><span class="op" id="1462188">(</span><span class="ident" id="1462189">p</span><span class="op" id="1462190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462193">tab</span>&nbsp;<span class="op" id="1462197">:=</span>&nbsp;<span class="ident" id="1462200">a</span><span class="op" id="1462201">.</span><span class="ident" id="1462202">tab</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462207">if</span>&nbsp;<span class="ident" id="1462210">tab</span>&nbsp;<span class="op" id="1462214">==</span>&nbsp;<span class="ident" id="1462217">nil</span>&nbsp;<span class="op" id="1462221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462225">return</span>&nbsp;<span class="ident" id="1462232">h</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462238">t</span>&nbsp;<span class="op" id="1462240">:=</span>&nbsp;<span class="ident" id="1462243">tab</span><span class="op" id="1462246">.</span><span class="ident" id="1462247">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462254">fn</span>&nbsp;<span class="op" id="1462257">:=</span>&nbsp;<span class="ident" id="1462260">goalg</span><span class="op" id="1462265">(</span><span class="ident" id="1462266">t</span><span class="op" id="1462267">.</span><span class="ident" id="1462268">alg</span><span class="op" id="1462271">)</span><span class="op" id="1462272">.</span><span class="ident" id="1462273">hash</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462279">if</span>&nbsp;<span class="ident" id="1462282">fn</span>&nbsp;<span class="op" id="1462285">==</span>&nbsp;<span class="ident" id="1462288">nil</span>&nbsp;<span class="op" id="1462292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1462296">panic</span><span class="op" id="1462301">(</span><span class="ident" id="1462302">errorString</span><span class="op" id="1462313">(</span><span class="string" id="1462314">&#34;hash&nbsp;of&nbsp;unhashable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1462341">+</span>&nbsp;<span class="op" id="1462343">*</span><span class="ident" id="1462344">t</span><span class="op" id="1462345">.</span><span class="ident" id="1462346">_string</span><span class="op" id="1462353">)</span><span class="op" id="1462354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462360">if</span>&nbsp;<span class="ident" id="1462363">isDirectIface</span><span class="op" id="1462376">(</span><span class="ident" id="1462377">t</span><span class="op" id="1462378">)</span>&nbsp;<span class="op" id="1462380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462384">return</span>&nbsp;<span class="ident" id="1462391">c1</span>&nbsp;<span class="op" id="1462394">*</span>&nbsp;<span class="ident" id="1462396">fn</span><span class="op" id="1462398">(</span><span class="ident" id="1462399">unsafe</span><span class="op" id="1462405">.</span><span class="ident" id="1462406">Pointer</span><span class="op" id="1462413">(</span><span class="op" id="1462414">&amp;</span><span class="ident" id="1462415">a</span><span class="op" id="1462416">.</span><span class="ident" id="1462417">data</span><span class="op" id="1462421">)</span><span class="op" id="1462422">,</span>&nbsp;<span class="builtintype" id="1462424">uintptr</span><span class="op" id="1462431">(</span><span class="ident" id="1462432">t</span><span class="op" id="1462433">.</span><span class="ident" id="1462434">size</span><span class="op" id="1462438">)</span><span class="op" id="1462439">,</span>&nbsp;<span class="ident" id="1462441">h</span><span class="op" id="1462442">^</span><span class="ident" id="1462443">c0</span><span class="op" id="1462445">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462448">}</span>&nbsp;<span class="keyword" id="1462450">else</span>&nbsp;<span class="op" id="1462455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462459">return</span>&nbsp;<span class="ident" id="1462466">c1</span>&nbsp;<span class="op" id="1462469">*</span>&nbsp;<span class="ident" id="1462471">fn</span><span class="op" id="1462473">(</span><span class="ident" id="1462474">a</span><span class="op" id="1462475">.</span><span class="ident" id="1462476">data</span><span class="op" id="1462480">,</span>&nbsp;<span class="builtintype" id="1462482">uintptr</span><span class="op" id="1462489">(</span><span class="ident" id="1462490">t</span><span class="op" id="1462491">.</span><span class="ident" id="1462492">size</span><span class="op" id="1462496">)</span><span class="op" id="1462497">,</span>&nbsp;<span class="ident" id="1462499">h</span><span class="op" id="1462500">^</span><span class="ident" id="1462501">c0</span><span class="op" id="1462503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462506">}</span><br>
<span class="lineno"></span><span class="op" id="1462508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="1462511">func</span>&nbsp;<span class="ident" id="1462516">nilinterhash</span><span class="op" id="1462528">(</span><span class="ident" id="1462529">p</span>&nbsp;<span class="ident" id="1462531">unsafe</span><span class="op" id="1462537">.</span><span class="ident" id="1462538">Pointer</span><span class="op" id="1462545">,</span>&nbsp;<span class="ident" id="1462547">s</span><span class="op" id="1462548">,</span>&nbsp;<span class="ident" id="1462550">h</span>&nbsp;<span class="builtintype" id="1462552">uintptr</span><span class="op" id="1462559">)</span>&nbsp;<span class="builtintype" id="1462561">uintptr</span>&nbsp;<span class="op" id="1462569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462572">a</span>&nbsp;<span class="op" id="1462574">:=</span>&nbsp;<span class="op" id="1462577">(</span><span class="op" id="1462578">*</span><span class="ident" id="1462579">eface</span><span class="op" id="1462584">)</span><span class="op" id="1462585">(</span><span class="ident" id="1462586">p</span><span class="op" id="1462587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462590">t</span>&nbsp;<span class="op" id="1462592">:=</span>&nbsp;<span class="ident" id="1462595">a</span><span class="op" id="1462596">.</span><span class="ident" id="1462597">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462604">if</span>&nbsp;<span class="ident" id="1462607">t</span>&nbsp;<span class="op" id="1462609">==</span>&nbsp;<span class="ident" id="1462612">nil</span>&nbsp;<span class="op" id="1462616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462620">return</span>&nbsp;<span class="ident" id="1462627">h</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462633">fn</span>&nbsp;<span class="op" id="1462636">:=</span>&nbsp;<span class="ident" id="1462639">goalg</span><span class="op" id="1462644">(</span><span class="ident" id="1462645">t</span><span class="op" id="1462646">.</span><span class="ident" id="1462647">alg</span><span class="op" id="1462650">)</span><span class="op" id="1462651">.</span><span class="ident" id="1462652">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462658">if</span>&nbsp;<span class="ident" id="1462661">fn</span>&nbsp;<span class="op" id="1462664">==</span>&nbsp;<span class="ident" id="1462667">nil</span>&nbsp;<span class="op" id="1462671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1462675">panic</span><span class="op" id="1462680">(</span><span class="ident" id="1462681">errorString</span><span class="op" id="1462692">(</span><span class="string" id="1462693">&#34;hash&nbsp;of&nbsp;unhashable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1462720">+</span>&nbsp;<span class="op" id="1462722">*</span><span class="ident" id="1462723">t</span><span class="op" id="1462724">.</span><span class="ident" id="1462725">_string</span><span class="op" id="1462732">)</span><span class="op" id="1462733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462736">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462739">if</span>&nbsp;<span class="ident" id="1462742">isDirectIface</span><span class="op" id="1462755">(</span><span class="ident" id="1462756">t</span><span class="op" id="1462757">)</span>&nbsp;<span class="op" id="1462759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462763">return</span>&nbsp;<span class="ident" id="1462770">c1</span>&nbsp;<span class="op" id="1462773">*</span>&nbsp;<span class="ident" id="1462775">fn</span><span class="op" id="1462777">(</span><span class="ident" id="1462778">unsafe</span><span class="op" id="1462784">.</span><span class="ident" id="1462785">Pointer</span><span class="op" id="1462792">(</span><span class="op" id="1462793">&amp;</span><span class="ident" id="1462794">a</span><span class="op" id="1462795">.</span><span class="ident" id="1462796">data</span><span class="op" id="1462800">)</span><span class="op" id="1462801">,</span>&nbsp;<span class="builtintype" id="1462803">uintptr</span><span class="op" id="1462810">(</span><span class="ident" id="1462811">t</span><span class="op" id="1462812">.</span><span class="ident" id="1462813">size</span><span class="op" id="1462817">)</span><span class="op" id="1462818">,</span>&nbsp;<span class="ident" id="1462820">h</span><span class="op" id="1462821">^</span><span class="ident" id="1462822">c0</span><span class="op" id="1462824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462827">}</span>&nbsp;<span class="keyword" id="1462829">else</span>&nbsp;<span class="op" id="1462834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462838">return</span>&nbsp;<span class="ident" id="1462845">c1</span>&nbsp;<span class="op" id="1462848">*</span>&nbsp;<span class="ident" id="1462850">fn</span><span class="op" id="1462852">(</span><span class="ident" id="1462853">a</span><span class="op" id="1462854">.</span><span class="ident" id="1462855">data</span><span class="op" id="1462859">,</span>&nbsp;<span class="builtintype" id="1462861">uintptr</span><span class="op" id="1462868">(</span><span class="ident" id="1462869">t</span><span class="op" id="1462870">.</span><span class="ident" id="1462871">size</span><span class="op" id="1462875">)</span><span class="op" id="1462876">,</span>&nbsp;<span class="ident" id="1462878">h</span><span class="op" id="1462879">^</span><span class="ident" id="1462880">c0</span><span class="op" id="1462882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462885">}</span><br>
<span class="lineno">175</span><span class="op" id="1462887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1462890">func</span>&nbsp;<span class="ident" id="1462895">memequal</span><span class="op" id="1462903">(</span><span class="ident" id="1462904">p</span><span class="op" id="1462905">,</span>&nbsp;<span class="ident" id="1462907">q</span>&nbsp;<span class="ident" id="1462909">unsafe</span><span class="op" id="1462915">.</span><span class="ident" id="1462916">Pointer</span><span class="op" id="1462923">,</span>&nbsp;<span class="ident" id="1462925">size</span>&nbsp;<span class="builtintype" id="1462930">uintptr</span><span class="op" id="1462937">)</span>&nbsp;<span class="builtintype" id="1462939">bool</span>&nbsp;<span class="op" id="1462944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462947">if</span>&nbsp;<span class="ident" id="1462950">p</span>&nbsp;<span class="op" id="1462952">==</span>&nbsp;<span class="ident" id="1462955">q</span>&nbsp;<span class="op" id="1462957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462961">return</span>&nbsp;<span class="ident" id="1462968">true</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462977">return</span>&nbsp;<span class="ident" id="1462984">memeq</span><span class="op" id="1462989">(</span><span class="ident" id="1462990">p</span><span class="op" id="1462991">,</span>&nbsp;<span class="ident" id="1462993">q</span><span class="op" id="1462994">,</span>&nbsp;<span class="ident" id="1462996">size</span><span class="op" id="1463000">)</span><br>
<span class="lineno"></span><span class="op" id="1463002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1463005">func</span>&nbsp;<span class="ident" id="1463010">memequal0</span><span class="op" id="1463019">(</span><span class="ident" id="1463020">p</span><span class="op" id="1463021">,</span>&nbsp;<span class="ident" id="1463023">q</span>&nbsp;<span class="ident" id="1463025">unsafe</span><span class="op" id="1463031">.</span><span class="ident" id="1463032">Pointer</span><span class="op" id="1463039">,</span>&nbsp;<span class="ident" id="1463041">size</span>&nbsp;<span class="builtintype" id="1463046">uintptr</span><span class="op" id="1463053">)</span>&nbsp;<span class="builtintype" id="1463055">bool</span>&nbsp;<span class="op" id="1463060">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463063">return</span>&nbsp;<span class="ident" id="1463070">true</span><br>
<span class="lineno"></span><span class="op" id="1463075">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463077">func</span>&nbsp;<span class="ident" id="1463082">memequal8</span><span class="op" id="1463091">(</span><span class="ident" id="1463092">p</span><span class="op" id="1463093">,</span>&nbsp;<span class="ident" id="1463095">q</span>&nbsp;<span class="ident" id="1463097">unsafe</span><span class="op" id="1463103">.</span><span class="ident" id="1463104">Pointer</span><span class="op" id="1463111">,</span>&nbsp;<span class="ident" id="1463113">size</span>&nbsp;<span class="builtintype" id="1463118">uintptr</span><span class="op" id="1463125">)</span>&nbsp;<span class="builtintype" id="1463127">bool</span>&nbsp;<span class="op" id="1463132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463135">return</span>&nbsp;<span class="op" id="1463142">*</span><span class="op" id="1463143">(</span><span class="op" id="1463144">*</span><span class="builtintype" id="1463145">int8</span><span class="op" id="1463149">)</span><span class="op" id="1463150">(</span><span class="ident" id="1463151">p</span><span class="op" id="1463152">)</span>&nbsp;<span class="op" id="1463154">==</span>&nbsp;<span class="op" id="1463157">*</span><span class="op" id="1463158">(</span><span class="op" id="1463159">*</span><span class="builtintype" id="1463160">int8</span><span class="op" id="1463164">)</span><span class="op" id="1463165">(</span><span class="ident" id="1463166">q</span><span class="op" id="1463167">)</span><br>
<span class="lineno"></span><span class="op" id="1463169">}</span><br>
<span class="lineno">190</span><span class="keyword" id="1463171">func</span>&nbsp;<span class="ident" id="1463176">memequal16</span><span class="op" id="1463186">(</span><span class="ident" id="1463187">p</span><span class="op" id="1463188">,</span>&nbsp;<span class="ident" id="1463190">q</span>&nbsp;<span class="ident" id="1463192">unsafe</span><span class="op" id="1463198">.</span><span class="ident" id="1463199">Pointer</span><span class="op" id="1463206">,</span>&nbsp;<span class="ident" id="1463208">size</span>&nbsp;<span class="builtintype" id="1463213">uintptr</span><span class="op" id="1463220">)</span>&nbsp;<span class="builtintype" id="1463222">bool</span>&nbsp;<span class="op" id="1463227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463230">return</span>&nbsp;<span class="op" id="1463237">*</span><span class="op" id="1463238">(</span><span class="op" id="1463239">*</span><span class="builtintype" id="1463240">int16</span><span class="op" id="1463245">)</span><span class="op" id="1463246">(</span><span class="ident" id="1463247">p</span><span class="op" id="1463248">)</span>&nbsp;<span class="op" id="1463250">==</span>&nbsp;<span class="op" id="1463253">*</span><span class="op" id="1463254">(</span><span class="op" id="1463255">*</span><span class="builtintype" id="1463256">int16</span><span class="op" id="1463261">)</span><span class="op" id="1463262">(</span><span class="ident" id="1463263">q</span><span class="op" id="1463264">)</span><br>
<span class="lineno"></span><span class="op" id="1463266">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463268">func</span>&nbsp;<span class="ident" id="1463273">memequal32</span><span class="op" id="1463283">(</span><span class="ident" id="1463284">p</span><span class="op" id="1463285">,</span>&nbsp;<span class="ident" id="1463287">q</span>&nbsp;<span class="ident" id="1463289">unsafe</span><span class="op" id="1463295">.</span><span class="ident" id="1463296">Pointer</span><span class="op" id="1463303">,</span>&nbsp;<span class="ident" id="1463305">size</span>&nbsp;<span class="builtintype" id="1463310">uintptr</span><span class="op" id="1463317">)</span>&nbsp;<span class="builtintype" id="1463319">bool</span>&nbsp;<span class="op" id="1463324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463327">return</span>&nbsp;<span class="op" id="1463334">*</span><span class="op" id="1463335">(</span><span class="op" id="1463336">*</span><span class="builtintype" id="1463337">int32</span><span class="op" id="1463342">)</span><span class="op" id="1463343">(</span><span class="ident" id="1463344">p</span><span class="op" id="1463345">)</span>&nbsp;<span class="op" id="1463347">==</span>&nbsp;<span class="op" id="1463350">*</span><span class="op" id="1463351">(</span><span class="op" id="1463352">*</span><span class="builtintype" id="1463353">int32</span><span class="op" id="1463358">)</span><span class="op" id="1463359">(</span><span class="ident" id="1463360">q</span><span class="op" id="1463361">)</span><br>
<span class="lineno">195</span><span class="op" id="1463363">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463365">func</span>&nbsp;<span class="ident" id="1463370">memequal64</span><span class="op" id="1463380">(</span><span class="ident" id="1463381">p</span><span class="op" id="1463382">,</span>&nbsp;<span class="ident" id="1463384">q</span>&nbsp;<span class="ident" id="1463386">unsafe</span><span class="op" id="1463392">.</span><span class="ident" id="1463393">Pointer</span><span class="op" id="1463400">,</span>&nbsp;<span class="ident" id="1463402">size</span>&nbsp;<span class="builtintype" id="1463407">uintptr</span><span class="op" id="1463414">)</span>&nbsp;<span class="builtintype" id="1463416">bool</span>&nbsp;<span class="op" id="1463421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463424">return</span>&nbsp;<span class="op" id="1463431">*</span><span class="op" id="1463432">(</span><span class="op" id="1463433">*</span><span class="ident" id="1463434">int64</span><span class="op" id="1463439">)</span><span class="op" id="1463440">(</span><span class="ident" id="1463441">p</span><span class="op" id="1463442">)</span>&nbsp;<span class="op" id="1463444">==</span>&nbsp;<span class="op" id="1463447">*</span><span class="op" id="1463448">(</span><span class="op" id="1463449">*</span><span class="ident" id="1463450">int64</span><span class="op" id="1463455">)</span><span class="op" id="1463456">(</span><span class="ident" id="1463457">q</span><span class="op" id="1463458">)</span><br>
<span class="lineno"></span><span class="op" id="1463460">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463462">func</span>&nbsp;<span class="ident" id="1463467">memequal128</span><span class="op" id="1463478">(</span><span class="ident" id="1463479">p</span><span class="op" id="1463480">,</span>&nbsp;<span class="ident" id="1463482">q</span>&nbsp;<span class="ident" id="1463484">unsafe</span><span class="op" id="1463490">.</span><span class="ident" id="1463491">Pointer</span><span class="op" id="1463498">,</span>&nbsp;<span class="ident" id="1463500">size</span>&nbsp;<span class="builtintype" id="1463505">uintptr</span><span class="op" id="1463512">)</span>&nbsp;<span class="builtintype" id="1463514">bool</span>&nbsp;<span class="op" id="1463519">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463522">return</span>&nbsp;<span class="op" id="1463529">*</span><span class="op" id="1463530">(</span><span class="op" id="1463531">*</span><span class="op" id="1463532">[</span><span class="num" id="1463533">2</span><span class="op" id="1463534">]</span><span class="ident" id="1463535">int64</span><span class="op" id="1463540">)</span><span class="op" id="1463541">(</span><span class="ident" id="1463542">p</span><span class="op" id="1463543">)</span>&nbsp;<span class="op" id="1463545">==</span>&nbsp;<span class="op" id="1463548">*</span><span class="op" id="1463549">(</span><span class="op" id="1463550">*</span><span class="op" id="1463551">[</span><span class="num" id="1463552">2</span><span class="op" id="1463553">]</span><span class="ident" id="1463554">int64</span><span class="op" id="1463559">)</span><span class="op" id="1463560">(</span><span class="ident" id="1463561">q</span><span class="op" id="1463562">)</span><br>
<span class="lineno"></span><span class="op" id="1463564">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463566">func</span>&nbsp;<span class="ident" id="1463571">f32equal</span><span class="op" id="1463579">(</span><span class="ident" id="1463580">p</span><span class="op" id="1463581">,</span>&nbsp;<span class="ident" id="1463583">q</span>&nbsp;<span class="ident" id="1463585">unsafe</span><span class="op" id="1463591">.</span><span class="ident" id="1463592">Pointer</span><span class="op" id="1463599">,</span>&nbsp;<span class="ident" id="1463601">size</span>&nbsp;<span class="builtintype" id="1463606">uintptr</span><span class="op" id="1463613">)</span>&nbsp;<span class="builtintype" id="1463615">bool</span>&nbsp;<span class="op" id="1463620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463623">return</span>&nbsp;<span class="op" id="1463630">*</span><span class="op" id="1463631">(</span><span class="op" id="1463632">*</span><span class="builtintype" id="1463633">float32</span><span class="op" id="1463640">)</span><span class="op" id="1463641">(</span><span class="ident" id="1463642">p</span><span class="op" id="1463643">)</span>&nbsp;<span class="op" id="1463645">==</span>&nbsp;<span class="op" id="1463648">*</span><span class="op" id="1463649">(</span><span class="op" id="1463650">*</span><span class="builtintype" id="1463651">float32</span><span class="op" id="1463658">)</span><span class="op" id="1463659">(</span><span class="ident" id="1463660">q</span><span class="op" id="1463661">)</span><br>
<span class="lineno"></span><span class="op" id="1463663">}</span><br>
<span class="lineno">205</span><span class="keyword" id="1463665">func</span>&nbsp;<span class="ident" id="1463670">f64equal</span><span class="op" id="1463678">(</span><span class="ident" id="1463679">p</span><span class="op" id="1463680">,</span>&nbsp;<span class="ident" id="1463682">q</span>&nbsp;<span class="ident" id="1463684">unsafe</span><span class="op" id="1463690">.</span><span class="ident" id="1463691">Pointer</span><span class="op" id="1463698">,</span>&nbsp;<span class="ident" id="1463700">size</span>&nbsp;<span class="builtintype" id="1463705">uintptr</span><span class="op" id="1463712">)</span>&nbsp;<span class="builtintype" id="1463714">bool</span>&nbsp;<span class="op" id="1463719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463722">return</span>&nbsp;<span class="op" id="1463729">*</span><span class="op" id="1463730">(</span><span class="op" id="1463731">*</span><span class="builtintype" id="1463732">float64</span><span class="op" id="1463739">)</span><span class="op" id="1463740">(</span><span class="ident" id="1463741">p</span><span class="op" id="1463742">)</span>&nbsp;<span class="op" id="1463744">==</span>&nbsp;<span class="op" id="1463747">*</span><span class="op" id="1463748">(</span><span class="op" id="1463749">*</span><span class="builtintype" id="1463750">float64</span><span class="op" id="1463757">)</span><span class="op" id="1463758">(</span><span class="ident" id="1463759">q</span><span class="op" id="1463760">)</span><br>
<span class="lineno"></span><span class="op" id="1463762">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463764">func</span>&nbsp;<span class="ident" id="1463769">c64equal</span><span class="op" id="1463777">(</span><span class="ident" id="1463778">p</span><span class="op" id="1463779">,</span>&nbsp;<span class="ident" id="1463781">q</span>&nbsp;<span class="ident" id="1463783">unsafe</span><span class="op" id="1463789">.</span><span class="ident" id="1463790">Pointer</span><span class="op" id="1463797">,</span>&nbsp;<span class="ident" id="1463799">size</span>&nbsp;<span class="builtintype" id="1463804">uintptr</span><span class="op" id="1463811">)</span>&nbsp;<span class="builtintype" id="1463813">bool</span>&nbsp;<span class="op" id="1463818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463821">return</span>&nbsp;<span class="op" id="1463828">*</span><span class="op" id="1463829">(</span><span class="op" id="1463830">*</span><span class="builtintype" id="1463831">complex64</span><span class="op" id="1463840">)</span><span class="op" id="1463841">(</span><span class="ident" id="1463842">p</span><span class="op" id="1463843">)</span>&nbsp;<span class="op" id="1463845">==</span>&nbsp;<span class="op" id="1463848">*</span><span class="op" id="1463849">(</span><span class="op" id="1463850">*</span><span class="builtintype" id="1463851">complex64</span><span class="op" id="1463860">)</span><span class="op" id="1463861">(</span><span class="ident" id="1463862">q</span><span class="op" id="1463863">)</span><br>
<span class="lineno">210</span><span class="op" id="1463865">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463867">func</span>&nbsp;<span class="ident" id="1463872">c128equal</span><span class="op" id="1463881">(</span><span class="ident" id="1463882">p</span><span class="op" id="1463883">,</span>&nbsp;<span class="ident" id="1463885">q</span>&nbsp;<span class="ident" id="1463887">unsafe</span><span class="op" id="1463893">.</span><span class="ident" id="1463894">Pointer</span><span class="op" id="1463901">,</span>&nbsp;<span class="ident" id="1463903">size</span>&nbsp;<span class="builtintype" id="1463908">uintptr</span><span class="op" id="1463915">)</span>&nbsp;<span class="builtintype" id="1463917">bool</span>&nbsp;<span class="op" id="1463922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1463925">return</span>&nbsp;<span class="op" id="1463932">*</span><span class="op" id="1463933">(</span><span class="op" id="1463934">*</span><span class="builtintype" id="1463935">complex128</span><span class="op" id="1463945">)</span><span class="op" id="1463946">(</span><span class="ident" id="1463947">p</span><span class="op" id="1463948">)</span>&nbsp;<span class="op" id="1463950">==</span>&nbsp;<span class="op" id="1463953">*</span><span class="op" id="1463954">(</span><span class="op" id="1463955">*</span><span class="builtintype" id="1463956">complex128</span><span class="op" id="1463966">)</span><span class="op" id="1463967">(</span><span class="ident" id="1463968">q</span><span class="op" id="1463969">)</span><br>
<span class="lineno"></span><span class="op" id="1463971">}</span><br>
<span class="lineno"></span><span class="keyword" id="1463973">func</span>&nbsp;<span class="ident" id="1463978">strequal</span><span class="op" id="1463986">(</span><span class="ident" id="1463987">p</span><span class="op" id="1463988">,</span>&nbsp;<span class="ident" id="1463990">q</span>&nbsp;<span class="ident" id="1463992">unsafe</span><span class="op" id="1463998">.</span><span class="ident" id="1463999">Pointer</span><span class="op" id="1464006">,</span>&nbsp;<span class="ident" id="1464008">size</span>&nbsp;<span class="builtintype" id="1464013">uintptr</span><span class="op" id="1464020">)</span>&nbsp;<span class="builtintype" id="1464022">bool</span>&nbsp;<span class="op" id="1464027">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464030">return</span>&nbsp;<span class="op" id="1464037">*</span><span class="op" id="1464038">(</span><span class="op" id="1464039">*</span><span class="builtintype" id="1464040">string</span><span class="op" id="1464046">)</span><span class="op" id="1464047">(</span><span class="ident" id="1464048">p</span><span class="op" id="1464049">)</span>&nbsp;<span class="op" id="1464051">==</span>&nbsp;<span class="op" id="1464054">*</span><span class="op" id="1464055">(</span><span class="op" id="1464056">*</span><span class="builtintype" id="1464057">string</span><span class="op" id="1464063">)</span><span class="op" id="1464064">(</span><span class="ident" id="1464065">q</span><span class="op" id="1464066">)</span><br>
<span class="lineno"></span><span class="op" id="1464068">}</span><br>
<span class="lineno"></span><span class="keyword" id="1464070">func</span>&nbsp;<span class="ident" id="1464075">interequal</span><span class="op" id="1464085">(</span><span class="ident" id="1464086">p</span><span class="op" id="1464087">,</span>&nbsp;<span class="ident" id="1464089">q</span>&nbsp;<span class="ident" id="1464091">unsafe</span><span class="op" id="1464097">.</span><span class="ident" id="1464098">Pointer</span><span class="op" id="1464105">,</span>&nbsp;<span class="ident" id="1464107">size</span>&nbsp;<span class="builtintype" id="1464112">uintptr</span><span class="op" id="1464119">)</span>&nbsp;<span class="builtintype" id="1464121">bool</span>&nbsp;<span class="op" id="1464126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464129">return</span>&nbsp;<span class="ident" id="1464136">ifaceeq</span><span class="op" id="1464143">(</span><span class="op" id="1464144">*</span><span class="op" id="1464145">(</span><span class="op" id="1464146">*</span><span class="keyword" id="1464147">interface</span>&nbsp;<span class="op" id="1464157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464161">f</span><span class="op" id="1464162">(</span><span class="op" id="1464163">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464166">}</span><span class="op" id="1464167">)</span><span class="op" id="1464168">(</span><span class="ident" id="1464169">p</span><span class="op" id="1464170">)</span><span class="op" id="1464171">,</span>&nbsp;<span class="op" id="1464173">*</span><span class="op" id="1464174">(</span><span class="op" id="1464175">*</span><span class="keyword" id="1464176">interface</span>&nbsp;<span class="op" id="1464186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464190">f</span><span class="op" id="1464191">(</span><span class="op" id="1464192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464195">}</span><span class="op" id="1464196">)</span><span class="op" id="1464197">(</span><span class="ident" id="1464198">q</span><span class="op" id="1464199">)</span><span class="op" id="1464200">)</span><br>
<span class="lineno"></span><span class="op" id="1464202">}</span><br>
<span class="lineno"></span><span class="keyword" id="1464204">func</span>&nbsp;<span class="ident" id="1464209">nilinterequal</span><span class="op" id="1464222">(</span><span class="ident" id="1464223">p</span><span class="op" id="1464224">,</span>&nbsp;<span class="ident" id="1464226">q</span>&nbsp;<span class="ident" id="1464228">unsafe</span><span class="op" id="1464234">.</span><span class="ident" id="1464235">Pointer</span><span class="op" id="1464242">,</span>&nbsp;<span class="ident" id="1464244">size</span>&nbsp;<span class="builtintype" id="1464249">uintptr</span><span class="op" id="1464256">)</span>&nbsp;<span class="builtintype" id="1464258">bool</span>&nbsp;<span class="op" id="1464263">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464266">return</span>&nbsp;<span class="ident" id="1464273">efaceeq</span><span class="op" id="1464280">(</span><span class="op" id="1464281">*</span><span class="op" id="1464282">(</span><span class="op" id="1464283">*</span><span class="keyword" id="1464284">interface</span><span class="op" id="1464293">{</span><span class="op" id="1464294">}</span><span class="op" id="1464295">)</span><span class="op" id="1464296">(</span><span class="ident" id="1464297">p</span><span class="op" id="1464298">)</span><span class="op" id="1464299">,</span>&nbsp;<span class="op" id="1464301">*</span><span class="op" id="1464302">(</span><span class="op" id="1464303">*</span><span class="keyword" id="1464304">interface</span><span class="op" id="1464313">{</span><span class="op" id="1464314">}</span><span class="op" id="1464315">)</span><span class="op" id="1464316">(</span><span class="ident" id="1464317">q</span><span class="op" id="1464318">)</span><span class="op" id="1464319">)</span><br>
<span class="lineno"></span><span class="op" id="1464321">}</span><br>
<span class="lineno"></span><span class="keyword" id="1464323">func</span>&nbsp;<span class="ident" id="1464328">efaceeq</span><span class="op" id="1464335">(</span><span class="ident" id="1464336">p</span><span class="op" id="1464337">,</span>&nbsp;<span class="ident" id="1464339">q</span>&nbsp;<span class="keyword" id="1464341">interface</span><span class="op" id="1464350">{</span><span class="op" id="1464351">}</span><span class="op" id="1464352">)</span>&nbsp;<span class="builtintype" id="1464354">bool</span>&nbsp;<span class="op" id="1464359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464362">x</span>&nbsp;<span class="op" id="1464364">:=</span>&nbsp;<span class="op" id="1464367">(</span><span class="op" id="1464368">*</span><span class="ident" id="1464369">eface</span><span class="op" id="1464374">)</span><span class="op" id="1464375">(</span><span class="ident" id="1464376">unsafe</span><span class="op" id="1464382">.</span><span class="ident" id="1464383">Pointer</span><span class="op" id="1464390">(</span><span class="op" id="1464391">&amp;</span><span class="ident" id="1464392">p</span><span class="op" id="1464393">)</span><span class="op" id="1464394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464397">y</span>&nbsp;<span class="op" id="1464399">:=</span>&nbsp;<span class="op" id="1464402">(</span><span class="op" id="1464403">*</span><span class="ident" id="1464404">eface</span><span class="op" id="1464409">)</span><span class="op" id="1464410">(</span><span class="ident" id="1464411">unsafe</span><span class="op" id="1464417">.</span><span class="ident" id="1464418">Pointer</span><span class="op" id="1464425">(</span><span class="op" id="1464426">&amp;</span><span class="ident" id="1464427">q</span><span class="op" id="1464428">)</span><span class="op" id="1464429">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464432">t</span>&nbsp;<span class="op" id="1464434">:=</span>&nbsp;<span class="ident" id="1464437">x</span><span class="op" id="1464438">.</span><span class="ident" id="1464439">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464446">if</span>&nbsp;<span class="ident" id="1464449">t</span>&nbsp;<span class="op" id="1464451">!=</span>&nbsp;<span class="ident" id="1464454">y</span><span class="op" id="1464455">.</span><span class="ident" id="1464456">_type</span>&nbsp;<span class="op" id="1464462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464466">return</span>&nbsp;<span class="ident" id="1464473">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464483">if</span>&nbsp;<span class="ident" id="1464486">t</span>&nbsp;<span class="op" id="1464488">==</span>&nbsp;<span class="ident" id="1464491">nil</span>&nbsp;<span class="op" id="1464495">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464499">return</span>&nbsp;<span class="ident" id="1464506">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464515">eq</span>&nbsp;<span class="op" id="1464518">:=</span>&nbsp;<span class="ident" id="1464521">goalg</span><span class="op" id="1464526">(</span><span class="ident" id="1464527">t</span><span class="op" id="1464528">.</span><span class="ident" id="1464529">alg</span><span class="op" id="1464532">)</span><span class="op" id="1464533">.</span><span class="ident" id="1464534">equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464541">if</span>&nbsp;<span class="ident" id="1464544">eq</span>&nbsp;<span class="op" id="1464547">==</span>&nbsp;<span class="ident" id="1464550">nil</span>&nbsp;<span class="op" id="1464554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1464558">panic</span><span class="op" id="1464563">(</span><span class="ident" id="1464564">errorString</span><span class="op" id="1464575">(</span><span class="string" id="1464576">&#34;comparing&nbsp;uncomparable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1464607">+</span>&nbsp;<span class="op" id="1464609">*</span><span class="ident" id="1464610">t</span><span class="op" id="1464611">.</span><span class="ident" id="1464612">_string</span><span class="op" id="1464619">)</span><span class="op" id="1464620">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464626">if</span>&nbsp;<span class="ident" id="1464629">isDirectIface</span><span class="op" id="1464642">(</span><span class="ident" id="1464643">t</span><span class="op" id="1464644">)</span>&nbsp;<span class="op" id="1464646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464650">return</span>&nbsp;<span class="ident" id="1464657">eq</span><span class="op" id="1464659">(</span><span class="ident" id="1464660">noescape</span><span class="op" id="1464668">(</span><span class="ident" id="1464669">unsafe</span><span class="op" id="1464675">.</span><span class="ident" id="1464676">Pointer</span><span class="op" id="1464683">(</span><span class="op" id="1464684">&amp;</span><span class="ident" id="1464685">x</span><span class="op" id="1464686">.</span><span class="ident" id="1464687">data</span><span class="op" id="1464691">)</span><span class="op" id="1464692">)</span><span class="op" id="1464693">,</span>&nbsp;<span class="ident" id="1464695">noescape</span><span class="op" id="1464703">(</span><span class="ident" id="1464704">unsafe</span><span class="op" id="1464710">.</span><span class="ident" id="1464711">Pointer</span><span class="op" id="1464718">(</span><span class="op" id="1464719">&amp;</span><span class="ident" id="1464720">y</span><span class="op" id="1464721">.</span><span class="ident" id="1464722">data</span><span class="op" id="1464726">)</span><span class="op" id="1464727">)</span><span class="op" id="1464728">,</span>&nbsp;<span class="builtintype" id="1464730">uintptr</span><span class="op" id="1464737">(</span><span class="ident" id="1464738">t</span><span class="op" id="1464739">.</span><span class="ident" id="1464740">size</span><span class="op" id="1464744">)</span><span class="op" id="1464745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464751">return</span>&nbsp;<span class="ident" id="1464758">eq</span><span class="op" id="1464760">(</span><span class="ident" id="1464761">x</span><span class="op" id="1464762">.</span><span class="ident" id="1464763">data</span><span class="op" id="1464767">,</span>&nbsp;<span class="ident" id="1464769">y</span><span class="op" id="1464770">.</span><span class="ident" id="1464771">data</span><span class="op" id="1464775">,</span>&nbsp;<span class="builtintype" id="1464777">uintptr</span><span class="op" id="1464784">(</span><span class="ident" id="1464785">t</span><span class="op" id="1464786">.</span><span class="ident" id="1464787">size</span><span class="op" id="1464791">)</span><span class="op" id="1464792">)</span><br>
<span class="lineno">245</span><span class="op" id="1464794">}</span><br>
<span class="lineno"></span><span class="keyword" id="1464796">func</span>&nbsp;<span class="ident" id="1464801">ifaceeq</span><span class="op" id="1464808">(</span><span class="ident" id="1464809">p</span><span class="op" id="1464810">,</span>&nbsp;<span class="ident" id="1464812">q</span>&nbsp;<span class="keyword" id="1464814">interface</span>&nbsp;<span class="op" id="1464824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464827">f</span><span class="op" id="1464828">(</span><span class="op" id="1464829">)</span><br>
<span class="lineno"></span><span class="op" id="1464831">}</span><span class="op" id="1464832">)</span>&nbsp;<span class="builtintype" id="1464834">bool</span>&nbsp;<span class="op" id="1464839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464842">x</span>&nbsp;<span class="op" id="1464844">:=</span>&nbsp;<span class="op" id="1464847">(</span><span class="op" id="1464848">*</span><span class="ident" id="1464849">iface</span><span class="op" id="1464854">)</span><span class="op" id="1464855">(</span><span class="ident" id="1464856">unsafe</span><span class="op" id="1464862">.</span><span class="ident" id="1464863">Pointer</span><span class="op" id="1464870">(</span><span class="op" id="1464871">&amp;</span><span class="ident" id="1464872">p</span><span class="op" id="1464873">)</span><span class="op" id="1464874">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464877">y</span>&nbsp;<span class="op" id="1464879">:=</span>&nbsp;<span class="op" id="1464882">(</span><span class="op" id="1464883">*</span><span class="ident" id="1464884">iface</span><span class="op" id="1464889">)</span><span class="op" id="1464890">(</span><span class="ident" id="1464891">unsafe</span><span class="op" id="1464897">.</span><span class="ident" id="1464898">Pointer</span><span class="op" id="1464905">(</span><span class="op" id="1464906">&amp;</span><span class="ident" id="1464907">q</span><span class="op" id="1464908">)</span><span class="op" id="1464909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1464912">xtab</span>&nbsp;<span class="op" id="1464917">:=</span>&nbsp;<span class="ident" id="1464920">x</span><span class="op" id="1464921">.</span><span class="ident" id="1464922">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464927">if</span>&nbsp;<span class="ident" id="1464930">xtab</span>&nbsp;<span class="op" id="1464935">!=</span>&nbsp;<span class="ident" id="1464938">y</span><span class="op" id="1464939">.</span><span class="ident" id="1464940">tab</span>&nbsp;<span class="op" id="1464944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464948">return</span>&nbsp;<span class="ident" id="1464955">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464962">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464965">if</span>&nbsp;<span class="ident" id="1464968">xtab</span>&nbsp;<span class="op" id="1464973">==</span>&nbsp;<span class="ident" id="1464976">nil</span>&nbsp;<span class="op" id="1464980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1464984">return</span>&nbsp;<span class="ident" id="1464991">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1464997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1465000">t</span>&nbsp;<span class="op" id="1465002">:=</span>&nbsp;<span class="ident" id="1465005">xtab</span><span class="op" id="1465009">.</span><span class="ident" id="1465010">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1465017">eq</span>&nbsp;<span class="op" id="1465020">:=</span>&nbsp;<span class="ident" id="1465023">goalg</span><span class="op" id="1465028">(</span><span class="ident" id="1465029">t</span><span class="op" id="1465030">.</span><span class="ident" id="1465031">alg</span><span class="op" id="1465034">)</span><span class="op" id="1465035">.</span><span class="ident" id="1465036">equal</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465043">if</span>&nbsp;<span class="ident" id="1465046">eq</span>&nbsp;<span class="op" id="1465049">==</span>&nbsp;<span class="ident" id="1465052">nil</span>&nbsp;<span class="op" id="1465056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1465060">panic</span><span class="op" id="1465065">(</span><span class="ident" id="1465066">errorString</span><span class="op" id="1465077">(</span><span class="string" id="1465078">&#34;comparing&nbsp;uncomparable&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1465109">+</span>&nbsp;<span class="op" id="1465111">*</span><span class="ident" id="1465112">t</span><span class="op" id="1465113">.</span><span class="ident" id="1465114">_string</span><span class="op" id="1465121">)</span><span class="op" id="1465122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1465125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465128">if</span>&nbsp;<span class="ident" id="1465131">isDirectIface</span><span class="op" id="1465144">(</span><span class="ident" id="1465145">t</span><span class="op" id="1465146">)</span>&nbsp;<span class="op" id="1465148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465152">return</span>&nbsp;<span class="ident" id="1465159">eq</span><span class="op" id="1465161">(</span><span class="ident" id="1465162">noescape</span><span class="op" id="1465170">(</span><span class="ident" id="1465171">unsafe</span><span class="op" id="1465177">.</span><span class="ident" id="1465178">Pointer</span><span class="op" id="1465185">(</span><span class="op" id="1465186">&amp;</span><span class="ident" id="1465187">x</span><span class="op" id="1465188">.</span><span class="ident" id="1465189">data</span><span class="op" id="1465193">)</span><span class="op" id="1465194">)</span><span class="op" id="1465195">,</span>&nbsp;<span class="ident" id="1465197">noescape</span><span class="op" id="1465205">(</span><span class="ident" id="1465206">unsafe</span><span class="op" id="1465212">.</span><span class="ident" id="1465213">Pointer</span><span class="op" id="1465220">(</span><span class="op" id="1465221">&amp;</span><span class="ident" id="1465222">y</span><span class="op" id="1465223">.</span><span class="ident" id="1465224">data</span><span class="op" id="1465228">)</span><span class="op" id="1465229">)</span><span class="op" id="1465230">,</span>&nbsp;<span class="builtintype" id="1465232">uintptr</span><span class="op" id="1465239">(</span><span class="ident" id="1465240">t</span><span class="op" id="1465241">.</span><span class="ident" id="1465242">size</span><span class="op" id="1465246">)</span><span class="op" id="1465247">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1465250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465253">return</span>&nbsp;<span class="ident" id="1465260">eq</span><span class="op" id="1465262">(</span><span class="ident" id="1465263">x</span><span class="op" id="1465264">.</span><span class="ident" id="1465265">data</span><span class="op" id="1465269">,</span>&nbsp;<span class="ident" id="1465271">y</span><span class="op" id="1465272">.</span><span class="ident" id="1465273">data</span><span class="op" id="1465277">,</span>&nbsp;<span class="builtintype" id="1465279">uintptr</span><span class="op" id="1465286">(</span><span class="ident" id="1465287">t</span><span class="op" id="1465288">.</span><span class="ident" id="1465289">size</span><span class="op" id="1465293">)</span><span class="op" id="1465294">)</span><br>
<span class="lineno"></span><span class="op" id="1465296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1465299">//&nbsp;Testing&nbsp;adapters&nbsp;for&nbsp;hash&nbsp;quality&nbsp;tests&nbsp;(see&nbsp;hash_test.go)</span><br>
<span class="lineno">270</span><span class="keyword" id="1465361">func</span>&nbsp;<span class="ident" id="1465366">haveGoodHash</span><span class="op" id="1465378">(</span><span class="op" id="1465379">)</span>&nbsp;<span class="builtintype" id="1465381">bool</span>&nbsp;<span class="op" id="1465386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465389">return</span>&nbsp;<span class="ident" id="1465396">useAeshash</span><br>
<span class="lineno"></span><span class="op" id="1465407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1465410">func</span>&nbsp;<span class="ident" id="1465415">stringHash</span><span class="op" id="1465425">(</span><span class="ident" id="1465426">s</span>&nbsp;<span class="builtintype" id="1465428">string</span><span class="op" id="1465434">,</span>&nbsp;<span class="ident" id="1465436">seed</span>&nbsp;<span class="builtintype" id="1465441">uintptr</span><span class="op" id="1465448">)</span>&nbsp;<span class="builtintype" id="1465450">uintptr</span>&nbsp;<span class="op" id="1465458">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465461">return</span>&nbsp;<span class="ident" id="1465468">algarray</span><span class="op" id="1465476">[</span><span class="ident" id="1465477">alg_STRING</span><span class="op" id="1465487">]</span><span class="op" id="1465488">.</span><span class="ident" id="1465489">hash</span><span class="op" id="1465493">(</span><span class="ident" id="1465494">noescape</span><span class="op" id="1465502">(</span><span class="ident" id="1465503">unsafe</span><span class="op" id="1465509">.</span><span class="ident" id="1465510">Pointer</span><span class="op" id="1465517">(</span><span class="op" id="1465518">&amp;</span><span class="ident" id="1465519">s</span><span class="op" id="1465520">)</span><span class="op" id="1465521">)</span><span class="op" id="1465522">,</span>&nbsp;<span class="ident" id="1465524">unsafe</span><span class="op" id="1465530">.</span><span class="ident" id="1465531">Sizeof</span><span class="op" id="1465537">(</span><span class="ident" id="1465538">s</span><span class="op" id="1465539">)</span><span class="op" id="1465540">,</span>&nbsp;<span class="ident" id="1465542">seed</span><span class="op" id="1465546">)</span><br>
<span class="lineno"></span><span class="op" id="1465548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1465551">func</span>&nbsp;<span class="ident" id="1465556">bytesHash</span><span class="op" id="1465565">(</span><span class="ident" id="1465566">b</span>&nbsp;<span class="op" id="1465568">[</span><span class="op" id="1465569">]</span><span class="builtintype" id="1465570">byte</span><span class="op" id="1465574">,</span>&nbsp;<span class="ident" id="1465576">seed</span>&nbsp;<span class="builtintype" id="1465581">uintptr</span><span class="op" id="1465588">)</span>&nbsp;<span class="builtintype" id="1465590">uintptr</span>&nbsp;<span class="op" id="1465598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1465601">s</span>&nbsp;<span class="op" id="1465603">:=</span>&nbsp;<span class="op" id="1465606">(</span><span class="op" id="1465607">*</span><span class="ident" id="1465608">sliceStruct</span><span class="op" id="1465619">)</span><span class="op" id="1465620">(</span><span class="ident" id="1465621">unsafe</span><span class="op" id="1465627">.</span><span class="ident" id="1465628">Pointer</span><span class="op" id="1465635">(</span><span class="op" id="1465636">&amp;</span><span class="ident" id="1465637">b</span><span class="op" id="1465638">)</span><span class="op" id="1465639">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465642">return</span>&nbsp;<span class="ident" id="1465649">algarray</span><span class="op" id="1465657">[</span><span class="ident" id="1465658">alg_MEM</span><span class="op" id="1465665">]</span><span class="op" id="1465666">.</span><span class="ident" id="1465667">hash</span><span class="op" id="1465671">(</span><span class="ident" id="1465672">s</span><span class="op" id="1465673">.</span><span class="ident" id="1465674">array</span><span class="op" id="1465679">,</span>&nbsp;<span class="builtintype" id="1465681">uintptr</span><span class="op" id="1465688">(</span><span class="ident" id="1465689">s</span><span class="op" id="1465690">.</span><span class="builtinfunc" id="1465691">len</span><span class="op" id="1465694">)</span><span class="op" id="1465695">,</span>&nbsp;<span class="ident" id="1465697">seed</span><span class="op" id="1465701">)</span><br>
<span class="lineno"></span><span class="op" id="1465703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1465706">func</span>&nbsp;<span class="ident" id="1465711">int32Hash</span><span class="op" id="1465720">(</span><span class="ident" id="1465721">i</span>&nbsp;<span class="builtintype" id="1465723">uint32</span><span class="op" id="1465729">,</span>&nbsp;<span class="ident" id="1465731">seed</span>&nbsp;<span class="builtintype" id="1465736">uintptr</span><span class="op" id="1465743">)</span>&nbsp;<span class="builtintype" id="1465745">uintptr</span>&nbsp;<span class="op" id="1465753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465756">return</span>&nbsp;<span class="ident" id="1465763">algarray</span><span class="op" id="1465771">[</span><span class="ident" id="1465772">alg_MEM32</span><span class="op" id="1465781">]</span><span class="op" id="1465782">.</span><span class="ident" id="1465783">hash</span><span class="op" id="1465787">(</span><span class="ident" id="1465788">noescape</span><span class="op" id="1465796">(</span><span class="ident" id="1465797">unsafe</span><span class="op" id="1465803">.</span><span class="ident" id="1465804">Pointer</span><span class="op" id="1465811">(</span><span class="op" id="1465812">&amp;</span><span class="ident" id="1465813">i</span><span class="op" id="1465814">)</span><span class="op" id="1465815">)</span><span class="op" id="1465816">,</span>&nbsp;<span class="num" id="1465818">4</span><span class="op" id="1465819">,</span>&nbsp;<span class="ident" id="1465821">seed</span><span class="op" id="1465825">)</span><br>
<span class="lineno">285</span><span class="op" id="1465827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1465830">func</span>&nbsp;<span class="ident" id="1465835">int64Hash</span><span class="op" id="1465844">(</span><span class="ident" id="1465845">i</span>&nbsp;<span class="ident" id="1465847">uint64</span><span class="op" id="1465853">,</span>&nbsp;<span class="ident" id="1465855">seed</span>&nbsp;<span class="builtintype" id="1465860">uintptr</span><span class="op" id="1465867">)</span>&nbsp;<span class="builtintype" id="1465869">uintptr</span>&nbsp;<span class="op" id="1465877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1465880">return</span>&nbsp;<span class="ident" id="1465887">algarray</span><span class="op" id="1465895">[</span><span class="ident" id="1465896">alg_MEM64</span><span class="op" id="1465905">]</span><span class="op" id="1465906">.</span><span class="ident" id="1465907">hash</span><span class="op" id="1465911">(</span><span class="ident" id="1465912">noescape</span><span class="op" id="1465920">(</span><span class="ident" id="1465921">unsafe</span><span class="op" id="1465927">.</span><span class="ident" id="1465928">Pointer</span><span class="op" id="1465935">(</span><span class="op" id="1465936">&amp;</span><span class="ident" id="1465937">i</span><span class="op" id="1465938">)</span><span class="op" id="1465939">)</span><span class="op" id="1465940">,</span>&nbsp;<span class="num" id="1465942">8</span><span class="op" id="1465943">,</span>&nbsp;<span class="ident" id="1465945">seed</span><span class="op" id="1465949">)</span><br>
<span class="lineno"></span><span class="op" id="1465951">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="1465954">func</span>&nbsp;<span class="ident" id="1465959">efaceHash</span><span class="op" id="1465968">(</span><span class="ident" id="1465969">i</span>&nbsp;<span class="keyword" id="1465971">interface</span><span class="op" id="1465980">{</span><span class="op" id="1465981">}</span><span class="op" id="1465982">,</span>&nbsp;<span class="ident" id="1465984">seed</span>&nbsp;<span class="builtintype" id="1465989">uintptr</span><span class="op" id="1465996">)</span>&nbsp;<span class="builtintype" id="1465998">uintptr</span>&nbsp;<span class="op" id="1466006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466009">return</span>&nbsp;<span class="ident" id="1466016">algarray</span><span class="op" id="1466024">[</span><span class="ident" id="1466025">alg_NILINTER</span><span class="op" id="1466037">]</span><span class="op" id="1466038">.</span><span class="ident" id="1466039">hash</span><span class="op" id="1466043">(</span><span class="ident" id="1466044">noescape</span><span class="op" id="1466052">(</span><span class="ident" id="1466053">unsafe</span><span class="op" id="1466059">.</span><span class="ident" id="1466060">Pointer</span><span class="op" id="1466067">(</span><span class="op" id="1466068">&amp;</span><span class="ident" id="1466069">i</span><span class="op" id="1466070">)</span><span class="op" id="1466071">)</span><span class="op" id="1466072">,</span>&nbsp;<span class="ident" id="1466074">unsafe</span><span class="op" id="1466080">.</span><span class="ident" id="1466081">Sizeof</span><span class="op" id="1466087">(</span><span class="ident" id="1466088">i</span><span class="op" id="1466089">)</span><span class="op" id="1466090">,</span>&nbsp;<span class="ident" id="1466092">seed</span><span class="op" id="1466096">)</span><br>
<span class="lineno"></span><span class="op" id="1466098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="1466101">func</span>&nbsp;<span class="ident" id="1466106">ifaceHash</span><span class="op" id="1466115">(</span><span class="ident" id="1466116">i</span>&nbsp;<span class="keyword" id="1466118">interface</span>&nbsp;<span class="op" id="1466128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1466131">F</span><span class="op" id="1466132">(</span><span class="op" id="1466133">)</span><br>
<span class="lineno"></span><span class="op" id="1466135">}</span><span class="op" id="1466136">,</span>&nbsp;<span class="ident" id="1466138">seed</span>&nbsp;<span class="builtintype" id="1466143">uintptr</span><span class="op" id="1466150">)</span>&nbsp;<span class="builtintype" id="1466152">uintptr</span>&nbsp;<span class="op" id="1466160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466163">return</span>&nbsp;<span class="ident" id="1466170">algarray</span><span class="op" id="1466178">[</span><span class="ident" id="1466179">alg_INTER</span><span class="op" id="1466188">]</span><span class="op" id="1466189">.</span><span class="ident" id="1466190">hash</span><span class="op" id="1466194">(</span><span class="ident" id="1466195">noescape</span><span class="op" id="1466203">(</span><span class="ident" id="1466204">unsafe</span><span class="op" id="1466210">.</span><span class="ident" id="1466211">Pointer</span><span class="op" id="1466218">(</span><span class="op" id="1466219">&amp;</span><span class="ident" id="1466220">i</span><span class="op" id="1466221">)</span><span class="op" id="1466222">)</span><span class="op" id="1466223">,</span>&nbsp;<span class="ident" id="1466225">unsafe</span><span class="op" id="1466231">.</span><span class="ident" id="1466232">Sizeof</span><span class="op" id="1466238">(</span><span class="ident" id="1466239">i</span><span class="op" id="1466240">)</span><span class="op" id="1466241">,</span>&nbsp;<span class="ident" id="1466243">seed</span><span class="op" id="1466247">)</span><br>
<span class="lineno"></span><span class="op" id="1466249">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="1466252">//&nbsp;Testing&nbsp;adapter&nbsp;for&nbsp;memclr</span><br>
<span class="lineno"></span><span class="keyword" id="1466282">func</span>&nbsp;<span class="ident" id="1466287">memclrBytes</span><span class="op" id="1466298">(</span><span class="ident" id="1466299">b</span>&nbsp;<span class="op" id="1466301">[</span><span class="op" id="1466302">]</span><span class="builtintype" id="1466303">byte</span><span class="op" id="1466307">)</span>&nbsp;<span class="op" id="1466309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1466312">s</span>&nbsp;<span class="op" id="1466314">:=</span>&nbsp;<span class="op" id="1466317">(</span><span class="op" id="1466318">*</span><span class="ident" id="1466319">sliceStruct</span><span class="op" id="1466330">)</span><span class="op" id="1466331">(</span><span class="ident" id="1466332">unsafe</span><span class="op" id="1466338">.</span><span class="ident" id="1466339">Pointer</span><span class="op" id="1466346">(</span><span class="op" id="1466347">&amp;</span><span class="ident" id="1466348">b</span><span class="op" id="1466349">)</span><span class="op" id="1466350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1466353">memclr</span><span class="op" id="1466359">(</span><span class="ident" id="1466360">s</span><span class="op" id="1466361">.</span><span class="ident" id="1466362">array</span><span class="op" id="1466367">,</span>&nbsp;<span class="builtintype" id="1466369">uintptr</span><span class="op" id="1466376">(</span><span class="ident" id="1466377">s</span><span class="op" id="1466378">.</span><span class="builtinfunc" id="1466379">len</span><span class="op" id="1466382">)</span><span class="op" id="1466383">)</span><br>
<span class="lineno">305</span><span class="op" id="1466385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1466388">//&nbsp;TODO(dvyukov):&nbsp;remove&nbsp;when&nbsp;Type&nbsp;is&nbsp;converted&nbsp;to&nbsp;Go&nbsp;and&nbsp;contains&nbsp;*typeAlg.</span><br>
<span class="lineno"></span><span class="keyword" id="1466465">func</span>&nbsp;<span class="ident" id="1466470">goalg</span><span class="op" id="1466475">(</span><span class="ident" id="1466476">a</span>&nbsp;<span class="ident" id="1466478">unsafe</span><span class="op" id="1466484">.</span><span class="ident" id="1466485">Pointer</span><span class="op" id="1466492">)</span>&nbsp;<span class="op" id="1466494">*</span><span class="ident" id="1466495">typeAlg</span>&nbsp;<span class="op" id="1466503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466506">return</span>&nbsp;<span class="op" id="1466513">(</span><span class="op" id="1466514">*</span><span class="ident" id="1466515">typeAlg</span><span class="op" id="1466522">)</span><span class="op" id="1466523">(</span><span class="ident" id="1466524">a</span><span class="op" id="1466525">)</span><br>
<span class="lineno">310</span><span class="op" id="1466527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1466530">//&nbsp;used&nbsp;in&nbsp;asm_{386,amd64}.s</span><br>
<span class="lineno"></span><span class="keyword" id="1466559">const</span>&nbsp;<span class="ident" id="1466565">hashRandomBytes</span>&nbsp;<span class="op" id="1466581">=</span>&nbsp;<span class="num" id="1466583">32</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1466587">var</span>&nbsp;<span class="ident" id="1466591">aeskeysched</span>&nbsp;<span class="op" id="1466603">[</span><span class="ident" id="1466604">hashRandomBytes</span><span class="op" id="1466619">]</span><span class="builtintype" id="1466620">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1466626">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="1466640">func</span>&nbsp;<span class="ident" id="1466645">get_random_data</span><span class="op" id="1466660">(</span><span class="ident" id="1466661">rnd</span>&nbsp;<span class="op" id="1466665">*</span><span class="ident" id="1466666">unsafe</span><span class="op" id="1466672">.</span><span class="ident" id="1466673">Pointer</span><span class="op" id="1466680">,</span>&nbsp;<span class="ident" id="1466682">n</span>&nbsp;<span class="op" id="1466684">*</span><span class="builtintype" id="1466685">int32</span><span class="op" id="1466690">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="keyword" id="1466693">func</span>&nbsp;<span class="ident" id="1466698">init</span><span class="op" id="1466702">(</span><span class="op" id="1466703">)</span>&nbsp;<span class="op" id="1466705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466708">if</span>&nbsp;<span class="ident" id="1466711">theGoos</span>&nbsp;<span class="op" id="1466719">==</span>&nbsp;<span class="string" id="1466722">&#34;nacl&#34;</span>&nbsp;<span class="op" id="1466729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466733">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1466741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1466745">//&nbsp;Install&nbsp;aes&nbsp;hash&nbsp;algorithm&nbsp;if&nbsp;we&nbsp;have&nbsp;the&nbsp;instructions&nbsp;we&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1466812">if</span>&nbsp;<span class="op" id="1466815">(</span><span class="ident" id="1466816">cpuid_ecx</span><span class="op" id="1466825">&amp;</span><span class="op" id="1466826">(</span><span class="num" id="1466827">1</span><span class="op" id="1466828">&lt;&lt;</span><span class="num" id="1466830">25</span><span class="op" id="1466832">)</span><span class="op" id="1466833">)</span>&nbsp;<span class="op" id="1466835">!=</span>&nbsp;<span class="num" id="1466838">0</span>&nbsp;<span class="op" id="1466840">&amp;&amp;</span>&nbsp;<span class="comment" id="1466843">//&nbsp;aes&nbsp;(aesenc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1466861">(</span><span class="ident" id="1466862">cpuid_ecx</span><span class="op" id="1466871">&amp;</span><span class="op" id="1466872">(</span><span class="num" id="1466873">1</span><span class="op" id="1466874">&lt;&lt;</span><span class="num" id="1466876">9</span><span class="op" id="1466877">)</span><span class="op" id="1466878">)</span>&nbsp;<span class="op" id="1466880">!=</span>&nbsp;<span class="num" id="1466883">0</span>&nbsp;<span class="op" id="1466885">&amp;&amp;</span>&nbsp;<span class="comment" id="1466888">//&nbsp;sse3&nbsp;(pshufb)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1466907">(</span><span class="ident" id="1466908">cpuid_ecx</span><span class="op" id="1466917">&amp;</span><span class="op" id="1466918">(</span><span class="num" id="1466919">1</span><span class="op" id="1466920">&lt;&lt;</span><span class="num" id="1466922">19</span><span class="op" id="1466924">)</span><span class="op" id="1466925">)</span>&nbsp;<span class="op" id="1466927">!=</span>&nbsp;<span class="num" id="1466930">0</span>&nbsp;<span class="op" id="1466932">{</span>&nbsp;<span class="comment" id="1466934">//&nbsp;sse4.1&nbsp;(pinsr{d,q})</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1466959">useAeshash</span>&nbsp;<span class="op" id="1466970">=</span>&nbsp;<span class="ident" id="1466972">true</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1466979">algarray</span><span class="op" id="1466987">[</span><span class="ident" id="1466988">alg_MEM</span><span class="op" id="1466995">]</span><span class="op" id="1466996">.</span><span class="ident" id="1466997">hash</span>&nbsp;<span class="op" id="1467002">=</span>&nbsp;<span class="ident" id="1467004">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467014">algarray</span><span class="op" id="1467022">[</span><span class="ident" id="1467023">alg_MEM8</span><span class="op" id="1467031">]</span><span class="op" id="1467032">.</span><span class="ident" id="1467033">hash</span>&nbsp;<span class="op" id="1467038">=</span>&nbsp;<span class="ident" id="1467040">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467050">algarray</span><span class="op" id="1467058">[</span><span class="ident" id="1467059">alg_MEM16</span><span class="op" id="1467068">]</span><span class="op" id="1467069">.</span><span class="ident" id="1467070">hash</span>&nbsp;<span class="op" id="1467075">=</span>&nbsp;<span class="ident" id="1467077">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467087">algarray</span><span class="op" id="1467095">[</span><span class="ident" id="1467096">alg_MEM32</span><span class="op" id="1467105">]</span><span class="op" id="1467106">.</span><span class="ident" id="1467107">hash</span>&nbsp;<span class="op" id="1467112">=</span>&nbsp;<span class="ident" id="1467114">aeshash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467126">algarray</span><span class="op" id="1467134">[</span><span class="ident" id="1467135">alg_MEM64</span><span class="op" id="1467144">]</span><span class="op" id="1467145">.</span><span class="ident" id="1467146">hash</span>&nbsp;<span class="op" id="1467151">=</span>&nbsp;<span class="ident" id="1467153">aeshash64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467165">algarray</span><span class="op" id="1467173">[</span><span class="ident" id="1467174">alg_MEM128</span><span class="op" id="1467184">]</span><span class="op" id="1467185">.</span><span class="ident" id="1467186">hash</span>&nbsp;<span class="op" id="1467191">=</span>&nbsp;<span class="ident" id="1467193">aeshash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467203">algarray</span><span class="op" id="1467211">[</span><span class="ident" id="1467212">alg_STRING</span><span class="op" id="1467222">]</span><span class="op" id="1467223">.</span><span class="ident" id="1467224">hash</span>&nbsp;<span class="op" id="1467229">=</span>&nbsp;<span class="ident" id="1467231">aeshashstr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1467244">//&nbsp;Initialize&nbsp;with&nbsp;random&nbsp;data&nbsp;so&nbsp;hash&nbsp;collisions&nbsp;will&nbsp;be&nbsp;hard&nbsp;to&nbsp;engineer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1467322">var</span>&nbsp;<span class="ident" id="1467326">rnd</span>&nbsp;<span class="ident" id="1467330">unsafe</span><span class="op" id="1467336">.</span><span class="ident" id="1467337">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1467347">var</span>&nbsp;<span class="ident" id="1467351">n</span>&nbsp;<span class="builtintype" id="1467353">int32</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467361">get_random_data</span><span class="op" id="1467376">(</span><span class="op" id="1467377">&amp;</span><span class="ident" id="1467378">rnd</span><span class="op" id="1467381">,</span>&nbsp;<span class="op" id="1467383">&amp;</span><span class="ident" id="1467384">n</span><span class="op" id="1467385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1467389">if</span>&nbsp;<span class="ident" id="1467392">n</span>&nbsp;<span class="op" id="1467394">&gt;</span>&nbsp;<span class="ident" id="1467396">hashRandomBytes</span>&nbsp;<span class="op" id="1467412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467417">n</span>&nbsp;<span class="op" id="1467419">=</span>&nbsp;<span class="ident" id="1467421">hashRandomBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1467439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467443">memmove</span><span class="op" id="1467450">(</span><span class="ident" id="1467451">unsafe</span><span class="op" id="1467457">.</span><span class="ident" id="1467458">Pointer</span><span class="op" id="1467465">(</span><span class="op" id="1467466">&amp;</span><span class="ident" id="1467467">aeskeysched</span><span class="op" id="1467478">[</span><span class="num" id="1467479">0</span><span class="op" id="1467480">]</span><span class="op" id="1467481">)</span><span class="op" id="1467482">,</span>&nbsp;<span class="ident" id="1467484">rnd</span><span class="op" id="1467487">,</span>&nbsp;<span class="builtintype" id="1467489">uintptr</span><span class="op" id="1467496">(</span><span class="ident" id="1467497">n</span><span class="op" id="1467498">)</span><span class="op" id="1467499">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1467503">if</span>&nbsp;<span class="ident" id="1467506">n</span>&nbsp;<span class="op" id="1467508">&lt;</span>&nbsp;<span class="ident" id="1467510">hashRandomBytes</span>&nbsp;<span class="op" id="1467526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1467531">//&nbsp;Not&nbsp;very&nbsp;random,&nbsp;but&nbsp;better&nbsp;than&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1467579">for</span>&nbsp;<span class="ident" id="1467583">t</span>&nbsp;<span class="op" id="1467585">:=</span>&nbsp;<span class="ident" id="1467588">nanotime</span><span class="op" id="1467596">(</span><span class="op" id="1467597">)</span><span class="op" id="1467598">;</span>&nbsp;<span class="ident" id="1467600">n</span>&nbsp;<span class="op" id="1467602">&lt;</span>&nbsp;<span class="ident" id="1467604">hashRandomBytes</span><span class="op" id="1467619">;</span>&nbsp;<span class="ident" id="1467621">n</span><span class="op" id="1467622">++</span>&nbsp;<span class="op" id="1467625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1467631">aeskeysched</span><span class="op" id="1467642">[</span><span class="ident" id="1467643">n</span><span class="op" id="1467644">]</span>&nbsp;<span class="op" id="1467646">=</span>&nbsp;<span class="builtintype" id="1467648">byte</span><span class="op" id="1467652">(</span><span class="ident" id="1467653">t</span>&nbsp;<span class="op" id="1467655">&gt;&gt;</span>&nbsp;<span class="builtintype" id="1467658">uint</span><span class="op" id="1467662">(</span><span class="num" id="1467663">8</span><span class="op" id="1467664">*</span><span class="op" id="1467665">(</span><span class="ident" id="1467666">n</span><span class="op" id="1467667">%</span><span class="num" id="1467668">8</span><span class="op" id="1467669">)</span><span class="op" id="1467670">)</span><span class="op" id="1467671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1467676">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1467680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1467683">}</span><br>
<span class="lineno"></span><span class="op" id="1467685">}</span>
</div>
</body>
</html>
