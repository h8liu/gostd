<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp/syntax</h2>
<ul>
<li><a href="/gostd/regexp/syntax/compile.go.html">compile.go</a></li>
<li><a href="/gostd/regexp/syntax/doc.go.html">doc.go</a></li>
<li><a href="/gostd/regexp/syntax/parse.go.html">parse.go</a></li>
<li><a href="/gostd/regexp/syntax/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/regexp/syntax/perl_groups.go.html">perl_groups.go</a></li>
<li><a href="/gostd/regexp/syntax/prog.go.html">prog.go</a></li>
<li><a href="/gostd/regexp/syntax/prog_test.go.html">prog_test.go</a></li>
<li><a href="/gostd/regexp/syntax/regexp.go.html">regexp.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify.go.html">simplify.go</a></li>
<li><a href="/gostd/regexp/syntax/simplify_test.go.html">simplify_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8132930">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8132986">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8133040">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8133091">package</span>&nbsp;<span class="ident" id="8133099">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133107">import</span>&nbsp;<span class="op" id="8133114">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8133117">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8133126">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8133133">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8133144">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="8133154">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133157">type</span>&nbsp;<span class="ident" id="8133162">parseTest</span>&nbsp;<span class="keyword" id="8133172">struct</span>&nbsp;<span class="op" id="8133179">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133182">Regexp</span>&nbsp;<span class="builtintype" id="8133189">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133197">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8133204">string</span><br>
<span class="lineno"></span><span class="op" id="8133211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133214">var</span>&nbsp;<span class="ident" id="8133218">parseTests</span>&nbsp;<span class="op" id="8133229">=</span>&nbsp;<span class="op" id="8133231">[</span><span class="op" id="8133232">]</span><span class="ident" id="8133233">parseTest</span><span class="op" id="8133242">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8133245">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133260">{</span><span class="string" id="8133261">`a`</span><span class="op" id="8133264">,</span>&nbsp;<span class="string" id="8133266">`lit{a}`</span><span class="op" id="8133274">}</span><span class="op" id="8133275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133278">{</span><span class="string" id="8133279">`a.`</span><span class="op" id="8133283">,</span>&nbsp;<span class="string" id="8133285">`cat{lit{a}dot{}}`</span><span class="op" id="8133303">}</span><span class="op" id="8133304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133307">{</span><span class="string" id="8133308">`a.b`</span><span class="op" id="8133313">,</span>&nbsp;<span class="string" id="8133315">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="8133339">}</span><span class="op" id="8133340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133343">{</span><span class="string" id="8133344">`ab`</span><span class="op" id="8133348">,</span>&nbsp;<span class="string" id="8133350">`str{ab}`</span><span class="op" id="8133359">}</span><span class="op" id="8133360">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133363">{</span><span class="string" id="8133364">`a.b.c`</span><span class="op" id="8133371">,</span>&nbsp;<span class="string" id="8133373">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="8133408">}</span><span class="op" id="8133409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133412">{</span><span class="string" id="8133413">`abc`</span><span class="op" id="8133418">,</span>&nbsp;<span class="string" id="8133420">`str{abc}`</span><span class="op" id="8133430">}</span><span class="op" id="8133431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133434">{</span><span class="string" id="8133435">`a|^`</span><span class="op" id="8133440">,</span>&nbsp;<span class="string" id="8133442">`alt{lit{a}bol{}}`</span><span class="op" id="8133460">}</span><span class="op" id="8133461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133464">{</span><span class="string" id="8133465">`a|b`</span><span class="op" id="8133470">,</span>&nbsp;<span class="string" id="8133472">`cc{0x61-0x62}`</span><span class="op" id="8133487">}</span><span class="op" id="8133488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133491">{</span><span class="string" id="8133492">`(a)`</span><span class="op" id="8133497">,</span>&nbsp;<span class="string" id="8133499">`cap{lit{a}}`</span><span class="op" id="8133512">}</span><span class="op" id="8133513">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133516">{</span><span class="string" id="8133517">`(a)|b`</span><span class="op" id="8133524">,</span>&nbsp;<span class="string" id="8133526">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="8133550">}</span><span class="op" id="8133551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133554">{</span><span class="string" id="8133555">`a*`</span><span class="op" id="8133559">,</span>&nbsp;<span class="string" id="8133561">`star{lit{a}}`</span><span class="op" id="8133575">}</span><span class="op" id="8133576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133579">{</span><span class="string" id="8133580">`a+`</span><span class="op" id="8133584">,</span>&nbsp;<span class="string" id="8133586">`plus{lit{a}}`</span><span class="op" id="8133600">}</span><span class="op" id="8133601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133604">{</span><span class="string" id="8133605">`a?`</span><span class="op" id="8133609">,</span>&nbsp;<span class="string" id="8133611">`que{lit{a}}`</span><span class="op" id="8133624">}</span><span class="op" id="8133625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133628">{</span><span class="string" id="8133629">`a{2}`</span><span class="op" id="8133635">,</span>&nbsp;<span class="string" id="8133637">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="8133654">}</span><span class="op" id="8133655">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133658">{</span><span class="string" id="8133659">`a{2,3}`</span><span class="op" id="8133667">,</span>&nbsp;<span class="string" id="8133669">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="8133686">}</span><span class="op" id="8133687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133690">{</span><span class="string" id="8133691">`a{2,}`</span><span class="op" id="8133698">,</span>&nbsp;<span class="string" id="8133700">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="8133718">}</span><span class="op" id="8133719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133722">{</span><span class="string" id="8133723">`a*?`</span><span class="op" id="8133728">,</span>&nbsp;<span class="string" id="8133730">`nstar{lit{a}}`</span><span class="op" id="8133745">}</span><span class="op" id="8133746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133749">{</span><span class="string" id="8133750">`a+?`</span><span class="op" id="8133755">,</span>&nbsp;<span class="string" id="8133757">`nplus{lit{a}}`</span><span class="op" id="8133772">}</span><span class="op" id="8133773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133776">{</span><span class="string" id="8133777">`a??`</span><span class="op" id="8133782">,</span>&nbsp;<span class="string" id="8133784">`nque{lit{a}}`</span><span class="op" id="8133798">}</span><span class="op" id="8133799">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133802">{</span><span class="string" id="8133803">`a{2}?`</span><span class="op" id="8133810">,</span>&nbsp;<span class="string" id="8133812">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="8133830">}</span><span class="op" id="8133831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133834">{</span><span class="string" id="8133835">`a{2,3}?`</span><span class="op" id="8133844">,</span>&nbsp;<span class="string" id="8133846">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="8133864">}</span><span class="op" id="8133865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133868">{</span><span class="string" id="8133869">`a{2,}?`</span><span class="op" id="8133877">,</span>&nbsp;<span class="string" id="8133879">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="8133898">}</span><span class="op" id="8133899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8133902">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133945">{</span><span class="string" id="8133946">`x{1001`</span><span class="op" id="8133954">,</span>&nbsp;<span class="string" id="8133956">`str{x{1001}`</span><span class="op" id="8133969">}</span><span class="op" id="8133970">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133973">{</span><span class="string" id="8133974">`x{9876543210`</span><span class="op" id="8133988">,</span>&nbsp;<span class="string" id="8133990">`str{x{9876543210}`</span><span class="op" id="8134009">}</span><span class="op" id="8134010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134013">{</span><span class="string" id="8134014">`x{9876543210,`</span><span class="op" id="8134029">,</span>&nbsp;<span class="string" id="8134031">`str{x{9876543210,}`</span><span class="op" id="8134051">}</span><span class="op" id="8134052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134055">{</span><span class="string" id="8134056">`x{2,1`</span><span class="op" id="8134063">,</span>&nbsp;<span class="string" id="8134065">`str{x{2,1}`</span><span class="op" id="8134077">}</span><span class="op" id="8134078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134081">{</span><span class="string" id="8134082">`x{1,9876543210`</span><span class="op" id="8134098">,</span>&nbsp;<span class="string" id="8134100">`str{x{1,9876543210}`</span><span class="op" id="8134121">}</span><span class="op" id="8134122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134125">{</span><span class="string" id="8134126">``</span><span class="op" id="8134128">,</span>&nbsp;<span class="string" id="8134130">`emp{}`</span><span class="op" id="8134137">}</span><span class="op" id="8134138">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134141">{</span><span class="string" id="8134142">`|`</span><span class="op" id="8134145">,</span>&nbsp;<span class="string" id="8134147">`emp{}`</span><span class="op" id="8134154">}</span><span class="op" id="8134155">,</span>&nbsp;<span class="comment" id="8134157">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134194">{</span><span class="string" id="8134195">`|x|`</span><span class="op" id="8134200">,</span>&nbsp;<span class="string" id="8134202">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="8134225">}</span><span class="op" id="8134226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134229">{</span><span class="string" id="8134230">`.`</span><span class="op" id="8134233">,</span>&nbsp;<span class="string" id="8134235">`dot{}`</span><span class="op" id="8134242">}</span><span class="op" id="8134243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134246">{</span><span class="string" id="8134247">`^`</span><span class="op" id="8134250">,</span>&nbsp;<span class="string" id="8134252">`bol{}`</span><span class="op" id="8134259">}</span><span class="op" id="8134260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134263">{</span><span class="string" id="8134264">`$`</span><span class="op" id="8134267">,</span>&nbsp;<span class="string" id="8134269">`eol{}`</span><span class="op" id="8134276">}</span><span class="op" id="8134277">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134280">{</span><span class="string" id="8134281">`\|`</span><span class="op" id="8134285">,</span>&nbsp;<span class="string" id="8134287">`lit{|}`</span><span class="op" id="8134295">}</span><span class="op" id="8134296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134299">{</span><span class="string" id="8134300">`\(`</span><span class="op" id="8134304">,</span>&nbsp;<span class="string" id="8134306">`lit{(}`</span><span class="op" id="8134314">}</span><span class="op" id="8134315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134318">{</span><span class="string" id="8134319">`\)`</span><span class="op" id="8134323">,</span>&nbsp;<span class="string" id="8134325">`lit{)}`</span><span class="op" id="8134333">}</span><span class="op" id="8134334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134337">{</span><span class="string" id="8134338">`\*`</span><span class="op" id="8134342">,</span>&nbsp;<span class="string" id="8134344">`lit{*}`</span><span class="op" id="8134352">}</span><span class="op" id="8134353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134356">{</span><span class="string" id="8134357">`\+`</span><span class="op" id="8134361">,</span>&nbsp;<span class="string" id="8134363">`lit{+}`</span><span class="op" id="8134371">}</span><span class="op" id="8134372">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134375">{</span><span class="string" id="8134376">`\?`</span><span class="op" id="8134380">,</span>&nbsp;<span class="string" id="8134382">`lit{?}`</span><span class="op" id="8134390">}</span><span class="op" id="8134391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134394">{</span><span class="string" id="8134395">`{`</span><span class="op" id="8134398">,</span>&nbsp;<span class="string" id="8134400">`lit{{}`</span><span class="op" id="8134408">}</span><span class="op" id="8134409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134412">{</span><span class="string" id="8134413">`}`</span><span class="op" id="8134416">,</span>&nbsp;<span class="string" id="8134418">`lit{}}`</span><span class="op" id="8134426">}</span><span class="op" id="8134427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134430">{</span><span class="string" id="8134431">`\.`</span><span class="op" id="8134435">,</span>&nbsp;<span class="string" id="8134437">`lit{.}`</span><span class="op" id="8134445">}</span><span class="op" id="8134446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134449">{</span><span class="string" id="8134450">`\^`</span><span class="op" id="8134454">,</span>&nbsp;<span class="string" id="8134456">`lit{^}`</span><span class="op" id="8134464">}</span><span class="op" id="8134465">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134468">{</span><span class="string" id="8134469">`\$`</span><span class="op" id="8134473">,</span>&nbsp;<span class="string" id="8134475">`lit{$}`</span><span class="op" id="8134483">}</span><span class="op" id="8134484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134487">{</span><span class="string" id="8134488">`\\`</span><span class="op" id="8134492">,</span>&nbsp;<span class="string" id="8134494">`lit{\}`</span><span class="op" id="8134502">}</span><span class="op" id="8134503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134506">{</span><span class="string" id="8134507">`[ace]`</span><span class="op" id="8134514">,</span>&nbsp;<span class="string" id="8134516">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="8134536">}</span><span class="op" id="8134537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134540">{</span><span class="string" id="8134541">`[abc]`</span><span class="op" id="8134548">,</span>&nbsp;<span class="string" id="8134550">`cc{0x61-0x63}`</span><span class="op" id="8134565">}</span><span class="op" id="8134566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134569">{</span><span class="string" id="8134570">`[a-z]`</span><span class="op" id="8134577">,</span>&nbsp;<span class="string" id="8134579">`cc{0x61-0x7a}`</span><span class="op" id="8134594">}</span><span class="op" id="8134595">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134598">{</span><span class="string" id="8134599">`[a]`</span><span class="op" id="8134604">,</span>&nbsp;<span class="string" id="8134606">`lit{a}`</span><span class="op" id="8134614">}</span><span class="op" id="8134615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134618">{</span><span class="string" id="8134619">`\-`</span><span class="op" id="8134623">,</span>&nbsp;<span class="string" id="8134625">`lit{-}`</span><span class="op" id="8134633">}</span><span class="op" id="8134634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134637">{</span><span class="string" id="8134638">`-`</span><span class="op" id="8134641">,</span>&nbsp;<span class="string" id="8134643">`lit{-}`</span><span class="op" id="8134651">}</span><span class="op" id="8134652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134655">{</span><span class="string" id="8134656">`\_`</span><span class="op" id="8134660">,</span>&nbsp;<span class="string" id="8134662">`lit{_}`</span><span class="op" id="8134670">}</span><span class="op" id="8134671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134674">{</span><span class="string" id="8134675">`abc`</span><span class="op" id="8134680">,</span>&nbsp;<span class="string" id="8134682">`str{abc}`</span><span class="op" id="8134692">}</span><span class="op" id="8134693">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134696">{</span><span class="string" id="8134697">`abc|def`</span><span class="op" id="8134706">,</span>&nbsp;<span class="string" id="8134708">`alt{str{abc}str{def}}`</span><span class="op" id="8134731">}</span><span class="op" id="8134732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134735">{</span><span class="string" id="8134736">`abc|def|ghi`</span><span class="op" id="8134749">,</span>&nbsp;<span class="string" id="8134751">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="8134782">}</span><span class="op" id="8134783">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8134787">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134817">{</span><span class="string" id="8134818">`[[:lower:]]`</span><span class="op" id="8134831">,</span>&nbsp;<span class="string" id="8134833">`cc{0x61-0x7a}`</span><span class="op" id="8134848">}</span><span class="op" id="8134849">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134852">{</span><span class="string" id="8134853">`[a-z]`</span><span class="op" id="8134860">,</span>&nbsp;<span class="string" id="8134862">`cc{0x61-0x7a}`</span><span class="op" id="8134877">}</span><span class="op" id="8134878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134881">{</span><span class="string" id="8134882">`[^[:lower:]]`</span><span class="op" id="8134896">,</span>&nbsp;<span class="string" id="8134898">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="8134926">}</span><span class="op" id="8134927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134930">{</span><span class="string" id="8134931">`[[:^lower:]]`</span><span class="op" id="8134945">,</span>&nbsp;<span class="string" id="8134947">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="8134975">}</span><span class="op" id="8134976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134979">{</span><span class="string" id="8134980">`(?i)[[:lower:]]`</span><span class="op" id="8134997">,</span>&nbsp;<span class="string" id="8134999">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="8135037">}</span><span class="op" id="8135038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135041">{</span><span class="string" id="8135042">`(?i)[a-z]`</span><span class="op" id="8135053">,</span>&nbsp;<span class="string" id="8135055">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="8135093">}</span><span class="op" id="8135094">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135097">{</span><span class="string" id="8135098">`(?i)[^[:lower:]]`</span><span class="op" id="8135116">,</span>&nbsp;<span class="string" id="8135118">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="8135182">}</span><span class="op" id="8135183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135186">{</span><span class="string" id="8135187">`(?i)[[:^lower:]]`</span><span class="op" id="8135205">,</span>&nbsp;<span class="string" id="8135207">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="8135271">}</span><span class="op" id="8135272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135275">{</span><span class="string" id="8135276">`\d`</span><span class="op" id="8135280">,</span>&nbsp;<span class="string" id="8135282">`cc{0x30-0x39}`</span><span class="op" id="8135297">}</span><span class="op" id="8135298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135301">{</span><span class="string" id="8135302">`\D`</span><span class="op" id="8135306">,</span>&nbsp;<span class="string" id="8135308">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="8135336">}</span><span class="op" id="8135337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135340">{</span><span class="string" id="8135341">`\s`</span><span class="op" id="8135345">,</span>&nbsp;<span class="string" id="8135347">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="8135373">}</span><span class="op" id="8135374">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135377">{</span><span class="string" id="8135378">`\S`</span><span class="op" id="8135382">,</span>&nbsp;<span class="string" id="8135384">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="8135424">}</span><span class="op" id="8135425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135428">{</span><span class="string" id="8135429">`\w`</span><span class="op" id="8135433">,</span>&nbsp;<span class="string" id="8135435">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="8135475">}</span><span class="op" id="8135476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135479">{</span><span class="string" id="8135480">`\W`</span><span class="op" id="8135484">,</span>&nbsp;<span class="string" id="8135486">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="8135539">}</span><span class="op" id="8135540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135543">{</span><span class="string" id="8135544">`(?i)\w`</span><span class="op" id="8135552">,</span>&nbsp;<span class="string" id="8135554">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="8135607">}</span><span class="op" id="8135608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135611">{</span><span class="string" id="8135612">`(?i)\W`</span><span class="op" id="8135620">,</span>&nbsp;<span class="string" id="8135622">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="8135701">}</span><span class="op" id="8135702">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135705">{</span><span class="string" id="8135706">`[^\\]`</span><span class="op" id="8135713">,</span>&nbsp;<span class="string" id="8135715">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="8135743">}</span><span class="op" id="8135744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8135747">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8135791">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135838">{</span><span class="string" id="8135839">`\p{Braille}`</span><span class="op" id="8135852">,</span>&nbsp;<span class="string" id="8135854">`cc{0x2800-0x28ff}`</span><span class="op" id="8135873">}</span><span class="op" id="8135874">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135877">{</span><span class="string" id="8135878">`\P{Braille}`</span><span class="op" id="8135891">,</span>&nbsp;<span class="string" id="8135893">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="8135925">}</span><span class="op" id="8135926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135929">{</span><span class="string" id="8135930">`\p{^Braille}`</span><span class="op" id="8135944">,</span>&nbsp;<span class="string" id="8135946">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="8135978">}</span><span class="op" id="8135979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135982">{</span><span class="string" id="8135983">`\P{^Braille}`</span><span class="op" id="8135997">,</span>&nbsp;<span class="string" id="8135999">`cc{0x2800-0x28ff}`</span><span class="op" id="8136018">}</span><span class="op" id="8136019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136022">{</span><span class="string" id="8136023">`\pZ`</span><span class="op" id="8136028">,</span>&nbsp;<span class="string" id="8136030">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="8136101">}</span><span class="op" id="8136102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136105">{</span><span class="string" id="8136106">`[\p{Braille}]`</span><span class="op" id="8136121">,</span>&nbsp;<span class="string" id="8136123">`cc{0x2800-0x28ff}`</span><span class="op" id="8136142">}</span><span class="op" id="8136143">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136146">{</span><span class="string" id="8136147">`[\P{Braille}]`</span><span class="op" id="8136162">,</span>&nbsp;<span class="string" id="8136164">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="8136196">}</span><span class="op" id="8136197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136200">{</span><span class="string" id="8136201">`[\p{^Braille}]`</span><span class="op" id="8136217">,</span>&nbsp;<span class="string" id="8136219">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="8136251">}</span><span class="op" id="8136252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136255">{</span><span class="string" id="8136256">`[\P{^Braille}]`</span><span class="op" id="8136272">,</span>&nbsp;<span class="string" id="8136274">`cc{0x2800-0x28ff}`</span><span class="op" id="8136293">}</span><span class="op" id="8136294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136297">{</span><span class="string" id="8136298">`[\pZ]`</span><span class="op" id="8136305">,</span>&nbsp;<span class="string" id="8136307">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="8136378">}</span><span class="op" id="8136379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136382">{</span><span class="string" id="8136383">`\p{Lu}`</span><span class="op" id="8136391">,</span>&nbsp;<span class="ident" id="8136393">mkCharClass</span><span class="op" id="8136404">(</span><span class="ident" id="8136405">unicode</span><span class="op" id="8136412">.</span><span class="ident" id="8136413">IsUpper</span><span class="op" id="8136420">)</span><span class="op" id="8136421">}</span><span class="op" id="8136422">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136425">{</span><span class="string" id="8136426">`[\p{Lu}]`</span><span class="op" id="8136436">,</span>&nbsp;<span class="ident" id="8136438">mkCharClass</span><span class="op" id="8136449">(</span><span class="ident" id="8136450">unicode</span><span class="op" id="8136457">.</span><span class="ident" id="8136458">IsUpper</span><span class="op" id="8136465">)</span><span class="op" id="8136466">}</span><span class="op" id="8136467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136470">{</span><span class="string" id="8136471">`(?i)[\p{Lu}]`</span><span class="op" id="8136485">,</span>&nbsp;<span class="ident" id="8136487">mkCharClass</span><span class="op" id="8136498">(</span><span class="ident" id="8136499">isUpperFold</span><span class="op" id="8136510">)</span><span class="op" id="8136511">}</span><span class="op" id="8136512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136515">{</span><span class="string" id="8136516">`\p{Any}`</span><span class="op" id="8136525">,</span>&nbsp;<span class="string" id="8136527">`dot{}`</span><span class="op" id="8136534">}</span><span class="op" id="8136535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136538">{</span><span class="string" id="8136539">`\p{^Any}`</span><span class="op" id="8136549">,</span>&nbsp;<span class="string" id="8136551">`cc{}`</span><span class="op" id="8136557">}</span><span class="op" id="8136558">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8136562">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136578">{</span><span class="string" id="8136579">`[\012-\234]\141`</span><span class="op" id="8136596">,</span>&nbsp;<span class="string" id="8136598">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="8136623">}</span><span class="op" id="8136624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136627">{</span><span class="string" id="8136628">`[\x{41}-\x7a]\x61`</span><span class="op" id="8136647">,</span>&nbsp;<span class="string" id="8136649">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="8136675">}</span><span class="op" id="8136676">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8136680">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136722">{</span><span class="string" id="8136723">`a{,2}`</span><span class="op" id="8136730">,</span>&nbsp;<span class="string" id="8136732">`str{a{,2}}`</span><span class="op" id="8136744">}</span><span class="op" id="8136745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136748">{</span><span class="string" id="8136749">`\.\^\$\\`</span><span class="op" id="8136759">,</span>&nbsp;<span class="string" id="8136761">`str{.^$\}`</span><span class="op" id="8136772">}</span><span class="op" id="8136773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136776">{</span><span class="string" id="8136777">`[a-zABC]`</span><span class="op" id="8136787">,</span>&nbsp;<span class="string" id="8136789">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="8136814">}</span><span class="op" id="8136815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136818">{</span><span class="string" id="8136819">`[^a]`</span><span class="op" id="8136825">,</span>&nbsp;<span class="string" id="8136827">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="8136855">}</span><span class="op" id="8136856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136859">{</span><span class="string" id="8136860">`[α-ε☺]`</span><span class="op" id="8136872">,</span>&nbsp;<span class="string" id="8136874">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="8136898">}</span><span class="op" id="8136899">,</span>&nbsp;<span class="comment" id="8136901">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136911">{</span><span class="string" id="8136912">`a*{`</span><span class="op" id="8136917">,</span>&nbsp;<span class="string" id="8136919">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="8136944">}</span><span class="op" id="8136945">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8136949">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136970">{</span><span class="string" id="8136971">`(?:ab)*`</span><span class="op" id="8136980">,</span>&nbsp;<span class="string" id="8136982">`star{str{ab}}`</span><span class="op" id="8136997">}</span><span class="op" id="8136998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137001">{</span><span class="string" id="8137002">`(ab)*`</span><span class="op" id="8137009">,</span>&nbsp;<span class="string" id="8137011">`star{cap{str{ab}}}`</span><span class="op" id="8137031">}</span><span class="op" id="8137032">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137035">{</span><span class="string" id="8137036">`ab|cd`</span><span class="op" id="8137043">,</span>&nbsp;<span class="string" id="8137045">`alt{str{ab}str{cd}}`</span><span class="op" id="8137066">}</span><span class="op" id="8137067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137070">{</span><span class="string" id="8137071">`a(b|c)d`</span><span class="op" id="8137080">,</span>&nbsp;<span class="string" id="8137082">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="8137119">}</span><span class="op" id="8137120">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8137124">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137145">{</span><span class="string" id="8137146">`(?:a)`</span><span class="op" id="8137153">,</span>&nbsp;<span class="string" id="8137155">`lit{a}`</span><span class="op" id="8137163">}</span><span class="op" id="8137164">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137167">{</span><span class="string" id="8137168">`(?:ab)(?:cd)`</span><span class="op" id="8137182">,</span>&nbsp;<span class="string" id="8137184">`str{abcd}`</span><span class="op" id="8137195">}</span><span class="op" id="8137196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137199">{</span><span class="string" id="8137200">`(?:a+b+)(?:c+d+)`</span><span class="op" id="8137218">,</span>&nbsp;<span class="string" id="8137220">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="8137275">}</span><span class="op" id="8137276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137279">{</span><span class="string" id="8137280">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="8137301">,</span>&nbsp;<span class="string" id="8137303">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="8137358">}</span><span class="op" id="8137359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137362">{</span><span class="string" id="8137363">`(?:a|b)|(?:c|d)`</span><span class="op" id="8137380">,</span>&nbsp;<span class="string" id="8137382">`cc{0x61-0x64}`</span><span class="op" id="8137397">}</span><span class="op" id="8137398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137401">{</span><span class="string" id="8137402">`a|.`</span><span class="op" id="8137407">,</span>&nbsp;<span class="string" id="8137409">`dot{}`</span><span class="op" id="8137416">}</span><span class="op" id="8137417">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137420">{</span><span class="string" id="8137421">`.|a`</span><span class="op" id="8137426">,</span>&nbsp;<span class="string" id="8137428">`dot{}`</span><span class="op" id="8137435">}</span><span class="op" id="8137436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137439">{</span><span class="string" id="8137440">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="8137467">,</span>&nbsp;<span class="string" id="8137469">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="8137519">}</span><span class="op" id="8137520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137523">{</span><span class="string" id="8137524">`(?:[abc]|A|Z)`</span><span class="op" id="8137539">,</span>&nbsp;<span class="string" id="8137541">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="8137566">}</span><span class="op" id="8137567">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8137571">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137601">{</span><span class="string" id="8137602">`\Q+|*?{[\E`</span><span class="op" id="8137614">,</span>&nbsp;<span class="string" id="8137616">`str{+|*?{[}`</span><span class="op" id="8137629">}</span><span class="op" id="8137630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137633">{</span><span class="string" id="8137634">`\Q+\E+`</span><span class="op" id="8137642">,</span>&nbsp;<span class="string" id="8137644">`plus{lit{+}}`</span><span class="op" id="8137658">}</span><span class="op" id="8137659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137662">{</span><span class="string" id="8137663">`\Q\\E`</span><span class="op" id="8137670">,</span>&nbsp;<span class="string" id="8137672">`lit{\}`</span><span class="op" id="8137680">}</span><span class="op" id="8137681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137684">{</span><span class="string" id="8137685">`\Q\\\E`</span><span class="op" id="8137693">,</span>&nbsp;<span class="string" id="8137695">`str{\\}`</span><span class="op" id="8137704">}</span><span class="op" id="8137705">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8137709">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137733">{</span><span class="string" id="8137734">`(?m)^`</span><span class="op" id="8137741">,</span>&nbsp;<span class="string" id="8137743">`bol{}`</span><span class="op" id="8137750">}</span><span class="op" id="8137751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137754">{</span><span class="string" id="8137755">`(?m)$`</span><span class="op" id="8137762">,</span>&nbsp;<span class="string" id="8137764">`eol{}`</span><span class="op" id="8137771">}</span><span class="op" id="8137772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137775">{</span><span class="string" id="8137776">`(?-m)^`</span><span class="op" id="8137784">,</span>&nbsp;<span class="string" id="8137786">`bot{}`</span><span class="op" id="8137793">}</span><span class="op" id="8137794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137797">{</span><span class="string" id="8137798">`(?-m)$`</span><span class="op" id="8137806">,</span>&nbsp;<span class="string" id="8137808">`eot{}`</span><span class="op" id="8137815">}</span><span class="op" id="8137816">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137819">{</span><span class="string" id="8137820">`(?m)\A`</span><span class="op" id="8137828">,</span>&nbsp;<span class="string" id="8137830">`bot{}`</span><span class="op" id="8137837">}</span><span class="op" id="8137838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137841">{</span><span class="string" id="8137842">`(?m)\z`</span><span class="op" id="8137850">,</span>&nbsp;<span class="string" id="8137852">`eot{\z}`</span><span class="op" id="8137861">}</span><span class="op" id="8137862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137865">{</span><span class="string" id="8137866">`(?-m)\A`</span><span class="op" id="8137875">,</span>&nbsp;<span class="string" id="8137877">`bot{}`</span><span class="op" id="8137884">}</span><span class="op" id="8137885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137888">{</span><span class="string" id="8137889">`(?-m)\z`</span><span class="op" id="8137898">,</span>&nbsp;<span class="string" id="8137900">`eot{\z}`</span><span class="op" id="8137909">}</span><span class="op" id="8137910">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8137914">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8137938">{</span><span class="string" id="8137939">`(?P&lt;name&gt;a)`</span><span class="op" id="8137952">,</span>&nbsp;<span class="string" id="8137954">`cap{name:lit{a}}`</span><span class="op" id="8137972">}</span><span class="op" id="8137973">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8137977">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138002">{</span><span class="string" id="8138003">`[Aa]`</span><span class="op" id="8138009">,</span>&nbsp;<span class="string" id="8138011">`litfold{A}`</span><span class="op" id="8138023">}</span><span class="op" id="8138024">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138027">{</span><span class="string" id="8138028">`[\x{100}\x{101}]`</span><span class="op" id="8138046">,</span>&nbsp;<span class="string" id="8138048">`litfold{Ā}`</span><span class="op" id="8138061">}</span><span class="op" id="8138062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138065">{</span><span class="string" id="8138066">`[Δδ]`</span><span class="op" id="8138074">,</span>&nbsp;<span class="string" id="8138076">`litfold{Δ}`</span><span class="op" id="8138089">}</span><span class="op" id="8138090">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8138094">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138106">{</span><span class="string" id="8138107">`abcde`</span><span class="op" id="8138114">,</span>&nbsp;<span class="string" id="8138116">`str{abcde}`</span><span class="op" id="8138128">}</span><span class="op" id="8138129">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138132">{</span><span class="string" id="8138133">`[Aa][Bb]cd`</span><span class="op" id="8138145">,</span>&nbsp;<span class="string" id="8138147">`cat{strfold{AB}str{cd}}`</span><span class="op" id="8138172">}</span><span class="op" id="8138173">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8138177">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138192">{</span><span class="string" id="8138193">`abc|abd|aef|bcx|bcy`</span><span class="op" id="8138214">,</span>&nbsp;<span class="string" id="8138216">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="8138295">}</span><span class="op" id="8138296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138299">{</span><span class="string" id="8138300">`ax+y|ax+z|ay+w`</span><span class="op" id="8138316">,</span>&nbsp;<span class="string" id="8138318">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="8138389">}</span><span class="op" id="8138390">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8138394">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138409">{</span><span class="string" id="8138410">`(?:.)`</span><span class="op" id="8138417">,</span>&nbsp;<span class="string" id="8138419">`dot{}`</span><span class="op" id="8138426">}</span><span class="op" id="8138427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138430">{</span><span class="string" id="8138431">`(?:x|(?:xa))`</span><span class="op" id="8138445">,</span>&nbsp;<span class="string" id="8138447">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="8138476">}</span><span class="op" id="8138477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138480">{</span><span class="string" id="8138481">`(?:.|(?:.a))`</span><span class="op" id="8138495">,</span>&nbsp;<span class="string" id="8138497">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="8138525">}</span><span class="op" id="8138526">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138529">{</span><span class="string" id="8138530">`(?:A(?:A|a))`</span><span class="op" id="8138544">,</span>&nbsp;<span class="string" id="8138546">`cat{lit{A}litfold{A}}`</span><span class="op" id="8138569">}</span><span class="op" id="8138570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138573">{</span><span class="string" id="8138574">`(?:A|a)`</span><span class="op" id="8138583">,</span>&nbsp;<span class="string" id="8138585">`litfold{A}`</span><span class="op" id="8138597">}</span><span class="op" id="8138598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138601">{</span><span class="string" id="8138602">`A|(?:A|a)`</span><span class="op" id="8138613">,</span>&nbsp;<span class="string" id="8138615">`litfold{A}`</span><span class="op" id="8138627">}</span><span class="op" id="8138628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138631">{</span><span class="string" id="8138632">`(?s).`</span><span class="op" id="8138639">,</span>&nbsp;<span class="string" id="8138641">`dot{}`</span><span class="op" id="8138648">}</span><span class="op" id="8138649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138652">{</span><span class="string" id="8138653">`(?-s).`</span><span class="op" id="8138661">,</span>&nbsp;<span class="string" id="8138663">`dnl{}`</span><span class="op" id="8138670">}</span><span class="op" id="8138671">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138674">{</span><span class="string" id="8138675">`(?:(?:^).)`</span><span class="op" id="8138687">,</span>&nbsp;<span class="string" id="8138689">`cat{bol{}dot{}}`</span><span class="op" id="8138706">}</span><span class="op" id="8138707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138710">{</span><span class="string" id="8138711">`(?-s)(?:(?:^).)`</span><span class="op" id="8138728">,</span>&nbsp;<span class="string" id="8138730">`cat{bol{}dnl{}}`</span><span class="op" id="8138747">}</span><span class="op" id="8138748">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8138752">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138773">{</span><span class="string" id="8138774">`abc|abd`</span><span class="op" id="8138783">,</span>&nbsp;<span class="string" id="8138785">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="8138812">}</span><span class="op" id="8138813">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138816">{</span><span class="string" id="8138817">`a(?:b)c|abd`</span><span class="op" id="8138830">,</span>&nbsp;<span class="string" id="8138832">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="8138859">}</span><span class="op" id="8138860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138863">{</span><span class="string" id="8138864">`abc|abd|aef|bcx|bcy`</span><span class="op" id="8138885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8138889">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="8138943">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8138948">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="8138976">}</span><span class="op" id="8138977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8138980">{</span><span class="string" id="8138981">`abc|x|abd`</span><span class="op" id="8138992">,</span>&nbsp;<span class="string" id="8138994">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="8139023">}</span><span class="op" id="8139024">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139027">{</span><span class="string" id="8139028">`(?i)abc|ABD`</span><span class="op" id="8139041">,</span>&nbsp;<span class="string" id="8139043">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="8139084">}</span><span class="op" id="8139085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139088">{</span><span class="string" id="8139089">`[ab]c|[ab]d`</span><span class="op" id="8139102">,</span>&nbsp;<span class="string" id="8139104">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="8139137">}</span><span class="op" id="8139138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139141">{</span><span class="string" id="8139142">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="8139165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8139169">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="8139208">}</span><span class="op" id="8139209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139212">{</span><span class="string" id="8139213">`x{2}|x{2}[0-9]`</span><span class="op" id="8139229">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8139233">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="8139278">}</span><span class="op" id="8139279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139282">{</span><span class="string" id="8139283">`x{2}y|x{2}[0-9]y`</span><span class="op" id="8139301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8139305">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="8139362">}</span><span class="op" id="8139363">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8139367">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139390">{</span><span class="string" id="8139391">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="8139441">,</span>&nbsp;<span class="string" id="8139443">``</span><span class="op" id="8139445">}</span><span class="op" id="8139446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139449">{</span><span class="string" id="8139450">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="8139503">,</span>&nbsp;<span class="string" id="8139505">``</span><span class="op" id="8139507">}</span><span class="op" id="8139508">,</span><br>
<span class="lineno"></span><span class="op" id="8139510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8139513">const</span>&nbsp;<span class="ident" id="8139519">testFlags</span>&nbsp;<span class="op" id="8139529">=</span>&nbsp;<span class="ident" id="8139531">MatchNL</span>&nbsp;<span class="op" id="8139539">|</span>&nbsp;<span class="ident" id="8139541">PerlX</span>&nbsp;<span class="op" id="8139547">|</span>&nbsp;<span class="ident" id="8139549">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="8139564">func</span>&nbsp;<span class="ident" id="8139569">TestParseSimple</span><span class="op" id="8139584">(</span><span class="ident" id="8139585">t</span>&nbsp;<span class="op" id="8139587">*</span><span class="ident" id="8139588">testing</span><span class="op" id="8139595">.</span><span class="ident" id="8139596">T</span><span class="op" id="8139597">)</span>&nbsp;<span class="op" id="8139599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8139602">testParseDump</span><span class="op" id="8139615">(</span><span class="ident" id="8139616">t</span><span class="op" id="8139617">,</span>&nbsp;<span class="ident" id="8139619">parseTests</span><span class="op" id="8139629">,</span>&nbsp;<span class="ident" id="8139631">testFlags</span><span class="op" id="8139640">)</span><br>
<span class="lineno"></span><span class="op" id="8139642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="8139645">var</span>&nbsp;<span class="ident" id="8139649">foldcaseTests</span>&nbsp;<span class="op" id="8139663">=</span>&nbsp;<span class="op" id="8139665">[</span><span class="op" id="8139666">]</span><span class="ident" id="8139667">parseTest</span><span class="op" id="8139676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139679">{</span><span class="string" id="8139680">`AbCdE`</span><span class="op" id="8139687">,</span>&nbsp;<span class="string" id="8139689">`strfold{ABCDE}`</span><span class="op" id="8139705">}</span><span class="op" id="8139706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139709">{</span><span class="string" id="8139710">`[Aa]`</span><span class="op" id="8139716">,</span>&nbsp;<span class="string" id="8139718">`litfold{A}`</span><span class="op" id="8139730">}</span><span class="op" id="8139731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139734">{</span><span class="string" id="8139735">`a`</span><span class="op" id="8139738">,</span>&nbsp;<span class="string" id="8139740">`litfold{A}`</span><span class="op" id="8139752">}</span><span class="op" id="8139753">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8139757">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8139826">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139874">{</span><span class="string" id="8139875">`A[F-g]`</span><span class="op" id="8139883">,</span>&nbsp;<span class="string" id="8139885">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="8139928">}</span><span class="op" id="8139929">,</span>&nbsp;<span class="comment" id="8139931">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8139948">{</span><span class="string" id="8139949">`[[:upper:]]`</span><span class="op" id="8139962">,</span>&nbsp;<span class="string" id="8139964">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="8140002">}</span><span class="op" id="8140003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140006">{</span><span class="string" id="8140007">`[[:lower:]]`</span><span class="op" id="8140020">,</span>&nbsp;<span class="string" id="8140022">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="8140060">}</span><span class="op" id="8140061">,</span><br>
<span class="lineno">225</span><span class="op" id="8140063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8140066">func</span>&nbsp;<span class="ident" id="8140071">TestParseFoldCase</span><span class="op" id="8140088">(</span><span class="ident" id="8140089">t</span>&nbsp;<span class="op" id="8140091">*</span><span class="ident" id="8140092">testing</span><span class="op" id="8140099">.</span><span class="ident" id="8140100">T</span><span class="op" id="8140101">)</span>&nbsp;<span class="op" id="8140103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140106">testParseDump</span><span class="op" id="8140119">(</span><span class="ident" id="8140120">t</span><span class="op" id="8140121">,</span>&nbsp;<span class="ident" id="8140123">foldcaseTests</span><span class="op" id="8140136">,</span>&nbsp;<span class="ident" id="8140138">FoldCase</span><span class="op" id="8140146">)</span><br>
<span class="lineno"></span><span class="op" id="8140148">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8140151">var</span>&nbsp;<span class="ident" id="8140155">literalTests</span>&nbsp;<span class="op" id="8140168">=</span>&nbsp;<span class="op" id="8140170">[</span><span class="op" id="8140171">]</span><span class="ident" id="8140172">parseTest</span><span class="op" id="8140181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140184">{</span><span class="string" id="8140185">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="8140207">,</span>&nbsp;<span class="string" id="8140209">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="8140236">}</span><span class="op" id="8140237">,</span><br>
<span class="lineno"></span><span class="op" id="8140239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8140242">func</span>&nbsp;<span class="ident" id="8140247">TestParseLiteral</span><span class="op" id="8140263">(</span><span class="ident" id="8140264">t</span>&nbsp;<span class="op" id="8140266">*</span><span class="ident" id="8140267">testing</span><span class="op" id="8140274">.</span><span class="ident" id="8140275">T</span><span class="op" id="8140276">)</span>&nbsp;<span class="op" id="8140278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140281">testParseDump</span><span class="op" id="8140294">(</span><span class="ident" id="8140295">t</span><span class="op" id="8140296">,</span>&nbsp;<span class="ident" id="8140298">literalTests</span><span class="op" id="8140310">,</span>&nbsp;<span class="ident" id="8140312">Literal</span><span class="op" id="8140319">)</span><br>
<span class="lineno"></span><span class="op" id="8140321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8140324">var</span>&nbsp;<span class="ident" id="8140328">matchnlTests</span>&nbsp;<span class="op" id="8140341">=</span>&nbsp;<span class="op" id="8140343">[</span><span class="op" id="8140344">]</span><span class="ident" id="8140345">parseTest</span><span class="op" id="8140354">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140357">{</span><span class="string" id="8140358">`.`</span><span class="op" id="8140361">,</span>&nbsp;<span class="string" id="8140363">`dot{}`</span><span class="op" id="8140370">}</span><span class="op" id="8140371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140374">{</span><span class="string" id="8140375">&#34;\n&#34;</span><span class="op" id="8140379">,</span>&nbsp;<span class="string" id="8140381">&#34;lit{\n}&#34;</span><span class="op" id="8140390">}</span><span class="op" id="8140391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140394">{</span><span class="string" id="8140395">`[^a]`</span><span class="op" id="8140401">,</span>&nbsp;<span class="string" id="8140403">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="8140431">}</span><span class="op" id="8140432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140435">{</span><span class="string" id="8140436">`[a\n]`</span><span class="op" id="8140443">,</span>&nbsp;<span class="string" id="8140445">`cc{0xa&nbsp;0x61}`</span><span class="op" id="8140459">}</span><span class="op" id="8140460">,</span><br>
<span class="lineno"></span><span class="op" id="8140462">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="8140465">func</span>&nbsp;<span class="ident" id="8140470">TestParseMatchNL</span><span class="op" id="8140486">(</span><span class="ident" id="8140487">t</span>&nbsp;<span class="op" id="8140489">*</span><span class="ident" id="8140490">testing</span><span class="op" id="8140497">.</span><span class="ident" id="8140498">T</span><span class="op" id="8140499">)</span>&nbsp;<span class="op" id="8140501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140504">testParseDump</span><span class="op" id="8140517">(</span><span class="ident" id="8140518">t</span><span class="op" id="8140519">,</span>&nbsp;<span class="ident" id="8140521">matchnlTests</span><span class="op" id="8140533">,</span>&nbsp;<span class="ident" id="8140535">MatchNL</span><span class="op" id="8140542">)</span><br>
<span class="lineno"></span><span class="op" id="8140544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8140547">var</span>&nbsp;<span class="ident" id="8140551">nomatchnlTests</span>&nbsp;<span class="op" id="8140566">=</span>&nbsp;<span class="op" id="8140568">[</span><span class="op" id="8140569">]</span><span class="ident" id="8140570">parseTest</span><span class="op" id="8140579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140582">{</span><span class="string" id="8140583">`.`</span><span class="op" id="8140586">,</span>&nbsp;<span class="string" id="8140588">`dnl{}`</span><span class="op" id="8140595">}</span><span class="op" id="8140596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140599">{</span><span class="string" id="8140600">&#34;\n&#34;</span><span class="op" id="8140604">,</span>&nbsp;<span class="string" id="8140606">&#34;lit{\n}&#34;</span><span class="op" id="8140615">}</span><span class="op" id="8140616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140619">{</span><span class="string" id="8140620">`[^a]`</span><span class="op" id="8140626">,</span>&nbsp;<span class="string" id="8140628">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="8140664">}</span><span class="op" id="8140665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8140668">{</span><span class="string" id="8140669">`[a\n]`</span><span class="op" id="8140676">,</span>&nbsp;<span class="string" id="8140678">`cc{0xa&nbsp;0x61}`</span><span class="op" id="8140692">}</span><span class="op" id="8140693">,</span><br>
<span class="lineno">255</span><span class="op" id="8140695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8140698">func</span>&nbsp;<span class="ident" id="8140703">TestParseNoMatchNL</span><span class="op" id="8140721">(</span><span class="ident" id="8140722">t</span>&nbsp;<span class="op" id="8140724">*</span><span class="ident" id="8140725">testing</span><span class="op" id="8140732">.</span><span class="ident" id="8140733">T</span><span class="op" id="8140734">)</span>&nbsp;<span class="op" id="8140736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140739">testParseDump</span><span class="op" id="8140752">(</span><span class="ident" id="8140753">t</span><span class="op" id="8140754">,</span>&nbsp;<span class="ident" id="8140756">nomatchnlTests</span><span class="op" id="8140770">,</span>&nbsp;<span class="num" id="8140772">0</span><span class="op" id="8140773">)</span><br>
<span class="lineno"></span><span class="op" id="8140775">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="8140778">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="8140801">func</span>&nbsp;<span class="ident" id="8140806">testParseDump</span><span class="op" id="8140819">(</span><span class="ident" id="8140820">t</span>&nbsp;<span class="op" id="8140822">*</span><span class="ident" id="8140823">testing</span><span class="op" id="8140830">.</span><span class="ident" id="8140831">T</span><span class="op" id="8140832">,</span>&nbsp;<span class="ident" id="8140834">tests</span>&nbsp;<span class="op" id="8140840">[</span><span class="op" id="8140841">]</span><span class="ident" id="8140842">parseTest</span><span class="op" id="8140851">,</span>&nbsp;<span class="ident" id="8140853">flags</span>&nbsp;<span class="ident" id="8140859">Flags</span><span class="op" id="8140864">)</span>&nbsp;<span class="op" id="8140866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140869">for</span>&nbsp;<span class="ident" id="8140873">_</span><span class="op" id="8140874">,</span>&nbsp;<span class="ident" id="8140876">tt</span>&nbsp;<span class="op" id="8140879">:=</span>&nbsp;<span class="keyword" id="8140882">range</span>&nbsp;<span class="ident" id="8140888">tests</span>&nbsp;<span class="op" id="8140894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140898">re</span><span class="op" id="8140900">,</span>&nbsp;<span class="ident" id="8140902">err</span>&nbsp;<span class="op" id="8140906">:=</span>&nbsp;<span class="ident" id="8140909">Parse</span><span class="op" id="8140914">(</span><span class="ident" id="8140915">tt</span><span class="op" id="8140917">.</span><span class="ident" id="8140918">Regexp</span><span class="op" id="8140924">,</span>&nbsp;<span class="ident" id="8140926">flags</span><span class="op" id="8140931">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8140935">if</span>&nbsp;<span class="ident" id="8140938">err</span>&nbsp;<span class="op" id="8140942">!=</span>&nbsp;<span class="ident" id="8140945">nil</span>&nbsp;<span class="op" id="8140949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8140954">t</span><span class="op" id="8140955">.</span><span class="ident" id="8140956">Errorf</span><span class="op" id="8140962">(</span><span class="string" id="8140963">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="8140979">,</span>&nbsp;<span class="ident" id="8140981">tt</span><span class="op" id="8140983">.</span><span class="ident" id="8140984">Regexp</span><span class="op" id="8140990">,</span>&nbsp;<span class="ident" id="8140992">err</span><span class="op" id="8140995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141000">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141015">if</span>&nbsp;<span class="ident" id="8141018">tt</span><span class="op" id="8141020">.</span><span class="ident" id="8141021">Dump</span>&nbsp;<span class="op" id="8141026">==</span>&nbsp;<span class="string" id="8141029">&#34;&#34;</span>&nbsp;<span class="op" id="8141032">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8141037">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141080">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141095">d</span>&nbsp;<span class="op" id="8141097">:=</span>&nbsp;<span class="ident" id="8141100">dump</span><span class="op" id="8141104">(</span><span class="ident" id="8141105">re</span><span class="op" id="8141107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141111">if</span>&nbsp;<span class="ident" id="8141114">d</span>&nbsp;<span class="op" id="8141116">!=</span>&nbsp;<span class="ident" id="8141119">tt</span><span class="op" id="8141121">.</span><span class="ident" id="8141122">Dump</span>&nbsp;<span class="op" id="8141127">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141132">t</span><span class="op" id="8141133">.</span><span class="ident" id="8141134">Errorf</span><span class="op" id="8141140">(</span><span class="string" id="8141141">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8141175">,</span>&nbsp;<span class="ident" id="8141177">tt</span><span class="op" id="8141179">.</span><span class="ident" id="8141180">Regexp</span><span class="op" id="8141186">,</span>&nbsp;<span class="ident" id="8141188">d</span><span class="op" id="8141189">,</span>&nbsp;<span class="ident" id="8141191">tt</span><span class="op" id="8141193">.</span><span class="ident" id="8141194">Dump</span><span class="op" id="8141198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8141205">}</span><br>
<span class="lineno"></span><span class="op" id="8141207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="8141210">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="8141271">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="8141300">func</span>&nbsp;<span class="ident" id="8141305">dump</span><span class="op" id="8141309">(</span><span class="ident" id="8141310">re</span>&nbsp;<span class="op" id="8141313">*</span><span class="ident" id="8141314">Regexp</span><span class="op" id="8141320">)</span>&nbsp;<span class="builtintype" id="8141322">string</span>&nbsp;<span class="op" id="8141329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141332">var</span>&nbsp;<span class="ident" id="8141336">b</span>&nbsp;<span class="ident" id="8141338">bytes</span><span class="op" id="8141343">.</span><span class="ident" id="8141344">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141352">dumpRegexp</span><span class="op" id="8141362">(</span><span class="op" id="8141363">&amp;</span><span class="ident" id="8141364">b</span><span class="op" id="8141365">,</span>&nbsp;<span class="ident" id="8141367">re</span><span class="op" id="8141369">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8141372">return</span>&nbsp;<span class="ident" id="8141379">b</span><span class="op" id="8141380">.</span><span class="ident" id="8141381">String</span><span class="op" id="8141387">(</span><span class="op" id="8141388">)</span><br>
<span class="lineno"></span><span class="op" id="8141390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8141393">var</span>&nbsp;<span class="ident" id="8141397">opNames</span>&nbsp;<span class="op" id="8141405">=</span>&nbsp;<span class="op" id="8141407">[</span><span class="op" id="8141408">]</span><span class="builtintype" id="8141409">string</span><span class="op" id="8141415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141418">OpNoMatch</span><span class="op" id="8141427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141436">&#34;no&#34;</span><span class="op" id="8141440">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141443">OpEmptyMatch</span><span class="op" id="8141455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141461">&#34;emp&#34;</span><span class="op" id="8141466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141469">OpLiteral</span><span class="op" id="8141478">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141487">&#34;lit&#34;</span><span class="op" id="8141492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141495">OpCharClass</span><span class="op" id="8141506">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141513">&#34;cc&#34;</span><span class="op" id="8141517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141520">OpAnyCharNotNL</span><span class="op" id="8141534">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8141538">&#34;dnl&#34;</span><span class="op" id="8141543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141546">OpAnyChar</span><span class="op" id="8141555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141564">&#34;dot&#34;</span><span class="op" id="8141569">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141572">OpBeginLine</span><span class="op" id="8141583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141590">&#34;bol&#34;</span><span class="op" id="8141595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141598">OpEndLine</span><span class="op" id="8141607">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141616">&#34;eol&#34;</span><span class="op" id="8141621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141624">OpBeginText</span><span class="op" id="8141635">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141642">&#34;bot&#34;</span><span class="op" id="8141647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141650">OpEndText</span><span class="op" id="8141659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141668">&#34;eot&#34;</span><span class="op" id="8141673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141676">OpWordBoundary</span><span class="op" id="8141690">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8141694">&#34;wb&#34;</span><span class="op" id="8141698">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141701">OpNoWordBoundary</span><span class="op" id="8141717">:</span>&nbsp;<span class="string" id="8141719">&#34;nwb&#34;</span><span class="op" id="8141724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141727">OpCapture</span><span class="op" id="8141736">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141745">&#34;cap&#34;</span><span class="op" id="8141750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141753">OpStar</span><span class="op" id="8141759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141771">&#34;star&#34;</span><span class="op" id="8141777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141780">OpPlus</span><span class="op" id="8141786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141798">&#34;plus&#34;</span><span class="op" id="8141804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141807">OpQuest</span><span class="op" id="8141814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141825">&#34;que&#34;</span><span class="op" id="8141830">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141833">OpRepeat</span><span class="op" id="8141841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141851">&#34;rep&#34;</span><span class="op" id="8141856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141859">OpConcat</span><span class="op" id="8141867">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141877">&#34;cat&#34;</span><span class="op" id="8141882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8141885">OpAlternate</span><span class="op" id="8141896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8141903">&#34;alt&#34;</span><span class="op" id="8141908">,</span><br>
<span class="lineno"></span><span class="op" id="8141910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="8141913">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="8141989">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="8142065">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="8142103">func</span>&nbsp;<span class="ident" id="8142108">dumpRegexp</span><span class="op" id="8142118">(</span><span class="ident" id="8142119">b</span>&nbsp;<span class="op" id="8142121">*</span><span class="ident" id="8142122">bytes</span><span class="op" id="8142127">.</span><span class="ident" id="8142128">Buffer</span><span class="op" id="8142134">,</span>&nbsp;<span class="ident" id="8142136">re</span>&nbsp;<span class="op" id="8142139">*</span><span class="ident" id="8142140">Regexp</span><span class="op" id="8142146">)</span>&nbsp;<span class="op" id="8142148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142151">if</span>&nbsp;<span class="builtintype" id="8142154">int</span><span class="op" id="8142157">(</span><span class="ident" id="8142158">re</span><span class="op" id="8142160">.</span><span class="ident" id="8142161">Op</span><span class="op" id="8142163">)</span>&nbsp;<span class="op" id="8142165">&gt;=</span>&nbsp;<span class="builtinfunc" id="8142168">len</span><span class="op" id="8142171">(</span><span class="ident" id="8142172">opNames</span><span class="op" id="8142179">)</span>&nbsp;<span class="op" id="8142181">||</span>&nbsp;<span class="ident" id="8142184">opNames</span><span class="op" id="8142191">[</span><span class="ident" id="8142192">re</span><span class="op" id="8142194">.</span><span class="ident" id="8142195">Op</span><span class="op" id="8142197">]</span>&nbsp;<span class="op" id="8142199">==</span>&nbsp;<span class="string" id="8142202">&#34;&#34;</span>&nbsp;<span class="op" id="8142205">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142209">fmt</span><span class="op" id="8142212">.</span><span class="ident" id="8142213">Fprintf</span><span class="op" id="8142220">(</span><span class="ident" id="8142221">b</span><span class="op" id="8142222">,</span>&nbsp;<span class="string" id="8142224">&#34;op%d&#34;</span><span class="op" id="8142230">,</span>&nbsp;<span class="ident" id="8142232">re</span><span class="op" id="8142234">.</span><span class="ident" id="8142235">Op</span><span class="op" id="8142237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142240">}</span>&nbsp;<span class="keyword" id="8142242">else</span>&nbsp;<span class="op" id="8142247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142251">switch</span>&nbsp;<span class="ident" id="8142258">re</span><span class="op" id="8142260">.</span><span class="ident" id="8142261">Op</span>&nbsp;<span class="op" id="8142264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142268">default</span><span class="op" id="8142275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142280">b</span><span class="op" id="8142281">.</span><span class="ident" id="8142282">WriteString</span><span class="op" id="8142293">(</span><span class="ident" id="8142294">opNames</span><span class="op" id="8142301">[</span><span class="ident" id="8142302">re</span><span class="op" id="8142304">.</span><span class="ident" id="8142305">Op</span><span class="op" id="8142307">]</span><span class="op" id="8142308">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142312">case</span>&nbsp;<span class="ident" id="8142317">OpStar</span><span class="op" id="8142323">,</span>&nbsp;<span class="ident" id="8142325">OpPlus</span><span class="op" id="8142331">,</span>&nbsp;<span class="ident" id="8142333">OpQuest</span><span class="op" id="8142340">,</span>&nbsp;<span class="ident" id="8142342">OpRepeat</span><span class="op" id="8142350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142355">if</span>&nbsp;<span class="ident" id="8142358">re</span><span class="op" id="8142360">.</span><span class="ident" id="8142361">Flags</span><span class="op" id="8142366">&amp;</span><span class="ident" id="8142367">NonGreedy</span>&nbsp;<span class="op" id="8142377">!=</span>&nbsp;<span class="num" id="8142380">0</span>&nbsp;<span class="op" id="8142382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142388">b</span><span class="op" id="8142389">.</span><span class="ident" id="8142390">WriteByte</span><span class="op" id="8142399">(</span><span class="string" id="8142400">&#39;n&#39;</span><span class="op" id="8142403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142413">b</span><span class="op" id="8142414">.</span><span class="ident" id="8142415">WriteString</span><span class="op" id="8142426">(</span><span class="ident" id="8142427">opNames</span><span class="op" id="8142434">[</span><span class="ident" id="8142435">re</span><span class="op" id="8142437">.</span><span class="ident" id="8142438">Op</span><span class="op" id="8142440">]</span><span class="op" id="8142441">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142445">case</span>&nbsp;<span class="ident" id="8142450">OpLiteral</span><span class="op" id="8142459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142464">if</span>&nbsp;<span class="builtinfunc" id="8142467">len</span><span class="op" id="8142470">(</span><span class="ident" id="8142471">re</span><span class="op" id="8142473">.</span><span class="ident" id="8142474">Rune</span><span class="op" id="8142478">)</span>&nbsp;<span class="op" id="8142480">&gt;</span>&nbsp;<span class="num" id="8142482">1</span>&nbsp;<span class="op" id="8142484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142490">b</span><span class="op" id="8142491">.</span><span class="ident" id="8142492">WriteString</span><span class="op" id="8142503">(</span><span class="string" id="8142504">&#34;str&#34;</span><span class="op" id="8142509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142514">}</span>&nbsp;<span class="keyword" id="8142516">else</span>&nbsp;<span class="op" id="8142521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142527">b</span><span class="op" id="8142528">.</span><span class="ident" id="8142529">WriteString</span><span class="op" id="8142540">(</span><span class="string" id="8142541">&#34;lit&#34;</span><span class="op" id="8142546">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142556">if</span>&nbsp;<span class="ident" id="8142559">re</span><span class="op" id="8142561">.</span><span class="ident" id="8142562">Flags</span><span class="op" id="8142567">&amp;</span><span class="ident" id="8142568">FoldCase</span>&nbsp;<span class="op" id="8142577">!=</span>&nbsp;<span class="num" id="8142580">0</span>&nbsp;<span class="op" id="8142582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142588">for</span>&nbsp;<span class="ident" id="8142592">_</span><span class="op" id="8142593">,</span>&nbsp;<span class="ident" id="8142595">r</span>&nbsp;<span class="op" id="8142597">:=</span>&nbsp;<span class="keyword" id="8142600">range</span>&nbsp;<span class="ident" id="8142606">re</span><span class="op" id="8142608">.</span><span class="ident" id="8142609">Rune</span>&nbsp;<span class="op" id="8142614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142621">if</span>&nbsp;<span class="ident" id="8142624">unicode</span><span class="op" id="8142631">.</span><span class="ident" id="8142632">SimpleFold</span><span class="op" id="8142642">(</span><span class="ident" id="8142643">r</span><span class="op" id="8142644">)</span>&nbsp;<span class="op" id="8142646">!=</span>&nbsp;<span class="ident" id="8142649">r</span>&nbsp;<span class="op" id="8142651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142659">b</span><span class="op" id="8142660">.</span><span class="ident" id="8142661">WriteString</span><span class="op" id="8142672">(</span><span class="string" id="8142673">&#34;fold&#34;</span><span class="op" id="8142679">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142687">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142713">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142719">b</span><span class="op" id="8142720">.</span><span class="ident" id="8142721">WriteByte</span><span class="op" id="8142730">(</span><span class="string" id="8142731">&#39;{&#39;</span><span class="op" id="8142734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142737">switch</span>&nbsp;<span class="ident" id="8142744">re</span><span class="op" id="8142746">.</span><span class="ident" id="8142747">Op</span>&nbsp;<span class="op" id="8142750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142753">case</span>&nbsp;<span class="ident" id="8142758">OpEndText</span><span class="op" id="8142767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142771">if</span>&nbsp;<span class="ident" id="8142774">re</span><span class="op" id="8142776">.</span><span class="ident" id="8142777">Flags</span><span class="op" id="8142782">&amp;</span><span class="ident" id="8142783">WasDollar</span>&nbsp;<span class="op" id="8142793">==</span>&nbsp;<span class="num" id="8142796">0</span>&nbsp;<span class="op" id="8142798">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142803">b</span><span class="op" id="8142804">.</span><span class="ident" id="8142805">WriteString</span><span class="op" id="8142816">(</span><span class="string" id="8142817">`\z`</span><span class="op" id="8142821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142828">case</span>&nbsp;<span class="ident" id="8142833">OpLiteral</span><span class="op" id="8142842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142846">for</span>&nbsp;<span class="ident" id="8142850">_</span><span class="op" id="8142851">,</span>&nbsp;<span class="ident" id="8142853">r</span>&nbsp;<span class="op" id="8142855">:=</span>&nbsp;<span class="keyword" id="8142858">range</span>&nbsp;<span class="ident" id="8142864">re</span><span class="op" id="8142866">.</span><span class="ident" id="8142867">Rune</span>&nbsp;<span class="op" id="8142872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142877">b</span><span class="op" id="8142878">.</span><span class="ident" id="8142879">WriteRune</span><span class="op" id="8142888">(</span><span class="ident" id="8142889">r</span><span class="op" id="8142890">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142897">case</span>&nbsp;<span class="ident" id="8142902">OpConcat</span><span class="op" id="8142910">,</span>&nbsp;<span class="ident" id="8142912">OpAlternate</span><span class="op" id="8142923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142927">for</span>&nbsp;<span class="ident" id="8142931">_</span><span class="op" id="8142932">,</span>&nbsp;<span class="ident" id="8142934">sub</span>&nbsp;<span class="op" id="8142938">:=</span>&nbsp;<span class="keyword" id="8142941">range</span>&nbsp;<span class="ident" id="8142947">re</span><span class="op" id="8142949">.</span><span class="ident" id="8142950">Sub</span>&nbsp;<span class="op" id="8142954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8142959">dumpRegexp</span><span class="op" id="8142969">(</span><span class="ident" id="8142970">b</span><span class="op" id="8142971">,</span>&nbsp;<span class="ident" id="8142973">sub</span><span class="op" id="8142976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8142980">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8142983">case</span>&nbsp;<span class="ident" id="8142988">OpStar</span><span class="op" id="8142994">,</span>&nbsp;<span class="ident" id="8142996">OpPlus</span><span class="op" id="8143002">,</span>&nbsp;<span class="ident" id="8143004">OpQuest</span><span class="op" id="8143011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143015">dumpRegexp</span><span class="op" id="8143025">(</span><span class="ident" id="8143026">b</span><span class="op" id="8143027">,</span>&nbsp;<span class="ident" id="8143029">re</span><span class="op" id="8143031">.</span><span class="ident" id="8143032">Sub</span><span class="op" id="8143035">[</span><span class="num" id="8143036">0</span><span class="op" id="8143037">]</span><span class="op" id="8143038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143041">case</span>&nbsp;<span class="ident" id="8143046">OpRepeat</span><span class="op" id="8143054">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143058">fmt</span><span class="op" id="8143061">.</span><span class="ident" id="8143062">Fprintf</span><span class="op" id="8143069">(</span><span class="ident" id="8143070">b</span><span class="op" id="8143071">,</span>&nbsp;<span class="string" id="8143073">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="8143081">,</span>&nbsp;<span class="ident" id="8143083">re</span><span class="op" id="8143085">.</span><span class="ident" id="8143086">Min</span><span class="op" id="8143089">,</span>&nbsp;<span class="ident" id="8143091">re</span><span class="op" id="8143093">.</span><span class="ident" id="8143094">Max</span><span class="op" id="8143097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143101">dumpRegexp</span><span class="op" id="8143111">(</span><span class="ident" id="8143112">b</span><span class="op" id="8143113">,</span>&nbsp;<span class="ident" id="8143115">re</span><span class="op" id="8143117">.</span><span class="ident" id="8143118">Sub</span><span class="op" id="8143121">[</span><span class="num" id="8143122">0</span><span class="op" id="8143123">]</span><span class="op" id="8143124">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143127">case</span>&nbsp;<span class="ident" id="8143132">OpCapture</span><span class="op" id="8143141">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143145">if</span>&nbsp;<span class="ident" id="8143148">re</span><span class="op" id="8143150">.</span><span class="ident" id="8143151">Name</span>&nbsp;<span class="op" id="8143156">!=</span>&nbsp;<span class="string" id="8143159">&#34;&#34;</span>&nbsp;<span class="op" id="8143162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143167">b</span><span class="op" id="8143168">.</span><span class="ident" id="8143169">WriteString</span><span class="op" id="8143180">(</span><span class="ident" id="8143181">re</span><span class="op" id="8143183">.</span><span class="ident" id="8143184">Name</span><span class="op" id="8143188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143193">b</span><span class="op" id="8143194">.</span><span class="ident" id="8143195">WriteByte</span><span class="op" id="8143204">(</span><span class="string" id="8143205">&#39;:&#39;</span><span class="op" id="8143208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143212">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143216">dumpRegexp</span><span class="op" id="8143226">(</span><span class="ident" id="8143227">b</span><span class="op" id="8143228">,</span>&nbsp;<span class="ident" id="8143230">re</span><span class="op" id="8143232">.</span><span class="ident" id="8143233">Sub</span><span class="op" id="8143236">[</span><span class="num" id="8143237">0</span><span class="op" id="8143238">]</span><span class="op" id="8143239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143242">case</span>&nbsp;<span class="ident" id="8143247">OpCharClass</span><span class="op" id="8143258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143262">sep</span>&nbsp;<span class="op" id="8143266">:=</span>&nbsp;<span class="string" id="8143269">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143274">for</span>&nbsp;<span class="ident" id="8143278">i</span>&nbsp;<span class="op" id="8143280">:=</span>&nbsp;<span class="num" id="8143283">0</span><span class="op" id="8143284">;</span>&nbsp;<span class="ident" id="8143286">i</span>&nbsp;<span class="op" id="8143288">&lt;</span>&nbsp;<span class="builtinfunc" id="8143290">len</span><span class="op" id="8143293">(</span><span class="ident" id="8143294">re</span><span class="op" id="8143296">.</span><span class="ident" id="8143297">Rune</span><span class="op" id="8143301">)</span><span class="op" id="8143302">;</span>&nbsp;<span class="ident" id="8143304">i</span>&nbsp;<span class="op" id="8143306">+=</span>&nbsp;<span class="num" id="8143309">2</span>&nbsp;<span class="op" id="8143311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143316">b</span><span class="op" id="8143317">.</span><span class="ident" id="8143318">WriteString</span><span class="op" id="8143329">(</span><span class="ident" id="8143330">sep</span><span class="op" id="8143333">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143338">sep</span>&nbsp;<span class="op" id="8143342">=</span>&nbsp;<span class="string" id="8143344">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143351">lo</span><span class="op" id="8143353">,</span>&nbsp;<span class="ident" id="8143355">hi</span>&nbsp;<span class="op" id="8143358">:=</span>&nbsp;<span class="ident" id="8143361">re</span><span class="op" id="8143363">.</span><span class="ident" id="8143364">Rune</span><span class="op" id="8143368">[</span><span class="ident" id="8143369">i</span><span class="op" id="8143370">]</span><span class="op" id="8143371">,</span>&nbsp;<span class="ident" id="8143373">re</span><span class="op" id="8143375">.</span><span class="ident" id="8143376">Rune</span><span class="op" id="8143380">[</span><span class="ident" id="8143381">i</span><span class="op" id="8143382">+</span><span class="num" id="8143383">1</span><span class="op" id="8143384">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143389">if</span>&nbsp;<span class="ident" id="8143392">lo</span>&nbsp;<span class="op" id="8143395">==</span>&nbsp;<span class="ident" id="8143398">hi</span>&nbsp;<span class="op" id="8143401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143407">fmt</span><span class="op" id="8143410">.</span><span class="ident" id="8143411">Fprintf</span><span class="op" id="8143418">(</span><span class="ident" id="8143419">b</span><span class="op" id="8143420">,</span>&nbsp;<span class="string" id="8143422">&#34;%#x&#34;</span><span class="op" id="8143427">,</span>&nbsp;<span class="ident" id="8143429">lo</span><span class="op" id="8143431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143436">}</span>&nbsp;<span class="keyword" id="8143438">else</span>&nbsp;<span class="op" id="8143443">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143449">fmt</span><span class="op" id="8143452">.</span><span class="ident" id="8143453">Fprintf</span><span class="op" id="8143460">(</span><span class="ident" id="8143461">b</span><span class="op" id="8143462">,</span>&nbsp;<span class="string" id="8143464">&#34;%#x-%#x&#34;</span><span class="op" id="8143473">,</span>&nbsp;<span class="ident" id="8143475">lo</span><span class="op" id="8143477">,</span>&nbsp;<span class="ident" id="8143479">hi</span><span class="op" id="8143481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143496">b</span><span class="op" id="8143497">.</span><span class="ident" id="8143498">WriteByte</span><span class="op" id="8143507">(</span><span class="string" id="8143508">&#39;}&#39;</span><span class="op" id="8143511">)</span><br>
<span class="lineno">380</span><span class="op" id="8143513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143516">func</span>&nbsp;<span class="ident" id="8143521">mkCharClass</span><span class="op" id="8143532">(</span><span class="ident" id="8143533">f</span>&nbsp;<span class="keyword" id="8143535">func</span><span class="op" id="8143539">(</span><span class="builtintype" id="8143540">rune</span><span class="op" id="8143544">)</span>&nbsp;<span class="builtintype" id="8143546">bool</span><span class="op" id="8143550">)</span>&nbsp;<span class="builtintype" id="8143552">string</span>&nbsp;<span class="op" id="8143559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143562">re</span>&nbsp;<span class="op" id="8143565">:=</span>&nbsp;<span class="op" id="8143568">&amp;</span><span class="ident" id="8143569">Regexp</span><span class="op" id="8143575">{</span><span class="ident" id="8143576">Op</span><span class="op" id="8143578">:</span>&nbsp;<span class="ident" id="8143580">OpCharClass</span><span class="op" id="8143591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143594">lo</span>&nbsp;<span class="op" id="8143597">:=</span>&nbsp;<span class="builtintype" id="8143600">rune</span><span class="op" id="8143604">(</span><span class="op" id="8143605">-</span><span class="num" id="8143606">1</span><span class="op" id="8143607">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143610">for</span>&nbsp;<span class="ident" id="8143614">i</span>&nbsp;<span class="op" id="8143616">:=</span>&nbsp;<span class="builtintype" id="8143619">rune</span><span class="op" id="8143623">(</span><span class="num" id="8143624">0</span><span class="op" id="8143625">)</span><span class="op" id="8143626">;</span>&nbsp;<span class="ident" id="8143628">i</span>&nbsp;<span class="op" id="8143630">&lt;=</span>&nbsp;<span class="ident" id="8143633">unicode</span><span class="op" id="8143640">.</span><span class="ident" id="8143641">MaxRune</span><span class="op" id="8143648">;</span>&nbsp;<span class="ident" id="8143650">i</span><span class="op" id="8143651">++</span>&nbsp;<span class="op" id="8143654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143658">if</span>&nbsp;<span class="ident" id="8143661">f</span><span class="op" id="8143662">(</span><span class="ident" id="8143663">i</span><span class="op" id="8143664">)</span>&nbsp;<span class="op" id="8143666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143671">if</span>&nbsp;<span class="ident" id="8143674">lo</span>&nbsp;<span class="op" id="8143677">&lt;</span>&nbsp;<span class="num" id="8143679">0</span>&nbsp;<span class="op" id="8143681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143687">lo</span>&nbsp;<span class="op" id="8143690">=</span>&nbsp;<span class="ident" id="8143692">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143697">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143701">}</span>&nbsp;<span class="keyword" id="8143703">else</span>&nbsp;<span class="op" id="8143708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143713">if</span>&nbsp;<span class="ident" id="8143716">lo</span>&nbsp;<span class="op" id="8143719">&gt;=</span>&nbsp;<span class="num" id="8143722">0</span>&nbsp;<span class="op" id="8143724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143730">re</span><span class="op" id="8143732">.</span><span class="ident" id="8143733">Rune</span>&nbsp;<span class="op" id="8143738">=</span>&nbsp;<span class="builtinfunc" id="8143740">append</span><span class="op" id="8143746">(</span><span class="ident" id="8143747">re</span><span class="op" id="8143749">.</span><span class="ident" id="8143750">Rune</span><span class="op" id="8143754">,</span>&nbsp;<span class="ident" id="8143756">lo</span><span class="op" id="8143758">,</span>&nbsp;<span class="ident" id="8143760">i</span><span class="op" id="8143761">-</span><span class="num" id="8143762">1</span><span class="op" id="8143763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143769">lo</span>&nbsp;<span class="op" id="8143772">=</span>&nbsp;<span class="op" id="8143774">-</span><span class="num" id="8143775">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143780">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143790">if</span>&nbsp;<span class="ident" id="8143793">lo</span>&nbsp;<span class="op" id="8143796">&gt;=</span>&nbsp;<span class="num" id="8143799">0</span>&nbsp;<span class="op" id="8143801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143805">re</span><span class="op" id="8143807">.</span><span class="ident" id="8143808">Rune</span>&nbsp;<span class="op" id="8143813">=</span>&nbsp;<span class="builtinfunc" id="8143815">append</span><span class="op" id="8143821">(</span><span class="ident" id="8143822">re</span><span class="op" id="8143824">.</span><span class="ident" id="8143825">Rune</span><span class="op" id="8143829">,</span>&nbsp;<span class="ident" id="8143831">lo</span><span class="op" id="8143833">,</span>&nbsp;<span class="ident" id="8143835">unicode</span><span class="op" id="8143842">.</span><span class="ident" id="8143843">MaxRune</span><span class="op" id="8143850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143853">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143856">return</span>&nbsp;<span class="ident" id="8143863">dump</span><span class="op" id="8143867">(</span><span class="ident" id="8143868">re</span><span class="op" id="8143870">)</span><br>
<span class="lineno"></span><span class="op" id="8143872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8143875">func</span>&nbsp;<span class="ident" id="8143880">isUpperFold</span><span class="op" id="8143891">(</span><span class="ident" id="8143892">r</span>&nbsp;<span class="builtintype" id="8143894">rune</span><span class="op" id="8143898">)</span>&nbsp;<span class="builtintype" id="8143900">bool</span>&nbsp;<span class="op" id="8143905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143908">if</span>&nbsp;<span class="ident" id="8143911">unicode</span><span class="op" id="8143918">.</span><span class="ident" id="8143919">IsUpper</span><span class="op" id="8143926">(</span><span class="ident" id="8143927">r</span><span class="op" id="8143928">)</span>&nbsp;<span class="op" id="8143930">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143934">return</span>&nbsp;<span class="builtintype" id="8143941">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8143947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8143950">c</span>&nbsp;<span class="op" id="8143952">:=</span>&nbsp;<span class="ident" id="8143955">unicode</span><span class="op" id="8143962">.</span><span class="ident" id="8143963">SimpleFold</span><span class="op" id="8143973">(</span><span class="ident" id="8143974">r</span><span class="op" id="8143975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143978">for</span>&nbsp;<span class="ident" id="8143982">c</span>&nbsp;<span class="op" id="8143984">!=</span>&nbsp;<span class="ident" id="8143987">r</span>&nbsp;<span class="op" id="8143989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8143993">if</span>&nbsp;<span class="ident" id="8143996">unicode</span><span class="op" id="8144003">.</span><span class="ident" id="8144004">IsUpper</span><span class="op" id="8144011">(</span><span class="ident" id="8144012">c</span><span class="op" id="8144013">)</span>&nbsp;<span class="op" id="8144015">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144020">return</span>&nbsp;<span class="builtintype" id="8144027">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144038">c</span>&nbsp;<span class="op" id="8144040">=</span>&nbsp;<span class="ident" id="8144042">unicode</span><span class="op" id="8144049">.</span><span class="ident" id="8144050">SimpleFold</span><span class="op" id="8144060">(</span><span class="ident" id="8144061">c</span><span class="op" id="8144062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144068">return</span>&nbsp;<span class="builtintype" id="8144075">false</span><br>
<span class="lineno">415</span><span class="op" id="8144081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8144084">func</span>&nbsp;<span class="ident" id="8144089">TestFoldConstants</span><span class="op" id="8144106">(</span><span class="ident" id="8144107">t</span>&nbsp;<span class="op" id="8144109">*</span><span class="ident" id="8144110">testing</span><span class="op" id="8144117">.</span><span class="ident" id="8144118">T</span><span class="op" id="8144119">)</span>&nbsp;<span class="op" id="8144121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144124">last</span>&nbsp;<span class="op" id="8144129">:=</span>&nbsp;<span class="builtintype" id="8144132">rune</span><span class="op" id="8144136">(</span><span class="op" id="8144137">-</span><span class="num" id="8144138">1</span><span class="op" id="8144139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144142">for</span>&nbsp;<span class="ident" id="8144146">i</span>&nbsp;<span class="op" id="8144148">:=</span>&nbsp;<span class="builtintype" id="8144151">rune</span><span class="op" id="8144155">(</span><span class="num" id="8144156">0</span><span class="op" id="8144157">)</span><span class="op" id="8144158">;</span>&nbsp;<span class="ident" id="8144160">i</span>&nbsp;<span class="op" id="8144162">&lt;=</span>&nbsp;<span class="ident" id="8144165">unicode</span><span class="op" id="8144172">.</span><span class="ident" id="8144173">MaxRune</span><span class="op" id="8144180">;</span>&nbsp;<span class="ident" id="8144182">i</span><span class="op" id="8144183">++</span>&nbsp;<span class="op" id="8144186">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144190">if</span>&nbsp;<span class="ident" id="8144193">unicode</span><span class="op" id="8144200">.</span><span class="ident" id="8144201">SimpleFold</span><span class="op" id="8144211">(</span><span class="ident" id="8144212">i</span><span class="op" id="8144213">)</span>&nbsp;<span class="op" id="8144215">==</span>&nbsp;<span class="ident" id="8144218">i</span>&nbsp;<span class="op" id="8144220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144225">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144240">if</span>&nbsp;<span class="ident" id="8144243">last</span>&nbsp;<span class="op" id="8144248">==</span>&nbsp;<span class="op" id="8144251">-</span><span class="num" id="8144252">1</span>&nbsp;<span class="op" id="8144254">&amp;&amp;</span>&nbsp;<span class="ident" id="8144257">minFold</span>&nbsp;<span class="op" id="8144265">!=</span>&nbsp;<span class="ident" id="8144268">i</span>&nbsp;<span class="op" id="8144270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144275">t</span><span class="op" id="8144276">.</span><span class="ident" id="8144277">Errorf</span><span class="op" id="8144283">(</span><span class="string" id="8144284">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="8144311">,</span>&nbsp;<span class="ident" id="8144313">minFold</span><span class="op" id="8144320">,</span>&nbsp;<span class="ident" id="8144322">i</span><span class="op" id="8144323">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144331">last</span>&nbsp;<span class="op" id="8144336">=</span>&nbsp;<span class="ident" id="8144338">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144344">if</span>&nbsp;<span class="ident" id="8144347">maxFold</span>&nbsp;<span class="op" id="8144355">!=</span>&nbsp;<span class="ident" id="8144358">last</span>&nbsp;<span class="op" id="8144363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144367">t</span><span class="op" id="8144368">.</span><span class="ident" id="8144369">Errorf</span><span class="op" id="8144375">(</span><span class="string" id="8144376">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="8144403">,</span>&nbsp;<span class="ident" id="8144405">maxFold</span><span class="op" id="8144412">,</span>&nbsp;<span class="ident" id="8144414">last</span><span class="op" id="8144418">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144421">}</span><br>
<span class="lineno"></span><span class="op" id="8144423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8144426">func</span>&nbsp;<span class="ident" id="8144431">TestAppendRangeCollapse</span><span class="op" id="8144454">(</span><span class="ident" id="8144455">t</span>&nbsp;<span class="op" id="8144457">*</span><span class="ident" id="8144458">testing</span><span class="op" id="8144465">.</span><span class="ident" id="8144466">T</span><span class="op" id="8144467">)</span>&nbsp;<span class="op" id="8144469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8144472">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8144527">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8144589">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8144627">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144672">var</span>&nbsp;<span class="ident" id="8144676">r</span>&nbsp;<span class="op" id="8144678">[</span><span class="op" id="8144679">]</span><span class="builtintype" id="8144680">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144686">for</span>&nbsp;<span class="ident" id="8144690">i</span>&nbsp;<span class="op" id="8144692">:=</span>&nbsp;<span class="builtintype" id="8144695">rune</span><span class="op" id="8144699">(</span><span class="string" id="8144700">&#39;A&#39;</span><span class="op" id="8144703">)</span><span class="op" id="8144704">;</span>&nbsp;<span class="ident" id="8144706">i</span>&nbsp;<span class="op" id="8144708">&lt;=</span>&nbsp;<span class="string" id="8144711">&#39;Z&#39;</span><span class="op" id="8144714">;</span>&nbsp;<span class="ident" id="8144716">i</span><span class="op" id="8144717">++</span>&nbsp;<span class="op" id="8144720">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144724">r</span>&nbsp;<span class="op" id="8144726">=</span>&nbsp;<span class="ident" id="8144728">appendRange</span><span class="op" id="8144739">(</span><span class="ident" id="8144740">r</span><span class="op" id="8144741">,</span>&nbsp;<span class="ident" id="8144743">i</span><span class="op" id="8144744">,</span>&nbsp;<span class="ident" id="8144746">i</span><span class="op" id="8144747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144751">r</span>&nbsp;<span class="op" id="8144753">=</span>&nbsp;<span class="ident" id="8144755">appendRange</span><span class="op" id="8144766">(</span><span class="ident" id="8144767">r</span><span class="op" id="8144768">,</span>&nbsp;<span class="ident" id="8144770">i</span><span class="op" id="8144771">+</span><span class="string" id="8144772">&#39;a&#39;</span><span class="op" id="8144775">-</span><span class="string" id="8144776">&#39;A&#39;</span><span class="op" id="8144779">,</span>&nbsp;<span class="ident" id="8144781">i</span><span class="op" id="8144782">+</span><span class="string" id="8144783">&#39;a&#39;</span><span class="op" id="8144786">-</span><span class="string" id="8144787">&#39;A&#39;</span><span class="op" id="8144790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8144796">if</span>&nbsp;<span class="builtintype" id="8144799">string</span><span class="op" id="8144805">(</span><span class="ident" id="8144806">r</span><span class="op" id="8144807">)</span>&nbsp;<span class="op" id="8144809">!=</span>&nbsp;<span class="string" id="8144812">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="8144819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8144823">t</span><span class="op" id="8144824">.</span><span class="ident" id="8144825">Errorf</span><span class="op" id="8144831">(</span><span class="string" id="8144832">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="8144880">,</span>&nbsp;<span class="builtintype" id="8144882">string</span><span class="op" id="8144888">(</span><span class="ident" id="8144889">r</span><span class="op" id="8144890">)</span><span class="op" id="8144891">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8144894">}</span><br>
<span class="lineno"></span><span class="op" id="8144896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8144899">var</span>&nbsp;<span class="ident" id="8144903">invalidRegexps</span>&nbsp;<span class="op" id="8144918">=</span>&nbsp;<span class="op" id="8144920">[</span><span class="op" id="8144921">]</span><span class="builtintype" id="8144922">string</span><span class="op" id="8144928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144931">`(`</span><span class="op" id="8144934">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144937">`)`</span><span class="op" id="8144940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144943">`(a`</span><span class="op" id="8144947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144950">`a)`</span><span class="op" id="8144954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144957">`(a))`</span><span class="op" id="8144963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144966">`(a|b|`</span><span class="op" id="8144973">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144976">`a|b|)`</span><span class="op" id="8144983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144986">`(a|b|))`</span><span class="op" id="8144995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8144998">`(a|b`</span><span class="op" id="8145004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145007">`a|b)`</span><span class="op" id="8145013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145016">`(a|b))`</span><span class="op" id="8145024">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145027">`[a-z`</span><span class="op" id="8145033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145036">`([a-z)`</span><span class="op" id="8145044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145047">`[a-z)`</span><span class="op" id="8145054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145057">`([a-z]))`</span><span class="op" id="8145067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145070">`x{1001}`</span><span class="op" id="8145079">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145082">`x{9876543210}`</span><span class="op" id="8145097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145100">`x{2,1}`</span><span class="op" id="8145108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145111">`x{1,9876543210}`</span><span class="op" id="8145128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145131">&#34;\xff&#34;</span><span class="op" id="8145137">,</span>&nbsp;<span class="comment" id="8145139">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145157">&#34;[\xff]&#34;</span><span class="op" id="8145165">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145168">&#34;[\\\xff]&#34;</span><span class="op" id="8145178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145181">&#34;\\\xff&#34;</span><span class="op" id="8145189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145192">`(?P&lt;name&gt;a`</span><span class="op" id="8145204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145207">`(?P&lt;name&gt;`</span><span class="op" id="8145218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145221">`(?P&lt;name`</span><span class="op" id="8145231">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145234">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="8145246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145249">`(?P&lt;&gt;a)`</span><span class="op" id="8145258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145261">`[a-Z]`</span><span class="op" id="8145268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145271">`(?i)[a-Z]`</span><span class="op" id="8145282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145285">`a{100000}`</span><span class="op" id="8145296">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145299">`a{100000,}`</span><span class="op" id="8145311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145314">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="8145367">,</span><br>
<span class="lineno"></span><span class="op" id="8145369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8145372">var</span>&nbsp;<span class="ident" id="8145376">onlyPerl</span>&nbsp;<span class="op" id="8145385">=</span>&nbsp;<span class="op" id="8145387">[</span><span class="op" id="8145388">]</span><span class="builtintype" id="8145389">string</span><span class="op" id="8145395">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145398">`[a-b-c]`</span><span class="op" id="8145407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145410">`\Qabc\E`</span><span class="op" id="8145419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145422">`\Q*+?{[\E`</span><span class="op" id="8145433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145436">`\Q\\E`</span><span class="op" id="8145443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145446">`\Q\\\E`</span><span class="op" id="8145454">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145457">`\Q\\\\E`</span><span class="op" id="8145466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145469">`\Q\\\\\E`</span><span class="op" id="8145479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145482">`(?:a)`</span><span class="op" id="8145489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145492">`(?P&lt;name&gt;a)`</span><span class="op" id="8145505">,</span><br>
<span class="lineno"></span><span class="op" id="8145507">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="8145510">var</span>&nbsp;<span class="ident" id="8145514">onlyPOSIX</span>&nbsp;<span class="op" id="8145524">=</span>&nbsp;<span class="op" id="8145526">[</span><span class="op" id="8145527">]</span><span class="builtintype" id="8145528">string</span><span class="op" id="8145534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145537">&#34;a++&#34;</span><span class="op" id="8145542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145545">&#34;a**&#34;</span><span class="op" id="8145550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145553">&#34;a?*&#34;</span><span class="op" id="8145558">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145561">&#34;a+*&#34;</span><span class="op" id="8145566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145569">&#34;a{1}*&#34;</span><span class="op" id="8145576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8145579">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="8145592">,</span><br>
<span class="lineno"></span><span class="op" id="8145594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="8145597">func</span>&nbsp;<span class="ident" id="8145602">TestParseInvalidRegexps</span><span class="op" id="8145625">(</span><span class="ident" id="8145626">t</span>&nbsp;<span class="op" id="8145628">*</span><span class="ident" id="8145629">testing</span><span class="op" id="8145636">.</span><span class="ident" id="8145637">T</span><span class="op" id="8145638">)</span>&nbsp;<span class="op" id="8145640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145643">for</span>&nbsp;<span class="ident" id="8145647">_</span><span class="op" id="8145648">,</span>&nbsp;<span class="ident" id="8145650">regexp</span>&nbsp;<span class="op" id="8145657">:=</span>&nbsp;<span class="keyword" id="8145660">range</span>&nbsp;<span class="ident" id="8145666">invalidRegexps</span>&nbsp;<span class="op" id="8145681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145685">if</span>&nbsp;<span class="ident" id="8145688">re</span><span class="op" id="8145690">,</span>&nbsp;<span class="ident" id="8145692">err</span>&nbsp;<span class="op" id="8145696">:=</span>&nbsp;<span class="ident" id="8145699">Parse</span><span class="op" id="8145704">(</span><span class="ident" id="8145705">regexp</span><span class="op" id="8145711">,</span>&nbsp;<span class="ident" id="8145713">Perl</span><span class="op" id="8145717">)</span><span class="op" id="8145718">;</span>&nbsp;<span class="ident" id="8145720">err</span>&nbsp;<span class="op" id="8145724">==</span>&nbsp;<span class="ident" id="8145727">nil</span>&nbsp;<span class="op" id="8145731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145736">t</span><span class="op" id="8145737">.</span><span class="ident" id="8145738">Errorf</span><span class="op" id="8145744">(</span><span class="string" id="8145745">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="8145788">,</span>&nbsp;<span class="ident" id="8145790">regexp</span><span class="op" id="8145796">,</span>&nbsp;<span class="ident" id="8145798">dump</span><span class="op" id="8145802">(</span><span class="ident" id="8145803">re</span><span class="op" id="8145805">)</span><span class="op" id="8145806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145810">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145814">if</span>&nbsp;<span class="ident" id="8145817">re</span><span class="op" id="8145819">,</span>&nbsp;<span class="ident" id="8145821">err</span>&nbsp;<span class="op" id="8145825">:=</span>&nbsp;<span class="ident" id="8145828">Parse</span><span class="op" id="8145833">(</span><span class="ident" id="8145834">regexp</span><span class="op" id="8145840">,</span>&nbsp;<span class="ident" id="8145842">POSIX</span><span class="op" id="8145847">)</span><span class="op" id="8145848">;</span>&nbsp;<span class="ident" id="8145850">err</span>&nbsp;<span class="op" id="8145854">==</span>&nbsp;<span class="ident" id="8145857">nil</span>&nbsp;<span class="op" id="8145861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8145866">t</span><span class="op" id="8145867">.</span><span class="ident" id="8145868">Errorf</span><span class="op" id="8145874">(</span><span class="string" id="8145875">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="8145919">,</span>&nbsp;<span class="ident" id="8145921">regexp</span><span class="op" id="8145927">,</span>&nbsp;<span class="ident" id="8145929">dump</span><span class="op" id="8145933">(</span><span class="ident" id="8145934">re</span><span class="op" id="8145936">)</span><span class="op" id="8145937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8145944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145947">for</span>&nbsp;<span class="ident" id="8145951">_</span><span class="op" id="8145952">,</span>&nbsp;<span class="ident" id="8145954">regexp</span>&nbsp;<span class="op" id="8145961">:=</span>&nbsp;<span class="keyword" id="8145964">range</span>&nbsp;<span class="ident" id="8145970">onlyPerl</span>&nbsp;<span class="op" id="8145979">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8145983">if</span>&nbsp;<span class="ident" id="8145986">_</span><span class="op" id="8145987">,</span>&nbsp;<span class="ident" id="8145989">err</span>&nbsp;<span class="op" id="8145993">:=</span>&nbsp;<span class="ident" id="8145996">Parse</span><span class="op" id="8146001">(</span><span class="ident" id="8146002">regexp</span><span class="op" id="8146008">,</span>&nbsp;<span class="ident" id="8146010">Perl</span><span class="op" id="8146014">)</span><span class="op" id="8146015">;</span>&nbsp;<span class="ident" id="8146017">err</span>&nbsp;<span class="op" id="8146021">!=</span>&nbsp;<span class="ident" id="8146024">nil</span>&nbsp;<span class="op" id="8146028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146033">t</span><span class="op" id="8146034">.</span><span class="ident" id="8146035">Errorf</span><span class="op" id="8146041">(</span><span class="string" id="8146042">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="8146064">,</span>&nbsp;<span class="ident" id="8146066">regexp</span><span class="op" id="8146072">,</span>&nbsp;<span class="ident" id="8146074">err</span><span class="op" id="8146077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146085">if</span>&nbsp;<span class="ident" id="8146088">re</span><span class="op" id="8146090">,</span>&nbsp;<span class="ident" id="8146092">err</span>&nbsp;<span class="op" id="8146096">:=</span>&nbsp;<span class="ident" id="8146099">Parse</span><span class="op" id="8146104">(</span><span class="ident" id="8146105">regexp</span><span class="op" id="8146111">,</span>&nbsp;<span class="ident" id="8146113">POSIX</span><span class="op" id="8146118">)</span><span class="op" id="8146119">;</span>&nbsp;<span class="ident" id="8146121">err</span>&nbsp;<span class="op" id="8146125">==</span>&nbsp;<span class="ident" id="8146128">nil</span>&nbsp;<span class="op" id="8146132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146137">t</span><span class="op" id="8146138">.</span><span class="ident" id="8146139">Errorf</span><span class="op" id="8146145">(</span><span class="string" id="8146146">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="8146190">,</span>&nbsp;<span class="ident" id="8146192">regexp</span><span class="op" id="8146198">,</span>&nbsp;<span class="ident" id="8146200">dump</span><span class="op" id="8146204">(</span><span class="ident" id="8146205">re</span><span class="op" id="8146207">)</span><span class="op" id="8146208">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146218">for</span>&nbsp;<span class="ident" id="8146222">_</span><span class="op" id="8146223">,</span>&nbsp;<span class="ident" id="8146225">regexp</span>&nbsp;<span class="op" id="8146232">:=</span>&nbsp;<span class="keyword" id="8146235">range</span>&nbsp;<span class="ident" id="8146241">onlyPOSIX</span>&nbsp;<span class="op" id="8146251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146255">if</span>&nbsp;<span class="ident" id="8146258">re</span><span class="op" id="8146260">,</span>&nbsp;<span class="ident" id="8146262">err</span>&nbsp;<span class="op" id="8146266">:=</span>&nbsp;<span class="ident" id="8146269">Parse</span><span class="op" id="8146274">(</span><span class="ident" id="8146275">regexp</span><span class="op" id="8146281">,</span>&nbsp;<span class="ident" id="8146283">Perl</span><span class="op" id="8146287">)</span><span class="op" id="8146288">;</span>&nbsp;<span class="ident" id="8146290">err</span>&nbsp;<span class="op" id="8146294">==</span>&nbsp;<span class="ident" id="8146297">nil</span>&nbsp;<span class="op" id="8146301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146306">t</span><span class="op" id="8146307">.</span><span class="ident" id="8146308">Errorf</span><span class="op" id="8146314">(</span><span class="string" id="8146315">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="8146358">,</span>&nbsp;<span class="ident" id="8146360">regexp</span><span class="op" id="8146366">,</span>&nbsp;<span class="ident" id="8146368">dump</span><span class="op" id="8146372">(</span><span class="ident" id="8146373">re</span><span class="op" id="8146375">)</span><span class="op" id="8146376">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146384">if</span>&nbsp;<span class="ident" id="8146387">_</span><span class="op" id="8146388">,</span>&nbsp;<span class="ident" id="8146390">err</span>&nbsp;<span class="op" id="8146394">:=</span>&nbsp;<span class="ident" id="8146397">Parse</span><span class="op" id="8146402">(</span><span class="ident" id="8146403">regexp</span><span class="op" id="8146409">,</span>&nbsp;<span class="ident" id="8146411">POSIX</span><span class="op" id="8146416">)</span><span class="op" id="8146417">;</span>&nbsp;<span class="ident" id="8146419">err</span>&nbsp;<span class="op" id="8146423">!=</span>&nbsp;<span class="ident" id="8146426">nil</span>&nbsp;<span class="op" id="8146430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146435">t</span><span class="op" id="8146436">.</span><span class="ident" id="8146437">Errorf</span><span class="op" id="8146443">(</span><span class="string" id="8146444">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="8146467">,</span>&nbsp;<span class="ident" id="8146469">regexp</span><span class="op" id="8146475">,</span>&nbsp;<span class="ident" id="8146477">err</span><span class="op" id="8146480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146487">}</span><br>
<span class="lineno">530</span><span class="op" id="8146489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8146492">func</span>&nbsp;<span class="ident" id="8146497">TestToStringEquivalentParse</span><span class="op" id="8146524">(</span><span class="ident" id="8146525">t</span>&nbsp;<span class="op" id="8146527">*</span><span class="ident" id="8146528">testing</span><span class="op" id="8146535">.</span><span class="ident" id="8146536">T</span><span class="op" id="8146537">)</span>&nbsp;<span class="op" id="8146539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146542">for</span>&nbsp;<span class="ident" id="8146546">_</span><span class="op" id="8146547">,</span>&nbsp;<span class="ident" id="8146549">tt</span>&nbsp;<span class="op" id="8146552">:=</span>&nbsp;<span class="keyword" id="8146555">range</span>&nbsp;<span class="ident" id="8146561">parseTests</span>&nbsp;<span class="op" id="8146572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146576">re</span><span class="op" id="8146578">,</span>&nbsp;<span class="ident" id="8146580">err</span>&nbsp;<span class="op" id="8146584">:=</span>&nbsp;<span class="ident" id="8146587">Parse</span><span class="op" id="8146592">(</span><span class="ident" id="8146593">tt</span><span class="op" id="8146595">.</span><span class="ident" id="8146596">Regexp</span><span class="op" id="8146602">,</span>&nbsp;<span class="ident" id="8146604">testFlags</span><span class="op" id="8146613">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146617">if</span>&nbsp;<span class="ident" id="8146620">err</span>&nbsp;<span class="op" id="8146624">!=</span>&nbsp;<span class="ident" id="8146627">nil</span>&nbsp;<span class="op" id="8146631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146636">t</span><span class="op" id="8146637">.</span><span class="ident" id="8146638">Errorf</span><span class="op" id="8146644">(</span><span class="string" id="8146645">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="8146661">,</span>&nbsp;<span class="ident" id="8146663">tt</span><span class="op" id="8146665">.</span><span class="ident" id="8146666">Regexp</span><span class="op" id="8146672">,</span>&nbsp;<span class="ident" id="8146674">err</span><span class="op" id="8146677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146682">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146697">if</span>&nbsp;<span class="ident" id="8146700">tt</span><span class="op" id="8146702">.</span><span class="ident" id="8146703">Dump</span>&nbsp;<span class="op" id="8146708">==</span>&nbsp;<span class="string" id="8146711">&#34;&#34;</span>&nbsp;<span class="op" id="8146714">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8146719">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146762">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146777">d</span>&nbsp;<span class="op" id="8146779">:=</span>&nbsp;<span class="ident" id="8146782">dump</span><span class="op" id="8146786">(</span><span class="ident" id="8146787">re</span><span class="op" id="8146789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146793">if</span>&nbsp;<span class="ident" id="8146796">d</span>&nbsp;<span class="op" id="8146798">!=</span>&nbsp;<span class="ident" id="8146801">tt</span><span class="op" id="8146803">.</span><span class="ident" id="8146804">Dump</span>&nbsp;<span class="op" id="8146809">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146814">t</span><span class="op" id="8146815">.</span><span class="ident" id="8146816">Errorf</span><span class="op" id="8146822">(</span><span class="string" id="8146823">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8146857">,</span>&nbsp;<span class="ident" id="8146859">tt</span><span class="op" id="8146861">.</span><span class="ident" id="8146862">Regexp</span><span class="op" id="8146868">,</span>&nbsp;<span class="ident" id="8146870">d</span><span class="op" id="8146871">,</span>&nbsp;<span class="ident" id="8146873">tt</span><span class="op" id="8146875">.</span><span class="ident" id="8146876">Dump</span><span class="op" id="8146880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146885">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8146896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8146901">s</span>&nbsp;<span class="op" id="8146903">:=</span>&nbsp;<span class="ident" id="8146906">re</span><span class="op" id="8146908">.</span><span class="ident" id="8146909">String</span><span class="op" id="8146915">(</span><span class="op" id="8146916">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8146920">if</span>&nbsp;<span class="ident" id="8146923">s</span>&nbsp;<span class="op" id="8146925">!=</span>&nbsp;<span class="ident" id="8146928">tt</span><span class="op" id="8146930">.</span><span class="ident" id="8146931">Regexp</span>&nbsp;<span class="op" id="8146938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8146943">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8146996">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8147044">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8147104">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8147155">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147211">nre</span><span class="op" id="8147214">,</span>&nbsp;<span class="ident" id="8147216">err</span>&nbsp;<span class="op" id="8147220">:=</span>&nbsp;<span class="ident" id="8147223">Parse</span><span class="op" id="8147228">(</span><span class="ident" id="8147229">s</span><span class="op" id="8147230">,</span>&nbsp;<span class="ident" id="8147232">testFlags</span><span class="op" id="8147241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147246">if</span>&nbsp;<span class="ident" id="8147249">err</span>&nbsp;<span class="op" id="8147253">!=</span>&nbsp;<span class="ident" id="8147256">nil</span>&nbsp;<span class="op" id="8147260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147266">t</span><span class="op" id="8147267">.</span><span class="ident" id="8147268">Errorf</span><span class="op" id="8147274">(</span><span class="string" id="8147275">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="8147306">,</span>&nbsp;<span class="ident" id="8147308">tt</span><span class="op" id="8147310">.</span><span class="ident" id="8147311">Regexp</span><span class="op" id="8147317">,</span>&nbsp;<span class="ident" id="8147319">s</span><span class="op" id="8147320">,</span>&nbsp;<span class="ident" id="8147322">err</span><span class="op" id="8147325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147331">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147348">nd</span>&nbsp;<span class="op" id="8147351">:=</span>&nbsp;<span class="ident" id="8147354">dump</span><span class="op" id="8147358">(</span><span class="ident" id="8147359">nre</span><span class="op" id="8147362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147367">if</span>&nbsp;<span class="ident" id="8147370">d</span>&nbsp;<span class="op" id="8147372">!=</span>&nbsp;<span class="ident" id="8147375">nd</span>&nbsp;<span class="op" id="8147378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147384">t</span><span class="op" id="8147385">.</span><span class="ident" id="8147386">Errorf</span><span class="op" id="8147392">(</span><span class="string" id="8147393">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="8147424">,</span>&nbsp;<span class="ident" id="8147426">tt</span><span class="op" id="8147428">.</span><span class="ident" id="8147429">Regexp</span><span class="op" id="8147435">,</span>&nbsp;<span class="ident" id="8147437">s</span><span class="op" id="8147438">,</span>&nbsp;<span class="ident" id="8147440">d</span><span class="op" id="8147441">,</span>&nbsp;<span class="ident" id="8147443">nd</span><span class="op" id="8147445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147450">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147456">ns</span>&nbsp;<span class="op" id="8147459">:=</span>&nbsp;<span class="ident" id="8147462">nre</span><span class="op" id="8147465">.</span><span class="ident" id="8147466">String</span><span class="op" id="8147472">(</span><span class="op" id="8147473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8147478">if</span>&nbsp;<span class="ident" id="8147481">s</span>&nbsp;<span class="op" id="8147483">!=</span>&nbsp;<span class="ident" id="8147486">ns</span>&nbsp;<span class="op" id="8147489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8147495">t</span><span class="op" id="8147496">.</span><span class="ident" id="8147497">Errorf</span><span class="op" id="8147503">(</span><span class="string" id="8147504">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="8147530">,</span>&nbsp;<span class="ident" id="8147532">tt</span><span class="op" id="8147534">.</span><span class="ident" id="8147535">Regexp</span><span class="op" id="8147541">,</span>&nbsp;<span class="ident" id="8147543">s</span><span class="op" id="8147544">,</span>&nbsp;<span class="ident" id="8147546">ns</span><span class="op" id="8147548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147553">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8147560">}</span><br>
<span class="lineno"></span><span class="op" id="8147562">}</span>
</div>
</body>
</html>
