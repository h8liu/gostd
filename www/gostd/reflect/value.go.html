<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2722281">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2722336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2722390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2722441">package</span>&nbsp;<span class="ident" id="2722449">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2722458">import</span>&nbsp;<span class="op" id="2722465">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2722468">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2722476">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2722487">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2722496">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2722499">const</span>&nbsp;<span class="ident" id="2722505">ptrSize</span>&nbsp;<span class="op" id="2722513">=</span>&nbsp;<span class="ident" id="2722515">unsafe</span><span class="op" id="2722521">.</span><span class="ident" id="2722522">Sizeof</span><span class="op" id="2722528">(</span><span class="op" id="2722529">(</span><span class="op" id="2722530">*</span><span class="builtintype" id="2722531">byte</span><span class="op" id="2722535">)</span><span class="op" id="2722536">(</span><span class="ident" id="2722537">nil</span><span class="op" id="2722540">)</span><span class="op" id="2722541">)</span><br>
<span class="lineno"></span><span class="keyword" id="2722543">const</span>&nbsp;<span class="ident" id="2722549">cannotSet</span>&nbsp;<span class="op" id="2722559">=</span>&nbsp;<span class="string" id="2722561">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2722619">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2722671">//</span><br>
<span class="lineno"></span><span class="comment" id="2722674">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2722738">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2722797">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2722857">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2722909">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2722971">//</span><br>
<span class="lineno"></span><span class="comment" id="2722974">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2723013">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2723083">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2723160">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2723221">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2723289">//</span><br>
<span class="lineno">30</span><span class="comment" id="2723292">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2723365">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2723436">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2723458">type</span>&nbsp;<span class="ident" id="2723463">Value</span>&nbsp;<span class="keyword" id="2723469">struct</span>&nbsp;<span class="op" id="2723476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723479">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2723539">typ</span>&nbsp;<span class="op" id="2723543">*</span><span class="ident" id="2723544">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723552">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723618">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2723684">ptr</span>&nbsp;<span class="ident" id="2723688">unsafe</span><span class="op" id="2723694">.</span><span class="ident" id="2723695">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723705">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723746">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723781">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723839">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723888">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723942">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723981">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724032">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724086">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724153">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724223">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724286">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724293">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724351">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724420">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724487">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724555">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2724586">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2724589">type</span>&nbsp;<span class="ident" id="2724594">flag</span>&nbsp;<span class="builtintype" id="2724599">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2724608">const</span>&nbsp;<span class="op" id="2724614">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724617">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2724638">=</span>&nbsp;<span class="num" id="2724640">5</span>&nbsp;<span class="comment" id="2724642">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724665">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2724681">flag</span>&nbsp;<span class="op" id="2724686">=</span>&nbsp;<span class="num" id="2724688">1</span><span class="op" id="2724689">&lt;&lt;</span><span class="ident" id="2724691">flagKindWidth</span>&nbsp;<span class="op" id="2724705">-</span>&nbsp;<span class="num" id="2724707">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724710">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2724726">flag</span>&nbsp;<span class="op" id="2724731">=</span>&nbsp;<span class="num" id="2724733">1</span>&nbsp;<span class="op" id="2724735">&lt;&lt;</span>&nbsp;<span class="num" id="2724738">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724741">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2724757">flag</span>&nbsp;<span class="op" id="2724762">=</span>&nbsp;<span class="num" id="2724764">1</span>&nbsp;<span class="op" id="2724766">&lt;&lt;</span>&nbsp;<span class="num" id="2724769">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724772">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2724788">flag</span>&nbsp;<span class="op" id="2724793">=</span>&nbsp;<span class="num" id="2724795">1</span>&nbsp;<span class="op" id="2724797">&lt;&lt;</span>&nbsp;<span class="num" id="2724800">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724803">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2724819">flag</span>&nbsp;<span class="op" id="2724824">=</span>&nbsp;<span class="num" id="2724826">1</span>&nbsp;<span class="op" id="2724828">&lt;&lt;</span>&nbsp;<span class="num" id="2724831">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724834">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2724855">=</span>&nbsp;<span class="num" id="2724857">9</span><br>
<span class="lineno"></span><span class="op" id="2724859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2724862">func</span>&nbsp;<span class="op" id="2724867">(</span><span class="ident" id="2724868">f</span>&nbsp;<span class="ident" id="2724870">flag</span><span class="op" id="2724874">)</span>&nbsp;<span class="ident" id="2724876">kind</span><span class="op" id="2724880">(</span><span class="op" id="2724881">)</span>&nbsp;<span class="ident" id="2724883">Kind</span>&nbsp;<span class="op" id="2724888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724891">return</span>&nbsp;<span class="ident" id="2724898">Kind</span><span class="op" id="2724902">(</span><span class="ident" id="2724903">f</span>&nbsp;<span class="op" id="2724905">&amp;</span>&nbsp;<span class="ident" id="2724907">flagKindMask</span><span class="op" id="2724919">)</span><br>
<span class="lineno">75</span><span class="op" id="2724921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2724924">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2724984">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2725043">func</span>&nbsp;<span class="op" id="2725048">(</span><span class="ident" id="2725049">v</span>&nbsp;<span class="ident" id="2725051">Value</span><span class="op" id="2725056">)</span>&nbsp;<span class="ident" id="2725058">pointer</span><span class="op" id="2725065">(</span><span class="op" id="2725066">)</span>&nbsp;<span class="ident" id="2725068">unsafe</span><span class="op" id="2725074">.</span><span class="ident" id="2725075">Pointer</span>&nbsp;<span class="op" id="2725083">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725086">if</span>&nbsp;<span class="ident" id="2725089">v</span><span class="op" id="2725090">.</span><span class="ident" id="2725091">typ</span><span class="op" id="2725094">.</span><span class="ident" id="2725095">size</span>&nbsp;<span class="op" id="2725100">!=</span>&nbsp;<span class="ident" id="2725103">ptrSize</span>&nbsp;<span class="op" id="2725111">||</span>&nbsp;<span class="op" id="2725114">!</span><span class="ident" id="2725115">v</span><span class="op" id="2725116">.</span><span class="ident" id="2725117">typ</span><span class="op" id="2725120">.</span><span class="ident" id="2725121">pointers</span><span class="op" id="2725129">(</span><span class="op" id="2725130">)</span>&nbsp;<span class="op" id="2725132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2725136">panic</span><span class="op" id="2725141">(</span><span class="string" id="2725142">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2725185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725191">if</span>&nbsp;<span class="ident" id="2725194">v</span><span class="op" id="2725195">.</span><span class="ident" id="2725196">flag</span><span class="op" id="2725200">&amp;</span><span class="ident" id="2725201">flagIndir</span>&nbsp;<span class="op" id="2725211">!=</span>&nbsp;<span class="num" id="2725214">0</span>&nbsp;<span class="op" id="2725216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725220">return</span>&nbsp;<span class="op" id="2725227">*</span><span class="op" id="2725228">(</span><span class="op" id="2725229">*</span><span class="ident" id="2725230">unsafe</span><span class="op" id="2725236">.</span><span class="ident" id="2725237">Pointer</span><span class="op" id="2725244">)</span><span class="op" id="2725245">(</span><span class="ident" id="2725246">v</span><span class="op" id="2725247">.</span><span class="ident" id="2725248">ptr</span><span class="op" id="2725251">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725257">return</span>&nbsp;<span class="ident" id="2725264">v</span><span class="op" id="2725265">.</span><span class="ident" id="2725266">ptr</span><br>
<span class="lineno"></span><span class="op" id="2725270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2725273">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2725321">func</span>&nbsp;<span class="ident" id="2725326">packEface</span><span class="op" id="2725335">(</span><span class="ident" id="2725336">v</span>&nbsp;<span class="ident" id="2725338">Value</span><span class="op" id="2725343">)</span>&nbsp;<span class="keyword" id="2725345">interface</span><span class="op" id="2725354">{</span><span class="op" id="2725355">}</span>&nbsp;<span class="op" id="2725357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725360">t</span>&nbsp;<span class="op" id="2725362">:=</span>&nbsp;<span class="ident" id="2725365">v</span><span class="op" id="2725366">.</span><span class="ident" id="2725367">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725372">var</span>&nbsp;<span class="ident" id="2725376">i</span>&nbsp;<span class="keyword" id="2725378">interface</span><span class="op" id="2725387">{</span><span class="op" id="2725388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725391">e</span>&nbsp;<span class="op" id="2725393">:=</span>&nbsp;<span class="op" id="2725396">(</span><span class="op" id="2725397">*</span><span class="ident" id="2725398">emptyInterface</span><span class="op" id="2725412">)</span><span class="op" id="2725413">(</span><span class="ident" id="2725414">unsafe</span><span class="op" id="2725420">.</span><span class="ident" id="2725421">Pointer</span><span class="op" id="2725428">(</span><span class="op" id="2725429">&amp;</span><span class="ident" id="2725430">i</span><span class="op" id="2725431">)</span><span class="op" id="2725432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725435">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725489">switch</span>&nbsp;<span class="op" id="2725496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725499">case</span>&nbsp;<span class="ident" id="2725504">ifaceIndir</span><span class="op" id="2725514">(</span><span class="ident" id="2725515">t</span><span class="op" id="2725516">)</span><span class="op" id="2725517">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725521">if</span>&nbsp;<span class="ident" id="2725524">v</span><span class="op" id="2725525">.</span><span class="ident" id="2725526">flag</span><span class="op" id="2725530">&amp;</span><span class="ident" id="2725531">flagIndir</span>&nbsp;<span class="op" id="2725541">==</span>&nbsp;<span class="num" id="2725544">0</span>&nbsp;<span class="op" id="2725546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2725551">panic</span><span class="op" id="2725556">(</span><span class="string" id="2725557">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2725568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725572">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725576">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725638">ptr</span>&nbsp;<span class="op" id="2725642">:=</span>&nbsp;<span class="ident" id="2725645">v</span><span class="op" id="2725646">.</span><span class="ident" id="2725647">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725653">if</span>&nbsp;<span class="ident" id="2725656">v</span><span class="op" id="2725657">.</span><span class="ident" id="2725658">flag</span><span class="op" id="2725662">&amp;</span><span class="ident" id="2725663">flagAddr</span>&nbsp;<span class="op" id="2725672">!=</span>&nbsp;<span class="num" id="2725675">0</span>&nbsp;<span class="op" id="2725677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725682">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725735">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725778">c</span>&nbsp;<span class="op" id="2725780">:=</span>&nbsp;<span class="ident" id="2725783">unsafe_New</span><span class="op" id="2725793">(</span><span class="ident" id="2725794">t</span><span class="op" id="2725795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725800">memmove</span><span class="op" id="2725807">(</span><span class="ident" id="2725808">c</span><span class="op" id="2725809">,</span>&nbsp;<span class="ident" id="2725811">ptr</span><span class="op" id="2725814">,</span>&nbsp;<span class="ident" id="2725816">t</span><span class="op" id="2725817">.</span><span class="ident" id="2725818">size</span><span class="op" id="2725822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725827">ptr</span>&nbsp;<span class="op" id="2725831">=</span>&nbsp;<span class="ident" id="2725833">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2725841">e</span><span class="op" id="2725842">.</span><span class="ident" id="2725843">word</span>&nbsp;<span class="op" id="2725848">=</span>&nbsp;<span class="ident" id="2725850">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725855">case</span>&nbsp;<span class="ident" id="2725860">v</span><span class="op" id="2725861">.</span><span class="ident" id="2725862">flag</span><span class="op" id="2725866">&amp;</span><span class="ident" id="2725867">flagIndir</span>&nbsp;<span class="op" id="2725877">!=</span>&nbsp;<span class="num" id="2725880">0</span><span class="op" id="2725881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725885">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725943">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726004">e</span><span class="op" id="2726005">.</span><span class="ident" id="2726006">word</span>&nbsp;<span class="op" id="2726011">=</span>&nbsp;<span class="op" id="2726013">*</span><span class="op" id="2726014">(</span><span class="op" id="2726015">*</span><span class="ident" id="2726016">unsafe</span><span class="op" id="2726022">.</span><span class="ident" id="2726023">Pointer</span><span class="op" id="2726030">)</span><span class="op" id="2726031">(</span><span class="ident" id="2726032">v</span><span class="op" id="2726033">.</span><span class="ident" id="2726034">ptr</span><span class="op" id="2726037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726040">default</span><span class="op" id="2726047">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726051">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726098">e</span><span class="op" id="2726099">.</span><span class="ident" id="2726100">word</span>&nbsp;<span class="op" id="2726105">=</span>&nbsp;<span class="ident" id="2726107">v</span><span class="op" id="2726108">.</span><span class="ident" id="2726109">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726117">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726181">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726248">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726317">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726338">e</span><span class="op" id="2726339">.</span><span class="ident" id="2726340">typ</span>&nbsp;<span class="op" id="2726344">=</span>&nbsp;<span class="ident" id="2726346">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726349">return</span>&nbsp;<span class="ident" id="2726356">i</span><br>
<span class="lineno"></span><span class="op" id="2726358">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2726361">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2726419">func</span>&nbsp;<span class="ident" id="2726424">unpackEface</span><span class="op" id="2726435">(</span><span class="ident" id="2726436">i</span>&nbsp;<span class="keyword" id="2726438">interface</span><span class="op" id="2726447">{</span><span class="op" id="2726448">}</span><span class="op" id="2726449">)</span>&nbsp;<span class="ident" id="2726451">Value</span>&nbsp;<span class="op" id="2726457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726460">e</span>&nbsp;<span class="op" id="2726462">:=</span>&nbsp;<span class="op" id="2726465">(</span><span class="op" id="2726466">*</span><span class="ident" id="2726467">emptyInterface</span><span class="op" id="2726481">)</span><span class="op" id="2726482">(</span><span class="ident" id="2726483">unsafe</span><span class="op" id="2726489">.</span><span class="ident" id="2726490">Pointer</span><span class="op" id="2726497">(</span><span class="op" id="2726498">&amp;</span><span class="ident" id="2726499">i</span><span class="op" id="2726500">)</span><span class="op" id="2726501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2726504">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726585">t</span>&nbsp;<span class="op" id="2726587">:=</span>&nbsp;<span class="ident" id="2726590">e</span><span class="op" id="2726591">.</span><span class="ident" id="2726592">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726597">if</span>&nbsp;<span class="ident" id="2726600">t</span>&nbsp;<span class="op" id="2726602">==</span>&nbsp;<span class="ident" id="2726605">nil</span>&nbsp;<span class="op" id="2726609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726613">return</span>&nbsp;<span class="ident" id="2726620">Value</span><span class="op" id="2726625">{</span><span class="op" id="2726626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726632">f</span>&nbsp;<span class="op" id="2726634">:=</span>&nbsp;<span class="ident" id="2726637">flag</span><span class="op" id="2726641">(</span><span class="ident" id="2726642">t</span><span class="op" id="2726643">.</span><span class="ident" id="2726644">Kind</span><span class="op" id="2726648">(</span><span class="op" id="2726649">)</span><span class="op" id="2726650">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726653">if</span>&nbsp;<span class="ident" id="2726656">ifaceIndir</span><span class="op" id="2726666">(</span><span class="ident" id="2726667">t</span><span class="op" id="2726668">)</span>&nbsp;<span class="op" id="2726670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726674">f</span>&nbsp;<span class="op" id="2726676">|=</span>&nbsp;<span class="ident" id="2726679">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2726690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726693">return</span>&nbsp;<span class="ident" id="2726700">Value</span><span class="op" id="2726705">{</span><span class="ident" id="2726706">t</span><span class="op" id="2726707">,</span>&nbsp;<span class="ident" id="2726709">unsafe</span><span class="op" id="2726715">.</span><span class="ident" id="2726716">Pointer</span><span class="op" id="2726723">(</span><span class="ident" id="2726724">e</span><span class="op" id="2726725">.</span><span class="ident" id="2726726">word</span><span class="op" id="2726730">)</span><span class="op" id="2726731">,</span>&nbsp;<span class="ident" id="2726733">f</span><span class="op" id="2726734">}</span><br>
<span class="lineno"></span><span class="op" id="2726736">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2726739">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2726796">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2726860">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2726898">type</span>&nbsp;<span class="ident" id="2726903">ValueError</span>&nbsp;<span class="keyword" id="2726914">struct</span>&nbsp;<span class="op" id="2726921">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726924">Method</span>&nbsp;<span class="builtintype" id="2726931">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726939">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2726946">Kind</span><br>
<span class="lineno"></span><span class="op" id="2726951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2726954">func</span>&nbsp;<span class="op" id="2726959">(</span><span class="ident" id="2726960">e</span>&nbsp;<span class="op" id="2726962">*</span><span class="ident" id="2726963">ValueError</span><span class="op" id="2726973">)</span>&nbsp;<span class="ident" id="2726975">Error</span><span class="op" id="2726980">(</span><span class="op" id="2726981">)</span>&nbsp;<span class="builtintype" id="2726983">string</span>&nbsp;<span class="op" id="2726990">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726993">if</span>&nbsp;<span class="ident" id="2726996">e</span><span class="op" id="2726997">.</span><span class="ident" id="2726998">Kind</span>&nbsp;<span class="op" id="2727003">==</span>&nbsp;<span class="num" id="2727006">0</span>&nbsp;<span class="op" id="2727008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727012">return</span>&nbsp;<span class="string" id="2727019">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2727039">+</span>&nbsp;<span class="ident" id="2727041">e</span><span class="op" id="2727042">.</span><span class="ident" id="2727043">Method</span>&nbsp;<span class="op" id="2727050">+</span>&nbsp;<span class="string" id="2727052">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727073">return</span>&nbsp;<span class="string" id="2727080">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2727100">+</span>&nbsp;<span class="ident" id="2727102">e</span><span class="op" id="2727103">.</span><span class="ident" id="2727104">Method</span>&nbsp;<span class="op" id="2727111">+</span>&nbsp;<span class="string" id="2727113">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2727120">+</span>&nbsp;<span class="ident" id="2727122">e</span><span class="op" id="2727123">.</span><span class="ident" id="2727124">Kind</span><span class="op" id="2727128">.</span><span class="ident" id="2727129">String</span><span class="op" id="2727135">(</span><span class="op" id="2727136">)</span>&nbsp;<span class="op" id="2727138">+</span>&nbsp;<span class="string" id="2727140">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2727149">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2727152">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2727206">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2727247">func</span>&nbsp;<span class="ident" id="2727252">methodName</span><span class="op" id="2727262">(</span><span class="op" id="2727263">)</span>&nbsp;<span class="builtintype" id="2727265">string</span>&nbsp;<span class="op" id="2727272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727275">pc</span><span class="op" id="2727277">,</span>&nbsp;<span class="ident" id="2727279">_</span><span class="op" id="2727280">,</span>&nbsp;<span class="ident" id="2727282">_</span><span class="op" id="2727283">,</span>&nbsp;<span class="ident" id="2727285">_</span>&nbsp;<span class="op" id="2727287">:=</span>&nbsp;<span class="ident" id="2727290">runtime</span><span class="op" id="2727297">.</span><span class="ident" id="2727298">Caller</span><span class="op" id="2727304">(</span><span class="num" id="2727305">2</span><span class="op" id="2727306">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727309">f</span>&nbsp;<span class="op" id="2727311">:=</span>&nbsp;<span class="ident" id="2727314">runtime</span><span class="op" id="2727321">.</span><span class="ident" id="2727322">FuncForPC</span><span class="op" id="2727331">(</span><span class="ident" id="2727332">pc</span><span class="op" id="2727334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727337">if</span>&nbsp;<span class="ident" id="2727340">f</span>&nbsp;<span class="op" id="2727342">==</span>&nbsp;<span class="ident" id="2727345">nil</span>&nbsp;<span class="op" id="2727349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727353">return</span>&nbsp;<span class="string" id="2727360">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727381">return</span>&nbsp;<span class="ident" id="2727388">f</span><span class="op" id="2727389">.</span><span class="ident" id="2727390">Name</span><span class="op" id="2727394">(</span><span class="op" id="2727395">)</span><br>
<span class="lineno">165</span><span class="op" id="2727397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2727400">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2727458">type</span>&nbsp;<span class="ident" id="2727463">emptyInterface</span>&nbsp;<span class="keyword" id="2727478">struct</span>&nbsp;<span class="op" id="2727485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727488">typ</span>&nbsp;&nbsp;<span class="op" id="2727493">*</span><span class="ident" id="2727494">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727501">word</span>&nbsp;<span class="ident" id="2727506">unsafe</span><span class="op" id="2727512">.</span><span class="ident" id="2727513">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2727521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2727524">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2727595">type</span>&nbsp;<span class="ident" id="2727600">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2727618">struct</span>&nbsp;<span class="op" id="2727625">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727628">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727661">itab</span>&nbsp;<span class="op" id="2727666">*</span><span class="keyword" id="2727667">struct</span>&nbsp;<span class="op" id="2727674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727678">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2727685">*</span><span class="ident" id="2727686">rtype</span>&nbsp;<span class="comment" id="2727692">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727719">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2727726">*</span><span class="ident" id="2727727">rtype</span>&nbsp;<span class="comment" id="2727733">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727760">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2727767">unsafe</span><span class="op" id="2727773">.</span><span class="ident" id="2727774">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727784">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2727791">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727799">unused</span>&nbsp;<span class="builtintype" id="2727806">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727814">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2727821">[</span><span class="num" id="2727822">100000</span><span class="op" id="2727828">]</span><span class="ident" id="2727829">unsafe</span><span class="op" id="2727835">.</span><span class="ident" id="2727836">Pointer</span>&nbsp;<span class="comment" id="2727844">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727864">word</span>&nbsp;<span class="ident" id="2727869">unsafe</span><span class="op" id="2727875">.</span><span class="ident" id="2727876">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2727884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2727887">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2727933">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2727985">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2728042">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2728100">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2728159">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2728202">func</span>&nbsp;<span class="op" id="2728207">(</span><span class="ident" id="2728208">f</span>&nbsp;<span class="ident" id="2728210">flag</span><span class="op" id="2728214">)</span>&nbsp;<span class="ident" id="2728216">mustBe</span><span class="op" id="2728222">(</span><span class="ident" id="2728223">expected</span>&nbsp;<span class="ident" id="2728232">Kind</span><span class="op" id="2728236">)</span>&nbsp;<span class="op" id="2728238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728241">if</span>&nbsp;<span class="ident" id="2728244">f</span><span class="op" id="2728245">.</span><span class="ident" id="2728246">kind</span><span class="op" id="2728250">(</span><span class="op" id="2728251">)</span>&nbsp;<span class="op" id="2728253">!=</span>&nbsp;<span class="ident" id="2728256">expected</span>&nbsp;<span class="op" id="2728265">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728269">panic</span><span class="op" id="2728274">(</span><span class="op" id="2728275">&amp;</span><span class="ident" id="2728276">ValueError</span><span class="op" id="2728286">{</span><span class="ident" id="2728287">methodName</span><span class="op" id="2728297">(</span><span class="op" id="2728298">)</span><span class="op" id="2728299">,</span>&nbsp;<span class="ident" id="2728301">f</span><span class="op" id="2728302">.</span><span class="ident" id="2728303">kind</span><span class="op" id="2728307">(</span><span class="op" id="2728308">)</span><span class="op" id="2728309">}</span><span class="op" id="2728310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728313">}</span><br>
<span class="lineno"></span><span class="op" id="2728315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2728318">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2728390">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2728414">func</span>&nbsp;<span class="op" id="2728419">(</span><span class="ident" id="2728420">f</span>&nbsp;<span class="ident" id="2728422">flag</span><span class="op" id="2728426">)</span>&nbsp;<span class="ident" id="2728428">mustBeExported</span><span class="op" id="2728442">(</span><span class="op" id="2728443">)</span>&nbsp;<span class="op" id="2728445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728448">if</span>&nbsp;<span class="ident" id="2728451">f</span>&nbsp;<span class="op" id="2728453">==</span>&nbsp;<span class="num" id="2728456">0</span>&nbsp;<span class="op" id="2728458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728462">panic</span><span class="op" id="2728467">(</span><span class="op" id="2728468">&amp;</span><span class="ident" id="2728469">ValueError</span><span class="op" id="2728479">{</span><span class="ident" id="2728480">methodName</span><span class="op" id="2728490">(</span><span class="op" id="2728491">)</span><span class="op" id="2728492">,</span>&nbsp;<span class="num" id="2728494">0</span><span class="op" id="2728495">}</span><span class="op" id="2728496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728499">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728502">if</span>&nbsp;<span class="ident" id="2728505">f</span><span class="op" id="2728506">&amp;</span><span class="ident" id="2728507">flagRO</span>&nbsp;<span class="op" id="2728514">!=</span>&nbsp;<span class="num" id="2728517">0</span>&nbsp;<span class="op" id="2728519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728523">panic</span><span class="op" id="2728528">(</span><span class="string" id="2728529">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2728541">+</span>&nbsp;<span class="ident" id="2728543">methodName</span><span class="op" id="2728553">(</span><span class="op" id="2728554">)</span>&nbsp;<span class="op" id="2728556">+</span>&nbsp;<span class="string" id="2728558">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2728604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728607">}</span><br>
<span class="lineno"></span><span class="op" id="2728609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2728612">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2728686">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2728759">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2728788">func</span>&nbsp;<span class="op" id="2728793">(</span><span class="ident" id="2728794">f</span>&nbsp;<span class="ident" id="2728796">flag</span><span class="op" id="2728800">)</span>&nbsp;<span class="ident" id="2728802">mustBeAssignable</span><span class="op" id="2728818">(</span><span class="op" id="2728819">)</span>&nbsp;<span class="op" id="2728821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728824">if</span>&nbsp;<span class="ident" id="2728827">f</span>&nbsp;<span class="op" id="2728829">==</span>&nbsp;<span class="num" id="2728832">0</span>&nbsp;<span class="op" id="2728834">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728838">panic</span><span class="op" id="2728843">(</span><span class="op" id="2728844">&amp;</span><span class="ident" id="2728845">ValueError</span><span class="op" id="2728855">{</span><span class="ident" id="2728856">methodName</span><span class="op" id="2728866">(</span><span class="op" id="2728867">)</span><span class="op" id="2728868">,</span>&nbsp;<span class="ident" id="2728870">Invalid</span><span class="op" id="2728877">}</span><span class="op" id="2728878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2728884">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728933">if</span>&nbsp;<span class="ident" id="2728936">f</span><span class="op" id="2728937">&amp;</span><span class="ident" id="2728938">flagRO</span>&nbsp;<span class="op" id="2728945">!=</span>&nbsp;<span class="num" id="2728948">0</span>&nbsp;<span class="op" id="2728950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728954">panic</span><span class="op" id="2728959">(</span><span class="string" id="2728960">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2728972">+</span>&nbsp;<span class="ident" id="2728974">methodName</span><span class="op" id="2728984">(</span><span class="op" id="2728985">)</span>&nbsp;<span class="op" id="2728987">+</span>&nbsp;<span class="string" id="2728989">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2729035">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729041">if</span>&nbsp;<span class="ident" id="2729044">f</span><span class="op" id="2729045">&amp;</span><span class="ident" id="2729046">flagAddr</span>&nbsp;<span class="op" id="2729055">==</span>&nbsp;<span class="num" id="2729058">0</span>&nbsp;<span class="op" id="2729060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2729064">panic</span><span class="op" id="2729069">(</span><span class="string" id="2729070">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2729082">+</span>&nbsp;<span class="ident" id="2729084">methodName</span><span class="op" id="2729094">(</span><span class="op" id="2729095">)</span>&nbsp;<span class="op" id="2729097">+</span>&nbsp;<span class="string" id="2729099">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2729127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729130">}</span><br>
<span class="lineno"></span><span class="op" id="2729132">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2729135">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2729198">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2729239">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2729303">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2729365">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2729386">func</span>&nbsp;<span class="op" id="2729391">(</span><span class="ident" id="2729392">v</span>&nbsp;<span class="ident" id="2729394">Value</span><span class="op" id="2729399">)</span>&nbsp;<span class="ident" id="2729401">Addr</span><span class="op" id="2729405">(</span><span class="op" id="2729406">)</span>&nbsp;<span class="ident" id="2729408">Value</span>&nbsp;<span class="op" id="2729414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729417">if</span>&nbsp;<span class="ident" id="2729420">v</span><span class="op" id="2729421">.</span><span class="ident" id="2729422">flag</span><span class="op" id="2729426">&amp;</span><span class="ident" id="2729427">flagAddr</span>&nbsp;<span class="op" id="2729436">==</span>&nbsp;<span class="num" id="2729439">0</span>&nbsp;<span class="op" id="2729441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2729445">panic</span><span class="op" id="2729450">(</span><span class="string" id="2729451">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2729494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729497">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729500">return</span>&nbsp;<span class="ident" id="2729507">Value</span><span class="op" id="2729512">{</span><span class="ident" id="2729513">v</span><span class="op" id="2729514">.</span><span class="ident" id="2729515">typ</span><span class="op" id="2729518">.</span><span class="ident" id="2729519">ptrTo</span><span class="op" id="2729524">(</span><span class="op" id="2729525">)</span><span class="op" id="2729526">,</span>&nbsp;<span class="ident" id="2729528">v</span><span class="op" id="2729529">.</span><span class="ident" id="2729530">ptr</span><span class="op" id="2729533">,</span>&nbsp;<span class="op" id="2729535">(</span><span class="ident" id="2729536">v</span><span class="op" id="2729537">.</span><span class="ident" id="2729538">flag</span>&nbsp;<span class="op" id="2729543">&amp;</span>&nbsp;<span class="ident" id="2729545">flagRO</span><span class="op" id="2729551">)</span>&nbsp;<span class="op" id="2729553">|</span>&nbsp;<span class="ident" id="2729555">flag</span><span class="op" id="2729559">(</span><span class="ident" id="2729560">Ptr</span><span class="op" id="2729563">)</span><span class="op" id="2729564">}</span><br>
<span class="lineno"></span><span class="op" id="2729566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2729569">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2729607">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2729645">func</span>&nbsp;<span class="op" id="2729650">(</span><span class="ident" id="2729651">v</span>&nbsp;<span class="ident" id="2729653">Value</span><span class="op" id="2729658">)</span>&nbsp;<span class="ident" id="2729660">Bool</span><span class="op" id="2729664">(</span><span class="op" id="2729665">)</span>&nbsp;<span class="builtintype" id="2729667">bool</span>&nbsp;<span class="op" id="2729672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729675">v</span><span class="op" id="2729676">.</span><span class="ident" id="2729677">mustBe</span><span class="op" id="2729683">(</span><span class="ident" id="2729684">Bool</span><span class="op" id="2729688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729691">return</span>&nbsp;<span class="op" id="2729698">*</span><span class="op" id="2729699">(</span><span class="op" id="2729700">*</span><span class="builtintype" id="2729701">bool</span><span class="op" id="2729705">)</span><span class="op" id="2729706">(</span><span class="ident" id="2729707">v</span><span class="op" id="2729708">.</span><span class="ident" id="2729709">ptr</span><span class="op" id="2729712">)</span><br>
<span class="lineno"></span><span class="op" id="2729714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2729717">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2729756">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2729818">func</span>&nbsp;<span class="op" id="2729823">(</span><span class="ident" id="2729824">v</span>&nbsp;<span class="ident" id="2729826">Value</span><span class="op" id="2729831">)</span>&nbsp;<span class="ident" id="2729833">Bytes</span><span class="op" id="2729838">(</span><span class="op" id="2729839">)</span>&nbsp;<span class="op" id="2729841">[</span><span class="op" id="2729842">]</span><span class="builtintype" id="2729843">byte</span>&nbsp;<span class="op" id="2729848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729851">v</span><span class="op" id="2729852">.</span><span class="ident" id="2729853">mustBe</span><span class="op" id="2729859">(</span><span class="ident" id="2729860">Slice</span><span class="op" id="2729865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729868">if</span>&nbsp;<span class="ident" id="2729871">v</span><span class="op" id="2729872">.</span><span class="ident" id="2729873">typ</span><span class="op" id="2729876">.</span><span class="ident" id="2729877">Elem</span><span class="op" id="2729881">(</span><span class="op" id="2729882">)</span><span class="op" id="2729883">.</span><span class="ident" id="2729884">Kind</span><span class="op" id="2729888">(</span><span class="op" id="2729889">)</span>&nbsp;<span class="op" id="2729891">!=</span>&nbsp;<span class="ident" id="2729894">Uint8</span>&nbsp;<span class="op" id="2729900">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2729904">panic</span><span class="op" id="2729909">(</span><span class="string" id="2729910">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2729949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729955">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730013">return</span>&nbsp;<span class="op" id="2730020">*</span><span class="op" id="2730021">(</span><span class="op" id="2730022">*</span><span class="op" id="2730023">[</span><span class="op" id="2730024">]</span><span class="builtintype" id="2730025">byte</span><span class="op" id="2730029">)</span><span class="op" id="2730030">(</span><span class="ident" id="2730031">v</span><span class="op" id="2730032">.</span><span class="ident" id="2730033">ptr</span><span class="op" id="2730036">)</span><br>
<span class="lineno"></span><span class="op" id="2730038">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2730041">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2730080">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2730151">func</span>&nbsp;<span class="op" id="2730156">(</span><span class="ident" id="2730157">v</span>&nbsp;<span class="ident" id="2730159">Value</span><span class="op" id="2730164">)</span>&nbsp;<span class="ident" id="2730166">runes</span><span class="op" id="2730171">(</span><span class="op" id="2730172">)</span>&nbsp;<span class="op" id="2730174">[</span><span class="op" id="2730175">]</span><span class="builtintype" id="2730176">rune</span>&nbsp;<span class="op" id="2730181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730184">v</span><span class="op" id="2730185">.</span><span class="ident" id="2730186">mustBe</span><span class="op" id="2730192">(</span><span class="ident" id="2730193">Slice</span><span class="op" id="2730198">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730201">if</span>&nbsp;<span class="ident" id="2730204">v</span><span class="op" id="2730205">.</span><span class="ident" id="2730206">typ</span><span class="op" id="2730209">.</span><span class="ident" id="2730210">Elem</span><span class="op" id="2730214">(</span><span class="op" id="2730215">)</span><span class="op" id="2730216">.</span><span class="ident" id="2730217">Kind</span><span class="op" id="2730221">(</span><span class="op" id="2730222">)</span>&nbsp;<span class="op" id="2730224">!=</span>&nbsp;<span class="ident" id="2730227">Int32</span>&nbsp;<span class="op" id="2730233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2730237">panic</span><span class="op" id="2730242">(</span><span class="string" id="2730243">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2730282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2730288">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730346">return</span>&nbsp;<span class="op" id="2730353">*</span><span class="op" id="2730354">(</span><span class="op" id="2730355">*</span><span class="op" id="2730356">[</span><span class="op" id="2730357">]</span><span class="builtintype" id="2730358">rune</span><span class="op" id="2730362">)</span><span class="op" id="2730363">(</span><span class="ident" id="2730364">v</span><span class="op" id="2730365">.</span><span class="ident" id="2730366">ptr</span><span class="op" id="2730369">)</span><br>
<span class="lineno">265</span><span class="op" id="2730371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2730374">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2730448">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2730520">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2730582">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2730661">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2730715">func</span>&nbsp;<span class="op" id="2730720">(</span><span class="ident" id="2730721">v</span>&nbsp;<span class="ident" id="2730723">Value</span><span class="op" id="2730728">)</span>&nbsp;<span class="ident" id="2730730">CanAddr</span><span class="op" id="2730737">(</span><span class="op" id="2730738">)</span>&nbsp;<span class="builtintype" id="2730740">bool</span>&nbsp;<span class="op" id="2730745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730748">return</span>&nbsp;<span class="ident" id="2730755">v</span><span class="op" id="2730756">.</span><span class="ident" id="2730757">flag</span><span class="op" id="2730761">&amp;</span><span class="ident" id="2730762">flagAddr</span>&nbsp;<span class="op" id="2730771">!=</span>&nbsp;<span class="num" id="2730774">0</span><br>
<span class="lineno"></span><span class="op" id="2730776">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2730779">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2730836">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2730900">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2730952">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2731013">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2731061">func</span>&nbsp;<span class="op" id="2731066">(</span><span class="ident" id="2731067">v</span>&nbsp;<span class="ident" id="2731069">Value</span><span class="op" id="2731074">)</span>&nbsp;<span class="ident" id="2731076">CanSet</span><span class="op" id="2731082">(</span><span class="op" id="2731083">)</span>&nbsp;<span class="builtintype" id="2731085">bool</span>&nbsp;<span class="op" id="2731090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731093">return</span>&nbsp;<span class="ident" id="2731100">v</span><span class="op" id="2731101">.</span><span class="ident" id="2731102">flag</span><span class="op" id="2731106">&amp;</span><span class="op" id="2731107">(</span><span class="ident" id="2731108">flagAddr</span><span class="op" id="2731116">|</span><span class="ident" id="2731117">flagRO</span><span class="op" id="2731123">)</span>&nbsp;<span class="op" id="2731125">==</span>&nbsp;<span class="ident" id="2731128">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2731137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2731140">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2731198">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2731289">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2731329">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2731373">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2731432">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2731489">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2731563">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2731611">func</span>&nbsp;<span class="op" id="2731616">(</span><span class="ident" id="2731617">v</span>&nbsp;<span class="ident" id="2731619">Value</span><span class="op" id="2731624">)</span>&nbsp;<span class="ident" id="2731626">Call</span><span class="op" id="2731630">(</span><span class="ident" id="2731631">in</span>&nbsp;<span class="op" id="2731634">[</span><span class="op" id="2731635">]</span><span class="ident" id="2731636">Value</span><span class="op" id="2731641">)</span>&nbsp;<span class="op" id="2731643">[</span><span class="op" id="2731644">]</span><span class="ident" id="2731645">Value</span>&nbsp;<span class="op" id="2731651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731654">v</span><span class="op" id="2731655">.</span><span class="ident" id="2731656">mustBe</span><span class="op" id="2731662">(</span><span class="ident" id="2731663">Func</span><span class="op" id="2731667">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731670">v</span><span class="op" id="2731671">.</span><span class="ident" id="2731672">mustBeExported</span><span class="op" id="2731686">(</span><span class="op" id="2731687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731690">return</span>&nbsp;<span class="ident" id="2731697">v</span><span class="op" id="2731698">.</span><span class="ident" id="2731699">call</span><span class="op" id="2731703">(</span><span class="string" id="2731704">&#34;Call&#34;</span><span class="op" id="2731710">,</span>&nbsp;<span class="ident" id="2731712">in</span><span class="op" id="2731714">)</span><br>
<span class="lineno"></span><span class="op" id="2731716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2731719">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2731791">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2731860">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2731954">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2732018">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2732062">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2732121">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2732178">func</span>&nbsp;<span class="op" id="2732183">(</span><span class="ident" id="2732184">v</span>&nbsp;<span class="ident" id="2732186">Value</span><span class="op" id="2732191">)</span>&nbsp;<span class="ident" id="2732193">CallSlice</span><span class="op" id="2732202">(</span><span class="ident" id="2732203">in</span>&nbsp;<span class="op" id="2732206">[</span><span class="op" id="2732207">]</span><span class="ident" id="2732208">Value</span><span class="op" id="2732213">)</span>&nbsp;<span class="op" id="2732215">[</span><span class="op" id="2732216">]</span><span class="ident" id="2732217">Value</span>&nbsp;<span class="op" id="2732223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732226">v</span><span class="op" id="2732227">.</span><span class="ident" id="2732228">mustBe</span><span class="op" id="2732234">(</span><span class="ident" id="2732235">Func</span><span class="op" id="2732239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732242">v</span><span class="op" id="2732243">.</span><span class="ident" id="2732244">mustBeExported</span><span class="op" id="2732258">(</span><span class="op" id="2732259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732262">return</span>&nbsp;<span class="ident" id="2732269">v</span><span class="op" id="2732270">.</span><span class="ident" id="2732271">call</span><span class="op" id="2732275">(</span><span class="string" id="2732276">&#34;CallSlice&#34;</span><span class="op" id="2732287">,</span>&nbsp;<span class="ident" id="2732289">in</span><span class="op" id="2732291">)</span><br>
<span class="lineno">310</span><span class="op" id="2732293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2732296">var</span>&nbsp;<span class="ident" id="2732300">callGC</span>&nbsp;<span class="builtintype" id="2732307">bool</span>&nbsp;<span class="comment" id="2732312">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2732352">func</span>&nbsp;<span class="op" id="2732357">(</span><span class="ident" id="2732358">v</span>&nbsp;<span class="ident" id="2732360">Value</span><span class="op" id="2732365">)</span>&nbsp;<span class="ident" id="2732367">call</span><span class="op" id="2732371">(</span><span class="ident" id="2732372">op</span>&nbsp;<span class="builtintype" id="2732375">string</span><span class="op" id="2732381">,</span>&nbsp;<span class="ident" id="2732383">in</span>&nbsp;<span class="op" id="2732386">[</span><span class="op" id="2732387">]</span><span class="ident" id="2732388">Value</span><span class="op" id="2732393">)</span>&nbsp;<span class="op" id="2732395">[</span><span class="op" id="2732396">]</span><span class="ident" id="2732397">Value</span>&nbsp;<span class="op" id="2732403">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2732406">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732438">t</span>&nbsp;<span class="op" id="2732440">:=</span>&nbsp;<span class="ident" id="2732443">v</span><span class="op" id="2732444">.</span><span class="ident" id="2732445">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732450">var</span>&nbsp;<span class="op" id="2732454">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732458">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2732467">unsafe</span><span class="op" id="2732473">.</span><span class="ident" id="2732474">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732484">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2732493">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732501">rcvrtype</span>&nbsp;<span class="op" id="2732510">*</span><span class="ident" id="2732511">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732521">if</span>&nbsp;<span class="ident" id="2732524">v</span><span class="op" id="2732525">.</span><span class="ident" id="2732526">flag</span><span class="op" id="2732530">&amp;</span><span class="ident" id="2732531">flagMethod</span>&nbsp;<span class="op" id="2732542">!=</span>&nbsp;<span class="num" id="2732545">0</span>&nbsp;<span class="op" id="2732547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732551">rcvr</span>&nbsp;<span class="op" id="2732556">=</span>&nbsp;<span class="ident" id="2732558">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732562">rcvrtype</span><span class="op" id="2732570">,</span>&nbsp;<span class="ident" id="2732572">t</span><span class="op" id="2732573">,</span>&nbsp;<span class="ident" id="2732575">fn</span>&nbsp;<span class="op" id="2732578">=</span>&nbsp;<span class="ident" id="2732580">methodReceiver</span><span class="op" id="2732594">(</span><span class="ident" id="2732595">op</span><span class="op" id="2732597">,</span>&nbsp;<span class="ident" id="2732599">v</span><span class="op" id="2732600">,</span>&nbsp;<span class="builtintype" id="2732602">int</span><span class="op" id="2732605">(</span><span class="ident" id="2732606">v</span><span class="op" id="2732607">.</span><span class="ident" id="2732608">flag</span><span class="op" id="2732612">)</span><span class="op" id="2732613">&gt;&gt;</span><span class="ident" id="2732615">flagMethodShift</span><span class="op" id="2732630">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732633">}</span>&nbsp;<span class="keyword" id="2732635">else</span>&nbsp;<span class="keyword" id="2732640">if</span>&nbsp;<span class="ident" id="2732643">v</span><span class="op" id="2732644">.</span><span class="ident" id="2732645">flag</span><span class="op" id="2732649">&amp;</span><span class="ident" id="2732650">flagIndir</span>&nbsp;<span class="op" id="2732660">!=</span>&nbsp;<span class="num" id="2732663">0</span>&nbsp;<span class="op" id="2732665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732669">fn</span>&nbsp;<span class="op" id="2732672">=</span>&nbsp;<span class="op" id="2732674">*</span><span class="op" id="2732675">(</span><span class="op" id="2732676">*</span><span class="ident" id="2732677">unsafe</span><span class="op" id="2732683">.</span><span class="ident" id="2732684">Pointer</span><span class="op" id="2732691">)</span><span class="op" id="2732692">(</span><span class="ident" id="2732693">v</span><span class="op" id="2732694">.</span><span class="ident" id="2732695">ptr</span><span class="op" id="2732698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732701">}</span>&nbsp;<span class="keyword" id="2732703">else</span>&nbsp;<span class="op" id="2732708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732712">fn</span>&nbsp;<span class="op" id="2732715">=</span>&nbsp;<span class="ident" id="2732717">v</span><span class="op" id="2732718">.</span><span class="ident" id="2732719">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732724">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732728">if</span>&nbsp;<span class="ident" id="2732731">fn</span>&nbsp;<span class="op" id="2732734">==</span>&nbsp;<span class="ident" id="2732737">nil</span>&nbsp;<span class="op" id="2732741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732745">panic</span><span class="op" id="2732750">(</span><span class="string" id="2732751">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2732793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732800">isSlice</span>&nbsp;<span class="op" id="2732808">:=</span>&nbsp;<span class="ident" id="2732811">op</span>&nbsp;<span class="op" id="2732814">==</span>&nbsp;<span class="string" id="2732817">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732830">n</span>&nbsp;<span class="op" id="2732832">:=</span>&nbsp;<span class="ident" id="2732835">t</span><span class="op" id="2732836">.</span><span class="ident" id="2732837">NumIn</span><span class="op" id="2732842">(</span><span class="op" id="2732843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732846">if</span>&nbsp;<span class="ident" id="2732849">isSlice</span>&nbsp;<span class="op" id="2732857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732861">if</span>&nbsp;<span class="op" id="2732864">!</span><span class="ident" id="2732865">t</span><span class="op" id="2732866">.</span><span class="ident" id="2732867">IsVariadic</span><span class="op" id="2732877">(</span><span class="op" id="2732878">)</span>&nbsp;<span class="op" id="2732880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732885">panic</span><span class="op" id="2732890">(</span><span class="string" id="2732891">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2732936">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732944">if</span>&nbsp;<span class="builtinfunc" id="2732947">len</span><span class="op" id="2732950">(</span><span class="ident" id="2732951">in</span><span class="op" id="2732953">)</span>&nbsp;<span class="op" id="2732955">&lt;</span>&nbsp;<span class="ident" id="2732957">n</span>&nbsp;<span class="op" id="2732959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732964">panic</span><span class="op" id="2732969">(</span><span class="string" id="2732970">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2733019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733027">if</span>&nbsp;<span class="builtinfunc" id="2733030">len</span><span class="op" id="2733033">(</span><span class="ident" id="2733034">in</span><span class="op" id="2733036">)</span>&nbsp;<span class="op" id="2733038">&gt;</span>&nbsp;<span class="ident" id="2733040">n</span>&nbsp;<span class="op" id="2733042">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733047">panic</span><span class="op" id="2733052">(</span><span class="string" id="2733053">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2733103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733110">}</span>&nbsp;<span class="keyword" id="2733112">else</span>&nbsp;<span class="op" id="2733117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733121">if</span>&nbsp;<span class="ident" id="2733124">t</span><span class="op" id="2733125">.</span><span class="ident" id="2733126">IsVariadic</span><span class="op" id="2733136">(</span><span class="op" id="2733137">)</span>&nbsp;<span class="op" id="2733139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733144">n</span><span class="op" id="2733145">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733154">if</span>&nbsp;<span class="builtinfunc" id="2733157">len</span><span class="op" id="2733160">(</span><span class="ident" id="2733161">in</span><span class="op" id="2733163">)</span>&nbsp;<span class="op" id="2733165">&lt;</span>&nbsp;<span class="ident" id="2733167">n</span>&nbsp;<span class="op" id="2733169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733174">panic</span><span class="op" id="2733179">(</span><span class="string" id="2733180">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2733224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733232">if</span>&nbsp;<span class="op" id="2733235">!</span><span class="ident" id="2733236">t</span><span class="op" id="2733237">.</span><span class="ident" id="2733238">IsVariadic</span><span class="op" id="2733248">(</span><span class="op" id="2733249">)</span>&nbsp;<span class="op" id="2733251">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2733254">len</span><span class="op" id="2733257">(</span><span class="ident" id="2733258">in</span><span class="op" id="2733260">)</span>&nbsp;<span class="op" id="2733262">&gt;</span>&nbsp;<span class="ident" id="2733264">n</span>&nbsp;<span class="op" id="2733266">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733271">panic</span><span class="op" id="2733276">(</span><span class="string" id="2733277">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2733322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733332">for</span>&nbsp;<span class="ident" id="2733336">_</span><span class="op" id="2733337">,</span>&nbsp;<span class="ident" id="2733339">x</span>&nbsp;<span class="op" id="2733341">:=</span>&nbsp;<span class="keyword" id="2733344">range</span>&nbsp;<span class="ident" id="2733350">in</span>&nbsp;<span class="op" id="2733353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733357">if</span>&nbsp;<span class="ident" id="2733360">x</span><span class="op" id="2733361">.</span><span class="ident" id="2733362">Kind</span><span class="op" id="2733366">(</span><span class="op" id="2733367">)</span>&nbsp;<span class="op" id="2733369">==</span>&nbsp;<span class="ident" id="2733372">Invalid</span>&nbsp;<span class="op" id="2733380">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733385">panic</span><span class="op" id="2733390">(</span><span class="string" id="2733391">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2733403">+</span>&nbsp;<span class="ident" id="2733405">op</span>&nbsp;<span class="op" id="2733408">+</span>&nbsp;<span class="string" id="2733410">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2733438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733448">for</span>&nbsp;<span class="ident" id="2733452">i</span>&nbsp;<span class="op" id="2733454">:=</span>&nbsp;<span class="num" id="2733457">0</span><span class="op" id="2733458">;</span>&nbsp;<span class="ident" id="2733460">i</span>&nbsp;<span class="op" id="2733462">&lt;</span>&nbsp;<span class="ident" id="2733464">n</span><span class="op" id="2733465">;</span>&nbsp;<span class="ident" id="2733467">i</span><span class="op" id="2733468">++</span>&nbsp;<span class="op" id="2733471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733475">if</span>&nbsp;<span class="ident" id="2733478">xt</span><span class="op" id="2733480">,</span>&nbsp;<span class="ident" id="2733482">targ</span>&nbsp;<span class="op" id="2733487">:=</span>&nbsp;<span class="ident" id="2733490">in</span><span class="op" id="2733492">[</span><span class="ident" id="2733493">i</span><span class="op" id="2733494">]</span><span class="op" id="2733495">.</span><span class="ident" id="2733496">Type</span><span class="op" id="2733500">(</span><span class="op" id="2733501">)</span><span class="op" id="2733502">,</span>&nbsp;<span class="ident" id="2733504">t</span><span class="op" id="2733505">.</span><span class="ident" id="2733506">In</span><span class="op" id="2733508">(</span><span class="ident" id="2733509">i</span><span class="op" id="2733510">)</span><span class="op" id="2733511">;</span>&nbsp;<span class="op" id="2733513">!</span><span class="ident" id="2733514">xt</span><span class="op" id="2733516">.</span><span class="ident" id="2733517">AssignableTo</span><span class="op" id="2733529">(</span><span class="ident" id="2733530">targ</span><span class="op" id="2733534">)</span>&nbsp;<span class="op" id="2733536">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733541">panic</span><span class="op" id="2733546">(</span><span class="string" id="2733547">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2733559">+</span>&nbsp;<span class="ident" id="2733561">op</span>&nbsp;<span class="op" id="2733564">+</span>&nbsp;<span class="string" id="2733566">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2733576">+</span>&nbsp;<span class="ident" id="2733578">xt</span><span class="op" id="2733580">.</span><span class="ident" id="2733581">String</span><span class="op" id="2733587">(</span><span class="op" id="2733588">)</span>&nbsp;<span class="op" id="2733590">+</span>&nbsp;<span class="string" id="2733592">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2733604">+</span>&nbsp;<span class="ident" id="2733606">targ</span><span class="op" id="2733610">.</span><span class="ident" id="2733611">String</span><span class="op" id="2733617">(</span><span class="op" id="2733618">)</span><span class="op" id="2733619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733629">if</span>&nbsp;<span class="op" id="2733632">!</span><span class="ident" id="2733633">isSlice</span>&nbsp;<span class="op" id="2733641">&amp;&amp;</span>&nbsp;<span class="ident" id="2733644">t</span><span class="op" id="2733645">.</span><span class="ident" id="2733646">IsVariadic</span><span class="op" id="2733656">(</span><span class="op" id="2733657">)</span>&nbsp;<span class="op" id="2733659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2733663">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733703">m</span>&nbsp;<span class="op" id="2733705">:=</span>&nbsp;<span class="builtinfunc" id="2733708">len</span><span class="op" id="2733711">(</span><span class="ident" id="2733712">in</span><span class="op" id="2733714">)</span>&nbsp;<span class="op" id="2733716">-</span>&nbsp;<span class="ident" id="2733718">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733722">slice</span>&nbsp;<span class="op" id="2733728">:=</span>&nbsp;<span class="ident" id="2733731">MakeSlice</span><span class="op" id="2733740">(</span><span class="ident" id="2733741">t</span><span class="op" id="2733742">.</span><span class="ident" id="2733743">In</span><span class="op" id="2733745">(</span><span class="ident" id="2733746">n</span><span class="op" id="2733747">)</span><span class="op" id="2733748">,</span>&nbsp;<span class="ident" id="2733750">m</span><span class="op" id="2733751">,</span>&nbsp;<span class="ident" id="2733753">m</span><span class="op" id="2733754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733758">elem</span>&nbsp;<span class="op" id="2733763">:=</span>&nbsp;<span class="ident" id="2733766">t</span><span class="op" id="2733767">.</span><span class="ident" id="2733768">In</span><span class="op" id="2733770">(</span><span class="ident" id="2733771">n</span><span class="op" id="2733772">)</span><span class="op" id="2733773">.</span><span class="ident" id="2733774">Elem</span><span class="op" id="2733778">(</span><span class="op" id="2733779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733783">for</span>&nbsp;<span class="ident" id="2733787">i</span>&nbsp;<span class="op" id="2733789">:=</span>&nbsp;<span class="num" id="2733792">0</span><span class="op" id="2733793">;</span>&nbsp;<span class="ident" id="2733795">i</span>&nbsp;<span class="op" id="2733797">&lt;</span>&nbsp;<span class="ident" id="2733799">m</span><span class="op" id="2733800">;</span>&nbsp;<span class="ident" id="2733802">i</span><span class="op" id="2733803">++</span>&nbsp;<span class="op" id="2733806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733811">x</span>&nbsp;<span class="op" id="2733813">:=</span>&nbsp;<span class="ident" id="2733816">in</span><span class="op" id="2733818">[</span><span class="ident" id="2733819">n</span><span class="op" id="2733820">+</span><span class="ident" id="2733821">i</span><span class="op" id="2733822">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733827">if</span>&nbsp;<span class="ident" id="2733830">xt</span>&nbsp;<span class="op" id="2733833">:=</span>&nbsp;<span class="ident" id="2733836">x</span><span class="op" id="2733837">.</span><span class="ident" id="2733838">Type</span><span class="op" id="2733842">(</span><span class="op" id="2733843">)</span><span class="op" id="2733844">;</span>&nbsp;<span class="op" id="2733846">!</span><span class="ident" id="2733847">xt</span><span class="op" id="2733849">.</span><span class="ident" id="2733850">AssignableTo</span><span class="op" id="2733862">(</span><span class="ident" id="2733863">elem</span><span class="op" id="2733867">)</span>&nbsp;<span class="op" id="2733869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733875">panic</span><span class="op" id="2733880">(</span><span class="string" id="2733881">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2733904">+</span>&nbsp;<span class="ident" id="2733906">xt</span><span class="op" id="2733908">.</span><span class="ident" id="2733909">String</span><span class="op" id="2733915">(</span><span class="op" id="2733916">)</span>&nbsp;<span class="op" id="2733918">+</span>&nbsp;<span class="string" id="2733920">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2733932">+</span>&nbsp;<span class="ident" id="2733934">elem</span><span class="op" id="2733938">.</span><span class="ident" id="2733939">String</span><span class="op" id="2733945">(</span><span class="op" id="2733946">)</span>&nbsp;<span class="op" id="2733948">+</span>&nbsp;<span class="string" id="2733950">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2733957">+</span>&nbsp;<span class="ident" id="2733959">op</span><span class="op" id="2733961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733971">slice</span><span class="op" id="2733976">.</span><span class="ident" id="2733977">Index</span><span class="op" id="2733982">(</span><span class="ident" id="2733983">i</span><span class="op" id="2733984">)</span><span class="op" id="2733985">.</span><span class="ident" id="2733986">Set</span><span class="op" id="2733989">(</span><span class="ident" id="2733990">x</span><span class="op" id="2733991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733995">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733999">origIn</span>&nbsp;<span class="op" id="2734006">:=</span>&nbsp;<span class="ident" id="2734009">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734014">in</span>&nbsp;<span class="op" id="2734017">=</span>&nbsp;<span class="builtinfunc" id="2734019">make</span><span class="op" id="2734023">(</span><span class="op" id="2734024">[</span><span class="op" id="2734025">]</span><span class="ident" id="2734026">Value</span><span class="op" id="2734031">,</span>&nbsp;<span class="ident" id="2734033">n</span><span class="op" id="2734034">+</span><span class="num" id="2734035">1</span><span class="op" id="2734036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2734040">copy</span><span class="op" id="2734044">(</span><span class="ident" id="2734045">in</span><span class="op" id="2734047">[</span><span class="op" id="2734048">:</span><span class="ident" id="2734049">n</span><span class="op" id="2734050">]</span><span class="op" id="2734051">,</span>&nbsp;<span class="ident" id="2734053">origIn</span><span class="op" id="2734059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734063">in</span><span class="op" id="2734065">[</span><span class="ident" id="2734066">n</span><span class="op" id="2734067">]</span>&nbsp;<span class="op" id="2734069">=</span>&nbsp;<span class="ident" id="2734071">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734078">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734082">nin</span>&nbsp;<span class="op" id="2734086">:=</span>&nbsp;<span class="builtinfunc" id="2734089">len</span><span class="op" id="2734092">(</span><span class="ident" id="2734093">in</span><span class="op" id="2734095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734098">if</span>&nbsp;<span class="ident" id="2734101">nin</span>&nbsp;<span class="op" id="2734105">!=</span>&nbsp;<span class="ident" id="2734108">t</span><span class="op" id="2734109">.</span><span class="ident" id="2734110">NumIn</span><span class="op" id="2734115">(</span><span class="op" id="2734116">)</span>&nbsp;<span class="op" id="2734118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2734122">panic</span><span class="op" id="2734127">(</span><span class="string" id="2734128">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2734170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734173">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734176">nout</span>&nbsp;<span class="op" id="2734181">:=</span>&nbsp;<span class="ident" id="2734184">t</span><span class="op" id="2734185">.</span><span class="ident" id="2734186">NumOut</span><span class="op" id="2734192">(</span><span class="op" id="2734193">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734197">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734258">frametype</span><span class="op" id="2734267">,</span>&nbsp;<span class="ident" id="2734269">_</span><span class="op" id="2734270">,</span>&nbsp;<span class="ident" id="2734272">retOffset</span><span class="op" id="2734281">,</span>&nbsp;<span class="ident" id="2734283">_</span>&nbsp;<span class="op" id="2734285">:=</span>&nbsp;<span class="ident" id="2734288">funcLayout</span><span class="op" id="2734298">(</span><span class="ident" id="2734299">t</span><span class="op" id="2734300">,</span>&nbsp;<span class="ident" id="2734302">rcvrtype</span><span class="op" id="2734310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734313">args</span>&nbsp;<span class="op" id="2734318">:=</span>&nbsp;<span class="ident" id="2734321">unsafe_New</span><span class="op" id="2734331">(</span><span class="ident" id="2734332">frametype</span><span class="op" id="2734341">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734344">off</span>&nbsp;<span class="op" id="2734348">:=</span>&nbsp;<span class="builtintype" id="2734351">uintptr</span><span class="op" id="2734358">(</span><span class="num" id="2734359">0</span><span class="op" id="2734360">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734364">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734391">if</span>&nbsp;<span class="ident" id="2734394">rcvrtype</span>&nbsp;<span class="op" id="2734403">!=</span>&nbsp;<span class="ident" id="2734406">nil</span>&nbsp;<span class="op" id="2734410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734414">storeRcvr</span><span class="op" id="2734423">(</span><span class="ident" id="2734424">rcvr</span><span class="op" id="2734428">,</span>&nbsp;<span class="ident" id="2734430">args</span><span class="op" id="2734434">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734438">off</span>&nbsp;<span class="op" id="2734442">=</span>&nbsp;<span class="ident" id="2734444">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734456">for</span>&nbsp;<span class="ident" id="2734460">i</span><span class="op" id="2734461">,</span>&nbsp;<span class="ident" id="2734463">v</span>&nbsp;<span class="op" id="2734465">:=</span>&nbsp;<span class="keyword" id="2734468">range</span>&nbsp;<span class="ident" id="2734474">in</span>&nbsp;<span class="op" id="2734477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734481">v</span><span class="op" id="2734482">.</span><span class="ident" id="2734483">mustBeExported</span><span class="op" id="2734497">(</span><span class="op" id="2734498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734502">targ</span>&nbsp;<span class="op" id="2734507">:=</span>&nbsp;<span class="ident" id="2734510">t</span><span class="op" id="2734511">.</span><span class="ident" id="2734512">In</span><span class="op" id="2734514">(</span><span class="ident" id="2734515">i</span><span class="op" id="2734516">)</span><span class="op" id="2734517">.</span><span class="op" id="2734518">(</span><span class="op" id="2734519">*</span><span class="ident" id="2734520">rtype</span><span class="op" id="2734525">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734529">a</span>&nbsp;<span class="op" id="2734531">:=</span>&nbsp;<span class="builtintype" id="2734534">uintptr</span><span class="op" id="2734541">(</span><span class="ident" id="2734542">targ</span><span class="op" id="2734546">.</span><span class="ident" id="2734547">align</span><span class="op" id="2734552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734556">off</span>&nbsp;<span class="op" id="2734560">=</span>&nbsp;<span class="op" id="2734562">(</span><span class="ident" id="2734563">off</span>&nbsp;<span class="op" id="2734567">+</span>&nbsp;<span class="ident" id="2734569">a</span>&nbsp;<span class="op" id="2734571">-</span>&nbsp;<span class="num" id="2734573">1</span><span class="op" id="2734574">)</span>&nbsp;<span class="op" id="2734576">&amp;^</span>&nbsp;<span class="op" id="2734579">(</span><span class="ident" id="2734580">a</span>&nbsp;<span class="op" id="2734582">-</span>&nbsp;<span class="num" id="2734584">1</span><span class="op" id="2734585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734589">n</span>&nbsp;<span class="op" id="2734591">:=</span>&nbsp;<span class="ident" id="2734594">targ</span><span class="op" id="2734598">.</span><span class="ident" id="2734599">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734606">addr</span>&nbsp;<span class="op" id="2734611">:=</span>&nbsp;<span class="ident" id="2734614">unsafe</span><span class="op" id="2734620">.</span><span class="ident" id="2734621">Pointer</span><span class="op" id="2734628">(</span><span class="builtintype" id="2734629">uintptr</span><span class="op" id="2734636">(</span><span class="ident" id="2734637">args</span><span class="op" id="2734641">)</span>&nbsp;<span class="op" id="2734643">+</span>&nbsp;<span class="ident" id="2734645">off</span><span class="op" id="2734648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734652">v</span>&nbsp;<span class="op" id="2734654">=</span>&nbsp;<span class="ident" id="2734656">v</span><span class="op" id="2734657">.</span><span class="ident" id="2734658">assignTo</span><span class="op" id="2734666">(</span><span class="string" id="2734667">&#34;reflect.Value.Call&#34;</span><span class="op" id="2734687">,</span>&nbsp;<span class="ident" id="2734689">targ</span><span class="op" id="2734693">,</span>&nbsp;<span class="ident" id="2734695">addr</span><span class="op" id="2734699">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734703">if</span>&nbsp;<span class="ident" id="2734706">v</span><span class="op" id="2734707">.</span><span class="ident" id="2734708">flag</span><span class="op" id="2734712">&amp;</span><span class="ident" id="2734713">flagIndir</span>&nbsp;<span class="op" id="2734723">!=</span>&nbsp;<span class="num" id="2734726">0</span>&nbsp;<span class="op" id="2734728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734733">memmove</span><span class="op" id="2734740">(</span><span class="ident" id="2734741">addr</span><span class="op" id="2734745">,</span>&nbsp;<span class="ident" id="2734747">v</span><span class="op" id="2734748">.</span><span class="ident" id="2734749">ptr</span><span class="op" id="2734752">,</span>&nbsp;<span class="ident" id="2734754">n</span><span class="op" id="2734755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734759">}</span>&nbsp;<span class="keyword" id="2734761">else</span>&nbsp;<span class="op" id="2734766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734771">*</span><span class="op" id="2734772">(</span><span class="op" id="2734773">*</span><span class="ident" id="2734774">unsafe</span><span class="op" id="2734780">.</span><span class="ident" id="2734781">Pointer</span><span class="op" id="2734788">)</span><span class="op" id="2734789">(</span><span class="ident" id="2734790">addr</span><span class="op" id="2734794">)</span>&nbsp;<span class="op" id="2734796">=</span>&nbsp;<span class="ident" id="2734798">v</span><span class="op" id="2734799">.</span><span class="ident" id="2734800">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734806">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734810">off</span>&nbsp;<span class="op" id="2734814">+=</span>&nbsp;<span class="ident" id="2734817">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734824">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734834">call</span><span class="op" id="2734838">(</span><span class="ident" id="2734839">fn</span><span class="op" id="2734841">,</span>&nbsp;<span class="ident" id="2734843">args</span><span class="op" id="2734847">,</span>&nbsp;<span class="builtintype" id="2734849">uint32</span><span class="op" id="2734855">(</span><span class="ident" id="2734856">frametype</span><span class="op" id="2734865">.</span><span class="ident" id="2734866">size</span><span class="op" id="2734870">)</span><span class="op" id="2734871">,</span>&nbsp;<span class="builtintype" id="2734873">uint32</span><span class="op" id="2734879">(</span><span class="ident" id="2734880">retOffset</span><span class="op" id="2734889">)</span><span class="op" id="2734890">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734894">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734935">if</span>&nbsp;<span class="ident" id="2734938">callGC</span>&nbsp;<span class="op" id="2734945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734949">runtime</span><span class="op" id="2734956">.</span><span class="ident" id="2734957">GC</span><span class="op" id="2734959">(</span><span class="op" id="2734960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734963">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734967">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735003">ret</span>&nbsp;<span class="op" id="2735007">:=</span>&nbsp;<span class="builtinfunc" id="2735010">make</span><span class="op" id="2735014">(</span><span class="op" id="2735015">[</span><span class="op" id="2735016">]</span><span class="ident" id="2735017">Value</span><span class="op" id="2735022">,</span>&nbsp;<span class="ident" id="2735024">nout</span><span class="op" id="2735028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735031">off</span>&nbsp;<span class="op" id="2735035">=</span>&nbsp;<span class="ident" id="2735037">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735048">for</span>&nbsp;<span class="ident" id="2735052">i</span>&nbsp;<span class="op" id="2735054">:=</span>&nbsp;<span class="num" id="2735057">0</span><span class="op" id="2735058">;</span>&nbsp;<span class="ident" id="2735060">i</span>&nbsp;<span class="op" id="2735062">&lt;</span>&nbsp;<span class="ident" id="2735064">nout</span><span class="op" id="2735068">;</span>&nbsp;<span class="ident" id="2735070">i</span><span class="op" id="2735071">++</span>&nbsp;<span class="op" id="2735074">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735078">tv</span>&nbsp;<span class="op" id="2735081">:=</span>&nbsp;<span class="ident" id="2735084">t</span><span class="op" id="2735085">.</span><span class="ident" id="2735086">Out</span><span class="op" id="2735089">(</span><span class="ident" id="2735090">i</span><span class="op" id="2735091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735095">a</span>&nbsp;<span class="op" id="2735097">:=</span>&nbsp;<span class="builtintype" id="2735100">uintptr</span><span class="op" id="2735107">(</span><span class="ident" id="2735108">tv</span><span class="op" id="2735110">.</span><span class="ident" id="2735111">Align</span><span class="op" id="2735116">(</span><span class="op" id="2735117">)</span><span class="op" id="2735118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735122">off</span>&nbsp;<span class="op" id="2735126">=</span>&nbsp;<span class="op" id="2735128">(</span><span class="ident" id="2735129">off</span>&nbsp;<span class="op" id="2735133">+</span>&nbsp;<span class="ident" id="2735135">a</span>&nbsp;<span class="op" id="2735137">-</span>&nbsp;<span class="num" id="2735139">1</span><span class="op" id="2735140">)</span>&nbsp;<span class="op" id="2735142">&amp;^</span>&nbsp;<span class="op" id="2735145">(</span><span class="ident" id="2735146">a</span>&nbsp;<span class="op" id="2735148">-</span>&nbsp;<span class="num" id="2735150">1</span><span class="op" id="2735151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735155">fl</span>&nbsp;<span class="op" id="2735158">:=</span>&nbsp;<span class="ident" id="2735161">flagIndir</span>&nbsp;<span class="op" id="2735171">|</span>&nbsp;<span class="ident" id="2735173">flag</span><span class="op" id="2735177">(</span><span class="ident" id="2735178">tv</span><span class="op" id="2735180">.</span><span class="ident" id="2735181">Kind</span><span class="op" id="2735185">(</span><span class="op" id="2735186">)</span><span class="op" id="2735187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735191">ret</span><span class="op" id="2735194">[</span><span class="ident" id="2735195">i</span><span class="op" id="2735196">]</span>&nbsp;<span class="op" id="2735198">=</span>&nbsp;<span class="ident" id="2735200">Value</span><span class="op" id="2735205">{</span><span class="ident" id="2735206">tv</span><span class="op" id="2735208">.</span><span class="ident" id="2735209">common</span><span class="op" id="2735215">(</span><span class="op" id="2735216">)</span><span class="op" id="2735217">,</span>&nbsp;<span class="ident" id="2735219">unsafe</span><span class="op" id="2735225">.</span><span class="ident" id="2735226">Pointer</span><span class="op" id="2735233">(</span><span class="builtintype" id="2735234">uintptr</span><span class="op" id="2735241">(</span><span class="ident" id="2735242">args</span><span class="op" id="2735246">)</span>&nbsp;<span class="op" id="2735248">+</span>&nbsp;<span class="ident" id="2735250">off</span><span class="op" id="2735253">)</span><span class="op" id="2735254">,</span>&nbsp;<span class="ident" id="2735256">fl</span><span class="op" id="2735258">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735262">off</span>&nbsp;<span class="op" id="2735266">+=</span>&nbsp;<span class="ident" id="2735269">tv</span><span class="op" id="2735271">.</span><span class="ident" id="2735272">Size</span><span class="op" id="2735276">(</span><span class="op" id="2735277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2735280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2735284">return</span>&nbsp;<span class="ident" id="2735291">ret</span><br>
<span class="lineno"></span><span class="op" id="2735295">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2735298">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2735359">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2735423">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2735497">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2735564">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2735634">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2735669">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2735740">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2735807">//</span><br>
<span class="lineno">450</span><span class="comment" id="2735810">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2735886">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2735958">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2736030">func</span>&nbsp;<span class="ident" id="2736035">callReflect</span><span class="op" id="2736046">(</span><span class="ident" id="2736047">ctxt</span>&nbsp;<span class="op" id="2736052">*</span><span class="ident" id="2736053">makeFuncImpl</span><span class="op" id="2736065">,</span>&nbsp;<span class="ident" id="2736067">frame</span>&nbsp;<span class="ident" id="2736073">unsafe</span><span class="op" id="2736079">.</span><span class="ident" id="2736080">Pointer</span><span class="op" id="2736087">)</span>&nbsp;<span class="op" id="2736089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736092">ftyp</span>&nbsp;<span class="op" id="2736097">:=</span>&nbsp;<span class="ident" id="2736100">ctxt</span><span class="op" id="2736104">.</span><span class="ident" id="2736105">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736110">f</span>&nbsp;<span class="op" id="2736112">:=</span>&nbsp;<span class="ident" id="2736115">ctxt</span><span class="op" id="2736119">.</span><span class="ident" id="2736120">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736125">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736162">ptr</span>&nbsp;<span class="op" id="2736166">:=</span>&nbsp;<span class="ident" id="2736169">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736176">off</span>&nbsp;<span class="op" id="2736180">:=</span>&nbsp;<span class="builtintype" id="2736183">uintptr</span><span class="op" id="2736190">(</span><span class="num" id="2736191">0</span><span class="op" id="2736192">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736195">in</span>&nbsp;<span class="op" id="2736198">:=</span>&nbsp;<span class="builtinfunc" id="2736201">make</span><span class="op" id="2736205">(</span><span class="op" id="2736206">[</span><span class="op" id="2736207">]</span><span class="ident" id="2736208">Value</span><span class="op" id="2736213">,</span>&nbsp;<span class="num" id="2736215">0</span><span class="op" id="2736216">,</span>&nbsp;<span class="builtinfunc" id="2736218">len</span><span class="op" id="2736221">(</span><span class="ident" id="2736222">ftyp</span><span class="op" id="2736226">.</span><span class="ident" id="2736227">in</span><span class="op" id="2736229">)</span><span class="op" id="2736230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736233">for</span>&nbsp;<span class="ident" id="2736237">_</span><span class="op" id="2736238">,</span>&nbsp;<span class="ident" id="2736240">arg</span>&nbsp;<span class="op" id="2736244">:=</span>&nbsp;<span class="keyword" id="2736247">range</span>&nbsp;<span class="ident" id="2736253">ftyp</span><span class="op" id="2736257">.</span><span class="ident" id="2736258">in</span>&nbsp;<span class="op" id="2736261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736265">typ</span>&nbsp;<span class="op" id="2736269">:=</span>&nbsp;<span class="ident" id="2736272">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736278">off</span>&nbsp;<span class="op" id="2736282">+=</span>&nbsp;<span class="op" id="2736285">-</span><span class="ident" id="2736286">off</span>&nbsp;<span class="op" id="2736290">&amp;</span>&nbsp;<span class="builtintype" id="2736292">uintptr</span><span class="op" id="2736299">(</span><span class="ident" id="2736300">typ</span><span class="op" id="2736303">.</span><span class="ident" id="2736304">align</span><span class="op" id="2736309">-</span><span class="num" id="2736310">1</span><span class="op" id="2736311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736315">addr</span>&nbsp;<span class="op" id="2736320">:=</span>&nbsp;<span class="ident" id="2736323">unsafe</span><span class="op" id="2736329">.</span><span class="ident" id="2736330">Pointer</span><span class="op" id="2736337">(</span><span class="builtintype" id="2736338">uintptr</span><span class="op" id="2736345">(</span><span class="ident" id="2736346">ptr</span><span class="op" id="2736349">)</span>&nbsp;<span class="op" id="2736351">+</span>&nbsp;<span class="ident" id="2736353">off</span><span class="op" id="2736356">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736360">v</span>&nbsp;<span class="op" id="2736362">:=</span>&nbsp;<span class="ident" id="2736365">Value</span><span class="op" id="2736370">{</span><span class="ident" id="2736371">typ</span><span class="op" id="2736374">,</span>&nbsp;<span class="ident" id="2736376">nil</span><span class="op" id="2736379">,</span>&nbsp;<span class="ident" id="2736381">flag</span><span class="op" id="2736385">(</span><span class="ident" id="2736386">typ</span><span class="op" id="2736389">.</span><span class="ident" id="2736390">Kind</span><span class="op" id="2736394">(</span><span class="op" id="2736395">)</span><span class="op" id="2736396">)</span><span class="op" id="2736397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736401">if</span>&nbsp;<span class="ident" id="2736404">ifaceIndir</span><span class="op" id="2736414">(</span><span class="ident" id="2736415">typ</span><span class="op" id="2736418">)</span>&nbsp;<span class="op" id="2736420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736425">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736474">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736538">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736600">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736667">v</span><span class="op" id="2736668">.</span><span class="ident" id="2736669">ptr</span>&nbsp;<span class="op" id="2736673">=</span>&nbsp;<span class="ident" id="2736675">unsafe_New</span><span class="op" id="2736685">(</span><span class="ident" id="2736686">typ</span><span class="op" id="2736689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736694">memmove</span><span class="op" id="2736701">(</span><span class="ident" id="2736702">v</span><span class="op" id="2736703">.</span><span class="ident" id="2736704">ptr</span><span class="op" id="2736707">,</span>&nbsp;<span class="ident" id="2736709">addr</span><span class="op" id="2736713">,</span>&nbsp;<span class="ident" id="2736715">typ</span><span class="op" id="2736718">.</span><span class="ident" id="2736719">size</span><span class="op" id="2736723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736728">v</span><span class="op" id="2736729">.</span><span class="ident" id="2736730">flag</span>&nbsp;<span class="op" id="2736735">|=</span>&nbsp;<span class="ident" id="2736738">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736750">}</span>&nbsp;<span class="keyword" id="2736752">else</span>&nbsp;<span class="op" id="2736757">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736762">v</span><span class="op" id="2736763">.</span><span class="ident" id="2736764">ptr</span>&nbsp;<span class="op" id="2736768">=</span>&nbsp;<span class="op" id="2736770">*</span><span class="op" id="2736771">(</span><span class="op" id="2736772">*</span><span class="ident" id="2736773">unsafe</span><span class="op" id="2736779">.</span><span class="ident" id="2736780">Pointer</span><span class="op" id="2736787">)</span><span class="op" id="2736788">(</span><span class="ident" id="2736789">addr</span><span class="op" id="2736793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736801">in</span>&nbsp;<span class="op" id="2736804">=</span>&nbsp;<span class="builtinfunc" id="2736806">append</span><span class="op" id="2736812">(</span><span class="ident" id="2736813">in</span><span class="op" id="2736815">,</span>&nbsp;<span class="ident" id="2736817">v</span><span class="op" id="2736818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736822">off</span>&nbsp;<span class="op" id="2736826">+=</span>&nbsp;<span class="ident" id="2736829">typ</span><span class="op" id="2736832">.</span><span class="ident" id="2736833">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736839">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736843">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736873">out</span>&nbsp;<span class="op" id="2736877">:=</span>&nbsp;<span class="ident" id="2736880">f</span><span class="op" id="2736881">(</span><span class="ident" id="2736882">in</span><span class="op" id="2736884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736887">if</span>&nbsp;<span class="builtinfunc" id="2736890">len</span><span class="op" id="2736893">(</span><span class="ident" id="2736894">out</span><span class="op" id="2736897">)</span>&nbsp;<span class="op" id="2736899">!=</span>&nbsp;<span class="builtinfunc" id="2736902">len</span><span class="op" id="2736905">(</span><span class="ident" id="2736906">ftyp</span><span class="op" id="2736910">.</span><span class="ident" id="2736911">out</span><span class="op" id="2736914">)</span>&nbsp;<span class="op" id="2736916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2736920">panic</span><span class="op" id="2736925">(</span><span class="string" id="2736926">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2736989">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736996">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737039">if</span>&nbsp;<span class="builtinfunc" id="2737042">len</span><span class="op" id="2737045">(</span><span class="ident" id="2737046">ftyp</span><span class="op" id="2737050">.</span><span class="ident" id="2737051">out</span><span class="op" id="2737054">)</span>&nbsp;<span class="op" id="2737056">&gt;</span>&nbsp;<span class="num" id="2737058">0</span>&nbsp;<span class="op" id="2737060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737064">off</span>&nbsp;<span class="op" id="2737068">+=</span>&nbsp;<span class="op" id="2737071">-</span><span class="ident" id="2737072">off</span>&nbsp;<span class="op" id="2737076">&amp;</span>&nbsp;<span class="op" id="2737078">(</span><span class="ident" id="2737079">ptrSize</span>&nbsp;<span class="op" id="2737087">-</span>&nbsp;<span class="num" id="2737089">1</span><span class="op" id="2737090">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737094">if</span>&nbsp;<span class="ident" id="2737097">runtime</span><span class="op" id="2737104">.</span><span class="ident" id="2737105">GOARCH</span>&nbsp;<span class="op" id="2737112">==</span>&nbsp;<span class="string" id="2737115">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2737126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737131">off</span>&nbsp;<span class="op" id="2737135">=</span>&nbsp;<span class="ident" id="2737137">align</span><span class="op" id="2737142">(</span><span class="ident" id="2737143">off</span><span class="op" id="2737146">,</span>&nbsp;<span class="num" id="2737148">8</span><span class="op" id="2737149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737157">for</span>&nbsp;<span class="ident" id="2737161">i</span><span class="op" id="2737162">,</span>&nbsp;<span class="ident" id="2737164">arg</span>&nbsp;<span class="op" id="2737168">:=</span>&nbsp;<span class="keyword" id="2737171">range</span>&nbsp;<span class="ident" id="2737177">ftyp</span><span class="op" id="2737181">.</span><span class="ident" id="2737182">out</span>&nbsp;<span class="op" id="2737186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737191">typ</span>&nbsp;<span class="op" id="2737195">:=</span>&nbsp;<span class="ident" id="2737198">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737205">v</span>&nbsp;<span class="op" id="2737207">:=</span>&nbsp;<span class="ident" id="2737210">out</span><span class="op" id="2737213">[</span><span class="ident" id="2737214">i</span><span class="op" id="2737215">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737220">if</span>&nbsp;<span class="ident" id="2737223">v</span><span class="op" id="2737224">.</span><span class="ident" id="2737225">typ</span>&nbsp;<span class="op" id="2737229">!=</span>&nbsp;<span class="ident" id="2737232">typ</span>&nbsp;<span class="op" id="2737236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2737242">panic</span><span class="op" id="2737247">(</span><span class="string" id="2737248">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2737295">+</span>&nbsp;<span class="ident" id="2737297">funcName</span><span class="op" id="2737305">(</span><span class="ident" id="2737306">f</span><span class="op" id="2737307">)</span>&nbsp;<span class="op" id="2737309">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2737316">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2737346">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737353">out</span><span class="op" id="2737356">[</span><span class="ident" id="2737357">i</span><span class="op" id="2737358">]</span><span class="op" id="2737359">.</span><span class="ident" id="2737360">typ</span><span class="op" id="2737363">.</span><span class="ident" id="2737364">String</span><span class="op" id="2737370">(</span><span class="op" id="2737371">)</span>&nbsp;<span class="op" id="2737373">+</span>&nbsp;<span class="string" id="2737375">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2737383">+</span>&nbsp;<span class="ident" id="2737385">typ</span><span class="op" id="2737388">.</span><span class="ident" id="2737389">String</span><span class="op" id="2737395">(</span><span class="op" id="2737396">)</span><span class="op" id="2737397">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737407">if</span>&nbsp;<span class="ident" id="2737410">v</span><span class="op" id="2737411">.</span><span class="ident" id="2737412">flag</span><span class="op" id="2737416">&amp;</span><span class="ident" id="2737417">flagRO</span>&nbsp;<span class="op" id="2737424">!=</span>&nbsp;<span class="num" id="2737427">0</span>&nbsp;<span class="op" id="2737429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2737435">panic</span><span class="op" id="2737440">(</span><span class="string" id="2737441">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2737488">+</span>&nbsp;<span class="ident" id="2737490">funcName</span><span class="op" id="2737498">(</span><span class="ident" id="2737499">f</span><span class="op" id="2737500">)</span>&nbsp;<span class="op" id="2737502">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2737509">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2737557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737562">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737567">off</span>&nbsp;<span class="op" id="2737571">+=</span>&nbsp;<span class="op" id="2737574">-</span><span class="ident" id="2737575">off</span>&nbsp;<span class="op" id="2737579">&amp;</span>&nbsp;<span class="builtintype" id="2737581">uintptr</span><span class="op" id="2737588">(</span><span class="ident" id="2737589">typ</span><span class="op" id="2737592">.</span><span class="ident" id="2737593">align</span><span class="op" id="2737598">-</span><span class="num" id="2737599">1</span><span class="op" id="2737600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737605">addr</span>&nbsp;<span class="op" id="2737610">:=</span>&nbsp;<span class="ident" id="2737613">unsafe</span><span class="op" id="2737619">.</span><span class="ident" id="2737620">Pointer</span><span class="op" id="2737627">(</span><span class="builtintype" id="2737628">uintptr</span><span class="op" id="2737635">(</span><span class="ident" id="2737636">ptr</span><span class="op" id="2737639">)</span>&nbsp;<span class="op" id="2737641">+</span>&nbsp;<span class="ident" id="2737643">off</span><span class="op" id="2737646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737651">if</span>&nbsp;<span class="ident" id="2737654">v</span><span class="op" id="2737655">.</span><span class="ident" id="2737656">flag</span><span class="op" id="2737660">&amp;</span><span class="ident" id="2737661">flagIndir</span>&nbsp;<span class="op" id="2737671">!=</span>&nbsp;<span class="num" id="2737674">0</span>&nbsp;<span class="op" id="2737676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737682">memmove</span><span class="op" id="2737689">(</span><span class="ident" id="2737690">addr</span><span class="op" id="2737694">,</span>&nbsp;<span class="ident" id="2737696">v</span><span class="op" id="2737697">.</span><span class="ident" id="2737698">ptr</span><span class="op" id="2737701">,</span>&nbsp;<span class="ident" id="2737703">typ</span><span class="op" id="2737706">.</span><span class="ident" id="2737707">size</span><span class="op" id="2737711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737716">}</span>&nbsp;<span class="keyword" id="2737718">else</span>&nbsp;<span class="op" id="2737723">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737729">*</span><span class="op" id="2737730">(</span><span class="op" id="2737731">*</span><span class="ident" id="2737732">unsafe</span><span class="op" id="2737738">.</span><span class="ident" id="2737739">Pointer</span><span class="op" id="2737746">)</span><span class="op" id="2737747">(</span><span class="ident" id="2737748">addr</span><span class="op" id="2737752">)</span>&nbsp;<span class="op" id="2737754">=</span>&nbsp;<span class="ident" id="2737756">v</span><span class="op" id="2737757">.</span><span class="ident" id="2737758">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737770">off</span>&nbsp;<span class="op" id="2737774">+=</span>&nbsp;<span class="ident" id="2737777">typ</span><span class="op" id="2737780">.</span><span class="ident" id="2737781">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737791">}</span><br>
<span class="lineno">515</span><span class="op" id="2737793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2737796">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2737853">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2737908">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2737967">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2737983">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2738053">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2738131">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2738187">func</span>&nbsp;<span class="ident" id="2738192">methodReceiver</span><span class="op" id="2738206">(</span><span class="ident" id="2738207">op</span>&nbsp;<span class="builtintype" id="2738210">string</span><span class="op" id="2738216">,</span>&nbsp;<span class="ident" id="2738218">v</span>&nbsp;<span class="ident" id="2738220">Value</span><span class="op" id="2738225">,</span>&nbsp;<span class="ident" id="2738227">methodIndex</span>&nbsp;<span class="builtintype" id="2738239">int</span><span class="op" id="2738242">)</span>&nbsp;<span class="op" id="2738244">(</span><span class="ident" id="2738245">rcvrtype</span><span class="op" id="2738253">,</span>&nbsp;<span class="ident" id="2738255">t</span>&nbsp;<span class="op" id="2738257">*</span><span class="ident" id="2738258">rtype</span><span class="op" id="2738263">,</span>&nbsp;<span class="ident" id="2738265">fn</span>&nbsp;<span class="ident" id="2738268">unsafe</span><span class="op" id="2738274">.</span><span class="ident" id="2738275">Pointer</span><span class="op" id="2738282">)</span>&nbsp;<span class="op" id="2738284">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738287">i</span>&nbsp;<span class="op" id="2738289">:=</span>&nbsp;<span class="ident" id="2738292">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738305">if</span>&nbsp;<span class="ident" id="2738308">v</span><span class="op" id="2738309">.</span><span class="ident" id="2738310">typ</span><span class="op" id="2738313">.</span><span class="ident" id="2738314">Kind</span><span class="op" id="2738318">(</span><span class="op" id="2738319">)</span>&nbsp;<span class="op" id="2738321">==</span>&nbsp;<span class="ident" id="2738324">Interface</span>&nbsp;<span class="op" id="2738334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738338">tt</span>&nbsp;<span class="op" id="2738341">:=</span>&nbsp;<span class="op" id="2738344">(</span><span class="op" id="2738345">*</span><span class="ident" id="2738346">interfaceType</span><span class="op" id="2738359">)</span><span class="op" id="2738360">(</span><span class="ident" id="2738361">unsafe</span><span class="op" id="2738367">.</span><span class="ident" id="2738368">Pointer</span><span class="op" id="2738375">(</span><span class="ident" id="2738376">v</span><span class="op" id="2738377">.</span><span class="ident" id="2738378">typ</span><span class="op" id="2738381">)</span><span class="op" id="2738382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738386">if</span>&nbsp;<span class="builtintype" id="2738389">uint</span><span class="op" id="2738393">(</span><span class="ident" id="2738394">i</span><span class="op" id="2738395">)</span>&nbsp;<span class="op" id="2738397">&gt;=</span>&nbsp;<span class="builtintype" id="2738400">uint</span><span class="op" id="2738404">(</span><span class="builtinfunc" id="2738405">len</span><span class="op" id="2738408">(</span><span class="ident" id="2738409">tt</span><span class="op" id="2738411">.</span><span class="ident" id="2738412">methods</span><span class="op" id="2738419">)</span><span class="op" id="2738420">)</span>&nbsp;<span class="op" id="2738422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738427">panic</span><span class="op" id="2738432">(</span><span class="string" id="2738433">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2738480">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738488">m</span>&nbsp;<span class="op" id="2738490">:=</span>&nbsp;<span class="op" id="2738493">&amp;</span><span class="ident" id="2738494">tt</span><span class="op" id="2738496">.</span><span class="ident" id="2738497">methods</span><span class="op" id="2738504">[</span><span class="ident" id="2738505">i</span><span class="op" id="2738506">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738510">if</span>&nbsp;<span class="ident" id="2738513">m</span><span class="op" id="2738514">.</span><span class="ident" id="2738515">pkgPath</span>&nbsp;<span class="op" id="2738523">!=</span>&nbsp;<span class="ident" id="2738526">nil</span>&nbsp;<span class="op" id="2738530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738535">panic</span><span class="op" id="2738540">(</span><span class="string" id="2738541">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2738553">+</span>&nbsp;<span class="ident" id="2738555">op</span>&nbsp;<span class="op" id="2738558">+</span>&nbsp;<span class="string" id="2738560">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2738583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738587">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738591">iface</span>&nbsp;<span class="op" id="2738597">:=</span>&nbsp;<span class="op" id="2738600">(</span><span class="op" id="2738601">*</span><span class="ident" id="2738602">nonEmptyInterface</span><span class="op" id="2738619">)</span><span class="op" id="2738620">(</span><span class="ident" id="2738621">v</span><span class="op" id="2738622">.</span><span class="ident" id="2738623">ptr</span><span class="op" id="2738626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738630">if</span>&nbsp;<span class="ident" id="2738633">iface</span><span class="op" id="2738638">.</span><span class="ident" id="2738639">itab</span>&nbsp;<span class="op" id="2738644">==</span>&nbsp;<span class="ident" id="2738647">nil</span>&nbsp;<span class="op" id="2738651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738656">panic</span><span class="op" id="2738661">(</span><span class="string" id="2738662">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2738674">+</span>&nbsp;<span class="ident" id="2738676">op</span>&nbsp;<span class="op" id="2738679">+</span>&nbsp;<span class="string" id="2738681">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2738716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738724">rcvrtype</span>&nbsp;<span class="op" id="2738733">=</span>&nbsp;<span class="ident" id="2738735">iface</span><span class="op" id="2738740">.</span><span class="ident" id="2738741">itab</span><span class="op" id="2738745">.</span><span class="ident" id="2738746">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738752">fn</span>&nbsp;<span class="op" id="2738755">=</span>&nbsp;<span class="ident" id="2738757">unsafe</span><span class="op" id="2738763">.</span><span class="ident" id="2738764">Pointer</span><span class="op" id="2738771">(</span><span class="op" id="2738772">&amp;</span><span class="ident" id="2738773">iface</span><span class="op" id="2738778">.</span><span class="ident" id="2738779">itab</span><span class="op" id="2738783">.</span><span class="ident" id="2738784">fun</span><span class="op" id="2738787">[</span><span class="ident" id="2738788">i</span><span class="op" id="2738789">]</span><span class="op" id="2738790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738794">t</span>&nbsp;<span class="op" id="2738796">=</span>&nbsp;<span class="ident" id="2738798">m</span><span class="op" id="2738799">.</span><span class="ident" id="2738800">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738805">}</span>&nbsp;<span class="keyword" id="2738807">else</span>&nbsp;<span class="op" id="2738812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738816">rcvrtype</span>&nbsp;<span class="op" id="2738825">=</span>&nbsp;<span class="ident" id="2738827">v</span><span class="op" id="2738828">.</span><span class="ident" id="2738829">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738835">ut</span>&nbsp;<span class="op" id="2738838">:=</span>&nbsp;<span class="ident" id="2738841">v</span><span class="op" id="2738842">.</span><span class="ident" id="2738843">typ</span><span class="op" id="2738846">.</span><span class="ident" id="2738847">uncommon</span><span class="op" id="2738855">(</span><span class="op" id="2738856">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738860">if</span>&nbsp;<span class="ident" id="2738863">ut</span>&nbsp;<span class="op" id="2738866">==</span>&nbsp;<span class="ident" id="2738869">nil</span>&nbsp;<span class="op" id="2738873">||</span>&nbsp;<span class="builtintype" id="2738876">uint</span><span class="op" id="2738880">(</span><span class="ident" id="2738881">i</span><span class="op" id="2738882">)</span>&nbsp;<span class="op" id="2738884">&gt;=</span>&nbsp;<span class="builtintype" id="2738887">uint</span><span class="op" id="2738891">(</span><span class="builtinfunc" id="2738892">len</span><span class="op" id="2738895">(</span><span class="ident" id="2738896">ut</span><span class="op" id="2738898">.</span><span class="ident" id="2738899">methods</span><span class="op" id="2738906">)</span><span class="op" id="2738907">)</span>&nbsp;<span class="op" id="2738909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738914">panic</span><span class="op" id="2738919">(</span><span class="string" id="2738920">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2738967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738975">m</span>&nbsp;<span class="op" id="2738977">:=</span>&nbsp;<span class="op" id="2738980">&amp;</span><span class="ident" id="2738981">ut</span><span class="op" id="2738983">.</span><span class="ident" id="2738984">methods</span><span class="op" id="2738991">[</span><span class="ident" id="2738992">i</span><span class="op" id="2738993">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738997">if</span>&nbsp;<span class="ident" id="2739000">m</span><span class="op" id="2739001">.</span><span class="ident" id="2739002">pkgPath</span>&nbsp;<span class="op" id="2739010">!=</span>&nbsp;<span class="ident" id="2739013">nil</span>&nbsp;<span class="op" id="2739017">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2739022">panic</span><span class="op" id="2739027">(</span><span class="string" id="2739028">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2739040">+</span>&nbsp;<span class="ident" id="2739042">op</span>&nbsp;<span class="op" id="2739045">+</span>&nbsp;<span class="string" id="2739047">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2739070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739078">fn</span>&nbsp;<span class="op" id="2739081">=</span>&nbsp;<span class="ident" id="2739083">unsafe</span><span class="op" id="2739089">.</span><span class="ident" id="2739090">Pointer</span><span class="op" id="2739097">(</span><span class="op" id="2739098">&amp;</span><span class="ident" id="2739099">m</span><span class="op" id="2739100">.</span><span class="ident" id="2739101">ifn</span><span class="op" id="2739104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739108">t</span>&nbsp;<span class="op" id="2739110">=</span>&nbsp;<span class="ident" id="2739112">m</span><span class="op" id="2739113">.</span><span class="ident" id="2739114">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739120">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739123">return</span><br>
<span class="lineno"></span><span class="op" id="2739130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2739133">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2739198">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2739257">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2739312">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2739375">func</span>&nbsp;<span class="ident" id="2739380">storeRcvr</span><span class="op" id="2739389">(</span><span class="ident" id="2739390">v</span>&nbsp;<span class="ident" id="2739392">Value</span><span class="op" id="2739397">,</span>&nbsp;<span class="ident" id="2739399">p</span>&nbsp;<span class="ident" id="2739401">unsafe</span><span class="op" id="2739407">.</span><span class="ident" id="2739408">Pointer</span><span class="op" id="2739415">)</span>&nbsp;<span class="op" id="2739417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739420">t</span>&nbsp;<span class="op" id="2739422">:=</span>&nbsp;<span class="ident" id="2739425">v</span><span class="op" id="2739426">.</span><span class="ident" id="2739427">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739432">if</span>&nbsp;<span class="ident" id="2739435">t</span><span class="op" id="2739436">.</span><span class="ident" id="2739437">Kind</span><span class="op" id="2739441">(</span><span class="op" id="2739442">)</span>&nbsp;<span class="op" id="2739444">==</span>&nbsp;<span class="ident" id="2739447">Interface</span>&nbsp;<span class="op" id="2739457">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739461">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739516">iface</span>&nbsp;<span class="op" id="2739522">:=</span>&nbsp;<span class="op" id="2739525">(</span><span class="op" id="2739526">*</span><span class="ident" id="2739527">nonEmptyInterface</span><span class="op" id="2739544">)</span><span class="op" id="2739545">(</span><span class="ident" id="2739546">v</span><span class="op" id="2739547">.</span><span class="ident" id="2739548">ptr</span><span class="op" id="2739551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739555">*</span><span class="op" id="2739556">(</span><span class="op" id="2739557">*</span><span class="ident" id="2739558">unsafe</span><span class="op" id="2739564">.</span><span class="ident" id="2739565">Pointer</span><span class="op" id="2739572">)</span><span class="op" id="2739573">(</span><span class="ident" id="2739574">p</span><span class="op" id="2739575">)</span>&nbsp;<span class="op" id="2739577">=</span>&nbsp;<span class="ident" id="2739579">unsafe</span><span class="op" id="2739585">.</span><span class="ident" id="2739586">Pointer</span><span class="op" id="2739593">(</span><span class="ident" id="2739594">iface</span><span class="op" id="2739599">.</span><span class="ident" id="2739600">word</span><span class="op" id="2739604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739607">}</span>&nbsp;<span class="keyword" id="2739609">else</span>&nbsp;<span class="keyword" id="2739614">if</span>&nbsp;<span class="ident" id="2739617">v</span><span class="op" id="2739618">.</span><span class="ident" id="2739619">flag</span><span class="op" id="2739623">&amp;</span><span class="ident" id="2739624">flagIndir</span>&nbsp;<span class="op" id="2739634">!=</span>&nbsp;<span class="num" id="2739637">0</span>&nbsp;<span class="op" id="2739639">&amp;&amp;</span>&nbsp;<span class="op" id="2739642">!</span><span class="ident" id="2739643">ifaceIndir</span><span class="op" id="2739653">(</span><span class="ident" id="2739654">t</span><span class="op" id="2739655">)</span>&nbsp;<span class="op" id="2739657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739661">*</span><span class="op" id="2739662">(</span><span class="op" id="2739663">*</span><span class="ident" id="2739664">unsafe</span><span class="op" id="2739670">.</span><span class="ident" id="2739671">Pointer</span><span class="op" id="2739678">)</span><span class="op" id="2739679">(</span><span class="ident" id="2739680">p</span><span class="op" id="2739681">)</span>&nbsp;<span class="op" id="2739683">=</span>&nbsp;<span class="op" id="2739685">*</span><span class="op" id="2739686">(</span><span class="op" id="2739687">*</span><span class="ident" id="2739688">unsafe</span><span class="op" id="2739694">.</span><span class="ident" id="2739695">Pointer</span><span class="op" id="2739702">)</span><span class="op" id="2739703">(</span><span class="ident" id="2739704">v</span><span class="op" id="2739705">.</span><span class="ident" id="2739706">ptr</span><span class="op" id="2739709">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739712">}</span>&nbsp;<span class="keyword" id="2739714">else</span>&nbsp;<span class="op" id="2739719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739723">*</span><span class="op" id="2739724">(</span><span class="op" id="2739725">*</span><span class="ident" id="2739726">unsafe</span><span class="op" id="2739732">.</span><span class="ident" id="2739733">Pointer</span><span class="op" id="2739740">)</span><span class="op" id="2739741">(</span><span class="ident" id="2739742">p</span><span class="op" id="2739743">)</span>&nbsp;<span class="op" id="2739745">=</span>&nbsp;<span class="ident" id="2739747">v</span><span class="op" id="2739748">.</span><span class="ident" id="2739749">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739754">}</span><br>
<span class="lineno"></span><span class="op" id="2739756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2739759">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2739824">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2739853">func</span>&nbsp;<span class="ident" id="2739858">align</span><span class="op" id="2739863">(</span><span class="ident" id="2739864">x</span><span class="op" id="2739865">,</span>&nbsp;<span class="ident" id="2739867">n</span>&nbsp;<span class="builtintype" id="2739869">uintptr</span><span class="op" id="2739876">)</span>&nbsp;<span class="builtintype" id="2739878">uintptr</span>&nbsp;<span class="op" id="2739886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739889">return</span>&nbsp;<span class="op" id="2739896">(</span><span class="ident" id="2739897">x</span>&nbsp;<span class="op" id="2739899">+</span>&nbsp;<span class="ident" id="2739901">n</span>&nbsp;<span class="op" id="2739903">-</span>&nbsp;<span class="num" id="2739905">1</span><span class="op" id="2739906">)</span>&nbsp;<span class="op" id="2739908">&amp;^</span>&nbsp;<span class="op" id="2739911">(</span><span class="ident" id="2739912">n</span>&nbsp;<span class="op" id="2739914">-</span>&nbsp;<span class="num" id="2739916">1</span><span class="op" id="2739917">)</span><br>
<span class="lineno"></span><span class="op" id="2739919">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2739922">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2739991">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2740048">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2740121">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2740185">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2740238">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2740319">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2740393">//</span><br>
<span class="lineno"></span><span class="comment" id="2740396">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2740472">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2740544">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2740615">func</span>&nbsp;<span class="ident" id="2740620">callMethod</span><span class="op" id="2740630">(</span><span class="ident" id="2740631">ctxt</span>&nbsp;<span class="op" id="2740636">*</span><span class="ident" id="2740637">methodValue</span><span class="op" id="2740648">,</span>&nbsp;<span class="ident" id="2740650">frame</span>&nbsp;<span class="ident" id="2740656">unsafe</span><span class="op" id="2740662">.</span><span class="ident" id="2740663">Pointer</span><span class="op" id="2740670">)</span>&nbsp;<span class="op" id="2740672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740675">rcvr</span>&nbsp;<span class="op" id="2740680">:=</span>&nbsp;<span class="ident" id="2740683">ctxt</span><span class="op" id="2740687">.</span><span class="ident" id="2740688">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740694">rcvrtype</span><span class="op" id="2740702">,</span>&nbsp;<span class="ident" id="2740704">t</span><span class="op" id="2740705">,</span>&nbsp;<span class="ident" id="2740707">fn</span>&nbsp;<span class="op" id="2740710">:=</span>&nbsp;<span class="ident" id="2740713">methodReceiver</span><span class="op" id="2740727">(</span><span class="string" id="2740728">&#34;call&#34;</span><span class="op" id="2740734">,</span>&nbsp;<span class="ident" id="2740736">rcvr</span><span class="op" id="2740740">,</span>&nbsp;<span class="ident" id="2740742">ctxt</span><span class="op" id="2740746">.</span><span class="ident" id="2740747">method</span><span class="op" id="2740753">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740756">frametype</span><span class="op" id="2740765">,</span>&nbsp;<span class="ident" id="2740767">argSize</span><span class="op" id="2740774">,</span>&nbsp;<span class="ident" id="2740776">retOffset</span><span class="op" id="2740785">,</span>&nbsp;<span class="ident" id="2740787">_</span>&nbsp;<span class="op" id="2740789">:=</span>&nbsp;<span class="ident" id="2740792">funcLayout</span><span class="op" id="2740802">(</span><span class="ident" id="2740803">t</span><span class="op" id="2740804">,</span>&nbsp;<span class="ident" id="2740806">rcvrtype</span><span class="op" id="2740814">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2740818">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740893">args</span>&nbsp;<span class="op" id="2740898">:=</span>&nbsp;<span class="ident" id="2740901">unsafe_New</span><span class="op" id="2740911">(</span><span class="ident" id="2740912">frametype</span><span class="op" id="2740921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2740925">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740964">storeRcvr</span><span class="op" id="2740973">(</span><span class="ident" id="2740974">rcvr</span><span class="op" id="2740978">,</span>&nbsp;<span class="ident" id="2740980">args</span><span class="op" id="2740984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740987">memmove</span><span class="op" id="2740994">(</span><span class="ident" id="2740995">unsafe</span><span class="op" id="2741001">.</span><span class="ident" id="2741002">Pointer</span><span class="op" id="2741009">(</span><span class="builtintype" id="2741010">uintptr</span><span class="op" id="2741017">(</span><span class="ident" id="2741018">args</span><span class="op" id="2741022">)</span><span class="op" id="2741023">+</span><span class="ident" id="2741024">ptrSize</span><span class="op" id="2741031">)</span><span class="op" id="2741032">,</span>&nbsp;<span class="ident" id="2741034">frame</span><span class="op" id="2741039">,</span>&nbsp;<span class="ident" id="2741041">argSize</span><span class="op" id="2741048">-</span><span class="ident" id="2741049">ptrSize</span><span class="op" id="2741056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741060">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741070">call</span><span class="op" id="2741074">(</span><span class="ident" id="2741075">fn</span><span class="op" id="2741077">,</span>&nbsp;<span class="ident" id="2741079">args</span><span class="op" id="2741083">,</span>&nbsp;<span class="builtintype" id="2741085">uint32</span><span class="op" id="2741091">(</span><span class="ident" id="2741092">frametype</span><span class="op" id="2741101">.</span><span class="ident" id="2741102">size</span><span class="op" id="2741106">)</span><span class="op" id="2741107">,</span>&nbsp;<span class="builtintype" id="2741109">uint32</span><span class="op" id="2741115">(</span><span class="ident" id="2741116">retOffset</span><span class="op" id="2741125">)</span><span class="op" id="2741126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741130">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741198">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741270">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741341">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741357">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741417">callerRetOffset</span>&nbsp;<span class="op" id="2741433">:=</span>&nbsp;<span class="ident" id="2741436">retOffset</span>&nbsp;<span class="op" id="2741446">-</span>&nbsp;<span class="ident" id="2741448">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741457">if</span>&nbsp;<span class="ident" id="2741460">runtime</span><span class="op" id="2741467">.</span><span class="ident" id="2741468">GOARCH</span>&nbsp;<span class="op" id="2741475">==</span>&nbsp;<span class="string" id="2741478">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2741489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741493">callerRetOffset</span>&nbsp;<span class="op" id="2741509">=</span>&nbsp;<span class="ident" id="2741511">align</span><span class="op" id="2741516">(</span><span class="ident" id="2741517">argSize</span><span class="op" id="2741524">-</span><span class="ident" id="2741525">ptrSize</span><span class="op" id="2741532">,</span>&nbsp;<span class="num" id="2741534">8</span><span class="op" id="2741535">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741541">memmove</span><span class="op" id="2741548">(</span><span class="ident" id="2741549">unsafe</span><span class="op" id="2741555">.</span><span class="ident" id="2741556">Pointer</span><span class="op" id="2741563">(</span><span class="builtintype" id="2741564">uintptr</span><span class="op" id="2741571">(</span><span class="ident" id="2741572">frame</span><span class="op" id="2741577">)</span><span class="op" id="2741578">+</span><span class="ident" id="2741579">callerRetOffset</span><span class="op" id="2741594">)</span><span class="op" id="2741595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741599">unsafe</span><span class="op" id="2741605">.</span><span class="ident" id="2741606">Pointer</span><span class="op" id="2741613">(</span><span class="builtintype" id="2741614">uintptr</span><span class="op" id="2741621">(</span><span class="ident" id="2741622">args</span><span class="op" id="2741626">)</span><span class="op" id="2741627">+</span><span class="ident" id="2741628">retOffset</span><span class="op" id="2741637">)</span><span class="op" id="2741638">,</span>&nbsp;<span class="ident" id="2741640">frametype</span><span class="op" id="2741649">.</span><span class="ident" id="2741650">size</span><span class="op" id="2741654">-</span><span class="ident" id="2741655">retOffset</span><span class="op" id="2741664">)</span><br>
<span class="lineno"></span><span class="op" id="2741666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2741669">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2741731">func</span>&nbsp;<span class="ident" id="2741736">funcName</span><span class="op" id="2741744">(</span><span class="ident" id="2741745">f</span>&nbsp;<span class="keyword" id="2741747">func</span><span class="op" id="2741751">(</span><span class="op" id="2741752">[</span><span class="op" id="2741753">]</span><span class="ident" id="2741754">Value</span><span class="op" id="2741759">)</span>&nbsp;<span class="op" id="2741761">[</span><span class="op" id="2741762">]</span><span class="ident" id="2741763">Value</span><span class="op" id="2741768">)</span>&nbsp;<span class="builtintype" id="2741770">string</span>&nbsp;<span class="op" id="2741777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741780">pc</span>&nbsp;<span class="op" id="2741783">:=</span>&nbsp;<span class="op" id="2741786">*</span><span class="op" id="2741787">(</span><span class="op" id="2741788">*</span><span class="builtintype" id="2741789">uintptr</span><span class="op" id="2741796">)</span><span class="op" id="2741797">(</span><span class="ident" id="2741798">unsafe</span><span class="op" id="2741804">.</span><span class="ident" id="2741805">Pointer</span><span class="op" id="2741812">(</span><span class="op" id="2741813">&amp;</span><span class="ident" id="2741814">f</span><span class="op" id="2741815">)</span><span class="op" id="2741816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741819">rf</span>&nbsp;<span class="op" id="2741822">:=</span>&nbsp;<span class="ident" id="2741825">runtime</span><span class="op" id="2741832">.</span><span class="ident" id="2741833">FuncForPC</span><span class="op" id="2741842">(</span><span class="ident" id="2741843">pc</span><span class="op" id="2741845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741848">if</span>&nbsp;<span class="ident" id="2741851">rf</span>&nbsp;<span class="op" id="2741854">!=</span>&nbsp;<span class="ident" id="2741857">nil</span>&nbsp;<span class="op" id="2741861">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741865">return</span>&nbsp;<span class="ident" id="2741872">rf</span><span class="op" id="2741874">.</span><span class="ident" id="2741875">Name</span><span class="op" id="2741879">(</span><span class="op" id="2741880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741886">return</span>&nbsp;<span class="string" id="2741893">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2741903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2741906">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2741935">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2741990">func</span>&nbsp;<span class="op" id="2741995">(</span><span class="ident" id="2741996">v</span>&nbsp;<span class="ident" id="2741998">Value</span><span class="op" id="2742003">)</span>&nbsp;<span class="ident" id="2742005">Cap</span><span class="op" id="2742008">(</span><span class="op" id="2742009">)</span>&nbsp;<span class="builtintype" id="2742011">int</span>&nbsp;<span class="op" id="2742015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742018">k</span>&nbsp;<span class="op" id="2742020">:=</span>&nbsp;<span class="ident" id="2742023">v</span><span class="op" id="2742024">.</span><span class="ident" id="2742025">kind</span><span class="op" id="2742029">(</span><span class="op" id="2742030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742033">switch</span>&nbsp;<span class="ident" id="2742040">k</span>&nbsp;<span class="op" id="2742042">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742045">case</span>&nbsp;<span class="ident" id="2742050">Array</span><span class="op" id="2742055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742059">return</span>&nbsp;<span class="ident" id="2742066">v</span><span class="op" id="2742067">.</span><span class="ident" id="2742068">typ</span><span class="op" id="2742071">.</span><span class="ident" id="2742072">Len</span><span class="op" id="2742075">(</span><span class="op" id="2742076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742079">case</span>&nbsp;<span class="ident" id="2742084">Chan</span><span class="op" id="2742088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742092">return</span>&nbsp;<span class="builtintype" id="2742099">int</span><span class="op" id="2742102">(</span><span class="ident" id="2742103">chancap</span><span class="op" id="2742110">(</span><span class="ident" id="2742111">v</span><span class="op" id="2742112">.</span><span class="ident" id="2742113">pointer</span><span class="op" id="2742120">(</span><span class="op" id="2742121">)</span><span class="op" id="2742122">)</span><span class="op" id="2742123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742126">case</span>&nbsp;<span class="ident" id="2742131">Slice</span><span class="op" id="2742136">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2742140">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742199">return</span>&nbsp;<span class="op" id="2742206">(</span><span class="op" id="2742207">*</span><span class="ident" id="2742208">sliceHeader</span><span class="op" id="2742219">)</span><span class="op" id="2742220">(</span><span class="ident" id="2742221">v</span><span class="op" id="2742222">.</span><span class="ident" id="2742223">ptr</span><span class="op" id="2742226">)</span><span class="op" id="2742227">.</span><span class="ident" id="2742228">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742236">panic</span><span class="op" id="2742241">(</span><span class="op" id="2742242">&amp;</span><span class="ident" id="2742243">ValueError</span><span class="op" id="2742253">{</span><span class="string" id="2742254">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2742273">,</span>&nbsp;<span class="ident" id="2742275">v</span><span class="op" id="2742276">.</span><span class="ident" id="2742277">kind</span><span class="op" id="2742281">(</span><span class="op" id="2742282">)</span><span class="op" id="2742283">}</span><span class="op" id="2742284">)</span><br>
<span class="lineno"></span><span class="op" id="2742286">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2742289">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2742320">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2742358">func</span>&nbsp;<span class="op" id="2742363">(</span><span class="ident" id="2742364">v</span>&nbsp;<span class="ident" id="2742366">Value</span><span class="op" id="2742371">)</span>&nbsp;<span class="ident" id="2742373">Close</span><span class="op" id="2742378">(</span><span class="op" id="2742379">)</span>&nbsp;<span class="op" id="2742381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742384">v</span><span class="op" id="2742385">.</span><span class="ident" id="2742386">mustBe</span><span class="op" id="2742392">(</span><span class="ident" id="2742393">Chan</span><span class="op" id="2742397">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742400">v</span><span class="op" id="2742401">.</span><span class="ident" id="2742402">mustBeExported</span><span class="op" id="2742416">(</span><span class="op" id="2742417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742420">chanclose</span><span class="op" id="2742429">(</span><span class="ident" id="2742430">v</span><span class="op" id="2742431">.</span><span class="ident" id="2742432">pointer</span><span class="op" id="2742439">(</span><span class="op" id="2742440">)</span><span class="op" id="2742441">)</span><br>
<span class="lineno"></span><span class="op" id="2742443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742446">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2742504">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2742560">func</span>&nbsp;<span class="op" id="2742565">(</span><span class="ident" id="2742566">v</span>&nbsp;<span class="ident" id="2742568">Value</span><span class="op" id="2742573">)</span>&nbsp;<span class="ident" id="2742575">Complex</span><span class="op" id="2742582">(</span><span class="op" id="2742583">)</span>&nbsp;<span class="builtintype" id="2742585">complex128</span>&nbsp;<span class="op" id="2742596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742599">k</span>&nbsp;<span class="op" id="2742601">:=</span>&nbsp;<span class="ident" id="2742604">v</span><span class="op" id="2742605">.</span><span class="ident" id="2742606">kind</span><span class="op" id="2742610">(</span><span class="op" id="2742611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742614">switch</span>&nbsp;<span class="ident" id="2742621">k</span>&nbsp;<span class="op" id="2742623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742626">case</span>&nbsp;<span class="ident" id="2742631">Complex64</span><span class="op" id="2742640">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742644">return</span>&nbsp;<span class="builtintype" id="2742651">complex128</span><span class="op" id="2742661">(</span><span class="op" id="2742662">*</span><span class="op" id="2742663">(</span><span class="op" id="2742664">*</span><span class="builtintype" id="2742665">complex64</span><span class="op" id="2742674">)</span><span class="op" id="2742675">(</span><span class="ident" id="2742676">v</span><span class="op" id="2742677">.</span><span class="ident" id="2742678">ptr</span><span class="op" id="2742681">)</span><span class="op" id="2742682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742685">case</span>&nbsp;<span class="ident" id="2742690">Complex128</span><span class="op" id="2742700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742704">return</span>&nbsp;<span class="op" id="2742711">*</span><span class="op" id="2742712">(</span><span class="op" id="2742713">*</span><span class="builtintype" id="2742714">complex128</span><span class="op" id="2742724">)</span><span class="op" id="2742725">(</span><span class="ident" id="2742726">v</span><span class="op" id="2742727">.</span><span class="ident" id="2742728">ptr</span><span class="op" id="2742731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742737">panic</span><span class="op" id="2742742">(</span><span class="op" id="2742743">&amp;</span><span class="ident" id="2742744">ValueError</span><span class="op" id="2742754">{</span><span class="string" id="2742755">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2742778">,</span>&nbsp;<span class="ident" id="2742780">v</span><span class="op" id="2742781">.</span><span class="ident" id="2742782">kind</span><span class="op" id="2742786">(</span><span class="op" id="2742787">)</span><span class="op" id="2742788">}</span><span class="op" id="2742789">)</span><br>
<span class="lineno">665</span><span class="op" id="2742791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742794">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2742850">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2742886">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2742936">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2742978">func</span>&nbsp;<span class="op" id="2742983">(</span><span class="ident" id="2742984">v</span>&nbsp;<span class="ident" id="2742986">Value</span><span class="op" id="2742991">)</span>&nbsp;<span class="ident" id="2742993">Elem</span><span class="op" id="2742997">(</span><span class="op" id="2742998">)</span>&nbsp;<span class="ident" id="2743000">Value</span>&nbsp;<span class="op" id="2743006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743009">k</span>&nbsp;<span class="op" id="2743011">:=</span>&nbsp;<span class="ident" id="2743014">v</span><span class="op" id="2743015">.</span><span class="ident" id="2743016">kind</span><span class="op" id="2743020">(</span><span class="op" id="2743021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743024">switch</span>&nbsp;<span class="ident" id="2743031">k</span>&nbsp;<span class="op" id="2743033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743036">case</span>&nbsp;<span class="ident" id="2743041">Interface</span><span class="op" id="2743050">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743054">var</span>&nbsp;<span class="ident" id="2743058">eface</span>&nbsp;<span class="keyword" id="2743064">interface</span><span class="op" id="2743073">{</span><span class="op" id="2743074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743078">if</span>&nbsp;<span class="ident" id="2743081">v</span><span class="op" id="2743082">.</span><span class="ident" id="2743083">typ</span><span class="op" id="2743086">.</span><span class="ident" id="2743087">NumMethod</span><span class="op" id="2743096">(</span><span class="op" id="2743097">)</span>&nbsp;<span class="op" id="2743099">==</span>&nbsp;<span class="num" id="2743102">0</span>&nbsp;<span class="op" id="2743104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743109">eface</span>&nbsp;<span class="op" id="2743115">=</span>&nbsp;<span class="op" id="2743117">*</span><span class="op" id="2743118">(</span><span class="op" id="2743119">*</span><span class="keyword" id="2743120">interface</span><span class="op" id="2743129">{</span><span class="op" id="2743130">}</span><span class="op" id="2743131">)</span><span class="op" id="2743132">(</span><span class="ident" id="2743133">v</span><span class="op" id="2743134">.</span><span class="ident" id="2743135">ptr</span><span class="op" id="2743138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743142">}</span>&nbsp;<span class="keyword" id="2743144">else</span>&nbsp;<span class="op" id="2743149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743154">eface</span>&nbsp;<span class="op" id="2743160">=</span>&nbsp;<span class="op" id="2743162">(</span><span class="keyword" id="2743163">interface</span><span class="op" id="2743172">{</span><span class="op" id="2743173">}</span><span class="op" id="2743174">)</span><span class="op" id="2743175">(</span><span class="op" id="2743176">*</span><span class="op" id="2743177">(</span><span class="op" id="2743178">*</span><span class="keyword" id="2743179">interface</span>&nbsp;<span class="op" id="2743189">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743195">M</span><span class="op" id="2743196">(</span><span class="op" id="2743197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743202">}</span><span class="op" id="2743203">)</span><span class="op" id="2743204">(</span><span class="ident" id="2743205">v</span><span class="op" id="2743206">.</span><span class="ident" id="2743207">ptr</span><span class="op" id="2743210">)</span><span class="op" id="2743211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743219">x</span>&nbsp;<span class="op" id="2743221">:=</span>&nbsp;<span class="ident" id="2743224">unpackEface</span><span class="op" id="2743235">(</span><span class="ident" id="2743236">eface</span><span class="op" id="2743241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743245">if</span>&nbsp;<span class="ident" id="2743248">x</span><span class="op" id="2743249">.</span><span class="ident" id="2743250">flag</span>&nbsp;<span class="op" id="2743255">!=</span>&nbsp;<span class="num" id="2743258">0</span>&nbsp;<span class="op" id="2743260">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743265">x</span><span class="op" id="2743266">.</span><span class="ident" id="2743267">flag</span>&nbsp;<span class="op" id="2743272">|=</span>&nbsp;<span class="ident" id="2743275">v</span><span class="op" id="2743276">.</span><span class="ident" id="2743277">flag</span>&nbsp;<span class="op" id="2743282">&amp;</span>&nbsp;<span class="ident" id="2743284">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743297">return</span>&nbsp;<span class="ident" id="2743304">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743307">case</span>&nbsp;<span class="ident" id="2743312">Ptr</span><span class="op" id="2743315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743319">ptr</span>&nbsp;<span class="op" id="2743323">:=</span>&nbsp;<span class="ident" id="2743326">v</span><span class="op" id="2743327">.</span><span class="ident" id="2743328">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743334">if</span>&nbsp;<span class="ident" id="2743337">v</span><span class="op" id="2743338">.</span><span class="ident" id="2743339">flag</span><span class="op" id="2743343">&amp;</span><span class="ident" id="2743344">flagIndir</span>&nbsp;<span class="op" id="2743354">!=</span>&nbsp;<span class="num" id="2743357">0</span>&nbsp;<span class="op" id="2743359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743364">ptr</span>&nbsp;<span class="op" id="2743368">=</span>&nbsp;<span class="op" id="2743370">*</span><span class="op" id="2743371">(</span><span class="op" id="2743372">*</span><span class="ident" id="2743373">unsafe</span><span class="op" id="2743379">.</span><span class="ident" id="2743380">Pointer</span><span class="op" id="2743387">)</span><span class="op" id="2743388">(</span><span class="ident" id="2743389">ptr</span><span class="op" id="2743392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743400">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743448">if</span>&nbsp;<span class="ident" id="2743451">ptr</span>&nbsp;<span class="op" id="2743455">==</span>&nbsp;<span class="ident" id="2743458">nil</span>&nbsp;<span class="op" id="2743462">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743467">return</span>&nbsp;<span class="ident" id="2743474">Value</span><span class="op" id="2743479">{</span><span class="op" id="2743480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743488">tt</span>&nbsp;<span class="op" id="2743491">:=</span>&nbsp;<span class="op" id="2743494">(</span><span class="op" id="2743495">*</span><span class="ident" id="2743496">ptrType</span><span class="op" id="2743503">)</span><span class="op" id="2743504">(</span><span class="ident" id="2743505">unsafe</span><span class="op" id="2743511">.</span><span class="ident" id="2743512">Pointer</span><span class="op" id="2743519">(</span><span class="ident" id="2743520">v</span><span class="op" id="2743521">.</span><span class="ident" id="2743522">typ</span><span class="op" id="2743525">)</span><span class="op" id="2743526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743530">typ</span>&nbsp;<span class="op" id="2743534">:=</span>&nbsp;<span class="ident" id="2743537">tt</span><span class="op" id="2743539">.</span><span class="ident" id="2743540">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743547">fl</span>&nbsp;<span class="op" id="2743550">:=</span>&nbsp;<span class="ident" id="2743553">v</span><span class="op" id="2743554">.</span><span class="ident" id="2743555">flag</span><span class="op" id="2743559">&amp;</span><span class="ident" id="2743560">flagRO</span>&nbsp;<span class="op" id="2743567">|</span>&nbsp;<span class="ident" id="2743569">flagIndir</span>&nbsp;<span class="op" id="2743579">|</span>&nbsp;<span class="ident" id="2743581">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743592">fl</span>&nbsp;<span class="op" id="2743595">|=</span>&nbsp;<span class="ident" id="2743598">flag</span><span class="op" id="2743602">(</span><span class="ident" id="2743603">typ</span><span class="op" id="2743606">.</span><span class="ident" id="2743607">Kind</span><span class="op" id="2743611">(</span><span class="op" id="2743612">)</span><span class="op" id="2743613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743617">return</span>&nbsp;<span class="ident" id="2743624">Value</span><span class="op" id="2743629">{</span><span class="ident" id="2743630">typ</span><span class="op" id="2743633">,</span>&nbsp;<span class="ident" id="2743635">ptr</span><span class="op" id="2743638">,</span>&nbsp;<span class="ident" id="2743640">fl</span><span class="op" id="2743642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743648">panic</span><span class="op" id="2743653">(</span><span class="op" id="2743654">&amp;</span><span class="ident" id="2743655">ValueError</span><span class="op" id="2743665">{</span><span class="string" id="2743666">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2743686">,</span>&nbsp;<span class="ident" id="2743688">v</span><span class="op" id="2743689">.</span><span class="ident" id="2743690">kind</span><span class="op" id="2743694">(</span><span class="op" id="2743695">)</span><span class="op" id="2743696">}</span><span class="op" id="2743697">)</span><br>
<span class="lineno"></span><span class="op" id="2743699">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2743702">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2743751">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2743812">func</span>&nbsp;<span class="op" id="2743817">(</span><span class="ident" id="2743818">v</span>&nbsp;<span class="ident" id="2743820">Value</span><span class="op" id="2743825">)</span>&nbsp;<span class="ident" id="2743827">Field</span><span class="op" id="2743832">(</span><span class="ident" id="2743833">i</span>&nbsp;<span class="builtintype" id="2743835">int</span><span class="op" id="2743838">)</span>&nbsp;<span class="ident" id="2743840">Value</span>&nbsp;<span class="op" id="2743846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743849">if</span>&nbsp;<span class="ident" id="2743852">v</span><span class="op" id="2743853">.</span><span class="ident" id="2743854">kind</span><span class="op" id="2743858">(</span><span class="op" id="2743859">)</span>&nbsp;<span class="op" id="2743861">!=</span>&nbsp;<span class="ident" id="2743864">Struct</span>&nbsp;<span class="op" id="2743871">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743875">panic</span><span class="op" id="2743880">(</span><span class="op" id="2743881">&amp;</span><span class="ident" id="2743882">ValueError</span><span class="op" id="2743892">{</span><span class="string" id="2743893">&#34;reflect.Value.Field&#34;</span><span class="op" id="2743914">,</span>&nbsp;<span class="ident" id="2743916">v</span><span class="op" id="2743917">.</span><span class="ident" id="2743918">kind</span><span class="op" id="2743922">(</span><span class="op" id="2743923">)</span><span class="op" id="2743924">}</span><span class="op" id="2743925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743931">tt</span>&nbsp;<span class="op" id="2743934">:=</span>&nbsp;<span class="op" id="2743937">(</span><span class="op" id="2743938">*</span><span class="ident" id="2743939">structType</span><span class="op" id="2743949">)</span><span class="op" id="2743950">(</span><span class="ident" id="2743951">unsafe</span><span class="op" id="2743957">.</span><span class="ident" id="2743958">Pointer</span><span class="op" id="2743965">(</span><span class="ident" id="2743966">v</span><span class="op" id="2743967">.</span><span class="ident" id="2743968">typ</span><span class="op" id="2743971">)</span><span class="op" id="2743972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743975">if</span>&nbsp;<span class="builtintype" id="2743978">uint</span><span class="op" id="2743982">(</span><span class="ident" id="2743983">i</span><span class="op" id="2743984">)</span>&nbsp;<span class="op" id="2743986">&gt;=</span>&nbsp;<span class="builtintype" id="2743989">uint</span><span class="op" id="2743993">(</span><span class="builtinfunc" id="2743994">len</span><span class="op" id="2743997">(</span><span class="ident" id="2743998">tt</span><span class="op" id="2744000">.</span><span class="ident" id="2744001">fields</span><span class="op" id="2744007">)</span><span class="op" id="2744008">)</span>&nbsp;<span class="op" id="2744010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2744014">panic</span><span class="op" id="2744019">(</span><span class="string" id="2744020">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2744055">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744061">field</span>&nbsp;<span class="op" id="2744067">:=</span>&nbsp;<span class="op" id="2744070">&amp;</span><span class="ident" id="2744071">tt</span><span class="op" id="2744073">.</span><span class="ident" id="2744074">fields</span><span class="op" id="2744080">[</span><span class="ident" id="2744081">i</span><span class="op" id="2744082">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744085">typ</span>&nbsp;<span class="op" id="2744089">:=</span>&nbsp;<span class="ident" id="2744092">field</span><span class="op" id="2744097">.</span><span class="ident" id="2744098">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744104">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744140">fl</span>&nbsp;<span class="op" id="2744143">:=</span>&nbsp;<span class="ident" id="2744146">v</span><span class="op" id="2744147">.</span><span class="ident" id="2744148">flag</span><span class="op" id="2744152">&amp;</span><span class="op" id="2744153">(</span><span class="ident" id="2744154">flagRO</span><span class="op" id="2744160">|</span><span class="ident" id="2744161">flagIndir</span><span class="op" id="2744170">|</span><span class="ident" id="2744171">flagAddr</span><span class="op" id="2744179">)</span>&nbsp;<span class="op" id="2744181">|</span>&nbsp;<span class="ident" id="2744183">flag</span><span class="op" id="2744187">(</span><span class="ident" id="2744188">typ</span><span class="op" id="2744191">.</span><span class="ident" id="2744192">Kind</span><span class="op" id="2744196">(</span><span class="op" id="2744197">)</span><span class="op" id="2744198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744201">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744246">if</span>&nbsp;<span class="ident" id="2744249">field</span><span class="op" id="2744254">.</span><span class="ident" id="2744255">pkgPath</span>&nbsp;<span class="op" id="2744263">!=</span>&nbsp;<span class="ident" id="2744266">nil</span>&nbsp;<span class="op" id="2744270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744274">fl</span>&nbsp;<span class="op" id="2744277">|=</span>&nbsp;<span class="ident" id="2744280">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744288">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744291">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744347">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744412">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744460">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744518">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744561">ptr</span>&nbsp;<span class="op" id="2744565">:=</span>&nbsp;<span class="ident" id="2744568">unsafe</span><span class="op" id="2744574">.</span><span class="ident" id="2744575">Pointer</span><span class="op" id="2744582">(</span><span class="builtintype" id="2744583">uintptr</span><span class="op" id="2744590">(</span><span class="ident" id="2744591">v</span><span class="op" id="2744592">.</span><span class="ident" id="2744593">ptr</span><span class="op" id="2744596">)</span>&nbsp;<span class="op" id="2744598">+</span>&nbsp;<span class="ident" id="2744600">field</span><span class="op" id="2744605">.</span><span class="ident" id="2744606">offset</span><span class="op" id="2744612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744615">return</span>&nbsp;<span class="ident" id="2744622">Value</span><span class="op" id="2744627">{</span><span class="ident" id="2744628">typ</span><span class="op" id="2744631">,</span>&nbsp;<span class="ident" id="2744633">ptr</span><span class="op" id="2744636">,</span>&nbsp;<span class="ident" id="2744638">fl</span><span class="op" id="2744640">}</span><br>
<span class="lineno"></span><span class="op" id="2744642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744645">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2744710">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2744750">func</span>&nbsp;<span class="op" id="2744755">(</span><span class="ident" id="2744756">v</span>&nbsp;<span class="ident" id="2744758">Value</span><span class="op" id="2744763">)</span>&nbsp;<span class="ident" id="2744765">FieldByIndex</span><span class="op" id="2744777">(</span><span class="ident" id="2744778">index</span>&nbsp;<span class="op" id="2744784">[</span><span class="op" id="2744785">]</span><span class="builtintype" id="2744786">int</span><span class="op" id="2744789">)</span>&nbsp;<span class="ident" id="2744791">Value</span>&nbsp;<span class="op" id="2744797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744800">if</span>&nbsp;<span class="builtinfunc" id="2744803">len</span><span class="op" id="2744806">(</span><span class="ident" id="2744807">index</span><span class="op" id="2744812">)</span>&nbsp;<span class="op" id="2744814">==</span>&nbsp;<span class="num" id="2744817">1</span>&nbsp;<span class="op" id="2744819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744823">return</span>&nbsp;<span class="ident" id="2744830">v</span><span class="op" id="2744831">.</span><span class="ident" id="2744832">Field</span><span class="op" id="2744837">(</span><span class="ident" id="2744838">index</span><span class="op" id="2744843">[</span><span class="num" id="2744844">0</span><span class="op" id="2744845">]</span><span class="op" id="2744846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744849">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744852">v</span><span class="op" id="2744853">.</span><span class="ident" id="2744854">mustBe</span><span class="op" id="2744860">(</span><span class="ident" id="2744861">Struct</span><span class="op" id="2744867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744870">for</span>&nbsp;<span class="ident" id="2744874">i</span><span class="op" id="2744875">,</span>&nbsp;<span class="ident" id="2744877">x</span>&nbsp;<span class="op" id="2744879">:=</span>&nbsp;<span class="keyword" id="2744882">range</span>&nbsp;<span class="ident" id="2744888">index</span>&nbsp;<span class="op" id="2744894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744898">if</span>&nbsp;<span class="ident" id="2744901">i</span>&nbsp;<span class="op" id="2744903">&gt;</span>&nbsp;<span class="num" id="2744905">0</span>&nbsp;<span class="op" id="2744907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744912">if</span>&nbsp;<span class="ident" id="2744915">v</span><span class="op" id="2744916">.</span><span class="ident" id="2744917">Kind</span><span class="op" id="2744921">(</span><span class="op" id="2744922">)</span>&nbsp;<span class="op" id="2744924">==</span>&nbsp;<span class="ident" id="2744927">Ptr</span>&nbsp;<span class="op" id="2744931">&amp;&amp;</span>&nbsp;<span class="ident" id="2744934">v</span><span class="op" id="2744935">.</span><span class="ident" id="2744936">typ</span><span class="op" id="2744939">.</span><span class="ident" id="2744940">Elem</span><span class="op" id="2744944">(</span><span class="op" id="2744945">)</span><span class="op" id="2744946">.</span><span class="ident" id="2744947">Kind</span><span class="op" id="2744951">(</span><span class="op" id="2744952">)</span>&nbsp;<span class="op" id="2744954">==</span>&nbsp;<span class="ident" id="2744957">Struct</span>&nbsp;<span class="op" id="2744964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744970">if</span>&nbsp;<span class="ident" id="2744973">v</span><span class="op" id="2744974">.</span><span class="ident" id="2744975">IsNil</span><span class="op" id="2744980">(</span><span class="op" id="2744981">)</span>&nbsp;<span class="op" id="2744983">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2744990">panic</span><span class="op" id="2744995">(</span><span class="string" id="2744996">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2745057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745069">v</span>&nbsp;<span class="op" id="2745071">=</span>&nbsp;<span class="ident" id="2745073">v</span><span class="op" id="2745074">.</span><span class="ident" id="2745075">Elem</span><span class="op" id="2745079">(</span><span class="op" id="2745080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745089">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745093">v</span>&nbsp;<span class="op" id="2745095">=</span>&nbsp;<span class="ident" id="2745097">v</span><span class="op" id="2745098">.</span><span class="ident" id="2745099">Field</span><span class="op" id="2745104">(</span><span class="ident" id="2745105">x</span><span class="op" id="2745106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745112">return</span>&nbsp;<span class="ident" id="2745119">v</span><br>
<span class="lineno"></span><span class="op" id="2745121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2745124">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2745185">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2745237">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2745277">func</span>&nbsp;<span class="op" id="2745282">(</span><span class="ident" id="2745283">v</span>&nbsp;<span class="ident" id="2745285">Value</span><span class="op" id="2745290">)</span>&nbsp;<span class="ident" id="2745292">FieldByName</span><span class="op" id="2745303">(</span><span class="ident" id="2745304">name</span>&nbsp;<span class="builtintype" id="2745309">string</span><span class="op" id="2745315">)</span>&nbsp;<span class="ident" id="2745317">Value</span>&nbsp;<span class="op" id="2745323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745326">v</span><span class="op" id="2745327">.</span><span class="ident" id="2745328">mustBe</span><span class="op" id="2745334">(</span><span class="ident" id="2745335">Struct</span><span class="op" id="2745341">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745344">if</span>&nbsp;<span class="ident" id="2745347">f</span><span class="op" id="2745348">,</span>&nbsp;<span class="ident" id="2745350">ok</span>&nbsp;<span class="op" id="2745353">:=</span>&nbsp;<span class="ident" id="2745356">v</span><span class="op" id="2745357">.</span><span class="ident" id="2745358">typ</span><span class="op" id="2745361">.</span><span class="ident" id="2745362">FieldByName</span><span class="op" id="2745373">(</span><span class="ident" id="2745374">name</span><span class="op" id="2745378">)</span><span class="op" id="2745379">;</span>&nbsp;<span class="ident" id="2745381">ok</span>&nbsp;<span class="op" id="2745384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745388">return</span>&nbsp;<span class="ident" id="2745395">v</span><span class="op" id="2745396">.</span><span class="ident" id="2745397">FieldByIndex</span><span class="op" id="2745409">(</span><span class="ident" id="2745410">f</span><span class="op" id="2745411">.</span><span class="ident" id="2745412">Index</span><span class="op" id="2745417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745423">return</span>&nbsp;<span class="ident" id="2745430">Value</span><span class="op" id="2745435">{</span><span class="op" id="2745436">}</span><br>
<span class="lineno"></span><span class="op" id="2745438">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2745441">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2745497">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2745535">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2745575">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2745627">func</span>&nbsp;<span class="op" id="2745632">(</span><span class="ident" id="2745633">v</span>&nbsp;<span class="ident" id="2745635">Value</span><span class="op" id="2745640">)</span>&nbsp;<span class="ident" id="2745642">FieldByNameFunc</span><span class="op" id="2745657">(</span><span class="ident" id="2745658">match</span>&nbsp;<span class="keyword" id="2745664">func</span><span class="op" id="2745668">(</span><span class="builtintype" id="2745669">string</span><span class="op" id="2745675">)</span>&nbsp;<span class="builtintype" id="2745677">bool</span><span class="op" id="2745681">)</span>&nbsp;<span class="ident" id="2745683">Value</span>&nbsp;<span class="op" id="2745689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745692">if</span>&nbsp;<span class="ident" id="2745695">f</span><span class="op" id="2745696">,</span>&nbsp;<span class="ident" id="2745698">ok</span>&nbsp;<span class="op" id="2745701">:=</span>&nbsp;<span class="ident" id="2745704">v</span><span class="op" id="2745705">.</span><span class="ident" id="2745706">typ</span><span class="op" id="2745709">.</span><span class="ident" id="2745710">FieldByNameFunc</span><span class="op" id="2745725">(</span><span class="ident" id="2745726">match</span><span class="op" id="2745731">)</span><span class="op" id="2745732">;</span>&nbsp;<span class="ident" id="2745734">ok</span>&nbsp;<span class="op" id="2745737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745741">return</span>&nbsp;<span class="ident" id="2745748">v</span><span class="op" id="2745749">.</span><span class="ident" id="2745750">FieldByIndex</span><span class="op" id="2745762">(</span><span class="ident" id="2745763">f</span><span class="op" id="2745764">.</span><span class="ident" id="2745765">Index</span><span class="op" id="2745770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745776">return</span>&nbsp;<span class="ident" id="2745783">Value</span><span class="op" id="2745788">{</span><span class="op" id="2745789">}</span><br>
<span class="lineno">775</span><span class="op" id="2745791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2745794">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2745847">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2745898">func</span>&nbsp;<span class="op" id="2745903">(</span><span class="ident" id="2745904">v</span>&nbsp;<span class="ident" id="2745906">Value</span><span class="op" id="2745911">)</span>&nbsp;<span class="ident" id="2745913">Float</span><span class="op" id="2745918">(</span><span class="op" id="2745919">)</span>&nbsp;<span class="builtintype" id="2745921">float64</span>&nbsp;<span class="op" id="2745929">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745932">k</span>&nbsp;<span class="op" id="2745934">:=</span>&nbsp;<span class="ident" id="2745937">v</span><span class="op" id="2745938">.</span><span class="ident" id="2745939">kind</span><span class="op" id="2745943">(</span><span class="op" id="2745944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745947">switch</span>&nbsp;<span class="ident" id="2745954">k</span>&nbsp;<span class="op" id="2745956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745959">case</span>&nbsp;<span class="ident" id="2745964">Float32</span><span class="op" id="2745971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745975">return</span>&nbsp;<span class="builtintype" id="2745982">float64</span><span class="op" id="2745989">(</span><span class="op" id="2745990">*</span><span class="op" id="2745991">(</span><span class="op" id="2745992">*</span><span class="builtintype" id="2745993">float32</span><span class="op" id="2746000">)</span><span class="op" id="2746001">(</span><span class="ident" id="2746002">v</span><span class="op" id="2746003">.</span><span class="ident" id="2746004">ptr</span><span class="op" id="2746007">)</span><span class="op" id="2746008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746011">case</span>&nbsp;<span class="ident" id="2746016">Float64</span><span class="op" id="2746023">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746027">return</span>&nbsp;<span class="op" id="2746034">*</span><span class="op" id="2746035">(</span><span class="op" id="2746036">*</span><span class="builtintype" id="2746037">float64</span><span class="op" id="2746044">)</span><span class="op" id="2746045">(</span><span class="ident" id="2746046">v</span><span class="op" id="2746047">.</span><span class="ident" id="2746048">ptr</span><span class="op" id="2746051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2746057">panic</span><span class="op" id="2746062">(</span><span class="op" id="2746063">&amp;</span><span class="ident" id="2746064">ValueError</span><span class="op" id="2746074">{</span><span class="string" id="2746075">&#34;reflect.Value.Float&#34;</span><span class="op" id="2746096">,</span>&nbsp;<span class="ident" id="2746098">v</span><span class="op" id="2746099">.</span><span class="ident" id="2746100">kind</span><span class="op" id="2746104">(</span><span class="op" id="2746105">)</span><span class="op" id="2746106">}</span><span class="op" id="2746107">)</span><br>
<span class="lineno"></span><span class="op" id="2746109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2746112">var</span>&nbsp;<span class="ident" id="2746116">uint8Type</span>&nbsp;<span class="op" id="2746126">=</span>&nbsp;<span class="ident" id="2746128">TypeOf</span><span class="op" id="2746134">(</span><span class="builtintype" id="2746135">uint8</span><span class="op" id="2746140">(</span><span class="num" id="2746141">0</span><span class="op" id="2746142">)</span><span class="op" id="2746143">)</span><span class="op" id="2746144">.</span><span class="op" id="2746145">(</span><span class="op" id="2746146">*</span><span class="ident" id="2746147">rtype</span><span class="op" id="2746152">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746155">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2746190">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2746268">func</span>&nbsp;<span class="op" id="2746273">(</span><span class="ident" id="2746274">v</span>&nbsp;<span class="ident" id="2746276">Value</span><span class="op" id="2746281">)</span>&nbsp;<span class="ident" id="2746283">Index</span><span class="op" id="2746288">(</span><span class="ident" id="2746289">i</span>&nbsp;<span class="builtintype" id="2746291">int</span><span class="op" id="2746294">)</span>&nbsp;<span class="ident" id="2746296">Value</span>&nbsp;<span class="op" id="2746302">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746305">switch</span>&nbsp;<span class="ident" id="2746312">v</span><span class="op" id="2746313">.</span><span class="ident" id="2746314">kind</span><span class="op" id="2746318">(</span><span class="op" id="2746319">)</span>&nbsp;<span class="op" id="2746321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746324">case</span>&nbsp;<span class="ident" id="2746329">Array</span><span class="op" id="2746334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746338">tt</span>&nbsp;<span class="op" id="2746341">:=</span>&nbsp;<span class="op" id="2746344">(</span><span class="op" id="2746345">*</span><span class="ident" id="2746346">arrayType</span><span class="op" id="2746355">)</span><span class="op" id="2746356">(</span><span class="ident" id="2746357">unsafe</span><span class="op" id="2746363">.</span><span class="ident" id="2746364">Pointer</span><span class="op" id="2746371">(</span><span class="ident" id="2746372">v</span><span class="op" id="2746373">.</span><span class="ident" id="2746374">typ</span><span class="op" id="2746377">)</span><span class="op" id="2746378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746382">if</span>&nbsp;<span class="builtintype" id="2746385">uint</span><span class="op" id="2746389">(</span><span class="ident" id="2746390">i</span><span class="op" id="2746391">)</span>&nbsp;<span class="op" id="2746393">&gt;=</span>&nbsp;<span class="builtintype" id="2746396">uint</span><span class="op" id="2746400">(</span><span class="ident" id="2746401">tt</span><span class="op" id="2746403">.</span><span class="builtinfunc" id="2746404">len</span><span class="op" id="2746407">)</span>&nbsp;<span class="op" id="2746409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2746414">panic</span><span class="op" id="2746419">(</span><span class="string" id="2746420">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2746455">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746463">typ</span>&nbsp;<span class="op" id="2746467">:=</span>&nbsp;<span class="ident" id="2746470">tt</span><span class="op" id="2746472">.</span><span class="ident" id="2746473">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746480">offset</span>&nbsp;<span class="op" id="2746487">:=</span>&nbsp;<span class="builtintype" id="2746490">uintptr</span><span class="op" id="2746497">(</span><span class="ident" id="2746498">i</span><span class="op" id="2746499">)</span>&nbsp;<span class="op" id="2746501">*</span>&nbsp;<span class="ident" id="2746503">typ</span><span class="op" id="2746506">.</span><span class="ident" id="2746507">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746515">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746571">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746636">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746685">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746752">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746790">val</span>&nbsp;<span class="op" id="2746794">:=</span>&nbsp;<span class="ident" id="2746797">unsafe</span><span class="op" id="2746803">.</span><span class="ident" id="2746804">Pointer</span><span class="op" id="2746811">(</span><span class="builtintype" id="2746812">uintptr</span><span class="op" id="2746819">(</span><span class="ident" id="2746820">v</span><span class="op" id="2746821">.</span><span class="ident" id="2746822">ptr</span><span class="op" id="2746825">)</span>&nbsp;<span class="op" id="2746827">+</span>&nbsp;<span class="ident" id="2746829">offset</span><span class="op" id="2746835">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746839">fl</span>&nbsp;<span class="op" id="2746842">:=</span>&nbsp;<span class="ident" id="2746845">v</span><span class="op" id="2746846">.</span><span class="ident" id="2746847">flag</span><span class="op" id="2746851">&amp;</span><span class="op" id="2746852">(</span><span class="ident" id="2746853">flagRO</span><span class="op" id="2746859">|</span><span class="ident" id="2746860">flagIndir</span><span class="op" id="2746869">|</span><span class="ident" id="2746870">flagAddr</span><span class="op" id="2746878">)</span>&nbsp;<span class="op" id="2746880">|</span>&nbsp;<span class="ident" id="2746882">flag</span><span class="op" id="2746886">(</span><span class="ident" id="2746887">typ</span><span class="op" id="2746890">.</span><span class="ident" id="2746891">Kind</span><span class="op" id="2746895">(</span><span class="op" id="2746896">)</span><span class="op" id="2746897">)</span>&nbsp;<span class="comment" id="2746899">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746931">return</span>&nbsp;<span class="ident" id="2746938">Value</span><span class="op" id="2746943">{</span><span class="ident" id="2746944">typ</span><span class="op" id="2746947">,</span>&nbsp;<span class="ident" id="2746949">val</span><span class="op" id="2746952">,</span>&nbsp;<span class="ident" id="2746954">fl</span><span class="op" id="2746956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746960">case</span>&nbsp;<span class="ident" id="2746965">Slice</span><span class="op" id="2746970">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746974">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747013">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747061">s</span>&nbsp;<span class="op" id="2747063">:=</span>&nbsp;<span class="op" id="2747066">(</span><span class="op" id="2747067">*</span><span class="ident" id="2747068">sliceHeader</span><span class="op" id="2747079">)</span><span class="op" id="2747080">(</span><span class="ident" id="2747081">v</span><span class="op" id="2747082">.</span><span class="ident" id="2747083">ptr</span><span class="op" id="2747086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747090">if</span>&nbsp;<span class="builtintype" id="2747093">uint</span><span class="op" id="2747097">(</span><span class="ident" id="2747098">i</span><span class="op" id="2747099">)</span>&nbsp;<span class="op" id="2747101">&gt;=</span>&nbsp;<span class="builtintype" id="2747104">uint</span><span class="op" id="2747108">(</span><span class="ident" id="2747109">s</span><span class="op" id="2747110">.</span><span class="ident" id="2747111">Len</span><span class="op" id="2747114">)</span>&nbsp;<span class="op" id="2747116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747121">panic</span><span class="op" id="2747126">(</span><span class="string" id="2747127">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2747162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747166">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747170">tt</span>&nbsp;<span class="op" id="2747173">:=</span>&nbsp;<span class="op" id="2747176">(</span><span class="op" id="2747177">*</span><span class="ident" id="2747178">sliceType</span><span class="op" id="2747187">)</span><span class="op" id="2747188">(</span><span class="ident" id="2747189">unsafe</span><span class="op" id="2747195">.</span><span class="ident" id="2747196">Pointer</span><span class="op" id="2747203">(</span><span class="ident" id="2747204">v</span><span class="op" id="2747205">.</span><span class="ident" id="2747206">typ</span><span class="op" id="2747209">)</span><span class="op" id="2747210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747214">typ</span>&nbsp;<span class="op" id="2747218">:=</span>&nbsp;<span class="ident" id="2747221">tt</span><span class="op" id="2747223">.</span><span class="ident" id="2747224">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747231">val</span>&nbsp;<span class="op" id="2747235">:=</span>&nbsp;<span class="ident" id="2747238">unsafe</span><span class="op" id="2747244">.</span><span class="ident" id="2747245">Pointer</span><span class="op" id="2747252">(</span><span class="builtintype" id="2747253">uintptr</span><span class="op" id="2747260">(</span><span class="ident" id="2747261">s</span><span class="op" id="2747262">.</span><span class="ident" id="2747263">Data</span><span class="op" id="2747267">)</span>&nbsp;<span class="op" id="2747269">+</span>&nbsp;<span class="builtintype" id="2747271">uintptr</span><span class="op" id="2747278">(</span><span class="ident" id="2747279">i</span><span class="op" id="2747280">)</span><span class="op" id="2747281">*</span><span class="ident" id="2747282">typ</span><span class="op" id="2747285">.</span><span class="ident" id="2747286">size</span><span class="op" id="2747290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747294">fl</span>&nbsp;<span class="op" id="2747297">:=</span>&nbsp;<span class="ident" id="2747300">flagAddr</span>&nbsp;<span class="op" id="2747309">|</span>&nbsp;<span class="ident" id="2747311">flagIndir</span>&nbsp;<span class="op" id="2747321">|</span>&nbsp;<span class="ident" id="2747323">v</span><span class="op" id="2747324">.</span><span class="ident" id="2747325">flag</span><span class="op" id="2747329">&amp;</span><span class="ident" id="2747330">flagRO</span>&nbsp;<span class="op" id="2747337">|</span>&nbsp;<span class="ident" id="2747339">flag</span><span class="op" id="2747343">(</span><span class="ident" id="2747344">typ</span><span class="op" id="2747347">.</span><span class="ident" id="2747348">Kind</span><span class="op" id="2747352">(</span><span class="op" id="2747353">)</span><span class="op" id="2747354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747358">return</span>&nbsp;<span class="ident" id="2747365">Value</span><span class="op" id="2747370">{</span><span class="ident" id="2747371">typ</span><span class="op" id="2747374">,</span>&nbsp;<span class="ident" id="2747376">val</span><span class="op" id="2747379">,</span>&nbsp;<span class="ident" id="2747381">fl</span><span class="op" id="2747383">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747387">case</span>&nbsp;<span class="ident" id="2747392">String</span><span class="op" id="2747398">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747402">s</span>&nbsp;<span class="op" id="2747404">:=</span>&nbsp;<span class="op" id="2747407">(</span><span class="op" id="2747408">*</span><span class="ident" id="2747409">stringHeader</span><span class="op" id="2747421">)</span><span class="op" id="2747422">(</span><span class="ident" id="2747423">v</span><span class="op" id="2747424">.</span><span class="ident" id="2747425">ptr</span><span class="op" id="2747428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747432">if</span>&nbsp;<span class="builtintype" id="2747435">uint</span><span class="op" id="2747439">(</span><span class="ident" id="2747440">i</span><span class="op" id="2747441">)</span>&nbsp;<span class="op" id="2747443">&gt;=</span>&nbsp;<span class="builtintype" id="2747446">uint</span><span class="op" id="2747450">(</span><span class="ident" id="2747451">s</span><span class="op" id="2747452">.</span><span class="ident" id="2747453">Len</span><span class="op" id="2747456">)</span>&nbsp;<span class="op" id="2747458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747463">panic</span><span class="op" id="2747468">(</span><span class="string" id="2747469">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2747505">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747513">p</span>&nbsp;<span class="op" id="2747515">:=</span>&nbsp;<span class="ident" id="2747518">unsafe</span><span class="op" id="2747524">.</span><span class="ident" id="2747525">Pointer</span><span class="op" id="2747532">(</span><span class="builtintype" id="2747533">uintptr</span><span class="op" id="2747540">(</span><span class="ident" id="2747541">s</span><span class="op" id="2747542">.</span><span class="ident" id="2747543">Data</span><span class="op" id="2747547">)</span>&nbsp;<span class="op" id="2747549">+</span>&nbsp;<span class="builtintype" id="2747551">uintptr</span><span class="op" id="2747558">(</span><span class="ident" id="2747559">i</span><span class="op" id="2747560">)</span><span class="op" id="2747561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747565">fl</span>&nbsp;<span class="op" id="2747568">:=</span>&nbsp;<span class="ident" id="2747571">v</span><span class="op" id="2747572">.</span><span class="ident" id="2747573">flag</span><span class="op" id="2747577">&amp;</span><span class="ident" id="2747578">flagRO</span>&nbsp;<span class="op" id="2747585">|</span>&nbsp;<span class="ident" id="2747587">flag</span><span class="op" id="2747591">(</span><span class="ident" id="2747592">Uint8</span><span class="op" id="2747597">)</span>&nbsp;<span class="op" id="2747599">|</span>&nbsp;<span class="ident" id="2747601">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747613">return</span>&nbsp;<span class="ident" id="2747620">Value</span><span class="op" id="2747625">{</span><span class="ident" id="2747626">uint8Type</span><span class="op" id="2747635">,</span>&nbsp;<span class="ident" id="2747637">p</span><span class="op" id="2747638">,</span>&nbsp;<span class="ident" id="2747640">fl</span><span class="op" id="2747642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747645">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2747648">panic</span><span class="op" id="2747653">(</span><span class="op" id="2747654">&amp;</span><span class="ident" id="2747655">ValueError</span><span class="op" id="2747665">{</span><span class="string" id="2747666">&#34;reflect.Value.Index&#34;</span><span class="op" id="2747687">,</span>&nbsp;<span class="ident" id="2747689">v</span><span class="op" id="2747690">.</span><span class="ident" id="2747691">kind</span><span class="op" id="2747695">(</span><span class="op" id="2747696">)</span><span class="op" id="2747697">}</span><span class="op" id="2747698">)</span><br>
<span class="lineno"></span><span class="op" id="2747700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2747703">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2747753">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2747820">func</span>&nbsp;<span class="op" id="2747825">(</span><span class="ident" id="2747826">v</span>&nbsp;<span class="ident" id="2747828">Value</span><span class="op" id="2747833">)</span>&nbsp;<span class="ident" id="2747835">Int</span><span class="op" id="2747838">(</span><span class="op" id="2747839">)</span>&nbsp;<span class="ident" id="2747841">int64</span>&nbsp;<span class="op" id="2747847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747850">k</span>&nbsp;<span class="op" id="2747852">:=</span>&nbsp;<span class="ident" id="2747855">v</span><span class="op" id="2747856">.</span><span class="ident" id="2747857">kind</span><span class="op" id="2747861">(</span><span class="op" id="2747862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747865">p</span>&nbsp;<span class="op" id="2747867">:=</span>&nbsp;<span class="ident" id="2747870">v</span><span class="op" id="2747871">.</span><span class="ident" id="2747872">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747877">switch</span>&nbsp;<span class="ident" id="2747884">k</span>&nbsp;<span class="op" id="2747886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747889">case</span>&nbsp;<span class="ident" id="2747894">Int</span><span class="op" id="2747897">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747901">return</span>&nbsp;<span class="ident" id="2747908">int64</span><span class="op" id="2747913">(</span><span class="op" id="2747914">*</span><span class="op" id="2747915">(</span><span class="op" id="2747916">*</span><span class="builtintype" id="2747917">int</span><span class="op" id="2747920">)</span><span class="op" id="2747921">(</span><span class="ident" id="2747922">p</span><span class="op" id="2747923">)</span><span class="op" id="2747924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747927">case</span>&nbsp;<span class="ident" id="2747932">Int8</span><span class="op" id="2747936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747940">return</span>&nbsp;<span class="ident" id="2747947">int64</span><span class="op" id="2747952">(</span><span class="op" id="2747953">*</span><span class="op" id="2747954">(</span><span class="op" id="2747955">*</span><span class="builtintype" id="2747956">int8</span><span class="op" id="2747960">)</span><span class="op" id="2747961">(</span><span class="ident" id="2747962">p</span><span class="op" id="2747963">)</span><span class="op" id="2747964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747967">case</span>&nbsp;<span class="ident" id="2747972">Int16</span><span class="op" id="2747977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747981">return</span>&nbsp;<span class="ident" id="2747988">int64</span><span class="op" id="2747993">(</span><span class="op" id="2747994">*</span><span class="op" id="2747995">(</span><span class="op" id="2747996">*</span><span class="builtintype" id="2747997">int16</span><span class="op" id="2748002">)</span><span class="op" id="2748003">(</span><span class="ident" id="2748004">p</span><span class="op" id="2748005">)</span><span class="op" id="2748006">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748009">case</span>&nbsp;<span class="ident" id="2748014">Int32</span><span class="op" id="2748019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748023">return</span>&nbsp;<span class="ident" id="2748030">int64</span><span class="op" id="2748035">(</span><span class="op" id="2748036">*</span><span class="op" id="2748037">(</span><span class="op" id="2748038">*</span><span class="builtintype" id="2748039">int32</span><span class="op" id="2748044">)</span><span class="op" id="2748045">(</span><span class="ident" id="2748046">p</span><span class="op" id="2748047">)</span><span class="op" id="2748048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748051">case</span>&nbsp;<span class="ident" id="2748056">Int64</span><span class="op" id="2748061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748065">return</span>&nbsp;<span class="ident" id="2748072">int64</span><span class="op" id="2748077">(</span><span class="op" id="2748078">*</span><span class="op" id="2748079">(</span><span class="op" id="2748080">*</span><span class="ident" id="2748081">int64</span><span class="op" id="2748086">)</span><span class="op" id="2748087">(</span><span class="ident" id="2748088">p</span><span class="op" id="2748089">)</span><span class="op" id="2748090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748093">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2748096">panic</span><span class="op" id="2748101">(</span><span class="op" id="2748102">&amp;</span><span class="ident" id="2748103">ValueError</span><span class="op" id="2748113">{</span><span class="string" id="2748114">&#34;reflect.Value.Int&#34;</span><span class="op" id="2748133">,</span>&nbsp;<span class="ident" id="2748135">v</span><span class="op" id="2748136">.</span><span class="ident" id="2748137">kind</span><span class="op" id="2748141">(</span><span class="op" id="2748142">)</span><span class="op" id="2748143">}</span><span class="op" id="2748144">)</span><br>
<span class="lineno"></span><span class="op" id="2748146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748149">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2748222">func</span>&nbsp;<span class="op" id="2748227">(</span><span class="ident" id="2748228">v</span>&nbsp;<span class="ident" id="2748230">Value</span><span class="op" id="2748235">)</span>&nbsp;<span class="ident" id="2748237">CanInterface</span><span class="op" id="2748249">(</span><span class="op" id="2748250">)</span>&nbsp;<span class="builtintype" id="2748252">bool</span>&nbsp;<span class="op" id="2748257">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748260">if</span>&nbsp;<span class="ident" id="2748263">v</span><span class="op" id="2748264">.</span><span class="ident" id="2748265">flag</span>&nbsp;<span class="op" id="2748270">==</span>&nbsp;<span class="num" id="2748273">0</span>&nbsp;<span class="op" id="2748275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2748279">panic</span><span class="op" id="2748284">(</span><span class="op" id="2748285">&amp;</span><span class="ident" id="2748286">ValueError</span><span class="op" id="2748296">{</span><span class="string" id="2748297">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2748325">,</span>&nbsp;<span class="ident" id="2748327">Invalid</span><span class="op" id="2748334">}</span><span class="op" id="2748335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748341">return</span>&nbsp;<span class="ident" id="2748348">v</span><span class="op" id="2748349">.</span><span class="ident" id="2748350">flag</span><span class="op" id="2748354">&amp;</span><span class="ident" id="2748355">flagRO</span>&nbsp;<span class="op" id="2748362">==</span>&nbsp;<span class="num" id="2748365">0</span><br>
<span class="lineno"></span><span class="op" id="2748367">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2748370">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2748428">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2748452">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2748498">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2748550">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2748579">func</span>&nbsp;<span class="op" id="2748584">(</span><span class="ident" id="2748585">v</span>&nbsp;<span class="ident" id="2748587">Value</span><span class="op" id="2748592">)</span>&nbsp;<span class="ident" id="2748594">Interface</span><span class="op" id="2748603">(</span><span class="op" id="2748604">)</span>&nbsp;<span class="op" id="2748606">(</span><span class="ident" id="2748607">i</span>&nbsp;<span class="keyword" id="2748609">interface</span><span class="op" id="2748618">{</span><span class="op" id="2748619">}</span><span class="op" id="2748620">)</span>&nbsp;<span class="op" id="2748622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748625">return</span>&nbsp;<span class="ident" id="2748632">valueInterface</span><span class="op" id="2748646">(</span><span class="ident" id="2748647">v</span><span class="op" id="2748648">,</span>&nbsp;<span class="builtintype" id="2748650">true</span><span class="op" id="2748654">)</span><br>
<span class="lineno"></span><span class="op" id="2748656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2748659">func</span>&nbsp;<span class="ident" id="2748664">valueInterface</span><span class="op" id="2748678">(</span><span class="ident" id="2748679">v</span>&nbsp;<span class="ident" id="2748681">Value</span><span class="op" id="2748686">,</span>&nbsp;<span class="ident" id="2748688">safe</span>&nbsp;<span class="builtintype" id="2748693">bool</span><span class="op" id="2748697">)</span>&nbsp;<span class="keyword" id="2748699">interface</span><span class="op" id="2748708">{</span><span class="op" id="2748709">}</span>&nbsp;<span class="op" id="2748711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748714">if</span>&nbsp;<span class="ident" id="2748717">v</span><span class="op" id="2748718">.</span><span class="ident" id="2748719">flag</span>&nbsp;<span class="op" id="2748724">==</span>&nbsp;<span class="num" id="2748727">0</span>&nbsp;<span class="op" id="2748729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2748733">panic</span><span class="op" id="2748738">(</span><span class="op" id="2748739">&amp;</span><span class="ident" id="2748740">ValueError</span><span class="op" id="2748750">{</span><span class="string" id="2748751">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2748776">,</span>&nbsp;<span class="num" id="2748778">0</span><span class="op" id="2748779">}</span><span class="op" id="2748780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748786">if</span>&nbsp;<span class="ident" id="2748789">safe</span>&nbsp;<span class="op" id="2748794">&amp;&amp;</span>&nbsp;<span class="ident" id="2748797">v</span><span class="op" id="2748798">.</span><span class="ident" id="2748799">flag</span><span class="op" id="2748803">&amp;</span><span class="ident" id="2748804">flagRO</span>&nbsp;<span class="op" id="2748811">!=</span>&nbsp;<span class="num" id="2748814">0</span>&nbsp;<span class="op" id="2748816">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748820">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748881">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748936">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749002">panic</span><span class="op" id="2749007">(</span><span class="string" id="2749008">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2749095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749098">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749101">if</span>&nbsp;<span class="ident" id="2749104">v</span><span class="op" id="2749105">.</span><span class="ident" id="2749106">flag</span><span class="op" id="2749110">&amp;</span><span class="ident" id="2749111">flagMethod</span>&nbsp;<span class="op" id="2749122">!=</span>&nbsp;<span class="num" id="2749125">0</span>&nbsp;<span class="op" id="2749127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749131">v</span>&nbsp;<span class="op" id="2749133">=</span>&nbsp;<span class="ident" id="2749135">makeMethodValue</span><span class="op" id="2749150">(</span><span class="string" id="2749151">&#34;Interface&#34;</span><span class="op" id="2749162">,</span>&nbsp;<span class="ident" id="2749164">v</span><span class="op" id="2749165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749172">if</span>&nbsp;<span class="ident" id="2749175">v</span><span class="op" id="2749176">.</span><span class="ident" id="2749177">kind</span><span class="op" id="2749181">(</span><span class="op" id="2749182">)</span>&nbsp;<span class="op" id="2749184">==</span>&nbsp;<span class="ident" id="2749187">Interface</span>&nbsp;<span class="op" id="2749197">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749201">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749261">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749318">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749353">if</span>&nbsp;<span class="ident" id="2749356">v</span><span class="op" id="2749357">.</span><span class="ident" id="2749358">NumMethod</span><span class="op" id="2749367">(</span><span class="op" id="2749368">)</span>&nbsp;<span class="op" id="2749370">==</span>&nbsp;<span class="num" id="2749373">0</span>&nbsp;<span class="op" id="2749375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749380">return</span>&nbsp;<span class="op" id="2749387">*</span><span class="op" id="2749388">(</span><span class="op" id="2749389">*</span><span class="keyword" id="2749390">interface</span><span class="op" id="2749399">{</span><span class="op" id="2749400">}</span><span class="op" id="2749401">)</span><span class="op" id="2749402">(</span><span class="ident" id="2749403">v</span><span class="op" id="2749404">.</span><span class="ident" id="2749405">ptr</span><span class="op" id="2749408">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749416">return</span>&nbsp;<span class="op" id="2749423">*</span><span class="op" id="2749424">(</span><span class="op" id="2749425">*</span><span class="keyword" id="2749426">interface</span>&nbsp;<span class="op" id="2749436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749441">M</span><span class="op" id="2749442">(</span><span class="op" id="2749443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749447">}</span><span class="op" id="2749448">)</span><span class="op" id="2749449">(</span><span class="ident" id="2749450">v</span><span class="op" id="2749451">.</span><span class="ident" id="2749452">ptr</span><span class="op" id="2749455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749458">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749462">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749535">return</span>&nbsp;<span class="ident" id="2749542">packEface</span><span class="op" id="2749551">(</span><span class="ident" id="2749552">v</span><span class="op" id="2749553">)</span><br>
<span class="lineno"></span><span class="op" id="2749555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2749558">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2749626">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2749669">func</span>&nbsp;<span class="op" id="2749674">(</span><span class="ident" id="2749675">v</span>&nbsp;<span class="ident" id="2749677">Value</span><span class="op" id="2749682">)</span>&nbsp;<span class="ident" id="2749684">InterfaceData</span><span class="op" id="2749697">(</span><span class="op" id="2749698">)</span>&nbsp;<span class="op" id="2749700">[</span><span class="num" id="2749701">2</span><span class="op" id="2749702">]</span><span class="builtintype" id="2749703">uintptr</span>&nbsp;<span class="op" id="2749711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749714">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749739">v</span><span class="op" id="2749740">.</span><span class="ident" id="2749741">mustBe</span><span class="op" id="2749747">(</span><span class="ident" id="2749748">Interface</span><span class="op" id="2749757">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749760">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749811">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749863">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749916">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2749940">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750008">return</span>&nbsp;<span class="op" id="2750015">*</span><span class="op" id="2750016">(</span><span class="op" id="2750017">*</span><span class="op" id="2750018">[</span><span class="num" id="2750019">2</span><span class="op" id="2750020">]</span><span class="builtintype" id="2750021">uintptr</span><span class="op" id="2750028">)</span><span class="op" id="2750029">(</span><span class="ident" id="2750030">v</span><span class="op" id="2750031">.</span><span class="ident" id="2750032">ptr</span><span class="op" id="2750035">)</span><br>
<span class="lineno"></span><span class="op" id="2750037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2750040">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2750109">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2750176">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2750244">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2750312">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2750378">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2750446">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2750456">func</span>&nbsp;<span class="op" id="2750461">(</span><span class="ident" id="2750462">v</span>&nbsp;<span class="ident" id="2750464">Value</span><span class="op" id="2750469">)</span>&nbsp;<span class="ident" id="2750471">IsNil</span><span class="op" id="2750476">(</span><span class="op" id="2750477">)</span>&nbsp;<span class="builtintype" id="2750479">bool</span>&nbsp;<span class="op" id="2750484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750487">k</span>&nbsp;<span class="op" id="2750489">:=</span>&nbsp;<span class="ident" id="2750492">v</span><span class="op" id="2750493">.</span><span class="ident" id="2750494">kind</span><span class="op" id="2750498">(</span><span class="op" id="2750499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750502">switch</span>&nbsp;<span class="ident" id="2750509">k</span>&nbsp;<span class="op" id="2750511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750514">case</span>&nbsp;<span class="ident" id="2750519">Chan</span><span class="op" id="2750523">,</span>&nbsp;<span class="ident" id="2750525">Func</span><span class="op" id="2750529">,</span>&nbsp;<span class="ident" id="2750531">Map</span><span class="op" id="2750534">,</span>&nbsp;<span class="ident" id="2750536">Ptr</span><span class="op" id="2750539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750543">if</span>&nbsp;<span class="ident" id="2750546">v</span><span class="op" id="2750547">.</span><span class="ident" id="2750548">flag</span><span class="op" id="2750552">&amp;</span><span class="ident" id="2750553">flagMethod</span>&nbsp;<span class="op" id="2750564">!=</span>&nbsp;<span class="num" id="2750567">0</span>&nbsp;<span class="op" id="2750569">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750574">return</span>&nbsp;<span class="builtintype" id="2750581">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750593">ptr</span>&nbsp;<span class="op" id="2750597">:=</span>&nbsp;<span class="ident" id="2750600">v</span><span class="op" id="2750601">.</span><span class="ident" id="2750602">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750608">if</span>&nbsp;<span class="ident" id="2750611">v</span><span class="op" id="2750612">.</span><span class="ident" id="2750613">flag</span><span class="op" id="2750617">&amp;</span><span class="ident" id="2750618">flagIndir</span>&nbsp;<span class="op" id="2750628">!=</span>&nbsp;<span class="num" id="2750631">0</span>&nbsp;<span class="op" id="2750633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750638">ptr</span>&nbsp;<span class="op" id="2750642">=</span>&nbsp;<span class="op" id="2750644">*</span><span class="op" id="2750645">(</span><span class="op" id="2750646">*</span><span class="ident" id="2750647">unsafe</span><span class="op" id="2750653">.</span><span class="ident" id="2750654">Pointer</span><span class="op" id="2750661">)</span><span class="op" id="2750662">(</span><span class="ident" id="2750663">ptr</span><span class="op" id="2750666">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750674">return</span>&nbsp;<span class="ident" id="2750681">ptr</span>&nbsp;<span class="op" id="2750685">==</span>&nbsp;<span class="ident" id="2750688">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750693">case</span>&nbsp;<span class="ident" id="2750698">Interface</span><span class="op" id="2750707">,</span>&nbsp;<span class="ident" id="2750709">Slice</span><span class="op" id="2750714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2750718">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2750776">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750835">return</span>&nbsp;<span class="op" id="2750842">*</span><span class="op" id="2750843">(</span><span class="op" id="2750844">*</span><span class="ident" id="2750845">unsafe</span><span class="op" id="2750851">.</span><span class="ident" id="2750852">Pointer</span><span class="op" id="2750859">)</span><span class="op" id="2750860">(</span><span class="ident" id="2750861">v</span><span class="op" id="2750862">.</span><span class="ident" id="2750863">ptr</span><span class="op" id="2750866">)</span>&nbsp;<span class="op" id="2750868">==</span>&nbsp;<span class="ident" id="2750871">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2750879">panic</span><span class="op" id="2750884">(</span><span class="op" id="2750885">&amp;</span><span class="ident" id="2750886">ValueError</span><span class="op" id="2750896">{</span><span class="string" id="2750897">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2750918">,</span>&nbsp;<span class="ident" id="2750920">v</span><span class="op" id="2750921">.</span><span class="ident" id="2750922">kind</span><span class="op" id="2750926">(</span><span class="op" id="2750927">)</span><span class="op" id="2750928">}</span><span class="op" id="2750929">)</span><br>
<span class="lineno"></span><span class="op" id="2750931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2750934">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2750983">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2751027">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2751095">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2751156">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2751224">func</span>&nbsp;<span class="op" id="2751229">(</span><span class="ident" id="2751230">v</span>&nbsp;<span class="ident" id="2751232">Value</span><span class="op" id="2751237">)</span>&nbsp;<span class="ident" id="2751239">IsValid</span><span class="op" id="2751246">(</span><span class="op" id="2751247">)</span>&nbsp;<span class="builtintype" id="2751249">bool</span>&nbsp;<span class="op" id="2751254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751257">return</span>&nbsp;<span class="ident" id="2751264">v</span><span class="op" id="2751265">.</span><span class="ident" id="2751266">flag</span>&nbsp;<span class="op" id="2751271">!=</span>&nbsp;<span class="num" id="2751274">0</span><br>
<span class="lineno"></span><span class="op" id="2751276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751279">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2751305">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2751378">func</span>&nbsp;<span class="op" id="2751383">(</span><span class="ident" id="2751384">v</span>&nbsp;<span class="ident" id="2751386">Value</span><span class="op" id="2751391">)</span>&nbsp;<span class="ident" id="2751393">Kind</span><span class="op" id="2751397">(</span><span class="op" id="2751398">)</span>&nbsp;<span class="ident" id="2751400">Kind</span>&nbsp;<span class="op" id="2751405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751408">return</span>&nbsp;<span class="ident" id="2751415">v</span><span class="op" id="2751416">.</span><span class="ident" id="2751417">kind</span><span class="op" id="2751421">(</span><span class="op" id="2751422">)</span><br>
<span class="lineno"></span><span class="op" id="2751424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2751427">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2751454">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2751522">func</span>&nbsp;<span class="op" id="2751527">(</span><span class="ident" id="2751528">v</span>&nbsp;<span class="ident" id="2751530">Value</span><span class="op" id="2751535">)</span>&nbsp;<span class="ident" id="2751537">Len</span><span class="op" id="2751540">(</span><span class="op" id="2751541">)</span>&nbsp;<span class="builtintype" id="2751543">int</span>&nbsp;<span class="op" id="2751547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751550">k</span>&nbsp;<span class="op" id="2751552">:=</span>&nbsp;<span class="ident" id="2751555">v</span><span class="op" id="2751556">.</span><span class="ident" id="2751557">kind</span><span class="op" id="2751561">(</span><span class="op" id="2751562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751565">switch</span>&nbsp;<span class="ident" id="2751572">k</span>&nbsp;<span class="op" id="2751574">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751577">case</span>&nbsp;<span class="ident" id="2751582">Array</span><span class="op" id="2751587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751591">tt</span>&nbsp;<span class="op" id="2751594">:=</span>&nbsp;<span class="op" id="2751597">(</span><span class="op" id="2751598">*</span><span class="ident" id="2751599">arrayType</span><span class="op" id="2751608">)</span><span class="op" id="2751609">(</span><span class="ident" id="2751610">unsafe</span><span class="op" id="2751616">.</span><span class="ident" id="2751617">Pointer</span><span class="op" id="2751624">(</span><span class="ident" id="2751625">v</span><span class="op" id="2751626">.</span><span class="ident" id="2751627">typ</span><span class="op" id="2751630">)</span><span class="op" id="2751631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751635">return</span>&nbsp;<span class="builtintype" id="2751642">int</span><span class="op" id="2751645">(</span><span class="ident" id="2751646">tt</span><span class="op" id="2751648">.</span><span class="builtinfunc" id="2751649">len</span><span class="op" id="2751652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751655">case</span>&nbsp;<span class="ident" id="2751660">Chan</span><span class="op" id="2751664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751668">return</span>&nbsp;<span class="ident" id="2751675">chanlen</span><span class="op" id="2751682">(</span><span class="ident" id="2751683">v</span><span class="op" id="2751684">.</span><span class="ident" id="2751685">pointer</span><span class="op" id="2751692">(</span><span class="op" id="2751693">)</span><span class="op" id="2751694">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751697">case</span>&nbsp;<span class="ident" id="2751702">Map</span><span class="op" id="2751705">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751709">return</span>&nbsp;<span class="ident" id="2751716">maplen</span><span class="op" id="2751722">(</span><span class="ident" id="2751723">v</span><span class="op" id="2751724">.</span><span class="ident" id="2751725">pointer</span><span class="op" id="2751732">(</span><span class="op" id="2751733">)</span><span class="op" id="2751734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751737">case</span>&nbsp;<span class="ident" id="2751742">Slice</span><span class="op" id="2751747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751751">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751803">return</span>&nbsp;<span class="op" id="2751810">(</span><span class="op" id="2751811">*</span><span class="ident" id="2751812">sliceHeader</span><span class="op" id="2751823">)</span><span class="op" id="2751824">(</span><span class="ident" id="2751825">v</span><span class="op" id="2751826">.</span><span class="ident" id="2751827">ptr</span><span class="op" id="2751830">)</span><span class="op" id="2751831">.</span><span class="ident" id="2751832">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751837">case</span>&nbsp;<span class="ident" id="2751842">String</span><span class="op" id="2751848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2751852">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751905">return</span>&nbsp;<span class="op" id="2751912">(</span><span class="op" id="2751913">*</span><span class="ident" id="2751914">stringHeader</span><span class="op" id="2751926">)</span><span class="op" id="2751927">(</span><span class="ident" id="2751928">v</span><span class="op" id="2751929">.</span><span class="ident" id="2751930">ptr</span><span class="op" id="2751933">)</span><span class="op" id="2751934">.</span><span class="ident" id="2751935">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2751943">panic</span><span class="op" id="2751948">(</span><span class="op" id="2751949">&amp;</span><span class="ident" id="2751950">ValueError</span><span class="op" id="2751960">{</span><span class="string" id="2751961">&#34;reflect.Value.Len&#34;</span><span class="op" id="2751980">,</span>&nbsp;<span class="ident" id="2751982">v</span><span class="op" id="2751983">.</span><span class="ident" id="2751984">kind</span><span class="op" id="2751988">(</span><span class="op" id="2751989">)</span><span class="op" id="2751990">}</span><span class="op" id="2751991">)</span><br>
<span class="lineno">980</span><span class="op" id="2751993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751996">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2752060">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2752097">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2752187">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2752258">func</span>&nbsp;<span class="op" id="2752263">(</span><span class="ident" id="2752264">v</span>&nbsp;<span class="ident" id="2752266">Value</span><span class="op" id="2752271">)</span>&nbsp;<span class="ident" id="2752273">MapIndex</span><span class="op" id="2752281">(</span><span class="ident" id="2752282">key</span>&nbsp;<span class="ident" id="2752286">Value</span><span class="op" id="2752291">)</span>&nbsp;<span class="ident" id="2752293">Value</span>&nbsp;<span class="op" id="2752299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752302">v</span><span class="op" id="2752303">.</span><span class="ident" id="2752304">mustBe</span><span class="op" id="2752310">(</span><span class="ident" id="2752311">Map</span><span class="op" id="2752314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752317">tt</span>&nbsp;<span class="op" id="2752320">:=</span>&nbsp;<span class="op" id="2752323">(</span><span class="op" id="2752324">*</span><span class="ident" id="2752325">mapType</span><span class="op" id="2752332">)</span><span class="op" id="2752333">(</span><span class="ident" id="2752334">unsafe</span><span class="op" id="2752340">.</span><span class="ident" id="2752341">Pointer</span><span class="op" id="2752348">(</span><span class="ident" id="2752349">v</span><span class="op" id="2752350">.</span><span class="ident" id="2752351">typ</span><span class="op" id="2752354">)</span><span class="op" id="2752355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752359">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752416">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752472">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752529">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752586">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752642">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2752699">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752725">key</span>&nbsp;<span class="op" id="2752729">=</span>&nbsp;<span class="ident" id="2752731">key</span><span class="op" id="2752734">.</span><span class="ident" id="2752735">assignTo</span><span class="op" id="2752743">(</span><span class="string" id="2752744">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2752768">,</span>&nbsp;<span class="ident" id="2752770">tt</span><span class="op" id="2752772">.</span><span class="ident" id="2752773">key</span><span class="op" id="2752776">,</span>&nbsp;<span class="ident" id="2752778">nil</span><span class="op" id="2752781">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752785">var</span>&nbsp;<span class="ident" id="2752789">k</span>&nbsp;<span class="ident" id="2752791">unsafe</span><span class="op" id="2752797">.</span><span class="ident" id="2752798">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752807">if</span>&nbsp;<span class="ident" id="2752810">key</span><span class="op" id="2752813">.</span><span class="ident" id="2752814">flag</span><span class="op" id="2752818">&amp;</span><span class="ident" id="2752819">flagIndir</span>&nbsp;<span class="op" id="2752829">!=</span>&nbsp;<span class="num" id="2752832">0</span>&nbsp;<span class="op" id="2752834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752838">k</span>&nbsp;<span class="op" id="2752840">=</span>&nbsp;<span class="ident" id="2752842">key</span><span class="op" id="2752845">.</span><span class="ident" id="2752846">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752851">}</span>&nbsp;<span class="keyword" id="2752853">else</span>&nbsp;<span class="op" id="2752858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752862">k</span>&nbsp;<span class="op" id="2752864">=</span>&nbsp;<span class="ident" id="2752866">unsafe</span><span class="op" id="2752872">.</span><span class="ident" id="2752873">Pointer</span><span class="op" id="2752880">(</span><span class="op" id="2752881">&amp;</span><span class="ident" id="2752882">key</span><span class="op" id="2752885">.</span><span class="ident" id="2752886">ptr</span><span class="op" id="2752889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752892">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752895">e</span>&nbsp;<span class="op" id="2752897">:=</span>&nbsp;<span class="ident" id="2752900">mapaccess</span><span class="op" id="2752909">(</span><span class="ident" id="2752910">v</span><span class="op" id="2752911">.</span><span class="ident" id="2752912">typ</span><span class="op" id="2752915">,</span>&nbsp;<span class="ident" id="2752917">v</span><span class="op" id="2752918">.</span><span class="ident" id="2752919">pointer</span><span class="op" id="2752926">(</span><span class="op" id="2752927">)</span><span class="op" id="2752928">,</span>&nbsp;<span class="ident" id="2752930">k</span><span class="op" id="2752931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752934">if</span>&nbsp;<span class="ident" id="2752937">e</span>&nbsp;<span class="op" id="2752939">==</span>&nbsp;<span class="ident" id="2752942">nil</span>&nbsp;<span class="op" id="2752946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752950">return</span>&nbsp;<span class="ident" id="2752957">Value</span><span class="op" id="2752962">{</span><span class="op" id="2752963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752969">typ</span>&nbsp;<span class="op" id="2752973">:=</span>&nbsp;<span class="ident" id="2752976">tt</span><span class="op" id="2752978">.</span><span class="ident" id="2752979">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752985">fl</span>&nbsp;<span class="op" id="2752988">:=</span>&nbsp;<span class="op" id="2752991">(</span><span class="ident" id="2752992">v</span><span class="op" id="2752993">.</span><span class="ident" id="2752994">flag</span>&nbsp;<span class="op" id="2752999">|</span>&nbsp;<span class="ident" id="2753001">key</span><span class="op" id="2753004">.</span><span class="ident" id="2753005">flag</span><span class="op" id="2753009">)</span>&nbsp;<span class="op" id="2753011">&amp;</span>&nbsp;<span class="ident" id="2753013">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753021">fl</span>&nbsp;<span class="op" id="2753024">|=</span>&nbsp;<span class="ident" id="2753027">flag</span><span class="op" id="2753031">(</span><span class="ident" id="2753032">typ</span><span class="op" id="2753035">.</span><span class="ident" id="2753036">Kind</span><span class="op" id="2753040">(</span><span class="op" id="2753041">)</span><span class="op" id="2753042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753045">if</span>&nbsp;<span class="ident" id="2753048">ifaceIndir</span><span class="op" id="2753058">(</span><span class="ident" id="2753059">typ</span><span class="op" id="2753062">)</span>&nbsp;<span class="op" id="2753064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753068">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753114">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753154">c</span>&nbsp;<span class="op" id="2753156">:=</span>&nbsp;<span class="ident" id="2753159">unsafe_New</span><span class="op" id="2753169">(</span><span class="ident" id="2753170">typ</span><span class="op" id="2753173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753177">memmove</span><span class="op" id="2753184">(</span><span class="ident" id="2753185">c</span><span class="op" id="2753186">,</span>&nbsp;<span class="ident" id="2753188">e</span><span class="op" id="2753189">,</span>&nbsp;<span class="ident" id="2753191">typ</span><span class="op" id="2753194">.</span><span class="ident" id="2753195">size</span><span class="op" id="2753199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753203">return</span>&nbsp;<span class="ident" id="2753210">Value</span><span class="op" id="2753215">{</span><span class="ident" id="2753216">typ</span><span class="op" id="2753219">,</span>&nbsp;<span class="ident" id="2753221">c</span><span class="op" id="2753222">,</span>&nbsp;<span class="ident" id="2753224">fl</span>&nbsp;<span class="op" id="2753227">|</span>&nbsp;<span class="ident" id="2753229">flagIndir</span><span class="op" id="2753238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753241">}</span>&nbsp;<span class="keyword" id="2753243">else</span>&nbsp;<span class="op" id="2753248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753252">return</span>&nbsp;<span class="ident" id="2753259">Value</span><span class="op" id="2753264">{</span><span class="ident" id="2753265">typ</span><span class="op" id="2753268">,</span>&nbsp;<span class="op" id="2753270">*</span><span class="op" id="2753271">(</span><span class="op" id="2753272">*</span><span class="ident" id="2753273">unsafe</span><span class="op" id="2753279">.</span><span class="ident" id="2753280">Pointer</span><span class="op" id="2753287">)</span><span class="op" id="2753288">(</span><span class="ident" id="2753289">e</span><span class="op" id="2753290">)</span><span class="op" id="2753291">,</span>&nbsp;<span class="ident" id="2753293">fl</span><span class="op" id="2753295">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753298">}</span><br>
<span class="lineno"></span><span class="op" id="2753300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2753303">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2753374">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2753399">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2753436">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2753492">func</span>&nbsp;<span class="op" id="2753497">(</span><span class="ident" id="2753498">v</span>&nbsp;<span class="ident" id="2753500">Value</span><span class="op" id="2753505">)</span>&nbsp;<span class="ident" id="2753507">MapKeys</span><span class="op" id="2753514">(</span><span class="op" id="2753515">)</span>&nbsp;<span class="op" id="2753517">[</span><span class="op" id="2753518">]</span><span class="ident" id="2753519">Value</span>&nbsp;<span class="op" id="2753525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753528">v</span><span class="op" id="2753529">.</span><span class="ident" id="2753530">mustBe</span><span class="op" id="2753536">(</span><span class="ident" id="2753537">Map</span><span class="op" id="2753540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753543">tt</span>&nbsp;<span class="op" id="2753546">:=</span>&nbsp;<span class="op" id="2753549">(</span><span class="op" id="2753550">*</span><span class="ident" id="2753551">mapType</span><span class="op" id="2753558">)</span><span class="op" id="2753559">(</span><span class="ident" id="2753560">unsafe</span><span class="op" id="2753566">.</span><span class="ident" id="2753567">Pointer</span><span class="op" id="2753574">(</span><span class="ident" id="2753575">v</span><span class="op" id="2753576">.</span><span class="ident" id="2753577">typ</span><span class="op" id="2753580">)</span><span class="op" id="2753581">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753584">keyType</span>&nbsp;<span class="op" id="2753592">:=</span>&nbsp;<span class="ident" id="2753595">tt</span><span class="op" id="2753597">.</span><span class="ident" id="2753598">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753604">fl</span>&nbsp;<span class="op" id="2753607">:=</span>&nbsp;<span class="ident" id="2753610">v</span><span class="op" id="2753611">.</span><span class="ident" id="2753612">flag</span><span class="op" id="2753616">&amp;</span><span class="ident" id="2753617">flagRO</span>&nbsp;<span class="op" id="2753624">|</span>&nbsp;<span class="ident" id="2753626">flag</span><span class="op" id="2753630">(</span><span class="ident" id="2753631">keyType</span><span class="op" id="2753638">.</span><span class="ident" id="2753639">Kind</span><span class="op" id="2753643">(</span><span class="op" id="2753644">)</span><span class="op" id="2753645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753649">m</span>&nbsp;<span class="op" id="2753651">:=</span>&nbsp;<span class="ident" id="2753654">v</span><span class="op" id="2753655">.</span><span class="ident" id="2753656">pointer</span><span class="op" id="2753663">(</span><span class="op" id="2753664">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753667">mlen</span>&nbsp;<span class="op" id="2753672">:=</span>&nbsp;<span class="builtintype" id="2753675">int</span><span class="op" id="2753678">(</span><span class="num" id="2753679">0</span><span class="op" id="2753680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753683">if</span>&nbsp;<span class="ident" id="2753686">m</span>&nbsp;<span class="op" id="2753688">!=</span>&nbsp;<span class="ident" id="2753691">nil</span>&nbsp;<span class="op" id="2753695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753699">mlen</span>&nbsp;<span class="op" id="2753704">=</span>&nbsp;<span class="ident" id="2753706">maplen</span><span class="op" id="2753712">(</span><span class="ident" id="2753713">m</span><span class="op" id="2753714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753720">it</span>&nbsp;<span class="op" id="2753723">:=</span>&nbsp;<span class="ident" id="2753726">mapiterinit</span><span class="op" id="2753737">(</span><span class="ident" id="2753738">v</span><span class="op" id="2753739">.</span><span class="ident" id="2753740">typ</span><span class="op" id="2753743">,</span>&nbsp;<span class="ident" id="2753745">m</span><span class="op" id="2753746">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753749">a</span>&nbsp;<span class="op" id="2753751">:=</span>&nbsp;<span class="builtinfunc" id="2753754">make</span><span class="op" id="2753758">(</span><span class="op" id="2753759">[</span><span class="op" id="2753760">]</span><span class="ident" id="2753761">Value</span><span class="op" id="2753766">,</span>&nbsp;<span class="ident" id="2753768">mlen</span><span class="op" id="2753772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753775">var</span>&nbsp;<span class="ident" id="2753779">i</span>&nbsp;<span class="builtintype" id="2753781">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753786">for</span>&nbsp;<span class="ident" id="2753790">i</span>&nbsp;<span class="op" id="2753792">=</span>&nbsp;<span class="num" id="2753794">0</span><span class="op" id="2753795">;</span>&nbsp;<span class="ident" id="2753797">i</span>&nbsp;<span class="op" id="2753799">&lt;</span>&nbsp;<span class="builtinfunc" id="2753801">len</span><span class="op" id="2753804">(</span><span class="ident" id="2753805">a</span><span class="op" id="2753806">)</span><span class="op" id="2753807">;</span>&nbsp;<span class="ident" id="2753809">i</span><span class="op" id="2753810">++</span>&nbsp;<span class="op" id="2753813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753817">key</span>&nbsp;<span class="op" id="2753821">:=</span>&nbsp;<span class="ident" id="2753824">mapiterkey</span><span class="op" id="2753834">(</span><span class="ident" id="2753835">it</span><span class="op" id="2753837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753841">if</span>&nbsp;<span class="ident" id="2753844">key</span>&nbsp;<span class="op" id="2753848">==</span>&nbsp;<span class="ident" id="2753851">nil</span>&nbsp;<span class="op" id="2753855">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753860">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753913">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753971">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753997">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754005">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754009">if</span>&nbsp;<span class="ident" id="2754012">ifaceIndir</span><span class="op" id="2754022">(</span><span class="ident" id="2754023">keyType</span><span class="op" id="2754030">)</span>&nbsp;<span class="op" id="2754032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754037">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754084">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754125">c</span>&nbsp;<span class="op" id="2754127">:=</span>&nbsp;<span class="ident" id="2754130">unsafe_New</span><span class="op" id="2754140">(</span><span class="ident" id="2754141">keyType</span><span class="op" id="2754148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754153">memmove</span><span class="op" id="2754160">(</span><span class="ident" id="2754161">c</span><span class="op" id="2754162">,</span>&nbsp;<span class="ident" id="2754164">key</span><span class="op" id="2754167">,</span>&nbsp;<span class="ident" id="2754169">keyType</span><span class="op" id="2754176">.</span><span class="ident" id="2754177">size</span><span class="op" id="2754181">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754186">a</span><span class="op" id="2754187">[</span><span class="ident" id="2754188">i</span><span class="op" id="2754189">]</span>&nbsp;<span class="op" id="2754191">=</span>&nbsp;<span class="ident" id="2754193">Value</span><span class="op" id="2754198">{</span><span class="ident" id="2754199">keyType</span><span class="op" id="2754206">,</span>&nbsp;<span class="ident" id="2754208">c</span><span class="op" id="2754209">,</span>&nbsp;<span class="ident" id="2754211">fl</span>&nbsp;<span class="op" id="2754214">|</span>&nbsp;<span class="ident" id="2754216">flagIndir</span><span class="op" id="2754225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754229">}</span>&nbsp;<span class="keyword" id="2754231">else</span>&nbsp;<span class="op" id="2754236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754241">a</span><span class="op" id="2754242">[</span><span class="ident" id="2754243">i</span><span class="op" id="2754244">]</span>&nbsp;<span class="op" id="2754246">=</span>&nbsp;<span class="ident" id="2754248">Value</span><span class="op" id="2754253">{</span><span class="ident" id="2754254">keyType</span><span class="op" id="2754261">,</span>&nbsp;<span class="op" id="2754263">*</span><span class="op" id="2754264">(</span><span class="op" id="2754265">*</span><span class="ident" id="2754266">unsafe</span><span class="op" id="2754272">.</span><span class="ident" id="2754273">Pointer</span><span class="op" id="2754280">)</span><span class="op" id="2754281">(</span><span class="ident" id="2754282">key</span><span class="op" id="2754285">)</span><span class="op" id="2754286">,</span>&nbsp;<span class="ident" id="2754288">fl</span><span class="op" id="2754290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754298">mapiternext</span><span class="op" id="2754309">(</span><span class="ident" id="2754310">it</span><span class="op" id="2754312">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754318">return</span>&nbsp;<span class="ident" id="2754325">a</span><span class="op" id="2754326">[</span><span class="op" id="2754327">:</span><span class="ident" id="2754328">i</span><span class="op" id="2754329">]</span><br>
<span class="lineno"></span><span class="op" id="2754331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754334">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2754403">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2754474">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2754546">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2754618">func</span>&nbsp;<span class="op" id="2754623">(</span><span class="ident" id="2754624">v</span>&nbsp;<span class="ident" id="2754626">Value</span><span class="op" id="2754631">)</span>&nbsp;<span class="ident" id="2754633">Method</span><span class="op" id="2754639">(</span><span class="ident" id="2754640">i</span>&nbsp;<span class="builtintype" id="2754642">int</span><span class="op" id="2754645">)</span>&nbsp;<span class="ident" id="2754647">Value</span>&nbsp;<span class="op" id="2754653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754656">if</span>&nbsp;<span class="ident" id="2754659">v</span><span class="op" id="2754660">.</span><span class="ident" id="2754661">typ</span>&nbsp;<span class="op" id="2754665">==</span>&nbsp;<span class="ident" id="2754668">nil</span>&nbsp;<span class="op" id="2754672">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754676">panic</span><span class="op" id="2754681">(</span><span class="op" id="2754682">&amp;</span><span class="ident" id="2754683">ValueError</span><span class="op" id="2754693">{</span><span class="string" id="2754694">&#34;reflect.Value.Method&#34;</span><span class="op" id="2754716">,</span>&nbsp;<span class="ident" id="2754718">Invalid</span><span class="op" id="2754725">}</span><span class="op" id="2754726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754732">if</span>&nbsp;<span class="ident" id="2754735">v</span><span class="op" id="2754736">.</span><span class="ident" id="2754737">flag</span><span class="op" id="2754741">&amp;</span><span class="ident" id="2754742">flagMethod</span>&nbsp;<span class="op" id="2754753">!=</span>&nbsp;<span class="num" id="2754756">0</span>&nbsp;<span class="op" id="2754758">||</span>&nbsp;<span class="builtintype" id="2754761">uint</span><span class="op" id="2754765">(</span><span class="ident" id="2754766">i</span><span class="op" id="2754767">)</span>&nbsp;<span class="op" id="2754769">&gt;=</span>&nbsp;<span class="builtintype" id="2754772">uint</span><span class="op" id="2754776">(</span><span class="ident" id="2754777">v</span><span class="op" id="2754778">.</span><span class="ident" id="2754779">typ</span><span class="op" id="2754782">.</span><span class="ident" id="2754783">NumMethod</span><span class="op" id="2754792">(</span><span class="op" id="2754793">)</span><span class="op" id="2754794">)</span>&nbsp;<span class="op" id="2754796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754800">panic</span><span class="op" id="2754805">(</span><span class="string" id="2754806">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2754842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754845">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754848">if</span>&nbsp;<span class="ident" id="2754851">v</span><span class="op" id="2754852">.</span><span class="ident" id="2754853">typ</span><span class="op" id="2754856">.</span><span class="ident" id="2754857">Kind</span><span class="op" id="2754861">(</span><span class="op" id="2754862">)</span>&nbsp;<span class="op" id="2754864">==</span>&nbsp;<span class="ident" id="2754867">Interface</span>&nbsp;<span class="op" id="2754877">&amp;&amp;</span>&nbsp;<span class="ident" id="2754880">v</span><span class="op" id="2754881">.</span><span class="ident" id="2754882">IsNil</span><span class="op" id="2754887">(</span><span class="op" id="2754888">)</span>&nbsp;<span class="op" id="2754890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754894">panic</span><span class="op" id="2754899">(</span><span class="string" id="2754900">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2754940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754946">fl</span>&nbsp;<span class="op" id="2754949">:=</span>&nbsp;<span class="ident" id="2754952">v</span><span class="op" id="2754953">.</span><span class="ident" id="2754954">flag</span>&nbsp;<span class="op" id="2754959">&amp;</span>&nbsp;<span class="op" id="2754961">(</span><span class="ident" id="2754962">flagRO</span>&nbsp;<span class="op" id="2754969">|</span>&nbsp;<span class="ident" id="2754971">flagIndir</span><span class="op" id="2754980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754983">fl</span>&nbsp;<span class="op" id="2754986">|=</span>&nbsp;<span class="ident" id="2754989">flag</span><span class="op" id="2754993">(</span><span class="ident" id="2754994">Func</span><span class="op" id="2754998">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755001">fl</span>&nbsp;<span class="op" id="2755004">|=</span>&nbsp;<span class="ident" id="2755007">flag</span><span class="op" id="2755011">(</span><span class="ident" id="2755012">i</span><span class="op" id="2755013">)</span><span class="op" id="2755014">&lt;&lt;</span><span class="ident" id="2755016">flagMethodShift</span>&nbsp;<span class="op" id="2755032">|</span>&nbsp;<span class="ident" id="2755034">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755046">return</span>&nbsp;<span class="ident" id="2755053">Value</span><span class="op" id="2755058">{</span><span class="ident" id="2755059">v</span><span class="op" id="2755060">.</span><span class="ident" id="2755061">typ</span><span class="op" id="2755064">,</span>&nbsp;<span class="ident" id="2755066">v</span><span class="op" id="2755067">.</span><span class="ident" id="2755068">ptr</span><span class="op" id="2755071">,</span>&nbsp;<span class="ident" id="2755073">fl</span><span class="op" id="2755075">}</span><br>
<span class="lineno"></span><span class="op" id="2755077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755080">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2755150">func</span>&nbsp;<span class="op" id="2755155">(</span><span class="ident" id="2755156">v</span>&nbsp;<span class="ident" id="2755158">Value</span><span class="op" id="2755163">)</span>&nbsp;<span class="ident" id="2755165">NumMethod</span><span class="op" id="2755174">(</span><span class="op" id="2755175">)</span>&nbsp;<span class="builtintype" id="2755177">int</span>&nbsp;<span class="op" id="2755181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755184">if</span>&nbsp;<span class="ident" id="2755187">v</span><span class="op" id="2755188">.</span><span class="ident" id="2755189">typ</span>&nbsp;<span class="op" id="2755193">==</span>&nbsp;<span class="ident" id="2755196">nil</span>&nbsp;<span class="op" id="2755200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755204">panic</span><span class="op" id="2755209">(</span><span class="op" id="2755210">&amp;</span><span class="ident" id="2755211">ValueError</span><span class="op" id="2755221">{</span><span class="string" id="2755222">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2755247">,</span>&nbsp;<span class="ident" id="2755249">Invalid</span><span class="op" id="2755256">}</span><span class="op" id="2755257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755263">if</span>&nbsp;<span class="ident" id="2755266">v</span><span class="op" id="2755267">.</span><span class="ident" id="2755268">flag</span><span class="op" id="2755272">&amp;</span><span class="ident" id="2755273">flagMethod</span>&nbsp;<span class="op" id="2755284">!=</span>&nbsp;<span class="num" id="2755287">0</span>&nbsp;<span class="op" id="2755289">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755293">return</span>&nbsp;<span class="num" id="2755300">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755306">return</span>&nbsp;<span class="ident" id="2755313">v</span><span class="op" id="2755314">.</span><span class="ident" id="2755315">typ</span><span class="op" id="2755318">.</span><span class="ident" id="2755319">NumMethod</span><span class="op" id="2755328">(</span><span class="op" id="2755329">)</span><br>
<span class="lineno"></span><span class="op" id="2755331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2755334">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2755403">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2755432">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2755503">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2755575">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2755628">func</span>&nbsp;<span class="op" id="2755633">(</span><span class="ident" id="2755634">v</span>&nbsp;<span class="ident" id="2755636">Value</span><span class="op" id="2755641">)</span>&nbsp;<span class="ident" id="2755643">MethodByName</span><span class="op" id="2755655">(</span><span class="ident" id="2755656">name</span>&nbsp;<span class="builtintype" id="2755661">string</span><span class="op" id="2755667">)</span>&nbsp;<span class="ident" id="2755669">Value</span>&nbsp;<span class="op" id="2755675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755678">if</span>&nbsp;<span class="ident" id="2755681">v</span><span class="op" id="2755682">.</span><span class="ident" id="2755683">typ</span>&nbsp;<span class="op" id="2755687">==</span>&nbsp;<span class="ident" id="2755690">nil</span>&nbsp;<span class="op" id="2755694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755698">panic</span><span class="op" id="2755703">(</span><span class="op" id="2755704">&amp;</span><span class="ident" id="2755705">ValueError</span><span class="op" id="2755715">{</span><span class="string" id="2755716">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2755744">,</span>&nbsp;<span class="ident" id="2755746">Invalid</span><span class="op" id="2755753">}</span><span class="op" id="2755754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755760">if</span>&nbsp;<span class="ident" id="2755763">v</span><span class="op" id="2755764">.</span><span class="ident" id="2755765">flag</span><span class="op" id="2755769">&amp;</span><span class="ident" id="2755770">flagMethod</span>&nbsp;<span class="op" id="2755781">!=</span>&nbsp;<span class="num" id="2755784">0</span>&nbsp;<span class="op" id="2755786">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755790">return</span>&nbsp;<span class="ident" id="2755797">Value</span><span class="op" id="2755802">{</span><span class="op" id="2755803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755809">m</span><span class="op" id="2755810">,</span>&nbsp;<span class="ident" id="2755812">ok</span>&nbsp;<span class="op" id="2755815">:=</span>&nbsp;<span class="ident" id="2755818">v</span><span class="op" id="2755819">.</span><span class="ident" id="2755820">typ</span><span class="op" id="2755823">.</span><span class="ident" id="2755824">MethodByName</span><span class="op" id="2755836">(</span><span class="ident" id="2755837">name</span><span class="op" id="2755841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755844">if</span>&nbsp;<span class="op" id="2755847">!</span><span class="ident" id="2755848">ok</span>&nbsp;<span class="op" id="2755851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755855">return</span>&nbsp;<span class="ident" id="2755862">Value</span><span class="op" id="2755867">{</span><span class="op" id="2755868">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755874">return</span>&nbsp;<span class="ident" id="2755881">v</span><span class="op" id="2755882">.</span><span class="ident" id="2755883">Method</span><span class="op" id="2755889">(</span><span class="ident" id="2755890">m</span><span class="op" id="2755891">.</span><span class="ident" id="2755892">Index</span><span class="op" id="2755897">)</span><br>
<span class="lineno"></span><span class="op" id="2755899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755902">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2755960">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2756000">func</span>&nbsp;<span class="op" id="2756005">(</span><span class="ident" id="2756006">v</span>&nbsp;<span class="ident" id="2756008">Value</span><span class="op" id="2756013">)</span>&nbsp;<span class="ident" id="2756015">NumField</span><span class="op" id="2756023">(</span><span class="op" id="2756024">)</span>&nbsp;<span class="builtintype" id="2756026">int</span>&nbsp;<span class="op" id="2756030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756033">v</span><span class="op" id="2756034">.</span><span class="ident" id="2756035">mustBe</span><span class="op" id="2756041">(</span><span class="ident" id="2756042">Struct</span><span class="op" id="2756048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756051">tt</span>&nbsp;<span class="op" id="2756054">:=</span>&nbsp;<span class="op" id="2756057">(</span><span class="op" id="2756058">*</span><span class="ident" id="2756059">structType</span><span class="op" id="2756069">)</span><span class="op" id="2756070">(</span><span class="ident" id="2756071">unsafe</span><span class="op" id="2756077">.</span><span class="ident" id="2756078">Pointer</span><span class="op" id="2756085">(</span><span class="ident" id="2756086">v</span><span class="op" id="2756087">.</span><span class="ident" id="2756088">typ</span><span class="op" id="2756091">)</span><span class="op" id="2756092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756095">return</span>&nbsp;<span class="builtinfunc" id="2756102">len</span><span class="op" id="2756105">(</span><span class="ident" id="2756106">tt</span><span class="op" id="2756108">.</span><span class="ident" id="2756109">fields</span><span class="op" id="2756115">)</span><br>
<span class="lineno">1120</span><span class="op" id="2756117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756120">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2756207">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2756264">func</span>&nbsp;<span class="op" id="2756269">(</span><span class="ident" id="2756270">v</span>&nbsp;<span class="ident" id="2756272">Value</span><span class="op" id="2756277">)</span>&nbsp;<span class="ident" id="2756279">OverflowComplex</span><span class="op" id="2756294">(</span><span class="ident" id="2756295">x</span>&nbsp;<span class="builtintype" id="2756297">complex128</span><span class="op" id="2756307">)</span>&nbsp;<span class="builtintype" id="2756309">bool</span>&nbsp;<span class="op" id="2756314">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756317">k</span>&nbsp;<span class="op" id="2756319">:=</span>&nbsp;<span class="ident" id="2756322">v</span><span class="op" id="2756323">.</span><span class="ident" id="2756324">kind</span><span class="op" id="2756328">(</span><span class="op" id="2756329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756332">switch</span>&nbsp;<span class="ident" id="2756339">k</span>&nbsp;<span class="op" id="2756341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756344">case</span>&nbsp;<span class="ident" id="2756349">Complex64</span><span class="op" id="2756358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756362">return</span>&nbsp;<span class="ident" id="2756369">overflowFloat32</span><span class="op" id="2756384">(</span><span class="builtinfunc" id="2756385">real</span><span class="op" id="2756389">(</span><span class="ident" id="2756390">x</span><span class="op" id="2756391">)</span><span class="op" id="2756392">)</span>&nbsp;<span class="op" id="2756394">||</span>&nbsp;<span class="ident" id="2756397">overflowFloat32</span><span class="op" id="2756412">(</span><span class="builtinfunc" id="2756413">imag</span><span class="op" id="2756417">(</span><span class="ident" id="2756418">x</span><span class="op" id="2756419">)</span><span class="op" id="2756420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756423">case</span>&nbsp;<span class="ident" id="2756428">Complex128</span><span class="op" id="2756438">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756442">return</span>&nbsp;<span class="builtintype" id="2756449">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2756459">panic</span><span class="op" id="2756464">(</span><span class="op" id="2756465">&amp;</span><span class="ident" id="2756466">ValueError</span><span class="op" id="2756476">{</span><span class="string" id="2756477">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2756508">,</span>&nbsp;<span class="ident" id="2756510">v</span><span class="op" id="2756511">.</span><span class="ident" id="2756512">kind</span><span class="op" id="2756516">(</span><span class="op" id="2756517">)</span><span class="op" id="2756518">}</span><span class="op" id="2756519">)</span><br>
<span class="lineno"></span><span class="op" id="2756521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2756524">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2756606">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2756658">func</span>&nbsp;<span class="op" id="2756663">(</span><span class="ident" id="2756664">v</span>&nbsp;<span class="ident" id="2756666">Value</span><span class="op" id="2756671">)</span>&nbsp;<span class="ident" id="2756673">OverflowFloat</span><span class="op" id="2756686">(</span><span class="ident" id="2756687">x</span>&nbsp;<span class="builtintype" id="2756689">float64</span><span class="op" id="2756696">)</span>&nbsp;<span class="builtintype" id="2756698">bool</span>&nbsp;<span class="op" id="2756703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756706">k</span>&nbsp;<span class="op" id="2756708">:=</span>&nbsp;<span class="ident" id="2756711">v</span><span class="op" id="2756712">.</span><span class="ident" id="2756713">kind</span><span class="op" id="2756717">(</span><span class="op" id="2756718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756721">switch</span>&nbsp;<span class="ident" id="2756728">k</span>&nbsp;<span class="op" id="2756730">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756733">case</span>&nbsp;<span class="ident" id="2756738">Float32</span><span class="op" id="2756745">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756749">return</span>&nbsp;<span class="ident" id="2756756">overflowFloat32</span><span class="op" id="2756771">(</span><span class="ident" id="2756772">x</span><span class="op" id="2756773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756776">case</span>&nbsp;<span class="ident" id="2756781">Float64</span><span class="op" id="2756788">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756792">return</span>&nbsp;<span class="builtintype" id="2756799">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756806">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2756809">panic</span><span class="op" id="2756814">(</span><span class="op" id="2756815">&amp;</span><span class="ident" id="2756816">ValueError</span><span class="op" id="2756826">{</span><span class="string" id="2756827">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2756856">,</span>&nbsp;<span class="ident" id="2756858">v</span><span class="op" id="2756859">.</span><span class="ident" id="2756860">kind</span><span class="op" id="2756864">(</span><span class="op" id="2756865">)</span><span class="op" id="2756866">}</span><span class="op" id="2756867">)</span><br>
<span class="lineno"></span><span class="op" id="2756869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2756872">func</span>&nbsp;<span class="ident" id="2756877">overflowFloat32</span><span class="op" id="2756892">(</span><span class="ident" id="2756893">x</span>&nbsp;<span class="builtintype" id="2756895">float64</span><span class="op" id="2756902">)</span>&nbsp;<span class="builtintype" id="2756904">bool</span>&nbsp;<span class="op" id="2756909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756912">if</span>&nbsp;<span class="ident" id="2756915">x</span>&nbsp;<span class="op" id="2756917">&lt;</span>&nbsp;<span class="num" id="2756919">0</span>&nbsp;<span class="op" id="2756921">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756925">x</span>&nbsp;<span class="op" id="2756927">=</span>&nbsp;<span class="op" id="2756929">-</span><span class="ident" id="2756930">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756936">return</span>&nbsp;<span class="ident" id="2756943">math</span><span class="op" id="2756947">.</span><span class="ident" id="2756948">MaxFloat32</span>&nbsp;<span class="op" id="2756959">&lt;</span>&nbsp;<span class="ident" id="2756961">x</span>&nbsp;<span class="op" id="2756963">&amp;&amp;</span>&nbsp;<span class="ident" id="2756966">x</span>&nbsp;<span class="op" id="2756968">&lt;=</span>&nbsp;<span class="ident" id="2756971">math</span><span class="op" id="2756975">.</span><span class="ident" id="2756976">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2756987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2756990">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2757068">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2757135">func</span>&nbsp;<span class="op" id="2757140">(</span><span class="ident" id="2757141">v</span>&nbsp;<span class="ident" id="2757143">Value</span><span class="op" id="2757148">)</span>&nbsp;<span class="ident" id="2757150">OverflowInt</span><span class="op" id="2757161">(</span><span class="ident" id="2757162">x</span>&nbsp;<span class="ident" id="2757164">int64</span><span class="op" id="2757169">)</span>&nbsp;<span class="builtintype" id="2757171">bool</span>&nbsp;<span class="op" id="2757176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757179">k</span>&nbsp;<span class="op" id="2757181">:=</span>&nbsp;<span class="ident" id="2757184">v</span><span class="op" id="2757185">.</span><span class="ident" id="2757186">kind</span><span class="op" id="2757190">(</span><span class="op" id="2757191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757194">switch</span>&nbsp;<span class="ident" id="2757201">k</span>&nbsp;<span class="op" id="2757203">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757206">case</span>&nbsp;<span class="ident" id="2757211">Int</span><span class="op" id="2757214">,</span>&nbsp;<span class="ident" id="2757216">Int8</span><span class="op" id="2757220">,</span>&nbsp;<span class="ident" id="2757222">Int16</span><span class="op" id="2757227">,</span>&nbsp;<span class="ident" id="2757229">Int32</span><span class="op" id="2757234">,</span>&nbsp;<span class="ident" id="2757236">Int64</span><span class="op" id="2757241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757245">bitSize</span>&nbsp;<span class="op" id="2757253">:=</span>&nbsp;<span class="ident" id="2757256">v</span><span class="op" id="2757257">.</span><span class="ident" id="2757258">typ</span><span class="op" id="2757261">.</span><span class="ident" id="2757262">size</span>&nbsp;<span class="op" id="2757267">*</span>&nbsp;<span class="num" id="2757269">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757273">trunc</span>&nbsp;<span class="op" id="2757279">:=</span>&nbsp;<span class="op" id="2757282">(</span><span class="ident" id="2757283">x</span>&nbsp;<span class="op" id="2757285">&lt;&lt;</span>&nbsp;<span class="op" id="2757288">(</span><span class="num" id="2757289">64</span>&nbsp;<span class="op" id="2757292">-</span>&nbsp;<span class="ident" id="2757294">bitSize</span><span class="op" id="2757301">)</span><span class="op" id="2757302">)</span>&nbsp;<span class="op" id="2757304">&gt;&gt;</span>&nbsp;<span class="op" id="2757307">(</span><span class="num" id="2757308">64</span>&nbsp;<span class="op" id="2757311">-</span>&nbsp;<span class="ident" id="2757313">bitSize</span><span class="op" id="2757320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757324">return</span>&nbsp;<span class="ident" id="2757331">x</span>&nbsp;<span class="op" id="2757333">!=</span>&nbsp;<span class="ident" id="2757336">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757343">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757346">panic</span><span class="op" id="2757351">(</span><span class="op" id="2757352">&amp;</span><span class="ident" id="2757353">ValueError</span><span class="op" id="2757363">{</span><span class="string" id="2757364">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2757391">,</span>&nbsp;<span class="ident" id="2757393">v</span><span class="op" id="2757394">.</span><span class="ident" id="2757395">kind</span><span class="op" id="2757399">(</span><span class="op" id="2757400">)</span><span class="op" id="2757401">}</span><span class="op" id="2757402">)</span><br>
<span class="lineno"></span><span class="op" id="2757404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2757407">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2757487">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2757568">func</span>&nbsp;<span class="op" id="2757573">(</span><span class="ident" id="2757574">v</span>&nbsp;<span class="ident" id="2757576">Value</span><span class="op" id="2757581">)</span>&nbsp;<span class="ident" id="2757583">OverflowUint</span><span class="op" id="2757595">(</span><span class="ident" id="2757596">x</span>&nbsp;<span class="ident" id="2757598">uint64</span><span class="op" id="2757604">)</span>&nbsp;<span class="builtintype" id="2757606">bool</span>&nbsp;<span class="op" id="2757611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757614">k</span>&nbsp;<span class="op" id="2757616">:=</span>&nbsp;<span class="ident" id="2757619">v</span><span class="op" id="2757620">.</span><span class="ident" id="2757621">kind</span><span class="op" id="2757625">(</span><span class="op" id="2757626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757629">switch</span>&nbsp;<span class="ident" id="2757636">k</span>&nbsp;<span class="op" id="2757638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757641">case</span>&nbsp;<span class="ident" id="2757646">Uint</span><span class="op" id="2757650">,</span>&nbsp;<span class="ident" id="2757652">Uintptr</span><span class="op" id="2757659">,</span>&nbsp;<span class="ident" id="2757661">Uint8</span><span class="op" id="2757666">,</span>&nbsp;<span class="ident" id="2757668">Uint16</span><span class="op" id="2757674">,</span>&nbsp;<span class="ident" id="2757676">Uint32</span><span class="op" id="2757682">,</span>&nbsp;<span class="ident" id="2757684">Uint64</span><span class="op" id="2757690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757694">bitSize</span>&nbsp;<span class="op" id="2757702">:=</span>&nbsp;<span class="ident" id="2757705">v</span><span class="op" id="2757706">.</span><span class="ident" id="2757707">typ</span><span class="op" id="2757710">.</span><span class="ident" id="2757711">size</span>&nbsp;<span class="op" id="2757716">*</span>&nbsp;<span class="num" id="2757718">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757722">trunc</span>&nbsp;<span class="op" id="2757728">:=</span>&nbsp;<span class="op" id="2757731">(</span><span class="ident" id="2757732">x</span>&nbsp;<span class="op" id="2757734">&lt;&lt;</span>&nbsp;<span class="op" id="2757737">(</span><span class="num" id="2757738">64</span>&nbsp;<span class="op" id="2757741">-</span>&nbsp;<span class="ident" id="2757743">bitSize</span><span class="op" id="2757750">)</span><span class="op" id="2757751">)</span>&nbsp;<span class="op" id="2757753">&gt;&gt;</span>&nbsp;<span class="op" id="2757756">(</span><span class="num" id="2757757">64</span>&nbsp;<span class="op" id="2757760">-</span>&nbsp;<span class="ident" id="2757762">bitSize</span><span class="op" id="2757769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757773">return</span>&nbsp;<span class="ident" id="2757780">x</span>&nbsp;<span class="op" id="2757782">!=</span>&nbsp;<span class="ident" id="2757785">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757795">panic</span><span class="op" id="2757800">(</span><span class="op" id="2757801">&amp;</span><span class="ident" id="2757802">ValueError</span><span class="op" id="2757812">{</span><span class="string" id="2757813">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2757841">,</span>&nbsp;<span class="ident" id="2757843">v</span><span class="op" id="2757844">.</span><span class="ident" id="2757845">kind</span><span class="op" id="2757849">(</span><span class="op" id="2757850">)</span><span class="op" id="2757851">}</span><span class="op" id="2757852">)</span><br>
<span class="lineno"></span><span class="op" id="2757854">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2757857">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2757900">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2757956">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2758008">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2758060">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2758139">//</span><br>
<span class="lineno"></span><span class="comment" id="2758142">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2758204">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2758262">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2758322">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2758378">//</span><br>
<span class="lineno"></span><span class="comment" id="2758381">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2758443">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2758508">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2758582">func</span>&nbsp;<span class="op" id="2758587">(</span><span class="ident" id="2758588">v</span>&nbsp;<span class="ident" id="2758590">Value</span><span class="op" id="2758595">)</span>&nbsp;<span class="ident" id="2758597">Pointer</span><span class="op" id="2758604">(</span><span class="op" id="2758605">)</span>&nbsp;<span class="builtintype" id="2758607">uintptr</span>&nbsp;<span class="op" id="2758615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758618">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758638">k</span>&nbsp;<span class="op" id="2758640">:=</span>&nbsp;<span class="ident" id="2758643">v</span><span class="op" id="2758644">.</span><span class="ident" id="2758645">kind</span><span class="op" id="2758649">(</span><span class="op" id="2758650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758653">switch</span>&nbsp;<span class="ident" id="2758660">k</span>&nbsp;<span class="op" id="2758662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758665">case</span>&nbsp;<span class="ident" id="2758670">Chan</span><span class="op" id="2758674">,</span>&nbsp;<span class="ident" id="2758676">Map</span><span class="op" id="2758679">,</span>&nbsp;<span class="ident" id="2758681">Ptr</span><span class="op" id="2758684">,</span>&nbsp;<span class="ident" id="2758686">UnsafePointer</span><span class="op" id="2758699">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758703">return</span>&nbsp;<span class="builtintype" id="2758710">uintptr</span><span class="op" id="2758717">(</span><span class="ident" id="2758718">v</span><span class="op" id="2758719">.</span><span class="ident" id="2758720">pointer</span><span class="op" id="2758727">(</span><span class="op" id="2758728">)</span><span class="op" id="2758729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758732">case</span>&nbsp;<span class="ident" id="2758737">Func</span><span class="op" id="2758741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758745">if</span>&nbsp;<span class="ident" id="2758748">v</span><span class="op" id="2758749">.</span><span class="ident" id="2758750">flag</span><span class="op" id="2758754">&amp;</span><span class="ident" id="2758755">flagMethod</span>&nbsp;<span class="op" id="2758766">!=</span>&nbsp;<span class="num" id="2758769">0</span>&nbsp;<span class="op" id="2758771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758776">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758834">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758894">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2758960">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759025">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759088">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759133">f</span>&nbsp;<span class="op" id="2759135">:=</span>&nbsp;<span class="ident" id="2759138">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759157">return</span>&nbsp;<span class="op" id="2759164">*</span><span class="op" id="2759165">*</span><span class="op" id="2759166">(</span><span class="op" id="2759167">*</span><span class="op" id="2759168">*</span><span class="builtintype" id="2759169">uintptr</span><span class="op" id="2759176">)</span><span class="op" id="2759177">(</span><span class="ident" id="2759178">unsafe</span><span class="op" id="2759184">.</span><span class="ident" id="2759185">Pointer</span><span class="op" id="2759192">(</span><span class="op" id="2759193">&amp;</span><span class="ident" id="2759194">f</span><span class="op" id="2759195">)</span><span class="op" id="2759196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759204">p</span>&nbsp;<span class="op" id="2759206">:=</span>&nbsp;<span class="ident" id="2759209">v</span><span class="op" id="2759210">.</span><span class="ident" id="2759211">pointer</span><span class="op" id="2759218">(</span><span class="op" id="2759219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759223">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2759269">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759315">if</span>&nbsp;<span class="ident" id="2759318">p</span>&nbsp;<span class="op" id="2759320">!=</span>&nbsp;<span class="ident" id="2759323">nil</span>&nbsp;<span class="op" id="2759327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759332">p</span>&nbsp;<span class="op" id="2759334">=</span>&nbsp;<span class="op" id="2759336">*</span><span class="op" id="2759337">(</span><span class="op" id="2759338">*</span><span class="ident" id="2759339">unsafe</span><span class="op" id="2759345">.</span><span class="ident" id="2759346">Pointer</span><span class="op" id="2759353">)</span><span class="op" id="2759354">(</span><span class="ident" id="2759355">p</span><span class="op" id="2759356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759364">return</span>&nbsp;<span class="builtintype" id="2759371">uintptr</span><span class="op" id="2759378">(</span><span class="ident" id="2759379">p</span><span class="op" id="2759380">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759384">case</span>&nbsp;<span class="ident" id="2759389">Slice</span><span class="op" id="2759394">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759398">return</span>&nbsp;<span class="op" id="2759405">(</span><span class="op" id="2759406">*</span><span class="ident" id="2759407">SliceHeader</span><span class="op" id="2759418">)</span><span class="op" id="2759419">(</span><span class="ident" id="2759420">v</span><span class="op" id="2759421">.</span><span class="ident" id="2759422">ptr</span><span class="op" id="2759425">)</span><span class="op" id="2759426">.</span><span class="ident" id="2759427">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759436">panic</span><span class="op" id="2759441">(</span><span class="op" id="2759442">&amp;</span><span class="ident" id="2759443">ValueError</span><span class="op" id="2759453">{</span><span class="string" id="2759454">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2759477">,</span>&nbsp;<span class="ident" id="2759479">v</span><span class="op" id="2759480">.</span><span class="ident" id="2759481">kind</span><span class="op" id="2759485">(</span><span class="op" id="2759486">)</span><span class="op" id="2759487">}</span><span class="op" id="2759488">)</span><br>
<span class="lineno"></span><span class="op" id="2759490">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2759493">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2759550">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2759588">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2759634">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2759703">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2759790">func</span>&nbsp;<span class="op" id="2759795">(</span><span class="ident" id="2759796">v</span>&nbsp;<span class="ident" id="2759798">Value</span><span class="op" id="2759803">)</span>&nbsp;<span class="ident" id="2759805">Recv</span><span class="op" id="2759809">(</span><span class="op" id="2759810">)</span>&nbsp;<span class="op" id="2759812">(</span><span class="ident" id="2759813">x</span>&nbsp;<span class="ident" id="2759815">Value</span><span class="op" id="2759820">,</span>&nbsp;<span class="ident" id="2759822">ok</span>&nbsp;<span class="builtintype" id="2759825">bool</span><span class="op" id="2759829">)</span>&nbsp;<span class="op" id="2759831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759834">v</span><span class="op" id="2759835">.</span><span class="ident" id="2759836">mustBe</span><span class="op" id="2759842">(</span><span class="ident" id="2759843">Chan</span><span class="op" id="2759847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759850">v</span><span class="op" id="2759851">.</span><span class="ident" id="2759852">mustBeExported</span><span class="op" id="2759866">(</span><span class="op" id="2759867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759870">return</span>&nbsp;<span class="ident" id="2759877">v</span><span class="op" id="2759878">.</span><span class="ident" id="2759879">recv</span><span class="op" id="2759883">(</span><span class="builtintype" id="2759884">false</span><span class="op" id="2759889">)</span><br>
<span class="lineno">1235</span><span class="op" id="2759891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759894">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2759940">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2759971">func</span>&nbsp;<span class="op" id="2759976">(</span><span class="ident" id="2759977">v</span>&nbsp;<span class="ident" id="2759979">Value</span><span class="op" id="2759984">)</span>&nbsp;<span class="ident" id="2759986">recv</span><span class="op" id="2759990">(</span><span class="ident" id="2759991">nb</span>&nbsp;<span class="builtintype" id="2759994">bool</span><span class="op" id="2759998">)</span>&nbsp;<span class="op" id="2760000">(</span><span class="ident" id="2760001">val</span>&nbsp;<span class="ident" id="2760005">Value</span><span class="op" id="2760010">,</span>&nbsp;<span class="ident" id="2760012">ok</span>&nbsp;<span class="builtintype" id="2760015">bool</span><span class="op" id="2760019">)</span>&nbsp;<span class="op" id="2760021">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760024">tt</span>&nbsp;<span class="op" id="2760027">:=</span>&nbsp;<span class="op" id="2760030">(</span><span class="op" id="2760031">*</span><span class="ident" id="2760032">chanType</span><span class="op" id="2760040">)</span><span class="op" id="2760041">(</span><span class="ident" id="2760042">unsafe</span><span class="op" id="2760048">.</span><span class="ident" id="2760049">Pointer</span><span class="op" id="2760056">(</span><span class="ident" id="2760057">v</span><span class="op" id="2760058">.</span><span class="ident" id="2760059">typ</span><span class="op" id="2760062">)</span><span class="op" id="2760063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760066">if</span>&nbsp;<span class="ident" id="2760069">ChanDir</span><span class="op" id="2760076">(</span><span class="ident" id="2760077">tt</span><span class="op" id="2760079">.</span><span class="ident" id="2760080">dir</span><span class="op" id="2760083">)</span><span class="op" id="2760084">&amp;</span><span class="ident" id="2760085">RecvDir</span>&nbsp;<span class="op" id="2760093">==</span>&nbsp;<span class="num" id="2760096">0</span>&nbsp;<span class="op" id="2760098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760102">panic</span><span class="op" id="2760107">(</span><span class="string" id="2760108">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2760144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760150">t</span>&nbsp;<span class="op" id="2760152">:=</span>&nbsp;<span class="ident" id="2760155">tt</span><span class="op" id="2760157">.</span><span class="ident" id="2760158">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760164">val</span>&nbsp;<span class="op" id="2760168">=</span>&nbsp;<span class="ident" id="2760170">Value</span><span class="op" id="2760175">{</span><span class="ident" id="2760176">t</span><span class="op" id="2760177">,</span>&nbsp;<span class="ident" id="2760179">nil</span><span class="op" id="2760182">,</span>&nbsp;<span class="ident" id="2760184">flag</span><span class="op" id="2760188">(</span><span class="ident" id="2760189">t</span><span class="op" id="2760190">.</span><span class="ident" id="2760191">Kind</span><span class="op" id="2760195">(</span><span class="op" id="2760196">)</span><span class="op" id="2760197">)</span><span class="op" id="2760198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760201">var</span>&nbsp;<span class="ident" id="2760205">p</span>&nbsp;<span class="ident" id="2760207">unsafe</span><span class="op" id="2760213">.</span><span class="ident" id="2760214">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760223">if</span>&nbsp;<span class="ident" id="2760226">ifaceIndir</span><span class="op" id="2760236">(</span><span class="ident" id="2760237">t</span><span class="op" id="2760238">)</span>&nbsp;<span class="op" id="2760240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760244">p</span>&nbsp;<span class="op" id="2760246">=</span>&nbsp;<span class="ident" id="2760248">unsafe_New</span><span class="op" id="2760258">(</span><span class="ident" id="2760259">t</span><span class="op" id="2760260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760264">val</span><span class="op" id="2760267">.</span><span class="ident" id="2760268">ptr</span>&nbsp;<span class="op" id="2760272">=</span>&nbsp;<span class="ident" id="2760274">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760278">val</span><span class="op" id="2760281">.</span><span class="ident" id="2760282">flag</span>&nbsp;<span class="op" id="2760287">|=</span>&nbsp;<span class="ident" id="2760290">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760301">}</span>&nbsp;<span class="keyword" id="2760303">else</span>&nbsp;<span class="op" id="2760308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760312">p</span>&nbsp;<span class="op" id="2760314">=</span>&nbsp;<span class="ident" id="2760316">unsafe</span><span class="op" id="2760322">.</span><span class="ident" id="2760323">Pointer</span><span class="op" id="2760330">(</span><span class="op" id="2760331">&amp;</span><span class="ident" id="2760332">val</span><span class="op" id="2760335">.</span><span class="ident" id="2760336">ptr</span><span class="op" id="2760339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760345">selected</span><span class="op" id="2760353">,</span>&nbsp;<span class="ident" id="2760355">ok</span>&nbsp;<span class="op" id="2760358">:=</span>&nbsp;<span class="ident" id="2760361">chanrecv</span><span class="op" id="2760369">(</span><span class="ident" id="2760370">v</span><span class="op" id="2760371">.</span><span class="ident" id="2760372">typ</span><span class="op" id="2760375">,</span>&nbsp;<span class="ident" id="2760377">v</span><span class="op" id="2760378">.</span><span class="ident" id="2760379">pointer</span><span class="op" id="2760386">(</span><span class="op" id="2760387">)</span><span class="op" id="2760388">,</span>&nbsp;<span class="ident" id="2760390">nb</span><span class="op" id="2760392">,</span>&nbsp;<span class="ident" id="2760394">p</span><span class="op" id="2760395">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760398">if</span>&nbsp;<span class="op" id="2760401">!</span><span class="ident" id="2760402">selected</span>&nbsp;<span class="op" id="2760411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760415">val</span>&nbsp;<span class="op" id="2760419">=</span>&nbsp;<span class="ident" id="2760421">Value</span><span class="op" id="2760426">{</span><span class="op" id="2760427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760433">return</span><br>
<span class="lineno"></span><span class="op" id="2760440">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2760443">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2760477">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2760571">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2760644">func</span>&nbsp;<span class="op" id="2760649">(</span><span class="ident" id="2760650">v</span>&nbsp;<span class="ident" id="2760652">Value</span><span class="op" id="2760657">)</span>&nbsp;<span class="ident" id="2760659">Send</span><span class="op" id="2760663">(</span><span class="ident" id="2760664">x</span>&nbsp;<span class="ident" id="2760666">Value</span><span class="op" id="2760671">)</span>&nbsp;<span class="op" id="2760673">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760676">v</span><span class="op" id="2760677">.</span><span class="ident" id="2760678">mustBe</span><span class="op" id="2760684">(</span><span class="ident" id="2760685">Chan</span><span class="op" id="2760689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760692">v</span><span class="op" id="2760693">.</span><span class="ident" id="2760694">mustBeExported</span><span class="op" id="2760708">(</span><span class="op" id="2760709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760712">v</span><span class="op" id="2760713">.</span><span class="ident" id="2760714">send</span><span class="op" id="2760718">(</span><span class="ident" id="2760719">x</span><span class="op" id="2760720">,</span>&nbsp;<span class="builtintype" id="2760722">false</span><span class="op" id="2760727">)</span><br>
<span class="lineno"></span><span class="op" id="2760729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2760732">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2760773">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2760804">func</span>&nbsp;<span class="op" id="2760809">(</span><span class="ident" id="2760810">v</span>&nbsp;<span class="ident" id="2760812">Value</span><span class="op" id="2760817">)</span>&nbsp;<span class="ident" id="2760819">send</span><span class="op" id="2760823">(</span><span class="ident" id="2760824">x</span>&nbsp;<span class="ident" id="2760826">Value</span><span class="op" id="2760831">,</span>&nbsp;<span class="ident" id="2760833">nb</span>&nbsp;<span class="builtintype" id="2760836">bool</span><span class="op" id="2760840">)</span>&nbsp;<span class="op" id="2760842">(</span><span class="ident" id="2760843">selected</span>&nbsp;<span class="builtintype" id="2760852">bool</span><span class="op" id="2760856">)</span>&nbsp;<span class="op" id="2760858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760861">tt</span>&nbsp;<span class="op" id="2760864">:=</span>&nbsp;<span class="op" id="2760867">(</span><span class="op" id="2760868">*</span><span class="ident" id="2760869">chanType</span><span class="op" id="2760877">)</span><span class="op" id="2760878">(</span><span class="ident" id="2760879">unsafe</span><span class="op" id="2760885">.</span><span class="ident" id="2760886">Pointer</span><span class="op" id="2760893">(</span><span class="ident" id="2760894">v</span><span class="op" id="2760895">.</span><span class="ident" id="2760896">typ</span><span class="op" id="2760899">)</span><span class="op" id="2760900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760903">if</span>&nbsp;<span class="ident" id="2760906">ChanDir</span><span class="op" id="2760913">(</span><span class="ident" id="2760914">tt</span><span class="op" id="2760916">.</span><span class="ident" id="2760917">dir</span><span class="op" id="2760920">)</span><span class="op" id="2760921">&amp;</span><span class="ident" id="2760922">SendDir</span>&nbsp;<span class="op" id="2760930">==</span>&nbsp;<span class="num" id="2760933">0</span>&nbsp;<span class="op" id="2760935">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760939">panic</span><span class="op" id="2760944">(</span><span class="string" id="2760945">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2760981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760987">x</span><span class="op" id="2760988">.</span><span class="ident" id="2760989">mustBeExported</span><span class="op" id="2761003">(</span><span class="op" id="2761004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761007">x</span>&nbsp;<span class="op" id="2761009">=</span>&nbsp;<span class="ident" id="2761011">x</span><span class="op" id="2761012">.</span><span class="ident" id="2761013">assignTo</span><span class="op" id="2761021">(</span><span class="string" id="2761022">&#34;reflect.Value.Send&#34;</span><span class="op" id="2761042">,</span>&nbsp;<span class="ident" id="2761044">tt</span><span class="op" id="2761046">.</span><span class="ident" id="2761047">elem</span><span class="op" id="2761051">,</span>&nbsp;<span class="ident" id="2761053">nil</span><span class="op" id="2761056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761059">var</span>&nbsp;<span class="ident" id="2761063">p</span>&nbsp;<span class="ident" id="2761065">unsafe</span><span class="op" id="2761071">.</span><span class="ident" id="2761072">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761081">if</span>&nbsp;<span class="ident" id="2761084">x</span><span class="op" id="2761085">.</span><span class="ident" id="2761086">flag</span><span class="op" id="2761090">&amp;</span><span class="ident" id="2761091">flagIndir</span>&nbsp;<span class="op" id="2761101">!=</span>&nbsp;<span class="num" id="2761104">0</span>&nbsp;<span class="op" id="2761106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761110">p</span>&nbsp;<span class="op" id="2761112">=</span>&nbsp;<span class="ident" id="2761114">x</span><span class="op" id="2761115">.</span><span class="ident" id="2761116">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761121">}</span>&nbsp;<span class="keyword" id="2761123">else</span>&nbsp;<span class="op" id="2761128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761132">p</span>&nbsp;<span class="op" id="2761134">=</span>&nbsp;<span class="ident" id="2761136">unsafe</span><span class="op" id="2761142">.</span><span class="ident" id="2761143">Pointer</span><span class="op" id="2761150">(</span><span class="op" id="2761151">&amp;</span><span class="ident" id="2761152">x</span><span class="op" id="2761153">.</span><span class="ident" id="2761154">ptr</span><span class="op" id="2761157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761160">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761163">return</span>&nbsp;<span class="ident" id="2761170">chansend</span><span class="op" id="2761178">(</span><span class="ident" id="2761179">v</span><span class="op" id="2761180">.</span><span class="ident" id="2761181">typ</span><span class="op" id="2761184">,</span>&nbsp;<span class="ident" id="2761186">v</span><span class="op" id="2761187">.</span><span class="ident" id="2761188">pointer</span><span class="op" id="2761195">(</span><span class="op" id="2761196">)</span><span class="op" id="2761197">,</span>&nbsp;<span class="ident" id="2761199">p</span><span class="op" id="2761200">,</span>&nbsp;<span class="ident" id="2761202">nb</span><span class="op" id="2761204">)</span><br>
<span class="lineno"></span><span class="op" id="2761206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761209">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2761242">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2761280">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2761335">func</span>&nbsp;<span class="op" id="2761340">(</span><span class="ident" id="2761341">v</span>&nbsp;<span class="ident" id="2761343">Value</span><span class="op" id="2761348">)</span>&nbsp;<span class="ident" id="2761350">Set</span><span class="op" id="2761353">(</span><span class="ident" id="2761354">x</span>&nbsp;<span class="ident" id="2761356">Value</span><span class="op" id="2761361">)</span>&nbsp;<span class="op" id="2761363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761366">v</span><span class="op" id="2761367">.</span><span class="ident" id="2761368">mustBeAssignable</span><span class="op" id="2761384">(</span><span class="op" id="2761385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761388">x</span><span class="op" id="2761389">.</span><span class="ident" id="2761390">mustBeExported</span><span class="op" id="2761404">(</span><span class="op" id="2761405">)</span>&nbsp;<span class="comment" id="2761407">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761440">var</span>&nbsp;<span class="ident" id="2761444">target</span>&nbsp;<span class="ident" id="2761451">unsafe</span><span class="op" id="2761457">.</span><span class="ident" id="2761458">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761467">if</span>&nbsp;<span class="ident" id="2761470">v</span><span class="op" id="2761471">.</span><span class="ident" id="2761472">kind</span><span class="op" id="2761476">(</span><span class="op" id="2761477">)</span>&nbsp;<span class="op" id="2761479">==</span>&nbsp;<span class="ident" id="2761482">Interface</span>&nbsp;<span class="op" id="2761492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761496">target</span>&nbsp;<span class="op" id="2761503">=</span>&nbsp;<span class="ident" id="2761505">v</span><span class="op" id="2761506">.</span><span class="ident" id="2761507">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761515">x</span>&nbsp;<span class="op" id="2761517">=</span>&nbsp;<span class="ident" id="2761519">x</span><span class="op" id="2761520">.</span><span class="ident" id="2761521">assignTo</span><span class="op" id="2761529">(</span><span class="string" id="2761530">&#34;reflect.Set&#34;</span><span class="op" id="2761543">,</span>&nbsp;<span class="ident" id="2761545">v</span><span class="op" id="2761546">.</span><span class="ident" id="2761547">typ</span><span class="op" id="2761550">,</span>&nbsp;<span class="ident" id="2761552">target</span><span class="op" id="2761558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761561">if</span>&nbsp;<span class="ident" id="2761564">x</span><span class="op" id="2761565">.</span><span class="ident" id="2761566">flag</span><span class="op" id="2761570">&amp;</span><span class="ident" id="2761571">flagIndir</span>&nbsp;<span class="op" id="2761581">!=</span>&nbsp;<span class="num" id="2761584">0</span>&nbsp;<span class="op" id="2761586">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761590">memmove</span><span class="op" id="2761597">(</span><span class="ident" id="2761598">v</span><span class="op" id="2761599">.</span><span class="ident" id="2761600">ptr</span><span class="op" id="2761603">,</span>&nbsp;<span class="ident" id="2761605">x</span><span class="op" id="2761606">.</span><span class="ident" id="2761607">ptr</span><span class="op" id="2761610">,</span>&nbsp;<span class="ident" id="2761612">v</span><span class="op" id="2761613">.</span><span class="ident" id="2761614">typ</span><span class="op" id="2761617">.</span><span class="ident" id="2761618">size</span><span class="op" id="2761622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761625">}</span>&nbsp;<span class="keyword" id="2761627">else</span>&nbsp;<span class="op" id="2761632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761636">*</span><span class="op" id="2761637">(</span><span class="op" id="2761638">*</span><span class="ident" id="2761639">unsafe</span><span class="op" id="2761645">.</span><span class="ident" id="2761646">Pointer</span><span class="op" id="2761653">)</span><span class="op" id="2761654">(</span><span class="ident" id="2761655">v</span><span class="op" id="2761656">.</span><span class="ident" id="2761657">ptr</span><span class="op" id="2761660">)</span>&nbsp;<span class="op" id="2761662">=</span>&nbsp;<span class="ident" id="2761664">x</span><span class="op" id="2761665">.</span><span class="ident" id="2761666">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761671">}</span><br>
<span class="lineno"></span><span class="op" id="2761673">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2761676">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2761714">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2761776">func</span>&nbsp;<span class="op" id="2761781">(</span><span class="ident" id="2761782">v</span>&nbsp;<span class="ident" id="2761784">Value</span><span class="op" id="2761789">)</span>&nbsp;<span class="ident" id="2761791">SetBool</span><span class="op" id="2761798">(</span><span class="ident" id="2761799">x</span>&nbsp;<span class="builtintype" id="2761801">bool</span><span class="op" id="2761805">)</span>&nbsp;<span class="op" id="2761807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761810">v</span><span class="op" id="2761811">.</span><span class="ident" id="2761812">mustBeAssignable</span><span class="op" id="2761828">(</span><span class="op" id="2761829">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761832">v</span><span class="op" id="2761833">.</span><span class="ident" id="2761834">mustBe</span><span class="op" id="2761840">(</span><span class="ident" id="2761841">Bool</span><span class="op" id="2761845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761848">*</span><span class="op" id="2761849">(</span><span class="op" id="2761850">*</span><span class="builtintype" id="2761851">bool</span><span class="op" id="2761855">)</span><span class="op" id="2761856">(</span><span class="ident" id="2761857">v</span><span class="op" id="2761858">.</span><span class="ident" id="2761859">ptr</span><span class="op" id="2761862">)</span>&nbsp;<span class="op" id="2761864">=</span>&nbsp;<span class="ident" id="2761866">x</span><br>
<span class="lineno"></span><span class="op" id="2761868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761871">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2761910">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2761972">func</span>&nbsp;<span class="op" id="2761977">(</span><span class="ident" id="2761978">v</span>&nbsp;<span class="ident" id="2761980">Value</span><span class="op" id="2761985">)</span>&nbsp;<span class="ident" id="2761987">SetBytes</span><span class="op" id="2761995">(</span><span class="ident" id="2761996">x</span>&nbsp;<span class="op" id="2761998">[</span><span class="op" id="2761999">]</span><span class="builtintype" id="2762000">byte</span><span class="op" id="2762004">)</span>&nbsp;<span class="op" id="2762006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762009">v</span><span class="op" id="2762010">.</span><span class="ident" id="2762011">mustBeAssignable</span><span class="op" id="2762027">(</span><span class="op" id="2762028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762031">v</span><span class="op" id="2762032">.</span><span class="ident" id="2762033">mustBe</span><span class="op" id="2762039">(</span><span class="ident" id="2762040">Slice</span><span class="op" id="2762045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762048">if</span>&nbsp;<span class="ident" id="2762051">v</span><span class="op" id="2762052">.</span><span class="ident" id="2762053">typ</span><span class="op" id="2762056">.</span><span class="ident" id="2762057">Elem</span><span class="op" id="2762061">(</span><span class="op" id="2762062">)</span><span class="op" id="2762063">.</span><span class="ident" id="2762064">Kind</span><span class="op" id="2762068">(</span><span class="op" id="2762069">)</span>&nbsp;<span class="op" id="2762071">!=</span>&nbsp;<span class="ident" id="2762074">Uint8</span>&nbsp;<span class="op" id="2762080">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2762084">panic</span><span class="op" id="2762089">(</span><span class="string" id="2762090">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2762132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762138">*</span><span class="op" id="2762139">(</span><span class="op" id="2762140">*</span><span class="op" id="2762141">[</span><span class="op" id="2762142">]</span><span class="builtintype" id="2762143">byte</span><span class="op" id="2762147">)</span><span class="op" id="2762148">(</span><span class="ident" id="2762149">v</span><span class="op" id="2762150">.</span><span class="ident" id="2762151">ptr</span><span class="op" id="2762154">)</span>&nbsp;<span class="op" id="2762156">=</span>&nbsp;<span class="ident" id="2762158">x</span><br>
<span class="lineno"></span><span class="op" id="2762160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2762163">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2762202">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2762273">func</span>&nbsp;<span class="op" id="2762278">(</span><span class="ident" id="2762279">v</span>&nbsp;<span class="ident" id="2762281">Value</span><span class="op" id="2762286">)</span>&nbsp;<span class="ident" id="2762288">setRunes</span><span class="op" id="2762296">(</span><span class="ident" id="2762297">x</span>&nbsp;<span class="op" id="2762299">[</span><span class="op" id="2762300">]</span><span class="builtintype" id="2762301">rune</span><span class="op" id="2762305">)</span>&nbsp;<span class="op" id="2762307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762310">v</span><span class="op" id="2762311">.</span><span class="ident" id="2762312">mustBeAssignable</span><span class="op" id="2762328">(</span><span class="op" id="2762329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762332">v</span><span class="op" id="2762333">.</span><span class="ident" id="2762334">mustBe</span><span class="op" id="2762340">(</span><span class="ident" id="2762341">Slice</span><span class="op" id="2762346">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762349">if</span>&nbsp;<span class="ident" id="2762352">v</span><span class="op" id="2762353">.</span><span class="ident" id="2762354">typ</span><span class="op" id="2762357">.</span><span class="ident" id="2762358">Elem</span><span class="op" id="2762362">(</span><span class="op" id="2762363">)</span><span class="op" id="2762364">.</span><span class="ident" id="2762365">Kind</span><span class="op" id="2762369">(</span><span class="op" id="2762370">)</span>&nbsp;<span class="op" id="2762372">!=</span>&nbsp;<span class="ident" id="2762375">Int32</span>&nbsp;<span class="op" id="2762381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2762385">panic</span><span class="op" id="2762390">(</span><span class="string" id="2762391">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2762433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762439">*</span><span class="op" id="2762440">(</span><span class="op" id="2762441">*</span><span class="op" id="2762442">[</span><span class="op" id="2762443">]</span><span class="builtintype" id="2762444">rune</span><span class="op" id="2762448">)</span><span class="op" id="2762449">(</span><span class="ident" id="2762450">v</span><span class="op" id="2762451">.</span><span class="ident" id="2762452">ptr</span><span class="op" id="2762455">)</span>&nbsp;<span class="op" id="2762457">=</span>&nbsp;<span class="ident" id="2762459">x</span><br>
<span class="lineno"></span><span class="op" id="2762461">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2762464">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2762510">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2762592">func</span>&nbsp;<span class="op" id="2762597">(</span><span class="ident" id="2762598">v</span>&nbsp;<span class="ident" id="2762600">Value</span><span class="op" id="2762605">)</span>&nbsp;<span class="ident" id="2762607">SetComplex</span><span class="op" id="2762617">(</span><span class="ident" id="2762618">x</span>&nbsp;<span class="builtintype" id="2762620">complex128</span><span class="op" id="2762630">)</span>&nbsp;<span class="op" id="2762632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762635">v</span><span class="op" id="2762636">.</span><span class="ident" id="2762637">mustBeAssignable</span><span class="op" id="2762653">(</span><span class="op" id="2762654">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762657">switch</span>&nbsp;<span class="ident" id="2762664">k</span>&nbsp;<span class="op" id="2762666">:=</span>&nbsp;<span class="ident" id="2762669">v</span><span class="op" id="2762670">.</span><span class="ident" id="2762671">kind</span><span class="op" id="2762675">(</span><span class="op" id="2762676">)</span><span class="op" id="2762677">;</span>&nbsp;<span class="ident" id="2762679">k</span>&nbsp;<span class="op" id="2762681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762684">default</span><span class="op" id="2762691">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2762695">panic</span><span class="op" id="2762700">(</span><span class="op" id="2762701">&amp;</span><span class="ident" id="2762702">ValueError</span><span class="op" id="2762712">{</span><span class="string" id="2762713">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2762739">,</span>&nbsp;<span class="ident" id="2762741">v</span><span class="op" id="2762742">.</span><span class="ident" id="2762743">kind</span><span class="op" id="2762747">(</span><span class="op" id="2762748">)</span><span class="op" id="2762749">}</span><span class="op" id="2762750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762753">case</span>&nbsp;<span class="ident" id="2762758">Complex64</span><span class="op" id="2762767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762771">*</span><span class="op" id="2762772">(</span><span class="op" id="2762773">*</span><span class="builtintype" id="2762774">complex64</span><span class="op" id="2762783">)</span><span class="op" id="2762784">(</span><span class="ident" id="2762785">v</span><span class="op" id="2762786">.</span><span class="ident" id="2762787">ptr</span><span class="op" id="2762790">)</span>&nbsp;<span class="op" id="2762792">=</span>&nbsp;<span class="builtintype" id="2762794">complex64</span><span class="op" id="2762803">(</span><span class="ident" id="2762804">x</span><span class="op" id="2762805">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762808">case</span>&nbsp;<span class="ident" id="2762813">Complex128</span><span class="op" id="2762823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762827">*</span><span class="op" id="2762828">(</span><span class="op" id="2762829">*</span><span class="builtintype" id="2762830">complex128</span><span class="op" id="2762840">)</span><span class="op" id="2762841">(</span><span class="ident" id="2762842">v</span><span class="op" id="2762843">.</span><span class="ident" id="2762844">ptr</span><span class="op" id="2762847">)</span>&nbsp;<span class="op" id="2762849">=</span>&nbsp;<span class="ident" id="2762851">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762854">}</span><br>
<span class="lineno"></span><span class="op" id="2762856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2762859">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2762903">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2762980">func</span>&nbsp;<span class="op" id="2762985">(</span><span class="ident" id="2762986">v</span>&nbsp;<span class="ident" id="2762988">Value</span><span class="op" id="2762993">)</span>&nbsp;<span class="ident" id="2762995">SetFloat</span><span class="op" id="2763003">(</span><span class="ident" id="2763004">x</span>&nbsp;<span class="builtintype" id="2763006">float64</span><span class="op" id="2763013">)</span>&nbsp;<span class="op" id="2763015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763018">v</span><span class="op" id="2763019">.</span><span class="ident" id="2763020">mustBeAssignable</span><span class="op" id="2763036">(</span><span class="op" id="2763037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763040">switch</span>&nbsp;<span class="ident" id="2763047">k</span>&nbsp;<span class="op" id="2763049">:=</span>&nbsp;<span class="ident" id="2763052">v</span><span class="op" id="2763053">.</span><span class="ident" id="2763054">kind</span><span class="op" id="2763058">(</span><span class="op" id="2763059">)</span><span class="op" id="2763060">;</span>&nbsp;<span class="ident" id="2763062">k</span>&nbsp;<span class="op" id="2763064">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763067">default</span><span class="op" id="2763074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763078">panic</span><span class="op" id="2763083">(</span><span class="op" id="2763084">&amp;</span><span class="ident" id="2763085">ValueError</span><span class="op" id="2763095">{</span><span class="string" id="2763096">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2763120">,</span>&nbsp;<span class="ident" id="2763122">v</span><span class="op" id="2763123">.</span><span class="ident" id="2763124">kind</span><span class="op" id="2763128">(</span><span class="op" id="2763129">)</span><span class="op" id="2763130">}</span><span class="op" id="2763131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763134">case</span>&nbsp;<span class="ident" id="2763139">Float32</span><span class="op" id="2763146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763150">*</span><span class="op" id="2763151">(</span><span class="op" id="2763152">*</span><span class="builtintype" id="2763153">float32</span><span class="op" id="2763160">)</span><span class="op" id="2763161">(</span><span class="ident" id="2763162">v</span><span class="op" id="2763163">.</span><span class="ident" id="2763164">ptr</span><span class="op" id="2763167">)</span>&nbsp;<span class="op" id="2763169">=</span>&nbsp;<span class="builtintype" id="2763171">float32</span><span class="op" id="2763178">(</span><span class="ident" id="2763179">x</span><span class="op" id="2763180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763183">case</span>&nbsp;<span class="ident" id="2763188">Float64</span><span class="op" id="2763195">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763199">*</span><span class="op" id="2763200">(</span><span class="op" id="2763201">*</span><span class="builtintype" id="2763202">float64</span><span class="op" id="2763209">)</span><span class="op" id="2763210">(</span><span class="ident" id="2763211">v</span><span class="op" id="2763212">.</span><span class="ident" id="2763213">ptr</span><span class="op" id="2763216">)</span>&nbsp;<span class="op" id="2763218">=</span>&nbsp;<span class="ident" id="2763220">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763223">}</span><br>
<span class="lineno"></span><span class="op" id="2763225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763228">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2763270">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2763362">func</span>&nbsp;<span class="op" id="2763367">(</span><span class="ident" id="2763368">v</span>&nbsp;<span class="ident" id="2763370">Value</span><span class="op" id="2763375">)</span>&nbsp;<span class="ident" id="2763377">SetInt</span><span class="op" id="2763383">(</span><span class="ident" id="2763384">x</span>&nbsp;<span class="ident" id="2763386">int64</span><span class="op" id="2763391">)</span>&nbsp;<span class="op" id="2763393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763396">v</span><span class="op" id="2763397">.</span><span class="ident" id="2763398">mustBeAssignable</span><span class="op" id="2763414">(</span><span class="op" id="2763415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763418">switch</span>&nbsp;<span class="ident" id="2763425">k</span>&nbsp;<span class="op" id="2763427">:=</span>&nbsp;<span class="ident" id="2763430">v</span><span class="op" id="2763431">.</span><span class="ident" id="2763432">kind</span><span class="op" id="2763436">(</span><span class="op" id="2763437">)</span><span class="op" id="2763438">;</span>&nbsp;<span class="ident" id="2763440">k</span>&nbsp;<span class="op" id="2763442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763445">default</span><span class="op" id="2763452">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763456">panic</span><span class="op" id="2763461">(</span><span class="op" id="2763462">&amp;</span><span class="ident" id="2763463">ValueError</span><span class="op" id="2763473">{</span><span class="string" id="2763474">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2763496">,</span>&nbsp;<span class="ident" id="2763498">v</span><span class="op" id="2763499">.</span><span class="ident" id="2763500">kind</span><span class="op" id="2763504">(</span><span class="op" id="2763505">)</span><span class="op" id="2763506">}</span><span class="op" id="2763507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763510">case</span>&nbsp;<span class="ident" id="2763515">Int</span><span class="op" id="2763518">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763522">*</span><span class="op" id="2763523">(</span><span class="op" id="2763524">*</span><span class="builtintype" id="2763525">int</span><span class="op" id="2763528">)</span><span class="op" id="2763529">(</span><span class="ident" id="2763530">v</span><span class="op" id="2763531">.</span><span class="ident" id="2763532">ptr</span><span class="op" id="2763535">)</span>&nbsp;<span class="op" id="2763537">=</span>&nbsp;<span class="builtintype" id="2763539">int</span><span class="op" id="2763542">(</span><span class="ident" id="2763543">x</span><span class="op" id="2763544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763547">case</span>&nbsp;<span class="ident" id="2763552">Int8</span><span class="op" id="2763556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763560">*</span><span class="op" id="2763561">(</span><span class="op" id="2763562">*</span><span class="builtintype" id="2763563">int8</span><span class="op" id="2763567">)</span><span class="op" id="2763568">(</span><span class="ident" id="2763569">v</span><span class="op" id="2763570">.</span><span class="ident" id="2763571">ptr</span><span class="op" id="2763574">)</span>&nbsp;<span class="op" id="2763576">=</span>&nbsp;<span class="builtintype" id="2763578">int8</span><span class="op" id="2763582">(</span><span class="ident" id="2763583">x</span><span class="op" id="2763584">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763587">case</span>&nbsp;<span class="ident" id="2763592">Int16</span><span class="op" id="2763597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763601">*</span><span class="op" id="2763602">(</span><span class="op" id="2763603">*</span><span class="builtintype" id="2763604">int16</span><span class="op" id="2763609">)</span><span class="op" id="2763610">(</span><span class="ident" id="2763611">v</span><span class="op" id="2763612">.</span><span class="ident" id="2763613">ptr</span><span class="op" id="2763616">)</span>&nbsp;<span class="op" id="2763618">=</span>&nbsp;<span class="builtintype" id="2763620">int16</span><span class="op" id="2763625">(</span><span class="ident" id="2763626">x</span><span class="op" id="2763627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763630">case</span>&nbsp;<span class="ident" id="2763635">Int32</span><span class="op" id="2763640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763644">*</span><span class="op" id="2763645">(</span><span class="op" id="2763646">*</span><span class="builtintype" id="2763647">int32</span><span class="op" id="2763652">)</span><span class="op" id="2763653">(</span><span class="ident" id="2763654">v</span><span class="op" id="2763655">.</span><span class="ident" id="2763656">ptr</span><span class="op" id="2763659">)</span>&nbsp;<span class="op" id="2763661">=</span>&nbsp;<span class="builtintype" id="2763663">int32</span><span class="op" id="2763668">(</span><span class="ident" id="2763669">x</span><span class="op" id="2763670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763673">case</span>&nbsp;<span class="ident" id="2763678">Int64</span><span class="op" id="2763683">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763687">*</span><span class="op" id="2763688">(</span><span class="op" id="2763689">*</span><span class="ident" id="2763690">int64</span><span class="op" id="2763695">)</span><span class="op" id="2763696">(</span><span class="ident" id="2763697">v</span><span class="op" id="2763698">.</span><span class="ident" id="2763699">ptr</span><span class="op" id="2763702">)</span>&nbsp;<span class="op" id="2763704">=</span>&nbsp;<span class="ident" id="2763706">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763709">}</span><br>
<span class="lineno"></span><span class="op" id="2763711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763714">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2763746">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2763807">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2763850">func</span>&nbsp;<span class="op" id="2763855">(</span><span class="ident" id="2763856">v</span>&nbsp;<span class="ident" id="2763858">Value</span><span class="op" id="2763863">)</span>&nbsp;<span class="ident" id="2763865">SetLen</span><span class="op" id="2763871">(</span><span class="ident" id="2763872">n</span>&nbsp;<span class="builtintype" id="2763874">int</span><span class="op" id="2763877">)</span>&nbsp;<span class="op" id="2763879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763882">v</span><span class="op" id="2763883">.</span><span class="ident" id="2763884">mustBeAssignable</span><span class="op" id="2763900">(</span><span class="op" id="2763901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763904">v</span><span class="op" id="2763905">.</span><span class="ident" id="2763906">mustBe</span><span class="op" id="2763912">(</span><span class="ident" id="2763913">Slice</span><span class="op" id="2763918">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763921">s</span>&nbsp;<span class="op" id="2763923">:=</span>&nbsp;<span class="op" id="2763926">(</span><span class="op" id="2763927">*</span><span class="ident" id="2763928">sliceHeader</span><span class="op" id="2763939">)</span><span class="op" id="2763940">(</span><span class="ident" id="2763941">v</span><span class="op" id="2763942">.</span><span class="ident" id="2763943">ptr</span><span class="op" id="2763946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763949">if</span>&nbsp;<span class="builtintype" id="2763952">uint</span><span class="op" id="2763956">(</span><span class="ident" id="2763957">n</span><span class="op" id="2763958">)</span>&nbsp;<span class="op" id="2763960">&gt;</span>&nbsp;<span class="builtintype" id="2763962">uint</span><span class="op" id="2763966">(</span><span class="ident" id="2763967">s</span><span class="op" id="2763968">.</span><span class="ident" id="2763969">Cap</span><span class="op" id="2763972">)</span>&nbsp;<span class="op" id="2763974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763978">panic</span><span class="op" id="2763983">(</span><span class="string" id="2763984">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2764030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764036">s</span><span class="op" id="2764037">.</span><span class="ident" id="2764038">Len</span>&nbsp;<span class="op" id="2764042">=</span>&nbsp;<span class="ident" id="2764044">n</span><br>
<span class="lineno">1395</span><span class="op" id="2764046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764049">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2764083">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2764159">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2764202">func</span>&nbsp;<span class="op" id="2764207">(</span><span class="ident" id="2764208">v</span>&nbsp;<span class="ident" id="2764210">Value</span><span class="op" id="2764215">)</span>&nbsp;<span class="ident" id="2764217">SetCap</span><span class="op" id="2764223">(</span><span class="ident" id="2764224">n</span>&nbsp;<span class="builtintype" id="2764226">int</span><span class="op" id="2764229">)</span>&nbsp;<span class="op" id="2764231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764234">v</span><span class="op" id="2764235">.</span><span class="ident" id="2764236">mustBeAssignable</span><span class="op" id="2764252">(</span><span class="op" id="2764253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764256">v</span><span class="op" id="2764257">.</span><span class="ident" id="2764258">mustBe</span><span class="op" id="2764264">(</span><span class="ident" id="2764265">Slice</span><span class="op" id="2764270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764273">s</span>&nbsp;<span class="op" id="2764275">:=</span>&nbsp;<span class="op" id="2764278">(</span><span class="op" id="2764279">*</span><span class="ident" id="2764280">sliceHeader</span><span class="op" id="2764291">)</span><span class="op" id="2764292">(</span><span class="ident" id="2764293">v</span><span class="op" id="2764294">.</span><span class="ident" id="2764295">ptr</span><span class="op" id="2764298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764301">if</span>&nbsp;<span class="ident" id="2764304">n</span>&nbsp;<span class="op" id="2764306">&lt;</span>&nbsp;<span class="builtintype" id="2764308">int</span><span class="op" id="2764311">(</span><span class="ident" id="2764312">s</span><span class="op" id="2764313">.</span><span class="ident" id="2764314">Len</span><span class="op" id="2764317">)</span>&nbsp;<span class="op" id="2764319">||</span>&nbsp;<span class="ident" id="2764322">n</span>&nbsp;<span class="op" id="2764324">&gt;</span>&nbsp;<span class="builtintype" id="2764326">int</span><span class="op" id="2764329">(</span><span class="ident" id="2764330">s</span><span class="op" id="2764331">.</span><span class="ident" id="2764332">Cap</span><span class="op" id="2764335">)</span>&nbsp;<span class="op" id="2764337">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2764341">panic</span><span class="op" id="2764346">(</span><span class="string" id="2764347">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2764395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764401">s</span><span class="op" id="2764402">.</span><span class="ident" id="2764403">Cap</span>&nbsp;<span class="op" id="2764407">=</span>&nbsp;<span class="ident" id="2764409">n</span><br>
<span class="lineno"></span><span class="op" id="2764411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2764414">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2764485">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2764522">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2764593">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2764652">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2764719">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2764782">func</span>&nbsp;<span class="op" id="2764787">(</span><span class="ident" id="2764788">v</span>&nbsp;<span class="ident" id="2764790">Value</span><span class="op" id="2764795">)</span>&nbsp;<span class="ident" id="2764797">SetMapIndex</span><span class="op" id="2764808">(</span><span class="ident" id="2764809">key</span><span class="op" id="2764812">,</span>&nbsp;<span class="ident" id="2764814">val</span>&nbsp;<span class="ident" id="2764818">Value</span><span class="op" id="2764823">)</span>&nbsp;<span class="op" id="2764825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764828">v</span><span class="op" id="2764829">.</span><span class="ident" id="2764830">mustBe</span><span class="op" id="2764836">(</span><span class="ident" id="2764837">Map</span><span class="op" id="2764840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764843">v</span><span class="op" id="2764844">.</span><span class="ident" id="2764845">mustBeExported</span><span class="op" id="2764859">(</span><span class="op" id="2764860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764863">key</span><span class="op" id="2764866">.</span><span class="ident" id="2764867">mustBeExported</span><span class="op" id="2764881">(</span><span class="op" id="2764882">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764885">tt</span>&nbsp;<span class="op" id="2764888">:=</span>&nbsp;<span class="op" id="2764891">(</span><span class="op" id="2764892">*</span><span class="ident" id="2764893">mapType</span><span class="op" id="2764900">)</span><span class="op" id="2764901">(</span><span class="ident" id="2764902">unsafe</span><span class="op" id="2764908">.</span><span class="ident" id="2764909">Pointer</span><span class="op" id="2764916">(</span><span class="ident" id="2764917">v</span><span class="op" id="2764918">.</span><span class="ident" id="2764919">typ</span><span class="op" id="2764922">)</span><span class="op" id="2764923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764926">key</span>&nbsp;<span class="op" id="2764930">=</span>&nbsp;<span class="ident" id="2764932">key</span><span class="op" id="2764935">.</span><span class="ident" id="2764936">assignTo</span><span class="op" id="2764944">(</span><span class="string" id="2764945">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2764972">,</span>&nbsp;<span class="ident" id="2764974">tt</span><span class="op" id="2764976">.</span><span class="ident" id="2764977">key</span><span class="op" id="2764980">,</span>&nbsp;<span class="ident" id="2764982">nil</span><span class="op" id="2764985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764988">var</span>&nbsp;<span class="ident" id="2764992">k</span>&nbsp;<span class="ident" id="2764994">unsafe</span><span class="op" id="2765000">.</span><span class="ident" id="2765001">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765010">if</span>&nbsp;<span class="ident" id="2765013">key</span><span class="op" id="2765016">.</span><span class="ident" id="2765017">flag</span><span class="op" id="2765021">&amp;</span><span class="ident" id="2765022">flagIndir</span>&nbsp;<span class="op" id="2765032">!=</span>&nbsp;<span class="num" id="2765035">0</span>&nbsp;<span class="op" id="2765037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765041">k</span>&nbsp;<span class="op" id="2765043">=</span>&nbsp;<span class="ident" id="2765045">key</span><span class="op" id="2765048">.</span><span class="ident" id="2765049">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765054">}</span>&nbsp;<span class="keyword" id="2765056">else</span>&nbsp;<span class="op" id="2765061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765065">k</span>&nbsp;<span class="op" id="2765067">=</span>&nbsp;<span class="ident" id="2765069">unsafe</span><span class="op" id="2765075">.</span><span class="ident" id="2765076">Pointer</span><span class="op" id="2765083">(</span><span class="op" id="2765084">&amp;</span><span class="ident" id="2765085">key</span><span class="op" id="2765088">.</span><span class="ident" id="2765089">ptr</span><span class="op" id="2765092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765098">if</span>&nbsp;<span class="ident" id="2765101">val</span><span class="op" id="2765104">.</span><span class="ident" id="2765105">typ</span>&nbsp;<span class="op" id="2765109">==</span>&nbsp;<span class="ident" id="2765112">nil</span>&nbsp;<span class="op" id="2765116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765120">mapdelete</span><span class="op" id="2765129">(</span><span class="ident" id="2765130">v</span><span class="op" id="2765131">.</span><span class="ident" id="2765132">typ</span><span class="op" id="2765135">,</span>&nbsp;<span class="ident" id="2765137">v</span><span class="op" id="2765138">.</span><span class="ident" id="2765139">pointer</span><span class="op" id="2765146">(</span><span class="op" id="2765147">)</span><span class="op" id="2765148">,</span>&nbsp;<span class="ident" id="2765150">k</span><span class="op" id="2765151">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765155">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765166">val</span><span class="op" id="2765169">.</span><span class="ident" id="2765170">mustBeExported</span><span class="op" id="2765184">(</span><span class="op" id="2765185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765188">val</span>&nbsp;<span class="op" id="2765192">=</span>&nbsp;<span class="ident" id="2765194">val</span><span class="op" id="2765197">.</span><span class="ident" id="2765198">assignTo</span><span class="op" id="2765206">(</span><span class="string" id="2765207">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2765234">,</span>&nbsp;<span class="ident" id="2765236">tt</span><span class="op" id="2765238">.</span><span class="ident" id="2765239">elem</span><span class="op" id="2765243">,</span>&nbsp;<span class="ident" id="2765245">nil</span><span class="op" id="2765248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765251">var</span>&nbsp;<span class="ident" id="2765255">e</span>&nbsp;<span class="ident" id="2765257">unsafe</span><span class="op" id="2765263">.</span><span class="ident" id="2765264">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765273">if</span>&nbsp;<span class="ident" id="2765276">val</span><span class="op" id="2765279">.</span><span class="ident" id="2765280">flag</span><span class="op" id="2765284">&amp;</span><span class="ident" id="2765285">flagIndir</span>&nbsp;<span class="op" id="2765295">!=</span>&nbsp;<span class="num" id="2765298">0</span>&nbsp;<span class="op" id="2765300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765304">e</span>&nbsp;<span class="op" id="2765306">=</span>&nbsp;<span class="ident" id="2765308">val</span><span class="op" id="2765311">.</span><span class="ident" id="2765312">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765317">}</span>&nbsp;<span class="keyword" id="2765319">else</span>&nbsp;<span class="op" id="2765324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765328">e</span>&nbsp;<span class="op" id="2765330">=</span>&nbsp;<span class="ident" id="2765332">unsafe</span><span class="op" id="2765338">.</span><span class="ident" id="2765339">Pointer</span><span class="op" id="2765346">(</span><span class="op" id="2765347">&amp;</span><span class="ident" id="2765348">val</span><span class="op" id="2765351">.</span><span class="ident" id="2765352">ptr</span><span class="op" id="2765355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765358">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765361">mapassign</span><span class="op" id="2765370">(</span><span class="ident" id="2765371">v</span><span class="op" id="2765372">.</span><span class="ident" id="2765373">typ</span><span class="op" id="2765376">,</span>&nbsp;<span class="ident" id="2765378">v</span><span class="op" id="2765379">.</span><span class="ident" id="2765380">pointer</span><span class="op" id="2765387">(</span><span class="op" id="2765388">)</span><span class="op" id="2765389">,</span>&nbsp;<span class="ident" id="2765391">k</span><span class="op" id="2765392">,</span>&nbsp;<span class="ident" id="2765394">e</span><span class="op" id="2765395">)</span><br>
<span class="lineno"></span><span class="op" id="2765397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765400">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2765443">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2765549">func</span>&nbsp;<span class="op" id="2765554">(</span><span class="ident" id="2765555">v</span>&nbsp;<span class="ident" id="2765557">Value</span><span class="op" id="2765562">)</span>&nbsp;<span class="ident" id="2765564">SetUint</span><span class="op" id="2765571">(</span><span class="ident" id="2765572">x</span>&nbsp;<span class="ident" id="2765574">uint64</span><span class="op" id="2765580">)</span>&nbsp;<span class="op" id="2765582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765585">v</span><span class="op" id="2765586">.</span><span class="ident" id="2765587">mustBeAssignable</span><span class="op" id="2765603">(</span><span class="op" id="2765604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765607">switch</span>&nbsp;<span class="ident" id="2765614">k</span>&nbsp;<span class="op" id="2765616">:=</span>&nbsp;<span class="ident" id="2765619">v</span><span class="op" id="2765620">.</span><span class="ident" id="2765621">kind</span><span class="op" id="2765625">(</span><span class="op" id="2765626">)</span><span class="op" id="2765627">;</span>&nbsp;<span class="ident" id="2765629">k</span>&nbsp;<span class="op" id="2765631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765634">default</span><span class="op" id="2765641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765645">panic</span><span class="op" id="2765650">(</span><span class="op" id="2765651">&amp;</span><span class="ident" id="2765652">ValueError</span><span class="op" id="2765662">{</span><span class="string" id="2765663">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2765686">,</span>&nbsp;<span class="ident" id="2765688">v</span><span class="op" id="2765689">.</span><span class="ident" id="2765690">kind</span><span class="op" id="2765694">(</span><span class="op" id="2765695">)</span><span class="op" id="2765696">}</span><span class="op" id="2765697">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765700">case</span>&nbsp;<span class="ident" id="2765705">Uint</span><span class="op" id="2765709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765713">*</span><span class="op" id="2765714">(</span><span class="op" id="2765715">*</span><span class="builtintype" id="2765716">uint</span><span class="op" id="2765720">)</span><span class="op" id="2765721">(</span><span class="ident" id="2765722">v</span><span class="op" id="2765723">.</span><span class="ident" id="2765724">ptr</span><span class="op" id="2765727">)</span>&nbsp;<span class="op" id="2765729">=</span>&nbsp;<span class="builtintype" id="2765731">uint</span><span class="op" id="2765735">(</span><span class="ident" id="2765736">x</span><span class="op" id="2765737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765740">case</span>&nbsp;<span class="ident" id="2765745">Uint8</span><span class="op" id="2765750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765754">*</span><span class="op" id="2765755">(</span><span class="op" id="2765756">*</span><span class="builtintype" id="2765757">uint8</span><span class="op" id="2765762">)</span><span class="op" id="2765763">(</span><span class="ident" id="2765764">v</span><span class="op" id="2765765">.</span><span class="ident" id="2765766">ptr</span><span class="op" id="2765769">)</span>&nbsp;<span class="op" id="2765771">=</span>&nbsp;<span class="builtintype" id="2765773">uint8</span><span class="op" id="2765778">(</span><span class="ident" id="2765779">x</span><span class="op" id="2765780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765783">case</span>&nbsp;<span class="ident" id="2765788">Uint16</span><span class="op" id="2765794">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765798">*</span><span class="op" id="2765799">(</span><span class="op" id="2765800">*</span><span class="builtintype" id="2765801">uint16</span><span class="op" id="2765807">)</span><span class="op" id="2765808">(</span><span class="ident" id="2765809">v</span><span class="op" id="2765810">.</span><span class="ident" id="2765811">ptr</span><span class="op" id="2765814">)</span>&nbsp;<span class="op" id="2765816">=</span>&nbsp;<span class="builtintype" id="2765818">uint16</span><span class="op" id="2765824">(</span><span class="ident" id="2765825">x</span><span class="op" id="2765826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765829">case</span>&nbsp;<span class="ident" id="2765834">Uint32</span><span class="op" id="2765840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765844">*</span><span class="op" id="2765845">(</span><span class="op" id="2765846">*</span><span class="builtintype" id="2765847">uint32</span><span class="op" id="2765853">)</span><span class="op" id="2765854">(</span><span class="ident" id="2765855">v</span><span class="op" id="2765856">.</span><span class="ident" id="2765857">ptr</span><span class="op" id="2765860">)</span>&nbsp;<span class="op" id="2765862">=</span>&nbsp;<span class="builtintype" id="2765864">uint32</span><span class="op" id="2765870">(</span><span class="ident" id="2765871">x</span><span class="op" id="2765872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765875">case</span>&nbsp;<span class="ident" id="2765880">Uint64</span><span class="op" id="2765886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765890">*</span><span class="op" id="2765891">(</span><span class="op" id="2765892">*</span><span class="ident" id="2765893">uint64</span><span class="op" id="2765899">)</span><span class="op" id="2765900">(</span><span class="ident" id="2765901">v</span><span class="op" id="2765902">.</span><span class="ident" id="2765903">ptr</span><span class="op" id="2765906">)</span>&nbsp;<span class="op" id="2765908">=</span>&nbsp;<span class="ident" id="2765910">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765913">case</span>&nbsp;<span class="ident" id="2765918">Uintptr</span><span class="op" id="2765925">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765929">*</span><span class="op" id="2765930">(</span><span class="op" id="2765931">*</span><span class="builtintype" id="2765932">uintptr</span><span class="op" id="2765939">)</span><span class="op" id="2765940">(</span><span class="ident" id="2765941">v</span><span class="op" id="2765942">.</span><span class="ident" id="2765943">ptr</span><span class="op" id="2765946">)</span>&nbsp;<span class="op" id="2765948">=</span>&nbsp;<span class="builtintype" id="2765950">uintptr</span><span class="op" id="2765957">(</span><span class="ident" id="2765958">x</span><span class="op" id="2765959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765962">}</span><br>
<span class="lineno"></span><span class="op" id="2765964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2765967">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2766019">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2766066">func</span>&nbsp;<span class="op" id="2766071">(</span><span class="ident" id="2766072">v</span>&nbsp;<span class="ident" id="2766074">Value</span><span class="op" id="2766079">)</span>&nbsp;<span class="ident" id="2766081">SetPointer</span><span class="op" id="2766091">(</span><span class="ident" id="2766092">x</span>&nbsp;<span class="ident" id="2766094">unsafe</span><span class="op" id="2766100">.</span><span class="ident" id="2766101">Pointer</span><span class="op" id="2766108">)</span>&nbsp;<span class="op" id="2766110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766113">v</span><span class="op" id="2766114">.</span><span class="ident" id="2766115">mustBeAssignable</span><span class="op" id="2766131">(</span><span class="op" id="2766132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766135">v</span><span class="op" id="2766136">.</span><span class="ident" id="2766137">mustBe</span><span class="op" id="2766143">(</span><span class="ident" id="2766144">UnsafePointer</span><span class="op" id="2766157">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766160">*</span><span class="op" id="2766161">(</span><span class="op" id="2766162">*</span><span class="ident" id="2766163">unsafe</span><span class="op" id="2766169">.</span><span class="ident" id="2766170">Pointer</span><span class="op" id="2766177">)</span><span class="op" id="2766178">(</span><span class="ident" id="2766179">v</span><span class="op" id="2766180">.</span><span class="ident" id="2766181">ptr</span><span class="op" id="2766184">)</span>&nbsp;<span class="op" id="2766186">=</span>&nbsp;<span class="ident" id="2766188">x</span><br>
<span class="lineno"></span><span class="op" id="2766190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766193">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2766238">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2766302">func</span>&nbsp;<span class="op" id="2766307">(</span><span class="ident" id="2766308">v</span>&nbsp;<span class="ident" id="2766310">Value</span><span class="op" id="2766315">)</span>&nbsp;<span class="ident" id="2766317">SetString</span><span class="op" id="2766326">(</span><span class="ident" id="2766327">x</span>&nbsp;<span class="builtintype" id="2766329">string</span><span class="op" id="2766335">)</span>&nbsp;<span class="op" id="2766337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766340">v</span><span class="op" id="2766341">.</span><span class="ident" id="2766342">mustBeAssignable</span><span class="op" id="2766358">(</span><span class="op" id="2766359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766362">v</span><span class="op" id="2766363">.</span><span class="ident" id="2766364">mustBe</span><span class="op" id="2766370">(</span><span class="ident" id="2766371">String</span><span class="op" id="2766377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766380">*</span><span class="op" id="2766381">(</span><span class="op" id="2766382">*</span><span class="builtintype" id="2766383">string</span><span class="op" id="2766389">)</span><span class="op" id="2766390">(</span><span class="ident" id="2766391">v</span><span class="op" id="2766392">.</span><span class="ident" id="2766393">ptr</span><span class="op" id="2766396">)</span>&nbsp;<span class="op" id="2766398">=</span>&nbsp;<span class="ident" id="2766400">x</span><br>
<span class="lineno"></span><span class="op" id="2766402">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2766405">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2766430">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2766521">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2766561">func</span>&nbsp;<span class="op" id="2766566">(</span><span class="ident" id="2766567">v</span>&nbsp;<span class="ident" id="2766569">Value</span><span class="op" id="2766574">)</span>&nbsp;<span class="ident" id="2766576">Slice</span><span class="op" id="2766581">(</span><span class="ident" id="2766582">i</span><span class="op" id="2766583">,</span>&nbsp;<span class="ident" id="2766585">j</span>&nbsp;<span class="builtintype" id="2766587">int</span><span class="op" id="2766590">)</span>&nbsp;<span class="ident" id="2766592">Value</span>&nbsp;<span class="op" id="2766598">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766601">var</span>&nbsp;<span class="op" id="2766605">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766609">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2766614">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766620">typ</span>&nbsp;&nbsp;<span class="op" id="2766625">*</span><span class="ident" id="2766626">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766638">base</span>&nbsp;<span class="ident" id="2766643">unsafe</span><span class="op" id="2766649">.</span><span class="ident" id="2766650">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766659">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766662">switch</span>&nbsp;<span class="ident" id="2766669">kind</span>&nbsp;<span class="op" id="2766674">:=</span>&nbsp;<span class="ident" id="2766677">v</span><span class="op" id="2766678">.</span><span class="ident" id="2766679">kind</span><span class="op" id="2766683">(</span><span class="op" id="2766684">)</span><span class="op" id="2766685">;</span>&nbsp;<span class="ident" id="2766687">kind</span>&nbsp;<span class="op" id="2766692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766695">default</span><span class="op" id="2766702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766706">panic</span><span class="op" id="2766711">(</span><span class="op" id="2766712">&amp;</span><span class="ident" id="2766713">ValueError</span><span class="op" id="2766723">{</span><span class="string" id="2766724">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2766745">,</span>&nbsp;<span class="ident" id="2766747">v</span><span class="op" id="2766748">.</span><span class="ident" id="2766749">kind</span><span class="op" id="2766753">(</span><span class="op" id="2766754">)</span><span class="op" id="2766755">}</span><span class="op" id="2766756">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766760">case</span>&nbsp;<span class="ident" id="2766765">Array</span><span class="op" id="2766770">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766774">if</span>&nbsp;<span class="ident" id="2766777">v</span><span class="op" id="2766778">.</span><span class="ident" id="2766779">flag</span><span class="op" id="2766783">&amp;</span><span class="ident" id="2766784">flagAddr</span>&nbsp;<span class="op" id="2766793">==</span>&nbsp;<span class="num" id="2766796">0</span>&nbsp;<span class="op" id="2766798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766803">panic</span><span class="op" id="2766808">(</span><span class="string" id="2766809">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2766860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766868">tt</span>&nbsp;<span class="op" id="2766871">:=</span>&nbsp;<span class="op" id="2766874">(</span><span class="op" id="2766875">*</span><span class="ident" id="2766876">arrayType</span><span class="op" id="2766885">)</span><span class="op" id="2766886">(</span><span class="ident" id="2766887">unsafe</span><span class="op" id="2766893">.</span><span class="ident" id="2766894">Pointer</span><span class="op" id="2766901">(</span><span class="ident" id="2766902">v</span><span class="op" id="2766903">.</span><span class="ident" id="2766904">typ</span><span class="op" id="2766907">)</span><span class="op" id="2766908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766912">cap</span>&nbsp;<span class="op" id="2766916">=</span>&nbsp;<span class="builtintype" id="2766918">int</span><span class="op" id="2766921">(</span><span class="ident" id="2766922">tt</span><span class="op" id="2766924">.</span><span class="builtinfunc" id="2766925">len</span><span class="op" id="2766928">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766932">typ</span>&nbsp;<span class="op" id="2766936">=</span>&nbsp;<span class="op" id="2766938">(</span><span class="op" id="2766939">*</span><span class="ident" id="2766940">sliceType</span><span class="op" id="2766949">)</span><span class="op" id="2766950">(</span><span class="ident" id="2766951">unsafe</span><span class="op" id="2766957">.</span><span class="ident" id="2766958">Pointer</span><span class="op" id="2766965">(</span><span class="ident" id="2766966">tt</span><span class="op" id="2766968">.</span><span class="ident" id="2766969">slice</span><span class="op" id="2766974">)</span><span class="op" id="2766975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766979">base</span>&nbsp;<span class="op" id="2766984">=</span>&nbsp;<span class="ident" id="2766986">v</span><span class="op" id="2766987">.</span><span class="ident" id="2766988">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766994">case</span>&nbsp;<span class="ident" id="2766999">Slice</span><span class="op" id="2767004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767008">typ</span>&nbsp;<span class="op" id="2767012">=</span>&nbsp;<span class="op" id="2767014">(</span><span class="op" id="2767015">*</span><span class="ident" id="2767016">sliceType</span><span class="op" id="2767025">)</span><span class="op" id="2767026">(</span><span class="ident" id="2767027">unsafe</span><span class="op" id="2767033">.</span><span class="ident" id="2767034">Pointer</span><span class="op" id="2767041">(</span><span class="ident" id="2767042">v</span><span class="op" id="2767043">.</span><span class="ident" id="2767044">typ</span><span class="op" id="2767047">)</span><span class="op" id="2767048">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767052">s</span>&nbsp;<span class="op" id="2767054">:=</span>&nbsp;<span class="op" id="2767057">(</span><span class="op" id="2767058">*</span><span class="ident" id="2767059">sliceHeader</span><span class="op" id="2767070">)</span><span class="op" id="2767071">(</span><span class="ident" id="2767072">v</span><span class="op" id="2767073">.</span><span class="ident" id="2767074">ptr</span><span class="op" id="2767077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767081">base</span>&nbsp;<span class="op" id="2767086">=</span>&nbsp;<span class="ident" id="2767088">unsafe</span><span class="op" id="2767094">.</span><span class="ident" id="2767095">Pointer</span><span class="op" id="2767102">(</span><span class="ident" id="2767103">s</span><span class="op" id="2767104">.</span><span class="ident" id="2767105">Data</span><span class="op" id="2767109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767113">cap</span>&nbsp;<span class="op" id="2767117">=</span>&nbsp;<span class="ident" id="2767119">s</span><span class="op" id="2767120">.</span><span class="ident" id="2767121">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767127">case</span>&nbsp;<span class="ident" id="2767132">String</span><span class="op" id="2767138">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767142">s</span>&nbsp;<span class="op" id="2767144">:=</span>&nbsp;<span class="op" id="2767147">(</span><span class="op" id="2767148">*</span><span class="ident" id="2767149">stringHeader</span><span class="op" id="2767161">)</span><span class="op" id="2767162">(</span><span class="ident" id="2767163">v</span><span class="op" id="2767164">.</span><span class="ident" id="2767165">ptr</span><span class="op" id="2767168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767172">if</span>&nbsp;<span class="ident" id="2767175">i</span>&nbsp;<span class="op" id="2767177">&lt;</span>&nbsp;<span class="num" id="2767179">0</span>&nbsp;<span class="op" id="2767181">||</span>&nbsp;<span class="ident" id="2767184">j</span>&nbsp;<span class="op" id="2767186">&lt;</span>&nbsp;<span class="ident" id="2767188">i</span>&nbsp;<span class="op" id="2767190">||</span>&nbsp;<span class="ident" id="2767193">j</span>&nbsp;<span class="op" id="2767195">&gt;</span>&nbsp;<span class="ident" id="2767197">s</span><span class="op" id="2767198">.</span><span class="ident" id="2767199">Len</span>&nbsp;<span class="op" id="2767203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767208">panic</span><span class="op" id="2767213">(</span><span class="string" id="2767214">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2767269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767277">t</span>&nbsp;<span class="op" id="2767279">:=</span>&nbsp;<span class="ident" id="2767282">stringHeader</span><span class="op" id="2767294">{</span><span class="ident" id="2767295">unsafe</span><span class="op" id="2767301">.</span><span class="ident" id="2767302">Pointer</span><span class="op" id="2767309">(</span><span class="builtintype" id="2767310">uintptr</span><span class="op" id="2767317">(</span><span class="ident" id="2767318">s</span><span class="op" id="2767319">.</span><span class="ident" id="2767320">Data</span><span class="op" id="2767324">)</span>&nbsp;<span class="op" id="2767326">+</span>&nbsp;<span class="builtintype" id="2767328">uintptr</span><span class="op" id="2767335">(</span><span class="ident" id="2767336">i</span><span class="op" id="2767337">)</span><span class="op" id="2767338">)</span><span class="op" id="2767339">,</span>&nbsp;<span class="ident" id="2767341">j</span>&nbsp;<span class="op" id="2767343">-</span>&nbsp;<span class="ident" id="2767345">i</span><span class="op" id="2767346">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767350">return</span>&nbsp;<span class="ident" id="2767357">Value</span><span class="op" id="2767362">{</span><span class="ident" id="2767363">v</span><span class="op" id="2767364">.</span><span class="ident" id="2767365">typ</span><span class="op" id="2767368">,</span>&nbsp;<span class="ident" id="2767370">unsafe</span><span class="op" id="2767376">.</span><span class="ident" id="2767377">Pointer</span><span class="op" id="2767384">(</span><span class="op" id="2767385">&amp;</span><span class="ident" id="2767386">t</span><span class="op" id="2767387">)</span><span class="op" id="2767388">,</span>&nbsp;<span class="ident" id="2767390">v</span><span class="op" id="2767391">.</span><span class="ident" id="2767392">flag</span><span class="op" id="2767396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767403">if</span>&nbsp;<span class="ident" id="2767406">i</span>&nbsp;<span class="op" id="2767408">&lt;</span>&nbsp;<span class="num" id="2767410">0</span>&nbsp;<span class="op" id="2767412">||</span>&nbsp;<span class="ident" id="2767415">j</span>&nbsp;<span class="op" id="2767417">&lt;</span>&nbsp;<span class="ident" id="2767419">i</span>&nbsp;<span class="op" id="2767421">||</span>&nbsp;<span class="ident" id="2767424">j</span>&nbsp;<span class="op" id="2767426">&gt;</span>&nbsp;<span class="builtinfunc" id="2767428">cap</span>&nbsp;<span class="op" id="2767432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767436">panic</span><span class="op" id="2767441">(</span><span class="string" id="2767442">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2767490">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767497">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767558">var</span>&nbsp;<span class="ident" id="2767562">x</span>&nbsp;<span class="op" id="2767564">[</span><span class="op" id="2767565">]</span><span class="ident" id="2767566">unsafe</span><span class="op" id="2767572">.</span><span class="ident" id="2767573">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767583">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767624">s</span>&nbsp;<span class="op" id="2767626">:=</span>&nbsp;<span class="op" id="2767629">(</span><span class="op" id="2767630">*</span><span class="ident" id="2767631">sliceHeader</span><span class="op" id="2767642">)</span><span class="op" id="2767643">(</span><span class="ident" id="2767644">unsafe</span><span class="op" id="2767650">.</span><span class="ident" id="2767651">Pointer</span><span class="op" id="2767658">(</span><span class="op" id="2767659">&amp;</span><span class="ident" id="2767660">x</span><span class="op" id="2767661">)</span><span class="op" id="2767662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767665">s</span><span class="op" id="2767666">.</span><span class="ident" id="2767667">Len</span>&nbsp;<span class="op" id="2767671">=</span>&nbsp;<span class="ident" id="2767673">j</span>&nbsp;<span class="op" id="2767675">-</span>&nbsp;<span class="ident" id="2767677">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767680">s</span><span class="op" id="2767681">.</span><span class="ident" id="2767682">Cap</span>&nbsp;<span class="op" id="2767686">=</span>&nbsp;<span class="builtinfunc" id="2767688">cap</span>&nbsp;<span class="op" id="2767692">-</span>&nbsp;<span class="ident" id="2767694">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767697">if</span>&nbsp;<span class="builtinfunc" id="2767700">cap</span><span class="op" id="2767703">-</span><span class="ident" id="2767704">i</span>&nbsp;<span class="op" id="2767706">&gt;</span>&nbsp;<span class="num" id="2767708">0</span>&nbsp;<span class="op" id="2767710">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767714">s</span><span class="op" id="2767715">.</span><span class="ident" id="2767716">Data</span>&nbsp;<span class="op" id="2767721">=</span>&nbsp;<span class="ident" id="2767723">unsafe</span><span class="op" id="2767729">.</span><span class="ident" id="2767730">Pointer</span><span class="op" id="2767737">(</span><span class="builtintype" id="2767738">uintptr</span><span class="op" id="2767745">(</span><span class="ident" id="2767746">base</span><span class="op" id="2767750">)</span>&nbsp;<span class="op" id="2767752">+</span>&nbsp;<span class="builtintype" id="2767754">uintptr</span><span class="op" id="2767761">(</span><span class="ident" id="2767762">i</span><span class="op" id="2767763">)</span><span class="op" id="2767764">*</span><span class="ident" id="2767765">typ</span><span class="op" id="2767768">.</span><span class="ident" id="2767769">elem</span><span class="op" id="2767773">.</span><span class="ident" id="2767774">Size</span><span class="op" id="2767778">(</span><span class="op" id="2767779">)</span><span class="op" id="2767780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767783">}</span>&nbsp;<span class="keyword" id="2767785">else</span>&nbsp;<span class="op" id="2767790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767794">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767861">s</span><span class="op" id="2767862">.</span><span class="ident" id="2767863">Data</span>&nbsp;<span class="op" id="2767868">=</span>&nbsp;<span class="ident" id="2767870">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767876">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767880">fl</span>&nbsp;<span class="op" id="2767883">:=</span>&nbsp;<span class="ident" id="2767886">v</span><span class="op" id="2767887">.</span><span class="ident" id="2767888">flag</span><span class="op" id="2767892">&amp;</span><span class="ident" id="2767893">flagRO</span>&nbsp;<span class="op" id="2767900">|</span>&nbsp;<span class="ident" id="2767902">flagIndir</span>&nbsp;<span class="op" id="2767912">|</span>&nbsp;<span class="ident" id="2767914">flag</span><span class="op" id="2767918">(</span><span class="ident" id="2767919">Slice</span><span class="op" id="2767924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767927">return</span>&nbsp;<span class="ident" id="2767934">Value</span><span class="op" id="2767939">{</span><span class="ident" id="2767940">typ</span><span class="op" id="2767943">.</span><span class="ident" id="2767944">common</span><span class="op" id="2767950">(</span><span class="op" id="2767951">)</span><span class="op" id="2767952">,</span>&nbsp;<span class="ident" id="2767954">unsafe</span><span class="op" id="2767960">.</span><span class="ident" id="2767961">Pointer</span><span class="op" id="2767968">(</span><span class="op" id="2767969">&amp;</span><span class="ident" id="2767970">x</span><span class="op" id="2767971">)</span><span class="op" id="2767972">,</span>&nbsp;<span class="ident" id="2767974">fl</span><span class="op" id="2767976">}</span><br>
<span class="lineno"></span><span class="op" id="2767978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2767981">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2768056">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2768139">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2768179">func</span>&nbsp;<span class="op" id="2768184">(</span><span class="ident" id="2768185">v</span>&nbsp;<span class="ident" id="2768187">Value</span><span class="op" id="2768192">)</span>&nbsp;<span class="ident" id="2768194">Slice3</span><span class="op" id="2768200">(</span><span class="ident" id="2768201">i</span><span class="op" id="2768202">,</span>&nbsp;<span class="ident" id="2768204">j</span><span class="op" id="2768205">,</span>&nbsp;<span class="ident" id="2768207">k</span>&nbsp;<span class="builtintype" id="2768209">int</span><span class="op" id="2768212">)</span>&nbsp;<span class="ident" id="2768214">Value</span>&nbsp;<span class="op" id="2768220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768223">var</span>&nbsp;<span class="op" id="2768227">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768231">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2768236">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768242">typ</span>&nbsp;&nbsp;<span class="op" id="2768247">*</span><span class="ident" id="2768248">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768260">base</span>&nbsp;<span class="ident" id="2768265">unsafe</span><span class="op" id="2768271">.</span><span class="ident" id="2768272">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768284">switch</span>&nbsp;<span class="ident" id="2768291">kind</span>&nbsp;<span class="op" id="2768296">:=</span>&nbsp;<span class="ident" id="2768299">v</span><span class="op" id="2768300">.</span><span class="ident" id="2768301">kind</span><span class="op" id="2768305">(</span><span class="op" id="2768306">)</span><span class="op" id="2768307">;</span>&nbsp;<span class="ident" id="2768309">kind</span>&nbsp;<span class="op" id="2768314">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768317">default</span><span class="op" id="2768324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768328">panic</span><span class="op" id="2768333">(</span><span class="op" id="2768334">&amp;</span><span class="ident" id="2768335">ValueError</span><span class="op" id="2768345">{</span><span class="string" id="2768346">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2768368">,</span>&nbsp;<span class="ident" id="2768370">v</span><span class="op" id="2768371">.</span><span class="ident" id="2768372">kind</span><span class="op" id="2768376">(</span><span class="op" id="2768377">)</span><span class="op" id="2768378">}</span><span class="op" id="2768379">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768383">case</span>&nbsp;<span class="ident" id="2768388">Array</span><span class="op" id="2768393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768397">if</span>&nbsp;<span class="ident" id="2768400">v</span><span class="op" id="2768401">.</span><span class="ident" id="2768402">flag</span><span class="op" id="2768406">&amp;</span><span class="ident" id="2768407">flagAddr</span>&nbsp;<span class="op" id="2768416">==</span>&nbsp;<span class="num" id="2768419">0</span>&nbsp;<span class="op" id="2768421">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768426">panic</span><span class="op" id="2768431">(</span><span class="string" id="2768432">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2768484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768492">tt</span>&nbsp;<span class="op" id="2768495">:=</span>&nbsp;<span class="op" id="2768498">(</span><span class="op" id="2768499">*</span><span class="ident" id="2768500">arrayType</span><span class="op" id="2768509">)</span><span class="op" id="2768510">(</span><span class="ident" id="2768511">unsafe</span><span class="op" id="2768517">.</span><span class="ident" id="2768518">Pointer</span><span class="op" id="2768525">(</span><span class="ident" id="2768526">v</span><span class="op" id="2768527">.</span><span class="ident" id="2768528">typ</span><span class="op" id="2768531">)</span><span class="op" id="2768532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768536">cap</span>&nbsp;<span class="op" id="2768540">=</span>&nbsp;<span class="builtintype" id="2768542">int</span><span class="op" id="2768545">(</span><span class="ident" id="2768546">tt</span><span class="op" id="2768548">.</span><span class="builtinfunc" id="2768549">len</span><span class="op" id="2768552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768556">typ</span>&nbsp;<span class="op" id="2768560">=</span>&nbsp;<span class="op" id="2768562">(</span><span class="op" id="2768563">*</span><span class="ident" id="2768564">sliceType</span><span class="op" id="2768573">)</span><span class="op" id="2768574">(</span><span class="ident" id="2768575">unsafe</span><span class="op" id="2768581">.</span><span class="ident" id="2768582">Pointer</span><span class="op" id="2768589">(</span><span class="ident" id="2768590">tt</span><span class="op" id="2768592">.</span><span class="ident" id="2768593">slice</span><span class="op" id="2768598">)</span><span class="op" id="2768599">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768603">base</span>&nbsp;<span class="op" id="2768608">=</span>&nbsp;<span class="ident" id="2768610">v</span><span class="op" id="2768611">.</span><span class="ident" id="2768612">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768618">case</span>&nbsp;<span class="ident" id="2768623">Slice</span><span class="op" id="2768628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768632">typ</span>&nbsp;<span class="op" id="2768636">=</span>&nbsp;<span class="op" id="2768638">(</span><span class="op" id="2768639">*</span><span class="ident" id="2768640">sliceType</span><span class="op" id="2768649">)</span><span class="op" id="2768650">(</span><span class="ident" id="2768651">unsafe</span><span class="op" id="2768657">.</span><span class="ident" id="2768658">Pointer</span><span class="op" id="2768665">(</span><span class="ident" id="2768666">v</span><span class="op" id="2768667">.</span><span class="ident" id="2768668">typ</span><span class="op" id="2768671">)</span><span class="op" id="2768672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768676">s</span>&nbsp;<span class="op" id="2768678">:=</span>&nbsp;<span class="op" id="2768681">(</span><span class="op" id="2768682">*</span><span class="ident" id="2768683">sliceHeader</span><span class="op" id="2768694">)</span><span class="op" id="2768695">(</span><span class="ident" id="2768696">v</span><span class="op" id="2768697">.</span><span class="ident" id="2768698">ptr</span><span class="op" id="2768701">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768705">base</span>&nbsp;<span class="op" id="2768710">=</span>&nbsp;<span class="ident" id="2768712">s</span><span class="op" id="2768713">.</span><span class="ident" id="2768714">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768721">cap</span>&nbsp;<span class="op" id="2768725">=</span>&nbsp;<span class="ident" id="2768727">s</span><span class="op" id="2768728">.</span><span class="ident" id="2768729">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768738">if</span>&nbsp;<span class="ident" id="2768741">i</span>&nbsp;<span class="op" id="2768743">&lt;</span>&nbsp;<span class="num" id="2768745">0</span>&nbsp;<span class="op" id="2768747">||</span>&nbsp;<span class="ident" id="2768750">j</span>&nbsp;<span class="op" id="2768752">&lt;</span>&nbsp;<span class="ident" id="2768754">i</span>&nbsp;<span class="op" id="2768756">||</span>&nbsp;<span class="ident" id="2768759">k</span>&nbsp;<span class="op" id="2768761">&lt;</span>&nbsp;<span class="ident" id="2768763">j</span>&nbsp;<span class="op" id="2768765">||</span>&nbsp;<span class="ident" id="2768768">k</span>&nbsp;<span class="op" id="2768770">&gt;</span>&nbsp;<span class="builtinfunc" id="2768772">cap</span>&nbsp;<span class="op" id="2768776">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768780">panic</span><span class="op" id="2768785">(</span><span class="string" id="2768786">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2768835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2768842">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2768890">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768926">var</span>&nbsp;<span class="ident" id="2768930">x</span>&nbsp;<span class="op" id="2768932">[</span><span class="op" id="2768933">]</span><span class="ident" id="2768934">unsafe</span><span class="op" id="2768940">.</span><span class="ident" id="2768941">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2768951">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768992">s</span>&nbsp;<span class="op" id="2768994">:=</span>&nbsp;<span class="op" id="2768997">(</span><span class="op" id="2768998">*</span><span class="ident" id="2768999">sliceHeader</span><span class="op" id="2769010">)</span><span class="op" id="2769011">(</span><span class="ident" id="2769012">unsafe</span><span class="op" id="2769018">.</span><span class="ident" id="2769019">Pointer</span><span class="op" id="2769026">(</span><span class="op" id="2769027">&amp;</span><span class="ident" id="2769028">x</span><span class="op" id="2769029">)</span><span class="op" id="2769030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769033">s</span><span class="op" id="2769034">.</span><span class="ident" id="2769035">Len</span>&nbsp;<span class="op" id="2769039">=</span>&nbsp;<span class="ident" id="2769041">j</span>&nbsp;<span class="op" id="2769043">-</span>&nbsp;<span class="ident" id="2769045">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769048">s</span><span class="op" id="2769049">.</span><span class="ident" id="2769050">Cap</span>&nbsp;<span class="op" id="2769054">=</span>&nbsp;<span class="ident" id="2769056">k</span>&nbsp;<span class="op" id="2769058">-</span>&nbsp;<span class="ident" id="2769060">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769063">if</span>&nbsp;<span class="ident" id="2769066">k</span><span class="op" id="2769067">-</span><span class="ident" id="2769068">i</span>&nbsp;<span class="op" id="2769070">&gt;</span>&nbsp;<span class="num" id="2769072">0</span>&nbsp;<span class="op" id="2769074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769078">s</span><span class="op" id="2769079">.</span><span class="ident" id="2769080">Data</span>&nbsp;<span class="op" id="2769085">=</span>&nbsp;<span class="ident" id="2769087">unsafe</span><span class="op" id="2769093">.</span><span class="ident" id="2769094">Pointer</span><span class="op" id="2769101">(</span><span class="builtintype" id="2769102">uintptr</span><span class="op" id="2769109">(</span><span class="ident" id="2769110">base</span><span class="op" id="2769114">)</span>&nbsp;<span class="op" id="2769116">+</span>&nbsp;<span class="builtintype" id="2769118">uintptr</span><span class="op" id="2769125">(</span><span class="ident" id="2769126">i</span><span class="op" id="2769127">)</span><span class="op" id="2769128">*</span><span class="ident" id="2769129">typ</span><span class="op" id="2769132">.</span><span class="ident" id="2769133">elem</span><span class="op" id="2769137">.</span><span class="ident" id="2769138">Size</span><span class="op" id="2769142">(</span><span class="op" id="2769143">)</span><span class="op" id="2769144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769147">}</span>&nbsp;<span class="keyword" id="2769149">else</span>&nbsp;<span class="op" id="2769154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769158">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769225">s</span><span class="op" id="2769226">.</span><span class="ident" id="2769227">Data</span>&nbsp;<span class="op" id="2769232">=</span>&nbsp;<span class="ident" id="2769234">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769244">fl</span>&nbsp;<span class="op" id="2769247">:=</span>&nbsp;<span class="ident" id="2769250">v</span><span class="op" id="2769251">.</span><span class="ident" id="2769252">flag</span><span class="op" id="2769256">&amp;</span><span class="ident" id="2769257">flagRO</span>&nbsp;<span class="op" id="2769264">|</span>&nbsp;<span class="ident" id="2769266">flagIndir</span>&nbsp;<span class="op" id="2769276">|</span>&nbsp;<span class="ident" id="2769278">flag</span><span class="op" id="2769282">(</span><span class="ident" id="2769283">Slice</span><span class="op" id="2769288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769291">return</span>&nbsp;<span class="ident" id="2769298">Value</span><span class="op" id="2769303">{</span><span class="ident" id="2769304">typ</span><span class="op" id="2769307">.</span><span class="ident" id="2769308">common</span><span class="op" id="2769314">(</span><span class="op" id="2769315">)</span><span class="op" id="2769316">,</span>&nbsp;<span class="ident" id="2769318">unsafe</span><span class="op" id="2769324">.</span><span class="ident" id="2769325">Pointer</span><span class="op" id="2769332">(</span><span class="op" id="2769333">&amp;</span><span class="ident" id="2769334">x</span><span class="op" id="2769335">)</span><span class="op" id="2769336">,</span>&nbsp;<span class="ident" id="2769338">fl</span><span class="op" id="2769340">}</span><br>
<span class="lineno">1590</span><span class="op" id="2769342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769345">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2769409">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2769479">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2769553">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2769630">func</span>&nbsp;<span class="op" id="2769635">(</span><span class="ident" id="2769636">v</span>&nbsp;<span class="ident" id="2769638">Value</span><span class="op" id="2769643">)</span>&nbsp;<span class="ident" id="2769645">String</span><span class="op" id="2769651">(</span><span class="op" id="2769652">)</span>&nbsp;<span class="builtintype" id="2769654">string</span>&nbsp;<span class="op" id="2769661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769664">switch</span>&nbsp;<span class="ident" id="2769671">k</span>&nbsp;<span class="op" id="2769673">:=</span>&nbsp;<span class="ident" id="2769676">v</span><span class="op" id="2769677">.</span><span class="ident" id="2769678">kind</span><span class="op" id="2769682">(</span><span class="op" id="2769683">)</span><span class="op" id="2769684">;</span>&nbsp;<span class="ident" id="2769686">k</span>&nbsp;<span class="op" id="2769688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769691">case</span>&nbsp;<span class="ident" id="2769696">Invalid</span><span class="op" id="2769703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769707">return</span>&nbsp;<span class="string" id="2769714">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769733">case</span>&nbsp;<span class="ident" id="2769738">String</span><span class="op" id="2769744">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769748">return</span>&nbsp;<span class="op" id="2769755">*</span><span class="op" id="2769756">(</span><span class="op" id="2769757">*</span><span class="builtintype" id="2769758">string</span><span class="op" id="2769764">)</span><span class="op" id="2769765">(</span><span class="ident" id="2769766">v</span><span class="op" id="2769767">.</span><span class="ident" id="2769768">ptr</span><span class="op" id="2769771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769777">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2769849">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769905">return</span>&nbsp;<span class="string" id="2769912">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2769916">+</span>&nbsp;<span class="ident" id="2769918">v</span><span class="op" id="2769919">.</span><span class="ident" id="2769920">Type</span><span class="op" id="2769924">(</span><span class="op" id="2769925">)</span><span class="op" id="2769926">.</span><span class="ident" id="2769927">String</span><span class="op" id="2769933">(</span><span class="op" id="2769934">)</span>&nbsp;<span class="op" id="2769936">+</span>&nbsp;<span class="string" id="2769938">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2769948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769951">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2770029">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2770067">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2770146">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2770233">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2770330">func</span>&nbsp;<span class="op" id="2770335">(</span><span class="ident" id="2770336">v</span>&nbsp;<span class="ident" id="2770338">Value</span><span class="op" id="2770343">)</span>&nbsp;<span class="ident" id="2770345">TryRecv</span><span class="op" id="2770352">(</span><span class="op" id="2770353">)</span>&nbsp;<span class="op" id="2770355">(</span><span class="ident" id="2770356">x</span>&nbsp;<span class="ident" id="2770358">Value</span><span class="op" id="2770363">,</span>&nbsp;<span class="ident" id="2770365">ok</span>&nbsp;<span class="builtintype" id="2770368">bool</span><span class="op" id="2770372">)</span>&nbsp;<span class="op" id="2770374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770377">v</span><span class="op" id="2770378">.</span><span class="ident" id="2770379">mustBe</span><span class="op" id="2770385">(</span><span class="ident" id="2770386">Chan</span><span class="op" id="2770390">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770393">v</span><span class="op" id="2770394">.</span><span class="ident" id="2770395">mustBeExported</span><span class="op" id="2770409">(</span><span class="op" id="2770410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770413">return</span>&nbsp;<span class="ident" id="2770420">v</span><span class="op" id="2770421">.</span><span class="ident" id="2770422">recv</span><span class="op" id="2770426">(</span><span class="builtintype" id="2770427">true</span><span class="op" id="2770431">)</span><br>
<span class="lineno"></span><span class="op" id="2770433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770436">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2770503">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2770541">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2770600">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2770673">func</span>&nbsp;<span class="op" id="2770678">(</span><span class="ident" id="2770679">v</span>&nbsp;<span class="ident" id="2770681">Value</span><span class="op" id="2770686">)</span>&nbsp;<span class="ident" id="2770688">TrySend</span><span class="op" id="2770695">(</span><span class="ident" id="2770696">x</span>&nbsp;<span class="ident" id="2770698">Value</span><span class="op" id="2770703">)</span>&nbsp;<span class="builtintype" id="2770705">bool</span>&nbsp;<span class="op" id="2770710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770713">v</span><span class="op" id="2770714">.</span><span class="ident" id="2770715">mustBe</span><span class="op" id="2770721">(</span><span class="ident" id="2770722">Chan</span><span class="op" id="2770726">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770729">v</span><span class="op" id="2770730">.</span><span class="ident" id="2770731">mustBeExported</span><span class="op" id="2770745">(</span><span class="op" id="2770746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770749">return</span>&nbsp;<span class="ident" id="2770756">v</span><span class="op" id="2770757">.</span><span class="ident" id="2770758">send</span><span class="op" id="2770762">(</span><span class="ident" id="2770763">x</span><span class="op" id="2770764">,</span>&nbsp;<span class="builtintype" id="2770766">true</span><span class="op" id="2770770">)</span><br>
<span class="lineno"></span><span class="op" id="2770772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770775">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2770801">func</span>&nbsp;<span class="op" id="2770806">(</span><span class="ident" id="2770807">v</span>&nbsp;<span class="ident" id="2770809">Value</span><span class="op" id="2770814">)</span>&nbsp;<span class="ident" id="2770816">Type</span><span class="op" id="2770820">(</span><span class="op" id="2770821">)</span>&nbsp;<span class="ident" id="2770823">Type</span>&nbsp;<span class="op" id="2770828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770831">f</span>&nbsp;<span class="op" id="2770833">:=</span>&nbsp;<span class="ident" id="2770836">v</span><span class="op" id="2770837">.</span><span class="ident" id="2770838">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770844">if</span>&nbsp;<span class="ident" id="2770847">f</span>&nbsp;<span class="op" id="2770849">==</span>&nbsp;<span class="num" id="2770852">0</span>&nbsp;<span class="op" id="2770854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2770858">panic</span><span class="op" id="2770863">(</span><span class="op" id="2770864">&amp;</span><span class="ident" id="2770865">ValueError</span><span class="op" id="2770875">{</span><span class="string" id="2770876">&#34;reflect.Value.Type&#34;</span><span class="op" id="2770896">,</span>&nbsp;<span class="ident" id="2770898">Invalid</span><span class="op" id="2770905">}</span><span class="op" id="2770906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770909">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770912">if</span>&nbsp;<span class="ident" id="2770915">f</span><span class="op" id="2770916">&amp;</span><span class="ident" id="2770917">flagMethod</span>&nbsp;<span class="op" id="2770928">==</span>&nbsp;<span class="num" id="2770931">0</span>&nbsp;<span class="op" id="2770933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770937">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770952">return</span>&nbsp;<span class="ident" id="2770959">v</span><span class="op" id="2770960">.</span><span class="ident" id="2770961">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770970">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770988">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771043">i</span>&nbsp;<span class="op" id="2771045">:=</span>&nbsp;<span class="builtintype" id="2771048">int</span><span class="op" id="2771051">(</span><span class="ident" id="2771052">v</span><span class="op" id="2771053">.</span><span class="ident" id="2771054">flag</span><span class="op" id="2771058">)</span>&nbsp;<span class="op" id="2771060">&gt;&gt;</span>&nbsp;<span class="ident" id="2771063">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771080">if</span>&nbsp;<span class="ident" id="2771083">v</span><span class="op" id="2771084">.</span><span class="ident" id="2771085">typ</span><span class="op" id="2771088">.</span><span class="ident" id="2771089">Kind</span><span class="op" id="2771093">(</span><span class="op" id="2771094">)</span>&nbsp;<span class="op" id="2771096">==</span>&nbsp;<span class="ident" id="2771099">Interface</span>&nbsp;<span class="op" id="2771109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2771113">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771139">tt</span>&nbsp;<span class="op" id="2771142">:=</span>&nbsp;<span class="op" id="2771145">(</span><span class="op" id="2771146">*</span><span class="ident" id="2771147">interfaceType</span><span class="op" id="2771160">)</span><span class="op" id="2771161">(</span><span class="ident" id="2771162">unsafe</span><span class="op" id="2771168">.</span><span class="ident" id="2771169">Pointer</span><span class="op" id="2771176">(</span><span class="ident" id="2771177">v</span><span class="op" id="2771178">.</span><span class="ident" id="2771179">typ</span><span class="op" id="2771182">)</span><span class="op" id="2771183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771187">if</span>&nbsp;<span class="builtintype" id="2771190">uint</span><span class="op" id="2771194">(</span><span class="ident" id="2771195">i</span><span class="op" id="2771196">)</span>&nbsp;<span class="op" id="2771198">&gt;=</span>&nbsp;<span class="builtintype" id="2771201">uint</span><span class="op" id="2771205">(</span><span class="builtinfunc" id="2771206">len</span><span class="op" id="2771209">(</span><span class="ident" id="2771210">tt</span><span class="op" id="2771212">.</span><span class="ident" id="2771213">methods</span><span class="op" id="2771220">)</span><span class="op" id="2771221">)</span>&nbsp;<span class="op" id="2771223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2771228">panic</span><span class="op" id="2771233">(</span><span class="string" id="2771234">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2771281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2771285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771289">m</span>&nbsp;<span class="op" id="2771291">:=</span>&nbsp;<span class="op" id="2771294">&amp;</span><span class="ident" id="2771295">tt</span><span class="op" id="2771297">.</span><span class="ident" id="2771298">methods</span><span class="op" id="2771305">[</span><span class="ident" id="2771306">i</span><span class="op" id="2771307">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771311">return</span>&nbsp;<span class="ident" id="2771318">m</span><span class="op" id="2771319">.</span><span class="ident" id="2771320">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2771325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2771328">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771357">ut</span>&nbsp;<span class="op" id="2771360">:=</span>&nbsp;<span class="ident" id="2771363">v</span><span class="op" id="2771364">.</span><span class="ident" id="2771365">typ</span><span class="op" id="2771368">.</span><span class="ident" id="2771369">uncommon</span><span class="op" id="2771377">(</span><span class="op" id="2771378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771381">if</span>&nbsp;<span class="ident" id="2771384">ut</span>&nbsp;<span class="op" id="2771387">==</span>&nbsp;<span class="ident" id="2771390">nil</span>&nbsp;<span class="op" id="2771394">||</span>&nbsp;<span class="builtintype" id="2771397">uint</span><span class="op" id="2771401">(</span><span class="ident" id="2771402">i</span><span class="op" id="2771403">)</span>&nbsp;<span class="op" id="2771405">&gt;=</span>&nbsp;<span class="builtintype" id="2771408">uint</span><span class="op" id="2771412">(</span><span class="builtinfunc" id="2771413">len</span><span class="op" id="2771416">(</span><span class="ident" id="2771417">ut</span><span class="op" id="2771419">.</span><span class="ident" id="2771420">methods</span><span class="op" id="2771427">)</span><span class="op" id="2771428">)</span>&nbsp;<span class="op" id="2771430">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2771434">panic</span><span class="op" id="2771439">(</span><span class="string" id="2771440">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2771487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2771490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771493">m</span>&nbsp;<span class="op" id="2771495">:=</span>&nbsp;<span class="op" id="2771498">&amp;</span><span class="ident" id="2771499">ut</span><span class="op" id="2771501">.</span><span class="ident" id="2771502">methods</span><span class="op" id="2771509">[</span><span class="ident" id="2771510">i</span><span class="op" id="2771511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771514">return</span>&nbsp;<span class="ident" id="2771521">m</span><span class="op" id="2771522">.</span><span class="ident" id="2771523">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2771528">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2771531">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2771582">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2771663">func</span>&nbsp;<span class="op" id="2771668">(</span><span class="ident" id="2771669">v</span>&nbsp;<span class="ident" id="2771671">Value</span><span class="op" id="2771676">)</span>&nbsp;<span class="ident" id="2771678">Uint</span><span class="op" id="2771682">(</span><span class="op" id="2771683">)</span>&nbsp;<span class="ident" id="2771685">uint64</span>&nbsp;<span class="op" id="2771692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771695">k</span>&nbsp;<span class="op" id="2771697">:=</span>&nbsp;<span class="ident" id="2771700">v</span><span class="op" id="2771701">.</span><span class="ident" id="2771702">kind</span><span class="op" id="2771706">(</span><span class="op" id="2771707">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771710">p</span>&nbsp;<span class="op" id="2771712">:=</span>&nbsp;<span class="ident" id="2771715">v</span><span class="op" id="2771716">.</span><span class="ident" id="2771717">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771722">switch</span>&nbsp;<span class="ident" id="2771729">k</span>&nbsp;<span class="op" id="2771731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771734">case</span>&nbsp;<span class="ident" id="2771739">Uint</span><span class="op" id="2771743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771747">return</span>&nbsp;<span class="ident" id="2771754">uint64</span><span class="op" id="2771760">(</span><span class="op" id="2771761">*</span><span class="op" id="2771762">(</span><span class="op" id="2771763">*</span><span class="builtintype" id="2771764">uint</span><span class="op" id="2771768">)</span><span class="op" id="2771769">(</span><span class="ident" id="2771770">p</span><span class="op" id="2771771">)</span><span class="op" id="2771772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771775">case</span>&nbsp;<span class="ident" id="2771780">Uint8</span><span class="op" id="2771785">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771789">return</span>&nbsp;<span class="ident" id="2771796">uint64</span><span class="op" id="2771802">(</span><span class="op" id="2771803">*</span><span class="op" id="2771804">(</span><span class="op" id="2771805">*</span><span class="builtintype" id="2771806">uint8</span><span class="op" id="2771811">)</span><span class="op" id="2771812">(</span><span class="ident" id="2771813">p</span><span class="op" id="2771814">)</span><span class="op" id="2771815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771818">case</span>&nbsp;<span class="ident" id="2771823">Uint16</span><span class="op" id="2771829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771833">return</span>&nbsp;<span class="ident" id="2771840">uint64</span><span class="op" id="2771846">(</span><span class="op" id="2771847">*</span><span class="op" id="2771848">(</span><span class="op" id="2771849">*</span><span class="builtintype" id="2771850">uint16</span><span class="op" id="2771856">)</span><span class="op" id="2771857">(</span><span class="ident" id="2771858">p</span><span class="op" id="2771859">)</span><span class="op" id="2771860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771863">case</span>&nbsp;<span class="ident" id="2771868">Uint32</span><span class="op" id="2771874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771878">return</span>&nbsp;<span class="ident" id="2771885">uint64</span><span class="op" id="2771891">(</span><span class="op" id="2771892">*</span><span class="op" id="2771893">(</span><span class="op" id="2771894">*</span><span class="builtintype" id="2771895">uint32</span><span class="op" id="2771901">)</span><span class="op" id="2771902">(</span><span class="ident" id="2771903">p</span><span class="op" id="2771904">)</span><span class="op" id="2771905">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771908">case</span>&nbsp;<span class="ident" id="2771913">Uint64</span><span class="op" id="2771919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771923">return</span>&nbsp;<span class="ident" id="2771930">uint64</span><span class="op" id="2771936">(</span><span class="op" id="2771937">*</span><span class="op" id="2771938">(</span><span class="op" id="2771939">*</span><span class="ident" id="2771940">uint64</span><span class="op" id="2771946">)</span><span class="op" id="2771947">(</span><span class="ident" id="2771948">p</span><span class="op" id="2771949">)</span><span class="op" id="2771950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771953">case</span>&nbsp;<span class="ident" id="2771958">Uintptr</span><span class="op" id="2771965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2771969">return</span>&nbsp;<span class="ident" id="2771976">uint64</span><span class="op" id="2771982">(</span><span class="op" id="2771983">*</span><span class="op" id="2771984">(</span><span class="op" id="2771985">*</span><span class="builtintype" id="2771986">uintptr</span><span class="op" id="2771993">)</span><span class="op" id="2771994">(</span><span class="ident" id="2771995">p</span><span class="op" id="2771996">)</span><span class="op" id="2771997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772000">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772003">panic</span><span class="op" id="2772008">(</span><span class="op" id="2772009">&amp;</span><span class="ident" id="2772010">ValueError</span><span class="op" id="2772020">{</span><span class="string" id="2772021">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2772041">,</span>&nbsp;<span class="ident" id="2772043">v</span><span class="op" id="2772044">.</span><span class="ident" id="2772045">kind</span><span class="op" id="2772049">(</span><span class="op" id="2772050">)</span><span class="op" id="2772051">}</span><span class="op" id="2772052">)</span><br>
<span class="lineno"></span><span class="op" id="2772054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772057">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2772102">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2772171">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2772209">func</span>&nbsp;<span class="op" id="2772214">(</span><span class="ident" id="2772215">v</span>&nbsp;<span class="ident" id="2772217">Value</span><span class="op" id="2772222">)</span>&nbsp;<span class="ident" id="2772224">UnsafeAddr</span><span class="op" id="2772234">(</span><span class="op" id="2772235">)</span>&nbsp;<span class="builtintype" id="2772237">uintptr</span>&nbsp;<span class="op" id="2772245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2772248">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772268">if</span>&nbsp;<span class="ident" id="2772271">v</span><span class="op" id="2772272">.</span><span class="ident" id="2772273">typ</span>&nbsp;<span class="op" id="2772277">==</span>&nbsp;<span class="ident" id="2772280">nil</span>&nbsp;<span class="op" id="2772284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772288">panic</span><span class="op" id="2772293">(</span><span class="op" id="2772294">&amp;</span><span class="ident" id="2772295">ValueError</span><span class="op" id="2772305">{</span><span class="string" id="2772306">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2772332">,</span>&nbsp;<span class="ident" id="2772334">Invalid</span><span class="op" id="2772341">}</span><span class="op" id="2772342">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772348">if</span>&nbsp;<span class="ident" id="2772351">v</span><span class="op" id="2772352">.</span><span class="ident" id="2772353">flag</span><span class="op" id="2772357">&amp;</span><span class="ident" id="2772358">flagAddr</span>&nbsp;<span class="op" id="2772367">==</span>&nbsp;<span class="num" id="2772370">0</span>&nbsp;<span class="op" id="2772372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2772376">panic</span><span class="op" id="2772381">(</span><span class="string" id="2772382">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2772431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2772434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2772437">return</span>&nbsp;<span class="builtintype" id="2772444">uintptr</span><span class="op" id="2772451">(</span><span class="ident" id="2772452">v</span><span class="op" id="2772453">.</span><span class="ident" id="2772454">ptr</span><span class="op" id="2772457">)</span><br>
<span class="lineno">1695</span><span class="op" id="2772459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772462">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2772521">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2772588">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2772618">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2772686">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2772756">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2772819">type</span>&nbsp;<span class="ident" id="2772824">StringHeader</span>&nbsp;<span class="keyword" id="2772837">struct</span>&nbsp;<span class="op" id="2772844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772847">Data</span>&nbsp;<span class="builtintype" id="2772852">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772861">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2772866">int</span><br>
<span class="lineno"></span><span class="op" id="2772870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772873">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2772949">type</span>&nbsp;<span class="ident" id="2772954">stringHeader</span>&nbsp;<span class="keyword" id="2772967">struct</span>&nbsp;<span class="op" id="2772974">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772977">Data</span>&nbsp;<span class="ident" id="2772982">unsafe</span><span class="op" id="2772988">.</span><span class="ident" id="2772989">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772998">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2773003">int</span><br>
<span class="lineno"></span><span class="op" id="2773007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773010">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2773067">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2773134">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2773164">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2773232">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2773302">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2773365">type</span>&nbsp;<span class="ident" id="2773370">SliceHeader</span>&nbsp;<span class="keyword" id="2773382">struct</span>&nbsp;<span class="op" id="2773389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773392">Data</span>&nbsp;<span class="builtintype" id="2773397">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773406">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2773411">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773416">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2773421">int</span><br>
<span class="lineno"></span><span class="op" id="2773425">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2773428">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2773502">type</span>&nbsp;<span class="ident" id="2773507">sliceHeader</span>&nbsp;<span class="keyword" id="2773519">struct</span>&nbsp;<span class="op" id="2773526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773529">Data</span>&nbsp;<span class="ident" id="2773534">unsafe</span><span class="op" id="2773540">.</span><span class="ident" id="2773541">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773550">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2773555">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773560">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2773565">int</span><br>
<span class="lineno"></span><span class="op" id="2773569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2773572">func</span>&nbsp;<span class="ident" id="2773577">typesMustMatch</span><span class="op" id="2773591">(</span><span class="ident" id="2773592">what</span>&nbsp;<span class="builtintype" id="2773597">string</span><span class="op" id="2773603">,</span>&nbsp;<span class="ident" id="2773605">t1</span><span class="op" id="2773607">,</span>&nbsp;<span class="ident" id="2773609">t2</span>&nbsp;<span class="ident" id="2773612">Type</span><span class="op" id="2773616">)</span>&nbsp;<span class="op" id="2773618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773621">if</span>&nbsp;<span class="ident" id="2773624">t1</span>&nbsp;<span class="op" id="2773627">!=</span>&nbsp;<span class="ident" id="2773630">t2</span>&nbsp;<span class="op" id="2773633">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773637">panic</span><span class="op" id="2773642">(</span><span class="ident" id="2773643">what</span>&nbsp;<span class="op" id="2773648">+</span>&nbsp;<span class="string" id="2773650">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2773655">+</span>&nbsp;<span class="ident" id="2773657">t1</span><span class="op" id="2773659">.</span><span class="ident" id="2773660">String</span><span class="op" id="2773666">(</span><span class="op" id="2773667">)</span>&nbsp;<span class="op" id="2773669">+</span>&nbsp;<span class="string" id="2773671">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2773678">+</span>&nbsp;<span class="ident" id="2773680">t2</span><span class="op" id="2773682">.</span><span class="ident" id="2773683">String</span><span class="op" id="2773689">(</span><span class="op" id="2773690">)</span><span class="op" id="2773691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773694">}</span><br>
<span class="lineno"></span><span class="op" id="2773696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773699">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2773775">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2773850">func</span>&nbsp;<span class="ident" id="2773855">grow</span><span class="op" id="2773859">(</span><span class="ident" id="2773860">s</span>&nbsp;<span class="ident" id="2773862">Value</span><span class="op" id="2773867">,</span>&nbsp;<span class="ident" id="2773869">extra</span>&nbsp;<span class="builtintype" id="2773875">int</span><span class="op" id="2773878">)</span>&nbsp;<span class="op" id="2773880">(</span><span class="ident" id="2773881">Value</span><span class="op" id="2773886">,</span>&nbsp;<span class="builtintype" id="2773888">int</span><span class="op" id="2773891">,</span>&nbsp;<span class="builtintype" id="2773893">int</span><span class="op" id="2773896">)</span>&nbsp;<span class="op" id="2773898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773901">i0</span>&nbsp;<span class="op" id="2773904">:=</span>&nbsp;<span class="ident" id="2773907">s</span><span class="op" id="2773908">.</span><span class="ident" id="2773909">Len</span><span class="op" id="2773912">(</span><span class="op" id="2773913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773916">i1</span>&nbsp;<span class="op" id="2773919">:=</span>&nbsp;<span class="ident" id="2773922">i0</span>&nbsp;<span class="op" id="2773925">+</span>&nbsp;<span class="ident" id="2773927">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773934">if</span>&nbsp;<span class="ident" id="2773937">i1</span>&nbsp;<span class="op" id="2773940">&lt;</span>&nbsp;<span class="ident" id="2773942">i0</span>&nbsp;<span class="op" id="2773945">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773949">panic</span><span class="op" id="2773954">(</span><span class="string" id="2773955">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2773987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773993">m</span>&nbsp;<span class="op" id="2773995">:=</span>&nbsp;<span class="ident" id="2773998">s</span><span class="op" id="2773999">.</span><span class="ident" id="2774000">Cap</span><span class="op" id="2774003">(</span><span class="op" id="2774004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774007">if</span>&nbsp;<span class="ident" id="2774010">i1</span>&nbsp;<span class="op" id="2774013">&lt;=</span>&nbsp;<span class="ident" id="2774016">m</span>&nbsp;<span class="op" id="2774018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774022">return</span>&nbsp;<span class="ident" id="2774029">s</span><span class="op" id="2774030">.</span><span class="ident" id="2774031">Slice</span><span class="op" id="2774036">(</span><span class="num" id="2774037">0</span><span class="op" id="2774038">,</span>&nbsp;<span class="ident" id="2774040">i1</span><span class="op" id="2774042">)</span><span class="op" id="2774043">,</span>&nbsp;<span class="ident" id="2774045">i0</span><span class="op" id="2774047">,</span>&nbsp;<span class="ident" id="2774049">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774056">if</span>&nbsp;<span class="ident" id="2774059">m</span>&nbsp;<span class="op" id="2774061">==</span>&nbsp;<span class="num" id="2774064">0</span>&nbsp;<span class="op" id="2774066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774070">m</span>&nbsp;<span class="op" id="2774072">=</span>&nbsp;<span class="ident" id="2774074">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774081">}</span>&nbsp;<span class="keyword" id="2774083">else</span>&nbsp;<span class="op" id="2774088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774092">for</span>&nbsp;<span class="ident" id="2774096">m</span>&nbsp;<span class="op" id="2774098">&lt;</span>&nbsp;<span class="ident" id="2774100">i1</span>&nbsp;<span class="op" id="2774103">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774108">if</span>&nbsp;<span class="ident" id="2774111">i0</span>&nbsp;<span class="op" id="2774114">&lt;</span>&nbsp;<span class="num" id="2774116">1024</span>&nbsp;<span class="op" id="2774121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774127">m</span>&nbsp;<span class="op" id="2774129">+=</span>&nbsp;<span class="ident" id="2774132">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774137">}</span>&nbsp;<span class="keyword" id="2774139">else</span>&nbsp;<span class="op" id="2774144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774150">m</span>&nbsp;<span class="op" id="2774152">+=</span>&nbsp;<span class="ident" id="2774155">m</span>&nbsp;<span class="op" id="2774157">/</span>&nbsp;<span class="num" id="2774159">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774164">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774174">t</span>&nbsp;<span class="op" id="2774176">:=</span>&nbsp;<span class="ident" id="2774179">MakeSlice</span><span class="op" id="2774188">(</span><span class="ident" id="2774189">s</span><span class="op" id="2774190">.</span><span class="ident" id="2774191">Type</span><span class="op" id="2774195">(</span><span class="op" id="2774196">)</span><span class="op" id="2774197">,</span>&nbsp;<span class="ident" id="2774199">i1</span><span class="op" id="2774201">,</span>&nbsp;<span class="ident" id="2774203">m</span><span class="op" id="2774204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774207">Copy</span><span class="op" id="2774211">(</span><span class="ident" id="2774212">t</span><span class="op" id="2774213">,</span>&nbsp;<span class="ident" id="2774215">s</span><span class="op" id="2774216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774219">return</span>&nbsp;<span class="ident" id="2774226">t</span><span class="op" id="2774227">,</span>&nbsp;<span class="ident" id="2774229">i0</span><span class="op" id="2774231">,</span>&nbsp;<span class="ident" id="2774233">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2774236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774239">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2774316">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2774392">func</span>&nbsp;<span class="ident" id="2774397">Append</span><span class="op" id="2774403">(</span><span class="ident" id="2774404">s</span>&nbsp;<span class="ident" id="2774406">Value</span><span class="op" id="2774411">,</span>&nbsp;<span class="ident" id="2774413">x</span>&nbsp;<span class="op" id="2774415">...</span><span class="ident" id="2774418">Value</span><span class="op" id="2774423">)</span>&nbsp;<span class="ident" id="2774425">Value</span>&nbsp;<span class="op" id="2774431">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774434">s</span><span class="op" id="2774435">.</span><span class="ident" id="2774436">mustBe</span><span class="op" id="2774442">(</span><span class="ident" id="2774443">Slice</span><span class="op" id="2774448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774451">s</span><span class="op" id="2774452">,</span>&nbsp;<span class="ident" id="2774454">i0</span><span class="op" id="2774456">,</span>&nbsp;<span class="ident" id="2774458">i1</span>&nbsp;<span class="op" id="2774461">:=</span>&nbsp;<span class="ident" id="2774464">grow</span><span class="op" id="2774468">(</span><span class="ident" id="2774469">s</span><span class="op" id="2774470">,</span>&nbsp;<span class="builtinfunc" id="2774472">len</span><span class="op" id="2774475">(</span><span class="ident" id="2774476">x</span><span class="op" id="2774477">)</span><span class="op" id="2774478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774481">for</span>&nbsp;<span class="ident" id="2774485">i</span><span class="op" id="2774486">,</span>&nbsp;<span class="ident" id="2774488">j</span>&nbsp;<span class="op" id="2774490">:=</span>&nbsp;<span class="ident" id="2774493">i0</span><span class="op" id="2774495">,</span>&nbsp;<span class="num" id="2774497">0</span><span class="op" id="2774498">;</span>&nbsp;<span class="ident" id="2774500">i</span>&nbsp;<span class="op" id="2774502">&lt;</span>&nbsp;<span class="ident" id="2774504">i1</span><span class="op" id="2774506">;</span>&nbsp;<span class="ident" id="2774508">i</span><span class="op" id="2774509">,</span>&nbsp;<span class="ident" id="2774511">j</span>&nbsp;<span class="op" id="2774513">=</span>&nbsp;<span class="ident" id="2774515">i</span><span class="op" id="2774516">+</span><span class="num" id="2774517">1</span><span class="op" id="2774518">,</span>&nbsp;<span class="ident" id="2774520">j</span><span class="op" id="2774521">+</span><span class="num" id="2774522">1</span>&nbsp;<span class="op" id="2774524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774528">s</span><span class="op" id="2774529">.</span><span class="ident" id="2774530">Index</span><span class="op" id="2774535">(</span><span class="ident" id="2774536">i</span><span class="op" id="2774537">)</span><span class="op" id="2774538">.</span><span class="ident" id="2774539">Set</span><span class="op" id="2774542">(</span><span class="ident" id="2774543">x</span><span class="op" id="2774544">[</span><span class="ident" id="2774545">j</span><span class="op" id="2774546">]</span><span class="op" id="2774547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774550">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774553">return</span>&nbsp;<span class="ident" id="2774560">s</span><br>
<span class="lineno"></span><span class="op" id="2774562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774565">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2774644">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2774699">func</span>&nbsp;<span class="ident" id="2774704">AppendSlice</span><span class="op" id="2774715">(</span><span class="ident" id="2774716">s</span><span class="op" id="2774717">,</span>&nbsp;<span class="ident" id="2774719">t</span>&nbsp;<span class="ident" id="2774721">Value</span><span class="op" id="2774726">)</span>&nbsp;<span class="ident" id="2774728">Value</span>&nbsp;<span class="op" id="2774734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774737">s</span><span class="op" id="2774738">.</span><span class="ident" id="2774739">mustBe</span><span class="op" id="2774745">(</span><span class="ident" id="2774746">Slice</span><span class="op" id="2774751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774754">t</span><span class="op" id="2774755">.</span><span class="ident" id="2774756">mustBe</span><span class="op" id="2774762">(</span><span class="ident" id="2774763">Slice</span><span class="op" id="2774768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774771">typesMustMatch</span><span class="op" id="2774785">(</span><span class="string" id="2774786">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2774807">,</span>&nbsp;<span class="ident" id="2774809">s</span><span class="op" id="2774810">.</span><span class="ident" id="2774811">Type</span><span class="op" id="2774815">(</span><span class="op" id="2774816">)</span><span class="op" id="2774817">.</span><span class="ident" id="2774818">Elem</span><span class="op" id="2774822">(</span><span class="op" id="2774823">)</span><span class="op" id="2774824">,</span>&nbsp;<span class="ident" id="2774826">t</span><span class="op" id="2774827">.</span><span class="ident" id="2774828">Type</span><span class="op" id="2774832">(</span><span class="op" id="2774833">)</span><span class="op" id="2774834">.</span><span class="ident" id="2774835">Elem</span><span class="op" id="2774839">(</span><span class="op" id="2774840">)</span><span class="op" id="2774841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774844">s</span><span class="op" id="2774845">,</span>&nbsp;<span class="ident" id="2774847">i0</span><span class="op" id="2774849">,</span>&nbsp;<span class="ident" id="2774851">i1</span>&nbsp;<span class="op" id="2774854">:=</span>&nbsp;<span class="ident" id="2774857">grow</span><span class="op" id="2774861">(</span><span class="ident" id="2774862">s</span><span class="op" id="2774863">,</span>&nbsp;<span class="ident" id="2774865">t</span><span class="op" id="2774866">.</span><span class="ident" id="2774867">Len</span><span class="op" id="2774870">(</span><span class="op" id="2774871">)</span><span class="op" id="2774872">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774875">Copy</span><span class="op" id="2774879">(</span><span class="ident" id="2774880">s</span><span class="op" id="2774881">.</span><span class="ident" id="2774882">Slice</span><span class="op" id="2774887">(</span><span class="ident" id="2774888">i0</span><span class="op" id="2774890">,</span>&nbsp;<span class="ident" id="2774892">i1</span><span class="op" id="2774894">)</span><span class="op" id="2774895">,</span>&nbsp;<span class="ident" id="2774897">t</span><span class="op" id="2774898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774901">return</span>&nbsp;<span class="ident" id="2774908">s</span><br>
<span class="lineno"></span><span class="op" id="2774910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774913">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2774970">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2775020">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2775065">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2775120">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2775168">func</span>&nbsp;<span class="ident" id="2775173">Copy</span><span class="op" id="2775177">(</span><span class="ident" id="2775178">dst</span><span class="op" id="2775181">,</span>&nbsp;<span class="ident" id="2775183">src</span>&nbsp;<span class="ident" id="2775187">Value</span><span class="op" id="2775192">)</span>&nbsp;<span class="builtintype" id="2775194">int</span>&nbsp;<span class="op" id="2775198">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775201">dk</span>&nbsp;<span class="op" id="2775204">:=</span>&nbsp;<span class="ident" id="2775207">dst</span><span class="op" id="2775210">.</span><span class="ident" id="2775211">kind</span><span class="op" id="2775215">(</span><span class="op" id="2775216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775219">if</span>&nbsp;<span class="ident" id="2775222">dk</span>&nbsp;<span class="op" id="2775225">!=</span>&nbsp;<span class="ident" id="2775228">Array</span>&nbsp;<span class="op" id="2775234">&amp;&amp;</span>&nbsp;<span class="ident" id="2775237">dk</span>&nbsp;<span class="op" id="2775240">!=</span>&nbsp;<span class="ident" id="2775243">Slice</span>&nbsp;<span class="op" id="2775249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775253">panic</span><span class="op" id="2775258">(</span><span class="op" id="2775259">&amp;</span><span class="ident" id="2775260">ValueError</span><span class="op" id="2775270">{</span><span class="string" id="2775271">&#34;reflect.Copy&#34;</span><span class="op" id="2775285">,</span>&nbsp;<span class="ident" id="2775287">dk</span><span class="op" id="2775289">}</span><span class="op" id="2775290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775296">if</span>&nbsp;<span class="ident" id="2775299">dk</span>&nbsp;<span class="op" id="2775302">==</span>&nbsp;<span class="ident" id="2775305">Array</span>&nbsp;<span class="op" id="2775311">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775315">dst</span><span class="op" id="2775318">.</span><span class="ident" id="2775319">mustBeAssignable</span><span class="op" id="2775335">(</span><span class="op" id="2775336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775342">dst</span><span class="op" id="2775345">.</span><span class="ident" id="2775346">mustBeExported</span><span class="op" id="2775360">(</span><span class="op" id="2775361">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775365">sk</span>&nbsp;<span class="op" id="2775368">:=</span>&nbsp;<span class="ident" id="2775371">src</span><span class="op" id="2775374">.</span><span class="ident" id="2775375">kind</span><span class="op" id="2775379">(</span><span class="op" id="2775380">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775383">if</span>&nbsp;<span class="ident" id="2775386">sk</span>&nbsp;<span class="op" id="2775389">!=</span>&nbsp;<span class="ident" id="2775392">Array</span>&nbsp;<span class="op" id="2775398">&amp;&amp;</span>&nbsp;<span class="ident" id="2775401">sk</span>&nbsp;<span class="op" id="2775404">!=</span>&nbsp;<span class="ident" id="2775407">Slice</span>&nbsp;<span class="op" id="2775413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775417">panic</span><span class="op" id="2775422">(</span><span class="op" id="2775423">&amp;</span><span class="ident" id="2775424">ValueError</span><span class="op" id="2775434">{</span><span class="string" id="2775435">&#34;reflect.Copy&#34;</span><span class="op" id="2775449">,</span>&nbsp;<span class="ident" id="2775451">sk</span><span class="op" id="2775453">}</span><span class="op" id="2775454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775460">src</span><span class="op" id="2775463">.</span><span class="ident" id="2775464">mustBeExported</span><span class="op" id="2775478">(</span><span class="op" id="2775479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775483">de</span>&nbsp;<span class="op" id="2775486">:=</span>&nbsp;<span class="ident" id="2775489">dst</span><span class="op" id="2775492">.</span><span class="ident" id="2775493">typ</span><span class="op" id="2775496">.</span><span class="ident" id="2775497">Elem</span><span class="op" id="2775501">(</span><span class="op" id="2775502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775505">se</span>&nbsp;<span class="op" id="2775508">:=</span>&nbsp;<span class="ident" id="2775511">src</span><span class="op" id="2775514">.</span><span class="ident" id="2775515">typ</span><span class="op" id="2775518">.</span><span class="ident" id="2775519">Elem</span><span class="op" id="2775523">(</span><span class="op" id="2775524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775527">typesMustMatch</span><span class="op" id="2775541">(</span><span class="string" id="2775542">&#34;reflect.Copy&#34;</span><span class="op" id="2775556">,</span>&nbsp;<span class="ident" id="2775558">de</span><span class="op" id="2775560">,</span>&nbsp;<span class="ident" id="2775562">se</span><span class="op" id="2775564">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775568">n</span>&nbsp;<span class="op" id="2775570">:=</span>&nbsp;<span class="ident" id="2775573">dst</span><span class="op" id="2775576">.</span><span class="ident" id="2775577">Len</span><span class="op" id="2775580">(</span><span class="op" id="2775581">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775584">if</span>&nbsp;<span class="ident" id="2775587">sn</span>&nbsp;<span class="op" id="2775590">:=</span>&nbsp;<span class="ident" id="2775593">src</span><span class="op" id="2775596">.</span><span class="ident" id="2775597">Len</span><span class="op" id="2775600">(</span><span class="op" id="2775601">)</span><span class="op" id="2775602">;</span>&nbsp;<span class="ident" id="2775604">n</span>&nbsp;<span class="op" id="2775606">&gt;</span>&nbsp;<span class="ident" id="2775608">sn</span>&nbsp;<span class="op" id="2775611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775615">n</span>&nbsp;<span class="op" id="2775617">=</span>&nbsp;<span class="ident" id="2775619">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2775627">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775649">var</span>&nbsp;<span class="ident" id="2775653">da</span><span class="op" id="2775655">,</span>&nbsp;<span class="ident" id="2775657">sa</span>&nbsp;<span class="ident" id="2775660">unsafe</span><span class="op" id="2775666">.</span><span class="ident" id="2775667">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775676">if</span>&nbsp;<span class="ident" id="2775679">dk</span>&nbsp;<span class="op" id="2775682">==</span>&nbsp;<span class="ident" id="2775685">Array</span>&nbsp;<span class="op" id="2775691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775695">da</span>&nbsp;<span class="op" id="2775698">=</span>&nbsp;<span class="ident" id="2775700">dst</span><span class="op" id="2775703">.</span><span class="ident" id="2775704">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775709">}</span>&nbsp;<span class="keyword" id="2775711">else</span>&nbsp;<span class="op" id="2775716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775720">da</span>&nbsp;<span class="op" id="2775723">=</span>&nbsp;<span class="op" id="2775725">(</span><span class="op" id="2775726">*</span><span class="ident" id="2775727">sliceHeader</span><span class="op" id="2775738">)</span><span class="op" id="2775739">(</span><span class="ident" id="2775740">dst</span><span class="op" id="2775743">.</span><span class="ident" id="2775744">ptr</span><span class="op" id="2775747">)</span><span class="op" id="2775748">.</span><span class="ident" id="2775749">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775758">if</span>&nbsp;<span class="ident" id="2775761">src</span><span class="op" id="2775764">.</span><span class="ident" id="2775765">flag</span><span class="op" id="2775769">&amp;</span><span class="ident" id="2775770">flagIndir</span>&nbsp;<span class="op" id="2775780">==</span>&nbsp;<span class="num" id="2775783">0</span>&nbsp;<span class="op" id="2775785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775789">sa</span>&nbsp;<span class="op" id="2775792">=</span>&nbsp;<span class="ident" id="2775794">unsafe</span><span class="op" id="2775800">.</span><span class="ident" id="2775801">Pointer</span><span class="op" id="2775808">(</span><span class="op" id="2775809">&amp;</span><span class="ident" id="2775810">src</span><span class="op" id="2775813">.</span><span class="ident" id="2775814">ptr</span><span class="op" id="2775817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775820">}</span>&nbsp;<span class="keyword" id="2775822">else</span>&nbsp;<span class="keyword" id="2775827">if</span>&nbsp;<span class="ident" id="2775830">sk</span>&nbsp;<span class="op" id="2775833">==</span>&nbsp;<span class="ident" id="2775836">Array</span>&nbsp;<span class="op" id="2775842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775846">sa</span>&nbsp;<span class="op" id="2775849">=</span>&nbsp;<span class="ident" id="2775851">src</span><span class="op" id="2775854">.</span><span class="ident" id="2775855">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775860">}</span>&nbsp;<span class="keyword" id="2775862">else</span>&nbsp;<span class="op" id="2775867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775871">sa</span>&nbsp;<span class="op" id="2775874">=</span>&nbsp;<span class="op" id="2775876">(</span><span class="op" id="2775877">*</span><span class="ident" id="2775878">sliceHeader</span><span class="op" id="2775889">)</span><span class="op" id="2775890">(</span><span class="ident" id="2775891">src</span><span class="op" id="2775894">.</span><span class="ident" id="2775895">ptr</span><span class="op" id="2775898">)</span><span class="op" id="2775899">.</span><span class="ident" id="2775900">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775909">memmove</span><span class="op" id="2775916">(</span><span class="ident" id="2775917">da</span><span class="op" id="2775919">,</span>&nbsp;<span class="ident" id="2775921">sa</span><span class="op" id="2775923">,</span>&nbsp;<span class="builtintype" id="2775925">uintptr</span><span class="op" id="2775932">(</span><span class="ident" id="2775933">n</span><span class="op" id="2775934">)</span><span class="op" id="2775935">*</span><span class="ident" id="2775936">de</span><span class="op" id="2775938">.</span><span class="ident" id="2775939">Size</span><span class="op" id="2775943">(</span><span class="op" id="2775944">)</span><span class="op" id="2775945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775948">return</span>&nbsp;<span class="ident" id="2775955">n</span><br>
<span class="lineno">1835</span><span class="op" id="2775957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775960">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2776015">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2776070">type</span>&nbsp;<span class="ident" id="2776075">runtimeSelect</span>&nbsp;<span class="keyword" id="2776089">struct</span>&nbsp;<span class="op" id="2776096">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776099">dir</span>&nbsp;<span class="builtintype" id="2776103">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776118">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776145">typ</span>&nbsp;<span class="op" id="2776149">*</span><span class="ident" id="2776150">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776164">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776181">ch</span>&nbsp;&nbsp;<span class="ident" id="2776185">unsafe</span><span class="op" id="2776191">.</span><span class="ident" id="2776192">Pointer</span>&nbsp;<span class="comment" id="2776200">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776212">val</span>&nbsp;<span class="ident" id="2776216">unsafe</span><span class="op" id="2776222">.</span><span class="ident" id="2776223">Pointer</span>&nbsp;<span class="comment" id="2776231">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2776291">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2776294">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2776362">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2776434">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2776504">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2776524">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2776538">func</span>&nbsp;<span class="ident" id="2776543">rselect</span><span class="op" id="2776550">(</span><span class="op" id="2776551">[</span><span class="op" id="2776552">]</span><span class="ident" id="2776553">runtimeSelect</span><span class="op" id="2776566">)</span>&nbsp;<span class="op" id="2776568">(</span><span class="ident" id="2776569">chosen</span>&nbsp;<span class="builtintype" id="2776576">int</span><span class="op" id="2776579">,</span>&nbsp;<span class="ident" id="2776581">recvOK</span>&nbsp;<span class="builtintype" id="2776588">bool</span><span class="op" id="2776592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776595">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2776666">type</span>&nbsp;<span class="ident" id="2776671">SelectDir</span>&nbsp;<span class="builtintype" id="2776681">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2776686">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2776753">const</span>&nbsp;<span class="op" id="2776759">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776762">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776776">SelectDir</span>&nbsp;<span class="op" id="2776786">=</span>&nbsp;<span class="ident" id="2776788">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776794">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776818">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776840">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776864">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776881">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776905">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2776916">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2776919">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2776982">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2777047">//</span><br>
<span class="lineno"></span><span class="comment" id="2777050">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2777114">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2777152">//</span><br>
<span class="lineno"></span><span class="comment" id="2777155">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2777218">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2777309">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2777398">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2777490">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2777506">//</span><br>
<span class="lineno"></span><span class="comment" id="2777509">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2777575">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2777660">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2777751">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2777834">//</span><br>
<span class="lineno"></span><span class="keyword" id="2777837">type</span>&nbsp;<span class="ident" id="2777842">SelectCase</span>&nbsp;<span class="keyword" id="2777853">struct</span>&nbsp;<span class="op" id="2777860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777863">Dir</span>&nbsp;&nbsp;<span class="ident" id="2777868">SelectDir</span>&nbsp;<span class="comment" id="2777878">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777900">Chan</span>&nbsp;<span class="ident" id="2777905">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777915">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777956">Send</span>&nbsp;<span class="ident" id="2777961">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2777971">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2777999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778002">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2778072">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2778147">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2778201">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2778273">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2778344">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2778421">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2778493">func</span>&nbsp;<span class="ident" id="2778498">Select</span><span class="op" id="2778504">(</span><span class="ident" id="2778505">cases</span>&nbsp;<span class="op" id="2778511">[</span><span class="op" id="2778512">]</span><span class="ident" id="2778513">SelectCase</span><span class="op" id="2778523">)</span>&nbsp;<span class="op" id="2778525">(</span><span class="ident" id="2778526">chosen</span>&nbsp;<span class="builtintype" id="2778533">int</span><span class="op" id="2778536">,</span>&nbsp;<span class="ident" id="2778538">recv</span>&nbsp;<span class="ident" id="2778543">Value</span><span class="op" id="2778548">,</span>&nbsp;<span class="ident" id="2778550">recvOK</span>&nbsp;<span class="builtintype" id="2778557">bool</span><span class="op" id="2778561">)</span>&nbsp;<span class="op" id="2778563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2778566">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2778640">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2778715">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778773">runcases</span>&nbsp;<span class="op" id="2778782">:=</span>&nbsp;<span class="builtinfunc" id="2778785">make</span><span class="op" id="2778789">(</span><span class="op" id="2778790">[</span><span class="op" id="2778791">]</span><span class="ident" id="2778792">runtimeSelect</span><span class="op" id="2778805">,</span>&nbsp;<span class="builtinfunc" id="2778807">len</span><span class="op" id="2778810">(</span><span class="ident" id="2778811">cases</span><span class="op" id="2778816">)</span><span class="op" id="2778817">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778820">haveDefault</span>&nbsp;<span class="op" id="2778832">:=</span>&nbsp;<span class="builtintype" id="2778835">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778842">for</span>&nbsp;<span class="ident" id="2778846">i</span><span class="op" id="2778847">,</span>&nbsp;<span class="ident" id="2778849">c</span>&nbsp;<span class="op" id="2778851">:=</span>&nbsp;<span class="keyword" id="2778854">range</span>&nbsp;<span class="ident" id="2778860">cases</span>&nbsp;<span class="op" id="2778866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778870">rc</span>&nbsp;<span class="op" id="2778873">:=</span>&nbsp;<span class="op" id="2778876">&amp;</span><span class="ident" id="2778877">runcases</span><span class="op" id="2778885">[</span><span class="ident" id="2778886">i</span><span class="op" id="2778887">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778891">rc</span><span class="op" id="2778893">.</span><span class="ident" id="2778894">dir</span>&nbsp;<span class="op" id="2778898">=</span>&nbsp;<span class="builtintype" id="2778900">uintptr</span><span class="op" id="2778907">(</span><span class="ident" id="2778908">c</span><span class="op" id="2778909">.</span><span class="ident" id="2778910">Dir</span><span class="op" id="2778913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778917">switch</span>&nbsp;<span class="ident" id="2778924">c</span><span class="op" id="2778925">.</span><span class="ident" id="2778926">Dir</span>&nbsp;<span class="op" id="2778930">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778934">default</span><span class="op" id="2778941">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2778946">panic</span><span class="op" id="2778951">(</span><span class="string" id="2778952">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2778981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778986">case</span>&nbsp;<span class="ident" id="2778991">SelectDefault</span><span class="op" id="2779004">:</span>&nbsp;<span class="comment" id="2779006">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779020">if</span>&nbsp;<span class="ident" id="2779023">haveDefault</span>&nbsp;<span class="op" id="2779035">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779041">panic</span><span class="op" id="2779046">(</span><span class="string" id="2779047">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2779087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779097">haveDefault</span>&nbsp;<span class="op" id="2779109">=</span>&nbsp;<span class="builtintype" id="2779111">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779119">if</span>&nbsp;<span class="ident" id="2779122">c</span><span class="op" id="2779123">.</span><span class="ident" id="2779124">Chan</span><span class="op" id="2779128">.</span><span class="ident" id="2779129">IsValid</span><span class="op" id="2779136">(</span><span class="op" id="2779137">)</span>&nbsp;<span class="op" id="2779139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779145">panic</span><span class="op" id="2779150">(</span><span class="string" id="2779151">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2779196">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779206">if</span>&nbsp;<span class="ident" id="2779209">c</span><span class="op" id="2779210">.</span><span class="ident" id="2779211">Send</span><span class="op" id="2779215">.</span><span class="ident" id="2779216">IsValid</span><span class="op" id="2779223">(</span><span class="op" id="2779224">)</span>&nbsp;<span class="op" id="2779226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779232">panic</span><span class="op" id="2779237">(</span><span class="string" id="2779238">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2779283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779293">case</span>&nbsp;<span class="ident" id="2779298">SelectSend</span><span class="op" id="2779308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779313">ch</span>&nbsp;<span class="op" id="2779316">:=</span>&nbsp;<span class="ident" id="2779319">c</span><span class="op" id="2779320">.</span><span class="ident" id="2779321">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779329">if</span>&nbsp;<span class="op" id="2779332">!</span><span class="ident" id="2779333">ch</span><span class="op" id="2779335">.</span><span class="ident" id="2779336">IsValid</span><span class="op" id="2779343">(</span><span class="op" id="2779344">)</span>&nbsp;<span class="op" id="2779346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779352">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779361">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779366">ch</span><span class="op" id="2779368">.</span><span class="ident" id="2779369">mustBe</span><span class="op" id="2779375">(</span><span class="ident" id="2779376">Chan</span><span class="op" id="2779380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779385">ch</span><span class="op" id="2779387">.</span><span class="ident" id="2779388">mustBeExported</span><span class="op" id="2779402">(</span><span class="op" id="2779403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779408">tt</span>&nbsp;<span class="op" id="2779411">:=</span>&nbsp;<span class="op" id="2779414">(</span><span class="op" id="2779415">*</span><span class="ident" id="2779416">chanType</span><span class="op" id="2779424">)</span><span class="op" id="2779425">(</span><span class="ident" id="2779426">unsafe</span><span class="op" id="2779432">.</span><span class="ident" id="2779433">Pointer</span><span class="op" id="2779440">(</span><span class="ident" id="2779441">ch</span><span class="op" id="2779443">.</span><span class="ident" id="2779444">typ</span><span class="op" id="2779447">)</span><span class="op" id="2779448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779453">if</span>&nbsp;<span class="ident" id="2779456">ChanDir</span><span class="op" id="2779463">(</span><span class="ident" id="2779464">tt</span><span class="op" id="2779466">.</span><span class="ident" id="2779467">dir</span><span class="op" id="2779470">)</span><span class="op" id="2779471">&amp;</span><span class="ident" id="2779472">SendDir</span>&nbsp;<span class="op" id="2779480">==</span>&nbsp;<span class="num" id="2779483">0</span>&nbsp;<span class="op" id="2779485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779491">panic</span><span class="op" id="2779496">(</span><span class="string" id="2779497">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2779551">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779561">rc</span><span class="op" id="2779563">.</span><span class="ident" id="2779564">ch</span>&nbsp;<span class="op" id="2779567">=</span>&nbsp;<span class="ident" id="2779569">ch</span><span class="op" id="2779571">.</span><span class="ident" id="2779572">pointer</span><span class="op" id="2779579">(</span><span class="op" id="2779580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779585">rc</span><span class="op" id="2779587">.</span><span class="ident" id="2779588">typ</span>&nbsp;<span class="op" id="2779592">=</span>&nbsp;<span class="op" id="2779594">&amp;</span><span class="ident" id="2779595">tt</span><span class="op" id="2779597">.</span><span class="ident" id="2779598">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779607">v</span>&nbsp;<span class="op" id="2779609">:=</span>&nbsp;<span class="ident" id="2779612">c</span><span class="op" id="2779613">.</span><span class="ident" id="2779614">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779622">if</span>&nbsp;<span class="op" id="2779625">!</span><span class="ident" id="2779626">v</span><span class="op" id="2779627">.</span><span class="ident" id="2779628">IsValid</span><span class="op" id="2779635">(</span><span class="op" id="2779636">)</span>&nbsp;<span class="op" id="2779638">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779644">panic</span><span class="op" id="2779649">(</span><span class="string" id="2779650">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2779699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779709">v</span><span class="op" id="2779710">.</span><span class="ident" id="2779711">mustBeExported</span><span class="op" id="2779725">(</span><span class="op" id="2779726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779731">v</span>&nbsp;<span class="op" id="2779733">=</span>&nbsp;<span class="ident" id="2779735">v</span><span class="op" id="2779736">.</span><span class="ident" id="2779737">assignTo</span><span class="op" id="2779745">(</span><span class="string" id="2779746">&#34;reflect.Select&#34;</span><span class="op" id="2779762">,</span>&nbsp;<span class="ident" id="2779764">tt</span><span class="op" id="2779766">.</span><span class="ident" id="2779767">elem</span><span class="op" id="2779771">,</span>&nbsp;<span class="ident" id="2779773">nil</span><span class="op" id="2779776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779781">if</span>&nbsp;<span class="ident" id="2779784">v</span><span class="op" id="2779785">.</span><span class="ident" id="2779786">flag</span><span class="op" id="2779790">&amp;</span><span class="ident" id="2779791">flagIndir</span>&nbsp;<span class="op" id="2779801">!=</span>&nbsp;<span class="num" id="2779804">0</span>&nbsp;<span class="op" id="2779806">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779812">rc</span><span class="op" id="2779814">.</span><span class="ident" id="2779815">val</span>&nbsp;<span class="op" id="2779819">=</span>&nbsp;<span class="ident" id="2779821">v</span><span class="op" id="2779822">.</span><span class="ident" id="2779823">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779830">}</span>&nbsp;<span class="keyword" id="2779832">else</span>&nbsp;<span class="op" id="2779837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779843">rc</span><span class="op" id="2779845">.</span><span class="ident" id="2779846">val</span>&nbsp;<span class="op" id="2779850">=</span>&nbsp;<span class="ident" id="2779852">unsafe</span><span class="op" id="2779858">.</span><span class="ident" id="2779859">Pointer</span><span class="op" id="2779866">(</span><span class="op" id="2779867">&amp;</span><span class="ident" id="2779868">v</span><span class="op" id="2779869">.</span><span class="ident" id="2779870">ptr</span><span class="op" id="2779873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779883">case</span>&nbsp;<span class="ident" id="2779888">SelectRecv</span><span class="op" id="2779898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779903">if</span>&nbsp;<span class="ident" id="2779906">c</span><span class="op" id="2779907">.</span><span class="ident" id="2779908">Send</span><span class="op" id="2779912">.</span><span class="ident" id="2779913">IsValid</span><span class="op" id="2779920">(</span><span class="op" id="2779921">)</span>&nbsp;<span class="op" id="2779923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779929">panic</span><span class="op" id="2779934">(</span><span class="string" id="2779935">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2779980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779990">ch</span>&nbsp;<span class="op" id="2779993">:=</span>&nbsp;<span class="ident" id="2779996">c</span><span class="op" id="2779997">.</span><span class="ident" id="2779998">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780006">if</span>&nbsp;<span class="op" id="2780009">!</span><span class="ident" id="2780010">ch</span><span class="op" id="2780012">.</span><span class="ident" id="2780013">IsValid</span><span class="op" id="2780020">(</span><span class="op" id="2780021">)</span>&nbsp;<span class="op" id="2780023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780029">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780043">ch</span><span class="op" id="2780045">.</span><span class="ident" id="2780046">mustBe</span><span class="op" id="2780052">(</span><span class="ident" id="2780053">Chan</span><span class="op" id="2780057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780062">ch</span><span class="op" id="2780064">.</span><span class="ident" id="2780065">mustBeExported</span><span class="op" id="2780079">(</span><span class="op" id="2780080">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780085">tt</span>&nbsp;<span class="op" id="2780088">:=</span>&nbsp;<span class="op" id="2780091">(</span><span class="op" id="2780092">*</span><span class="ident" id="2780093">chanType</span><span class="op" id="2780101">)</span><span class="op" id="2780102">(</span><span class="ident" id="2780103">unsafe</span><span class="op" id="2780109">.</span><span class="ident" id="2780110">Pointer</span><span class="op" id="2780117">(</span><span class="ident" id="2780118">ch</span><span class="op" id="2780120">.</span><span class="ident" id="2780121">typ</span><span class="op" id="2780124">)</span><span class="op" id="2780125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780130">if</span>&nbsp;<span class="ident" id="2780133">ChanDir</span><span class="op" id="2780140">(</span><span class="ident" id="2780141">tt</span><span class="op" id="2780143">.</span><span class="ident" id="2780144">dir</span><span class="op" id="2780147">)</span><span class="op" id="2780148">&amp;</span><span class="ident" id="2780149">RecvDir</span>&nbsp;<span class="op" id="2780157">==</span>&nbsp;<span class="num" id="2780160">0</span>&nbsp;<span class="op" id="2780162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2780168">panic</span><span class="op" id="2780173">(</span><span class="string" id="2780174">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2780228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780238">rc</span><span class="op" id="2780240">.</span><span class="ident" id="2780241">ch</span>&nbsp;<span class="op" id="2780244">=</span>&nbsp;<span class="ident" id="2780246">ch</span><span class="op" id="2780248">.</span><span class="ident" id="2780249">pointer</span><span class="op" id="2780256">(</span><span class="op" id="2780257">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780262">rc</span><span class="op" id="2780264">.</span><span class="ident" id="2780265">typ</span>&nbsp;<span class="op" id="2780269">=</span>&nbsp;<span class="op" id="2780271">&amp;</span><span class="ident" id="2780272">tt</span><span class="op" id="2780274">.</span><span class="ident" id="2780275">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780284">rc</span><span class="op" id="2780286">.</span><span class="ident" id="2780287">val</span>&nbsp;<span class="op" id="2780291">=</span>&nbsp;<span class="ident" id="2780293">unsafe_New</span><span class="op" id="2780303">(</span><span class="ident" id="2780304">tt</span><span class="op" id="2780306">.</span><span class="ident" id="2780307">elem</span><span class="op" id="2780311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780322">chosen</span><span class="op" id="2780328">,</span>&nbsp;<span class="ident" id="2780330">recvOK</span>&nbsp;<span class="op" id="2780337">=</span>&nbsp;<span class="ident" id="2780339">rselect</span><span class="op" id="2780346">(</span><span class="ident" id="2780347">runcases</span><span class="op" id="2780355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780358">if</span>&nbsp;<span class="ident" id="2780361">runcases</span><span class="op" id="2780369">[</span><span class="ident" id="2780370">chosen</span><span class="op" id="2780376">]</span><span class="op" id="2780377">.</span><span class="ident" id="2780378">dir</span>&nbsp;<span class="op" id="2780382">==</span>&nbsp;<span class="builtintype" id="2780385">uintptr</span><span class="op" id="2780392">(</span><span class="ident" id="2780393">SelectRecv</span><span class="op" id="2780403">)</span>&nbsp;<span class="op" id="2780405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780409">tt</span>&nbsp;<span class="op" id="2780412">:=</span>&nbsp;<span class="op" id="2780415">(</span><span class="op" id="2780416">*</span><span class="ident" id="2780417">chanType</span><span class="op" id="2780425">)</span><span class="op" id="2780426">(</span><span class="ident" id="2780427">unsafe</span><span class="op" id="2780433">.</span><span class="ident" id="2780434">Pointer</span><span class="op" id="2780441">(</span><span class="ident" id="2780442">runcases</span><span class="op" id="2780450">[</span><span class="ident" id="2780451">chosen</span><span class="op" id="2780457">]</span><span class="op" id="2780458">.</span><span class="ident" id="2780459">typ</span><span class="op" id="2780462">)</span><span class="op" id="2780463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780467">t</span>&nbsp;<span class="op" id="2780469">:=</span>&nbsp;<span class="ident" id="2780472">tt</span><span class="op" id="2780474">.</span><span class="ident" id="2780475">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780482">p</span>&nbsp;<span class="op" id="2780484">:=</span>&nbsp;<span class="ident" id="2780487">runcases</span><span class="op" id="2780495">[</span><span class="ident" id="2780496">chosen</span><span class="op" id="2780502">]</span><span class="op" id="2780503">.</span><span class="ident" id="2780504">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780510">fl</span>&nbsp;<span class="op" id="2780513">:=</span>&nbsp;<span class="ident" id="2780516">flag</span><span class="op" id="2780520">(</span><span class="ident" id="2780521">t</span><span class="op" id="2780522">.</span><span class="ident" id="2780523">Kind</span><span class="op" id="2780527">(</span><span class="op" id="2780528">)</span><span class="op" id="2780529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780533">if</span>&nbsp;<span class="ident" id="2780536">ifaceIndir</span><span class="op" id="2780546">(</span><span class="ident" id="2780547">t</span><span class="op" id="2780548">)</span>&nbsp;<span class="op" id="2780550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780555">recv</span>&nbsp;<span class="op" id="2780560">=</span>&nbsp;<span class="ident" id="2780562">Value</span><span class="op" id="2780567">{</span><span class="ident" id="2780568">t</span><span class="op" id="2780569">,</span>&nbsp;<span class="ident" id="2780571">p</span><span class="op" id="2780572">,</span>&nbsp;<span class="ident" id="2780574">fl</span>&nbsp;<span class="op" id="2780577">|</span>&nbsp;<span class="ident" id="2780579">flagIndir</span><span class="op" id="2780588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780592">}</span>&nbsp;<span class="keyword" id="2780594">else</span>&nbsp;<span class="op" id="2780599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2780604">recv</span>&nbsp;<span class="op" id="2780609">=</span>&nbsp;<span class="ident" id="2780611">Value</span><span class="op" id="2780616">{</span><span class="ident" id="2780617">t</span><span class="op" id="2780618">,</span>&nbsp;<span class="op" id="2780620">*</span><span class="op" id="2780621">(</span><span class="op" id="2780622">*</span><span class="ident" id="2780623">unsafe</span><span class="op" id="2780629">.</span><span class="ident" id="2780630">Pointer</span><span class="op" id="2780637">)</span><span class="op" id="2780638">(</span><span class="ident" id="2780639">p</span><span class="op" id="2780640">)</span><span class="op" id="2780641">,</span>&nbsp;<span class="ident" id="2780643">fl</span><span class="op" id="2780645">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780655">return</span>&nbsp;<span class="ident" id="2780662">chosen</span><span class="op" id="2780668">,</span>&nbsp;<span class="ident" id="2780670">recv</span><span class="op" id="2780674">,</span>&nbsp;<span class="ident" id="2780676">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2780683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2780686">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780710">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2780744">func</span>&nbsp;<span class="ident" id="2780749">unsafe_New</span><span class="op" id="2780759">(</span><span class="op" id="2780760">*</span><span class="ident" id="2780761">rtype</span><span class="op" id="2780766">)</span>&nbsp;<span class="ident" id="2780768">unsafe</span><span class="op" id="2780774">.</span><span class="ident" id="2780775">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2780783">func</span>&nbsp;<span class="ident" id="2780788">unsafe_NewArray</span><span class="op" id="2780803">(</span><span class="op" id="2780804">*</span><span class="ident" id="2780805">rtype</span><span class="op" id="2780810">,</span>&nbsp;<span class="builtintype" id="2780812">int</span><span class="op" id="2780815">)</span>&nbsp;<span class="ident" id="2780817">unsafe</span><span class="op" id="2780823">.</span><span class="ident" id="2780824">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780833">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2780889">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2780944">func</span>&nbsp;<span class="ident" id="2780949">MakeSlice</span><span class="op" id="2780958">(</span><span class="ident" id="2780959">typ</span>&nbsp;<span class="ident" id="2780963">Type</span><span class="op" id="2780967">,</span>&nbsp;<span class="builtinfunc" id="2780969">len</span><span class="op" id="2780972">,</span>&nbsp;<span class="builtinfunc" id="2780974">cap</span>&nbsp;<span class="builtintype" id="2780978">int</span><span class="op" id="2780981">)</span>&nbsp;<span class="ident" id="2780983">Value</span>&nbsp;<span class="op" id="2780989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780992">if</span>&nbsp;<span class="ident" id="2780995">typ</span><span class="op" id="2780998">.</span><span class="ident" id="2780999">Kind</span><span class="op" id="2781003">(</span><span class="op" id="2781004">)</span>&nbsp;<span class="op" id="2781006">!=</span>&nbsp;<span class="ident" id="2781009">Slice</span>&nbsp;<span class="op" id="2781015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781019">panic</span><span class="op" id="2781024">(</span><span class="string" id="2781025">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2781062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781068">if</span>&nbsp;<span class="builtinfunc" id="2781071">len</span>&nbsp;<span class="op" id="2781075">&lt;</span>&nbsp;<span class="num" id="2781077">0</span>&nbsp;<span class="op" id="2781079">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781083">panic</span><span class="op" id="2781088">(</span><span class="string" id="2781089">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2781122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781128">if</span>&nbsp;<span class="builtinfunc" id="2781131">cap</span>&nbsp;<span class="op" id="2781135">&lt;</span>&nbsp;<span class="num" id="2781137">0</span>&nbsp;<span class="op" id="2781139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781143">panic</span><span class="op" id="2781148">(</span><span class="string" id="2781149">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2781182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781185">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781188">if</span>&nbsp;<span class="builtinfunc" id="2781191">len</span>&nbsp;<span class="op" id="2781195">&gt;</span>&nbsp;<span class="builtinfunc" id="2781197">cap</span>&nbsp;<span class="op" id="2781201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781205">panic</span><span class="op" id="2781210">(</span><span class="string" id="2781211">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2781241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781248">s</span>&nbsp;<span class="op" id="2781250">:=</span>&nbsp;<span class="ident" id="2781253">sliceHeader</span><span class="op" id="2781264">{</span><span class="ident" id="2781265">unsafe_NewArray</span><span class="op" id="2781280">(</span><span class="ident" id="2781281">typ</span><span class="op" id="2781284">.</span><span class="ident" id="2781285">Elem</span><span class="op" id="2781289">(</span><span class="op" id="2781290">)</span><span class="op" id="2781291">.</span><span class="op" id="2781292">(</span><span class="op" id="2781293">*</span><span class="ident" id="2781294">rtype</span><span class="op" id="2781299">)</span><span class="op" id="2781300">,</span>&nbsp;<span class="builtinfunc" id="2781302">cap</span><span class="op" id="2781305">)</span><span class="op" id="2781306">,</span>&nbsp;<span class="builtinfunc" id="2781308">len</span><span class="op" id="2781311">,</span>&nbsp;<span class="builtinfunc" id="2781313">cap</span><span class="op" id="2781316">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781319">return</span>&nbsp;<span class="ident" id="2781326">Value</span><span class="op" id="2781331">{</span><span class="ident" id="2781332">typ</span><span class="op" id="2781335">.</span><span class="ident" id="2781336">common</span><span class="op" id="2781342">(</span><span class="op" id="2781343">)</span><span class="op" id="2781344">,</span>&nbsp;<span class="ident" id="2781346">unsafe</span><span class="op" id="2781352">.</span><span class="ident" id="2781353">Pointer</span><span class="op" id="2781360">(</span><span class="op" id="2781361">&amp;</span><span class="ident" id="2781362">s</span><span class="op" id="2781363">)</span><span class="op" id="2781364">,</span>&nbsp;<span class="ident" id="2781366">flagIndir</span>&nbsp;<span class="op" id="2781376">|</span>&nbsp;<span class="ident" id="2781378">flag</span><span class="op" id="2781382">(</span><span class="ident" id="2781383">Slice</span><span class="op" id="2781388">)</span><span class="op" id="2781389">}</span><br>
<span class="lineno"></span><span class="op" id="2781391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2781394">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2781469">func</span>&nbsp;<span class="ident" id="2781474">MakeChan</span><span class="op" id="2781482">(</span><span class="ident" id="2781483">typ</span>&nbsp;<span class="ident" id="2781487">Type</span><span class="op" id="2781491">,</span>&nbsp;<span class="ident" id="2781493">buffer</span>&nbsp;<span class="builtintype" id="2781500">int</span><span class="op" id="2781503">)</span>&nbsp;<span class="ident" id="2781505">Value</span>&nbsp;<span class="op" id="2781511">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781514">if</span>&nbsp;<span class="ident" id="2781517">typ</span><span class="op" id="2781520">.</span><span class="ident" id="2781521">Kind</span><span class="op" id="2781525">(</span><span class="op" id="2781526">)</span>&nbsp;<span class="op" id="2781528">!=</span>&nbsp;<span class="ident" id="2781531">Chan</span>&nbsp;<span class="op" id="2781536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781540">panic</span><span class="op" id="2781545">(</span><span class="string" id="2781546">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2781581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781587">if</span>&nbsp;<span class="ident" id="2781590">buffer</span>&nbsp;<span class="op" id="2781597">&lt;</span>&nbsp;<span class="num" id="2781599">0</span>&nbsp;<span class="op" id="2781601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781605">panic</span><span class="op" id="2781610">(</span><span class="string" id="2781611">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2781651">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781657">if</span>&nbsp;<span class="ident" id="2781660">typ</span><span class="op" id="2781663">.</span><span class="ident" id="2781664">ChanDir</span><span class="op" id="2781671">(</span><span class="op" id="2781672">)</span>&nbsp;<span class="op" id="2781674">!=</span>&nbsp;<span class="ident" id="2781677">BothDir</span>&nbsp;<span class="op" id="2781685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781689">panic</span><span class="op" id="2781694">(</span><span class="string" id="2781695">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2781742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781748">ch</span>&nbsp;<span class="op" id="2781751">:=</span>&nbsp;<span class="ident" id="2781754">makechan</span><span class="op" id="2781762">(</span><span class="ident" id="2781763">typ</span><span class="op" id="2781766">.</span><span class="op" id="2781767">(</span><span class="op" id="2781768">*</span><span class="ident" id="2781769">rtype</span><span class="op" id="2781774">)</span><span class="op" id="2781775">,</span>&nbsp;<span class="ident" id="2781777">uint64</span><span class="op" id="2781783">(</span><span class="ident" id="2781784">buffer</span><span class="op" id="2781790">)</span><span class="op" id="2781791">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781794">return</span>&nbsp;<span class="ident" id="2781801">Value</span><span class="op" id="2781806">{</span><span class="ident" id="2781807">typ</span><span class="op" id="2781810">.</span><span class="ident" id="2781811">common</span><span class="op" id="2781817">(</span><span class="op" id="2781818">)</span><span class="op" id="2781819">,</span>&nbsp;<span class="ident" id="2781821">ch</span><span class="op" id="2781823">,</span>&nbsp;<span class="ident" id="2781825">flag</span><span class="op" id="2781829">(</span><span class="ident" id="2781830">Chan</span><span class="op" id="2781834">)</span><span class="op" id="2781835">}</span><br>
<span class="lineno"></span><span class="op" id="2781837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2781840">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2781892">func</span>&nbsp;<span class="ident" id="2781897">MakeMap</span><span class="op" id="2781904">(</span><span class="ident" id="2781905">typ</span>&nbsp;<span class="ident" id="2781909">Type</span><span class="op" id="2781913">)</span>&nbsp;<span class="ident" id="2781915">Value</span>&nbsp;<span class="op" id="2781921">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781924">if</span>&nbsp;<span class="ident" id="2781927">typ</span><span class="op" id="2781930">.</span><span class="ident" id="2781931">Kind</span><span class="op" id="2781935">(</span><span class="op" id="2781936">)</span>&nbsp;<span class="op" id="2781938">!=</span>&nbsp;<span class="ident" id="2781941">Map</span>&nbsp;<span class="op" id="2781945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2781949">panic</span><span class="op" id="2781954">(</span><span class="string" id="2781955">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2781988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781994">m</span>&nbsp;<span class="op" id="2781996">:=</span>&nbsp;<span class="ident" id="2781999">makemap</span><span class="op" id="2782006">(</span><span class="ident" id="2782007">typ</span><span class="op" id="2782010">.</span><span class="op" id="2782011">(</span><span class="op" id="2782012">*</span><span class="ident" id="2782013">rtype</span><span class="op" id="2782018">)</span><span class="op" id="2782019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782022">return</span>&nbsp;<span class="ident" id="2782029">Value</span><span class="op" id="2782034">{</span><span class="ident" id="2782035">typ</span><span class="op" id="2782038">.</span><span class="ident" id="2782039">common</span><span class="op" id="2782045">(</span><span class="op" id="2782046">)</span><span class="op" id="2782047">,</span>&nbsp;<span class="ident" id="2782049">m</span><span class="op" id="2782050">,</span>&nbsp;<span class="ident" id="2782052">flag</span><span class="op" id="2782056">(</span><span class="ident" id="2782057">Map</span><span class="op" id="2782060">)</span><span class="op" id="2782061">}</span><br>
<span class="lineno">2030</span><span class="op" id="2782063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782066">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2782114">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2782171">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2782217">func</span>&nbsp;<span class="ident" id="2782222">Indirect</span><span class="op" id="2782230">(</span><span class="ident" id="2782231">v</span>&nbsp;<span class="ident" id="2782233">Value</span><span class="op" id="2782238">)</span>&nbsp;<span class="ident" id="2782240">Value</span>&nbsp;<span class="op" id="2782246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782249">if</span>&nbsp;<span class="ident" id="2782252">v</span><span class="op" id="2782253">.</span><span class="ident" id="2782254">Kind</span><span class="op" id="2782258">(</span><span class="op" id="2782259">)</span>&nbsp;<span class="op" id="2782261">!=</span>&nbsp;<span class="ident" id="2782264">Ptr</span>&nbsp;<span class="op" id="2782268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782272">return</span>&nbsp;<span class="ident" id="2782279">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782285">return</span>&nbsp;<span class="ident" id="2782292">v</span><span class="op" id="2782293">.</span><span class="ident" id="2782294">Elem</span><span class="op" id="2782298">(</span><span class="op" id="2782299">)</span><br>
<span class="lineno">2040</span><span class="op" id="2782301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782304">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2782369">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2782437">func</span>&nbsp;<span class="ident" id="2782442">ValueOf</span><span class="op" id="2782449">(</span><span class="ident" id="2782450">i</span>&nbsp;<span class="keyword" id="2782452">interface</span><span class="op" id="2782461">{</span><span class="op" id="2782462">}</span><span class="op" id="2782463">)</span>&nbsp;<span class="ident" id="2782465">Value</span>&nbsp;<span class="op" id="2782471">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782474">if</span>&nbsp;<span class="ident" id="2782477">i</span>&nbsp;<span class="op" id="2782479">==</span>&nbsp;<span class="ident" id="2782482">nil</span>&nbsp;<span class="op" id="2782486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782490">return</span>&nbsp;<span class="ident" id="2782497">Value</span><span class="op" id="2782502">{</span><span class="op" id="2782503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782510">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782555">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782609">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782657">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2782700">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782742">escapes</span><span class="op" id="2782749">(</span><span class="ident" id="2782750">i</span><span class="op" id="2782751">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782755">return</span>&nbsp;<span class="ident" id="2782762">unpackEface</span><span class="op" id="2782773">(</span><span class="ident" id="2782774">i</span><span class="op" id="2782775">)</span><br>
<span class="lineno"></span><span class="op" id="2782777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782780">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2782856">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2782924">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2782961">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2783037">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2783096">func</span>&nbsp;<span class="ident" id="2783101">Zero</span><span class="op" id="2783105">(</span><span class="ident" id="2783106">typ</span>&nbsp;<span class="ident" id="2783110">Type</span><span class="op" id="2783114">)</span>&nbsp;<span class="ident" id="2783116">Value</span>&nbsp;<span class="op" id="2783122">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783125">if</span>&nbsp;<span class="ident" id="2783128">typ</span>&nbsp;<span class="op" id="2783132">==</span>&nbsp;<span class="ident" id="2783135">nil</span>&nbsp;<span class="op" id="2783139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2783143">panic</span><span class="op" id="2783148">(</span><span class="string" id="2783149">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2783169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783175">t</span>&nbsp;<span class="op" id="2783177">:=</span>&nbsp;<span class="ident" id="2783180">typ</span><span class="op" id="2783183">.</span><span class="ident" id="2783184">common</span><span class="op" id="2783190">(</span><span class="op" id="2783191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783194">fl</span>&nbsp;<span class="op" id="2783197">:=</span>&nbsp;<span class="ident" id="2783200">flag</span><span class="op" id="2783204">(</span><span class="ident" id="2783205">t</span><span class="op" id="2783206">.</span><span class="ident" id="2783207">Kind</span><span class="op" id="2783211">(</span><span class="op" id="2783212">)</span><span class="op" id="2783213">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783216">if</span>&nbsp;<span class="ident" id="2783219">ifaceIndir</span><span class="op" id="2783229">(</span><span class="ident" id="2783230">t</span><span class="op" id="2783231">)</span>&nbsp;<span class="op" id="2783233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783237">return</span>&nbsp;<span class="ident" id="2783244">Value</span><span class="op" id="2783249">{</span><span class="ident" id="2783250">t</span><span class="op" id="2783251">,</span>&nbsp;<span class="ident" id="2783253">unsafe_New</span><span class="op" id="2783263">(</span><span class="ident" id="2783264">typ</span><span class="op" id="2783267">.</span><span class="op" id="2783268">(</span><span class="op" id="2783269">*</span><span class="ident" id="2783270">rtype</span><span class="op" id="2783275">)</span><span class="op" id="2783276">)</span><span class="op" id="2783277">,</span>&nbsp;<span class="ident" id="2783279">fl</span>&nbsp;<span class="op" id="2783282">|</span>&nbsp;<span class="ident" id="2783284">flagIndir</span><span class="op" id="2783293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783299">return</span>&nbsp;<span class="ident" id="2783306">Value</span><span class="op" id="2783311">{</span><span class="ident" id="2783312">t</span><span class="op" id="2783313">,</span>&nbsp;<span class="ident" id="2783315">nil</span><span class="op" id="2783318">,</span>&nbsp;<span class="ident" id="2783320">fl</span><span class="op" id="2783322">}</span><br>
<span class="lineno"></span><span class="op" id="2783324">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2783327">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2783393">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2783471">func</span>&nbsp;<span class="ident" id="2783476">New</span><span class="op" id="2783479">(</span><span class="ident" id="2783480">typ</span>&nbsp;<span class="ident" id="2783484">Type</span><span class="op" id="2783488">)</span>&nbsp;<span class="ident" id="2783490">Value</span>&nbsp;<span class="op" id="2783496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783499">if</span>&nbsp;<span class="ident" id="2783502">typ</span>&nbsp;<span class="op" id="2783506">==</span>&nbsp;<span class="ident" id="2783509">nil</span>&nbsp;<span class="op" id="2783513">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2783517">panic</span><span class="op" id="2783522">(</span><span class="string" id="2783523">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2783542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783548">ptr</span>&nbsp;<span class="op" id="2783552">:=</span>&nbsp;<span class="ident" id="2783555">unsafe_New</span><span class="op" id="2783565">(</span><span class="ident" id="2783566">typ</span><span class="op" id="2783569">.</span><span class="op" id="2783570">(</span><span class="op" id="2783571">*</span><span class="ident" id="2783572">rtype</span><span class="op" id="2783577">)</span><span class="op" id="2783578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783581">fl</span>&nbsp;<span class="op" id="2783584">:=</span>&nbsp;<span class="ident" id="2783587">flag</span><span class="op" id="2783591">(</span><span class="ident" id="2783592">Ptr</span><span class="op" id="2783595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783598">return</span>&nbsp;<span class="ident" id="2783605">Value</span><span class="op" id="2783610">{</span><span class="ident" id="2783611">typ</span><span class="op" id="2783614">.</span><span class="ident" id="2783615">common</span><span class="op" id="2783621">(</span><span class="op" id="2783622">)</span><span class="op" id="2783623">.</span><span class="ident" id="2783624">ptrTo</span><span class="op" id="2783629">(</span><span class="op" id="2783630">)</span><span class="op" id="2783631">,</span>&nbsp;<span class="ident" id="2783633">ptr</span><span class="op" id="2783636">,</span>&nbsp;<span class="ident" id="2783638">fl</span><span class="op" id="2783640">}</span><br>
<span class="lineno">2085</span><span class="op" id="2783642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783645">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2783711">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2783755">func</span>&nbsp;<span class="ident" id="2783760">NewAt</span><span class="op" id="2783765">(</span><span class="ident" id="2783766">typ</span>&nbsp;<span class="ident" id="2783770">Type</span><span class="op" id="2783774">,</span>&nbsp;<span class="ident" id="2783776">p</span>&nbsp;<span class="ident" id="2783778">unsafe</span><span class="op" id="2783784">.</span><span class="ident" id="2783785">Pointer</span><span class="op" id="2783792">)</span>&nbsp;<span class="ident" id="2783794">Value</span>&nbsp;<span class="op" id="2783800">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783803">fl</span>&nbsp;<span class="op" id="2783806">:=</span>&nbsp;<span class="ident" id="2783809">flag</span><span class="op" id="2783813">(</span><span class="ident" id="2783814">Ptr</span><span class="op" id="2783817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783820">return</span>&nbsp;<span class="ident" id="2783827">Value</span><span class="op" id="2783832">{</span><span class="ident" id="2783833">typ</span><span class="op" id="2783836">.</span><span class="ident" id="2783837">common</span><span class="op" id="2783843">(</span><span class="op" id="2783844">)</span><span class="op" id="2783845">.</span><span class="ident" id="2783846">ptrTo</span><span class="op" id="2783851">(</span><span class="op" id="2783852">)</span><span class="op" id="2783853">,</span>&nbsp;<span class="ident" id="2783855">p</span><span class="op" id="2783856">,</span>&nbsp;<span class="ident" id="2783858">fl</span><span class="op" id="2783860">}</span><br>
<span class="lineno"></span><span class="op" id="2783862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783865">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2783933">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2783977">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2784063">func</span>&nbsp;<span class="op" id="2784068">(</span><span class="ident" id="2784069">v</span>&nbsp;<span class="ident" id="2784071">Value</span><span class="op" id="2784076">)</span>&nbsp;<span class="ident" id="2784078">assignTo</span><span class="op" id="2784086">(</span><span class="ident" id="2784087">context</span>&nbsp;<span class="builtintype" id="2784095">string</span><span class="op" id="2784101">,</span>&nbsp;<span class="ident" id="2784103">dst</span>&nbsp;<span class="op" id="2784107">*</span><span class="ident" id="2784108">rtype</span><span class="op" id="2784113">,</span>&nbsp;<span class="ident" id="2784115">target</span>&nbsp;<span class="ident" id="2784122">unsafe</span><span class="op" id="2784128">.</span><span class="ident" id="2784129">Pointer</span><span class="op" id="2784136">)</span>&nbsp;<span class="ident" id="2784138">Value</span>&nbsp;<span class="op" id="2784144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784147">if</span>&nbsp;<span class="ident" id="2784150">v</span><span class="op" id="2784151">.</span><span class="ident" id="2784152">flag</span><span class="op" id="2784156">&amp;</span><span class="ident" id="2784157">flagMethod</span>&nbsp;<span class="op" id="2784168">!=</span>&nbsp;<span class="num" id="2784171">0</span>&nbsp;<span class="op" id="2784173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784177">v</span>&nbsp;<span class="op" id="2784179">=</span>&nbsp;<span class="ident" id="2784181">makeMethodValue</span><span class="op" id="2784196">(</span><span class="ident" id="2784197">context</span><span class="op" id="2784204">,</span>&nbsp;<span class="ident" id="2784206">v</span><span class="op" id="2784207">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784214">switch</span>&nbsp;<span class="op" id="2784221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784224">case</span>&nbsp;<span class="ident" id="2784229">directlyAssignable</span><span class="op" id="2784247">(</span><span class="ident" id="2784248">dst</span><span class="op" id="2784251">,</span>&nbsp;<span class="ident" id="2784253">v</span><span class="op" id="2784254">.</span><span class="ident" id="2784255">typ</span><span class="op" id="2784258">)</span><span class="op" id="2784259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784263">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784303">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784345">v</span><span class="op" id="2784346">.</span><span class="ident" id="2784347">typ</span>&nbsp;<span class="op" id="2784351">=</span>&nbsp;<span class="ident" id="2784353">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784359">fl</span>&nbsp;<span class="op" id="2784362">:=</span>&nbsp;<span class="ident" id="2784365">v</span><span class="op" id="2784366">.</span><span class="ident" id="2784367">flag</span>&nbsp;<span class="op" id="2784372">&amp;</span>&nbsp;<span class="op" id="2784374">(</span><span class="ident" id="2784375">flagRO</span>&nbsp;<span class="op" id="2784382">|</span>&nbsp;<span class="ident" id="2784384">flagAddr</span>&nbsp;<span class="op" id="2784393">|</span>&nbsp;<span class="ident" id="2784395">flagIndir</span><span class="op" id="2784404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784408">fl</span>&nbsp;<span class="op" id="2784411">|=</span>&nbsp;<span class="ident" id="2784414">flag</span><span class="op" id="2784418">(</span><span class="ident" id="2784419">dst</span><span class="op" id="2784422">.</span><span class="ident" id="2784423">Kind</span><span class="op" id="2784427">(</span><span class="op" id="2784428">)</span><span class="op" id="2784429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784433">return</span>&nbsp;<span class="ident" id="2784440">Value</span><span class="op" id="2784445">{</span><span class="ident" id="2784446">dst</span><span class="op" id="2784449">,</span>&nbsp;<span class="ident" id="2784451">v</span><span class="op" id="2784452">.</span><span class="ident" id="2784453">ptr</span><span class="op" id="2784456">,</span>&nbsp;<span class="ident" id="2784458">fl</span><span class="op" id="2784460">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784464">case</span>&nbsp;<span class="ident" id="2784469">implements</span><span class="op" id="2784479">(</span><span class="ident" id="2784480">dst</span><span class="op" id="2784483">,</span>&nbsp;<span class="ident" id="2784485">v</span><span class="op" id="2784486">.</span><span class="ident" id="2784487">typ</span><span class="op" id="2784490">)</span><span class="op" id="2784491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784495">if</span>&nbsp;<span class="ident" id="2784498">target</span>&nbsp;<span class="op" id="2784505">==</span>&nbsp;<span class="ident" id="2784508">nil</span>&nbsp;<span class="op" id="2784512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784517">target</span>&nbsp;<span class="op" id="2784524">=</span>&nbsp;<span class="ident" id="2784526">unsafe_New</span><span class="op" id="2784536">(</span><span class="ident" id="2784537">dst</span><span class="op" id="2784540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784544">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784548">x</span>&nbsp;<span class="op" id="2784550">:=</span>&nbsp;<span class="ident" id="2784553">valueInterface</span><span class="op" id="2784567">(</span><span class="ident" id="2784568">v</span><span class="op" id="2784569">,</span>&nbsp;<span class="builtintype" id="2784571">false</span><span class="op" id="2784576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784580">if</span>&nbsp;<span class="ident" id="2784583">dst</span><span class="op" id="2784586">.</span><span class="ident" id="2784587">NumMethod</span><span class="op" id="2784596">(</span><span class="op" id="2784597">)</span>&nbsp;<span class="op" id="2784599">==</span>&nbsp;<span class="num" id="2784602">0</span>&nbsp;<span class="op" id="2784604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784609">*</span><span class="op" id="2784610">(</span><span class="op" id="2784611">*</span><span class="keyword" id="2784612">interface</span><span class="op" id="2784621">{</span><span class="op" id="2784622">}</span><span class="op" id="2784623">)</span><span class="op" id="2784624">(</span><span class="ident" id="2784625">target</span><span class="op" id="2784631">)</span>&nbsp;<span class="op" id="2784633">=</span>&nbsp;<span class="ident" id="2784635">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784639">}</span>&nbsp;<span class="keyword" id="2784641">else</span>&nbsp;<span class="op" id="2784646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2784651">ifaceE2I</span><span class="op" id="2784659">(</span><span class="ident" id="2784660">dst</span><span class="op" id="2784663">,</span>&nbsp;<span class="ident" id="2784665">x</span><span class="op" id="2784666">,</span>&nbsp;<span class="ident" id="2784668">target</span><span class="op" id="2784674">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784682">return</span>&nbsp;<span class="ident" id="2784689">Value</span><span class="op" id="2784694">{</span><span class="ident" id="2784695">dst</span><span class="op" id="2784698">,</span>&nbsp;<span class="ident" id="2784700">target</span><span class="op" id="2784706">,</span>&nbsp;<span class="ident" id="2784708">flagIndir</span>&nbsp;<span class="op" id="2784718">|</span>&nbsp;<span class="ident" id="2784720">flag</span><span class="op" id="2784724">(</span><span class="ident" id="2784725">Interface</span><span class="op" id="2784734">)</span><span class="op" id="2784735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2784738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2784742">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2784754">panic</span><span class="op" id="2784759">(</span><span class="ident" id="2784760">context</span>&nbsp;<span class="op" id="2784768">+</span>&nbsp;<span class="string" id="2784770">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2784789">+</span>&nbsp;<span class="ident" id="2784791">v</span><span class="op" id="2784792">.</span><span class="ident" id="2784793">typ</span><span class="op" id="2784796">.</span><span class="ident" id="2784797">String</span><span class="op" id="2784803">(</span><span class="op" id="2784804">)</span>&nbsp;<span class="op" id="2784806">+</span>&nbsp;<span class="string" id="2784808">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2784838">+</span>&nbsp;<span class="ident" id="2784840">dst</span><span class="op" id="2784843">.</span><span class="ident" id="2784844">String</span><span class="op" id="2784850">(</span><span class="op" id="2784851">)</span><span class="op" id="2784852">)</span><br>
<span class="lineno"></span><span class="op" id="2784854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784857">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2784909">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2784969">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2785014">func</span>&nbsp;<span class="op" id="2785019">(</span><span class="ident" id="2785020">v</span>&nbsp;<span class="ident" id="2785022">Value</span><span class="op" id="2785027">)</span>&nbsp;<span class="ident" id="2785029">Convert</span><span class="op" id="2785036">(</span><span class="ident" id="2785037">t</span>&nbsp;<span class="ident" id="2785039">Type</span><span class="op" id="2785043">)</span>&nbsp;<span class="ident" id="2785045">Value</span>&nbsp;<span class="op" id="2785051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785054">if</span>&nbsp;<span class="ident" id="2785057">v</span><span class="op" id="2785058">.</span><span class="ident" id="2785059">flag</span><span class="op" id="2785063">&amp;</span><span class="ident" id="2785064">flagMethod</span>&nbsp;<span class="op" id="2785075">!=</span>&nbsp;<span class="num" id="2785078">0</span>&nbsp;<span class="op" id="2785080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785084">v</span>&nbsp;<span class="op" id="2785086">=</span>&nbsp;<span class="ident" id="2785088">makeMethodValue</span><span class="op" id="2785103">(</span><span class="string" id="2785104">&#34;Convert&#34;</span><span class="op" id="2785113">,</span>&nbsp;<span class="ident" id="2785115">v</span><span class="op" id="2785116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785119">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785122">op</span>&nbsp;<span class="op" id="2785125">:=</span>&nbsp;<span class="ident" id="2785128">convertOp</span><span class="op" id="2785137">(</span><span class="ident" id="2785138">t</span><span class="op" id="2785139">.</span><span class="ident" id="2785140">common</span><span class="op" id="2785146">(</span><span class="op" id="2785147">)</span><span class="op" id="2785148">,</span>&nbsp;<span class="ident" id="2785150">v</span><span class="op" id="2785151">.</span><span class="ident" id="2785152">typ</span><span class="op" id="2785155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785158">if</span>&nbsp;<span class="ident" id="2785161">op</span>&nbsp;<span class="op" id="2785164">==</span>&nbsp;<span class="ident" id="2785167">nil</span>&nbsp;<span class="op" id="2785171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2785175">panic</span><span class="op" id="2785180">(</span><span class="string" id="2785181">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2785221">+</span>&nbsp;<span class="ident" id="2785223">v</span><span class="op" id="2785224">.</span><span class="ident" id="2785225">typ</span><span class="op" id="2785228">.</span><span class="ident" id="2785229">String</span><span class="op" id="2785235">(</span><span class="op" id="2785236">)</span>&nbsp;<span class="op" id="2785238">+</span>&nbsp;<span class="string" id="2785240">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2785272">+</span>&nbsp;<span class="ident" id="2785274">t</span><span class="op" id="2785275">.</span><span class="ident" id="2785276">String</span><span class="op" id="2785282">(</span><span class="op" id="2785283">)</span><span class="op" id="2785284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785290">return</span>&nbsp;<span class="ident" id="2785297">op</span><span class="op" id="2785299">(</span><span class="ident" id="2785300">v</span><span class="op" id="2785301">,</span>&nbsp;<span class="ident" id="2785303">t</span><span class="op" id="2785304">)</span><br>
<span class="lineno">2140</span><span class="op" id="2785306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785309">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2785374">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2785454">func</span>&nbsp;<span class="ident" id="2785459">convertOp</span><span class="op" id="2785468">(</span><span class="ident" id="2785469">dst</span><span class="op" id="2785472">,</span>&nbsp;<span class="ident" id="2785474">src</span>&nbsp;<span class="op" id="2785478">*</span><span class="ident" id="2785479">rtype</span><span class="op" id="2785484">)</span>&nbsp;<span class="keyword" id="2785486">func</span><span class="op" id="2785490">(</span><span class="ident" id="2785491">Value</span><span class="op" id="2785496">,</span>&nbsp;<span class="ident" id="2785498">Type</span><span class="op" id="2785502">)</span>&nbsp;<span class="ident" id="2785504">Value</span>&nbsp;<span class="op" id="2785510">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785513">switch</span>&nbsp;<span class="ident" id="2785520">src</span><span class="op" id="2785523">.</span><span class="ident" id="2785524">Kind</span><span class="op" id="2785528">(</span><span class="op" id="2785529">)</span>&nbsp;<span class="op" id="2785531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785534">case</span>&nbsp;<span class="ident" id="2785539">Int</span><span class="op" id="2785542">,</span>&nbsp;<span class="ident" id="2785544">Int8</span><span class="op" id="2785548">,</span>&nbsp;<span class="ident" id="2785550">Int16</span><span class="op" id="2785555">,</span>&nbsp;<span class="ident" id="2785557">Int32</span><span class="op" id="2785562">,</span>&nbsp;<span class="ident" id="2785564">Int64</span><span class="op" id="2785569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785573">switch</span>&nbsp;<span class="ident" id="2785580">dst</span><span class="op" id="2785583">.</span><span class="ident" id="2785584">Kind</span><span class="op" id="2785588">(</span><span class="op" id="2785589">)</span>&nbsp;<span class="op" id="2785591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785595">case</span>&nbsp;<span class="ident" id="2785600">Int</span><span class="op" id="2785603">,</span>&nbsp;<span class="ident" id="2785605">Int8</span><span class="op" id="2785609">,</span>&nbsp;<span class="ident" id="2785611">Int16</span><span class="op" id="2785616">,</span>&nbsp;<span class="ident" id="2785618">Int32</span><span class="op" id="2785623">,</span>&nbsp;<span class="ident" id="2785625">Int64</span><span class="op" id="2785630">,</span>&nbsp;<span class="ident" id="2785632">Uint</span><span class="op" id="2785636">,</span>&nbsp;<span class="ident" id="2785638">Uint8</span><span class="op" id="2785643">,</span>&nbsp;<span class="ident" id="2785645">Uint16</span><span class="op" id="2785651">,</span>&nbsp;<span class="ident" id="2785653">Uint32</span><span class="op" id="2785659">,</span>&nbsp;<span class="ident" id="2785661">Uint64</span><span class="op" id="2785667">,</span>&nbsp;<span class="ident" id="2785669">Uintptr</span><span class="op" id="2785676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785681">return</span>&nbsp;<span class="ident" id="2785688">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785697">case</span>&nbsp;<span class="ident" id="2785702">Float32</span><span class="op" id="2785709">,</span>&nbsp;<span class="ident" id="2785711">Float64</span><span class="op" id="2785718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785723">return</span>&nbsp;<span class="ident" id="2785730">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785744">case</span>&nbsp;<span class="ident" id="2785749">String</span><span class="op" id="2785755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785760">return</span>&nbsp;<span class="ident" id="2785767">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2785782">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785786">case</span>&nbsp;<span class="ident" id="2785791">Uint</span><span class="op" id="2785795">,</span>&nbsp;<span class="ident" id="2785797">Uint8</span><span class="op" id="2785802">,</span>&nbsp;<span class="ident" id="2785804">Uint16</span><span class="op" id="2785810">,</span>&nbsp;<span class="ident" id="2785812">Uint32</span><span class="op" id="2785818">,</span>&nbsp;<span class="ident" id="2785820">Uint64</span><span class="op" id="2785826">,</span>&nbsp;<span class="ident" id="2785828">Uintptr</span><span class="op" id="2785835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785839">switch</span>&nbsp;<span class="ident" id="2785846">dst</span><span class="op" id="2785849">.</span><span class="ident" id="2785850">Kind</span><span class="op" id="2785854">(</span><span class="op" id="2785855">)</span>&nbsp;<span class="op" id="2785857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785861">case</span>&nbsp;<span class="ident" id="2785866">Int</span><span class="op" id="2785869">,</span>&nbsp;<span class="ident" id="2785871">Int8</span><span class="op" id="2785875">,</span>&nbsp;<span class="ident" id="2785877">Int16</span><span class="op" id="2785882">,</span>&nbsp;<span class="ident" id="2785884">Int32</span><span class="op" id="2785889">,</span>&nbsp;<span class="ident" id="2785891">Int64</span><span class="op" id="2785896">,</span>&nbsp;<span class="ident" id="2785898">Uint</span><span class="op" id="2785902">,</span>&nbsp;<span class="ident" id="2785904">Uint8</span><span class="op" id="2785909">,</span>&nbsp;<span class="ident" id="2785911">Uint16</span><span class="op" id="2785917">,</span>&nbsp;<span class="ident" id="2785919">Uint32</span><span class="op" id="2785925">,</span>&nbsp;<span class="ident" id="2785927">Uint64</span><span class="op" id="2785933">,</span>&nbsp;<span class="ident" id="2785935">Uintptr</span><span class="op" id="2785942">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785947">return</span>&nbsp;<span class="ident" id="2785954">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785964">case</span>&nbsp;<span class="ident" id="2785969">Float32</span><span class="op" id="2785976">,</span>&nbsp;<span class="ident" id="2785978">Float64</span><span class="op" id="2785985">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785990">return</span>&nbsp;<span class="ident" id="2785997">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786012">case</span>&nbsp;<span class="ident" id="2786017">String</span><span class="op" id="2786023">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786028">return</span>&nbsp;<span class="ident" id="2786035">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786051">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786055">case</span>&nbsp;<span class="ident" id="2786060">Float32</span><span class="op" id="2786067">,</span>&nbsp;<span class="ident" id="2786069">Float64</span><span class="op" id="2786076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786080">switch</span>&nbsp;<span class="ident" id="2786087">dst</span><span class="op" id="2786090">.</span><span class="ident" id="2786091">Kind</span><span class="op" id="2786095">(</span><span class="op" id="2786096">)</span>&nbsp;<span class="op" id="2786098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786102">case</span>&nbsp;<span class="ident" id="2786107">Int</span><span class="op" id="2786110">,</span>&nbsp;<span class="ident" id="2786112">Int8</span><span class="op" id="2786116">,</span>&nbsp;<span class="ident" id="2786118">Int16</span><span class="op" id="2786123">,</span>&nbsp;<span class="ident" id="2786125">Int32</span><span class="op" id="2786130">,</span>&nbsp;<span class="ident" id="2786132">Int64</span><span class="op" id="2786137">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786142">return</span>&nbsp;<span class="ident" id="2786149">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786163">case</span>&nbsp;<span class="ident" id="2786168">Uint</span><span class="op" id="2786172">,</span>&nbsp;<span class="ident" id="2786174">Uint8</span><span class="op" id="2786179">,</span>&nbsp;<span class="ident" id="2786181">Uint16</span><span class="op" id="2786187">,</span>&nbsp;<span class="ident" id="2786189">Uint32</span><span class="op" id="2786195">,</span>&nbsp;<span class="ident" id="2786197">Uint64</span><span class="op" id="2786203">,</span>&nbsp;<span class="ident" id="2786205">Uintptr</span><span class="op" id="2786212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786217">return</span>&nbsp;<span class="ident" id="2786224">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786239">case</span>&nbsp;<span class="ident" id="2786244">Float32</span><span class="op" id="2786251">,</span>&nbsp;<span class="ident" id="2786253">Float64</span><span class="op" id="2786260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786265">return</span>&nbsp;<span class="ident" id="2786272">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786283">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786287">case</span>&nbsp;<span class="ident" id="2786292">Complex64</span><span class="op" id="2786301">,</span>&nbsp;<span class="ident" id="2786303">Complex128</span><span class="op" id="2786313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786317">switch</span>&nbsp;<span class="ident" id="2786324">dst</span><span class="op" id="2786327">.</span><span class="ident" id="2786328">Kind</span><span class="op" id="2786332">(</span><span class="op" id="2786333">)</span>&nbsp;<span class="op" id="2786335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786339">case</span>&nbsp;<span class="ident" id="2786344">Complex64</span><span class="op" id="2786353">,</span>&nbsp;<span class="ident" id="2786355">Complex128</span><span class="op" id="2786365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786370">return</span>&nbsp;<span class="ident" id="2786377">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786394">case</span>&nbsp;<span class="ident" id="2786399">String</span><span class="op" id="2786405">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786409">if</span>&nbsp;<span class="ident" id="2786412">dst</span><span class="op" id="2786415">.</span><span class="ident" id="2786416">Kind</span><span class="op" id="2786420">(</span><span class="op" id="2786421">)</span>&nbsp;<span class="op" id="2786423">==</span>&nbsp;<span class="ident" id="2786426">Slice</span>&nbsp;<span class="op" id="2786432">&amp;&amp;</span>&nbsp;<span class="ident" id="2786435">dst</span><span class="op" id="2786438">.</span><span class="ident" id="2786439">Elem</span><span class="op" id="2786443">(</span><span class="op" id="2786444">)</span><span class="op" id="2786445">.</span><span class="ident" id="2786446">PkgPath</span><span class="op" id="2786453">(</span><span class="op" id="2786454">)</span>&nbsp;<span class="op" id="2786456">==</span>&nbsp;<span class="string" id="2786459">&#34;&#34;</span>&nbsp;<span class="op" id="2786462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786467">switch</span>&nbsp;<span class="ident" id="2786474">dst</span><span class="op" id="2786477">.</span><span class="ident" id="2786478">Elem</span><span class="op" id="2786482">(</span><span class="op" id="2786483">)</span><span class="op" id="2786484">.</span><span class="ident" id="2786485">Kind</span><span class="op" id="2786489">(</span><span class="op" id="2786490">)</span>&nbsp;<span class="op" id="2786492">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786497">case</span>&nbsp;<span class="ident" id="2786502">Uint8</span><span class="op" id="2786507">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786513">return</span>&nbsp;<span class="ident" id="2786520">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786538">case</span>&nbsp;<span class="ident" id="2786543">Int32</span><span class="op" id="2786548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786554">return</span>&nbsp;<span class="ident" id="2786561">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786579">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786587">case</span>&nbsp;<span class="ident" id="2786592">Slice</span><span class="op" id="2786597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786601">if</span>&nbsp;<span class="ident" id="2786604">dst</span><span class="op" id="2786607">.</span><span class="ident" id="2786608">Kind</span><span class="op" id="2786612">(</span><span class="op" id="2786613">)</span>&nbsp;<span class="op" id="2786615">==</span>&nbsp;<span class="ident" id="2786618">String</span>&nbsp;<span class="op" id="2786625">&amp;&amp;</span>&nbsp;<span class="ident" id="2786628">src</span><span class="op" id="2786631">.</span><span class="ident" id="2786632">Elem</span><span class="op" id="2786636">(</span><span class="op" id="2786637">)</span><span class="op" id="2786638">.</span><span class="ident" id="2786639">PkgPath</span><span class="op" id="2786646">(</span><span class="op" id="2786647">)</span>&nbsp;<span class="op" id="2786649">==</span>&nbsp;<span class="string" id="2786652">&#34;&#34;</span>&nbsp;<span class="op" id="2786655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786660">switch</span>&nbsp;<span class="ident" id="2786667">src</span><span class="op" id="2786670">.</span><span class="ident" id="2786671">Elem</span><span class="op" id="2786675">(</span><span class="op" id="2786676">)</span><span class="op" id="2786677">.</span><span class="ident" id="2786678">Kind</span><span class="op" id="2786682">(</span><span class="op" id="2786683">)</span>&nbsp;<span class="op" id="2786685">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786690">case</span>&nbsp;<span class="ident" id="2786695">Uint8</span><span class="op" id="2786700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786706">return</span>&nbsp;<span class="ident" id="2786713">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786731">case</span>&nbsp;<span class="ident" id="2786736">Int32</span><span class="op" id="2786741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786747">return</span>&nbsp;<span class="ident" id="2786754">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786772">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2786783">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786826">if</span>&nbsp;<span class="ident" id="2786829">haveIdenticalUnderlyingType</span><span class="op" id="2786856">(</span><span class="ident" id="2786857">dst</span><span class="op" id="2786860">,</span>&nbsp;<span class="ident" id="2786862">src</span><span class="op" id="2786865">)</span>&nbsp;<span class="op" id="2786867">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786871">return</span>&nbsp;<span class="ident" id="2786878">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2786893">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786967">if</span>&nbsp;<span class="ident" id="2786970">dst</span><span class="op" id="2786973">.</span><span class="ident" id="2786974">Kind</span><span class="op" id="2786978">(</span><span class="op" id="2786979">)</span>&nbsp;<span class="op" id="2786981">==</span>&nbsp;<span class="ident" id="2786984">Ptr</span>&nbsp;<span class="op" id="2786988">&amp;&amp;</span>&nbsp;<span class="ident" id="2786991">dst</span><span class="op" id="2786994">.</span><span class="ident" id="2786995">Name</span><span class="op" id="2786999">(</span><span class="op" id="2787000">)</span>&nbsp;<span class="op" id="2787002">==</span>&nbsp;<span class="string" id="2787005">&#34;&#34;</span>&nbsp;<span class="op" id="2787008">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787013">src</span><span class="op" id="2787016">.</span><span class="ident" id="2787017">Kind</span><span class="op" id="2787021">(</span><span class="op" id="2787022">)</span>&nbsp;<span class="op" id="2787024">==</span>&nbsp;<span class="ident" id="2787027">Ptr</span>&nbsp;<span class="op" id="2787031">&amp;&amp;</span>&nbsp;<span class="ident" id="2787034">src</span><span class="op" id="2787037">.</span><span class="ident" id="2787038">Name</span><span class="op" id="2787042">(</span><span class="op" id="2787043">)</span>&nbsp;<span class="op" id="2787045">==</span>&nbsp;<span class="string" id="2787048">&#34;&#34;</span>&nbsp;<span class="op" id="2787051">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787056">haveIdenticalUnderlyingType</span><span class="op" id="2787083">(</span><span class="ident" id="2787084">dst</span><span class="op" id="2787087">.</span><span class="ident" id="2787088">Elem</span><span class="op" id="2787092">(</span><span class="op" id="2787093">)</span><span class="op" id="2787094">.</span><span class="ident" id="2787095">common</span><span class="op" id="2787101">(</span><span class="op" id="2787102">)</span><span class="op" id="2787103">,</span>&nbsp;<span class="ident" id="2787105">src</span><span class="op" id="2787108">.</span><span class="ident" id="2787109">Elem</span><span class="op" id="2787113">(</span><span class="op" id="2787114">)</span><span class="op" id="2787115">.</span><span class="ident" id="2787116">common</span><span class="op" id="2787122">(</span><span class="op" id="2787123">)</span><span class="op" id="2787124">)</span>&nbsp;<span class="op" id="2787126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787130">return</span>&nbsp;<span class="ident" id="2787137">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787152">if</span>&nbsp;<span class="ident" id="2787155">implements</span><span class="op" id="2787165">(</span><span class="ident" id="2787166">dst</span><span class="op" id="2787169">,</span>&nbsp;<span class="ident" id="2787171">src</span><span class="op" id="2787174">)</span>&nbsp;<span class="op" id="2787176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787180">if</span>&nbsp;<span class="ident" id="2787183">src</span><span class="op" id="2787186">.</span><span class="ident" id="2787187">Kind</span><span class="op" id="2787191">(</span><span class="op" id="2787192">)</span>&nbsp;<span class="op" id="2787194">==</span>&nbsp;<span class="ident" id="2787197">Interface</span>&nbsp;<span class="op" id="2787207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787212">return</span>&nbsp;<span class="ident" id="2787219">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787232">return</span>&nbsp;<span class="ident" id="2787239">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787251">return</span>&nbsp;<span class="ident" id="2787258">nil</span><br>
<span class="lineno"></span><span class="op" id="2787262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2787265">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2787338">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2787383">func</span>&nbsp;<span class="ident" id="2787388">makeInt</span><span class="op" id="2787395">(</span><span class="ident" id="2787396">f</span>&nbsp;<span class="ident" id="2787398">flag</span><span class="op" id="2787402">,</span>&nbsp;<span class="ident" id="2787404">bits</span>&nbsp;<span class="ident" id="2787409">uint64</span><span class="op" id="2787415">,</span>&nbsp;<span class="ident" id="2787417">t</span>&nbsp;<span class="ident" id="2787419">Type</span><span class="op" id="2787423">)</span>&nbsp;<span class="ident" id="2787425">Value</span>&nbsp;<span class="op" id="2787431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787434">typ</span>&nbsp;<span class="op" id="2787438">:=</span>&nbsp;<span class="ident" id="2787441">t</span><span class="op" id="2787442">.</span><span class="ident" id="2787443">common</span><span class="op" id="2787449">(</span><span class="op" id="2787450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787453">ptr</span>&nbsp;<span class="op" id="2787457">:=</span>&nbsp;<span class="ident" id="2787460">unsafe_New</span><span class="op" id="2787470">(</span><span class="ident" id="2787471">typ</span><span class="op" id="2787474">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787477">switch</span>&nbsp;<span class="ident" id="2787484">typ</span><span class="op" id="2787487">.</span><span class="ident" id="2787488">size</span>&nbsp;<span class="op" id="2787493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787496">case</span>&nbsp;<span class="num" id="2787501">1</span><span class="op" id="2787502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787506">*</span><span class="op" id="2787507">(</span><span class="op" id="2787508">*</span><span class="builtintype" id="2787509">uint8</span><span class="op" id="2787514">)</span><span class="op" id="2787515">(</span><span class="ident" id="2787516">unsafe</span><span class="op" id="2787522">.</span><span class="ident" id="2787523">Pointer</span><span class="op" id="2787530">(</span><span class="ident" id="2787531">ptr</span><span class="op" id="2787534">)</span><span class="op" id="2787535">)</span>&nbsp;<span class="op" id="2787537">=</span>&nbsp;<span class="builtintype" id="2787539">uint8</span><span class="op" id="2787544">(</span><span class="ident" id="2787545">bits</span><span class="op" id="2787549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787552">case</span>&nbsp;<span class="num" id="2787557">2</span><span class="op" id="2787558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787562">*</span><span class="op" id="2787563">(</span><span class="op" id="2787564">*</span><span class="builtintype" id="2787565">uint16</span><span class="op" id="2787571">)</span><span class="op" id="2787572">(</span><span class="ident" id="2787573">unsafe</span><span class="op" id="2787579">.</span><span class="ident" id="2787580">Pointer</span><span class="op" id="2787587">(</span><span class="ident" id="2787588">ptr</span><span class="op" id="2787591">)</span><span class="op" id="2787592">)</span>&nbsp;<span class="op" id="2787594">=</span>&nbsp;<span class="builtintype" id="2787596">uint16</span><span class="op" id="2787602">(</span><span class="ident" id="2787603">bits</span><span class="op" id="2787607">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787610">case</span>&nbsp;<span class="num" id="2787615">4</span><span class="op" id="2787616">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787620">*</span><span class="op" id="2787621">(</span><span class="op" id="2787622">*</span><span class="builtintype" id="2787623">uint32</span><span class="op" id="2787629">)</span><span class="op" id="2787630">(</span><span class="ident" id="2787631">unsafe</span><span class="op" id="2787637">.</span><span class="ident" id="2787638">Pointer</span><span class="op" id="2787645">(</span><span class="ident" id="2787646">ptr</span><span class="op" id="2787649">)</span><span class="op" id="2787650">)</span>&nbsp;<span class="op" id="2787652">=</span>&nbsp;<span class="builtintype" id="2787654">uint32</span><span class="op" id="2787660">(</span><span class="ident" id="2787661">bits</span><span class="op" id="2787665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787668">case</span>&nbsp;<span class="num" id="2787673">8</span><span class="op" id="2787674">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787678">*</span><span class="op" id="2787679">(</span><span class="op" id="2787680">*</span><span class="ident" id="2787681">uint64</span><span class="op" id="2787687">)</span><span class="op" id="2787688">(</span><span class="ident" id="2787689">unsafe</span><span class="op" id="2787695">.</span><span class="ident" id="2787696">Pointer</span><span class="op" id="2787703">(</span><span class="ident" id="2787704">ptr</span><span class="op" id="2787707">)</span><span class="op" id="2787708">)</span>&nbsp;<span class="op" id="2787710">=</span>&nbsp;<span class="ident" id="2787712">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787718">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787721">return</span>&nbsp;<span class="ident" id="2787728">Value</span><span class="op" id="2787733">{</span><span class="ident" id="2787734">typ</span><span class="op" id="2787737">,</span>&nbsp;<span class="ident" id="2787739">ptr</span><span class="op" id="2787742">,</span>&nbsp;<span class="ident" id="2787744">f</span>&nbsp;<span class="op" id="2787746">|</span>&nbsp;<span class="ident" id="2787748">flagIndir</span>&nbsp;<span class="op" id="2787758">|</span>&nbsp;<span class="ident" id="2787760">flag</span><span class="op" id="2787764">(</span><span class="ident" id="2787765">typ</span><span class="op" id="2787768">.</span><span class="ident" id="2787769">Kind</span><span class="op" id="2787773">(</span><span class="op" id="2787774">)</span><span class="op" id="2787775">)</span><span class="op" id="2787776">}</span><br>
<span class="lineno"></span><span class="op" id="2787778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2787781">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2787864">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2787905">func</span>&nbsp;<span class="ident" id="2787910">makeFloat</span><span class="op" id="2787919">(</span><span class="ident" id="2787920">f</span>&nbsp;<span class="ident" id="2787922">flag</span><span class="op" id="2787926">,</span>&nbsp;<span class="ident" id="2787928">v</span>&nbsp;<span class="builtintype" id="2787930">float64</span><span class="op" id="2787937">,</span>&nbsp;<span class="ident" id="2787939">t</span>&nbsp;<span class="ident" id="2787941">Type</span><span class="op" id="2787945">)</span>&nbsp;<span class="ident" id="2787947">Value</span>&nbsp;<span class="op" id="2787953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787956">typ</span>&nbsp;<span class="op" id="2787960">:=</span>&nbsp;<span class="ident" id="2787963">t</span><span class="op" id="2787964">.</span><span class="ident" id="2787965">common</span><span class="op" id="2787971">(</span><span class="op" id="2787972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787975">ptr</span>&nbsp;<span class="op" id="2787979">:=</span>&nbsp;<span class="ident" id="2787982">unsafe_New</span><span class="op" id="2787992">(</span><span class="ident" id="2787993">typ</span><span class="op" id="2787996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787999">switch</span>&nbsp;<span class="ident" id="2788006">typ</span><span class="op" id="2788009">.</span><span class="ident" id="2788010">size</span>&nbsp;<span class="op" id="2788015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788018">case</span>&nbsp;<span class="num" id="2788023">4</span><span class="op" id="2788024">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788028">*</span><span class="op" id="2788029">(</span><span class="op" id="2788030">*</span><span class="builtintype" id="2788031">float32</span><span class="op" id="2788038">)</span><span class="op" id="2788039">(</span><span class="ident" id="2788040">unsafe</span><span class="op" id="2788046">.</span><span class="ident" id="2788047">Pointer</span><span class="op" id="2788054">(</span><span class="ident" id="2788055">ptr</span><span class="op" id="2788058">)</span><span class="op" id="2788059">)</span>&nbsp;<span class="op" id="2788061">=</span>&nbsp;<span class="builtintype" id="2788063">float32</span><span class="op" id="2788070">(</span><span class="ident" id="2788071">v</span><span class="op" id="2788072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788075">case</span>&nbsp;<span class="num" id="2788080">8</span><span class="op" id="2788081">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788085">*</span><span class="op" id="2788086">(</span><span class="op" id="2788087">*</span><span class="builtintype" id="2788088">float64</span><span class="op" id="2788095">)</span><span class="op" id="2788096">(</span><span class="ident" id="2788097">unsafe</span><span class="op" id="2788103">.</span><span class="ident" id="2788104">Pointer</span><span class="op" id="2788111">(</span><span class="ident" id="2788112">ptr</span><span class="op" id="2788115">)</span><span class="op" id="2788116">)</span>&nbsp;<span class="op" id="2788118">=</span>&nbsp;<span class="ident" id="2788120">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788126">return</span>&nbsp;<span class="ident" id="2788133">Value</span><span class="op" id="2788138">{</span><span class="ident" id="2788139">typ</span><span class="op" id="2788142">,</span>&nbsp;<span class="ident" id="2788144">ptr</span><span class="op" id="2788147">,</span>&nbsp;<span class="ident" id="2788149">f</span>&nbsp;<span class="op" id="2788151">|</span>&nbsp;<span class="ident" id="2788153">flagIndir</span>&nbsp;<span class="op" id="2788163">|</span>&nbsp;<span class="ident" id="2788165">flag</span><span class="op" id="2788169">(</span><span class="ident" id="2788170">typ</span><span class="op" id="2788173">.</span><span class="ident" id="2788174">Kind</span><span class="op" id="2788178">(</span><span class="op" id="2788179">)</span><span class="op" id="2788180">)</span><span class="op" id="2788181">}</span><br>
<span class="lineno">2255</span><span class="op" id="2788183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2788186">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2788273">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2788319">func</span>&nbsp;<span class="ident" id="2788324">makeComplex</span><span class="op" id="2788335">(</span><span class="ident" id="2788336">f</span>&nbsp;<span class="ident" id="2788338">flag</span><span class="op" id="2788342">,</span>&nbsp;<span class="ident" id="2788344">v</span>&nbsp;<span class="builtintype" id="2788346">complex128</span><span class="op" id="2788356">,</span>&nbsp;<span class="ident" id="2788358">t</span>&nbsp;<span class="ident" id="2788360">Type</span><span class="op" id="2788364">)</span>&nbsp;<span class="ident" id="2788366">Value</span>&nbsp;<span class="op" id="2788372">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788375">typ</span>&nbsp;<span class="op" id="2788379">:=</span>&nbsp;<span class="ident" id="2788382">t</span><span class="op" id="2788383">.</span><span class="ident" id="2788384">common</span><span class="op" id="2788390">(</span><span class="op" id="2788391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788394">ptr</span>&nbsp;<span class="op" id="2788398">:=</span>&nbsp;<span class="ident" id="2788401">unsafe_New</span><span class="op" id="2788411">(</span><span class="ident" id="2788412">typ</span><span class="op" id="2788415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788418">switch</span>&nbsp;<span class="ident" id="2788425">typ</span><span class="op" id="2788428">.</span><span class="ident" id="2788429">size</span>&nbsp;<span class="op" id="2788434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788437">case</span>&nbsp;<span class="num" id="2788442">8</span><span class="op" id="2788443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788447">*</span><span class="op" id="2788448">(</span><span class="op" id="2788449">*</span><span class="builtintype" id="2788450">complex64</span><span class="op" id="2788459">)</span><span class="op" id="2788460">(</span><span class="ident" id="2788461">unsafe</span><span class="op" id="2788467">.</span><span class="ident" id="2788468">Pointer</span><span class="op" id="2788475">(</span><span class="ident" id="2788476">ptr</span><span class="op" id="2788479">)</span><span class="op" id="2788480">)</span>&nbsp;<span class="op" id="2788482">=</span>&nbsp;<span class="builtintype" id="2788484">complex64</span><span class="op" id="2788493">(</span><span class="ident" id="2788494">v</span><span class="op" id="2788495">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788498">case</span>&nbsp;<span class="num" id="2788503">16</span><span class="op" id="2788505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788509">*</span><span class="op" id="2788510">(</span><span class="op" id="2788511">*</span><span class="builtintype" id="2788512">complex128</span><span class="op" id="2788522">)</span><span class="op" id="2788523">(</span><span class="ident" id="2788524">unsafe</span><span class="op" id="2788530">.</span><span class="ident" id="2788531">Pointer</span><span class="op" id="2788538">(</span><span class="ident" id="2788539">ptr</span><span class="op" id="2788542">)</span><span class="op" id="2788543">)</span>&nbsp;<span class="op" id="2788545">=</span>&nbsp;<span class="ident" id="2788547">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2788550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788553">return</span>&nbsp;<span class="ident" id="2788560">Value</span><span class="op" id="2788565">{</span><span class="ident" id="2788566">typ</span><span class="op" id="2788569">,</span>&nbsp;<span class="ident" id="2788571">ptr</span><span class="op" id="2788574">,</span>&nbsp;<span class="ident" id="2788576">f</span>&nbsp;<span class="op" id="2788578">|</span>&nbsp;<span class="ident" id="2788580">flagIndir</span>&nbsp;<span class="op" id="2788590">|</span>&nbsp;<span class="ident" id="2788592">flag</span><span class="op" id="2788596">(</span><span class="ident" id="2788597">typ</span><span class="op" id="2788600">.</span><span class="ident" id="2788601">Kind</span><span class="op" id="2788605">(</span><span class="op" id="2788606">)</span><span class="op" id="2788607">)</span><span class="op" id="2788608">}</span><br>
<span class="lineno"></span><span class="op" id="2788610">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2788613">func</span>&nbsp;<span class="ident" id="2788618">makeString</span><span class="op" id="2788628">(</span><span class="ident" id="2788629">f</span>&nbsp;<span class="ident" id="2788631">flag</span><span class="op" id="2788635">,</span>&nbsp;<span class="ident" id="2788637">v</span>&nbsp;<span class="builtintype" id="2788639">string</span><span class="op" id="2788645">,</span>&nbsp;<span class="ident" id="2788647">t</span>&nbsp;<span class="ident" id="2788649">Type</span><span class="op" id="2788653">)</span>&nbsp;<span class="ident" id="2788655">Value</span>&nbsp;<span class="op" id="2788661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788664">ret</span>&nbsp;<span class="op" id="2788668">:=</span>&nbsp;<span class="ident" id="2788671">New</span><span class="op" id="2788674">(</span><span class="ident" id="2788675">t</span><span class="op" id="2788676">)</span><span class="op" id="2788677">.</span><span class="ident" id="2788678">Elem</span><span class="op" id="2788682">(</span><span class="op" id="2788683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788686">ret</span><span class="op" id="2788689">.</span><span class="ident" id="2788690">SetString</span><span class="op" id="2788699">(</span><span class="ident" id="2788700">v</span><span class="op" id="2788701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788704">ret</span><span class="op" id="2788707">.</span><span class="ident" id="2788708">flag</span>&nbsp;<span class="op" id="2788713">=</span>&nbsp;<span class="ident" id="2788715">ret</span><span class="op" id="2788718">.</span><span class="ident" id="2788719">flag</span><span class="op" id="2788723">&amp;^</span><span class="ident" id="2788725">flagAddr</span>&nbsp;<span class="op" id="2788734">|</span>&nbsp;<span class="ident" id="2788736">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788739">return</span>&nbsp;<span class="ident" id="2788746">ret</span><br>
<span class="lineno"></span><span class="op" id="2788750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2788753">func</span>&nbsp;<span class="ident" id="2788758">makeBytes</span><span class="op" id="2788767">(</span><span class="ident" id="2788768">f</span>&nbsp;<span class="ident" id="2788770">flag</span><span class="op" id="2788774">,</span>&nbsp;<span class="ident" id="2788776">v</span>&nbsp;<span class="op" id="2788778">[</span><span class="op" id="2788779">]</span><span class="builtintype" id="2788780">byte</span><span class="op" id="2788784">,</span>&nbsp;<span class="ident" id="2788786">t</span>&nbsp;<span class="ident" id="2788788">Type</span><span class="op" id="2788792">)</span>&nbsp;<span class="ident" id="2788794">Value</span>&nbsp;<span class="op" id="2788800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788803">ret</span>&nbsp;<span class="op" id="2788807">:=</span>&nbsp;<span class="ident" id="2788810">New</span><span class="op" id="2788813">(</span><span class="ident" id="2788814">t</span><span class="op" id="2788815">)</span><span class="op" id="2788816">.</span><span class="ident" id="2788817">Elem</span><span class="op" id="2788821">(</span><span class="op" id="2788822">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788825">ret</span><span class="op" id="2788828">.</span><span class="ident" id="2788829">SetBytes</span><span class="op" id="2788837">(</span><span class="ident" id="2788838">v</span><span class="op" id="2788839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788842">ret</span><span class="op" id="2788845">.</span><span class="ident" id="2788846">flag</span>&nbsp;<span class="op" id="2788851">=</span>&nbsp;<span class="ident" id="2788853">ret</span><span class="op" id="2788856">.</span><span class="ident" id="2788857">flag</span><span class="op" id="2788861">&amp;^</span><span class="ident" id="2788863">flagAddr</span>&nbsp;<span class="op" id="2788872">|</span>&nbsp;<span class="ident" id="2788874">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2788877">return</span>&nbsp;<span class="ident" id="2788884">ret</span><br>
<span class="lineno"></span><span class="op" id="2788888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2788891">func</span>&nbsp;<span class="ident" id="2788896">makeRunes</span><span class="op" id="2788905">(</span><span class="ident" id="2788906">f</span>&nbsp;<span class="ident" id="2788908">flag</span><span class="op" id="2788912">,</span>&nbsp;<span class="ident" id="2788914">v</span>&nbsp;<span class="op" id="2788916">[</span><span class="op" id="2788917">]</span><span class="builtintype" id="2788918">rune</span><span class="op" id="2788922">,</span>&nbsp;<span class="ident" id="2788924">t</span>&nbsp;<span class="ident" id="2788926">Type</span><span class="op" id="2788930">)</span>&nbsp;<span class="ident" id="2788932">Value</span>&nbsp;<span class="op" id="2788938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788941">ret</span>&nbsp;<span class="op" id="2788945">:=</span>&nbsp;<span class="ident" id="2788948">New</span><span class="op" id="2788951">(</span><span class="ident" id="2788952">t</span><span class="op" id="2788953">)</span><span class="op" id="2788954">.</span><span class="ident" id="2788955">Elem</span><span class="op" id="2788959">(</span><span class="op" id="2788960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788963">ret</span><span class="op" id="2788966">.</span><span class="ident" id="2788967">setRunes</span><span class="op" id="2788975">(</span><span class="ident" id="2788976">v</span><span class="op" id="2788977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788980">ret</span><span class="op" id="2788983">.</span><span class="ident" id="2788984">flag</span>&nbsp;<span class="op" id="2788989">=</span>&nbsp;<span class="ident" id="2788991">ret</span><span class="op" id="2788994">.</span><span class="ident" id="2788995">flag</span><span class="op" id="2788999">&amp;^</span><span class="ident" id="2789001">flagAddr</span>&nbsp;<span class="op" id="2789010">|</span>&nbsp;<span class="ident" id="2789012">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789015">return</span>&nbsp;<span class="ident" id="2789022">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2789026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789029">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2789085">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2789157">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2789229">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789288">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789320">func</span>&nbsp;<span class="ident" id="2789325">cvtInt</span><span class="op" id="2789331">(</span><span class="ident" id="2789332">v</span>&nbsp;<span class="ident" id="2789334">Value</span><span class="op" id="2789339">,</span>&nbsp;<span class="ident" id="2789341">t</span>&nbsp;<span class="ident" id="2789343">Type</span><span class="op" id="2789347">)</span>&nbsp;<span class="ident" id="2789349">Value</span>&nbsp;<span class="op" id="2789355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789358">return</span>&nbsp;<span class="ident" id="2789365">makeInt</span><span class="op" id="2789372">(</span><span class="ident" id="2789373">v</span><span class="op" id="2789374">.</span><span class="ident" id="2789375">flag</span><span class="op" id="2789379">&amp;</span><span class="ident" id="2789380">flagRO</span><span class="op" id="2789386">,</span>&nbsp;<span class="ident" id="2789388">uint64</span><span class="op" id="2789394">(</span><span class="ident" id="2789395">v</span><span class="op" id="2789396">.</span><span class="ident" id="2789397">Int</span><span class="op" id="2789400">(</span><span class="op" id="2789401">)</span><span class="op" id="2789402">)</span><span class="op" id="2789403">,</span>&nbsp;<span class="ident" id="2789405">t</span><span class="op" id="2789406">)</span><br>
<span class="lineno">2300</span><span class="op" id="2789408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789411">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789444">func</span>&nbsp;<span class="ident" id="2789449">cvtUint</span><span class="op" id="2789456">(</span><span class="ident" id="2789457">v</span>&nbsp;<span class="ident" id="2789459">Value</span><span class="op" id="2789464">,</span>&nbsp;<span class="ident" id="2789466">t</span>&nbsp;<span class="ident" id="2789468">Type</span><span class="op" id="2789472">)</span>&nbsp;<span class="ident" id="2789474">Value</span>&nbsp;<span class="op" id="2789480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789483">return</span>&nbsp;<span class="ident" id="2789490">makeInt</span><span class="op" id="2789497">(</span><span class="ident" id="2789498">v</span><span class="op" id="2789499">.</span><span class="ident" id="2789500">flag</span><span class="op" id="2789504">&amp;</span><span class="ident" id="2789505">flagRO</span><span class="op" id="2789511">,</span>&nbsp;<span class="ident" id="2789513">v</span><span class="op" id="2789514">.</span><span class="ident" id="2789515">Uint</span><span class="op" id="2789519">(</span><span class="op" id="2789520">)</span><span class="op" id="2789521">,</span>&nbsp;<span class="ident" id="2789523">t</span><span class="op" id="2789524">)</span><br>
<span class="lineno">2305</span><span class="op" id="2789526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789529">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789560">func</span>&nbsp;<span class="ident" id="2789565">cvtFloatInt</span><span class="op" id="2789576">(</span><span class="ident" id="2789577">v</span>&nbsp;<span class="ident" id="2789579">Value</span><span class="op" id="2789584">,</span>&nbsp;<span class="ident" id="2789586">t</span>&nbsp;<span class="ident" id="2789588">Type</span><span class="op" id="2789592">)</span>&nbsp;<span class="ident" id="2789594">Value</span>&nbsp;<span class="op" id="2789600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789603">return</span>&nbsp;<span class="ident" id="2789610">makeInt</span><span class="op" id="2789617">(</span><span class="ident" id="2789618">v</span><span class="op" id="2789619">.</span><span class="ident" id="2789620">flag</span><span class="op" id="2789624">&amp;</span><span class="ident" id="2789625">flagRO</span><span class="op" id="2789631">,</span>&nbsp;<span class="ident" id="2789633">uint64</span><span class="op" id="2789639">(</span><span class="ident" id="2789640">int64</span><span class="op" id="2789645">(</span><span class="ident" id="2789646">v</span><span class="op" id="2789647">.</span><span class="ident" id="2789648">Float</span><span class="op" id="2789653">(</span><span class="op" id="2789654">)</span><span class="op" id="2789655">)</span><span class="op" id="2789656">)</span><span class="op" id="2789657">,</span>&nbsp;<span class="ident" id="2789659">t</span><span class="op" id="2789660">)</span><br>
<span class="lineno">2310</span><span class="op" id="2789662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789665">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789697">func</span>&nbsp;<span class="ident" id="2789702">cvtFloatUint</span><span class="op" id="2789714">(</span><span class="ident" id="2789715">v</span>&nbsp;<span class="ident" id="2789717">Value</span><span class="op" id="2789722">,</span>&nbsp;<span class="ident" id="2789724">t</span>&nbsp;<span class="ident" id="2789726">Type</span><span class="op" id="2789730">)</span>&nbsp;<span class="ident" id="2789732">Value</span>&nbsp;<span class="op" id="2789738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789741">return</span>&nbsp;<span class="ident" id="2789748">makeInt</span><span class="op" id="2789755">(</span><span class="ident" id="2789756">v</span><span class="op" id="2789757">.</span><span class="ident" id="2789758">flag</span><span class="op" id="2789762">&amp;</span><span class="ident" id="2789763">flagRO</span><span class="op" id="2789769">,</span>&nbsp;<span class="ident" id="2789771">uint64</span><span class="op" id="2789777">(</span><span class="ident" id="2789778">v</span><span class="op" id="2789779">.</span><span class="ident" id="2789780">Float</span><span class="op" id="2789785">(</span><span class="op" id="2789786">)</span><span class="op" id="2789787">)</span><span class="op" id="2789788">,</span>&nbsp;<span class="ident" id="2789790">t</span><span class="op" id="2789791">)</span><br>
<span class="lineno">2315</span><span class="op" id="2789793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789796">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789827">func</span>&nbsp;<span class="ident" id="2789832">cvtIntFloat</span><span class="op" id="2789843">(</span><span class="ident" id="2789844">v</span>&nbsp;<span class="ident" id="2789846">Value</span><span class="op" id="2789851">,</span>&nbsp;<span class="ident" id="2789853">t</span>&nbsp;<span class="ident" id="2789855">Type</span><span class="op" id="2789859">)</span>&nbsp;<span class="ident" id="2789861">Value</span>&nbsp;<span class="op" id="2789867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2789870">return</span>&nbsp;<span class="ident" id="2789877">makeFloat</span><span class="op" id="2789886">(</span><span class="ident" id="2789887">v</span><span class="op" id="2789888">.</span><span class="ident" id="2789889">flag</span><span class="op" id="2789893">&amp;</span><span class="ident" id="2789894">flagRO</span><span class="op" id="2789900">,</span>&nbsp;<span class="builtintype" id="2789902">float64</span><span class="op" id="2789909">(</span><span class="ident" id="2789910">v</span><span class="op" id="2789911">.</span><span class="ident" id="2789912">Int</span><span class="op" id="2789915">(</span><span class="op" id="2789916">)</span><span class="op" id="2789917">)</span><span class="op" id="2789918">,</span>&nbsp;<span class="ident" id="2789920">t</span><span class="op" id="2789921">)</span><br>
<span class="lineno">2320</span><span class="op" id="2789923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789926">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2789958">func</span>&nbsp;<span class="ident" id="2789963">cvtUintFloat</span><span class="op" id="2789975">(</span><span class="ident" id="2789976">v</span>&nbsp;<span class="ident" id="2789978">Value</span><span class="op" id="2789983">,</span>&nbsp;<span class="ident" id="2789985">t</span>&nbsp;<span class="ident" id="2789987">Type</span><span class="op" id="2789991">)</span>&nbsp;<span class="ident" id="2789993">Value</span>&nbsp;<span class="op" id="2789999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790002">return</span>&nbsp;<span class="ident" id="2790009">makeFloat</span><span class="op" id="2790018">(</span><span class="ident" id="2790019">v</span><span class="op" id="2790020">.</span><span class="ident" id="2790021">flag</span><span class="op" id="2790025">&amp;</span><span class="ident" id="2790026">flagRO</span><span class="op" id="2790032">,</span>&nbsp;<span class="builtintype" id="2790034">float64</span><span class="op" id="2790041">(</span><span class="ident" id="2790042">v</span><span class="op" id="2790043">.</span><span class="ident" id="2790044">Uint</span><span class="op" id="2790048">(</span><span class="op" id="2790049">)</span><span class="op" id="2790050">)</span><span class="op" id="2790051">,</span>&nbsp;<span class="ident" id="2790053">t</span><span class="op" id="2790054">)</span><br>
<span class="lineno">2325</span><span class="op" id="2790056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790059">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2790092">func</span>&nbsp;<span class="ident" id="2790097">cvtFloat</span><span class="op" id="2790105">(</span><span class="ident" id="2790106">v</span>&nbsp;<span class="ident" id="2790108">Value</span><span class="op" id="2790113">,</span>&nbsp;<span class="ident" id="2790115">t</span>&nbsp;<span class="ident" id="2790117">Type</span><span class="op" id="2790121">)</span>&nbsp;<span class="ident" id="2790123">Value</span>&nbsp;<span class="op" id="2790129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790132">return</span>&nbsp;<span class="ident" id="2790139">makeFloat</span><span class="op" id="2790148">(</span><span class="ident" id="2790149">v</span><span class="op" id="2790150">.</span><span class="ident" id="2790151">flag</span><span class="op" id="2790155">&amp;</span><span class="ident" id="2790156">flagRO</span><span class="op" id="2790162">,</span>&nbsp;<span class="ident" id="2790164">v</span><span class="op" id="2790165">.</span><span class="ident" id="2790166">Float</span><span class="op" id="2790171">(</span><span class="op" id="2790172">)</span><span class="op" id="2790173">,</span>&nbsp;<span class="ident" id="2790175">t</span><span class="op" id="2790176">)</span><br>
<span class="lineno">2330</span><span class="op" id="2790178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790181">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2790218">func</span>&nbsp;<span class="ident" id="2790223">cvtComplex</span><span class="op" id="2790233">(</span><span class="ident" id="2790234">v</span>&nbsp;<span class="ident" id="2790236">Value</span><span class="op" id="2790241">,</span>&nbsp;<span class="ident" id="2790243">t</span>&nbsp;<span class="ident" id="2790245">Type</span><span class="op" id="2790249">)</span>&nbsp;<span class="ident" id="2790251">Value</span>&nbsp;<span class="op" id="2790257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790260">return</span>&nbsp;<span class="ident" id="2790267">makeComplex</span><span class="op" id="2790278">(</span><span class="ident" id="2790279">v</span><span class="op" id="2790280">.</span><span class="ident" id="2790281">flag</span><span class="op" id="2790285">&amp;</span><span class="ident" id="2790286">flagRO</span><span class="op" id="2790292">,</span>&nbsp;<span class="ident" id="2790294">v</span><span class="op" id="2790295">.</span><span class="ident" id="2790296">Complex</span><span class="op" id="2790303">(</span><span class="op" id="2790304">)</span><span class="op" id="2790305">,</span>&nbsp;<span class="ident" id="2790307">t</span><span class="op" id="2790308">)</span><br>
<span class="lineno">2335</span><span class="op" id="2790310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790313">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2790343">func</span>&nbsp;<span class="ident" id="2790348">cvtIntString</span><span class="op" id="2790360">(</span><span class="ident" id="2790361">v</span>&nbsp;<span class="ident" id="2790363">Value</span><span class="op" id="2790368">,</span>&nbsp;<span class="ident" id="2790370">t</span>&nbsp;<span class="ident" id="2790372">Type</span><span class="op" id="2790376">)</span>&nbsp;<span class="ident" id="2790378">Value</span>&nbsp;<span class="op" id="2790384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790387">return</span>&nbsp;<span class="ident" id="2790394">makeString</span><span class="op" id="2790404">(</span><span class="ident" id="2790405">v</span><span class="op" id="2790406">.</span><span class="ident" id="2790407">flag</span><span class="op" id="2790411">&amp;</span><span class="ident" id="2790412">flagRO</span><span class="op" id="2790418">,</span>&nbsp;<span class="builtintype" id="2790420">string</span><span class="op" id="2790426">(</span><span class="ident" id="2790427">v</span><span class="op" id="2790428">.</span><span class="ident" id="2790429">Int</span><span class="op" id="2790432">(</span><span class="op" id="2790433">)</span><span class="op" id="2790434">)</span><span class="op" id="2790435">,</span>&nbsp;<span class="ident" id="2790437">t</span><span class="op" id="2790438">)</span><br>
<span class="lineno">2340</span><span class="op" id="2790440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790443">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2790474">func</span>&nbsp;<span class="ident" id="2790479">cvtUintString</span><span class="op" id="2790492">(</span><span class="ident" id="2790493">v</span>&nbsp;<span class="ident" id="2790495">Value</span><span class="op" id="2790500">,</span>&nbsp;<span class="ident" id="2790502">t</span>&nbsp;<span class="ident" id="2790504">Type</span><span class="op" id="2790508">)</span>&nbsp;<span class="ident" id="2790510">Value</span>&nbsp;<span class="op" id="2790516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790519">return</span>&nbsp;<span class="ident" id="2790526">makeString</span><span class="op" id="2790536">(</span><span class="ident" id="2790537">v</span><span class="op" id="2790538">.</span><span class="ident" id="2790539">flag</span><span class="op" id="2790543">&amp;</span><span class="ident" id="2790544">flagRO</span><span class="op" id="2790550">,</span>&nbsp;<span class="builtintype" id="2790552">string</span><span class="op" id="2790558">(</span><span class="ident" id="2790559">v</span><span class="op" id="2790560">.</span><span class="ident" id="2790561">Uint</span><span class="op" id="2790565">(</span><span class="op" id="2790566">)</span><span class="op" id="2790567">)</span><span class="op" id="2790568">,</span>&nbsp;<span class="ident" id="2790570">t</span><span class="op" id="2790571">)</span><br>
<span class="lineno">2345</span><span class="op" id="2790573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790576">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2790607">func</span>&nbsp;<span class="ident" id="2790612">cvtBytesString</span><span class="op" id="2790626">(</span><span class="ident" id="2790627">v</span>&nbsp;<span class="ident" id="2790629">Value</span><span class="op" id="2790634">,</span>&nbsp;<span class="ident" id="2790636">t</span>&nbsp;<span class="ident" id="2790638">Type</span><span class="op" id="2790642">)</span>&nbsp;<span class="ident" id="2790644">Value</span>&nbsp;<span class="op" id="2790650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790653">return</span>&nbsp;<span class="ident" id="2790660">makeString</span><span class="op" id="2790670">(</span><span class="ident" id="2790671">v</span><span class="op" id="2790672">.</span><span class="ident" id="2790673">flag</span><span class="op" id="2790677">&amp;</span><span class="ident" id="2790678">flagRO</span><span class="op" id="2790684">,</span>&nbsp;<span class="builtintype" id="2790686">string</span><span class="op" id="2790692">(</span><span class="ident" id="2790693">v</span><span class="op" id="2790694">.</span><span class="ident" id="2790695">Bytes</span><span class="op" id="2790700">(</span><span class="op" id="2790701">)</span><span class="op" id="2790702">)</span><span class="op" id="2790703">,</span>&nbsp;<span class="ident" id="2790705">t</span><span class="op" id="2790706">)</span><br>
<span class="lineno">2350</span><span class="op" id="2790708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790711">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2790742">func</span>&nbsp;<span class="ident" id="2790747">cvtStringBytes</span><span class="op" id="2790761">(</span><span class="ident" id="2790762">v</span>&nbsp;<span class="ident" id="2790764">Value</span><span class="op" id="2790769">,</span>&nbsp;<span class="ident" id="2790771">t</span>&nbsp;<span class="ident" id="2790773">Type</span><span class="op" id="2790777">)</span>&nbsp;<span class="ident" id="2790779">Value</span>&nbsp;<span class="op" id="2790785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790788">return</span>&nbsp;<span class="ident" id="2790795">makeBytes</span><span class="op" id="2790804">(</span><span class="ident" id="2790805">v</span><span class="op" id="2790806">.</span><span class="ident" id="2790807">flag</span><span class="op" id="2790811">&amp;</span><span class="ident" id="2790812">flagRO</span><span class="op" id="2790818">,</span>&nbsp;<span class="op" id="2790820">[</span><span class="op" id="2790821">]</span><span class="builtintype" id="2790822">byte</span><span class="op" id="2790826">(</span><span class="ident" id="2790827">v</span><span class="op" id="2790828">.</span><span class="ident" id="2790829">String</span><span class="op" id="2790835">(</span><span class="op" id="2790836">)</span><span class="op" id="2790837">)</span><span class="op" id="2790838">,</span>&nbsp;<span class="ident" id="2790840">t</span><span class="op" id="2790841">)</span><br>
<span class="lineno">2355</span><span class="op" id="2790843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790846">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2790877">func</span>&nbsp;<span class="ident" id="2790882">cvtRunesString</span><span class="op" id="2790896">(</span><span class="ident" id="2790897">v</span>&nbsp;<span class="ident" id="2790899">Value</span><span class="op" id="2790904">,</span>&nbsp;<span class="ident" id="2790906">t</span>&nbsp;<span class="ident" id="2790908">Type</span><span class="op" id="2790912">)</span>&nbsp;<span class="ident" id="2790914">Value</span>&nbsp;<span class="op" id="2790920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2790923">return</span>&nbsp;<span class="ident" id="2790930">makeString</span><span class="op" id="2790940">(</span><span class="ident" id="2790941">v</span><span class="op" id="2790942">.</span><span class="ident" id="2790943">flag</span><span class="op" id="2790947">&amp;</span><span class="ident" id="2790948">flagRO</span><span class="op" id="2790954">,</span>&nbsp;<span class="builtintype" id="2790956">string</span><span class="op" id="2790962">(</span><span class="ident" id="2790963">v</span><span class="op" id="2790964">.</span><span class="ident" id="2790965">runes</span><span class="op" id="2790970">(</span><span class="op" id="2790971">)</span><span class="op" id="2790972">)</span><span class="op" id="2790973">,</span>&nbsp;<span class="ident" id="2790975">t</span><span class="op" id="2790976">)</span><br>
<span class="lineno">2360</span><span class="op" id="2790978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2790981">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2791012">func</span>&nbsp;<span class="ident" id="2791017">cvtStringRunes</span><span class="op" id="2791031">(</span><span class="ident" id="2791032">v</span>&nbsp;<span class="ident" id="2791034">Value</span><span class="op" id="2791039">,</span>&nbsp;<span class="ident" id="2791041">t</span>&nbsp;<span class="ident" id="2791043">Type</span><span class="op" id="2791047">)</span>&nbsp;<span class="ident" id="2791049">Value</span>&nbsp;<span class="op" id="2791055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791058">return</span>&nbsp;<span class="ident" id="2791065">makeRunes</span><span class="op" id="2791074">(</span><span class="ident" id="2791075">v</span><span class="op" id="2791076">.</span><span class="ident" id="2791077">flag</span><span class="op" id="2791081">&amp;</span><span class="ident" id="2791082">flagRO</span><span class="op" id="2791088">,</span>&nbsp;<span class="op" id="2791090">[</span><span class="op" id="2791091">]</span><span class="builtintype" id="2791092">rune</span><span class="op" id="2791096">(</span><span class="ident" id="2791097">v</span><span class="op" id="2791098">.</span><span class="ident" id="2791099">String</span><span class="op" id="2791105">(</span><span class="op" id="2791106">)</span><span class="op" id="2791107">)</span><span class="op" id="2791108">,</span>&nbsp;<span class="ident" id="2791110">t</span><span class="op" id="2791111">)</span><br>
<span class="lineno">2365</span><span class="op" id="2791113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791116">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2791142">func</span>&nbsp;<span class="ident" id="2791147">cvtDirect</span><span class="op" id="2791156">(</span><span class="ident" id="2791157">v</span>&nbsp;<span class="ident" id="2791159">Value</span><span class="op" id="2791164">,</span>&nbsp;<span class="ident" id="2791166">typ</span>&nbsp;<span class="ident" id="2791170">Type</span><span class="op" id="2791174">)</span>&nbsp;<span class="ident" id="2791176">Value</span>&nbsp;<span class="op" id="2791182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791185">f</span>&nbsp;<span class="op" id="2791187">:=</span>&nbsp;<span class="ident" id="2791190">v</span><span class="op" id="2791191">.</span><span class="ident" id="2791192">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791198">t</span>&nbsp;<span class="op" id="2791200">:=</span>&nbsp;<span class="ident" id="2791203">typ</span><span class="op" id="2791206">.</span><span class="ident" id="2791207">common</span><span class="op" id="2791213">(</span><span class="op" id="2791214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791217">ptr</span>&nbsp;<span class="op" id="2791221">:=</span>&nbsp;<span class="ident" id="2791224">v</span><span class="op" id="2791225">.</span><span class="ident" id="2791226">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791231">if</span>&nbsp;<span class="ident" id="2791234">f</span><span class="op" id="2791235">&amp;</span><span class="ident" id="2791236">flagAddr</span>&nbsp;<span class="op" id="2791245">!=</span>&nbsp;<span class="num" id="2791248">0</span>&nbsp;<span class="op" id="2791250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2791254">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791296">c</span>&nbsp;<span class="op" id="2791298">:=</span>&nbsp;<span class="ident" id="2791301">unsafe_New</span><span class="op" id="2791311">(</span><span class="ident" id="2791312">t</span><span class="op" id="2791313">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791317">memmove</span><span class="op" id="2791324">(</span><span class="ident" id="2791325">c</span><span class="op" id="2791326">,</span>&nbsp;<span class="ident" id="2791328">ptr</span><span class="op" id="2791331">,</span>&nbsp;<span class="ident" id="2791333">t</span><span class="op" id="2791334">.</span><span class="ident" id="2791335">size</span><span class="op" id="2791339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791343">ptr</span>&nbsp;<span class="op" id="2791347">=</span>&nbsp;<span class="ident" id="2791349">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791353">f</span>&nbsp;<span class="op" id="2791355">&amp;^=</span>&nbsp;<span class="ident" id="2791359">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791372">return</span>&nbsp;<span class="ident" id="2791379">Value</span><span class="op" id="2791384">{</span><span class="ident" id="2791385">t</span><span class="op" id="2791386">,</span>&nbsp;<span class="ident" id="2791388">ptr</span><span class="op" id="2791391">,</span>&nbsp;<span class="ident" id="2791393">v</span><span class="op" id="2791394">.</span><span class="ident" id="2791395">flag</span><span class="op" id="2791399">&amp;</span><span class="ident" id="2791400">flagRO</span>&nbsp;<span class="op" id="2791407">|</span>&nbsp;<span class="ident" id="2791409">f</span><span class="op" id="2791410">}</span>&nbsp;<span class="comment" id="2791412">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2791437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791440">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2791476">func</span>&nbsp;<span class="ident" id="2791481">cvtT2I</span><span class="op" id="2791487">(</span><span class="ident" id="2791488">v</span>&nbsp;<span class="ident" id="2791490">Value</span><span class="op" id="2791495">,</span>&nbsp;<span class="ident" id="2791497">typ</span>&nbsp;<span class="ident" id="2791501">Type</span><span class="op" id="2791505">)</span>&nbsp;<span class="ident" id="2791507">Value</span>&nbsp;<span class="op" id="2791513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791516">target</span>&nbsp;<span class="op" id="2791523">:=</span>&nbsp;<span class="ident" id="2791526">unsafe_New</span><span class="op" id="2791536">(</span><span class="ident" id="2791537">typ</span><span class="op" id="2791540">.</span><span class="ident" id="2791541">common</span><span class="op" id="2791547">(</span><span class="op" id="2791548">)</span><span class="op" id="2791549">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791552">x</span>&nbsp;<span class="op" id="2791554">:=</span>&nbsp;<span class="ident" id="2791557">valueInterface</span><span class="op" id="2791571">(</span><span class="ident" id="2791572">v</span><span class="op" id="2791573">,</span>&nbsp;<span class="builtintype" id="2791575">false</span><span class="op" id="2791580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791583">if</span>&nbsp;<span class="ident" id="2791586">typ</span><span class="op" id="2791589">.</span><span class="ident" id="2791590">NumMethod</span><span class="op" id="2791599">(</span><span class="op" id="2791600">)</span>&nbsp;<span class="op" id="2791602">==</span>&nbsp;<span class="num" id="2791605">0</span>&nbsp;<span class="op" id="2791607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791611">*</span><span class="op" id="2791612">(</span><span class="op" id="2791613">*</span><span class="keyword" id="2791614">interface</span><span class="op" id="2791623">{</span><span class="op" id="2791624">}</span><span class="op" id="2791625">)</span><span class="op" id="2791626">(</span><span class="ident" id="2791627">target</span><span class="op" id="2791633">)</span>&nbsp;<span class="op" id="2791635">=</span>&nbsp;<span class="ident" id="2791637">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791640">}</span>&nbsp;<span class="keyword" id="2791642">else</span>&nbsp;<span class="op" id="2791647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791651">ifaceE2I</span><span class="op" id="2791659">(</span><span class="ident" id="2791660">typ</span><span class="op" id="2791663">.</span><span class="op" id="2791664">(</span><span class="op" id="2791665">*</span><span class="ident" id="2791666">rtype</span><span class="op" id="2791671">)</span><span class="op" id="2791672">,</span>&nbsp;<span class="ident" id="2791674">x</span><span class="op" id="2791675">,</span>&nbsp;<span class="ident" id="2791677">target</span><span class="op" id="2791683">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791689">return</span>&nbsp;<span class="ident" id="2791696">Value</span><span class="op" id="2791701">{</span><span class="ident" id="2791702">typ</span><span class="op" id="2791705">.</span><span class="ident" id="2791706">common</span><span class="op" id="2791712">(</span><span class="op" id="2791713">)</span><span class="op" id="2791714">,</span>&nbsp;<span class="ident" id="2791716">target</span><span class="op" id="2791722">,</span>&nbsp;<span class="ident" id="2791724">v</span><span class="op" id="2791725">.</span><span class="ident" id="2791726">flag</span><span class="op" id="2791730">&amp;</span><span class="ident" id="2791731">flagRO</span>&nbsp;<span class="op" id="2791738">|</span>&nbsp;<span class="ident" id="2791740">flagIndir</span>&nbsp;<span class="op" id="2791750">|</span>&nbsp;<span class="ident" id="2791752">flag</span><span class="op" id="2791756">(</span><span class="ident" id="2791757">Interface</span><span class="op" id="2791766">)</span><span class="op" id="2791767">}</span><br>
<span class="lineno"></span><span class="op" id="2791769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791772">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2791809">func</span>&nbsp;<span class="ident" id="2791814">cvtI2I</span><span class="op" id="2791820">(</span><span class="ident" id="2791821">v</span>&nbsp;<span class="ident" id="2791823">Value</span><span class="op" id="2791828">,</span>&nbsp;<span class="ident" id="2791830">typ</span>&nbsp;<span class="ident" id="2791834">Type</span><span class="op" id="2791838">)</span>&nbsp;<span class="ident" id="2791840">Value</span>&nbsp;<span class="op" id="2791846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791849">if</span>&nbsp;<span class="ident" id="2791852">v</span><span class="op" id="2791853">.</span><span class="ident" id="2791854">IsNil</span><span class="op" id="2791859">(</span><span class="op" id="2791860">)</span>&nbsp;<span class="op" id="2791862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791866">ret</span>&nbsp;<span class="op" id="2791870">:=</span>&nbsp;<span class="ident" id="2791873">Zero</span><span class="op" id="2791877">(</span><span class="ident" id="2791878">typ</span><span class="op" id="2791881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2791885">ret</span><span class="op" id="2791888">.</span><span class="ident" id="2791889">flag</span>&nbsp;<span class="op" id="2791894">|=</span>&nbsp;<span class="ident" id="2791897">v</span><span class="op" id="2791898">.</span><span class="ident" id="2791899">flag</span>&nbsp;<span class="op" id="2791904">&amp;</span>&nbsp;<span class="ident" id="2791906">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791915">return</span>&nbsp;<span class="ident" id="2791922">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2791927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2791930">return</span>&nbsp;<span class="ident" id="2791937">cvtT2I</span><span class="op" id="2791943">(</span><span class="ident" id="2791944">v</span><span class="op" id="2791945">.</span><span class="ident" id="2791946">Elem</span><span class="op" id="2791950">(</span><span class="op" id="2791951">)</span><span class="op" id="2791952">,</span>&nbsp;<span class="ident" id="2791954">typ</span><span class="op" id="2791957">)</span><br>
<span class="lineno"></span><span class="op" id="2791959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791962">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2791991">func</span>&nbsp;<span class="ident" id="2791996">chancap</span><span class="op" id="2792003">(</span><span class="ident" id="2792004">ch</span>&nbsp;<span class="ident" id="2792007">unsafe</span><span class="op" id="2792013">.</span><span class="ident" id="2792014">Pointer</span><span class="op" id="2792021">)</span>&nbsp;<span class="builtintype" id="2792023">int</span><br>
<span class="lineno"></span><span class="keyword" id="2792027">func</span>&nbsp;<span class="ident" id="2792032">chanclose</span><span class="op" id="2792041">(</span><span class="ident" id="2792042">ch</span>&nbsp;<span class="ident" id="2792045">unsafe</span><span class="op" id="2792051">.</span><span class="ident" id="2792052">Pointer</span><span class="op" id="2792059">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792061">func</span>&nbsp;<span class="ident" id="2792066">chanlen</span><span class="op" id="2792073">(</span><span class="ident" id="2792074">ch</span>&nbsp;<span class="ident" id="2792077">unsafe</span><span class="op" id="2792083">.</span><span class="ident" id="2792084">Pointer</span><span class="op" id="2792091">)</span>&nbsp;<span class="builtintype" id="2792093">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2792098">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2792112">func</span>&nbsp;<span class="ident" id="2792117">chanrecv</span><span class="op" id="2792125">(</span><span class="ident" id="2792126">t</span>&nbsp;<span class="op" id="2792128">*</span><span class="ident" id="2792129">rtype</span><span class="op" id="2792134">,</span>&nbsp;<span class="ident" id="2792136">ch</span>&nbsp;<span class="ident" id="2792139">unsafe</span><span class="op" id="2792145">.</span><span class="ident" id="2792146">Pointer</span><span class="op" id="2792153">,</span>&nbsp;<span class="ident" id="2792155">nb</span>&nbsp;<span class="builtintype" id="2792158">bool</span><span class="op" id="2792162">,</span>&nbsp;<span class="ident" id="2792164">val</span>&nbsp;<span class="ident" id="2792168">unsafe</span><span class="op" id="2792174">.</span><span class="ident" id="2792175">Pointer</span><span class="op" id="2792182">)</span>&nbsp;<span class="op" id="2792184">(</span><span class="ident" id="2792185">selected</span><span class="op" id="2792193">,</span>&nbsp;<span class="ident" id="2792195">received</span>&nbsp;<span class="builtintype" id="2792204">bool</span><span class="op" id="2792208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2792211">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2792225">func</span>&nbsp;<span class="ident" id="2792230">chansend</span><span class="op" id="2792238">(</span><span class="ident" id="2792239">t</span>&nbsp;<span class="op" id="2792241">*</span><span class="ident" id="2792242">rtype</span><span class="op" id="2792247">,</span>&nbsp;<span class="ident" id="2792249">ch</span>&nbsp;<span class="ident" id="2792252">unsafe</span><span class="op" id="2792258">.</span><span class="ident" id="2792259">Pointer</span><span class="op" id="2792266">,</span>&nbsp;<span class="ident" id="2792268">val</span>&nbsp;<span class="ident" id="2792272">unsafe</span><span class="op" id="2792278">.</span><span class="ident" id="2792279">Pointer</span><span class="op" id="2792286">,</span>&nbsp;<span class="ident" id="2792288">nb</span>&nbsp;<span class="builtintype" id="2792291">bool</span><span class="op" id="2792295">)</span>&nbsp;<span class="builtintype" id="2792297">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2792303">func</span>&nbsp;<span class="ident" id="2792308">makechan</span><span class="op" id="2792316">(</span><span class="ident" id="2792317">typ</span>&nbsp;<span class="op" id="2792321">*</span><span class="ident" id="2792322">rtype</span><span class="op" id="2792327">,</span>&nbsp;<span class="ident" id="2792329">size</span>&nbsp;<span class="ident" id="2792334">uint64</span><span class="op" id="2792340">)</span>&nbsp;<span class="op" id="2792342">(</span><span class="ident" id="2792343">ch</span>&nbsp;<span class="ident" id="2792346">unsafe</span><span class="op" id="2792352">.</span><span class="ident" id="2792353">Pointer</span><span class="op" id="2792360">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792362">func</span>&nbsp;<span class="ident" id="2792367">makemap</span><span class="op" id="2792374">(</span><span class="ident" id="2792375">t</span>&nbsp;<span class="op" id="2792377">*</span><span class="ident" id="2792378">rtype</span><span class="op" id="2792383">)</span>&nbsp;<span class="op" id="2792385">(</span><span class="ident" id="2792386">m</span>&nbsp;<span class="ident" id="2792388">unsafe</span><span class="op" id="2792394">.</span><span class="ident" id="2792395">Pointer</span><span class="op" id="2792402">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792404">func</span>&nbsp;<span class="ident" id="2792409">mapaccess</span><span class="op" id="2792418">(</span><span class="ident" id="2792419">t</span>&nbsp;<span class="op" id="2792421">*</span><span class="ident" id="2792422">rtype</span><span class="op" id="2792427">,</span>&nbsp;<span class="ident" id="2792429">m</span>&nbsp;<span class="ident" id="2792431">unsafe</span><span class="op" id="2792437">.</span><span class="ident" id="2792438">Pointer</span><span class="op" id="2792445">,</span>&nbsp;<span class="ident" id="2792447">key</span>&nbsp;<span class="ident" id="2792451">unsafe</span><span class="op" id="2792457">.</span><span class="ident" id="2792458">Pointer</span><span class="op" id="2792465">)</span>&nbsp;<span class="op" id="2792467">(</span><span class="ident" id="2792468">val</span>&nbsp;<span class="ident" id="2792472">unsafe</span><span class="op" id="2792478">.</span><span class="ident" id="2792479">Pointer</span><span class="op" id="2792486">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792488">func</span>&nbsp;<span class="ident" id="2792493">mapassign</span><span class="op" id="2792502">(</span><span class="ident" id="2792503">t</span>&nbsp;<span class="op" id="2792505">*</span><span class="ident" id="2792506">rtype</span><span class="op" id="2792511">,</span>&nbsp;<span class="ident" id="2792513">m</span>&nbsp;<span class="ident" id="2792515">unsafe</span><span class="op" id="2792521">.</span><span class="ident" id="2792522">Pointer</span><span class="op" id="2792529">,</span>&nbsp;<span class="ident" id="2792531">key</span><span class="op" id="2792534">,</span>&nbsp;<span class="ident" id="2792536">val</span>&nbsp;<span class="ident" id="2792540">unsafe</span><span class="op" id="2792546">.</span><span class="ident" id="2792547">Pointer</span><span class="op" id="2792554">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792556">func</span>&nbsp;<span class="ident" id="2792561">mapdelete</span><span class="op" id="2792570">(</span><span class="ident" id="2792571">t</span>&nbsp;<span class="op" id="2792573">*</span><span class="ident" id="2792574">rtype</span><span class="op" id="2792579">,</span>&nbsp;<span class="ident" id="2792581">m</span>&nbsp;<span class="ident" id="2792583">unsafe</span><span class="op" id="2792589">.</span><span class="ident" id="2792590">Pointer</span><span class="op" id="2792597">,</span>&nbsp;<span class="ident" id="2792599">key</span>&nbsp;<span class="ident" id="2792603">unsafe</span><span class="op" id="2792609">.</span><span class="ident" id="2792610">Pointer</span><span class="op" id="2792617">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2792619">func</span>&nbsp;<span class="ident" id="2792624">mapiterinit</span><span class="op" id="2792635">(</span><span class="ident" id="2792636">t</span>&nbsp;<span class="op" id="2792638">*</span><span class="ident" id="2792639">rtype</span><span class="op" id="2792644">,</span>&nbsp;<span class="ident" id="2792646">m</span>&nbsp;<span class="ident" id="2792648">unsafe</span><span class="op" id="2792654">.</span><span class="ident" id="2792655">Pointer</span><span class="op" id="2792662">)</span>&nbsp;<span class="ident" id="2792664">unsafe</span><span class="op" id="2792670">.</span><span class="ident" id="2792671">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2792679">func</span>&nbsp;<span class="ident" id="2792684">mapiterkey</span><span class="op" id="2792694">(</span><span class="ident" id="2792695">it</span>&nbsp;<span class="ident" id="2792698">unsafe</span><span class="op" id="2792704">.</span><span class="ident" id="2792705">Pointer</span><span class="op" id="2792712">)</span>&nbsp;<span class="op" id="2792714">(</span><span class="ident" id="2792715">key</span>&nbsp;<span class="ident" id="2792719">unsafe</span><span class="op" id="2792725">.</span><span class="ident" id="2792726">Pointer</span><span class="op" id="2792733">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792735">func</span>&nbsp;<span class="ident" id="2792740">mapiternext</span><span class="op" id="2792751">(</span><span class="ident" id="2792752">it</span>&nbsp;<span class="ident" id="2792755">unsafe</span><span class="op" id="2792761">.</span><span class="ident" id="2792762">Pointer</span><span class="op" id="2792769">)</span><br>
<span class="lineno"></span><span class="keyword" id="2792771">func</span>&nbsp;<span class="ident" id="2792776">maplen</span><span class="op" id="2792782">(</span><span class="ident" id="2792783">m</span>&nbsp;<span class="ident" id="2792785">unsafe</span><span class="op" id="2792791">.</span><span class="ident" id="2792792">Pointer</span><span class="op" id="2792799">)</span>&nbsp;<span class="builtintype" id="2792801">int</span><br>
<span class="lineno"></span><span class="keyword" id="2792805">func</span>&nbsp;<span class="ident" id="2792810">call</span><span class="op" id="2792814">(</span><span class="ident" id="2792815">fn</span><span class="op" id="2792817">,</span>&nbsp;<span class="ident" id="2792819">arg</span>&nbsp;<span class="ident" id="2792823">unsafe</span><span class="op" id="2792829">.</span><span class="ident" id="2792830">Pointer</span><span class="op" id="2792837">,</span>&nbsp;<span class="ident" id="2792839">n</span>&nbsp;<span class="builtintype" id="2792841">uint32</span><span class="op" id="2792847">,</span>&nbsp;<span class="ident" id="2792849">retoffset</span>&nbsp;<span class="builtintype" id="2792859">uint32</span><span class="op" id="2792865">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2792868">func</span>&nbsp;<span class="ident" id="2792873">ifaceE2I</span><span class="op" id="2792881">(</span><span class="ident" id="2792882">t</span>&nbsp;<span class="op" id="2792884">*</span><span class="ident" id="2792885">rtype</span><span class="op" id="2792890">,</span>&nbsp;<span class="ident" id="2792892">src</span>&nbsp;<span class="keyword" id="2792896">interface</span><span class="op" id="2792905">{</span><span class="op" id="2792906">}</span><span class="op" id="2792907">,</span>&nbsp;<span class="ident" id="2792909">dst</span>&nbsp;<span class="ident" id="2792913">unsafe</span><span class="op" id="2792919">.</span><span class="ident" id="2792920">Pointer</span><span class="op" id="2792927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2792930">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2792944">func</span>&nbsp;<span class="ident" id="2792949">memmove</span><span class="op" id="2792956">(</span><span class="ident" id="2792957">adst</span><span class="op" id="2792961">,</span>&nbsp;<span class="ident" id="2792963">asrc</span>&nbsp;<span class="ident" id="2792968">unsafe</span><span class="op" id="2792974">.</span><span class="ident" id="2792975">Pointer</span><span class="op" id="2792982">,</span>&nbsp;<span class="ident" id="2792984">n</span>&nbsp;<span class="builtintype" id="2792986">uintptr</span><span class="op" id="2792993">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2792996">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2793050">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2793111">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2793142">func</span>&nbsp;<span class="ident" id="2793147">escapes</span><span class="op" id="2793154">(</span><span class="ident" id="2793155">x</span>&nbsp;<span class="keyword" id="2793157">interface</span><span class="op" id="2793166">{</span><span class="op" id="2793167">}</span><span class="op" id="2793168">)</span>&nbsp;<span class="op" id="2793170">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2793173">if</span>&nbsp;<span class="ident" id="2793176">dummy</span><span class="op" id="2793181">.</span><span class="ident" id="2793182">b</span>&nbsp;<span class="op" id="2793184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2793188">dummy</span><span class="op" id="2793193">.</span><span class="ident" id="2793194">x</span>&nbsp;<span class="op" id="2793196">=</span>&nbsp;<span class="ident" id="2793198">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2793201">}</span><br>
<span class="lineno"></span><span class="op" id="2793203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2793206">var</span>&nbsp;<span class="ident" id="2793210">dummy</span>&nbsp;<span class="keyword" id="2793216">struct</span>&nbsp;<span class="op" id="2793223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2793226">b</span>&nbsp;<span class="builtintype" id="2793228">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2793234">x</span>&nbsp;<span class="keyword" id="2793236">interface</span><span class="op" id="2793245">{</span><span class="op" id="2793246">}</span><br>
<span class="lineno"></span><span class="op" id="2793248">}</span>
</div>
</body>
</html>
