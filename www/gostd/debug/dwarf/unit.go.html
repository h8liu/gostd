<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6159026">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6159082">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6159136">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6159187">package</span>&nbsp;<span class="ident" id="6159195">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6159202">import</span>&nbsp;<span class="string" id="6159209">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159220">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="6159287">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6159350">type</span>&nbsp;<span class="ident" id="6159355">unit</span>&nbsp;<span class="keyword" id="6159360">struct</span>&nbsp;<span class="op" id="6159367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159370">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6159377">Offset</span>&nbsp;<span class="comment" id="6159384">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159436">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159443">Offset</span>&nbsp;<span class="comment" id="6159450">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159500">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6159507">[</span><span class="op" id="6159508">]</span><span class="builtintype" id="6159509">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159515">atable</span>&nbsp;<span class="ident" id="6159522">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159535">asize</span>&nbsp;&nbsp;<span class="builtintype" id="6159542">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159547">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6159554">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159559">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6159566">bool</span>&nbsp;<span class="comment" id="6159571">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="6159603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159606">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6159646">func</span>&nbsp;<span class="op" id="6159651">(</span><span class="ident" id="6159652">u</span>&nbsp;<span class="op" id="6159654">*</span><span class="ident" id="6159655">unit</span><span class="op" id="6159659">)</span>&nbsp;<span class="ident" id="6159661">version</span><span class="op" id="6159668">(</span><span class="op" id="6159669">)</span>&nbsp;<span class="builtintype" id="6159671">int</span>&nbsp;<span class="op" id="6159675">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159678">return</span>&nbsp;<span class="ident" id="6159685">u</span><span class="op" id="6159686">.</span><span class="ident" id="6159687">vers</span><br>
<span class="lineno"></span><span class="op" id="6159692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6159695">func</span>&nbsp;<span class="op" id="6159700">(</span><span class="ident" id="6159701">u</span>&nbsp;<span class="op" id="6159703">*</span><span class="ident" id="6159704">unit</span><span class="op" id="6159708">)</span>&nbsp;<span class="ident" id="6159710">dwarf64</span><span class="op" id="6159717">(</span><span class="op" id="6159718">)</span>&nbsp;<span class="op" id="6159720">(</span><span class="builtintype" id="6159721">bool</span><span class="op" id="6159725">,</span>&nbsp;<span class="builtintype" id="6159727">bool</span><span class="op" id="6159731">)</span>&nbsp;<span class="op" id="6159733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159736">return</span>&nbsp;<span class="ident" id="6159743">u</span><span class="op" id="6159744">.</span><span class="ident" id="6159745">is64</span><span class="op" id="6159749">,</span>&nbsp;<span class="builtintype" id="6159751">true</span><br>
<span class="lineno">30</span><span class="op" id="6159756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6159759">func</span>&nbsp;<span class="op" id="6159764">(</span><span class="ident" id="6159765">u</span>&nbsp;<span class="op" id="6159767">*</span><span class="ident" id="6159768">unit</span><span class="op" id="6159772">)</span>&nbsp;<span class="ident" id="6159774">addrsize</span><span class="op" id="6159782">(</span><span class="op" id="6159783">)</span>&nbsp;<span class="builtintype" id="6159785">int</span>&nbsp;<span class="op" id="6159789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159792">return</span>&nbsp;<span class="ident" id="6159799">u</span><span class="op" id="6159800">.</span><span class="ident" id="6159801">asize</span><br>
<span class="lineno"></span><span class="op" id="6159807">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6159810">func</span>&nbsp;<span class="op" id="6159815">(</span><span class="ident" id="6159816">d</span>&nbsp;<span class="op" id="6159818">*</span><span class="ident" id="6159819">Data</span><span class="op" id="6159823">)</span>&nbsp;<span class="ident" id="6159825">parseUnits</span><span class="op" id="6159835">(</span><span class="op" id="6159836">)</span>&nbsp;<span class="op" id="6159838">(</span><span class="op" id="6159839">[</span><span class="op" id="6159840">]</span><span class="ident" id="6159841">unit</span><span class="op" id="6159845">,</span>&nbsp;<span class="builtintype" id="6159847">error</span><span class="op" id="6159852">)</span>&nbsp;<span class="op" id="6159854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6159857">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159874">nunit</span>&nbsp;<span class="op" id="6159880">:=</span>&nbsp;<span class="num" id="6159883">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6159886">b</span>&nbsp;<span class="op" id="6159888">:=</span>&nbsp;<span class="ident" id="6159891">makeBuf</span><span class="op" id="6159898">(</span><span class="ident" id="6159899">d</span><span class="op" id="6159900">,</span>&nbsp;<span class="ident" id="6159902">unknownFormat</span><span class="op" id="6159915">{</span><span class="op" id="6159916">}</span><span class="op" id="6159917">,</span>&nbsp;<span class="string" id="6159919">&#34;info&#34;</span><span class="op" id="6159925">,</span>&nbsp;<span class="num" id="6159927">0</span><span class="op" id="6159928">,</span>&nbsp;<span class="ident" id="6159930">d</span><span class="op" id="6159931">.</span><span class="ident" id="6159932">info</span><span class="op" id="6159936">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159939">for</span>&nbsp;<span class="builtinfunc" id="6159943">len</span><span class="op" id="6159946">(</span><span class="ident" id="6159947">b</span><span class="op" id="6159948">.</span><span class="ident" id="6159949">data</span><span class="op" id="6159953">)</span>&nbsp;<span class="op" id="6159955">&gt;</span>&nbsp;<span class="num" id="6159957">0</span>&nbsp;<span class="op" id="6159959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6159963">len</span>&nbsp;<span class="op" id="6159967">:=</span>&nbsp;<span class="ident" id="6159970">b</span><span class="op" id="6159971">.</span><span class="builtintype" id="6159972">uint32</span><span class="op" id="6159978">(</span><span class="op" id="6159979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6159983">if</span>&nbsp;<span class="builtinfunc" id="6159986">len</span>&nbsp;<span class="op" id="6159990">==</span>&nbsp;<span class="num" id="6159993">0xffffffff</span>&nbsp;<span class="op" id="6160004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160009">len64</span>&nbsp;<span class="op" id="6160015">:=</span>&nbsp;<span class="ident" id="6160018">b</span><span class="op" id="6160019">.</span><span class="ident" id="6160020">uint64</span><span class="op" id="6160026">(</span><span class="op" id="6160027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160032">if</span>&nbsp;<span class="ident" id="6160035">len64</span>&nbsp;<span class="op" id="6160041">!=</span>&nbsp;<span class="ident" id="6160044">uint64</span><span class="op" id="6160050">(</span><span class="builtintype" id="6160051">uint32</span><span class="op" id="6160057">(</span><span class="ident" id="6160058">len64</span><span class="op" id="6160063">)</span><span class="op" id="6160064">)</span>&nbsp;<span class="op" id="6160066">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160072">b</span><span class="op" id="6160073">.</span><span class="builtintype" id="6160074">error</span><span class="op" id="6160079">(</span><span class="string" id="6160080">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="6160102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160108">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6160122">len</span>&nbsp;<span class="op" id="6160126">=</span>&nbsp;<span class="builtintype" id="6160128">uint32</span><span class="op" id="6160134">(</span><span class="ident" id="6160135">len64</span><span class="op" id="6160140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160144">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160148">b</span><span class="op" id="6160149">.</span><span class="ident" id="6160150">skip</span><span class="op" id="6160154">(</span><span class="builtintype" id="6160155">int</span><span class="op" id="6160158">(</span><span class="builtinfunc" id="6160159">len</span><span class="op" id="6160162">)</span><span class="op" id="6160163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160167">nunit</span><span class="op" id="6160172">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160179">if</span>&nbsp;<span class="ident" id="6160182">b</span><span class="op" id="6160183">.</span><span class="ident" id="6160184">err</span>&nbsp;<span class="op" id="6160188">!=</span>&nbsp;<span class="ident" id="6160191">nil</span>&nbsp;<span class="op" id="6160195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160199">return</span>&nbsp;<span class="ident" id="6160206">nil</span><span class="op" id="6160209">,</span>&nbsp;<span class="ident" id="6160211">b</span><span class="op" id="6160212">.</span><span class="ident" id="6160213">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6160222">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160262">b</span>&nbsp;<span class="op" id="6160264">=</span>&nbsp;<span class="ident" id="6160266">makeBuf</span><span class="op" id="6160273">(</span><span class="ident" id="6160274">d</span><span class="op" id="6160275">,</span>&nbsp;<span class="ident" id="6160277">unknownFormat</span><span class="op" id="6160290">{</span><span class="op" id="6160291">}</span><span class="op" id="6160292">,</span>&nbsp;<span class="string" id="6160294">&#34;info&#34;</span><span class="op" id="6160300">,</span>&nbsp;<span class="num" id="6160302">0</span><span class="op" id="6160303">,</span>&nbsp;<span class="ident" id="6160305">d</span><span class="op" id="6160306">.</span><span class="ident" id="6160307">info</span><span class="op" id="6160311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160314">units</span>&nbsp;<span class="op" id="6160320">:=</span>&nbsp;<span class="builtinfunc" id="6160323">make</span><span class="op" id="6160327">(</span><span class="op" id="6160328">[</span><span class="op" id="6160329">]</span><span class="ident" id="6160330">unit</span><span class="op" id="6160334">,</span>&nbsp;<span class="ident" id="6160336">nunit</span><span class="op" id="6160341">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160344">for</span>&nbsp;<span class="ident" id="6160348">i</span>&nbsp;<span class="op" id="6160350">:=</span>&nbsp;<span class="keyword" id="6160353">range</span>&nbsp;<span class="ident" id="6160359">units</span>&nbsp;<span class="op" id="6160365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160369">u</span>&nbsp;<span class="op" id="6160371">:=</span>&nbsp;<span class="op" id="6160374">&amp;</span><span class="ident" id="6160375">units</span><span class="op" id="6160380">[</span><span class="ident" id="6160381">i</span><span class="op" id="6160382">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160386">u</span><span class="op" id="6160387">.</span><span class="ident" id="6160388">base</span>&nbsp;<span class="op" id="6160393">=</span>&nbsp;<span class="ident" id="6160395">b</span><span class="op" id="6160396">.</span><span class="ident" id="6160397">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160403">n</span>&nbsp;<span class="op" id="6160405">:=</span>&nbsp;<span class="ident" id="6160408">b</span><span class="op" id="6160409">.</span><span class="builtintype" id="6160410">uint32</span><span class="op" id="6160416">(</span><span class="op" id="6160417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160421">if</span>&nbsp;<span class="ident" id="6160424">n</span>&nbsp;<span class="op" id="6160426">==</span>&nbsp;<span class="num" id="6160429">0xffffffff</span>&nbsp;<span class="op" id="6160440">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160445">u</span><span class="op" id="6160446">.</span><span class="ident" id="6160447">is64</span>&nbsp;<span class="op" id="6160452">=</span>&nbsp;<span class="builtintype" id="6160454">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160462">n</span>&nbsp;<span class="op" id="6160464">=</span>&nbsp;<span class="builtintype" id="6160466">uint32</span><span class="op" id="6160472">(</span><span class="ident" id="6160473">b</span><span class="op" id="6160474">.</span><span class="ident" id="6160475">uint64</span><span class="op" id="6160481">(</span><span class="op" id="6160482">)</span><span class="op" id="6160483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160491">vers</span>&nbsp;<span class="op" id="6160496">:=</span>&nbsp;<span class="ident" id="6160499">b</span><span class="op" id="6160500">.</span><span class="builtintype" id="6160501">uint16</span><span class="op" id="6160507">(</span><span class="op" id="6160508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160512">if</span>&nbsp;<span class="ident" id="6160515">vers</span>&nbsp;<span class="op" id="6160520">!=</span>&nbsp;<span class="num" id="6160523">2</span>&nbsp;<span class="op" id="6160525">&amp;&amp;</span>&nbsp;<span class="ident" id="6160528">vers</span>&nbsp;<span class="op" id="6160533">!=</span>&nbsp;<span class="num" id="6160536">3</span>&nbsp;<span class="op" id="6160538">&amp;&amp;</span>&nbsp;<span class="ident" id="6160541">vers</span>&nbsp;<span class="op" id="6160546">!=</span>&nbsp;<span class="num" id="6160549">4</span>&nbsp;<span class="op" id="6160551">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160556">b</span><span class="op" id="6160557">.</span><span class="builtintype" id="6160558">error</span><span class="op" id="6160563">(</span><span class="string" id="6160564">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="6160593">+</span>&nbsp;<span class="ident" id="6160595">strconv</span><span class="op" id="6160602">.</span><span class="ident" id="6160603">Itoa</span><span class="op" id="6160607">(</span><span class="builtintype" id="6160608">int</span><span class="op" id="6160611">(</span><span class="ident" id="6160612">vers</span><span class="op" id="6160616">)</span><span class="op" id="6160617">)</span><span class="op" id="6160618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160623">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160635">u</span><span class="op" id="6160636">.</span><span class="ident" id="6160637">vers</span>&nbsp;<span class="op" id="6160642">=</span>&nbsp;<span class="builtintype" id="6160644">int</span><span class="op" id="6160647">(</span><span class="ident" id="6160648">vers</span><span class="op" id="6160652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160656">atable</span><span class="op" id="6160662">,</span>&nbsp;<span class="ident" id="6160664">err</span>&nbsp;<span class="op" id="6160668">:=</span>&nbsp;<span class="ident" id="6160671">d</span><span class="op" id="6160672">.</span><span class="ident" id="6160673">parseAbbrev</span><span class="op" id="6160684">(</span><span class="ident" id="6160685">b</span><span class="op" id="6160686">.</span><span class="builtintype" id="6160687">uint32</span><span class="op" id="6160693">(</span><span class="op" id="6160694">)</span><span class="op" id="6160695">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160699">if</span>&nbsp;<span class="ident" id="6160702">err</span>&nbsp;<span class="op" id="6160706">!=</span>&nbsp;<span class="ident" id="6160709">nil</span>&nbsp;<span class="op" id="6160713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160718">if</span>&nbsp;<span class="ident" id="6160721">b</span><span class="op" id="6160722">.</span><span class="ident" id="6160723">err</span>&nbsp;<span class="op" id="6160727">==</span>&nbsp;<span class="ident" id="6160730">nil</span>&nbsp;<span class="op" id="6160734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160740">b</span><span class="op" id="6160741">.</span><span class="ident" id="6160742">err</span>&nbsp;<span class="op" id="6160746">=</span>&nbsp;<span class="ident" id="6160748">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160760">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160772">u</span><span class="op" id="6160773">.</span><span class="ident" id="6160774">atable</span>&nbsp;<span class="op" id="6160781">=</span>&nbsp;<span class="ident" id="6160783">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160792">u</span><span class="op" id="6160793">.</span><span class="ident" id="6160794">asize</span>&nbsp;<span class="op" id="6160800">=</span>&nbsp;<span class="builtintype" id="6160802">int</span><span class="op" id="6160805">(</span><span class="ident" id="6160806">b</span><span class="op" id="6160807">.</span><span class="builtintype" id="6160808">uint8</span><span class="op" id="6160813">(</span><span class="op" id="6160814">)</span><span class="op" id="6160815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160819">u</span><span class="op" id="6160820">.</span><span class="ident" id="6160821">off</span>&nbsp;<span class="op" id="6160825">=</span>&nbsp;<span class="ident" id="6160827">b</span><span class="op" id="6160828">.</span><span class="ident" id="6160829">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6160835">u</span><span class="op" id="6160836">.</span><span class="ident" id="6160837">data</span>&nbsp;<span class="op" id="6160842">=</span>&nbsp;<span class="ident" id="6160844">b</span><span class="op" id="6160845">.</span><span class="ident" id="6160846">bytes</span><span class="op" id="6160851">(</span><span class="builtintype" id="6160852">int</span><span class="op" id="6160855">(</span><span class="ident" id="6160856">n</span>&nbsp;<span class="op" id="6160858">-</span>&nbsp;<span class="op" id="6160860">(</span><span class="num" id="6160861">2</span>&nbsp;<span class="op" id="6160863">+</span>&nbsp;<span class="num" id="6160865">4</span>&nbsp;<span class="op" id="6160867">+</span>&nbsp;<span class="num" id="6160869">1</span><span class="op" id="6160870">)</span><span class="op" id="6160871">)</span><span class="op" id="6160872">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160878">if</span>&nbsp;<span class="ident" id="6160881">b</span><span class="op" id="6160882">.</span><span class="ident" id="6160883">err</span>&nbsp;<span class="op" id="6160887">!=</span>&nbsp;<span class="ident" id="6160890">nil</span>&nbsp;<span class="op" id="6160894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160898">return</span>&nbsp;<span class="ident" id="6160905">nil</span><span class="op" id="6160908">,</span>&nbsp;<span class="ident" id="6160910">b</span><span class="op" id="6160911">.</span><span class="ident" id="6160912">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6160917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6160920">return</span>&nbsp;<span class="ident" id="6160927">units</span><span class="op" id="6160932">,</span>&nbsp;<span class="ident" id="6160934">nil</span><br>
<span class="lineno">90</span><span class="op" id="6160938">}</span>
</div>
</body>
</html>
