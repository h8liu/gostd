<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3513453">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3513508">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3513562">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3513613">//&nbsp;Package&nbsp;html&nbsp;provides&nbsp;functions&nbsp;for&nbsp;escaping&nbsp;and&nbsp;unescaping&nbsp;HTML&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="3513687">package</span>&nbsp;<span class="ident" id="3513695">html</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3513701">import</span>&nbsp;<span class="op" id="3513708">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3513711">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3513720">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3513731">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3513746">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3513749">type</span>&nbsp;<span class="ident" id="3513754">writer</span>&nbsp;<span class="keyword" id="3513761">interface</span>&nbsp;<span class="op" id="3513771">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3513774">WriteString</span><span class="op" id="3513785">(</span><span class="builtintype" id="3513786">string</span><span class="op" id="3513792">)</span>&nbsp;<span class="op" id="3513794">(</span><span class="builtintype" id="3513795">int</span><span class="op" id="3513798">,</span>&nbsp;<span class="builtintype" id="3513800">error</span><span class="op" id="3513805">)</span><br>
<span class="lineno"></span><span class="op" id="3513807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3513810">//&nbsp;These&nbsp;replacements&nbsp;permit&nbsp;compatibility&nbsp;with&nbsp;old&nbsp;numeric&nbsp;entities&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3513884">//&nbsp;assumed&nbsp;Windows-1252&nbsp;encoding.</span><br>
<span class="lineno">20</span><span class="comment" id="3513918">//&nbsp;http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html#consume-a-character-reference</span><br>
<span class="lineno"></span><span class="keyword" id="3514029">var</span>&nbsp;<span class="ident" id="3514033">replacementTable</span>&nbsp;<span class="op" id="3514050">=</span>&nbsp;<span class="op" id="3514052">[</span><span class="op" id="3514053">...</span><span class="op" id="3514056">]</span><span class="builtintype" id="3514057">rune</span><span class="op" id="3514061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514064">&#39;\u20AC&#39;</span><span class="op" id="3514072">,</span>&nbsp;<span class="comment" id="3514074">//&nbsp;First&nbsp;entry&nbsp;is&nbsp;what&nbsp;0x80&nbsp;should&nbsp;be&nbsp;replaced&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514128">&#39;\u0081&#39;</span><span class="op" id="3514136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514139">&#39;\u201A&#39;</span><span class="op" id="3514147">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514150">&#39;\u0192&#39;</span><span class="op" id="3514158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514161">&#39;\u201E&#39;</span><span class="op" id="3514169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514172">&#39;\u2026&#39;</span><span class="op" id="3514180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514183">&#39;\u2020&#39;</span><span class="op" id="3514191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514194">&#39;\u2021&#39;</span><span class="op" id="3514202">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514205">&#39;\u02C6&#39;</span><span class="op" id="3514213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514216">&#39;\u2030&#39;</span><span class="op" id="3514224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514227">&#39;\u0160&#39;</span><span class="op" id="3514235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514238">&#39;\u2039&#39;</span><span class="op" id="3514246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514249">&#39;\u0152&#39;</span><span class="op" id="3514257">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514260">&#39;\u008D&#39;</span><span class="op" id="3514268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514271">&#39;\u017D&#39;</span><span class="op" id="3514279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514282">&#39;\u008F&#39;</span><span class="op" id="3514290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514293">&#39;\u0090&#39;</span><span class="op" id="3514301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514304">&#39;\u2018&#39;</span><span class="op" id="3514312">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514315">&#39;\u2019&#39;</span><span class="op" id="3514323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514326">&#39;\u201C&#39;</span><span class="op" id="3514334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514337">&#39;\u201D&#39;</span><span class="op" id="3514345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514348">&#39;\u2022&#39;</span><span class="op" id="3514356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514359">&#39;\u2013&#39;</span><span class="op" id="3514367">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514370">&#39;\u2014&#39;</span><span class="op" id="3514378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514381">&#39;\u02DC&#39;</span><span class="op" id="3514389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514392">&#39;\u2122&#39;</span><span class="op" id="3514400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514403">&#39;\u0161&#39;</span><span class="op" id="3514411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514414">&#39;\u203A&#39;</span><span class="op" id="3514422">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514425">&#39;\u0153&#39;</span><span class="op" id="3514433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514436">&#39;\u009D&#39;</span><span class="op" id="3514444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514447">&#39;\u017E&#39;</span><span class="op" id="3514455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3514458">&#39;\u0178&#39;</span><span class="op" id="3514466">,</span>&nbsp;<span class="comment" id="3514468">//&nbsp;Last&nbsp;entry&nbsp;is&nbsp;0x9F.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3514492">//&nbsp;0x00-&gt;&#39;\uFFFD&#39;&nbsp;is&nbsp;handled&nbsp;programmatically.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3514540">//&nbsp;0x0D-&gt;&#39;\u000D&#39;&nbsp;is&nbsp;a&nbsp;no-op.</span><br>
<span class="lineno"></span><span class="op" id="3514570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3514573">//&nbsp;unescapeEntity&nbsp;reads&nbsp;an&nbsp;entity&nbsp;like&nbsp;&#34;&amp;lt;&#34;&nbsp;from&nbsp;b[src:]&nbsp;and&nbsp;writes&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3514647">//&nbsp;corresponding&nbsp;&#34;&lt;&#34;&nbsp;to&nbsp;b[dst:],&nbsp;returning&nbsp;the&nbsp;incremented&nbsp;dst&nbsp;and&nbsp;src&nbsp;cursors.</span><br>
<span class="lineno">60</span><span class="comment" id="3514727">//&nbsp;Precondition:&nbsp;b[src]&nbsp;==&nbsp;&#39;&amp;&#39;&nbsp;&amp;&amp;&nbsp;dst&nbsp;&lt;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3514773">//&nbsp;attribute&nbsp;should&nbsp;be&nbsp;true&nbsp;if&nbsp;parsing&nbsp;an&nbsp;attribute&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3514832">func</span>&nbsp;<span class="ident" id="3514837">unescapeEntity</span><span class="op" id="3514851">(</span><span class="ident" id="3514852">b</span>&nbsp;<span class="op" id="3514854">[</span><span class="op" id="3514855">]</span><span class="builtintype" id="3514856">byte</span><span class="op" id="3514860">,</span>&nbsp;<span class="ident" id="3514862">dst</span><span class="op" id="3514865">,</span>&nbsp;<span class="ident" id="3514867">src</span>&nbsp;<span class="builtintype" id="3514871">int</span><span class="op" id="3514874">,</span>&nbsp;<span class="ident" id="3514876">attribute</span>&nbsp;<span class="builtintype" id="3514886">bool</span><span class="op" id="3514890">)</span>&nbsp;<span class="op" id="3514892">(</span><span class="ident" id="3514893">dst1</span><span class="op" id="3514897">,</span>&nbsp;<span class="ident" id="3514899">src1</span>&nbsp;<span class="builtintype" id="3514904">int</span><span class="op" id="3514907">)</span>&nbsp;<span class="op" id="3514909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3514912">//&nbsp;http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html#consume-a-character-reference</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3515025">//&nbsp;i&nbsp;starts&nbsp;at&nbsp;1&nbsp;because&nbsp;we&nbsp;already&nbsp;know&nbsp;that&nbsp;s[0]&nbsp;==&nbsp;&#39;&amp;&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515085">i</span><span class="op" id="3515086">,</span>&nbsp;<span class="ident" id="3515088">s</span>&nbsp;<span class="op" id="3515090">:=</span>&nbsp;<span class="num" id="3515093">1</span><span class="op" id="3515094">,</span>&nbsp;<span class="ident" id="3515096"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515097">[</span><span class="ident" id="3515098"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3515101">:</span><span class="op" id="3515102">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515106">if</span>&nbsp;<span class="builtinfunc" id="3515109">len</span><span class="op" id="3515112">(</span><span class="ident" id="3515113"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515114">)</span>&nbsp;<span class="op" id="3515116">&lt;=</span>&nbsp;<span class="num" id="3515119">1</span>&nbsp;<span class="op" id="3515121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515125"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515126">[</span><span class="ident" id="3515127"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3515130">]</span>&nbsp;<span class="op" id="3515132">=</span>&nbsp;<span class="ident" id="3515134"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515135">[</span><span class="ident" id="3515136"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3515139">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515143">return</span>&nbsp;<span class="ident" id="3515150"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3515154">+</span>&nbsp;<span class="num" id="3515156">1</span><span class="op" id="3515157">,</span>&nbsp;<span class="ident" id="3515159"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3515163">+</span>&nbsp;<span class="num" id="3515165">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515172">if</span>&nbsp;<span class="ident" id="3515175"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515176">[</span><span class="ident" id="3515177"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515178">]</span>&nbsp;<span class="op" id="3515180">==</span>&nbsp;<span class="string" id="3515183">&#39;#&#39;</span>&nbsp;<span class="op" id="3515187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515191">if</span>&nbsp;<span class="builtinfunc" id="3515194">len</span><span class="op" id="3515197">(</span><span class="ident" id="3515198"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515199">)</span>&nbsp;<span class="op" id="3515201">&lt;=</span>&nbsp;<span class="num" id="3515204">3</span>&nbsp;<span class="op" id="3515206">{</span>&nbsp;<span class="comment" id="3515208">//&nbsp;We&nbsp;need&nbsp;to&nbsp;have&nbsp;at&nbsp;least&nbsp;&#34;&amp;#.&#34;.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515246"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515247">[</span><span class="ident" id="3515248"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3515251">]</span>&nbsp;<span class="op" id="3515253">=</span>&nbsp;<span class="ident" id="3515255"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515256">[</span><span class="ident" id="3515257"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3515260">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515265">return</span>&nbsp;<span class="ident" id="3515272"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3515276">+</span>&nbsp;<span class="num" id="3515278">1</span><span class="op" id="3515279">,</span>&nbsp;<span class="ident" id="3515281"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3515285">+</span>&nbsp;<span class="num" id="3515287">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515295"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515296">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515301">c</span>&nbsp;<span class="op" id="3515303">:=</span>&nbsp;<span class="ident" id="3515306"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515307">[</span><span class="ident" id="3515308"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515309">]</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515313">hex</span>&nbsp;<span class="op" id="3515317">:=</span>&nbsp;<span class="ident" id="3515320">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515328">if</span>&nbsp;<span class="ident" id="3515331"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515333">==</span>&nbsp;<span class="string" id="3515336">&#39;x&#39;</span>&nbsp;<span class="op" id="3515340">||</span>&nbsp;<span class="ident" id="3515343"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515345">==</span>&nbsp;<span class="string" id="3515348">&#39;X&#39;</span>&nbsp;<span class="op" id="3515352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515357"><a href="/html/escape.go.html#3515313">hex</a></span>&nbsp;<span class="op" id="3515361">=</span>&nbsp;<span class="ident" id="3515363">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515371"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515372">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515377">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515382">x</span>&nbsp;<span class="op" id="3515384">:=</span>&nbsp;<span class="string" id="3515387">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515396">for</span>&nbsp;<span class="ident" id="3515400"><a href="/html/escape.go.html#3515085">i</a></span>&nbsp;<span class="op" id="3515402">&lt;</span>&nbsp;<span class="builtinfunc" id="3515404">len</span><span class="op" id="3515407">(</span><span class="ident" id="3515408"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515409">)</span>&nbsp;<span class="op" id="3515411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515416"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515418">=</span>&nbsp;<span class="ident" id="3515420"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3515421">[</span><span class="ident" id="3515422"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515423">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515428"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515429">++</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515435">if</span>&nbsp;<span class="ident" id="3515438"><a href="/html/escape.go.html#3515313">hex</a></span>&nbsp;<span class="op" id="3515442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515448">if</span>&nbsp;<span class="string" id="3515451">&#39;0&#39;</span>&nbsp;<span class="op" id="3515455">&lt;=</span>&nbsp;<span class="ident" id="3515458"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515460">&amp;&amp;</span>&nbsp;<span class="ident" id="3515463"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515465">&lt;=</span>&nbsp;<span class="string" id="3515468">&#39;9&#39;</span>&nbsp;<span class="op" id="3515472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515479"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515481">=</span>&nbsp;<span class="num" id="3515483">16</span><span class="op" id="3515485">*</span><span class="ident" id="3515486"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515488">+</span>&nbsp;<span class="builtintype" id="3515490">rune</span><span class="op" id="3515494">(</span><span class="ident" id="3515495"><a href="/html/escape.go.html#3515301">c</a></span><span class="op" id="3515496">)</span>&nbsp;<span class="op" id="3515498">-</span>&nbsp;<span class="string" id="3515500">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515509">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515522">}</span>&nbsp;<span class="keyword" id="3515524">else</span>&nbsp;<span class="keyword" id="3515529">if</span>&nbsp;<span class="string" id="3515532">&#39;a&#39;</span>&nbsp;<span class="op" id="3515536">&lt;=</span>&nbsp;<span class="ident" id="3515539"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515541">&amp;&amp;</span>&nbsp;<span class="ident" id="3515544"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515546">&lt;=</span>&nbsp;<span class="string" id="3515549">&#39;f&#39;</span>&nbsp;<span class="op" id="3515553">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515560"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515562">=</span>&nbsp;<span class="num" id="3515564">16</span><span class="op" id="3515566">*</span><span class="ident" id="3515567"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515569">+</span>&nbsp;<span class="builtintype" id="3515571">rune</span><span class="op" id="3515575">(</span><span class="ident" id="3515576"><a href="/html/escape.go.html#3515301">c</a></span><span class="op" id="3515577">)</span>&nbsp;<span class="op" id="3515579">-</span>&nbsp;<span class="string" id="3515581">&#39;a&#39;</span>&nbsp;<span class="op" id="3515585">+</span>&nbsp;<span class="num" id="3515587">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515595">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515608">}</span>&nbsp;<span class="keyword" id="3515610">else</span>&nbsp;<span class="keyword" id="3515615">if</span>&nbsp;<span class="string" id="3515618">&#39;A&#39;</span>&nbsp;<span class="op" id="3515622">&lt;=</span>&nbsp;<span class="ident" id="3515625"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515627">&amp;&amp;</span>&nbsp;<span class="ident" id="3515630"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515632">&lt;=</span>&nbsp;<span class="string" id="3515635">&#39;F&#39;</span>&nbsp;<span class="op" id="3515639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515646"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515648">=</span>&nbsp;<span class="num" id="3515650">16</span><span class="op" id="3515652">*</span><span class="ident" id="3515653"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515655">+</span>&nbsp;<span class="builtintype" id="3515657">rune</span><span class="op" id="3515661">(</span><span class="ident" id="3515662"><a href="/html/escape.go.html#3515301">c</a></span><span class="op" id="3515663">)</span>&nbsp;<span class="op" id="3515665">-</span>&nbsp;<span class="string" id="3515667">&#39;A&#39;</span>&nbsp;<span class="op" id="3515671">+</span>&nbsp;<span class="num" id="3515673">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515681">continue</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515699">}</span>&nbsp;<span class="keyword" id="3515701">else</span>&nbsp;<span class="keyword" id="3515706">if</span>&nbsp;<span class="string" id="3515709">&#39;0&#39;</span>&nbsp;<span class="op" id="3515713">&lt;=</span>&nbsp;<span class="ident" id="3515716"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515718">&amp;&amp;</span>&nbsp;<span class="ident" id="3515721"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515723">&lt;=</span>&nbsp;<span class="string" id="3515726">&#39;9&#39;</span>&nbsp;<span class="op" id="3515730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515736"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515738">=</span>&nbsp;<span class="num" id="3515740">10</span><span class="op" id="3515742">*</span><span class="ident" id="3515743"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515745">+</span>&nbsp;<span class="builtintype" id="3515747">rune</span><span class="op" id="3515751">(</span><span class="ident" id="3515752"><a href="/html/escape.go.html#3515301">c</a></span><span class="op" id="3515753">)</span>&nbsp;<span class="op" id="3515755">-</span>&nbsp;<span class="string" id="3515757">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515765">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515777">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515782">if</span>&nbsp;<span class="ident" id="3515785"><a href="/html/escape.go.html#3515301">c</a></span>&nbsp;<span class="op" id="3515787">!=</span>&nbsp;<span class="string" id="3515790">&#39;;&#39;</span>&nbsp;<span class="op" id="3515794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515800"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3515801">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515812">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515820">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515825">if</span>&nbsp;<span class="ident" id="3515828"><a href="/html/escape.go.html#3515085">i</a></span>&nbsp;<span class="op" id="3515830">&lt;=</span>&nbsp;<span class="num" id="3515833">3</span>&nbsp;<span class="op" id="3515835">{</span>&nbsp;<span class="comment" id="3515837">//&nbsp;No&nbsp;characters&nbsp;matched.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3515866"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515867">[</span><span class="ident" id="3515868"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3515871">]</span>&nbsp;<span class="op" id="3515873">=</span>&nbsp;<span class="ident" id="3515875"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3515876">[</span><span class="ident" id="3515877"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3515880">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515885">return</span>&nbsp;<span class="ident" id="3515892"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3515896">+</span>&nbsp;<span class="num" id="3515898">1</span><span class="op" id="3515899">,</span>&nbsp;<span class="ident" id="3515901"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3515905">+</span>&nbsp;<span class="num" id="3515907">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3515911">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3515916">if</span>&nbsp;<span class="num" id="3515919">0x80</span>&nbsp;<span class="op" id="3515924">&lt;=</span>&nbsp;<span class="ident" id="3515927"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515929">&amp;&amp;</span>&nbsp;<span class="ident" id="3515932"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3515934">&lt;=</span>&nbsp;<span class="num" id="3515937">0x9F</span>&nbsp;<span class="op" id="3515942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3515947">//&nbsp;Replace&nbsp;characters&nbsp;from&nbsp;Windows-1252&nbsp;with&nbsp;UTF-8&nbsp;equivalents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516014"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516016">=</span>&nbsp;<span class="ident" id="3516018"><a href="/html/escape.go.html#3514033">replacementTable</a></span><span class="op" id="3516034">[</span><span class="ident" id="3516035"><a href="/html/escape.go.html#3515382">x</a></span><span class="op" id="3516036">-</span><span class="num" id="3516037">0x80</span><span class="op" id="3516041">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516045">}</span>&nbsp;<span class="keyword" id="3516047">else</span>&nbsp;<span class="keyword" id="3516052">if</span>&nbsp;<span class="ident" id="3516055"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516057">==</span>&nbsp;<span class="num" id="3516060">0</span>&nbsp;<span class="op" id="3516062">||</span>&nbsp;<span class="op" id="3516065">(</span><span class="num" id="3516066">0xD800</span>&nbsp;<span class="op" id="3516073">&lt;=</span>&nbsp;<span class="ident" id="3516076"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516078">&amp;&amp;</span>&nbsp;<span class="ident" id="3516081"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516083">&lt;=</span>&nbsp;<span class="num" id="3516086">0xDFFF</span><span class="op" id="3516092">)</span>&nbsp;<span class="op" id="3516094">||</span>&nbsp;<span class="ident" id="3516097"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516099">&gt;</span>&nbsp;<span class="num" id="3516101">0x10FFFF</span>&nbsp;<span class="op" id="3516110">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516115">//&nbsp;Replace&nbsp;invalid&nbsp;characters&nbsp;with&nbsp;the&nbsp;replacement&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516180"><a href="/html/escape.go.html#3515382">x</a></span>&nbsp;<span class="op" id="3516182">=</span>&nbsp;<span class="string" id="3516184">&#39;\uFFFD&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516200">return</span>&nbsp;<span class="ident" id="3516207"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3516211">+</span>&nbsp;<span class="ident" id="3516213"><a href="/html/escape.go.html#3513731">utf8</a></span><span class="op" id="3516217">.</span><span class="ident" id="3516218">EncodeRune</span><span class="op" id="3516228">(</span><span class="ident" id="3516229"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3516230">[</span><span class="ident" id="3516231"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3516234">:</span><span class="op" id="3516235">]</span><span class="op" id="3516236">,</span>&nbsp;<span class="ident" id="3516238"><a href="/html/escape.go.html#3515382">x</a></span><span class="op" id="3516239">)</span><span class="op" id="3516240">,</span>&nbsp;<span class="ident" id="3516242"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3516246">+</span>&nbsp;<span class="ident" id="3516248"><a href="/html/escape.go.html#3515085">i</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516255">//&nbsp;Consume&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;characters&nbsp;possible,&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516319">//&nbsp;consumed&nbsp;characters&nbsp;matching&nbsp;one&nbsp;of&nbsp;the&nbsp;named&nbsp;references.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516382">for</span>&nbsp;<span class="ident" id="3516386"><a href="/html/escape.go.html#3515085">i</a></span>&nbsp;<span class="op" id="3516388">&lt;</span>&nbsp;<span class="builtinfunc" id="3516390">len</span><span class="op" id="3516393">(</span><span class="ident" id="3516394"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3516395">)</span>&nbsp;<span class="op" id="3516397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516401">c</span>&nbsp;<span class="op" id="3516403">:=</span>&nbsp;<span class="ident" id="3516406"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3516407">[</span><span class="ident" id="3516408"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3516409">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516413"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3516414">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516419">//&nbsp;Lower-cased&nbsp;characters&nbsp;are&nbsp;more&nbsp;common&nbsp;in&nbsp;entities,&nbsp;so&nbsp;we&nbsp;check&nbsp;for&nbsp;them&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516504">if</span>&nbsp;<span class="string" id="3516507">&#39;a&#39;</span>&nbsp;<span class="op" id="3516511">&lt;=</span>&nbsp;<span class="ident" id="3516514"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516516">&amp;&amp;</span>&nbsp;<span class="ident" id="3516519"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516521">&lt;=</span>&nbsp;<span class="string" id="3516524">&#39;z&#39;</span>&nbsp;<span class="op" id="3516528">||</span>&nbsp;<span class="string" id="3516531">&#39;A&#39;</span>&nbsp;<span class="op" id="3516535">&lt;=</span>&nbsp;<span class="ident" id="3516538"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516540">&amp;&amp;</span>&nbsp;<span class="ident" id="3516543"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516545">&lt;=</span>&nbsp;<span class="string" id="3516548">&#39;Z&#39;</span>&nbsp;<span class="op" id="3516552">||</span>&nbsp;<span class="string" id="3516555">&#39;0&#39;</span>&nbsp;<span class="op" id="3516559">&lt;=</span>&nbsp;<span class="ident" id="3516562"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516564">&amp;&amp;</span>&nbsp;<span class="ident" id="3516567"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516569">&lt;=</span>&nbsp;<span class="string" id="3516572">&#39;9&#39;</span>&nbsp;<span class="op" id="3516576">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516581">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516596">if</span>&nbsp;<span class="ident" id="3516599"><a href="/html/escape.go.html#3516401">c</a></span>&nbsp;<span class="op" id="3516601">!=</span>&nbsp;<span class="string" id="3516604">&#39;;&#39;</span>&nbsp;<span class="op" id="3516608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516613"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3516614">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516619">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516623">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516634">entityName</span>&nbsp;<span class="op" id="3516645">:=</span>&nbsp;<span class="builtintype" id="3516648">string</span><span class="op" id="3516654">(</span><span class="ident" id="3516655"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3516656">[</span><span class="num" id="3516657">1</span><span class="op" id="3516658">:</span><span class="ident" id="3516659"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3516660">]</span><span class="op" id="3516661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516664">if</span>&nbsp;<span class="ident" id="3516667"><a href="/html/escape.go.html#3516634">entityName</a></span>&nbsp;<span class="op" id="3516678">==</span>&nbsp;<span class="string" id="3516681">&#34;&#34;</span>&nbsp;<span class="op" id="3516684">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516688">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516699">}</span>&nbsp;<span class="keyword" id="3516701">else</span>&nbsp;<span class="keyword" id="3516706">if</span>&nbsp;<span class="ident" id="3516709"><a href="/html/escape.go.html#3514876">attribute</a></span>&nbsp;<span class="op" id="3516719">&amp;&amp;</span>&nbsp;<span class="ident" id="3516722"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3516732">[</span><span class="builtinfunc" id="3516733">len</span><span class="op" id="3516736">(</span><span class="ident" id="3516737"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3516747">)</span><span class="op" id="3516748">-</span><span class="num" id="3516749">1</span><span class="op" id="3516750">]</span>&nbsp;<span class="op" id="3516752">!=</span>&nbsp;<span class="string" id="3516755">&#39;;&#39;</span>&nbsp;<span class="op" id="3516759">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3516762">len</span><span class="op" id="3516765">(</span><span class="ident" id="3516766"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3516767">)</span>&nbsp;<span class="op" id="3516769">&gt;</span>&nbsp;<span class="ident" id="3516771"><a href="/html/escape.go.html#3515085">i</a></span>&nbsp;<span class="op" id="3516773">&amp;&amp;</span>&nbsp;<span class="ident" id="3516776"><a href="/html/escape.go.html#3515088">s</a></span><span class="op" id="3516777">[</span><span class="ident" id="3516778"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3516779">]</span>&nbsp;<span class="op" id="3516781">==</span>&nbsp;<span class="string" id="3516784">&#39;=&#39;</span>&nbsp;<span class="op" id="3516788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3516792">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516803">}</span>&nbsp;<span class="keyword" id="3516805">else</span>&nbsp;<span class="keyword" id="3516810">if</span>&nbsp;<span class="ident" id="3516813">x</span>&nbsp;<span class="op" id="3516815">:=</span>&nbsp;<span class="ident" id="3516818"><a href="/html/entity.go.html#3414016">entity</a></span><span class="op" id="3516824">[</span><span class="ident" id="3516825"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3516835">]</span><span class="op" id="3516836">;</span>&nbsp;<span class="ident" id="3516838"><a href="/html/escape.go.html#3516813">x</a></span>&nbsp;<span class="op" id="3516840">!=</span>&nbsp;<span class="num" id="3516843">0</span>&nbsp;<span class="op" id="3516845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516849">return</span>&nbsp;<span class="ident" id="3516856"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3516860">+</span>&nbsp;<span class="ident" id="3516862"><a href="/html/escape.go.html#3513731">utf8</a></span><span class="op" id="3516866">.</span><span class="ident" id="3516867">EncodeRune</span><span class="op" id="3516877">(</span><span class="ident" id="3516878"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3516879">[</span><span class="ident" id="3516880"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3516883">:</span><span class="op" id="3516884">]</span><span class="op" id="3516885">,</span>&nbsp;<span class="ident" id="3516887"><a href="/html/escape.go.html#3516813">x</a></span><span class="op" id="3516888">)</span><span class="op" id="3516889">,</span>&nbsp;<span class="ident" id="3516891"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3516895">+</span>&nbsp;<span class="ident" id="3516897"><a href="/html/escape.go.html#3515085">i</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3516900">}</span>&nbsp;<span class="keyword" id="3516902">else</span>&nbsp;<span class="keyword" id="3516907">if</span>&nbsp;<span class="ident" id="3516910">x</span>&nbsp;<span class="op" id="3516912">:=</span>&nbsp;<span class="ident" id="3516915"><a href="/html/entity.go.html#3508598">entity2</a></span><span class="op" id="3516922">[</span><span class="ident" id="3516923"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3516933">]</span><span class="op" id="3516934">;</span>&nbsp;<span class="ident" id="3516936"><a href="/html/escape.go.html#3516910">x</a></span><span class="op" id="3516937">[</span><span class="num" id="3516938">0</span><span class="op" id="3516939">]</span>&nbsp;<span class="op" id="3516941">!=</span>&nbsp;<span class="num" id="3516944">0</span>&nbsp;<span class="op" id="3516946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3516950">dst1</span>&nbsp;<span class="op" id="3516955">:=</span>&nbsp;<span class="ident" id="3516958"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3516962">+</span>&nbsp;<span class="ident" id="3516964"><a href="/html/escape.go.html#3513731">utf8</a></span><span class="op" id="3516968">.</span><span class="ident" id="3516969">EncodeRune</span><span class="op" id="3516979">(</span><span class="ident" id="3516980"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3516981">[</span><span class="ident" id="3516982"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3516985">:</span><span class="op" id="3516986">]</span><span class="op" id="3516987">,</span>&nbsp;<span class="ident" id="3516989"><a href="/html/escape.go.html#3516910">x</a></span><span class="op" id="3516990">[</span><span class="num" id="3516991">0</span><span class="op" id="3516992">]</span><span class="op" id="3516993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3516997">return</span>&nbsp;<span class="ident" id="3517004"><a href="/html/escape.go.html#3516950">dst1</a></span>&nbsp;<span class="op" id="3517009">+</span>&nbsp;<span class="ident" id="3517011"><a href="/html/escape.go.html#3513731">utf8</a></span><span class="op" id="3517015">.</span><span class="ident" id="3517016">EncodeRune</span><span class="op" id="3517026">(</span><span class="ident" id="3517027"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3517028">[</span><span class="ident" id="3517029"><a href="/html/escape.go.html#3516950">dst1</a></span><span class="op" id="3517033">:</span><span class="op" id="3517034">]</span><span class="op" id="3517035">,</span>&nbsp;<span class="ident" id="3517037"><a href="/html/escape.go.html#3516910">x</a></span><span class="op" id="3517038">[</span><span class="num" id="3517039">1</span><span class="op" id="3517040">]</span><span class="op" id="3517041">)</span><span class="op" id="3517042">,</span>&nbsp;<span class="ident" id="3517044"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3517048">+</span>&nbsp;<span class="ident" id="3517050"><a href="/html/escape.go.html#3515085">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517053">}</span>&nbsp;<span class="keyword" id="3517055">else</span>&nbsp;<span class="keyword" id="3517060">if</span>&nbsp;<span class="op" id="3517063">!</span><span class="ident" id="3517064"><a href="/html/escape.go.html#3514876">attribute</a></span>&nbsp;<span class="op" id="3517074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517078">maxLen</span>&nbsp;<span class="op" id="3517085">:=</span>&nbsp;<span class="builtinfunc" id="3517088">len</span><span class="op" id="3517091">(</span><span class="ident" id="3517092"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3517102">)</span>&nbsp;<span class="op" id="3517104">-</span>&nbsp;<span class="num" id="3517106">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517110">if</span>&nbsp;<span class="ident" id="3517113"><a href="/html/escape.go.html#3517078">maxLen</a></span>&nbsp;<span class="op" id="3517120">&gt;</span>&nbsp;<span class="ident" id="3517122"><a href="/html/entity.go.html#3413631">longestEntityWithoutSemicolon</a></span>&nbsp;<span class="op" id="3517152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517157"><a href="/html/escape.go.html#3517078">maxLen</a></span>&nbsp;<span class="op" id="3517164">=</span>&nbsp;<span class="ident" id="3517166"><a href="/html/entity.go.html#3413631">longestEntityWithoutSemicolon</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517202">for</span>&nbsp;<span class="ident" id="3517206">j</span>&nbsp;<span class="op" id="3517208">:=</span>&nbsp;<span class="ident" id="3517211"><a href="/html/escape.go.html#3517078">maxLen</a></span><span class="op" id="3517217">;</span>&nbsp;<span class="ident" id="3517219"><a href="/html/escape.go.html#3517206">j</a></span>&nbsp;<span class="op" id="3517221">&gt;</span>&nbsp;<span class="num" id="3517223">1</span><span class="op" id="3517224">;</span>&nbsp;<span class="ident" id="3517226"><a href="/html/escape.go.html#3517206">j</a></span><span class="op" id="3517227">--</span>&nbsp;<span class="op" id="3517230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517235">if</span>&nbsp;<span class="ident" id="3517238">x</span>&nbsp;<span class="op" id="3517240">:=</span>&nbsp;<span class="ident" id="3517243"><a href="/html/entity.go.html#3414016">entity</a></span><span class="op" id="3517249">[</span><span class="ident" id="3517250"><a href="/html/escape.go.html#3516634">entityName</a></span><span class="op" id="3517260">[</span><span class="op" id="3517261">:</span><span class="ident" id="3517262"><a href="/html/escape.go.html#3517206">j</a></span><span class="op" id="3517263">]</span><span class="op" id="3517264">]</span><span class="op" id="3517265">;</span>&nbsp;<span class="ident" id="3517267"><a href="/html/escape.go.html#3517238">x</a></span>&nbsp;<span class="op" id="3517269">!=</span>&nbsp;<span class="num" id="3517272">0</span>&nbsp;<span class="op" id="3517274">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517280">return</span>&nbsp;<span class="ident" id="3517287"><a href="/html/escape.go.html#3514862">dst</a></span>&nbsp;<span class="op" id="3517291">+</span>&nbsp;<span class="ident" id="3517293"><a href="/html/escape.go.html#3513731">utf8</a></span><span class="op" id="3517297">.</span><span class="ident" id="3517298">EncodeRune</span><span class="op" id="3517308">(</span><span class="ident" id="3517309"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3517310">[</span><span class="ident" id="3517311"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3517314">:</span><span class="op" id="3517315">]</span><span class="op" id="3517316">,</span>&nbsp;<span class="ident" id="3517318"><a href="/html/escape.go.html#3517238">x</a></span><span class="op" id="3517319">)</span><span class="op" id="3517320">,</span>&nbsp;<span class="ident" id="3517322"><a href="/html/escape.go.html#3514867">src</a></span>&nbsp;<span class="op" id="3517326">+</span>&nbsp;<span class="ident" id="3517328"><a href="/html/escape.go.html#3517206">j</a></span>&nbsp;<span class="op" id="3517330">+</span>&nbsp;<span class="num" id="3517332">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517348"><a href="/html/escape.go.html#3514893">dst1</a></span><span class="op" id="3517352">,</span>&nbsp;<span class="ident" id="3517354"><a href="/html/escape.go.html#3514899">src1</a></span>&nbsp;<span class="op" id="3517359">=</span>&nbsp;<span class="ident" id="3517361"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3517364">+</span><span class="ident" id="3517365"><a href="/html/escape.go.html#3515085">i</a></span><span class="op" id="3517366">,</span>&nbsp;<span class="ident" id="3517368"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3517371">+</span><span class="ident" id="3517372"><a href="/html/escape.go.html#3515085">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3517375">copy</span><span class="op" id="3517379">(</span><span class="ident" id="3517380"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3517381">[</span><span class="ident" id="3517382"><a href="/html/escape.go.html#3514862">dst</a></span><span class="op" id="3517385">:</span><span class="ident" id="3517386"><a href="/html/escape.go.html#3514893">dst1</a></span><span class="op" id="3517390">]</span><span class="op" id="3517391">,</span>&nbsp;<span class="ident" id="3517393"><a href="/html/escape.go.html#3514852">b</a></span><span class="op" id="3517394">[</span><span class="ident" id="3517395"><a href="/html/escape.go.html#3514867">src</a></span><span class="op" id="3517398">:</span><span class="ident" id="3517399"><a href="/html/escape.go.html#3514899">src1</a></span><span class="op" id="3517403">]</span><span class="op" id="3517404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517407">return</span>&nbsp;<span class="ident" id="3517414"><a href="/html/escape.go.html#3514893">dst1</a></span><span class="op" id="3517418">,</span>&nbsp;<span class="ident" id="3517420"><a href="/html/escape.go.html#3514899">src1</a></span><br>
<span class="lineno"></span><span class="op" id="3517425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="3517428">//&nbsp;unescape&nbsp;unescapes&nbsp;b&#39;s&nbsp;entities&nbsp;in-place,&nbsp;so&nbsp;that&nbsp;&#34;a&amp;lt;b&#34;&nbsp;becomes&nbsp;&#34;a&lt;b&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3517505">func</span>&nbsp;<span class="ident" id="3517510">unescape</span><span class="op" id="3517518">(</span><span class="ident" id="3517519">b</span>&nbsp;<span class="op" id="3517521">[</span><span class="op" id="3517522">]</span><span class="builtintype" id="3517523">byte</span><span class="op" id="3517527">)</span>&nbsp;<span class="op" id="3517529">[</span><span class="op" id="3517530">]</span><span class="builtintype" id="3517531">byte</span>&nbsp;<span class="op" id="3517536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517539">for</span>&nbsp;<span class="ident" id="3517543">i</span><span class="op" id="3517544">,</span>&nbsp;<span class="ident" id="3517546">c</span>&nbsp;<span class="op" id="3517548">:=</span>&nbsp;<span class="keyword" id="3517551">range</span>&nbsp;<span class="ident" id="3517557"><a href="/html/escape.go.html#3517519">b</a></span>&nbsp;<span class="op" id="3517559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517563">if</span>&nbsp;<span class="ident" id="3517566"><a href="/html/escape.go.html#3517546">c</a></span>&nbsp;<span class="op" id="3517568">==</span>&nbsp;<span class="string" id="3517571">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="3517575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517580">dst</span><span class="op" id="3517583">,</span>&nbsp;<span class="ident" id="3517585">src</span>&nbsp;<span class="op" id="3517589">:=</span>&nbsp;<span class="ident" id="3517592"><a href="/html/escape.go.html#3514837">unescapeEntity</a></span><span class="op" id="3517606">(</span><span class="ident" id="3517607"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517608">,</span>&nbsp;<span class="ident" id="3517610"><a href="/html/escape.go.html#3517543">i</a></span><span class="op" id="3517611">,</span>&nbsp;<span class="ident" id="3517613"><a href="/html/escape.go.html#3517543">i</a></span><span class="op" id="3517614">,</span>&nbsp;<span class="ident" id="3517616">false</span><span class="op" id="3517621">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517626">for</span>&nbsp;<span class="ident" id="3517630"><a href="/html/escape.go.html#3517585">src</a></span>&nbsp;<span class="op" id="3517634">&lt;</span>&nbsp;<span class="builtinfunc" id="3517636">len</span><span class="op" id="3517639">(</span><span class="ident" id="3517640"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517641">)</span>&nbsp;<span class="op" id="3517643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517649">c</span>&nbsp;<span class="op" id="3517651">:=</span>&nbsp;<span class="ident" id="3517654"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517655">[</span><span class="ident" id="3517656"><a href="/html/escape.go.html#3517585">src</a></span><span class="op" id="3517659">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517665">if</span>&nbsp;<span class="ident" id="3517668"><a href="/html/escape.go.html#3517649">c</a></span>&nbsp;<span class="op" id="3517670">==</span>&nbsp;<span class="string" id="3517673">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="3517677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517684"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517687">,</span>&nbsp;<span class="ident" id="3517689"><a href="/html/escape.go.html#3517585">src</a></span>&nbsp;<span class="op" id="3517693">=</span>&nbsp;<span class="ident" id="3517695"><a href="/html/escape.go.html#3514837">unescapeEntity</a></span><span class="op" id="3517709">(</span><span class="ident" id="3517710"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517711">,</span>&nbsp;<span class="ident" id="3517713"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517716">,</span>&nbsp;<span class="ident" id="3517718"><a href="/html/escape.go.html#3517585">src</a></span><span class="op" id="3517721">,</span>&nbsp;<span class="ident" id="3517723">false</span><span class="op" id="3517728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517734">}</span>&nbsp;<span class="keyword" id="3517736">else</span>&nbsp;<span class="op" id="3517741">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517748"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517749">[</span><span class="ident" id="3517750"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517753">]</span>&nbsp;<span class="op" id="3517755">=</span>&nbsp;<span class="ident" id="3517757"><a href="/html/escape.go.html#3517649">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517764"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517767">,</span>&nbsp;<span class="ident" id="3517769"><a href="/html/escape.go.html#3517585">src</a></span>&nbsp;<span class="op" id="3517773">=</span>&nbsp;<span class="ident" id="3517775"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517778">+</span><span class="num" id="3517779">1</span><span class="op" id="3517780">,</span>&nbsp;<span class="ident" id="3517782"><a href="/html/escape.go.html#3517585">src</a></span><span class="op" id="3517785">+</span><span class="num" id="3517786">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517802">return</span>&nbsp;<span class="ident" id="3517809"><a href="/html/escape.go.html#3517519">b</a></span><span class="op" id="3517810">[</span><span class="num" id="3517811">0</span><span class="op" id="3517812">:</span><span class="ident" id="3517813"><a href="/html/escape.go.html#3517580">dst</a></span><span class="op" id="3517816">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3517823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517826">return</span>&nbsp;<span class="ident" id="3517833"><a href="/html/escape.go.html#3517519">b</a></span><br>
<span class="lineno"></span><span class="op" id="3517835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="3517838">const</span>&nbsp;<span class="ident" id="3517844">escapedChars</span>&nbsp;<span class="op" id="3517857">=</span>&nbsp;<span class="string" id="3517859">`&amp;&#39;&lt;&gt;&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3517868">func</span>&nbsp;<span class="ident" id="3517873">escape</span><span class="op" id="3517879">(</span><span class="ident" id="3517880">w</span>&nbsp;<span class="ident" id="3517882"><a href="/html/escape.go.html#3513754">writer</a></span><span class="op" id="3517888">,</span>&nbsp;<span class="ident" id="3517890">s</span>&nbsp;<span class="builtintype" id="3517892">string</span><span class="op" id="3517898">)</span>&nbsp;<span class="builtintype" id="3517900">error</span>&nbsp;<span class="op" id="3517906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3517909">i</span>&nbsp;<span class="op" id="3517911">:=</span>&nbsp;<span class="ident" id="3517914"><a href="/html/escape.go.html#3513720">strings</a></span><span class="op" id="3517921">.</span><span class="ident" id="3517922">IndexAny</span><span class="op" id="3517930">(</span><span class="ident" id="3517931"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3517932">,</span>&nbsp;<span class="ident" id="3517934"><a href="/html/escape.go.html#3517844">escapedChars</a></span><span class="op" id="3517946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517949">for</span>&nbsp;<span class="ident" id="3517953"><a href="/html/escape.go.html#3517909">i</a></span>&nbsp;<span class="op" id="3517955">!=</span>&nbsp;<span class="op" id="3517958">-</span><span class="num" id="3517959">1</span>&nbsp;<span class="op" id="3517961">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3517965">if</span>&nbsp;<span class="ident" id="3517968">_</span><span class="op" id="3517969">,</span>&nbsp;<span class="ident" id="3517971">err</span>&nbsp;<span class="op" id="3517975">:=</span>&nbsp;<span class="ident" id="3517978"><a href="/html/escape.go.html#3517880">w</a></span><span class="op" id="3517979">.</span><span class="ident" id="3517980">WriteString</span><span class="op" id="3517991">(</span><span class="ident" id="3517992"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3517993">[</span><span class="op" id="3517994">:</span><span class="ident" id="3517995"><a href="/html/escape.go.html#3517909">i</a></span><span class="op" id="3517996">]</span><span class="op" id="3517997">)</span><span class="op" id="3517998">;</span>&nbsp;<span class="ident" id="3518000"><a href="/html/escape.go.html#3517971">err</a></span>&nbsp;<span class="op" id="3518004">!=</span>&nbsp;<span class="ident" id="3518007">nil</span>&nbsp;<span class="op" id="3518011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518016">return</span>&nbsp;<span class="ident" id="3518023"><a href="/html/escape.go.html#3517971">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3518029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518033">var</span>&nbsp;<span class="ident" id="3518037">esc</span>&nbsp;<span class="builtintype" id="3518041">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518050">switch</span>&nbsp;<span class="ident" id="3518057"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3518058">[</span><span class="ident" id="3518059"><a href="/html/escape.go.html#3517909">i</a></span><span class="op" id="3518060">]</span>&nbsp;<span class="op" id="3518062">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518066">case</span>&nbsp;<span class="string" id="3518071">&#39;&amp;&#39;</span><span class="op" id="3518074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518079"><a href="/html/escape.go.html#3518037">esc</a></span>&nbsp;<span class="op" id="3518083">=</span>&nbsp;<span class="string" id="3518085">&#34;&amp;amp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518095">case</span>&nbsp;<span class="string" id="3518100">&#39;\&#39;&#39;</span><span class="op" id="3518104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3518109">//&nbsp;&#34;&amp;#39;&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518186"><a href="/html/escape.go.html#3518037">esc</a></span>&nbsp;<span class="op" id="3518190">=</span>&nbsp;<span class="string" id="3518192">&#34;&amp;#39;&#34;</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518202">case</span>&nbsp;<span class="string" id="3518207">&#39;&lt;&#39;</span><span class="op" id="3518210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518215"><a href="/html/escape.go.html#3518037">esc</a></span>&nbsp;<span class="op" id="3518219">=</span>&nbsp;<span class="string" id="3518221">&#34;&amp;lt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518230">case</span>&nbsp;<span class="string" id="3518235">&#39;&gt;&#39;</span><span class="op" id="3518238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518243"><a href="/html/escape.go.html#3518037">esc</a></span>&nbsp;<span class="op" id="3518247">=</span>&nbsp;<span class="string" id="3518249">&#34;&amp;gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518258">case</span>&nbsp;<span class="string" id="3518263">&#39;&#34;&#39;</span><span class="op" id="3518266">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3518271">//&nbsp;&#34;&amp;#34;&#34;&nbsp;is&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518311"><a href="/html/escape.go.html#3518037">esc</a></span>&nbsp;<span class="op" id="3518315">=</span>&nbsp;<span class="string" id="3518317">&#34;&amp;#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518327">default</span><span class="op" id="3518334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3518339">panic</span><span class="op" id="3518344">(</span><span class="string" id="3518345">&#34;unrecognized&nbsp;escape&nbsp;character&#34;</span><span class="op" id="3518376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3518380">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518384"><a href="/html/escape.go.html#3517890">s</a></span>&nbsp;<span class="op" id="3518386">=</span>&nbsp;<span class="ident" id="3518388"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3518389">[</span><span class="ident" id="3518390"><a href="/html/escape.go.html#3517909">i</a></span><span class="op" id="3518391">+</span><span class="num" id="3518392">1</span><span class="op" id="3518393">:</span><span class="op" id="3518394">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518398">if</span>&nbsp;<span class="ident" id="3518401">_</span><span class="op" id="3518402">,</span>&nbsp;<span class="ident" id="3518404">err</span>&nbsp;<span class="op" id="3518408">:=</span>&nbsp;<span class="ident" id="3518411"><a href="/html/escape.go.html#3517880">w</a></span><span class="op" id="3518412">.</span><span class="ident" id="3518413">WriteString</span><span class="op" id="3518424">(</span><span class="ident" id="3518425"><a href="/html/escape.go.html#3518037">esc</a></span><span class="op" id="3518428">)</span><span class="op" id="3518429">;</span>&nbsp;<span class="ident" id="3518431"><a href="/html/escape.go.html#3518404">err</a></span>&nbsp;<span class="op" id="3518435">!=</span>&nbsp;<span class="ident" id="3518438">nil</span>&nbsp;<span class="op" id="3518442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518447">return</span>&nbsp;<span class="ident" id="3518454"><a href="/html/escape.go.html#3518404">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3518460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518464"><a href="/html/escape.go.html#3517909">i</a></span>&nbsp;<span class="op" id="3518466">=</span>&nbsp;<span class="ident" id="3518468"><a href="/html/escape.go.html#3513720">strings</a></span><span class="op" id="3518475">.</span><span class="ident" id="3518476">IndexAny</span><span class="op" id="3518484">(</span><span class="ident" id="3518485"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3518486">,</span>&nbsp;<span class="ident" id="3518488"><a href="/html/escape.go.html#3517844">escapedChars</a></span><span class="op" id="3518500">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3518503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518506">_</span><span class="op" id="3518507">,</span>&nbsp;<span class="ident" id="3518509">err</span>&nbsp;<span class="op" id="3518513">:=</span>&nbsp;<span class="ident" id="3518516"><a href="/html/escape.go.html#3517880">w</a></span><span class="op" id="3518517">.</span><span class="ident" id="3518518">WriteString</span><span class="op" id="3518529">(</span><span class="ident" id="3518530"><a href="/html/escape.go.html#3517890">s</a></span><span class="op" id="3518531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518534">return</span>&nbsp;<span class="ident" id="3518541"><a href="/html/escape.go.html#3518509">err</a></span><br>
<span class="lineno"></span><span class="op" id="3518545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="comment" id="3518548">//&nbsp;EscapeString&nbsp;escapes&nbsp;special&nbsp;characters&nbsp;like&nbsp;&#34;&lt;&#34;&nbsp;to&nbsp;become&nbsp;&#34;&amp;lt;&#34;.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="3518621">//&nbsp;escapes&nbsp;only&nbsp;five&nbsp;such&nbsp;characters:&nbsp;&lt;,&nbsp;&gt;,&nbsp;&amp;,&nbsp;&#39;&nbsp;and&nbsp;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3518677">//&nbsp;UnescapeString(EscapeString(s))&nbsp;==&nbsp;s&nbsp;always&nbsp;holds,&nbsp;but&nbsp;the&nbsp;converse&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3518754">//&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="3518770">func</span>&nbsp;<span class="ident" id="3518775">EscapeString</span><span class="op" id="3518787">(</span><span class="ident" id="3518788">s</span>&nbsp;<span class="builtintype" id="3518790">string</span><span class="op" id="3518796">)</span>&nbsp;<span class="builtintype" id="3518798">string</span>&nbsp;<span class="op" id="3518805">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518808">if</span>&nbsp;<span class="ident" id="3518811"><a href="/html/escape.go.html#3513720">strings</a></span><span class="op" id="3518818">.</span><span class="ident" id="3518819">IndexAny</span><span class="op" id="3518827">(</span><span class="ident" id="3518828"><a href="/html/escape.go.html#3518788">s</a></span><span class="op" id="3518829">,</span>&nbsp;<span class="ident" id="3518831"><a href="/html/escape.go.html#3517844">escapedChars</a></span><span class="op" id="3518843">)</span>&nbsp;<span class="op" id="3518845">==</span>&nbsp;<span class="op" id="3518848">-</span><span class="num" id="3518849">1</span>&nbsp;<span class="op" id="3518851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518855">return</span>&nbsp;<span class="ident" id="3518862"><a href="/html/escape.go.html#3518788">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3518865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518868">var</span>&nbsp;<span class="ident" id="3518872">buf</span>&nbsp;<span class="ident" id="3518876"><a href="/html/escape.go.html#3513711">bytes</a></span><span class="op" id="3518881">.</span><span class="ident" id="3518882">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3518890"><a href="/html/escape.go.html#3517873">escape</a></span><span class="op" id="3518896">(</span><span class="op" id="3518897">&amp;</span><span class="ident" id="3518898"><a href="/html/escape.go.html#3518872">buf</a></span><span class="op" id="3518901">,</span>&nbsp;<span class="ident" id="3518903"><a href="/html/escape.go.html#3518788">s</a></span><span class="op" id="3518904">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3518907">return</span>&nbsp;<span class="ident" id="3518914"><a href="/html/escape.go.html#3518872">buf</a></span><span class="op" id="3518917">.</span><span class="ident" id="3518918">String</span><span class="op" id="3518924">(</span><span class="op" id="3518925">)</span><br>
<span class="lineno"></span><span class="op" id="3518927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3518930">//&nbsp;UnescapeString&nbsp;unescapes&nbsp;entities&nbsp;like&nbsp;&#34;&amp;lt;&#34;&nbsp;to&nbsp;become&nbsp;&#34;&lt;&#34;.&nbsp;It&nbsp;unescapes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3519009">//&nbsp;larger&nbsp;range&nbsp;of&nbsp;entities&nbsp;than&nbsp;EscapeString&nbsp;escapes.&nbsp;For&nbsp;example,&nbsp;&#34;&amp;aacute;&#34;</span><br>
<span class="lineno">240</span><span class="comment" id="3519088">//&nbsp;unescapes&nbsp;to&nbsp;&#34;&#34;,&nbsp;as&nbsp;does&nbsp;&#34;&amp;#225;&#34;&nbsp;and&nbsp;&#34;&amp;xE1;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3519140">//&nbsp;UnescapeString(EscapeString(s))&nbsp;==&nbsp;s&nbsp;always&nbsp;holds,&nbsp;but&nbsp;the&nbsp;converse&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3519217">//&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="3519233">func</span>&nbsp;<span class="ident" id="3519238">UnescapeString</span><span class="op" id="3519252">(</span><span class="ident" id="3519253">s</span>&nbsp;<span class="builtintype" id="3519255">string</span><span class="op" id="3519261">)</span>&nbsp;<span class="builtintype" id="3519263">string</span>&nbsp;<span class="op" id="3519270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3519273">for</span>&nbsp;<span class="ident" id="3519277">_</span><span class="op" id="3519278">,</span>&nbsp;<span class="ident" id="3519280">c</span>&nbsp;<span class="op" id="3519282">:=</span>&nbsp;<span class="keyword" id="3519285">range</span>&nbsp;<span class="ident" id="3519291"><a href="/html/escape.go.html#3519253">s</a></span>&nbsp;<span class="op" id="3519293">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3519297">if</span>&nbsp;<span class="ident" id="3519300"><a href="/html/escape.go.html#3519280">c</a></span>&nbsp;<span class="op" id="3519302">==</span>&nbsp;<span class="string" id="3519305">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="3519309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3519314">return</span>&nbsp;<span class="builtintype" id="3519321">string</span><span class="op" id="3519327">(</span><span class="ident" id="3519328"><a href="/html/escape.go.html#3517510">unescape</a></span><span class="op" id="3519336">(</span><span class="op" id="3519337">[</span><span class="op" id="3519338">]</span><span class="builtintype" id="3519339">byte</span><span class="op" id="3519343">(</span><span class="ident" id="3519344"><a href="/html/escape.go.html#3519253">s</a></span><span class="op" id="3519345">)</span><span class="op" id="3519346">)</span><span class="op" id="3519347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3519351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3519354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3519357">return</span>&nbsp;<span class="ident" id="3519364"><a href="/html/escape.go.html#3519253">s</a></span><br>
<span class="lineno">250</span><span class="op" id="3519366">}</span>
</div>
</body>
</html>
