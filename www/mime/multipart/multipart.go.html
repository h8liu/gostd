<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3608254">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3608309">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3608363">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="3608413">//</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span><span class="comment" id="3608417">/*<br>
<span class="lineno"></span>Package&nbsp;multipart&nbsp;implements&nbsp;MIME&nbsp;multipart&nbsp;parsing,&nbsp;as&nbsp;defined&nbsp;in&nbsp;RFC<br>
<span class="lineno"></span>2046.<br>
<span class="lineno"></span><br>
<span class="lineno">10</span>The&nbsp;implementation&nbsp;is&nbsp;sufficient&nbsp;for&nbsp;HTTP&nbsp;(RFC&nbsp;2388)&nbsp;and&nbsp;the&nbsp;multipart<br>
<span class="lineno"></span>bodies&nbsp;generated&nbsp;by&nbsp;popular&nbsp;browsers.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3608610">package</span>&nbsp;<span class="ident" id="3608618">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3608629">import</span>&nbsp;<span class="op" id="3608636">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608639">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608648">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608657">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608664">&#34;io&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608670">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608683">&#34;mime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3608691">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span><span class="op" id="3608707">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="3608710">var</span>&nbsp;<span class="ident" id="3608714">emptyParams</span>&nbsp;<span class="op" id="3608726">=</span>&nbsp;<span class="builtinfunc" id="3608728">make</span><span class="op" id="3608732">(</span><span class="keyword" id="3608733">map</span><span class="op" id="3608736">[</span><span class="builtintype" id="3608737">string</span><span class="op" id="3608743">]</span><span class="builtintype" id="3608744">string</span><span class="op" id="3608750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3608753">//&nbsp;A&nbsp;Part&nbsp;represents&nbsp;a&nbsp;single&nbsp;part&nbsp;in&nbsp;a&nbsp;multipart&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="3608809">type</span>&nbsp;<span class="ident" id="3608814">Part</span>&nbsp;<span class="keyword" id="3608819">struct</span>&nbsp;<span class="op" id="3608826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608829">//&nbsp;The&nbsp;headers&nbsp;of&nbsp;the&nbsp;body,&nbsp;if&nbsp;any,&nbsp;with&nbsp;the&nbsp;keys&nbsp;canonicalized</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608894">//&nbsp;in&nbsp;the&nbsp;same&nbsp;fashion&nbsp;that&nbsp;the&nbsp;Go&nbsp;http.Request&nbsp;headers&nbsp;are.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3608956">//&nbsp;For&nbsp;example,&nbsp;&#34;foo-bar&#34;&nbsp;changes&nbsp;case&nbsp;to&nbsp;&#34;Foo-Bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609009">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609013">//&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;the&nbsp;&#34;Content-Transfer-Encoding&#34;&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609078">//&nbsp;has&nbsp;a&nbsp;value&nbsp;of&nbsp;&#34;quoted-printable&#34;,&nbsp;that&nbsp;header&nbsp;is&nbsp;instead</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609140">//&nbsp;hidden&nbsp;from&nbsp;this&nbsp;map&nbsp;and&nbsp;the&nbsp;body&nbsp;is&nbsp;transparently&nbsp;decoded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609203">//&nbsp;during&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609226">Header</span>&nbsp;<span class="ident" id="3609233"><a href="/mime/multipart/multipart.go.html#3608691">textproto</a></span><span class="op" id="3609242">.</span><span class="ident" id="3609243">MIMEHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609256">buffer</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3609266">*</span><span class="ident" id="3609267"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3609272">.</span><span class="ident" id="3609273">Buffer</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609281">mr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3609291">*</span><span class="ident" id="3609292"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609300">bytesRead</span>&nbsp;<span class="builtintype" id="3609310">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609316">disposition</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3609334">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609342">dispositionParams</span>&nbsp;<span class="keyword" id="3609360">map</span><span class="op" id="3609363">[</span><span class="builtintype" id="3609364">string</span><span class="op" id="3609370">]</span><span class="builtintype" id="3609371">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609380">//&nbsp;r&nbsp;is&nbsp;either&nbsp;a&nbsp;reader&nbsp;directly&nbsp;reading&nbsp;from&nbsp;mr,&nbsp;or&nbsp;it&#39;s&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609441">//&nbsp;wrapper&nbsp;around&nbsp;such&nbsp;a&nbsp;reader,&nbsp;decoding&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609488">//&nbsp;Content-Transfer-Encoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609518">r</span>&nbsp;<span class="ident" id="3609520"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3609522">.</span><span class="ident" id="3609523">Reader</span><br>
<span class="lineno">50</span><span class="op" id="3609530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3609533">//&nbsp;FormName&nbsp;returns&nbsp;the&nbsp;name&nbsp;parameter&nbsp;if&nbsp;p&nbsp;has&nbsp;a&nbsp;Content-Disposition</span><br>
<span class="lineno"></span><span class="comment" id="3609603">//&nbsp;of&nbsp;type&nbsp;&#34;form-data&#34;.&nbsp;&nbsp;Otherwise&nbsp;it&nbsp;returns&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3609667">func</span>&nbsp;<span class="op" id="3609672">(</span><span class="ident" id="3609673">p</span>&nbsp;<span class="op" id="3609675">*</span><span class="ident" id="3609676"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3609680">)</span>&nbsp;<span class="ident" id="3609682">FormName</span><span class="op" id="3609690">(</span><span class="op" id="3609691">)</span>&nbsp;<span class="builtintype" id="3609693">string</span>&nbsp;<span class="op" id="3609700">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609703">//&nbsp;See&nbsp;http://tools.ietf.org/html/rfc2183&nbsp;section&nbsp;2&nbsp;for&nbsp;EBNF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3609765">//&nbsp;of&nbsp;Content-Disposition&nbsp;value&nbsp;format.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609806">if</span>&nbsp;<span class="ident" id="3609809"><a href="/mime/multipart/multipart.go.html#3609673">p</a></span><span class="op" id="3609810">.</span><span class="ident" id="3609811">dispositionParams</span>&nbsp;<span class="op" id="3609829">==</span>&nbsp;<span class="ident" id="3609832">nil</span>&nbsp;<span class="op" id="3609836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3609840"><a href="/mime/multipart/multipart.go.html#3609673">p</a></span><span class="op" id="3609841">.</span><span class="ident" id="3609842">parseContentDisposition</span><span class="op" id="3609865">(</span><span class="op" id="3609866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3609869">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609872">if</span>&nbsp;<span class="ident" id="3609875"><a href="/mime/multipart/multipart.go.html#3609673">p</a></span><span class="op" id="3609876">.</span><span class="ident" id="3609877">disposition</span>&nbsp;<span class="op" id="3609889">!=</span>&nbsp;<span class="string" id="3609892">&#34;form-data&#34;</span>&nbsp;<span class="op" id="3609904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609908">return</span>&nbsp;<span class="string" id="3609915">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3609919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3609922">return</span>&nbsp;<span class="ident" id="3609929"><a href="/mime/multipart/multipart.go.html#3609673">p</a></span><span class="op" id="3609930">.</span><span class="ident" id="3609931">dispositionParams</span><span class="op" id="3609948">[</span><span class="string" id="3609949">&#34;name&#34;</span><span class="op" id="3609955">]</span><br>
<span class="lineno"></span><span class="op" id="3609957">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3609960">//&nbsp;FileName&nbsp;returns&nbsp;the&nbsp;filename&nbsp;parameter&nbsp;of&nbsp;the&nbsp;Part&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3610017">//&nbsp;Content-Disposition&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="3610048">func</span>&nbsp;<span class="op" id="3610053">(</span><span class="ident" id="3610054">p</span>&nbsp;<span class="op" id="3610056">*</span><span class="ident" id="3610057"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3610061">)</span>&nbsp;<span class="ident" id="3610063">FileName</span><span class="op" id="3610071">(</span><span class="op" id="3610072">)</span>&nbsp;<span class="builtintype" id="3610074">string</span>&nbsp;<span class="op" id="3610081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610084">if</span>&nbsp;<span class="ident" id="3610087"><a href="/mime/multipart/multipart.go.html#3610054">p</a></span><span class="op" id="3610088">.</span><span class="ident" id="3610089">dispositionParams</span>&nbsp;<span class="op" id="3610107">==</span>&nbsp;<span class="ident" id="3610110">nil</span>&nbsp;<span class="op" id="3610114">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610118"><a href="/mime/multipart/multipart.go.html#3610054">p</a></span><span class="op" id="3610119">.</span><span class="ident" id="3610120">parseContentDisposition</span><span class="op" id="3610143">(</span><span class="op" id="3610144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610150">return</span>&nbsp;<span class="ident" id="3610157"><a href="/mime/multipart/multipart.go.html#3610054">p</a></span><span class="op" id="3610158">.</span><span class="ident" id="3610159">dispositionParams</span><span class="op" id="3610176">[</span><span class="string" id="3610177">&#34;filename&#34;</span><span class="op" id="3610187">]</span><br>
<span class="lineno"></span><span class="op" id="3610189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3610192">func</span>&nbsp;<span class="op" id="3610197">(</span><span class="ident" id="3610198">p</span>&nbsp;<span class="op" id="3610200">*</span><span class="ident" id="3610201"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3610205">)</span>&nbsp;<span class="ident" id="3610207">parseContentDisposition</span><span class="op" id="3610230">(</span><span class="op" id="3610231">)</span>&nbsp;<span class="op" id="3610233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610236">v</span>&nbsp;<span class="op" id="3610238">:=</span>&nbsp;<span class="ident" id="3610241"><a href="/mime/multipart/multipart.go.html#3610198">p</a></span><span class="op" id="3610242">.</span><span class="ident" id="3610243">Header</span><span class="op" id="3610249">.</span><span class="ident" id="3610250">Get</span><span class="op" id="3610253">(</span><span class="string" id="3610254">&#34;Content-Disposition&#34;</span><span class="op" id="3610275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610278">var</span>&nbsp;<span class="ident" id="3610282">err</span>&nbsp;<span class="builtintype" id="3610286">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610293"><a href="/mime/multipart/multipart.go.html#3610198">p</a></span><span class="op" id="3610294">.</span><span class="ident" id="3610295">disposition</span><span class="op" id="3610306">,</span>&nbsp;<span class="ident" id="3610308"><a href="/mime/multipart/multipart.go.html#3610198">p</a></span><span class="op" id="3610309">.</span><span class="ident" id="3610310">dispositionParams</span><span class="op" id="3610327">,</span>&nbsp;<span class="ident" id="3610329"><a href="/mime/multipart/multipart.go.html#3610282">err</a></span>&nbsp;<span class="op" id="3610333">=</span>&nbsp;<span class="ident" id="3610335"><a href="/mime/multipart/multipart.go.html#3608683">mime</a></span><span class="op" id="3610339">.</span><span class="ident" id="3610340">ParseMediaType</span><span class="op" id="3610354">(</span><span class="ident" id="3610355"><a href="/mime/multipart/multipart.go.html#3610236">v</a></span><span class="op" id="3610356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610359">if</span>&nbsp;<span class="ident" id="3610362"><a href="/mime/multipart/multipart.go.html#3610282">err</a></span>&nbsp;<span class="op" id="3610366">!=</span>&nbsp;<span class="ident" id="3610369">nil</span>&nbsp;<span class="op" id="3610373">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610377"><a href="/mime/multipart/multipart.go.html#3610198">p</a></span><span class="op" id="3610378">.</span><span class="ident" id="3610379">dispositionParams</span>&nbsp;<span class="op" id="3610397">=</span>&nbsp;<span class="ident" id="3610399"><a href="/mime/multipart/multipart.go.html#3608714">emptyParams</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610412">}</span><br>
<span class="lineno"></span><span class="op" id="3610414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3610417">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;multipart&nbsp;Reader&nbsp;reading&nbsp;from&nbsp;r&nbsp;using&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="3610486">//&nbsp;given&nbsp;MIME&nbsp;boundary.</span><br>
<span class="lineno"></span><span class="comment" id="3610510">//</span><br>
<span class="lineno"></span><span class="comment" id="3610513">//&nbsp;The&nbsp;boundary&nbsp;is&nbsp;usually&nbsp;obtained&nbsp;from&nbsp;the&nbsp;&#34;boundary&#34;&nbsp;parameter&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3610582">//&nbsp;the&nbsp;message&#39;s&nbsp;&#34;Content-Type&#34;&nbsp;header.&nbsp;Use&nbsp;mime.ParseMediaType&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3610649">//&nbsp;parse&nbsp;such&nbsp;headers.</span><br>
<span class="lineno">90</span><span class="keyword" id="3610672">func</span>&nbsp;<span class="ident" id="3610677">NewReader</span><span class="op" id="3610686">(</span><span class="ident" id="3610687">r</span>&nbsp;<span class="ident" id="3610689"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3610691">.</span><span class="ident" id="3610692">Reader</span><span class="op" id="3610698">,</span>&nbsp;<span class="ident" id="3610700">boundary</span>&nbsp;<span class="builtintype" id="3610709">string</span><span class="op" id="3610715">)</span>&nbsp;<span class="op" id="3610717">*</span><span class="ident" id="3610718"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span>&nbsp;<span class="op" id="3610725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610728">b</span>&nbsp;<span class="op" id="3610730">:=</span>&nbsp;<span class="op" id="3610733">[</span><span class="op" id="3610734">]</span><span class="builtintype" id="3610735">byte</span><span class="op" id="3610739">(</span><span class="string" id="3610740">&#34;\r\n--&#34;</span>&nbsp;<span class="op" id="3610749">+</span>&nbsp;<span class="ident" id="3610751"><a href="/mime/multipart/multipart.go.html#3610700">boundary</a></span>&nbsp;<span class="op" id="3610760">+</span>&nbsp;<span class="string" id="3610762">&#34;--&#34;</span><span class="op" id="3610766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3610769">return</span>&nbsp;<span class="op" id="3610776">&amp;</span><span class="ident" id="3610777"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3610783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610787">bufReader</span><span class="op" id="3610796">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3610805"><a href="/mime/multipart/multipart.go.html#3608639">bufio</a></span><span class="op" id="3610810">.</span><span class="ident" id="3610811">NewReader</span><span class="op" id="3610820">(</span><span class="ident" id="3610821"><a href="/mime/multipart/multipart.go.html#3610687">r</a></span><span class="op" id="3610822">)</span><span class="op" id="3610823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610827">nl</span><span class="op" id="3610829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3610845"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610846">[</span><span class="op" id="3610847">:</span><span class="num" id="3610848">2</span><span class="op" id="3610849">]</span><span class="op" id="3610850">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610854">nlDashBoundary</span><span class="op" id="3610868">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3610872"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610873">[</span><span class="op" id="3610874">:</span><span class="builtinfunc" id="3610875">len</span><span class="op" id="3610878">(</span><span class="ident" id="3610879"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610880">)</span><span class="op" id="3610881">-</span><span class="num" id="3610882">2</span><span class="op" id="3610883">]</span><span class="op" id="3610884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610888">dashBoundaryDash</span><span class="op" id="3610904">:</span>&nbsp;<span class="ident" id="3610906"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610907">[</span><span class="num" id="3610908">2</span><span class="op" id="3610909">:</span><span class="op" id="3610910">]</span><span class="op" id="3610911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610915">dashBoundary</span><span class="op" id="3610927">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3610933"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610934">[</span><span class="num" id="3610935">2</span>&nbsp;<span class="op" id="3610937">:</span>&nbsp;<span class="builtinfunc" id="3610939">len</span><span class="op" id="3610942">(</span><span class="ident" id="3610943"><a href="/mime/multipart/multipart.go.html#3610728">b</a></span><span class="op" id="3610944">)</span><span class="op" id="3610945">-</span><span class="num" id="3610946">2</span><span class="op" id="3610947">]</span><span class="op" id="3610948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3610951">}</span><br>
<span class="lineno"></span><span class="op" id="3610953">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="3610956">func</span>&nbsp;<span class="ident" id="3610961">newPart</span><span class="op" id="3610968">(</span><span class="ident" id="3610969">mr</span>&nbsp;<span class="op" id="3610972">*</span><span class="ident" id="3610973"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3610979">)</span>&nbsp;<span class="op" id="3610981">(</span><span class="op" id="3610982">*</span><span class="ident" id="3610983"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3610987">,</span>&nbsp;<span class="builtintype" id="3610989">error</span><span class="op" id="3610994">)</span>&nbsp;<span class="op" id="3610996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3610999">bp</span>&nbsp;<span class="op" id="3611002">:=</span>&nbsp;<span class="op" id="3611005">&amp;</span><span class="ident" id="3611006"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3611010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611014">Header</span><span class="op" id="3611020">:</span>&nbsp;<span class="builtinfunc" id="3611022">make</span><span class="op" id="3611026">(</span><span class="keyword" id="3611027">map</span><span class="op" id="3611030">[</span><span class="builtintype" id="3611031">string</span><span class="op" id="3611037">]</span><span class="op" id="3611038">[</span><span class="op" id="3611039">]</span><span class="builtintype" id="3611040">string</span><span class="op" id="3611046">)</span><span class="op" id="3611047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611051">mr</span><span class="op" id="3611053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3611059"><a href="/mime/multipart/multipart.go.html#3610969">mr</a></span><span class="op" id="3611061">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611065">buffer</span><span class="op" id="3611071">:</span>&nbsp;<span class="builtinfunc" id="3611073">new</span><span class="op" id="3611076">(</span><span class="ident" id="3611077"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3611082">.</span><span class="ident" id="3611083">Buffer</span><span class="op" id="3611089">)</span><span class="op" id="3611090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611096">if</span>&nbsp;<span class="ident" id="3611099">err</span>&nbsp;<span class="op" id="3611103">:=</span>&nbsp;<span class="ident" id="3611106"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611108">.</span><span class="ident" id="3611109">populateHeaders</span><span class="op" id="3611124">(</span><span class="op" id="3611125">)</span><span class="op" id="3611126">;</span>&nbsp;<span class="ident" id="3611128"><a href="/mime/multipart/multipart.go.html#3611099">err</a></span>&nbsp;<span class="op" id="3611132">!=</span>&nbsp;<span class="ident" id="3611135">nil</span>&nbsp;<span class="op" id="3611139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611143">return</span>&nbsp;<span class="ident" id="3611150">nil</span><span class="op" id="3611153">,</span>&nbsp;<span class="ident" id="3611155"><a href="/mime/multipart/multipart.go.html#3611099">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611160">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611163"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611165">.</span><span class="ident" id="3611166">r</span>&nbsp;<span class="op" id="3611168">=</span>&nbsp;<span class="ident" id="3611170"><a href="/mime/multipart/multipart.go.html#3611846">partReader</a></span><span class="op" id="3611180">{</span><span class="ident" id="3611181"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611186">const</span>&nbsp;<span class="ident" id="3611192">cte</span>&nbsp;<span class="op" id="3611196">=</span>&nbsp;<span class="string" id="3611198">&#34;Content-Transfer-Encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611227">if</span>&nbsp;<span class="ident" id="3611230"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611232">.</span><span class="ident" id="3611233">Header</span><span class="op" id="3611239">.</span><span class="ident" id="3611240">Get</span><span class="op" id="3611243">(</span><span class="ident" id="3611244"><a href="/mime/multipart/multipart.go.html#3611192">cte</a></span><span class="op" id="3611247">)</span>&nbsp;<span class="op" id="3611249">==</span>&nbsp;<span class="string" id="3611252">&#34;quoted-printable&#34;</span>&nbsp;<span class="op" id="3611271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611275"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611277">.</span><span class="ident" id="3611278">Header</span><span class="op" id="3611284">.</span><span class="ident" id="3611285">Del</span><span class="op" id="3611288">(</span><span class="ident" id="3611289"><a href="/mime/multipart/multipart.go.html#3611192">cte</a></span><span class="op" id="3611292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611296"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611298">.</span><span class="ident" id="3611299">r</span>&nbsp;<span class="op" id="3611301">=</span>&nbsp;<span class="ident" id="3611303"><a href="/mime/multipart/quotedprintable.go.html#3618918">newQuotedPrintableReader</a></span><span class="op" id="3611327">(</span><span class="ident" id="3611328"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611330">.</span><span class="ident" id="3611331">r</span><span class="op" id="3611332">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611338">return</span>&nbsp;<span class="ident" id="3611345"><a href="/mime/multipart/multipart.go.html#3610999">bp</a></span><span class="op" id="3611347">,</span>&nbsp;<span class="ident" id="3611349">nil</span><br>
<span class="lineno"></span><span class="op" id="3611353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3611356">func</span>&nbsp;<span class="op" id="3611361">(</span><span class="ident" id="3611362">bp</span>&nbsp;<span class="op" id="3611365">*</span><span class="ident" id="3611366"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3611370">)</span>&nbsp;<span class="ident" id="3611372">populateHeaders</span><span class="op" id="3611387">(</span><span class="op" id="3611388">)</span>&nbsp;<span class="builtintype" id="3611390">error</span>&nbsp;<span class="op" id="3611396">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611399">r</span>&nbsp;<span class="op" id="3611401">:=</span>&nbsp;<span class="ident" id="3611404"><a href="/mime/multipart/multipart.go.html#3608691">textproto</a></span><span class="op" id="3611413">.</span><span class="ident" id="3611414">NewReader</span><span class="op" id="3611423">(</span><span class="ident" id="3611424"><a href="/mime/multipart/multipart.go.html#3611362">bp</a></span><span class="op" id="3611426">.</span><span class="ident" id="3611427">mr</span><span class="op" id="3611429">.</span><span class="ident" id="3611430">bufReader</span><span class="op" id="3611439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611442">header</span><span class="op" id="3611448">,</span>&nbsp;<span class="ident" id="3611450">err</span>&nbsp;<span class="op" id="3611454">:=</span>&nbsp;<span class="ident" id="3611457"><a href="/mime/multipart/multipart.go.html#3611399">r</a></span><span class="op" id="3611458">.</span><span class="ident" id="3611459">ReadMIMEHeader</span><span class="op" id="3611473">(</span><span class="op" id="3611474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611477">if</span>&nbsp;<span class="ident" id="3611480"><a href="/mime/multipart/multipart.go.html#3611450">err</a></span>&nbsp;<span class="op" id="3611484">==</span>&nbsp;<span class="ident" id="3611487">nil</span>&nbsp;<span class="op" id="3611491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611495"><a href="/mime/multipart/multipart.go.html#3611362">bp</a></span><span class="op" id="3611497">.</span><span class="ident" id="3611498">Header</span>&nbsp;<span class="op" id="3611505">=</span>&nbsp;<span class="ident" id="3611507"><a href="/mime/multipart/multipart.go.html#3611442">header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611515">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611518">return</span>&nbsp;<span class="ident" id="3611525"><a href="/mime/multipart/multipart.go.html#3611450">err</a></span><br>
<span class="lineno"></span><span class="op" id="3611529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3611532">//&nbsp;Read&nbsp;reads&nbsp;the&nbsp;body&nbsp;of&nbsp;a&nbsp;part,&nbsp;after&nbsp;its&nbsp;headers&nbsp;and&nbsp;before&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3611599">//&nbsp;next&nbsp;part&nbsp;(if&nbsp;any)&nbsp;begins.</span><br>
<span class="lineno">130</span><span class="keyword" id="3611629">func</span>&nbsp;<span class="op" id="3611634">(</span><span class="ident" id="3611635">p</span>&nbsp;<span class="op" id="3611637">*</span><span class="ident" id="3611638"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3611642">)</span>&nbsp;<span class="ident" id="3611644">Read</span><span class="op" id="3611648">(</span><span class="ident" id="3611649">d</span>&nbsp;<span class="op" id="3611651">[</span><span class="op" id="3611652">]</span><span class="builtintype" id="3611653">byte</span><span class="op" id="3611657">)</span>&nbsp;<span class="op" id="3611659">(</span><span class="ident" id="3611660">n</span>&nbsp;<span class="builtintype" id="3611662">int</span><span class="op" id="3611665">,</span>&nbsp;<span class="ident" id="3611667">err</span>&nbsp;<span class="builtintype" id="3611671">error</span><span class="op" id="3611676">)</span>&nbsp;<span class="op" id="3611678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611681">return</span>&nbsp;<span class="ident" id="3611688"><a href="/mime/multipart/multipart.go.html#3611635">p</a></span><span class="op" id="3611689">.</span><span class="ident" id="3611690">r</span><span class="op" id="3611691">.</span><span class="ident" id="3611692">Read</span><span class="op" id="3611696">(</span><span class="ident" id="3611697"><a href="/mime/multipart/multipart.go.html#3611649">d</a></span><span class="op" id="3611698">)</span><br>
<span class="lineno"></span><span class="op" id="3611700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3611703">//&nbsp;partReader&nbsp;implements&nbsp;io.Reader&nbsp;by&nbsp;reading&nbsp;raw&nbsp;bytes&nbsp;directly&nbsp;from&nbsp;the</span><br>
<span class="lineno">135</span><span class="comment" id="3611777">//&nbsp;wrapped&nbsp;*Part,&nbsp;without&nbsp;doing&nbsp;any&nbsp;Transfer-Encoding&nbsp;decoding.</span><br>
<span class="lineno"></span><span class="keyword" id="3611841">type</span>&nbsp;<span class="ident" id="3611846">partReader</span>&nbsp;<span class="keyword" id="3611857">struct</span>&nbsp;<span class="op" id="3611864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611867">p</span>&nbsp;<span class="op" id="3611869">*</span><span class="ident" id="3611870"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><br>
<span class="lineno"></span><span class="op" id="3611875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3611878">func</span>&nbsp;<span class="op" id="3611883">(</span><span class="ident" id="3611884">pr</span>&nbsp;<span class="ident" id="3611887"><a href="/mime/multipart/multipart.go.html#3611846">partReader</a></span><span class="op" id="3611897">)</span>&nbsp;<span class="ident" id="3611899">Read</span><span class="op" id="3611903">(</span><span class="ident" id="3611904">d</span>&nbsp;<span class="op" id="3611906">[</span><span class="op" id="3611907">]</span><span class="builtintype" id="3611908">byte</span><span class="op" id="3611912">)</span>&nbsp;<span class="op" id="3611914">(</span><span class="ident" id="3611915">n</span>&nbsp;<span class="builtintype" id="3611917">int</span><span class="op" id="3611920">,</span>&nbsp;<span class="ident" id="3611922">err</span>&nbsp;<span class="builtintype" id="3611926">error</span><span class="op" id="3611931">)</span>&nbsp;<span class="op" id="3611933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611936">p</span>&nbsp;<span class="op" id="3611938">:=</span>&nbsp;<span class="ident" id="3611941"><a href="/mime/multipart/multipart.go.html#3611884">pr</a></span><span class="op" id="3611943">.</span><span class="ident" id="3611944">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611947">defer</span>&nbsp;<span class="keyword" id="3611953">func</span><span class="op" id="3611957">(</span><span class="op" id="3611958">)</span>&nbsp;<span class="op" id="3611960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3611964"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3611965">.</span><span class="ident" id="3611966">bytesRead</span>&nbsp;<span class="op" id="3611976">+=</span>&nbsp;<span class="ident" id="3611979"><a href="/mime/multipart/multipart.go.html#3611915">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3611982">}</span><span class="op" id="3611983">(</span><span class="op" id="3611984">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3611987">if</span>&nbsp;<span class="ident" id="3611990"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3611991">.</span><span class="ident" id="3611992">buffer</span><span class="op" id="3611998">.</span><span class="ident" id="3611999">Len</span><span class="op" id="3612002">(</span><span class="op" id="3612003">)</span>&nbsp;<span class="op" id="3612005">&gt;=</span>&nbsp;<span class="builtinfunc" id="3612008">len</span><span class="op" id="3612011">(</span><span class="ident" id="3612012"><a href="/mime/multipart/multipart.go.html#3611904">d</a></span><span class="op" id="3612013">)</span>&nbsp;<span class="op" id="3612015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612019">//&nbsp;Internal&nbsp;buffer&nbsp;of&nbsp;unconsumed&nbsp;data&nbsp;is&nbsp;large&nbsp;enough&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612079">//&nbsp;the&nbsp;read&nbsp;request.&nbsp;&nbsp;No&nbsp;need&nbsp;to&nbsp;parse&nbsp;more&nbsp;at&nbsp;the&nbsp;moment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612140">return</span>&nbsp;<span class="ident" id="3612147"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3612148">.</span><span class="ident" id="3612149">buffer</span><span class="op" id="3612155">.</span><span class="ident" id="3612156">Read</span><span class="op" id="3612160">(</span><span class="ident" id="3612161"><a href="/mime/multipart/multipart.go.html#3611904">d</a></span><span class="op" id="3612162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3612165">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3612168">peek</span><span class="op" id="3612172">,</span>&nbsp;<span class="ident" id="3612174"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3612178">:=</span>&nbsp;<span class="ident" id="3612181"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3612182">.</span><span class="ident" id="3612183">mr</span><span class="op" id="3612185">.</span><span class="ident" id="3612186">bufReader</span><span class="op" id="3612195">.</span><span class="ident" id="3612196">Peek</span><span class="op" id="3612200">(</span><span class="num" id="3612201">4096</span><span class="op" id="3612205">)</span>&nbsp;<span class="comment" id="3612207">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;buffer&nbsp;size&nbsp;accessor</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612253">//&nbsp;Look&nbsp;for&nbsp;an&nbsp;immediate&nbsp;empty&nbsp;part&nbsp;without&nbsp;a&nbsp;leading&nbsp;\r\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612313">//&nbsp;before&nbsp;the&nbsp;boundary&nbsp;separator.&nbsp;&nbsp;Some&nbsp;MIME&nbsp;code&nbsp;makes&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612376">//&nbsp;parts&nbsp;like&nbsp;this.&nbsp;Most&nbsp;browsers,&nbsp;however,&nbsp;write&nbsp;the&nbsp;\r\n</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612436">//&nbsp;before&nbsp;the&nbsp;subsequent&nbsp;boundary&nbsp;even&nbsp;for&nbsp;empty&nbsp;parts&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612496">//&nbsp;won&#39;t&nbsp;hit&nbsp;this&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612521">if</span>&nbsp;<span class="ident" id="3612524"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3612525">.</span><span class="ident" id="3612526">bytesRead</span>&nbsp;<span class="op" id="3612536">==</span>&nbsp;<span class="num" id="3612539">0</span>&nbsp;<span class="op" id="3612541">&amp;&amp;</span>&nbsp;<span class="ident" id="3612544"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3612545">.</span><span class="ident" id="3612546">mr</span><span class="op" id="3612548">.</span><span class="ident" id="3612549">peekBufferIsEmptyPart</span><span class="op" id="3612570">(</span><span class="ident" id="3612571"><a href="/mime/multipart/multipart.go.html#3612168">peek</a></span><span class="op" id="3612575">)</span>&nbsp;<span class="op" id="3612577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612581">return</span>&nbsp;<span class="num" id="3612588">0</span><span class="op" id="3612589">,</span>&nbsp;<span class="ident" id="3612591"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3612593">.</span><span class="ident" id="3612594">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3612599">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3612602">unexpectedEOF</span>&nbsp;<span class="op" id="3612616">:=</span>&nbsp;<span class="ident" id="3612619"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3612623">==</span>&nbsp;<span class="ident" id="3612626"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3612628">.</span><span class="ident" id="3612629">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612634">if</span>&nbsp;<span class="ident" id="3612637"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3612641">!=</span>&nbsp;<span class="ident" id="3612644">nil</span>&nbsp;<span class="op" id="3612648">&amp;&amp;</span>&nbsp;<span class="op" id="3612651">!</span><span class="ident" id="3612652"><a href="/mime/multipart/multipart.go.html#3612602">unexpectedEOF</a></span>&nbsp;<span class="op" id="3612666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612670">return</span>&nbsp;<span class="num" id="3612677">0</span><span class="op" id="3612678">,</span>&nbsp;<span class="ident" id="3612680"><a href="/mime/multipart/multipart.go.html#3608657">fmt</a></span><span class="op" id="3612683">.</span><span class="ident" id="3612684">Errorf</span><span class="op" id="3612690">(</span><span class="string" id="3612691">&#34;multipart:&nbsp;Part&nbsp;Read:&nbsp;%v&#34;</span><span class="op" id="3612717">,</span>&nbsp;<span class="ident" id="3612719"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span><span class="op" id="3612722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3612725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3612728">if</span>&nbsp;<span class="ident" id="3612731"><a href="/mime/multipart/multipart.go.html#3612168">peek</a></span>&nbsp;<span class="op" id="3612736">==</span>&nbsp;<span class="ident" id="3612739">nil</span>&nbsp;<span class="op" id="3612743">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3612747">panic</span><span class="op" id="3612752">(</span><span class="string" id="3612753">&#34;nil&nbsp;peek&nbsp;buf&#34;</span><span class="op" id="3612767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3612770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612774">//&nbsp;Search&nbsp;the&nbsp;peek&nbsp;buffer&nbsp;for&nbsp;&#34;\r\n--boundary&#34;.&nbsp;If&nbsp;found,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612833">//&nbsp;consume&nbsp;everything&nbsp;up&nbsp;to&nbsp;the&nbsp;boundary.&nbsp;If&nbsp;not,&nbsp;consume&nbsp;only</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612897">//&nbsp;as&nbsp;much&nbsp;of&nbsp;the&nbsp;peek&nbsp;buffer&nbsp;as&nbsp;cannot&nbsp;hold&nbsp;the&nbsp;boundary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3612956">//&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3612968">nCopy</span>&nbsp;<span class="op" id="3612974">:=</span>&nbsp;<span class="num" id="3612977">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3612980">foundBoundary</span>&nbsp;<span class="op" id="3612994">:=</span>&nbsp;<span class="builtintype" id="3612997">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613004">if</span>&nbsp;<span class="ident" id="3613007">idx</span>&nbsp;<span class="op" id="3613011">:=</span>&nbsp;<span class="ident" id="3613014"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3613019">.</span><span class="ident" id="3613020">Index</span><span class="op" id="3613025">(</span><span class="ident" id="3613026"><a href="/mime/multipart/multipart.go.html#3612168">peek</a></span><span class="op" id="3613030">,</span>&nbsp;<span class="ident" id="3613032"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3613033">.</span><span class="ident" id="3613034">mr</span><span class="op" id="3613036">.</span><span class="ident" id="3613037">nlDashBoundary</span><span class="op" id="3613051">)</span><span class="op" id="3613052">;</span>&nbsp;<span class="ident" id="3613054"><a href="/mime/multipart/multipart.go.html#3613007">idx</a></span>&nbsp;<span class="op" id="3613058">!=</span>&nbsp;<span class="op" id="3613061">-</span><span class="num" id="3613062">1</span>&nbsp;<span class="op" id="3613064">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613068"><a href="/mime/multipart/multipart.go.html#3612968">nCopy</a></span>&nbsp;<span class="op" id="3613074">=</span>&nbsp;<span class="ident" id="3613076"><a href="/mime/multipart/multipart.go.html#3613007">idx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613082"><a href="/mime/multipart/multipart.go.html#3612980">foundBoundary</a></span>&nbsp;<span class="op" id="3613096">=</span>&nbsp;<span class="builtintype" id="3613098">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613104">}</span>&nbsp;<span class="keyword" id="3613106">else</span>&nbsp;<span class="keyword" id="3613111">if</span>&nbsp;<span class="ident" id="3613114">safeCount</span>&nbsp;<span class="op" id="3613124">:=</span>&nbsp;<span class="builtinfunc" id="3613127">len</span><span class="op" id="3613130">(</span><span class="ident" id="3613131"><a href="/mime/multipart/multipart.go.html#3612168">peek</a></span><span class="op" id="3613135">)</span>&nbsp;<span class="op" id="3613137">-</span>&nbsp;<span class="builtinfunc" id="3613139">len</span><span class="op" id="3613142">(</span><span class="ident" id="3613143"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3613144">.</span><span class="ident" id="3613145">mr</span><span class="op" id="3613147">.</span><span class="ident" id="3613148">nlDashBoundary</span><span class="op" id="3613162">)</span><span class="op" id="3613163">;</span>&nbsp;<span class="ident" id="3613165"><a href="/mime/multipart/multipart.go.html#3613114">safeCount</a></span>&nbsp;<span class="op" id="3613175">&gt;</span>&nbsp;<span class="num" id="3613177">0</span>&nbsp;<span class="op" id="3613179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613183"><a href="/mime/multipart/multipart.go.html#3612968">nCopy</a></span>&nbsp;<span class="op" id="3613189">=</span>&nbsp;<span class="ident" id="3613191"><a href="/mime/multipart/multipart.go.html#3613114">safeCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613202">}</span>&nbsp;<span class="keyword" id="3613204">else</span>&nbsp;<span class="keyword" id="3613209">if</span>&nbsp;<span class="ident" id="3613212"><a href="/mime/multipart/multipart.go.html#3612602">unexpectedEOF</a></span>&nbsp;<span class="op" id="3613226">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613230">//&nbsp;If&nbsp;we&#39;ve&nbsp;run&nbsp;out&nbsp;of&nbsp;peek&nbsp;buffer&nbsp;and&nbsp;the&nbsp;boundary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613284">//&nbsp;wasn&#39;t&nbsp;found&nbsp;(and&nbsp;can&#39;t&nbsp;possibly&nbsp;fit),&nbsp;we&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613341">//&nbsp;hit&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;file&nbsp;unexpectedly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613384">return</span>&nbsp;<span class="num" id="3613391">0</span><span class="op" id="3613392">,</span>&nbsp;<span class="ident" id="3613394"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3613396">.</span><span class="ident" id="3613397">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613415">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613418">if</span>&nbsp;<span class="ident" id="3613421"><a href="/mime/multipart/multipart.go.html#3612968">nCopy</a></span>&nbsp;<span class="op" id="3613427">&gt;</span>&nbsp;<span class="num" id="3613429">0</span>&nbsp;<span class="op" id="3613431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613435">if</span>&nbsp;<span class="ident" id="3613438">_</span><span class="op" id="3613439">,</span>&nbsp;<span class="ident" id="3613441">err</span>&nbsp;<span class="op" id="3613445">:=</span>&nbsp;<span class="ident" id="3613448"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3613450">.</span><span class="ident" id="3613451">CopyN</span><span class="op" id="3613456">(</span><span class="ident" id="3613457"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3613458">.</span><span class="ident" id="3613459">buffer</span><span class="op" id="3613465">,</span>&nbsp;<span class="ident" id="3613467"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3613468">.</span><span class="ident" id="3613469">mr</span><span class="op" id="3613471">.</span><span class="ident" id="3613472">bufReader</span><span class="op" id="3613481">,</span>&nbsp;<span class="ident" id="3613483">int64</span><span class="op" id="3613488">(</span><span class="ident" id="3613489"><a href="/mime/multipart/multipart.go.html#3612968">nCopy</a></span><span class="op" id="3613494">)</span><span class="op" id="3613495">)</span><span class="op" id="3613496">;</span>&nbsp;<span class="ident" id="3613498"><a href="/mime/multipart/multipart.go.html#3613441">err</a></span>&nbsp;<span class="op" id="3613502">!=</span>&nbsp;<span class="ident" id="3613505">nil</span>&nbsp;<span class="op" id="3613509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613514">return</span>&nbsp;<span class="num" id="3613521">0</span><span class="op" id="3613522">,</span>&nbsp;<span class="ident" id="3613524"><a href="/mime/multipart/multipart.go.html#3613441">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613533">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613536"><a href="/mime/multipart/multipart.go.html#3611915">n</a></span><span class="op" id="3613537">,</span>&nbsp;<span class="ident" id="3613539"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3613543">=</span>&nbsp;<span class="ident" id="3613545"><a href="/mime/multipart/multipart.go.html#3611936">p</a></span><span class="op" id="3613546">.</span><span class="ident" id="3613547">buffer</span><span class="op" id="3613553">.</span><span class="ident" id="3613554">Read</span><span class="op" id="3613558">(</span><span class="ident" id="3613559"><a href="/mime/multipart/multipart.go.html#3611904">d</a></span><span class="op" id="3613560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613563">if</span>&nbsp;<span class="ident" id="3613566"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3613570">==</span>&nbsp;<span class="ident" id="3613573"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3613575">.</span><span class="ident" id="3613576">EOF</span>&nbsp;<span class="op" id="3613580">&amp;&amp;</span>&nbsp;<span class="op" id="3613583">!</span><span class="ident" id="3613584"><a href="/mime/multipart/multipart.go.html#3612980">foundBoundary</a></span>&nbsp;<span class="op" id="3613598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613602">//&nbsp;If&nbsp;the&nbsp;boundary&nbsp;hasn&#39;t&nbsp;been&nbsp;reached&nbsp;there&#39;s&nbsp;more&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3613659">//&nbsp;read,&nbsp;so&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;an&nbsp;EOF&nbsp;from&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613715"><a href="/mime/multipart/multipart.go.html#3611922">err</a></span>&nbsp;<span class="op" id="3613719">=</span>&nbsp;<span class="ident" id="3613721">nil</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3613726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613729">return</span><br>
<span class="lineno"></span><span class="op" id="3613736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3613739">func</span>&nbsp;<span class="op" id="3613744">(</span><span class="ident" id="3613745">p</span>&nbsp;<span class="op" id="3613747">*</span><span class="ident" id="3613748"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3613752">)</span>&nbsp;<span class="ident" id="3613754">Close</span><span class="op" id="3613759">(</span><span class="op" id="3613760">)</span>&nbsp;<span class="builtintype" id="3613762">error</span>&nbsp;<span class="op" id="3613768">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613771"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3613773">.</span><span class="ident" id="3613774">Copy</span><span class="op" id="3613778">(</span><span class="ident" id="3613779"><a href="/mime/multipart/multipart.go.html#3608670">ioutil</a></span><span class="op" id="3613785">.</span><span class="ident" id="3613786">Discard</span><span class="op" id="3613793">,</span>&nbsp;<span class="ident" id="3613795"><a href="/mime/multipart/multipart.go.html#3613745">p</a></span><span class="op" id="3613796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3613799">return</span>&nbsp;<span class="ident" id="3613806">nil</span><br>
<span class="lineno"></span><span class="op" id="3613810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3613813">//&nbsp;Reader&nbsp;is&nbsp;an&nbsp;iterator&nbsp;over&nbsp;parts&nbsp;in&nbsp;a&nbsp;MIME&nbsp;multipart&nbsp;body.</span><br>
<span class="lineno">205</span><span class="comment" id="3613875">//&nbsp;Reader&#39;s&nbsp;underlying&nbsp;parser&nbsp;consumes&nbsp;its&nbsp;input&nbsp;as&nbsp;needed.&nbsp;&nbsp;Seeking</span><br>
<span class="lineno"></span><span class="comment" id="3613944">//&nbsp;isn&#39;t&nbsp;supported.</span><br>
<span class="lineno"></span><span class="keyword" id="3613964">type</span>&nbsp;<span class="ident" id="3613969">Reader</span>&nbsp;<span class="keyword" id="3613976">struct</span>&nbsp;<span class="op" id="3613983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3613986">bufReader</span>&nbsp;<span class="op" id="3613996">*</span><span class="ident" id="3613997"><a href="/mime/multipart/multipart.go.html#3608639">bufio</a></span><span class="op" id="3614002">.</span><span class="ident" id="3614003">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614012">currentPart</span>&nbsp;<span class="op" id="3614024">*</span><span class="ident" id="3614025"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614031">partsRead</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3614043">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614049">nl</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3614066">[</span><span class="op" id="3614067">]</span><span class="builtintype" id="3614068">byte</span>&nbsp;<span class="comment" id="3614073">//&nbsp;&#34;\r\n&#34;&nbsp;or&nbsp;&#34;\n&#34;&nbsp;(set&nbsp;after&nbsp;seeing&nbsp;first&nbsp;boundary&nbsp;line)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614131">nlDashBoundary</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3614148">[</span><span class="op" id="3614149">]</span><span class="builtintype" id="3614150">byte</span>&nbsp;<span class="comment" id="3614155">//&nbsp;nl&nbsp;+&nbsp;&#34;--boundary&#34;</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614177">dashBoundaryDash</span>&nbsp;<span class="op" id="3614194">[</span><span class="op" id="3614195">]</span><span class="builtintype" id="3614196">byte</span>&nbsp;<span class="comment" id="3614201">//&nbsp;&#34;--boundary--&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614220">dashBoundary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3614237">[</span><span class="op" id="3614238">]</span><span class="builtintype" id="3614239">byte</span>&nbsp;<span class="comment" id="3614244">//&nbsp;&#34;--boundary&#34;</span><br>
<span class="lineno"></span><span class="op" id="3614260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3614263">//&nbsp;NextPart&nbsp;returns&nbsp;the&nbsp;next&nbsp;part&nbsp;in&nbsp;the&nbsp;multipart&nbsp;or&nbsp;an&nbsp;error.</span><br>
<span class="lineno">220</span><span class="comment" id="3614327">//&nbsp;When&nbsp;there&nbsp;are&nbsp;no&nbsp;more&nbsp;parts,&nbsp;the&nbsp;error&nbsp;io.EOF&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3614390">func</span>&nbsp;<span class="op" id="3614395">(</span><span class="ident" id="3614396">r</span>&nbsp;<span class="op" id="3614398">*</span><span class="ident" id="3614399"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3614405">)</span>&nbsp;<span class="ident" id="3614407">NextPart</span><span class="op" id="3614415">(</span><span class="op" id="3614416">)</span>&nbsp;<span class="op" id="3614418">(</span><span class="op" id="3614419">*</span><span class="ident" id="3614420"><a href="/mime/multipart/multipart.go.html#3608814">Part</a></span><span class="op" id="3614424">,</span>&nbsp;<span class="builtintype" id="3614426">error</span><span class="op" id="3614431">)</span>&nbsp;<span class="op" id="3614433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614436">if</span>&nbsp;<span class="ident" id="3614439"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3614440">.</span><span class="ident" id="3614441">currentPart</span>&nbsp;<span class="op" id="3614453">!=</span>&nbsp;<span class="ident" id="3614456">nil</span>&nbsp;<span class="op" id="3614460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614464"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3614465">.</span><span class="ident" id="3614466">currentPart</span><span class="op" id="3614477">.</span><span class="ident" id="3614478">Close</span><span class="op" id="3614483">(</span><span class="op" id="3614484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614487">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614491">expectNewPart</span>&nbsp;<span class="op" id="3614505">:=</span>&nbsp;<span class="builtintype" id="3614508">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614515">for</span>&nbsp;<span class="op" id="3614519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3614523">line</span><span class="op" id="3614527">,</span>&nbsp;<span class="ident" id="3614529">err</span>&nbsp;<span class="op" id="3614533">:=</span>&nbsp;<span class="ident" id="3614536"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3614537">.</span><span class="ident" id="3614538">bufReader</span><span class="op" id="3614547">.</span><span class="ident" id="3614548">ReadSlice</span><span class="op" id="3614557">(</span><span class="string" id="3614558">&#39;\n&#39;</span><span class="op" id="3614562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614566">if</span>&nbsp;<span class="ident" id="3614569"><a href="/mime/multipart/multipart.go.html#3614529">err</a></span>&nbsp;<span class="op" id="3614573">==</span>&nbsp;<span class="ident" id="3614576"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3614578">.</span><span class="ident" id="3614579">EOF</span>&nbsp;<span class="op" id="3614583">&amp;&amp;</span>&nbsp;<span class="ident" id="3614586"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3614587">.</span><span class="ident" id="3614588">isFinalBoundary</span><span class="op" id="3614603">(</span><span class="ident" id="3614604"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3614608">)</span>&nbsp;<span class="op" id="3614610">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614615">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;ends&nbsp;in&nbsp;&#34;--boundary--&#34;&nbsp;without&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614670">//&nbsp;trailing&nbsp;&#34;\r\n&#34;,&nbsp;ReadSlice&nbsp;will&nbsp;return&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614724">//&nbsp;(since&nbsp;it&#39;s&nbsp;missing&nbsp;the&nbsp;&#39;\n&#39;),&nbsp;but&nbsp;this&nbsp;is&nbsp;a&nbsp;valid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614781">//&nbsp;multipart&nbsp;EOF&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;return&nbsp;io.EOF&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3614840">//&nbsp;a&nbsp;fmt-wrapped&nbsp;one.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614865">return</span>&nbsp;<span class="ident" id="3614872">nil</span><span class="op" id="3614875">,</span>&nbsp;<span class="ident" id="3614877"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3614879">.</span><span class="ident" id="3614880">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614890">if</span>&nbsp;<span class="ident" id="3614893"><a href="/mime/multipart/multipart.go.html#3614529">err</a></span>&nbsp;<span class="op" id="3614897">!=</span>&nbsp;<span class="ident" id="3614900">nil</span>&nbsp;<span class="op" id="3614904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614909">return</span>&nbsp;<span class="ident" id="3614916">nil</span><span class="op" id="3614919">,</span>&nbsp;<span class="ident" id="3614921"><a href="/mime/multipart/multipart.go.html#3608657">fmt</a></span><span class="op" id="3614924">.</span><span class="ident" id="3614925">Errorf</span><span class="op" id="3614931">(</span><span class="string" id="3614932">&#34;multipart:&nbsp;NextPart:&nbsp;%v&#34;</span><span class="op" id="3614957">,</span>&nbsp;<span class="ident" id="3614959"><a href="/mime/multipart/multipart.go.html#3614529">err</a></span><span class="op" id="3614962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3614966">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3614971">if</span>&nbsp;<span class="ident" id="3614974"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3614975">.</span><span class="ident" id="3614976">isBoundaryDelimiterLine</span><span class="op" id="3614999">(</span><span class="ident" id="3615000"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3615004">)</span>&nbsp;<span class="op" id="3615006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615011"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615012">.</span><span class="ident" id="3615013">partsRead</span><span class="op" id="3615022">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615028">bp</span><span class="op" id="3615030">,</span>&nbsp;<span class="ident" id="3615032">err</span>&nbsp;<span class="op" id="3615036">:=</span>&nbsp;<span class="ident" id="3615039"><a href="/mime/multipart/multipart.go.html#3610961">newPart</a></span><span class="op" id="3615046">(</span><span class="ident" id="3615047"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615053">if</span>&nbsp;<span class="ident" id="3615056"><a href="/mime/multipart/multipart.go.html#3615032">err</a></span>&nbsp;<span class="op" id="3615060">!=</span>&nbsp;<span class="ident" id="3615063">nil</span>&nbsp;<span class="op" id="3615067">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615073">return</span>&nbsp;<span class="ident" id="3615080">nil</span><span class="op" id="3615083">,</span>&nbsp;<span class="ident" id="3615085"><a href="/mime/multipart/multipart.go.html#3615032">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615097"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615098">.</span><span class="ident" id="3615099">currentPart</span>&nbsp;<span class="op" id="3615111">=</span>&nbsp;<span class="ident" id="3615113"><a href="/mime/multipart/multipart.go.html#3615028">bp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615119">return</span>&nbsp;<span class="ident" id="3615126"><a href="/mime/multipart/multipart.go.html#3615028">bp</a></span><span class="op" id="3615128">,</span>&nbsp;<span class="ident" id="3615130">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615136">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615141">if</span>&nbsp;<span class="ident" id="3615144"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615145">.</span><span class="ident" id="3615146">isFinalBoundary</span><span class="op" id="3615161">(</span><span class="ident" id="3615162"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3615166">)</span>&nbsp;<span class="op" id="3615168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615173">//&nbsp;Expected&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615192">return</span>&nbsp;<span class="ident" id="3615199">nil</span><span class="op" id="3615202">,</span>&nbsp;<span class="ident" id="3615204"><a href="/mime/multipart/multipart.go.html#3608664">io</a></span><span class="op" id="3615206">.</span><span class="ident" id="3615207">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615213">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615218">if</span>&nbsp;<span class="ident" id="3615221"><a href="/mime/multipart/multipart.go.html#3614491">expectNewPart</a></span>&nbsp;<span class="op" id="3615235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615240">return</span>&nbsp;<span class="ident" id="3615247">nil</span><span class="op" id="3615250">,</span>&nbsp;<span class="ident" id="3615252"><a href="/mime/multipart/multipart.go.html#3608657">fmt</a></span><span class="op" id="3615255">.</span><span class="ident" id="3615256">Errorf</span><span class="op" id="3615262">(</span><span class="string" id="3615263">&#34;multipart:&nbsp;expecting&nbsp;a&nbsp;new&nbsp;Part;&nbsp;got&nbsp;line&nbsp;%q&#34;</span><span class="op" id="3615309">,</span>&nbsp;<span class="builtintype" id="3615311">string</span><span class="op" id="3615317">(</span><span class="ident" id="3615318"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3615322">)</span><span class="op" id="3615323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615332">if</span>&nbsp;<span class="ident" id="3615335"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615336">.</span><span class="ident" id="3615337">partsRead</span>&nbsp;<span class="op" id="3615347">==</span>&nbsp;<span class="num" id="3615350">0</span>&nbsp;<span class="op" id="3615352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615357">//&nbsp;skip&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615373">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615389">//&nbsp;Consume&nbsp;the&nbsp;&#34;\n&#34;&nbsp;or&nbsp;&#34;\r\n&#34;&nbsp;separator&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615443">//&nbsp;body&nbsp;of&nbsp;the&nbsp;previous&nbsp;part&nbsp;and&nbsp;the&nbsp;boundary&nbsp;line&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615499">//&nbsp;now&nbsp;expect&nbsp;will&nbsp;follow.&nbsp;(either&nbsp;a&nbsp;new&nbsp;part&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3615554">//&nbsp;end&nbsp;boundary)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615573">if</span>&nbsp;<span class="ident" id="3615576"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3615581">.</span><span class="ident" id="3615582">Equal</span><span class="op" id="3615587">(</span><span class="ident" id="3615588"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3615592">,</span>&nbsp;<span class="ident" id="3615594"><a href="/mime/multipart/multipart.go.html#3614396">r</a></span><span class="op" id="3615595">.</span><span class="ident" id="3615596">nl</span><span class="op" id="3615598">)</span>&nbsp;<span class="op" id="3615600">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615605"><a href="/mime/multipart/multipart.go.html#3614491">expectNewPart</a></span>&nbsp;<span class="op" id="3615619">=</span>&nbsp;<span class="builtintype" id="3615621">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615629">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615645">return</span>&nbsp;<span class="ident" id="3615652">nil</span><span class="op" id="3615655">,</span>&nbsp;<span class="ident" id="3615657"><a href="/mime/multipart/multipart.go.html#3608657">fmt</a></span><span class="op" id="3615660">.</span><span class="ident" id="3615661">Errorf</span><span class="op" id="3615667">(</span><span class="string" id="3615668">&#34;multipart:&nbsp;unexpected&nbsp;line&nbsp;in&nbsp;Next():&nbsp;%q&#34;</span><span class="op" id="3615710">,</span>&nbsp;<span class="ident" id="3615712"><a href="/mime/multipart/multipart.go.html#3614523">line</a></span><span class="op" id="3615716">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615719">}</span><br>
<span class="lineno"></span><span class="op" id="3615721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3615724">//&nbsp;isFinalBoundary&nbsp;reports&nbsp;whether&nbsp;line&nbsp;is&nbsp;the&nbsp;final&nbsp;boundary&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="3615791">//&nbsp;indicating&nbsp;that&nbsp;all&nbsp;parts&nbsp;are&nbsp;over.</span><br>
<span class="lineno">280</span><span class="comment" id="3615830">//&nbsp;It&nbsp;matches&nbsp;`^--boundary--[&nbsp;\t]*(\r\n)?$`</span><br>
<span class="lineno"></span><span class="keyword" id="3615874">func</span>&nbsp;<span class="op" id="3615879">(</span><span class="ident" id="3615880">mr</span>&nbsp;<span class="op" id="3615883">*</span><span class="ident" id="3615884"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3615890">)</span>&nbsp;<span class="ident" id="3615892">isFinalBoundary</span><span class="op" id="3615907">(</span><span class="ident" id="3615908">line</span>&nbsp;<span class="op" id="3615913">[</span><span class="op" id="3615914">]</span><span class="builtintype" id="3615915">byte</span><span class="op" id="3615919">)</span>&nbsp;<span class="builtintype" id="3615921">bool</span>&nbsp;<span class="op" id="3615926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615929">if</span>&nbsp;<span class="op" id="3615932">!</span><span class="ident" id="3615933"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3615938">.</span><span class="ident" id="3615939">HasPrefix</span><span class="op" id="3615948">(</span><span class="ident" id="3615949"><a href="/mime/multipart/multipart.go.html#3615908">line</a></span><span class="op" id="3615953">,</span>&nbsp;<span class="ident" id="3615955"><a href="/mime/multipart/multipart.go.html#3615880">mr</a></span><span class="op" id="3615957">.</span><span class="ident" id="3615958">dashBoundaryDash</span><span class="op" id="3615974">)</span>&nbsp;<span class="op" id="3615976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3615980">return</span>&nbsp;<span class="builtintype" id="3615987">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3615994">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3615997">rest</span>&nbsp;<span class="op" id="3616002">:=</span>&nbsp;<span class="ident" id="3616005"><a href="/mime/multipart/multipart.go.html#3615908">line</a></span><span class="op" id="3616009">[</span><span class="builtinfunc" id="3616010">len</span><span class="op" id="3616013">(</span><span class="ident" id="3616014"><a href="/mime/multipart/multipart.go.html#3615880">mr</a></span><span class="op" id="3616016">.</span><span class="ident" id="3616017">dashBoundaryDash</span><span class="op" id="3616033">)</span><span class="op" id="3616034">:</span><span class="op" id="3616035">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616038"><a href="/mime/multipart/multipart.go.html#3615997">rest</a></span>&nbsp;<span class="op" id="3616043">=</span>&nbsp;<span class="ident" id="3616045"><a href="/mime/multipart/multipart.go.html#3618170">skipLWSPChar</a></span><span class="op" id="3616057">(</span><span class="ident" id="3616058"><a href="/mime/multipart/multipart.go.html#3615997">rest</a></span><span class="op" id="3616062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616065">return</span>&nbsp;<span class="builtinfunc" id="3616072">len</span><span class="op" id="3616075">(</span><span class="ident" id="3616076"><a href="/mime/multipart/multipart.go.html#3615997">rest</a></span><span class="op" id="3616080">)</span>&nbsp;<span class="op" id="3616082">==</span>&nbsp;<span class="num" id="3616085">0</span>&nbsp;<span class="op" id="3616087">||</span>&nbsp;<span class="ident" id="3616090"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3616095">.</span><span class="ident" id="3616096">Equal</span><span class="op" id="3616101">(</span><span class="ident" id="3616102"><a href="/mime/multipart/multipart.go.html#3615997">rest</a></span><span class="op" id="3616106">,</span>&nbsp;<span class="ident" id="3616108"><a href="/mime/multipart/multipart.go.html#3615880">mr</a></span><span class="op" id="3616110">.</span><span class="ident" id="3616111">nl</span><span class="op" id="3616113">)</span><br>
<span class="lineno"></span><span class="op" id="3616115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="3616118">func</span>&nbsp;<span class="op" id="3616123">(</span><span class="ident" id="3616124">mr</span>&nbsp;<span class="op" id="3616127">*</span><span class="ident" id="3616128"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3616134">)</span>&nbsp;<span class="ident" id="3616136">isBoundaryDelimiterLine</span><span class="op" id="3616159">(</span><span class="ident" id="3616160">line</span>&nbsp;<span class="op" id="3616165">[</span><span class="op" id="3616166">]</span><span class="builtintype" id="3616167">byte</span><span class="op" id="3616171">)</span>&nbsp;<span class="op" id="3616173">(</span><span class="ident" id="3616174">ret</span>&nbsp;<span class="builtintype" id="3616178">bool</span><span class="op" id="3616182">)</span>&nbsp;<span class="op" id="3616184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616187">//&nbsp;http://tools.ietf.org/html/rfc2046#section-5.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616238">//&nbsp;&nbsp;&nbsp;The&nbsp;boundary&nbsp;delimiter&nbsp;line&nbsp;is&nbsp;then&nbsp;defined&nbsp;as&nbsp;a&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616298">//&nbsp;&nbsp;&nbsp;consisting&nbsp;entirely&nbsp;of&nbsp;two&nbsp;hyphen&nbsp;characters&nbsp;(&#34;-&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616355">//&nbsp;&nbsp;&nbsp;decimal&nbsp;value&nbsp;45)&nbsp;followed&nbsp;by&nbsp;the&nbsp;boundary&nbsp;parameter</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616414">//&nbsp;&nbsp;&nbsp;value&nbsp;from&nbsp;the&nbsp;Content-Type&nbsp;header&nbsp;field,&nbsp;optional&nbsp;linear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616478">//&nbsp;&nbsp;&nbsp;whitespace,&nbsp;and&nbsp;a&nbsp;terminating&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616520">if</span>&nbsp;<span class="op" id="3616523">!</span><span class="ident" id="3616524"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3616529">.</span><span class="ident" id="3616530">HasPrefix</span><span class="op" id="3616539">(</span><span class="ident" id="3616540"><a href="/mime/multipart/multipart.go.html#3616160">line</a></span><span class="op" id="3616544">,</span>&nbsp;<span class="ident" id="3616546"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616548">.</span><span class="ident" id="3616549">dashBoundary</span><span class="op" id="3616561">)</span>&nbsp;<span class="op" id="3616563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616567">return</span>&nbsp;<span class="builtintype" id="3616574">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616581">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616584">rest</span>&nbsp;<span class="op" id="3616589">:=</span>&nbsp;<span class="ident" id="3616592"><a href="/mime/multipart/multipart.go.html#3616160">line</a></span><span class="op" id="3616596">[</span><span class="builtinfunc" id="3616597">len</span><span class="op" id="3616600">(</span><span class="ident" id="3616601"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616603">.</span><span class="ident" id="3616604">dashBoundary</span><span class="op" id="3616616">)</span><span class="op" id="3616617">:</span><span class="op" id="3616618">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616621"><a href="/mime/multipart/multipart.go.html#3616584">rest</a></span>&nbsp;<span class="op" id="3616626">=</span>&nbsp;<span class="ident" id="3616628"><a href="/mime/multipart/multipart.go.html#3618170">skipLWSPChar</a></span><span class="op" id="3616640">(</span><span class="ident" id="3616641"><a href="/mime/multipart/multipart.go.html#3616584">rest</a></span><span class="op" id="3616645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616649">//&nbsp;On&nbsp;the&nbsp;first&nbsp;part,&nbsp;see&nbsp;our&nbsp;lines&nbsp;are&nbsp;ending&nbsp;in&nbsp;\n&nbsp;instead&nbsp;of&nbsp;\r\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616719">//&nbsp;and&nbsp;switch&nbsp;into&nbsp;that&nbsp;mode&nbsp;if&nbsp;so.&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;violation&nbsp;of&nbsp;the&nbsp;spec,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3616790">//&nbsp;but&nbsp;occurs&nbsp;in&nbsp;practice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616818">if</span>&nbsp;<span class="ident" id="3616821"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616823">.</span><span class="ident" id="3616824">partsRead</span>&nbsp;<span class="op" id="3616834">==</span>&nbsp;<span class="num" id="3616837">0</span>&nbsp;<span class="op" id="3616839">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3616842">len</span><span class="op" id="3616845">(</span><span class="ident" id="3616846"><a href="/mime/multipart/multipart.go.html#3616584">rest</a></span><span class="op" id="3616850">)</span>&nbsp;<span class="op" id="3616852">==</span>&nbsp;<span class="num" id="3616855">1</span>&nbsp;<span class="op" id="3616857">&amp;&amp;</span>&nbsp;<span class="ident" id="3616860"><a href="/mime/multipart/multipart.go.html#3616584">rest</a></span><span class="op" id="3616864">[</span><span class="num" id="3616865">0</span><span class="op" id="3616866">]</span>&nbsp;<span class="op" id="3616868">==</span>&nbsp;<span class="string" id="3616871">&#39;\n&#39;</span>&nbsp;<span class="op" id="3616876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616880"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616882">.</span><span class="ident" id="3616883">nl</span>&nbsp;<span class="op" id="3616886">=</span>&nbsp;<span class="ident" id="3616888"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616890">.</span><span class="ident" id="3616891">nl</span><span class="op" id="3616893">[</span><span class="num" id="3616894">1</span><span class="op" id="3616895">:</span><span class="op" id="3616896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3616900"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616902">.</span><span class="ident" id="3616903">nlDashBoundary</span>&nbsp;<span class="op" id="3616918">=</span>&nbsp;<span class="ident" id="3616920"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616922">.</span><span class="ident" id="3616923">nlDashBoundary</span><span class="op" id="3616937">[</span><span class="num" id="3616938">1</span><span class="op" id="3616939">:</span><span class="op" id="3616940">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3616943">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3616946">return</span>&nbsp;<span class="ident" id="3616953"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3616958">.</span><span class="ident" id="3616959">Equal</span><span class="op" id="3616964">(</span><span class="ident" id="3616965"><a href="/mime/multipart/multipart.go.html#3616584">rest</a></span><span class="op" id="3616969">,</span>&nbsp;<span class="ident" id="3616971"><a href="/mime/multipart/multipart.go.html#3616124">mr</a></span><span class="op" id="3616973">.</span><span class="ident" id="3616974">nl</span><span class="op" id="3616976">)</span><br>
<span class="lineno"></span><span class="op" id="3616978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3616981">//&nbsp;peekBufferIsEmptyPart&nbsp;reports&nbsp;whether&nbsp;the&nbsp;provided&nbsp;peek-ahead</span><br>
<span class="lineno"></span><span class="comment" id="3617046">//&nbsp;buffer&nbsp;represents&nbsp;an&nbsp;empty&nbsp;part.&nbsp;It&nbsp;is&nbsp;called&nbsp;only&nbsp;if&nbsp;we&#39;ve&nbsp;not</span><br>
<span class="lineno">315</span><span class="comment" id="3617113">//&nbsp;already&nbsp;read&nbsp;any&nbsp;bytes&nbsp;in&nbsp;this&nbsp;part&nbsp;and&nbsp;checks&nbsp;for&nbsp;the&nbsp;case&nbsp;of&nbsp;MIME</span><br>
<span class="lineno"></span><span class="comment" id="3617184">//&nbsp;software&nbsp;not&nbsp;writing&nbsp;the&nbsp;\r\n&nbsp;on&nbsp;empty&nbsp;parts.&nbsp;Some&nbsp;does,&nbsp;some</span><br>
<span class="lineno"></span><span class="comment" id="3617249">//&nbsp;doesn&#39;t.</span><br>
<span class="lineno"></span><span class="comment" id="3617261">//</span><br>
<span class="lineno"></span><span class="comment" id="3617264">//&nbsp;This&nbsp;checks&nbsp;that&nbsp;what&nbsp;follows&nbsp;the&nbsp;&#34;--boundary&#34;&nbsp;is&nbsp;actually&nbsp;the&nbsp;end</span><br>
<span class="lineno">320</span><span class="comment" id="3617334">//&nbsp;(&#34;--boundary--&#34;&nbsp;with&nbsp;optional&nbsp;whitespace)&nbsp;or&nbsp;optional&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="3617402">//&nbsp;and&nbsp;then&nbsp;a&nbsp;newline,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;catch&nbsp;&#34;--boundaryFAKE&#34;,&nbsp;in&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3617470">//&nbsp;case&nbsp;the&nbsp;whole&nbsp;line&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3617514">func</span>&nbsp;<span class="op" id="3617519">(</span><span class="ident" id="3617520">mr</span>&nbsp;<span class="op" id="3617523">*</span><span class="ident" id="3617524"><a href="/mime/multipart/multipart.go.html#3613969">Reader</a></span><span class="op" id="3617530">)</span>&nbsp;<span class="ident" id="3617532">peekBufferIsEmptyPart</span><span class="op" id="3617553">(</span><span class="ident" id="3617554">peek</span>&nbsp;<span class="op" id="3617559">[</span><span class="op" id="3617560">]</span><span class="builtintype" id="3617561">byte</span><span class="op" id="3617565">)</span>&nbsp;<span class="builtintype" id="3617567">bool</span>&nbsp;<span class="op" id="3617572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3617575">//&nbsp;End&nbsp;of&nbsp;parts&nbsp;case.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3617598">//&nbsp;Test&nbsp;whether&nbsp;peek&nbsp;matches&nbsp;`^--boundary--[&nbsp;\t]*(?:\r\n|$)`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617660">if</span>&nbsp;<span class="ident" id="3617663"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3617668">.</span><span class="ident" id="3617669">HasPrefix</span><span class="op" id="3617678">(</span><span class="ident" id="3617679"><a href="/mime/multipart/multipart.go.html#3617554">peek</a></span><span class="op" id="3617683">,</span>&nbsp;<span class="ident" id="3617685"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3617687">.</span><span class="ident" id="3617688">dashBoundaryDash</span><span class="op" id="3617704">)</span>&nbsp;<span class="op" id="3617706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617710">rest</span>&nbsp;<span class="op" id="3617715">:=</span>&nbsp;<span class="ident" id="3617718"><a href="/mime/multipart/multipart.go.html#3617554">peek</a></span><span class="op" id="3617722">[</span><span class="builtinfunc" id="3617723">len</span><span class="op" id="3617726">(</span><span class="ident" id="3617727"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3617729">.</span><span class="ident" id="3617730">dashBoundaryDash</span><span class="op" id="3617746">)</span><span class="op" id="3617747">:</span><span class="op" id="3617748">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617752"><a href="/mime/multipart/multipart.go.html#3617710">rest</a></span>&nbsp;<span class="op" id="3617757">=</span>&nbsp;<span class="ident" id="3617759"><a href="/mime/multipart/multipart.go.html#3618170">skipLWSPChar</a></span><span class="op" id="3617771">(</span><span class="ident" id="3617772"><a href="/mime/multipart/multipart.go.html#3617710">rest</a></span><span class="op" id="3617776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617780">return</span>&nbsp;<span class="ident" id="3617787"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3617792">.</span><span class="ident" id="3617793">HasPrefix</span><span class="op" id="3617802">(</span><span class="ident" id="3617803"><a href="/mime/multipart/multipart.go.html#3617710">rest</a></span><span class="op" id="3617807">,</span>&nbsp;<span class="ident" id="3617809"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3617811">.</span><span class="ident" id="3617812">nl</span><span class="op" id="3617814">)</span>&nbsp;<span class="op" id="3617816">||</span>&nbsp;<span class="builtinfunc" id="3617819">len</span><span class="op" id="3617822">(</span><span class="ident" id="3617823"><a href="/mime/multipart/multipart.go.html#3617710">rest</a></span><span class="op" id="3617827">)</span>&nbsp;<span class="op" id="3617829">==</span>&nbsp;<span class="num" id="3617832">0</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617838">if</span>&nbsp;<span class="op" id="3617841">!</span><span class="ident" id="3617842"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3617847">.</span><span class="ident" id="3617848">HasPrefix</span><span class="op" id="3617857">(</span><span class="ident" id="3617858"><a href="/mime/multipart/multipart.go.html#3617554">peek</a></span><span class="op" id="3617862">,</span>&nbsp;<span class="ident" id="3617864"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3617866">.</span><span class="ident" id="3617867">dashBoundary</span><span class="op" id="3617879">)</span>&nbsp;<span class="op" id="3617881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3617885">return</span>&nbsp;<span class="builtintype" id="3617892">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3617899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3617902">//&nbsp;Test&nbsp;whether&nbsp;rest&nbsp;matches&nbsp;`^[&nbsp;\t]*\r\n`)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617947">rest</span>&nbsp;<span class="op" id="3617952">:=</span>&nbsp;<span class="ident" id="3617955"><a href="/mime/multipart/multipart.go.html#3617554">peek</a></span><span class="op" id="3617959">[</span><span class="builtinfunc" id="3617960">len</span><span class="op" id="3617963">(</span><span class="ident" id="3617964"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3617966">.</span><span class="ident" id="3617967">dashBoundary</span><span class="op" id="3617979">)</span><span class="op" id="3617980">:</span><span class="op" id="3617981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3617984"><a href="/mime/multipart/multipart.go.html#3617947">rest</a></span>&nbsp;<span class="op" id="3617989">=</span>&nbsp;<span class="ident" id="3617991"><a href="/mime/multipart/multipart.go.html#3618170">skipLWSPChar</a></span><span class="op" id="3618003">(</span><span class="ident" id="3618004"><a href="/mime/multipart/multipart.go.html#3617947">rest</a></span><span class="op" id="3618008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618011">return</span>&nbsp;<span class="ident" id="3618018"><a href="/mime/multipart/multipart.go.html#3608648">bytes</a></span><span class="op" id="3618023">.</span><span class="ident" id="3618024">HasPrefix</span><span class="op" id="3618033">(</span><span class="ident" id="3618034"><a href="/mime/multipart/multipart.go.html#3617947">rest</a></span><span class="op" id="3618038">,</span>&nbsp;<span class="ident" id="3618040"><a href="/mime/multipart/multipart.go.html#3617520">mr</a></span><span class="op" id="3618042">.</span><span class="ident" id="3618043">nl</span><span class="op" id="3618045">)</span><br>
<span class="lineno"></span><span class="op" id="3618047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="3618050">//&nbsp;skipLWSPChar&nbsp;returns&nbsp;b&nbsp;with&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;tabs&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3618114">//&nbsp;RFC&nbsp;822&nbsp;defines:</span><br>
<span class="lineno"></span><span class="comment" id="3618134">//&nbsp;&nbsp;&nbsp;&nbsp;LWSP-char&nbsp;=&nbsp;SPACE&nbsp;/&nbsp;HTAB</span><br>
<span class="lineno"></span><span class="keyword" id="3618165">func</span>&nbsp;<span class="ident" id="3618170">skipLWSPChar</span><span class="op" id="3618182">(</span><span class="ident" id="3618183">b</span>&nbsp;<span class="op" id="3618185">[</span><span class="op" id="3618186">]</span><span class="builtintype" id="3618187">byte</span><span class="op" id="3618191">)</span>&nbsp;<span class="op" id="3618193">[</span><span class="op" id="3618194">]</span><span class="builtintype" id="3618195">byte</span>&nbsp;<span class="op" id="3618200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618203">for</span>&nbsp;<span class="builtinfunc" id="3618207">len</span><span class="op" id="3618210">(</span><span class="ident" id="3618211"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span><span class="op" id="3618212">)</span>&nbsp;<span class="op" id="3618214">&gt;</span>&nbsp;<span class="num" id="3618216">0</span>&nbsp;<span class="op" id="3618218">&amp;&amp;</span>&nbsp;<span class="op" id="3618221">(</span><span class="ident" id="3618222"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span><span class="op" id="3618223">[</span><span class="num" id="3618224">0</span><span class="op" id="3618225">]</span>&nbsp;<span class="op" id="3618227">==</span>&nbsp;<span class="string" id="3618230">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3618234">||</span>&nbsp;<span class="ident" id="3618237"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span><span class="op" id="3618238">[</span><span class="num" id="3618239">0</span><span class="op" id="3618240">]</span>&nbsp;<span class="op" id="3618242">==</span>&nbsp;<span class="string" id="3618245">&#39;\t&#39;</span><span class="op" id="3618249">)</span>&nbsp;<span class="op" id="3618251">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3618255"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span>&nbsp;<span class="op" id="3618257">=</span>&nbsp;<span class="ident" id="3618259"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span><span class="op" id="3618260">[</span><span class="num" id="3618261">1</span><span class="op" id="3618262">:</span><span class="op" id="3618263">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3618266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3618269">return</span>&nbsp;<span class="ident" id="3618276"><a href="/mime/multipart/multipart.go.html#3618183">b</a></span><br>
<span class="lineno"></span><span class="op" id="3618278">}</span>
</div>
</body>
</html>
