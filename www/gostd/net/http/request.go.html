<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html" class="current">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4133798">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4133853">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4133907">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4133958">//&nbsp;HTTP&nbsp;Request&nbsp;reading&nbsp;and&nbsp;parsing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4133996">package</span>&nbsp;<span class="ident" id="4134004">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4134010">import</span>&nbsp;<span class="op" id="4134017">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134020">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134029">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134038">&#34;crypto/tls&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134052">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134071">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134081">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134088">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134094">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134107">&#34;mime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134115">&#34;mime/multipart&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134133">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134150">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134161">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134172">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4134183">&#34;sync&#34;</span><br>
<span class="lineno">25</span><span class="op" id="4134190">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4134193">const</span>&nbsp;<span class="op" id="4134199">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134202">maxValueLength</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4134219">=</span>&nbsp;<span class="num" id="4134221">4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134227">maxHeaderLines</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4134244">=</span>&nbsp;<span class="num" id="4134246">1024</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134252">chunkSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4134269">=</span>&nbsp;<span class="num" id="4134271">4</span>&nbsp;<span class="op" id="4134273">&lt;&lt;</span>&nbsp;<span class="num" id="4134276">10</span>&nbsp;&nbsp;<span class="comment" id="4134280">//&nbsp;4&nbsp;KB&nbsp;chunks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134296">defaultMaxMemory</span>&nbsp;<span class="op" id="4134313">=</span>&nbsp;<span class="num" id="4134315">32</span>&nbsp;<span class="op" id="4134318">&lt;&lt;</span>&nbsp;<span class="num" id="4134321">20</span>&nbsp;<span class="comment" id="4134324">//&nbsp;32&nbsp;MB</span><br>
<span class="lineno"></span><span class="op" id="4134333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4134336">//&nbsp;ErrMissingFile&nbsp;is&nbsp;returned&nbsp;by&nbsp;FormFile&nbsp;when&nbsp;the&nbsp;provided&nbsp;file&nbsp;field&nbsp;name</span><br>
<span class="lineno">35</span><span class="comment" id="4134412">//&nbsp;is&nbsp;either&nbsp;not&nbsp;present&nbsp;in&nbsp;the&nbsp;request&nbsp;or&nbsp;not&nbsp;a&nbsp;file&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="4134473">var</span>&nbsp;<span class="ident" id="4134477">ErrMissingFile</span>&nbsp;<span class="op" id="4134492">=</span>&nbsp;<span class="ident" id="4134494"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4134500">.</span><span class="ident" id="4134501"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4134504">(</span><span class="string" id="4134505">&#34;http:&nbsp;no&nbsp;such&nbsp;file&#34;</span><span class="op" id="4134525">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4134528">//&nbsp;HTTP&nbsp;request&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="keyword" id="4134560">type</span>&nbsp;<span class="ident" id="4134565">ProtocolError</span>&nbsp;<span class="keyword" id="4134579">struct</span>&nbsp;<span class="op" id="4134586">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134589">ErrorString</span>&nbsp;<span class="builtintype" id="4134601">string</span><br>
<span class="lineno"></span><span class="op" id="4134608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4134611">func</span>&nbsp;<span class="op" id="4134616">(</span><span class="ident" id="4134617">err</span>&nbsp;<span class="op" id="4134621">*</span><span class="ident" id="4134622"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4134635">)</span>&nbsp;<span class="ident" id="4134637">Error</span><span class="op" id="4134642">(</span><span class="op" id="4134643">)</span>&nbsp;<span class="builtintype" id="4134645">string</span>&nbsp;<span class="op" id="4134652">{</span>&nbsp;<span class="keyword" id="4134654">return</span>&nbsp;<span class="ident" id="4134661"><a href="/gostd/net/http/request.go.html#4134617">err</a></span><span class="op" id="4134664">.</span><span class="ident" id="4134665"><a href="/gostd/net/http/request.go.html#4134589">ErrorString</a></span>&nbsp;<span class="op" id="4134677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="4134680">var</span>&nbsp;<span class="op" id="4134684">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134687">ErrHeaderTooLong</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4134711">=</span>&nbsp;<span class="op" id="4134713">&amp;</span><span class="ident" id="4134714"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4134727">{</span><span class="string" id="4134728">&#34;header&nbsp;too&nbsp;long&#34;</span><span class="op" id="4134745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134748">ErrShortBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4134772">=</span>&nbsp;<span class="op" id="4134774">&amp;</span><span class="ident" id="4134775"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4134788">{</span><span class="string" id="4134789">&#34;entity&nbsp;body&nbsp;too&nbsp;short&#34;</span><span class="op" id="4134812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134815">ErrNotSupported</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4134839">=</span>&nbsp;<span class="op" id="4134841">&amp;</span><span class="ident" id="4134842"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4134855">{</span><span class="string" id="4134856">&#34;feature&nbsp;not&nbsp;supported&#34;</span><span class="op" id="4134879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134882">ErrUnexpectedTrailer</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4134906">=</span>&nbsp;<span class="op" id="4134908">&amp;</span><span class="ident" id="4134909"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4134922">{</span><span class="string" id="4134923">&#34;trailer&nbsp;header&nbsp;without&nbsp;chunked&nbsp;transfer&nbsp;encoding&#34;</span><span class="op" id="4134973">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4134976">ErrMissingContentLength</span>&nbsp;<span class="op" id="4135000">=</span>&nbsp;<span class="op" id="4135002">&amp;</span><span class="ident" id="4135003"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4135016">{</span><span class="string" id="4135017">&#34;missing&nbsp;ContentLength&nbsp;in&nbsp;HEAD&nbsp;response&#34;</span><span class="op" id="4135057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4135060">ErrNotMultipart</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4135084">=</span>&nbsp;<span class="op" id="4135086">&amp;</span><span class="ident" id="4135087"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4135100">{</span><span class="string" id="4135101">&#34;request&nbsp;Content-Type&nbsp;isn&#39;t&nbsp;multipart/form-data&#34;</span><span class="op" id="4135149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4135152">ErrMissingBoundary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4135176">=</span>&nbsp;<span class="op" id="4135178">&amp;</span><span class="ident" id="4135179"><a href="/gostd/net/http/request.go.html#4134565">ProtocolError</a></span><span class="op" id="4135192">{</span><span class="string" id="4135193">&#34;no&nbsp;multipart&nbsp;boundary&nbsp;param&nbsp;in&nbsp;Content-Type&#34;</span><span class="op" id="4135238">}</span><br>
<span class="lineno"></span><span class="op" id="4135240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="4135243">type</span>&nbsp;<span class="ident" id="4135248">badStringError</span>&nbsp;<span class="keyword" id="4135263">struct</span>&nbsp;<span class="op" id="4135270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4135273">what</span>&nbsp;<span class="builtintype" id="4135278">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4135286">str</span>&nbsp;&nbsp;<span class="builtintype" id="4135291">string</span><br>
<span class="lineno"></span><span class="op" id="4135298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4135301">func</span>&nbsp;<span class="op" id="4135306">(</span><span class="ident" id="4135307">e</span>&nbsp;<span class="op" id="4135309">*</span><span class="ident" id="4135310"><a href="/gostd/net/http/request.go.html#4135248">badStringError</a></span><span class="op" id="4135324">)</span>&nbsp;<span class="ident" id="4135326">Error</span><span class="op" id="4135331">(</span><span class="op" id="4135332">)</span>&nbsp;<span class="builtintype" id="4135334">string</span>&nbsp;<span class="op" id="4135341">{</span>&nbsp;<span class="keyword" id="4135343">return</span>&nbsp;<span class="ident" id="4135350"><a href="/gostd/net/http/request.go.html#4134081">fmt</a></span><span class="op" id="4135353">.</span><span class="ident" id="4135354"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="4135361">(</span><span class="string" id="4135362">&#34;%s&nbsp;%q&#34;</span><span class="op" id="4135369">,</span>&nbsp;<span class="ident" id="4135371"><a href="/gostd/net/http/request.go.html#4135307">e</a></span><span class="op" id="4135372">.</span><span class="ident" id="4135373"><a href="/gostd/net/http/request.go.html#4135273">what</a></span><span class="op" id="4135377">,</span>&nbsp;<span class="ident" id="4135379"><a href="/gostd/net/http/request.go.html#4135307">e</a></span><span class="op" id="4135380">.</span><span class="ident" id="4135381"><a href="/gostd/net/http/request.go.html#4135286">str</a></span><span class="op" id="4135384">)</span>&nbsp;<span class="op" id="4135386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4135389">//&nbsp;Headers&nbsp;that&nbsp;Request.Write&nbsp;handles&nbsp;itself&nbsp;and&nbsp;should&nbsp;be&nbsp;skipped.</span><br>
<span class="lineno"></span><span class="keyword" id="4135457">var</span>&nbsp;<span class="ident" id="4135461">reqWriteExcludeHeader</span>&nbsp;<span class="op" id="4135483">=</span>&nbsp;<span class="keyword" id="4135485">map</span><span class="op" id="4135488">[</span><span class="builtintype" id="4135489">string</span><span class="op" id="4135495">]</span><span class="builtintype" id="4135496">bool</span><span class="op" id="4135500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4135503">&#34;Host&#34;</span><span class="op" id="4135509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4135524">true</span><span class="op" id="4135528">,</span>&nbsp;<span class="comment" id="4135530">//&nbsp;not&nbsp;in&nbsp;Header&nbsp;map&nbsp;anyway</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4135559">&#34;User-Agent&#34;</span><span class="op" id="4135571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4135580">true</span><span class="op" id="4135584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4135587">&#34;Content-Length&#34;</span><span class="op" id="4135603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4135608">true</span><span class="op" id="4135612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4135615">&#34;Transfer-Encoding&#34;</span><span class="op" id="4135634">:</span>&nbsp;<span class="builtintype" id="4135636">true</span><span class="op" id="4135640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4135643">&#34;Trailer&#34;</span><span class="op" id="4135652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4135664">true</span><span class="op" id="4135668">,</span><br>
<span class="lineno"></span><span class="op" id="4135670">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="4135673">//&nbsp;A&nbsp;Request&nbsp;represents&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;received&nbsp;by&nbsp;a&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="4135734">//&nbsp;or&nbsp;to&nbsp;be&nbsp;sent&nbsp;by&nbsp;a&nbsp;client.</span><br>
<span class="lineno"></span><span class="comment" id="4135764">//</span><br>
<span class="lineno"></span><span class="comment" id="4135767">//&nbsp;The&nbsp;field&nbsp;semantics&nbsp;differ&nbsp;slightly&nbsp;between&nbsp;client&nbsp;and&nbsp;server</span><br>
<span class="lineno">75</span><span class="comment" id="4135832">//&nbsp;usage.&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;notes&nbsp;on&nbsp;the&nbsp;fields&nbsp;below,&nbsp;see&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4135896">//&nbsp;documentation&nbsp;for&nbsp;Request.Write&nbsp;and&nbsp;RoundTripper.</span><br>
<span class="lineno"></span><span class="keyword" id="4135949">type</span>&nbsp;<span class="ident" id="4135954">Request</span>&nbsp;<span class="keyword" id="4135962">struct</span>&nbsp;<span class="op" id="4135969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4135972">//&nbsp;Method&nbsp;specifies&nbsp;the&nbsp;HTTP&nbsp;method&nbsp;(GET,&nbsp;POST,&nbsp;PUT,&nbsp;etc.).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136033">//&nbsp;For&nbsp;client&nbsp;requests&nbsp;an&nbsp;empty&nbsp;string&nbsp;means&nbsp;GET.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4136084">Method</span>&nbsp;<span class="builtintype" id="4136091">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136100">//&nbsp;URL&nbsp;specifies&nbsp;either&nbsp;the&nbsp;URI&nbsp;being&nbsp;requested&nbsp;(for&nbsp;server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136161">//&nbsp;requests)&nbsp;or&nbsp;the&nbsp;URL&nbsp;to&nbsp;access&nbsp;(for&nbsp;client&nbsp;requests).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136219">//</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136223">//&nbsp;For&nbsp;server&nbsp;requests&nbsp;the&nbsp;URL&nbsp;is&nbsp;parsed&nbsp;from&nbsp;the&nbsp;URI</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136278">//&nbsp;supplied&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;as&nbsp;stored&nbsp;in&nbsp;RequestURI.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136341">//&nbsp;most&nbsp;requests,&nbsp;fields&nbsp;other&nbsp;than&nbsp;Path&nbsp;and&nbsp;RawQuery&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136404">//&nbsp;empty.&nbsp;(See&nbsp;RFC&nbsp;2616,&nbsp;Section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136445">//</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136449">//&nbsp;For&nbsp;client&nbsp;requests,&nbsp;the&nbsp;URL&#39;s&nbsp;Host&nbsp;specifies&nbsp;the&nbsp;server&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136513">//&nbsp;connect&nbsp;to,&nbsp;while&nbsp;the&nbsp;Request&#39;s&nbsp;Host&nbsp;field&nbsp;optionally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136571">//&nbsp;specifies&nbsp;the&nbsp;Host&nbsp;header&nbsp;value&nbsp;to&nbsp;send&nbsp;in&nbsp;the&nbsp;HTTP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136627">//&nbsp;request.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4136640">URL</span>&nbsp;<span class="op" id="4136644">*</span><span class="ident" id="4136645"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4136648">.</span><span class="ident" id="4136649"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136655">//&nbsp;The&nbsp;protocol&nbsp;version&nbsp;for&nbsp;incoming&nbsp;requests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136703">//&nbsp;Client&nbsp;requests&nbsp;always&nbsp;use&nbsp;HTTP/1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4136744">Proto</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4136755">string</span>&nbsp;<span class="comment" id="4136762">//&nbsp;&#34;HTTP/1.0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4136777">ProtoMajor</span>&nbsp;<span class="builtintype" id="4136788">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136795">//&nbsp;1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4136801">ProtoMinor</span>&nbsp;<span class="builtintype" id="4136812">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136819">//&nbsp;0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136826">//&nbsp;A&nbsp;header&nbsp;maps&nbsp;request&nbsp;lines&nbsp;to&nbsp;their&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136875">//&nbsp;If&nbsp;the&nbsp;header&nbsp;says</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136898">//</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136902">//&nbsp;&nbsp;&nbsp;&nbsp;accept-encoding:&nbsp;gzip,&nbsp;deflate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136937">//&nbsp;&nbsp;&nbsp;&nbsp;Accept-Language:&nbsp;en-us</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136964">//&nbsp;&nbsp;&nbsp;&nbsp;Connection:&nbsp;keep-alive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136991">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4136995">//&nbsp;then</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137004">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137008">//&nbsp;&nbsp;&nbsp;&nbsp;Header&nbsp;=&nbsp;map[string][]string{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137042">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;Accept-Encoding&#34;:&nbsp;{&#34;gzip,&nbsp;deflate&#34;},</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137085">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;Accept-Language&#34;:&nbsp;{&#34;en-us&#34;},</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137120">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;Connection&#34;:&nbsp;{&#34;keep-alive&#34;},</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137155">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137161">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137165">//&nbsp;HTTP&nbsp;defines&nbsp;that&nbsp;header&nbsp;names&nbsp;are&nbsp;case-insensitive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137222">//&nbsp;The&nbsp;request&nbsp;parser&nbsp;implements&nbsp;this&nbsp;by&nbsp;canonicalizing&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137283">//&nbsp;name,&nbsp;making&nbsp;the&nbsp;first&nbsp;character&nbsp;and&nbsp;any&nbsp;characters</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137339">//&nbsp;following&nbsp;a&nbsp;hyphen&nbsp;uppercase&nbsp;and&nbsp;the&nbsp;rest&nbsp;lowercase.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137396">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137400">//&nbsp;For&nbsp;client&nbsp;requests&nbsp;certain&nbsp;headers&nbsp;are&nbsp;automatically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137458">//&nbsp;added&nbsp;and&nbsp;may&nbsp;override&nbsp;values&nbsp;in&nbsp;Header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137503">//</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137507">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;the&nbsp;Request.Write&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4137563">Header</span>&nbsp;<span class="ident" id="4137570"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137579">//&nbsp;Body&nbsp;is&nbsp;the&nbsp;request&#39;s&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137611">//</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137615">//&nbsp;For&nbsp;client&nbsp;requests&nbsp;a&nbsp;nil&nbsp;body&nbsp;means&nbsp;the&nbsp;request&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137675">//&nbsp;body,&nbsp;such&nbsp;as&nbsp;a&nbsp;GET&nbsp;request.&nbsp;The&nbsp;HTTP&nbsp;Client&#39;s&nbsp;Transport</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137736">//&nbsp;is&nbsp;responsible&nbsp;for&nbsp;calling&nbsp;the&nbsp;Close&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137785">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137789">//&nbsp;For&nbsp;server&nbsp;requests&nbsp;the&nbsp;Request&nbsp;Body&nbsp;is&nbsp;always&nbsp;non-nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137848">//&nbsp;but&nbsp;will&nbsp;return&nbsp;EOF&nbsp;immediately&nbsp;when&nbsp;no&nbsp;body&nbsp;is&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137909">//&nbsp;The&nbsp;Server&nbsp;will&nbsp;close&nbsp;the&nbsp;request&nbsp;body.&nbsp;The&nbsp;ServeHTTP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4137967">//&nbsp;Handler&nbsp;does&nbsp;not&nbsp;need&nbsp;to.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4137997">Body</span>&nbsp;<span class="ident" id="4138002"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4138004">.</span><span class="ident" id="4138005"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138018">//&nbsp;ContentLength&nbsp;records&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;associated&nbsp;content.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138082">//&nbsp;The&nbsp;value&nbsp;-1&nbsp;indicates&nbsp;that&nbsp;the&nbsp;length&nbsp;is&nbsp;unknown.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138137">//&nbsp;Values&nbsp;&gt;=&nbsp;0&nbsp;indicate&nbsp;that&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;bytes&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138197">//&nbsp;be&nbsp;read&nbsp;from&nbsp;Body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138220">//&nbsp;For&nbsp;client&nbsp;requests,&nbsp;a&nbsp;value&nbsp;of&nbsp;0&nbsp;means&nbsp;unknown&nbsp;if&nbsp;Body&nbsp;is&nbsp;not&nbsp;nil.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4138292">ContentLength</span>&nbsp;<span class="builtintype" id="4138306">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138314">//&nbsp;TransferEncoding&nbsp;lists&nbsp;the&nbsp;transfer&nbsp;encodings&nbsp;from&nbsp;outermost&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138382">//&nbsp;innermost.&nbsp;An&nbsp;empty&nbsp;list&nbsp;denotes&nbsp;the&nbsp;&#34;identity&#34;&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138444">//&nbsp;TransferEncoding&nbsp;can&nbsp;usually&nbsp;be&nbsp;ignored;&nbsp;chunked&nbsp;encoding&nbsp;is</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138509">//&nbsp;automatically&nbsp;added&nbsp;and&nbsp;removed&nbsp;as&nbsp;necessary&nbsp;when&nbsp;sending&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138575">//&nbsp;receiving&nbsp;requests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4138599">TransferEncoding</span>&nbsp;<span class="op" id="4138616">[</span><span class="op" id="4138617">]</span><span class="builtintype" id="4138618">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138627">//&nbsp;Close&nbsp;indicates&nbsp;whether&nbsp;to&nbsp;close&nbsp;the&nbsp;connection&nbsp;after</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138685">//&nbsp;replying&nbsp;to&nbsp;this&nbsp;request&nbsp;(for&nbsp;servers)&nbsp;or&nbsp;after&nbsp;sending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138745">//&nbsp;the&nbsp;request&nbsp;(for&nbsp;clients).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4138776">Close</span>&nbsp;<span class="builtintype" id="4138782">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138789">//&nbsp;For&nbsp;server&nbsp;requests&nbsp;Host&nbsp;specifies&nbsp;the&nbsp;host&nbsp;on&nbsp;which&nbsp;the</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138850">//&nbsp;URL&nbsp;is&nbsp;sought.&nbsp;Per&nbsp;RFC&nbsp;2616,&nbsp;this&nbsp;is&nbsp;either&nbsp;the&nbsp;value&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138911">//&nbsp;the&nbsp;&#34;Host&#34;&nbsp;header&nbsp;or&nbsp;the&nbsp;host&nbsp;name&nbsp;given&nbsp;in&nbsp;the&nbsp;URL&nbsp;itself.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4138975">//&nbsp;It&nbsp;may&nbsp;be&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139014">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139018">//&nbsp;For&nbsp;client&nbsp;requests&nbsp;Host&nbsp;optionally&nbsp;overrides&nbsp;the&nbsp;Host</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139077">//&nbsp;header&nbsp;to&nbsp;send.&nbsp;If&nbsp;empty,&nbsp;the&nbsp;Request.Write&nbsp;method&nbsp;uses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139137">//&nbsp;the&nbsp;value&nbsp;of&nbsp;URL.Host.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4139164">Host</span>&nbsp;<span class="builtintype" id="4139169">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139178">//&nbsp;Form&nbsp;contains&nbsp;the&nbsp;parsed&nbsp;form&nbsp;data,&nbsp;including&nbsp;both&nbsp;the&nbsp;URL</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139241">//&nbsp;field&#39;s&nbsp;query&nbsp;parameters&nbsp;and&nbsp;the&nbsp;POST&nbsp;or&nbsp;PUT&nbsp;form&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139301">//&nbsp;This&nbsp;field&nbsp;is&nbsp;only&nbsp;available&nbsp;after&nbsp;ParseForm&nbsp;is&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139361">//&nbsp;The&nbsp;HTTP&nbsp;client&nbsp;ignores&nbsp;Form&nbsp;and&nbsp;uses&nbsp;Body&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4139417">Form</span>&nbsp;<span class="ident" id="4139422"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4139425">.</span><span class="ident" id="4139426"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139435">//&nbsp;PostForm&nbsp;contains&nbsp;the&nbsp;parsed&nbsp;form&nbsp;data&nbsp;from&nbsp;POST&nbsp;or&nbsp;PUT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139495">//&nbsp;body&nbsp;parameters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139516">//&nbsp;This&nbsp;field&nbsp;is&nbsp;only&nbsp;available&nbsp;after&nbsp;ParseForm&nbsp;is&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139576">//&nbsp;The&nbsp;HTTP&nbsp;client&nbsp;ignores&nbsp;PostForm&nbsp;and&nbsp;uses&nbsp;Body&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4139636">PostForm</span>&nbsp;<span class="ident" id="4139645"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4139648">.</span><span class="ident" id="4139649"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139658">//&nbsp;MultipartForm&nbsp;is&nbsp;the&nbsp;parsed&nbsp;multipart&nbsp;form,&nbsp;including&nbsp;file&nbsp;uploads.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139730">//&nbsp;This&nbsp;field&nbsp;is&nbsp;only&nbsp;available&nbsp;after&nbsp;ParseMultipartForm&nbsp;is&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139799">//&nbsp;The&nbsp;HTTP&nbsp;client&nbsp;ignores&nbsp;MultipartForm&nbsp;and&nbsp;uses&nbsp;Body&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4139864">MultipartForm</span>&nbsp;<span class="op" id="4139878">*</span><span class="ident" id="4139879"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4139888">.</span><span class="ident" id="4139889"><a href="/gostd/mime/multipart/formdata.go.html#4309651">Form</a></span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139896">//&nbsp;Trailer&nbsp;specifies&nbsp;additional&nbsp;headers&nbsp;that&nbsp;are&nbsp;sent&nbsp;after&nbsp;the&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139969">//&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139979">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4139983">//&nbsp;For&nbsp;server&nbsp;requests&nbsp;the&nbsp;Trailer&nbsp;map&nbsp;initially&nbsp;contains&nbsp;only&nbsp;the</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140051">//&nbsp;trailer&nbsp;keys,&nbsp;with&nbsp;nil&nbsp;values.&nbsp;(The&nbsp;client&nbsp;declares&nbsp;which&nbsp;trailers&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140125">//&nbsp;will&nbsp;later&nbsp;send.)&nbsp;&nbsp;While&nbsp;the&nbsp;handler&nbsp;is&nbsp;reading&nbsp;from&nbsp;Body,&nbsp;it&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140196">//&nbsp;not&nbsp;reference&nbsp;Trailer.&nbsp;After&nbsp;reading&nbsp;from&nbsp;Body&nbsp;returns&nbsp;EOF,&nbsp;Trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140268">//&nbsp;can&nbsp;be&nbsp;read&nbsp;again&nbsp;and&nbsp;will&nbsp;contain&nbsp;non-nil&nbsp;values,&nbsp;if&nbsp;they&nbsp;were&nbsp;sent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140341">//&nbsp;by&nbsp;the&nbsp;client.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140360">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140364">//&nbsp;For&nbsp;client&nbsp;requests&nbsp;Trailer&nbsp;must&nbsp;be&nbsp;initialized&nbsp;to&nbsp;a&nbsp;map&nbsp;containing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140436">//&nbsp;the&nbsp;trailer&nbsp;keys&nbsp;to&nbsp;later&nbsp;send.&nbsp;The&nbsp;values&nbsp;may&nbsp;be&nbsp;nil&nbsp;or&nbsp;their&nbsp;final</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140509">//&nbsp;values.&nbsp;The&nbsp;ContentLength&nbsp;must&nbsp;be&nbsp;0&nbsp;or&nbsp;-1,&nbsp;to&nbsp;send&nbsp;a&nbsp;chunked&nbsp;request.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140583">//&nbsp;After&nbsp;the&nbsp;HTTP&nbsp;request&nbsp;is&nbsp;sent&nbsp;the&nbsp;map&nbsp;values&nbsp;can&nbsp;be&nbsp;updated&nbsp;while</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140654">//&nbsp;the&nbsp;request&nbsp;body&nbsp;is&nbsp;read.&nbsp;Once&nbsp;the&nbsp;body&nbsp;returns&nbsp;EOF,&nbsp;the&nbsp;caller&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140727">//&nbsp;not&nbsp;mutate&nbsp;Trailer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140751">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140755">//&nbsp;Few&nbsp;HTTP&nbsp;clients,&nbsp;servers,&nbsp;or&nbsp;proxies&nbsp;support&nbsp;HTTP&nbsp;trailers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4140820">Trailer</span>&nbsp;<span class="ident" id="4140828"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140837">//&nbsp;RemoteAddr&nbsp;allows&nbsp;HTTP&nbsp;servers&nbsp;and&nbsp;other&nbsp;software&nbsp;to&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140901">//&nbsp;the&nbsp;network&nbsp;address&nbsp;that&nbsp;sent&nbsp;the&nbsp;request,&nbsp;usually&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4140960">//&nbsp;logging.&nbsp;This&nbsp;field&nbsp;is&nbsp;not&nbsp;filled&nbsp;in&nbsp;by&nbsp;ReadRequest&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141020">//&nbsp;has&nbsp;no&nbsp;defined&nbsp;format.&nbsp;The&nbsp;HTTP&nbsp;server&nbsp;in&nbsp;this&nbsp;package</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141079">//&nbsp;sets&nbsp;RemoteAddr&nbsp;to&nbsp;an&nbsp;&#34;IP:port&#34;&nbsp;address&nbsp;before&nbsp;invoking&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141141">//&nbsp;handler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141154">//&nbsp;This&nbsp;field&nbsp;is&nbsp;ignored&nbsp;by&nbsp;the&nbsp;HTTP&nbsp;client.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4141200">RemoteAddr</span>&nbsp;<span class="builtintype" id="4141211">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141220">//&nbsp;RequestURI&nbsp;is&nbsp;the&nbsp;unmodified&nbsp;Request-URI&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141272">//&nbsp;Request-Line&nbsp;(RFC&nbsp;2616,&nbsp;Section&nbsp;5.1)&nbsp;as&nbsp;sent&nbsp;by&nbsp;the&nbsp;client</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141335">//&nbsp;to&nbsp;a&nbsp;server.&nbsp;Usually&nbsp;the&nbsp;URL&nbsp;field&nbsp;should&nbsp;be&nbsp;used&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141398">//&nbsp;It&nbsp;is&nbsp;an&nbsp;error&nbsp;to&nbsp;set&nbsp;this&nbsp;field&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;client&nbsp;request.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4141462">RequestURI</span>&nbsp;<span class="builtintype" id="4141473">string</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141482">//&nbsp;TLS&nbsp;allows&nbsp;HTTP&nbsp;servers&nbsp;and&nbsp;other&nbsp;software&nbsp;to&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141539">//&nbsp;information&nbsp;about&nbsp;the&nbsp;TLS&nbsp;connection&nbsp;on&nbsp;which&nbsp;the&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141601">//&nbsp;was&nbsp;received.&nbsp;This&nbsp;field&nbsp;is&nbsp;not&nbsp;filled&nbsp;in&nbsp;by&nbsp;ReadRequest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141663">//&nbsp;The&nbsp;HTTP&nbsp;server&nbsp;in&nbsp;this&nbsp;package&nbsp;sets&nbsp;the&nbsp;field&nbsp;for</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141718">//&nbsp;TLS-enabled&nbsp;connections&nbsp;before&nbsp;invoking&nbsp;a&nbsp;handler;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141773">//&nbsp;otherwise&nbsp;it&nbsp;leaves&nbsp;the&nbsp;field&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4141812">//&nbsp;This&nbsp;field&nbsp;is&nbsp;ignored&nbsp;by&nbsp;the&nbsp;HTTP&nbsp;client.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4141858">TLS</span>&nbsp;<span class="op" id="4141862">*</span><span class="ident" id="4141863"><a href="/gostd/net/http/request.go.html#4134038">tls</a></span><span class="op" id="4141866">.</span><span class="ident" id="4141867"><a href="/gostd/crypto/tls/common.go.html#4446494">ConnectionState</a></span><br>
<span class="lineno"></span><span class="op" id="4141883">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="4141886">//&nbsp;ProtoAtLeast&nbsp;reports&nbsp;whether&nbsp;the&nbsp;HTTP&nbsp;protocol&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="4141941">//&nbsp;in&nbsp;the&nbsp;request&nbsp;is&nbsp;at&nbsp;least&nbsp;major.minor.</span><br>
<span class="lineno"></span><span class="keyword" id="4141984">func</span>&nbsp;<span class="op" id="4141989">(</span><span class="ident" id="4141990">r</span>&nbsp;<span class="op" id="4141992">*</span><span class="ident" id="4141993"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4142000">)</span>&nbsp;<span class="ident" id="4142002">ProtoAtLeast</span><span class="op" id="4142014">(</span><span class="ident" id="4142015">major</span><span class="op" id="4142020">,</span>&nbsp;<span class="ident" id="4142022">minor</span>&nbsp;<span class="builtintype" id="4142028">int</span><span class="op" id="4142031">)</span>&nbsp;<span class="builtintype" id="4142033">bool</span>&nbsp;<span class="op" id="4142038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142041">return</span>&nbsp;<span class="ident" id="4142048"><a href="/gostd/net/http/request.go.html#4141990">r</a></span><span class="op" id="4142049">.</span><span class="ident" id="4142050"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span>&nbsp;<span class="op" id="4142061">&gt;</span>&nbsp;<span class="ident" id="4142063"><a href="/gostd/net/http/request.go.html#4142015">major</a></span>&nbsp;<span class="op" id="4142069">||</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4142074"><a href="/gostd/net/http/request.go.html#4141990">r</a></span><span class="op" id="4142075">.</span><span class="ident" id="4142076"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span>&nbsp;<span class="op" id="4142087">==</span>&nbsp;<span class="ident" id="4142090"><a href="/gostd/net/http/request.go.html#4142015">major</a></span>&nbsp;<span class="op" id="4142096">&amp;&amp;</span>&nbsp;<span class="ident" id="4142099"><a href="/gostd/net/http/request.go.html#4141990">r</a></span><span class="op" id="4142100">.</span><span class="ident" id="4142101"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span>&nbsp;<span class="op" id="4142112">&gt;=</span>&nbsp;<span class="ident" id="4142115"><a href="/gostd/net/http/request.go.html#4142022">minor</a></span><br>
<span class="lineno"></span><span class="op" id="4142121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4142124">//&nbsp;UserAgent&nbsp;returns&nbsp;the&nbsp;client&#39;s&nbsp;User-Agent,&nbsp;if&nbsp;sent&nbsp;in&nbsp;the&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="4142194">func</span>&nbsp;<span class="op" id="4142199">(</span><span class="ident" id="4142200">r</span>&nbsp;<span class="op" id="4142202">*</span><span class="ident" id="4142203"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4142210">)</span>&nbsp;<span class="ident" id="4142212">UserAgent</span><span class="op" id="4142221">(</span><span class="op" id="4142222">)</span>&nbsp;<span class="builtintype" id="4142224">string</span>&nbsp;<span class="op" id="4142231">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142234">return</span>&nbsp;<span class="ident" id="4142241"><a href="/gostd/net/http/request.go.html#4142200">r</a></span><span class="op" id="4142242">.</span><span class="ident" id="4142243"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4142249">.</span><span class="ident" id="4142250"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4142253">(</span><span class="string" id="4142254">&#34;User-Agent&#34;</span><span class="op" id="4142266">)</span><br>
<span class="lineno"></span><span class="op" id="4142268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4142271">//&nbsp;Cookies&nbsp;parses&nbsp;and&nbsp;returns&nbsp;the&nbsp;HTTP&nbsp;cookies&nbsp;sent&nbsp;with&nbsp;the&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="4142341">func</span>&nbsp;<span class="op" id="4142346">(</span><span class="ident" id="4142347">r</span>&nbsp;<span class="op" id="4142349">*</span><span class="ident" id="4142350"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4142357">)</span>&nbsp;<span class="ident" id="4142359">Cookies</span><span class="op" id="4142366">(</span><span class="op" id="4142367">)</span>&nbsp;<span class="op" id="4142369">[</span><span class="op" id="4142370">]</span><span class="op" id="4142371">*</span><span class="ident" id="4142372"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span>&nbsp;<span class="op" id="4142379">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142382">return</span>&nbsp;<span class="ident" id="4142389"><a href="/gostd/net/http/cookie.go.html#4099939">readCookies</a></span><span class="op" id="4142400">(</span><span class="ident" id="4142401"><a href="/gostd/net/http/request.go.html#4142347">r</a></span><span class="op" id="4142402">.</span><span class="ident" id="4142403"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4142409">,</span>&nbsp;<span class="string" id="4142411">&#34;&#34;</span><span class="op" id="4142413">)</span><br>
<span class="lineno"></span><span class="op" id="4142415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4142418">var</span>&nbsp;<span class="ident" id="4142422">ErrNoCookie</span>&nbsp;<span class="op" id="4142434">=</span>&nbsp;<span class="ident" id="4142436"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4142442">.</span><span class="ident" id="4142443"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4142446">(</span><span class="string" id="4142447">&#34;http:&nbsp;named&nbsp;cookie&nbsp;not&nbsp;present&#34;</span><span class="op" id="4142479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="4142482">//&nbsp;Cookie&nbsp;returns&nbsp;the&nbsp;named&nbsp;cookie&nbsp;provided&nbsp;in&nbsp;the&nbsp;request&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4142544">//&nbsp;ErrNoCookie&nbsp;if&nbsp;not&nbsp;found.</span><br>
<span class="lineno"></span><span class="keyword" id="4142573">func</span>&nbsp;<span class="op" id="4142578">(</span><span class="ident" id="4142579">r</span>&nbsp;<span class="op" id="4142581">*</span><span class="ident" id="4142582"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4142589">)</span>&nbsp;<span class="ident" id="4142591">Cookie</span><span class="op" id="4142597">(</span><span class="ident" id="4142598">name</span>&nbsp;<span class="builtintype" id="4142603">string</span><span class="op" id="4142609">)</span>&nbsp;<span class="op" id="4142611">(</span><span class="op" id="4142612">*</span><span class="ident" id="4142613"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="4142619">,</span>&nbsp;<span class="builtintype" id="4142621">error</span><span class="op" id="4142626">)</span>&nbsp;<span class="op" id="4142628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142631">for</span>&nbsp;<span class="ident" id="4142635">_</span><span class="op" id="4142636">,</span>&nbsp;<span class="ident" id="4142638">c</span>&nbsp;<span class="op" id="4142640">:=</span>&nbsp;<span class="keyword" id="4142643">range</span>&nbsp;<span class="ident" id="4142649"><a href="/gostd/net/http/cookie.go.html#4099939">readCookies</a></span><span class="op" id="4142660">(</span><span class="ident" id="4142661"><a href="/gostd/net/http/request.go.html#4142579">r</a></span><span class="op" id="4142662">.</span><span class="ident" id="4142663"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4142669">,</span>&nbsp;<span class="ident" id="4142671"><a href="/gostd/net/http/request.go.html#4142598">name</a></span><span class="op" id="4142675">)</span>&nbsp;<span class="op" id="4142677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142681">return</span>&nbsp;<span class="ident" id="4142688"><a href="/gostd/net/http/request.go.html#4142638">c</a></span><span class="op" id="4142689">,</span>&nbsp;<span class="builtintype" id="4142691">nil</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4142696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4142699">return</span>&nbsp;<span class="builtintype" id="4142706">nil</span><span class="op" id="4142709">,</span>&nbsp;<span class="ident" id="4142711"><a href="/gostd/net/http/request.go.html#4142422">ErrNoCookie</a></span><br>
<span class="lineno"></span><span class="op" id="4142723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4142726">//&nbsp;AddCookie&nbsp;adds&nbsp;a&nbsp;cookie&nbsp;to&nbsp;the&nbsp;request.&nbsp;&nbsp;Per&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.4,</span><br>
<span class="lineno">260</span><span class="comment" id="4142796">//&nbsp;AddCookie&nbsp;does&nbsp;not&nbsp;attach&nbsp;more&nbsp;than&nbsp;one&nbsp;Cookie&nbsp;header&nbsp;field.&nbsp;&nbsp;That</span><br>
<span class="lineno"></span><span class="comment" id="4142866">//&nbsp;means&nbsp;all&nbsp;cookies,&nbsp;if&nbsp;any,&nbsp;are&nbsp;written&nbsp;into&nbsp;the&nbsp;same&nbsp;line,</span><br>
<span class="lineno"></span><span class="comment" id="4142928">//&nbsp;separated&nbsp;by&nbsp;semicolon.</span><br>
<span class="lineno"></span><span class="keyword" id="4142955">func</span>&nbsp;<span class="op" id="4142960">(</span><span class="ident" id="4142961">r</span>&nbsp;<span class="op" id="4142963">*</span><span class="ident" id="4142964"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4142971">)</span>&nbsp;<span class="ident" id="4142973">AddCookie</span><span class="op" id="4142982">(</span><span class="ident" id="4142983">c</span>&nbsp;<span class="op" id="4142985">*</span><span class="ident" id="4142986"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="4142992">)</span>&nbsp;<span class="op" id="4142994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4142997">s</span>&nbsp;<span class="op" id="4142999">:=</span>&nbsp;<span class="ident" id="4143002"><a href="/gostd/net/http/request.go.html#4134081">fmt</a></span><span class="op" id="4143005">.</span><span class="ident" id="4143006"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="4143013">(</span><span class="string" id="4143014">&#34;%s=%s&#34;</span><span class="op" id="4143021">,</span>&nbsp;<span class="ident" id="4143023"><a href="/gostd/net/http/cookie.go.html#4102229">sanitizeCookieName</a></span><span class="op" id="4143041">(</span><span class="ident" id="4143042"><a href="/gostd/net/http/request.go.html#4142983">c</a></span><span class="op" id="4143043">.</span><span class="ident" id="4143044"><a href="/gostd/net/http/cookie.go.html#4096014">Name</a></span><span class="op" id="4143048">)</span><span class="op" id="4143049">,</span>&nbsp;<span class="ident" id="4143051"><a href="/gostd/net/http/cookie.go.html#4102855">sanitizeCookieValue</a></span><span class="op" id="4143070">(</span><span class="ident" id="4143071"><a href="/gostd/net/http/request.go.html#4142983">c</a></span><span class="op" id="4143072">.</span><span class="ident" id="4143073"><a href="/gostd/net/http/cookie.go.html#4096033">Value</a></span><span class="op" id="4143078">)</span><span class="op" id="4143079">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4143082">if</span>&nbsp;<span class="ident" id="4143085">c</span>&nbsp;<span class="op" id="4143087">:=</span>&nbsp;<span class="ident" id="4143090"><a href="/gostd/net/http/request.go.html#4142961">r</a></span><span class="op" id="4143091">.</span><span class="ident" id="4143092"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4143098">.</span><span class="ident" id="4143099"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4143102">(</span><span class="string" id="4143103">&#34;Cookie&#34;</span><span class="op" id="4143111">)</span><span class="op" id="4143112">;</span>&nbsp;<span class="ident" id="4143114"><a href="/gostd/net/http/request.go.html#4143085">c</a></span>&nbsp;<span class="op" id="4143116">!=</span>&nbsp;<span class="string" id="4143119">&#34;&#34;</span>&nbsp;<span class="op" id="4143122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4143126"><a href="/gostd/net/http/request.go.html#4142961">r</a></span><span class="op" id="4143127">.</span><span class="ident" id="4143128"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4143134">.</span><span class="ident" id="4143135"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="4143138">(</span><span class="string" id="4143139">&#34;Cookie&#34;</span><span class="op" id="4143147">,</span>&nbsp;<span class="ident" id="4143149"><a href="/gostd/net/http/request.go.html#4143085">c</a></span><span class="op" id="4143150">+</span><span class="string" id="4143151">&#34;;&nbsp;&#34;</span><span class="op" id="4143155">+</span><span class="ident" id="4143156"><a href="/gostd/net/http/request.go.html#4142997">s</a></span><span class="op" id="4143157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4143160">}</span>&nbsp;<span class="keyword" id="4143162">else</span>&nbsp;<span class="op" id="4143167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4143171"><a href="/gostd/net/http/request.go.html#4142961">r</a></span><span class="op" id="4143172">.</span><span class="ident" id="4143173"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4143179">.</span><span class="ident" id="4143180"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="4143183">(</span><span class="string" id="4143184">&#34;Cookie&#34;</span><span class="op" id="4143192">,</span>&nbsp;<span class="ident" id="4143194"><a href="/gostd/net/http/request.go.html#4142997">s</a></span><span class="op" id="4143195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4143198">}</span><br>
<span class="lineno">270</span><span class="op" id="4143200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4143203">//&nbsp;Referer&nbsp;returns&nbsp;the&nbsp;referring&nbsp;URL,&nbsp;if&nbsp;sent&nbsp;in&nbsp;the&nbsp;request.</span><br>
<span class="lineno"></span><span class="comment" id="4143265">//</span><br>
<span class="lineno"></span><span class="comment" id="4143268">//&nbsp;Referer&nbsp;is&nbsp;misspelled&nbsp;as&nbsp;in&nbsp;the&nbsp;request&nbsp;itself,&nbsp;a&nbsp;mistake&nbsp;from&nbsp;the</span><br>
<span class="lineno">275</span><span class="comment" id="4143338">//&nbsp;earliest&nbsp;days&nbsp;of&nbsp;HTTP.&nbsp;&nbsp;This&nbsp;value&nbsp;can&nbsp;also&nbsp;be&nbsp;fetched&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4143405">//&nbsp;Header&nbsp;map&nbsp;as&nbsp;Header[&#34;Referer&#34;];&nbsp;the&nbsp;benefit&nbsp;of&nbsp;making&nbsp;it&nbsp;available</span><br>
<span class="lineno"></span><span class="comment" id="4143476">//&nbsp;as&nbsp;a&nbsp;method&nbsp;is&nbsp;that&nbsp;the&nbsp;compiler&nbsp;can&nbsp;diagnose&nbsp;programs&nbsp;that&nbsp;use&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4143547">//&nbsp;alternate&nbsp;(correct&nbsp;English)&nbsp;spelling&nbsp;req.Referrer()&nbsp;but&nbsp;cannot</span><br>
<span class="lineno"></span><span class="comment" id="4143613">//&nbsp;diagnose&nbsp;programs&nbsp;that&nbsp;use&nbsp;Header[&#34;Referrer&#34;].</span><br>
<span class="lineno">280</span><span class="keyword" id="4143663">func</span>&nbsp;<span class="op" id="4143668">(</span><span class="ident" id="4143669">r</span>&nbsp;<span class="op" id="4143671">*</span><span class="ident" id="4143672"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4143679">)</span>&nbsp;<span class="ident" id="4143681">Referer</span><span class="op" id="4143688">(</span><span class="op" id="4143689">)</span>&nbsp;<span class="builtintype" id="4143691">string</span>&nbsp;<span class="op" id="4143698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4143701">return</span>&nbsp;<span class="ident" id="4143708"><a href="/gostd/net/http/request.go.html#4143669">r</a></span><span class="op" id="4143709">.</span><span class="ident" id="4143710"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4143716">.</span><span class="ident" id="4143717"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4143720">(</span><span class="string" id="4143721">&#34;Referer&#34;</span><span class="op" id="4143730">)</span><br>
<span class="lineno"></span><span class="op" id="4143732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4143735">//&nbsp;multipartByReader&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;value.</span><br>
<span class="lineno">285</span><span class="comment" id="4143777">//&nbsp;Its&nbsp;presence&nbsp;in&nbsp;Request.MultipartForm&nbsp;indicates&nbsp;that&nbsp;parsing&nbsp;of&nbsp;the&nbsp;request</span><br>
<span class="lineno"></span><span class="comment" id="4143856">//&nbsp;body&nbsp;has&nbsp;been&nbsp;handed&nbsp;off&nbsp;to&nbsp;a&nbsp;MultipartReader&nbsp;instead&nbsp;of&nbsp;ParseMultipartFrom.</span><br>
<span class="lineno"></span><span class="keyword" id="4143936">var</span>&nbsp;<span class="ident" id="4143940">multipartByReader</span>&nbsp;<span class="op" id="4143958">=</span>&nbsp;<span class="op" id="4143960">&amp;</span><span class="ident" id="4143961"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4143970">.</span><span class="ident" id="4143971"><a href="/gostd/mime/multipart/formdata.go.html#4309651">Form</a></span><span class="op" id="4143975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4143978"><a href="/gostd/mime/multipart/formdata.go.html#4309666">Value</a></span><span class="op" id="4143983">:</span>&nbsp;<span class="builtinfunc" id="4143985">make</span><span class="op" id="4143989">(</span><span class="keyword" id="4143990">map</span><span class="op" id="4143993">[</span><span class="builtintype" id="4143994">string</span><span class="op" id="4144000">]</span><span class="op" id="4144001">[</span><span class="op" id="4144002">]</span><span class="builtintype" id="4144003">string</span><span class="op" id="4144009">)</span><span class="op" id="4144010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4144013"><a href="/gostd/mime/multipart/formdata.go.html#4309693">File</a></span><span class="op" id="4144017">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="4144020">make</span><span class="op" id="4144024">(</span><span class="keyword" id="4144025">map</span><span class="op" id="4144028">[</span><span class="builtintype" id="4144029">string</span><span class="op" id="4144035">]</span><span class="op" id="4144036">[</span><span class="op" id="4144037">]</span><span class="op" id="4144038">*</span><span class="ident" id="4144039"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4144048">.</span><span class="ident" id="4144049"><a href="/gostd/mime/multipart/formdata.go.html#4310100">FileHeader</a></span><span class="op" id="4144059">)</span><span class="op" id="4144060">,</span><br>
<span class="lineno">290</span><span class="op" id="4144062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4144065">//&nbsp;MultipartReader&nbsp;returns&nbsp;a&nbsp;MIME&nbsp;multipart&nbsp;reader&nbsp;if&nbsp;this&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4144129">//&nbsp;multipart/form-data&nbsp;POST&nbsp;request,&nbsp;else&nbsp;returns&nbsp;nil&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4144197">//&nbsp;Use&nbsp;this&nbsp;function&nbsp;instead&nbsp;of&nbsp;ParseMultipartForm&nbsp;to</span><br>
<span class="lineno">295</span><span class="comment" id="4144251">//&nbsp;process&nbsp;the&nbsp;request&nbsp;body&nbsp;as&nbsp;a&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="4144292">func</span>&nbsp;<span class="op" id="4144297">(</span><span class="ident" id="4144298">r</span>&nbsp;<span class="op" id="4144300">*</span><span class="ident" id="4144301"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4144308">)</span>&nbsp;<span class="ident" id="4144310">MultipartReader</span><span class="op" id="4144325">(</span><span class="op" id="4144326">)</span>&nbsp;<span class="op" id="4144328">(</span><span class="op" id="4144329">*</span><span class="ident" id="4144330"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4144339">.</span><span class="ident" id="4144340"><a href="/gostd/mime/multipart/multipart.go.html#4316630">Reader</a></span><span class="op" id="4144346">,</span>&nbsp;<span class="builtintype" id="4144348">error</span><span class="op" id="4144353">)</span>&nbsp;<span class="op" id="4144355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144358">if</span>&nbsp;<span class="ident" id="4144361"><a href="/gostd/net/http/request.go.html#4144298">r</a></span><span class="op" id="4144362">.</span><span class="ident" id="4144363"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4144377">==</span>&nbsp;<span class="ident" id="4144380"><a href="/gostd/net/http/request.go.html#4143940">multipartByReader</a></span>&nbsp;<span class="op" id="4144398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144402">return</span>&nbsp;<span class="builtintype" id="4144409">nil</span><span class="op" id="4144412">,</span>&nbsp;<span class="ident" id="4144414"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4144420">.</span><span class="ident" id="4144421"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4144424">(</span><span class="string" id="4144425">&#34;http:&nbsp;MultipartReader&nbsp;called&nbsp;twice&#34;</span><span class="op" id="4144461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4144464">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144467">if</span>&nbsp;<span class="ident" id="4144470"><a href="/gostd/net/http/request.go.html#4144298">r</a></span><span class="op" id="4144471">.</span><span class="ident" id="4144472"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4144486">!=</span>&nbsp;<span class="builtintype" id="4144489">nil</span>&nbsp;<span class="op" id="4144493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144497">return</span>&nbsp;<span class="builtintype" id="4144504">nil</span><span class="op" id="4144507">,</span>&nbsp;<span class="ident" id="4144509"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4144515">.</span><span class="ident" id="4144516"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4144519">(</span><span class="string" id="4144520">&#34;http:&nbsp;multipart&nbsp;handled&nbsp;by&nbsp;ParseMultipartForm&#34;</span><span class="op" id="4144567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4144570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4144573"><a href="/gostd/net/http/request.go.html#4144298">r</a></span><span class="op" id="4144574">.</span><span class="ident" id="4144575"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4144589">=</span>&nbsp;<span class="ident" id="4144591"><a href="/gostd/net/http/request.go.html#4143940">multipartByReader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144610">return</span>&nbsp;<span class="ident" id="4144617"><a href="/gostd/net/http/request.go.html#4144298">r</a></span><span class="op" id="4144618">.</span><span class="ident" id="4144619"><a href="/gostd/net/http/request.go.html#4144658">multipartReader</a></span><span class="op" id="4144634">(</span><span class="op" id="4144635">)</span><br>
<span class="lineno">305</span><span class="op" id="4144637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4144640">func</span>&nbsp;<span class="op" id="4144645">(</span><span class="ident" id="4144646">r</span>&nbsp;<span class="op" id="4144648">*</span><span class="ident" id="4144649"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4144656">)</span>&nbsp;<span class="ident" id="4144658">multipartReader</span><span class="op" id="4144673">(</span><span class="op" id="4144674">)</span>&nbsp;<span class="op" id="4144676">(</span><span class="op" id="4144677">*</span><span class="ident" id="4144678"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4144687">.</span><span class="ident" id="4144688"><a href="/gostd/mime/multipart/multipart.go.html#4316630">Reader</a></span><span class="op" id="4144694">,</span>&nbsp;<span class="builtintype" id="4144696">error</span><span class="op" id="4144701">)</span>&nbsp;<span class="op" id="4144703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4144706">v</span>&nbsp;<span class="op" id="4144708">:=</span>&nbsp;<span class="ident" id="4144711"><a href="/gostd/net/http/request.go.html#4144646">r</a></span><span class="op" id="4144712">.</span><span class="ident" id="4144713"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4144719">.</span><span class="ident" id="4144720"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4144723">(</span><span class="string" id="4144724">&#34;Content-Type&#34;</span><span class="op" id="4144738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144741">if</span>&nbsp;<span class="ident" id="4144744"><a href="/gostd/net/http/request.go.html#4144706">v</a></span>&nbsp;<span class="op" id="4144746">==</span>&nbsp;<span class="string" id="4144749">&#34;&#34;</span>&nbsp;<span class="op" id="4144752">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144756">return</span>&nbsp;<span class="builtintype" id="4144763">nil</span><span class="op" id="4144766">,</span>&nbsp;<span class="ident" id="4144768"><a href="/gostd/net/http/request.go.html#4135060">ErrNotMultipart</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4144785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4144788">d</span><span class="op" id="4144789">,</span>&nbsp;<span class="ident" id="4144791">params</span><span class="op" id="4144797">,</span>&nbsp;<span class="ident" id="4144799">err</span>&nbsp;<span class="op" id="4144803">:=</span>&nbsp;<span class="ident" id="4144806"><a href="/gostd/net/http/request.go.html#4134107">mime</a></span><span class="op" id="4144810">.</span><span class="ident" id="4144811"><a href="/gostd/mime/mediatype.go.html#4297159">ParseMediaType</a></span><span class="op" id="4144825">(</span><span class="ident" id="4144826"><a href="/gostd/net/http/request.go.html#4144706">v</a></span><span class="op" id="4144827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144830">if</span>&nbsp;<span class="ident" id="4144833"><a href="/gostd/net/http/request.go.html#4144799">err</a></span>&nbsp;<span class="op" id="4144837">!=</span>&nbsp;<span class="builtintype" id="4144840">nil</span>&nbsp;<span class="op" id="4144844">||</span>&nbsp;<span class="ident" id="4144847"><a href="/gostd/net/http/request.go.html#4144788">d</a></span>&nbsp;<span class="op" id="4144849">!=</span>&nbsp;<span class="string" id="4144852">&#34;multipart/form-data&#34;</span>&nbsp;<span class="op" id="4144874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144878">return</span>&nbsp;<span class="builtintype" id="4144885">nil</span><span class="op" id="4144888">,</span>&nbsp;<span class="ident" id="4144890"><a href="/gostd/net/http/request.go.html#4135060">ErrNotMultipart</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4144907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4144910">boundary</span><span class="op" id="4144918">,</span>&nbsp;<span class="ident" id="4144920">ok</span>&nbsp;<span class="op" id="4144923">:=</span>&nbsp;<span class="ident" id="4144926"><a href="/gostd/net/http/request.go.html#4144791">params</a></span><span class="op" id="4144932">[</span><span class="string" id="4144933">&#34;boundary&#34;</span><span class="op" id="4144943">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144946">if</span>&nbsp;<span class="op" id="4144949">!</span><span class="ident" id="4144950"><a href="/gostd/net/http/request.go.html#4144920">ok</a></span>&nbsp;<span class="op" id="4144953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144957">return</span>&nbsp;<span class="builtintype" id="4144964">nil</span><span class="op" id="4144967">,</span>&nbsp;<span class="ident" id="4144969"><a href="/gostd/net/http/request.go.html#4135152">ErrMissingBoundary</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4144989">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4144992">return</span>&nbsp;<span class="ident" id="4144999"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4145008">.</span><span class="ident" id="4145009"><a href="/gostd/mime/multipart/multipart.go.html#4313338">NewReader</a></span><span class="op" id="4145018">(</span><span class="ident" id="4145019"><a href="/gostd/net/http/request.go.html#4144646">r</a></span><span class="op" id="4145020">.</span><span class="ident" id="4145021"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="4145025">,</span>&nbsp;<span class="ident" id="4145027"><a href="/gostd/net/http/request.go.html#4144910">boundary</a></span><span class="op" id="4145035">)</span><span class="op" id="4145036">,</span>&nbsp;<span class="builtintype" id="4145038">nil</span><br>
<span class="lineno"></span><span class="op" id="4145042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4145045">//&nbsp;Return&nbsp;value&nbsp;if&nbsp;nonempty,&nbsp;def&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="keyword" id="4145089">func</span>&nbsp;<span class="ident" id="4145094">valueOrDefault</span><span class="op" id="4145108">(</span><span class="ident" id="4145109">value</span><span class="op" id="4145114">,</span>&nbsp;<span class="ident" id="4145116">def</span>&nbsp;<span class="builtintype" id="4145120">string</span><span class="op" id="4145126">)</span>&nbsp;<span class="builtintype" id="4145128">string</span>&nbsp;<span class="op" id="4145135">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4145138">if</span>&nbsp;<span class="ident" id="4145141"><a href="/gostd/net/http/request.go.html#4145109">value</a></span>&nbsp;<span class="op" id="4145147">!=</span>&nbsp;<span class="string" id="4145150">&#34;&#34;</span>&nbsp;<span class="op" id="4145153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4145157">return</span>&nbsp;<span class="ident" id="4145164"><a href="/gostd/net/http/request.go.html#4145109">value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4145171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4145174">return</span>&nbsp;<span class="ident" id="4145181"><a href="/gostd/net/http/request.go.html#4145116">def</a></span><br>
<span class="lineno"></span><span class="op" id="4145185">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="4145188">//&nbsp;NOTE:&nbsp;This&nbsp;is&nbsp;not&nbsp;intended&nbsp;to&nbsp;reflect&nbsp;the&nbsp;actual&nbsp;Go&nbsp;version&nbsp;being&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="4145263">//&nbsp;It&nbsp;was&nbsp;changed&nbsp;from&nbsp;&#34;Go&nbsp;http&nbsp;package&#34;&nbsp;to&nbsp;&#34;Go&nbsp;1.1&nbsp;package&nbsp;http&#34;&nbsp;at&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4145336">//&nbsp;time&nbsp;of&nbsp;the&nbsp;Go&nbsp;1.1&nbsp;release&nbsp;because&nbsp;the&nbsp;former&nbsp;User-Agent&nbsp;had&nbsp;ended&nbsp;up</span><br>
<span class="lineno"></span><span class="comment" id="4145409">//&nbsp;on&nbsp;a&nbsp;blacklist&nbsp;for&nbsp;some&nbsp;intrusion&nbsp;detection&nbsp;systems.</span><br>
<span class="lineno">335</span><span class="comment" id="4145465">//&nbsp;See&nbsp;https://codereview.appspot.com/7532043.</span><br>
<span class="lineno"></span><span class="keyword" id="4145512">const</span>&nbsp;<span class="ident" id="4145518">defaultUserAgent</span>&nbsp;<span class="op" id="4145535">=</span>&nbsp;<span class="string" id="4145537">&#34;Go&nbsp;1.1&nbsp;package&nbsp;http&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4145560">//&nbsp;Write&nbsp;writes&nbsp;an&nbsp;HTTP/1.1&nbsp;request&nbsp;--&nbsp;header&nbsp;and&nbsp;body&nbsp;--&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="4145634">//&nbsp;This&nbsp;method&nbsp;consults&nbsp;the&nbsp;following&nbsp;fields&nbsp;of&nbsp;the&nbsp;request:</span><br>
<span class="lineno">340</span><span class="comment" id="4145695">//&nbsp;&nbsp;&nbsp;&nbsp;Host</span><br>
<span class="lineno"></span><span class="comment" id="4145703">//&nbsp;&nbsp;&nbsp;&nbsp;URL</span><br>
<span class="lineno"></span><span class="comment" id="4145710">//&nbsp;&nbsp;&nbsp;&nbsp;Method&nbsp;(defaults&nbsp;to&nbsp;&#34;GET&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="4145740">//&nbsp;&nbsp;&nbsp;&nbsp;Header</span><br>
<span class="lineno"></span><span class="comment" id="4145750">//&nbsp;&nbsp;&nbsp;&nbsp;ContentLength</span><br>
<span class="lineno">345</span><span class="comment" id="4145767">//&nbsp;&nbsp;&nbsp;&nbsp;TransferEncoding</span><br>
<span class="lineno"></span><span class="comment" id="4145787">//&nbsp;&nbsp;&nbsp;&nbsp;Body</span><br>
<span class="lineno"></span><span class="comment" id="4145795">//</span><br>
<span class="lineno"></span><span class="comment" id="4145798">//&nbsp;If&nbsp;Body&nbsp;is&nbsp;present,&nbsp;Content-Length&nbsp;is&nbsp;&lt;=&nbsp;0&nbsp;and&nbsp;TransferEncoding</span><br>
<span class="lineno"></span><span class="comment" id="4145865">//&nbsp;hasn&#39;t&nbsp;been&nbsp;set&nbsp;to&nbsp;&#34;identity&#34;,&nbsp;Write&nbsp;adds&nbsp;&#34;Transfer-Encoding:</span><br>
<span class="lineno">350</span><span class="comment" id="4145930">//&nbsp;chunked&#34;&nbsp;to&nbsp;the&nbsp;header.&nbsp;Body&nbsp;is&nbsp;closed&nbsp;after&nbsp;it&nbsp;is&nbsp;sent.</span><br>
<span class="lineno"></span><span class="keyword" id="4145990">func</span>&nbsp;<span class="op" id="4145995">(</span><span class="ident" id="4145996">r</span>&nbsp;<span class="op" id="4145998">*</span><span class="ident" id="4145999"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4146006">)</span>&nbsp;<span class="ident" id="4146008">Write</span><span class="op" id="4146013">(</span><span class="ident" id="4146014">w</span>&nbsp;<span class="ident" id="4146016"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4146018">.</span><span class="ident" id="4146019"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4146025">)</span>&nbsp;<span class="builtintype" id="4146027">error</span>&nbsp;<span class="op" id="4146033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146036">return</span>&nbsp;<span class="ident" id="4146043"><a href="/gostd/net/http/request.go.html#4145996">r</a></span><span class="op" id="4146044">.</span><span class="ident" id="4146045"><a href="/gostd/net/http/request.go.html#4146555">write</a></span><span class="op" id="4146050">(</span><span class="ident" id="4146051"><a href="/gostd/net/http/request.go.html#4146014">w</a></span><span class="op" id="4146052">,</span>&nbsp;<span class="builtintype" id="4146054">false</span><span class="op" id="4146059">,</span>&nbsp;<span class="builtintype" id="4146061">nil</span><span class="op" id="4146064">)</span><br>
<span class="lineno"></span><span class="op" id="4146066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="4146069">//&nbsp;WriteProxy&nbsp;is&nbsp;like&nbsp;Write&nbsp;but&nbsp;writes&nbsp;the&nbsp;request&nbsp;in&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="4146132">//&nbsp;expected&nbsp;by&nbsp;an&nbsp;HTTP&nbsp;proxy.&nbsp;&nbsp;In&nbsp;particular,&nbsp;WriteProxy&nbsp;writes&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4146200">//&nbsp;initial&nbsp;Request-URI&nbsp;line&nbsp;of&nbsp;the&nbsp;request&nbsp;with&nbsp;an&nbsp;absolute&nbsp;URI,&nbsp;per</span><br>
<span class="lineno"></span><span class="comment" id="4146269">//&nbsp;section&nbsp;5.1.2&nbsp;of&nbsp;RFC&nbsp;2616,&nbsp;including&nbsp;the&nbsp;scheme&nbsp;and&nbsp;host.</span><br>
<span class="lineno"></span><span class="comment" id="4146330">//&nbsp;In&nbsp;either&nbsp;case,&nbsp;WriteProxy&nbsp;also&nbsp;writes&nbsp;a&nbsp;Host&nbsp;header,&nbsp;using</span><br>
<span class="lineno">360</span><span class="comment" id="4146393">//&nbsp;either&nbsp;r.Host&nbsp;or&nbsp;r.URL.Host.</span><br>
<span class="lineno"></span><span class="keyword" id="4146425">func</span>&nbsp;<span class="op" id="4146430">(</span><span class="ident" id="4146431">r</span>&nbsp;<span class="op" id="4146433">*</span><span class="ident" id="4146434"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4146441">)</span>&nbsp;<span class="ident" id="4146443">WriteProxy</span><span class="op" id="4146453">(</span><span class="ident" id="4146454">w</span>&nbsp;<span class="ident" id="4146456"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4146458">.</span><span class="ident" id="4146459"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4146465">)</span>&nbsp;<span class="builtintype" id="4146467">error</span>&nbsp;<span class="op" id="4146473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146476">return</span>&nbsp;<span class="ident" id="4146483"><a href="/gostd/net/http/request.go.html#4146431">r</a></span><span class="op" id="4146484">.</span><span class="ident" id="4146485"><a href="/gostd/net/http/request.go.html#4146555">write</a></span><span class="op" id="4146490">(</span><span class="ident" id="4146491"><a href="/gostd/net/http/request.go.html#4146454">w</a></span><span class="op" id="4146492">,</span>&nbsp;<span class="builtintype" id="4146494">true</span><span class="op" id="4146498">,</span>&nbsp;<span class="builtintype" id="4146500">nil</span><span class="op" id="4146503">)</span><br>
<span class="lineno"></span><span class="op" id="4146505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="comment" id="4146508">//&nbsp;extraHeaders&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno"></span><span class="keyword" id="4146535">func</span>&nbsp;<span class="op" id="4146540">(</span><span class="ident" id="4146541">req</span>&nbsp;<span class="op" id="4146545">*</span><span class="ident" id="4146546"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4146553">)</span>&nbsp;<span class="ident" id="4146555">write</span><span class="op" id="4146560">(</span><span class="ident" id="4146561">w</span>&nbsp;<span class="ident" id="4146563"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4146565">.</span><span class="ident" id="4146566"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="4146572">,</span>&nbsp;<span class="ident" id="4146574">usingProxy</span>&nbsp;<span class="builtintype" id="4146585">bool</span><span class="op" id="4146589">,</span>&nbsp;<span class="ident" id="4146591">extraHeaders</span>&nbsp;<span class="ident" id="4146604"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4146610">)</span>&nbsp;<span class="builtintype" id="4146612">error</span>&nbsp;<span class="op" id="4146618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4146621">host</span>&nbsp;<span class="op" id="4146626">:=</span>&nbsp;<span class="ident" id="4146629"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146632">.</span><span class="ident" id="4146633"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146639">if</span>&nbsp;<span class="ident" id="4146642"><a href="/gostd/net/http/request.go.html#4146621">host</a></span>&nbsp;<span class="op" id="4146647">==</span>&nbsp;<span class="string" id="4146650">&#34;&#34;</span>&nbsp;<span class="op" id="4146653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146657">if</span>&nbsp;<span class="ident" id="4146660"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146663">.</span><span class="ident" id="4146664"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span>&nbsp;<span class="op" id="4146668">==</span>&nbsp;<span class="builtintype" id="4146671">nil</span>&nbsp;<span class="op" id="4146675">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146680">return</span>&nbsp;<span class="ident" id="4146687"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4146693">.</span><span class="ident" id="4146694"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4146697">(</span><span class="string" id="4146698">&#34;http:&nbsp;Request.Write&nbsp;on&nbsp;Request&nbsp;with&nbsp;no&nbsp;Host&nbsp;or&nbsp;URL&nbsp;set&#34;</span><span class="op" id="4146754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4146758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4146762"><a href="/gostd/net/http/request.go.html#4146621">host</a></span>&nbsp;<span class="op" id="4146767">=</span>&nbsp;<span class="ident" id="4146769"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146772">.</span><span class="ident" id="4146773"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146776">.</span><span class="ident" id="4146777"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4146783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4146787">ruri</span>&nbsp;<span class="op" id="4146792">:=</span>&nbsp;<span class="ident" id="4146795"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146798">.</span><span class="ident" id="4146799"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146802">.</span><span class="ident" id="4146803"><a href="/gostd/net/url/url.go.html#3763661">RequestURI</a></span><span class="op" id="4146813">(</span><span class="op" id="4146814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4146817">if</span>&nbsp;<span class="ident" id="4146820"><a href="/gostd/net/http/request.go.html#4146574">usingProxy</a></span>&nbsp;<span class="op" id="4146831">&amp;&amp;</span>&nbsp;<span class="ident" id="4146834"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146837">.</span><span class="ident" id="4146838"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146841">.</span><span class="ident" id="4146842"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="4146849">!=</span>&nbsp;<span class="string" id="4146852">&#34;&#34;</span>&nbsp;<span class="op" id="4146855">&amp;&amp;</span>&nbsp;<span class="ident" id="4146858"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146861">.</span><span class="ident" id="4146862"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146865">.</span><span class="ident" id="4146866"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span>&nbsp;<span class="op" id="4146873">==</span>&nbsp;<span class="string" id="4146876">&#34;&#34;</span>&nbsp;<span class="op" id="4146879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4146883"><a href="/gostd/net/http/request.go.html#4146787">ruri</a></span>&nbsp;<span class="op" id="4146888">=</span>&nbsp;<span class="ident" id="4146890"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146893">.</span><span class="ident" id="4146894"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146897">.</span><span class="ident" id="4146898"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="4146905">+</span>&nbsp;<span class="string" id="4146907">&#34;://&#34;</span>&nbsp;<span class="op" id="4146913">+</span>&nbsp;<span class="ident" id="4146915"><a href="/gostd/net/http/request.go.html#4146621">host</a></span>&nbsp;<span class="op" id="4146920">+</span>&nbsp;<span class="ident" id="4146922"><a href="/gostd/net/http/request.go.html#4146787">ruri</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4146928">}</span>&nbsp;<span class="keyword" id="4146930">else</span>&nbsp;<span class="keyword" id="4146935">if</span>&nbsp;<span class="ident" id="4146938"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146941">.</span><span class="ident" id="4146942"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span>&nbsp;<span class="op" id="4146949">==</span>&nbsp;<span class="string" id="4146952">&#34;CONNECT&#34;</span>&nbsp;<span class="op" id="4146962">&amp;&amp;</span>&nbsp;<span class="ident" id="4146965"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4146968">.</span><span class="ident" id="4146969"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4146972">.</span><span class="ident" id="4146973"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="4146978">==</span>&nbsp;<span class="string" id="4146981">&#34;&#34;</span>&nbsp;<span class="op" id="4146984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4146988">//&nbsp;CONNECT&nbsp;requests&nbsp;normally&nbsp;give&nbsp;just&nbsp;the&nbsp;host&nbsp;and&nbsp;port,&nbsp;not&nbsp;a&nbsp;full&nbsp;URL.</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147064"><a href="/gostd/net/http/request.go.html#4146787">ruri</a></span>&nbsp;<span class="op" id="4147069">=</span>&nbsp;<span class="ident" id="4147071"><a href="/gostd/net/http/request.go.html#4146621">host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147080">//&nbsp;TODO(bradfitz):&nbsp;escape&nbsp;at&nbsp;least&nbsp;newlines&nbsp;in&nbsp;ruri?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147135">//&nbsp;Wrap&nbsp;the&nbsp;writer&nbsp;in&nbsp;a&nbsp;bufio&nbsp;Writer&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;already&nbsp;buffered.</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147203">//&nbsp;Don&#39;t&nbsp;always&nbsp;call&nbsp;NewWriter,&nbsp;as&nbsp;that&nbsp;forces&nbsp;a&nbsp;bytes.Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147266">//&nbsp;and&nbsp;other&nbsp;small&nbsp;bufio&nbsp;Writers&nbsp;to&nbsp;have&nbsp;a&nbsp;minimum&nbsp;4k&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147328">//&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147338">var</span>&nbsp;<span class="ident" id="4147342">bw</span>&nbsp;<span class="op" id="4147345">*</span><span class="ident" id="4147346"><a href="/gostd/net/http/request.go.html#4134020">bufio</a></span><span class="op" id="4147351">.</span><span class="ident" id="4147352"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147360">if</span>&nbsp;<span class="ident" id="4147363">_</span><span class="op" id="4147364">,</span>&nbsp;<span class="ident" id="4147366">ok</span>&nbsp;<span class="op" id="4147369">:=</span>&nbsp;<span class="ident" id="4147372"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4147373">.</span><span class="op" id="4147374">(</span><span class="ident" id="4147375"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4147377">.</span><span class="ident" id="4147378"><a href="/gostd/io/io.go.html#1427455">ByteWriter</a></span><span class="op" id="4147388">)</span><span class="op" id="4147389">;</span>&nbsp;<span class="op" id="4147391">!</span><span class="ident" id="4147392"><a href="/gostd/net/http/request.go.html#4147366">ok</a></span>&nbsp;<span class="op" id="4147395">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147399"><a href="/gostd/net/http/request.go.html#4147342">bw</a></span>&nbsp;<span class="op" id="4147402">=</span>&nbsp;<span class="ident" id="4147404"><a href="/gostd/net/http/request.go.html#4134020">bufio</a></span><span class="op" id="4147409">.</span><span class="ident" id="4147410"><a href="/gostd/bufio/bufio.go.html#1367149">NewWriter</a></span><span class="op" id="4147419">(</span><span class="ident" id="4147420"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4147421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147425"><a href="/gostd/net/http/request.go.html#4146561">w</a></span>&nbsp;<span class="op" id="4147427">=</span>&nbsp;<span class="ident" id="4147429"><a href="/gostd/net/http/request.go.html#4147342">bw</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147437">_</span><span class="op" id="4147438">,</span>&nbsp;<span class="ident" id="4147440">err</span>&nbsp;<span class="op" id="4147444">:=</span>&nbsp;<span class="ident" id="4147447"><a href="/gostd/net/http/request.go.html#4134081">fmt</a></span><span class="op" id="4147450">.</span><span class="ident" id="4147451"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="4147458">(</span><span class="ident" id="4147459"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4147460">,</span>&nbsp;<span class="string" id="4147462">&#34;%s&nbsp;%s&nbsp;HTTP/1.1\r\n&#34;</span><span class="op" id="4147482">,</span>&nbsp;<span class="ident" id="4147484"><a href="/gostd/net/http/request.go.html#4145094">valueOrDefault</a></span><span class="op" id="4147498">(</span><span class="ident" id="4147499"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4147502">.</span><span class="ident" id="4147503"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="4147509">,</span>&nbsp;<span class="string" id="4147511">&#34;GET&#34;</span><span class="op" id="4147516">)</span><span class="op" id="4147517">,</span>&nbsp;<span class="ident" id="4147519"><a href="/gostd/net/http/request.go.html#4146787">ruri</a></span><span class="op" id="4147523">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147526">if</span>&nbsp;<span class="ident" id="4147529"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4147533">!=</span>&nbsp;<span class="builtintype" id="4147536">nil</span>&nbsp;<span class="op" id="4147540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147544">return</span>&nbsp;<span class="ident" id="4147551"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147560">//&nbsp;Header&nbsp;lines</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147577">_</span><span class="op" id="4147578">,</span>&nbsp;<span class="ident" id="4147580"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4147584">=</span>&nbsp;<span class="ident" id="4147586"><a href="/gostd/net/http/request.go.html#4134081">fmt</a></span><span class="op" id="4147589">.</span><span class="ident" id="4147590"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="4147597">(</span><span class="ident" id="4147598"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4147599">,</span>&nbsp;<span class="string" id="4147601">&#34;Host:&nbsp;%s\r\n&#34;</span><span class="op" id="4147615">,</span>&nbsp;<span class="ident" id="4147617"><a href="/gostd/net/http/request.go.html#4146621">host</a></span><span class="op" id="4147621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147624">if</span>&nbsp;<span class="ident" id="4147627"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4147631">!=</span>&nbsp;<span class="builtintype" id="4147634">nil</span>&nbsp;<span class="op" id="4147638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147642">return</span>&nbsp;<span class="ident" id="4147649"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147658">//&nbsp;Use&nbsp;the&nbsp;defaultUserAgent&nbsp;unless&nbsp;the&nbsp;Header&nbsp;contains&nbsp;one,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4147725">//&nbsp;may&nbsp;be&nbsp;blank&nbsp;to&nbsp;not&nbsp;send&nbsp;the&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147766">userAgent</span>&nbsp;<span class="op" id="4147776">:=</span>&nbsp;<span class="ident" id="4147779"><a href="/gostd/net/http/request.go.html#4145518">defaultUserAgent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147797">if</span>&nbsp;<span class="ident" id="4147800"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4147803">.</span><span class="ident" id="4147804"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="4147811">!=</span>&nbsp;<span class="builtintype" id="4147814">nil</span>&nbsp;<span class="op" id="4147818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147822">if</span>&nbsp;<span class="ident" id="4147825">ua</span>&nbsp;<span class="op" id="4147828">:=</span>&nbsp;<span class="ident" id="4147831"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4147834">.</span><span class="ident" id="4147835"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4147841">[</span><span class="string" id="4147842">&#34;User-Agent&#34;</span><span class="op" id="4147854">]</span><span class="op" id="4147855">;</span>&nbsp;<span class="builtinfunc" id="4147857">len</span><span class="op" id="4147860">(</span><span class="ident" id="4147861"><a href="/gostd/net/http/request.go.html#4147825">ua</a></span><span class="op" id="4147863">)</span>&nbsp;<span class="op" id="4147865">&gt;</span>&nbsp;<span class="num" id="4147867">0</span>&nbsp;<span class="op" id="4147869">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147874"><a href="/gostd/net/http/request.go.html#4147766">userAgent</a></span>&nbsp;<span class="op" id="4147884">=</span>&nbsp;<span class="ident" id="4147886"><a href="/gostd/net/http/request.go.html#4147825">ua</a></span><span class="op" id="4147888">[</span><span class="num" id="4147889">0</span><span class="op" id="4147890">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4147897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147900">if</span>&nbsp;<span class="ident" id="4147903"><a href="/gostd/net/http/request.go.html#4147766">userAgent</a></span>&nbsp;<span class="op" id="4147913">!=</span>&nbsp;<span class="string" id="4147916">&#34;&#34;</span>&nbsp;<span class="op" id="4147919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4147923">_</span><span class="op" id="4147924">,</span>&nbsp;<span class="ident" id="4147926"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4147930">=</span>&nbsp;<span class="ident" id="4147932"><a href="/gostd/net/http/request.go.html#4134081">fmt</a></span><span class="op" id="4147935">.</span><span class="ident" id="4147936"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="4147943">(</span><span class="ident" id="4147944"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4147945">,</span>&nbsp;<span class="string" id="4147947">&#34;User-Agent:&nbsp;%s\r\n&#34;</span><span class="op" id="4147967">,</span>&nbsp;<span class="ident" id="4147969"><a href="/gostd/net/http/request.go.html#4147766">userAgent</a></span><span class="op" id="4147978">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4147982">if</span>&nbsp;<span class="ident" id="4147985"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4147989">!=</span>&nbsp;<span class="builtintype" id="4147992">nil</span>&nbsp;<span class="op" id="4147996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148001">return</span>&nbsp;<span class="ident" id="4148008"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4148021">//&nbsp;Process&nbsp;Body,ContentLength,Close,Trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148066">tw</span><span class="op" id="4148068">,</span>&nbsp;<span class="ident" id="4148070"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148074">:=</span>&nbsp;<span class="ident" id="4148077"><a href="/gostd/net/http/transfer.go.html#4241673">newTransferWriter</a></span><span class="op" id="4148094">(</span><span class="ident" id="4148095"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4148098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148101">if</span>&nbsp;<span class="ident" id="4148104"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148108">!=</span>&nbsp;<span class="builtintype" id="4148111">nil</span>&nbsp;<span class="op" id="4148115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148119">return</span>&nbsp;<span class="ident" id="4148126"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148131">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148134"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148138">=</span>&nbsp;<span class="ident" id="4148140"><a href="/gostd/net/http/request.go.html#4148066">tw</a></span><span class="op" id="4148142">.</span><span class="ident" id="4148143"><a href="/gostd/net/http/transfer.go.html#4244322">WriteHeader</a></span><span class="op" id="4148154">(</span><span class="ident" id="4148155"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4148156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148159">if</span>&nbsp;<span class="ident" id="4148162"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148166">!=</span>&nbsp;<span class="builtintype" id="4148169">nil</span>&nbsp;<span class="op" id="4148173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148177">return</span>&nbsp;<span class="ident" id="4148184"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148193"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148197">=</span>&nbsp;<span class="ident" id="4148199"><a href="/gostd/net/http/request.go.html#4146541">req</a></span><span class="op" id="4148202">.</span><span class="ident" id="4148203"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4148209">.</span><span class="ident" id="4148210"><a href="/gostd/net/http/header.go.html#4129454">WriteSubset</a></span><span class="op" id="4148221">(</span><span class="ident" id="4148222"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4148223">,</span>&nbsp;<span class="ident" id="4148225"><a href="/gostd/net/http/request.go.html#4135461">reqWriteExcludeHeader</a></span><span class="op" id="4148246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148249">if</span>&nbsp;<span class="ident" id="4148252"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148256">!=</span>&nbsp;<span class="builtintype" id="4148259">nil</span>&nbsp;<span class="op" id="4148263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148267">return</span>&nbsp;<span class="ident" id="4148274"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148283">if</span>&nbsp;<span class="ident" id="4148286"><a href="/gostd/net/http/request.go.html#4146591">extraHeaders</a></span>&nbsp;<span class="op" id="4148299">!=</span>&nbsp;<span class="builtintype" id="4148302">nil</span>&nbsp;<span class="op" id="4148306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148310"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148314">=</span>&nbsp;<span class="ident" id="4148316"><a href="/gostd/net/http/request.go.html#4146591">extraHeaders</a></span><span class="op" id="4148328">.</span><span class="ident" id="4148329"><a href="/gostd/net/http/header.go.html#4127211">Write</a></span><span class="op" id="4148334">(</span><span class="ident" id="4148335"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4148336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148340">if</span>&nbsp;<span class="ident" id="4148343"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148347">!=</span>&nbsp;<span class="builtintype" id="4148350">nil</span>&nbsp;<span class="op" id="4148354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148359">return</span>&nbsp;<span class="ident" id="4148366"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148372">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148379">_</span><span class="op" id="4148380">,</span>&nbsp;<span class="ident" id="4148382"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148386">=</span>&nbsp;<span class="ident" id="4148388"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4148390">.</span><span class="ident" id="4148391"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="4148402">(</span><span class="ident" id="4148403"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4148404">,</span>&nbsp;<span class="string" id="4148406">&#34;\r\n&#34;</span><span class="op" id="4148412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148415">if</span>&nbsp;<span class="ident" id="4148418"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148422">!=</span>&nbsp;<span class="builtintype" id="4148425">nil</span>&nbsp;<span class="op" id="4148429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148433">return</span>&nbsp;<span class="ident" id="4148440"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4148449">//&nbsp;Write&nbsp;body&nbsp;and&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148476"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148480">=</span>&nbsp;<span class="ident" id="4148482"><a href="/gostd/net/http/request.go.html#4148066">tw</a></span><span class="op" id="4148484">.</span><span class="ident" id="4148485"><a href="/gostd/net/http/transfer.go.html#4245609">WriteBody</a></span><span class="op" id="4148494">(</span><span class="ident" id="4148495"><a href="/gostd/net/http/request.go.html#4146561">w</a></span><span class="op" id="4148496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148499">if</span>&nbsp;<span class="ident" id="4148502"><a href="/gostd/net/http/request.go.html#4147440">err</a></span>&nbsp;<span class="op" id="4148506">!=</span>&nbsp;<span class="builtintype" id="4148509">nil</span>&nbsp;<span class="op" id="4148513">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148517">return</span>&nbsp;<span class="ident" id="4148524"><a href="/gostd/net/http/request.go.html#4147440">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148533">if</span>&nbsp;<span class="ident" id="4148536"><a href="/gostd/net/http/request.go.html#4147342">bw</a></span>&nbsp;<span class="op" id="4148539">!=</span>&nbsp;<span class="builtintype" id="4148542">nil</span>&nbsp;<span class="op" id="4148546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148550">return</span>&nbsp;<span class="ident" id="4148557"><a href="/gostd/net/http/request.go.html#4147342">bw</a></span><span class="op" id="4148559">.</span><span class="ident" id="4148560"><a href="/gostd/bufio/bufio.go.html#1367486">Flush</a></span><span class="op" id="4148565">(</span><span class="op" id="4148566">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148572">return</span>&nbsp;<span class="builtintype" id="4148579">nil</span><br>
<span class="lineno"></span><span class="op" id="4148583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4148586">//&nbsp;ParseHTTPVersion&nbsp;parses&nbsp;a&nbsp;HTTP&nbsp;version&nbsp;string.</span><br>
<span class="lineno">460</span><span class="comment" id="4148636">//&nbsp;&#34;HTTP/1.0&#34;&nbsp;returns&nbsp;(1,&nbsp;0,&nbsp;true).</span><br>
<span class="lineno"></span><span class="keyword" id="4148672">func</span>&nbsp;<span class="ident" id="4148677">ParseHTTPVersion</span><span class="op" id="4148693">(</span><span class="ident" id="4148694">vers</span>&nbsp;<span class="builtintype" id="4148699">string</span><span class="op" id="4148705">)</span>&nbsp;<span class="op" id="4148707">(</span><span class="ident" id="4148708">major</span><span class="op" id="4148713">,</span>&nbsp;<span class="ident" id="4148715">minor</span>&nbsp;<span class="builtintype" id="4148721">int</span><span class="op" id="4148724">,</span>&nbsp;<span class="ident" id="4148726">ok</span>&nbsp;<span class="builtintype" id="4148729">bool</span><span class="op" id="4148733">)</span>&nbsp;<span class="op" id="4148735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148738">const</span>&nbsp;<span class="ident" id="4148744">Big</span>&nbsp;<span class="op" id="4148748">=</span>&nbsp;<span class="num" id="4148750">1000000</span>&nbsp;<span class="comment" id="4148758">//&nbsp;arbitrary&nbsp;upper&nbsp;bound</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148784">switch</span>&nbsp;<span class="ident" id="4148791"><a href="/gostd/net/http/request.go.html#4148694">vers</a></span>&nbsp;<span class="op" id="4148796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148799">case</span>&nbsp;<span class="string" id="4148804">&#34;HTTP/1.1&#34;</span><span class="op" id="4148814">:</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148818">return</span>&nbsp;<span class="num" id="4148825">1</span><span class="op" id="4148826">,</span>&nbsp;<span class="num" id="4148828">1</span><span class="op" id="4148829">,</span>&nbsp;<span class="builtintype" id="4148831">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148837">case</span>&nbsp;<span class="string" id="4148842">&#34;HTTP/1.0&#34;</span><span class="op" id="4148852">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148856">return</span>&nbsp;<span class="num" id="4148863">1</span><span class="op" id="4148864">,</span>&nbsp;<span class="num" id="4148866">0</span><span class="op" id="4148867">,</span>&nbsp;<span class="builtintype" id="4148869">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148878">if</span>&nbsp;<span class="op" id="4148881">!</span><span class="ident" id="4148882"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4148889">.</span><span class="ident" id="4148890"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4148899">(</span><span class="ident" id="4148900"><a href="/gostd/net/http/request.go.html#4148694">vers</a></span><span class="op" id="4148904">,</span>&nbsp;<span class="string" id="4148906">&#34;HTTP/&#34;</span><span class="op" id="4148913">)</span>&nbsp;<span class="op" id="4148915">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148919">return</span>&nbsp;<span class="num" id="4148926">0</span><span class="op" id="4148927">,</span>&nbsp;<span class="num" id="4148929">0</span><span class="op" id="4148930">,</span>&nbsp;<span class="builtintype" id="4148932">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4148939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4148942">dot</span>&nbsp;<span class="op" id="4148946">:=</span>&nbsp;<span class="ident" id="4148949"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4148956">.</span><span class="ident" id="4148957"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4148962">(</span><span class="ident" id="4148963"><a href="/gostd/net/http/request.go.html#4148694">vers</a></span><span class="op" id="4148967">,</span>&nbsp;<span class="string" id="4148969">&#34;.&#34;</span><span class="op" id="4148972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148975">if</span>&nbsp;<span class="ident" id="4148978"><a href="/gostd/net/http/request.go.html#4148942">dot</a></span>&nbsp;<span class="op" id="4148982">&lt;</span>&nbsp;<span class="num" id="4148984">0</span>&nbsp;<span class="op" id="4148986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4148990">return</span>&nbsp;<span class="num" id="4148997">0</span><span class="op" id="4148998">,</span>&nbsp;<span class="num" id="4149000">0</span><span class="op" id="4149001">,</span>&nbsp;<span class="builtintype" id="4149003">false</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149013"><a href="/gostd/net/http/request.go.html#4148708">major</a></span><span class="op" id="4149018">,</span>&nbsp;<span class="ident" id="4149020">err</span>&nbsp;<span class="op" id="4149024">:=</span>&nbsp;<span class="ident" id="4149027"><a href="/gostd/net/http/request.go.html#4134161">strconv</a></span><span class="op" id="4149034">.</span><span class="ident" id="4149035"><a href="/gostd/strconv/atoi.go.html#2357032">Atoi</a></span><span class="op" id="4149039">(</span><span class="ident" id="4149040"><a href="/gostd/net/http/request.go.html#4148694">vers</a></span><span class="op" id="4149044">[</span><span class="num" id="4149045">5</span><span class="op" id="4149046">:</span><span class="ident" id="4149047"><a href="/gostd/net/http/request.go.html#4148942">dot</a></span><span class="op" id="4149050">]</span><span class="op" id="4149051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149054">if</span>&nbsp;<span class="ident" id="4149057"><a href="/gostd/net/http/request.go.html#4149020">err</a></span>&nbsp;<span class="op" id="4149061">!=</span>&nbsp;<span class="builtintype" id="4149064">nil</span>&nbsp;<span class="op" id="4149068">||</span>&nbsp;<span class="ident" id="4149071"><a href="/gostd/net/http/request.go.html#4148708">major</a></span>&nbsp;<span class="op" id="4149077">&lt;</span>&nbsp;<span class="num" id="4149079">0</span>&nbsp;<span class="op" id="4149081">||</span>&nbsp;<span class="ident" id="4149084"><a href="/gostd/net/http/request.go.html#4148708">major</a></span>&nbsp;<span class="op" id="4149090">&gt;</span>&nbsp;<span class="ident" id="4149092"><a href="/gostd/net/http/request.go.html#4148744">Big</a></span>&nbsp;<span class="op" id="4149096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149100">return</span>&nbsp;<span class="num" id="4149107">0</span><span class="op" id="4149108">,</span>&nbsp;<span class="num" id="4149110">0</span><span class="op" id="4149111">,</span>&nbsp;<span class="builtintype" id="4149113">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149120">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149123"><a href="/gostd/net/http/request.go.html#4148715">minor</a></span><span class="op" id="4149128">,</span>&nbsp;<span class="ident" id="4149130"><a href="/gostd/net/http/request.go.html#4149020">err</a></span>&nbsp;<span class="op" id="4149134">=</span>&nbsp;<span class="ident" id="4149136"><a href="/gostd/net/http/request.go.html#4134161">strconv</a></span><span class="op" id="4149143">.</span><span class="ident" id="4149144"><a href="/gostd/strconv/atoi.go.html#2357032">Atoi</a></span><span class="op" id="4149148">(</span><span class="ident" id="4149149"><a href="/gostd/net/http/request.go.html#4148694">vers</a></span><span class="op" id="4149153">[</span><span class="ident" id="4149154"><a href="/gostd/net/http/request.go.html#4148942">dot</a></span><span class="op" id="4149157">+</span><span class="num" id="4149158">1</span><span class="op" id="4149159">:</span><span class="op" id="4149160">]</span><span class="op" id="4149161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149164">if</span>&nbsp;<span class="ident" id="4149167"><a href="/gostd/net/http/request.go.html#4149020">err</a></span>&nbsp;<span class="op" id="4149171">!=</span>&nbsp;<span class="builtintype" id="4149174">nil</span>&nbsp;<span class="op" id="4149178">||</span>&nbsp;<span class="ident" id="4149181"><a href="/gostd/net/http/request.go.html#4148715">minor</a></span>&nbsp;<span class="op" id="4149187">&lt;</span>&nbsp;<span class="num" id="4149189">0</span>&nbsp;<span class="op" id="4149191">||</span>&nbsp;<span class="ident" id="4149194"><a href="/gostd/net/http/request.go.html#4148715">minor</a></span>&nbsp;<span class="op" id="4149200">&gt;</span>&nbsp;<span class="ident" id="4149202"><a href="/gostd/net/http/request.go.html#4148744">Big</a></span>&nbsp;<span class="op" id="4149206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149210">return</span>&nbsp;<span class="num" id="4149217">0</span><span class="op" id="4149218">,</span>&nbsp;<span class="num" id="4149220">0</span><span class="op" id="4149221">,</span>&nbsp;<span class="builtintype" id="4149223">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149233">return</span>&nbsp;<span class="ident" id="4149240"><a href="/gostd/net/http/request.go.html#4148708">major</a></span><span class="op" id="4149245">,</span>&nbsp;<span class="ident" id="4149247"><a href="/gostd/net/http/request.go.html#4148715">minor</a></span><span class="op" id="4149252">,</span>&nbsp;<span class="builtintype" id="4149254">true</span><br>
<span class="lineno">485</span><span class="op" id="4149259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4149262">//&nbsp;NewRequest&nbsp;returns&nbsp;a&nbsp;new&nbsp;Request&nbsp;given&nbsp;a&nbsp;method,&nbsp;URL,&nbsp;and&nbsp;optional&nbsp;body.</span><br>
<span class="lineno"></span><span class="comment" id="4149338">//</span><br>
<span class="lineno"></span><span class="comment" id="4149341">//&nbsp;If&nbsp;the&nbsp;provided&nbsp;body&nbsp;is&nbsp;also&nbsp;an&nbsp;io.Closer,&nbsp;the&nbsp;returned</span><br>
<span class="lineno">490</span><span class="comment" id="4149400">//&nbsp;Request.Body&nbsp;is&nbsp;set&nbsp;to&nbsp;body&nbsp;and&nbsp;will&nbsp;be&nbsp;closed&nbsp;by&nbsp;the&nbsp;Client</span><br>
<span class="lineno"></span><span class="comment" id="4149464">//&nbsp;methods&nbsp;Do,&nbsp;Post,&nbsp;and&nbsp;PostForm,&nbsp;and&nbsp;Transport.RoundTrip.</span><br>
<span class="lineno"></span><span class="keyword" id="4149524">func</span>&nbsp;<span class="ident" id="4149529">NewRequest</span><span class="op" id="4149539">(</span><span class="ident" id="4149540">method</span><span class="op" id="4149546">,</span>&nbsp;<span class="ident" id="4149548">urlStr</span>&nbsp;<span class="builtintype" id="4149555">string</span><span class="op" id="4149561">,</span>&nbsp;<span class="ident" id="4149563">body</span>&nbsp;<span class="ident" id="4149568"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4149570">.</span><span class="ident" id="4149571"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="4149577">)</span>&nbsp;<span class="op" id="4149579">(</span><span class="op" id="4149580">*</span><span class="ident" id="4149581"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4149588">,</span>&nbsp;<span class="builtintype" id="4149590">error</span><span class="op" id="4149595">)</span>&nbsp;<span class="op" id="4149597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149600">u</span><span class="op" id="4149601">,</span>&nbsp;<span class="ident" id="4149603">err</span>&nbsp;<span class="op" id="4149607">:=</span>&nbsp;<span class="ident" id="4149610"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4149613">.</span><span class="ident" id="4149614"><a href="/gostd/net/url/url.go.html#3754169">Parse</a></span><span class="op" id="4149619">(</span><span class="ident" id="4149620"><a href="/gostd/net/http/request.go.html#4149548">urlStr</a></span><span class="op" id="4149626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149629">if</span>&nbsp;<span class="ident" id="4149632"><a href="/gostd/net/http/request.go.html#4149603">err</a></span>&nbsp;<span class="op" id="4149636">!=</span>&nbsp;<span class="builtintype" id="4149639">nil</span>&nbsp;<span class="op" id="4149643">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149647">return</span>&nbsp;<span class="builtintype" id="4149654">nil</span><span class="op" id="4149657">,</span>&nbsp;<span class="ident" id="4149659"><a href="/gostd/net/http/request.go.html#4149603">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149667">rc</span><span class="op" id="4149669">,</span>&nbsp;<span class="ident" id="4149671">ok</span>&nbsp;<span class="op" id="4149674">:=</span>&nbsp;<span class="ident" id="4149677"><a href="/gostd/net/http/request.go.html#4149563">body</a></span><span class="op" id="4149681">.</span><span class="op" id="4149682">(</span><span class="ident" id="4149683"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4149685">.</span><span class="ident" id="4149686"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="4149696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149699">if</span>&nbsp;<span class="op" id="4149702">!</span><span class="ident" id="4149703"><a href="/gostd/net/http/request.go.html#4149671">ok</a></span>&nbsp;<span class="op" id="4149706">&amp;&amp;</span>&nbsp;<span class="ident" id="4149709"><a href="/gostd/net/http/request.go.html#4149563">body</a></span>&nbsp;<span class="op" id="4149714">!=</span>&nbsp;<span class="builtintype" id="4149717">nil</span>&nbsp;<span class="op" id="4149721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149725"><a href="/gostd/net/http/request.go.html#4149667">rc</a></span>&nbsp;<span class="op" id="4149728">=</span>&nbsp;<span class="ident" id="4149730"><a href="/gostd/net/http/request.go.html#4134094">ioutil</a></span><span class="op" id="4149736">.</span><span class="ident" id="4149737"><a href="/gostd/io/ioutil/ioutil.go.html#3767601">NopCloser</a></span><span class="op" id="4149746">(</span><span class="ident" id="4149747"><a href="/gostd/net/http/request.go.html#4149563">body</a></span><span class="op" id="4149751">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149757">req</span>&nbsp;<span class="op" id="4149761">:=</span>&nbsp;<span class="op" id="4149764">&amp;</span><span class="ident" id="4149765"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4149772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149776"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="4149782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149788"><a href="/gostd/net/http/request.go.html#4149540">method</a></span><span class="op" id="4149794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149798"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4149801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149810"><a href="/gostd/net/http/request.go.html#4149600">u</a></span><span class="op" id="4149811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149815"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="4149820">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4149827">&#34;HTTP/1.1&#34;</span><span class="op" id="4149837">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149841"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="4149851">:</span>&nbsp;<span class="num" id="4149853">1</span><span class="op" id="4149854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149858"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="4149868">:</span>&nbsp;<span class="num" id="4149870">1</span><span class="op" id="4149871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149875"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4149881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4149887">make</span><span class="op" id="4149891">(</span><span class="ident" id="4149892"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4149898">)</span><span class="op" id="4149899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149903"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="4149907">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149915"><a href="/gostd/net/http/request.go.html#4149667">rc</a></span><span class="op" id="4149917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149921"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span><span class="op" id="4149925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4149933"><a href="/gostd/net/http/request.go.html#4149600">u</a></span><span class="op" id="4149934">.</span><span class="ident" id="4149935"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="4149939">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4149942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149945">if</span>&nbsp;<span class="ident" id="4149948"><a href="/gostd/net/http/request.go.html#4149563">body</a></span>&nbsp;<span class="op" id="4149953">!=</span>&nbsp;<span class="builtintype" id="4149956">nil</span>&nbsp;<span class="op" id="4149960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149964">switch</span>&nbsp;<span class="ident" id="4149971">v</span>&nbsp;<span class="op" id="4149973">:=</span>&nbsp;<span class="ident" id="4149976"><a href="/gostd/net/http/request.go.html#4149563">body</a></span><span class="op" id="4149980">.</span><span class="op" id="4149981">(</span><span class="keyword" id="4149982">type</span><span class="op" id="4149986">)</span>&nbsp;<span class="op" id="4149988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4149992">case</span>&nbsp;<span class="op" id="4149997">*</span><span class="ident" id="4149998"><a href="/gostd/net/http/request.go.html#4134029">bytes</a></span><span class="op" id="4150003">.</span><span class="ident" id="4150004"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="4150010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150015"><a href="/gostd/net/http/request.go.html#4149757">req</a></span><span class="op" id="4150018">.</span><span class="ident" id="4150019"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span>&nbsp;<span class="op" id="4150033">=</span>&nbsp;<span class="builtintype" id="4150035">int64</span><span class="op" id="4150040">(</span><span class="ident" id="4150041"><a href="/gostd/net/http/request.go.html#4149971">v</a></span><span class="op" id="4150042">.</span><span class="ident" id="4150043"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="4150046">(</span><span class="op" id="4150047">)</span><span class="op" id="4150048">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150052">case</span>&nbsp;<span class="op" id="4150057">*</span><span class="ident" id="4150058"><a href="/gostd/net/http/request.go.html#4134029">bytes</a></span><span class="op" id="4150063">.</span><span class="ident" id="4150064"><a href="/gostd/bytes/reader.go.html#1415599">Reader</a></span><span class="op" id="4150070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150075"><a href="/gostd/net/http/request.go.html#4149757">req</a></span><span class="op" id="4150078">.</span><span class="ident" id="4150079"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span>&nbsp;<span class="op" id="4150093">=</span>&nbsp;<span class="builtintype" id="4150095">int64</span><span class="op" id="4150100">(</span><span class="ident" id="4150101"><a href="/gostd/net/http/request.go.html#4149971">v</a></span><span class="op" id="4150102">.</span><span class="ident" id="4150103"><a href="/gostd/bytes/reader.go.html#1415817">Len</a></span><span class="op" id="4150106">(</span><span class="op" id="4150107">)</span><span class="op" id="4150108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150112">case</span>&nbsp;<span class="op" id="4150117">*</span><span class="ident" id="4150118"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4150125">.</span><span class="ident" id="4150126"><a href="/gostd/strings/reader.go.html#2945666">Reader</a></span><span class="op" id="4150132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150137"><a href="/gostd/net/http/request.go.html#4149757">req</a></span><span class="op" id="4150140">.</span><span class="ident" id="4150141"><a href="/gostd/net/http/request.go.html#4138292">ContentLength</a></span>&nbsp;<span class="op" id="4150155">=</span>&nbsp;<span class="builtintype" id="4150157">int64</span><span class="op" id="4150162">(</span><span class="ident" id="4150163"><a href="/gostd/net/http/request.go.html#4149971">v</a></span><span class="op" id="4150164">.</span><span class="ident" id="4150165"><a href="/gostd/strings/reader.go.html#2945885">Len</a></span><span class="op" id="4150168">(</span><span class="op" id="4150169">)</span><span class="op" id="4150170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150174">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150181">return</span>&nbsp;<span class="ident" id="4150188"><a href="/gostd/net/http/request.go.html#4149757">req</a></span><span class="op" id="4150191">,</span>&nbsp;<span class="builtintype" id="4150193">nil</span><br>
<span class="lineno"></span><span class="op" id="4150197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="4150200">//&nbsp;BasicAuth&nbsp;returns&nbsp;the&nbsp;username&nbsp;and&nbsp;password&nbsp;provided&nbsp;in&nbsp;the&nbsp;request&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="4150273">//&nbsp;Authorization&nbsp;header,&nbsp;if&nbsp;the&nbsp;request&nbsp;uses&nbsp;HTTP&nbsp;Basic&nbsp;Authentication.</span><br>
<span class="lineno"></span><span class="comment" id="4150345">//&nbsp;See&nbsp;RFC&nbsp;2617,&nbsp;Section&nbsp;2.</span><br>
<span class="lineno"></span><span class="keyword" id="4150373">func</span>&nbsp;<span class="op" id="4150378">(</span><span class="ident" id="4150379">r</span>&nbsp;<span class="op" id="4150381">*</span><span class="ident" id="4150382"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4150389">)</span>&nbsp;<span class="ident" id="4150391">BasicAuth</span><span class="op" id="4150400">(</span><span class="op" id="4150401">)</span>&nbsp;<span class="op" id="4150403">(</span><span class="ident" id="4150404">username</span><span class="op" id="4150412">,</span>&nbsp;<span class="ident" id="4150414">password</span>&nbsp;<span class="builtintype" id="4150423">string</span><span class="op" id="4150429">,</span>&nbsp;<span class="ident" id="4150431">ok</span>&nbsp;<span class="builtintype" id="4150434">bool</span><span class="op" id="4150438">)</span>&nbsp;<span class="op" id="4150440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150443">auth</span>&nbsp;<span class="op" id="4150448">:=</span>&nbsp;<span class="ident" id="4150451"><a href="/gostd/net/http/request.go.html#4150379">r</a></span><span class="op" id="4150452">.</span><span class="ident" id="4150453"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4150459">.</span><span class="ident" id="4150460"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4150463">(</span><span class="string" id="4150464">&#34;Authorization&#34;</span><span class="op" id="4150479">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150482">if</span>&nbsp;<span class="ident" id="4150485"><a href="/gostd/net/http/request.go.html#4150443">auth</a></span>&nbsp;<span class="op" id="4150490">==</span>&nbsp;<span class="string" id="4150493">&#34;&#34;</span>&nbsp;<span class="op" id="4150496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150500">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150511">return</span>&nbsp;<span class="ident" id="4150518"><a href="/gostd/net/http/request.go.html#4150691">parseBasicAuth</a></span><span class="op" id="4150532">(</span><span class="ident" id="4150533"><a href="/gostd/net/http/request.go.html#4150443">auth</a></span><span class="op" id="4150537">)</span><br>
<span class="lineno"></span><span class="op" id="4150539">}</span><br>
<span class="lineno">535</span><br>
<span class="lineno"></span><span class="comment" id="4150542">//&nbsp;parseBasicAuth&nbsp;parses&nbsp;an&nbsp;HTTP&nbsp;Basic&nbsp;Authentication&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4150604">//&nbsp;&#34;Basic&nbsp;QWxhZGRpbjpvcGVuIHNlc2FtZQ==&#34;&nbsp;returns&nbsp;(&#34;Aladdin&#34;,&nbsp;&#34;open&nbsp;sesame&#34;,&nbsp;true).</span><br>
<span class="lineno"></span><span class="keyword" id="4150686">func</span>&nbsp;<span class="ident" id="4150691">parseBasicAuth</span><span class="op" id="4150705">(</span><span class="ident" id="4150706">auth</span>&nbsp;<span class="builtintype" id="4150711">string</span><span class="op" id="4150717">)</span>&nbsp;<span class="op" id="4150719">(</span><span class="ident" id="4150720">username</span><span class="op" id="4150728">,</span>&nbsp;<span class="ident" id="4150730">password</span>&nbsp;<span class="builtintype" id="4150739">string</span><span class="op" id="4150745">,</span>&nbsp;<span class="ident" id="4150747">ok</span>&nbsp;<span class="builtintype" id="4150750">bool</span><span class="op" id="4150754">)</span>&nbsp;<span class="op" id="4150756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150759">if</span>&nbsp;<span class="op" id="4150762">!</span><span class="ident" id="4150763"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4150770">.</span><span class="ident" id="4150771"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4150780">(</span><span class="ident" id="4150781"><a href="/gostd/net/http/request.go.html#4150706">auth</a></span><span class="op" id="4150785">,</span>&nbsp;<span class="string" id="4150787">&#34;Basic&nbsp;&#34;</span><span class="op" id="4150795">)</span>&nbsp;<span class="op" id="4150797">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150801">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150812">c</span><span class="op" id="4150813">,</span>&nbsp;<span class="ident" id="4150815">err</span>&nbsp;<span class="op" id="4150819">:=</span>&nbsp;<span class="ident" id="4150822"><a href="/gostd/net/http/request.go.html#4134052">base64</a></span><span class="op" id="4150828">.</span><span class="ident" id="4150829"><a href="/gostd/encoding/base64/base64.go.html#4053069">StdEncoding</a></span><span class="op" id="4150840">.</span><span class="ident" id="4150841"><a href="/gostd/encoding/base64/base64.go.html#4058942">DecodeString</a></span><span class="op" id="4150853">(</span><span class="ident" id="4150854"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4150861">.</span><span class="ident" id="4150862"><a href="/gostd/strings/strings.go.html#2982727">TrimPrefix</a></span><span class="op" id="4150872">(</span><span class="ident" id="4150873"><a href="/gostd/net/http/request.go.html#4150706">auth</a></span><span class="op" id="4150877">,</span>&nbsp;<span class="string" id="4150879">&#34;Basic&nbsp;&#34;</span><span class="op" id="4150887">)</span><span class="op" id="4150888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150891">if</span>&nbsp;<span class="ident" id="4150894"><a href="/gostd/net/http/request.go.html#4150815">err</a></span>&nbsp;<span class="op" id="4150898">!=</span>&nbsp;<span class="builtintype" id="4150901">nil</span>&nbsp;<span class="op" id="4150905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150909">return</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150920">cs</span>&nbsp;<span class="op" id="4150923">:=</span>&nbsp;<span class="builtintype" id="4150926">string</span><span class="op" id="4150932">(</span><span class="ident" id="4150933"><a href="/gostd/net/http/request.go.html#4150812">c</a></span><span class="op" id="4150934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4150937">s</span>&nbsp;<span class="op" id="4150939">:=</span>&nbsp;<span class="ident" id="4150942"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4150949">.</span><span class="ident" id="4150950"><a href="/gostd/strings/strings_decl.go.html#2985554">IndexByte</a></span><span class="op" id="4150959">(</span><span class="ident" id="4150960"><a href="/gostd/net/http/request.go.html#4150920">cs</a></span><span class="op" id="4150962">,</span>&nbsp;<span class="string" id="4150964">&#39;:&#39;</span><span class="op" id="4150967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150970">if</span>&nbsp;<span class="ident" id="4150973"><a href="/gostd/net/http/request.go.html#4150937">s</a></span>&nbsp;<span class="op" id="4150975">&lt;</span>&nbsp;<span class="num" id="4150977">0</span>&nbsp;<span class="op" id="4150979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150983">return</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4150991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4150994">return</span>&nbsp;<span class="ident" id="4151001"><a href="/gostd/net/http/request.go.html#4150920">cs</a></span><span class="op" id="4151003">[</span><span class="op" id="4151004">:</span><span class="ident" id="4151005"><a href="/gostd/net/http/request.go.html#4150937">s</a></span><span class="op" id="4151006">]</span><span class="op" id="4151007">,</span>&nbsp;<span class="ident" id="4151009"><a href="/gostd/net/http/request.go.html#4150920">cs</a></span><span class="op" id="4151011">[</span><span class="ident" id="4151012"><a href="/gostd/net/http/request.go.html#4150937">s</a></span><span class="op" id="4151013">+</span><span class="num" id="4151014">1</span><span class="op" id="4151015">:</span><span class="op" id="4151016">]</span><span class="op" id="4151017">,</span>&nbsp;<span class="builtintype" id="4151019">true</span><br>
<span class="lineno"></span><span class="op" id="4151024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4151027">//&nbsp;SetBasicAuth&nbsp;sets&nbsp;the&nbsp;request&#39;s&nbsp;Authorization&nbsp;header&nbsp;to&nbsp;use&nbsp;HTTP</span><br>
<span class="lineno">555</span><span class="comment" id="4151095">//&nbsp;Basic&nbsp;Authentication&nbsp;with&nbsp;the&nbsp;provided&nbsp;username&nbsp;and&nbsp;password.</span><br>
<span class="lineno"></span><span class="comment" id="4151160">//</span><br>
<span class="lineno"></span><span class="comment" id="4151163">//&nbsp;With&nbsp;HTTP&nbsp;Basic&nbsp;Authentication&nbsp;the&nbsp;provided&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span><span class="comment" id="4151232">//&nbsp;are&nbsp;not&nbsp;encrypted.</span><br>
<span class="lineno"></span><span class="keyword" id="4151254">func</span>&nbsp;<span class="op" id="4151259">(</span><span class="ident" id="4151260">r</span>&nbsp;<span class="op" id="4151262">*</span><span class="ident" id="4151263"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4151270">)</span>&nbsp;<span class="ident" id="4151272">SetBasicAuth</span><span class="op" id="4151284">(</span><span class="ident" id="4151285">username</span><span class="op" id="4151293">,</span>&nbsp;<span class="ident" id="4151295">password</span>&nbsp;<span class="builtintype" id="4151304">string</span><span class="op" id="4151310">)</span>&nbsp;<span class="op" id="4151312">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151315"><a href="/gostd/net/http/request.go.html#4151260">r</a></span><span class="op" id="4151316">.</span><span class="ident" id="4151317"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4151323">.</span><span class="ident" id="4151324"><a href="/gostd/net/http/header.go.html#4126491">Set</a></span><span class="op" id="4151327">(</span><span class="string" id="4151328">&#34;Authorization&#34;</span><span class="op" id="4151343">,</span>&nbsp;<span class="string" id="4151345">&#34;Basic&nbsp;&#34;</span><span class="op" id="4151353">+</span><span class="ident" id="4151354"><a href="/gostd/net/http/client.go.html#4087681">basicAuth</a></span><span class="op" id="4151363">(</span><span class="ident" id="4151364"><a href="/gostd/net/http/request.go.html#4151285">username</a></span><span class="op" id="4151372">,</span>&nbsp;<span class="ident" id="4151374"><a href="/gostd/net/http/request.go.html#4151295">password</a></span><span class="op" id="4151382">)</span><span class="op" id="4151383">)</span><br>
<span class="lineno"></span><span class="op" id="4151385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4151388">//&nbsp;parseRequestLine&nbsp;parses&nbsp;&#34;GET&nbsp;/foo&nbsp;HTTP/1.1&#34;&nbsp;into&nbsp;its&nbsp;three&nbsp;parts.</span><br>
<span class="lineno"></span><span class="keyword" id="4151457">func</span>&nbsp;<span class="ident" id="4151462">parseRequestLine</span><span class="op" id="4151478">(</span><span class="ident" id="4151479">line</span>&nbsp;<span class="builtintype" id="4151484">string</span><span class="op" id="4151490">)</span>&nbsp;<span class="op" id="4151492">(</span><span class="ident" id="4151493">method</span><span class="op" id="4151499">,</span>&nbsp;<span class="ident" id="4151501">requestURI</span><span class="op" id="4151511">,</span>&nbsp;<span class="ident" id="4151513">proto</span>&nbsp;<span class="builtintype" id="4151519">string</span><span class="op" id="4151525">,</span>&nbsp;<span class="ident" id="4151527">ok</span>&nbsp;<span class="builtintype" id="4151530">bool</span><span class="op" id="4151534">)</span>&nbsp;<span class="op" id="4151536">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151539">s1</span>&nbsp;<span class="op" id="4151542">:=</span>&nbsp;<span class="ident" id="4151545"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4151552">.</span><span class="ident" id="4151553"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4151558">(</span><span class="ident" id="4151559"><a href="/gostd/net/http/request.go.html#4151479">line</a></span><span class="op" id="4151563">,</span>&nbsp;<span class="string" id="4151565">&#34;&nbsp;&#34;</span><span class="op" id="4151568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151571">s2</span>&nbsp;<span class="op" id="4151574">:=</span>&nbsp;<span class="ident" id="4151577"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4151584">.</span><span class="ident" id="4151585"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4151590">(</span><span class="ident" id="4151591"><a href="/gostd/net/http/request.go.html#4151479">line</a></span><span class="op" id="4151595">[</span><span class="ident" id="4151596"><a href="/gostd/net/http/request.go.html#4151539">s1</a></span><span class="op" id="4151598">+</span><span class="num" id="4151599">1</span><span class="op" id="4151600">:</span><span class="op" id="4151601">]</span><span class="op" id="4151602">,</span>&nbsp;<span class="string" id="4151604">&#34;&nbsp;&#34;</span><span class="op" id="4151607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151610">if</span>&nbsp;<span class="ident" id="4151613"><a href="/gostd/net/http/request.go.html#4151539">s1</a></span>&nbsp;<span class="op" id="4151616">&lt;</span>&nbsp;<span class="num" id="4151618">0</span>&nbsp;<span class="op" id="4151620">||</span>&nbsp;<span class="ident" id="4151623"><a href="/gostd/net/http/request.go.html#4151571">s2</a></span>&nbsp;<span class="op" id="4151626">&lt;</span>&nbsp;<span class="num" id="4151628">0</span>&nbsp;<span class="op" id="4151630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151634">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151642">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151645"><a href="/gostd/net/http/request.go.html#4151571">s2</a></span>&nbsp;<span class="op" id="4151648">+=</span>&nbsp;<span class="ident" id="4151651"><a href="/gostd/net/http/request.go.html#4151539">s1</a></span>&nbsp;<span class="op" id="4151654">+</span>&nbsp;<span class="num" id="4151656">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151659">return</span>&nbsp;<span class="ident" id="4151666"><a href="/gostd/net/http/request.go.html#4151479">line</a></span><span class="op" id="4151670">[</span><span class="op" id="4151671">:</span><span class="ident" id="4151672"><a href="/gostd/net/http/request.go.html#4151539">s1</a></span><span class="op" id="4151674">]</span><span class="op" id="4151675">,</span>&nbsp;<span class="ident" id="4151677"><a href="/gostd/net/http/request.go.html#4151479">line</a></span><span class="op" id="4151681">[</span><span class="ident" id="4151682"><a href="/gostd/net/http/request.go.html#4151539">s1</a></span><span class="op" id="4151684">+</span><span class="num" id="4151685">1</span>&nbsp;<span class="op" id="4151687">:</span>&nbsp;<span class="ident" id="4151689"><a href="/gostd/net/http/request.go.html#4151571">s2</a></span><span class="op" id="4151691">]</span><span class="op" id="4151692">,</span>&nbsp;<span class="ident" id="4151694"><a href="/gostd/net/http/request.go.html#4151479">line</a></span><span class="op" id="4151698">[</span><span class="ident" id="4151699"><a href="/gostd/net/http/request.go.html#4151571">s2</a></span><span class="op" id="4151701">+</span><span class="num" id="4151702">1</span><span class="op" id="4151703">:</span><span class="op" id="4151704">]</span><span class="op" id="4151705">,</span>&nbsp;<span class="builtintype" id="4151707">true</span><br>
<span class="lineno"></span><span class="op" id="4151712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4151715">var</span>&nbsp;<span class="ident" id="4151719">textprotoReaderPool</span>&nbsp;<span class="ident" id="4151739"><a href="/gostd/net/http/request.go.html#4134183">sync</a></span><span class="op" id="4151743">.</span><span class="ident" id="4151744"><a href="/gostd/sync/pool.go.html#1448866">Pool</a></span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="keyword" id="4151750">func</span>&nbsp;<span class="ident" id="4151755">newTextprotoReader</span><span class="op" id="4151773">(</span><span class="ident" id="4151774">br</span>&nbsp;<span class="op" id="4151777">*</span><span class="ident" id="4151778"><a href="/gostd/net/http/request.go.html#4134020">bufio</a></span><span class="op" id="4151783">.</span><span class="ident" id="4151784"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="4151790">)</span>&nbsp;<span class="op" id="4151792">*</span><span class="ident" id="4151793"><a href="/gostd/net/http/request.go.html#4134133">textproto</a></span><span class="op" id="4151802">.</span><span class="ident" id="4151803"><a href="/gostd/net/textproto/reader.go.html#4333179">Reader</a></span>&nbsp;<span class="op" id="4151810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151813">if</span>&nbsp;<span class="ident" id="4151816">v</span>&nbsp;<span class="op" id="4151818">:=</span>&nbsp;<span class="ident" id="4151821"><a href="/gostd/net/http/request.go.html#4151719">textprotoReaderPool</a></span><span class="op" id="4151840">.</span><span class="ident" id="4151841"><a href="/gostd/sync/pool.go.html#1450329">Get</a></span><span class="op" id="4151844">(</span><span class="op" id="4151845">)</span><span class="op" id="4151846">;</span>&nbsp;<span class="ident" id="4151848"><a href="/gostd/net/http/request.go.html#4151816">v</a></span>&nbsp;<span class="op" id="4151850">!=</span>&nbsp;<span class="builtintype" id="4151853">nil</span>&nbsp;<span class="op" id="4151857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151861">tr</span>&nbsp;<span class="op" id="4151864">:=</span>&nbsp;<span class="ident" id="4151867"><a href="/gostd/net/http/request.go.html#4151816">v</a></span><span class="op" id="4151868">.</span><span class="op" id="4151869">(</span><span class="op" id="4151870">*</span><span class="ident" id="4151871"><a href="/gostd/net/http/request.go.html#4134133">textproto</a></span><span class="op" id="4151880">.</span><span class="ident" id="4151881"><a href="/gostd/net/textproto/reader.go.html#4333179">Reader</a></span><span class="op" id="4151887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151891"><a href="/gostd/net/http/request.go.html#4151861">tr</a></span><span class="op" id="4151893">.</span><span class="ident" id="4151894"><a href="/gostd/net/textproto/reader.go.html#4333196">R</a></span>&nbsp;<span class="op" id="4151896">=</span>&nbsp;<span class="ident" id="4151898"><a href="/gostd/net/http/request.go.html#4151774">br</a></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151903">return</span>&nbsp;<span class="ident" id="4151910"><a href="/gostd/net/http/request.go.html#4151861">tr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151917">return</span>&nbsp;<span class="ident" id="4151924"><a href="/gostd/net/http/request.go.html#4134133">textproto</a></span><span class="op" id="4151933">.</span><span class="ident" id="4151934"><a href="/gostd/net/textproto/reader.go.html#4333349">NewReader</a></span><span class="op" id="4151943">(</span><span class="ident" id="4151944"><a href="/gostd/net/http/request.go.html#4151774">br</a></span><span class="op" id="4151946">)</span><br>
<span class="lineno"></span><span class="op" id="4151948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="4151951">func</span>&nbsp;<span class="ident" id="4151956">putTextprotoReader</span><span class="op" id="4151974">(</span><span class="ident" id="4151975">r</span>&nbsp;<span class="op" id="4151977">*</span><span class="ident" id="4151978"><a href="/gostd/net/http/request.go.html#4134133">textproto</a></span><span class="op" id="4151987">.</span><span class="ident" id="4151988"><a href="/gostd/net/textproto/reader.go.html#4333179">Reader</a></span><span class="op" id="4151994">)</span>&nbsp;<span class="op" id="4151996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151999"><a href="/gostd/net/http/request.go.html#4151975">r</a></span><span class="op" id="4152000">.</span><span class="ident" id="4152001"><a href="/gostd/net/textproto/reader.go.html#4333196">R</a></span>&nbsp;<span class="op" id="4152003">=</span>&nbsp;<span class="builtintype" id="4152005">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152010"><a href="/gostd/net/http/request.go.html#4151719">textprotoReaderPool</a></span><span class="op" id="4152029">.</span><span class="ident" id="4152030"><a href="/gostd/sync/pool.go.html#1449510">Put</a></span><span class="op" id="4152033">(</span><span class="ident" id="4152034"><a href="/gostd/net/http/request.go.html#4151975">r</a></span><span class="op" id="4152035">)</span><br>
<span class="lineno"></span><span class="op" id="4152037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="4152040">//&nbsp;ReadRequest&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;request&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4152090">func</span>&nbsp;<span class="ident" id="4152095">ReadRequest</span><span class="op" id="4152106">(</span><span class="ident" id="4152107">b</span>&nbsp;<span class="op" id="4152109">*</span><span class="ident" id="4152110"><a href="/gostd/net/http/request.go.html#4134020">bufio</a></span><span class="op" id="4152115">.</span><span class="ident" id="4152116"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="4152122">)</span>&nbsp;<span class="op" id="4152124">(</span><span class="ident" id="4152125">req</span>&nbsp;<span class="op" id="4152129">*</span><span class="ident" id="4152130"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4152137">,</span>&nbsp;<span class="ident" id="4152139">err</span>&nbsp;<span class="builtintype" id="4152143">error</span><span class="op" id="4152148">)</span>&nbsp;<span class="op" id="4152150">{</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152154">tp</span>&nbsp;<span class="op" id="4152157">:=</span>&nbsp;<span class="ident" id="4152160"><a href="/gostd/net/http/request.go.html#4151755">newTextprotoReader</a></span><span class="op" id="4152178">(</span><span class="ident" id="4152179"><a href="/gostd/net/http/request.go.html#4152107">b</a></span><span class="op" id="4152180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152183"><a href="/gostd/net/http/request.go.html#4152125">req</a></span>&nbsp;<span class="op" id="4152187">=</span>&nbsp;<span class="builtinfunc" id="4152189">new</span><span class="op" id="4152192">(</span><span class="ident" id="4152193"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4152200">)</span><br>
<span class="lineno">595</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152204">//&nbsp;First&nbsp;line:&nbsp;GET&nbsp;/index.html&nbsp;HTTP/1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152245">var</span>&nbsp;<span class="ident" id="4152249">s</span>&nbsp;<span class="builtintype" id="4152251">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152259">if</span>&nbsp;<span class="ident" id="4152262"><a href="/gostd/net/http/request.go.html#4152249">s</a></span><span class="op" id="4152263">,</span>&nbsp;<span class="ident" id="4152265"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4152269">=</span>&nbsp;<span class="ident" id="4152271"><a href="/gostd/net/http/request.go.html#4152154">tp</a></span><span class="op" id="4152273">.</span><span class="ident" id="4152274"><a href="/gostd/net/textproto/reader.go.html#4333526">ReadLine</a></span><span class="op" id="4152282">(</span><span class="op" id="4152283">)</span><span class="op" id="4152284">;</span>&nbsp;<span class="ident" id="4152286"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4152290">!=</span>&nbsp;<span class="builtintype" id="4152293">nil</span>&nbsp;<span class="op" id="4152297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152301">return</span>&nbsp;<span class="builtintype" id="4152308">nil</span><span class="op" id="4152311">,</span>&nbsp;<span class="ident" id="4152313"><a href="/gostd/net/http/request.go.html#4152139">err</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152321">defer</span>&nbsp;<span class="keyword" id="4152327">func</span><span class="op" id="4152331">(</span><span class="op" id="4152332">)</span>&nbsp;<span class="op" id="4152334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152338"><a href="/gostd/net/http/request.go.html#4151956">putTextprotoReader</a></span><span class="op" id="4152356">(</span><span class="ident" id="4152357"><a href="/gostd/net/http/request.go.html#4152154">tp</a></span><span class="op" id="4152359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152363">if</span>&nbsp;<span class="ident" id="4152366"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4152370">==</span>&nbsp;<span class="ident" id="4152373"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4152375">.</span><span class="ident" id="4152376"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="4152380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152385"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4152389">=</span>&nbsp;<span class="ident" id="4152391"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4152393">.</span><span class="ident" id="4152394"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152416">}</span><span class="op" id="4152417">(</span><span class="op" id="4152418">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152422">var</span>&nbsp;<span class="ident" id="4152426">ok</span>&nbsp;<span class="builtintype" id="4152429">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152435"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152438">.</span><span class="ident" id="4152439"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span><span class="op" id="4152445">,</span>&nbsp;<span class="ident" id="4152447"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152450">.</span><span class="ident" id="4152451"><a href="/gostd/net/http/request.go.html#4141462">RequestURI</a></span><span class="op" id="4152461">,</span>&nbsp;<span class="ident" id="4152463"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152466">.</span><span class="ident" id="4152467"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="4152472">,</span>&nbsp;<span class="ident" id="4152474"><a href="/gostd/net/http/request.go.html#4152426">ok</a></span>&nbsp;<span class="op" id="4152477">=</span>&nbsp;<span class="ident" id="4152479"><a href="/gostd/net/http/request.go.html#4151462">parseRequestLine</a></span><span class="op" id="4152495">(</span><span class="ident" id="4152496"><a href="/gostd/net/http/request.go.html#4152249">s</a></span><span class="op" id="4152497">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152500">if</span>&nbsp;<span class="op" id="4152503">!</span><span class="ident" id="4152504"><a href="/gostd/net/http/request.go.html#4152426">ok</a></span>&nbsp;<span class="op" id="4152507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152511">return</span>&nbsp;<span class="builtintype" id="4152518">nil</span><span class="op" id="4152521">,</span>&nbsp;<span class="op" id="4152523">&amp;</span><span class="ident" id="4152524"><a href="/gostd/net/http/request.go.html#4135248">badStringError</a></span><span class="op" id="4152538">{</span><span class="string" id="4152539">&#34;malformed&nbsp;HTTP&nbsp;request&#34;</span><span class="op" id="4152563">,</span>&nbsp;<span class="ident" id="4152565"><a href="/gostd/net/http/request.go.html#4152249">s</a></span><span class="op" id="4152566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152572">rawurl</span>&nbsp;<span class="op" id="4152579">:=</span>&nbsp;<span class="ident" id="4152582"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152585">.</span><span class="ident" id="4152586"><a href="/gostd/net/http/request.go.html#4141462">RequestURI</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152598">if</span>&nbsp;<span class="ident" id="4152601"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152604">.</span><span class="ident" id="4152605"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="4152615">,</span>&nbsp;<span class="ident" id="4152617"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152620">.</span><span class="ident" id="4152621"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="4152631">,</span>&nbsp;<span class="ident" id="4152633"><a href="/gostd/net/http/request.go.html#4152426">ok</a></span>&nbsp;<span class="op" id="4152636">=</span>&nbsp;<span class="ident" id="4152638"><a href="/gostd/net/http/request.go.html#4148677">ParseHTTPVersion</a></span><span class="op" id="4152654">(</span><span class="ident" id="4152655"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152658">.</span><span class="ident" id="4152659"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="4152664">)</span><span class="op" id="4152665">;</span>&nbsp;<span class="op" id="4152667">!</span><span class="ident" id="4152668"><a href="/gostd/net/http/request.go.html#4152426">ok</a></span>&nbsp;<span class="op" id="4152671">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152675">return</span>&nbsp;<span class="builtintype" id="4152682">nil</span><span class="op" id="4152685">,</span>&nbsp;<span class="op" id="4152687">&amp;</span><span class="ident" id="4152688"><a href="/gostd/net/http/request.go.html#4135248">badStringError</a></span><span class="op" id="4152702">{</span><span class="string" id="4152703">&#34;malformed&nbsp;HTTP&nbsp;version&#34;</span><span class="op" id="4152727">,</span>&nbsp;<span class="ident" id="4152729"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4152732">.</span><span class="ident" id="4152733"><a href="/gostd/net/http/request.go.html#4136744">Proto</a></span><span class="op" id="4152738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152745">//&nbsp;CONNECT&nbsp;requests&nbsp;are&nbsp;used&nbsp;two&nbsp;different&nbsp;ways,&nbsp;and&nbsp;neither&nbsp;uses&nbsp;a&nbsp;full&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152824">//&nbsp;The&nbsp;standard&nbsp;use&nbsp;is&nbsp;to&nbsp;tunnel&nbsp;HTTPS&nbsp;through&nbsp;an&nbsp;HTTP&nbsp;proxy.</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152887">//&nbsp;It&nbsp;looks&nbsp;like&nbsp;&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1&#34;,&nbsp;and&nbsp;the&nbsp;parameter&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152965">//&nbsp;just&nbsp;the&nbsp;authority&nbsp;section&nbsp;of&nbsp;a&nbsp;URL.&nbsp;This&nbsp;information&nbsp;should&nbsp;go&nbsp;in&nbsp;req.URL.Host.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153050">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153054">//&nbsp;The&nbsp;net/rpc&nbsp;package&nbsp;also&nbsp;uses&nbsp;CONNECT,&nbsp;but&nbsp;there&nbsp;the&nbsp;parameter&nbsp;is&nbsp;a&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153131">//&nbsp;that&nbsp;starts&nbsp;with&nbsp;a&nbsp;slash.&nbsp;It&nbsp;can&nbsp;be&nbsp;parsed&nbsp;with&nbsp;the&nbsp;regular&nbsp;URL&nbsp;parser,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153207">//&nbsp;and&nbsp;the&nbsp;path&nbsp;will&nbsp;end&nbsp;up&nbsp;in&nbsp;req.URL.Path,&nbsp;where&nbsp;it&nbsp;needs&nbsp;to&nbsp;be&nbsp;in&nbsp;order&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153287">//&nbsp;RPC&nbsp;to&nbsp;work.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153304">justAuthority</span>&nbsp;<span class="op" id="4153318">:=</span>&nbsp;<span class="ident" id="4153321"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153324">.</span><span class="ident" id="4153325"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span>&nbsp;<span class="op" id="4153332">==</span>&nbsp;<span class="string" id="4153335">&#34;CONNECT&#34;</span>&nbsp;<span class="op" id="4153345">&amp;&amp;</span>&nbsp;<span class="op" id="4153348">!</span><span class="ident" id="4153349"><a href="/gostd/net/http/request.go.html#4134172">strings</a></span><span class="op" id="4153356">.</span><span class="ident" id="4153357"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4153366">(</span><span class="ident" id="4153367"><a href="/gostd/net/http/request.go.html#4152572">rawurl</a></span><span class="op" id="4153373">,</span>&nbsp;<span class="string" id="4153375">&#34;/&#34;</span><span class="op" id="4153378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153381">if</span>&nbsp;<span class="ident" id="4153384"><a href="/gostd/net/http/request.go.html#4153304">justAuthority</a></span>&nbsp;<span class="op" id="4153398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153402"><a href="/gostd/net/http/request.go.html#4152572">rawurl</a></span>&nbsp;<span class="op" id="4153409">=</span>&nbsp;<span class="string" id="4153411">&#34;http://&#34;</span>&nbsp;<span class="op" id="4153421">+</span>&nbsp;<span class="ident" id="4153423"><a href="/gostd/net/http/request.go.html#4152572">rawurl</a></span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153435">if</span>&nbsp;<span class="ident" id="4153438"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153441">.</span><span class="ident" id="4153442"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4153445">,</span>&nbsp;<span class="ident" id="4153447"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4153451">=</span>&nbsp;<span class="ident" id="4153453"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4153456">.</span><span class="ident" id="4153457"><a href="/gostd/net/url/url.go.html#3754843">ParseRequestURI</a></span><span class="op" id="4153472">(</span><span class="ident" id="4153473"><a href="/gostd/net/http/request.go.html#4152572">rawurl</a></span><span class="op" id="4153479">)</span><span class="op" id="4153480">;</span>&nbsp;<span class="ident" id="4153482"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4153486">!=</span>&nbsp;<span class="builtintype" id="4153489">nil</span>&nbsp;<span class="op" id="4153493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153497">return</span>&nbsp;<span class="builtintype" id="4153504">nil</span><span class="op" id="4153507">,</span>&nbsp;<span class="ident" id="4153509"><a href="/gostd/net/http/request.go.html#4152139">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153514">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153518">if</span>&nbsp;<span class="ident" id="4153521"><a href="/gostd/net/http/request.go.html#4153304">justAuthority</a></span>&nbsp;<span class="op" id="4153535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153539">//&nbsp;Strip&nbsp;the&nbsp;bogus&nbsp;&#34;http://&#34;&nbsp;back&nbsp;off.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153580"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153583">.</span><span class="ident" id="4153584"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4153587">.</span><span class="ident" id="4153588"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="4153595">=</span>&nbsp;<span class="string" id="4153597">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153601">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153605">//&nbsp;Subsequent&nbsp;lines:&nbsp;Key:&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153639">mimeHeader</span><span class="op" id="4153649">,</span>&nbsp;<span class="ident" id="4153651"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4153655">:=</span>&nbsp;<span class="ident" id="4153658"><a href="/gostd/net/http/request.go.html#4152154">tp</a></span><span class="op" id="4153660">.</span><span class="ident" id="4153661"><a href="/gostd/net/textproto/reader.go.html#4344573">ReadMIMEHeader</a></span><span class="op" id="4153675">(</span><span class="op" id="4153676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153679">if</span>&nbsp;<span class="ident" id="4153682"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4153686">!=</span>&nbsp;<span class="builtintype" id="4153689">nil</span>&nbsp;<span class="op" id="4153693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153697">return</span>&nbsp;<span class="builtintype" id="4153704">nil</span><span class="op" id="4153707">,</span>&nbsp;<span class="ident" id="4153709"><a href="/gostd/net/http/request.go.html#4152139">err</a></span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153717"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153720">.</span><span class="ident" id="4153721"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span>&nbsp;<span class="op" id="4153728">=</span>&nbsp;<span class="ident" id="4153730"><a href="/gostd/net/http/header.go.html#4126117">Header</a></span><span class="op" id="4153736">(</span><span class="ident" id="4153737"><a href="/gostd/net/http/request.go.html#4153639">mimeHeader</a></span><span class="op" id="4153747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153751">//&nbsp;RFC2616:&nbsp;Must&nbsp;treat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153775">//&nbsp;&nbsp;&nbsp;&nbsp;GET&nbsp;/index.html&nbsp;HTTP/1.1</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153804">//&nbsp;&nbsp;&nbsp;&nbsp;Host:&nbsp;www.google.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153829">//&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153837">//&nbsp;&nbsp;&nbsp;&nbsp;GET&nbsp;http://www.google.com/index.html&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153887">//&nbsp;&nbsp;&nbsp;&nbsp;Host:&nbsp;doesntmatter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153910">//&nbsp;the&nbsp;same.&nbsp;&nbsp;In&nbsp;the&nbsp;second&nbsp;case,&nbsp;any&nbsp;Host&nbsp;line&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153971"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153974">.</span><span class="ident" id="4153975"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span>&nbsp;<span class="op" id="4153980">=</span>&nbsp;<span class="ident" id="4153982"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4153985">.</span><span class="ident" id="4153986"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4153989">.</span><span class="ident" id="4153990"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153996">if</span>&nbsp;<span class="ident" id="4153999"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154002">.</span><span class="ident" id="4154003"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span>&nbsp;<span class="op" id="4154008">==</span>&nbsp;<span class="string" id="4154011">&#34;&#34;</span>&nbsp;<span class="op" id="4154014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154018"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154021">.</span><span class="ident" id="4154022"><a href="/gostd/net/http/request.go.html#4139164">Host</a></span>&nbsp;<span class="op" id="4154027">=</span>&nbsp;<span class="ident" id="4154029"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154032">.</span><span class="ident" id="4154033"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4154039">.</span><span class="ident" id="4154040"><a href="/gostd/net/http/header.go.html#4126950">get</a></span><span class="op" id="4154043">(</span><span class="string" id="4154044">&#34;Host&#34;</span><span class="op" id="4154050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4154056">delete</span><span class="op" id="4154062">(</span><span class="ident" id="4154063"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154066">.</span><span class="ident" id="4154067"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4154073">,</span>&nbsp;<span class="string" id="4154075">&#34;Host&#34;</span><span class="op" id="4154081">)</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154085"><a href="/gostd/net/http/response.go.html#4165953">fixPragmaCacheControl</a></span><span class="op" id="4154106">(</span><span class="ident" id="4154107"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154110">.</span><span class="ident" id="4154111"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4154117">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154121"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4154125">=</span>&nbsp;<span class="ident" id="4154127"><a href="/gostd/net/http/transfer.go.html#4247796">readTransfer</a></span><span class="op" id="4154139">(</span><span class="ident" id="4154140"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154143">,</span>&nbsp;<span class="ident" id="4154145"><a href="/gostd/net/http/request.go.html#4152107">b</a></span><span class="op" id="4154146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154149">if</span>&nbsp;<span class="ident" id="4154152"><a href="/gostd/net/http/request.go.html#4152139">err</a></span>&nbsp;<span class="op" id="4154156">!=</span>&nbsp;<span class="builtintype" id="4154159">nil</span>&nbsp;<span class="op" id="4154163">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154167">return</span>&nbsp;<span class="builtintype" id="4154174">nil</span><span class="op" id="4154177">,</span>&nbsp;<span class="ident" id="4154179"><a href="/gostd/net/http/request.go.html#4152139">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154188"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154191">.</span><span class="ident" id="4154192"><a href="/gostd/net/http/request.go.html#4138776">Close</a></span>&nbsp;<span class="op" id="4154198">=</span>&nbsp;<span class="ident" id="4154200"><a href="/gostd/net/http/transfer.go.html#4253547">shouldClose</a></span><span class="op" id="4154211">(</span><span class="ident" id="4154212"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154215">.</span><span class="ident" id="4154216"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span><span class="op" id="4154226">,</span>&nbsp;<span class="ident" id="4154228"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154231">.</span><span class="ident" id="4154232"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span><span class="op" id="4154242">,</span>&nbsp;<span class="ident" id="4154244"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154247">.</span><span class="ident" id="4154248"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4154254">,</span>&nbsp;<span class="builtintype" id="4154256">false</span><span class="op" id="4154261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154264">return</span>&nbsp;<span class="ident" id="4154271"><a href="/gostd/net/http/request.go.html#4152125">req</a></span><span class="op" id="4154274">,</span>&nbsp;<span class="builtintype" id="4154276">nil</span><br>
<span class="lineno">670</span><span class="op" id="4154280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4154283">//&nbsp;MaxBytesReader&nbsp;is&nbsp;similar&nbsp;to&nbsp;io.LimitReader&nbsp;but&nbsp;is&nbsp;intended&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="4154350">//&nbsp;limiting&nbsp;the&nbsp;size&nbsp;of&nbsp;incoming&nbsp;request&nbsp;bodies.&nbsp;In&nbsp;contrast&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4154414">//&nbsp;io.LimitReader,&nbsp;MaxBytesReader&#39;s&nbsp;result&nbsp;is&nbsp;a&nbsp;ReadCloser,&nbsp;returns&nbsp;a</span><br>
<span class="lineno">675</span><span class="comment" id="4154484">//&nbsp;non-EOF&nbsp;error&nbsp;for&nbsp;a&nbsp;Read&nbsp;beyond&nbsp;the&nbsp;limit,&nbsp;and&nbsp;Closes&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4154545">//&nbsp;underlying&nbsp;reader&nbsp;when&nbsp;its&nbsp;Close&nbsp;method&nbsp;is&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="4154599">//</span><br>
<span class="lineno"></span><span class="comment" id="4154602">//&nbsp;MaxBytesReader&nbsp;prevents&nbsp;clients&nbsp;from&nbsp;accidentally&nbsp;or&nbsp;maliciously</span><br>
<span class="lineno"></span><span class="comment" id="4154670">//&nbsp;sending&nbsp;a&nbsp;large&nbsp;request&nbsp;and&nbsp;wasting&nbsp;server&nbsp;resources.</span><br>
<span class="lineno">680</span><span class="keyword" id="4154727">func</span>&nbsp;<span class="ident" id="4154732">MaxBytesReader</span><span class="op" id="4154746">(</span><span class="ident" id="4154747">w</span>&nbsp;<span class="ident" id="4154749"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><span class="op" id="4154763">,</span>&nbsp;<span class="ident" id="4154765">r</span>&nbsp;<span class="ident" id="4154767"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4154769">.</span><span class="ident" id="4154770"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="4154780">,</span>&nbsp;<span class="ident" id="4154782">n</span>&nbsp;<span class="builtintype" id="4154784">int64</span><span class="op" id="4154789">)</span>&nbsp;<span class="ident" id="4154791"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4154793">.</span><span class="ident" id="4154794"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="op" id="4154805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154808">return</span>&nbsp;<span class="op" id="4154815">&amp;</span><span class="ident" id="4154816"><a href="/gostd/net/http/request.go.html#4154857">maxBytesReader</a></span><span class="op" id="4154830">{</span><span class="ident" id="4154831"><a href="/gostd/net/http/request.go.html#4154882">w</a></span><span class="op" id="4154832">:</span>&nbsp;<span class="ident" id="4154834"><a href="/gostd/net/http/request.go.html#4154747">w</a></span><span class="op" id="4154835">,</span>&nbsp;<span class="ident" id="4154837"><a href="/gostd/net/http/request.go.html#4154906">r</a></span><span class="op" id="4154838">:</span>&nbsp;<span class="ident" id="4154840"><a href="/gostd/net/http/request.go.html#4154765">r</a></span><span class="op" id="4154841">,</span>&nbsp;<span class="ident" id="4154843"><a href="/gostd/net/http/request.go.html#4154950">n</a></span><span class="op" id="4154844">:</span>&nbsp;<span class="ident" id="4154846"><a href="/gostd/net/http/request.go.html#4154782">n</a></span><span class="op" id="4154847">}</span><br>
<span class="lineno"></span><span class="op" id="4154849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4154852">type</span>&nbsp;<span class="ident" id="4154857">maxBytesReader</span>&nbsp;<span class="keyword" id="4154872">struct</span>&nbsp;<span class="op" id="4154879">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154882">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154890"><a href="/gostd/net/http/server.go.html#4170569">ResponseWriter</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154906">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154914"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4154916">.</span><span class="ident" id="4154917"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span>&nbsp;<span class="comment" id="4154928">//&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154950">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4154958">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4154972">//&nbsp;max&nbsp;bytes&nbsp;remaining</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154996">stopped</span>&nbsp;<span class="builtintype" id="4155004">bool</span><br>
<span class="lineno"></span><span class="op" id="4155009">}</span><br>
<span class="lineno">690</span><br>
<span class="lineno"></span><span class="keyword" id="4155012">func</span>&nbsp;<span class="op" id="4155017">(</span><span class="ident" id="4155018">l</span>&nbsp;<span class="op" id="4155020">*</span><span class="ident" id="4155021"><a href="/gostd/net/http/request.go.html#4154857">maxBytesReader</a></span><span class="op" id="4155035">)</span>&nbsp;<span class="ident" id="4155037">Read</span><span class="op" id="4155041">(</span><span class="ident" id="4155042">p</span>&nbsp;<span class="op" id="4155044">[</span><span class="op" id="4155045">]</span><span class="builtintype" id="4155046">byte</span><span class="op" id="4155050">)</span>&nbsp;<span class="op" id="4155052">(</span><span class="ident" id="4155053">n</span>&nbsp;<span class="builtintype" id="4155055">int</span><span class="op" id="4155058">,</span>&nbsp;<span class="ident" id="4155060">err</span>&nbsp;<span class="builtintype" id="4155064">error</span><span class="op" id="4155069">)</span>&nbsp;<span class="op" id="4155071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155074">if</span>&nbsp;<span class="ident" id="4155077"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155078">.</span><span class="ident" id="4155079"><a href="/gostd/net/http/request.go.html#4154950">n</a></span>&nbsp;<span class="op" id="4155081">&lt;=</span>&nbsp;<span class="num" id="4155084">0</span>&nbsp;<span class="op" id="4155086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155090">if</span>&nbsp;<span class="op" id="4155093">!</span><span class="ident" id="4155094"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155095">.</span><span class="ident" id="4155096"><a href="/gostd/net/http/request.go.html#4154996">stopped</a></span>&nbsp;<span class="op" id="4155104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155109"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155110">.</span><span class="ident" id="4155111"><a href="/gostd/net/http/request.go.html#4154996">stopped</a></span>&nbsp;<span class="op" id="4155119">=</span>&nbsp;<span class="builtintype" id="4155121">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155129">if</span>&nbsp;<span class="ident" id="4155132">res</span><span class="op" id="4155135">,</span>&nbsp;<span class="ident" id="4155137">ok</span>&nbsp;<span class="op" id="4155140">:=</span>&nbsp;<span class="ident" id="4155143"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155144">.</span><span class="ident" id="4155145"><a href="/gostd/net/http/request.go.html#4154882">w</a></span><span class="op" id="4155146">.</span><span class="op" id="4155147">(</span><span class="op" id="4155148">*</span><span class="ident" id="4155149"><a href="/gostd/net/http/server.go.html#4177673">response</a></span><span class="op" id="4155157">)</span><span class="op" id="4155158">;</span>&nbsp;<span class="ident" id="4155160"><a href="/gostd/net/http/request.go.html#4155137">ok</a></span>&nbsp;<span class="op" id="4155163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155169"><a href="/gostd/net/http/request.go.html#4155132">res</a></span><span class="op" id="4155172">.</span><span class="ident" id="4155173"><a href="/gostd/net/http/server.go.html#4179396">requestTooLarge</a></span><span class="op" id="4155188">(</span><span class="op" id="4155189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155202">return</span>&nbsp;<span class="num" id="4155209">0</span><span class="op" id="4155210">,</span>&nbsp;<span class="ident" id="4155212"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4155218">.</span><span class="ident" id="4155219"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4155222">(</span><span class="string" id="4155223">&#34;http:&nbsp;request&nbsp;body&nbsp;too&nbsp;large&#34;</span><span class="op" id="4155253">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155259">if</span>&nbsp;<span class="builtintype" id="4155262">int64</span><span class="op" id="4155267">(</span><span class="builtinfunc" id="4155268">len</span><span class="op" id="4155271">(</span><span class="ident" id="4155272"><a href="/gostd/net/http/request.go.html#4155042">p</a></span><span class="op" id="4155273">)</span><span class="op" id="4155274">)</span>&nbsp;<span class="op" id="4155276">&gt;</span>&nbsp;<span class="ident" id="4155278"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155279">.</span><span class="ident" id="4155280"><a href="/gostd/net/http/request.go.html#4154950">n</a></span>&nbsp;<span class="op" id="4155282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155286"><a href="/gostd/net/http/request.go.html#4155042">p</a></span>&nbsp;<span class="op" id="4155288">=</span>&nbsp;<span class="ident" id="4155290"><a href="/gostd/net/http/request.go.html#4155042">p</a></span><span class="op" id="4155291">[</span><span class="op" id="4155292">:</span><span class="ident" id="4155293"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155294">.</span><span class="ident" id="4155295"><a href="/gostd/net/http/request.go.html#4154950">n</a></span><span class="op" id="4155296">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155302"><a href="/gostd/net/http/request.go.html#4155053">n</a></span><span class="op" id="4155303">,</span>&nbsp;<span class="ident" id="4155305"><a href="/gostd/net/http/request.go.html#4155060">err</a></span>&nbsp;<span class="op" id="4155309">=</span>&nbsp;<span class="ident" id="4155311"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155312">.</span><span class="ident" id="4155313"><a href="/gostd/net/http/request.go.html#4154906">r</a></span><span class="op" id="4155314">.</span><span class="ident" id="4155315"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="4155319">(</span><span class="ident" id="4155320"><a href="/gostd/net/http/request.go.html#4155042">p</a></span><span class="op" id="4155321">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155324"><a href="/gostd/net/http/request.go.html#4155018">l</a></span><span class="op" id="4155325">.</span><span class="ident" id="4155326"><a href="/gostd/net/http/request.go.html#4154950">n</a></span>&nbsp;<span class="op" id="4155328">-=</span>&nbsp;<span class="builtintype" id="4155331">int64</span><span class="op" id="4155336">(</span><span class="ident" id="4155337"><a href="/gostd/net/http/request.go.html#4155053">n</a></span><span class="op" id="4155338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155341">return</span><br>
<span class="lineno"></span><span class="op" id="4155348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4155351">func</span>&nbsp;<span class="op" id="4155356">(</span><span class="ident" id="4155357">l</span>&nbsp;<span class="op" id="4155359">*</span><span class="ident" id="4155360"><a href="/gostd/net/http/request.go.html#4154857">maxBytesReader</a></span><span class="op" id="4155374">)</span>&nbsp;<span class="ident" id="4155376">Close</span><span class="op" id="4155381">(</span><span class="op" id="4155382">)</span>&nbsp;<span class="builtintype" id="4155384">error</span>&nbsp;<span class="op" id="4155390">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155393">return</span>&nbsp;<span class="ident" id="4155400"><a href="/gostd/net/http/request.go.html#4155357">l</a></span><span class="op" id="4155401">.</span><span class="ident" id="4155402"><a href="/gostd/net/http/request.go.html#4154906">r</a></span><span class="op" id="4155403">.</span><span class="ident" id="4155404"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="4155409">(</span><span class="op" id="4155410">)</span><br>
<span class="lineno"></span><span class="op" id="4155412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4155415">func</span>&nbsp;<span class="ident" id="4155420">copyValues</span><span class="op" id="4155430">(</span><span class="ident" id="4155431">dst</span><span class="op" id="4155434">,</span>&nbsp;<span class="ident" id="4155436">src</span>&nbsp;<span class="ident" id="4155440"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4155443">.</span><span class="ident" id="4155444"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="4155450">)</span>&nbsp;<span class="op" id="4155452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155455">for</span>&nbsp;<span class="ident" id="4155459">k</span><span class="op" id="4155460">,</span>&nbsp;<span class="ident" id="4155462">vs</span>&nbsp;<span class="op" id="4155465">:=</span>&nbsp;<span class="keyword" id="4155468">range</span>&nbsp;<span class="ident" id="4155474"><a href="/gostd/net/http/request.go.html#4155436">src</a></span>&nbsp;<span class="op" id="4155478">{</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155482">for</span>&nbsp;<span class="ident" id="4155486">_</span><span class="op" id="4155487">,</span>&nbsp;<span class="ident" id="4155489">value</span>&nbsp;<span class="op" id="4155495">:=</span>&nbsp;<span class="keyword" id="4155498">range</span>&nbsp;<span class="ident" id="4155504"><a href="/gostd/net/http/request.go.html#4155462">vs</a></span>&nbsp;<span class="op" id="4155507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155512"><a href="/gostd/net/http/request.go.html#4155431">dst</a></span><span class="op" id="4155515">.</span><span class="ident" id="4155516"><a href="/gostd/net/url/url.go.html#3759471">Add</a></span><span class="op" id="4155519">(</span><span class="ident" id="4155520"><a href="/gostd/net/http/request.go.html#4155459">k</a></span><span class="op" id="4155521">,</span>&nbsp;<span class="ident" id="4155523"><a href="/gostd/net/http/request.go.html#4155489">value</a></span><span class="op" id="4155528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155535">}</span><br>
<span class="lineno"></span><span class="op" id="4155537">}</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="keyword" id="4155540">func</span>&nbsp;<span class="ident" id="4155545">parsePostForm</span><span class="op" id="4155558">(</span><span class="ident" id="4155559">r</span>&nbsp;<span class="op" id="4155561">*</span><span class="ident" id="4155562"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4155569">)</span>&nbsp;<span class="op" id="4155571">(</span><span class="ident" id="4155572">vs</span>&nbsp;<span class="ident" id="4155575"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4155578">.</span><span class="ident" id="4155579"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="4155585">,</span>&nbsp;<span class="ident" id="4155587">err</span>&nbsp;<span class="builtintype" id="4155591">error</span><span class="op" id="4155596">)</span>&nbsp;<span class="op" id="4155598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155601">if</span>&nbsp;<span class="ident" id="4155604"><a href="/gostd/net/http/request.go.html#4155559">r</a></span><span class="op" id="4155605">.</span><span class="ident" id="4155606"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="4155611">==</span>&nbsp;<span class="builtintype" id="4155614">nil</span>&nbsp;<span class="op" id="4155618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155622"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4155626">=</span>&nbsp;<span class="ident" id="4155628"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4155634">.</span><span class="ident" id="4155635"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4155638">(</span><span class="string" id="4155639">&#34;missing&nbsp;form&nbsp;body&#34;</span><span class="op" id="4155658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155662">return</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155673">ct</span>&nbsp;<span class="op" id="4155676">:=</span>&nbsp;<span class="ident" id="4155679"><a href="/gostd/net/http/request.go.html#4155559">r</a></span><span class="op" id="4155680">.</span><span class="ident" id="4155681"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4155687">.</span><span class="ident" id="4155688"><a href="/gostd/net/http/header.go.html#4126793">Get</a></span><span class="op" id="4155691">(</span><span class="string" id="4155692">&#34;Content-Type&#34;</span><span class="op" id="4155706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4155709">//&nbsp;RFC&nbsp;2616,&nbsp;section&nbsp;7.2.1&nbsp;-&nbsp;empty&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4155750">//&nbsp;&nbsp;&nbsp;SHOULD&nbsp;be&nbsp;treated&nbsp;as&nbsp;application/octet-stream</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155802">if</span>&nbsp;<span class="ident" id="4155805"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span>&nbsp;<span class="op" id="4155808">==</span>&nbsp;<span class="string" id="4155811">&#34;&#34;</span>&nbsp;<span class="op" id="4155814">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155818"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span>&nbsp;<span class="op" id="4155821">=</span>&nbsp;<span class="string" id="4155823">&#34;application/octet-stream&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4155851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155854"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span><span class="op" id="4155856">,</span>&nbsp;<span class="ident" id="4155858">_</span><span class="op" id="4155859">,</span>&nbsp;<span class="ident" id="4155861"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4155865">=</span>&nbsp;<span class="ident" id="4155867"><a href="/gostd/net/http/request.go.html#4134107">mime</a></span><span class="op" id="4155871">.</span><span class="ident" id="4155872"><a href="/gostd/mime/mediatype.go.html#4297159">ParseMediaType</a></span><span class="op" id="4155886">(</span><span class="ident" id="4155887"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span><span class="op" id="4155889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155892">switch</span>&nbsp;<span class="op" id="4155899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155902">case</span>&nbsp;<span class="ident" id="4155907"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span>&nbsp;<span class="op" id="4155910">==</span>&nbsp;<span class="string" id="4155913">&#34;application/x-www-form-urlencoded&#34;</span><span class="op" id="4155948">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4155952">var</span>&nbsp;<span class="ident" id="4155956">reader</span>&nbsp;<span class="ident" id="4155963"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4155965">.</span><span class="ident" id="4155966"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="op" id="4155973">=</span>&nbsp;<span class="ident" id="4155975"><a href="/gostd/net/http/request.go.html#4155559">r</a></span><span class="op" id="4155976">.</span><span class="ident" id="4155977"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4155984">maxFormSize</span>&nbsp;<span class="op" id="4155996">:=</span>&nbsp;<span class="builtintype" id="4155999">int64</span><span class="op" id="4156004">(</span><span class="num" id="4156005">1</span><span class="op" id="4156006">&lt;&lt;</span><span class="num" id="4156008">63</span>&nbsp;<span class="op" id="4156011">-</span>&nbsp;<span class="num" id="4156013">1</span><span class="op" id="4156014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156018">if</span>&nbsp;<span class="ident" id="4156021">_</span><span class="op" id="4156022">,</span>&nbsp;<span class="ident" id="4156024">ok</span>&nbsp;<span class="op" id="4156027">:=</span>&nbsp;<span class="ident" id="4156030"><a href="/gostd/net/http/request.go.html#4155559">r</a></span><span class="op" id="4156031">.</span><span class="ident" id="4156032"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="4156036">.</span><span class="op" id="4156037">(</span><span class="op" id="4156038">*</span><span class="ident" id="4156039"><a href="/gostd/net/http/request.go.html#4154857">maxBytesReader</a></span><span class="op" id="4156053">)</span><span class="op" id="4156054">;</span>&nbsp;<span class="op" id="4156056">!</span><span class="ident" id="4156057"><a href="/gostd/net/http/request.go.html#4156024">ok</a></span>&nbsp;<span class="op" id="4156060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156065"><a href="/gostd/net/http/request.go.html#4155984">maxFormSize</a></span>&nbsp;<span class="op" id="4156077">=</span>&nbsp;<span class="builtintype" id="4156079">int64</span><span class="op" id="4156084">(</span><span class="num" id="4156085">10</span>&nbsp;<span class="op" id="4156088">&lt;&lt;</span>&nbsp;<span class="num" id="4156091">20</span><span class="op" id="4156093">)</span>&nbsp;<span class="comment" id="4156095">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156125"><a href="/gostd/net/http/request.go.html#4155956">reader</a></span>&nbsp;<span class="op" id="4156132">=</span>&nbsp;<span class="ident" id="4156134"><a href="/gostd/net/http/request.go.html#4134088">io</a></span><span class="op" id="4156136">.</span><span class="ident" id="4156137"><a href="/gostd/io/io.go.html#1431815">LimitReader</a></span><span class="op" id="4156148">(</span><span class="ident" id="4156149"><a href="/gostd/net/http/request.go.html#4155559">r</a></span><span class="op" id="4156150">.</span><span class="ident" id="4156151"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="4156155">,</span>&nbsp;<span class="ident" id="4156157"><a href="/gostd/net/http/request.go.html#4155984">maxFormSize</a></span><span class="op" id="4156168">+</span><span class="num" id="4156169">1</span><span class="op" id="4156170">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156178">b</span><span class="op" id="4156179">,</span>&nbsp;<span class="ident" id="4156181">e</span>&nbsp;<span class="op" id="4156183">:=</span>&nbsp;<span class="ident" id="4156186"><a href="/gostd/net/http/request.go.html#4134094">ioutil</a></span><span class="op" id="4156192">.</span><span class="ident" id="4156193"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="4156200">(</span><span class="ident" id="4156201"><a href="/gostd/net/http/request.go.html#4155956">reader</a></span><span class="op" id="4156207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156211">if</span>&nbsp;<span class="ident" id="4156214"><a href="/gostd/net/http/request.go.html#4156181">e</a></span>&nbsp;<span class="op" id="4156216">!=</span>&nbsp;<span class="builtintype" id="4156219">nil</span>&nbsp;<span class="op" id="4156223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156228">if</span>&nbsp;<span class="ident" id="4156231"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4156235">==</span>&nbsp;<span class="builtintype" id="4156238">nil</span>&nbsp;<span class="op" id="4156242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156248"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4156252">=</span>&nbsp;<span class="ident" id="4156254"><a href="/gostd/net/http/request.go.html#4156181">e</a></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156264">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156276">if</span>&nbsp;<span class="builtintype" id="4156279">int64</span><span class="op" id="4156284">(</span><span class="builtinfunc" id="4156285">len</span><span class="op" id="4156288">(</span><span class="ident" id="4156289"><a href="/gostd/net/http/request.go.html#4156178">b</a></span><span class="op" id="4156290">)</span><span class="op" id="4156291">)</span>&nbsp;<span class="op" id="4156293">&gt;</span>&nbsp;<span class="ident" id="4156295"><a href="/gostd/net/http/request.go.html#4155984">maxFormSize</a></span>&nbsp;<span class="op" id="4156307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156312"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4156316">=</span>&nbsp;<span class="ident" id="4156318"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4156324">.</span><span class="ident" id="4156325"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4156328">(</span><span class="string" id="4156329">&#34;http:&nbsp;POST&nbsp;too&nbsp;large&#34;</span><span class="op" id="4156351">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156356">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156369"><a href="/gostd/net/http/request.go.html#4155572">vs</a></span><span class="op" id="4156371">,</span>&nbsp;<span class="ident" id="4156373"><a href="/gostd/net/http/request.go.html#4156181">e</a></span>&nbsp;<span class="op" id="4156375">=</span>&nbsp;<span class="ident" id="4156377"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4156380">.</span><span class="ident" id="4156381"><a href="/gostd/net/url/url.go.html#3759908">ParseQuery</a></span><span class="op" id="4156391">(</span><span class="builtintype" id="4156392">string</span><span class="op" id="4156398">(</span><span class="ident" id="4156399"><a href="/gostd/net/http/request.go.html#4156178">b</a></span><span class="op" id="4156400">)</span><span class="op" id="4156401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156405">if</span>&nbsp;<span class="ident" id="4156408"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4156412">==</span>&nbsp;<span class="builtintype" id="4156415">nil</span>&nbsp;<span class="op" id="4156419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4156424"><a href="/gostd/net/http/request.go.html#4155587">err</a></span>&nbsp;<span class="op" id="4156428">=</span>&nbsp;<span class="ident" id="4156430"><a href="/gostd/net/http/request.go.html#4156181">e</a></span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156437">case</span>&nbsp;<span class="ident" id="4156442"><a href="/gostd/net/http/request.go.html#4155673">ct</a></span>&nbsp;<span class="op" id="4156445">==</span>&nbsp;<span class="string" id="4156448">&#34;multipart/form-data&#34;</span><span class="op" id="4156469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156473">//&nbsp;handled&nbsp;by&nbsp;ParseMultipartForm&nbsp;(which&nbsp;is&nbsp;calling&nbsp;us,&nbsp;or&nbsp;should&nbsp;be)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156544">//&nbsp;TODO(bradfitz):&nbsp;there&nbsp;are&nbsp;too&nbsp;many&nbsp;possible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156593">//&nbsp;orders&nbsp;to&nbsp;call&nbsp;too&nbsp;many&nbsp;functions&nbsp;here.</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156638">//&nbsp;Clean&nbsp;this&nbsp;up&nbsp;and&nbsp;write&nbsp;more&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156679">//&nbsp;request_test.go&nbsp;contains&nbsp;the&nbsp;start&nbsp;of&nbsp;this,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4156728">//&nbsp;in&nbsp;TestParseMultipartFormOrder&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4156775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4156778">return</span><br>
<span class="lineno">765</span><span class="op" id="4156785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4156788">//&nbsp;ParseForm&nbsp;parses&nbsp;the&nbsp;raw&nbsp;query&nbsp;from&nbsp;the&nbsp;URL&nbsp;and&nbsp;updates&nbsp;r.Form.</span><br>
<span class="lineno"></span><span class="comment" id="4156855">//</span><br>
<span class="lineno"></span><span class="comment" id="4156858">//&nbsp;For&nbsp;POST&nbsp;or&nbsp;PUT&nbsp;requests,&nbsp;it&nbsp;also&nbsp;parses&nbsp;the&nbsp;request&nbsp;body&nbsp;as&nbsp;a&nbsp;form&nbsp;and</span><br>
<span class="lineno">770</span><span class="comment" id="4156933">//&nbsp;put&nbsp;the&nbsp;results&nbsp;into&nbsp;both&nbsp;r.PostForm&nbsp;and&nbsp;r.Form.</span><br>
<span class="lineno"></span><span class="comment" id="4156985">//&nbsp;POST&nbsp;and&nbsp;PUT&nbsp;body&nbsp;parameters&nbsp;take&nbsp;precedence&nbsp;over&nbsp;URL&nbsp;query&nbsp;string&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4157062">//&nbsp;in&nbsp;r.Form.</span><br>
<span class="lineno"></span><span class="comment" id="4157076">//</span><br>
<span class="lineno"></span><span class="comment" id="4157079">//&nbsp;If&nbsp;the&nbsp;request&nbsp;Body&#39;s&nbsp;size&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;limited&nbsp;by&nbsp;MaxBytesReader,</span><br>
<span class="lineno">775</span><span class="comment" id="4157157">//&nbsp;the&nbsp;size&nbsp;is&nbsp;capped&nbsp;at&nbsp;10MB.</span><br>
<span class="lineno"></span><span class="comment" id="4157188">//</span><br>
<span class="lineno"></span><span class="comment" id="4157191">//&nbsp;ParseMultipartForm&nbsp;calls&nbsp;ParseForm&nbsp;automatically.</span><br>
<span class="lineno"></span><span class="comment" id="4157244">//&nbsp;It&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno"></span><span class="keyword" id="4157265">func</span>&nbsp;<span class="op" id="4157270">(</span><span class="ident" id="4157271">r</span>&nbsp;<span class="op" id="4157273">*</span><span class="ident" id="4157274"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4157281">)</span>&nbsp;<span class="ident" id="4157283">ParseForm</span><span class="op" id="4157292">(</span><span class="op" id="4157293">)</span>&nbsp;<span class="builtintype" id="4157295">error</span>&nbsp;<span class="op" id="4157301">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157304">var</span>&nbsp;<span class="ident" id="4157308">err</span>&nbsp;<span class="builtintype" id="4157312">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157319">if</span>&nbsp;<span class="ident" id="4157322"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157323">.</span><span class="ident" id="4157324"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span>&nbsp;<span class="op" id="4157333">==</span>&nbsp;<span class="builtintype" id="4157336">nil</span>&nbsp;<span class="op" id="4157340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157344">if</span>&nbsp;<span class="ident" id="4157347"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157348">.</span><span class="ident" id="4157349"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span>&nbsp;<span class="op" id="4157356">==</span>&nbsp;<span class="string" id="4157359">&#34;POST&#34;</span>&nbsp;<span class="op" id="4157366">||</span>&nbsp;<span class="ident" id="4157369"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157370">.</span><span class="ident" id="4157371"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span>&nbsp;<span class="op" id="4157378">==</span>&nbsp;<span class="string" id="4157381">&#34;PUT&#34;</span>&nbsp;<span class="op" id="4157387">||</span>&nbsp;<span class="ident" id="4157390"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157391">.</span><span class="ident" id="4157392"><a href="/gostd/net/http/request.go.html#4136084">Method</a></span>&nbsp;<span class="op" id="4157399">==</span>&nbsp;<span class="string" id="4157402">&#34;PATCH&#34;</span>&nbsp;<span class="op" id="4157410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157415"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157416">.</span><span class="ident" id="4157417"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="4157425">,</span>&nbsp;<span class="ident" id="4157427"><a href="/gostd/net/http/request.go.html#4157308">err</a></span>&nbsp;<span class="op" id="4157431">=</span>&nbsp;<span class="ident" id="4157433"><a href="/gostd/net/http/request.go.html#4155545">parsePostForm</a></span><span class="op" id="4157446">(</span><span class="ident" id="4157447"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157452">}</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157456">if</span>&nbsp;<span class="ident" id="4157459"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157460">.</span><span class="ident" id="4157461"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span>&nbsp;<span class="op" id="4157470">==</span>&nbsp;<span class="builtintype" id="4157473">nil</span>&nbsp;<span class="op" id="4157477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157482"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157483">.</span><span class="ident" id="4157484"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span>&nbsp;<span class="op" id="4157493">=</span>&nbsp;<span class="builtinfunc" id="4157495">make</span><span class="op" id="4157499">(</span><span class="ident" id="4157500"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4157503">.</span><span class="ident" id="4157504"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="4157510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157520">if</span>&nbsp;<span class="ident" id="4157523"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157524">.</span><span class="ident" id="4157525"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4157530">==</span>&nbsp;<span class="builtintype" id="4157533">nil</span>&nbsp;<span class="op" id="4157537">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157541">if</span>&nbsp;<span class="builtinfunc" id="4157544">len</span><span class="op" id="4157547">(</span><span class="ident" id="4157548"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157549">.</span><span class="ident" id="4157550"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="4157558">)</span>&nbsp;<span class="op" id="4157560">&gt;</span>&nbsp;<span class="num" id="4157562">0</span>&nbsp;<span class="op" id="4157564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157569"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157570">.</span><span class="ident" id="4157571"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4157576">=</span>&nbsp;<span class="builtinfunc" id="4157578">make</span><span class="op" id="4157582">(</span><span class="ident" id="4157583"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4157586">.</span><span class="ident" id="4157587"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="4157593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157598"><a href="/gostd/net/http/request.go.html#4155420">copyValues</a></span><span class="op" id="4157608">(</span><span class="ident" id="4157609"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157610">.</span><span class="ident" id="4157611"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="4157615">,</span>&nbsp;<span class="ident" id="4157617"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157618">.</span><span class="ident" id="4157619"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="4157627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157635">var</span>&nbsp;<span class="ident" id="4157639">newValues</span>&nbsp;<span class="ident" id="4157649"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4157652">.</span><span class="ident" id="4157653"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157662">if</span>&nbsp;<span class="ident" id="4157665"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157666">.</span><span class="ident" id="4157667"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span>&nbsp;<span class="op" id="4157671">!=</span>&nbsp;<span class="builtintype" id="4157674">nil</span>&nbsp;<span class="op" id="4157678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157683">var</span>&nbsp;<span class="ident" id="4157687">e</span>&nbsp;<span class="builtintype" id="4157689">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157698"><a href="/gostd/net/http/request.go.html#4157639">newValues</a></span><span class="op" id="4157707">,</span>&nbsp;<span class="ident" id="4157709"><a href="/gostd/net/http/request.go.html#4157687">e</a></span>&nbsp;<span class="op" id="4157711">=</span>&nbsp;<span class="ident" id="4157713"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4157716">.</span><span class="ident" id="4157717"><a href="/gostd/net/url/url.go.html#3759908">ParseQuery</a></span><span class="op" id="4157727">(</span><span class="ident" id="4157728"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157729">.</span><span class="ident" id="4157730"><a href="/gostd/net/http/request.go.html#4136640">URL</a></span><span class="op" id="4157733">.</span><span class="ident" id="4157734"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span><span class="op" id="4157742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157747">if</span>&nbsp;<span class="ident" id="4157750"><a href="/gostd/net/http/request.go.html#4157308">err</a></span>&nbsp;<span class="op" id="4157754">==</span>&nbsp;<span class="builtintype" id="4157757">nil</span>&nbsp;<span class="op" id="4157761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157767"><a href="/gostd/net/http/request.go.html#4157308">err</a></span>&nbsp;<span class="op" id="4157771">=</span>&nbsp;<span class="ident" id="4157773"><a href="/gostd/net/http/request.go.html#4157687">e</a></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157786">if</span>&nbsp;<span class="ident" id="4157789"><a href="/gostd/net/http/request.go.html#4157639">newValues</a></span>&nbsp;<span class="op" id="4157799">==</span>&nbsp;<span class="builtintype" id="4157802">nil</span>&nbsp;<span class="op" id="4157806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157811"><a href="/gostd/net/http/request.go.html#4157639">newValues</a></span>&nbsp;<span class="op" id="4157821">=</span>&nbsp;<span class="builtinfunc" id="4157823">make</span><span class="op" id="4157827">(</span><span class="ident" id="4157828"><a href="/gostd/net/http/request.go.html#4134150">url</a></span><span class="op" id="4157831">.</span><span class="ident" id="4157832"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="4157838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157842">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157846">if</span>&nbsp;<span class="ident" id="4157849"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157850">.</span><span class="ident" id="4157851"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4157856">==</span>&nbsp;<span class="builtintype" id="4157859">nil</span>&nbsp;<span class="op" id="4157863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157868"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157869">.</span><span class="ident" id="4157870"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4157875">=</span>&nbsp;<span class="ident" id="4157877"><a href="/gostd/net/http/request.go.html#4157639">newValues</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157889">}</span>&nbsp;<span class="keyword" id="4157891">else</span>&nbsp;<span class="op" id="4157896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4157901"><a href="/gostd/net/http/request.go.html#4155420">copyValues</a></span><span class="op" id="4157911">(</span><span class="ident" id="4157912"><a href="/gostd/net/http/request.go.html#4157271">r</a></span><span class="op" id="4157913">.</span><span class="ident" id="4157914"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="4157918">,</span>&nbsp;<span class="ident" id="4157920"><a href="/gostd/net/http/request.go.html#4157639">newValues</a></span><span class="op" id="4157929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157933">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4157936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4157939">return</span>&nbsp;<span class="ident" id="4157946"><a href="/gostd/net/http/request.go.html#4157308">err</a></span><br>
<span class="lineno"></span><span class="op" id="4157950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4157953">//&nbsp;ParseMultipartForm&nbsp;parses&nbsp;a&nbsp;request&nbsp;body&nbsp;as&nbsp;multipart/form-data.</span><br>
<span class="lineno">815</span><span class="comment" id="4158021">//&nbsp;The&nbsp;whole&nbsp;request&nbsp;body&nbsp;is&nbsp;parsed&nbsp;and&nbsp;up&nbsp;to&nbsp;a&nbsp;total&nbsp;of&nbsp;maxMemory&nbsp;bytes&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4158097">//&nbsp;its&nbsp;file&nbsp;parts&nbsp;are&nbsp;stored&nbsp;in&nbsp;memory,&nbsp;with&nbsp;the&nbsp;remainder&nbsp;stored&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="4158166">//&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="4158194">//&nbsp;ParseMultipartForm&nbsp;calls&nbsp;ParseForm&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="comment" id="4158246">//&nbsp;After&nbsp;one&nbsp;call&nbsp;to&nbsp;ParseMultipartForm,&nbsp;subsequent&nbsp;calls&nbsp;have&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">820</span><span class="keyword" id="4158320">func</span>&nbsp;<span class="op" id="4158325">(</span><span class="ident" id="4158326">r</span>&nbsp;<span class="op" id="4158328">*</span><span class="ident" id="4158329"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4158336">)</span>&nbsp;<span class="ident" id="4158338">ParseMultipartForm</span><span class="op" id="4158356">(</span><span class="ident" id="4158357">maxMemory</span>&nbsp;<span class="builtintype" id="4158367">int64</span><span class="op" id="4158372">)</span>&nbsp;<span class="builtintype" id="4158374">error</span>&nbsp;<span class="op" id="4158380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158383">if</span>&nbsp;<span class="ident" id="4158386"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158387">.</span><span class="ident" id="4158388"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4158402">==</span>&nbsp;<span class="ident" id="4158405"><a href="/gostd/net/http/request.go.html#4143940">multipartByReader</a></span>&nbsp;<span class="op" id="4158423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158427">return</span>&nbsp;<span class="ident" id="4158434"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4158440">.</span><span class="ident" id="4158441"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4158444">(</span><span class="string" id="4158445">&#34;http:&nbsp;multipart&nbsp;handled&nbsp;by&nbsp;MultipartReader&#34;</span><span class="op" id="4158489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158495">if</span>&nbsp;<span class="ident" id="4158498"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158499">.</span><span class="ident" id="4158500"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4158505">==</span>&nbsp;<span class="builtintype" id="4158508">nil</span>&nbsp;<span class="op" id="4158512">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158516">err</span>&nbsp;<span class="op" id="4158520">:=</span>&nbsp;<span class="ident" id="4158523"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158524">.</span><span class="ident" id="4158525"><a href="/gostd/net/http/request.go.html#4157283">ParseForm</a></span><span class="op" id="4158534">(</span><span class="op" id="4158535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158539">if</span>&nbsp;<span class="ident" id="4158542"><a href="/gostd/net/http/request.go.html#4158516">err</a></span>&nbsp;<span class="op" id="4158546">!=</span>&nbsp;<span class="builtintype" id="4158549">nil</span>&nbsp;<span class="op" id="4158553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158558">return</span>&nbsp;<span class="ident" id="4158565"><a href="/gostd/net/http/request.go.html#4158516">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158574">}</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158577">if</span>&nbsp;<span class="ident" id="4158580"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158581">.</span><span class="ident" id="4158582"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4158596">!=</span>&nbsp;<span class="builtintype" id="4158599">nil</span>&nbsp;<span class="op" id="4158603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158607">return</span>&nbsp;<span class="builtintype" id="4158614">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158623">mr</span><span class="op" id="4158625">,</span>&nbsp;<span class="ident" id="4158627">err</span>&nbsp;<span class="op" id="4158631">:=</span>&nbsp;<span class="ident" id="4158634"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158635">.</span><span class="ident" id="4158636"><a href="/gostd/net/http/request.go.html#4144658">multipartReader</a></span><span class="op" id="4158651">(</span><span class="op" id="4158652">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158655">if</span>&nbsp;<span class="ident" id="4158658"><a href="/gostd/net/http/request.go.html#4158627">err</a></span>&nbsp;<span class="op" id="4158662">!=</span>&nbsp;<span class="builtintype" id="4158665">nil</span>&nbsp;<span class="op" id="4158669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158673">return</span>&nbsp;<span class="ident" id="4158680"><a href="/gostd/net/http/request.go.html#4158627">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158689">f</span><span class="op" id="4158690">,</span>&nbsp;<span class="ident" id="4158692"><a href="/gostd/net/http/request.go.html#4158627">err</a></span>&nbsp;<span class="op" id="4158696">:=</span>&nbsp;<span class="ident" id="4158699"><a href="/gostd/net/http/request.go.html#4158623">mr</a></span><span class="op" id="4158701">.</span><span class="ident" id="4158702"><a href="/gostd/mime/multipart/formdata.go.html#4307931">ReadForm</a></span><span class="op" id="4158710">(</span><span class="ident" id="4158711"><a href="/gostd/net/http/request.go.html#4158357">maxMemory</a></span><span class="op" id="4158720">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158723">if</span>&nbsp;<span class="ident" id="4158726"><a href="/gostd/net/http/request.go.html#4158627">err</a></span>&nbsp;<span class="op" id="4158730">!=</span>&nbsp;<span class="builtintype" id="4158733">nil</span>&nbsp;<span class="op" id="4158737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158741">return</span>&nbsp;<span class="ident" id="4158748"><a href="/gostd/net/http/request.go.html#4158627">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158756">for</span>&nbsp;<span class="ident" id="4158760">k</span><span class="op" id="4158761">,</span>&nbsp;<span class="ident" id="4158763">v</span>&nbsp;<span class="op" id="4158765">:=</span>&nbsp;<span class="keyword" id="4158768">range</span>&nbsp;<span class="ident" id="4158774"><a href="/gostd/net/http/request.go.html#4158689">f</a></span><span class="op" id="4158775">.</span><span class="ident" id="4158776"><a href="/gostd/mime/multipart/formdata.go.html#4309666">Value</a></span>&nbsp;<span class="op" id="4158782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158786"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158787">.</span><span class="ident" id="4158788"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="4158792">[</span><span class="ident" id="4158793"><a href="/gostd/net/http/request.go.html#4158760">k</a></span><span class="op" id="4158794">]</span>&nbsp;<span class="op" id="4158796">=</span>&nbsp;<span class="builtinfunc" id="4158798">append</span><span class="op" id="4158804">(</span><span class="ident" id="4158805"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158806">.</span><span class="ident" id="4158807"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="4158811">[</span><span class="ident" id="4158812"><a href="/gostd/net/http/request.go.html#4158760">k</a></span><span class="op" id="4158813">]</span><span class="op" id="4158814">,</span>&nbsp;<span class="ident" id="4158816"><a href="/gostd/net/http/request.go.html#4158763">v</a></span><span class="op" id="4158817">...</span><span class="op" id="4158820">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4158823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4158826"><a href="/gostd/net/http/request.go.html#4158326">r</a></span><span class="op" id="4158827">.</span><span class="ident" id="4158828"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4158842">=</span>&nbsp;<span class="ident" id="4158844"><a href="/gostd/net/http/request.go.html#4158689">f</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4158848">return</span>&nbsp;<span class="builtintype" id="4158855">nil</span><br>
<span class="lineno"></span><span class="op" id="4158859">}</span><br>
<span class="lineno">850</span><br>
<span class="lineno"></span><span class="comment" id="4158862">//&nbsp;FormValue&nbsp;returns&nbsp;the&nbsp;first&nbsp;value&nbsp;for&nbsp;the&nbsp;named&nbsp;component&nbsp;of&nbsp;the&nbsp;query.</span><br>
<span class="lineno"></span><span class="comment" id="4158937">//&nbsp;POST&nbsp;and&nbsp;PUT&nbsp;body&nbsp;parameters&nbsp;take&nbsp;precedence&nbsp;over&nbsp;URL&nbsp;query&nbsp;string&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="4159015">//&nbsp;FormValue&nbsp;calls&nbsp;ParseMultipartForm&nbsp;and&nbsp;ParseForm&nbsp;if&nbsp;necessary&nbsp;and&nbsp;ignores</span><br>
<span class="lineno"></span><span class="comment" id="4159092">//&nbsp;any&nbsp;errors&nbsp;returned&nbsp;by&nbsp;these&nbsp;functions.</span><br>
<span class="lineno">855</span><span class="comment" id="4159135">//&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values&nbsp;of&nbsp;the&nbsp;same&nbsp;key,&nbsp;call&nbsp;ParseForm&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4159200">//&nbsp;then&nbsp;inspect&nbsp;Request.Form&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="4159239">func</span>&nbsp;<span class="op" id="4159244">(</span><span class="ident" id="4159245">r</span>&nbsp;<span class="op" id="4159247">*</span><span class="ident" id="4159248"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4159255">)</span>&nbsp;<span class="ident" id="4159257">FormValue</span><span class="op" id="4159266">(</span><span class="ident" id="4159267">key</span>&nbsp;<span class="builtintype" id="4159271">string</span><span class="op" id="4159277">)</span>&nbsp;<span class="builtintype" id="4159279">string</span>&nbsp;<span class="op" id="4159286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159289">if</span>&nbsp;<span class="ident" id="4159292"><a href="/gostd/net/http/request.go.html#4159245">r</a></span><span class="op" id="4159293">.</span><span class="ident" id="4159294"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span>&nbsp;<span class="op" id="4159299">==</span>&nbsp;<span class="builtintype" id="4159302">nil</span>&nbsp;<span class="op" id="4159306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4159310"><a href="/gostd/net/http/request.go.html#4159245">r</a></span><span class="op" id="4159311">.</span><span class="ident" id="4159312"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="4159330">(</span><span class="ident" id="4159331"><a href="/gostd/net/http/request.go.html#4134296">defaultMaxMemory</a></span><span class="op" id="4159347">)</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159353">if</span>&nbsp;<span class="ident" id="4159356">vs</span>&nbsp;<span class="op" id="4159359">:=</span>&nbsp;<span class="ident" id="4159362"><a href="/gostd/net/http/request.go.html#4159245">r</a></span><span class="op" id="4159363">.</span><span class="ident" id="4159364"><a href="/gostd/net/http/request.go.html#4139417">Form</a></span><span class="op" id="4159368">[</span><span class="ident" id="4159369"><a href="/gostd/net/http/request.go.html#4159267">key</a></span><span class="op" id="4159372">]</span><span class="op" id="4159373">;</span>&nbsp;<span class="builtinfunc" id="4159375">len</span><span class="op" id="4159378">(</span><span class="ident" id="4159379"><a href="/gostd/net/http/request.go.html#4159356">vs</a></span><span class="op" id="4159381">)</span>&nbsp;<span class="op" id="4159383">&gt;</span>&nbsp;<span class="num" id="4159385">0</span>&nbsp;<span class="op" id="4159387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159391">return</span>&nbsp;<span class="ident" id="4159398"><a href="/gostd/net/http/request.go.html#4159356">vs</a></span><span class="op" id="4159400">[</span><span class="num" id="4159401">0</span><span class="op" id="4159402">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159408">return</span>&nbsp;<span class="string" id="4159415">&#34;&#34;</span><br>
<span class="lineno">865</span><span class="op" id="4159418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4159421">//&nbsp;PostFormValue&nbsp;returns&nbsp;the&nbsp;first&nbsp;value&nbsp;for&nbsp;the&nbsp;named&nbsp;component&nbsp;of&nbsp;the&nbsp;POST</span><br>
<span class="lineno"></span><span class="comment" id="4159498">//&nbsp;or&nbsp;PUT&nbsp;request&nbsp;body.&nbsp;URL&nbsp;query&nbsp;parameters&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="4159556">//&nbsp;PostFormValue&nbsp;calls&nbsp;ParseMultipartForm&nbsp;and&nbsp;ParseForm&nbsp;if&nbsp;necessary&nbsp;and&nbsp;ignores</span><br>
<span class="lineno">870</span><span class="comment" id="4159637">//&nbsp;any&nbsp;errors&nbsp;returned&nbsp;by&nbsp;these&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="4159680">func</span>&nbsp;<span class="op" id="4159685">(</span><span class="ident" id="4159686">r</span>&nbsp;<span class="op" id="4159688">*</span><span class="ident" id="4159689"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4159696">)</span>&nbsp;<span class="ident" id="4159698">PostFormValue</span><span class="op" id="4159711">(</span><span class="ident" id="4159712">key</span>&nbsp;<span class="builtintype" id="4159716">string</span><span class="op" id="4159722">)</span>&nbsp;<span class="builtintype" id="4159724">string</span>&nbsp;<span class="op" id="4159731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159734">if</span>&nbsp;<span class="ident" id="4159737"><a href="/gostd/net/http/request.go.html#4159686">r</a></span><span class="op" id="4159738">.</span><span class="ident" id="4159739"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span>&nbsp;<span class="op" id="4159748">==</span>&nbsp;<span class="builtintype" id="4159751">nil</span>&nbsp;<span class="op" id="4159755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4159759"><a href="/gostd/net/http/request.go.html#4159686">r</a></span><span class="op" id="4159760">.</span><span class="ident" id="4159761"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="4159779">(</span><span class="ident" id="4159780"><a href="/gostd/net/http/request.go.html#4134296">defaultMaxMemory</a></span><span class="op" id="4159796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159799">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159802">if</span>&nbsp;<span class="ident" id="4159805">vs</span>&nbsp;<span class="op" id="4159808">:=</span>&nbsp;<span class="ident" id="4159811"><a href="/gostd/net/http/request.go.html#4159686">r</a></span><span class="op" id="4159812">.</span><span class="ident" id="4159813"><a href="/gostd/net/http/request.go.html#4139636">PostForm</a></span><span class="op" id="4159821">[</span><span class="ident" id="4159822"><a href="/gostd/net/http/request.go.html#4159712">key</a></span><span class="op" id="4159825">]</span><span class="op" id="4159826">;</span>&nbsp;<span class="builtinfunc" id="4159828">len</span><span class="op" id="4159831">(</span><span class="ident" id="4159832"><a href="/gostd/net/http/request.go.html#4159805">vs</a></span><span class="op" id="4159834">)</span>&nbsp;<span class="op" id="4159836">&gt;</span>&nbsp;<span class="num" id="4159838">0</span>&nbsp;<span class="op" id="4159840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159844">return</span>&nbsp;<span class="ident" id="4159851"><a href="/gostd/net/http/request.go.html#4159805">vs</a></span><span class="op" id="4159853">[</span><span class="num" id="4159854">0</span><span class="op" id="4159855">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4159858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4159861">return</span>&nbsp;<span class="string" id="4159868">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4159871">}</span><br>
<span class="lineno">880</span><br>
<span class="lineno"></span><span class="comment" id="4159874">//&nbsp;FormFile&nbsp;returns&nbsp;the&nbsp;first&nbsp;file&nbsp;for&nbsp;the&nbsp;provided&nbsp;form&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="4159936">//&nbsp;FormFile&nbsp;calls&nbsp;ParseMultipartForm&nbsp;and&nbsp;ParseForm&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="4160001">func</span>&nbsp;<span class="op" id="4160006">(</span><span class="ident" id="4160007">r</span>&nbsp;<span class="op" id="4160009">*</span><span class="ident" id="4160010"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4160017">)</span>&nbsp;<span class="ident" id="4160019">FormFile</span><span class="op" id="4160027">(</span><span class="ident" id="4160028">key</span>&nbsp;<span class="builtintype" id="4160032">string</span><span class="op" id="4160038">)</span>&nbsp;<span class="op" id="4160040">(</span><span class="ident" id="4160041"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4160050">.</span><span class="ident" id="4160051"><a href="/gostd/mime/multipart/formdata.go.html#4310690">File</a></span><span class="op" id="4160055">,</span>&nbsp;<span class="op" id="4160057">*</span><span class="ident" id="4160058"><a href="/gostd/net/http/request.go.html#4134115">multipart</a></span><span class="op" id="4160067">.</span><span class="ident" id="4160068"><a href="/gostd/mime/multipart/formdata.go.html#4310100">FileHeader</a></span><span class="op" id="4160078">,</span>&nbsp;<span class="builtintype" id="4160080">error</span><span class="op" id="4160085">)</span>&nbsp;<span class="op" id="4160087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160090">if</span>&nbsp;<span class="ident" id="4160093"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160094">.</span><span class="ident" id="4160095"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4160109">==</span>&nbsp;<span class="ident" id="4160112"><a href="/gostd/net/http/request.go.html#4143940">multipartByReader</a></span>&nbsp;<span class="op" id="4160130">{</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160134">return</span>&nbsp;<span class="builtintype" id="4160141">nil</span><span class="op" id="4160144">,</span>&nbsp;<span class="builtintype" id="4160146">nil</span><span class="op" id="4160149">,</span>&nbsp;<span class="ident" id="4160151"><a href="/gostd/net/http/request.go.html#4134071">errors</a></span><span class="op" id="4160157">.</span><span class="ident" id="4160158"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4160161">(</span><span class="string" id="4160162">&#34;http:&nbsp;multipart&nbsp;handled&nbsp;by&nbsp;MultipartReader&#34;</span><span class="op" id="4160206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160212">if</span>&nbsp;<span class="ident" id="4160215"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160216">.</span><span class="ident" id="4160217"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4160231">==</span>&nbsp;<span class="builtintype" id="4160234">nil</span>&nbsp;<span class="op" id="4160238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4160242">err</span>&nbsp;<span class="op" id="4160246">:=</span>&nbsp;<span class="ident" id="4160249"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160250">.</span><span class="ident" id="4160251"><a href="/gostd/net/http/request.go.html#4158338">ParseMultipartForm</a></span><span class="op" id="4160269">(</span><span class="ident" id="4160270"><a href="/gostd/net/http/request.go.html#4134296">defaultMaxMemory</a></span><span class="op" id="4160286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160290">if</span>&nbsp;<span class="ident" id="4160293"><a href="/gostd/net/http/request.go.html#4160242">err</a></span>&nbsp;<span class="op" id="4160297">!=</span>&nbsp;<span class="builtintype" id="4160300">nil</span>&nbsp;<span class="op" id="4160304">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160309">return</span>&nbsp;<span class="builtintype" id="4160316">nil</span><span class="op" id="4160319">,</span>&nbsp;<span class="builtintype" id="4160321">nil</span><span class="op" id="4160324">,</span>&nbsp;<span class="ident" id="4160326"><a href="/gostd/net/http/request.go.html#4160242">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160338">if</span>&nbsp;<span class="ident" id="4160341"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160342">.</span><span class="ident" id="4160343"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span>&nbsp;<span class="op" id="4160357">!=</span>&nbsp;<span class="builtintype" id="4160360">nil</span>&nbsp;<span class="op" id="4160364">&amp;&amp;</span>&nbsp;<span class="ident" id="4160367"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160368">.</span><span class="ident" id="4160369"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span><span class="op" id="4160382">.</span><span class="ident" id="4160383"><a href="/gostd/mime/multipart/formdata.go.html#4309693">File</a></span>&nbsp;<span class="op" id="4160388">!=</span>&nbsp;<span class="builtintype" id="4160391">nil</span>&nbsp;<span class="op" id="4160395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160399">if</span>&nbsp;<span class="ident" id="4160402">fhs</span>&nbsp;<span class="op" id="4160406">:=</span>&nbsp;<span class="ident" id="4160409"><a href="/gostd/net/http/request.go.html#4160007">r</a></span><span class="op" id="4160410">.</span><span class="ident" id="4160411"><a href="/gostd/net/http/request.go.html#4139864">MultipartForm</a></span><span class="op" id="4160424">.</span><span class="ident" id="4160425"><a href="/gostd/mime/multipart/formdata.go.html#4309693">File</a></span><span class="op" id="4160429">[</span><span class="ident" id="4160430"><a href="/gostd/net/http/request.go.html#4160028">key</a></span><span class="op" id="4160433">]</span><span class="op" id="4160434">;</span>&nbsp;<span class="builtinfunc" id="4160436">len</span><span class="op" id="4160439">(</span><span class="ident" id="4160440"><a href="/gostd/net/http/request.go.html#4160402">fhs</a></span><span class="op" id="4160443">)</span>&nbsp;<span class="op" id="4160445">&gt;</span>&nbsp;<span class="num" id="4160447">0</span>&nbsp;<span class="op" id="4160449">{</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4160454">f</span><span class="op" id="4160455">,</span>&nbsp;<span class="ident" id="4160457">err</span>&nbsp;<span class="op" id="4160461">:=</span>&nbsp;<span class="ident" id="4160464"><a href="/gostd/net/http/request.go.html#4160402">fhs</a></span><span class="op" id="4160467">[</span><span class="num" id="4160468">0</span><span class="op" id="4160469">]</span><span class="op" id="4160470">.</span><span class="ident" id="4160471"><a href="/gostd/mime/multipart/formdata.go.html#4310286">Open</a></span><span class="op" id="4160475">(</span><span class="op" id="4160476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160481">return</span>&nbsp;<span class="ident" id="4160488"><a href="/gostd/net/http/request.go.html#4160454">f</a></span><span class="op" id="4160489">,</span>&nbsp;<span class="ident" id="4160491"><a href="/gostd/net/http/request.go.html#4160402">fhs</a></span><span class="op" id="4160494">[</span><span class="num" id="4160495">0</span><span class="op" id="4160496">]</span><span class="op" id="4160497">,</span>&nbsp;<span class="ident" id="4160499"><a href="/gostd/net/http/request.go.html#4160457">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160511">return</span>&nbsp;<span class="builtintype" id="4160518">nil</span><span class="op" id="4160521">,</span>&nbsp;<span class="builtintype" id="4160523">nil</span><span class="op" id="4160526">,</span>&nbsp;<span class="ident" id="4160528"><a href="/gostd/net/http/request.go.html#4134477">ErrMissingFile</a></span><br>
<span class="lineno">900</span><span class="op" id="4160543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4160546">func</span>&nbsp;<span class="op" id="4160551">(</span><span class="ident" id="4160552">r</span>&nbsp;<span class="op" id="4160554">*</span><span class="ident" id="4160555"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4160562">)</span>&nbsp;<span class="ident" id="4160564">expectsContinue</span><span class="op" id="4160579">(</span><span class="op" id="4160580">)</span>&nbsp;<span class="builtintype" id="4160582">bool</span>&nbsp;<span class="op" id="4160587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160590">return</span>&nbsp;<span class="ident" id="4160597"><a href="/gostd/net/http/header.go.html#4130492">hasToken</a></span><span class="op" id="4160605">(</span><span class="ident" id="4160606"><a href="/gostd/net/http/request.go.html#4160552">r</a></span><span class="op" id="4160607">.</span><span class="ident" id="4160608"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4160614">.</span><span class="ident" id="4160615"><a href="/gostd/net/http/header.go.html#4126950">get</a></span><span class="op" id="4160618">(</span><span class="string" id="4160619">&#34;Expect&#34;</span><span class="op" id="4160627">)</span><span class="op" id="4160628">,</span>&nbsp;<span class="string" id="4160630">&#34;100-continue&#34;</span><span class="op" id="4160644">)</span><br>
<span class="lineno"></span><span class="op" id="4160646">}</span><br>
<span class="lineno">905</span><br>
<span class="lineno"></span><span class="keyword" id="4160649">func</span>&nbsp;<span class="op" id="4160654">(</span><span class="ident" id="4160655">r</span>&nbsp;<span class="op" id="4160657">*</span><span class="ident" id="4160658"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4160665">)</span>&nbsp;<span class="ident" id="4160667">wantsHttp10KeepAlive</span><span class="op" id="4160687">(</span><span class="op" id="4160688">)</span>&nbsp;<span class="builtintype" id="4160690">bool</span>&nbsp;<span class="op" id="4160695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160698">if</span>&nbsp;<span class="ident" id="4160701"><a href="/gostd/net/http/request.go.html#4160655">r</a></span><span class="op" id="4160702">.</span><span class="ident" id="4160703"><a href="/gostd/net/http/request.go.html#4136777">ProtoMajor</a></span>&nbsp;<span class="op" id="4160714">!=</span>&nbsp;<span class="num" id="4160717">1</span>&nbsp;<span class="op" id="4160719">||</span>&nbsp;<span class="ident" id="4160722"><a href="/gostd/net/http/request.go.html#4160655">r</a></span><span class="op" id="4160723">.</span><span class="ident" id="4160724"><a href="/gostd/net/http/request.go.html#4136801">ProtoMinor</a></span>&nbsp;<span class="op" id="4160735">!=</span>&nbsp;<span class="num" id="4160738">0</span>&nbsp;<span class="op" id="4160740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160744">return</span>&nbsp;<span class="builtintype" id="4160751">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160758">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160761">return</span>&nbsp;<span class="ident" id="4160768"><a href="/gostd/net/http/header.go.html#4130492">hasToken</a></span><span class="op" id="4160776">(</span><span class="ident" id="4160777"><a href="/gostd/net/http/request.go.html#4160655">r</a></span><span class="op" id="4160778">.</span><span class="ident" id="4160779"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4160785">.</span><span class="ident" id="4160786"><a href="/gostd/net/http/header.go.html#4126950">get</a></span><span class="op" id="4160789">(</span><span class="string" id="4160790">&#34;Connection&#34;</span><span class="op" id="4160802">)</span><span class="op" id="4160803">,</span>&nbsp;<span class="string" id="4160805">&#34;keep-alive&#34;</span><span class="op" id="4160817">)</span><br>
<span class="lineno"></span><span class="op" id="4160819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4160822">func</span>&nbsp;<span class="op" id="4160827">(</span><span class="ident" id="4160828">r</span>&nbsp;<span class="op" id="4160830">*</span><span class="ident" id="4160831"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4160838">)</span>&nbsp;<span class="ident" id="4160840">wantsClose</span><span class="op" id="4160850">(</span><span class="op" id="4160851">)</span>&nbsp;<span class="builtintype" id="4160853">bool</span>&nbsp;<span class="op" id="4160858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160861">return</span>&nbsp;<span class="ident" id="4160868"><a href="/gostd/net/http/header.go.html#4130492">hasToken</a></span><span class="op" id="4160876">(</span><span class="ident" id="4160877"><a href="/gostd/net/http/request.go.html#4160828">r</a></span><span class="op" id="4160878">.</span><span class="ident" id="4160879"><a href="/gostd/net/http/request.go.html#4137563">Header</a></span><span class="op" id="4160885">.</span><span class="ident" id="4160886"><a href="/gostd/net/http/header.go.html#4126950">get</a></span><span class="op" id="4160889">(</span><span class="string" id="4160890">&#34;Connection&#34;</span><span class="op" id="4160902">)</span><span class="op" id="4160903">,</span>&nbsp;<span class="string" id="4160905">&#34;close&#34;</span><span class="op" id="4160912">)</span><br>
<span class="lineno">915</span><span class="op" id="4160914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4160917">func</span>&nbsp;<span class="op" id="4160922">(</span><span class="ident" id="4160923">r</span>&nbsp;<span class="op" id="4160925">*</span><span class="ident" id="4160926"><a href="/gostd/net/http/request.go.html#4135954">Request</a></span><span class="op" id="4160933">)</span>&nbsp;<span class="ident" id="4160935">closeBody</span><span class="op" id="4160944">(</span><span class="op" id="4160945">)</span>&nbsp;<span class="op" id="4160947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4160950">if</span>&nbsp;<span class="ident" id="4160953"><a href="/gostd/net/http/request.go.html#4160923">r</a></span><span class="op" id="4160954">.</span><span class="ident" id="4160955"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span>&nbsp;<span class="op" id="4160960">!=</span>&nbsp;<span class="builtintype" id="4160963">nil</span>&nbsp;<span class="op" id="4160967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4160971"><a href="/gostd/net/http/request.go.html#4160923">r</a></span><span class="op" id="4160972">.</span><span class="ident" id="4160973"><a href="/gostd/net/http/request.go.html#4137997">Body</a></span><span class="op" id="4160977">.</span><span class="ident" id="4160978"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="4160983">(</span><span class="op" id="4160984">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4160987">}</span><br>
<span class="lineno"></span><span class="op" id="4160989">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
