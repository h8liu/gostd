<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6072062">package</span>&nbsp;<span class="ident" id="6072070">lex8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6072076">import</span>&nbsp;<span class="op" id="6072083">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6072086">&#34;bufio&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6072095">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6072100">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6072103">//&nbsp;RuneScanner&nbsp;is&nbsp;a&nbsp;rune&nbsp;scanner&nbsp;that&nbsp;scans&nbsp;runes&nbsp;from&nbsp;a&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="6072166">//&nbsp;and&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;tracks&nbsp;the&nbsp;reading&nbsp;position.</span><br>
<span class="lineno">10</span><span class="keyword" id="6072219">type</span>&nbsp;<span class="ident" id="6072224">RuneScanner</span>&nbsp;<span class="keyword" id="6072236">struct</span>&nbsp;<span class="op" id="6072243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072246">file</span>&nbsp;<span class="builtintype" id="6072251">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072259">line</span>&nbsp;<span class="builtintype" id="6072264">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072270">rc</span>&nbsp;<span class="ident" id="6072273"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072095">io</a></span><span class="op" id="6072275">.</span><span class="ident" id="6072276">ReadCloser</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072288">r</span>&nbsp;&nbsp;<span class="op" id="6072291">*</span><span class="ident" id="6072292"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072086">bufio</a></span><span class="op" id="6072297">.</span><span class="ident" id="6072298">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072307">Err</span>&nbsp;&nbsp;<span class="builtintype" id="6072312">error</span>&nbsp;<span class="comment" id="6072318">//&nbsp;any&nbsp;error&nbsp;encountered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072344">Rune</span>&nbsp;<span class="builtintype" id="6072349">rune</span>&nbsp;&nbsp;<span class="comment" id="6072355">//&nbsp;the&nbsp;rune&nbsp;just&nbsp;read</span><br>
<span class="lineno"></span><span class="op" id="6072377">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="6072380">//&nbsp;NewRuneScanner&nbsp;creates&nbsp;a&nbsp;scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="6072417">func</span>&nbsp;<span class="ident" id="6072422">NewRuneScanner</span><span class="op" id="6072436">(</span><span class="ident" id="6072437">file</span>&nbsp;<span class="builtintype" id="6072442">string</span><span class="op" id="6072448">,</span>&nbsp;<span class="ident" id="6072450">rc</span>&nbsp;<span class="ident" id="6072453"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072095">io</a></span><span class="op" id="6072455">.</span><span class="ident" id="6072456">ReadCloser</span><span class="op" id="6072466">)</span>&nbsp;<span class="op" id="6072468">*</span><span class="ident" id="6072469"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072224">RuneScanner</a></span>&nbsp;<span class="op" id="6072481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072484">ret</span>&nbsp;<span class="op" id="6072488">:=</span>&nbsp;<span class="builtinfunc" id="6072491">new</span><span class="op" id="6072494">(</span><span class="ident" id="6072495"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072224">RuneScanner</a></span><span class="op" id="6072506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072509"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072484">ret</a></span><span class="op" id="6072512">.</span><span class="ident" id="6072513">file</span>&nbsp;<span class="op" id="6072518">=</span>&nbsp;<span class="ident" id="6072520"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072437">file</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072526"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072484">ret</a></span><span class="op" id="6072529">.</span><span class="ident" id="6072530">rc</span>&nbsp;<span class="op" id="6072533">=</span>&nbsp;<span class="ident" id="6072535"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072450">rc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072539"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072484">ret</a></span><span class="op" id="6072542">.</span><span class="ident" id="6072543">r</span>&nbsp;<span class="op" id="6072545">=</span>&nbsp;<span class="ident" id="6072547"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072086">bufio</a></span><span class="op" id="6072552">.</span><span class="ident" id="6072553">NewReader</span><span class="op" id="6072562">(</span><span class="ident" id="6072563"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072450">rc</a></span><span class="op" id="6072565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072568"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072484">ret</a></span><span class="op" id="6072571">.</span><span class="ident" id="6072572">line</span>&nbsp;<span class="op" id="6072577">=</span>&nbsp;<span class="num" id="6072579">1</span>&nbsp;<span class="comment" id="6072581">//&nbsp;natural&nbsp;counting</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072603">return</span>&nbsp;<span class="ident" id="6072610"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072484">ret</a></span><br>
<span class="lineno">30</span><span class="op" id="6072614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6072617">//&nbsp;Scan&nbsp;reads&nbsp;in&nbsp;the&nbsp;next&nbsp;rune&nbsp;to&nbsp;s.Rune.</span><br>
<span class="lineno"></span><span class="comment" id="6072659">//&nbsp;It&nbsp;closes&nbsp;the&nbsp;reader&nbsp;automatically&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="6072729">//&nbsp;or&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">35</span><span class="keyword" id="6072757">func</span>&nbsp;<span class="op" id="6072762">(</span><span class="ident" id="6072763">s</span>&nbsp;<span class="op" id="6072765">*</span><span class="ident" id="6072766"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072224">RuneScanner</a></span><span class="op" id="6072777">)</span>&nbsp;<span class="ident" id="6072779">Scan</span><span class="op" id="6072783">(</span><span class="op" id="6072784">)</span>&nbsp;<span class="builtintype" id="6072786">bool</span>&nbsp;<span class="op" id="6072791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072794">wasEndline</span>&nbsp;<span class="op" id="6072805">:=</span>&nbsp;<span class="ident" id="6072808"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072809">.</span><span class="ident" id="6072810">Rune</span>&nbsp;<span class="op" id="6072815">==</span>&nbsp;<span class="string" id="6072818">&#39;\n&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072825"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072826">.</span><span class="ident" id="6072827">Rune</span><span class="op" id="6072831">,</span>&nbsp;<span class="ident" id="6072833">_</span><span class="op" id="6072834">,</span>&nbsp;<span class="ident" id="6072836"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072837">.</span><span class="ident" id="6072838">Err</span>&nbsp;<span class="op" id="6072842">=</span>&nbsp;<span class="ident" id="6072844"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072845">.</span><span class="ident" id="6072846">r</span><span class="op" id="6072847">.</span><span class="ident" id="6072848">ReadRune</span><span class="op" id="6072856">(</span><span class="op" id="6072857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072861">if</span>&nbsp;<span class="ident" id="6072864"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072865">.</span><span class="ident" id="6072866">Err</span>&nbsp;<span class="op" id="6072870">!=</span>&nbsp;<span class="ident" id="6072873">nil</span>&nbsp;<span class="op" id="6072877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072881">closeErr</span>&nbsp;<span class="op" id="6072890">:=</span>&nbsp;<span class="ident" id="6072893"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072894">.</span><span class="ident" id="6072895">rc</span><span class="op" id="6072897">.</span><span class="ident" id="6072898">Close</span><span class="op" id="6072903">(</span><span class="op" id="6072904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072908">if</span>&nbsp;<span class="ident" id="6072911"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072912">.</span><span class="ident" id="6072913">Err</span>&nbsp;<span class="op" id="6072917">==</span>&nbsp;<span class="ident" id="6072920"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072095">io</a></span><span class="op" id="6072922">.</span><span class="ident" id="6072923">EOF</span>&nbsp;<span class="op" id="6072927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072932"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072933">.</span><span class="ident" id="6072934">Err</span>&nbsp;<span class="op" id="6072938">=</span>&nbsp;<span class="ident" id="6072940"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072881">closeErr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072951">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072955">return</span>&nbsp;<span class="builtintype" id="6072962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072973">if</span>&nbsp;<span class="ident" id="6072976"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072794">wasEndline</a></span>&nbsp;<span class="op" id="6072987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072991"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072763">s</a></span><span class="op" id="6072992">.</span><span class="ident" id="6072993">line</span><span class="op" id="6072997">++</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073005">return</span>&nbsp;<span class="builtintype" id="6073012">true</span><br>
<span class="lineno"></span><span class="op" id="6073017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="6073020">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6073069">func</span>&nbsp;<span class="op" id="6073074">(</span><span class="ident" id="6073075">s</span>&nbsp;<span class="op" id="6073077">*</span><span class="ident" id="6073078"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072224">RuneScanner</a></span><span class="op" id="6073089">)</span>&nbsp;<span class="ident" id="6073091">Pos</span><span class="op" id="6073094">(</span><span class="op" id="6073095">)</span>&nbsp;<span class="op" id="6073097">*</span><span class="ident" id="6073098"><a href="/lonnie.io/e8vm/lex8/pos.go.html#6072023">Pos</a></span>&nbsp;<span class="op" id="6073102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073105">return</span>&nbsp;<span class="op" id="6073112">&amp;</span><span class="ident" id="6073113"><a href="/lonnie.io/e8vm/lex8/pos.go.html#6072023">Pos</a></span><span class="op" id="6073116">{</span><span class="ident" id="6073117"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6073075">s</a></span><span class="op" id="6073118">.</span><span class="ident" id="6073119">file</span><span class="op" id="6073123">,</span>&nbsp;<span class="ident" id="6073125"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6073075">s</a></span><span class="op" id="6073126">.</span><span class="ident" id="6073127">line</span><span class="op" id="6073131">}</span><br>
<span class="lineno"></span><span class="op" id="6073133">}</span>
</div>
</body>
</html>
