<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2371321">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2371376">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2371430">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2371481">package</span>&nbsp;<span class="ident" id="2371489">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2371495">func</span>&nbsp;<span class="ident" id="2371500">isOddInt</span><span class="op" id="2371508">(</span><span class="ident" id="2371509">x</span>&nbsp;<span class="builtintype" id="2371511">float64</span><span class="op" id="2371518">)</span>&nbsp;<span class="builtintype" id="2371520">bool</span>&nbsp;<span class="op" id="2371525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2371528">xi</span><span class="op" id="2371530">,</span>&nbsp;<span class="ident" id="2371532">xf</span>&nbsp;<span class="op" id="2371535">:=</span>&nbsp;<span class="ident" id="2371538">Modf</span><span class="op" id="2371542">(</span><span class="ident" id="2371543">x</span><span class="op" id="2371544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2371547">return</span>&nbsp;<span class="ident" id="2371554">xf</span>&nbsp;<span class="op" id="2371557">==</span>&nbsp;<span class="num" id="2371560">0</span>&nbsp;<span class="op" id="2371562">&amp;&amp;</span>&nbsp;<span class="ident" id="2371565">int64</span><span class="op" id="2371570">(</span><span class="ident" id="2371571">xi</span><span class="op" id="2371573">)</span><span class="op" id="2371574">&amp;</span><span class="num" id="2371575">1</span>&nbsp;<span class="op" id="2371577">==</span>&nbsp;<span class="num" id="2371580">1</span><br>
<span class="lineno">10</span><span class="op" id="2371582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2371585">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2371653">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2371719">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2371769">//</span><br>
<span class="lineno"></span><span class="comment" id="2371772">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2371805">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2371834">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2371861">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2371888">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2371909">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2371930">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2371978">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2372003">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2372026">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2372088">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2372134">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2372194">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2372216">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2372251">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2372284">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2372317">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2372352">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2372385">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2372416">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2372446">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2372507">func</span>&nbsp;<span class="ident" id="2372512">Pow</span><span class="op" id="2372515">(</span><span class="ident" id="2372516">x</span><span class="op" id="2372517">,</span>&nbsp;<span class="ident" id="2372519">y</span>&nbsp;<span class="builtintype" id="2372521">float64</span><span class="op" id="2372528">)</span>&nbsp;<span class="builtintype" id="2372530">float64</span>&nbsp;<span class="op" id="2372538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372541">switch</span>&nbsp;<span class="op" id="2372548">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372551">case</span>&nbsp;<span class="ident" id="2372556">y</span>&nbsp;<span class="op" id="2372558">==</span>&nbsp;<span class="num" id="2372561">0</span>&nbsp;<span class="op" id="2372563">||</span>&nbsp;<span class="ident" id="2372566">x</span>&nbsp;<span class="op" id="2372568">==</span>&nbsp;<span class="num" id="2372571">1</span><span class="op" id="2372572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372576">return</span>&nbsp;<span class="num" id="2372583">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372586">case</span>&nbsp;<span class="ident" id="2372591">y</span>&nbsp;<span class="op" id="2372593">==</span>&nbsp;<span class="num" id="2372596">1</span><span class="op" id="2372597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372601">return</span>&nbsp;<span class="ident" id="2372608">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372611">case</span>&nbsp;<span class="ident" id="2372616">y</span>&nbsp;<span class="op" id="2372618">==</span>&nbsp;<span class="num" id="2372621">0.5</span><span class="op" id="2372624">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372628">return</span>&nbsp;<span class="ident" id="2372635">Sqrt</span><span class="op" id="2372639">(</span><span class="ident" id="2372640">x</span><span class="op" id="2372641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372644">case</span>&nbsp;<span class="ident" id="2372649">y</span>&nbsp;<span class="op" id="2372651">==</span>&nbsp;<span class="op" id="2372654">-</span><span class="num" id="2372655">0.5</span><span class="op" id="2372658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372662">return</span>&nbsp;<span class="num" id="2372669">1</span>&nbsp;<span class="op" id="2372671">/</span>&nbsp;<span class="ident" id="2372673">Sqrt</span><span class="op" id="2372677">(</span><span class="ident" id="2372678">x</span><span class="op" id="2372679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372682">case</span>&nbsp;<span class="ident" id="2372687">IsNaN</span><span class="op" id="2372692">(</span><span class="ident" id="2372693">x</span><span class="op" id="2372694">)</span>&nbsp;<span class="op" id="2372696">||</span>&nbsp;<span class="ident" id="2372699">IsNaN</span><span class="op" id="2372704">(</span><span class="ident" id="2372705">y</span><span class="op" id="2372706">)</span><span class="op" id="2372707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372711">return</span>&nbsp;<span class="ident" id="2372718">NaN</span><span class="op" id="2372721">(</span><span class="op" id="2372722">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372725">case</span>&nbsp;<span class="ident" id="2372730">x</span>&nbsp;<span class="op" id="2372732">==</span>&nbsp;<span class="num" id="2372735">0</span><span class="op" id="2372736">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372740">switch</span>&nbsp;<span class="op" id="2372747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372751">case</span>&nbsp;<span class="ident" id="2372756">y</span>&nbsp;<span class="op" id="2372758">&lt;</span>&nbsp;<span class="num" id="2372760">0</span><span class="op" id="2372761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372766">if</span>&nbsp;<span class="ident" id="2372769">isOddInt</span><span class="op" id="2372777">(</span><span class="ident" id="2372778">y</span><span class="op" id="2372779">)</span>&nbsp;<span class="op" id="2372781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372787">return</span>&nbsp;<span class="ident" id="2372794">Copysign</span><span class="op" id="2372802">(</span><span class="ident" id="2372803">Inf</span><span class="op" id="2372806">(</span><span class="num" id="2372807">1</span><span class="op" id="2372808">)</span><span class="op" id="2372809">,</span>&nbsp;<span class="ident" id="2372811">x</span><span class="op" id="2372812">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2372817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372822">return</span>&nbsp;<span class="ident" id="2372829">Inf</span><span class="op" id="2372832">(</span><span class="num" id="2372833">1</span><span class="op" id="2372834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372838">case</span>&nbsp;<span class="ident" id="2372843">y</span>&nbsp;<span class="op" id="2372845">&gt;</span>&nbsp;<span class="num" id="2372847">0</span><span class="op" id="2372848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372853">if</span>&nbsp;<span class="ident" id="2372856">isOddInt</span><span class="op" id="2372864">(</span><span class="ident" id="2372865">y</span><span class="op" id="2372866">)</span>&nbsp;<span class="op" id="2372868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372874">return</span>&nbsp;<span class="ident" id="2372881">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2372886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372891">return</span>&nbsp;<span class="num" id="2372898">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2372902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372905">case</span>&nbsp;<span class="ident" id="2372910">IsInf</span><span class="op" id="2372915">(</span><span class="ident" id="2372916">y</span><span class="op" id="2372917">,</span>&nbsp;<span class="num" id="2372919">0</span><span class="op" id="2372920">)</span><span class="op" id="2372921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372925">switch</span>&nbsp;<span class="op" id="2372932">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372936">case</span>&nbsp;<span class="ident" id="2372941">x</span>&nbsp;<span class="op" id="2372943">==</span>&nbsp;<span class="op" id="2372946">-</span><span class="num" id="2372947">1</span><span class="op" id="2372948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372953">return</span>&nbsp;<span class="num" id="2372960">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2372964">case</span>&nbsp;<span class="op" id="2372969">(</span><span class="ident" id="2372970">Abs</span><span class="op" id="2372973">(</span><span class="ident" id="2372974">x</span><span class="op" id="2372975">)</span>&nbsp;<span class="op" id="2372977">&lt;</span>&nbsp;<span class="num" id="2372979">1</span><span class="op" id="2372980">)</span>&nbsp;<span class="op" id="2372982">==</span>&nbsp;<span class="ident" id="2372985">IsInf</span><span class="op" id="2372990">(</span><span class="ident" id="2372991">y</span><span class="op" id="2372992">,</span>&nbsp;<span class="num" id="2372994">1</span><span class="op" id="2372995">)</span><span class="op" id="2372996">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373001">return</span>&nbsp;<span class="num" id="2373008">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373012">default</span><span class="op" id="2373019">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373024">return</span>&nbsp;<span class="ident" id="2373031">Inf</span><span class="op" id="2373034">(</span><span class="num" id="2373035">1</span><span class="op" id="2373036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373043">case</span>&nbsp;<span class="ident" id="2373048">IsInf</span><span class="op" id="2373053">(</span><span class="ident" id="2373054">x</span><span class="op" id="2373055">,</span>&nbsp;<span class="num" id="2373057">0</span><span class="op" id="2373058">)</span><span class="op" id="2373059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373063">if</span>&nbsp;<span class="ident" id="2373066">IsInf</span><span class="op" id="2373071">(</span><span class="ident" id="2373072">x</span><span class="op" id="2373073">,</span>&nbsp;<span class="op" id="2373075">-</span><span class="num" id="2373076">1</span><span class="op" id="2373077">)</span>&nbsp;<span class="op" id="2373079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373084">return</span>&nbsp;<span class="ident" id="2373091">Pow</span><span class="op" id="2373094">(</span><span class="num" id="2373095">1</span><span class="op" id="2373096">/</span><span class="ident" id="2373097">x</span><span class="op" id="2373098">,</span>&nbsp;<span class="op" id="2373100">-</span><span class="ident" id="2373101">y</span><span class="op" id="2373102">)</span>&nbsp;<span class="comment" id="2373104">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373125">switch</span>&nbsp;<span class="op" id="2373132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373136">case</span>&nbsp;<span class="ident" id="2373141">y</span>&nbsp;<span class="op" id="2373143">&lt;</span>&nbsp;<span class="num" id="2373145">0</span><span class="op" id="2373146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373151">return</span>&nbsp;<span class="num" id="2373158">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373162">case</span>&nbsp;<span class="ident" id="2373167">y</span>&nbsp;<span class="op" id="2373169">&gt;</span>&nbsp;<span class="num" id="2373171">0</span><span class="op" id="2373172">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373177">return</span>&nbsp;<span class="ident" id="2373184">Inf</span><span class="op" id="2373187">(</span><span class="num" id="2373188">1</span><span class="op" id="2373189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373200">absy</span>&nbsp;<span class="op" id="2373205">:=</span>&nbsp;<span class="ident" id="2373208">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373211">flip</span>&nbsp;<span class="op" id="2373216">:=</span>&nbsp;<span class="builtintype" id="2373219">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373226">if</span>&nbsp;<span class="ident" id="2373229">absy</span>&nbsp;<span class="op" id="2373234">&lt;</span>&nbsp;<span class="num" id="2373236">0</span>&nbsp;<span class="op" id="2373238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373242">absy</span>&nbsp;<span class="op" id="2373247">=</span>&nbsp;<span class="op" id="2373249">-</span><span class="ident" id="2373250">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373257">flip</span>&nbsp;<span class="op" id="2373262">=</span>&nbsp;<span class="builtintype" id="2373264">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373270">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373273">yi</span><span class="op" id="2373275">,</span>&nbsp;<span class="ident" id="2373277">yf</span>&nbsp;<span class="op" id="2373280">:=</span>&nbsp;<span class="ident" id="2373283">Modf</span><span class="op" id="2373287">(</span><span class="ident" id="2373288">absy</span><span class="op" id="2373292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373295">if</span>&nbsp;<span class="ident" id="2373298">yf</span>&nbsp;<span class="op" id="2373301">!=</span>&nbsp;<span class="num" id="2373304">0</span>&nbsp;<span class="op" id="2373306">&amp;&amp;</span>&nbsp;<span class="ident" id="2373309">x</span>&nbsp;<span class="op" id="2373311">&lt;</span>&nbsp;<span class="num" id="2373313">0</span>&nbsp;<span class="op" id="2373315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373319">return</span>&nbsp;<span class="ident" id="2373326">NaN</span><span class="op" id="2373329">(</span><span class="op" id="2373330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373336">if</span>&nbsp;<span class="ident" id="2373339">yi</span>&nbsp;<span class="op" id="2373342">&gt;=</span>&nbsp;<span class="num" id="2373345">1</span><span class="op" id="2373346">&lt;&lt;</span><span class="num" id="2373348">63</span>&nbsp;<span class="op" id="2373351">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373355">return</span>&nbsp;<span class="ident" id="2373362">Exp</span><span class="op" id="2373365">(</span><span class="ident" id="2373366">y</span>&nbsp;<span class="op" id="2373368">*</span>&nbsp;<span class="ident" id="2373370">Log</span><span class="op" id="2373373">(</span><span class="ident" id="2373374">x</span><span class="op" id="2373375">)</span><span class="op" id="2373376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373383">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373419">a1</span>&nbsp;<span class="op" id="2373422">:=</span>&nbsp;<span class="num" id="2373425">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373430">ae</span>&nbsp;<span class="op" id="2373433">:=</span>&nbsp;<span class="num" id="2373436">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373440">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373457">if</span>&nbsp;<span class="ident" id="2373460">yf</span>&nbsp;<span class="op" id="2373463">!=</span>&nbsp;<span class="num" id="2373466">0</span>&nbsp;<span class="op" id="2373468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373472">if</span>&nbsp;<span class="ident" id="2373475">yf</span>&nbsp;<span class="op" id="2373478">&gt;</span>&nbsp;<span class="num" id="2373480">0.5</span>&nbsp;<span class="op" id="2373484">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373489">yf</span><span class="op" id="2373491">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373497">yi</span><span class="op" id="2373499">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373508">a1</span>&nbsp;<span class="op" id="2373511">=</span>&nbsp;<span class="ident" id="2373513">Exp</span><span class="op" id="2373516">(</span><span class="ident" id="2373517">yf</span>&nbsp;<span class="op" id="2373520">*</span>&nbsp;<span class="ident" id="2373522">Log</span><span class="op" id="2373525">(</span><span class="ident" id="2373526">x</span><span class="op" id="2373527">)</span><span class="op" id="2373528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373531">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373535">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373552">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373595">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373629">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373668">x1</span><span class="op" id="2373670">,</span>&nbsp;<span class="ident" id="2373672">xe</span>&nbsp;<span class="op" id="2373675">:=</span>&nbsp;<span class="ident" id="2373678">Frexp</span><span class="op" id="2373683">(</span><span class="ident" id="2373684">x</span><span class="op" id="2373685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373688">for</span>&nbsp;<span class="ident" id="2373692">i</span>&nbsp;<span class="op" id="2373694">:=</span>&nbsp;<span class="ident" id="2373697">int64</span><span class="op" id="2373702">(</span><span class="ident" id="2373703">yi</span><span class="op" id="2373705">)</span><span class="op" id="2373706">;</span>&nbsp;<span class="ident" id="2373708">i</span>&nbsp;<span class="op" id="2373710">!=</span>&nbsp;<span class="num" id="2373713">0</span><span class="op" id="2373714">;</span>&nbsp;<span class="ident" id="2373716">i</span>&nbsp;<span class="op" id="2373718">&gt;&gt;=</span>&nbsp;<span class="num" id="2373722">1</span>&nbsp;<span class="op" id="2373724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373728">if</span>&nbsp;<span class="ident" id="2373731">i</span><span class="op" id="2373732">&amp;</span><span class="num" id="2373733">1</span>&nbsp;<span class="op" id="2373735">==</span>&nbsp;<span class="num" id="2373738">1</span>&nbsp;<span class="op" id="2373740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373745">a1</span>&nbsp;<span class="op" id="2373748">*=</span>&nbsp;<span class="ident" id="2373751">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373757">ae</span>&nbsp;<span class="op" id="2373760">+=</span>&nbsp;<span class="ident" id="2373763">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373772">x1</span>&nbsp;<span class="op" id="2373775">*=</span>&nbsp;<span class="ident" id="2373778">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373783">xe</span>&nbsp;<span class="op" id="2373786">&lt;&lt;=</span>&nbsp;<span class="num" id="2373790">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373794">if</span>&nbsp;<span class="ident" id="2373797">x1</span>&nbsp;<span class="op" id="2373800">&lt;</span>&nbsp;<span class="num" id="2373802">.5</span>&nbsp;<span class="op" id="2373805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373810">x1</span>&nbsp;<span class="op" id="2373813">+=</span>&nbsp;<span class="ident" id="2373816">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373822">xe</span><span class="op" id="2373824">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373836">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373855">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2373885">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373915">if</span>&nbsp;<span class="ident" id="2373918">flip</span>&nbsp;<span class="op" id="2373923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373927">a1</span>&nbsp;<span class="op" id="2373930">=</span>&nbsp;<span class="num" id="2373932">1</span>&nbsp;<span class="op" id="2373934">/</span>&nbsp;<span class="ident" id="2373936">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2373941">ae</span>&nbsp;<span class="op" id="2373944">=</span>&nbsp;<span class="op" id="2373946">-</span><span class="ident" id="2373947">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2373951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2373954">return</span>&nbsp;<span class="ident" id="2373961">Ldexp</span><span class="op" id="2373966">(</span><span class="ident" id="2373967">a1</span><span class="op" id="2373969">,</span>&nbsp;<span class="ident" id="2373971">ae</span><span class="op" id="2373973">)</span><br>
<span class="lineno"></span><span class="op" id="2373975">}</span>
</div>
</body>
</html>
