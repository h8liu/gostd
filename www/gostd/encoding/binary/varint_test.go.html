<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7838057">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7838112">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7838166">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7838217">package</span>&nbsp;<span class="ident" id="7838225">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838233">import</span>&nbsp;<span class="op" id="7838240">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7838243">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7838252">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7838258">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7838268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838271">func</span>&nbsp;<span class="ident" id="7838276">testConstant</span><span class="op" id="7838288">(</span><span class="ident" id="7838289">t</span>&nbsp;<span class="op" id="7838291">*</span><span class="ident" id="7838292">testing</span><span class="op" id="7838299">.</span><span class="ident" id="7838300">T</span><span class="op" id="7838301">,</span>&nbsp;<span class="ident" id="7838303">w</span>&nbsp;<span class="builtintype" id="7838305">uint</span><span class="op" id="7838309">,</span>&nbsp;<span class="ident" id="7838311">max</span>&nbsp;<span class="builtintype" id="7838315">int</span><span class="op" id="7838318">)</span>&nbsp;<span class="op" id="7838320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838323">buf</span>&nbsp;<span class="op" id="7838327">:=</span>&nbsp;<span class="builtinfunc" id="7838330">make</span><span class="op" id="7838334">(</span><span class="op" id="7838335">[</span><span class="op" id="7838336">]</span><span class="builtintype" id="7838337">byte</span><span class="op" id="7838341">,</span>&nbsp;<span class="ident" id="7838343">MaxVarintLen64</span><span class="op" id="7838357">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838360">n</span>&nbsp;<span class="op" id="7838362">:=</span>&nbsp;<span class="ident" id="7838365">PutUvarint</span><span class="op" id="7838375">(</span><span class="ident" id="7838376">buf</span><span class="op" id="7838379">,</span>&nbsp;<span class="num" id="7838381">1</span><span class="op" id="7838382">&lt;&lt;</span><span class="ident" id="7838384">w</span><span class="op" id="7838385">-</span><span class="num" id="7838386">1</span><span class="op" id="7838387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838390">if</span>&nbsp;<span class="ident" id="7838393">n</span>&nbsp;<span class="op" id="7838395">!=</span>&nbsp;<span class="ident" id="7838398">max</span>&nbsp;<span class="op" id="7838402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838406">t</span><span class="op" id="7838407">.</span><span class="ident" id="7838408">Errorf</span><span class="op" id="7838414">(</span><span class="string" id="7838415">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7838445">,</span>&nbsp;<span class="ident" id="7838447">w</span><span class="op" id="7838448">,</span>&nbsp;<span class="ident" id="7838450">max</span><span class="op" id="7838453">,</span>&nbsp;<span class="ident" id="7838455">n</span><span class="op" id="7838456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838459">}</span><br>
<span class="lineno"></span><span class="op" id="7838461">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7838464">func</span>&nbsp;<span class="ident" id="7838469">TestConstants</span><span class="op" id="7838482">(</span><span class="ident" id="7838483">t</span>&nbsp;<span class="op" id="7838485">*</span><span class="ident" id="7838486">testing</span><span class="op" id="7838493">.</span><span class="ident" id="7838494">T</span><span class="op" id="7838495">)</span>&nbsp;<span class="op" id="7838497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838500">testConstant</span><span class="op" id="7838512">(</span><span class="ident" id="7838513">t</span><span class="op" id="7838514">,</span>&nbsp;<span class="num" id="7838516">16</span><span class="op" id="7838518">,</span>&nbsp;<span class="ident" id="7838520">MaxVarintLen16</span><span class="op" id="7838534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838537">testConstant</span><span class="op" id="7838549">(</span><span class="ident" id="7838550">t</span><span class="op" id="7838551">,</span>&nbsp;<span class="num" id="7838553">32</span><span class="op" id="7838555">,</span>&nbsp;<span class="ident" id="7838557">MaxVarintLen32</span><span class="op" id="7838571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838574">testConstant</span><span class="op" id="7838586">(</span><span class="ident" id="7838587">t</span><span class="op" id="7838588">,</span>&nbsp;<span class="num" id="7838590">64</span><span class="op" id="7838592">,</span>&nbsp;<span class="ident" id="7838594">MaxVarintLen64</span><span class="op" id="7838608">)</span><br>
<span class="lineno">25</span><span class="op" id="7838610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7838613">func</span>&nbsp;<span class="ident" id="7838618">testVarint</span><span class="op" id="7838628">(</span><span class="ident" id="7838629">t</span>&nbsp;<span class="op" id="7838631">*</span><span class="ident" id="7838632">testing</span><span class="op" id="7838639">.</span><span class="ident" id="7838640">T</span><span class="op" id="7838641">,</span>&nbsp;<span class="ident" id="7838643">x</span>&nbsp;<span class="ident" id="7838645">int64</span><span class="op" id="7838650">)</span>&nbsp;<span class="op" id="7838652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838655">buf</span>&nbsp;<span class="op" id="7838659">:=</span>&nbsp;<span class="builtinfunc" id="7838662">make</span><span class="op" id="7838666">(</span><span class="op" id="7838667">[</span><span class="op" id="7838668">]</span><span class="builtintype" id="7838669">byte</span><span class="op" id="7838673">,</span>&nbsp;<span class="ident" id="7838675">MaxVarintLen64</span><span class="op" id="7838689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838692">n</span>&nbsp;<span class="op" id="7838694">:=</span>&nbsp;<span class="ident" id="7838697">PutVarint</span><span class="op" id="7838706">(</span><span class="ident" id="7838707">buf</span><span class="op" id="7838710">,</span>&nbsp;<span class="ident" id="7838712">x</span><span class="op" id="7838713">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838716">y</span><span class="op" id="7838717">,</span>&nbsp;<span class="ident" id="7838719">m</span>&nbsp;<span class="op" id="7838721">:=</span>&nbsp;<span class="ident" id="7838724">Varint</span><span class="op" id="7838730">(</span><span class="ident" id="7838731">buf</span><span class="op" id="7838734">[</span><span class="num" id="7838735">0</span><span class="op" id="7838736">:</span><span class="ident" id="7838737">n</span><span class="op" id="7838738">]</span><span class="op" id="7838739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838742">if</span>&nbsp;<span class="ident" id="7838745">x</span>&nbsp;<span class="op" id="7838747">!=</span>&nbsp;<span class="ident" id="7838750">y</span>&nbsp;<span class="op" id="7838752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838756">t</span><span class="op" id="7838757">.</span><span class="ident" id="7838758">Errorf</span><span class="op" id="7838764">(</span><span class="string" id="7838765">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7838785">,</span>&nbsp;<span class="ident" id="7838787">x</span><span class="op" id="7838788">,</span>&nbsp;<span class="ident" id="7838790">y</span><span class="op" id="7838791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838797">if</span>&nbsp;<span class="ident" id="7838800">n</span>&nbsp;<span class="op" id="7838802">!=</span>&nbsp;<span class="ident" id="7838805">m</span>&nbsp;<span class="op" id="7838807">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838811">t</span><span class="op" id="7838812">.</span><span class="ident" id="7838813">Errorf</span><span class="op" id="7838819">(</span><span class="string" id="7838820">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7838853">,</span>&nbsp;<span class="ident" id="7838855">x</span><span class="op" id="7838856">,</span>&nbsp;<span class="ident" id="7838858">m</span><span class="op" id="7838859">,</span>&nbsp;<span class="ident" id="7838861">n</span><span class="op" id="7838862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838869">y</span><span class="op" id="7838870">,</span>&nbsp;<span class="ident" id="7838872">err</span>&nbsp;<span class="op" id="7838876">:=</span>&nbsp;<span class="ident" id="7838879">ReadVarint</span><span class="op" id="7838889">(</span><span class="ident" id="7838890">bytes</span><span class="op" id="7838895">.</span><span class="ident" id="7838896">NewReader</span><span class="op" id="7838905">(</span><span class="ident" id="7838906">buf</span><span class="op" id="7838909">)</span><span class="op" id="7838910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838913">if</span>&nbsp;<span class="ident" id="7838916">err</span>&nbsp;<span class="op" id="7838920">!=</span>&nbsp;<span class="ident" id="7838923">nil</span>&nbsp;<span class="op" id="7838927">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838931">t</span><span class="op" id="7838932">.</span><span class="ident" id="7838933">Errorf</span><span class="op" id="7838939">(</span><span class="string" id="7838940">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7838960">,</span>&nbsp;<span class="ident" id="7838962">x</span><span class="op" id="7838963">,</span>&nbsp;<span class="ident" id="7838965">err</span><span class="op" id="7838968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7838971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7838974">if</span>&nbsp;<span class="ident" id="7838977">x</span>&nbsp;<span class="op" id="7838979">!=</span>&nbsp;<span class="ident" id="7838982">y</span>&nbsp;<span class="op" id="7838984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7838988">t</span><span class="op" id="7838989">.</span><span class="ident" id="7838990">Errorf</span><span class="op" id="7838996">(</span><span class="string" id="7838997">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7839021">,</span>&nbsp;<span class="ident" id="7839023">x</span><span class="op" id="7839024">,</span>&nbsp;<span class="ident" id="7839026">y</span><span class="op" id="7839027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839030">}</span><br>
<span class="lineno">45</span><span class="op" id="7839032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839035">func</span>&nbsp;<span class="ident" id="7839040">testUvarint</span><span class="op" id="7839051">(</span><span class="ident" id="7839052">t</span>&nbsp;<span class="op" id="7839054">*</span><span class="ident" id="7839055">testing</span><span class="op" id="7839062">.</span><span class="ident" id="7839063">T</span><span class="op" id="7839064">,</span>&nbsp;<span class="ident" id="7839066">x</span>&nbsp;<span class="ident" id="7839068">uint64</span><span class="op" id="7839074">)</span>&nbsp;<span class="op" id="7839076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839079">buf</span>&nbsp;<span class="op" id="7839083">:=</span>&nbsp;<span class="builtinfunc" id="7839086">make</span><span class="op" id="7839090">(</span><span class="op" id="7839091">[</span><span class="op" id="7839092">]</span><span class="builtintype" id="7839093">byte</span><span class="op" id="7839097">,</span>&nbsp;<span class="ident" id="7839099">MaxVarintLen64</span><span class="op" id="7839113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839116">n</span>&nbsp;<span class="op" id="7839118">:=</span>&nbsp;<span class="ident" id="7839121">PutUvarint</span><span class="op" id="7839131">(</span><span class="ident" id="7839132">buf</span><span class="op" id="7839135">,</span>&nbsp;<span class="ident" id="7839137">x</span><span class="op" id="7839138">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839141">y</span><span class="op" id="7839142">,</span>&nbsp;<span class="ident" id="7839144">m</span>&nbsp;<span class="op" id="7839146">:=</span>&nbsp;<span class="ident" id="7839149">Uvarint</span><span class="op" id="7839156">(</span><span class="ident" id="7839157">buf</span><span class="op" id="7839160">[</span><span class="num" id="7839161">0</span><span class="op" id="7839162">:</span><span class="ident" id="7839163">n</span><span class="op" id="7839164">]</span><span class="op" id="7839165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839168">if</span>&nbsp;<span class="ident" id="7839171">x</span>&nbsp;<span class="op" id="7839173">!=</span>&nbsp;<span class="ident" id="7839176">y</span>&nbsp;<span class="op" id="7839178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839182">t</span><span class="op" id="7839183">.</span><span class="ident" id="7839184">Errorf</span><span class="op" id="7839190">(</span><span class="string" id="7839191">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7839212">,</span>&nbsp;<span class="ident" id="7839214">x</span><span class="op" id="7839215">,</span>&nbsp;<span class="ident" id="7839217">y</span><span class="op" id="7839218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839224">if</span>&nbsp;<span class="ident" id="7839227">n</span>&nbsp;<span class="op" id="7839229">!=</span>&nbsp;<span class="ident" id="7839232">m</span>&nbsp;<span class="op" id="7839234">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839238">t</span><span class="op" id="7839239">.</span><span class="ident" id="7839240">Errorf</span><span class="op" id="7839246">(</span><span class="string" id="7839247">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7839281">,</span>&nbsp;<span class="ident" id="7839283">x</span><span class="op" id="7839284">,</span>&nbsp;<span class="ident" id="7839286">m</span><span class="op" id="7839287">,</span>&nbsp;<span class="ident" id="7839289">n</span><span class="op" id="7839290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839297">y</span><span class="op" id="7839298">,</span>&nbsp;<span class="ident" id="7839300">err</span>&nbsp;<span class="op" id="7839304">:=</span>&nbsp;<span class="ident" id="7839307">ReadUvarint</span><span class="op" id="7839318">(</span><span class="ident" id="7839319">bytes</span><span class="op" id="7839324">.</span><span class="ident" id="7839325">NewReader</span><span class="op" id="7839334">(</span><span class="ident" id="7839335">buf</span><span class="op" id="7839338">)</span><span class="op" id="7839339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839342">if</span>&nbsp;<span class="ident" id="7839345">err</span>&nbsp;<span class="op" id="7839349">!=</span>&nbsp;<span class="ident" id="7839352">nil</span>&nbsp;<span class="op" id="7839356">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839360">t</span><span class="op" id="7839361">.</span><span class="ident" id="7839362">Errorf</span><span class="op" id="7839368">(</span><span class="string" id="7839369">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7839390">,</span>&nbsp;<span class="ident" id="7839392">x</span><span class="op" id="7839393">,</span>&nbsp;<span class="ident" id="7839395">err</span><span class="op" id="7839398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839404">if</span>&nbsp;<span class="ident" id="7839407">x</span>&nbsp;<span class="op" id="7839409">!=</span>&nbsp;<span class="ident" id="7839412">y</span>&nbsp;<span class="op" id="7839414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839418">t</span><span class="op" id="7839419">.</span><span class="ident" id="7839420">Errorf</span><span class="op" id="7839426">(</span><span class="string" id="7839427">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7839452">,</span>&nbsp;<span class="ident" id="7839454">x</span><span class="op" id="7839455">,</span>&nbsp;<span class="ident" id="7839457">y</span><span class="op" id="7839458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839461">}</span><br>
<span class="lineno">65</span><span class="op" id="7839463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839466">var</span>&nbsp;<span class="ident" id="7839470">tests</span>&nbsp;<span class="op" id="7839476">=</span>&nbsp;<span class="op" id="7839478">[</span><span class="op" id="7839479">]</span><span class="ident" id="7839480">int64</span><span class="op" id="7839485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839488">-</span><span class="num" id="7839489">1</span>&nbsp;<span class="op" id="7839491">&lt;&lt;</span>&nbsp;<span class="num" id="7839494">63</span><span class="op" id="7839496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839499">-</span><span class="num" id="7839500">1</span><span class="op" id="7839501">&lt;&lt;</span><span class="num" id="7839503">63</span>&nbsp;<span class="op" id="7839506">+</span>&nbsp;<span class="num" id="7839508">1</span><span class="op" id="7839509">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839512">-</span><span class="num" id="7839513">1</span><span class="op" id="7839514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839517">0</span><span class="op" id="7839518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839521">1</span><span class="op" id="7839522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839525">2</span><span class="op" id="7839526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839529">10</span><span class="op" id="7839531">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839534">20</span><span class="op" id="7839536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839539">63</span><span class="op" id="7839541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839544">64</span><span class="op" id="7839546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839549">65</span><span class="op" id="7839551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839554">127</span><span class="op" id="7839557">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839560">128</span><span class="op" id="7839563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839566">129</span><span class="op" id="7839569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839572">255</span><span class="op" id="7839575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839578">256</span><span class="op" id="7839581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839584">257</span><span class="op" id="7839587">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7839590">1</span><span class="op" id="7839591">&lt;&lt;</span><span class="num" id="7839593">63</span>&nbsp;<span class="op" id="7839596">-</span>&nbsp;<span class="num" id="7839598">1</span><span class="op" id="7839599">,</span><br>
<span class="lineno"></span><span class="op" id="7839601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839604">func</span>&nbsp;<span class="ident" id="7839609">TestVarint</span><span class="op" id="7839619">(</span><span class="ident" id="7839620">t</span>&nbsp;<span class="op" id="7839622">*</span><span class="ident" id="7839623">testing</span><span class="op" id="7839630">.</span><span class="ident" id="7839631">T</span><span class="op" id="7839632">)</span>&nbsp;<span class="op" id="7839634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839637">for</span>&nbsp;<span class="ident" id="7839641">_</span><span class="op" id="7839642">,</span>&nbsp;<span class="ident" id="7839644">x</span>&nbsp;<span class="op" id="7839646">:=</span>&nbsp;<span class="keyword" id="7839649">range</span>&nbsp;<span class="ident" id="7839655">tests</span>&nbsp;<span class="op" id="7839661">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839665">testVarint</span><span class="op" id="7839675">(</span><span class="ident" id="7839676">t</span><span class="op" id="7839677">,</span>&nbsp;<span class="ident" id="7839679">x</span><span class="op" id="7839680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839684">testVarint</span><span class="op" id="7839694">(</span><span class="ident" id="7839695">t</span><span class="op" id="7839696">,</span>&nbsp;<span class="op" id="7839698">-</span><span class="ident" id="7839699">x</span><span class="op" id="7839700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839706">for</span>&nbsp;<span class="ident" id="7839710">x</span>&nbsp;<span class="op" id="7839712">:=</span>&nbsp;<span class="ident" id="7839715">int64</span><span class="op" id="7839720">(</span><span class="num" id="7839721">0x7</span><span class="op" id="7839724">)</span><span class="op" id="7839725">;</span>&nbsp;<span class="ident" id="7839727">x</span>&nbsp;<span class="op" id="7839729">!=</span>&nbsp;<span class="num" id="7839732">0</span><span class="op" id="7839733">;</span>&nbsp;<span class="ident" id="7839735">x</span>&nbsp;<span class="op" id="7839737">&lt;&lt;=</span>&nbsp;<span class="num" id="7839741">1</span>&nbsp;<span class="op" id="7839743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839747">testVarint</span><span class="op" id="7839757">(</span><span class="ident" id="7839758">t</span><span class="op" id="7839759">,</span>&nbsp;<span class="ident" id="7839761">x</span><span class="op" id="7839762">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839766">testVarint</span><span class="op" id="7839776">(</span><span class="ident" id="7839777">t</span><span class="op" id="7839778">,</span>&nbsp;<span class="op" id="7839780">-</span><span class="ident" id="7839781">x</span><span class="op" id="7839782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839785">}</span><br>
<span class="lineno"></span><span class="op" id="7839787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839790">func</span>&nbsp;<span class="ident" id="7839795">TestUvarint</span><span class="op" id="7839806">(</span><span class="ident" id="7839807">t</span>&nbsp;<span class="op" id="7839809">*</span><span class="ident" id="7839810">testing</span><span class="op" id="7839817">.</span><span class="ident" id="7839818">T</span><span class="op" id="7839819">)</span>&nbsp;<span class="op" id="7839821">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839824">for</span>&nbsp;<span class="ident" id="7839828">_</span><span class="op" id="7839829">,</span>&nbsp;<span class="ident" id="7839831">x</span>&nbsp;<span class="op" id="7839833">:=</span>&nbsp;<span class="keyword" id="7839836">range</span>&nbsp;<span class="ident" id="7839842">tests</span>&nbsp;<span class="op" id="7839848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839852">testUvarint</span><span class="op" id="7839863">(</span><span class="ident" id="7839864">t</span><span class="op" id="7839865">,</span>&nbsp;<span class="ident" id="7839867">uint64</span><span class="op" id="7839873">(</span><span class="ident" id="7839874">x</span><span class="op" id="7839875">)</span><span class="op" id="7839876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7839882">for</span>&nbsp;<span class="ident" id="7839886">x</span>&nbsp;<span class="op" id="7839888">:=</span>&nbsp;<span class="ident" id="7839891">uint64</span><span class="op" id="7839897">(</span><span class="num" id="7839898">0x7</span><span class="op" id="7839901">)</span><span class="op" id="7839902">;</span>&nbsp;<span class="ident" id="7839904">x</span>&nbsp;<span class="op" id="7839906">!=</span>&nbsp;<span class="num" id="7839909">0</span><span class="op" id="7839910">;</span>&nbsp;<span class="ident" id="7839912">x</span>&nbsp;<span class="op" id="7839914">&lt;&lt;=</span>&nbsp;<span class="num" id="7839918">1</span>&nbsp;<span class="op" id="7839920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839924">testUvarint</span><span class="op" id="7839935">(</span><span class="ident" id="7839936">t</span><span class="op" id="7839937">,</span>&nbsp;<span class="ident" id="7839939">x</span><span class="op" id="7839940">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7839943">}</span><br>
<span class="lineno"></span><span class="op" id="7839945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7839948">func</span>&nbsp;<span class="ident" id="7839953">TestBufferTooSmall</span><span class="op" id="7839971">(</span><span class="ident" id="7839972">t</span>&nbsp;<span class="op" id="7839974">*</span><span class="ident" id="7839975">testing</span><span class="op" id="7839982">.</span><span class="ident" id="7839983">T</span><span class="op" id="7839984">)</span>&nbsp;<span class="op" id="7839986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7839989">buf</span>&nbsp;<span class="op" id="7839993">:=</span>&nbsp;<span class="op" id="7839996">[</span><span class="op" id="7839997">]</span><span class="builtintype" id="7839998">byte</span><span class="op" id="7840002">{</span><span class="num" id="7840003">0x80</span><span class="op" id="7840007">,</span>&nbsp;<span class="num" id="7840009">0x80</span><span class="op" id="7840013">,</span>&nbsp;<span class="num" id="7840015">0x80</span><span class="op" id="7840019">,</span>&nbsp;<span class="num" id="7840021">0x80</span><span class="op" id="7840025">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840028">for</span>&nbsp;<span class="ident" id="7840032">i</span>&nbsp;<span class="op" id="7840034">:=</span>&nbsp;<span class="num" id="7840037">0</span><span class="op" id="7840038">;</span>&nbsp;<span class="ident" id="7840040">i</span>&nbsp;<span class="op" id="7840042">&lt;=</span>&nbsp;<span class="builtinfunc" id="7840045">len</span><span class="op" id="7840048">(</span><span class="ident" id="7840049">buf</span><span class="op" id="7840052">)</span><span class="op" id="7840053">;</span>&nbsp;<span class="ident" id="7840055">i</span><span class="op" id="7840056">++</span>&nbsp;<span class="op" id="7840059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840063">buf</span>&nbsp;<span class="op" id="7840067">:=</span>&nbsp;<span class="ident" id="7840070">buf</span><span class="op" id="7840073">[</span><span class="num" id="7840074">0</span><span class="op" id="7840075">:</span><span class="ident" id="7840076">i</span><span class="op" id="7840077">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840081">x</span><span class="op" id="7840082">,</span>&nbsp;<span class="ident" id="7840084">n</span>&nbsp;<span class="op" id="7840086">:=</span>&nbsp;<span class="ident" id="7840089">Uvarint</span><span class="op" id="7840096">(</span><span class="ident" id="7840097">buf</span><span class="op" id="7840100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840104">if</span>&nbsp;<span class="ident" id="7840107">x</span>&nbsp;<span class="op" id="7840109">!=</span>&nbsp;<span class="num" id="7840112">0</span>&nbsp;<span class="op" id="7840114">||</span>&nbsp;<span class="ident" id="7840117">n</span>&nbsp;<span class="op" id="7840119">!=</span>&nbsp;<span class="num" id="7840122">0</span>&nbsp;<span class="op" id="7840124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840129">t</span><span class="op" id="7840130">.</span><span class="ident" id="7840131">Errorf</span><span class="op" id="7840137">(</span><span class="string" id="7840138">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7840171">,</span>&nbsp;<span class="ident" id="7840173">buf</span><span class="op" id="7840176">,</span>&nbsp;<span class="ident" id="7840178">x</span><span class="op" id="7840179">,</span>&nbsp;<span class="ident" id="7840181">n</span><span class="op" id="7840182">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840191">x</span><span class="op" id="7840192">,</span>&nbsp;<span class="ident" id="7840194">err</span>&nbsp;<span class="op" id="7840198">:=</span>&nbsp;<span class="ident" id="7840201">ReadUvarint</span><span class="op" id="7840212">(</span><span class="ident" id="7840213">bytes</span><span class="op" id="7840218">.</span><span class="ident" id="7840219">NewReader</span><span class="op" id="7840228">(</span><span class="ident" id="7840229">buf</span><span class="op" id="7840232">)</span><span class="op" id="7840233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840237">if</span>&nbsp;<span class="ident" id="7840240">x</span>&nbsp;<span class="op" id="7840242">!=</span>&nbsp;<span class="num" id="7840245">0</span>&nbsp;<span class="op" id="7840247">||</span>&nbsp;<span class="ident" id="7840250">err</span>&nbsp;<span class="op" id="7840254">!=</span>&nbsp;<span class="ident" id="7840257">io</span><span class="op" id="7840259">.</span><span class="ident" id="7840260">EOF</span>&nbsp;<span class="op" id="7840264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840269">t</span><span class="op" id="7840270">.</span><span class="ident" id="7840271">Errorf</span><span class="op" id="7840277">(</span><span class="string" id="7840278">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7840317">,</span>&nbsp;<span class="ident" id="7840319">buf</span><span class="op" id="7840322">,</span>&nbsp;<span class="ident" id="7840324">x</span><span class="op" id="7840325">,</span>&nbsp;<span class="ident" id="7840327">err</span><span class="op" id="7840330">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840337">}</span><br>
<span class="lineno"></span><span class="op" id="7840339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7840342">func</span>&nbsp;<span class="ident" id="7840347">testOverflow</span><span class="op" id="7840359">(</span><span class="ident" id="7840360">t</span>&nbsp;<span class="op" id="7840362">*</span><span class="ident" id="7840363">testing</span><span class="op" id="7840370">.</span><span class="ident" id="7840371">T</span><span class="op" id="7840372">,</span>&nbsp;<span class="ident" id="7840374">buf</span>&nbsp;<span class="op" id="7840378">[</span><span class="op" id="7840379">]</span><span class="builtintype" id="7840380">byte</span><span class="op" id="7840384">,</span>&nbsp;<span class="ident" id="7840386">n0</span>&nbsp;<span class="builtintype" id="7840389">int</span><span class="op" id="7840392">,</span>&nbsp;<span class="ident" id="7840394">err0</span>&nbsp;<span class="builtintype" id="7840399">error</span><span class="op" id="7840404">)</span>&nbsp;<span class="op" id="7840406">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840409">x</span><span class="op" id="7840410">,</span>&nbsp;<span class="ident" id="7840412">n</span>&nbsp;<span class="op" id="7840414">:=</span>&nbsp;<span class="ident" id="7840417">Uvarint</span><span class="op" id="7840424">(</span><span class="ident" id="7840425">buf</span><span class="op" id="7840428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840431">if</span>&nbsp;<span class="ident" id="7840434">x</span>&nbsp;<span class="op" id="7840436">!=</span>&nbsp;<span class="num" id="7840439">0</span>&nbsp;<span class="op" id="7840441">||</span>&nbsp;<span class="ident" id="7840444">n</span>&nbsp;<span class="op" id="7840446">!=</span>&nbsp;<span class="ident" id="7840449">n0</span>&nbsp;<span class="op" id="7840452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840456">t</span><span class="op" id="7840457">.</span><span class="ident" id="7840458">Errorf</span><span class="op" id="7840464">(</span><span class="string" id="7840465">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7840510">,</span>&nbsp;<span class="ident" id="7840512">buf</span><span class="op" id="7840515">,</span>&nbsp;<span class="ident" id="7840517">x</span><span class="op" id="7840518">,</span>&nbsp;<span class="ident" id="7840520">n</span><span class="op" id="7840521">,</span>&nbsp;<span class="ident" id="7840523">n0</span><span class="op" id="7840525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840532">x</span><span class="op" id="7840533">,</span>&nbsp;<span class="ident" id="7840535">err</span>&nbsp;<span class="op" id="7840539">:=</span>&nbsp;<span class="ident" id="7840542">ReadUvarint</span><span class="op" id="7840553">(</span><span class="ident" id="7840554">bytes</span><span class="op" id="7840559">.</span><span class="ident" id="7840560">NewReader</span><span class="op" id="7840569">(</span><span class="ident" id="7840570">buf</span><span class="op" id="7840573">)</span><span class="op" id="7840574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7840577">if</span>&nbsp;<span class="ident" id="7840580">x</span>&nbsp;<span class="op" id="7840582">!=</span>&nbsp;<span class="num" id="7840585">0</span>&nbsp;<span class="op" id="7840587">||</span>&nbsp;<span class="ident" id="7840590">err</span>&nbsp;<span class="op" id="7840594">!=</span>&nbsp;<span class="ident" id="7840597">err0</span>&nbsp;<span class="op" id="7840602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840606">t</span><span class="op" id="7840607">.</span><span class="ident" id="7840608">Errorf</span><span class="op" id="7840614">(</span><span class="string" id="7840615">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7840666">,</span>&nbsp;<span class="ident" id="7840668">buf</span><span class="op" id="7840671">,</span>&nbsp;<span class="ident" id="7840673">x</span><span class="op" id="7840674">,</span>&nbsp;<span class="ident" id="7840676">err</span><span class="op" id="7840679">,</span>&nbsp;<span class="ident" id="7840681">err0</span><span class="op" id="7840685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7840688">}</span><br>
<span class="lineno"></span><span class="op" id="7840690">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7840693">func</span>&nbsp;<span class="ident" id="7840698">TestOverflow</span><span class="op" id="7840710">(</span><span class="ident" id="7840711">t</span>&nbsp;<span class="op" id="7840713">*</span><span class="ident" id="7840714">testing</span><span class="op" id="7840721">.</span><span class="ident" id="7840722">T</span><span class="op" id="7840723">)</span>&nbsp;<span class="op" id="7840725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840728">testOverflow</span><span class="op" id="7840740">(</span><span class="ident" id="7840741">t</span><span class="op" id="7840742">,</span>&nbsp;<span class="op" id="7840744">[</span><span class="op" id="7840745">]</span><span class="builtintype" id="7840746">byte</span><span class="op" id="7840750">{</span><span class="num" id="7840751">0x80</span><span class="op" id="7840755">,</span>&nbsp;<span class="num" id="7840757">0x80</span><span class="op" id="7840761">,</span>&nbsp;<span class="num" id="7840763">0x80</span><span class="op" id="7840767">,</span>&nbsp;<span class="num" id="7840769">0x80</span><span class="op" id="7840773">,</span>&nbsp;<span class="num" id="7840775">0x80</span><span class="op" id="7840779">,</span>&nbsp;<span class="num" id="7840781">0x80</span><span class="op" id="7840785">,</span>&nbsp;<span class="num" id="7840787">0x80</span><span class="op" id="7840791">,</span>&nbsp;<span class="num" id="7840793">0x80</span><span class="op" id="7840797">,</span>&nbsp;<span class="num" id="7840799">0x80</span><span class="op" id="7840803">,</span>&nbsp;<span class="num" id="7840805">0x2</span><span class="op" id="7840808">}</span><span class="op" id="7840809">,</span>&nbsp;<span class="op" id="7840811">-</span><span class="num" id="7840812">10</span><span class="op" id="7840814">,</span>&nbsp;<span class="ident" id="7840816">overflow</span><span class="op" id="7840824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840827">testOverflow</span><span class="op" id="7840839">(</span><span class="ident" id="7840840">t</span><span class="op" id="7840841">,</span>&nbsp;<span class="op" id="7840843">[</span><span class="op" id="7840844">]</span><span class="builtintype" id="7840845">byte</span><span class="op" id="7840849">{</span><span class="num" id="7840850">0x80</span><span class="op" id="7840854">,</span>&nbsp;<span class="num" id="7840856">0x80</span><span class="op" id="7840860">,</span>&nbsp;<span class="num" id="7840862">0x80</span><span class="op" id="7840866">,</span>&nbsp;<span class="num" id="7840868">0x80</span><span class="op" id="7840872">,</span>&nbsp;<span class="num" id="7840874">0x80</span><span class="op" id="7840878">,</span>&nbsp;<span class="num" id="7840880">0x80</span><span class="op" id="7840884">,</span>&nbsp;<span class="num" id="7840886">0x80</span><span class="op" id="7840890">,</span>&nbsp;<span class="num" id="7840892">0x80</span><span class="op" id="7840896">,</span>&nbsp;<span class="num" id="7840898">0x80</span><span class="op" id="7840902">,</span>&nbsp;<span class="num" id="7840904">0x80</span><span class="op" id="7840908">,</span>&nbsp;<span class="num" id="7840910">0x80</span><span class="op" id="7840914">,</span>&nbsp;<span class="num" id="7840916">0x80</span><span class="op" id="7840920">,</span>&nbsp;<span class="num" id="7840922">0x1</span><span class="op" id="7840925">,</span>&nbsp;<span class="num" id="7840927">0</span><span class="op" id="7840928">,</span>&nbsp;<span class="num" id="7840930">0</span><span class="op" id="7840931">}</span><span class="op" id="7840932">,</span>&nbsp;<span class="op" id="7840934">-</span><span class="num" id="7840935">13</span><span class="op" id="7840937">,</span>&nbsp;<span class="ident" id="7840939">overflow</span><span class="op" id="7840947">)</span><br>
<span class="lineno"></span><span class="op" id="7840949">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7840952">func</span>&nbsp;<span class="ident" id="7840957">TestNonCanonicalZero</span><span class="op" id="7840977">(</span><span class="ident" id="7840978">t</span>&nbsp;<span class="op" id="7840980">*</span><span class="ident" id="7840981">testing</span><span class="op" id="7840988">.</span><span class="ident" id="7840989">T</span><span class="op" id="7840990">)</span>&nbsp;<span class="op" id="7840992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7840995">buf</span>&nbsp;<span class="op" id="7840999">:=</span>&nbsp;<span class="op" id="7841002">[</span><span class="op" id="7841003">]</span><span class="builtintype" id="7841004">byte</span><span class="op" id="7841008">{</span><span class="num" id="7841009">0x80</span><span class="op" id="7841013">,</span>&nbsp;<span class="num" id="7841015">0x80</span><span class="op" id="7841019">,</span>&nbsp;<span class="num" id="7841021">0x80</span><span class="op" id="7841025">,</span>&nbsp;<span class="num" id="7841027">0</span><span class="op" id="7841028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841031">x</span><span class="op" id="7841032">,</span>&nbsp;<span class="ident" id="7841034">n</span>&nbsp;<span class="op" id="7841036">:=</span>&nbsp;<span class="ident" id="7841039">Uvarint</span><span class="op" id="7841046">(</span><span class="ident" id="7841047">buf</span><span class="op" id="7841050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841053">if</span>&nbsp;<span class="ident" id="7841056">x</span>&nbsp;<span class="op" id="7841058">!=</span>&nbsp;<span class="num" id="7841061">0</span>&nbsp;<span class="op" id="7841063">||</span>&nbsp;<span class="ident" id="7841066">n</span>&nbsp;<span class="op" id="7841068">!=</span>&nbsp;<span class="num" id="7841071">4</span>&nbsp;<span class="op" id="7841073">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841077">t</span><span class="op" id="7841078">.</span><span class="ident" id="7841079">Errorf</span><span class="op" id="7841085">(</span><span class="string" id="7841086">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7841130">,</span>&nbsp;<span class="ident" id="7841132">buf</span><span class="op" id="7841135">,</span>&nbsp;<span class="ident" id="7841137">x</span><span class="op" id="7841138">,</span>&nbsp;<span class="ident" id="7841140">n</span><span class="op" id="7841141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841145">}</span><br>
<span class="lineno"></span><span class="op" id="7841147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7841150">func</span>&nbsp;<span class="ident" id="7841155">BenchmarkPutUvarint32</span><span class="op" id="7841176">(</span><span class="ident" id="7841177">b</span>&nbsp;<span class="op" id="7841179">*</span><span class="ident" id="7841180">testing</span><span class="op" id="7841187">.</span><span class="ident" id="7841188">B</span><span class="op" id="7841189">)</span>&nbsp;<span class="op" id="7841191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841194">buf</span>&nbsp;<span class="op" id="7841198">:=</span>&nbsp;<span class="builtinfunc" id="7841201">make</span><span class="op" id="7841205">(</span><span class="op" id="7841206">[</span><span class="op" id="7841207">]</span><span class="builtintype" id="7841208">byte</span><span class="op" id="7841212">,</span>&nbsp;<span class="ident" id="7841214">MaxVarintLen32</span><span class="op" id="7841228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841231">b</span><span class="op" id="7841232">.</span><span class="ident" id="7841233">SetBytes</span><span class="op" id="7841241">(</span><span class="num" id="7841242">4</span><span class="op" id="7841243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841246">for</span>&nbsp;<span class="ident" id="7841250">i</span>&nbsp;<span class="op" id="7841252">:=</span>&nbsp;<span class="num" id="7841255">0</span><span class="op" id="7841256">;</span>&nbsp;<span class="ident" id="7841258">i</span>&nbsp;<span class="op" id="7841260">&lt;</span>&nbsp;<span class="ident" id="7841262">b</span><span class="op" id="7841263">.</span><span class="ident" id="7841264">N</span><span class="op" id="7841265">;</span>&nbsp;<span class="ident" id="7841267">i</span><span class="op" id="7841268">++</span>&nbsp;<span class="op" id="7841271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841275">for</span>&nbsp;<span class="ident" id="7841279">j</span>&nbsp;<span class="op" id="7841281">:=</span>&nbsp;<span class="builtintype" id="7841284">uint</span><span class="op" id="7841288">(</span><span class="num" id="7841289">0</span><span class="op" id="7841290">)</span><span class="op" id="7841291">;</span>&nbsp;<span class="ident" id="7841293">j</span>&nbsp;<span class="op" id="7841295">&lt;</span>&nbsp;<span class="ident" id="7841297">MaxVarintLen32</span><span class="op" id="7841311">;</span>&nbsp;<span class="ident" id="7841313">j</span><span class="op" id="7841314">++</span>&nbsp;<span class="op" id="7841317">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841322">PutUvarint</span><span class="op" id="7841332">(</span><span class="ident" id="7841333">buf</span><span class="op" id="7841336">,</span>&nbsp;<span class="num" id="7841338">1</span><span class="op" id="7841339">&lt;&lt;</span><span class="op" id="7841341">(</span><span class="ident" id="7841342">j</span><span class="op" id="7841343">*</span><span class="num" id="7841344">7</span><span class="op" id="7841345">)</span><span class="op" id="7841346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841353">}</span><br>
<span class="lineno"></span><span class="op" id="7841355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7841358">func</span>&nbsp;<span class="ident" id="7841363">BenchmarkPutUvarint64</span><span class="op" id="7841384">(</span><span class="ident" id="7841385">b</span>&nbsp;<span class="op" id="7841387">*</span><span class="ident" id="7841388">testing</span><span class="op" id="7841395">.</span><span class="ident" id="7841396">B</span><span class="op" id="7841397">)</span>&nbsp;<span class="op" id="7841399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841402">buf</span>&nbsp;<span class="op" id="7841406">:=</span>&nbsp;<span class="builtinfunc" id="7841409">make</span><span class="op" id="7841413">(</span><span class="op" id="7841414">[</span><span class="op" id="7841415">]</span><span class="builtintype" id="7841416">byte</span><span class="op" id="7841420">,</span>&nbsp;<span class="ident" id="7841422">MaxVarintLen64</span><span class="op" id="7841436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841439">b</span><span class="op" id="7841440">.</span><span class="ident" id="7841441">SetBytes</span><span class="op" id="7841449">(</span><span class="num" id="7841450">8</span><span class="op" id="7841451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841454">for</span>&nbsp;<span class="ident" id="7841458">i</span>&nbsp;<span class="op" id="7841460">:=</span>&nbsp;<span class="num" id="7841463">0</span><span class="op" id="7841464">;</span>&nbsp;<span class="ident" id="7841466">i</span>&nbsp;<span class="op" id="7841468">&lt;</span>&nbsp;<span class="ident" id="7841470">b</span><span class="op" id="7841471">.</span><span class="ident" id="7841472">N</span><span class="op" id="7841473">;</span>&nbsp;<span class="ident" id="7841475">i</span><span class="op" id="7841476">++</span>&nbsp;<span class="op" id="7841479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7841483">for</span>&nbsp;<span class="ident" id="7841487">j</span>&nbsp;<span class="op" id="7841489">:=</span>&nbsp;<span class="builtintype" id="7841492">uint</span><span class="op" id="7841496">(</span><span class="num" id="7841497">0</span><span class="op" id="7841498">)</span><span class="op" id="7841499">;</span>&nbsp;<span class="ident" id="7841501">j</span>&nbsp;<span class="op" id="7841503">&lt;</span>&nbsp;<span class="ident" id="7841505">MaxVarintLen64</span><span class="op" id="7841519">;</span>&nbsp;<span class="ident" id="7841521">j</span><span class="op" id="7841522">++</span>&nbsp;<span class="op" id="7841525">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7841530">PutUvarint</span><span class="op" id="7841540">(</span><span class="ident" id="7841541">buf</span><span class="op" id="7841544">,</span>&nbsp;<span class="num" id="7841546">1</span><span class="op" id="7841547">&lt;&lt;</span><span class="op" id="7841549">(</span><span class="ident" id="7841550">j</span><span class="op" id="7841551">*</span><span class="num" id="7841552">7</span><span class="op" id="7841553">)</span><span class="op" id="7841554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7841561">}</span><br>
<span class="lineno"></span><span class="op" id="7841563">}</span>
</div>
</body>
</html>
