<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1704868">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1704923">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1704977">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1705028">package</span>&nbsp;<span class="ident" id="1705036">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1705045">import</span>&nbsp;<span class="string" id="1705052">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1705062">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1705146">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1705229">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1705256">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1705331">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1705389">type</span>&nbsp;<span class="ident" id="1705394">Func</span>&nbsp;<span class="keyword" id="1705399">struct</span>&nbsp;<span class="op" id="1705406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705409">opaque</span>&nbsp;<span class="keyword" id="1705416">struct</span><span class="op" id="1705422">{</span><span class="op" id="1705423">}</span>&nbsp;<span class="comment" id="1705425">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1705469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1705472">func</span>&nbsp;<span class="op" id="1705477">(</span><span class="ident" id="1705478">f</span>&nbsp;<span class="op" id="1705480">*</span><span class="ident" id="1705481">Func</span><span class="op" id="1705485">)</span>&nbsp;<span class="ident" id="1705487">raw</span><span class="op" id="1705490">(</span><span class="op" id="1705491">)</span>&nbsp;<span class="op" id="1705493">*</span><span class="ident" id="1705494">_func</span>&nbsp;<span class="op" id="1705500">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1705503">return</span>&nbsp;<span class="op" id="1705510">(</span><span class="op" id="1705511">*</span><span class="ident" id="1705512">_func</span><span class="op" id="1705517">)</span><span class="op" id="1705518">(</span><span class="ident" id="1705519">unsafe</span><span class="op" id="1705525">.</span><span class="ident" id="1705526">Pointer</span><span class="op" id="1705533">(</span><span class="ident" id="1705534">f</span><span class="op" id="1705535">)</span><span class="op" id="1705536">)</span><br>
<span class="lineno"></span><span class="op" id="1705538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1705541">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1705555">const</span>&nbsp;<span class="op" id="1705561">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705564">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1705592">=</span>&nbsp;<span class="num" id="1705594">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705597">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1705625">=</span>&nbsp;<span class="num" id="1705627">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705630">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1705658">=</span>&nbsp;<span class="num" id="1705660">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705663">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1705691">=</span>&nbsp;<span class="num" id="1705693">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705696">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1705724">=</span>&nbsp;<span class="num" id="1705726">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705729">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1705757">=</span>&nbsp;<span class="op" id="1705759">-</span><span class="num" id="1705760">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1705771">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1705774">var</span>&nbsp;<span class="op" id="1705778">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705781">pclntable</span>&nbsp;<span class="op" id="1705791">[</span><span class="op" id="1705792">]</span><span class="builtintype" id="1705793">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705799">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1705809">[</span><span class="op" id="1705810">]</span><span class="ident" id="1705811">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705820">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1705830">[</span><span class="op" id="1705831">]</span><span class="builtintype" id="1705832">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705841">pclntab</span><span class="op" id="1705848">,</span>&nbsp;<span class="ident" id="1705850">epclntab</span>&nbsp;<span class="keyword" id="1705859">struct</span><span class="op" id="1705865">{</span><span class="op" id="1705866">}</span>&nbsp;<span class="comment" id="1705868">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1705886">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1705889">type</span>&nbsp;<span class="ident" id="1705894">functab</span>&nbsp;<span class="keyword" id="1705902">struct</span>&nbsp;<span class="op" id="1705909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705912">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1705920">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1705929">funcoff</span>&nbsp;<span class="builtintype" id="1705937">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1705945">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1705948">func</span>&nbsp;<span class="ident" id="1705953">symtabinit</span><span class="op" id="1705963">(</span><span class="op" id="1705964">)</span>&nbsp;<span class="op" id="1705966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1705969">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1706025">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1706075">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706125">pcln</span>&nbsp;<span class="op" id="1706130">:=</span>&nbsp;<span class="op" id="1706133">(</span><span class="op" id="1706134">*</span><span class="op" id="1706135">[</span><span class="num" id="1706136">8</span><span class="op" id="1706137">]</span><span class="builtintype" id="1706138">byte</span><span class="op" id="1706142">)</span><span class="op" id="1706143">(</span><span class="ident" id="1706144">unsafe</span><span class="op" id="1706150">.</span><span class="ident" id="1706151">Pointer</span><span class="op" id="1706158">(</span><span class="op" id="1706159">&amp;</span><span class="ident" id="1706160">pclntab</span><span class="op" id="1706167">)</span><span class="op" id="1706168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706171">pcln32</span>&nbsp;<span class="op" id="1706178">:=</span>&nbsp;<span class="op" id="1706181">(</span><span class="op" id="1706182">*</span><span class="op" id="1706183">[</span><span class="num" id="1706184">2</span><span class="op" id="1706185">]</span><span class="builtintype" id="1706186">uint32</span><span class="op" id="1706192">)</span><span class="op" id="1706193">(</span><span class="ident" id="1706194">unsafe</span><span class="op" id="1706200">.</span><span class="ident" id="1706201">Pointer</span><span class="op" id="1706208">(</span><span class="op" id="1706209">&amp;</span><span class="ident" id="1706210">pclntab</span><span class="op" id="1706217">)</span><span class="op" id="1706218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1706221">if</span>&nbsp;<span class="ident" id="1706224">pcln32</span><span class="op" id="1706230">[</span><span class="num" id="1706231">0</span><span class="op" id="1706232">]</span>&nbsp;<span class="op" id="1706234">!=</span>&nbsp;<span class="num" id="1706237">0xfffffffb</span>&nbsp;<span class="op" id="1706248">||</span>&nbsp;<span class="ident" id="1706251">pcln</span><span class="op" id="1706255">[</span><span class="num" id="1706256">4</span><span class="op" id="1706257">]</span>&nbsp;<span class="op" id="1706259">!=</span>&nbsp;<span class="num" id="1706262">0</span>&nbsp;<span class="op" id="1706264">||</span>&nbsp;<span class="ident" id="1706267">pcln</span><span class="op" id="1706271">[</span><span class="num" id="1706272">5</span><span class="op" id="1706273">]</span>&nbsp;<span class="op" id="1706275">!=</span>&nbsp;<span class="num" id="1706278">0</span>&nbsp;<span class="op" id="1706280">||</span>&nbsp;<span class="ident" id="1706283">pcln</span><span class="op" id="1706287">[</span><span class="num" id="1706288">6</span><span class="op" id="1706289">]</span>&nbsp;<span class="op" id="1706291">!=</span>&nbsp;<span class="ident" id="1706294">_PCQuantum</span>&nbsp;<span class="op" id="1706305">||</span>&nbsp;<span class="ident" id="1706308">pcln</span><span class="op" id="1706312">[</span><span class="num" id="1706313">7</span><span class="op" id="1706314">]</span>&nbsp;<span class="op" id="1706316">!=</span>&nbsp;<span class="ident" id="1706319">ptrSize</span>&nbsp;<span class="op" id="1706327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1706331">println</span><span class="op" id="1706338">(</span><span class="string" id="1706339">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1706379">,</span>&nbsp;<span class="ident" id="1706381">hex</span><span class="op" id="1706384">(</span><span class="ident" id="1706385">pcln32</span><span class="op" id="1706391">[</span><span class="num" id="1706392">0</span><span class="op" id="1706393">]</span><span class="op" id="1706394">)</span><span class="op" id="1706395">,</span>&nbsp;<span class="ident" id="1706397">hex</span><span class="op" id="1706400">(</span><span class="ident" id="1706401">pcln</span><span class="op" id="1706405">[</span><span class="num" id="1706406">4</span><span class="op" id="1706407">]</span><span class="op" id="1706408">)</span><span class="op" id="1706409">,</span>&nbsp;<span class="ident" id="1706411">hex</span><span class="op" id="1706414">(</span><span class="ident" id="1706415">pcln</span><span class="op" id="1706419">[</span><span class="num" id="1706420">5</span><span class="op" id="1706421">]</span><span class="op" id="1706422">)</span><span class="op" id="1706423">,</span>&nbsp;<span class="ident" id="1706425">hex</span><span class="op" id="1706428">(</span><span class="ident" id="1706429">pcln</span><span class="op" id="1706433">[</span><span class="num" id="1706434">6</span><span class="op" id="1706435">]</span><span class="op" id="1706436">)</span><span class="op" id="1706437">,</span>&nbsp;<span class="ident" id="1706439">hex</span><span class="op" id="1706442">(</span><span class="ident" id="1706443">pcln</span><span class="op" id="1706447">[</span><span class="num" id="1706448">7</span><span class="op" id="1706449">]</span><span class="op" id="1706450">)</span><span class="op" id="1706451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706455">gothrow</span><span class="op" id="1706462">(</span><span class="string" id="1706463">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1706496">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1706499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1706503">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706549">sp</span>&nbsp;<span class="op" id="1706552">:=</span>&nbsp;<span class="op" id="1706555">(</span><span class="op" id="1706556">*</span><span class="ident" id="1706557">sliceStruct</span><span class="op" id="1706568">)</span><span class="op" id="1706569">(</span><span class="ident" id="1706570">unsafe</span><span class="op" id="1706576">.</span><span class="ident" id="1706577">Pointer</span><span class="op" id="1706584">(</span><span class="op" id="1706585">&amp;</span><span class="ident" id="1706586">pclntable</span><span class="op" id="1706595">)</span><span class="op" id="1706596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706599">sp</span><span class="op" id="1706601">.</span><span class="ident" id="1706602">array</span>&nbsp;<span class="op" id="1706608">=</span>&nbsp;<span class="ident" id="1706610">unsafe</span><span class="op" id="1706616">.</span><span class="ident" id="1706617">Pointer</span><span class="op" id="1706624">(</span><span class="op" id="1706625">&amp;</span><span class="ident" id="1706626">pclntab</span><span class="op" id="1706633">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706636">sp</span><span class="op" id="1706638">.</span><span class="builtinfunc" id="1706639">len</span>&nbsp;<span class="op" id="1706643">=</span>&nbsp;<span class="builtintype" id="1706645">int</span><span class="op" id="1706648">(</span><span class="builtintype" id="1706649">uintptr</span><span class="op" id="1706656">(</span><span class="ident" id="1706657">unsafe</span><span class="op" id="1706663">.</span><span class="ident" id="1706664">Pointer</span><span class="op" id="1706671">(</span><span class="op" id="1706672">&amp;</span><span class="ident" id="1706673">epclntab</span><span class="op" id="1706681">)</span><span class="op" id="1706682">)</span>&nbsp;<span class="op" id="1706684">-</span>&nbsp;<span class="builtintype" id="1706686">uintptr</span><span class="op" id="1706693">(</span><span class="ident" id="1706694">unsafe</span><span class="op" id="1706700">.</span><span class="ident" id="1706701">Pointer</span><span class="op" id="1706708">(</span><span class="op" id="1706709">&amp;</span><span class="ident" id="1706710">pclntab</span><span class="op" id="1706717">)</span><span class="op" id="1706718">)</span><span class="op" id="1706719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706722">sp</span><span class="op" id="1706724">.</span><span class="builtinfunc" id="1706725">cap</span>&nbsp;<span class="op" id="1706729">=</span>&nbsp;<span class="ident" id="1706731">sp</span><span class="op" id="1706733">.</span><span class="builtinfunc" id="1706734">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1706740">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706798">nftab</span>&nbsp;<span class="op" id="1706804">:=</span>&nbsp;<span class="builtintype" id="1706807">int</span><span class="op" id="1706810">(</span><span class="op" id="1706811">*</span><span class="op" id="1706812">(</span><span class="op" id="1706813">*</span><span class="builtintype" id="1706814">uintptr</span><span class="op" id="1706821">)</span><span class="op" id="1706822">(</span><span class="ident" id="1706823">add</span><span class="op" id="1706826">(</span><span class="ident" id="1706827">unsafe</span><span class="op" id="1706833">.</span><span class="ident" id="1706834">Pointer</span><span class="op" id="1706841">(</span><span class="ident" id="1706842">pcln</span><span class="op" id="1706846">)</span><span class="op" id="1706847">,</span>&nbsp;<span class="num" id="1706849">8</span><span class="op" id="1706850">)</span><span class="op" id="1706851">)</span><span class="op" id="1706852">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706855">p</span>&nbsp;<span class="op" id="1706857">:=</span>&nbsp;<span class="ident" id="1706860">add</span><span class="op" id="1706863">(</span><span class="ident" id="1706864">unsafe</span><span class="op" id="1706870">.</span><span class="ident" id="1706871">Pointer</span><span class="op" id="1706878">(</span><span class="ident" id="1706879">pcln</span><span class="op" id="1706883">)</span><span class="op" id="1706884">,</span>&nbsp;<span class="num" id="1706886">8</span><span class="op" id="1706887">+</span><span class="ident" id="1706888">ptrSize</span><span class="op" id="1706895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706898">sp</span>&nbsp;<span class="op" id="1706901">=</span>&nbsp;<span class="op" id="1706903">(</span><span class="op" id="1706904">*</span><span class="ident" id="1706905">sliceStruct</span><span class="op" id="1706916">)</span><span class="op" id="1706917">(</span><span class="ident" id="1706918">unsafe</span><span class="op" id="1706924">.</span><span class="ident" id="1706925">Pointer</span><span class="op" id="1706932">(</span><span class="op" id="1706933">&amp;</span><span class="ident" id="1706934">ftab</span><span class="op" id="1706938">)</span><span class="op" id="1706939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706942">sp</span><span class="op" id="1706944">.</span><span class="ident" id="1706945">array</span>&nbsp;<span class="op" id="1706951">=</span>&nbsp;<span class="ident" id="1706953">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706956">sp</span><span class="op" id="1706958">.</span><span class="builtinfunc" id="1706959">len</span>&nbsp;<span class="op" id="1706963">=</span>&nbsp;<span class="ident" id="1706965">nftab</span>&nbsp;<span class="op" id="1706971">+</span>&nbsp;<span class="num" id="1706973">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1706976">sp</span><span class="op" id="1706978">.</span><span class="builtinfunc" id="1706979">cap</span>&nbsp;<span class="op" id="1706983">=</span>&nbsp;<span class="ident" id="1706985">sp</span><span class="op" id="1706987">.</span><span class="builtinfunc" id="1706988">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1706993">for</span>&nbsp;<span class="ident" id="1706997">i</span>&nbsp;<span class="op" id="1706999">:=</span>&nbsp;<span class="num" id="1707002">0</span><span class="op" id="1707003">;</span>&nbsp;<span class="ident" id="1707005">i</span>&nbsp;<span class="op" id="1707007">&lt;</span>&nbsp;<span class="ident" id="1707009">nftab</span><span class="op" id="1707014">;</span>&nbsp;<span class="ident" id="1707016">i</span><span class="op" id="1707017">++</span>&nbsp;<span class="op" id="1707020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707024">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707108">if</span>&nbsp;<span class="ident" id="1707111">ftab</span><span class="op" id="1707115">[</span><span class="ident" id="1707116">i</span><span class="op" id="1707117">]</span><span class="op" id="1707118">.</span><span class="ident" id="1707119">entry</span>&nbsp;<span class="op" id="1707125">&gt;</span>&nbsp;<span class="ident" id="1707127">ftab</span><span class="op" id="1707131">[</span><span class="ident" id="1707132">i</span><span class="op" id="1707133">+</span><span class="num" id="1707134">1</span><span class="op" id="1707135">]</span><span class="op" id="1707136">.</span><span class="ident" id="1707137">entry</span>&nbsp;<span class="op" id="1707143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707148">f1</span>&nbsp;<span class="op" id="1707151">:=</span>&nbsp;<span class="op" id="1707154">(</span><span class="op" id="1707155">*</span><span class="ident" id="1707156">_func</span><span class="op" id="1707161">)</span><span class="op" id="1707162">(</span><span class="ident" id="1707163">unsafe</span><span class="op" id="1707169">.</span><span class="ident" id="1707170">Pointer</span><span class="op" id="1707177">(</span><span class="op" id="1707178">&amp;</span><span class="ident" id="1707179">pclntable</span><span class="op" id="1707188">[</span><span class="ident" id="1707189">ftab</span><span class="op" id="1707193">[</span><span class="ident" id="1707194">i</span><span class="op" id="1707195">]</span><span class="op" id="1707196">.</span><span class="ident" id="1707197">funcoff</span><span class="op" id="1707204">]</span><span class="op" id="1707205">)</span><span class="op" id="1707206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707211">f2</span>&nbsp;<span class="op" id="1707214">:=</span>&nbsp;<span class="op" id="1707217">(</span><span class="op" id="1707218">*</span><span class="ident" id="1707219">_func</span><span class="op" id="1707224">)</span><span class="op" id="1707225">(</span><span class="ident" id="1707226">unsafe</span><span class="op" id="1707232">.</span><span class="ident" id="1707233">Pointer</span><span class="op" id="1707240">(</span><span class="op" id="1707241">&amp;</span><span class="ident" id="1707242">pclntable</span><span class="op" id="1707251">[</span><span class="ident" id="1707252">ftab</span><span class="op" id="1707256">[</span><span class="ident" id="1707257">i</span><span class="op" id="1707258">+</span><span class="num" id="1707259">1</span><span class="op" id="1707260">]</span><span class="op" id="1707261">.</span><span class="ident" id="1707262">funcoff</span><span class="op" id="1707269">]</span><span class="op" id="1707270">)</span><span class="op" id="1707271">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707276">f2name</span>&nbsp;<span class="op" id="1707283">:=</span>&nbsp;<span class="string" id="1707286">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707295">if</span>&nbsp;<span class="ident" id="1707298">i</span><span class="op" id="1707299">+</span><span class="num" id="1707300">1</span>&nbsp;<span class="op" id="1707302">&lt;</span>&nbsp;<span class="ident" id="1707304">nftab</span>&nbsp;<span class="op" id="1707310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707316">f2name</span>&nbsp;<span class="op" id="1707323">=</span>&nbsp;<span class="ident" id="1707325">gofuncname</span><span class="op" id="1707335">(</span><span class="ident" id="1707336">f2</span><span class="op" id="1707338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1707348">println</span><span class="op" id="1707355">(</span><span class="string" id="1707356">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1707410">,</span>&nbsp;<span class="ident" id="1707412">hex</span><span class="op" id="1707415">(</span><span class="ident" id="1707416">ftab</span><span class="op" id="1707420">[</span><span class="ident" id="1707421">i</span><span class="op" id="1707422">]</span><span class="op" id="1707423">.</span><span class="ident" id="1707424">entry</span><span class="op" id="1707429">)</span><span class="op" id="1707430">,</span>&nbsp;<span class="ident" id="1707432">gofuncname</span><span class="op" id="1707442">(</span><span class="ident" id="1707443">f1</span><span class="op" id="1707445">)</span><span class="op" id="1707446">,</span>&nbsp;<span class="string" id="1707448">&#34;&gt;&#34;</span><span class="op" id="1707451">,</span>&nbsp;<span class="ident" id="1707453">hex</span><span class="op" id="1707456">(</span><span class="ident" id="1707457">ftab</span><span class="op" id="1707461">[</span><span class="ident" id="1707462">i</span><span class="op" id="1707463">+</span><span class="num" id="1707464">1</span><span class="op" id="1707465">]</span><span class="op" id="1707466">.</span><span class="ident" id="1707467">entry</span><span class="op" id="1707472">)</span><span class="op" id="1707473">,</span>&nbsp;<span class="ident" id="1707475">f2name</span><span class="op" id="1707481">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1707486">for</span>&nbsp;<span class="ident" id="1707490">j</span>&nbsp;<span class="op" id="1707492">:=</span>&nbsp;<span class="num" id="1707495">0</span><span class="op" id="1707496">;</span>&nbsp;<span class="ident" id="1707498">j</span>&nbsp;<span class="op" id="1707500">&lt;=</span>&nbsp;<span class="ident" id="1707503">i</span><span class="op" id="1707504">;</span>&nbsp;<span class="ident" id="1707506">j</span><span class="op" id="1707507">++</span>&nbsp;<span class="op" id="1707510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1707516">print</span><span class="op" id="1707521">(</span><span class="string" id="1707522">&#34;\t&#34;</span><span class="op" id="1707526">,</span>&nbsp;<span class="ident" id="1707528">hex</span><span class="op" id="1707531">(</span><span class="ident" id="1707532">ftab</span><span class="op" id="1707536">[</span><span class="ident" id="1707537">j</span><span class="op" id="1707538">]</span><span class="op" id="1707539">.</span><span class="ident" id="1707540">entry</span><span class="op" id="1707545">)</span><span class="op" id="1707546">,</span>&nbsp;<span class="string" id="1707548">&#34;&nbsp;&#34;</span><span class="op" id="1707551">,</span>&nbsp;<span class="ident" id="1707553">gofuncname</span><span class="op" id="1707563">(</span><span class="op" id="1707564">(</span><span class="op" id="1707565">*</span><span class="ident" id="1707566">_func</span><span class="op" id="1707571">)</span><span class="op" id="1707572">(</span><span class="ident" id="1707573">unsafe</span><span class="op" id="1707579">.</span><span class="ident" id="1707580">Pointer</span><span class="op" id="1707587">(</span><span class="op" id="1707588">&amp;</span><span class="ident" id="1707589">pclntable</span><span class="op" id="1707598">[</span><span class="ident" id="1707599">ftab</span><span class="op" id="1707603">[</span><span class="ident" id="1707604">j</span><span class="op" id="1707605">]</span><span class="op" id="1707606">.</span><span class="ident" id="1707607">funcoff</span><span class="op" id="1707614">]</span><span class="op" id="1707615">)</span><span class="op" id="1707616">)</span><span class="op" id="1707617">)</span><span class="op" id="1707618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707628">gothrow</span><span class="op" id="1707635">(</span><span class="string" id="1707636">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1707666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707670">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1707673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707677">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707734">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1707793">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707823">sp</span>&nbsp;<span class="op" id="1707826">=</span>&nbsp;<span class="op" id="1707828">(</span><span class="op" id="1707829">*</span><span class="ident" id="1707830">sliceStruct</span><span class="op" id="1707841">)</span><span class="op" id="1707842">(</span><span class="ident" id="1707843">unsafe</span><span class="op" id="1707849">.</span><span class="ident" id="1707850">Pointer</span><span class="op" id="1707857">(</span><span class="op" id="1707858">&amp;</span><span class="ident" id="1707859">filetab</span><span class="op" id="1707866">)</span><span class="op" id="1707867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707870">end</span>&nbsp;<span class="op" id="1707874">:=</span>&nbsp;<span class="ident" id="1707877">unsafe</span><span class="op" id="1707883">.</span><span class="ident" id="1707884">Pointer</span><span class="op" id="1707891">(</span><span class="op" id="1707892">&amp;</span><span class="ident" id="1707893">ftab</span><span class="op" id="1707897">[</span><span class="ident" id="1707898">nftab</span><span class="op" id="1707903">]</span><span class="op" id="1707904">.</span><span class="ident" id="1707905">funcoff</span><span class="op" id="1707912">)</span>&nbsp;<span class="comment" id="1707914">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707935">fileoffset</span>&nbsp;<span class="op" id="1707946">:=</span>&nbsp;<span class="op" id="1707949">*</span><span class="op" id="1707950">(</span><span class="op" id="1707951">*</span><span class="builtintype" id="1707952">uint32</span><span class="op" id="1707958">)</span><span class="op" id="1707959">(</span><span class="ident" id="1707960">end</span><span class="op" id="1707963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1707966">sp</span><span class="op" id="1707968">.</span><span class="ident" id="1707969">array</span>&nbsp;<span class="op" id="1707975">=</span>&nbsp;<span class="ident" id="1707977">unsafe</span><span class="op" id="1707983">.</span><span class="ident" id="1707984">Pointer</span><span class="op" id="1707991">(</span><span class="op" id="1707992">&amp;</span><span class="ident" id="1707993">pclntable</span><span class="op" id="1708002">[</span><span class="ident" id="1708003">fileoffset</span><span class="op" id="1708013">]</span><span class="op" id="1708014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708017">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708058">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708104">sp</span><span class="op" id="1708106">.</span><span class="builtinfunc" id="1708107">len</span>&nbsp;<span class="op" id="1708111">=</span>&nbsp;<span class="num" id="1708113">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708116">sp</span><span class="op" id="1708118">.</span><span class="builtinfunc" id="1708119">cap</span>&nbsp;<span class="op" id="1708123">=</span>&nbsp;<span class="num" id="1708125">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708128">sp</span><span class="op" id="1708130">.</span><span class="builtinfunc" id="1708131">len</span>&nbsp;<span class="op" id="1708135">=</span>&nbsp;<span class="builtintype" id="1708137">int</span><span class="op" id="1708140">(</span><span class="ident" id="1708141">filetab</span><span class="op" id="1708148">[</span><span class="num" id="1708149">0</span><span class="op" id="1708150">]</span><span class="op" id="1708151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708154">sp</span><span class="op" id="1708156">.</span><span class="builtinfunc" id="1708157">cap</span>&nbsp;<span class="op" id="1708161">=</span>&nbsp;<span class="ident" id="1708163">sp</span><span class="op" id="1708165">.</span><span class="builtinfunc" id="1708166">len</span><br>
<span class="lineno">100</span><span class="op" id="1708170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708173">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1708244">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1708291">func</span>&nbsp;<span class="ident" id="1708296">FuncForPC</span><span class="op" id="1708305">(</span><span class="ident" id="1708306">pc</span>&nbsp;<span class="builtintype" id="1708309">uintptr</span><span class="op" id="1708316">)</span>&nbsp;<span class="op" id="1708318">*</span><span class="ident" id="1708319">Func</span>&nbsp;<span class="op" id="1708324">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708327">return</span>&nbsp;<span class="op" id="1708334">(</span><span class="op" id="1708335">*</span><span class="ident" id="1708336">Func</span><span class="op" id="1708340">)</span><span class="op" id="1708341">(</span><span class="ident" id="1708342">unsafe</span><span class="op" id="1708348">.</span><span class="ident" id="1708349">Pointer</span><span class="op" id="1708356">(</span><span class="ident" id="1708357">findfunc</span><span class="op" id="1708365">(</span><span class="ident" id="1708366">pc</span><span class="op" id="1708368">)</span><span class="op" id="1708369">)</span><span class="op" id="1708370">)</span><br>
<span class="lineno"></span><span class="op" id="1708372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708375">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1708417">func</span>&nbsp;<span class="op" id="1708422">(</span><span class="ident" id="1708423">f</span>&nbsp;<span class="op" id="1708425">*</span><span class="ident" id="1708426">Func</span><span class="op" id="1708430">)</span>&nbsp;<span class="ident" id="1708432">Name</span><span class="op" id="1708436">(</span><span class="op" id="1708437">)</span>&nbsp;<span class="builtintype" id="1708439">string</span>&nbsp;<span class="op" id="1708446">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708449">return</span>&nbsp;<span class="ident" id="1708456">gofuncname</span><span class="op" id="1708466">(</span><span class="ident" id="1708467">f</span><span class="op" id="1708468">.</span><span class="ident" id="1708469">raw</span><span class="op" id="1708472">(</span><span class="op" id="1708473">)</span><span class="op" id="1708474">)</span><br>
<span class="lineno"></span><span class="op" id="1708476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708479">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1708531">func</span>&nbsp;<span class="op" id="1708536">(</span><span class="ident" id="1708537">f</span>&nbsp;<span class="op" id="1708539">*</span><span class="ident" id="1708540">Func</span><span class="op" id="1708544">)</span>&nbsp;<span class="ident" id="1708546">Entry</span><span class="op" id="1708551">(</span><span class="op" id="1708552">)</span>&nbsp;<span class="builtintype" id="1708554">uintptr</span>&nbsp;<span class="op" id="1708562">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1708565">return</span>&nbsp;<span class="ident" id="1708572">f</span><span class="op" id="1708573">.</span><span class="ident" id="1708574">raw</span><span class="op" id="1708577">(</span><span class="op" id="1708578">)</span><span class="op" id="1708579">.</span><span class="ident" id="1708580">entry</span><br>
<span class="lineno"></span><span class="op" id="1708586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1708589">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1708646">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1708702">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1708760">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1708781">func</span>&nbsp;<span class="op" id="1708786">(</span><span class="ident" id="1708787">f</span>&nbsp;<span class="op" id="1708789">*</span><span class="ident" id="1708790">Func</span><span class="op" id="1708794">)</span>&nbsp;<span class="ident" id="1708796">FileLine</span><span class="op" id="1708804">(</span><span class="ident" id="1708805">pc</span>&nbsp;<span class="builtintype" id="1708808">uintptr</span><span class="op" id="1708815">)</span>&nbsp;<span class="op" id="1708817">(</span><span class="ident" id="1708818">file</span>&nbsp;<span class="builtintype" id="1708823">string</span><span class="op" id="1708829">,</span>&nbsp;<span class="ident" id="1708831">line</span>&nbsp;<span class="builtintype" id="1708836">int</span><span class="op" id="1708839">)</span>&nbsp;<span class="op" id="1708841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708844">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1708911">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1708975">line</span>&nbsp;<span class="op" id="1708980">=</span>&nbsp;<span class="builtintype" id="1708982">int</span><span class="op" id="1708985">(</span><span class="ident" id="1708986">funcline1</span><span class="op" id="1708995">(</span><span class="ident" id="1708996">f</span><span class="op" id="1708997">.</span><span class="ident" id="1708998">raw</span><span class="op" id="1709001">(</span><span class="op" id="1709002">)</span><span class="op" id="1709003">,</span>&nbsp;<span class="ident" id="1709005">pc</span><span class="op" id="1709007">,</span>&nbsp;<span class="op" id="1709009">&amp;</span><span class="ident" id="1709010">file</span><span class="op" id="1709014">,</span>&nbsp;<span class="builtintype" id="1709016">false</span><span class="op" id="1709021">)</span><span class="op" id="1709022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709025">return</span>&nbsp;<span class="ident" id="1709032">file</span><span class="op" id="1709036">,</span>&nbsp;<span class="ident" id="1709038">line</span><br>
<span class="lineno"></span><span class="op" id="1709043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1709046">func</span>&nbsp;<span class="ident" id="1709051">findfunc</span><span class="op" id="1709059">(</span><span class="ident" id="1709060">pc</span>&nbsp;<span class="builtintype" id="1709063">uintptr</span><span class="op" id="1709070">)</span>&nbsp;<span class="op" id="1709072">*</span><span class="ident" id="1709073">_func</span>&nbsp;<span class="op" id="1709079">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709082">if</span>&nbsp;<span class="builtinfunc" id="1709085">len</span><span class="op" id="1709088">(</span><span class="ident" id="1709089">ftab</span><span class="op" id="1709093">)</span>&nbsp;<span class="op" id="1709095">==</span>&nbsp;<span class="num" id="1709098">0</span>&nbsp;<span class="op" id="1709100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709104">return</span>&nbsp;<span class="ident" id="1709111">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709120">if</span>&nbsp;<span class="ident" id="1709123">pc</span>&nbsp;<span class="op" id="1709126">&lt;</span>&nbsp;<span class="ident" id="1709128">ftab</span><span class="op" id="1709132">[</span><span class="num" id="1709133">0</span><span class="op" id="1709134">]</span><span class="op" id="1709135">.</span><span class="ident" id="1709136">entry</span>&nbsp;<span class="op" id="1709142">||</span>&nbsp;<span class="ident" id="1709145">pc</span>&nbsp;<span class="op" id="1709148">&gt;=</span>&nbsp;<span class="ident" id="1709151">ftab</span><span class="op" id="1709155">[</span><span class="builtinfunc" id="1709156">len</span><span class="op" id="1709159">(</span><span class="ident" id="1709160">ftab</span><span class="op" id="1709164">)</span><span class="op" id="1709165">-</span><span class="num" id="1709166">1</span><span class="op" id="1709167">]</span><span class="op" id="1709168">.</span><span class="ident" id="1709169">entry</span>&nbsp;<span class="op" id="1709175">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709179">return</span>&nbsp;<span class="ident" id="1709186">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1709195">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709244">lo</span>&nbsp;<span class="op" id="1709247">:=</span>&nbsp;<span class="num" id="1709250">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709253">nf</span>&nbsp;<span class="op" id="1709256">:=</span>&nbsp;<span class="builtinfunc" id="1709259">len</span><span class="op" id="1709262">(</span><span class="ident" id="1709263">ftab</span><span class="op" id="1709267">)</span>&nbsp;<span class="op" id="1709269">-</span>&nbsp;<span class="num" id="1709271">1</span>&nbsp;<span class="comment" id="1709273">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709300">for</span>&nbsp;<span class="ident" id="1709304">nf</span>&nbsp;<span class="op" id="1709307">&gt;</span>&nbsp;<span class="num" id="1709309">0</span>&nbsp;<span class="op" id="1709311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709315">n</span>&nbsp;<span class="op" id="1709317">:=</span>&nbsp;<span class="ident" id="1709320">nf</span>&nbsp;<span class="op" id="1709323">/</span>&nbsp;<span class="num" id="1709325">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709329">f</span>&nbsp;<span class="op" id="1709331">:=</span>&nbsp;<span class="op" id="1709334">&amp;</span><span class="ident" id="1709335">ftab</span><span class="op" id="1709339">[</span><span class="ident" id="1709340">lo</span><span class="op" id="1709342">+</span><span class="ident" id="1709343">n</span><span class="op" id="1709344">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709348">if</span>&nbsp;<span class="ident" id="1709351">f</span><span class="op" id="1709352">.</span><span class="ident" id="1709353">entry</span>&nbsp;<span class="op" id="1709359">&lt;=</span>&nbsp;<span class="ident" id="1709362">pc</span>&nbsp;<span class="op" id="1709365">&amp;&amp;</span>&nbsp;<span class="ident" id="1709368">pc</span>&nbsp;<span class="op" id="1709371">&lt;</span>&nbsp;<span class="ident" id="1709373">ftab</span><span class="op" id="1709377">[</span><span class="ident" id="1709378">lo</span><span class="op" id="1709380">+</span><span class="ident" id="1709381">n</span><span class="op" id="1709382">+</span><span class="num" id="1709383">1</span><span class="op" id="1709384">]</span><span class="op" id="1709385">.</span><span class="ident" id="1709386">entry</span>&nbsp;<span class="op" id="1709392">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709397">return</span>&nbsp;<span class="op" id="1709404">(</span><span class="op" id="1709405">*</span><span class="ident" id="1709406">_func</span><span class="op" id="1709411">)</span><span class="op" id="1709412">(</span><span class="ident" id="1709413">unsafe</span><span class="op" id="1709419">.</span><span class="ident" id="1709420">Pointer</span><span class="op" id="1709427">(</span><span class="op" id="1709428">&amp;</span><span class="ident" id="1709429">pclntable</span><span class="op" id="1709438">[</span><span class="ident" id="1709439">f</span><span class="op" id="1709440">.</span><span class="ident" id="1709441">funcoff</span><span class="op" id="1709448">]</span><span class="op" id="1709449">)</span><span class="op" id="1709450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709454">}</span>&nbsp;<span class="keyword" id="1709456">else</span>&nbsp;<span class="keyword" id="1709461">if</span>&nbsp;<span class="ident" id="1709464">pc</span>&nbsp;<span class="op" id="1709467">&lt;</span>&nbsp;<span class="ident" id="1709469">f</span><span class="op" id="1709470">.</span><span class="ident" id="1709471">entry</span>&nbsp;<span class="op" id="1709477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709482">nf</span>&nbsp;<span class="op" id="1709485">=</span>&nbsp;<span class="ident" id="1709487">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709491">}</span>&nbsp;<span class="keyword" id="1709493">else</span>&nbsp;<span class="op" id="1709498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709503">lo</span>&nbsp;<span class="op" id="1709506">+=</span>&nbsp;<span class="ident" id="1709509">n</span>&nbsp;<span class="op" id="1709511">+</span>&nbsp;<span class="num" id="1709513">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709518">nf</span>&nbsp;<span class="op" id="1709521">-=</span>&nbsp;<span class="ident" id="1709524">n</span>&nbsp;<span class="op" id="1709526">+</span>&nbsp;<span class="num" id="1709528">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709539">gothrow</span><span class="op" id="1709546">(</span><span class="string" id="1709547">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1709579">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709582">return</span>&nbsp;<span class="ident" id="1709589">nil</span><br>
<span class="lineno"></span><span class="op" id="1709593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1709596">func</span>&nbsp;<span class="ident" id="1709601">pcvalue</span><span class="op" id="1709608">(</span><span class="ident" id="1709609">f</span>&nbsp;<span class="op" id="1709611">*</span><span class="ident" id="1709612">_func</span><span class="op" id="1709617">,</span>&nbsp;<span class="ident" id="1709619">off</span>&nbsp;<span class="builtintype" id="1709623">int32</span><span class="op" id="1709628">,</span>&nbsp;<span class="ident" id="1709630">targetpc</span>&nbsp;<span class="builtintype" id="1709639">uintptr</span><span class="op" id="1709646">,</span>&nbsp;<span class="ident" id="1709648">strict</span>&nbsp;<span class="builtintype" id="1709655">bool</span><span class="op" id="1709659">)</span>&nbsp;<span class="builtintype" id="1709661">int32</span>&nbsp;<span class="op" id="1709667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709670">if</span>&nbsp;<span class="ident" id="1709673">off</span>&nbsp;<span class="op" id="1709677">==</span>&nbsp;<span class="num" id="1709680">0</span>&nbsp;<span class="op" id="1709682">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709686">return</span>&nbsp;<span class="op" id="1709693">-</span><span class="num" id="1709694">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709700">p</span>&nbsp;<span class="op" id="1709702">:=</span>&nbsp;<span class="ident" id="1709705">pclntable</span><span class="op" id="1709714">[</span><span class="ident" id="1709715">off</span><span class="op" id="1709718">:</span><span class="op" id="1709719">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709722">pc</span>&nbsp;<span class="op" id="1709725">:=</span>&nbsp;<span class="ident" id="1709728">f</span><span class="op" id="1709729">.</span><span class="ident" id="1709730">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709737">val</span>&nbsp;<span class="op" id="1709741">:=</span>&nbsp;<span class="builtintype" id="1709744">int32</span><span class="op" id="1709749">(</span><span class="op" id="1709750">-</span><span class="num" id="1709751">1</span><span class="op" id="1709752">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709755">for</span>&nbsp;<span class="op" id="1709759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709763">var</span>&nbsp;<span class="ident" id="1709767">ok</span>&nbsp;<span class="builtintype" id="1709770">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1709777">p</span><span class="op" id="1709778">,</span>&nbsp;<span class="ident" id="1709780">ok</span>&nbsp;<span class="op" id="1709783">=</span>&nbsp;<span class="ident" id="1709785">step</span><span class="op" id="1709789">(</span><span class="ident" id="1709790">p</span><span class="op" id="1709791">,</span>&nbsp;<span class="op" id="1709793">&amp;</span><span class="ident" id="1709794">pc</span><span class="op" id="1709796">,</span>&nbsp;<span class="op" id="1709798">&amp;</span><span class="ident" id="1709799">val</span><span class="op" id="1709802">,</span>&nbsp;<span class="ident" id="1709804">pc</span>&nbsp;<span class="op" id="1709807">==</span>&nbsp;<span class="ident" id="1709810">f</span><span class="op" id="1709811">.</span><span class="ident" id="1709812">entry</span><span class="op" id="1709817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709821">if</span>&nbsp;<span class="op" id="1709824">!</span><span class="ident" id="1709825">ok</span>&nbsp;<span class="op" id="1709828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709833">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709845">if</span>&nbsp;<span class="ident" id="1709848">targetpc</span>&nbsp;<span class="op" id="1709857">&lt;</span>&nbsp;<span class="ident" id="1709859">pc</span>&nbsp;<span class="op" id="1709862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709867">return</span>&nbsp;<span class="ident" id="1709874">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1709883">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1709887">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1709958">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1709990">if</span>&nbsp;<span class="ident" id="1709993">panicking</span>&nbsp;<span class="op" id="1710003">!=</span>&nbsp;<span class="num" id="1710006">0</span>&nbsp;<span class="op" id="1710008">||</span>&nbsp;<span class="op" id="1710011">!</span><span class="ident" id="1710012">strict</span>&nbsp;<span class="op" id="1710019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710023">return</span>&nbsp;<span class="op" id="1710030">-</span><span class="num" id="1710031">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1710038">print</span><span class="op" id="1710043">(</span><span class="string" id="1710044">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1710082">,</span>&nbsp;<span class="ident" id="1710084">gofuncname</span><span class="op" id="1710094">(</span><span class="ident" id="1710095">f</span><span class="op" id="1710096">)</span><span class="op" id="1710097">,</span>&nbsp;<span class="string" id="1710099">&#34;&nbsp;pc=&#34;</span><span class="op" id="1710105">,</span>&nbsp;<span class="ident" id="1710107">hex</span><span class="op" id="1710110">(</span><span class="ident" id="1710111">pc</span><span class="op" id="1710113">)</span><span class="op" id="1710114">,</span>&nbsp;<span class="string" id="1710116">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1710128">,</span>&nbsp;<span class="ident" id="1710130">hex</span><span class="op" id="1710133">(</span><span class="ident" id="1710134">targetpc</span><span class="op" id="1710142">)</span><span class="op" id="1710143">,</span>&nbsp;<span class="string" id="1710145">&#34;&nbsp;tab=&#34;</span><span class="op" id="1710152">,</span>&nbsp;<span class="ident" id="1710154">p</span><span class="op" id="1710155">,</span>&nbsp;<span class="string" id="1710157">&#34;\n&#34;</span><span class="op" id="1710161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710165">p</span>&nbsp;<span class="op" id="1710167">=</span>&nbsp;<span class="ident" id="1710169">pclntable</span><span class="op" id="1710178">[</span><span class="ident" id="1710179">off</span><span class="op" id="1710182">:</span><span class="op" id="1710183">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710186">pc</span>&nbsp;<span class="op" id="1710189">=</span>&nbsp;<span class="ident" id="1710191">f</span><span class="op" id="1710192">.</span><span class="ident" id="1710193">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710200">val</span>&nbsp;<span class="op" id="1710204">=</span>&nbsp;<span class="op" id="1710206">-</span><span class="num" id="1710207">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710210">for</span>&nbsp;<span class="op" id="1710214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710218">var</span>&nbsp;<span class="ident" id="1710222">ok</span>&nbsp;<span class="builtintype" id="1710225">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710232">p</span><span class="op" id="1710233">,</span>&nbsp;<span class="ident" id="1710235">ok</span>&nbsp;<span class="op" id="1710238">=</span>&nbsp;<span class="ident" id="1710240">step</span><span class="op" id="1710244">(</span><span class="ident" id="1710245">p</span><span class="op" id="1710246">,</span>&nbsp;<span class="op" id="1710248">&amp;</span><span class="ident" id="1710249">pc</span><span class="op" id="1710251">,</span>&nbsp;<span class="op" id="1710253">&amp;</span><span class="ident" id="1710254">val</span><span class="op" id="1710257">,</span>&nbsp;<span class="ident" id="1710259">pc</span>&nbsp;<span class="op" id="1710262">==</span>&nbsp;<span class="ident" id="1710265">f</span><span class="op" id="1710266">.</span><span class="ident" id="1710267">entry</span><span class="op" id="1710272">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710276">if</span>&nbsp;<span class="op" id="1710279">!</span><span class="ident" id="1710280">ok</span>&nbsp;<span class="op" id="1710283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710288">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1710300">print</span><span class="op" id="1710305">(</span><span class="string" id="1710306">&#34;\tvalue=&#34;</span><span class="op" id="1710316">,</span>&nbsp;<span class="ident" id="1710318">val</span><span class="op" id="1710321">,</span>&nbsp;<span class="string" id="1710323">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1710335">,</span>&nbsp;<span class="ident" id="1710337">hex</span><span class="op" id="1710340">(</span><span class="ident" id="1710341">pc</span><span class="op" id="1710343">)</span><span class="op" id="1710344">,</span>&nbsp;<span class="string" id="1710346">&#34;\n&#34;</span><span class="op" id="1710350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710353">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710357">gothrow</span><span class="op" id="1710364">(</span><span class="string" id="1710365">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1710395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710398">return</span>&nbsp;<span class="op" id="1710405">-</span><span class="num" id="1710406">1</span><br>
<span class="lineno"></span><span class="op" id="1710408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1710411">func</span>&nbsp;<span class="ident" id="1710416">funcname</span><span class="op" id="1710424">(</span><span class="ident" id="1710425">f</span>&nbsp;<span class="op" id="1710427">*</span><span class="ident" id="1710428">_func</span><span class="op" id="1710433">)</span>&nbsp;<span class="op" id="1710435">*</span><span class="builtintype" id="1710436">byte</span>&nbsp;<span class="op" id="1710441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710444">if</span>&nbsp;<span class="ident" id="1710447">f</span>&nbsp;<span class="op" id="1710449">==</span>&nbsp;<span class="ident" id="1710452">nil</span>&nbsp;<span class="op" id="1710456">||</span>&nbsp;<span class="ident" id="1710459">f</span><span class="op" id="1710460">.</span><span class="ident" id="1710461">nameoff</span>&nbsp;<span class="op" id="1710469">==</span>&nbsp;<span class="num" id="1710472">0</span>&nbsp;<span class="op" id="1710474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710478">return</span>&nbsp;<span class="ident" id="1710485">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710493">return</span>&nbsp;<span class="op" id="1710500">(</span><span class="op" id="1710501">*</span><span class="builtintype" id="1710502">byte</span><span class="op" id="1710506">)</span><span class="op" id="1710507">(</span><span class="ident" id="1710508">unsafe</span><span class="op" id="1710514">.</span><span class="ident" id="1710515">Pointer</span><span class="op" id="1710522">(</span><span class="op" id="1710523">&amp;</span><span class="ident" id="1710524">pclntable</span><span class="op" id="1710533">[</span><span class="ident" id="1710534">f</span><span class="op" id="1710535">.</span><span class="ident" id="1710536">nameoff</span><span class="op" id="1710543">]</span><span class="op" id="1710544">)</span><span class="op" id="1710545">)</span><br>
<span class="lineno">205</span><span class="op" id="1710547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1710550">func</span>&nbsp;<span class="ident" id="1710555">gofuncname</span><span class="op" id="1710565">(</span><span class="ident" id="1710566">f</span>&nbsp;<span class="op" id="1710568">*</span><span class="ident" id="1710569">_func</span><span class="op" id="1710574">)</span>&nbsp;<span class="builtintype" id="1710576">string</span>&nbsp;<span class="op" id="1710583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710586">return</span>&nbsp;<span class="ident" id="1710593">gostringnocopy</span><span class="op" id="1710607">(</span><span class="ident" id="1710608">funcname</span><span class="op" id="1710616">(</span><span class="ident" id="1710617">f</span><span class="op" id="1710618">)</span><span class="op" id="1710619">)</span><br>
<span class="lineno"></span><span class="op" id="1710621">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1710624">func</span>&nbsp;<span class="ident" id="1710629">funcline1</span><span class="op" id="1710638">(</span><span class="ident" id="1710639">f</span>&nbsp;<span class="op" id="1710641">*</span><span class="ident" id="1710642">_func</span><span class="op" id="1710647">,</span>&nbsp;<span class="ident" id="1710649">targetpc</span>&nbsp;<span class="builtintype" id="1710658">uintptr</span><span class="op" id="1710665">,</span>&nbsp;<span class="ident" id="1710667">file</span>&nbsp;<span class="op" id="1710672">*</span><span class="builtintype" id="1710673">string</span><span class="op" id="1710679">,</span>&nbsp;<span class="ident" id="1710681">strict</span>&nbsp;<span class="builtintype" id="1710688">bool</span><span class="op" id="1710692">)</span>&nbsp;<span class="builtintype" id="1710694">int32</span>&nbsp;<span class="op" id="1710700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710703">*</span><span class="ident" id="1710704">file</span>&nbsp;<span class="op" id="1710709">=</span>&nbsp;<span class="string" id="1710711">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710716">fileno</span>&nbsp;<span class="op" id="1710723">:=</span>&nbsp;<span class="builtintype" id="1710726">int</span><span class="op" id="1710729">(</span><span class="ident" id="1710730">pcvalue</span><span class="op" id="1710737">(</span><span class="ident" id="1710738">f</span><span class="op" id="1710739">,</span>&nbsp;<span class="ident" id="1710741">f</span><span class="op" id="1710742">.</span><span class="ident" id="1710743">pcfile</span><span class="op" id="1710749">,</span>&nbsp;<span class="ident" id="1710751">targetpc</span><span class="op" id="1710759">,</span>&nbsp;<span class="ident" id="1710761">strict</span><span class="op" id="1710767">)</span><span class="op" id="1710768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1710771">line</span>&nbsp;<span class="op" id="1710776">:=</span>&nbsp;<span class="ident" id="1710779">pcvalue</span><span class="op" id="1710786">(</span><span class="ident" id="1710787">f</span><span class="op" id="1710788">,</span>&nbsp;<span class="ident" id="1710790">f</span><span class="op" id="1710791">.</span><span class="ident" id="1710792">pcln</span><span class="op" id="1710796">,</span>&nbsp;<span class="ident" id="1710798">targetpc</span><span class="op" id="1710806">,</span>&nbsp;<span class="ident" id="1710808">strict</span><span class="op" id="1710814">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710817">if</span>&nbsp;<span class="ident" id="1710820">fileno</span>&nbsp;<span class="op" id="1710827">==</span>&nbsp;<span class="op" id="1710830">-</span><span class="num" id="1710831">1</span>&nbsp;<span class="op" id="1710833">||</span>&nbsp;<span class="ident" id="1710836">line</span>&nbsp;<span class="op" id="1710841">==</span>&nbsp;<span class="op" id="1710844">-</span><span class="num" id="1710845">1</span>&nbsp;<span class="op" id="1710847">||</span>&nbsp;<span class="ident" id="1710850">fileno</span>&nbsp;<span class="op" id="1710857">&gt;=</span>&nbsp;<span class="builtinfunc" id="1710860">len</span><span class="op" id="1710863">(</span><span class="ident" id="1710864">filetab</span><span class="op" id="1710871">)</span>&nbsp;<span class="op" id="1710873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1710877">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1710988">return</span>&nbsp;<span class="num" id="1710995">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1710998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711001">*</span><span class="ident" id="1711002">file</span>&nbsp;<span class="op" id="1711007">=</span>&nbsp;<span class="ident" id="1711009">gostringnocopy</span><span class="op" id="1711023">(</span><span class="op" id="1711024">&amp;</span><span class="ident" id="1711025">pclntable</span><span class="op" id="1711034">[</span><span class="ident" id="1711035">filetab</span><span class="op" id="1711042">[</span><span class="ident" id="1711043">fileno</span><span class="op" id="1711049">]</span><span class="op" id="1711050">]</span><span class="op" id="1711051">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711054">return</span>&nbsp;<span class="ident" id="1711061">line</span><br>
<span class="lineno"></span><span class="op" id="1711066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1711069">func</span>&nbsp;<span class="ident" id="1711074">funcline</span><span class="op" id="1711082">(</span><span class="ident" id="1711083">f</span>&nbsp;<span class="op" id="1711085">*</span><span class="ident" id="1711086">_func</span><span class="op" id="1711091">,</span>&nbsp;<span class="ident" id="1711093">targetpc</span>&nbsp;<span class="builtintype" id="1711102">uintptr</span><span class="op" id="1711109">,</span>&nbsp;<span class="ident" id="1711111">file</span>&nbsp;<span class="op" id="1711116">*</span><span class="builtintype" id="1711117">string</span><span class="op" id="1711123">)</span>&nbsp;<span class="builtintype" id="1711125">int32</span>&nbsp;<span class="op" id="1711131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711134">return</span>&nbsp;<span class="ident" id="1711141">funcline1</span><span class="op" id="1711150">(</span><span class="ident" id="1711151">f</span><span class="op" id="1711152">,</span>&nbsp;<span class="ident" id="1711154">targetpc</span><span class="op" id="1711162">,</span>&nbsp;<span class="ident" id="1711164">file</span><span class="op" id="1711168">,</span>&nbsp;<span class="builtintype" id="1711170">true</span><span class="op" id="1711174">)</span><br>
<span class="lineno">225</span><span class="op" id="1711176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1711179">func</span>&nbsp;<span class="ident" id="1711184">funcspdelta</span><span class="op" id="1711195">(</span><span class="ident" id="1711196">f</span>&nbsp;<span class="op" id="1711198">*</span><span class="ident" id="1711199">_func</span><span class="op" id="1711204">,</span>&nbsp;<span class="ident" id="1711206">targetpc</span>&nbsp;<span class="builtintype" id="1711215">uintptr</span><span class="op" id="1711222">)</span>&nbsp;<span class="builtintype" id="1711224">int32</span>&nbsp;<span class="op" id="1711230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711233">x</span>&nbsp;<span class="op" id="1711235">:=</span>&nbsp;<span class="ident" id="1711238">pcvalue</span><span class="op" id="1711245">(</span><span class="ident" id="1711246">f</span><span class="op" id="1711247">,</span>&nbsp;<span class="ident" id="1711249">f</span><span class="op" id="1711250">.</span><span class="ident" id="1711251">pcsp</span><span class="op" id="1711255">,</span>&nbsp;<span class="ident" id="1711257">targetpc</span><span class="op" id="1711265">,</span>&nbsp;<span class="builtintype" id="1711267">true</span><span class="op" id="1711271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711274">if</span>&nbsp;<span class="ident" id="1711277">x</span><span class="op" id="1711278">&amp;</span><span class="op" id="1711279">(</span><span class="ident" id="1711280">ptrSize</span><span class="op" id="1711287">-</span><span class="num" id="1711288">1</span><span class="op" id="1711289">)</span>&nbsp;<span class="op" id="1711291">!=</span>&nbsp;<span class="num" id="1711294">0</span>&nbsp;<span class="op" id="1711296">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1711300">print</span><span class="op" id="1711305">(</span><span class="string" id="1711306">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1711324">,</span>&nbsp;<span class="ident" id="1711326">hex</span><span class="op" id="1711329">(</span><span class="ident" id="1711330">f</span><span class="op" id="1711331">.</span><span class="ident" id="1711332">entry</span><span class="op" id="1711337">)</span><span class="op" id="1711338">,</span>&nbsp;<span class="string" id="1711340">&#34;&nbsp;&#34;</span><span class="op" id="1711343">,</span>&nbsp;<span class="ident" id="1711345">hex</span><span class="op" id="1711348">(</span><span class="ident" id="1711349">targetpc</span><span class="op" id="1711357">)</span><span class="op" id="1711358">,</span>&nbsp;<span class="string" id="1711360">&#34;&nbsp;&#34;</span><span class="op" id="1711363">,</span>&nbsp;<span class="ident" id="1711365">hex</span><span class="op" id="1711368">(</span><span class="ident" id="1711369">f</span><span class="op" id="1711370">.</span><span class="ident" id="1711371">pcsp</span><span class="op" id="1711375">)</span><span class="op" id="1711376">,</span>&nbsp;<span class="string" id="1711378">&#34;&nbsp;&#34;</span><span class="op" id="1711381">,</span>&nbsp;<span class="ident" id="1711383">x</span><span class="op" id="1711384">,</span>&nbsp;<span class="string" id="1711386">&#34;\n&#34;</span><span class="op" id="1711390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711396">return</span>&nbsp;<span class="ident" id="1711403">x</span><br>
<span class="lineno"></span><span class="op" id="1711405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1711408">func</span>&nbsp;<span class="ident" id="1711413">pcdatavalue</span><span class="op" id="1711424">(</span><span class="ident" id="1711425">f</span>&nbsp;<span class="op" id="1711427">*</span><span class="ident" id="1711428">_func</span><span class="op" id="1711433">,</span>&nbsp;<span class="ident" id="1711435">table</span>&nbsp;<span class="builtintype" id="1711441">int32</span><span class="op" id="1711446">,</span>&nbsp;<span class="ident" id="1711448">targetpc</span>&nbsp;<span class="builtintype" id="1711457">uintptr</span><span class="op" id="1711464">)</span>&nbsp;<span class="builtintype" id="1711466">int32</span>&nbsp;<span class="op" id="1711472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711475">if</span>&nbsp;<span class="ident" id="1711478">table</span>&nbsp;<span class="op" id="1711484">&lt;</span>&nbsp;<span class="num" id="1711486">0</span>&nbsp;<span class="op" id="1711488">||</span>&nbsp;<span class="ident" id="1711491">table</span>&nbsp;<span class="op" id="1711497">&gt;=</span>&nbsp;<span class="ident" id="1711500">f</span><span class="op" id="1711501">.</span><span class="ident" id="1711502">npcdata</span>&nbsp;<span class="op" id="1711510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711514">return</span>&nbsp;<span class="op" id="1711521">-</span><span class="num" id="1711522">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711528">off</span>&nbsp;<span class="op" id="1711532">:=</span>&nbsp;<span class="op" id="1711535">*</span><span class="op" id="1711536">(</span><span class="op" id="1711537">*</span><span class="builtintype" id="1711538">int32</span><span class="op" id="1711543">)</span><span class="op" id="1711544">(</span><span class="ident" id="1711545">add</span><span class="op" id="1711548">(</span><span class="ident" id="1711549">unsafe</span><span class="op" id="1711555">.</span><span class="ident" id="1711556">Pointer</span><span class="op" id="1711563">(</span><span class="op" id="1711564">&amp;</span><span class="ident" id="1711565">f</span><span class="op" id="1711566">.</span><span class="ident" id="1711567">nfuncdata</span><span class="op" id="1711576">)</span><span class="op" id="1711577">,</span>&nbsp;<span class="ident" id="1711579">unsafe</span><span class="op" id="1711585">.</span><span class="ident" id="1711586">Sizeof</span><span class="op" id="1711592">(</span><span class="ident" id="1711593">f</span><span class="op" id="1711594">.</span><span class="ident" id="1711595">nfuncdata</span><span class="op" id="1711604">)</span><span class="op" id="1711605">+</span><span class="builtintype" id="1711606">uintptr</span><span class="op" id="1711613">(</span><span class="ident" id="1711614">table</span><span class="op" id="1711619">)</span><span class="op" id="1711620">*</span><span class="num" id="1711621">4</span><span class="op" id="1711622">)</span><span class="op" id="1711623">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711626">return</span>&nbsp;<span class="ident" id="1711633">pcvalue</span><span class="op" id="1711640">(</span><span class="ident" id="1711641">f</span><span class="op" id="1711642">,</span>&nbsp;<span class="ident" id="1711644">off</span><span class="op" id="1711647">,</span>&nbsp;<span class="ident" id="1711649">targetpc</span><span class="op" id="1711657">,</span>&nbsp;<span class="builtintype" id="1711659">true</span><span class="op" id="1711663">)</span><br>
<span class="lineno"></span><span class="op" id="1711665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1711668">func</span>&nbsp;<span class="ident" id="1711673">funcdata</span><span class="op" id="1711681">(</span><span class="ident" id="1711682">f</span>&nbsp;<span class="op" id="1711684">*</span><span class="ident" id="1711685">_func</span><span class="op" id="1711690">,</span>&nbsp;<span class="ident" id="1711692">i</span>&nbsp;<span class="builtintype" id="1711694">int32</span><span class="op" id="1711699">)</span>&nbsp;<span class="ident" id="1711701">unsafe</span><span class="op" id="1711707">.</span><span class="ident" id="1711708">Pointer</span>&nbsp;<span class="op" id="1711716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711719">if</span>&nbsp;<span class="ident" id="1711722">i</span>&nbsp;<span class="op" id="1711724">&lt;</span>&nbsp;<span class="num" id="1711726">0</span>&nbsp;<span class="op" id="1711728">||</span>&nbsp;<span class="ident" id="1711731">i</span>&nbsp;<span class="op" id="1711733">&gt;=</span>&nbsp;<span class="ident" id="1711736">f</span><span class="op" id="1711737">.</span><span class="ident" id="1711738">nfuncdata</span>&nbsp;<span class="op" id="1711748">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711752">return</span>&nbsp;<span class="ident" id="1711759">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711767">p</span>&nbsp;<span class="op" id="1711769">:=</span>&nbsp;<span class="ident" id="1711772">add</span><span class="op" id="1711775">(</span><span class="ident" id="1711776">unsafe</span><span class="op" id="1711782">.</span><span class="ident" id="1711783">Pointer</span><span class="op" id="1711790">(</span><span class="op" id="1711791">&amp;</span><span class="ident" id="1711792">f</span><span class="op" id="1711793">.</span><span class="ident" id="1711794">nfuncdata</span><span class="op" id="1711803">)</span><span class="op" id="1711804">,</span>&nbsp;<span class="ident" id="1711806">unsafe</span><span class="op" id="1711812">.</span><span class="ident" id="1711813">Sizeof</span><span class="op" id="1711819">(</span><span class="ident" id="1711820">f</span><span class="op" id="1711821">.</span><span class="ident" id="1711822">nfuncdata</span><span class="op" id="1711831">)</span><span class="op" id="1711832">+</span><span class="builtintype" id="1711833">uintptr</span><span class="op" id="1711840">(</span><span class="ident" id="1711841">f</span><span class="op" id="1711842">.</span><span class="ident" id="1711843">npcdata</span><span class="op" id="1711850">)</span><span class="op" id="1711851">*</span><span class="num" id="1711852">4</span><span class="op" id="1711853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711856">if</span>&nbsp;<span class="ident" id="1711859">ptrSize</span>&nbsp;<span class="op" id="1711867">==</span>&nbsp;<span class="num" id="1711870">8</span>&nbsp;<span class="op" id="1711872">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1711875">uintptr</span><span class="op" id="1711882">(</span><span class="ident" id="1711883">p</span><span class="op" id="1711884">)</span><span class="op" id="1711885">&amp;</span><span class="num" id="1711886">4</span>&nbsp;<span class="op" id="1711888">!=</span>&nbsp;<span class="num" id="1711891">0</span>&nbsp;<span class="op" id="1711893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1711897">if</span>&nbsp;<span class="builtintype" id="1711900">uintptr</span><span class="op" id="1711907">(</span><span class="ident" id="1711908">unsafe</span><span class="op" id="1711914">.</span><span class="ident" id="1711915">Pointer</span><span class="op" id="1711922">(</span><span class="ident" id="1711923">f</span><span class="op" id="1711924">)</span><span class="op" id="1711925">)</span><span class="op" id="1711926">&amp;</span><span class="num" id="1711927">4</span>&nbsp;<span class="op" id="1711929">!=</span>&nbsp;<span class="num" id="1711932">0</span>&nbsp;<span class="op" id="1711934">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1711939">println</span><span class="op" id="1711946">(</span><span class="string" id="1711947">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1711973">,</span>&nbsp;<span class="ident" id="1711975">f</span><span class="op" id="1711976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1711984">p</span>&nbsp;<span class="op" id="1711986">=</span>&nbsp;<span class="ident" id="1711988">add</span><span class="op" id="1711991">(</span><span class="ident" id="1711992">p</span><span class="op" id="1711993">,</span>&nbsp;<span class="num" id="1711995">4</span><span class="op" id="1711996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1711999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712002">return</span>&nbsp;<span class="op" id="1712009">*</span><span class="op" id="1712010">(</span><span class="op" id="1712011">*</span><span class="ident" id="1712012">unsafe</span><span class="op" id="1712018">.</span><span class="ident" id="1712019">Pointer</span><span class="op" id="1712026">)</span><span class="op" id="1712027">(</span><span class="ident" id="1712028">add</span><span class="op" id="1712031">(</span><span class="ident" id="1712032">p</span><span class="op" id="1712033">,</span>&nbsp;<span class="builtintype" id="1712035">uintptr</span><span class="op" id="1712042">(</span><span class="ident" id="1712043">i</span><span class="op" id="1712044">)</span><span class="op" id="1712045">*</span><span class="ident" id="1712046">ptrSize</span><span class="op" id="1712053">)</span><span class="op" id="1712054">)</span><br>
<span class="lineno">255</span><span class="op" id="1712056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1712059">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1712125">func</span>&nbsp;<span class="ident" id="1712130">step</span><span class="op" id="1712134">(</span><span class="ident" id="1712135">p</span>&nbsp;<span class="op" id="1712137">[</span><span class="op" id="1712138">]</span><span class="builtintype" id="1712139">byte</span><span class="op" id="1712143">,</span>&nbsp;<span class="ident" id="1712145">pc</span>&nbsp;<span class="op" id="1712148">*</span><span class="builtintype" id="1712149">uintptr</span><span class="op" id="1712156">,</span>&nbsp;<span class="ident" id="1712158">val</span>&nbsp;<span class="op" id="1712162">*</span><span class="builtintype" id="1712163">int32</span><span class="op" id="1712168">,</span>&nbsp;<span class="ident" id="1712170">first</span>&nbsp;<span class="builtintype" id="1712176">bool</span><span class="op" id="1712180">)</span>&nbsp;<span class="op" id="1712182">(</span><span class="ident" id="1712183">newp</span>&nbsp;<span class="op" id="1712188">[</span><span class="op" id="1712189">]</span><span class="builtintype" id="1712190">byte</span><span class="op" id="1712194">,</span>&nbsp;<span class="ident" id="1712196">ok</span>&nbsp;<span class="builtintype" id="1712199">bool</span><span class="op" id="1712203">)</span>&nbsp;<span class="op" id="1712205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712208">p</span><span class="op" id="1712209">,</span>&nbsp;<span class="ident" id="1712211">uvdelta</span>&nbsp;<span class="op" id="1712219">:=</span>&nbsp;<span class="ident" id="1712222">readvarint</span><span class="op" id="1712232">(</span><span class="ident" id="1712233">p</span><span class="op" id="1712234">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712237">if</span>&nbsp;<span class="ident" id="1712240">uvdelta</span>&nbsp;<span class="op" id="1712248">==</span>&nbsp;<span class="num" id="1712251">0</span>&nbsp;<span class="op" id="1712253">&amp;&amp;</span>&nbsp;<span class="op" id="1712256">!</span><span class="ident" id="1712257">first</span>&nbsp;<span class="op" id="1712263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712267">return</span>&nbsp;<span class="ident" id="1712274">nil</span><span class="op" id="1712277">,</span>&nbsp;<span class="builtintype" id="1712279">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712289">if</span>&nbsp;<span class="ident" id="1712292">uvdelta</span><span class="op" id="1712299">&amp;</span><span class="num" id="1712300">1</span>&nbsp;<span class="op" id="1712302">!=</span>&nbsp;<span class="num" id="1712305">0</span>&nbsp;<span class="op" id="1712307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712311">uvdelta</span>&nbsp;<span class="op" id="1712319">=</span>&nbsp;<span class="op" id="1712321">^</span><span class="op" id="1712322">(</span><span class="ident" id="1712323">uvdelta</span>&nbsp;<span class="op" id="1712331">&gt;&gt;</span>&nbsp;<span class="num" id="1712334">1</span><span class="op" id="1712335">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712338">}</span>&nbsp;<span class="keyword" id="1712340">else</span>&nbsp;<span class="op" id="1712345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712349">uvdelta</span>&nbsp;<span class="op" id="1712357">&gt;&gt;=</span>&nbsp;<span class="num" id="1712361">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712367">vdelta</span>&nbsp;<span class="op" id="1712374">:=</span>&nbsp;<span class="builtintype" id="1712377">int32</span><span class="op" id="1712382">(</span><span class="ident" id="1712383">uvdelta</span><span class="op" id="1712390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712393">p</span><span class="op" id="1712394">,</span>&nbsp;<span class="ident" id="1712396">pcdelta</span>&nbsp;<span class="op" id="1712404">:=</span>&nbsp;<span class="ident" id="1712407">readvarint</span><span class="op" id="1712417">(</span><span class="ident" id="1712418">p</span><span class="op" id="1712419">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712422">*</span><span class="ident" id="1712423">pc</span>&nbsp;<span class="op" id="1712426">+=</span>&nbsp;<span class="builtintype" id="1712429">uintptr</span><span class="op" id="1712436">(</span><span class="ident" id="1712437">pcdelta</span>&nbsp;<span class="op" id="1712445">*</span>&nbsp;<span class="ident" id="1712447">_PCQuantum</span><span class="op" id="1712457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712460">*</span><span class="ident" id="1712461">val</span>&nbsp;<span class="op" id="1712465">+=</span>&nbsp;<span class="ident" id="1712468">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712476">return</span>&nbsp;<span class="ident" id="1712483">p</span><span class="op" id="1712484">,</span>&nbsp;<span class="builtintype" id="1712486">true</span><br>
<span class="lineno"></span><span class="op" id="1712491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1712494">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1712531">func</span>&nbsp;<span class="ident" id="1712536">readvarint</span><span class="op" id="1712546">(</span><span class="ident" id="1712547">p</span>&nbsp;<span class="op" id="1712549">[</span><span class="op" id="1712550">]</span><span class="builtintype" id="1712551">byte</span><span class="op" id="1712555">)</span>&nbsp;<span class="op" id="1712557">(</span><span class="ident" id="1712558">newp</span>&nbsp;<span class="op" id="1712563">[</span><span class="op" id="1712564">]</span><span class="builtintype" id="1712565">byte</span><span class="op" id="1712569">,</span>&nbsp;<span class="ident" id="1712571">val</span>&nbsp;<span class="builtintype" id="1712575">uint32</span><span class="op" id="1712581">)</span>&nbsp;<span class="op" id="1712583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712586">var</span>&nbsp;<span class="ident" id="1712590">v</span><span class="op" id="1712591">,</span>&nbsp;<span class="ident" id="1712593">shift</span>&nbsp;<span class="builtintype" id="1712599">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712607">for</span>&nbsp;<span class="op" id="1712611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712615">b</span>&nbsp;<span class="op" id="1712617">:=</span>&nbsp;<span class="ident" id="1712620">p</span><span class="op" id="1712621">[</span><span class="num" id="1712622">0</span><span class="op" id="1712623">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712627">p</span>&nbsp;<span class="op" id="1712629">=</span>&nbsp;<span class="ident" id="1712631">p</span><span class="op" id="1712632">[</span><span class="num" id="1712633">1</span><span class="op" id="1712634">:</span><span class="op" id="1712635">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712639">v</span>&nbsp;<span class="op" id="1712641">|=</span>&nbsp;<span class="op" id="1712644">(</span><span class="builtintype" id="1712645">uint32</span><span class="op" id="1712651">(</span><span class="ident" id="1712652">b</span><span class="op" id="1712653">)</span>&nbsp;<span class="op" id="1712655">&amp;</span>&nbsp;<span class="num" id="1712657">0x7F</span><span class="op" id="1712661">)</span>&nbsp;<span class="op" id="1712663">&lt;&lt;</span>&nbsp;<span class="ident" id="1712666">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712674">if</span>&nbsp;<span class="ident" id="1712677">b</span><span class="op" id="1712678">&amp;</span><span class="num" id="1712679">0x80</span>&nbsp;<span class="op" id="1712684">==</span>&nbsp;<span class="num" id="1712687">0</span>&nbsp;<span class="op" id="1712689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712694">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712702">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1712706">shift</span>&nbsp;<span class="op" id="1712712">+=</span>&nbsp;<span class="num" id="1712715">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1712718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1712721">return</span>&nbsp;<span class="ident" id="1712728">p</span><span class="op" id="1712729">,</span>&nbsp;<span class="ident" id="1712731">v</span><br>
<span class="lineno"></span><span class="op" id="1712733">}</span>
</div>
</body>
</html>
