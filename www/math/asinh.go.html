<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1418330">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1418385">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1418439">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1418490">package</span>&nbsp;<span class="ident" id="1418498">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1418504">//&nbsp;The&nbsp;original&nbsp;C&nbsp;code,&nbsp;the&nbsp;long&nbsp;comment,&nbsp;and&nbsp;the&nbsp;constants</span><br>
<span class="lineno"></span><span class="comment" id="1418564">//&nbsp;below&nbsp;are&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/s_asinh.c</span><br>
<span class="lineno"></span><span class="comment" id="1418624">//&nbsp;and&nbsp;came&nbsp;with&nbsp;this&nbsp;notice.&nbsp;&nbsp;The&nbsp;go&nbsp;code&nbsp;is&nbsp;a&nbsp;simplified</span><br>
<span class="lineno">10</span><span class="comment" id="1418683">//&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1418713">//</span><br>
<span class="lineno"></span><span class="comment" id="1418716">//&nbsp;====================================================</span><br>
<span class="lineno"></span><span class="comment" id="1418772">//&nbsp;Copyright&nbsp;(C)&nbsp;1993&nbsp;by&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1418841">//</span><br>
<span class="lineno">15</span><span class="comment" id="1418844">//&nbsp;Developed&nbsp;at&nbsp;SunPro,&nbsp;a&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;business.</span><br>
<span class="lineno"></span><span class="comment" id="1418903">//&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="1418959">//&nbsp;software&nbsp;is&nbsp;freely&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;notice</span><br>
<span class="lineno"></span><span class="comment" id="1419016">//&nbsp;is&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="comment" id="1419033">//&nbsp;====================================================</span><br>
<span class="lineno">20</span><span class="comment" id="1419089">//</span><br>
<span class="lineno"></span><span class="comment" id="1419092">//</span><br>
<span class="lineno"></span><span class="comment" id="1419095">//&nbsp;asinh(x)</span><br>
<span class="lineno"></span><span class="comment" id="1419107">//&nbsp;Method&nbsp;:</span><br>
<span class="lineno"></span><span class="comment" id="1419119">//&nbsp;&nbsp;&nbsp;&nbspBased&nbsp;on</span><br>
<span class="lineno">25</span><span class="comment" id="1419131">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asinh(x)&nbsp;=&nbsp;sign(x)&nbsp;*&nbsp;log&nbsp;[&nbsp;|x|&nbsp;+&nbsp;sqrt(x*x+1)&nbsp;]</span><br>
<span class="lineno"></span><span class="comment" id="1419189">//&nbsp;&nbsp;&nbsp;&nbspwe&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="1419200">//&nbsp;&nbsp;&nbsp;&nbspasinh(x)&nbsp;:=&nbsp;x&nbsp;&nbsp;if&nbsp;&nbsp;1+x*x=1,</span><br>
<span class="lineno"></span><span class="comment" id="1419231">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;sign(x)*(log(x)+ln2))&nbsp;for&nbsp;large&nbsp;|x|,&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1419288">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;sign(x)*log(2|x|+1/(|x|+sqrt(x*x+1)))&nbsp;if|x|&gt;2,&nbsp;else</span><br>
<span class="lineno">30</span><span class="comment" id="1419355">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;sign(x)*log1p(|x|&nbsp;+&nbsp;x**2/(1&nbsp;+&nbsp;sqrt(1+x**2)))</span><br>
<span class="lineno"></span><span class="comment" id="1419415">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1419419">//&nbsp;Asinh&nbsp;returns&nbsp;the&nbsp;inverse&nbsp;hyperbolic&nbsp;sine&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="1419470">//</span><br>
<span class="lineno">35</span><span class="comment" id="1419473">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1419495">//&nbsp;&nbsp;&nbsp;&nbspAsinh(±0)&nbsp;=&nbsp;±0</span><br>
<span class="lineno"></span><span class="comment" id="1419515">//&nbsp;&nbsp;&nbsp;&nbspAsinh(±Inf)&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span><span class="comment" id="1419539">//&nbsp;&nbsp;&nbsp;&nbspAsinh(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="1419559">func</span>&nbsp;<span class="ident" id="1419564">Asinh</span><span class="op" id="1419569">(</span><span class="ident" id="1419570">x</span>&nbsp;<span class="builtintype" id="1419572">float64</span><span class="op" id="1419579">)</span>&nbsp;<span class="builtintype" id="1419581">float64</span>&nbsp;<span class="op" id="1419589">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419592">const</span>&nbsp;<span class="op" id="1419598">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419602">Ln2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1419611">=</span>&nbsp;<span class="num" id="1419613">6.93147180559945286227e-01</span>&nbsp;<span class="comment" id="1419640">//&nbsp;0x3FE62E42FEFA39EF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419664">NearZero</span>&nbsp;<span class="op" id="1419673">=</span>&nbsp;<span class="num" id="1419675">1.0</span>&nbsp;<span class="op" id="1419679">/</span>&nbsp;<span class="op" id="1419681">(</span><span class="num" id="1419682">1</span>&nbsp;<span class="op" id="1419684">&lt;&lt;</span>&nbsp;<span class="num" id="1419687">28</span><span class="op" id="1419689">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1419702">//&nbsp;2**-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419714">Large</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1419723">=</span>&nbsp;<span class="num" id="1419725">1</span>&nbsp;<span class="op" id="1419727">&lt;&lt;</span>&nbsp;<span class="num" id="1419730">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1419752">//&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419762">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1419765">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419783">if</span>&nbsp;<span class="ident" id="1419786"><a href="/math/bits.go.html#1427394">IsNaN</a></span><span class="op" id="1419791">(</span><span class="ident" id="1419792"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1419793">)</span>&nbsp;<span class="op" id="1419795">||</span>&nbsp;<span class="ident" id="1419798"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1419803">(</span><span class="ident" id="1419804"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1419805">,</span>&nbsp;<span class="num" id="1419807">0</span><span class="op" id="1419808">)</span>&nbsp;<span class="op" id="1419810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419814">return</span>&nbsp;<span class="ident" id="1419821"><a href="/math/asinh.go.html#1419570">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419827">sign</span>&nbsp;<span class="op" id="1419832">:=</span>&nbsp;<span class="ident" id="1419835">false</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419842">if</span>&nbsp;<span class="ident" id="1419845"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1419847">&lt;</span>&nbsp;<span class="num" id="1419849">0</span>&nbsp;<span class="op" id="1419851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419855"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1419857">=</span>&nbsp;<span class="op" id="1419859">-</span><span class="ident" id="1419860"><a href="/math/asinh.go.html#1419570">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419864"><a href="/math/asinh.go.html#1419827">sign</a></span>&nbsp;<span class="op" id="1419869">=</span>&nbsp;<span class="ident" id="1419871">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1419877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419880">var</span>&nbsp;<span class="ident" id="1419884">temp</span>&nbsp;<span class="builtintype" id="1419889">float64</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419898">switch</span>&nbsp;<span class="op" id="1419905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419908">case</span>&nbsp;<span class="ident" id="1419913"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1419915">&gt;</span>&nbsp;<span class="ident" id="1419917"><a href="/math/asinh.go.html#1419714">Large</a></span><span class="op" id="1419922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419926"><a href="/math/asinh.go.html#1419884">temp</a></span>&nbsp;<span class="op" id="1419931">=</span>&nbsp;<span class="ident" id="1419933"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1419936">(</span><span class="ident" id="1419937"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1419938">)</span>&nbsp;<span class="op" id="1419940">+</span>&nbsp;<span class="ident" id="1419942"><a href="/math/asinh.go.html#1419602">Ln2</a></span>&nbsp;<span class="comment" id="1419946">//&nbsp;|x|&nbsp;&gt;&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1419962">case</span>&nbsp;<span class="ident" id="1419967"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1419969">&gt;</span>&nbsp;<span class="num" id="1419971">2</span><span class="op" id="1419972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1419976"><a href="/math/asinh.go.html#1419884">temp</a></span>&nbsp;<span class="op" id="1419981">=</span>&nbsp;<span class="ident" id="1419983"><a href="/math/log.go.html#1516693">Log</a></span><span class="op" id="1419986">(</span><span class="num" id="1419987">2</span><span class="op" id="1419988">*</span><span class="ident" id="1419989"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1419991">+</span>&nbsp;<span class="num" id="1419993">1</span><span class="op" id="1419994">/</span><span class="op" id="1419995">(</span><span class="ident" id="1419996"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1420000">(</span><span class="ident" id="1420001"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420002">*</span><span class="ident" id="1420003"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420004">+</span><span class="num" id="1420005">1</span><span class="op" id="1420006">)</span><span class="op" id="1420007">+</span><span class="ident" id="1420008"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420009">)</span><span class="op" id="1420010">)</span>&nbsp;<span class="comment" id="1420012">//&nbsp;2**28&nbsp;&gt;&nbsp;|x|&nbsp;&gt;&nbsp;2.0</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420034">case</span>&nbsp;<span class="ident" id="1420039"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1420041">&lt;</span>&nbsp;<span class="ident" id="1420043"><a href="/math/asinh.go.html#1419664">NearZero</a></span><span class="op" id="1420051">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420055"><a href="/math/asinh.go.html#1419884">temp</a></span>&nbsp;<span class="op" id="1420060">=</span>&nbsp;<span class="ident" id="1420062"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="comment" id="1420064">//&nbsp;|x|&nbsp;&lt;&nbsp;2**-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420081">default</span><span class="op" id="1420088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420092"><a href="/math/asinh.go.html#1419884">temp</a></span>&nbsp;<span class="op" id="1420097">=</span>&nbsp;<span class="ident" id="1420099"><a href="/math/log1p.go.html#1522074">Log1p</a></span><span class="op" id="1420104">(</span><span class="ident" id="1420105"><a href="/math/asinh.go.html#1419570">x</a></span>&nbsp;<span class="op" id="1420107">+</span>&nbsp;<span class="ident" id="1420109"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420110">*</span><span class="ident" id="1420111"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420112">/</span><span class="op" id="1420113">(</span><span class="num" id="1420114">1</span><span class="op" id="1420115">+</span><span class="ident" id="1420116"><a href="/math/sqrt.go.html#1548013">Sqrt</a></span><span class="op" id="1420120">(</span><span class="num" id="1420121">1</span><span class="op" id="1420122">+</span><span class="ident" id="1420123"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420124">*</span><span class="ident" id="1420125"><a href="/math/asinh.go.html#1419570">x</a></span><span class="op" id="1420126">)</span><span class="op" id="1420127">)</span><span class="op" id="1420128">)</span>&nbsp;<span class="comment" id="1420130">//&nbsp;2.0&nbsp;&gt;&nbsp;|x|&nbsp;&gt;&nbsp;2**-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420153">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420156">if</span>&nbsp;<span class="ident" id="1420159"><a href="/math/asinh.go.html#1419827">sign</a></span>&nbsp;<span class="op" id="1420164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1420168"><a href="/math/asinh.go.html#1419884">temp</a></span>&nbsp;<span class="op" id="1420173">=</span>&nbsp;<span class="op" id="1420175">-</span><span class="ident" id="1420176"><a href="/math/asinh.go.html#1419884">temp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1420182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1420185">return</span>&nbsp;<span class="ident" id="1420192"><a href="/math/asinh.go.html#1419884">temp</a></span><br>
<span class="lineno"></span><span class="op" id="1420197">}</span>
</div>
</body>
</html>
