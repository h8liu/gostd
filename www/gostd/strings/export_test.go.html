<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7525548">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7525603">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7525657">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7525708">package</span>&nbsp;<span class="ident" id="7525716">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7525725">func</span>&nbsp;<span class="op" id="7525730">(</span><span class="ident" id="7525731">r</span>&nbsp;<span class="op" id="7525733">*</span><span class="ident" id="7525734">Replacer</span><span class="op" id="7525742">)</span>&nbsp;<span class="ident" id="7525744">Replacer</span><span class="op" id="7525752">(</span><span class="op" id="7525753">)</span>&nbsp;<span class="keyword" id="7525755">interface</span><span class="op" id="7525764">{</span><span class="op" id="7525765">}</span>&nbsp;<span class="op" id="7525767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525770">return</span>&nbsp;<span class="ident" id="7525777">r</span><span class="op" id="7525778">.</span><span class="ident" id="7525779">r</span><br>
<span class="lineno"></span><span class="op" id="7525781">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7525784">func</span>&nbsp;<span class="op" id="7525789">(</span><span class="ident" id="7525790">r</span>&nbsp;<span class="op" id="7525792">*</span><span class="ident" id="7525793">Replacer</span><span class="op" id="7525801">)</span>&nbsp;<span class="ident" id="7525803">PrintTrie</span><span class="op" id="7525812">(</span><span class="op" id="7525813">)</span>&nbsp;<span class="builtintype" id="7525815">string</span>&nbsp;<span class="op" id="7525822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525825">gen</span>&nbsp;<span class="op" id="7525829">:=</span>&nbsp;<span class="ident" id="7525832">r</span><span class="op" id="7525833">.</span><span class="ident" id="7525834">r</span><span class="op" id="7525835">.</span><span class="op" id="7525836">(</span><span class="op" id="7525837">*</span><span class="ident" id="7525838">genericReplacer</span><span class="op" id="7525853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525856">return</span>&nbsp;<span class="ident" id="7525863">gen</span><span class="op" id="7525866">.</span><span class="ident" id="7525867">printNode</span><span class="op" id="7525876">(</span><span class="op" id="7525877">&amp;</span><span class="ident" id="7525878">gen</span><span class="op" id="7525881">.</span><span class="ident" id="7525882">root</span><span class="op" id="7525886">,</span>&nbsp;<span class="num" id="7525888">0</span><span class="op" id="7525889">)</span><br>
<span class="lineno"></span><span class="op" id="7525891">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7525894">func</span>&nbsp;<span class="op" id="7525899">(</span><span class="ident" id="7525900">r</span>&nbsp;<span class="op" id="7525902">*</span><span class="ident" id="7525903">genericReplacer</span><span class="op" id="7525918">)</span>&nbsp;<span class="ident" id="7525920">printNode</span><span class="op" id="7525929">(</span><span class="ident" id="7525930">t</span>&nbsp;<span class="op" id="7525932">*</span><span class="ident" id="7525933">trieNode</span><span class="op" id="7525941">,</span>&nbsp;<span class="ident" id="7525943">depth</span>&nbsp;<span class="builtintype" id="7525949">int</span><span class="op" id="7525952">)</span>&nbsp;<span class="op" id="7525954">(</span><span class="ident" id="7525955">s</span>&nbsp;<span class="builtintype" id="7525957">string</span><span class="op" id="7525963">)</span>&nbsp;<span class="op" id="7525965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7525968">if</span>&nbsp;<span class="ident" id="7525971">t</span><span class="op" id="7525972">.</span><span class="ident" id="7525973">priority</span>&nbsp;<span class="op" id="7525982">&gt;</span>&nbsp;<span class="num" id="7525984">0</span>&nbsp;<span class="op" id="7525986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7525990">s</span>&nbsp;<span class="op" id="7525992">+=</span>&nbsp;<span class="string" id="7525995">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526000">}</span>&nbsp;<span class="keyword" id="7526002">else</span>&nbsp;<span class="op" id="7526007">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526011">s</span>&nbsp;<span class="op" id="7526013">+=</span>&nbsp;<span class="string" id="7526016">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526024">s</span>&nbsp;<span class="op" id="7526026">+=</span>&nbsp;<span class="string" id="7526029">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526036">if</span>&nbsp;<span class="ident" id="7526039">t</span><span class="op" id="7526040">.</span><span class="ident" id="7526041">prefix</span>&nbsp;<span class="op" id="7526048">!=</span>&nbsp;<span class="string" id="7526051">&#34;&#34;</span>&nbsp;<span class="op" id="7526054">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526058">s</span>&nbsp;<span class="op" id="7526060">+=</span>&nbsp;<span class="ident" id="7526063">Repeat</span><span class="op" id="7526069">(</span><span class="string" id="7526070">&#34;.&#34;</span><span class="op" id="7526073">,</span>&nbsp;<span class="ident" id="7526075">depth</span><span class="op" id="7526080">)</span>&nbsp;<span class="op" id="7526082">+</span>&nbsp;<span class="ident" id="7526084">t</span><span class="op" id="7526085">.</span><span class="ident" id="7526086">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526095">s</span>&nbsp;<span class="op" id="7526097">+=</span>&nbsp;<span class="ident" id="7526100">r</span><span class="op" id="7526101">.</span><span class="ident" id="7526102">printNode</span><span class="op" id="7526111">(</span><span class="ident" id="7526112">t</span><span class="op" id="7526113">.</span><span class="ident" id="7526114">next</span><span class="op" id="7526118">,</span>&nbsp;<span class="ident" id="7526120">depth</span><span class="op" id="7526125">+</span><span class="builtinfunc" id="7526126">len</span><span class="op" id="7526129">(</span><span class="ident" id="7526130">t</span><span class="op" id="7526131">.</span><span class="ident" id="7526132">prefix</span><span class="op" id="7526138">)</span><span class="op" id="7526139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526142">}</span>&nbsp;<span class="keyword" id="7526144">else</span>&nbsp;<span class="keyword" id="7526149">if</span>&nbsp;<span class="ident" id="7526152">t</span><span class="op" id="7526153">.</span><span class="ident" id="7526154">table</span>&nbsp;<span class="op" id="7526160">!=</span>&nbsp;<span class="ident" id="7526163">nil</span>&nbsp;<span class="op" id="7526167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526171">for</span>&nbsp;<span class="ident" id="7526175">b</span><span class="op" id="7526176">,</span>&nbsp;<span class="ident" id="7526178">m</span>&nbsp;<span class="op" id="7526180">:=</span>&nbsp;<span class="keyword" id="7526183">range</span>&nbsp;<span class="ident" id="7526189">r</span><span class="op" id="7526190">.</span><span class="ident" id="7526191">mapping</span>&nbsp;<span class="op" id="7526199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526204">if</span>&nbsp;<span class="builtintype" id="7526207">int</span><span class="op" id="7526210">(</span><span class="ident" id="7526211">m</span><span class="op" id="7526212">)</span>&nbsp;<span class="op" id="7526214">!=</span>&nbsp;<span class="ident" id="7526217">r</span><span class="op" id="7526218">.</span><span class="ident" id="7526219">tableSize</span>&nbsp;<span class="op" id="7526229">&amp;&amp;</span>&nbsp;<span class="ident" id="7526232">t</span><span class="op" id="7526233">.</span><span class="ident" id="7526234">table</span><span class="op" id="7526239">[</span><span class="ident" id="7526240">m</span><span class="op" id="7526241">]</span>&nbsp;<span class="op" id="7526243">!=</span>&nbsp;<span class="ident" id="7526246">nil</span>&nbsp;<span class="op" id="7526250">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526256">s</span>&nbsp;<span class="op" id="7526258">+=</span>&nbsp;<span class="ident" id="7526261">Repeat</span><span class="op" id="7526267">(</span><span class="string" id="7526268">&#34;.&#34;</span><span class="op" id="7526271">,</span>&nbsp;<span class="ident" id="7526273">depth</span><span class="op" id="7526278">)</span>&nbsp;<span class="op" id="7526280">+</span>&nbsp;<span class="builtintype" id="7526282">string</span><span class="op" id="7526288">(</span><span class="op" id="7526289">[</span><span class="op" id="7526290">]</span><span class="builtintype" id="7526291">byte</span><span class="op" id="7526295">{</span><span class="builtintype" id="7526296">byte</span><span class="op" id="7526300">(</span><span class="ident" id="7526301">b</span><span class="op" id="7526302">)</span><span class="op" id="7526303">}</span><span class="op" id="7526304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526310">s</span>&nbsp;<span class="op" id="7526312">+=</span>&nbsp;<span class="ident" id="7526315">r</span><span class="op" id="7526316">.</span><span class="ident" id="7526317">printNode</span><span class="op" id="7526326">(</span><span class="ident" id="7526327">t</span><span class="op" id="7526328">.</span><span class="ident" id="7526329">table</span><span class="op" id="7526334">[</span><span class="ident" id="7526335">m</span><span class="op" id="7526336">]</span><span class="op" id="7526337">,</span>&nbsp;<span class="ident" id="7526339">depth</span><span class="op" id="7526344">+</span><span class="num" id="7526345">1</span><span class="op" id="7526346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7526358">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526361">return</span><br>
<span class="lineno"></span><span class="op" id="7526368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526371">func</span>&nbsp;<span class="ident" id="7526376">StringFind</span><span class="op" id="7526386">(</span><span class="ident" id="7526387">pattern</span><span class="op" id="7526394">,</span>&nbsp;<span class="ident" id="7526396">text</span>&nbsp;<span class="builtintype" id="7526401">string</span><span class="op" id="7526407">)</span>&nbsp;<span class="builtintype" id="7526409">int</span>&nbsp;<span class="op" id="7526413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526416">return</span>&nbsp;<span class="ident" id="7526423">makeStringFinder</span><span class="op" id="7526439">(</span><span class="ident" id="7526440">pattern</span><span class="op" id="7526447">)</span><span class="op" id="7526448">.</span><span class="ident" id="7526449">next</span><span class="op" id="7526453">(</span><span class="ident" id="7526454">text</span><span class="op" id="7526458">)</span><br>
<span class="lineno">40</span><span class="op" id="7526460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7526463">func</span>&nbsp;<span class="ident" id="7526468">DumpTables</span><span class="op" id="7526478">(</span><span class="ident" id="7526479">pattern</span>&nbsp;<span class="builtintype" id="7526487">string</span><span class="op" id="7526493">)</span>&nbsp;<span class="op" id="7526495">(</span><span class="op" id="7526496">[</span><span class="op" id="7526497">]</span><span class="builtintype" id="7526498">int</span><span class="op" id="7526501">,</span>&nbsp;<span class="op" id="7526503">[</span><span class="op" id="7526504">]</span><span class="builtintype" id="7526505">int</span><span class="op" id="7526508">)</span>&nbsp;<span class="op" id="7526510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7526513">finder</span>&nbsp;<span class="op" id="7526520">:=</span>&nbsp;<span class="ident" id="7526523">makeStringFinder</span><span class="op" id="7526539">(</span><span class="ident" id="7526540">pattern</span><span class="op" id="7526547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7526550">return</span>&nbsp;<span class="ident" id="7526557">finder</span><span class="op" id="7526563">.</span><span class="ident" id="7526564">badCharSkip</span><span class="op" id="7526575">[</span><span class="op" id="7526576">:</span><span class="op" id="7526577">]</span><span class="op" id="7526578">,</span>&nbsp;<span class="ident" id="7526580">finder</span><span class="op" id="7526586">.</span><span class="ident" id="7526587">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7526602">}</span>
</div>
</body>
</html>
