<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html" class="current">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5110884">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5110939">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5110993">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5111044">package</span>&nbsp;<span class="ident" id="5111052">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5111062">import</span>&nbsp;<span class="op" id="5111069">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5111072">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5111079">&#34;reflect&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5111089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5111092">//&nbsp;Strings&nbsp;of&nbsp;content&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="5111137">type</span>&nbsp;<span class="op" id="5111142">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111145">//&nbsp;CSS&nbsp;encapsulates&nbsp;known&nbsp;safe&nbsp;content&nbsp;that&nbsp;matches&nbsp;any&nbsp;of:</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111206">//&nbsp;&nbsp;&nbsp;1.&nbsp;The&nbsp;CSS3&nbsp;stylesheet&nbsp;production,&nbsp;such&nbsp;as&nbsp;`p&nbsp;{&nbsp;color:&nbsp;purple&nbsp;}`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111278">//&nbsp;&nbsp;&nbsp;2.&nbsp;The&nbsp;CSS3&nbsp;rule&nbsp;production,&nbsp;such&nbsp;as&nbsp;`a[href=~&#34;https:&#34;].foo#bar`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111350">//&nbsp;&nbsp;&nbsp;3.&nbsp;CSS3&nbsp;declaration&nbsp;productions,&nbsp;such&nbsp;as&nbsp;`color:&nbsp;red;&nbsp;margin:&nbsp;2px`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111424">//&nbsp;&nbsp;&nbsp;4.&nbsp;The&nbsp;CSS3&nbsp;value&nbsp;production,&nbsp;such&nbsp;as&nbsp;`rgba(0,&nbsp;0,&nbsp;255,&nbsp;127)`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111492">//&nbsp;See&nbsp;http://www.w3.org/TR/css3-syntax/#parsing&nbsp;and</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111546">//&nbsp;https://web.archive.org/web/20090211114933/http://w3.org/TR/css3-syntax#style</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5111628">CSS</span>&nbsp;<span class="builtintype" id="5111632">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111641">//&nbsp;HTML&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;HTML&nbsp;document&nbsp;fragment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111700">//&nbsp;It&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;for&nbsp;HTML&nbsp;from&nbsp;a&nbsp;third-party,&nbsp;or&nbsp;HTML&nbsp;with</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111768">//&nbsp;unclosed&nbsp;tags&nbsp;or&nbsp;comments.&nbsp;The&nbsp;outputs&nbsp;of&nbsp;a&nbsp;sound&nbsp;HTML&nbsp;sanitizer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111837">//&nbsp;and&nbsp;a&nbsp;template&nbsp;escaped&nbsp;by&nbsp;this&nbsp;package&nbsp;are&nbsp;fine&nbsp;for&nbsp;use&nbsp;with&nbsp;HTML.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5111908">HTML</span>&nbsp;<span class="builtintype" id="5111913">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111922">//&nbsp;HTMLAttr&nbsp;encapsulates&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5111989">//&nbsp;for&nbsp;example,&nbsp;`&nbsp;dir=&#34;ltr&#34;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5112020">HTMLAttr</span>&nbsp;<span class="builtintype" id="5112029">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112038">//&nbsp;JS&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;EcmaScript5&nbsp;Expression,&nbsp;for&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112108">//&nbsp;`(x&nbsp;+&nbsp;y&nbsp;*&nbsp;z())`.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112129">//&nbsp;Template&nbsp;authors&nbsp;are&nbsp;responsible&nbsp;for&nbsp;ensuring&nbsp;that&nbsp;typed&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112202">//&nbsp;do&nbsp;not&nbsp;break&nbsp;the&nbsp;intended&nbsp;precedence&nbsp;and&nbsp;that&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112264">//&nbsp;statement/expression&nbsp;ambiguity&nbsp;as&nbsp;when&nbsp;passing&nbsp;an&nbsp;expression&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112334">//&nbsp;&#34;{&nbsp;foo:&nbsp;bar()&nbsp;}\n[&#39;foo&#39;]()&#34;,&nbsp;which&nbsp;is&nbsp;both&nbsp;a&nbsp;valid&nbsp;Expression&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112406">//&nbsp;valid&nbsp;Program&nbsp;with&nbsp;a&nbsp;very&nbsp;different&nbsp;meaning.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5112455">JS</span>&nbsp;<span class="builtintype" id="5112458">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112467">//&nbsp;JSStr&nbsp;encapsulates&nbsp;a&nbsp;sequence&nbsp;of&nbsp;characters&nbsp;meant&nbsp;to&nbsp;be&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112536">//&nbsp;between&nbsp;quotes&nbsp;in&nbsp;a&nbsp;JavaScript&nbsp;expression.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112583">//&nbsp;The&nbsp;string&nbsp;must&nbsp;match&nbsp;a&nbsp;series&nbsp;of&nbsp;StringCharacters:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112639">//&nbsp;&nbsp;&nbsp;StringCharacter&nbsp;::&nbsp;SourceCharacter&nbsp;but&nbsp;not&nbsp;`\`&nbsp;or&nbsp;LineTerminator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112710">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;EscapeSequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112750">//&nbsp;Note&nbsp;that&nbsp;LineContinuations&nbsp;are&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112799">//&nbsp;JSStr(&#34;foo\\nbar&#34;)&nbsp;is&nbsp;fine,&nbsp;but&nbsp;JSStr(&#34;foo\\\nbar&#34;)&nbsp;is&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5112863">JSStr</span>&nbsp;<span class="builtintype" id="5112869">string</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112878">//&nbsp;URL&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;URL&nbsp;or&nbsp;URL&nbsp;substring&nbsp;(see&nbsp;RFC&nbsp;3986).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5112949">//&nbsp;A&nbsp;URL&nbsp;like&nbsp;`javascript:checkThatFormNotEditedBeforeLeavingPage()`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113019">//&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source&nbsp;should&nbsp;go&nbsp;in&nbsp;the&nbsp;page,&nbsp;but&nbsp;by&nbsp;default&nbsp;dynamic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113091">//&nbsp;`javascript:`&nbsp;URLs&nbsp;are&nbsp;filtered&nbsp;out&nbsp;since&nbsp;they&nbsp;are&nbsp;a&nbsp;frequently</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113159">//&nbsp;exploited&nbsp;injection&nbsp;vector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113191">URL</span>&nbsp;<span class="builtintype" id="5113195">string</span><br>
<span class="lineno"></span><span class="op" id="5113202">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5113205">type</span>&nbsp;<span class="ident" id="5113210">contentType</span>&nbsp;<span class="builtintype" id="5113222">uint8</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="5113229">const</span>&nbsp;<span class="op" id="5113235">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113238">contentTypePlain</span>&nbsp;<span class="ident" id="5113255">contentType</span>&nbsp;<span class="op" id="5113267">=</span>&nbsp;<span class="ident" id="5113269">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113275">contentTypeCSS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113291">contentTypeHTML</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113308">contentTypeHTMLAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113329">contentTypeJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113344">contentTypeJSStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113362">contentTypeURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113378">//&nbsp;contentTypeUnsafe&nbsp;is&nbsp;used&nbsp;in&nbsp;attr.go&nbsp;for&nbsp;values&nbsp;that&nbsp;affect&nbsp;how</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113446">//&nbsp;embedded&nbsp;content&nbsp;and&nbsp;network&nbsp;messages&nbsp;are&nbsp;formed,&nbsp;vetted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113508">//&nbsp;or&nbsp;interpreted;&nbsp;or&nbsp;which&nbsp;credentials&nbsp;network&nbsp;messages&nbsp;carry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113573">contentTypeUnsafe</span><br>
<span class="lineno"></span><span class="op" id="5113591">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5113594">//&nbsp;indirect&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="5113659">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil).</span><br>
<span class="lineno"></span><span class="keyword" id="5113708">func</span>&nbsp;<span class="ident" id="5113713">indirect</span><span class="op" id="5113721">(</span><span class="ident" id="5113722">a</span>&nbsp;<span class="keyword" id="5113724">interface</span><span class="op" id="5113733">{</span><span class="op" id="5113734">}</span><span class="op" id="5113735">)</span>&nbsp;<span class="keyword" id="5113737">interface</span><span class="op" id="5113746">{</span><span class="op" id="5113747">}</span>&nbsp;<span class="op" id="5113749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113752">if</span>&nbsp;<span class="ident" id="5113755">a</span>&nbsp;<span class="op" id="5113757">==</span>&nbsp;<span class="builtintype" id="5113760">nil</span>&nbsp;<span class="op" id="5113764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113768">return</span>&nbsp;<span class="builtintype" id="5113775">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5113780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113783">if</span>&nbsp;<span class="ident" id="5113786">t</span>&nbsp;<span class="op" id="5113788">:=</span>&nbsp;<span class="ident" id="5113791">reflect</span><span class="op" id="5113798">.</span><span class="ident" id="5113799">TypeOf</span><span class="op" id="5113805">(</span><span class="ident" id="5113806">a</span><span class="op" id="5113807">)</span><span class="op" id="5113808">;</span>&nbsp;<span class="ident" id="5113810">t</span><span class="op" id="5113811">.</span><span class="ident" id="5113812">Kind</span><span class="op" id="5113816">(</span><span class="op" id="5113817">)</span>&nbsp;<span class="op" id="5113819">!=</span>&nbsp;<span class="ident" id="5113822">reflect</span><span class="op" id="5113829">.</span><span class="ident" id="5113830">Ptr</span>&nbsp;<span class="op" id="5113834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5113838">//&nbsp;Avoid&nbsp;creating&nbsp;a&nbsp;reflect.Value&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113897">return</span>&nbsp;<span class="ident" id="5113904">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5113907">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113910">v</span>&nbsp;<span class="op" id="5113912">:=</span>&nbsp;<span class="ident" id="5113915">reflect</span><span class="op" id="5113922">.</span><span class="ident" id="5113923">ValueOf</span><span class="op" id="5113930">(</span><span class="ident" id="5113931">a</span><span class="op" id="5113932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113935">for</span>&nbsp;<span class="ident" id="5113939">v</span><span class="op" id="5113940">.</span><span class="ident" id="5113941">Kind</span><span class="op" id="5113945">(</span><span class="op" id="5113946">)</span>&nbsp;<span class="op" id="5113948">==</span>&nbsp;<span class="ident" id="5113951">reflect</span><span class="op" id="5113958">.</span><span class="ident" id="5113959">Ptr</span>&nbsp;<span class="op" id="5113963">&amp;&amp;</span>&nbsp;<span class="op" id="5113966">!</span><span class="ident" id="5113967">v</span><span class="op" id="5113968">.</span><span class="ident" id="5113969">IsNil</span><span class="op" id="5113974">(</span><span class="op" id="5113975">)</span>&nbsp;<span class="op" id="5113977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5113981">v</span>&nbsp;<span class="op" id="5113983">=</span>&nbsp;<span class="ident" id="5113985">v</span><span class="op" id="5113986">.</span><span class="ident" id="5113987">Elem</span><span class="op" id="5113991">(</span><span class="op" id="5113992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5113995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5113998">return</span>&nbsp;<span class="ident" id="5114005">v</span><span class="op" id="5114006">.</span><span class="ident" id="5114007">Interface</span><span class="op" id="5114016">(</span><span class="op" id="5114017">)</span><br>
<span class="lineno">90</span><span class="op" id="5114019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5114022">var</span>&nbsp;<span class="op" id="5114026">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5114029">errorType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5114045">=</span>&nbsp;<span class="ident" id="5114047">reflect</span><span class="op" id="5114054">.</span><span class="ident" id="5114055">TypeOf</span><span class="op" id="5114061">(</span><span class="op" id="5114062">(</span><span class="op" id="5114063">*</span><span class="builtintype" id="5114064">error</span><span class="op" id="5114069">)</span><span class="op" id="5114070">(</span><span class="builtintype" id="5114071">nil</span><span class="op" id="5114074">)</span><span class="op" id="5114075">)</span><span class="op" id="5114076">.</span><span class="ident" id="5114077">Elem</span><span class="op" id="5114081">(</span><span class="op" id="5114082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5114085">fmtStringerType</span>&nbsp;<span class="op" id="5114101">=</span>&nbsp;<span class="ident" id="5114103">reflect</span><span class="op" id="5114110">.</span><span class="ident" id="5114111">TypeOf</span><span class="op" id="5114117">(</span><span class="op" id="5114118">(</span><span class="op" id="5114119">*</span><span class="ident" id="5114120">fmt</span><span class="op" id="5114123">.</span><span class="ident" id="5114124">Stringer</span><span class="op" id="5114132">)</span><span class="op" id="5114133">(</span><span class="builtintype" id="5114134">nil</span><span class="op" id="5114137">)</span><span class="op" id="5114138">)</span><span class="op" id="5114139">.</span><span class="ident" id="5114140">Elem</span><span class="op" id="5114144">(</span><span class="op" id="5114145">)</span><br>
<span class="lineno">95</span><span class="op" id="5114147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5114150">//&nbsp;indirectToStringerOrError&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="5114232">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil)&nbsp;or&nbsp;an&nbsp;implementation&nbsp;of&nbsp;fmt.Stringer</span><br>
<span class="lineno"></span><span class="comment" id="5114317">//&nbsp;or&nbsp;error,</span><br>
<span class="lineno">100</span><span class="keyword" id="5114330">func</span>&nbsp;<span class="ident" id="5114335">indirectToStringerOrError</span><span class="op" id="5114360">(</span><span class="ident" id="5114361">a</span>&nbsp;<span class="keyword" id="5114363">interface</span><span class="op" id="5114372">{</span><span class="op" id="5114373">}</span><span class="op" id="5114374">)</span>&nbsp;<span class="keyword" id="5114376">interface</span><span class="op" id="5114385">{</span><span class="op" id="5114386">}</span>&nbsp;<span class="op" id="5114388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114391">if</span>&nbsp;<span class="ident" id="5114394">a</span>&nbsp;<span class="op" id="5114396">==</span>&nbsp;<span class="builtintype" id="5114399">nil</span>&nbsp;<span class="op" id="5114403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114407">return</span>&nbsp;<span class="builtintype" id="5114414">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5114419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5114422">v</span>&nbsp;<span class="op" id="5114424">:=</span>&nbsp;<span class="ident" id="5114427">reflect</span><span class="op" id="5114434">.</span><span class="ident" id="5114435">ValueOf</span><span class="op" id="5114442">(</span><span class="ident" id="5114443">a</span><span class="op" id="5114444">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114447">for</span>&nbsp;<span class="op" id="5114451">!</span><span class="ident" id="5114452">v</span><span class="op" id="5114453">.</span><span class="ident" id="5114454">Type</span><span class="op" id="5114458">(</span><span class="op" id="5114459">)</span><span class="op" id="5114460">.</span><span class="ident" id="5114461">Implements</span><span class="op" id="5114471">(</span><span class="ident" id="5114472">fmtStringerType</span><span class="op" id="5114487">)</span>&nbsp;<span class="op" id="5114489">&amp;&amp;</span>&nbsp;<span class="op" id="5114492">!</span><span class="ident" id="5114493">v</span><span class="op" id="5114494">.</span><span class="ident" id="5114495">Type</span><span class="op" id="5114499">(</span><span class="op" id="5114500">)</span><span class="op" id="5114501">.</span><span class="ident" id="5114502">Implements</span><span class="op" id="5114512">(</span><span class="ident" id="5114513">errorType</span><span class="op" id="5114522">)</span>&nbsp;<span class="op" id="5114524">&amp;&amp;</span>&nbsp;<span class="ident" id="5114527">v</span><span class="op" id="5114528">.</span><span class="ident" id="5114529">Kind</span><span class="op" id="5114533">(</span><span class="op" id="5114534">)</span>&nbsp;<span class="op" id="5114536">==</span>&nbsp;<span class="ident" id="5114539">reflect</span><span class="op" id="5114546">.</span><span class="ident" id="5114547">Ptr</span>&nbsp;<span class="op" id="5114551">&amp;&amp;</span>&nbsp;<span class="op" id="5114554">!</span><span class="ident" id="5114555">v</span><span class="op" id="5114556">.</span><span class="ident" id="5114557">IsNil</span><span class="op" id="5114562">(</span><span class="op" id="5114563">)</span>&nbsp;<span class="op" id="5114565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5114569">v</span>&nbsp;<span class="op" id="5114571">=</span>&nbsp;<span class="ident" id="5114573">v</span><span class="op" id="5114574">.</span><span class="ident" id="5114575">Elem</span><span class="op" id="5114579">(</span><span class="op" id="5114580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5114583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114586">return</span>&nbsp;<span class="ident" id="5114593">v</span><span class="op" id="5114594">.</span><span class="ident" id="5114595">Interface</span><span class="op" id="5114604">(</span><span class="op" id="5114605">)</span><br>
<span class="lineno"></span><span class="op" id="5114607">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="5114610">//&nbsp;stringify&nbsp;converts&nbsp;its&nbsp;arguments&nbsp;to&nbsp;a&nbsp;string&nbsp;and&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="5114687">//&nbsp;All&nbsp;pointers&nbsp;are&nbsp;dereferenced,&nbsp;as&nbsp;in&nbsp;the&nbsp;text/template&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5114754">func</span>&nbsp;<span class="ident" id="5114759">stringify</span><span class="op" id="5114768">(</span><span class="ident" id="5114769">args</span>&nbsp;<span class="op" id="5114774">...</span><span class="keyword" id="5114777">interface</span><span class="op" id="5114786">{</span><span class="op" id="5114787">}</span><span class="op" id="5114788">)</span>&nbsp;<span class="op" id="5114790">(</span><span class="builtintype" id="5114791">string</span><span class="op" id="5114797">,</span>&nbsp;<span class="ident" id="5114799">contentType</span><span class="op" id="5114810">)</span>&nbsp;<span class="op" id="5114812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114815">if</span>&nbsp;<span class="builtinfunc" id="5114818">len</span><span class="op" id="5114821">(</span><span class="ident" id="5114822">args</span><span class="op" id="5114826">)</span>&nbsp;<span class="op" id="5114828">==</span>&nbsp;<span class="num" id="5114831">1</span>&nbsp;<span class="op" id="5114833">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114837">switch</span>&nbsp;<span class="ident" id="5114844">s</span>&nbsp;<span class="op" id="5114846">:=</span>&nbsp;<span class="ident" id="5114849">indirect</span><span class="op" id="5114857">(</span><span class="ident" id="5114858">args</span><span class="op" id="5114862">[</span><span class="num" id="5114863">0</span><span class="op" id="5114864">]</span><span class="op" id="5114865">)</span><span class="op" id="5114866">.</span><span class="op" id="5114867">(</span><span class="keyword" id="5114868">type</span><span class="op" id="5114872">)</span>&nbsp;<span class="op" id="5114874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114878">case</span>&nbsp;<span class="builtintype" id="5114883">string</span><span class="op" id="5114889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114894">return</span>&nbsp;<span class="ident" id="5114901">s</span><span class="op" id="5114902">,</span>&nbsp;<span class="ident" id="5114904">contentTypePlain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114923">case</span>&nbsp;<span class="ident" id="5114928">CSS</span><span class="op" id="5114931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114936">return</span>&nbsp;<span class="builtintype" id="5114943">string</span><span class="op" id="5114949">(</span><span class="ident" id="5114950">s</span><span class="op" id="5114951">)</span><span class="op" id="5114952">,</span>&nbsp;<span class="ident" id="5114954">contentTypeCSS</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114971">case</span>&nbsp;<span class="ident" id="5114976">HTML</span><span class="op" id="5114980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5114985">return</span>&nbsp;<span class="builtintype" id="5114992">string</span><span class="op" id="5114998">(</span><span class="ident" id="5114999">s</span><span class="op" id="5115000">)</span><span class="op" id="5115001">,</span>&nbsp;<span class="ident" id="5115003">contentTypeHTML</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115021">case</span>&nbsp;<span class="ident" id="5115026">HTMLAttr</span><span class="op" id="5115034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115039">return</span>&nbsp;<span class="builtintype" id="5115046">string</span><span class="op" id="5115052">(</span><span class="ident" id="5115053">s</span><span class="op" id="5115054">)</span><span class="op" id="5115055">,</span>&nbsp;<span class="ident" id="5115057">contentTypeHTMLAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115079">case</span>&nbsp;<span class="ident" id="5115084">JS</span><span class="op" id="5115086">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115091">return</span>&nbsp;<span class="builtintype" id="5115098">string</span><span class="op" id="5115104">(</span><span class="ident" id="5115105">s</span><span class="op" id="5115106">)</span><span class="op" id="5115107">,</span>&nbsp;<span class="ident" id="5115109">contentTypeJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115125">case</span>&nbsp;<span class="ident" id="5115130">JSStr</span><span class="op" id="5115135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115140">return</span>&nbsp;<span class="builtintype" id="5115147">string</span><span class="op" id="5115153">(</span><span class="ident" id="5115154">s</span><span class="op" id="5115155">)</span><span class="op" id="5115156">,</span>&nbsp;<span class="ident" id="5115158">contentTypeJSStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115177">case</span>&nbsp;<span class="ident" id="5115182">URL</span><span class="op" id="5115185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115190">return</span>&nbsp;<span class="builtintype" id="5115197">string</span><span class="op" id="5115203">(</span><span class="ident" id="5115204">s</span><span class="op" id="5115205">)</span><span class="op" id="5115206">,</span>&nbsp;<span class="ident" id="5115208">contentTypeURL</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5115225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5115228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115231">for</span>&nbsp;<span class="ident" id="5115235">i</span><span class="op" id="5115236">,</span>&nbsp;<span class="ident" id="5115238">arg</span>&nbsp;<span class="op" id="5115242">:=</span>&nbsp;<span class="keyword" id="5115245">range</span>&nbsp;<span class="ident" id="5115251">args</span>&nbsp;<span class="op" id="5115256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5115260">args</span><span class="op" id="5115264">[</span><span class="ident" id="5115265">i</span><span class="op" id="5115266">]</span>&nbsp;<span class="op" id="5115268">=</span>&nbsp;<span class="ident" id="5115270">indirectToStringerOrError</span><span class="op" id="5115295">(</span><span class="ident" id="5115296">arg</span><span class="op" id="5115299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5115302">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5115305">return</span>&nbsp;<span class="ident" id="5115312">fmt</span><span class="op" id="5115315">.</span><span class="ident" id="5115316">Sprint</span><span class="op" id="5115322">(</span><span class="ident" id="5115323">args</span><span class="op" id="5115327">...</span><span class="op" id="5115330">)</span><span class="op" id="5115331">,</span>&nbsp;<span class="ident" id="5115333">contentTypePlain</span><br>
<span class="lineno"></span><span class="op" id="5115350">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
