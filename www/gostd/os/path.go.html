<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2499307">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2499362">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2499416">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2499467">package</span>&nbsp;<span class="ident" id="2499475">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2499479">import</span>&nbsp;<span class="op" id="2499486">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2499489">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2499495">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2499505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2499508">//&nbsp;MkdirAll&nbsp;creates&nbsp;a&nbsp;directory&nbsp;named&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="2499552">//&nbsp;along&nbsp;with&nbsp;any&nbsp;necessary&nbsp;parents,&nbsp;and&nbsp;returns&nbsp;nil,</span><br>
<span class="lineno"></span><span class="comment" id="2499606">//&nbsp;or&nbsp;else&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">15</span><span class="comment" id="2499635">//&nbsp;The&nbsp;permission&nbsp;bits&nbsp;perm&nbsp;are&nbsp;used&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2499680">//&nbsp;directories&nbsp;that&nbsp;MkdirAll&nbsp;creates.</span><br>
<span class="lineno"></span><span class="comment" id="2499718">//&nbsp;If&nbsp;path&nbsp;is&nbsp;already&nbsp;a&nbsp;directory,&nbsp;MkdirAll&nbsp;does&nbsp;nothing</span><br>
<span class="lineno"></span><span class="comment" id="2499775">//&nbsp;and&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2499795">func</span>&nbsp;<span class="ident" id="2499800">MkdirAll</span><span class="op" id="2499808">(</span><span class="ident" id="2499809">path</span>&nbsp;<span class="builtintype" id="2499814">string</span><span class="op" id="2499820">,</span>&nbsp;<span class="ident" id="2499822">perm</span>&nbsp;<span class="ident" id="2499827">FileMode</span><span class="op" id="2499835">)</span>&nbsp;<span class="builtintype" id="2499837">error</span>&nbsp;<span class="op" id="2499843">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2499846">//&nbsp;Fast&nbsp;path:&nbsp;if&nbsp;we&nbsp;can&nbsp;tell&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;directory&nbsp;or&nbsp;file,&nbsp;stop&nbsp;with&nbsp;success&nbsp;or&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2499941">dir</span><span class="op" id="2499944">,</span>&nbsp;<span class="ident" id="2499946">err</span>&nbsp;<span class="op" id="2499950">:=</span>&nbsp;<span class="ident" id="2499953">Stat</span><span class="op" id="2499957">(</span><span class="ident" id="2499958">path</span><span class="op" id="2499962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2499965">if</span>&nbsp;<span class="ident" id="2499968">err</span>&nbsp;<span class="op" id="2499972">==</span>&nbsp;<span class="builtintype" id="2499975">nil</span>&nbsp;<span class="op" id="2499979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2499983">if</span>&nbsp;<span class="ident" id="2499986">dir</span><span class="op" id="2499989">.</span><span class="ident" id="2499990">IsDir</span><span class="op" id="2499995">(</span><span class="op" id="2499996">)</span>&nbsp;<span class="op" id="2499998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500003">return</span>&nbsp;<span class="builtintype" id="2500010">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500020">return</span>&nbsp;<span class="op" id="2500027">&amp;</span><span class="ident" id="2500028">PathError</span><span class="op" id="2500037">{</span><span class="string" id="2500038">&#34;mkdir&#34;</span><span class="op" id="2500045">,</span>&nbsp;<span class="ident" id="2500047">path</span><span class="op" id="2500051">,</span>&nbsp;<span class="ident" id="2500053">syscall</span><span class="op" id="2500060">.</span><span class="ident" id="2500061">ENOTDIR</span><span class="op" id="2500068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500075">//&nbsp;Slow&nbsp;path:&nbsp;make&nbsp;sure&nbsp;parent&nbsp;exists&nbsp;and&nbsp;then&nbsp;call&nbsp;Mkdir&nbsp;for&nbsp;path.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500144">i</span>&nbsp;<span class="op" id="2500146">:=</span>&nbsp;<span class="builtinfunc" id="2500149">len</span><span class="op" id="2500152">(</span><span class="ident" id="2500153">path</span><span class="op" id="2500157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500160">for</span>&nbsp;<span class="ident" id="2500164">i</span>&nbsp;<span class="op" id="2500166">&gt;</span>&nbsp;<span class="num" id="2500168">0</span>&nbsp;<span class="op" id="2500170">&amp;&amp;</span>&nbsp;<span class="ident" id="2500173">IsPathSeparator</span><span class="op" id="2500188">(</span><span class="ident" id="2500189">path</span><span class="op" id="2500193">[</span><span class="ident" id="2500194">i</span><span class="op" id="2500195">-</span><span class="num" id="2500196">1</span><span class="op" id="2500197">]</span><span class="op" id="2500198">)</span>&nbsp;<span class="op" id="2500200">{</span>&nbsp;<span class="comment" id="2500202">//&nbsp;Skip&nbsp;trailing&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500237">i</span><span class="op" id="2500238">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500246">j</span>&nbsp;<span class="op" id="2500248">:=</span>&nbsp;<span class="ident" id="2500251">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500254">for</span>&nbsp;<span class="ident" id="2500258">j</span>&nbsp;<span class="op" id="2500260">&gt;</span>&nbsp;<span class="num" id="2500262">0</span>&nbsp;<span class="op" id="2500264">&amp;&amp;</span>&nbsp;<span class="op" id="2500267">!</span><span class="ident" id="2500268">IsPathSeparator</span><span class="op" id="2500283">(</span><span class="ident" id="2500284">path</span><span class="op" id="2500288">[</span><span class="ident" id="2500289">j</span><span class="op" id="2500290">-</span><span class="num" id="2500291">1</span><span class="op" id="2500292">]</span><span class="op" id="2500293">)</span>&nbsp;<span class="op" id="2500295">{</span>&nbsp;<span class="comment" id="2500297">//&nbsp;Scan&nbsp;backward&nbsp;over&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500330">j</span><span class="op" id="2500331">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500339">if</span>&nbsp;<span class="ident" id="2500342">j</span>&nbsp;<span class="op" id="2500344">&gt;</span>&nbsp;<span class="num" id="2500346">1</span>&nbsp;<span class="op" id="2500348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500352">//&nbsp;Create&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500371">err</span>&nbsp;<span class="op" id="2500375">=</span>&nbsp;<span class="ident" id="2500377">MkdirAll</span><span class="op" id="2500385">(</span><span class="ident" id="2500386">path</span><span class="op" id="2500390">[</span><span class="num" id="2500391">0</span><span class="op" id="2500392">:</span><span class="ident" id="2500393">j</span><span class="op" id="2500394">-</span><span class="num" id="2500395">1</span><span class="op" id="2500396">]</span><span class="op" id="2500397">,</span>&nbsp;<span class="ident" id="2500399">perm</span><span class="op" id="2500403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500407">if</span>&nbsp;<span class="ident" id="2500410">err</span>&nbsp;<span class="op" id="2500414">!=</span>&nbsp;<span class="builtintype" id="2500417">nil</span>&nbsp;<span class="op" id="2500421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500426">return</span>&nbsp;<span class="ident" id="2500433">err</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500446">//&nbsp;Parent&nbsp;now&nbsp;exists;&nbsp;invoke&nbsp;Mkdir&nbsp;and&nbsp;use&nbsp;its&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500502">err</span>&nbsp;<span class="op" id="2500506">=</span>&nbsp;<span class="ident" id="2500508">Mkdir</span><span class="op" id="2500513">(</span><span class="ident" id="2500514">path</span><span class="op" id="2500518">,</span>&nbsp;<span class="ident" id="2500520">perm</span><span class="op" id="2500524">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500527">if</span>&nbsp;<span class="ident" id="2500530">err</span>&nbsp;<span class="op" id="2500534">!=</span>&nbsp;<span class="builtintype" id="2500537">nil</span>&nbsp;<span class="op" id="2500541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500545">//&nbsp;Handle&nbsp;arguments&nbsp;like&nbsp;&#34;foo/.&#34;&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500583">//&nbsp;double-checking&nbsp;that&nbsp;directory&nbsp;doesn&#39;t&nbsp;exist.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2500634">dir</span><span class="op" id="2500637">,</span>&nbsp;<span class="ident" id="2500639">err1</span>&nbsp;<span class="op" id="2500644">:=</span>&nbsp;<span class="ident" id="2500647">Lstat</span><span class="op" id="2500652">(</span><span class="ident" id="2500653">path</span><span class="op" id="2500657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500661">if</span>&nbsp;<span class="ident" id="2500664">err1</span>&nbsp;<span class="op" id="2500669">==</span>&nbsp;<span class="builtintype" id="2500672">nil</span>&nbsp;<span class="op" id="2500676">&amp;&amp;</span>&nbsp;<span class="ident" id="2500679">dir</span><span class="op" id="2500682">.</span><span class="ident" id="2500683">IsDir</span><span class="op" id="2500688">(</span><span class="op" id="2500689">)</span>&nbsp;<span class="op" id="2500691">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500696">return</span>&nbsp;<span class="builtintype" id="2500703">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500713">return</span>&nbsp;<span class="ident" id="2500720">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2500725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2500728">return</span>&nbsp;<span class="builtintype" id="2500735">nil</span><br>
<span class="lineno">60</span><span class="op" id="2500739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2500742">//&nbsp;RemoveAll&nbsp;removes&nbsp;path&nbsp;and&nbsp;any&nbsp;children&nbsp;it&nbsp;contains.</span><br>
<span class="lineno"></span><span class="comment" id="2500798">//&nbsp;It&nbsp;removes&nbsp;everything&nbsp;it&nbsp;can&nbsp;but&nbsp;returns&nbsp;the&nbsp;first&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="2500858">//&nbsp;it&nbsp;encounters.&nbsp;&nbsp;If&nbsp;the&nbsp;path&nbsp;does&nbsp;not&nbsp;exist,&nbsp;RemoveAll</span><br>
<span class="lineno">65</span><span class="comment" id="2500915">//&nbsp;returns&nbsp;nil&nbsp;(no&nbsp;error).</span><br>
<span class="lineno"></span><span class="keyword" id="2500942">func</span>&nbsp;<span class="ident" id="2500947">RemoveAll</span><span class="op" id="2500956">(</span><span class="ident" id="2500957">path</span>&nbsp;<span class="builtintype" id="2500962">string</span><span class="op" id="2500968">)</span>&nbsp;<span class="builtintype" id="2500970">error</span>&nbsp;<span class="op" id="2500976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2500979">//&nbsp;Simple&nbsp;case:&nbsp;if&nbsp;Remove&nbsp;works,&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501025">err</span>&nbsp;<span class="op" id="2501029">:=</span>&nbsp;<span class="ident" id="2501032">Remove</span><span class="op" id="2501038">(</span><span class="ident" id="2501039">path</span><span class="op" id="2501043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501046">if</span>&nbsp;<span class="ident" id="2501049">err</span>&nbsp;<span class="op" id="2501053">==</span>&nbsp;<span class="builtintype" id="2501056">nil</span>&nbsp;<span class="op" id="2501060">||</span>&nbsp;<span class="ident" id="2501063">IsNotExist</span><span class="op" id="2501073">(</span><span class="ident" id="2501074">err</span><span class="op" id="2501077">)</span>&nbsp;<span class="op" id="2501079">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501083">return</span>&nbsp;<span class="builtintype" id="2501090">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501099">//&nbsp;Otherwise,&nbsp;is&nbsp;this&nbsp;a&nbsp;directory&nbsp;we&nbsp;need&nbsp;to&nbsp;recurse&nbsp;into?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501159">dir</span><span class="op" id="2501162">,</span>&nbsp;<span class="ident" id="2501164">serr</span>&nbsp;<span class="op" id="2501169">:=</span>&nbsp;<span class="ident" id="2501172">Lstat</span><span class="op" id="2501177">(</span><span class="ident" id="2501178">path</span><span class="op" id="2501182">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501185">if</span>&nbsp;<span class="ident" id="2501188">serr</span>&nbsp;<span class="op" id="2501193">!=</span>&nbsp;<span class="builtintype" id="2501196">nil</span>&nbsp;<span class="op" id="2501200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501204">if</span>&nbsp;<span class="ident" id="2501207">serr</span><span class="op" id="2501211">,</span>&nbsp;<span class="ident" id="2501213">ok</span>&nbsp;<span class="op" id="2501216">:=</span>&nbsp;<span class="ident" id="2501219">serr</span><span class="op" id="2501223">.</span><span class="op" id="2501224">(</span><span class="op" id="2501225">*</span><span class="ident" id="2501226">PathError</span><span class="op" id="2501235">)</span><span class="op" id="2501236">;</span>&nbsp;<span class="ident" id="2501238">ok</span>&nbsp;<span class="op" id="2501241">&amp;&amp;</span>&nbsp;<span class="op" id="2501244">(</span><span class="ident" id="2501245">IsNotExist</span><span class="op" id="2501255">(</span><span class="ident" id="2501256">serr</span><span class="op" id="2501260">.</span><span class="ident" id="2501261">Err</span><span class="op" id="2501264">)</span>&nbsp;<span class="op" id="2501266">||</span>&nbsp;<span class="ident" id="2501269">serr</span><span class="op" id="2501273">.</span><span class="ident" id="2501274">Err</span>&nbsp;<span class="op" id="2501278">==</span>&nbsp;<span class="ident" id="2501281">syscall</span><span class="op" id="2501288">.</span><span class="ident" id="2501289">ENOTDIR</span><span class="op" id="2501296">)</span>&nbsp;<span class="op" id="2501298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501303">return</span>&nbsp;<span class="builtintype" id="2501310">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501320">return</span>&nbsp;<span class="ident" id="2501327">serr</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501336">if</span>&nbsp;<span class="op" id="2501339">!</span><span class="ident" id="2501340">dir</span><span class="op" id="2501343">.</span><span class="ident" id="2501344">IsDir</span><span class="op" id="2501349">(</span><span class="op" id="2501350">)</span>&nbsp;<span class="op" id="2501352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501356">//&nbsp;Not&nbsp;a&nbsp;directory;&nbsp;return&nbsp;the&nbsp;error&nbsp;from&nbsp;Remove.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501408">return</span>&nbsp;<span class="ident" id="2501415">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501420">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501424">//&nbsp;Directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501439">fd</span><span class="op" id="2501441">,</span>&nbsp;<span class="ident" id="2501443">err</span>&nbsp;<span class="op" id="2501447">:=</span>&nbsp;<span class="ident" id="2501450">Open</span><span class="op" id="2501454">(</span><span class="ident" id="2501455">path</span><span class="op" id="2501459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501462">if</span>&nbsp;<span class="ident" id="2501465">err</span>&nbsp;<span class="op" id="2501469">!=</span>&nbsp;<span class="builtintype" id="2501472">nil</span>&nbsp;<span class="op" id="2501476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501480">if</span>&nbsp;<span class="ident" id="2501483">IsNotExist</span><span class="op" id="2501493">(</span><span class="ident" id="2501494">err</span><span class="op" id="2501497">)</span>&nbsp;<span class="op" id="2501499">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501504">//&nbsp;Race.&nbsp;It&nbsp;was&nbsp;deleted&nbsp;between&nbsp;the&nbsp;Lstat&nbsp;and&nbsp;Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501559">//&nbsp;Return&nbsp;nil&nbsp;per&nbsp;RemoveAll&#39;s&nbsp;docs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501598">return</span>&nbsp;<span class="builtintype" id="2501605">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501615">return</span>&nbsp;<span class="ident" id="2501622">err</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501631">//&nbsp;Remove&nbsp;contents&nbsp;&amp;&nbsp;return&nbsp;first&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501673">err</span>&nbsp;<span class="op" id="2501677">=</span>&nbsp;<span class="builtintype" id="2501679">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501684">for</span>&nbsp;<span class="op" id="2501688">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501692">names</span><span class="op" id="2501697">,</span>&nbsp;<span class="ident" id="2501699">err1</span>&nbsp;<span class="op" id="2501704">:=</span>&nbsp;<span class="ident" id="2501707">fd</span><span class="op" id="2501709">.</span><span class="ident" id="2501710">Readdirnames</span><span class="op" id="2501722">(</span><span class="num" id="2501723">100</span><span class="op" id="2501726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501730">for</span>&nbsp;<span class="ident" id="2501734">_</span><span class="op" id="2501735">,</span>&nbsp;<span class="ident" id="2501737">name</span>&nbsp;<span class="op" id="2501742">:=</span>&nbsp;<span class="keyword" id="2501745">range</span>&nbsp;<span class="ident" id="2501751">names</span>&nbsp;<span class="op" id="2501757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501762">err1</span>&nbsp;<span class="op" id="2501767">:=</span>&nbsp;<span class="ident" id="2501770">RemoveAll</span><span class="op" id="2501779">(</span><span class="ident" id="2501780">path</span>&nbsp;<span class="op" id="2501785">+</span>&nbsp;<span class="builtintype" id="2501787">string</span><span class="op" id="2501793">(</span><span class="ident" id="2501794">PathSeparator</span><span class="op" id="2501807">)</span>&nbsp;<span class="op" id="2501809">+</span>&nbsp;<span class="ident" id="2501811">name</span><span class="op" id="2501815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501820">if</span>&nbsp;<span class="ident" id="2501823">err</span>&nbsp;<span class="op" id="2501827">==</span>&nbsp;<span class="builtintype" id="2501830">nil</span>&nbsp;<span class="op" id="2501834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501840">err</span>&nbsp;<span class="op" id="2501844">=</span>&nbsp;<span class="ident" id="2501846">err1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501862">if</span>&nbsp;<span class="ident" id="2501865">err1</span>&nbsp;<span class="op" id="2501870">==</span>&nbsp;<span class="ident" id="2501873">io</span><span class="op" id="2501875">.</span><span class="ident" id="2501876">EOF</span>&nbsp;<span class="op" id="2501880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501885">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501893">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2501897">//&nbsp;If&nbsp;Readdirnames&nbsp;returned&nbsp;an&nbsp;error,&nbsp;use&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501945">if</span>&nbsp;<span class="ident" id="2501948">err</span>&nbsp;<span class="op" id="2501952">==</span>&nbsp;<span class="builtintype" id="2501955">nil</span>&nbsp;<span class="op" id="2501959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2501964">err</span>&nbsp;<span class="op" id="2501968">=</span>&nbsp;<span class="ident" id="2501970">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2501977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2501981">if</span>&nbsp;<span class="builtinfunc" id="2501984">len</span><span class="op" id="2501987">(</span><span class="ident" id="2501988">names</span><span class="op" id="2501993">)</span>&nbsp;<span class="op" id="2501995">==</span>&nbsp;<span class="num" id="2501998">0</span>&nbsp;<span class="op" id="2502000">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502005">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2502020">//&nbsp;Close&nbsp;directory,&nbsp;because&nbsp;windows&nbsp;won&#39;t&nbsp;remove&nbsp;opened&nbsp;directory.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502088">fd</span><span class="op" id="2502090">.</span><span class="ident" id="2502091">Close</span><span class="op" id="2502096">(</span><span class="op" id="2502097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2502101">//&nbsp;Remove&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502123">err1</span>&nbsp;<span class="op" id="2502128">:=</span>&nbsp;<span class="ident" id="2502131">Remove</span><span class="op" id="2502137">(</span><span class="ident" id="2502138">path</span><span class="op" id="2502142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502145">if</span>&nbsp;<span class="ident" id="2502148">err1</span>&nbsp;<span class="op" id="2502153">==</span>&nbsp;<span class="builtintype" id="2502156">nil</span>&nbsp;<span class="op" id="2502160">||</span>&nbsp;<span class="ident" id="2502163">IsNotExist</span><span class="op" id="2502173">(</span><span class="ident" id="2502174">err1</span><span class="op" id="2502178">)</span>&nbsp;<span class="op" id="2502180">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502184">return</span>&nbsp;<span class="builtintype" id="2502191">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502199">if</span>&nbsp;<span class="ident" id="2502202">err</span>&nbsp;<span class="op" id="2502206">==</span>&nbsp;<span class="builtintype" id="2502209">nil</span>&nbsp;<span class="op" id="2502213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2502217">err</span>&nbsp;<span class="op" id="2502221">=</span>&nbsp;<span class="ident" id="2502223">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2502229">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2502232">return</span>&nbsp;<span class="ident" id="2502239">err</span><br>
<span class="lineno"></span><span class="op" id="2502243">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
