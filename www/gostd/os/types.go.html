<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2188223">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2188278">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2188332">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2188383">package</span>&nbsp;<span class="ident" id="2188391">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2188395">import</span>&nbsp;<span class="op" id="2188402">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2188405">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2188416">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2188423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2188426">//&nbsp;Getpagesize&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;system&#39;s&nbsp;memory&nbsp;page&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2188491">func</span>&nbsp;<span class="ident" id="2188496">Getpagesize</span><span class="op" id="2188507">(</span><span class="op" id="2188508">)</span>&nbsp;<span class="builtintype" id="2188510">int</span>&nbsp;<span class="op" id="2188514">{</span>&nbsp;<span class="keyword" id="2188516">return</span>&nbsp;<span class="ident" id="2188523">syscall</span><span class="op" id="2188530">.</span><span class="ident" id="2188531">Getpagesize</span><span class="op" id="2188542">(</span><span class="op" id="2188543">)</span>&nbsp;<span class="op" id="2188545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2188548">//&nbsp;A&nbsp;FileInfo&nbsp;describes&nbsp;a&nbsp;file&nbsp;and&nbsp;is&nbsp;returned&nbsp;by&nbsp;Stat&nbsp;and&nbsp;Lstat.</span><br>
<span class="lineno"></span><span class="keyword" id="2188614">type</span>&nbsp;<span class="ident" id="2188619">FileInfo</span>&nbsp;<span class="keyword" id="2188628">interface</span>&nbsp;<span class="op" id="2188638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188641">Name</span><span class="op" id="2188645">(</span><span class="op" id="2188646">)</span>&nbsp;<span class="builtintype" id="2188648">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2188661">//&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188687">Size</span><span class="op" id="2188691">(</span><span class="op" id="2188692">)</span>&nbsp;<span class="ident" id="2188694">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2188707">//&nbsp;length&nbsp;in&nbsp;bytes&nbsp;for&nbsp;regular&nbsp;files;&nbsp;system-dependent&nbsp;for&nbsp;others</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188774">Mode</span><span class="op" id="2188778">(</span><span class="op" id="2188779">)</span>&nbsp;<span class="ident" id="2188781">FileMode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2188794">//&nbsp;file&nbsp;mode&nbsp;bits</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188813">ModTime</span><span class="op" id="2188820">(</span><span class="op" id="2188821">)</span>&nbsp;<span class="ident" id="2188823">time</span><span class="op" id="2188827">.</span><span class="ident" id="2188828">Time</span>&nbsp;<span class="comment" id="2188833">//&nbsp;modification&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188855">IsDir</span><span class="op" id="2188860">(</span><span class="op" id="2188861">)</span>&nbsp;<span class="builtintype" id="2188863">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2188875">//&nbsp;abbreviation&nbsp;for&nbsp;Mode().IsDir()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2188911">Sys</span><span class="op" id="2188914">(</span><span class="op" id="2188915">)</span>&nbsp;<span class="keyword" id="2188917">interface</span><span class="op" id="2188926">{</span><span class="op" id="2188927">}</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2188931">//&nbsp;underlying&nbsp;data&nbsp;source&nbsp;(can&nbsp;return&nbsp;nil)</span><br>
<span class="lineno"></span><span class="op" id="2188974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="2188977">//&nbsp;A&nbsp;FileMode&nbsp;represents&nbsp;a&nbsp;file&#39;s&nbsp;mode&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2189037">//&nbsp;The&nbsp;bits&nbsp;have&nbsp;the&nbsp;same&nbsp;definition&nbsp;on&nbsp;all&nbsp;systems,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2189098">//&nbsp;information&nbsp;about&nbsp;files&nbsp;can&nbsp;be&nbsp;moved&nbsp;from&nbsp;one&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2189154">//&nbsp;to&nbsp;another&nbsp;portably.&nbsp;&nbsp;Not&nbsp;all&nbsp;bits&nbsp;apply&nbsp;to&nbsp;all&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2189214">//&nbsp;The&nbsp;only&nbsp;required&nbsp;bit&nbsp;is&nbsp;ModeDir&nbsp;for&nbsp;directories.</span><br>
<span class="lineno">30</span><span class="keyword" id="2189267">type</span>&nbsp;<span class="ident" id="2189272">FileMode</span>&nbsp;<span class="builtintype" id="2189281">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2189289">//&nbsp;The&nbsp;defined&nbsp;file&nbsp;mode&nbsp;bits&nbsp;are&nbsp;the&nbsp;most&nbsp;significant&nbsp;bits&nbsp;of&nbsp;the&nbsp;FileMode.</span><br>
<span class="lineno"></span><span class="comment" id="2189366">//&nbsp;The&nbsp;nine&nbsp;least-significant&nbsp;bits&nbsp;are&nbsp;the&nbsp;standard&nbsp;Unix&nbsp;rwxrwxrwx&nbsp;permissions.</span><br>
<span class="lineno"></span><span class="comment" id="2189446">//&nbsp;The&nbsp;values&nbsp;of&nbsp;these&nbsp;bits&nbsp;should&nbsp;be&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;public&nbsp;API&nbsp;and</span><br>
<span class="lineno">35</span><span class="comment" id="2189522">//&nbsp;may&nbsp;be&nbsp;used&nbsp;in&nbsp;wire&nbsp;protocols&nbsp;or&nbsp;disk&nbsp;representations:&nbsp;they&nbsp;must&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2189597">//&nbsp;changed,&nbsp;although&nbsp;new&nbsp;bits&nbsp;might&nbsp;be&nbsp;added.</span><br>
<span class="lineno"></span><span class="keyword" id="2189643">const</span>&nbsp;<span class="op" id="2189649">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2189652">//&nbsp;The&nbsp;single&nbsp;letters&nbsp;are&nbsp;the&nbsp;abbreviations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2189697">//&nbsp;used&nbsp;by&nbsp;the&nbsp;String&nbsp;method&#39;s&nbsp;formatting.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189741">ModeDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2189756">FileMode</span>&nbsp;<span class="op" id="2189765">=</span>&nbsp;<span class="num" id="2189767">1</span>&nbsp;<span class="op" id="2189769">&lt;&lt;</span>&nbsp;<span class="op" id="2189772">(</span><span class="num" id="2189773">32</span>&nbsp;<span class="op" id="2189776">-</span>&nbsp;<span class="num" id="2189778">1</span>&nbsp;<span class="op" id="2189780">-</span>&nbsp;<span class="ident" id="2189782">iota</span><span class="op" id="2189786">)</span>&nbsp;<span class="comment" id="2189788">//&nbsp;d:&nbsp;is&nbsp;a&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189810">ModeAppend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2189857">//&nbsp;a:&nbsp;append-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189876">ModeExclusive</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2189923">//&nbsp;l:&nbsp;exclusive&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189944">ModeTemporary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2189991">//&nbsp;T:&nbsp;temporary&nbsp;file&nbsp;(not&nbsp;backed&nbsp;up)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190029">ModeSymlink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190076">//&nbsp;L:&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190097">ModeDevice</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190144">//&nbsp;D:&nbsp;device&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190163">ModeNamedPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190210">//&nbsp;p:&nbsp;named&nbsp;pipe&nbsp;(FIFO)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190235">ModeSocket</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190282">//&nbsp;S:&nbsp;Unix&nbsp;domain&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190308">ModeSetuid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190355">//&nbsp;u:&nbsp;setuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190369">ModeSetgid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190416">//&nbsp;g:&nbsp;setgid</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190430">ModeCharDevice</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190477">//&nbsp;c:&nbsp;Unix&nbsp;character&nbsp;device,&nbsp;when&nbsp;ModeDevice&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190530">ModeSticky</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2190577">//&nbsp;t:&nbsp;sticky</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2190592">//&nbsp;Mask&nbsp;for&nbsp;the&nbsp;type&nbsp;bits.&nbsp;For&nbsp;regular&nbsp;files,&nbsp;none&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190657">ModeType</span>&nbsp;<span class="op" id="2190666">=</span>&nbsp;<span class="ident" id="2190668">ModeDir</span>&nbsp;<span class="op" id="2190676">|</span>&nbsp;<span class="ident" id="2190678">ModeSymlink</span>&nbsp;<span class="op" id="2190690">|</span>&nbsp;<span class="ident" id="2190692">ModeNamedPipe</span>&nbsp;<span class="op" id="2190706">|</span>&nbsp;<span class="ident" id="2190708">ModeSocket</span>&nbsp;<span class="op" id="2190719">|</span>&nbsp;<span class="ident" id="2190721">ModeDevice</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190734">ModePerm</span>&nbsp;<span class="ident" id="2190743">FileMode</span>&nbsp;<span class="op" id="2190752">=</span>&nbsp;<span class="num" id="2190754">0777</span>&nbsp;<span class="comment" id="2190759">//&nbsp;permission&nbsp;bits</span><br>
<span class="lineno"></span><span class="op" id="2190778">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2190781">func</span>&nbsp;<span class="op" id="2190786">(</span><span class="ident" id="2190787">m</span>&nbsp;<span class="ident" id="2190789">FileMode</span><span class="op" id="2190797">)</span>&nbsp;<span class="ident" id="2190799">String</span><span class="op" id="2190805">(</span><span class="op" id="2190806">)</span>&nbsp;<span class="builtintype" id="2190808">string</span>&nbsp;<span class="op" id="2190815">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190818">const</span>&nbsp;<span class="ident" id="2190824">str</span>&nbsp;<span class="op" id="2190828">=</span>&nbsp;<span class="string" id="2190830">&#34;dalTLDpSugct&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190846">var</span>&nbsp;<span class="ident" id="2190850">buf</span>&nbsp;<span class="op" id="2190854">[</span><span class="num" id="2190855">32</span><span class="op" id="2190857">]</span><span class="builtintype" id="2190858">byte</span>&nbsp;<span class="comment" id="2190863">//&nbsp;Mode&nbsp;is&nbsp;uint32.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190883">w</span>&nbsp;<span class="op" id="2190885">:=</span>&nbsp;<span class="num" id="2190888">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190891">for</span>&nbsp;<span class="ident" id="2190895">i</span><span class="op" id="2190896">,</span>&nbsp;<span class="ident" id="2190898">c</span>&nbsp;<span class="op" id="2190900">:=</span>&nbsp;<span class="keyword" id="2190903">range</span>&nbsp;<span class="ident" id="2190909">str</span>&nbsp;<span class="op" id="2190913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190917">if</span>&nbsp;<span class="ident" id="2190920">m</span><span class="op" id="2190921">&amp;</span><span class="op" id="2190922">(</span><span class="num" id="2190923">1</span><span class="op" id="2190924">&lt;&lt;</span><span class="builtintype" id="2190926">uint</span><span class="op" id="2190930">(</span><span class="num" id="2190931">32</span><span class="op" id="2190933">-</span><span class="num" id="2190934">1</span><span class="op" id="2190935">-</span><span class="ident" id="2190936">i</span><span class="op" id="2190937">)</span><span class="op" id="2190938">)</span>&nbsp;<span class="op" id="2190940">!=</span>&nbsp;<span class="num" id="2190943">0</span>&nbsp;<span class="op" id="2190945">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190950">buf</span><span class="op" id="2190953">[</span><span class="ident" id="2190954">w</span><span class="op" id="2190955">]</span>&nbsp;<span class="op" id="2190957">=</span>&nbsp;<span class="builtintype" id="2190959">byte</span><span class="op" id="2190963">(</span><span class="ident" id="2190964">c</span><span class="op" id="2190965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190970">w</span><span class="op" id="2190971">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190982">if</span>&nbsp;<span class="ident" id="2190985">w</span>&nbsp;<span class="op" id="2190987">==</span>&nbsp;<span class="num" id="2190990">0</span>&nbsp;<span class="op" id="2190992">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190996">buf</span><span class="op" id="2190999">[</span><span class="ident" id="2191000">w</span><span class="op" id="2191001">]</span>&nbsp;<span class="op" id="2191003">=</span>&nbsp;<span class="string" id="2191005">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191011">w</span><span class="op" id="2191012">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191019">const</span>&nbsp;<span class="ident" id="2191025">rwx</span>&nbsp;<span class="op" id="2191029">=</span>&nbsp;<span class="string" id="2191031">&#34;rwxrwxrwx&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191044">for</span>&nbsp;<span class="ident" id="2191048">i</span><span class="op" id="2191049">,</span>&nbsp;<span class="ident" id="2191051">c</span>&nbsp;<span class="op" id="2191053">:=</span>&nbsp;<span class="keyword" id="2191056">range</span>&nbsp;<span class="ident" id="2191062">rwx</span>&nbsp;<span class="op" id="2191066">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191070">if</span>&nbsp;<span class="ident" id="2191073">m</span><span class="op" id="2191074">&amp;</span><span class="op" id="2191075">(</span><span class="num" id="2191076">1</span><span class="op" id="2191077">&lt;&lt;</span><span class="builtintype" id="2191079">uint</span><span class="op" id="2191083">(</span><span class="num" id="2191084">9</span><span class="op" id="2191085">-</span><span class="num" id="2191086">1</span><span class="op" id="2191087">-</span><span class="ident" id="2191088">i</span><span class="op" id="2191089">)</span><span class="op" id="2191090">)</span>&nbsp;<span class="op" id="2191092">!=</span>&nbsp;<span class="num" id="2191095">0</span>&nbsp;<span class="op" id="2191097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191102">buf</span><span class="op" id="2191105">[</span><span class="ident" id="2191106">w</span><span class="op" id="2191107">]</span>&nbsp;<span class="op" id="2191109">=</span>&nbsp;<span class="builtintype" id="2191111">byte</span><span class="op" id="2191115">(</span><span class="ident" id="2191116">c</span><span class="op" id="2191117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191121">}</span>&nbsp;<span class="keyword" id="2191123">else</span>&nbsp;<span class="op" id="2191128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191133">buf</span><span class="op" id="2191136">[</span><span class="ident" id="2191137">w</span><span class="op" id="2191138">]</span>&nbsp;<span class="op" id="2191140">=</span>&nbsp;<span class="string" id="2191142">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191148">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191152">w</span><span class="op" id="2191153">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191160">return</span>&nbsp;<span class="builtintype" id="2191167">string</span><span class="op" id="2191173">(</span><span class="ident" id="2191174">buf</span><span class="op" id="2191177">[</span><span class="op" id="2191178">:</span><span class="ident" id="2191179">w</span><span class="op" id="2191180">]</span><span class="op" id="2191181">)</span><br>
<span class="lineno"></span><span class="op" id="2191183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="2191186">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;m&nbsp;describes&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2191236">//&nbsp;That&nbsp;is,&nbsp;it&nbsp;tests&nbsp;for&nbsp;the&nbsp;ModeDir&nbsp;bit&nbsp;being&nbsp;set&nbsp;in&nbsp;m.</span><br>
<span class="lineno"></span><span class="keyword" id="2191293">func</span>&nbsp;<span class="op" id="2191298">(</span><span class="ident" id="2191299">m</span>&nbsp;<span class="ident" id="2191301">FileMode</span><span class="op" id="2191309">)</span>&nbsp;<span class="ident" id="2191311">IsDir</span><span class="op" id="2191316">(</span><span class="op" id="2191317">)</span>&nbsp;<span class="builtintype" id="2191319">bool</span>&nbsp;<span class="op" id="2191324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191327">return</span>&nbsp;<span class="ident" id="2191334">m</span><span class="op" id="2191335">&amp;</span><span class="ident" id="2191336">ModeDir</span>&nbsp;<span class="op" id="2191344">!=</span>&nbsp;<span class="num" id="2191347">0</span><br>
<span class="lineno"></span><span class="op" id="2191349">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="2191352">//&nbsp;IsRegular&nbsp;reports&nbsp;whether&nbsp;m&nbsp;describes&nbsp;a&nbsp;regular&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2191409">//&nbsp;That&nbsp;is,&nbsp;it&nbsp;tests&nbsp;that&nbsp;no&nbsp;mode&nbsp;type&nbsp;bits&nbsp;are&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="2191462">func</span>&nbsp;<span class="op" id="2191467">(</span><span class="ident" id="2191468">m</span>&nbsp;<span class="ident" id="2191470">FileMode</span><span class="op" id="2191478">)</span>&nbsp;<span class="ident" id="2191480">IsRegular</span><span class="op" id="2191489">(</span><span class="op" id="2191490">)</span>&nbsp;<span class="builtintype" id="2191492">bool</span>&nbsp;<span class="op" id="2191497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191500">return</span>&nbsp;<span class="ident" id="2191507">m</span><span class="op" id="2191508">&amp;</span><span class="ident" id="2191509">ModeType</span>&nbsp;<span class="op" id="2191518">==</span>&nbsp;<span class="num" id="2191521">0</span><br>
<span class="lineno">95</span><span class="op" id="2191523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2191526">//&nbsp;Perm&nbsp;returns&nbsp;the&nbsp;Unix&nbsp;permission&nbsp;bits&nbsp;in&nbsp;m.</span><br>
<span class="lineno"></span><span class="keyword" id="2191573">func</span>&nbsp;<span class="op" id="2191578">(</span><span class="ident" id="2191579">m</span>&nbsp;<span class="ident" id="2191581">FileMode</span><span class="op" id="2191589">)</span>&nbsp;<span class="ident" id="2191591">Perm</span><span class="op" id="2191595">(</span><span class="op" id="2191596">)</span>&nbsp;<span class="ident" id="2191598">FileMode</span>&nbsp;<span class="op" id="2191607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191610">return</span>&nbsp;<span class="ident" id="2191617">m</span>&nbsp;<span class="op" id="2191619">&amp;</span>&nbsp;<span class="ident" id="2191621">ModePerm</span><br>
<span class="lineno">100</span><span class="op" id="2191630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2191633">func</span>&nbsp;<span class="op" id="2191638">(</span><span class="ident" id="2191639">fs</span>&nbsp;<span class="op" id="2191642">*</span><span class="ident" id="2191643">fileStat</span><span class="op" id="2191651">)</span>&nbsp;<span class="ident" id="2191653">Name</span><span class="op" id="2191657">(</span><span class="op" id="2191658">)</span>&nbsp;<span class="builtintype" id="2191660">string</span>&nbsp;<span class="op" id="2191667">{</span>&nbsp;<span class="keyword" id="2191669">return</span>&nbsp;<span class="ident" id="2191676">fs</span><span class="op" id="2191678">.</span><span class="ident" id="2191679">name</span>&nbsp;<span class="op" id="2191684">}</span><br>
<span class="lineno"></span><span class="keyword" id="2191686">func</span>&nbsp;<span class="op" id="2191691">(</span><span class="ident" id="2191692">fs</span>&nbsp;<span class="op" id="2191695">*</span><span class="ident" id="2191696">fileStat</span><span class="op" id="2191704">)</span>&nbsp;<span class="ident" id="2191706">IsDir</span><span class="op" id="2191711">(</span><span class="op" id="2191712">)</span>&nbsp;<span class="builtintype" id="2191714">bool</span>&nbsp;&nbsp;<span class="op" id="2191720">{</span>&nbsp;<span class="keyword" id="2191722">return</span>&nbsp;<span class="ident" id="2191729">fs</span><span class="op" id="2191731">.</span><span class="ident" id="2191732">Mode</span><span class="op" id="2191736">(</span><span class="op" id="2191737">)</span><span class="op" id="2191738">.</span><span class="ident" id="2191739">IsDir</span><span class="op" id="2191744">(</span><span class="op" id="2191745">)</span>&nbsp;<span class="op" id="2191747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="2191750">//&nbsp;SameFile&nbsp;reports&nbsp;whether&nbsp;fi1&nbsp;and&nbsp;fi2&nbsp;describe&nbsp;the&nbsp;same&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2191814">//&nbsp;For&nbsp;example,&nbsp;on&nbsp;Unix&nbsp;this&nbsp;means&nbsp;that&nbsp;the&nbsp;device&nbsp;and&nbsp;inode&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="2191882">//&nbsp;of&nbsp;the&nbsp;two&nbsp;underlying&nbsp;structures&nbsp;are&nbsp;identical;&nbsp;on&nbsp;other&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2191950">//&nbsp;the&nbsp;decision&nbsp;may&nbsp;be&nbsp;based&nbsp;on&nbsp;the&nbsp;path&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="2191998">//&nbsp;SameFile&nbsp;only&nbsp;applies&nbsp;to&nbsp;results&nbsp;returned&nbsp;by&nbsp;this&nbsp;package&#39;s&nbsp;Stat.</span><br>
<span class="lineno">110</span><span class="comment" id="2192067">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;in&nbsp;other&nbsp;cases.</span><br>
<span class="lineno"></span><span class="keyword" id="2192103">func</span>&nbsp;<span class="ident" id="2192108">SameFile</span><span class="op" id="2192116">(</span><span class="ident" id="2192117">fi1</span><span class="op" id="2192120">,</span>&nbsp;<span class="ident" id="2192122">fi2</span>&nbsp;<span class="ident" id="2192126">FileInfo</span><span class="op" id="2192134">)</span>&nbsp;<span class="builtintype" id="2192136">bool</span>&nbsp;<span class="op" id="2192141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192144">fs1</span><span class="op" id="2192147">,</span>&nbsp;<span class="ident" id="2192149">ok1</span>&nbsp;<span class="op" id="2192153">:=</span>&nbsp;<span class="ident" id="2192156">fi1</span><span class="op" id="2192159">.</span><span class="op" id="2192160">(</span><span class="op" id="2192161">*</span><span class="ident" id="2192162">fileStat</span><span class="op" id="2192170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192173">fs2</span><span class="op" id="2192176">,</span>&nbsp;<span class="ident" id="2192178">ok2</span>&nbsp;<span class="op" id="2192182">:=</span>&nbsp;<span class="ident" id="2192185">fi2</span><span class="op" id="2192188">.</span><span class="op" id="2192189">(</span><span class="op" id="2192190">*</span><span class="ident" id="2192191">fileStat</span><span class="op" id="2192199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192202">if</span>&nbsp;<span class="op" id="2192205">!</span><span class="ident" id="2192206">ok1</span>&nbsp;<span class="op" id="2192210">||</span>&nbsp;<span class="op" id="2192213">!</span><span class="ident" id="2192214">ok2</span>&nbsp;<span class="op" id="2192218">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192222">return</span>&nbsp;<span class="builtintype" id="2192229">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2192236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192239">return</span>&nbsp;<span class="ident" id="2192246">sameFile</span><span class="op" id="2192254">(</span><span class="ident" id="2192255">fs1</span><span class="op" id="2192258">,</span>&nbsp;<span class="ident" id="2192260">fs2</span><span class="op" id="2192263">)</span><br>
<span class="lineno"></span><span class="op" id="2192265">}</span>
</div>
</body>
</html>
