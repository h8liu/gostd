<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html" class="current">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6867682">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6867737">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6867791">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6867842">package</span>&nbsp;<span class="ident" id="6867850">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6867861">import</span>&nbsp;<span class="op" id="6867868">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867871">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867880">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867889">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867899">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867907">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867914">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867920">&#34;os/exec&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867931">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867941">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867949">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867960">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6867971">&#34;time&#34;</span><br>
<span class="lineno">20</span><span class="op" id="6867978">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6867981">func</span>&nbsp;<span class="ident" id="6867986">TestQuotedPrintable</span><span class="op" id="6868005">(</span><span class="ident" id="6868006">t</span>&nbsp;<span class="op" id="6868008">*</span><span class="ident" id="6868009">testing</span><span class="op" id="6868016">.</span><span class="ident" id="6868017">T</span><span class="op" id="6868018">)</span>&nbsp;<span class="op" id="6868020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868023">tests</span>&nbsp;<span class="op" id="6868029">:=</span>&nbsp;<span class="op" id="6868032">[</span><span class="op" id="6868033">]</span><span class="keyword" id="6868034">struct</span>&nbsp;<span class="op" id="6868041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868045">in</span><span class="op" id="6868047">,</span>&nbsp;<span class="ident" id="6868049">want</span>&nbsp;<span class="builtintype" id="6868054">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6868063">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6868072">interface</span><span class="op" id="6868081">{</span><span class="op" id="6868082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868085">}</span><span class="op" id="6868086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868090">{</span><span class="ident" id="6868091">in</span><span class="op" id="6868093">:</span>&nbsp;<span class="string" id="6868095">&#34;&#34;</span><span class="op" id="6868097">,</span>&nbsp;<span class="ident" id="6868099">want</span><span class="op" id="6868103">:</span>&nbsp;<span class="string" id="6868105">&#34;&#34;</span><span class="op" id="6868107">}</span><span class="op" id="6868108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868112">{</span><span class="ident" id="6868113">in</span><span class="op" id="6868115">:</span>&nbsp;<span class="string" id="6868117">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868126">,</span>&nbsp;<span class="ident" id="6868128">want</span><span class="op" id="6868132">:</span>&nbsp;<span class="string" id="6868134">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868143">}</span><span class="op" id="6868144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868148">{</span><span class="ident" id="6868149">in</span><span class="op" id="6868151">:</span>&nbsp;<span class="string" id="6868153">&#34;foo&nbsp;bar=3D&#34;</span><span class="op" id="6868165">,</span>&nbsp;<span class="ident" id="6868167">want</span><span class="op" id="6868171">:</span>&nbsp;<span class="string" id="6868173">&#34;foo&nbsp;bar=&#34;</span><span class="op" id="6868183">}</span><span class="op" id="6868184">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868188">{</span><span class="ident" id="6868189">in</span><span class="op" id="6868191">:</span>&nbsp;<span class="string" id="6868193">&#34;foo&nbsp;bar=\n&#34;</span><span class="op" id="6868205">,</span>&nbsp;<span class="ident" id="6868207">want</span><span class="op" id="6868211">:</span>&nbsp;<span class="string" id="6868213">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868222">}</span><span class="op" id="6868223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868227">{</span><span class="ident" id="6868228">in</span><span class="op" id="6868230">:</span>&nbsp;<span class="string" id="6868232">&#34;foo&nbsp;bar\n&#34;</span><span class="op" id="6868243">,</span>&nbsp;<span class="ident" id="6868245">want</span><span class="op" id="6868249">:</span>&nbsp;<span class="string" id="6868251">&#34;foo&nbsp;bar\n&#34;</span><span class="op" id="6868262">}</span><span class="op" id="6868263">,</span>&nbsp;<span class="comment" id="6868265">//&nbsp;somewhat&nbsp;lax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868284">{</span><span class="ident" id="6868285">in</span><span class="op" id="6868287">:</span>&nbsp;<span class="string" id="6868289">&#34;foo&nbsp;bar=0&#34;</span><span class="op" id="6868300">,</span>&nbsp;<span class="ident" id="6868302">want</span><span class="op" id="6868306">:</span>&nbsp;<span class="string" id="6868308">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868317">,</span>&nbsp;<span class="ident" id="6868319">err</span><span class="op" id="6868322">:</span>&nbsp;<span class="ident" id="6868324">io</span><span class="op" id="6868326">.</span><span class="ident" id="6868327">ErrUnexpectedEOF</span><span class="op" id="6868343">}</span><span class="op" id="6868344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868348">{</span><span class="ident" id="6868349">in</span><span class="op" id="6868351">:</span>&nbsp;<span class="string" id="6868353">&#34;foo&nbsp;bar=ab&#34;</span><span class="op" id="6868365">,</span>&nbsp;<span class="ident" id="6868367">want</span><span class="op" id="6868371">:</span>&nbsp;<span class="string" id="6868373">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868382">,</span>&nbsp;<span class="ident" id="6868384">err</span><span class="op" id="6868387">:</span>&nbsp;<span class="string" id="6868389">&#34;multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x61&#34;</span><span class="op" id="6868440">}</span><span class="op" id="6868441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868445">{</span><span class="ident" id="6868446">in</span><span class="op" id="6868448">:</span>&nbsp;<span class="string" id="6868450">&#34;foo&nbsp;bar=0D=0A&#34;</span><span class="op" id="6868465">,</span>&nbsp;<span class="ident" id="6868467">want</span><span class="op" id="6868471">:</span>&nbsp;<span class="string" id="6868473">&#34;foo&nbsp;bar\r\n&#34;</span><span class="op" id="6868486">}</span><span class="op" id="6868487">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868491">{</span><span class="ident" id="6868492">in</span><span class="op" id="6868494">:</span>&nbsp;<span class="string" id="6868496">&#34;&nbsp;A&nbsp;B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;C&nbsp;&#34;</span><span class="op" id="6868517">,</span>&nbsp;<span class="ident" id="6868519">want</span><span class="op" id="6868523">:</span>&nbsp;<span class="string" id="6868525">&#34;&nbsp;A&nbsp;B\r\n&nbsp;C&#34;</span><span class="op" id="6868537">}</span><span class="op" id="6868538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868542">{</span><span class="ident" id="6868543">in</span><span class="op" id="6868545">:</span>&nbsp;<span class="string" id="6868547">&#34;&nbsp;A&nbsp;B&nbsp;=\r\n&nbsp;C&nbsp;&#34;</span><span class="op" id="6868562">,</span>&nbsp;<span class="ident" id="6868564">want</span><span class="op" id="6868568">:</span>&nbsp;<span class="string" id="6868570">&#34;&nbsp;A&nbsp;B&nbsp;&nbsp;C&#34;</span><span class="op" id="6868579">}</span><span class="op" id="6868580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868584">{</span><span class="ident" id="6868585">in</span><span class="op" id="6868587">:</span>&nbsp;<span class="string" id="6868589">&#34;&nbsp;A&nbsp;B&nbsp;=\n&nbsp;C&nbsp;&#34;</span><span class="op" id="6868602">,</span>&nbsp;<span class="ident" id="6868604">want</span><span class="op" id="6868608">:</span>&nbsp;<span class="string" id="6868610">&#34;&nbsp;A&nbsp;B&nbsp;&nbsp;C&#34;</span><span class="op" id="6868619">}</span><span class="op" id="6868620">,</span>&nbsp;<span class="comment" id="6868622">//&nbsp;lax.&nbsp;treating&nbsp;LF&nbsp;as&nbsp;CRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868652">{</span><span class="ident" id="6868653">in</span><span class="op" id="6868655">:</span>&nbsp;<span class="string" id="6868657">&#34;foo=\nbar&#34;</span><span class="op" id="6868668">,</span>&nbsp;<span class="ident" id="6868670">want</span><span class="op" id="6868674">:</span>&nbsp;<span class="string" id="6868676">&#34;foobar&#34;</span><span class="op" id="6868684">}</span><span class="op" id="6868685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868689">{</span><span class="ident" id="6868690">in</span><span class="op" id="6868692">:</span>&nbsp;<span class="string" id="6868694">&#34;foo\x00bar&#34;</span><span class="op" id="6868706">,</span>&nbsp;<span class="ident" id="6868708">want</span><span class="op" id="6868712">:</span>&nbsp;<span class="string" id="6868714">&#34;foo&#34;</span><span class="op" id="6868719">,</span>&nbsp;<span class="ident" id="6868721">err</span><span class="op" id="6868724">:</span>&nbsp;<span class="string" id="6868726">&#34;multipart:&nbsp;invalid&nbsp;unescaped&nbsp;byte&nbsp;0x00&nbsp;in&nbsp;quoted-printable&nbsp;body&#34;</span><span class="op" id="6868791">}</span><span class="op" id="6868792">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868796">{</span><span class="ident" id="6868797">in</span><span class="op" id="6868799">:</span>&nbsp;<span class="string" id="6868801">&#34;foo&nbsp;bar\xff&#34;</span><span class="op" id="6868814">,</span>&nbsp;<span class="ident" id="6868816">want</span><span class="op" id="6868820">:</span>&nbsp;<span class="string" id="6868822">&#34;foo&nbsp;bar&#34;</span><span class="op" id="6868831">,</span>&nbsp;<span class="ident" id="6868833">err</span><span class="op" id="6868836">:</span>&nbsp;<span class="string" id="6868838">&#34;multipart:&nbsp;invalid&nbsp;unescaped&nbsp;byte&nbsp;0xff&nbsp;in&nbsp;quoted-printable&nbsp;body&#34;</span><span class="op" id="6868903">}</span><span class="op" id="6868904">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6868909">//&nbsp;Equal&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868926">{</span><span class="ident" id="6868927">in</span><span class="op" id="6868929">:</span>&nbsp;<span class="string" id="6868931">&#34;=3D30\n&#34;</span><span class="op" id="6868940">,</span>&nbsp;<span class="ident" id="6868942">want</span><span class="op" id="6868946">:</span>&nbsp;<span class="string" id="6868948">&#34;=30\n&#34;</span><span class="op" id="6868955">}</span><span class="op" id="6868956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6868960">{</span><span class="ident" id="6868961">in</span><span class="op" id="6868963">:</span>&nbsp;<span class="string" id="6868965">&#34;=00=FF0=\n&#34;</span><span class="op" id="6868977">,</span>&nbsp;<span class="ident" id="6868979">want</span><span class="op" id="6868983">:</span>&nbsp;<span class="string" id="6868985">&#34;\x00\xff0&#34;</span><span class="op" id="6868996">}</span><span class="op" id="6868997">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869002">//&nbsp;Trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869027">{</span><span class="ident" id="6869028">in</span><span class="op" id="6869030">:</span>&nbsp;<span class="string" id="6869032">&#34;foo&nbsp;&nbsp;\n&#34;</span><span class="op" id="6869041">,</span>&nbsp;<span class="ident" id="6869043">want</span><span class="op" id="6869047">:</span>&nbsp;<span class="string" id="6869049">&#34;foo\n&#34;</span><span class="op" id="6869056">}</span><span class="op" id="6869057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869061">{</span><span class="ident" id="6869062">in</span><span class="op" id="6869064">:</span>&nbsp;<span class="string" id="6869066">&#34;foo&nbsp;&nbsp;\n\nfoo&nbsp;=\n\nfoo=20\n\n&#34;</span><span class="op" id="6869096">,</span>&nbsp;<span class="ident" id="6869098">want</span><span class="op" id="6869102">:</span>&nbsp;<span class="string" id="6869104">&#34;foo\n\nfoo&nbsp;\nfoo&nbsp;\n\n&#34;</span><span class="op" id="6869127">}</span><span class="op" id="6869128">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869133">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;allow&nbsp;bare&nbsp;\n&nbsp;and&nbsp;\r&nbsp;through,&nbsp;despite&nbsp;it&nbsp;being&nbsp;strictly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869208">//&nbsp;not&nbsp;permitted&nbsp;per&nbsp;RFC&nbsp;2045,&nbsp;Section&nbsp;6.7&nbsp;Page&nbsp;22&nbsp;bullet&nbsp;(4).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869273">{</span><span class="ident" id="6869274">in</span><span class="op" id="6869276">:</span>&nbsp;<span class="string" id="6869278">&#34;foo\nbar&#34;</span><span class="op" id="6869288">,</span>&nbsp;<span class="ident" id="6869290">want</span><span class="op" id="6869294">:</span>&nbsp;<span class="string" id="6869296">&#34;foo\nbar&#34;</span><span class="op" id="6869306">}</span><span class="op" id="6869307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869311">{</span><span class="ident" id="6869312">in</span><span class="op" id="6869314">:</span>&nbsp;<span class="string" id="6869316">&#34;foo\rbar&#34;</span><span class="op" id="6869326">,</span>&nbsp;<span class="ident" id="6869328">want</span><span class="op" id="6869332">:</span>&nbsp;<span class="string" id="6869334">&#34;foo\rbar&#34;</span><span class="op" id="6869344">}</span><span class="op" id="6869345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869349">{</span><span class="ident" id="6869350">in</span><span class="op" id="6869352">:</span>&nbsp;<span class="string" id="6869354">&#34;foo\r\nbar&#34;</span><span class="op" id="6869366">,</span>&nbsp;<span class="ident" id="6869368">want</span><span class="op" id="6869372">:</span>&nbsp;<span class="string" id="6869374">&#34;foo\r\nbar&#34;</span><span class="op" id="6869386">}</span><span class="op" id="6869387">,</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869392">//&nbsp;Different&nbsp;types&nbsp;of&nbsp;soft&nbsp;line-breaks.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869434">{</span><span class="ident" id="6869435">in</span><span class="op" id="6869437">:</span>&nbsp;<span class="string" id="6869439">&#34;foo=\r\nbar&#34;</span><span class="op" id="6869452">,</span>&nbsp;<span class="ident" id="6869454">want</span><span class="op" id="6869458">:</span>&nbsp;<span class="string" id="6869460">&#34;foobar&#34;</span><span class="op" id="6869468">}</span><span class="op" id="6869469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869473">{</span><span class="ident" id="6869474">in</span><span class="op" id="6869476">:</span>&nbsp;<span class="string" id="6869478">&#34;foo=\nbar&#34;</span><span class="op" id="6869489">,</span>&nbsp;<span class="ident" id="6869491">want</span><span class="op" id="6869495">:</span>&nbsp;<span class="string" id="6869497">&#34;foobar&#34;</span><span class="op" id="6869505">}</span><span class="op" id="6869506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869510">{</span><span class="ident" id="6869511">in</span><span class="op" id="6869513">:</span>&nbsp;<span class="string" id="6869515">&#34;foo=\rbar&#34;</span><span class="op" id="6869526">,</span>&nbsp;<span class="ident" id="6869528">want</span><span class="op" id="6869532">:</span>&nbsp;<span class="string" id="6869534">&#34;foo&#34;</span><span class="op" id="6869539">,</span>&nbsp;<span class="ident" id="6869541">err</span><span class="op" id="6869544">:</span>&nbsp;<span class="string" id="6869546">&#34;multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x0d&#34;</span><span class="op" id="6869597">}</span><span class="op" id="6869598">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869602">{</span><span class="ident" id="6869603">in</span><span class="op" id="6869605">:</span>&nbsp;<span class="string" id="6869607">&#34;foo=\r\r\r&nbsp;\nbar&#34;</span><span class="op" id="6869625">,</span>&nbsp;<span class="ident" id="6869627">want</span><span class="op" id="6869631">:</span>&nbsp;<span class="string" id="6869633">&#34;foo&#34;</span><span class="op" id="6869638">,</span>&nbsp;<span class="ident" id="6869640">err</span><span class="op" id="6869643">:</span>&nbsp;<span class="string" id="6869645">`multipart:&nbsp;invalid&nbsp;bytes&nbsp;after&nbsp;=:&nbsp;&#34;\r\r\r&nbsp;\n&#34;`</span><span class="op" id="6869692">}</span><span class="op" id="6869693">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6869698">//&nbsp;Example&nbsp;from&nbsp;RFC&nbsp;2045:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869726">{</span><span class="ident" id="6869727">in</span><span class="op" id="6869729">:</span>&nbsp;<span class="string" id="6869731">&#34;Now&#39;s&nbsp;the&nbsp;time&nbsp;=\n&#34;</span>&nbsp;<span class="op" id="6869752">+</span>&nbsp;<span class="string" id="6869754">&#34;for&nbsp;all&nbsp;folk&nbsp;to&nbsp;come=\n&#34;</span>&nbsp;<span class="op" id="6869780">+</span>&nbsp;<span class="string" id="6869782">&#34;&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&nbsp;country.&#34;</span><span class="op" id="6869813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869818">want</span><span class="op" id="6869822">:</span>&nbsp;<span class="string" id="6869824">&#34;Now&#39;s&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;folk&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&nbsp;country.&#34;</span><span class="op" id="6869890">}</span><span class="op" id="6869891">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6869894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869897">for</span>&nbsp;<span class="ident" id="6869901">_</span><span class="op" id="6869902">,</span>&nbsp;<span class="ident" id="6869904">tt</span>&nbsp;<span class="op" id="6869907">:=</span>&nbsp;<span class="keyword" id="6869910">range</span>&nbsp;<span class="ident" id="6869916">tests</span>&nbsp;<span class="op" id="6869922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6869926">var</span>&nbsp;<span class="ident" id="6869930">buf</span>&nbsp;<span class="ident" id="6869934">bytes</span><span class="op" id="6869939">.</span><span class="ident" id="6869940">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6869949">_</span><span class="op" id="6869950">,</span>&nbsp;<span class="ident" id="6869952">err</span>&nbsp;<span class="op" id="6869956">:=</span>&nbsp;<span class="ident" id="6869959">io</span><span class="op" id="6869961">.</span><span class="ident" id="6869962">Copy</span><span class="op" id="6869966">(</span><span class="op" id="6869967">&amp;</span><span class="ident" id="6869968">buf</span><span class="op" id="6869971">,</span>&nbsp;<span class="ident" id="6869973">newQuotedPrintableReader</span><span class="op" id="6869997">(</span><span class="ident" id="6869998">strings</span><span class="op" id="6870005">.</span><span class="ident" id="6870006">NewReader</span><span class="op" id="6870015">(</span><span class="ident" id="6870016">tt</span><span class="op" id="6870018">.</span><span class="ident" id="6870019">in</span><span class="op" id="6870021">)</span><span class="op" id="6870022">)</span><span class="op" id="6870023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870027">if</span>&nbsp;<span class="ident" id="6870030">got</span>&nbsp;<span class="op" id="6870034">:=</span>&nbsp;<span class="ident" id="6870037">buf</span><span class="op" id="6870040">.</span><span class="ident" id="6870041">String</span><span class="op" id="6870047">(</span><span class="op" id="6870048">)</span><span class="op" id="6870049">;</span>&nbsp;<span class="ident" id="6870051">got</span>&nbsp;<span class="op" id="6870055">!=</span>&nbsp;<span class="ident" id="6870058">tt</span><span class="op" id="6870060">.</span><span class="ident" id="6870061">want</span>&nbsp;<span class="op" id="6870066">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870071">t</span><span class="op" id="6870072">.</span><span class="ident" id="6870073">Errorf</span><span class="op" id="6870079">(</span><span class="string" id="6870080">&#34;for&nbsp;%q,&nbsp;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6870105">,</span>&nbsp;<span class="ident" id="6870107">tt</span><span class="op" id="6870109">.</span><span class="ident" id="6870110">in</span><span class="op" id="6870112">,</span>&nbsp;<span class="ident" id="6870114">got</span><span class="op" id="6870117">,</span>&nbsp;<span class="ident" id="6870119">tt</span><span class="op" id="6870121">.</span><span class="ident" id="6870122">want</span><span class="op" id="6870126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870134">switch</span>&nbsp;<span class="ident" id="6870141">verr</span>&nbsp;<span class="op" id="6870146">:=</span>&nbsp;<span class="ident" id="6870149">tt</span><span class="op" id="6870151">.</span><span class="ident" id="6870152">err</span><span class="op" id="6870155">.</span><span class="op" id="6870156">(</span><span class="keyword" id="6870157">type</span><span class="op" id="6870161">)</span>&nbsp;<span class="op" id="6870163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870167">case</span>&nbsp;<span class="builtintype" id="6870172">nil</span><span class="op" id="6870175">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870180">if</span>&nbsp;<span class="ident" id="6870183">err</span>&nbsp;<span class="op" id="6870187">!=</span>&nbsp;<span class="builtintype" id="6870190">nil</span>&nbsp;<span class="op" id="6870194">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870200">t</span><span class="op" id="6870201">.</span><span class="ident" id="6870202">Errorf</span><span class="op" id="6870208">(</span><span class="string" id="6870209">&#34;for&nbsp;%q,&nbsp;got&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6870243">,</span>&nbsp;<span class="ident" id="6870245">tt</span><span class="op" id="6870247">.</span><span class="ident" id="6870248">in</span><span class="op" id="6870250">,</span>&nbsp;<span class="ident" id="6870252">err</span><span class="op" id="6870255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870264">case</span>&nbsp;<span class="builtintype" id="6870269">string</span><span class="op" id="6870275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870280">if</span>&nbsp;<span class="ident" id="6870283">got</span>&nbsp;<span class="op" id="6870287">:=</span>&nbsp;<span class="ident" id="6870290">fmt</span><span class="op" id="6870293">.</span><span class="ident" id="6870294">Sprint</span><span class="op" id="6870300">(</span><span class="ident" id="6870301">err</span><span class="op" id="6870304">)</span><span class="op" id="6870305">;</span>&nbsp;<span class="ident" id="6870307">got</span>&nbsp;<span class="op" id="6870311">!=</span>&nbsp;<span class="ident" id="6870314">verr</span>&nbsp;<span class="op" id="6870319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870325">t</span><span class="op" id="6870326">.</span><span class="ident" id="6870327">Errorf</span><span class="op" id="6870333">(</span><span class="string" id="6870334">&#34;for&nbsp;%q,&nbsp;got&nbsp;error&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6870365">,</span>&nbsp;<span class="ident" id="6870367">tt</span><span class="op" id="6870369">.</span><span class="ident" id="6870370">in</span><span class="op" id="6870372">,</span>&nbsp;<span class="ident" id="6870374">got</span><span class="op" id="6870377">,</span>&nbsp;<span class="ident" id="6870379">verr</span><span class="op" id="6870383">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870392">case</span>&nbsp;<span class="builtintype" id="6870397">error</span><span class="op" id="6870402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870407">if</span>&nbsp;<span class="ident" id="6870410">err</span>&nbsp;<span class="op" id="6870414">!=</span>&nbsp;<span class="ident" id="6870417">verr</span>&nbsp;<span class="op" id="6870422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870428">t</span><span class="op" id="6870429">.</span><span class="ident" id="6870430">Errorf</span><span class="op" id="6870436">(</span><span class="string" id="6870437">&#34;for&nbsp;%q,&nbsp;got&nbsp;error&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6870468">,</span>&nbsp;<span class="ident" id="6870470">tt</span><span class="op" id="6870472">.</span><span class="ident" id="6870473">in</span><span class="op" id="6870475">,</span>&nbsp;<span class="ident" id="6870477">err</span><span class="op" id="6870480">,</span>&nbsp;<span class="ident" id="6870482">verr</span><span class="op" id="6870486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870491">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6870501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6870504">func</span>&nbsp;<span class="ident" id="6870509">everySequence</span><span class="op" id="6870522">(</span><span class="ident" id="6870523">base</span><span class="op" id="6870527">,</span>&nbsp;<span class="ident" id="6870529">alpha</span>&nbsp;<span class="builtintype" id="6870535">string</span><span class="op" id="6870541">,</span>&nbsp;<span class="ident" id="6870543">length</span>&nbsp;<span class="builtintype" id="6870550">int</span><span class="op" id="6870553">,</span>&nbsp;<span class="ident" id="6870555">fn</span>&nbsp;<span class="keyword" id="6870558">func</span><span class="op" id="6870562">(</span><span class="builtintype" id="6870563">string</span><span class="op" id="6870569">)</span><span class="op" id="6870570">)</span>&nbsp;<span class="op" id="6870572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870575">if</span>&nbsp;<span class="builtinfunc" id="6870578">len</span><span class="op" id="6870581">(</span><span class="ident" id="6870582">base</span><span class="op" id="6870586">)</span>&nbsp;<span class="op" id="6870588">==</span>&nbsp;<span class="ident" id="6870591">length</span>&nbsp;<span class="op" id="6870598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870602">fn</span><span class="op" id="6870604">(</span><span class="ident" id="6870605">base</span><span class="op" id="6870609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870613">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870621">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870624">for</span>&nbsp;<span class="ident" id="6870628">i</span>&nbsp;<span class="op" id="6870630">:=</span>&nbsp;<span class="num" id="6870633">0</span><span class="op" id="6870634">;</span>&nbsp;<span class="ident" id="6870636">i</span>&nbsp;<span class="op" id="6870638">&lt;</span>&nbsp;<span class="builtinfunc" id="6870640">len</span><span class="op" id="6870643">(</span><span class="ident" id="6870644">alpha</span><span class="op" id="6870649">)</span><span class="op" id="6870650">;</span>&nbsp;<span class="ident" id="6870652">i</span><span class="op" id="6870653">++</span>&nbsp;<span class="op" id="6870656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870660">everySequence</span><span class="op" id="6870673">(</span><span class="ident" id="6870674">base</span><span class="op" id="6870678">+</span><span class="ident" id="6870679">alpha</span><span class="op" id="6870684">[</span><span class="ident" id="6870685">i</span><span class="op" id="6870686">:</span><span class="ident" id="6870687">i</span><span class="op" id="6870688">+</span><span class="num" id="6870689">1</span><span class="op" id="6870690">]</span><span class="op" id="6870691">,</span>&nbsp;<span class="ident" id="6870693">alpha</span><span class="op" id="6870698">,</span>&nbsp;<span class="ident" id="6870700">length</span><span class="op" id="6870706">,</span>&nbsp;<span class="ident" id="6870708">fn</span><span class="op" id="6870710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6870713">}</span><br>
<span class="lineno"></span><span class="op" id="6870715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6870718">var</span>&nbsp;<span class="ident" id="6870722">useQprint</span>&nbsp;<span class="op" id="6870732">=</span>&nbsp;<span class="ident" id="6870734">flag</span><span class="op" id="6870738">.</span><span class="ident" id="6870739">Bool</span><span class="op" id="6870743">(</span><span class="string" id="6870744">&#34;qprint&#34;</span><span class="op" id="6870752">,</span>&nbsp;<span class="builtintype" id="6870754">false</span><span class="op" id="6870759">,</span>&nbsp;<span class="string" id="6870761">&#34;Compare&nbsp;against&nbsp;the&nbsp;&#39;qprint&#39;&nbsp;program.&#34;</span><span class="op" id="6870800">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6870803">var</span>&nbsp;<span class="ident" id="6870807">badSoftRx</span>&nbsp;<span class="op" id="6870817">=</span>&nbsp;<span class="ident" id="6870819">regexp</span><span class="op" id="6870825">.</span><span class="ident" id="6870826">MustCompile</span><span class="op" id="6870837">(</span><span class="string" id="6870838">`=([^\r\n]+?\n)|([^\r\n]+$)|(\r$)|(\r[^\n]+\n)|(&nbsp;\r\n)`</span><span class="op" id="6870893">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6870896">func</span>&nbsp;<span class="ident" id="6870901">TestQPExhaustive</span><span class="op" id="6870917">(</span><span class="ident" id="6870918">t</span>&nbsp;<span class="op" id="6870920">*</span><span class="ident" id="6870921">testing</span><span class="op" id="6870928">.</span><span class="ident" id="6870929">T</span><span class="op" id="6870930">)</span>&nbsp;<span class="op" id="6870932">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870935">if</span>&nbsp;<span class="op" id="6870938">*</span><span class="ident" id="6870939">useQprint</span>&nbsp;<span class="op" id="6870949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6870953">_</span><span class="op" id="6870954">,</span>&nbsp;<span class="ident" id="6870956">err</span>&nbsp;<span class="op" id="6870960">:=</span>&nbsp;<span class="ident" id="6870963">exec</span><span class="op" id="6870967">.</span><span class="ident" id="6870968">LookPath</span><span class="op" id="6870976">(</span><span class="string" id="6870977">&#34;qprint&#34;</span><span class="op" id="6870985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6870989">if</span>&nbsp;<span class="ident" id="6870992">err</span>&nbsp;<span class="op" id="6870996">!=</span>&nbsp;<span class="builtintype" id="6870999">nil</span>&nbsp;<span class="op" id="6871003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871008">t</span><span class="op" id="6871009">.</span><span class="ident" id="6871010">Fatalf</span><span class="op" id="6871016">(</span><span class="string" id="6871017">&#34;Error&nbsp;looking&nbsp;for&nbsp;qprint:&nbsp;%v&#34;</span><span class="op" id="6871047">,</span>&nbsp;<span class="ident" id="6871049">err</span><span class="op" id="6871052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871056">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871063">var</span>&nbsp;<span class="ident" id="6871067">buf</span>&nbsp;<span class="ident" id="6871071">bytes</span><span class="op" id="6871076">.</span><span class="ident" id="6871077">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871085">res</span>&nbsp;<span class="op" id="6871089">:=</span>&nbsp;<span class="builtinfunc" id="6871092">make</span><span class="op" id="6871096">(</span><span class="keyword" id="6871097">map</span><span class="op" id="6871100">[</span><span class="builtintype" id="6871101">string</span><span class="op" id="6871107">]</span><span class="builtintype" id="6871108">int</span><span class="op" id="6871111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871114">everySequence</span><span class="op" id="6871127">(</span><span class="string" id="6871128">&#34;&#34;</span><span class="op" id="6871130">,</span>&nbsp;<span class="string" id="6871132">&#34;0A&nbsp;\r\n=&#34;</span><span class="op" id="6871142">,</span>&nbsp;<span class="num" id="6871144">6</span><span class="op" id="6871145">,</span>&nbsp;<span class="keyword" id="6871147">func</span><span class="op" id="6871151">(</span><span class="ident" id="6871152">s</span>&nbsp;<span class="builtintype" id="6871154">string</span><span class="op" id="6871160">)</span>&nbsp;<span class="op" id="6871162">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871166">if</span>&nbsp;<span class="ident" id="6871169">strings</span><span class="op" id="6871176">.</span><span class="ident" id="6871177">HasSuffix</span><span class="op" id="6871186">(</span><span class="ident" id="6871187">s</span><span class="op" id="6871188">,</span>&nbsp;<span class="string" id="6871190">&#34;=&#34;</span><span class="op" id="6871193">)</span>&nbsp;<span class="op" id="6871195">||</span>&nbsp;<span class="ident" id="6871198">strings</span><span class="op" id="6871205">.</span><span class="ident" id="6871206">Contains</span><span class="op" id="6871214">(</span><span class="ident" id="6871215">s</span><span class="op" id="6871216">,</span>&nbsp;<span class="string" id="6871218">&#34;==&#34;</span><span class="op" id="6871222">)</span>&nbsp;<span class="op" id="6871224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871229">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871242">buf</span><span class="op" id="6871245">.</span><span class="ident" id="6871246">Reset</span><span class="op" id="6871251">(</span><span class="op" id="6871252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871256">_</span><span class="op" id="6871257">,</span>&nbsp;<span class="ident" id="6871259">err</span>&nbsp;<span class="op" id="6871263">:=</span>&nbsp;<span class="ident" id="6871266">io</span><span class="op" id="6871268">.</span><span class="ident" id="6871269">Copy</span><span class="op" id="6871273">(</span><span class="op" id="6871274">&amp;</span><span class="ident" id="6871275">buf</span><span class="op" id="6871278">,</span>&nbsp;<span class="ident" id="6871280">newQuotedPrintableReader</span><span class="op" id="6871304">(</span><span class="ident" id="6871305">strings</span><span class="op" id="6871312">.</span><span class="ident" id="6871313">NewReader</span><span class="op" id="6871322">(</span><span class="ident" id="6871323">s</span><span class="op" id="6871324">)</span><span class="op" id="6871325">)</span><span class="op" id="6871326">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871330">if</span>&nbsp;<span class="ident" id="6871333">err</span>&nbsp;<span class="op" id="6871337">!=</span>&nbsp;<span class="builtintype" id="6871340">nil</span>&nbsp;<span class="op" id="6871344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871349">errStr</span>&nbsp;<span class="op" id="6871356">:=</span>&nbsp;<span class="ident" id="6871359">err</span><span class="op" id="6871362">.</span><span class="ident" id="6871363">Error</span><span class="op" id="6871368">(</span><span class="op" id="6871369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871374">if</span>&nbsp;<span class="ident" id="6871377">strings</span><span class="op" id="6871384">.</span><span class="ident" id="6871385">Contains</span><span class="op" id="6871393">(</span><span class="ident" id="6871394">errStr</span><span class="op" id="6871400">,</span>&nbsp;<span class="string" id="6871402">&#34;invalid&nbsp;bytes&nbsp;after&nbsp;=:&#34;</span><span class="op" id="6871426">)</span>&nbsp;<span class="op" id="6871428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871434">errStr</span>&nbsp;<span class="op" id="6871441">=</span>&nbsp;<span class="string" id="6871443">&#34;invalid&nbsp;bytes&nbsp;after&nbsp;=&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871470">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6871475">res</span><span class="op" id="6871478">[</span><span class="ident" id="6871479">errStr</span><span class="op" id="6871485">]</span><span class="op" id="6871486">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871492">if</span>&nbsp;<span class="ident" id="6871495">strings</span><span class="op" id="6871502">.</span><span class="ident" id="6871503">Contains</span><span class="op" id="6871511">(</span><span class="ident" id="6871512">errStr</span><span class="op" id="6871518">,</span>&nbsp;<span class="string" id="6871520">&#34;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;&#34;</span><span class="op" id="6871556">)</span>&nbsp;<span class="op" id="6871558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871564">if</span>&nbsp;<span class="ident" id="6871567">strings</span><span class="op" id="6871574">.</span><span class="ident" id="6871575">HasSuffix</span><span class="op" id="6871584">(</span><span class="ident" id="6871585">errStr</span><span class="op" id="6871591">,</span>&nbsp;<span class="string" id="6871593">&#34;0x20&#34;</span><span class="op" id="6871599">)</span>&nbsp;<span class="op" id="6871601">&amp;&amp;</span>&nbsp;<span class="op" id="6871604">(</span><span class="ident" id="6871605">strings</span><span class="op" id="6871612">.</span><span class="ident" id="6871613">Contains</span><span class="op" id="6871621">(</span><span class="ident" id="6871622">s</span><span class="op" id="6871623">,</span>&nbsp;<span class="string" id="6871625">&#34;=0&nbsp;&#34;</span><span class="op" id="6871630">)</span>&nbsp;<span class="op" id="6871632">||</span>&nbsp;<span class="ident" id="6871635">strings</span><span class="op" id="6871642">.</span><span class="ident" id="6871643">Contains</span><span class="op" id="6871651">(</span><span class="ident" id="6871652">s</span><span class="op" id="6871653">,</span>&nbsp;<span class="string" id="6871655">&#34;=A&nbsp;&#34;</span><span class="op" id="6871660">)</span>&nbsp;<span class="op" id="6871662">||</span>&nbsp;<span class="ident" id="6871665">strings</span><span class="op" id="6871672">.</span><span class="ident" id="6871673">Contains</span><span class="op" id="6871681">(</span><span class="ident" id="6871682">s</span><span class="op" id="6871683">,</span>&nbsp;<span class="string" id="6871685">&#34;=&nbsp;&#34;</span><span class="op" id="6871689">)</span><span class="op" id="6871690">)</span>&nbsp;<span class="op" id="6871692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871699">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871710">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871716">if</span>&nbsp;<span class="ident" id="6871719">strings</span><span class="op" id="6871726">.</span><span class="ident" id="6871727">HasSuffix</span><span class="op" id="6871736">(</span><span class="ident" id="6871737">errStr</span><span class="op" id="6871743">,</span>&nbsp;<span class="string" id="6871745">&#34;0x3d&#34;</span><span class="op" id="6871751">)</span>&nbsp;<span class="op" id="6871753">&amp;&amp;</span>&nbsp;<span class="op" id="6871756">(</span><span class="ident" id="6871757">strings</span><span class="op" id="6871764">.</span><span class="ident" id="6871765">Contains</span><span class="op" id="6871773">(</span><span class="ident" id="6871774">s</span><span class="op" id="6871775">,</span>&nbsp;<span class="string" id="6871777">&#34;=0=&#34;</span><span class="op" id="6871782">)</span>&nbsp;<span class="op" id="6871784">||</span>&nbsp;<span class="ident" id="6871787">strings</span><span class="op" id="6871794">.</span><span class="ident" id="6871795">Contains</span><span class="op" id="6871803">(</span><span class="ident" id="6871804">s</span><span class="op" id="6871805">,</span>&nbsp;<span class="string" id="6871807">&#34;=A=&#34;</span><span class="op" id="6871812">)</span><span class="op" id="6871813">)</span>&nbsp;<span class="op" id="6871815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871822">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6871833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6871839">if</span>&nbsp;<span class="ident" id="6871842">strings</span><span class="op" id="6871849">.</span><span class="ident" id="6871850">HasSuffix</span><span class="op" id="6871859">(</span><span class="ident" id="6871860">errStr</span><span class="op" id="6871866">,</span>&nbsp;<span class="string" id="6871868">&#34;0x0a&#34;</span><span class="op" id="6871874">)</span>&nbsp;<span class="op" id="6871876">||</span>&nbsp;<span class="ident" id="6871879">strings</span><span class="op" id="6871886">.</span><span class="ident" id="6871887">HasSuffix</span><span class="op" id="6871896">(</span><span class="ident" id="6871897">errStr</span><span class="op" id="6871903">,</span>&nbsp;<span class="string" id="6871905">&#34;0x0d&#34;</span><span class="op" id="6871911">)</span>&nbsp;<span class="op" id="6871913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6871920">//&nbsp;bunch&nbsp;of&nbsp;cases;&nbsp;since&nbsp;whitespace&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;line&nbsp;before&nbsp;\n&nbsp;is&nbsp;removed.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872004">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872025">if</span>&nbsp;<span class="ident" id="6872028">strings</span><span class="op" id="6872035">.</span><span class="ident" id="6872036">Contains</span><span class="op" id="6872044">(</span><span class="ident" id="6872045">errStr</span><span class="op" id="6872051">,</span>&nbsp;<span class="string" id="6872053">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="6872069">)</span>&nbsp;<span class="op" id="6872071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872077">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872092">if</span>&nbsp;<span class="ident" id="6872095">errStr</span>&nbsp;<span class="op" id="6872102">==</span>&nbsp;<span class="string" id="6872105">&#34;invalid&nbsp;bytes&nbsp;after&nbsp;=&#34;</span>&nbsp;<span class="op" id="6872129">&amp;&amp;</span>&nbsp;<span class="ident" id="6872132">badSoftRx</span><span class="op" id="6872141">.</span><span class="ident" id="6872142">MatchString</span><span class="op" id="6872153">(</span><span class="ident" id="6872154">s</span><span class="op" id="6872155">)</span>&nbsp;<span class="op" id="6872157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872163">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872178">t</span><span class="op" id="6872179">.</span><span class="ident" id="6872180">Errorf</span><span class="op" id="6872186">(</span><span class="string" id="6872187">&#34;decode(%q)&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6872204">,</span>&nbsp;<span class="ident" id="6872206">s</span><span class="op" id="6872207">,</span>&nbsp;<span class="ident" id="6872209">err</span><span class="op" id="6872212">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872217">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872230">if</span>&nbsp;<span class="op" id="6872233">*</span><span class="ident" id="6872234">useQprint</span>&nbsp;<span class="op" id="6872244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872249">cmd</span>&nbsp;<span class="op" id="6872253">:=</span>&nbsp;<span class="ident" id="6872256">exec</span><span class="op" id="6872260">.</span><span class="ident" id="6872261">Command</span><span class="op" id="6872268">(</span><span class="string" id="6872269">&#34;qprint&#34;</span><span class="op" id="6872277">,</span>&nbsp;<span class="string" id="6872279">&#34;-d&#34;</span><span class="op" id="6872283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872288">cmd</span><span class="op" id="6872291">.</span><span class="ident" id="6872292">Stdin</span>&nbsp;<span class="op" id="6872298">=</span>&nbsp;<span class="ident" id="6872300">strings</span><span class="op" id="6872307">.</span><span class="ident" id="6872308">NewReader</span><span class="op" id="6872317">(</span><span class="ident" id="6872318">s</span><span class="op" id="6872319">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872324">stderr</span><span class="op" id="6872330">,</span>&nbsp;<span class="ident" id="6872332">err</span>&nbsp;<span class="op" id="6872336">:=</span>&nbsp;<span class="ident" id="6872339">cmd</span><span class="op" id="6872342">.</span><span class="ident" id="6872343">StderrPipe</span><span class="op" id="6872353">(</span><span class="op" id="6872354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872359">if</span>&nbsp;<span class="ident" id="6872362">err</span>&nbsp;<span class="op" id="6872366">!=</span>&nbsp;<span class="builtintype" id="6872369">nil</span>&nbsp;<span class="op" id="6872373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6872379">panic</span><span class="op" id="6872384">(</span><span class="ident" id="6872385">err</span><span class="op" id="6872388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872398">qpres</span>&nbsp;<span class="op" id="6872404">:=</span>&nbsp;<span class="builtinfunc" id="6872407">make</span><span class="op" id="6872411">(</span><span class="keyword" id="6872412">chan</span>&nbsp;<span class="keyword" id="6872417">interface</span><span class="op" id="6872426">{</span><span class="op" id="6872427">}</span><span class="op" id="6872428">,</span>&nbsp;<span class="num" id="6872430">2</span><span class="op" id="6872431">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872436">go</span>&nbsp;<span class="keyword" id="6872439">func</span><span class="op" id="6872443">(</span><span class="op" id="6872444">)</span>&nbsp;<span class="op" id="6872446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872452">br</span>&nbsp;<span class="op" id="6872455">:=</span>&nbsp;<span class="ident" id="6872458">bufio</span><span class="op" id="6872463">.</span><span class="ident" id="6872464">NewReader</span><span class="op" id="6872473">(</span><span class="ident" id="6872474">stderr</span><span class="op" id="6872480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872486">s</span><span class="op" id="6872487">,</span>&nbsp;<span class="ident" id="6872489">_</span>&nbsp;<span class="op" id="6872491">:=</span>&nbsp;<span class="ident" id="6872494">br</span><span class="op" id="6872496">.</span><span class="ident" id="6872497">ReadString</span><span class="op" id="6872507">(</span><span class="string" id="6872508">&#39;\n&#39;</span><span class="op" id="6872512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872518">if</span>&nbsp;<span class="ident" id="6872521">s</span>&nbsp;<span class="op" id="6872523">!=</span>&nbsp;<span class="string" id="6872526">&#34;&#34;</span>&nbsp;<span class="op" id="6872529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872536">qpres</span>&nbsp;<span class="op" id="6872542">&lt;-</span>&nbsp;<span class="ident" id="6872545">errors</span><span class="op" id="6872551">.</span><span class="ident" id="6872552">New</span><span class="op" id="6872555">(</span><span class="ident" id="6872556">s</span><span class="op" id="6872557">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872564">if</span>&nbsp;<span class="ident" id="6872567">cmd</span><span class="op" id="6872570">.</span><span class="ident" id="6872571">Process</span>&nbsp;<span class="op" id="6872579">!=</span>&nbsp;<span class="builtintype" id="6872582">nil</span>&nbsp;<span class="op" id="6872586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6872594">//&nbsp;It&nbsp;can&nbsp;get&nbsp;stuck&nbsp;on&nbsp;invalid&nbsp;input,&nbsp;like:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6872644">//&nbsp;echo&nbsp;-n&nbsp;&#34;0000=&nbsp;&#34;&nbsp;|&nbsp;qprint&nbsp;-d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872682">cmd</span><span class="op" id="6872685">.</span><span class="ident" id="6872686">Process</span><span class="op" id="6872693">.</span><span class="ident" id="6872694">Kill</span><span class="op" id="6872698">(</span><span class="op" id="6872699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872706">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872717">}</span><span class="op" id="6872718">(</span><span class="op" id="6872719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872724">go</span>&nbsp;<span class="keyword" id="6872727">func</span><span class="op" id="6872731">(</span><span class="op" id="6872732">)</span>&nbsp;<span class="op" id="6872734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872740">want</span><span class="op" id="6872744">,</span>&nbsp;<span class="ident" id="6872746">err</span>&nbsp;<span class="op" id="6872750">:=</span>&nbsp;<span class="ident" id="6872753">cmd</span><span class="op" id="6872756">.</span><span class="ident" id="6872757">Output</span><span class="op" id="6872763">(</span><span class="op" id="6872764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872770">if</span>&nbsp;<span class="ident" id="6872773">err</span>&nbsp;<span class="op" id="6872777">==</span>&nbsp;<span class="builtintype" id="6872780">nil</span>&nbsp;<span class="op" id="6872784">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872791">qpres</span>&nbsp;<span class="op" id="6872797">&lt;-</span>&nbsp;<span class="ident" id="6872800">want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6872814">}</span><span class="op" id="6872815">(</span><span class="op" id="6872816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872821">select</span>&nbsp;<span class="op" id="6872828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872833">case</span>&nbsp;<span class="ident" id="6872838">got</span>&nbsp;<span class="op" id="6872842">:=</span>&nbsp;<span class="op" id="6872845">&lt;-</span><span class="ident" id="6872847">qpres</span><span class="op" id="6872852">:</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872858">if</span>&nbsp;<span class="ident" id="6872861">want</span><span class="op" id="6872865">,</span>&nbsp;<span class="ident" id="6872867">ok</span>&nbsp;<span class="op" id="6872870">:=</span>&nbsp;<span class="ident" id="6872873">got</span><span class="op" id="6872876">.</span><span class="op" id="6872877">(</span><span class="op" id="6872878">[</span><span class="op" id="6872879">]</span><span class="builtintype" id="6872880">byte</span><span class="op" id="6872884">)</span><span class="op" id="6872885">;</span>&nbsp;<span class="ident" id="6872887">ok</span>&nbsp;<span class="op" id="6872890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6872897">if</span>&nbsp;<span class="builtintype" id="6872900">string</span><span class="op" id="6872906">(</span><span class="ident" id="6872907">want</span><span class="op" id="6872911">)</span>&nbsp;<span class="op" id="6872913">!=</span>&nbsp;<span class="ident" id="6872916">buf</span><span class="op" id="6872919">.</span><span class="ident" id="6872920">String</span><span class="op" id="6872926">(</span><span class="op" id="6872927">)</span>&nbsp;<span class="op" id="6872929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6872937">t</span><span class="op" id="6872938">.</span><span class="ident" id="6872939">Errorf</span><span class="op" id="6872945">(</span><span class="string" id="6872946">&#34;go&nbsp;decode(%q)&nbsp;=&nbsp;%q;&nbsp;qprint&nbsp;=&nbsp;%q&#34;</span><span class="op" id="6872979">,</span>&nbsp;<span class="ident" id="6872981">s</span><span class="op" id="6872982">,</span>&nbsp;<span class="ident" id="6872984">want</span><span class="op" id="6872988">,</span>&nbsp;<span class="ident" id="6872990">buf</span><span class="op" id="6872993">.</span><span class="ident" id="6872994">String</span><span class="op" id="6873000">(</span><span class="op" id="6873001">)</span><span class="op" id="6873002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873015">}</span>&nbsp;<span class="keyword" id="6873017">else</span>&nbsp;<span class="op" id="6873022">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873029">t</span><span class="op" id="6873030">.</span><span class="ident" id="6873031">Logf</span><span class="op" id="6873035">(</span><span class="string" id="6873036">&#34;qprint&nbsp;-d(%q)&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6873056">,</span>&nbsp;<span class="ident" id="6873058">s</span><span class="op" id="6873059">,</span>&nbsp;<span class="ident" id="6873061">got</span><span class="op" id="6873064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873075">case</span>&nbsp;<span class="op" id="6873080">&lt;-</span><span class="ident" id="6873082">time</span><span class="op" id="6873086">.</span><span class="ident" id="6873087">After</span><span class="op" id="6873092">(</span><span class="num" id="6873093">5</span>&nbsp;<span class="op" id="6873095">*</span>&nbsp;<span class="ident" id="6873097">time</span><span class="op" id="6873101">.</span><span class="ident" id="6873102">Second</span><span class="op" id="6873108">)</span><span class="op" id="6873109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873115">t</span><span class="op" id="6873116">.</span><span class="ident" id="6873117">Logf</span><span class="op" id="6873121">(</span><span class="string" id="6873122">&#34;qprint&nbsp;timeout&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6873144">,</span>&nbsp;<span class="ident" id="6873146">s</span><span class="op" id="6873147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873152">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873160">res</span><span class="op" id="6873163">[</span><span class="string" id="6873164">&#34;OK&#34;</span><span class="op" id="6873168">]</span><span class="op" id="6873169">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873173">}</span><span class="op" id="6873174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873177">var</span>&nbsp;<span class="ident" id="6873181">outcomes</span>&nbsp;<span class="op" id="6873190">[</span><span class="op" id="6873191">]</span><span class="builtintype" id="6873192">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873200">for</span>&nbsp;<span class="ident" id="6873204">k</span><span class="op" id="6873205">,</span>&nbsp;<span class="ident" id="6873207">v</span>&nbsp;<span class="op" id="6873209">:=</span>&nbsp;<span class="keyword" id="6873212">range</span>&nbsp;<span class="ident" id="6873218">res</span>&nbsp;<span class="op" id="6873222">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873226">outcomes</span>&nbsp;<span class="op" id="6873235">=</span>&nbsp;<span class="builtinfunc" id="6873237">append</span><span class="op" id="6873243">(</span><span class="ident" id="6873244">outcomes</span><span class="op" id="6873252">,</span>&nbsp;<span class="ident" id="6873254">fmt</span><span class="op" id="6873257">.</span><span class="ident" id="6873258">Sprintf</span><span class="op" id="6873265">(</span><span class="string" id="6873266">&#34;%v:&nbsp;%d&#34;</span><span class="op" id="6873274">,</span>&nbsp;<span class="ident" id="6873276">k</span><span class="op" id="6873277">,</span>&nbsp;<span class="ident" id="6873279">v</span><span class="op" id="6873280">)</span><span class="op" id="6873281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873287">sort</span><span class="op" id="6873291">.</span><span class="ident" id="6873292">Strings</span><span class="op" id="6873299">(</span><span class="ident" id="6873300">outcomes</span><span class="op" id="6873308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873311">got</span>&nbsp;<span class="op" id="6873315">:=</span>&nbsp;<span class="ident" id="6873318">strings</span><span class="op" id="6873325">.</span><span class="ident" id="6873326">Join</span><span class="op" id="6873330">(</span><span class="ident" id="6873331">outcomes</span><span class="op" id="6873339">,</span>&nbsp;<span class="string" id="6873341">&#34;\n&#34;</span><span class="op" id="6873345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873348">want</span>&nbsp;<span class="op" id="6873353">:=</span>&nbsp;<span class="string" id="6873356">`OK:&nbsp;21576<br>
<span class="lineno">195</span>invalid&nbsp;bytes&nbsp;after&nbsp;=:&nbsp;3397<br>
<span class="lineno"></span>multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x0a:&nbsp;1400<br>
<span class="lineno"></span>multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x0d:&nbsp;2700<br>
<span class="lineno"></span>multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x20:&nbsp;2490<br>
<span class="lineno"></span>multipart:&nbsp;invalid&nbsp;quoted-printable&nbsp;hex&nbsp;byte&nbsp;0x3d:&nbsp;440<br>
<span class="lineno">200</span>unexpected&nbsp;EOF:&nbsp;3122`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6873641">if</span>&nbsp;<span class="ident" id="6873644">got</span>&nbsp;<span class="op" id="6873648">!=</span>&nbsp;<span class="ident" id="6873651">want</span>&nbsp;<span class="op" id="6873656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6873660">t</span><span class="op" id="6873661">.</span><span class="ident" id="6873662">Errorf</span><span class="op" id="6873668">(</span><span class="string" id="6873669">&#34;Got:\n%s\nWant:\n%s&#34;</span><span class="op" id="6873690">,</span>&nbsp;<span class="ident" id="6873692">got</span><span class="op" id="6873695">,</span>&nbsp;<span class="ident" id="6873697">want</span><span class="op" id="6873701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6873704">}</span><br>
<span class="lineno"></span><span class="op" id="6873706">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
