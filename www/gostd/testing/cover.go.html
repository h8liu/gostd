<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6366783">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6366838">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6366892">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6366943">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6366974">package</span>&nbsp;<span class="ident" id="6366982">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6366991">import</span>&nbsp;<span class="op" id="6366998">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6367001">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6367008">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6367014">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="6367028">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6367031">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="6367097">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6367176">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6367241">type</span>&nbsp;<span class="ident" id="6367246">CoverBlock</span>&nbsp;<span class="keyword" id="6367257">struct</span>&nbsp;<span class="op" id="6367264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367267">Line0</span>&nbsp;<span class="builtintype" id="6367273">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367281">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="6367287">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367295">Line1</span>&nbsp;<span class="builtintype" id="6367301">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367309">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="6367315">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367323">Stmts</span>&nbsp;<span class="builtintype" id="6367329">uint16</span><br>
<span class="lineno"></span><span class="op" id="6367336">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6367339">var</span>&nbsp;<span class="ident" id="6367343">cover</span>&nbsp;<span class="ident" id="6367349">Cover</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6367356">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="6367415">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="6367494">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6367559">type</span>&nbsp;<span class="ident" id="6367564">Cover</span>&nbsp;<span class="keyword" id="6367570">struct</span>&nbsp;<span class="op" id="6367577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367580">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6367596">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367604">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6367620">map</span><span class="op" id="6367623">[</span><span class="builtintype" id="6367624">string</span><span class="op" id="6367630">]</span><span class="op" id="6367631">[</span><span class="op" id="6367632">]</span><span class="builtintype" id="6367633">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367641">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6367657">map</span><span class="op" id="6367660">[</span><span class="builtintype" id="6367661">string</span><span class="op" id="6367667">]</span><span class="op" id="6367668">[</span><span class="op" id="6367669">]</span><span class="ident" id="6367670">CoverBlock</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6367682">CoveredPackages</span>&nbsp;<span class="builtintype" id="6367698">string</span><br>
<span class="lineno"></span><span class="op" id="6367705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6367708">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="6367789">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="6367840">//</span><br>
<span class="lineno"></span><span class="comment" id="6367843">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6367930">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="6368005">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6368082">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="6368102">func</span>&nbsp;<span class="ident" id="6368107">Coverage</span><span class="op" id="6368115">(</span><span class="op" id="6368116">)</span>&nbsp;<span class="builtintype" id="6368118">float64</span>&nbsp;<span class="op" id="6368126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368129">var</span>&nbsp;<span class="ident" id="6368133">n</span><span class="op" id="6368134">,</span>&nbsp;<span class="ident" id="6368136">d</span>&nbsp;<span class="ident" id="6368138">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368145">for</span>&nbsp;<span class="ident" id="6368149">_</span><span class="op" id="6368150">,</span>&nbsp;<span class="ident" id="6368152">counters</span>&nbsp;<span class="op" id="6368161">:=</span>&nbsp;<span class="keyword" id="6368164">range</span>&nbsp;<span class="ident" id="6368170">cover</span><span class="op" id="6368175">.</span><span class="ident" id="6368176">Counters</span>&nbsp;<span class="op" id="6368185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368189">for</span>&nbsp;<span class="ident" id="6368193">i</span>&nbsp;<span class="op" id="6368195">:=</span>&nbsp;<span class="keyword" id="6368198">range</span>&nbsp;<span class="ident" id="6368204">counters</span>&nbsp;<span class="op" id="6368213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368218">if</span>&nbsp;<span class="ident" id="6368221">atomic</span><span class="op" id="6368227">.</span><span class="ident" id="6368228">LoadUint32</span><span class="op" id="6368238">(</span><span class="op" id="6368239">&amp;</span><span class="ident" id="6368240">counters</span><span class="op" id="6368248">[</span><span class="ident" id="6368249">i</span><span class="op" id="6368250">]</span><span class="op" id="6368251">)</span>&nbsp;<span class="op" id="6368253">&gt;</span>&nbsp;<span class="num" id="6368255">0</span>&nbsp;<span class="op" id="6368257">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368263">n</span><span class="op" id="6368264">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6368270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368275">d</span><span class="op" id="6368276">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6368281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6368284">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368287">if</span>&nbsp;<span class="ident" id="6368290">d</span>&nbsp;<span class="op" id="6368292">==</span>&nbsp;<span class="num" id="6368295">0</span>&nbsp;<span class="op" id="6368297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368301">return</span>&nbsp;<span class="num" id="6368308">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6368311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368314">return</span>&nbsp;<span class="builtintype" id="6368321">float64</span><span class="op" id="6368328">(</span><span class="ident" id="6368329">n</span><span class="op" id="6368330">)</span>&nbsp;<span class="op" id="6368332">/</span>&nbsp;<span class="builtintype" id="6368334">float64</span><span class="op" id="6368341">(</span><span class="ident" id="6368342">d</span><span class="op" id="6368343">)</span><br>
<span class="lineno"></span><span class="op" id="6368345">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6368348">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="6368419">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6368500">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6368565">func</span>&nbsp;<span class="ident" id="6368570">RegisterCover</span><span class="op" id="6368583">(</span><span class="ident" id="6368584">c</span>&nbsp;<span class="ident" id="6368586">Cover</span><span class="op" id="6368591">)</span>&nbsp;<span class="op" id="6368593">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368596">cover</span>&nbsp;<span class="op" id="6368602">=</span>&nbsp;<span class="ident" id="6368604">c</span><br>
<span class="lineno"></span><span class="op" id="6368606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6368609">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="6368678">func</span>&nbsp;<span class="ident" id="6368683">mustBeNil</span><span class="op" id="6368692">(</span><span class="ident" id="6368693">err</span>&nbsp;<span class="builtintype" id="6368697">error</span><span class="op" id="6368702">)</span>&nbsp;<span class="op" id="6368704">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368707">if</span>&nbsp;<span class="ident" id="6368710">err</span>&nbsp;<span class="op" id="6368714">!=</span>&nbsp;<span class="ident" id="6368717">nil</span>&nbsp;<span class="op" id="6368721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368725">fmt</span><span class="op" id="6368728">.</span><span class="ident" id="6368729">Fprintf</span><span class="op" id="6368736">(</span><span class="ident" id="6368737">os</span><span class="op" id="6368739">.</span><span class="ident" id="6368740">Stderr</span><span class="op" id="6368746">,</span>&nbsp;<span class="string" id="6368748">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6368763">,</span>&nbsp;<span class="ident" id="6368765">err</span><span class="op" id="6368768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368772">os</span><span class="op" id="6368774">.</span><span class="ident" id="6368775">Exit</span><span class="op" id="6368779">(</span><span class="num" id="6368780">2</span><span class="op" id="6368781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6368784">}</span><br>
<span class="lineno"></span><span class="op" id="6368786">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6368789">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="6368880">func</span>&nbsp;<span class="ident" id="6368885">coverReport</span><span class="op" id="6368896">(</span><span class="op" id="6368897">)</span>&nbsp;<span class="op" id="6368899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368902">var</span>&nbsp;<span class="ident" id="6368906">f</span>&nbsp;<span class="op" id="6368908">*</span><span class="ident" id="6368909">os</span><span class="op" id="6368911">.</span><span class="ident" id="6368912">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368918">var</span>&nbsp;<span class="ident" id="6368922">err</span>&nbsp;<span class="builtintype" id="6368926">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6368933">if</span>&nbsp;<span class="op" id="6368936">*</span><span class="ident" id="6368937">coverProfile</span>&nbsp;<span class="op" id="6368950">!=</span>&nbsp;<span class="string" id="6368953">&#34;&#34;</span>&nbsp;<span class="op" id="6368956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6368960">f</span><span class="op" id="6368961">,</span>&nbsp;<span class="ident" id="6368963">err</span>&nbsp;<span class="op" id="6368967">=</span>&nbsp;<span class="ident" id="6368969">os</span><span class="op" id="6368971">.</span><span class="ident" id="6368972">Create</span><span class="op" id="6368978">(</span><span class="ident" id="6368979">toOutputDir</span><span class="op" id="6368990">(</span><span class="op" id="6368991">*</span><span class="ident" id="6368992">coverProfile</span><span class="op" id="6369004">)</span><span class="op" id="6369005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369009">mustBeNil</span><span class="op" id="6369018">(</span><span class="ident" id="6369019">err</span><span class="op" id="6369022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369026">fmt</span><span class="op" id="6369029">.</span><span class="ident" id="6369030">Fprintf</span><span class="op" id="6369037">(</span><span class="ident" id="6369038">f</span><span class="op" id="6369039">,</span>&nbsp;<span class="string" id="6369041">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="6369053">,</span>&nbsp;<span class="ident" id="6369055">cover</span><span class="op" id="6369060">.</span><span class="ident" id="6369061">Mode</span><span class="op" id="6369065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369069">defer</span>&nbsp;<span class="keyword" id="6369075">func</span><span class="op" id="6369079">(</span><span class="op" id="6369080">)</span>&nbsp;<span class="op" id="6369082">{</span>&nbsp;<span class="ident" id="6369084">mustBeNil</span><span class="op" id="6369093">(</span><span class="ident" id="6369094">f</span><span class="op" id="6369095">.</span><span class="ident" id="6369096">Close</span><span class="op" id="6369101">(</span><span class="op" id="6369102">)</span><span class="op" id="6369103">)</span>&nbsp;<span class="op" id="6369105">}</span><span class="op" id="6369106">(</span><span class="op" id="6369107">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369114">var</span>&nbsp;<span class="ident" id="6369118">active</span><span class="op" id="6369124">,</span>&nbsp;<span class="ident" id="6369126">total</span>&nbsp;<span class="ident" id="6369132">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369139">var</span>&nbsp;<span class="ident" id="6369143">count</span>&nbsp;<span class="builtintype" id="6369149">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369157">for</span>&nbsp;<span class="ident" id="6369161">name</span><span class="op" id="6369165">,</span>&nbsp;<span class="ident" id="6369167">counts</span>&nbsp;<span class="op" id="6369174">:=</span>&nbsp;<span class="keyword" id="6369177">range</span>&nbsp;<span class="ident" id="6369183">cover</span><span class="op" id="6369188">.</span><span class="ident" id="6369189">Counters</span>&nbsp;<span class="op" id="6369198">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369202">blocks</span>&nbsp;<span class="op" id="6369209">:=</span>&nbsp;<span class="ident" id="6369212">cover</span><span class="op" id="6369217">.</span><span class="ident" id="6369218">Blocks</span><span class="op" id="6369224">[</span><span class="ident" id="6369225">name</span><span class="op" id="6369229">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369233">for</span>&nbsp;<span class="ident" id="6369237">i</span>&nbsp;<span class="op" id="6369239">:=</span>&nbsp;<span class="keyword" id="6369242">range</span>&nbsp;<span class="ident" id="6369248">counts</span>&nbsp;<span class="op" id="6369255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369260">stmts</span>&nbsp;<span class="op" id="6369266">:=</span>&nbsp;<span class="ident" id="6369269">int64</span><span class="op" id="6369274">(</span><span class="ident" id="6369275">blocks</span><span class="op" id="6369281">[</span><span class="ident" id="6369282">i</span><span class="op" id="6369283">]</span><span class="op" id="6369284">.</span><span class="ident" id="6369285">Stmts</span><span class="op" id="6369290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369295">total</span>&nbsp;<span class="op" id="6369301">+=</span>&nbsp;<span class="ident" id="6369304">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369313">count</span>&nbsp;<span class="op" id="6369319">=</span>&nbsp;<span class="ident" id="6369321">atomic</span><span class="op" id="6369327">.</span><span class="ident" id="6369328">LoadUint32</span><span class="op" id="6369338">(</span><span class="op" id="6369339">&amp;</span><span class="ident" id="6369340">counts</span><span class="op" id="6369346">[</span><span class="ident" id="6369347">i</span><span class="op" id="6369348">]</span><span class="op" id="6369349">)</span>&nbsp;<span class="comment" id="6369351">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369375">if</span>&nbsp;<span class="ident" id="6369378">count</span>&nbsp;<span class="op" id="6369384">&gt;</span>&nbsp;<span class="num" id="6369386">0</span>&nbsp;<span class="op" id="6369388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369394">active</span>&nbsp;<span class="op" id="6369401">+=</span>&nbsp;<span class="ident" id="6369404">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369418">if</span>&nbsp;<span class="ident" id="6369421">f</span>&nbsp;<span class="op" id="6369423">!=</span>&nbsp;<span class="ident" id="6369426">nil</span>&nbsp;<span class="op" id="6369430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369436">_</span><span class="op" id="6369437">,</span>&nbsp;<span class="ident" id="6369439">err</span>&nbsp;<span class="op" id="6369443">:=</span>&nbsp;<span class="ident" id="6369446">fmt</span><span class="op" id="6369449">.</span><span class="ident" id="6369450">Fprintf</span><span class="op" id="6369457">(</span><span class="ident" id="6369458">f</span><span class="op" id="6369459">,</span>&nbsp;<span class="string" id="6369461">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="6369485">,</span>&nbsp;<span class="ident" id="6369487">name</span><span class="op" id="6369491">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369498">blocks</span><span class="op" id="6369504">[</span><span class="ident" id="6369505">i</span><span class="op" id="6369506">]</span><span class="op" id="6369507">.</span><span class="ident" id="6369508">Line0</span><span class="op" id="6369513">,</span>&nbsp;<span class="ident" id="6369515">blocks</span><span class="op" id="6369521">[</span><span class="ident" id="6369522">i</span><span class="op" id="6369523">]</span><span class="op" id="6369524">.</span><span class="ident" id="6369525">Col0</span><span class="op" id="6369529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369536">blocks</span><span class="op" id="6369542">[</span><span class="ident" id="6369543">i</span><span class="op" id="6369544">]</span><span class="op" id="6369545">.</span><span class="ident" id="6369546">Line1</span><span class="op" id="6369551">,</span>&nbsp;<span class="ident" id="6369553">blocks</span><span class="op" id="6369559">[</span><span class="ident" id="6369560">i</span><span class="op" id="6369561">]</span><span class="op" id="6369562">.</span><span class="ident" id="6369563">Col1</span><span class="op" id="6369567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369574">stmts</span><span class="op" id="6369579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369586">count</span><span class="op" id="6369591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369597">mustBeNil</span><span class="op" id="6369606">(</span><span class="ident" id="6369607">err</span><span class="op" id="6369610">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6369625">if</span>&nbsp;<span class="ident" id="6369628">total</span>&nbsp;<span class="op" id="6369634">==</span>&nbsp;<span class="num" id="6369637">0</span>&nbsp;<span class="op" id="6369639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369643">total</span>&nbsp;<span class="op" id="6369649">=</span>&nbsp;<span class="num" id="6369651">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6369654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6369657">fmt</span><span class="op" id="6369660">.</span><span class="ident" id="6369661">Printf</span><span class="op" id="6369667">(</span><span class="string" id="6369668">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="6369704">,</span>&nbsp;<span class="num" id="6369706">100</span><span class="op" id="6369709">*</span><span class="builtintype" id="6369710">float64</span><span class="op" id="6369717">(</span><span class="ident" id="6369718">active</span><span class="op" id="6369724">)</span><span class="op" id="6369725">/</span><span class="builtintype" id="6369726">float64</span><span class="op" id="6369733">(</span><span class="ident" id="6369734">total</span><span class="op" id="6369739">)</span><span class="op" id="6369740">,</span>&nbsp;<span class="ident" id="6369742">cover</span><span class="op" id="6369747">.</span><span class="ident" id="6369748">CoveredPackages</span><span class="op" id="6369763">)</span><br>
<span class="lineno"></span><span class="op" id="6369765">}</span>
</div>
</body>
</html>
