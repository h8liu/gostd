<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8273316">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8273371">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8273425">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8273476">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="8273540">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8273567">package</span>&nbsp;<span class="ident" id="8273575">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="8273580">import</span>&nbsp;<span class="op" id="8273587">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273590">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273598">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273609">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8273619">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8273622">var</span>&nbsp;<span class="ident" id="8273626">testExternal</span>&nbsp;<span class="op" id="8273639">=</span>&nbsp;<span class="ident" id="8273641">flag</span><span class="op" id="8273645">.</span><span class="ident" id="8273646">Bool</span><span class="op" id="8273650">(</span><span class="string" id="8273651">&#34;external&#34;</span><span class="op" id="8273661">,</span>&nbsp;<span class="builtintype" id="8273663">true</span><span class="op" id="8273667">,</span>&nbsp;<span class="string" id="8273669">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="8273718">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8273721">var</span>&nbsp;<span class="ident" id="8273725">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="8273746">=</span>&nbsp;<span class="op" id="8273748">[</span><span class="op" id="8273749">]</span><span class="keyword" id="8273750">struct</span>&nbsp;<span class="op" id="8273757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8273760">service</span><span class="op" id="8273767">,</span>&nbsp;<span class="ident" id="8273769">proto</span><span class="op" id="8273774">,</span>&nbsp;<span class="ident" id="8273776">name</span>&nbsp;<span class="builtintype" id="8273781">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8273789">cname</span><span class="op" id="8273794">,</span>&nbsp;<span class="ident" id="8273796">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8273810">string</span><br>
<span class="lineno"></span><span class="op" id="8273817">}</span><span class="op" id="8273818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8273821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273825">&#34;xmpp-server&#34;</span><span class="op" id="8273838">,</span>&nbsp;<span class="string" id="8273840">&#34;tcp&#34;</span><span class="op" id="8273845">,</span>&nbsp;<span class="string" id="8273847">&#34;google.com&#34;</span><span class="op" id="8273859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273863">&#34;.google.com&#34;</span><span class="op" id="8273876">,</span>&nbsp;<span class="string" id="8273878">&#34;.google.com&#34;</span><span class="op" id="8273891">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8273894">}</span><span class="op" id="8273895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8273898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273902">&#34;&#34;</span><span class="op" id="8273904">,</span>&nbsp;<span class="string" id="8273906">&#34;&#34;</span><span class="op" id="8273908">,</span>&nbsp;<span class="string" id="8273910">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="8273940">,</span>&nbsp;<span class="comment" id="8273942">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8273970">&#34;.google.com&#34;</span><span class="op" id="8273983">,</span>&nbsp;<span class="string" id="8273985">&#34;.google.com&#34;</span><span class="op" id="8273998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274001">}</span><span class="op" id="8274002">,</span><br>
<span class="lineno">30</span><span class="op" id="8274004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8274007">func</span>&nbsp;<span class="ident" id="8274012">TestLookupGoogleSRV</span><span class="op" id="8274031">(</span><span class="ident" id="8274032">t</span>&nbsp;<span class="op" id="8274034">*</span><span class="ident" id="8274035">testing</span><span class="op" id="8274042">.</span><span class="ident" id="8274043">T</span><span class="op" id="8274044">)</span>&nbsp;<span class="op" id="8274046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274049">if</span>&nbsp;<span class="ident" id="8274052">testing</span><span class="op" id="8274059">.</span><span class="ident" id="8274060">Short</span><span class="op" id="8274065">(</span><span class="op" id="8274066">)</span>&nbsp;<span class="op" id="8274068">||</span>&nbsp;<span class="op" id="8274071">!</span><span class="op" id="8274072">*</span><span class="ident" id="8274073">testExternal</span>&nbsp;<span class="op" id="8274086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274090">t</span><span class="op" id="8274091">.</span><span class="ident" id="8274092">Skip</span><span class="op" id="8274096">(</span><span class="string" id="8274097">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8274138">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274145">for</span>&nbsp;<span class="ident" id="8274149">_</span><span class="op" id="8274150">,</span>&nbsp;<span class="ident" id="8274152">tt</span>&nbsp;<span class="op" id="8274155">:=</span>&nbsp;<span class="keyword" id="8274158">range</span>&nbsp;<span class="ident" id="8274164">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="8274185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274189">cname</span><span class="op" id="8274194">,</span>&nbsp;<span class="ident" id="8274196">srvs</span><span class="op" id="8274200">,</span>&nbsp;<span class="ident" id="8274202">err</span>&nbsp;<span class="op" id="8274206">:=</span>&nbsp;<span class="ident" id="8274209">LookupSRV</span><span class="op" id="8274218">(</span><span class="ident" id="8274219">tt</span><span class="op" id="8274221">.</span><span class="ident" id="8274222">service</span><span class="op" id="8274229">,</span>&nbsp;<span class="ident" id="8274231">tt</span><span class="op" id="8274233">.</span><span class="ident" id="8274234">proto</span><span class="op" id="8274239">,</span>&nbsp;<span class="ident" id="8274241">tt</span><span class="op" id="8274243">.</span><span class="ident" id="8274244">name</span><span class="op" id="8274248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274252">if</span>&nbsp;<span class="ident" id="8274255">err</span>&nbsp;<span class="op" id="8274259">!=</span>&nbsp;<span class="ident" id="8274262">nil</span>&nbsp;<span class="op" id="8274266">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274271">t</span><span class="op" id="8274272">.</span><span class="ident" id="8274273">Fatal</span><span class="op" id="8274278">(</span><span class="ident" id="8274279">err</span><span class="op" id="8274282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274290">if</span>&nbsp;<span class="builtinfunc" id="8274293">len</span><span class="op" id="8274296">(</span><span class="ident" id="8274297">srvs</span><span class="op" id="8274301">)</span>&nbsp;<span class="op" id="8274303">==</span>&nbsp;<span class="num" id="8274306">0</span>&nbsp;<span class="op" id="8274308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274313">t</span><span class="op" id="8274314">.</span><span class="ident" id="8274315">Error</span><span class="op" id="8274320">(</span><span class="string" id="8274321">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8274336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274340">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274344">if</span>&nbsp;<span class="op" id="8274347">!</span><span class="ident" id="8274348">strings</span><span class="op" id="8274355">.</span><span class="ident" id="8274356">Contains</span><span class="op" id="8274364">(</span><span class="ident" id="8274365">cname</span><span class="op" id="8274370">,</span>&nbsp;<span class="ident" id="8274372">tt</span><span class="op" id="8274374">.</span><span class="ident" id="8274375">cname</span><span class="op" id="8274380">)</span>&nbsp;<span class="op" id="8274382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274387">t</span><span class="op" id="8274388">.</span><span class="ident" id="8274389">Errorf</span><span class="op" id="8274395">(</span><span class="string" id="8274396">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8274413">,</span>&nbsp;<span class="ident" id="8274415">cname</span><span class="op" id="8274420">,</span>&nbsp;<span class="ident" id="8274422">tt</span><span class="op" id="8274424">.</span><span class="ident" id="8274425">cname</span><span class="op" id="8274430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274438">for</span>&nbsp;<span class="ident" id="8274442">_</span><span class="op" id="8274443">,</span>&nbsp;<span class="ident" id="8274445">srv</span>&nbsp;<span class="op" id="8274449">:=</span>&nbsp;<span class="keyword" id="8274452">range</span>&nbsp;<span class="ident" id="8274458">srvs</span>&nbsp;<span class="op" id="8274463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274468">if</span>&nbsp;<span class="op" id="8274471">!</span><span class="ident" id="8274472">strings</span><span class="op" id="8274479">.</span><span class="ident" id="8274480">Contains</span><span class="op" id="8274488">(</span><span class="ident" id="8274489">srv</span><span class="op" id="8274492">.</span><span class="ident" id="8274493">Target</span><span class="op" id="8274499">,</span>&nbsp;<span class="ident" id="8274501">tt</span><span class="op" id="8274503">.</span><span class="ident" id="8274504">target</span><span class="op" id="8274510">)</span>&nbsp;<span class="op" id="8274512">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274518">t</span><span class="op" id="8274519">.</span><span class="ident" id="8274520">Errorf</span><span class="op" id="8274526">(</span><span class="string" id="8274527">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="8274564">,</span>&nbsp;<span class="ident" id="8274566">srv</span><span class="op" id="8274569">,</span>&nbsp;<span class="ident" id="8274571">tt</span><span class="op" id="8274573">.</span><span class="ident" id="8274574">target</span><span class="op" id="8274580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274592">}</span><br>
<span class="lineno"></span><span class="op" id="8274594">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8274597">func</span>&nbsp;<span class="ident" id="8274602">TestLookupGmailMX</span><span class="op" id="8274619">(</span><span class="ident" id="8274620">t</span>&nbsp;<span class="op" id="8274622">*</span><span class="ident" id="8274623">testing</span><span class="op" id="8274630">.</span><span class="ident" id="8274631">T</span><span class="op" id="8274632">)</span>&nbsp;<span class="op" id="8274634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274637">if</span>&nbsp;<span class="ident" id="8274640">testing</span><span class="op" id="8274647">.</span><span class="ident" id="8274648">Short</span><span class="op" id="8274653">(</span><span class="op" id="8274654">)</span>&nbsp;<span class="op" id="8274656">||</span>&nbsp;<span class="op" id="8274659">!</span><span class="op" id="8274660">*</span><span class="ident" id="8274661">testExternal</span>&nbsp;<span class="op" id="8274674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274678">t</span><span class="op" id="8274679">.</span><span class="ident" id="8274680">Skip</span><span class="op" id="8274684">(</span><span class="string" id="8274685">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8274726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274729">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274733">mxs</span><span class="op" id="8274736">,</span>&nbsp;<span class="ident" id="8274738">err</span>&nbsp;<span class="op" id="8274742">:=</span>&nbsp;<span class="ident" id="8274745">LookupMX</span><span class="op" id="8274753">(</span><span class="string" id="8274754">&#34;gmail.com&#34;</span><span class="op" id="8274765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274768">if</span>&nbsp;<span class="ident" id="8274771">err</span>&nbsp;<span class="op" id="8274775">!=</span>&nbsp;<span class="ident" id="8274778">nil</span>&nbsp;<span class="op" id="8274782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274786">t</span><span class="op" id="8274787">.</span><span class="ident" id="8274788">Fatal</span><span class="op" id="8274793">(</span><span class="ident" id="8274794">err</span><span class="op" id="8274797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274800">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274803">if</span>&nbsp;<span class="builtinfunc" id="8274806">len</span><span class="op" id="8274809">(</span><span class="ident" id="8274810">mxs</span><span class="op" id="8274813">)</span>&nbsp;<span class="op" id="8274815">==</span>&nbsp;<span class="num" id="8274818">0</span>&nbsp;<span class="op" id="8274820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274824">t</span><span class="op" id="8274825">.</span><span class="ident" id="8274826">Error</span><span class="op" id="8274831">(</span><span class="string" id="8274832">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8274847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274853">for</span>&nbsp;<span class="ident" id="8274857">_</span><span class="op" id="8274858">,</span>&nbsp;<span class="ident" id="8274860">mx</span>&nbsp;<span class="op" id="8274863">:=</span>&nbsp;<span class="keyword" id="8274866">range</span>&nbsp;<span class="ident" id="8274872">mxs</span>&nbsp;<span class="op" id="8274876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8274880">if</span>&nbsp;<span class="op" id="8274883">!</span><span class="ident" id="8274884">strings</span><span class="op" id="8274891">.</span><span class="ident" id="8274892">Contains</span><span class="op" id="8274900">(</span><span class="ident" id="8274901">mx</span><span class="op" id="8274903">.</span><span class="ident" id="8274904">Host</span><span class="op" id="8274908">,</span>&nbsp;<span class="string" id="8274910">&#34;.google.com&#34;</span><span class="op" id="8274923">)</span>&nbsp;<span class="op" id="8274925">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8274930">t</span><span class="op" id="8274931">.</span><span class="ident" id="8274932">Errorf</span><span class="op" id="8274938">(</span><span class="string" id="8274939">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="8274986">,</span>&nbsp;<span class="ident" id="8274988">mx</span><span class="op" id="8274990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8274997">}</span><br>
<span class="lineno"></span><span class="op" id="8274999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8275002">func</span>&nbsp;<span class="ident" id="8275007">TestLookupGmailNS</span><span class="op" id="8275024">(</span><span class="ident" id="8275025">t</span>&nbsp;<span class="op" id="8275027">*</span><span class="ident" id="8275028">testing</span><span class="op" id="8275035">.</span><span class="ident" id="8275036">T</span><span class="op" id="8275037">)</span>&nbsp;<span class="op" id="8275039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275042">if</span>&nbsp;<span class="ident" id="8275045">testing</span><span class="op" id="8275052">.</span><span class="ident" id="8275053">Short</span><span class="op" id="8275058">(</span><span class="op" id="8275059">)</span>&nbsp;<span class="op" id="8275061">||</span>&nbsp;<span class="op" id="8275064">!</span><span class="op" id="8275065">*</span><span class="ident" id="8275066">testExternal</span>&nbsp;<span class="op" id="8275079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275083">t</span><span class="op" id="8275084">.</span><span class="ident" id="8275085">Skip</span><span class="op" id="8275089">(</span><span class="string" id="8275090">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8275131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275138">nss</span><span class="op" id="8275141">,</span>&nbsp;<span class="ident" id="8275143">err</span>&nbsp;<span class="op" id="8275147">:=</span>&nbsp;<span class="ident" id="8275150">LookupNS</span><span class="op" id="8275158">(</span><span class="string" id="8275159">&#34;gmail.com&#34;</span><span class="op" id="8275170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275173">if</span>&nbsp;<span class="ident" id="8275176">err</span>&nbsp;<span class="op" id="8275180">!=</span>&nbsp;<span class="ident" id="8275183">nil</span>&nbsp;<span class="op" id="8275187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275191">t</span><span class="op" id="8275192">.</span><span class="ident" id="8275193">Fatal</span><span class="op" id="8275198">(</span><span class="ident" id="8275199">err</span><span class="op" id="8275202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275208">if</span>&nbsp;<span class="builtinfunc" id="8275211">len</span><span class="op" id="8275214">(</span><span class="ident" id="8275215">nss</span><span class="op" id="8275218">)</span>&nbsp;<span class="op" id="8275220">==</span>&nbsp;<span class="num" id="8275223">0</span>&nbsp;<span class="op" id="8275225">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275229">t</span><span class="op" id="8275230">.</span><span class="ident" id="8275231">Error</span><span class="op" id="8275236">(</span><span class="string" id="8275237">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8275252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275258">for</span>&nbsp;<span class="ident" id="8275262">_</span><span class="op" id="8275263">,</span>&nbsp;<span class="ident" id="8275265">ns</span>&nbsp;<span class="op" id="8275268">:=</span>&nbsp;<span class="keyword" id="8275271">range</span>&nbsp;<span class="ident" id="8275277">nss</span>&nbsp;<span class="op" id="8275281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275285">if</span>&nbsp;<span class="op" id="8275288">!</span><span class="ident" id="8275289">strings</span><span class="op" id="8275296">.</span><span class="ident" id="8275297">Contains</span><span class="op" id="8275305">(</span><span class="ident" id="8275306">ns</span><span class="op" id="8275308">.</span><span class="ident" id="8275309">Host</span><span class="op" id="8275313">,</span>&nbsp;<span class="string" id="8275315">&#34;.google.com&#34;</span><span class="op" id="8275328">)</span>&nbsp;<span class="op" id="8275330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275335">t</span><span class="op" id="8275336">.</span><span class="ident" id="8275337">Errorf</span><span class="op" id="8275343">(</span><span class="string" id="8275344">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="8275391">,</span>&nbsp;<span class="ident" id="8275393">ns</span><span class="op" id="8275395">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275402">}</span><br>
<span class="lineno"></span><span class="op" id="8275404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8275407">func</span>&nbsp;<span class="ident" id="8275412">TestLookupGmailTXT</span><span class="op" id="8275430">(</span><span class="ident" id="8275431">t</span>&nbsp;<span class="op" id="8275433">*</span><span class="ident" id="8275434">testing</span><span class="op" id="8275441">.</span><span class="ident" id="8275442">T</span><span class="op" id="8275443">)</span>&nbsp;<span class="op" id="8275445">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275448">if</span>&nbsp;<span class="ident" id="8275451">testing</span><span class="op" id="8275458">.</span><span class="ident" id="8275459">Short</span><span class="op" id="8275464">(</span><span class="op" id="8275465">)</span>&nbsp;<span class="op" id="8275467">||</span>&nbsp;<span class="op" id="8275470">!</span><span class="op" id="8275471">*</span><span class="ident" id="8275472">testExternal</span>&nbsp;<span class="op" id="8275485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275489">t</span><span class="op" id="8275490">.</span><span class="ident" id="8275491">Skip</span><span class="op" id="8275495">(</span><span class="string" id="8275496">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8275537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275544">txts</span><span class="op" id="8275548">,</span>&nbsp;<span class="ident" id="8275550">err</span>&nbsp;<span class="op" id="8275554">:=</span>&nbsp;<span class="ident" id="8275557">LookupTXT</span><span class="op" id="8275566">(</span><span class="string" id="8275567">&#34;gmail.com&#34;</span><span class="op" id="8275578">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275581">if</span>&nbsp;<span class="ident" id="8275584">err</span>&nbsp;<span class="op" id="8275588">!=</span>&nbsp;<span class="ident" id="8275591">nil</span>&nbsp;<span class="op" id="8275595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275599">t</span><span class="op" id="8275600">.</span><span class="ident" id="8275601">Fatal</span><span class="op" id="8275606">(</span><span class="ident" id="8275607">err</span><span class="op" id="8275610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275616">if</span>&nbsp;<span class="builtinfunc" id="8275619">len</span><span class="op" id="8275622">(</span><span class="ident" id="8275623">txts</span><span class="op" id="8275627">)</span>&nbsp;<span class="op" id="8275629">==</span>&nbsp;<span class="num" id="8275632">0</span>&nbsp;<span class="op" id="8275634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275638">t</span><span class="op" id="8275639">.</span><span class="ident" id="8275640">Error</span><span class="op" id="8275645">(</span><span class="string" id="8275646">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8275661">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275667">for</span>&nbsp;<span class="ident" id="8275671">_</span><span class="op" id="8275672">,</span>&nbsp;<span class="ident" id="8275674">txt</span>&nbsp;<span class="op" id="8275678">:=</span>&nbsp;<span class="keyword" id="8275681">range</span>&nbsp;<span class="ident" id="8275687">txts</span>&nbsp;<span class="op" id="8275692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8275696">if</span>&nbsp;<span class="op" id="8275699">!</span><span class="ident" id="8275700">strings</span><span class="op" id="8275707">.</span><span class="ident" id="8275708">Contains</span><span class="op" id="8275716">(</span><span class="ident" id="8275717">txt</span><span class="op" id="8275720">,</span>&nbsp;<span class="string" id="8275722">&#34;spf&#34;</span><span class="op" id="8275727">)</span>&nbsp;<span class="op" id="8275729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275734">t</span><span class="op" id="8275735">.</span><span class="ident" id="8275736">Errorf</span><span class="op" id="8275742">(</span><span class="string" id="8275743">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="8275770">,</span>&nbsp;<span class="ident" id="8275772">txt</span><span class="op" id="8275775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275779">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275782">}</span><br>
<span class="lineno"></span><span class="op" id="8275784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8275787">var</span>&nbsp;<span class="ident" id="8275791">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="8275818">=</span>&nbsp;<span class="op" id="8275820">[</span><span class="op" id="8275821">]</span><span class="keyword" id="8275822">struct</span>&nbsp;<span class="op" id="8275829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275832">addr</span>&nbsp;<span class="builtintype" id="8275837">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8275845">name</span>&nbsp;<span class="builtintype" id="8275850">string</span><br>
<span class="lineno"></span><span class="op" id="8275857">}</span><span class="op" id="8275858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275861">{</span><span class="string" id="8275862">&#34;8.8.8.8&#34;</span><span class="op" id="8275871">,</span>&nbsp;<span class="string" id="8275873">&#34;.google.com.&#34;</span><span class="op" id="8275887">}</span><span class="op" id="8275888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275891">{</span><span class="string" id="8275892">&#34;8.8.4.4&#34;</span><span class="op" id="8275901">,</span>&nbsp;<span class="string" id="8275903">&#34;.google.com.&#34;</span><span class="op" id="8275917">}</span><span class="op" id="8275918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275921">{</span><span class="string" id="8275922">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="8275944">,</span>&nbsp;<span class="string" id="8275946">&#34;.google.com.&#34;</span><span class="op" id="8275960">}</span><span class="op" id="8275961">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8275964">{</span><span class="string" id="8275965">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="8275987">,</span>&nbsp;<span class="string" id="8275989">&#34;.google.com.&#34;</span><span class="op" id="8276003">}</span><span class="op" id="8276004">,</span><br>
<span class="lineno"></span><span class="op" id="8276006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8276009">func</span>&nbsp;<span class="ident" id="8276014">TestLookupGooglePublicDNSAddr</span><span class="op" id="8276043">(</span><span class="ident" id="8276044">t</span>&nbsp;<span class="op" id="8276046">*</span><span class="ident" id="8276047">testing</span><span class="op" id="8276054">.</span><span class="ident" id="8276055">T</span><span class="op" id="8276056">)</span>&nbsp;<span class="op" id="8276058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276061">if</span>&nbsp;<span class="ident" id="8276064">testing</span><span class="op" id="8276071">.</span><span class="ident" id="8276072">Short</span><span class="op" id="8276077">(</span><span class="op" id="8276078">)</span>&nbsp;<span class="op" id="8276080">||</span>&nbsp;<span class="op" id="8276083">!</span><span class="op" id="8276084">*</span><span class="ident" id="8276085">testExternal</span>&nbsp;<span class="op" id="8276098">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276102">t</span><span class="op" id="8276103">.</span><span class="ident" id="8276104">Skip</span><span class="op" id="8276108">(</span><span class="string" id="8276109">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8276150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276157">for</span>&nbsp;<span class="ident" id="8276161">_</span><span class="op" id="8276162">,</span>&nbsp;<span class="ident" id="8276164">tt</span>&nbsp;<span class="op" id="8276167">:=</span>&nbsp;<span class="keyword" id="8276170">range</span>&nbsp;<span class="ident" id="8276176">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="8276203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276207">names</span><span class="op" id="8276212">,</span>&nbsp;<span class="ident" id="8276214">err</span>&nbsp;<span class="op" id="8276218">:=</span>&nbsp;<span class="ident" id="8276221">LookupAddr</span><span class="op" id="8276231">(</span><span class="ident" id="8276232">tt</span><span class="op" id="8276234">.</span><span class="ident" id="8276235">addr</span><span class="op" id="8276239">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276243">if</span>&nbsp;<span class="ident" id="8276246">err</span>&nbsp;<span class="op" id="8276250">!=</span>&nbsp;<span class="ident" id="8276253">nil</span>&nbsp;<span class="op" id="8276257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276262">t</span><span class="op" id="8276263">.</span><span class="ident" id="8276264">Fatal</span><span class="op" id="8276269">(</span><span class="ident" id="8276270">err</span><span class="op" id="8276273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276281">if</span>&nbsp;<span class="builtinfunc" id="8276284">len</span><span class="op" id="8276287">(</span><span class="ident" id="8276288">names</span><span class="op" id="8276293">)</span>&nbsp;<span class="op" id="8276295">==</span>&nbsp;<span class="num" id="8276298">0</span>&nbsp;<span class="op" id="8276300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276305">t</span><span class="op" id="8276306">.</span><span class="ident" id="8276307">Error</span><span class="op" id="8276312">(</span><span class="string" id="8276313">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8276328">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276336">for</span>&nbsp;<span class="ident" id="8276340">_</span><span class="op" id="8276341">,</span>&nbsp;<span class="ident" id="8276343">name</span>&nbsp;<span class="op" id="8276348">:=</span>&nbsp;<span class="keyword" id="8276351">range</span>&nbsp;<span class="ident" id="8276357">names</span>&nbsp;<span class="op" id="8276363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276368">if</span>&nbsp;<span class="op" id="8276371">!</span><span class="ident" id="8276372">strings</span><span class="op" id="8276379">.</span><span class="ident" id="8276380">HasSuffix</span><span class="op" id="8276389">(</span><span class="ident" id="8276390">name</span><span class="op" id="8276394">,</span>&nbsp;<span class="ident" id="8276396">tt</span><span class="op" id="8276398">.</span><span class="ident" id="8276399">name</span><span class="op" id="8276403">)</span>&nbsp;<span class="op" id="8276405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276411">t</span><span class="op" id="8276412">.</span><span class="ident" id="8276413">Errorf</span><span class="op" id="8276419">(</span><span class="string" id="8276420">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="8276457">,</span>&nbsp;<span class="ident" id="8276459">name</span><span class="op" id="8276463">,</span>&nbsp;<span class="ident" id="8276465">tt</span><span class="op" id="8276467">.</span><span class="ident" id="8276468">name</span><span class="op" id="8276472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276477">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276484">}</span><br>
<span class="lineno"></span><span class="op" id="8276486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8276489">func</span>&nbsp;<span class="ident" id="8276494">TestLookupIANACNAME</span><span class="op" id="8276513">(</span><span class="ident" id="8276514">t</span>&nbsp;<span class="op" id="8276516">*</span><span class="ident" id="8276517">testing</span><span class="op" id="8276524">.</span><span class="ident" id="8276525">T</span><span class="op" id="8276526">)</span>&nbsp;<span class="op" id="8276528">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276531">if</span>&nbsp;<span class="ident" id="8276534">testing</span><span class="op" id="8276541">.</span><span class="ident" id="8276542">Short</span><span class="op" id="8276547">(</span><span class="op" id="8276548">)</span>&nbsp;<span class="op" id="8276550">||</span>&nbsp;<span class="op" id="8276553">!</span><span class="op" id="8276554">*</span><span class="ident" id="8276555">testExternal</span>&nbsp;<span class="op" id="8276568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276572">t</span><span class="op" id="8276573">.</span><span class="ident" id="8276574">Skip</span><span class="op" id="8276578">(</span><span class="string" id="8276579">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8276620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276627">cname</span><span class="op" id="8276632">,</span>&nbsp;<span class="ident" id="8276634">err</span>&nbsp;<span class="op" id="8276638">:=</span>&nbsp;<span class="ident" id="8276641">LookupCNAME</span><span class="op" id="8276652">(</span><span class="string" id="8276653">&#34;www.iana.org&#34;</span><span class="op" id="8276667">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276670">if</span>&nbsp;<span class="ident" id="8276673">err</span>&nbsp;<span class="op" id="8276677">!=</span>&nbsp;<span class="ident" id="8276680">nil</span>&nbsp;<span class="op" id="8276684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276688">t</span><span class="op" id="8276689">.</span><span class="ident" id="8276690">Fatal</span><span class="op" id="8276695">(</span><span class="ident" id="8276696">err</span><span class="op" id="8276699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276705">if</span>&nbsp;<span class="op" id="8276708">!</span><span class="ident" id="8276709">strings</span><span class="op" id="8276716">.</span><span class="ident" id="8276717">HasSuffix</span><span class="op" id="8276726">(</span><span class="ident" id="8276727">cname</span><span class="op" id="8276732">,</span>&nbsp;<span class="string" id="8276734">&#34;.icann.org.&#34;</span><span class="op" id="8276747">)</span>&nbsp;<span class="op" id="8276749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276753">t</span><span class="op" id="8276754">.</span><span class="ident" id="8276755">Errorf</span><span class="op" id="8276761">(</span><span class="string" id="8276762">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="8276808">,</span>&nbsp;<span class="ident" id="8276810">cname</span><span class="op" id="8276815">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276818">}</span><br>
<span class="lineno"></span><span class="op" id="8276820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8276823">func</span>&nbsp;<span class="ident" id="8276828">TestLookupGoogleHost</span><span class="op" id="8276848">(</span><span class="ident" id="8276849">t</span>&nbsp;<span class="op" id="8276851">*</span><span class="ident" id="8276852">testing</span><span class="op" id="8276859">.</span><span class="ident" id="8276860">T</span><span class="op" id="8276861">)</span>&nbsp;<span class="op" id="8276863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8276866">if</span>&nbsp;<span class="ident" id="8276869">testing</span><span class="op" id="8276876">.</span><span class="ident" id="8276877">Short</span><span class="op" id="8276882">(</span><span class="op" id="8276883">)</span>&nbsp;<span class="op" id="8276885">||</span>&nbsp;<span class="op" id="8276888">!</span><span class="op" id="8276889">*</span><span class="ident" id="8276890">testExternal</span>&nbsp;<span class="op" id="8276903">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276907">t</span><span class="op" id="8276908">.</span><span class="ident" id="8276909">Skip</span><span class="op" id="8276913">(</span><span class="string" id="8276914">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8276955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8276958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8276962">addrs</span><span class="op" id="8276967">,</span>&nbsp;<span class="ident" id="8276969">err</span>&nbsp;<span class="op" id="8276973">:=</span>&nbsp;<span class="ident" id="8276976">LookupHost</span><span class="op" id="8276986">(</span><span class="string" id="8276987">&#34;google.com&#34;</span><span class="op" id="8276999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277002">if</span>&nbsp;<span class="ident" id="8277005">err</span>&nbsp;<span class="op" id="8277009">!=</span>&nbsp;<span class="ident" id="8277012">nil</span>&nbsp;<span class="op" id="8277016">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277020">t</span><span class="op" id="8277021">.</span><span class="ident" id="8277022">Fatal</span><span class="op" id="8277027">(</span><span class="ident" id="8277028">err</span><span class="op" id="8277031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277037">if</span>&nbsp;<span class="builtinfunc" id="8277040">len</span><span class="op" id="8277043">(</span><span class="ident" id="8277044">addrs</span><span class="op" id="8277049">)</span>&nbsp;<span class="op" id="8277051">==</span>&nbsp;<span class="num" id="8277054">0</span>&nbsp;<span class="op" id="8277056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277060">t</span><span class="op" id="8277061">.</span><span class="ident" id="8277062">Error</span><span class="op" id="8277067">(</span><span class="string" id="8277068">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8277083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277086">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277089">for</span>&nbsp;<span class="ident" id="8277093">_</span><span class="op" id="8277094">,</span>&nbsp;<span class="ident" id="8277096">addr</span>&nbsp;<span class="op" id="8277101">:=</span>&nbsp;<span class="keyword" id="8277104">range</span>&nbsp;<span class="ident" id="8277110">addrs</span>&nbsp;<span class="op" id="8277116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277120">if</span>&nbsp;<span class="ident" id="8277123">ParseIP</span><span class="op" id="8277130">(</span><span class="ident" id="8277131">addr</span><span class="op" id="8277135">)</span>&nbsp;<span class="op" id="8277137">==</span>&nbsp;<span class="ident" id="8277140">nil</span>&nbsp;<span class="op" id="8277144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277149">t</span><span class="op" id="8277150">.</span><span class="ident" id="8277151">Errorf</span><span class="op" id="8277157">(</span><span class="string" id="8277158">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="8277193">,</span>&nbsp;<span class="ident" id="8277195">addr</span><span class="op" id="8277199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277206">}</span><br>
<span class="lineno">175</span><span class="op" id="8277208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8277211">func</span>&nbsp;<span class="ident" id="8277216">TestLookupGoogleIP</span><span class="op" id="8277234">(</span><span class="ident" id="8277235">t</span>&nbsp;<span class="op" id="8277237">*</span><span class="ident" id="8277238">testing</span><span class="op" id="8277245">.</span><span class="ident" id="8277246">T</span><span class="op" id="8277247">)</span>&nbsp;<span class="op" id="8277249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277252">if</span>&nbsp;<span class="ident" id="8277255">testing</span><span class="op" id="8277262">.</span><span class="ident" id="8277263">Short</span><span class="op" id="8277268">(</span><span class="op" id="8277269">)</span>&nbsp;<span class="op" id="8277271">||</span>&nbsp;<span class="op" id="8277274">!</span><span class="op" id="8277275">*</span><span class="ident" id="8277276">testExternal</span>&nbsp;<span class="op" id="8277289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277293">t</span><span class="op" id="8277294">.</span><span class="ident" id="8277295">Skip</span><span class="op" id="8277299">(</span><span class="string" id="8277300">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="8277341">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277348">ips</span><span class="op" id="8277351">,</span>&nbsp;<span class="ident" id="8277353">err</span>&nbsp;<span class="op" id="8277357">:=</span>&nbsp;<span class="ident" id="8277360">LookupIP</span><span class="op" id="8277368">(</span><span class="string" id="8277369">&#34;google.com&#34;</span><span class="op" id="8277381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277384">if</span>&nbsp;<span class="ident" id="8277387">err</span>&nbsp;<span class="op" id="8277391">!=</span>&nbsp;<span class="ident" id="8277394">nil</span>&nbsp;<span class="op" id="8277398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277402">t</span><span class="op" id="8277403">.</span><span class="ident" id="8277404">Fatal</span><span class="op" id="8277409">(</span><span class="ident" id="8277410">err</span><span class="op" id="8277413">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277419">if</span>&nbsp;<span class="builtinfunc" id="8277422">len</span><span class="op" id="8277425">(</span><span class="ident" id="8277426">ips</span><span class="op" id="8277429">)</span>&nbsp;<span class="op" id="8277431">==</span>&nbsp;<span class="num" id="8277434">0</span>&nbsp;<span class="op" id="8277436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277440">t</span><span class="op" id="8277441">.</span><span class="ident" id="8277442">Error</span><span class="op" id="8277447">(</span><span class="string" id="8277448">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="8277463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277469">for</span>&nbsp;<span class="ident" id="8277473">_</span><span class="op" id="8277474">,</span>&nbsp;<span class="ident" id="8277476">ip</span>&nbsp;<span class="op" id="8277479">:=</span>&nbsp;<span class="keyword" id="8277482">range</span>&nbsp;<span class="ident" id="8277488">ips</span>&nbsp;<span class="op" id="8277492">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8277496">if</span>&nbsp;<span class="ident" id="8277499">ip</span><span class="op" id="8277501">.</span><span class="ident" id="8277502">To4</span><span class="op" id="8277505">(</span><span class="op" id="8277506">)</span>&nbsp;<span class="op" id="8277508">==</span>&nbsp;<span class="ident" id="8277511">nil</span>&nbsp;<span class="op" id="8277515">&amp;&amp;</span>&nbsp;<span class="ident" id="8277518">ip</span><span class="op" id="8277520">.</span><span class="ident" id="8277521">To16</span><span class="op" id="8277525">(</span><span class="op" id="8277526">)</span>&nbsp;<span class="op" id="8277528">==</span>&nbsp;<span class="ident" id="8277531">nil</span>&nbsp;<span class="op" id="8277535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277540">t</span><span class="op" id="8277541">.</span><span class="ident" id="8277542">Errorf</span><span class="op" id="8277548">(</span><span class="string" id="8277549">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="8277577">,</span>&nbsp;<span class="ident" id="8277579">ip</span><span class="op" id="8277581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277588">}</span><br>
<span class="lineno"></span><span class="op" id="8277590">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8277593">var</span>&nbsp;<span class="ident" id="8277597">revAddrTests</span>&nbsp;<span class="op" id="8277610">=</span>&nbsp;<span class="op" id="8277612">[</span><span class="op" id="8277613">]</span><span class="keyword" id="8277614">struct</span>&nbsp;<span class="op" id="8277621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277624">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277634">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277642">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8277652">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8277660">ErrPrefix</span>&nbsp;<span class="builtintype" id="8277670">string</span><br>
<span class="lineno">200</span><span class="op" id="8277677">}</span><span class="op" id="8277678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277681">{</span><span class="string" id="8277682">&#34;1.2.3.4&#34;</span><span class="op" id="8277691">,</span>&nbsp;<span class="string" id="8277693">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="8277716">,</span>&nbsp;<span class="string" id="8277718">&#34;&#34;</span><span class="op" id="8277720">}</span><span class="op" id="8277721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277724">{</span><span class="string" id="8277725">&#34;245.110.36.114&#34;</span><span class="op" id="8277741">,</span>&nbsp;<span class="string" id="8277743">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="8277773">,</span>&nbsp;<span class="string" id="8277775">&#34;&#34;</span><span class="op" id="8277777">}</span><span class="op" id="8277778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277781">{</span><span class="string" id="8277782">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="8277802">,</span>&nbsp;<span class="string" id="8277804">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="8277831">,</span>&nbsp;<span class="string" id="8277833">&#34;&#34;</span><span class="op" id="8277835">}</span><span class="op" id="8277836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277839">{</span><span class="string" id="8277840">&#34;::1&#34;</span><span class="op" id="8277845">,</span>&nbsp;<span class="string" id="8277847">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="8277922">,</span>&nbsp;<span class="string" id="8277924">&#34;&#34;</span><span class="op" id="8277926">}</span><span class="op" id="8277927">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8277930">{</span><span class="string" id="8277931">&#34;1::&#34;</span><span class="op" id="8277936">,</span>&nbsp;<span class="string" id="8277938">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="8278013">,</span>&nbsp;<span class="string" id="8278015">&#34;&#34;</span><span class="op" id="8278017">}</span><span class="op" id="8278018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278021">{</span><span class="string" id="8278022">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="8278042">,</span>&nbsp;<span class="string" id="8278044">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="8278119">,</span>&nbsp;<span class="string" id="8278121">&#34;&#34;</span><span class="op" id="8278123">}</span><span class="op" id="8278124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278127">{</span><span class="string" id="8278128">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="8278167">,</span>&nbsp;<span class="string" id="8278169">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="8278244">,</span>&nbsp;<span class="string" id="8278246">&#34;&#34;</span><span class="op" id="8278248">}</span><span class="op" id="8278249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278252">{</span><span class="string" id="8278253">&#34;1.2.3&#34;</span><span class="op" id="8278260">,</span>&nbsp;<span class="string" id="8278262">&#34;&#34;</span><span class="op" id="8278264">,</span>&nbsp;<span class="string" id="8278266">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8278288">}</span><span class="op" id="8278289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278292">{</span><span class="string" id="8278293">&#34;1.2.3.4.5&#34;</span><span class="op" id="8278304">,</span>&nbsp;<span class="string" id="8278306">&#34;&#34;</span><span class="op" id="8278308">,</span>&nbsp;<span class="string" id="8278310">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8278332">}</span><span class="op" id="8278333">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278336">{</span><span class="string" id="8278337">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="8278363">,</span>&nbsp;<span class="string" id="8278365">&#34;&#34;</span><span class="op" id="8278367">,</span>&nbsp;<span class="string" id="8278369">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8278391">}</span><span class="op" id="8278392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278395">{</span><span class="string" id="8278396">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="8278427">,</span>&nbsp;<span class="string" id="8278429">&#34;&#34;</span><span class="op" id="8278431">,</span>&nbsp;<span class="string" id="8278433">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="8278455">}</span><span class="op" id="8278456">,</span><br>
<span class="lineno"></span><span class="op" id="8278458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8278461">func</span>&nbsp;<span class="ident" id="8278466">TestReverseAddress</span><span class="op" id="8278484">(</span><span class="ident" id="8278485">t</span>&nbsp;<span class="op" id="8278487">*</span><span class="ident" id="8278488">testing</span><span class="op" id="8278495">.</span><span class="ident" id="8278496">T</span><span class="op" id="8278497">)</span>&nbsp;<span class="op" id="8278499">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278502">for</span>&nbsp;<span class="ident" id="8278506">i</span><span class="op" id="8278507">,</span>&nbsp;<span class="ident" id="8278509">tt</span>&nbsp;<span class="op" id="8278512">:=</span>&nbsp;<span class="keyword" id="8278515">range</span>&nbsp;<span class="ident" id="8278521">revAddrTests</span>&nbsp;<span class="op" id="8278534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8278538">a</span><span class="op" id="8278539">,</span>&nbsp;<span class="ident" id="8278541">err</span>&nbsp;<span class="op" id="8278545">:=</span>&nbsp;<span class="ident" id="8278548">reverseaddr</span><span class="op" id="8278559">(</span><span class="ident" id="8278560">tt</span><span class="op" id="8278562">.</span><span class="ident" id="8278563">Addr</span><span class="op" id="8278567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278571">if</span>&nbsp;<span class="builtinfunc" id="8278574">len</span><span class="op" id="8278577">(</span><span class="ident" id="8278578">tt</span><span class="op" id="8278580">.</span><span class="ident" id="8278581">ErrPrefix</span><span class="op" id="8278590">)</span>&nbsp;<span class="op" id="8278592">&gt;</span>&nbsp;<span class="num" id="8278594">0</span>&nbsp;<span class="op" id="8278596">&amp;&amp;</span>&nbsp;<span class="ident" id="8278599">err</span>&nbsp;<span class="op" id="8278603">==</span>&nbsp;<span class="ident" id="8278606">nil</span>&nbsp;<span class="op" id="8278610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8278615">t</span><span class="op" id="8278616">.</span><span class="ident" id="8278617">Errorf</span><span class="op" id="8278623">(</span><span class="string" id="8278624">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="8278661">,</span>&nbsp;<span class="ident" id="8278663">i</span><span class="op" id="8278664">,</span>&nbsp;<span class="ident" id="8278666">tt</span><span class="op" id="8278668">.</span><span class="ident" id="8278669">ErrPrefix</span><span class="op" id="8278678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278683">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278698">if</span>&nbsp;<span class="builtinfunc" id="8278701">len</span><span class="op" id="8278704">(</span><span class="ident" id="8278705">tt</span><span class="op" id="8278707">.</span><span class="ident" id="8278708">ErrPrefix</span><span class="op" id="8278717">)</span>&nbsp;<span class="op" id="8278719">==</span>&nbsp;<span class="num" id="8278722">0</span>&nbsp;<span class="op" id="8278724">&amp;&amp;</span>&nbsp;<span class="ident" id="8278727">err</span>&nbsp;<span class="op" id="8278731">!=</span>&nbsp;<span class="ident" id="8278734">nil</span>&nbsp;<span class="op" id="8278738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8278743">t</span><span class="op" id="8278744">.</span><span class="ident" id="8278745">Errorf</span><span class="op" id="8278751">(</span><span class="string" id="8278752">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="8278789">,</span>&nbsp;<span class="ident" id="8278791">i</span><span class="op" id="8278792">,</span>&nbsp;<span class="ident" id="8278794">err</span><span class="op" id="8278797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278805">if</span>&nbsp;<span class="ident" id="8278808">err</span>&nbsp;<span class="op" id="8278812">!=</span>&nbsp;<span class="ident" id="8278815">nil</span>&nbsp;<span class="op" id="8278819">&amp;&amp;</span>&nbsp;<span class="ident" id="8278822">err</span><span class="op" id="8278825">.</span><span class="op" id="8278826">(</span><span class="op" id="8278827">*</span><span class="ident" id="8278828">DNSError</span><span class="op" id="8278836">)</span><span class="op" id="8278837">.</span><span class="ident" id="8278838">Err</span>&nbsp;<span class="op" id="8278842">!=</span>&nbsp;<span class="ident" id="8278845">tt</span><span class="op" id="8278847">.</span><span class="ident" id="8278848">ErrPrefix</span>&nbsp;<span class="op" id="8278858">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8278863">t</span><span class="op" id="8278864">.</span><span class="ident" id="8278865">Errorf</span><span class="op" id="8278871">(</span><span class="string" id="8278872">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="8278917">,</span>&nbsp;<span class="ident" id="8278919">i</span><span class="op" id="8278920">,</span>&nbsp;<span class="ident" id="8278922">tt</span><span class="op" id="8278924">.</span><span class="ident" id="8278925">ErrPrefix</span><span class="op" id="8278934">,</span>&nbsp;<span class="ident" id="8278936">err</span><span class="op" id="8278939">.</span><span class="op" id="8278940">(</span><span class="op" id="8278941">*</span><span class="ident" id="8278942">DNSError</span><span class="op" id="8278950">)</span><span class="op" id="8278951">.</span><span class="ident" id="8278952">Err</span><span class="op" id="8278955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8278959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8278963">if</span>&nbsp;<span class="ident" id="8278966">a</span>&nbsp;<span class="op" id="8278968">!=</span>&nbsp;<span class="ident" id="8278971">tt</span><span class="op" id="8278973">.</span><span class="ident" id="8278974">Reverse</span>&nbsp;<span class="op" id="8278982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8278987">t</span><span class="op" id="8278988">.</span><span class="ident" id="8278989">Errorf</span><span class="op" id="8278995">(</span><span class="string" id="8278996">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="8279040">,</span>&nbsp;<span class="ident" id="8279042">i</span><span class="op" id="8279043">,</span>&nbsp;<span class="ident" id="8279045">tt</span><span class="op" id="8279047">.</span><span class="ident" id="8279048">Reverse</span><span class="op" id="8279055">,</span>&nbsp;<span class="ident" id="8279057">a</span><span class="op" id="8279058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8279062">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8279065">}</span><br>
<span class="lineno"></span><span class="op" id="8279067">}</span>
</div>
</body>
</html>
