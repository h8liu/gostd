<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path/filepath</h2>
<ul>
<li><a href="/gostd/path/filepath/example_unix_test.go.html">example_unix_test.go</a></li>
<li><a href="/gostd/path/filepath/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/path/filepath/match.go.html">match.go</a></li>
<li><a href="/gostd/path/filepath/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/filepath/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/filepath/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/path/filepath/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/path/filepath/symlink.go.html">symlink.go</a></li>
<li><a href="/gostd/path/filepath/symlink_unix.go.html">symlink_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3778094">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3778149">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3778203">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3778254">//&nbsp;Package&nbsp;filepath&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;filename&nbsp;paths</span><br>
<span class="lineno"></span><span class="comment" id="3778334">//&nbsp;in&nbsp;a&nbsp;way&nbsp;compatible&nbsp;with&nbsp;the&nbsp;target&nbsp;operating&nbsp;system-defined&nbsp;file&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3778410">package</span>&nbsp;<span class="ident" id="3778418">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3778428">import</span>&nbsp;<span class="op" id="3778435">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778438">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778448">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778454">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3778462">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3778472">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3778475">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3778525">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="3778583">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3778649">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno">20</span><span class="keyword" id="3778706">type</span>&nbsp;<span class="ident" id="3778711">lazybuf</span>&nbsp;<span class="keyword" id="3778719">struct</span>&nbsp;<span class="op" id="3778726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3778729">path</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3778740">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3778748">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3778759">[</span><span class="op" id="3778760">]</span><span class="builtintype" id="3778761">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3778767">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3778778">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3778783">volAndPath</span>&nbsp;<span class="builtintype" id="3778794">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3778802">volLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3778813">int</span><br>
<span class="lineno"></span><span class="op" id="3778817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3778820">func</span>&nbsp;<span class="op" id="3778825">(</span><span class="ident" id="3778826">b</span>&nbsp;<span class="op" id="3778828">*</span><span class="ident" id="3778829"><a href="/gostd/path/filepath/path.go.html#3778711">lazybuf</a></span><span class="op" id="3778836">)</span>&nbsp;<span class="ident" id="3778838">index</span><span class="op" id="3778843">(</span><span class="ident" id="3778844">i</span>&nbsp;<span class="builtintype" id="3778846">int</span><span class="op" id="3778849">)</span>&nbsp;<span class="builtintype" id="3778851">byte</span>&nbsp;<span class="op" id="3778856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3778859">if</span>&nbsp;<span class="ident" id="3778862"><a href="/gostd/path/filepath/path.go.html#3778826">b</a></span><span class="op" id="3778863">.</span><span class="ident" id="3778864"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span>&nbsp;<span class="op" id="3778868">!=</span>&nbsp;<span class="builtintype" id="3778871">nil</span>&nbsp;<span class="op" id="3778875">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3778879">return</span>&nbsp;<span class="ident" id="3778886"><a href="/gostd/path/filepath/path.go.html#3778826">b</a></span><span class="op" id="3778887">.</span><span class="ident" id="3778888"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span><span class="op" id="3778891">[</span><span class="ident" id="3778892"><a href="/gostd/path/filepath/path.go.html#3778844">i</a></span><span class="op" id="3778893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3778896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3778899">return</span>&nbsp;<span class="ident" id="3778906"><a href="/gostd/path/filepath/path.go.html#3778826">b</a></span><span class="op" id="3778907">.</span><span class="ident" id="3778908"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3778912">[</span><span class="ident" id="3778913"><a href="/gostd/path/filepath/path.go.html#3778844">i</a></span><span class="op" id="3778914">]</span><br>
<span class="lineno"></span><span class="op" id="3778916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3778919">func</span>&nbsp;<span class="op" id="3778924">(</span><span class="ident" id="3778925">b</span>&nbsp;<span class="op" id="3778927">*</span><span class="ident" id="3778928"><a href="/gostd/path/filepath/path.go.html#3778711">lazybuf</a></span><span class="op" id="3778935">)</span>&nbsp;<span class="builtinfunc" id="3778937">append</span><span class="op" id="3778943">(</span><span class="ident" id="3778944">c</span>&nbsp;<span class="builtintype" id="3778946">byte</span><span class="op" id="3778950">)</span>&nbsp;<span class="op" id="3778952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3778955">if</span>&nbsp;<span class="ident" id="3778958"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3778959">.</span><span class="ident" id="3778960"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span>&nbsp;<span class="op" id="3778964">==</span>&nbsp;<span class="builtintype" id="3778967">nil</span>&nbsp;<span class="op" id="3778971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3778975">if</span>&nbsp;<span class="ident" id="3778978"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3778979">.</span><span class="ident" id="3778980"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3778982">&lt;</span>&nbsp;<span class="builtinfunc" id="3778984">len</span><span class="op" id="3778987">(</span><span class="ident" id="3778988"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3778989">.</span><span class="ident" id="3778990"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3778994">)</span>&nbsp;<span class="op" id="3778996">&amp;&amp;</span>&nbsp;<span class="ident" id="3778999"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779000">.</span><span class="ident" id="3779001"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3779005">[</span><span class="ident" id="3779006"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779007">.</span><span class="ident" id="3779008"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779009">]</span>&nbsp;<span class="op" id="3779011">==</span>&nbsp;<span class="ident" id="3779014"><a href="/gostd/path/filepath/path.go.html#3778944">c</a></span>&nbsp;<span class="op" id="3779016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779021"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779022">.</span><span class="ident" id="3779023"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779024">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779030">return</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779043"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779044">.</span><span class="ident" id="3779045"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span>&nbsp;<span class="op" id="3779049">=</span>&nbsp;<span class="builtinfunc" id="3779051">make</span><span class="op" id="3779055">(</span><span class="op" id="3779056">[</span><span class="op" id="3779057">]</span><span class="builtintype" id="3779058">byte</span><span class="op" id="3779062">,</span>&nbsp;<span class="builtinfunc" id="3779064">len</span><span class="op" id="3779067">(</span><span class="ident" id="3779068"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779069">.</span><span class="ident" id="3779070"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3779074">)</span><span class="op" id="3779075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3779079">copy</span><span class="op" id="3779083">(</span><span class="ident" id="3779084"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779085">.</span><span class="ident" id="3779086"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span><span class="op" id="3779089">,</span>&nbsp;<span class="ident" id="3779091"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779092">.</span><span class="ident" id="3779093"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3779097">[</span><span class="op" id="3779098">:</span><span class="ident" id="3779099"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779100">.</span><span class="ident" id="3779101"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779102">]</span><span class="op" id="3779103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779109"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779110">.</span><span class="ident" id="3779111"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span><span class="op" id="3779114">[</span><span class="ident" id="3779115"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779116">.</span><span class="ident" id="3779117"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779118">]</span>&nbsp;<span class="op" id="3779120">=</span>&nbsp;<span class="ident" id="3779122"><a href="/gostd/path/filepath/path.go.html#3778944">c</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779125"><a href="/gostd/path/filepath/path.go.html#3778925">b</a></span><span class="op" id="3779126">.</span><span class="ident" id="3779127"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779128">++</span><br>
<span class="lineno"></span><span class="op" id="3779131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3779134">func</span>&nbsp;<span class="op" id="3779139">(</span><span class="ident" id="3779140">b</span>&nbsp;<span class="op" id="3779142">*</span><span class="ident" id="3779143"><a href="/gostd/path/filepath/path.go.html#3778711">lazybuf</a></span><span class="op" id="3779150">)</span>&nbsp;<span class="builtintype" id="3779152">string</span><span class="op" id="3779158">(</span><span class="op" id="3779159">)</span>&nbsp;<span class="builtintype" id="3779161">string</span>&nbsp;<span class="op" id="3779168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779171">if</span>&nbsp;<span class="ident" id="3779174"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779175">.</span><span class="ident" id="3779176"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span>&nbsp;<span class="op" id="3779180">==</span>&nbsp;<span class="builtintype" id="3779183">nil</span>&nbsp;<span class="op" id="3779187">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779191">return</span>&nbsp;<span class="ident" id="3779198"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779199">.</span><span class="ident" id="3779200"><a href="/gostd/path/filepath/path.go.html#3778783">volAndPath</a></span><span class="op" id="3779210">[</span><span class="op" id="3779211">:</span><span class="ident" id="3779212"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779213">.</span><span class="ident" id="3779214"><a href="/gostd/path/filepath/path.go.html#3778802">volLen</a></span><span class="op" id="3779220">+</span><span class="ident" id="3779221"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779222">.</span><span class="ident" id="3779223"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779224">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3779230">return</span>&nbsp;<span class="ident" id="3779237"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779238">.</span><span class="ident" id="3779239"><a href="/gostd/path/filepath/path.go.html#3778783">volAndPath</a></span><span class="op" id="3779249">[</span><span class="op" id="3779250">:</span><span class="ident" id="3779251"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779252">.</span><span class="ident" id="3779253"><a href="/gostd/path/filepath/path.go.html#3778802">volLen</a></span><span class="op" id="3779259">]</span>&nbsp;<span class="op" id="3779261">+</span>&nbsp;<span class="builtintype" id="3779263">string</span><span class="op" id="3779269">(</span><span class="ident" id="3779270"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779271">.</span><span class="ident" id="3779272"><a href="/gostd/path/filepath/path.go.html#3778748">buf</a></span><span class="op" id="3779275">[</span><span class="op" id="3779276">:</span><span class="ident" id="3779277"><a href="/gostd/path/filepath/path.go.html#3779140">b</a></span><span class="op" id="3779278">.</span><span class="ident" id="3779279"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3779280">]</span><span class="op" id="3779281">)</span><br>
<span class="lineno"></span><span class="op" id="3779283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="3779286">const</span>&nbsp;<span class="op" id="3779292">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779295">Separator</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3779309">=</span>&nbsp;<span class="ident" id="3779311"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3779313">.</span><span class="ident" id="3779314"><a href="/gostd/os/path_unix.go.html#2467185">PathSeparator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3779329">ListSeparator</span>&nbsp;<span class="op" id="3779343">=</span>&nbsp;<span class="ident" id="3779345"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3779347">.</span><span class="ident" id="3779348"><a href="/gostd/os/path_unix.go.html#2467240">PathListSeparator</a></span><br>
<span class="lineno"></span><span class="op" id="3779366">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3779369">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3779428">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3779493">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3779549">//</span><br>
<span class="lineno"></span><span class="comment" id="3779552">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Replace&nbsp;multiple&nbsp;Separator&nbsp;elements&nbsp;with&nbsp;a&nbsp;single&nbsp;one.</span><br>
<span class="lineno">65</span><span class="comment" id="3779613">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3779679">//&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3779750">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3779804">//&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3779858">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path,</span><br>
<span class="lineno">70</span><span class="comment" id="3779922">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assuming&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="3779955">//</span><br>
<span class="lineno"></span><span class="comment" id="3779958">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;represents&nbsp;a&nbsp;root&nbsp;directory,</span><br>
<span class="lineno"></span><span class="comment" id="3780035">//&nbsp;such&nbsp;as&nbsp;&#34;/&#34;&nbsp;on&nbsp;Unix&nbsp;or&nbsp;`C:\`&nbsp;on&nbsp;Windows.</span><br>
<span class="lineno"></span><span class="comment" id="3780079">//</span><br>
<span class="lineno">75</span><span class="comment" id="3780082">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3780141">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3780168">//</span><br>
<span class="lineno"></span><span class="comment" id="3780171">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3780227">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno">80</span><span class="comment" id="3780255">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3780307">func</span>&nbsp;<span class="ident" id="3780312">Clean</span><span class="op" id="3780317">(</span><span class="ident" id="3780318">path</span>&nbsp;<span class="builtintype" id="3780323">string</span><span class="op" id="3780329">)</span>&nbsp;<span class="builtintype" id="3780331">string</span>&nbsp;<span class="op" id="3780338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780341">originalPath</span>&nbsp;<span class="op" id="3780354">:=</span>&nbsp;<span class="ident" id="3780357"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780363">volLen</span>&nbsp;<span class="op" id="3780370">:=</span>&nbsp;<span class="ident" id="3780373"><a href="/gostd/path/filepath/path_unix.go.html#3791785">volumeNameLen</a></span><span class="op" id="3780386">(</span><span class="ident" id="3780387"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3780391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780394"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span>&nbsp;<span class="op" id="3780399">=</span>&nbsp;<span class="ident" id="3780401"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3780405">[</span><span class="ident" id="3780406"><a href="/gostd/path/filepath/path.go.html#3780363">volLen</a></span><span class="op" id="3780412">:</span><span class="op" id="3780413">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780416">if</span>&nbsp;<span class="ident" id="3780419"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span>&nbsp;<span class="op" id="3780424">==</span>&nbsp;<span class="string" id="3780427">&#34;&#34;</span>&nbsp;<span class="op" id="3780430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780434">if</span>&nbsp;<span class="ident" id="3780437"><a href="/gostd/path/filepath/path.go.html#3780363">volLen</a></span>&nbsp;<span class="op" id="3780444">&gt;</span>&nbsp;<span class="num" id="3780446">1</span>&nbsp;<span class="op" id="3780448">&amp;&amp;</span>&nbsp;<span class="ident" id="3780451"><a href="/gostd/path/filepath/path.go.html#3780341">originalPath</a></span><span class="op" id="3780463">[</span><span class="num" id="3780464">1</span><span class="op" id="3780465">]</span>&nbsp;<span class="op" id="3780467">!=</span>&nbsp;<span class="string" id="3780470">&#39;:&#39;</span>&nbsp;<span class="op" id="3780474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780479">//&nbsp;should&nbsp;be&nbsp;UNC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780499">return</span>&nbsp;<span class="ident" id="3780506"><a href="/gostd/path/filepath/path.go.html#3782541">FromSlash</a></span><span class="op" id="3780515">(</span><span class="ident" id="3780516"><a href="/gostd/path/filepath/path.go.html#3780341">originalPath</a></span><span class="op" id="3780528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3780532">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780536">return</span>&nbsp;<span class="ident" id="3780543"><a href="/gostd/path/filepath/path.go.html#3780341">originalPath</a></span>&nbsp;<span class="op" id="3780556">+</span>&nbsp;<span class="string" id="3780558">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3780563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780566">rooted</span>&nbsp;<span class="op" id="3780573">:=</span>&nbsp;<span class="ident" id="3780576"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3780578">.</span><span class="ident" id="3780579"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3780594">(</span><span class="ident" id="3780595"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3780599">[</span><span class="num" id="3780600">0</span><span class="op" id="3780601">]</span><span class="op" id="3780602">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780606">//&nbsp;Invariants:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780622">//&nbsp;&nbsp;&nbsp;&nbsp;reading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780681">//&nbsp;&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780735">//&nbsp;&nbsp;&nbsp;&nbsp;dotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3780797">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780862">n</span>&nbsp;<span class="op" id="3780864">:=</span>&nbsp;<span class="builtinfunc" id="3780867">len</span><span class="op" id="3780870">(</span><span class="ident" id="3780871"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3780875">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780878">out</span>&nbsp;<span class="op" id="3780882">:=</span>&nbsp;<span class="ident" id="3780885"><a href="/gostd/path/filepath/path.go.html#3778711">lazybuf</a></span><span class="op" id="3780892">{</span><span class="ident" id="3780893"><a href="/gostd/path/filepath/path.go.html#3778729">path</a></span><span class="op" id="3780897">:</span>&nbsp;<span class="ident" id="3780899"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3780903">,</span>&nbsp;<span class="ident" id="3780905"><a href="/gostd/path/filepath/path.go.html#3778783">volAndPath</a></span><span class="op" id="3780915">:</span>&nbsp;<span class="ident" id="3780917"><a href="/gostd/path/filepath/path.go.html#3780341">originalPath</a></span><span class="op" id="3780929">,</span>&nbsp;<span class="ident" id="3780931"><a href="/gostd/path/filepath/path.go.html#3778802">volLen</a></span><span class="op" id="3780937">:</span>&nbsp;<span class="ident" id="3780939"><a href="/gostd/path/filepath/path.go.html#3780363">volLen</a></span><span class="op" id="3780945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780948">r</span><span class="op" id="3780949">,</span>&nbsp;<span class="ident" id="3780951">dotdot</span>&nbsp;<span class="op" id="3780958">:=</span>&nbsp;<span class="num" id="3780961">0</span><span class="op" id="3780962">,</span>&nbsp;<span class="num" id="3780964">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3780967">if</span>&nbsp;<span class="ident" id="3780970"><a href="/gostd/path/filepath/path.go.html#3780566">rooted</a></span>&nbsp;<span class="op" id="3780977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3780981"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3780984">.</span><span class="builtinfunc" id="3780985"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3780991">(</span><span class="ident" id="3780992"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3781001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781005"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781006">,</span>&nbsp;<span class="ident" id="3781008"><a href="/gostd/path/filepath/path.go.html#3780951">dotdot</a></span>&nbsp;<span class="op" id="3781015">=</span>&nbsp;<span class="num" id="3781017">1</span><span class="op" id="3781018">,</span>&nbsp;<span class="num" id="3781020">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781027">for</span>&nbsp;<span class="ident" id="3781031"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span>&nbsp;<span class="op" id="3781033">&lt;</span>&nbsp;<span class="ident" id="3781035"><a href="/gostd/path/filepath/path.go.html#3780862">n</a></span>&nbsp;<span class="op" id="3781037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781041">switch</span>&nbsp;<span class="op" id="3781048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781052">case</span>&nbsp;<span class="ident" id="3781057"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3781059">.</span><span class="ident" id="3781060"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3781075">(</span><span class="ident" id="3781076"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781080">[</span><span class="ident" id="3781081"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781082">]</span><span class="op" id="3781083">)</span><span class="op" id="3781084">:</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781089">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781114"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781115">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781120">case</span>&nbsp;<span class="ident" id="3781125"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781129">[</span><span class="ident" id="3781130"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781131">]</span>&nbsp;<span class="op" id="3781133">==</span>&nbsp;<span class="string" id="3781136">&#39;.&#39;</span>&nbsp;<span class="op" id="3781140">&amp;&amp;</span>&nbsp;<span class="op" id="3781143">(</span><span class="ident" id="3781144"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781145">+</span><span class="num" id="3781146">1</span>&nbsp;<span class="op" id="3781148">==</span>&nbsp;<span class="ident" id="3781151"><a href="/gostd/path/filepath/path.go.html#3780862">n</a></span>&nbsp;<span class="op" id="3781153">||</span>&nbsp;<span class="ident" id="3781156"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3781158">.</span><span class="ident" id="3781159"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3781174">(</span><span class="ident" id="3781175"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781179">[</span><span class="ident" id="3781180"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781181">+</span><span class="num" id="3781182">1</span><span class="op" id="3781183">]</span><span class="op" id="3781184">)</span><span class="op" id="3781185">)</span><span class="op" id="3781186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781191">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781207"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781208">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781213">case</span>&nbsp;<span class="ident" id="3781218"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781222">[</span><span class="ident" id="3781223"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781224">]</span>&nbsp;<span class="op" id="3781226">==</span>&nbsp;<span class="string" id="3781229">&#39;.&#39;</span>&nbsp;<span class="op" id="3781233">&amp;&amp;</span>&nbsp;<span class="ident" id="3781236"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781240">[</span><span class="ident" id="3781241"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781242">+</span><span class="num" id="3781243">1</span><span class="op" id="3781244">]</span>&nbsp;<span class="op" id="3781246">==</span>&nbsp;<span class="string" id="3781249">&#39;.&#39;</span>&nbsp;<span class="op" id="3781253">&amp;&amp;</span>&nbsp;<span class="op" id="3781256">(</span><span class="ident" id="3781257"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781258">+</span><span class="num" id="3781259">2</span>&nbsp;<span class="op" id="3781261">==</span>&nbsp;<span class="ident" id="3781264"><a href="/gostd/path/filepath/path.go.html#3780862">n</a></span>&nbsp;<span class="op" id="3781266">||</span>&nbsp;<span class="ident" id="3781269"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3781271">.</span><span class="ident" id="3781272"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3781287">(</span><span class="ident" id="3781288"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781292">[</span><span class="ident" id="3781293"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781294">+</span><span class="num" id="3781295">2</span><span class="op" id="3781296">]</span><span class="op" id="3781297">)</span><span class="op" id="3781298">)</span><span class="op" id="3781299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781304">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781347"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span>&nbsp;<span class="op" id="3781349">+=</span>&nbsp;<span class="num" id="3781352">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781357">switch</span>&nbsp;<span class="op" id="3781364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781369">case</span>&nbsp;<span class="ident" id="3781374"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781377">.</span><span class="ident" id="3781378"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3781380">&gt;</span>&nbsp;<span class="ident" id="3781382"><a href="/gostd/path/filepath/path.go.html#3780951">dotdot</a></span><span class="op" id="3781388">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781394">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781415"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781418">.</span><span class="ident" id="3781419"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3781420">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781427">for</span>&nbsp;<span class="ident" id="3781431"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781434">.</span><span class="ident" id="3781435"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3781437">&gt;</span>&nbsp;<span class="ident" id="3781439"><a href="/gostd/path/filepath/path.go.html#3780951">dotdot</a></span>&nbsp;<span class="op" id="3781446">&amp;&amp;</span>&nbsp;<span class="op" id="3781449">!</span><span class="ident" id="3781450"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3781452">.</span><span class="ident" id="3781453"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3781468">(</span><span class="ident" id="3781469"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781472">.</span><span class="ident" id="3781473"><a href="/gostd/path/filepath/path.go.html#3778838">index</a></span><span class="op" id="3781478">(</span><span class="ident" id="3781479"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781482">.</span><span class="ident" id="3781483"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3781484">)</span><span class="op" id="3781485">)</span>&nbsp;<span class="op" id="3781487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781494"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781497">.</span><span class="ident" id="3781498"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><span class="op" id="3781499">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781506">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781511">case</span>&nbsp;<span class="op" id="3781516">!</span><span class="ident" id="3781517"><a href="/gostd/path/filepath/path.go.html#3780566">rooted</a></span><span class="op" id="3781523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781529">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781592">if</span>&nbsp;<span class="ident" id="3781595"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781598">.</span><span class="ident" id="3781599"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3781601">&gt;</span>&nbsp;<span class="num" id="3781603">0</span>&nbsp;<span class="op" id="3781605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781612"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781615">.</span><span class="builtinfunc" id="3781616"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3781622">(</span><span class="ident" id="3781623"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3781632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781638">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781644"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781647">.</span><span class="builtinfunc" id="3781648"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3781654">(</span><span class="string" id="3781655">&#39;.&#39;</span><span class="op" id="3781658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781664"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781667">.</span><span class="builtinfunc" id="3781668"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3781674">(</span><span class="string" id="3781675">&#39;.&#39;</span><span class="op" id="3781678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781684"><a href="/gostd/path/filepath/path.go.html#3780951">dotdot</a></span>&nbsp;<span class="op" id="3781691">=</span>&nbsp;<span class="ident" id="3781693"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781696">.</span><span class="ident" id="3781697"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781706">default</span><span class="op" id="3781713">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781718">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781743">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781769">if</span>&nbsp;<span class="ident" id="3781772"><a href="/gostd/path/filepath/path.go.html#3780566">rooted</a></span>&nbsp;<span class="op" id="3781779">&amp;&amp;</span>&nbsp;<span class="ident" id="3781782"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781785">.</span><span class="ident" id="3781786"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3781788">!=</span>&nbsp;<span class="num" id="3781791">1</span>&nbsp;<span class="op" id="3781793">||</span>&nbsp;<span class="op" id="3781796">!</span><span class="ident" id="3781797"><a href="/gostd/path/filepath/path.go.html#3780566">rooted</a></span>&nbsp;<span class="op" id="3781804">&amp;&amp;</span>&nbsp;<span class="ident" id="3781807"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781810">.</span><span class="ident" id="3781811"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3781813">!=</span>&nbsp;<span class="num" id="3781816">0</span>&nbsp;<span class="op" id="3781818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781824"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781827">.</span><span class="builtinfunc" id="3781828"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3781834">(</span><span class="ident" id="3781835"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3781844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781849">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781854">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781873">for</span>&nbsp;<span class="op" id="3781877">;</span>&nbsp;<span class="ident" id="3781879"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span>&nbsp;<span class="op" id="3781881">&lt;</span>&nbsp;<span class="ident" id="3781883"><a href="/gostd/path/filepath/path.go.html#3780862">n</a></span>&nbsp;<span class="op" id="3781885">&amp;&amp;</span>&nbsp;<span class="op" id="3781888">!</span><span class="ident" id="3781889"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3781891">.</span><span class="ident" id="3781892"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3781907">(</span><span class="ident" id="3781908"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781912">[</span><span class="ident" id="3781913"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781914">]</span><span class="op" id="3781915">)</span><span class="op" id="3781916">;</span>&nbsp;<span class="ident" id="3781918"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781919">++</span>&nbsp;<span class="op" id="3781922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3781928"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781931">.</span><span class="builtinfunc" id="3781932"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3781938">(</span><span class="ident" id="3781939"><a href="/gostd/path/filepath/path.go.html#3780318">path</a></span><span class="op" id="3781943">[</span><span class="ident" id="3781944"><a href="/gostd/path/filepath/path.go.html#3780948">r</a></span><span class="op" id="3781945">]</span><span class="op" id="3781946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781955">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3781958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3781962">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3781993">if</span>&nbsp;<span class="ident" id="3781996"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3781999">.</span><span class="ident" id="3782000"><a href="/gostd/path/filepath/path.go.html#3778767">w</a></span>&nbsp;<span class="op" id="3782002">==</span>&nbsp;<span class="num" id="3782005">0</span>&nbsp;<span class="op" id="3782007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3782011"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3782014">.</span><span class="builtinfunc" id="3782015"><a href="/gostd/path/filepath/path.go.html#3778937">append</a></span><span class="op" id="3782021">(</span><span class="string" id="3782022">&#39;.&#39;</span><span class="op" id="3782025">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782032">return</span>&nbsp;<span class="ident" id="3782039"><a href="/gostd/path/filepath/path.go.html#3782541">FromSlash</a></span><span class="op" id="3782048">(</span><span class="ident" id="3782049"><a href="/gostd/path/filepath/path.go.html#3780878">out</a></span><span class="op" id="3782052">.</span><span class="builtintype" id="3782053"><a href="/gostd/path/filepath/path.go.html#3779152">string</a></span><span class="op" id="3782059">(</span><span class="op" id="3782060">)</span><span class="op" id="3782061">)</span><br>
<span class="lineno"></span><span class="op" id="3782063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3782066">//&nbsp;ToSlash&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;replacing&nbsp;each&nbsp;separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3782134">//&nbsp;in&nbsp;path&nbsp;with&nbsp;a&nbsp;slash&nbsp;(&#39;/&#39;)&nbsp;character.&nbsp;Multiple&nbsp;separators&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3782199">//&nbsp;replaced&nbsp;by&nbsp;multiple&nbsp;slashes.</span><br>
<span class="lineno"></span><span class="keyword" id="3782232">func</span>&nbsp;<span class="ident" id="3782237">ToSlash</span><span class="op" id="3782244">(</span><span class="ident" id="3782245">path</span>&nbsp;<span class="builtintype" id="3782250">string</span><span class="op" id="3782256">)</span>&nbsp;<span class="builtintype" id="3782258">string</span>&nbsp;<span class="op" id="3782265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782268">if</span>&nbsp;<span class="ident" id="3782271"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span>&nbsp;<span class="op" id="3782281">==</span>&nbsp;<span class="string" id="3782284">&#39;/&#39;</span>&nbsp;<span class="op" id="3782288">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782292">return</span>&nbsp;<span class="ident" id="3782299"><a href="/gostd/path/filepath/path.go.html#3782245">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782308">return</span>&nbsp;<span class="ident" id="3782315"><a href="/gostd/path/filepath/path.go.html#3778462">strings</a></span><span class="op" id="3782322">.</span><span class="ident" id="3782323"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="3782330">(</span><span class="ident" id="3782331"><a href="/gostd/path/filepath/path.go.html#3782245">path</a></span><span class="op" id="3782335">,</span>&nbsp;<span class="builtintype" id="3782337">string</span><span class="op" id="3782343">(</span><span class="ident" id="3782344"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3782353">)</span><span class="op" id="3782354">,</span>&nbsp;<span class="string" id="3782356">&#34;/&#34;</span><span class="op" id="3782359">,</span>&nbsp;<span class="op" id="3782361">-</span><span class="num" id="3782362">1</span><span class="op" id="3782363">)</span><br>
<span class="lineno"></span><span class="op" id="3782365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3782368">//&nbsp;FromSlash&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;replacing&nbsp;each&nbsp;slash&nbsp;(&#39;/&#39;)&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3782440">//&nbsp;in&nbsp;path&nbsp;with&nbsp;a&nbsp;separator&nbsp;character.&nbsp;Multiple&nbsp;slashes&nbsp;are&nbsp;replaced</span><br>
<span class="lineno"></span><span class="comment" id="3782509">//&nbsp;by&nbsp;multiple&nbsp;separators.</span><br>
<span class="lineno"></span><span class="keyword" id="3782536">func</span>&nbsp;<span class="ident" id="3782541">FromSlash</span><span class="op" id="3782550">(</span><span class="ident" id="3782551">path</span>&nbsp;<span class="builtintype" id="3782556">string</span><span class="op" id="3782562">)</span>&nbsp;<span class="builtintype" id="3782564">string</span>&nbsp;<span class="op" id="3782571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782574">if</span>&nbsp;<span class="ident" id="3782577"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span>&nbsp;<span class="op" id="3782587">==</span>&nbsp;<span class="string" id="3782590">&#39;/&#39;</span>&nbsp;<span class="op" id="3782594">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782598">return</span>&nbsp;<span class="ident" id="3782605"><a href="/gostd/path/filepath/path.go.html#3782551">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3782611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782614">return</span>&nbsp;<span class="ident" id="3782621"><a href="/gostd/path/filepath/path.go.html#3778462">strings</a></span><span class="op" id="3782628">.</span><span class="ident" id="3782629"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="3782636">(</span><span class="ident" id="3782637"><a href="/gostd/path/filepath/path.go.html#3782551">path</a></span><span class="op" id="3782641">,</span>&nbsp;<span class="string" id="3782643">&#34;/&#34;</span><span class="op" id="3782646">,</span>&nbsp;<span class="builtintype" id="3782648">string</span><span class="op" id="3782654">(</span><span class="ident" id="3782655"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3782664">)</span><span class="op" id="3782665">,</span>&nbsp;<span class="op" id="3782667">-</span><span class="num" id="3782668">1</span><span class="op" id="3782669">)</span><br>
<span class="lineno"></span><span class="op" id="3782671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="3782674">//&nbsp;SplitList&nbsp;splits&nbsp;a&nbsp;list&nbsp;of&nbsp;paths&nbsp;joined&nbsp;by&nbsp;the&nbsp;OS-specific&nbsp;ListSeparator,</span><br>
<span class="lineno"></span><span class="comment" id="3782751">//&nbsp;usually&nbsp;found&nbsp;in&nbsp;PATH&nbsp;or&nbsp;GOPATH&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="3782809">//&nbsp;Unlike&nbsp;strings.Split,&nbsp;SplitList&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;when&nbsp;passed&nbsp;an&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3782896">func</span>&nbsp;<span class="ident" id="3782901">SplitList</span><span class="op" id="3782910">(</span><span class="ident" id="3782911">path</span>&nbsp;<span class="builtintype" id="3782916">string</span><span class="op" id="3782922">)</span>&nbsp;<span class="op" id="3782924">[</span><span class="op" id="3782925">]</span><span class="builtintype" id="3782926">string</span>&nbsp;<span class="op" id="3782933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3782936">return</span>&nbsp;<span class="ident" id="3782943"><a href="/gostd/path/filepath/path_unix.go.html#3791989">splitList</a></span><span class="op" id="3782952">(</span><span class="ident" id="3782953"><a href="/gostd/path/filepath/path.go.html#3782911">path</a></span><span class="op" id="3782957">)</span><br>
<span class="lineno">180</span><span class="op" id="3782959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3782962">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;Separator,</span><br>
<span class="lineno"></span><span class="comment" id="3783026">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3783085">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;Separator&nbsp;in&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir</span><br>
<span class="lineno">185</span><span class="comment" id="3783149">//&nbsp;and&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3783174">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3783237">func</span>&nbsp;<span class="ident" id="3783242">Split</span><span class="op" id="3783247">(</span><span class="ident" id="3783248">path</span>&nbsp;<span class="builtintype" id="3783253">string</span><span class="op" id="3783259">)</span>&nbsp;<span class="op" id="3783261">(</span><span class="ident" id="3783262">dir</span><span class="op" id="3783265">,</span>&nbsp;<span class="ident" id="3783267">file</span>&nbsp;<span class="builtintype" id="3783272">string</span><span class="op" id="3783278">)</span>&nbsp;<span class="op" id="3783280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3783283">vol</span>&nbsp;<span class="op" id="3783287">:=</span>&nbsp;<span class="ident" id="3783290"><a href="/gostd/path/filepath/path.go.html#3791223">VolumeName</a></span><span class="op" id="3783300">(</span><span class="ident" id="3783301"><a href="/gostd/path/filepath/path.go.html#3783248">path</a></span><span class="op" id="3783305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3783308">i</span>&nbsp;<span class="op" id="3783310">:=</span>&nbsp;<span class="builtinfunc" id="3783313">len</span><span class="op" id="3783316">(</span><span class="ident" id="3783317"><a href="/gostd/path/filepath/path.go.html#3783248">path</a></span><span class="op" id="3783321">)</span>&nbsp;<span class="op" id="3783323">-</span>&nbsp;<span class="num" id="3783325">1</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783328">for</span>&nbsp;<span class="ident" id="3783332"><a href="/gostd/path/filepath/path.go.html#3783308">i</a></span>&nbsp;<span class="op" id="3783334">&gt;=</span>&nbsp;<span class="builtinfunc" id="3783337">len</span><span class="op" id="3783340">(</span><span class="ident" id="3783341"><a href="/gostd/path/filepath/path.go.html#3783283">vol</a></span><span class="op" id="3783344">)</span>&nbsp;<span class="op" id="3783346">&amp;&amp;</span>&nbsp;<span class="op" id="3783349">!</span><span class="ident" id="3783350"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3783352">.</span><span class="ident" id="3783353"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3783368">(</span><span class="ident" id="3783369"><a href="/gostd/path/filepath/path.go.html#3783248">path</a></span><span class="op" id="3783373">[</span><span class="ident" id="3783374"><a href="/gostd/path/filepath/path.go.html#3783308">i</a></span><span class="op" id="3783375">]</span><span class="op" id="3783376">)</span>&nbsp;<span class="op" id="3783378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3783382"><a href="/gostd/path/filepath/path.go.html#3783308">i</a></span><span class="op" id="3783383">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783390">return</span>&nbsp;<span class="ident" id="3783397"><a href="/gostd/path/filepath/path.go.html#3783248">path</a></span><span class="op" id="3783401">[</span><span class="op" id="3783402">:</span><span class="ident" id="3783403"><a href="/gostd/path/filepath/path.go.html#3783308">i</a></span><span class="op" id="3783404">+</span><span class="num" id="3783405">1</span><span class="op" id="3783406">]</span><span class="op" id="3783407">,</span>&nbsp;<span class="ident" id="3783409"><a href="/gostd/path/filepath/path.go.html#3783248">path</a></span><span class="op" id="3783413">[</span><span class="ident" id="3783414"><a href="/gostd/path/filepath/path.go.html#3783308">i</a></span><span class="op" id="3783415">+</span><span class="num" id="3783416">1</span><span class="op" id="3783417">:</span><span class="op" id="3783418">]</span><br>
<span class="lineno"></span><span class="op" id="3783420">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3783423">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding</span><br>
<span class="lineno"></span><span class="comment" id="3783492">//&nbsp;a&nbsp;Separator&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned,&nbsp;in&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="3783558">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="3783592">func</span>&nbsp;<span class="ident" id="3783597">Join</span><span class="op" id="3783601">(</span><span class="ident" id="3783602">elem</span>&nbsp;<span class="op" id="3783607">...</span><span class="builtintype" id="3783610">string</span><span class="op" id="3783616">)</span>&nbsp;<span class="builtintype" id="3783618">string</span>&nbsp;<span class="op" id="3783625">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783628">for</span>&nbsp;<span class="ident" id="3783632">i</span><span class="op" id="3783633">,</span>&nbsp;<span class="ident" id="3783635">e</span>&nbsp;<span class="op" id="3783637">:=</span>&nbsp;<span class="keyword" id="3783640">range</span>&nbsp;<span class="ident" id="3783646"><a href="/gostd/path/filepath/path.go.html#3783602">elem</a></span>&nbsp;<span class="op" id="3783651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783655">if</span>&nbsp;<span class="ident" id="3783658"><a href="/gostd/path/filepath/path.go.html#3783635">e</a></span>&nbsp;<span class="op" id="3783660">!=</span>&nbsp;<span class="string" id="3783663">&#34;&#34;</span>&nbsp;<span class="op" id="3783666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783671">return</span>&nbsp;<span class="ident" id="3783678"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="3783683">(</span><span class="ident" id="3783684"><a href="/gostd/path/filepath/path.go.html#3778462">strings</a></span><span class="op" id="3783691">.</span><span class="ident" id="3783692"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="3783696">(</span><span class="ident" id="3783697"><a href="/gostd/path/filepath/path.go.html#3783602">elem</a></span><span class="op" id="3783701">[</span><span class="ident" id="3783702"><a href="/gostd/path/filepath/path.go.html#3783632">i</a></span><span class="op" id="3783703">:</span><span class="op" id="3783704">]</span><span class="op" id="3783705">,</span>&nbsp;<span class="builtintype" id="3783707">string</span><span class="op" id="3783713">(</span><span class="ident" id="3783714"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3783723">)</span><span class="op" id="3783724">)</span><span class="op" id="3783725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3783732">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783735">return</span>&nbsp;<span class="string" id="3783742">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3783745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3783748">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3783801">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno">210</span><span class="comment" id="3783859">//&nbsp;in&nbsp;the&nbsp;final&nbsp;element&nbsp;of&nbsp;path;&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3783916">//&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3783927">func</span>&nbsp;<span class="ident" id="3783932">Ext</span><span class="op" id="3783935">(</span><span class="ident" id="3783936">path</span>&nbsp;<span class="builtintype" id="3783941">string</span><span class="op" id="3783947">)</span>&nbsp;<span class="builtintype" id="3783949">string</span>&nbsp;<span class="op" id="3783956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3783959">for</span>&nbsp;<span class="ident" id="3783963">i</span>&nbsp;<span class="op" id="3783965">:=</span>&nbsp;<span class="builtinfunc" id="3783968">len</span><span class="op" id="3783971">(</span><span class="ident" id="3783972"><a href="/gostd/path/filepath/path.go.html#3783936">path</a></span><span class="op" id="3783976">)</span>&nbsp;<span class="op" id="3783978">-</span>&nbsp;<span class="num" id="3783980">1</span><span class="op" id="3783981">;</span>&nbsp;<span class="ident" id="3783983"><a href="/gostd/path/filepath/path.go.html#3783963">i</a></span>&nbsp;<span class="op" id="3783985">&gt;=</span>&nbsp;<span class="num" id="3783988">0</span>&nbsp;<span class="op" id="3783990">&amp;&amp;</span>&nbsp;<span class="op" id="3783993">!</span><span class="ident" id="3783994"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3783996">.</span><span class="ident" id="3783997"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3784012">(</span><span class="ident" id="3784013"><a href="/gostd/path/filepath/path.go.html#3783936">path</a></span><span class="op" id="3784017">[</span><span class="ident" id="3784018"><a href="/gostd/path/filepath/path.go.html#3783963">i</a></span><span class="op" id="3784019">]</span><span class="op" id="3784020">)</span><span class="op" id="3784021">;</span>&nbsp;<span class="ident" id="3784023"><a href="/gostd/path/filepath/path.go.html#3783963">i</a></span><span class="op" id="3784024">--</span>&nbsp;<span class="op" id="3784027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784031">if</span>&nbsp;<span class="ident" id="3784034"><a href="/gostd/path/filepath/path.go.html#3783936">path</a></span><span class="op" id="3784038">[</span><span class="ident" id="3784039"><a href="/gostd/path/filepath/path.go.html#3783963">i</a></span><span class="op" id="3784040">]</span>&nbsp;<span class="op" id="3784042">==</span>&nbsp;<span class="string" id="3784045">&#39;.&#39;</span>&nbsp;<span class="op" id="3784049">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784054">return</span>&nbsp;<span class="ident" id="3784061"><a href="/gostd/path/filepath/path.go.html#3783936">path</a></span><span class="op" id="3784065">[</span><span class="ident" id="3784066"><a href="/gostd/path/filepath/path.go.html#3783963">i</a></span><span class="op" id="3784067">:</span><span class="op" id="3784068">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784078">return</span>&nbsp;<span class="string" id="3784085">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3784088">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="3784091">//&nbsp;EvalSymlinks&nbsp;returns&nbsp;the&nbsp;path&nbsp;name&nbsp;after&nbsp;the&nbsp;evaluation&nbsp;of&nbsp;any&nbsp;symbolic</span><br>
<span class="lineno"></span><span class="comment" id="3784166">//&nbsp;links.</span><br>
<span class="lineno"></span><span class="comment" id="3784176">//&nbsp;If&nbsp;path&nbsp;is&nbsp;relative&nbsp;the&nbsp;result&nbsp;will&nbsp;be&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory,</span><br>
<span class="lineno"></span><span class="comment" id="3784253">//&nbsp;unless&nbsp;one&nbsp;of&nbsp;the&nbsp;components&nbsp;is&nbsp;an&nbsp;absolute&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno">225</span><span class="keyword" id="3784315">func</span>&nbsp;<span class="ident" id="3784320">EvalSymlinks</span><span class="op" id="3784332">(</span><span class="ident" id="3784333">path</span>&nbsp;<span class="builtintype" id="3784338">string</span><span class="op" id="3784344">)</span>&nbsp;<span class="op" id="3784346">(</span><span class="builtintype" id="3784347">string</span><span class="op" id="3784353">,</span>&nbsp;<span class="builtintype" id="3784355">error</span><span class="op" id="3784360">)</span>&nbsp;<span class="op" id="3784362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784365">return</span>&nbsp;<span class="ident" id="3784372"><a href="/gostd/path/filepath/symlink_unix.go.html#3793727">evalSymlinks</a></span><span class="op" id="3784384">(</span><span class="ident" id="3784385"><a href="/gostd/path/filepath/path.go.html#3784333">path</a></span><span class="op" id="3784389">)</span><br>
<span class="lineno"></span><span class="op" id="3784391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3784394">//&nbsp;Abs&nbsp;returns&nbsp;an&nbsp;absolute&nbsp;representation&nbsp;of&nbsp;path.</span><br>
<span class="lineno">230</span><span class="comment" id="3784445">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;not&nbsp;absolute&nbsp;it&nbsp;will&nbsp;be&nbsp;joined&nbsp;with&nbsp;the&nbsp;current</span><br>
<span class="lineno"></span><span class="comment" id="3784511">//&nbsp;working&nbsp;directory&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;an&nbsp;absolute&nbsp;path.&nbsp;&nbsp;The&nbsp;absolute</span><br>
<span class="lineno"></span><span class="comment" id="3784580">//&nbsp;path&nbsp;name&nbsp;for&nbsp;a&nbsp;given&nbsp;file&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;unique.</span><br>
<span class="lineno"></span><span class="keyword" id="3784642">func</span>&nbsp;<span class="ident" id="3784647">Abs</span><span class="op" id="3784650">(</span><span class="ident" id="3784651">path</span>&nbsp;<span class="builtintype" id="3784656">string</span><span class="op" id="3784662">)</span>&nbsp;<span class="op" id="3784664">(</span><span class="builtintype" id="3784665">string</span><span class="op" id="3784671">,</span>&nbsp;<span class="builtintype" id="3784673">error</span><span class="op" id="3784678">)</span>&nbsp;<span class="op" id="3784680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784683">return</span>&nbsp;<span class="ident" id="3784690"><a href="/gostd/path/filepath/path_unix.go.html#3792122">abs</a></span><span class="op" id="3784693">(</span><span class="ident" id="3784694"><a href="/gostd/path/filepath/path.go.html#3784651">path</a></span><span class="op" id="3784698">)</span><br>
<span class="lineno">235</span><span class="op" id="3784700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3784703">func</span>&nbsp;<span class="ident" id="3784708">unixAbs</span><span class="op" id="3784715">(</span><span class="ident" id="3784716">path</span>&nbsp;<span class="builtintype" id="3784721">string</span><span class="op" id="3784727">)</span>&nbsp;<span class="op" id="3784729">(</span><span class="builtintype" id="3784730">string</span><span class="op" id="3784736">,</span>&nbsp;<span class="builtintype" id="3784738">error</span><span class="op" id="3784743">)</span>&nbsp;<span class="op" id="3784745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784748">if</span>&nbsp;<span class="ident" id="3784751"><a href="/gostd/path/filepath/path_unix.go.html#3791616">IsAbs</a></span><span class="op" id="3784756">(</span><span class="ident" id="3784757"><a href="/gostd/path/filepath/path.go.html#3784716">path</a></span><span class="op" id="3784761">)</span>&nbsp;<span class="op" id="3784763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784767">return</span>&nbsp;<span class="ident" id="3784774"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="3784779">(</span><span class="ident" id="3784780"><a href="/gostd/path/filepath/path.go.html#3784716">path</a></span><span class="op" id="3784784">)</span><span class="op" id="3784785">,</span>&nbsp;<span class="builtintype" id="3784787">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3784795">wd</span><span class="op" id="3784797">,</span>&nbsp;<span class="ident" id="3784799">err</span>&nbsp;<span class="op" id="3784803">:=</span>&nbsp;<span class="ident" id="3784806"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3784808">.</span><span class="ident" id="3784809"><a href="/gostd/os/getwd.go.html#2462017">Getwd</a></span><span class="op" id="3784814">(</span><span class="op" id="3784815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784818">if</span>&nbsp;<span class="ident" id="3784821"><a href="/gostd/path/filepath/path.go.html#3784799">err</a></span>&nbsp;<span class="op" id="3784825">!=</span>&nbsp;<span class="builtintype" id="3784828">nil</span>&nbsp;<span class="op" id="3784832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784836">return</span>&nbsp;<span class="string" id="3784843">&#34;&#34;</span><span class="op" id="3784845">,</span>&nbsp;<span class="ident" id="3784847"><a href="/gostd/path/filepath/path.go.html#3784799">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3784852">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3784855">return</span>&nbsp;<span class="ident" id="3784862"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="3784866">(</span><span class="ident" id="3784867"><a href="/gostd/path/filepath/path.go.html#3784795">wd</a></span><span class="op" id="3784869">,</span>&nbsp;<span class="ident" id="3784871"><a href="/gostd/path/filepath/path.go.html#3784716">path</a></span><span class="op" id="3784875">)</span><span class="op" id="3784876">,</span>&nbsp;<span class="builtintype" id="3784878">nil</span><br>
<span class="lineno"></span><span class="op" id="3784882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3784885">//&nbsp;Rel&nbsp;returns&nbsp;a&nbsp;relative&nbsp;path&nbsp;that&nbsp;is&nbsp;lexically&nbsp;equivalent&nbsp;to&nbsp;targpath&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3784962">//&nbsp;joined&nbsp;to&nbsp;basepath&nbsp;with&nbsp;an&nbsp;intervening&nbsp;separator.&nbsp;That&nbsp;is,</span><br>
<span class="lineno">250</span><span class="comment" id="3785024">//&nbsp;Join(basepath,&nbsp;Rel(basepath,&nbsp;targpath))&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;targpath&nbsp;itself.</span><br>
<span class="lineno"></span><span class="comment" id="3785101">//&nbsp;On&nbsp;success,&nbsp;the&nbsp;returned&nbsp;path&nbsp;will&nbsp;always&nbsp;be&nbsp;relative&nbsp;to&nbsp;basepath,</span><br>
<span class="lineno"></span><span class="comment" id="3785171">//&nbsp;even&nbsp;if&nbsp;basepath&nbsp;and&nbsp;targpath&nbsp;share&nbsp;no&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="3785223">//&nbsp;An&nbsp;error&nbsp;is&nbsp;returned&nbsp;if&nbsp;targpath&nbsp;can&#39;t&nbsp;be&nbsp;made&nbsp;relative&nbsp;to&nbsp;basepath&nbsp;or&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3785300">//&nbsp;knowing&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;would&nbsp;be&nbsp;necessary&nbsp;to&nbsp;compute&nbsp;it.</span><br>
<span class="lineno">255</span><span class="keyword" id="3785375">func</span>&nbsp;<span class="ident" id="3785380">Rel</span><span class="op" id="3785383">(</span><span class="ident" id="3785384">basepath</span><span class="op" id="3785392">,</span>&nbsp;<span class="ident" id="3785394">targpath</span>&nbsp;<span class="builtintype" id="3785403">string</span><span class="op" id="3785409">)</span>&nbsp;<span class="op" id="3785411">(</span><span class="builtintype" id="3785412">string</span><span class="op" id="3785418">,</span>&nbsp;<span class="builtintype" id="3785420">error</span><span class="op" id="3785425">)</span>&nbsp;<span class="op" id="3785427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785430">baseVol</span>&nbsp;<span class="op" id="3785438">:=</span>&nbsp;<span class="ident" id="3785441"><a href="/gostd/path/filepath/path.go.html#3791223">VolumeName</a></span><span class="op" id="3785451">(</span><span class="ident" id="3785452"><a href="/gostd/path/filepath/path.go.html#3785384">basepath</a></span><span class="op" id="3785460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785463">targVol</span>&nbsp;<span class="op" id="3785471">:=</span>&nbsp;<span class="ident" id="3785474"><a href="/gostd/path/filepath/path.go.html#3791223">VolumeName</a></span><span class="op" id="3785484">(</span><span class="ident" id="3785485"><a href="/gostd/path/filepath/path.go.html#3785394">targpath</a></span><span class="op" id="3785493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785496">base</span>&nbsp;<span class="op" id="3785501">:=</span>&nbsp;<span class="ident" id="3785504"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="3785509">(</span><span class="ident" id="3785510"><a href="/gostd/path/filepath/path.go.html#3785384">basepath</a></span><span class="op" id="3785518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785521">targ</span>&nbsp;<span class="op" id="3785526">:=</span>&nbsp;<span class="ident" id="3785529"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="3785534">(</span><span class="ident" id="3785535"><a href="/gostd/path/filepath/path.go.html#3785394">targpath</a></span><span class="op" id="3785543">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785546">if</span>&nbsp;<span class="ident" id="3785549"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span>&nbsp;<span class="op" id="3785554">==</span>&nbsp;<span class="ident" id="3785557"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span>&nbsp;<span class="op" id="3785562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785566">return</span>&nbsp;<span class="string" id="3785573">&#34;.&#34;</span><span class="op" id="3785576">,</span>&nbsp;<span class="builtintype" id="3785578">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785586"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span>&nbsp;<span class="op" id="3785591">=</span>&nbsp;<span class="ident" id="3785593"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3785597">[</span><span class="builtinfunc" id="3785598">len</span><span class="op" id="3785601">(</span><span class="ident" id="3785602"><a href="/gostd/path/filepath/path.go.html#3785430">baseVol</a></span><span class="op" id="3785609">)</span><span class="op" id="3785610">:</span><span class="op" id="3785611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785614"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span>&nbsp;<span class="op" id="3785619">=</span>&nbsp;<span class="ident" id="3785621"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3785625">[</span><span class="builtinfunc" id="3785626">len</span><span class="op" id="3785629">(</span><span class="ident" id="3785630"><a href="/gostd/path/filepath/path.go.html#3785463">targVol</a></span><span class="op" id="3785637">)</span><span class="op" id="3785638">:</span><span class="op" id="3785639">]</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785642">if</span>&nbsp;<span class="ident" id="3785645"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span>&nbsp;<span class="op" id="3785650">==</span>&nbsp;<span class="string" id="3785653">&#34;.&#34;</span>&nbsp;<span class="op" id="3785657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785661"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span>&nbsp;<span class="op" id="3785666">=</span>&nbsp;<span class="string" id="3785668">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785675">//&nbsp;Can&#39;t&nbsp;use&nbsp;IsAbs&nbsp;-&nbsp;`\a`&nbsp;and&nbsp;`a`&nbsp;are&nbsp;both&nbsp;relative&nbsp;in&nbsp;Windows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785740">baseSlashed</span>&nbsp;<span class="op" id="3785752">:=</span>&nbsp;<span class="builtinfunc" id="3785755">len</span><span class="op" id="3785758">(</span><span class="ident" id="3785759"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3785763">)</span>&nbsp;<span class="op" id="3785765">&gt;</span>&nbsp;<span class="num" id="3785767">0</span>&nbsp;<span class="op" id="3785769">&amp;&amp;</span>&nbsp;<span class="ident" id="3785772"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3785776">[</span><span class="num" id="3785777">0</span><span class="op" id="3785778">]</span>&nbsp;<span class="op" id="3785780">==</span>&nbsp;<span class="ident" id="3785783"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3785794">targSlashed</span>&nbsp;<span class="op" id="3785806">:=</span>&nbsp;<span class="builtinfunc" id="3785809">len</span><span class="op" id="3785812">(</span><span class="ident" id="3785813"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3785817">)</span>&nbsp;<span class="op" id="3785819">&gt;</span>&nbsp;<span class="num" id="3785821">0</span>&nbsp;<span class="op" id="3785823">&amp;&amp;</span>&nbsp;<span class="ident" id="3785826"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3785830">[</span><span class="num" id="3785831">0</span><span class="op" id="3785832">]</span>&nbsp;<span class="op" id="3785834">==</span>&nbsp;<span class="ident" id="3785837"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785848">if</span>&nbsp;<span class="ident" id="3785851"><a href="/gostd/path/filepath/path.go.html#3785740">baseSlashed</a></span>&nbsp;<span class="op" id="3785863">!=</span>&nbsp;<span class="ident" id="3785866"><a href="/gostd/path/filepath/path.go.html#3785794">targSlashed</a></span>&nbsp;<span class="op" id="3785878">||</span>&nbsp;<span class="ident" id="3785881"><a href="/gostd/path/filepath/path.go.html#3785430">baseVol</a></span>&nbsp;<span class="op" id="3785889">!=</span>&nbsp;<span class="ident" id="3785892"><a href="/gostd/path/filepath/path.go.html#3785463">targVol</a></span>&nbsp;<span class="op" id="3785900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3785904">return</span>&nbsp;<span class="string" id="3785911">&#34;&#34;</span><span class="op" id="3785913">,</span>&nbsp;<span class="ident" id="3785915"><a href="/gostd/path/filepath/path.go.html#3778438">errors</a></span><span class="op" id="3785921">.</span><span class="ident" id="3785922"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3785925">(</span><span class="string" id="3785926">&#34;Rel:&nbsp;can&#39;t&nbsp;make&nbsp;&#34;</span>&nbsp;<span class="op" id="3785945">+</span>&nbsp;<span class="ident" id="3785947"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span>&nbsp;<span class="op" id="3785952">+</span>&nbsp;<span class="string" id="3785954">&#34;&nbsp;relative&nbsp;to&nbsp;&#34;</span>&nbsp;<span class="op" id="3785970">+</span>&nbsp;<span class="ident" id="3785972"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3785976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3785979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3785982">//&nbsp;Position&nbsp;base[b0:bi]&nbsp;and&nbsp;targ[t0:ti]&nbsp;at&nbsp;the&nbsp;first&nbsp;differing&nbsp;elements.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786056">bl</span>&nbsp;<span class="op" id="3786059">:=</span>&nbsp;<span class="builtinfunc" id="3786062">len</span><span class="op" id="3786065">(</span><span class="ident" id="3786066"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786073">tl</span>&nbsp;<span class="op" id="3786076">:=</span>&nbsp;<span class="builtinfunc" id="3786079">len</span><span class="op" id="3786082">(</span><span class="ident" id="3786083"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3786087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786090">var</span>&nbsp;<span class="ident" id="3786094">b0</span><span class="op" id="3786096">,</span>&nbsp;<span class="ident" id="3786098">bi</span><span class="op" id="3786100">,</span>&nbsp;<span class="ident" id="3786102">t0</span><span class="op" id="3786104">,</span>&nbsp;<span class="ident" id="3786106">ti</span>&nbsp;<span class="builtintype" id="3786109">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786114">for</span>&nbsp;<span class="op" id="3786118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786122">for</span>&nbsp;<span class="ident" id="3786126"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span>&nbsp;<span class="op" id="3786129">&lt;</span>&nbsp;<span class="ident" id="3786131"><a href="/gostd/path/filepath/path.go.html#3786056">bl</a></span>&nbsp;<span class="op" id="3786134">&amp;&amp;</span>&nbsp;<span class="ident" id="3786137"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786141">[</span><span class="ident" id="3786142"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><span class="op" id="3786144">]</span>&nbsp;<span class="op" id="3786146">!=</span>&nbsp;<span class="ident" id="3786149"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span>&nbsp;<span class="op" id="3786159">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786164"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><span class="op" id="3786166">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786175">for</span>&nbsp;<span class="ident" id="3786179"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span>&nbsp;<span class="op" id="3786182">&lt;</span>&nbsp;<span class="ident" id="3786184"><a href="/gostd/path/filepath/path.go.html#3786073">tl</a></span>&nbsp;<span class="op" id="3786187">&amp;&amp;</span>&nbsp;<span class="ident" id="3786190"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3786194">[</span><span class="ident" id="3786195"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span><span class="op" id="3786197">]</span>&nbsp;<span class="op" id="3786199">!=</span>&nbsp;<span class="ident" id="3786202"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span>&nbsp;<span class="op" id="3786212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786217"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span><span class="op" id="3786219">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786224">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786228">if</span>&nbsp;<span class="ident" id="3786231"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3786235">[</span><span class="ident" id="3786236"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span><span class="op" id="3786238">:</span><span class="ident" id="3786239"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span><span class="op" id="3786241">]</span>&nbsp;<span class="op" id="3786243">!=</span>&nbsp;<span class="ident" id="3786246"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786250">[</span><span class="ident" id="3786251"><a href="/gostd/path/filepath/path.go.html#3786094">b0</a></span><span class="op" id="3786253">:</span><span class="ident" id="3786254"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><span class="op" id="3786256">]</span>&nbsp;<span class="op" id="3786258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786263">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786275">if</span>&nbsp;<span class="ident" id="3786278"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span>&nbsp;<span class="op" id="3786281">&lt;</span>&nbsp;<span class="ident" id="3786283"><a href="/gostd/path/filepath/path.go.html#3786056">bl</a></span>&nbsp;<span class="op" id="3786286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786291"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><span class="op" id="3786293">++</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786302">if</span>&nbsp;<span class="ident" id="3786305"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span>&nbsp;<span class="op" id="3786308">&lt;</span>&nbsp;<span class="ident" id="3786310"><a href="/gostd/path/filepath/path.go.html#3786073">tl</a></span>&nbsp;<span class="op" id="3786313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786318"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span><span class="op" id="3786320">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786329"><a href="/gostd/path/filepath/path.go.html#3786094">b0</a></span>&nbsp;<span class="op" id="3786332">=</span>&nbsp;<span class="ident" id="3786334"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786339"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span>&nbsp;<span class="op" id="3786342">=</span>&nbsp;<span class="ident" id="3786344"><a href="/gostd/path/filepath/path.go.html#3786106">ti</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786351">if</span>&nbsp;<span class="ident" id="3786354"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786358">[</span><span class="ident" id="3786359"><a href="/gostd/path/filepath/path.go.html#3786094">b0</a></span><span class="op" id="3786361">:</span><span class="ident" id="3786362"><a href="/gostd/path/filepath/path.go.html#3786098">bi</a></span><span class="op" id="3786364">]</span>&nbsp;<span class="op" id="3786366">==</span>&nbsp;<span class="string" id="3786369">&#34;..&#34;</span>&nbsp;<span class="op" id="3786374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786378">return</span>&nbsp;<span class="string" id="3786385">&#34;&#34;</span><span class="op" id="3786387">,</span>&nbsp;<span class="ident" id="3786389"><a href="/gostd/path/filepath/path.go.html#3778438">errors</a></span><span class="op" id="3786395">.</span><span class="ident" id="3786396"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3786399">(</span><span class="string" id="3786400">&#34;Rel:&nbsp;can&#39;t&nbsp;make&nbsp;&#34;</span>&nbsp;<span class="op" id="3786419">+</span>&nbsp;<span class="ident" id="3786421"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span>&nbsp;<span class="op" id="3786426">+</span>&nbsp;<span class="string" id="3786428">&#34;&nbsp;relative&nbsp;to&nbsp;&#34;</span>&nbsp;<span class="op" id="3786444">+</span>&nbsp;<span class="ident" id="3786446"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786453">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786456">if</span>&nbsp;<span class="ident" id="3786459"><a href="/gostd/path/filepath/path.go.html#3786094">b0</a></span>&nbsp;<span class="op" id="3786462">!=</span>&nbsp;<span class="ident" id="3786465"><a href="/gostd/path/filepath/path.go.html#3786056">bl</a></span>&nbsp;<span class="op" id="3786468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3786472">//&nbsp;Base&nbsp;elements&nbsp;left.&nbsp;Must&nbsp;go&nbsp;up&nbsp;before&nbsp;going&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786527">seps</span>&nbsp;<span class="op" id="3786532">:=</span>&nbsp;<span class="ident" id="3786535"><a href="/gostd/path/filepath/path.go.html#3778462">strings</a></span><span class="op" id="3786542">.</span><span class="ident" id="3786543"><a href="/gostd/strings/strings.go.html#2967531">Count</a></span><span class="op" id="3786548">(</span><span class="ident" id="3786549"><a href="/gostd/path/filepath/path.go.html#3785496">base</a></span><span class="op" id="3786553">[</span><span class="ident" id="3786554"><a href="/gostd/path/filepath/path.go.html#3786094">b0</a></span><span class="op" id="3786556">:</span><span class="ident" id="3786557"><a href="/gostd/path/filepath/path.go.html#3786056">bl</a></span><span class="op" id="3786559">]</span><span class="op" id="3786560">,</span>&nbsp;<span class="builtintype" id="3786562">string</span><span class="op" id="3786568">(</span><span class="ident" id="3786569"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3786578">)</span><span class="op" id="3786579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786583">size</span>&nbsp;<span class="op" id="3786588">:=</span>&nbsp;<span class="num" id="3786591">2</span>&nbsp;<span class="op" id="3786593">+</span>&nbsp;<span class="ident" id="3786595"><a href="/gostd/path/filepath/path.go.html#3786527">seps</a></span><span class="op" id="3786599">*</span><span class="num" id="3786600">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786604">if</span>&nbsp;<span class="ident" id="3786607"><a href="/gostd/path/filepath/path.go.html#3786073">tl</a></span>&nbsp;<span class="op" id="3786610">!=</span>&nbsp;<span class="ident" id="3786613"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span>&nbsp;<span class="op" id="3786616">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786621"><a href="/gostd/path/filepath/path.go.html#3786583">size</a></span>&nbsp;<span class="op" id="3786626">+=</span>&nbsp;<span class="num" id="3786629">1</span>&nbsp;<span class="op" id="3786631">+</span>&nbsp;<span class="ident" id="3786633"><a href="/gostd/path/filepath/path.go.html#3786073">tl</a></span>&nbsp;<span class="op" id="3786636">-</span>&nbsp;<span class="ident" id="3786638"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786647">buf</span>&nbsp;<span class="op" id="3786651">:=</span>&nbsp;<span class="builtinfunc" id="3786654">make</span><span class="op" id="3786658">(</span><span class="op" id="3786659">[</span><span class="op" id="3786660">]</span><span class="builtintype" id="3786661">byte</span><span class="op" id="3786665">,</span>&nbsp;<span class="ident" id="3786667"><a href="/gostd/path/filepath/path.go.html#3786583">size</a></span><span class="op" id="3786671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786675">n</span>&nbsp;<span class="op" id="3786677">:=</span>&nbsp;<span class="builtinfunc" id="3786680">copy</span><span class="op" id="3786684">(</span><span class="ident" id="3786685"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786688">,</span>&nbsp;<span class="string" id="3786690">&#34;..&#34;</span><span class="op" id="3786694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786698">for</span>&nbsp;<span class="ident" id="3786702">i</span>&nbsp;<span class="op" id="3786704">:=</span>&nbsp;<span class="num" id="3786707">0</span><span class="op" id="3786708">;</span>&nbsp;<span class="ident" id="3786710"><a href="/gostd/path/filepath/path.go.html#3786702">i</a></span>&nbsp;<span class="op" id="3786712">&lt;</span>&nbsp;<span class="ident" id="3786714"><a href="/gostd/path/filepath/path.go.html#3786527">seps</a></span><span class="op" id="3786718">;</span>&nbsp;<span class="ident" id="3786720"><a href="/gostd/path/filepath/path.go.html#3786702">i</a></span><span class="op" id="3786721">++</span>&nbsp;<span class="op" id="3786724">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786729"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786732">[</span><span class="ident" id="3786733"><a href="/gostd/path/filepath/path.go.html#3786675">n</a></span><span class="op" id="3786734">]</span>&nbsp;<span class="op" id="3786736">=</span>&nbsp;<span class="ident" id="3786738"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3786751">copy</span><span class="op" id="3786755">(</span><span class="ident" id="3786756"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786759">[</span><span class="ident" id="3786760"><a href="/gostd/path/filepath/path.go.html#3786675">n</a></span><span class="op" id="3786761">+</span><span class="num" id="3786762">1</span><span class="op" id="3786763">:</span><span class="op" id="3786764">]</span><span class="op" id="3786765">,</span>&nbsp;<span class="string" id="3786767">&#34;..&#34;</span><span class="op" id="3786771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786776"><a href="/gostd/path/filepath/path.go.html#3786675">n</a></span>&nbsp;<span class="op" id="3786778">+=</span>&nbsp;<span class="num" id="3786781">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786789">if</span>&nbsp;<span class="ident" id="3786792"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span>&nbsp;<span class="op" id="3786795">!=</span>&nbsp;<span class="ident" id="3786798"><a href="/gostd/path/filepath/path.go.html#3786073">tl</a></span>&nbsp;<span class="op" id="3786801">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3786806"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786809">[</span><span class="ident" id="3786810"><a href="/gostd/path/filepath/path.go.html#3786675">n</a></span><span class="op" id="3786811">]</span>&nbsp;<span class="op" id="3786813">=</span>&nbsp;<span class="ident" id="3786815"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3786828">copy</span><span class="op" id="3786832">(</span><span class="ident" id="3786833"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786836">[</span><span class="ident" id="3786837"><a href="/gostd/path/filepath/path.go.html#3786675">n</a></span><span class="op" id="3786838">+</span><span class="num" id="3786839">1</span><span class="op" id="3786840">:</span><span class="op" id="3786841">]</span><span class="op" id="3786842">,</span>&nbsp;<span class="ident" id="3786844"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3786848">[</span><span class="ident" id="3786849"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span><span class="op" id="3786851">:</span><span class="op" id="3786852">]</span><span class="op" id="3786853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786861">return</span>&nbsp;<span class="builtintype" id="3786868">string</span><span class="op" id="3786874">(</span><span class="ident" id="3786875"><a href="/gostd/path/filepath/path.go.html#3786647">buf</a></span><span class="op" id="3786878">)</span><span class="op" id="3786879">,</span>&nbsp;<span class="builtintype" id="3786881">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3786886">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3786889">return</span>&nbsp;<span class="ident" id="3786896"><a href="/gostd/path/filepath/path.go.html#3785521">targ</a></span><span class="op" id="3786900">[</span><span class="ident" id="3786901"><a href="/gostd/path/filepath/path.go.html#3786102">t0</a></span><span class="op" id="3786903">:</span><span class="op" id="3786904">]</span><span class="op" id="3786905">,</span>&nbsp;<span class="builtintype" id="3786907">nil</span><br>
<span class="lineno"></span><span class="op" id="3786911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3786914">//&nbsp;SkipDir&nbsp;is&nbsp;used&nbsp;as&nbsp;a&nbsp;return&nbsp;value&nbsp;from&nbsp;WalkFuncs&nbsp;to&nbsp;indicate&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3786983">//&nbsp;the&nbsp;directory&nbsp;named&nbsp;in&nbsp;the&nbsp;call&nbsp;is&nbsp;to&nbsp;be&nbsp;skipped.&nbsp;It&nbsp;is&nbsp;not&nbsp;returned</span><br>
<span class="lineno">325</span><span class="comment" id="3787055">//&nbsp;as&nbsp;an&nbsp;error&nbsp;by&nbsp;any&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="3787087">var</span>&nbsp;<span class="ident" id="3787091">SkipDir</span>&nbsp;<span class="op" id="3787099">=</span>&nbsp;<span class="ident" id="3787101"><a href="/gostd/path/filepath/path.go.html#3778438">errors</a></span><span class="op" id="3787107">.</span><span class="ident" id="3787108"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3787111">(</span><span class="string" id="3787112">&#34;skip&nbsp;this&nbsp;directory&#34;</span><span class="op" id="3787133">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3787136">//&nbsp;WalkFunc&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;function&nbsp;called&nbsp;for&nbsp;each&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3787210">//&nbsp;visited&nbsp;by&nbsp;Walk.&nbsp;The&nbsp;path&nbsp;argument&nbsp;contains&nbsp;the&nbsp;argument&nbsp;to&nbsp;Walk&nbsp;as&nbsp;a</span><br>
<span class="lineno">330</span><span class="comment" id="3787283">//&nbsp;prefix;&nbsp;that&nbsp;is,&nbsp;if&nbsp;Walk&nbsp;is&nbsp;called&nbsp;with&nbsp;&#34;dir&#34;,&nbsp;which&nbsp;is&nbsp;a&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3787354">//&nbsp;containing&nbsp;the&nbsp;file&nbsp;&#34;a&#34;,&nbsp;the&nbsp;walk&nbsp;function&nbsp;will&nbsp;be&nbsp;called&nbsp;with&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="3787429">//&nbsp;&#34;dir/a&#34;.&nbsp;The&nbsp;info&nbsp;argument&nbsp;is&nbsp;the&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;named&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3787498">//</span><br>
<span class="lineno"></span><span class="comment" id="3787501">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;problem&nbsp;walking&nbsp;to&nbsp;the&nbsp;file&nbsp;or&nbsp;directory&nbsp;named&nbsp;by&nbsp;path,&nbsp;the</span><br>
<span class="lineno">335</span><span class="comment" id="3787579">//&nbsp;incoming&nbsp;error&nbsp;will&nbsp;describe&nbsp;the&nbsp;problem&nbsp;and&nbsp;the&nbsp;function&nbsp;can&nbsp;decide&nbsp;how</span><br>
<span class="lineno"></span><span class="comment" id="3787655">//&nbsp;to&nbsp;handle&nbsp;that&nbsp;error&nbsp;(and&nbsp;Walk&nbsp;will&nbsp;not&nbsp;descend&nbsp;into&nbsp;that&nbsp;directory).&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="3787731">//&nbsp;an&nbsp;error&nbsp;is&nbsp;returned,&nbsp;processing&nbsp;stops.&nbsp;The&nbsp;sole&nbsp;exception&nbsp;is&nbsp;that&nbsp;if&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3787809">//&nbsp;is&nbsp;a&nbsp;directory&nbsp;and&nbsp;the&nbsp;function&nbsp;returns&nbsp;the&nbsp;special&nbsp;value&nbsp;SkipDir,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3787883">//&nbsp;contents&nbsp;of&nbsp;the&nbsp;directory&nbsp;are&nbsp;skipped&nbsp;and&nbsp;processing&nbsp;continues&nbsp;as&nbsp;usual&nbsp;on</span><br>
<span class="lineno">340</span><span class="comment" id="3787961">//&nbsp;the&nbsp;next&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="3787979">type</span>&nbsp;<span class="ident" id="3787984">WalkFunc</span>&nbsp;<span class="keyword" id="3787993">func</span><span class="op" id="3787997">(</span><span class="ident" id="3787998">path</span>&nbsp;<span class="builtintype" id="3788003">string</span><span class="op" id="3788009">,</span>&nbsp;<span class="ident" id="3788011">info</span>&nbsp;<span class="ident" id="3788016"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3788018">.</span><span class="ident" id="3788019"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="3788027">,</span>&nbsp;<span class="ident" id="3788029">err</span>&nbsp;<span class="builtintype" id="3788033">error</span><span class="op" id="3788038">)</span>&nbsp;<span class="builtintype" id="3788040">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3788047">var</span>&nbsp;<span class="ident" id="3788051">lstat</span>&nbsp;<span class="op" id="3788057">=</span>&nbsp;<span class="ident" id="3788059"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3788061">.</span><span class="ident" id="3788062"><a href="/gostd/os/file_unix.go.html#2455973">Lstat</a></span>&nbsp;<span class="comment" id="3788068">//&nbsp;for&nbsp;testing</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="comment" id="3788084">//&nbsp;walk&nbsp;recursively&nbsp;descends&nbsp;path,&nbsp;calling&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="3788130">func</span>&nbsp;<span class="ident" id="3788135">walk</span><span class="op" id="3788139">(</span><span class="ident" id="3788140">path</span>&nbsp;<span class="builtintype" id="3788145">string</span><span class="op" id="3788151">,</span>&nbsp;<span class="ident" id="3788153">info</span>&nbsp;<span class="ident" id="3788158"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3788160">.</span><span class="ident" id="3788161"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="3788169">,</span>&nbsp;<span class="ident" id="3788171">walkFn</span>&nbsp;<span class="ident" id="3788178"><a href="/gostd/path/filepath/path.go.html#3787984">WalkFunc</a></span><span class="op" id="3788186">)</span>&nbsp;<span class="builtintype" id="3788188">error</span>&nbsp;<span class="op" id="3788194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788197">err</span>&nbsp;<span class="op" id="3788201">:=</span>&nbsp;<span class="ident" id="3788204"><a href="/gostd/path/filepath/path.go.html#3788171">walkFn</a></span><span class="op" id="3788210">(</span><span class="ident" id="3788211"><a href="/gostd/path/filepath/path.go.html#3788140">path</a></span><span class="op" id="3788215">,</span>&nbsp;<span class="ident" id="3788217"><a href="/gostd/path/filepath/path.go.html#3788153">info</a></span><span class="op" id="3788221">,</span>&nbsp;<span class="builtintype" id="3788223">nil</span><span class="op" id="3788226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788229">if</span>&nbsp;<span class="ident" id="3788232"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span>&nbsp;<span class="op" id="3788236">!=</span>&nbsp;<span class="builtintype" id="3788239">nil</span>&nbsp;<span class="op" id="3788243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788247">if</span>&nbsp;<span class="ident" id="3788250"><a href="/gostd/path/filepath/path.go.html#3788153">info</a></span><span class="op" id="3788254">.</span><span class="ident" id="3788255"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="3788260">(</span><span class="op" id="3788261">)</span>&nbsp;<span class="op" id="3788263">&amp;&amp;</span>&nbsp;<span class="ident" id="3788266"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span>&nbsp;<span class="op" id="3788270">==</span>&nbsp;<span class="ident" id="3788273"><a href="/gostd/path/filepath/path.go.html#3787091">SkipDir</a></span>&nbsp;<span class="op" id="3788281">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788286">return</span>&nbsp;<span class="builtintype" id="3788293">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788303">return</span>&nbsp;<span class="ident" id="3788310"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788319">if</span>&nbsp;<span class="op" id="3788322">!</span><span class="ident" id="3788323"><a href="/gostd/path/filepath/path.go.html#3788153">info</a></span><span class="op" id="3788327">.</span><span class="ident" id="3788328"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="3788333">(</span><span class="op" id="3788334">)</span>&nbsp;<span class="op" id="3788336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788340">return</span>&nbsp;<span class="builtintype" id="3788347">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788356">names</span><span class="op" id="3788361">,</span>&nbsp;<span class="ident" id="3788363"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span>&nbsp;<span class="op" id="3788367">:=</span>&nbsp;<span class="ident" id="3788370"><a href="/gostd/path/filepath/path.go.html#3789481">readDirNames</a></span><span class="op" id="3788382">(</span><span class="ident" id="3788383"><a href="/gostd/path/filepath/path.go.html#3788140">path</a></span><span class="op" id="3788387">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788390">if</span>&nbsp;<span class="ident" id="3788393"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span>&nbsp;<span class="op" id="3788397">!=</span>&nbsp;<span class="builtintype" id="3788400">nil</span>&nbsp;<span class="op" id="3788404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788408">return</span>&nbsp;<span class="ident" id="3788415"><a href="/gostd/path/filepath/path.go.html#3788171">walkFn</a></span><span class="op" id="3788421">(</span><span class="ident" id="3788422"><a href="/gostd/path/filepath/path.go.html#3788140">path</a></span><span class="op" id="3788426">,</span>&nbsp;<span class="ident" id="3788428"><a href="/gostd/path/filepath/path.go.html#3788153">info</a></span><span class="op" id="3788432">,</span>&nbsp;<span class="ident" id="3788434"><a href="/gostd/path/filepath/path.go.html#3788197">err</a></span><span class="op" id="3788437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788444">for</span>&nbsp;<span class="ident" id="3788448">_</span><span class="op" id="3788449">,</span>&nbsp;<span class="ident" id="3788451">name</span>&nbsp;<span class="op" id="3788456">:=</span>&nbsp;<span class="keyword" id="3788459">range</span>&nbsp;<span class="ident" id="3788465"><a href="/gostd/path/filepath/path.go.html#3788356">names</a></span>&nbsp;<span class="op" id="3788471">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788475">filename</span>&nbsp;<span class="op" id="3788484">:=</span>&nbsp;<span class="ident" id="3788487"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="3788491">(</span><span class="ident" id="3788492"><a href="/gostd/path/filepath/path.go.html#3788140">path</a></span><span class="op" id="3788496">,</span>&nbsp;<span class="ident" id="3788498"><a href="/gostd/path/filepath/path.go.html#3788451">name</a></span><span class="op" id="3788502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788506">fileInfo</span><span class="op" id="3788514">,</span>&nbsp;<span class="ident" id="3788516">err</span>&nbsp;<span class="op" id="3788520">:=</span>&nbsp;<span class="ident" id="3788523"><a href="/gostd/path/filepath/path.go.html#3788051">lstat</a></span><span class="op" id="3788528">(</span><span class="ident" id="3788529"><a href="/gostd/path/filepath/path.go.html#3788475">filename</a></span><span class="op" id="3788537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788541">if</span>&nbsp;<span class="ident" id="3788544"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span>&nbsp;<span class="op" id="3788548">!=</span>&nbsp;<span class="builtintype" id="3788551">nil</span>&nbsp;<span class="op" id="3788555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788560">if</span>&nbsp;<span class="ident" id="3788563">err</span>&nbsp;<span class="op" id="3788567">:=</span>&nbsp;<span class="ident" id="3788570"><a href="/gostd/path/filepath/path.go.html#3788171">walkFn</a></span><span class="op" id="3788576">(</span><span class="ident" id="3788577"><a href="/gostd/path/filepath/path.go.html#3788475">filename</a></span><span class="op" id="3788585">,</span>&nbsp;<span class="ident" id="3788587"><a href="/gostd/path/filepath/path.go.html#3788506">fileInfo</a></span><span class="op" id="3788595">,</span>&nbsp;<span class="ident" id="3788597"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span><span class="op" id="3788600">)</span><span class="op" id="3788601">;</span>&nbsp;<span class="ident" id="3788603"><a href="/gostd/path/filepath/path.go.html#3788563">err</a></span>&nbsp;<span class="op" id="3788607">!=</span>&nbsp;<span class="builtintype" id="3788610">nil</span>&nbsp;<span class="op" id="3788614">&amp;&amp;</span>&nbsp;<span class="ident" id="3788617"><a href="/gostd/path/filepath/path.go.html#3788563">err</a></span>&nbsp;<span class="op" id="3788621">!=</span>&nbsp;<span class="ident" id="3788624"><a href="/gostd/path/filepath/path.go.html#3787091">SkipDir</a></span>&nbsp;<span class="op" id="3788632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788638">return</span>&nbsp;<span class="ident" id="3788645"><a href="/gostd/path/filepath/path.go.html#3788563">err</a></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788656">}</span>&nbsp;<span class="keyword" id="3788658">else</span>&nbsp;<span class="op" id="3788663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3788668"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span>&nbsp;<span class="op" id="3788672">=</span>&nbsp;<span class="ident" id="3788674"><a href="/gostd/path/filepath/path.go.html#3788135">walk</a></span><span class="op" id="3788678">(</span><span class="ident" id="3788679"><a href="/gostd/path/filepath/path.go.html#3788475">filename</a></span><span class="op" id="3788687">,</span>&nbsp;<span class="ident" id="3788689"><a href="/gostd/path/filepath/path.go.html#3788506">fileInfo</a></span><span class="op" id="3788697">,</span>&nbsp;<span class="ident" id="3788699"><a href="/gostd/path/filepath/path.go.html#3788171">walkFn</a></span><span class="op" id="3788705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788710">if</span>&nbsp;<span class="ident" id="3788713"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span>&nbsp;<span class="op" id="3788717">!=</span>&nbsp;<span class="builtintype" id="3788720">nil</span>&nbsp;<span class="op" id="3788724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788730">if</span>&nbsp;<span class="op" id="3788733">!</span><span class="ident" id="3788734"><a href="/gostd/path/filepath/path.go.html#3788506">fileInfo</a></span><span class="op" id="3788742">.</span><span class="ident" id="3788743"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="3788748">(</span><span class="op" id="3788749">)</span>&nbsp;<span class="op" id="3788751">||</span>&nbsp;<span class="ident" id="3788754"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span>&nbsp;<span class="op" id="3788758">!=</span>&nbsp;<span class="ident" id="3788761"><a href="/gostd/path/filepath/path.go.html#3787091">SkipDir</a></span>&nbsp;<span class="op" id="3788769">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788776">return</span>&nbsp;<span class="ident" id="3788783"><a href="/gostd/path/filepath/path.go.html#3788516">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3788803">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3788806">return</span>&nbsp;<span class="builtintype" id="3788813">nil</span><br>
<span class="lineno"></span><span class="op" id="3788817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3788820">//&nbsp;Walk&nbsp;walks&nbsp;the&nbsp;file&nbsp;tree&nbsp;rooted&nbsp;at&nbsp;root,&nbsp;calling&nbsp;walkFn&nbsp;for&nbsp;each&nbsp;file&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3788896">//&nbsp;directory&nbsp;in&nbsp;the&nbsp;tree,&nbsp;including&nbsp;root.&nbsp;All&nbsp;errors&nbsp;that&nbsp;arise&nbsp;visiting&nbsp;files</span><br>
<span class="lineno">385</span><span class="comment" id="3788975">//&nbsp;and&nbsp;directories&nbsp;are&nbsp;filtered&nbsp;by&nbsp;walkFn.&nbsp;The&nbsp;files&nbsp;are&nbsp;walked&nbsp;in&nbsp;lexical</span><br>
<span class="lineno"></span><span class="comment" id="3789050">//&nbsp;order,&nbsp;which&nbsp;makes&nbsp;the&nbsp;output&nbsp;deterministic&nbsp;but&nbsp;means&nbsp;that&nbsp;for&nbsp;very</span><br>
<span class="lineno"></span><span class="comment" id="3789121">//&nbsp;large&nbsp;directories&nbsp;Walk&nbsp;can&nbsp;be&nbsp;inefficient.</span><br>
<span class="lineno"></span><span class="comment" id="3789167">//&nbsp;Walk&nbsp;does&nbsp;not&nbsp;follow&nbsp;symbolic&nbsp;links.</span><br>
<span class="lineno"></span><span class="keyword" id="3789207">func</span>&nbsp;<span class="ident" id="3789212">Walk</span><span class="op" id="3789216">(</span><span class="ident" id="3789217">root</span>&nbsp;<span class="builtintype" id="3789222">string</span><span class="op" id="3789228">,</span>&nbsp;<span class="ident" id="3789230">walkFn</span>&nbsp;<span class="ident" id="3789237"><a href="/gostd/path/filepath/path.go.html#3787984">WalkFunc</a></span><span class="op" id="3789245">)</span>&nbsp;<span class="builtintype" id="3789247">error</span>&nbsp;<span class="op" id="3789253">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789256">info</span><span class="op" id="3789260">,</span>&nbsp;<span class="ident" id="3789262">err</span>&nbsp;<span class="op" id="3789266">:=</span>&nbsp;<span class="ident" id="3789269"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3789271">.</span><span class="ident" id="3789272"><a href="/gostd/os/file_unix.go.html#2455973">Lstat</a></span><span class="op" id="3789277">(</span><span class="ident" id="3789278"><a href="/gostd/path/filepath/path.go.html#3789217">root</a></span><span class="op" id="3789282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789285">if</span>&nbsp;<span class="ident" id="3789288"><a href="/gostd/path/filepath/path.go.html#3789262">err</a></span>&nbsp;<span class="op" id="3789292">!=</span>&nbsp;<span class="builtintype" id="3789295">nil</span>&nbsp;<span class="op" id="3789299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789303">return</span>&nbsp;<span class="ident" id="3789310"><a href="/gostd/path/filepath/path.go.html#3789230">walkFn</a></span><span class="op" id="3789316">(</span><span class="ident" id="3789317"><a href="/gostd/path/filepath/path.go.html#3789217">root</a></span><span class="op" id="3789321">,</span>&nbsp;<span class="builtintype" id="3789323">nil</span><span class="op" id="3789326">,</span>&nbsp;<span class="ident" id="3789328"><a href="/gostd/path/filepath/path.go.html#3789262">err</a></span><span class="op" id="3789331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789337">return</span>&nbsp;<span class="ident" id="3789344"><a href="/gostd/path/filepath/path.go.html#3788135">walk</a></span><span class="op" id="3789348">(</span><span class="ident" id="3789349"><a href="/gostd/path/filepath/path.go.html#3789217">root</a></span><span class="op" id="3789353">,</span>&nbsp;<span class="ident" id="3789355"><a href="/gostd/path/filepath/path.go.html#3789256">info</a></span><span class="op" id="3789359">,</span>&nbsp;<span class="ident" id="3789361"><a href="/gostd/path/filepath/path.go.html#3789230">walkFn</a></span><span class="op" id="3789367">)</span><br>
<span class="lineno">395</span><span class="op" id="3789369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3789372">//&nbsp;readDirNames&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3789437">//&nbsp;a&nbsp;sorted&nbsp;list&nbsp;of&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno"></span><span class="keyword" id="3789476">func</span>&nbsp;<span class="ident" id="3789481">readDirNames</span><span class="op" id="3789493">(</span><span class="ident" id="3789494">dirname</span>&nbsp;<span class="builtintype" id="3789502">string</span><span class="op" id="3789508">)</span>&nbsp;<span class="op" id="3789510">(</span><span class="op" id="3789511">[</span><span class="op" id="3789512">]</span><span class="builtintype" id="3789513">string</span><span class="op" id="3789519">,</span>&nbsp;<span class="builtintype" id="3789521">error</span><span class="op" id="3789526">)</span>&nbsp;<span class="op" id="3789528">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789531">f</span><span class="op" id="3789532">,</span>&nbsp;<span class="ident" id="3789534">err</span>&nbsp;<span class="op" id="3789538">:=</span>&nbsp;<span class="ident" id="3789541"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3789543">.</span><span class="ident" id="3789544"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="3789548">(</span><span class="ident" id="3789549"><a href="/gostd/path/filepath/path.go.html#3789494">dirname</a></span><span class="op" id="3789556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789559">if</span>&nbsp;<span class="ident" id="3789562"><a href="/gostd/path/filepath/path.go.html#3789534">err</a></span>&nbsp;<span class="op" id="3789566">!=</span>&nbsp;<span class="builtintype" id="3789569">nil</span>&nbsp;<span class="op" id="3789573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789577">return</span>&nbsp;<span class="builtintype" id="3789584">nil</span><span class="op" id="3789587">,</span>&nbsp;<span class="ident" id="3789589"><a href="/gostd/path/filepath/path.go.html#3789534">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789597">names</span><span class="op" id="3789602">,</span>&nbsp;<span class="ident" id="3789604"><a href="/gostd/path/filepath/path.go.html#3789534">err</a></span>&nbsp;<span class="op" id="3789608">:=</span>&nbsp;<span class="ident" id="3789611"><a href="/gostd/path/filepath/path.go.html#3789531">f</a></span><span class="op" id="3789612">.</span><span class="ident" id="3789613"><a href="/gostd/os/doc.go.html#2427225">Readdirnames</a></span><span class="op" id="3789625">(</span><span class="op" id="3789626">-</span><span class="num" id="3789627">1</span><span class="op" id="3789628">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789631"><a href="/gostd/path/filepath/path.go.html#3789531">f</a></span><span class="op" id="3789632">.</span><span class="ident" id="3789633"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="3789638">(</span><span class="op" id="3789639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789642">if</span>&nbsp;<span class="ident" id="3789645"><a href="/gostd/path/filepath/path.go.html#3789534">err</a></span>&nbsp;<span class="op" id="3789649">!=</span>&nbsp;<span class="builtintype" id="3789652">nil</span>&nbsp;<span class="op" id="3789656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789660">return</span>&nbsp;<span class="builtintype" id="3789667">nil</span><span class="op" id="3789670">,</span>&nbsp;<span class="ident" id="3789672"><a href="/gostd/path/filepath/path.go.html#3789534">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3789677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3789680"><a href="/gostd/path/filepath/path.go.html#3778454">sort</a></span><span class="op" id="3789684">.</span><span class="ident" id="3789685"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="3789692">(</span><span class="ident" id="3789693"><a href="/gostd/path/filepath/path.go.html#3789597">names</a></span><span class="op" id="3789698">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789701">return</span>&nbsp;<span class="ident" id="3789708"><a href="/gostd/path/filepath/path.go.html#3789597">names</a></span><span class="op" id="3789713">,</span>&nbsp;<span class="builtintype" id="3789715">nil</span><br>
<span class="lineno"></span><span class="op" id="3789719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3789722">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3789764">//&nbsp;Trailing&nbsp;path&nbsp;separators&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno">415</span><span class="comment" id="3789840">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3789883">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;separators,&nbsp;Base&nbsp;returns&nbsp;a&nbsp;single&nbsp;separator.</span><br>
<span class="lineno"></span><span class="keyword" id="3789964">func</span>&nbsp;<span class="ident" id="3789969">Base</span><span class="op" id="3789973">(</span><span class="ident" id="3789974">path</span>&nbsp;<span class="builtintype" id="3789979">string</span><span class="op" id="3789985">)</span>&nbsp;<span class="builtintype" id="3789987">string</span>&nbsp;<span class="op" id="3789994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3789997">if</span>&nbsp;<span class="ident" id="3790000"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span>&nbsp;<span class="op" id="3790005">==</span>&nbsp;<span class="string" id="3790008">&#34;&#34;</span>&nbsp;<span class="op" id="3790011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790015">return</span>&nbsp;<span class="string" id="3790022">&#34;.&#34;</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3790030">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790058">for</span>&nbsp;<span class="builtinfunc" id="3790062">len</span><span class="op" id="3790065">(</span><span class="ident" id="3790066"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790070">)</span>&nbsp;<span class="op" id="3790072">&gt;</span>&nbsp;<span class="num" id="3790074">0</span>&nbsp;<span class="op" id="3790076">&amp;&amp;</span>&nbsp;<span class="ident" id="3790079"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3790081">.</span><span class="ident" id="3790082"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3790097">(</span><span class="ident" id="3790098"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790102">[</span><span class="builtinfunc" id="3790103">len</span><span class="op" id="3790106">(</span><span class="ident" id="3790107"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790111">)</span><span class="op" id="3790112">-</span><span class="num" id="3790113">1</span><span class="op" id="3790114">]</span><span class="op" id="3790115">)</span>&nbsp;<span class="op" id="3790117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790121"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span>&nbsp;<span class="op" id="3790126">=</span>&nbsp;<span class="ident" id="3790128"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790132">[</span><span class="num" id="3790133">0</span>&nbsp;<span class="op" id="3790135">:</span>&nbsp;<span class="builtinfunc" id="3790137">len</span><span class="op" id="3790140">(</span><span class="ident" id="3790141"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790145">)</span><span class="op" id="3790146">-</span><span class="num" id="3790147">1</span><span class="op" id="3790148">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790151">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3790154">//&nbsp;Throw&nbsp;away&nbsp;volume&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790181"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span>&nbsp;<span class="op" id="3790186">=</span>&nbsp;<span class="ident" id="3790188"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790192">[</span><span class="builtinfunc" id="3790193">len</span><span class="op" id="3790196">(</span><span class="ident" id="3790197"><a href="/gostd/path/filepath/path.go.html#3791223">VolumeName</a></span><span class="op" id="3790207">(</span><span class="ident" id="3790208"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790212">)</span><span class="op" id="3790213">)</span><span class="op" id="3790214">:</span><span class="op" id="3790215">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3790218">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790244">i</span>&nbsp;<span class="op" id="3790246">:=</span>&nbsp;<span class="builtinfunc" id="3790249">len</span><span class="op" id="3790252">(</span><span class="ident" id="3790253"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790257">)</span>&nbsp;<span class="op" id="3790259">-</span>&nbsp;<span class="num" id="3790261">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790264">for</span>&nbsp;<span class="ident" id="3790268"><a href="/gostd/path/filepath/path.go.html#3790244">i</a></span>&nbsp;<span class="op" id="3790270">&gt;=</span>&nbsp;<span class="num" id="3790273">0</span>&nbsp;<span class="op" id="3790275">&amp;&amp;</span>&nbsp;<span class="op" id="3790278">!</span><span class="ident" id="3790279"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3790281">.</span><span class="ident" id="3790282"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3790297">(</span><span class="ident" id="3790298"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790302">[</span><span class="ident" id="3790303"><a href="/gostd/path/filepath/path.go.html#3790244">i</a></span><span class="op" id="3790304">]</span><span class="op" id="3790305">)</span>&nbsp;<span class="op" id="3790307">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790311"><a href="/gostd/path/filepath/path.go.html#3790244">i</a></span><span class="op" id="3790312">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790319">if</span>&nbsp;<span class="ident" id="3790322"><a href="/gostd/path/filepath/path.go.html#3790244">i</a></span>&nbsp;<span class="op" id="3790324">&gt;=</span>&nbsp;<span class="num" id="3790327">0</span>&nbsp;<span class="op" id="3790329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790333"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span>&nbsp;<span class="op" id="3790338">=</span>&nbsp;<span class="ident" id="3790340"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><span class="op" id="3790344">[</span><span class="ident" id="3790345"><a href="/gostd/path/filepath/path.go.html#3790244">i</a></span><span class="op" id="3790346">+</span><span class="num" id="3790347">1</span><span class="op" id="3790348">:</span><span class="op" id="3790349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790352">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3790355">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790394">if</span>&nbsp;<span class="ident" id="3790397"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span>&nbsp;<span class="op" id="3790402">==</span>&nbsp;<span class="string" id="3790405">&#34;&#34;</span>&nbsp;<span class="op" id="3790408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790412">return</span>&nbsp;<span class="builtintype" id="3790419">string</span><span class="op" id="3790425">(</span><span class="ident" id="3790426"><a href="/gostd/path/filepath/path.go.html#3779295">Separator</a></span><span class="op" id="3790435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790441">return</span>&nbsp;<span class="ident" id="3790448"><a href="/gostd/path/filepath/path.go.html#3789974">path</a></span><br>
<span class="lineno">440</span><span class="op" id="3790453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3790456">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3790537">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3790607">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno">445</span><span class="comment" id="3790631">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3790673">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;separators,&nbsp;Dir&nbsp;returns&nbsp;a&nbsp;single&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3790753">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a&nbsp;separator&nbsp;unless&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="3790835">func</span>&nbsp;<span class="ident" id="3790840">Dir</span><span class="op" id="3790843">(</span><span class="ident" id="3790844">path</span>&nbsp;<span class="builtintype" id="3790849">string</span><span class="op" id="3790855">)</span>&nbsp;<span class="builtintype" id="3790857">string</span>&nbsp;<span class="op" id="3790864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790867">vol</span>&nbsp;<span class="op" id="3790871">:=</span>&nbsp;<span class="ident" id="3790874"><a href="/gostd/path/filepath/path.go.html#3791223">VolumeName</a></span><span class="op" id="3790884">(</span><span class="ident" id="3790885"><a href="/gostd/path/filepath/path.go.html#3790844">path</a></span><span class="op" id="3790889">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790892">i</span>&nbsp;<span class="op" id="3790894">:=</span>&nbsp;<span class="builtinfunc" id="3790897">len</span><span class="op" id="3790900">(</span><span class="ident" id="3790901"><a href="/gostd/path/filepath/path.go.html#3790844">path</a></span><span class="op" id="3790905">)</span>&nbsp;<span class="op" id="3790907">-</span>&nbsp;<span class="num" id="3790909">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3790912">for</span>&nbsp;<span class="ident" id="3790916"><a href="/gostd/path/filepath/path.go.html#3790892">i</a></span>&nbsp;<span class="op" id="3790918">&gt;=</span>&nbsp;<span class="builtinfunc" id="3790921">len</span><span class="op" id="3790924">(</span><span class="ident" id="3790925"><a href="/gostd/path/filepath/path.go.html#3790867">vol</a></span><span class="op" id="3790928">)</span>&nbsp;<span class="op" id="3790930">&amp;&amp;</span>&nbsp;<span class="op" id="3790933">!</span><span class="ident" id="3790934"><a href="/gostd/path/filepath/path.go.html#3778448">os</a></span><span class="op" id="3790936">.</span><span class="ident" id="3790937"><a href="/gostd/os/path_unix.go.html#2467380">IsPathSeparator</a></span><span class="op" id="3790952">(</span><span class="ident" id="3790953"><a href="/gostd/path/filepath/path.go.html#3790844">path</a></span><span class="op" id="3790957">[</span><span class="ident" id="3790958"><a href="/gostd/path/filepath/path.go.html#3790892">i</a></span><span class="op" id="3790959">]</span><span class="op" id="3790960">)</span>&nbsp;<span class="op" id="3790962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790966"><a href="/gostd/path/filepath/path.go.html#3790892">i</a></span><span class="op" id="3790967">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3790971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3790974">dir</span>&nbsp;<span class="op" id="3790978">:=</span>&nbsp;<span class="ident" id="3790981"><a href="/gostd/path/filepath/path.go.html#3780312">Clean</a></span><span class="op" id="3790986">(</span><span class="ident" id="3790987"><a href="/gostd/path/filepath/path.go.html#3790844">path</a></span><span class="op" id="3790991">[</span><span class="builtinfunc" id="3790992">len</span><span class="op" id="3790995">(</span><span class="ident" id="3790996"><a href="/gostd/path/filepath/path.go.html#3790867">vol</a></span><span class="op" id="3790999">)</span>&nbsp;<span class="op" id="3791001">:</span>&nbsp;<span class="ident" id="3791003"><a href="/gostd/path/filepath/path.go.html#3790892">i</a></span><span class="op" id="3791004">+</span><span class="num" id="3791005">1</span><span class="op" id="3791006">]</span><span class="op" id="3791007">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791010">return</span>&nbsp;<span class="ident" id="3791017"><a href="/gostd/path/filepath/path.go.html#3790867">vol</a></span>&nbsp;<span class="op" id="3791021">+</span>&nbsp;<span class="ident" id="3791023"><a href="/gostd/path/filepath/path.go.html#3790974">dir</a></span><br>
<span class="lineno"></span><span class="op" id="3791027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3791030">//&nbsp;VolumeName&nbsp;returns&nbsp;leading&nbsp;volume&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="3791073">//&nbsp;Given&nbsp;&#34;C:\foo\bar&#34;&nbsp;it&nbsp;returns&nbsp;&#34;C:&#34;&nbsp;under&nbsp;windows.</span><br>
<span class="lineno">460</span><span class="comment" id="3791126">//&nbsp;Given&nbsp;&#34;\\host\share\foo&#34;&nbsp;it&nbsp;returns&nbsp;&#34;\\host\share&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3791181">//&nbsp;On&nbsp;other&nbsp;platforms&nbsp;it&nbsp;returns&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3791218">func</span>&nbsp;<span class="ident" id="3791223">VolumeName</span><span class="op" id="3791233">(</span><span class="ident" id="3791234">path</span>&nbsp;<span class="builtintype" id="3791239">string</span><span class="op" id="3791245">)</span>&nbsp;<span class="op" id="3791247">(</span><span class="ident" id="3791248">v</span>&nbsp;<span class="builtintype" id="3791250">string</span><span class="op" id="3791256">)</span>&nbsp;<span class="op" id="3791258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3791261">return</span>&nbsp;<span class="ident" id="3791268"><a href="/gostd/path/filepath/path.go.html#3791234">path</a></span><span class="op" id="3791272">[</span><span class="op" id="3791273">:</span><span class="ident" id="3791274"><a href="/gostd/path/filepath/path_unix.go.html#3791785">volumeNameLen</a></span><span class="op" id="3791287">(</span><span class="ident" id="3791288"><a href="/gostd/path/filepath/path.go.html#3791234">path</a></span><span class="op" id="3791292">)</span><span class="op" id="3791293">]</span><br>
<span class="lineno"></span><span class="op" id="3791295">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
