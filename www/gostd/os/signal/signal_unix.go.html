<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5867755">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5867810">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5867864">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5867915">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5867993">package</span>&nbsp;<span class="ident" id="5868001">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5868009">import</span>&nbsp;<span class="op" id="5868016">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5868019">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5868025">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="5868035">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5868038">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="5868054">func</span>&nbsp;<span class="ident" id="5868059">signal_disable</span><span class="op" id="5868073">(</span><span class="builtintype" id="5868074">uint32</span><span class="op" id="5868080">)</span><br>
<span class="lineno"></span><span class="keyword" id="5868082">func</span>&nbsp;<span class="ident" id="5868087">signal_enable</span><span class="op" id="5868100">(</span><span class="builtintype" id="5868101">uint32</span><span class="op" id="5868107">)</span><br>
<span class="lineno"></span><span class="keyword" id="5868109">func</span>&nbsp;<span class="ident" id="5868114">signal_recv</span><span class="op" id="5868125">(</span><span class="op" id="5868126">)</span>&nbsp;<span class="builtintype" id="5868128">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5868136">func</span>&nbsp;<span class="ident" id="5868141">loop</span><span class="op" id="5868145">(</span><span class="op" id="5868146">)</span>&nbsp;<span class="op" id="5868148">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868151">for</span>&nbsp;<span class="op" id="5868155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868159">process</span><span class="op" id="5868166">(</span><span class="ident" id="5868167">syscall</span><span class="op" id="5868174">.</span><span class="ident" id="5868175">Signal</span><span class="op" id="5868181">(</span><span class="ident" id="5868182">signal_recv</span><span class="op" id="5868193">(</span><span class="op" id="5868194">)</span><span class="op" id="5868195">)</span><span class="op" id="5868196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5868199">}</span><br>
<span class="lineno"></span><span class="op" id="5868201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5868204">func</span>&nbsp;<span class="ident" id="5868209">init</span><span class="op" id="5868213">(</span><span class="op" id="5868214">)</span>&nbsp;<span class="op" id="5868216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868219">signal_enable</span><span class="op" id="5868232">(</span><span class="num" id="5868233">0</span><span class="op" id="5868234">)</span>&nbsp;<span class="comment" id="5868236">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868264">go</span>&nbsp;<span class="ident" id="5868267">loop</span><span class="op" id="5868271">(</span><span class="op" id="5868272">)</span><br>
<span class="lineno"></span><span class="op" id="5868274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5868277">const</span>&nbsp;<span class="op" id="5868283">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868286">numSig</span>&nbsp;<span class="op" id="5868293">=</span>&nbsp;<span class="num" id="5868295">65</span>&nbsp;<span class="comment" id="5868298">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="5868324">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5868327">func</span>&nbsp;<span class="ident" id="5868332">signum</span><span class="op" id="5868338">(</span><span class="ident" id="5868339">sig</span>&nbsp;<span class="ident" id="5868343">os</span><span class="op" id="5868345">.</span><span class="ident" id="5868346">Signal</span><span class="op" id="5868352">)</span>&nbsp;<span class="builtintype" id="5868354">int</span>&nbsp;<span class="op" id="5868358">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868361">switch</span>&nbsp;<span class="ident" id="5868368">sig</span>&nbsp;<span class="op" id="5868372">:=</span>&nbsp;<span class="ident" id="5868375">sig</span><span class="op" id="5868378">.</span><span class="op" id="5868379">(</span><span class="keyword" id="5868380">type</span><span class="op" id="5868384">)</span>&nbsp;<span class="op" id="5868386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868389">case</span>&nbsp;<span class="ident" id="5868394">syscall</span><span class="op" id="5868401">.</span><span class="ident" id="5868402">Signal</span><span class="op" id="5868408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868412">i</span>&nbsp;<span class="op" id="5868414">:=</span>&nbsp;<span class="builtintype" id="5868417">int</span><span class="op" id="5868420">(</span><span class="ident" id="5868421">sig</span><span class="op" id="5868424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868428">if</span>&nbsp;<span class="ident" id="5868431">i</span>&nbsp;<span class="op" id="5868433">&lt;</span>&nbsp;<span class="num" id="5868435">0</span>&nbsp;<span class="op" id="5868437">||</span>&nbsp;<span class="ident" id="5868440">i</span>&nbsp;<span class="op" id="5868442">&gt;=</span>&nbsp;<span class="ident" id="5868445">numSig</span>&nbsp;<span class="op" id="5868452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868457">return</span>&nbsp;<span class="op" id="5868464">-</span><span class="num" id="5868465">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5868469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868473">return</span>&nbsp;<span class="ident" id="5868480">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868483">default</span><span class="op" id="5868490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5868494">return</span>&nbsp;<span class="op" id="5868501">-</span><span class="num" id="5868502">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5868505">}</span><br>
<span class="lineno">45</span><span class="op" id="5868507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5868510">func</span>&nbsp;<span class="ident" id="5868515">enableSignal</span><span class="op" id="5868527">(</span><span class="ident" id="5868528">sig</span>&nbsp;<span class="builtintype" id="5868532">int</span><span class="op" id="5868535">)</span>&nbsp;<span class="op" id="5868537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868540">signal_enable</span><span class="op" id="5868553">(</span><span class="builtintype" id="5868554">uint32</span><span class="op" id="5868560">(</span><span class="ident" id="5868561">sig</span><span class="op" id="5868564">)</span><span class="op" id="5868565">)</span><br>
<span class="lineno"></span><span class="op" id="5868567">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5868570">func</span>&nbsp;<span class="ident" id="5868575">disableSignal</span><span class="op" id="5868588">(</span><span class="ident" id="5868589">sig</span>&nbsp;<span class="builtintype" id="5868593">int</span><span class="op" id="5868596">)</span>&nbsp;<span class="op" id="5868598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5868601">signal_disable</span><span class="op" id="5868615">(</span><span class="builtintype" id="5868616">uint32</span><span class="op" id="5868622">(</span><span class="ident" id="5868623">sig</span><span class="op" id="5868626">)</span><span class="op" id="5868627">)</span><br>
<span class="lineno"></span><span class="op" id="5868629">}</span>
</div>
</body>
</html>
