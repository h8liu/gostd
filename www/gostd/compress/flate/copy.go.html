<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/flate</h2>
<ul>
<li><a href="/gostd/compress/flate/copy.go.html" class="current">copy.go</a></li>
<li><a href="/gostd/compress/flate/copy_test.go.html">copy_test.go</a></li>
<li><a href="/gostd/compress/flate/deflate.go.html">deflate.go</a></li>
<li><a href="/gostd/compress/flate/deflate_test.go.html">deflate_test.go</a></li>
<li><a href="/gostd/compress/flate/fixedhuff.go.html">fixedhuff.go</a></li>
<li><a href="/gostd/compress/flate/flate_test.go.html">flate_test.go</a></li>
<li><a href="/gostd/compress/flate/huffman_bit_writer.go.html">huffman_bit_writer.go</a></li>
<li><a href="/gostd/compress/flate/huffman_code.go.html">huffman_code.go</a></li>
<li><a href="/gostd/compress/flate/inflate.go.html">inflate.go</a></li>
<li><a href="/gostd/compress/flate/inflate_test.go.html">inflate_test.go</a></li>
<li><a href="/gostd/compress/flate/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/flate/reverse_bits.go.html">reverse_bits.go</a></li>
<li><a href="/gostd/compress/flate/token.go.html">token.go</a></li>
<li><a href="/gostd/compress/flate/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4773621">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4773676">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4773730">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4773781">package</span>&nbsp;<span class="ident" id="4773789">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4773796">//&nbsp;forwardCopy&nbsp;is&nbsp;like&nbsp;the&nbsp;built-in&nbsp;copy&nbsp;function&nbsp;except&nbsp;that&nbsp;it&nbsp;always&nbsp;goes</span><br>
<span class="lineno"></span><span class="comment" id="4773873">//&nbsp;forward&nbsp;from&nbsp;the&nbsp;start,&nbsp;even&nbsp;if&nbsp;the&nbsp;dst&nbsp;and&nbsp;src&nbsp;overlap.</span><br>
<span class="lineno"></span><span class="comment" id="4773933">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno">10</span><span class="comment" id="4773957">//&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;n;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4773987">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mem[dst+i]&nbsp;=&nbsp;mem[src+i]</span><br>
<span class="lineno"></span><span class="comment" id="4774018">//&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="keyword" id="4774025">func</span>&nbsp;<span class="ident" id="4774030">forwardCopy</span><span class="op" id="4774041">(</span><span class="ident" id="4774042">mem</span>&nbsp;<span class="op" id="4774046">[</span><span class="op" id="4774047">]</span><span class="builtintype" id="4774048">byte</span><span class="op" id="4774052">,</span>&nbsp;<span class="ident" id="4774054">dst</span><span class="op" id="4774057">,</span>&nbsp;<span class="ident" id="4774059">src</span><span class="op" id="4774062">,</span>&nbsp;<span class="ident" id="4774064">n</span>&nbsp;<span class="builtintype" id="4774066">int</span><span class="op" id="4774069">)</span>&nbsp;<span class="op" id="4774071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774074">if</span>&nbsp;<span class="ident" id="4774077">dst</span>&nbsp;<span class="op" id="4774081">&lt;=</span>&nbsp;<span class="ident" id="4774084">src</span>&nbsp;<span class="op" id="4774088">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4774092">copy</span><span class="op" id="4774096">(</span><span class="ident" id="4774097">mem</span><span class="op" id="4774100">[</span><span class="ident" id="4774101">dst</span><span class="op" id="4774104">:</span><span class="ident" id="4774105">dst</span><span class="op" id="4774108">+</span><span class="ident" id="4774109">n</span><span class="op" id="4774110">]</span><span class="op" id="4774111">,</span>&nbsp;<span class="ident" id="4774113">mem</span><span class="op" id="4774116">[</span><span class="ident" id="4774117">src</span><span class="op" id="4774120">:</span><span class="ident" id="4774121">src</span><span class="op" id="4774124">+</span><span class="ident" id="4774125">n</span><span class="op" id="4774126">]</span><span class="op" id="4774127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774131">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774142">for</span>&nbsp;<span class="op" id="4774146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774150">if</span>&nbsp;<span class="ident" id="4774153">dst</span>&nbsp;<span class="op" id="4774157">&gt;=</span>&nbsp;<span class="ident" id="4774160">src</span><span class="op" id="4774163">+</span><span class="ident" id="4774164">n</span>&nbsp;<span class="op" id="4774166">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4774171">copy</span><span class="op" id="4774175">(</span><span class="ident" id="4774176">mem</span><span class="op" id="4774179">[</span><span class="ident" id="4774180">dst</span><span class="op" id="4774183">:</span><span class="ident" id="4774184">dst</span><span class="op" id="4774187">+</span><span class="ident" id="4774188">n</span><span class="op" id="4774189">]</span><span class="op" id="4774190">,</span>&nbsp;<span class="ident" id="4774192">mem</span><span class="op" id="4774195">[</span><span class="ident" id="4774196">src</span><span class="op" id="4774199">:</span><span class="ident" id="4774200">src</span><span class="op" id="4774203">+</span><span class="ident" id="4774204">n</span><span class="op" id="4774205">]</span><span class="op" id="4774206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4774211">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774224">//&nbsp;There&nbsp;is&nbsp;some&nbsp;forward&nbsp;overlap.&nbsp;&nbsp;The&nbsp;destination</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774277">//&nbsp;will&nbsp;be&nbsp;filled&nbsp;with&nbsp;a&nbsp;repeated&nbsp;pattern&nbsp;of&nbsp;mem[src:src+k].</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774340">//&nbsp;We&nbsp;copy&nbsp;one&nbsp;instance&nbsp;of&nbsp;the&nbsp;pattern&nbsp;here,&nbsp;then&nbsp;repeat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4774400">//&nbsp;Each&nbsp;time&nbsp;around&nbsp;this&nbsp;loop&nbsp;k&nbsp;will&nbsp;double.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774447">k</span>&nbsp;<span class="op" id="4774449">:=</span>&nbsp;<span class="ident" id="4774452">dst</span>&nbsp;<span class="op" id="4774456">-</span>&nbsp;<span class="ident" id="4774458">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4774464">copy</span><span class="op" id="4774468">(</span><span class="ident" id="4774469">mem</span><span class="op" id="4774472">[</span><span class="ident" id="4774473">dst</span><span class="op" id="4774476">:</span><span class="ident" id="4774477">dst</span><span class="op" id="4774480">+</span><span class="ident" id="4774481">k</span><span class="op" id="4774482">]</span><span class="op" id="4774483">,</span>&nbsp;<span class="ident" id="4774485">mem</span><span class="op" id="4774488">[</span><span class="ident" id="4774489">src</span><span class="op" id="4774492">:</span><span class="ident" id="4774493">src</span><span class="op" id="4774496">+</span><span class="ident" id="4774497">k</span><span class="op" id="4774498">]</span><span class="op" id="4774499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774503">n</span>&nbsp;<span class="op" id="4774505">-=</span>&nbsp;<span class="ident" id="4774508">k</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4774512">dst</span>&nbsp;<span class="op" id="4774516">+=</span>&nbsp;<span class="ident" id="4774519">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4774522">}</span><br>
<span class="lineno"></span><span class="op" id="4774524">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
