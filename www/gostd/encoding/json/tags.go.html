<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3774496">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3774551">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3774605">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3774656">package</span>&nbsp;<span class="ident" id="3774664">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3774670">import</span>&nbsp;<span class="op" id="3774677">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3774680">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3774690">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3774693">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3774766">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="3774834">type</span>&nbsp;<span class="ident" id="3774839">tagOptions</span>&nbsp;<span class="builtintype" id="3774850">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3774858">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3774921">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="3774949">func</span>&nbsp;<span class="ident" id="3774954">parseTag</span><span class="op" id="3774962">(</span><span class="ident" id="3774963">tag</span>&nbsp;<span class="builtintype" id="3774967">string</span><span class="op" id="3774973">)</span>&nbsp;<span class="op" id="3774975">(</span><span class="builtintype" id="3774976">string</span><span class="op" id="3774982">,</span>&nbsp;<span class="ident" id="3774984">tagOptions</span><span class="op" id="3774994">)</span>&nbsp;<span class="op" id="3774996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3774999">if</span>&nbsp;<span class="ident" id="3775002">idx</span>&nbsp;<span class="op" id="3775006">:=</span>&nbsp;<span class="ident" id="3775009">strings</span><span class="op" id="3775016">.</span><span class="ident" id="3775017">Index</span><span class="op" id="3775022">(</span><span class="ident" id="3775023">tag</span><span class="op" id="3775026">,</span>&nbsp;<span class="string" id="3775028">&#34;,&#34;</span><span class="op" id="3775031">)</span><span class="op" id="3775032">;</span>&nbsp;<span class="ident" id="3775034">idx</span>&nbsp;<span class="op" id="3775038">!=</span>&nbsp;<span class="op" id="3775041">-</span><span class="num" id="3775042">1</span>&nbsp;<span class="op" id="3775044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775048">return</span>&nbsp;<span class="ident" id="3775055">tag</span><span class="op" id="3775058">[</span><span class="op" id="3775059">:</span><span class="ident" id="3775060">idx</span><span class="op" id="3775063">]</span><span class="op" id="3775064">,</span>&nbsp;<span class="ident" id="3775066">tagOptions</span><span class="op" id="3775076">(</span><span class="ident" id="3775077">tag</span><span class="op" id="3775080">[</span><span class="ident" id="3775081">idx</span><span class="op" id="3775084">+</span><span class="num" id="3775085">1</span><span class="op" id="3775086">:</span><span class="op" id="3775087">]</span><span class="op" id="3775088">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3775091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775094">return</span>&nbsp;<span class="ident" id="3775101">tag</span><span class="op" id="3775104">,</span>&nbsp;<span class="ident" id="3775106">tagOptions</span><span class="op" id="3775116">(</span><span class="string" id="3775117">&#34;&#34;</span><span class="op" id="3775119">)</span><br>
<span class="lineno"></span><span class="op" id="3775121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3775124">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="3775186">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3775255">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="3775285">func</span>&nbsp;<span class="op" id="3775290">(</span><span class="ident" id="3775291">o</span>&nbsp;<span class="ident" id="3775293">tagOptions</span><span class="op" id="3775303">)</span>&nbsp;<span class="ident" id="3775305">Contains</span><span class="op" id="3775313">(</span><span class="ident" id="3775314">optionName</span>&nbsp;<span class="builtintype" id="3775325">string</span><span class="op" id="3775331">)</span>&nbsp;<span class="builtintype" id="3775333">bool</span>&nbsp;<span class="op" id="3775338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775341">if</span>&nbsp;<span class="builtinfunc" id="3775344">len</span><span class="op" id="3775347">(</span><span class="ident" id="3775348">o</span><span class="op" id="3775349">)</span>&nbsp;<span class="op" id="3775351">==</span>&nbsp;<span class="num" id="3775354">0</span>&nbsp;<span class="op" id="3775356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775360">return</span>&nbsp;<span class="builtintype" id="3775367">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3775374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3775377">s</span>&nbsp;<span class="op" id="3775379">:=</span>&nbsp;<span class="builtintype" id="3775382">string</span><span class="op" id="3775388">(</span><span class="ident" id="3775389">o</span><span class="op" id="3775390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775393">for</span>&nbsp;<span class="ident" id="3775397">s</span>&nbsp;<span class="op" id="3775399">!=</span>&nbsp;<span class="string" id="3775402">&#34;&#34;</span>&nbsp;<span class="op" id="3775405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775409">var</span>&nbsp;<span class="ident" id="3775413">next</span>&nbsp;<span class="builtintype" id="3775418">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3775427">i</span>&nbsp;<span class="op" id="3775429">:=</span>&nbsp;<span class="ident" id="3775432">strings</span><span class="op" id="3775439">.</span><span class="ident" id="3775440">Index</span><span class="op" id="3775445">(</span><span class="ident" id="3775446">s</span><span class="op" id="3775447">,</span>&nbsp;<span class="string" id="3775449">&#34;,&#34;</span><span class="op" id="3775452">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775456">if</span>&nbsp;<span class="ident" id="3775459">i</span>&nbsp;<span class="op" id="3775461">&gt;=</span>&nbsp;<span class="num" id="3775464">0</span>&nbsp;<span class="op" id="3775466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3775471">s</span><span class="op" id="3775472">,</span>&nbsp;<span class="ident" id="3775474">next</span>&nbsp;<span class="op" id="3775479">=</span>&nbsp;<span class="ident" id="3775481">s</span><span class="op" id="3775482">[</span><span class="op" id="3775483">:</span><span class="ident" id="3775484">i</span><span class="op" id="3775485">]</span><span class="op" id="3775486">,</span>&nbsp;<span class="ident" id="3775488">s</span><span class="op" id="3775489">[</span><span class="ident" id="3775490">i</span><span class="op" id="3775491">+</span><span class="num" id="3775492">1</span><span class="op" id="3775493">:</span><span class="op" id="3775494">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3775498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775502">if</span>&nbsp;<span class="ident" id="3775505">s</span>&nbsp;<span class="op" id="3775507">==</span>&nbsp;<span class="ident" id="3775510">optionName</span>&nbsp;<span class="op" id="3775521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775526">return</span>&nbsp;<span class="builtintype" id="3775533">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3775540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3775544">s</span>&nbsp;<span class="op" id="3775546">=</span>&nbsp;<span class="ident" id="3775548">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3775554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3775557">return</span>&nbsp;<span class="builtintype" id="3775564">false</span><br>
<span class="lineno"></span><span class="op" id="3775570">}</span>
</div>
</body>
</html>
