<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html" class="current">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8065992">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8066047">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8066101">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8066152">package</span>&nbsp;<span class="ident" id="8066160">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8066168">import</span>&nbsp;<span class="op" id="8066175">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8066178">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8066187">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8066193">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8066203">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8066206">func</span>&nbsp;<span class="ident" id="8066211">testConstant</span><span class="op" id="8066223">(</span><span class="ident" id="8066224">t</span>&nbsp;<span class="op" id="8066226">*</span><span class="ident" id="8066227">testing</span><span class="op" id="8066234">.</span><span class="ident" id="8066235">T</span><span class="op" id="8066236">,</span>&nbsp;<span class="ident" id="8066238">w</span>&nbsp;<span class="builtintype" id="8066240">uint</span><span class="op" id="8066244">,</span>&nbsp;<span class="ident" id="8066246">max</span>&nbsp;<span class="builtintype" id="8066250">int</span><span class="op" id="8066253">)</span>&nbsp;<span class="op" id="8066255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066258">buf</span>&nbsp;<span class="op" id="8066262">:=</span>&nbsp;<span class="builtinfunc" id="8066265">make</span><span class="op" id="8066269">(</span><span class="op" id="8066270">[</span><span class="op" id="8066271">]</span><span class="builtintype" id="8066272">byte</span><span class="op" id="8066276">,</span>&nbsp;<span class="ident" id="8066278">MaxVarintLen64</span><span class="op" id="8066292">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066295">n</span>&nbsp;<span class="op" id="8066297">:=</span>&nbsp;<span class="ident" id="8066300">PutUvarint</span><span class="op" id="8066310">(</span><span class="ident" id="8066311">buf</span><span class="op" id="8066314">,</span>&nbsp;<span class="num" id="8066316">1</span><span class="op" id="8066317">&lt;&lt;</span><span class="ident" id="8066319">w</span><span class="op" id="8066320">-</span><span class="num" id="8066321">1</span><span class="op" id="8066322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8066325">if</span>&nbsp;<span class="ident" id="8066328">n</span>&nbsp;<span class="op" id="8066330">!=</span>&nbsp;<span class="ident" id="8066333">max</span>&nbsp;<span class="op" id="8066337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066341">t</span><span class="op" id="8066342">.</span><span class="ident" id="8066343">Errorf</span><span class="op" id="8066349">(</span><span class="string" id="8066350">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8066380">,</span>&nbsp;<span class="ident" id="8066382">w</span><span class="op" id="8066383">,</span>&nbsp;<span class="ident" id="8066385">max</span><span class="op" id="8066388">,</span>&nbsp;<span class="ident" id="8066390">n</span><span class="op" id="8066391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8066394">}</span><br>
<span class="lineno"></span><span class="op" id="8066396">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8066399">func</span>&nbsp;<span class="ident" id="8066404">TestConstants</span><span class="op" id="8066417">(</span><span class="ident" id="8066418">t</span>&nbsp;<span class="op" id="8066420">*</span><span class="ident" id="8066421">testing</span><span class="op" id="8066428">.</span><span class="ident" id="8066429">T</span><span class="op" id="8066430">)</span>&nbsp;<span class="op" id="8066432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066435">testConstant</span><span class="op" id="8066447">(</span><span class="ident" id="8066448">t</span><span class="op" id="8066449">,</span>&nbsp;<span class="num" id="8066451">16</span><span class="op" id="8066453">,</span>&nbsp;<span class="ident" id="8066455">MaxVarintLen16</span><span class="op" id="8066469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066472">testConstant</span><span class="op" id="8066484">(</span><span class="ident" id="8066485">t</span><span class="op" id="8066486">,</span>&nbsp;<span class="num" id="8066488">32</span><span class="op" id="8066490">,</span>&nbsp;<span class="ident" id="8066492">MaxVarintLen32</span><span class="op" id="8066506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066509">testConstant</span><span class="op" id="8066521">(</span><span class="ident" id="8066522">t</span><span class="op" id="8066523">,</span>&nbsp;<span class="num" id="8066525">64</span><span class="op" id="8066527">,</span>&nbsp;<span class="ident" id="8066529">MaxVarintLen64</span><span class="op" id="8066543">)</span><br>
<span class="lineno">25</span><span class="op" id="8066545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8066548">func</span>&nbsp;<span class="ident" id="8066553">testVarint</span><span class="op" id="8066563">(</span><span class="ident" id="8066564">t</span>&nbsp;<span class="op" id="8066566">*</span><span class="ident" id="8066567">testing</span><span class="op" id="8066574">.</span><span class="ident" id="8066575">T</span><span class="op" id="8066576">,</span>&nbsp;<span class="ident" id="8066578">x</span>&nbsp;<span class="ident" id="8066580">int64</span><span class="op" id="8066585">)</span>&nbsp;<span class="op" id="8066587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066590">buf</span>&nbsp;<span class="op" id="8066594">:=</span>&nbsp;<span class="builtinfunc" id="8066597">make</span><span class="op" id="8066601">(</span><span class="op" id="8066602">[</span><span class="op" id="8066603">]</span><span class="builtintype" id="8066604">byte</span><span class="op" id="8066608">,</span>&nbsp;<span class="ident" id="8066610">MaxVarintLen64</span><span class="op" id="8066624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066627">n</span>&nbsp;<span class="op" id="8066629">:=</span>&nbsp;<span class="ident" id="8066632">PutVarint</span><span class="op" id="8066641">(</span><span class="ident" id="8066642">buf</span><span class="op" id="8066645">,</span>&nbsp;<span class="ident" id="8066647">x</span><span class="op" id="8066648">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066651">y</span><span class="op" id="8066652">,</span>&nbsp;<span class="ident" id="8066654">m</span>&nbsp;<span class="op" id="8066656">:=</span>&nbsp;<span class="ident" id="8066659">Varint</span><span class="op" id="8066665">(</span><span class="ident" id="8066666">buf</span><span class="op" id="8066669">[</span><span class="num" id="8066670">0</span><span class="op" id="8066671">:</span><span class="ident" id="8066672">n</span><span class="op" id="8066673">]</span><span class="op" id="8066674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8066677">if</span>&nbsp;<span class="ident" id="8066680">x</span>&nbsp;<span class="op" id="8066682">!=</span>&nbsp;<span class="ident" id="8066685">y</span>&nbsp;<span class="op" id="8066687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066691">t</span><span class="op" id="8066692">.</span><span class="ident" id="8066693">Errorf</span><span class="op" id="8066699">(</span><span class="string" id="8066700">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8066720">,</span>&nbsp;<span class="ident" id="8066722">x</span><span class="op" id="8066723">,</span>&nbsp;<span class="ident" id="8066725">y</span><span class="op" id="8066726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8066729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8066732">if</span>&nbsp;<span class="ident" id="8066735">n</span>&nbsp;<span class="op" id="8066737">!=</span>&nbsp;<span class="ident" id="8066740">m</span>&nbsp;<span class="op" id="8066742">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066746">t</span><span class="op" id="8066747">.</span><span class="ident" id="8066748">Errorf</span><span class="op" id="8066754">(</span><span class="string" id="8066755">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8066788">,</span>&nbsp;<span class="ident" id="8066790">x</span><span class="op" id="8066791">,</span>&nbsp;<span class="ident" id="8066793">m</span><span class="op" id="8066794">,</span>&nbsp;<span class="ident" id="8066796">n</span><span class="op" id="8066797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8066800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066804">y</span><span class="op" id="8066805">,</span>&nbsp;<span class="ident" id="8066807">err</span>&nbsp;<span class="op" id="8066811">:=</span>&nbsp;<span class="ident" id="8066814">ReadVarint</span><span class="op" id="8066824">(</span><span class="ident" id="8066825">bytes</span><span class="op" id="8066830">.</span><span class="ident" id="8066831">NewReader</span><span class="op" id="8066840">(</span><span class="ident" id="8066841">buf</span><span class="op" id="8066844">)</span><span class="op" id="8066845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8066848">if</span>&nbsp;<span class="ident" id="8066851">err</span>&nbsp;<span class="op" id="8066855">!=</span>&nbsp;<span class="builtintype" id="8066858">nil</span>&nbsp;<span class="op" id="8066862">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066866">t</span><span class="op" id="8066867">.</span><span class="ident" id="8066868">Errorf</span><span class="op" id="8066874">(</span><span class="string" id="8066875">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="8066895">,</span>&nbsp;<span class="ident" id="8066897">x</span><span class="op" id="8066898">,</span>&nbsp;<span class="ident" id="8066900">err</span><span class="op" id="8066903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8066906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8066909">if</span>&nbsp;<span class="ident" id="8066912">x</span>&nbsp;<span class="op" id="8066914">!=</span>&nbsp;<span class="ident" id="8066917">y</span>&nbsp;<span class="op" id="8066919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8066923">t</span><span class="op" id="8066924">.</span><span class="ident" id="8066925">Errorf</span><span class="op" id="8066931">(</span><span class="string" id="8066932">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8066956">,</span>&nbsp;<span class="ident" id="8066958">x</span><span class="op" id="8066959">,</span>&nbsp;<span class="ident" id="8066961">y</span><span class="op" id="8066962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8066965">}</span><br>
<span class="lineno">45</span><span class="op" id="8066967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8066970">func</span>&nbsp;<span class="ident" id="8066975">testUvarint</span><span class="op" id="8066986">(</span><span class="ident" id="8066987">t</span>&nbsp;<span class="op" id="8066989">*</span><span class="ident" id="8066990">testing</span><span class="op" id="8066997">.</span><span class="ident" id="8066998">T</span><span class="op" id="8066999">,</span>&nbsp;<span class="ident" id="8067001">x</span>&nbsp;<span class="ident" id="8067003">uint64</span><span class="op" id="8067009">)</span>&nbsp;<span class="op" id="8067011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067014">buf</span>&nbsp;<span class="op" id="8067018">:=</span>&nbsp;<span class="builtinfunc" id="8067021">make</span><span class="op" id="8067025">(</span><span class="op" id="8067026">[</span><span class="op" id="8067027">]</span><span class="builtintype" id="8067028">byte</span><span class="op" id="8067032">,</span>&nbsp;<span class="ident" id="8067034">MaxVarintLen64</span><span class="op" id="8067048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067051">n</span>&nbsp;<span class="op" id="8067053">:=</span>&nbsp;<span class="ident" id="8067056">PutUvarint</span><span class="op" id="8067066">(</span><span class="ident" id="8067067">buf</span><span class="op" id="8067070">,</span>&nbsp;<span class="ident" id="8067072">x</span><span class="op" id="8067073">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067076">y</span><span class="op" id="8067077">,</span>&nbsp;<span class="ident" id="8067079">m</span>&nbsp;<span class="op" id="8067081">:=</span>&nbsp;<span class="ident" id="8067084">Uvarint</span><span class="op" id="8067091">(</span><span class="ident" id="8067092">buf</span><span class="op" id="8067095">[</span><span class="num" id="8067096">0</span><span class="op" id="8067097">:</span><span class="ident" id="8067098">n</span><span class="op" id="8067099">]</span><span class="op" id="8067100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067103">if</span>&nbsp;<span class="ident" id="8067106">x</span>&nbsp;<span class="op" id="8067108">!=</span>&nbsp;<span class="ident" id="8067111">y</span>&nbsp;<span class="op" id="8067113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067117">t</span><span class="op" id="8067118">.</span><span class="ident" id="8067119">Errorf</span><span class="op" id="8067125">(</span><span class="string" id="8067126">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8067147">,</span>&nbsp;<span class="ident" id="8067149">x</span><span class="op" id="8067150">,</span>&nbsp;<span class="ident" id="8067152">y</span><span class="op" id="8067153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067159">if</span>&nbsp;<span class="ident" id="8067162">n</span>&nbsp;<span class="op" id="8067164">!=</span>&nbsp;<span class="ident" id="8067167">m</span>&nbsp;<span class="op" id="8067169">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067173">t</span><span class="op" id="8067174">.</span><span class="ident" id="8067175">Errorf</span><span class="op" id="8067181">(</span><span class="string" id="8067182">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8067216">,</span>&nbsp;<span class="ident" id="8067218">x</span><span class="op" id="8067219">,</span>&nbsp;<span class="ident" id="8067221">m</span><span class="op" id="8067222">,</span>&nbsp;<span class="ident" id="8067224">n</span><span class="op" id="8067225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067232">y</span><span class="op" id="8067233">,</span>&nbsp;<span class="ident" id="8067235">err</span>&nbsp;<span class="op" id="8067239">:=</span>&nbsp;<span class="ident" id="8067242">ReadUvarint</span><span class="op" id="8067253">(</span><span class="ident" id="8067254">bytes</span><span class="op" id="8067259">.</span><span class="ident" id="8067260">NewReader</span><span class="op" id="8067269">(</span><span class="ident" id="8067270">buf</span><span class="op" id="8067273">)</span><span class="op" id="8067274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067277">if</span>&nbsp;<span class="ident" id="8067280">err</span>&nbsp;<span class="op" id="8067284">!=</span>&nbsp;<span class="builtintype" id="8067287">nil</span>&nbsp;<span class="op" id="8067291">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067295">t</span><span class="op" id="8067296">.</span><span class="ident" id="8067297">Errorf</span><span class="op" id="8067303">(</span><span class="string" id="8067304">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="8067325">,</span>&nbsp;<span class="ident" id="8067327">x</span><span class="op" id="8067328">,</span>&nbsp;<span class="ident" id="8067330">err</span><span class="op" id="8067333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067339">if</span>&nbsp;<span class="ident" id="8067342">x</span>&nbsp;<span class="op" id="8067344">!=</span>&nbsp;<span class="ident" id="8067347">y</span>&nbsp;<span class="op" id="8067349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067353">t</span><span class="op" id="8067354">.</span><span class="ident" id="8067355">Errorf</span><span class="op" id="8067361">(</span><span class="string" id="8067362">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8067387">,</span>&nbsp;<span class="ident" id="8067389">x</span><span class="op" id="8067390">,</span>&nbsp;<span class="ident" id="8067392">y</span><span class="op" id="8067393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067396">}</span><br>
<span class="lineno">65</span><span class="op" id="8067398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8067401">var</span>&nbsp;<span class="ident" id="8067405">tests</span>&nbsp;<span class="op" id="8067411">=</span>&nbsp;<span class="op" id="8067413">[</span><span class="op" id="8067414">]</span><span class="ident" id="8067415">int64</span><span class="op" id="8067420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067423">-</span><span class="num" id="8067424">1</span>&nbsp;<span class="op" id="8067426">&lt;&lt;</span>&nbsp;<span class="num" id="8067429">63</span><span class="op" id="8067431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067434">-</span><span class="num" id="8067435">1</span><span class="op" id="8067436">&lt;&lt;</span><span class="num" id="8067438">63</span>&nbsp;<span class="op" id="8067441">+</span>&nbsp;<span class="num" id="8067443">1</span><span class="op" id="8067444">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067447">-</span><span class="num" id="8067448">1</span><span class="op" id="8067449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067452">0</span><span class="op" id="8067453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067456">1</span><span class="op" id="8067457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067460">2</span><span class="op" id="8067461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067464">10</span><span class="op" id="8067466">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067469">20</span><span class="op" id="8067471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067474">63</span><span class="op" id="8067476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067479">64</span><span class="op" id="8067481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067484">65</span><span class="op" id="8067486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067489">127</span><span class="op" id="8067492">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067495">128</span><span class="op" id="8067498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067501">129</span><span class="op" id="8067504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067507">255</span><span class="op" id="8067510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067513">256</span><span class="op" id="8067516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067519">257</span><span class="op" id="8067522">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8067525">1</span><span class="op" id="8067526">&lt;&lt;</span><span class="num" id="8067528">63</span>&nbsp;<span class="op" id="8067531">-</span>&nbsp;<span class="num" id="8067533">1</span><span class="op" id="8067534">,</span><br>
<span class="lineno"></span><span class="op" id="8067536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8067539">func</span>&nbsp;<span class="ident" id="8067544">TestVarint</span><span class="op" id="8067554">(</span><span class="ident" id="8067555">t</span>&nbsp;<span class="op" id="8067557">*</span><span class="ident" id="8067558">testing</span><span class="op" id="8067565">.</span><span class="ident" id="8067566">T</span><span class="op" id="8067567">)</span>&nbsp;<span class="op" id="8067569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067572">for</span>&nbsp;<span class="ident" id="8067576">_</span><span class="op" id="8067577">,</span>&nbsp;<span class="ident" id="8067579">x</span>&nbsp;<span class="op" id="8067581">:=</span>&nbsp;<span class="keyword" id="8067584">range</span>&nbsp;<span class="ident" id="8067590">tests</span>&nbsp;<span class="op" id="8067596">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067600">testVarint</span><span class="op" id="8067610">(</span><span class="ident" id="8067611">t</span><span class="op" id="8067612">,</span>&nbsp;<span class="ident" id="8067614">x</span><span class="op" id="8067615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067619">testVarint</span><span class="op" id="8067629">(</span><span class="ident" id="8067630">t</span><span class="op" id="8067631">,</span>&nbsp;<span class="op" id="8067633">-</span><span class="ident" id="8067634">x</span><span class="op" id="8067635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067641">for</span>&nbsp;<span class="ident" id="8067645">x</span>&nbsp;<span class="op" id="8067647">:=</span>&nbsp;<span class="ident" id="8067650">int64</span><span class="op" id="8067655">(</span><span class="num" id="8067656">0x7</span><span class="op" id="8067659">)</span><span class="op" id="8067660">;</span>&nbsp;<span class="ident" id="8067662">x</span>&nbsp;<span class="op" id="8067664">!=</span>&nbsp;<span class="num" id="8067667">0</span><span class="op" id="8067668">;</span>&nbsp;<span class="ident" id="8067670">x</span>&nbsp;<span class="op" id="8067672">&lt;&lt;=</span>&nbsp;<span class="num" id="8067676">1</span>&nbsp;<span class="op" id="8067678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067682">testVarint</span><span class="op" id="8067692">(</span><span class="ident" id="8067693">t</span><span class="op" id="8067694">,</span>&nbsp;<span class="ident" id="8067696">x</span><span class="op" id="8067697">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067701">testVarint</span><span class="op" id="8067711">(</span><span class="ident" id="8067712">t</span><span class="op" id="8067713">,</span>&nbsp;<span class="op" id="8067715">-</span><span class="ident" id="8067716">x</span><span class="op" id="8067717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067720">}</span><br>
<span class="lineno"></span><span class="op" id="8067722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8067725">func</span>&nbsp;<span class="ident" id="8067730">TestUvarint</span><span class="op" id="8067741">(</span><span class="ident" id="8067742">t</span>&nbsp;<span class="op" id="8067744">*</span><span class="ident" id="8067745">testing</span><span class="op" id="8067752">.</span><span class="ident" id="8067753">T</span><span class="op" id="8067754">)</span>&nbsp;<span class="op" id="8067756">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067759">for</span>&nbsp;<span class="ident" id="8067763">_</span><span class="op" id="8067764">,</span>&nbsp;<span class="ident" id="8067766">x</span>&nbsp;<span class="op" id="8067768">:=</span>&nbsp;<span class="keyword" id="8067771">range</span>&nbsp;<span class="ident" id="8067777">tests</span>&nbsp;<span class="op" id="8067783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067787">testUvarint</span><span class="op" id="8067798">(</span><span class="ident" id="8067799">t</span><span class="op" id="8067800">,</span>&nbsp;<span class="ident" id="8067802">uint64</span><span class="op" id="8067808">(</span><span class="ident" id="8067809">x</span><span class="op" id="8067810">)</span><span class="op" id="8067811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067817">for</span>&nbsp;<span class="ident" id="8067821">x</span>&nbsp;<span class="op" id="8067823">:=</span>&nbsp;<span class="ident" id="8067826">uint64</span><span class="op" id="8067832">(</span><span class="num" id="8067833">0x7</span><span class="op" id="8067836">)</span><span class="op" id="8067837">;</span>&nbsp;<span class="ident" id="8067839">x</span>&nbsp;<span class="op" id="8067841">!=</span>&nbsp;<span class="num" id="8067844">0</span><span class="op" id="8067845">;</span>&nbsp;<span class="ident" id="8067847">x</span>&nbsp;<span class="op" id="8067849">&lt;&lt;=</span>&nbsp;<span class="num" id="8067853">1</span>&nbsp;<span class="op" id="8067855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067859">testUvarint</span><span class="op" id="8067870">(</span><span class="ident" id="8067871">t</span><span class="op" id="8067872">,</span>&nbsp;<span class="ident" id="8067874">x</span><span class="op" id="8067875">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8067878">}</span><br>
<span class="lineno"></span><span class="op" id="8067880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8067883">func</span>&nbsp;<span class="ident" id="8067888">TestBufferTooSmall</span><span class="op" id="8067906">(</span><span class="ident" id="8067907">t</span>&nbsp;<span class="op" id="8067909">*</span><span class="ident" id="8067910">testing</span><span class="op" id="8067917">.</span><span class="ident" id="8067918">T</span><span class="op" id="8067919">)</span>&nbsp;<span class="op" id="8067921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067924">buf</span>&nbsp;<span class="op" id="8067928">:=</span>&nbsp;<span class="op" id="8067931">[</span><span class="op" id="8067932">]</span><span class="builtintype" id="8067933">byte</span><span class="op" id="8067937">{</span><span class="num" id="8067938">0x80</span><span class="op" id="8067942">,</span>&nbsp;<span class="num" id="8067944">0x80</span><span class="op" id="8067948">,</span>&nbsp;<span class="num" id="8067950">0x80</span><span class="op" id="8067954">,</span>&nbsp;<span class="num" id="8067956">0x80</span><span class="op" id="8067960">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8067963">for</span>&nbsp;<span class="ident" id="8067967">i</span>&nbsp;<span class="op" id="8067969">:=</span>&nbsp;<span class="num" id="8067972">0</span><span class="op" id="8067973">;</span>&nbsp;<span class="ident" id="8067975">i</span>&nbsp;<span class="op" id="8067977">&lt;=</span>&nbsp;<span class="builtinfunc" id="8067980">len</span><span class="op" id="8067983">(</span><span class="ident" id="8067984">buf</span><span class="op" id="8067987">)</span><span class="op" id="8067988">;</span>&nbsp;<span class="ident" id="8067990">i</span><span class="op" id="8067991">++</span>&nbsp;<span class="op" id="8067994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8067998">buf</span>&nbsp;<span class="op" id="8068002">:=</span>&nbsp;<span class="ident" id="8068005">buf</span><span class="op" id="8068008">[</span><span class="num" id="8068009">0</span><span class="op" id="8068010">:</span><span class="ident" id="8068011">i</span><span class="op" id="8068012">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068016">x</span><span class="op" id="8068017">,</span>&nbsp;<span class="ident" id="8068019">n</span>&nbsp;<span class="op" id="8068021">:=</span>&nbsp;<span class="ident" id="8068024">Uvarint</span><span class="op" id="8068031">(</span><span class="ident" id="8068032">buf</span><span class="op" id="8068035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8068039">if</span>&nbsp;<span class="ident" id="8068042">x</span>&nbsp;<span class="op" id="8068044">!=</span>&nbsp;<span class="num" id="8068047">0</span>&nbsp;<span class="op" id="8068049">||</span>&nbsp;<span class="ident" id="8068052">n</span>&nbsp;<span class="op" id="8068054">!=</span>&nbsp;<span class="num" id="8068057">0</span>&nbsp;<span class="op" id="8068059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068064">t</span><span class="op" id="8068065">.</span><span class="ident" id="8068066">Errorf</span><span class="op" id="8068072">(</span><span class="string" id="8068073">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="8068106">,</span>&nbsp;<span class="ident" id="8068108">buf</span><span class="op" id="8068111">,</span>&nbsp;<span class="ident" id="8068113">x</span><span class="op" id="8068114">,</span>&nbsp;<span class="ident" id="8068116">n</span><span class="op" id="8068117">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8068121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068126">x</span><span class="op" id="8068127">,</span>&nbsp;<span class="ident" id="8068129">err</span>&nbsp;<span class="op" id="8068133">:=</span>&nbsp;<span class="ident" id="8068136">ReadUvarint</span><span class="op" id="8068147">(</span><span class="ident" id="8068148">bytes</span><span class="op" id="8068153">.</span><span class="ident" id="8068154">NewReader</span><span class="op" id="8068163">(</span><span class="ident" id="8068164">buf</span><span class="op" id="8068167">)</span><span class="op" id="8068168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8068172">if</span>&nbsp;<span class="ident" id="8068175">x</span>&nbsp;<span class="op" id="8068177">!=</span>&nbsp;<span class="num" id="8068180">0</span>&nbsp;<span class="op" id="8068182">||</span>&nbsp;<span class="ident" id="8068185">err</span>&nbsp;<span class="op" id="8068189">!=</span>&nbsp;<span class="ident" id="8068192">io</span><span class="op" id="8068194">.</span><span class="ident" id="8068195">EOF</span>&nbsp;<span class="op" id="8068199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068204">t</span><span class="op" id="8068205">.</span><span class="ident" id="8068206">Errorf</span><span class="op" id="8068212">(</span><span class="string" id="8068213">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8068252">,</span>&nbsp;<span class="ident" id="8068254">buf</span><span class="op" id="8068257">,</span>&nbsp;<span class="ident" id="8068259">x</span><span class="op" id="8068260">,</span>&nbsp;<span class="ident" id="8068262">err</span><span class="op" id="8068265">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8068269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8068272">}</span><br>
<span class="lineno"></span><span class="op" id="8068274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8068277">func</span>&nbsp;<span class="ident" id="8068282">testOverflow</span><span class="op" id="8068294">(</span><span class="ident" id="8068295">t</span>&nbsp;<span class="op" id="8068297">*</span><span class="ident" id="8068298">testing</span><span class="op" id="8068305">.</span><span class="ident" id="8068306">T</span><span class="op" id="8068307">,</span>&nbsp;<span class="ident" id="8068309">buf</span>&nbsp;<span class="op" id="8068313">[</span><span class="op" id="8068314">]</span><span class="builtintype" id="8068315">byte</span><span class="op" id="8068319">,</span>&nbsp;<span class="ident" id="8068321">n0</span>&nbsp;<span class="builtintype" id="8068324">int</span><span class="op" id="8068327">,</span>&nbsp;<span class="ident" id="8068329">err0</span>&nbsp;<span class="builtintype" id="8068334">error</span><span class="op" id="8068339">)</span>&nbsp;<span class="op" id="8068341">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068344">x</span><span class="op" id="8068345">,</span>&nbsp;<span class="ident" id="8068347">n</span>&nbsp;<span class="op" id="8068349">:=</span>&nbsp;<span class="ident" id="8068352">Uvarint</span><span class="op" id="8068359">(</span><span class="ident" id="8068360">buf</span><span class="op" id="8068363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8068366">if</span>&nbsp;<span class="ident" id="8068369">x</span>&nbsp;<span class="op" id="8068371">!=</span>&nbsp;<span class="num" id="8068374">0</span>&nbsp;<span class="op" id="8068376">||</span>&nbsp;<span class="ident" id="8068379">n</span>&nbsp;<span class="op" id="8068381">!=</span>&nbsp;<span class="ident" id="8068384">n0</span>&nbsp;<span class="op" id="8068387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068391">t</span><span class="op" id="8068392">.</span><span class="ident" id="8068393">Errorf</span><span class="op" id="8068399">(</span><span class="string" id="8068400">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="8068445">,</span>&nbsp;<span class="ident" id="8068447">buf</span><span class="op" id="8068450">,</span>&nbsp;<span class="ident" id="8068452">x</span><span class="op" id="8068453">,</span>&nbsp;<span class="ident" id="8068455">n</span><span class="op" id="8068456">,</span>&nbsp;<span class="ident" id="8068458">n0</span><span class="op" id="8068460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8068463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068467">x</span><span class="op" id="8068468">,</span>&nbsp;<span class="ident" id="8068470">err</span>&nbsp;<span class="op" id="8068474">:=</span>&nbsp;<span class="ident" id="8068477">ReadUvarint</span><span class="op" id="8068488">(</span><span class="ident" id="8068489">bytes</span><span class="op" id="8068494">.</span><span class="ident" id="8068495">NewReader</span><span class="op" id="8068504">(</span><span class="ident" id="8068505">buf</span><span class="op" id="8068508">)</span><span class="op" id="8068509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8068512">if</span>&nbsp;<span class="ident" id="8068515">x</span>&nbsp;<span class="op" id="8068517">!=</span>&nbsp;<span class="num" id="8068520">0</span>&nbsp;<span class="op" id="8068522">||</span>&nbsp;<span class="ident" id="8068525">err</span>&nbsp;<span class="op" id="8068529">!=</span>&nbsp;<span class="ident" id="8068532">err0</span>&nbsp;<span class="op" id="8068537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068541">t</span><span class="op" id="8068542">.</span><span class="ident" id="8068543">Errorf</span><span class="op" id="8068549">(</span><span class="string" id="8068550">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="8068601">,</span>&nbsp;<span class="ident" id="8068603">buf</span><span class="op" id="8068606">,</span>&nbsp;<span class="ident" id="8068608">x</span><span class="op" id="8068609">,</span>&nbsp;<span class="ident" id="8068611">err</span><span class="op" id="8068614">,</span>&nbsp;<span class="ident" id="8068616">err0</span><span class="op" id="8068620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8068623">}</span><br>
<span class="lineno"></span><span class="op" id="8068625">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="8068628">func</span>&nbsp;<span class="ident" id="8068633">TestOverflow</span><span class="op" id="8068645">(</span><span class="ident" id="8068646">t</span>&nbsp;<span class="op" id="8068648">*</span><span class="ident" id="8068649">testing</span><span class="op" id="8068656">.</span><span class="ident" id="8068657">T</span><span class="op" id="8068658">)</span>&nbsp;<span class="op" id="8068660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068663">testOverflow</span><span class="op" id="8068675">(</span><span class="ident" id="8068676">t</span><span class="op" id="8068677">,</span>&nbsp;<span class="op" id="8068679">[</span><span class="op" id="8068680">]</span><span class="builtintype" id="8068681">byte</span><span class="op" id="8068685">{</span><span class="num" id="8068686">0x80</span><span class="op" id="8068690">,</span>&nbsp;<span class="num" id="8068692">0x80</span><span class="op" id="8068696">,</span>&nbsp;<span class="num" id="8068698">0x80</span><span class="op" id="8068702">,</span>&nbsp;<span class="num" id="8068704">0x80</span><span class="op" id="8068708">,</span>&nbsp;<span class="num" id="8068710">0x80</span><span class="op" id="8068714">,</span>&nbsp;<span class="num" id="8068716">0x80</span><span class="op" id="8068720">,</span>&nbsp;<span class="num" id="8068722">0x80</span><span class="op" id="8068726">,</span>&nbsp;<span class="num" id="8068728">0x80</span><span class="op" id="8068732">,</span>&nbsp;<span class="num" id="8068734">0x80</span><span class="op" id="8068738">,</span>&nbsp;<span class="num" id="8068740">0x2</span><span class="op" id="8068743">}</span><span class="op" id="8068744">,</span>&nbsp;<span class="op" id="8068746">-</span><span class="num" id="8068747">10</span><span class="op" id="8068749">,</span>&nbsp;<span class="ident" id="8068751">overflow</span><span class="op" id="8068759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068762">testOverflow</span><span class="op" id="8068774">(</span><span class="ident" id="8068775">t</span><span class="op" id="8068776">,</span>&nbsp;<span class="op" id="8068778">[</span><span class="op" id="8068779">]</span><span class="builtintype" id="8068780">byte</span><span class="op" id="8068784">{</span><span class="num" id="8068785">0x80</span><span class="op" id="8068789">,</span>&nbsp;<span class="num" id="8068791">0x80</span><span class="op" id="8068795">,</span>&nbsp;<span class="num" id="8068797">0x80</span><span class="op" id="8068801">,</span>&nbsp;<span class="num" id="8068803">0x80</span><span class="op" id="8068807">,</span>&nbsp;<span class="num" id="8068809">0x80</span><span class="op" id="8068813">,</span>&nbsp;<span class="num" id="8068815">0x80</span><span class="op" id="8068819">,</span>&nbsp;<span class="num" id="8068821">0x80</span><span class="op" id="8068825">,</span>&nbsp;<span class="num" id="8068827">0x80</span><span class="op" id="8068831">,</span>&nbsp;<span class="num" id="8068833">0x80</span><span class="op" id="8068837">,</span>&nbsp;<span class="num" id="8068839">0x80</span><span class="op" id="8068843">,</span>&nbsp;<span class="num" id="8068845">0x80</span><span class="op" id="8068849">,</span>&nbsp;<span class="num" id="8068851">0x80</span><span class="op" id="8068855">,</span>&nbsp;<span class="num" id="8068857">0x1</span><span class="op" id="8068860">,</span>&nbsp;<span class="num" id="8068862">0</span><span class="op" id="8068863">,</span>&nbsp;<span class="num" id="8068865">0</span><span class="op" id="8068866">}</span><span class="op" id="8068867">,</span>&nbsp;<span class="op" id="8068869">-</span><span class="num" id="8068870">13</span><span class="op" id="8068872">,</span>&nbsp;<span class="ident" id="8068874">overflow</span><span class="op" id="8068882">)</span><br>
<span class="lineno"></span><span class="op" id="8068884">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8068887">func</span>&nbsp;<span class="ident" id="8068892">TestNonCanonicalZero</span><span class="op" id="8068912">(</span><span class="ident" id="8068913">t</span>&nbsp;<span class="op" id="8068915">*</span><span class="ident" id="8068916">testing</span><span class="op" id="8068923">.</span><span class="ident" id="8068924">T</span><span class="op" id="8068925">)</span>&nbsp;<span class="op" id="8068927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068930">buf</span>&nbsp;<span class="op" id="8068934">:=</span>&nbsp;<span class="op" id="8068937">[</span><span class="op" id="8068938">]</span><span class="builtintype" id="8068939">byte</span><span class="op" id="8068943">{</span><span class="num" id="8068944">0x80</span><span class="op" id="8068948">,</span>&nbsp;<span class="num" id="8068950">0x80</span><span class="op" id="8068954">,</span>&nbsp;<span class="num" id="8068956">0x80</span><span class="op" id="8068960">,</span>&nbsp;<span class="num" id="8068962">0</span><span class="op" id="8068963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8068966">x</span><span class="op" id="8068967">,</span>&nbsp;<span class="ident" id="8068969">n</span>&nbsp;<span class="op" id="8068971">:=</span>&nbsp;<span class="ident" id="8068974">Uvarint</span><span class="op" id="8068981">(</span><span class="ident" id="8068982">buf</span><span class="op" id="8068985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8068988">if</span>&nbsp;<span class="ident" id="8068991">x</span>&nbsp;<span class="op" id="8068993">!=</span>&nbsp;<span class="num" id="8068996">0</span>&nbsp;<span class="op" id="8068998">||</span>&nbsp;<span class="ident" id="8069001">n</span>&nbsp;<span class="op" id="8069003">!=</span>&nbsp;<span class="num" id="8069006">4</span>&nbsp;<span class="op" id="8069008">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069012">t</span><span class="op" id="8069013">.</span><span class="ident" id="8069014">Errorf</span><span class="op" id="8069020">(</span><span class="string" id="8069021">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="8069065">,</span>&nbsp;<span class="ident" id="8069067">buf</span><span class="op" id="8069070">,</span>&nbsp;<span class="ident" id="8069072">x</span><span class="op" id="8069073">,</span>&nbsp;<span class="ident" id="8069075">n</span><span class="op" id="8069076">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8069080">}</span><br>
<span class="lineno"></span><span class="op" id="8069082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8069085">func</span>&nbsp;<span class="ident" id="8069090">BenchmarkPutUvarint32</span><span class="op" id="8069111">(</span><span class="ident" id="8069112">b</span>&nbsp;<span class="op" id="8069114">*</span><span class="ident" id="8069115">testing</span><span class="op" id="8069122">.</span><span class="ident" id="8069123">B</span><span class="op" id="8069124">)</span>&nbsp;<span class="op" id="8069126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069129">buf</span>&nbsp;<span class="op" id="8069133">:=</span>&nbsp;<span class="builtinfunc" id="8069136">make</span><span class="op" id="8069140">(</span><span class="op" id="8069141">[</span><span class="op" id="8069142">]</span><span class="builtintype" id="8069143">byte</span><span class="op" id="8069147">,</span>&nbsp;<span class="ident" id="8069149">MaxVarintLen32</span><span class="op" id="8069163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069166">b</span><span class="op" id="8069167">.</span><span class="ident" id="8069168">SetBytes</span><span class="op" id="8069176">(</span><span class="num" id="8069177">4</span><span class="op" id="8069178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8069181">for</span>&nbsp;<span class="ident" id="8069185">i</span>&nbsp;<span class="op" id="8069187">:=</span>&nbsp;<span class="num" id="8069190">0</span><span class="op" id="8069191">;</span>&nbsp;<span class="ident" id="8069193">i</span>&nbsp;<span class="op" id="8069195">&lt;</span>&nbsp;<span class="ident" id="8069197">b</span><span class="op" id="8069198">.</span><span class="ident" id="8069199">N</span><span class="op" id="8069200">;</span>&nbsp;<span class="ident" id="8069202">i</span><span class="op" id="8069203">++</span>&nbsp;<span class="op" id="8069206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8069210">for</span>&nbsp;<span class="ident" id="8069214">j</span>&nbsp;<span class="op" id="8069216">:=</span>&nbsp;<span class="builtintype" id="8069219">uint</span><span class="op" id="8069223">(</span><span class="num" id="8069224">0</span><span class="op" id="8069225">)</span><span class="op" id="8069226">;</span>&nbsp;<span class="ident" id="8069228">j</span>&nbsp;<span class="op" id="8069230">&lt;</span>&nbsp;<span class="ident" id="8069232">MaxVarintLen32</span><span class="op" id="8069246">;</span>&nbsp;<span class="ident" id="8069248">j</span><span class="op" id="8069249">++</span>&nbsp;<span class="op" id="8069252">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069257">PutUvarint</span><span class="op" id="8069267">(</span><span class="ident" id="8069268">buf</span><span class="op" id="8069271">,</span>&nbsp;<span class="num" id="8069273">1</span><span class="op" id="8069274">&lt;&lt;</span><span class="op" id="8069276">(</span><span class="ident" id="8069277">j</span><span class="op" id="8069278">*</span><span class="num" id="8069279">7</span><span class="op" id="8069280">)</span><span class="op" id="8069281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8069285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8069288">}</span><br>
<span class="lineno"></span><span class="op" id="8069290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8069293">func</span>&nbsp;<span class="ident" id="8069298">BenchmarkPutUvarint64</span><span class="op" id="8069319">(</span><span class="ident" id="8069320">b</span>&nbsp;<span class="op" id="8069322">*</span><span class="ident" id="8069323">testing</span><span class="op" id="8069330">.</span><span class="ident" id="8069331">B</span><span class="op" id="8069332">)</span>&nbsp;<span class="op" id="8069334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069337">buf</span>&nbsp;<span class="op" id="8069341">:=</span>&nbsp;<span class="builtinfunc" id="8069344">make</span><span class="op" id="8069348">(</span><span class="op" id="8069349">[</span><span class="op" id="8069350">]</span><span class="builtintype" id="8069351">byte</span><span class="op" id="8069355">,</span>&nbsp;<span class="ident" id="8069357">MaxVarintLen64</span><span class="op" id="8069371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069374">b</span><span class="op" id="8069375">.</span><span class="ident" id="8069376">SetBytes</span><span class="op" id="8069384">(</span><span class="num" id="8069385">8</span><span class="op" id="8069386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8069389">for</span>&nbsp;<span class="ident" id="8069393">i</span>&nbsp;<span class="op" id="8069395">:=</span>&nbsp;<span class="num" id="8069398">0</span><span class="op" id="8069399">;</span>&nbsp;<span class="ident" id="8069401">i</span>&nbsp;<span class="op" id="8069403">&lt;</span>&nbsp;<span class="ident" id="8069405">b</span><span class="op" id="8069406">.</span><span class="ident" id="8069407">N</span><span class="op" id="8069408">;</span>&nbsp;<span class="ident" id="8069410">i</span><span class="op" id="8069411">++</span>&nbsp;<span class="op" id="8069414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8069418">for</span>&nbsp;<span class="ident" id="8069422">j</span>&nbsp;<span class="op" id="8069424">:=</span>&nbsp;<span class="builtintype" id="8069427">uint</span><span class="op" id="8069431">(</span><span class="num" id="8069432">0</span><span class="op" id="8069433">)</span><span class="op" id="8069434">;</span>&nbsp;<span class="ident" id="8069436">j</span>&nbsp;<span class="op" id="8069438">&lt;</span>&nbsp;<span class="ident" id="8069440">MaxVarintLen64</span><span class="op" id="8069454">;</span>&nbsp;<span class="ident" id="8069456">j</span><span class="op" id="8069457">++</span>&nbsp;<span class="op" id="8069460">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8069465">PutUvarint</span><span class="op" id="8069475">(</span><span class="ident" id="8069476">buf</span><span class="op" id="8069479">,</span>&nbsp;<span class="num" id="8069481">1</span><span class="op" id="8069482">&lt;&lt;</span><span class="op" id="8069484">(</span><span class="ident" id="8069485">j</span><span class="op" id="8069486">*</span><span class="num" id="8069487">7</span><span class="op" id="8069488">)</span><span class="op" id="8069489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8069493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8069496">}</span><br>
<span class="lineno"></span><span class="op" id="8069498">}</span>
</div>
</body>
</html>
