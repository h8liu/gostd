<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1943119">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1943174">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1943228">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1943279">package</span>&nbsp;<span class="ident" id="1943287">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1943296">import</span>&nbsp;<span class="op" id="1943303">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1943306">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1943315">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1943318">type</span>&nbsp;<span class="ident" id="1943323">sliceStruct</span>&nbsp;<span class="keyword" id="1943335">struct</span>&nbsp;<span class="op" id="1943342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1943345">array</span>&nbsp;<span class="ident" id="1943351"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1943357">.</span><span class="ident" id="1943358">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1943367">len</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1943373">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1943378">cap</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1943384">int</span><br>
<span class="lineno">15</span><span class="op" id="1943388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1943391">//&nbsp;TODO:&nbsp;take&nbsp;uintptrs&nbsp;instead&nbsp;of&nbsp;int64s?</span><br>
<span class="lineno"></span><span class="keyword" id="1943433">func</span>&nbsp;<span class="ident" id="1943438">makeslice</span><span class="op" id="1943447">(</span><span class="ident" id="1943448">t</span>&nbsp;<span class="op" id="1943450">*</span><span class="ident" id="1943451"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2026362">slicetype</a></span><span class="op" id="1943460">,</span>&nbsp;<span class="ident" id="1943462">len64</span>&nbsp;<span class="ident" id="1943468">int64</span><span class="op" id="1943473">,</span>&nbsp;<span class="ident" id="1943475">cap64</span>&nbsp;<span class="ident" id="1943481">int64</span><span class="op" id="1943486">)</span>&nbsp;<span class="ident" id="1943488"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span>&nbsp;<span class="op" id="1943500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1943503">//&nbsp;NOTE:&nbsp;The&nbsp;len&nbsp;&gt;&nbsp;MaxMem/elemsize&nbsp;check&nbsp;here&nbsp;is&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1943577">//&nbsp;but&nbsp;it&nbsp;produces&nbsp;a&nbsp;&#39;len&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;error&nbsp;instead&nbsp;of&nbsp;a&nbsp;&#39;cap&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1943662">//&nbsp;when&nbsp;someone&nbsp;does&nbsp;make([]T,&nbsp;bignumber).&nbsp;&#39;cap&nbsp;out&nbsp;of&nbsp;range&#39;&nbsp;is&nbsp;true&nbsp;too,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1943738">//&nbsp;but&nbsp;since&nbsp;the&nbsp;cap&nbsp;is&nbsp;only&nbsp;being&nbsp;supplied&nbsp;implicitly,&nbsp;saying&nbsp;len&nbsp;is&nbsp;clearer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1943818">//&nbsp;See&nbsp;issue&nbsp;4085.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1943838">len</span>&nbsp;<span class="op" id="1943842">:=</span>&nbsp;<span class="builtintype" id="1943845">int</span><span class="op" id="1943848">(</span><span class="ident" id="1943849"><a href="/runtime/slice.go.html#1943462">len64</a></span><span class="op" id="1943854">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1943857">if</span>&nbsp;<span class="ident" id="1943860"><a href="/runtime/slice.go.html#1943462">len64</a></span>&nbsp;<span class="op" id="1943866">&lt;</span>&nbsp;<span class="num" id="1943868">0</span>&nbsp;<span class="op" id="1943870">||</span>&nbsp;<span class="ident" id="1943873">int64</span><span class="op" id="1943878">(</span><span class="builtinfunc" id="1943879"><a href="/runtime/slice.go.html#1943838">len</a></span><span class="op" id="1943882">)</span>&nbsp;<span class="op" id="1943884">!=</span>&nbsp;<span class="ident" id="1943887"><a href="/runtime/slice.go.html#1943462">len64</a></span>&nbsp;<span class="op" id="1943893">||</span>&nbsp;<span class="ident" id="1943896"><a href="/runtime/slice.go.html#1943448">t</a></span><span class="op" id="1943897">.</span><span class="ident" id="1943898">elem</span><span class="op" id="1943902">.</span><span class="ident" id="1943903">size</span>&nbsp;<span class="op" id="1943908">&gt;</span>&nbsp;<span class="num" id="1943910">0</span>&nbsp;<span class="op" id="1943912">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1943915">uintptr</span><span class="op" id="1943922">(</span><span class="builtinfunc" id="1943923"><a href="/runtime/slice.go.html#1943838">len</a></span><span class="op" id="1943926">)</span>&nbsp;<span class="op" id="1943928">&gt;</span>&nbsp;<span class="ident" id="1943930"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2031855">maxmem</a></span><span class="op" id="1943936">/</span><span class="builtintype" id="1943937">uintptr</span><span class="op" id="1943944">(</span><span class="ident" id="1943945"><a href="/runtime/slice.go.html#1943448">t</a></span><span class="op" id="1943946">.</span><span class="ident" id="1943947">elem</span><span class="op" id="1943951">.</span><span class="ident" id="1943952">size</span><span class="op" id="1943956">)</span>&nbsp;<span class="op" id="1943958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1943962">panic</span><span class="op" id="1943967">(</span><span class="ident" id="1943968"><a href="/runtime/error.go.html#1755462">errorString</a></span><span class="op" id="1943979">(</span><span class="string" id="1943980">&#34;makeslice:&nbsp;len&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1944009">)</span><span class="op" id="1944010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1944016">cap</span>&nbsp;<span class="op" id="1944020">:=</span>&nbsp;<span class="builtintype" id="1944023">int</span><span class="op" id="1944026">(</span><span class="ident" id="1944027"><a href="/runtime/slice.go.html#1943475">cap64</a></span><span class="op" id="1944032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944035">if</span>&nbsp;<span class="builtinfunc" id="1944038"><a href="/runtime/slice.go.html#1944016">cap</a></span>&nbsp;<span class="op" id="1944042">&lt;</span>&nbsp;<span class="builtinfunc" id="1944044"><a href="/runtime/slice.go.html#1943838">len</a></span>&nbsp;<span class="op" id="1944048">||</span>&nbsp;<span class="ident" id="1944051">int64</span><span class="op" id="1944056">(</span><span class="builtinfunc" id="1944057"><a href="/runtime/slice.go.html#1944016">cap</a></span><span class="op" id="1944060">)</span>&nbsp;<span class="op" id="1944062">!=</span>&nbsp;<span class="ident" id="1944065"><a href="/runtime/slice.go.html#1943475">cap64</a></span>&nbsp;<span class="op" id="1944071">||</span>&nbsp;<span class="ident" id="1944074"><a href="/runtime/slice.go.html#1943448">t</a></span><span class="op" id="1944075">.</span><span class="ident" id="1944076">elem</span><span class="op" id="1944080">.</span><span class="ident" id="1944081">size</span>&nbsp;<span class="op" id="1944086">&gt;</span>&nbsp;<span class="num" id="1944088">0</span>&nbsp;<span class="op" id="1944090">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1944093">uintptr</span><span class="op" id="1944100">(</span><span class="builtinfunc" id="1944101"><a href="/runtime/slice.go.html#1944016">cap</a></span><span class="op" id="1944104">)</span>&nbsp;<span class="op" id="1944106">&gt;</span>&nbsp;<span class="ident" id="1944108"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2031855">maxmem</a></span><span class="op" id="1944114">/</span><span class="builtintype" id="1944115">uintptr</span><span class="op" id="1944122">(</span><span class="ident" id="1944123"><a href="/runtime/slice.go.html#1943448">t</a></span><span class="op" id="1944124">.</span><span class="ident" id="1944125">elem</span><span class="op" id="1944129">.</span><span class="ident" id="1944130">size</span><span class="op" id="1944134">)</span>&nbsp;<span class="op" id="1944136">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1944140">panic</span><span class="op" id="1944145">(</span><span class="ident" id="1944146"><a href="/runtime/error.go.html#1755462">errorString</a></span><span class="op" id="1944157">(</span><span class="string" id="1944158">&#34;makeslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1944187">)</span><span class="op" id="1944188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944194">p</span>&nbsp;<span class="op" id="1944196">:=</span>&nbsp;<span class="ident" id="1944199"><a href="/runtime/malloc.go.html#1828735">newarray</a></span><span class="op" id="1944207">(</span><span class="ident" id="1944208"><a href="/runtime/slice.go.html#1943448">t</a></span><span class="op" id="1944209">.</span><span class="ident" id="1944210">elem</span><span class="op" id="1944214">,</span>&nbsp;<span class="builtintype" id="1944216">uintptr</span><span class="op" id="1944223">(</span><span class="builtinfunc" id="1944224"><a href="/runtime/slice.go.html#1944016">cap</a></span><span class="op" id="1944227">)</span><span class="op" id="1944228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944231">return</span>&nbsp;<span class="ident" id="1944238"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1944249">{</span><span class="ident" id="1944250"><a href="/runtime/slice.go.html#1944194">p</a></span><span class="op" id="1944251">,</span>&nbsp;<span class="builtinfunc" id="1944253"><a href="/runtime/slice.go.html#1943838">len</a></span><span class="op" id="1944256">,</span>&nbsp;<span class="builtinfunc" id="1944258"><a href="/runtime/slice.go.html#1944016">cap</a></span><span class="op" id="1944261">}</span><br>
<span class="lineno"></span><span class="op" id="1944263">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1944266">//&nbsp;TODO:&nbsp;take&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;int64?</span><br>
<span class="lineno"></span><span class="keyword" id="1944306">func</span>&nbsp;<span class="ident" id="1944311">growslice</span><span class="op" id="1944320">(</span><span class="ident" id="1944321">t</span>&nbsp;<span class="op" id="1944323">*</span><span class="ident" id="1944324"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2026362">slicetype</a></span><span class="op" id="1944333">,</span>&nbsp;<span class="ident" id="1944335">old</span>&nbsp;<span class="ident" id="1944339"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1944350">,</span>&nbsp;<span class="ident" id="1944352">n</span>&nbsp;<span class="ident" id="1944354">int64</span><span class="op" id="1944359">)</span>&nbsp;<span class="ident" id="1944361"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span>&nbsp;<span class="op" id="1944373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944376">if</span>&nbsp;<span class="ident" id="1944379"><a href="/runtime/slice.go.html#1944352">n</a></span>&nbsp;<span class="op" id="1944381">&lt;</span>&nbsp;<span class="num" id="1944383">1</span>&nbsp;<span class="op" id="1944385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1944389">panic</span><span class="op" id="1944394">(</span><span class="ident" id="1944395"><a href="/runtime/error.go.html#1755462">errorString</a></span><span class="op" id="1944406">(</span><span class="string" id="1944407">&#34;growslice:&nbsp;invalid&nbsp;n&#34;</span><span class="op" id="1944429">)</span><span class="op" id="1944430">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944437">cap64</span>&nbsp;<span class="op" id="1944443">:=</span>&nbsp;<span class="ident" id="1944446">int64</span><span class="op" id="1944451">(</span><span class="ident" id="1944452"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944455">.</span><span class="builtinfunc" id="1944456">cap</span><span class="op" id="1944459">)</span>&nbsp;<span class="op" id="1944461">+</span>&nbsp;<span class="ident" id="1944463"><a href="/runtime/slice.go.html#1944352">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1944466">cap</span>&nbsp;<span class="op" id="1944470">:=</span>&nbsp;<span class="builtintype" id="1944473">int</span><span class="op" id="1944476">(</span><span class="ident" id="1944477"><a href="/runtime/slice.go.html#1944437">cap64</a></span><span class="op" id="1944482">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944486">if</span>&nbsp;<span class="ident" id="1944489">int64</span><span class="op" id="1944494">(</span><span class="builtinfunc" id="1944495"><a href="/runtime/slice.go.html#1944466">cap</a></span><span class="op" id="1944498">)</span>&nbsp;<span class="op" id="1944500">!=</span>&nbsp;<span class="ident" id="1944503"><a href="/runtime/slice.go.html#1944437">cap64</a></span>&nbsp;<span class="op" id="1944509">||</span>&nbsp;<span class="builtinfunc" id="1944512"><a href="/runtime/slice.go.html#1944466">cap</a></span>&nbsp;<span class="op" id="1944516">&lt;</span>&nbsp;<span class="ident" id="1944518"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944521">.</span><span class="builtinfunc" id="1944522">cap</span>&nbsp;<span class="op" id="1944526">||</span>&nbsp;<span class="ident" id="1944529"><a href="/runtime/slice.go.html#1944321">t</a></span><span class="op" id="1944530">.</span><span class="ident" id="1944531">elem</span><span class="op" id="1944535">.</span><span class="ident" id="1944536">size</span>&nbsp;<span class="op" id="1944541">&gt;</span>&nbsp;<span class="num" id="1944543">0</span>&nbsp;<span class="op" id="1944545">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1944548">uintptr</span><span class="op" id="1944555">(</span><span class="builtinfunc" id="1944556"><a href="/runtime/slice.go.html#1944466">cap</a></span><span class="op" id="1944559">)</span>&nbsp;<span class="op" id="1944561">&gt;</span>&nbsp;<span class="ident" id="1944563"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2031855">maxmem</a></span><span class="op" id="1944569">/</span><span class="builtintype" id="1944570">uintptr</span><span class="op" id="1944577">(</span><span class="ident" id="1944578"><a href="/runtime/slice.go.html#1944321">t</a></span><span class="op" id="1944579">.</span><span class="ident" id="1944580">elem</span><span class="op" id="1944584">.</span><span class="ident" id="1944585">size</span><span class="op" id="1944589">)</span>&nbsp;<span class="op" id="1944591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1944595">panic</span><span class="op" id="1944600">(</span><span class="ident" id="1944601"><a href="/runtime/error.go.html#1755462">errorString</a></span><span class="op" id="1944612">(</span><span class="string" id="1944613">&#34;growslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1944642">)</span><span class="op" id="1944643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944650">if</span>&nbsp;<span class="ident" id="1944653"><a href="/runtime/race0.go.html#1906481">raceenabled</a></span>&nbsp;<span class="op" id="1944665">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944669">callerpc</span>&nbsp;<span class="op" id="1944678">:=</span>&nbsp;<span class="ident" id="1944681"><a href="/runtime/stubs.go.html#1976364">getcallerpc</a></span><span class="op" id="1944692">(</span><span class="ident" id="1944693"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1944699">.</span><span class="ident" id="1944700">Pointer</span><span class="op" id="1944707">(</span><span class="op" id="1944708">&amp;</span><span class="ident" id="1944709"><a href="/runtime/slice.go.html#1944321">t</a></span><span class="op" id="1944710">)</span><span class="op" id="1944711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944715"><a href="/runtime/race0.go.html#1907255">racereadrangepc</a></span><span class="op" id="1944730">(</span><span class="ident" id="1944731"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944734">.</span><span class="ident" id="1944735">array</span><span class="op" id="1944740">,</span>&nbsp;<span class="builtintype" id="1944742">uintptr</span><span class="op" id="1944749">(</span><span class="ident" id="1944750"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944753">.</span><span class="builtinfunc" id="1944754">len</span><span class="op" id="1944757">*</span><span class="builtintype" id="1944758">int</span><span class="op" id="1944761">(</span><span class="ident" id="1944762"><a href="/runtime/slice.go.html#1944321">t</a></span><span class="op" id="1944763">.</span><span class="ident" id="1944764">elem</span><span class="op" id="1944768">.</span><span class="ident" id="1944769">size</span><span class="op" id="1944773">)</span><span class="op" id="1944774">)</span><span class="op" id="1944775">,</span>&nbsp;<span class="ident" id="1944777"><a href="/runtime/slice.go.html#1944669">callerpc</a></span><span class="op" id="1944785">,</span>&nbsp;<span class="ident" id="1944787"><a href="/runtime/proc.go.html#1905425">funcPC</a></span><span class="op" id="1944793">(</span><span class="ident" id="1944794"><a href="/runtime/slice.go.html#1944311">growslice</a></span><span class="op" id="1944803">)</span><span class="op" id="1944804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944811">et</span>&nbsp;<span class="op" id="1944814">:=</span>&nbsp;<span class="ident" id="1944817"><a href="/runtime/slice.go.html#1944321">t</a></span><span class="op" id="1944818">.</span><span class="ident" id="1944819">elem</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944825">if</span>&nbsp;<span class="ident" id="1944828"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1944830">.</span><span class="ident" id="1944831">size</span>&nbsp;<span class="op" id="1944836">==</span>&nbsp;<span class="num" id="1944839">0</span>&nbsp;<span class="op" id="1944841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944845">return</span>&nbsp;<span class="ident" id="1944852"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1944863">{</span><span class="ident" id="1944864"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944867">.</span><span class="ident" id="1944868">array</span><span class="op" id="1944873">,</span>&nbsp;<span class="ident" id="1944875"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944878">.</span><span class="builtinfunc" id="1944879">len</span><span class="op" id="1944882">,</span>&nbsp;<span class="builtinfunc" id="1944884"><a href="/runtime/slice.go.html#1944466">cap</a></span><span class="op" id="1944887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944894">newcap</span>&nbsp;<span class="op" id="1944901">:=</span>&nbsp;<span class="ident" id="1944904"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944907">.</span><span class="builtinfunc" id="1944908">cap</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944913">if</span>&nbsp;<span class="ident" id="1944916"><a href="/runtime/slice.go.html#1944894">newcap</a></span><span class="op" id="1944922">+</span><span class="ident" id="1944923"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1944930">&lt;</span>&nbsp;<span class="builtinfunc" id="1944932"><a href="/runtime/slice.go.html#1944466">cap</a></span>&nbsp;<span class="op" id="1944936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944940"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1944947">=</span>&nbsp;<span class="builtinfunc" id="1944949"><a href="/runtime/slice.go.html#1944466">cap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1944954">}</span>&nbsp;<span class="keyword" id="1944956">else</span>&nbsp;<span class="op" id="1944961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944965">for</span>&nbsp;<span class="op" id="1944969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1944974">if</span>&nbsp;<span class="ident" id="1944977"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1944980">.</span><span class="builtinfunc" id="1944981">len</span>&nbsp;<span class="op" id="1944985">&lt;</span>&nbsp;<span class="num" id="1944987">1024</span>&nbsp;<span class="op" id="1944992">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1944998"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1945005">+=</span>&nbsp;<span class="ident" id="1945008"><a href="/runtime/slice.go.html#1944894">newcap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945018">}</span>&nbsp;<span class="keyword" id="1945020">else</span>&nbsp;<span class="op" id="1945025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945031"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1945038">+=</span>&nbsp;<span class="ident" id="1945041"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1945048">/</span>&nbsp;<span class="num" id="1945050">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945060">if</span>&nbsp;<span class="ident" id="1945063"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1945070">&gt;=</span>&nbsp;<span class="builtinfunc" id="1945073"><a href="/runtime/slice.go.html#1944466">cap</a></span>&nbsp;<span class="op" id="1945077">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945083">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945103">if</span>&nbsp;<span class="builtintype" id="1945106">uintptr</span><span class="op" id="1945113">(</span><span class="ident" id="1945114"><a href="/runtime/slice.go.html#1944894">newcap</a></span><span class="op" id="1945120">)</span>&nbsp;<span class="op" id="1945122">&gt;=</span>&nbsp;<span class="ident" id="1945125"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2031855">maxmem</a></span><span class="op" id="1945131">/</span><span class="builtintype" id="1945132">uintptr</span><span class="op" id="1945139">(</span><span class="ident" id="1945140"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945142">.</span><span class="ident" id="1945143">size</span><span class="op" id="1945147">)</span>&nbsp;<span class="op" id="1945149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1945153">panic</span><span class="op" id="1945158">(</span><span class="ident" id="1945159"><a href="/runtime/error.go.html#1755462">errorString</a></span><span class="op" id="1945170">(</span><span class="string" id="1945171">&#34;growslice:&nbsp;cap&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1945200">)</span><span class="op" id="1945201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945207">lenmem</span>&nbsp;<span class="op" id="1945214">:=</span>&nbsp;<span class="builtintype" id="1945217">uintptr</span><span class="op" id="1945224">(</span><span class="ident" id="1945225"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1945228">.</span><span class="builtinfunc" id="1945229">len</span><span class="op" id="1945232">)</span>&nbsp;<span class="op" id="1945234">*</span>&nbsp;<span class="builtintype" id="1945236">uintptr</span><span class="op" id="1945243">(</span><span class="ident" id="1945244"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945246">.</span><span class="ident" id="1945247">size</span><span class="op" id="1945251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945254">capmem</span>&nbsp;<span class="op" id="1945261">:=</span>&nbsp;<span class="ident" id="1945264"><a href="/runtime/malloc.go.html#1829245">goroundupsize</a></span><span class="op" id="1945277">(</span><span class="builtintype" id="1945278">uintptr</span><span class="op" id="1945285">(</span><span class="ident" id="1945286"><a href="/runtime/slice.go.html#1944894">newcap</a></span><span class="op" id="1945292">)</span>&nbsp;<span class="op" id="1945294">*</span>&nbsp;<span class="builtintype" id="1945296">uintptr</span><span class="op" id="1945303">(</span><span class="ident" id="1945304"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945306">.</span><span class="ident" id="1945307">size</span><span class="op" id="1945311">)</span><span class="op" id="1945312">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945315"><a href="/runtime/slice.go.html#1944894">newcap</a></span>&nbsp;<span class="op" id="1945322">=</span>&nbsp;<span class="builtintype" id="1945324">int</span><span class="op" id="1945327">(</span><span class="ident" id="1945328"><a href="/runtime/slice.go.html#1945254">capmem</a></span>&nbsp;<span class="op" id="1945335">/</span>&nbsp;<span class="builtintype" id="1945337">uintptr</span><span class="op" id="1945344">(</span><span class="ident" id="1945345"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945347">.</span><span class="ident" id="1945348">size</span><span class="op" id="1945352">)</span><span class="op" id="1945353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945356">var</span>&nbsp;<span class="ident" id="1945360">p</span>&nbsp;<span class="ident" id="1945362"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1945368">.</span><span class="ident" id="1945369">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945378">if</span>&nbsp;<span class="ident" id="1945381"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945383">.</span><span class="ident" id="1945384">kind</span><span class="op" id="1945388">&amp;</span><span class="ident" id="1945389"><a href="/runtime/typekind.go.html#2015214">kindNoPointers</a></span>&nbsp;<span class="op" id="1945404">!=</span>&nbsp;<span class="num" id="1945407">0</span>&nbsp;<span class="op" id="1945409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945413"><a href="/runtime/slice.go.html#1945360">p</a></span>&nbsp;<span class="op" id="1945415">=</span>&nbsp;<span class="ident" id="1945417"><a href="/runtime/malloc.go.html#1829112">rawmem</a></span><span class="op" id="1945423">(</span><span class="ident" id="1945424"><a href="/runtime/slice.go.html#1945254">capmem</a></span><span class="op" id="1945430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945434"><a href="/runtime/stubs.go.html#1972552">memclr</a></span><span class="op" id="1945440">(</span><span class="ident" id="1945441"><a href="/runtime/stubs.go.html#1968610">add</a></span><span class="op" id="1945444">(</span><span class="ident" id="1945445"><a href="/runtime/slice.go.html#1945360">p</a></span><span class="op" id="1945446">,</span>&nbsp;<span class="ident" id="1945448"><a href="/runtime/slice.go.html#1945207">lenmem</a></span><span class="op" id="1945454">)</span><span class="op" id="1945455">,</span>&nbsp;<span class="ident" id="1945457"><a href="/runtime/slice.go.html#1945254">capmem</a></span><span class="op" id="1945463">-</span><span class="ident" id="1945464"><a href="/runtime/slice.go.html#1945207">lenmem</a></span><span class="op" id="1945470">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945473">}</span>&nbsp;<span class="keyword" id="1945475">else</span>&nbsp;<span class="op" id="1945480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1945484">//&nbsp;Note:&nbsp;can&#39;t&nbsp;use&nbsp;rawmem&nbsp;(which&nbsp;avoids&nbsp;zeroing&nbsp;of&nbsp;memory),&nbsp;because&nbsp;then&nbsp;GC&nbsp;can&nbsp;scan&nbsp;unitialized&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945590"><a href="/runtime/slice.go.html#1945360">p</a></span>&nbsp;<span class="op" id="1945592">=</span>&nbsp;<span class="ident" id="1945594"><a href="/runtime/malloc.go.html#1828735">newarray</a></span><span class="op" id="1945602">(</span><span class="ident" id="1945603"><a href="/runtime/slice.go.html#1944811">et</a></span><span class="op" id="1945605">,</span>&nbsp;<span class="builtintype" id="1945607">uintptr</span><span class="op" id="1945614">(</span><span class="ident" id="1945615"><a href="/runtime/slice.go.html#1944894">newcap</a></span><span class="op" id="1945621">)</span><span class="op" id="1945622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945628"><a href="/runtime/stubs.go.html#1972675">memmove</a></span><span class="op" id="1945635">(</span><span class="ident" id="1945636"><a href="/runtime/slice.go.html#1945360">p</a></span><span class="op" id="1945637">,</span>&nbsp;<span class="ident" id="1945639"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1945642">.</span><span class="ident" id="1945643">array</span><span class="op" id="1945648">,</span>&nbsp;<span class="ident" id="1945650"><a href="/runtime/slice.go.html#1945207">lenmem</a></span><span class="op" id="1945656">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945660">return</span>&nbsp;<span class="ident" id="1945667"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1945678">{</span><span class="ident" id="1945679"><a href="/runtime/slice.go.html#1945360">p</a></span><span class="op" id="1945680">,</span>&nbsp;<span class="ident" id="1945682"><a href="/runtime/slice.go.html#1944335">old</a></span><span class="op" id="1945685">.</span><span class="builtinfunc" id="1945686">len</span><span class="op" id="1945689">,</span>&nbsp;<span class="ident" id="1945691"><a href="/runtime/slice.go.html#1944894">newcap</a></span><span class="op" id="1945697">}</span><br>
<span class="lineno"></span><span class="op" id="1945699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1945702">func</span>&nbsp;<span class="ident" id="1945707">slicecopy</span><span class="op" id="1945716">(</span><span class="ident" id="1945717">to</span>&nbsp;<span class="ident" id="1945720"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1945731">,</span>&nbsp;<span class="ident" id="1945733">fm</span>&nbsp;<span class="ident" id="1945736"><a href="/runtime/slice.go.html#1943323">sliceStruct</a></span><span class="op" id="1945747">,</span>&nbsp;<span class="ident" id="1945749">width</span>&nbsp;<span class="builtintype" id="1945755">uintptr</span><span class="op" id="1945762">)</span>&nbsp;<span class="builtintype" id="1945764">int</span>&nbsp;<span class="op" id="1945768">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945771">if</span>&nbsp;<span class="ident" id="1945774"><a href="/runtime/slice.go.html#1945733">fm</a></span><span class="op" id="1945776">.</span><span class="builtinfunc" id="1945777">len</span>&nbsp;<span class="op" id="1945781">==</span>&nbsp;<span class="num" id="1945784">0</span>&nbsp;<span class="op" id="1945786">||</span>&nbsp;<span class="ident" id="1945789"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1945791">.</span><span class="builtinfunc" id="1945792">len</span>&nbsp;<span class="op" id="1945796">==</span>&nbsp;<span class="num" id="1945799">0</span>&nbsp;<span class="op" id="1945801">||</span>&nbsp;<span class="ident" id="1945804"><a href="/runtime/slice.go.html#1945749">width</a></span>&nbsp;<span class="op" id="1945810">==</span>&nbsp;<span class="num" id="1945813">0</span>&nbsp;<span class="op" id="1945815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945819">return</span>&nbsp;<span class="num" id="1945826">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945833">n</span>&nbsp;<span class="op" id="1945835">:=</span>&nbsp;<span class="ident" id="1945838"><a href="/runtime/slice.go.html#1945733">fm</a></span><span class="op" id="1945840">.</span><span class="builtinfunc" id="1945841">len</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945846">if</span>&nbsp;<span class="ident" id="1945849"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1945851">.</span><span class="builtinfunc" id="1945852">len</span>&nbsp;<span class="op" id="1945856">&lt;</span>&nbsp;<span class="ident" id="1945858"><a href="/runtime/slice.go.html#1945833">n</a></span>&nbsp;<span class="op" id="1945860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945864"><a href="/runtime/slice.go.html#1945833">n</a></span>&nbsp;<span class="op" id="1945866">=</span>&nbsp;<span class="ident" id="1945868"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1945870">.</span><span class="builtinfunc" id="1945871">len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1945876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1945880">if</span>&nbsp;<span class="ident" id="1945883"><a href="/runtime/race0.go.html#1906481">raceenabled</a></span>&nbsp;<span class="op" id="1945895">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945899">callerpc</span>&nbsp;<span class="op" id="1945908">:=</span>&nbsp;<span class="ident" id="1945911"><a href="/runtime/stubs.go.html#1976364">getcallerpc</a></span><span class="op" id="1945922">(</span><span class="ident" id="1945923"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1945929">.</span><span class="ident" id="1945930">Pointer</span><span class="op" id="1945937">(</span><span class="op" id="1945938">&amp;</span><span class="ident" id="1945939"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1945941">)</span><span class="op" id="1945942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945946">pc</span>&nbsp;<span class="op" id="1945949">:=</span>&nbsp;<span class="ident" id="1945952"><a href="/runtime/proc.go.html#1905425">funcPC</a></span><span class="op" id="1945958">(</span><span class="ident" id="1945959"><a href="/runtime/slice.go.html#1945707">slicecopy</a></span><span class="op" id="1945968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1945972"><a href="/runtime/race0.go.html#1907351">racewriterangepc</a></span><span class="op" id="1945988">(</span><span class="ident" id="1945989"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1945991">.</span><span class="ident" id="1945992">array</span><span class="op" id="1945997">,</span>&nbsp;<span class="builtintype" id="1945999">uintptr</span><span class="op" id="1946006">(</span><span class="ident" id="1946007"><a href="/runtime/slice.go.html#1945833">n</a></span><span class="op" id="1946008">*</span><span class="builtintype" id="1946009">int</span><span class="op" id="1946012">(</span><span class="ident" id="1946013"><a href="/runtime/slice.go.html#1945749">width</a></span><span class="op" id="1946018">)</span><span class="op" id="1946019">)</span><span class="op" id="1946020">,</span>&nbsp;<span class="ident" id="1946022"><a href="/runtime/slice.go.html#1945899">callerpc</a></span><span class="op" id="1946030">,</span>&nbsp;<span class="ident" id="1946032"><a href="/runtime/slice.go.html#1945946">pc</a></span><span class="op" id="1946034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946038"><a href="/runtime/race0.go.html#1907255">racereadrangepc</a></span><span class="op" id="1946053">(</span><span class="ident" id="1946054"><a href="/runtime/slice.go.html#1945733">fm</a></span><span class="op" id="1946056">.</span><span class="ident" id="1946057">array</span><span class="op" id="1946062">,</span>&nbsp;<span class="builtintype" id="1946064">uintptr</span><span class="op" id="1946071">(</span><span class="ident" id="1946072"><a href="/runtime/slice.go.html#1945833">n</a></span><span class="op" id="1946073">*</span><span class="builtintype" id="1946074">int</span><span class="op" id="1946077">(</span><span class="ident" id="1946078"><a href="/runtime/slice.go.html#1945749">width</a></span><span class="op" id="1946083">)</span><span class="op" id="1946084">)</span><span class="op" id="1946085">,</span>&nbsp;<span class="ident" id="1946087"><a href="/runtime/slice.go.html#1945899">callerpc</a></span><span class="op" id="1946095">,</span>&nbsp;<span class="ident" id="1946097"><a href="/runtime/slice.go.html#1945946">pc</a></span><span class="op" id="1946099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946102">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946106">size</span>&nbsp;<span class="op" id="1946111">:=</span>&nbsp;<span class="builtintype" id="1946114">uintptr</span><span class="op" id="1946121">(</span><span class="ident" id="1946122"><a href="/runtime/slice.go.html#1945833">n</a></span><span class="op" id="1946123">)</span>&nbsp;<span class="op" id="1946125">*</span>&nbsp;<span class="ident" id="1946127"><a href="/runtime/slice.go.html#1945749">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946134">if</span>&nbsp;<span class="ident" id="1946137"><a href="/runtime/slice.go.html#1946106">size</a></span>&nbsp;<span class="op" id="1946142">==</span>&nbsp;<span class="num" id="1946145">1</span>&nbsp;<span class="op" id="1946147">{</span>&nbsp;<span class="comment" id="1946149">//&nbsp;common&nbsp;case&nbsp;worth&nbsp;about&nbsp;2x&nbsp;to&nbsp;do&nbsp;here</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1946192">//&nbsp;TODO:&nbsp;is&nbsp;this&nbsp;still&nbsp;worth&nbsp;it&nbsp;with&nbsp;new&nbsp;memmove&nbsp;impl?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946249">*</span><span class="op" id="1946250">(</span><span class="op" id="1946251">*</span><span class="builtintype" id="1946252">byte</span><span class="op" id="1946256">)</span><span class="op" id="1946257">(</span><span class="ident" id="1946258"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1946260">.</span><span class="ident" id="1946261">array</span><span class="op" id="1946266">)</span>&nbsp;<span class="op" id="1946268">=</span>&nbsp;<span class="op" id="1946270">*</span><span class="op" id="1946271">(</span><span class="op" id="1946272">*</span><span class="builtintype" id="1946273">byte</span><span class="op" id="1946277">)</span><span class="op" id="1946278">(</span><span class="ident" id="1946279"><a href="/runtime/slice.go.html#1945733">fm</a></span><span class="op" id="1946281">.</span><span class="ident" id="1946282">array</span><span class="op" id="1946287">)</span>&nbsp;<span class="comment" id="1946289">//&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;byte&nbsp;pointer</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946320">}</span>&nbsp;<span class="keyword" id="1946322">else</span>&nbsp;<span class="op" id="1946327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946331"><a href="/runtime/stubs.go.html#1972675">memmove</a></span><span class="op" id="1946338">(</span><span class="ident" id="1946339"><a href="/runtime/slice.go.html#1945717">to</a></span><span class="op" id="1946341">.</span><span class="ident" id="1946342">array</span><span class="op" id="1946347">,</span>&nbsp;<span class="ident" id="1946349"><a href="/runtime/slice.go.html#1945733">fm</a></span><span class="op" id="1946351">.</span><span class="ident" id="1946352">array</span><span class="op" id="1946357">,</span>&nbsp;<span class="ident" id="1946359"><a href="/runtime/slice.go.html#1946106">size</a></span><span class="op" id="1946363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946369">return</span>&nbsp;<span class="builtintype" id="1946376">int</span><span class="op" id="1946379">(</span><span class="ident" id="1946380"><a href="/runtime/slice.go.html#1945833">n</a></span><span class="op" id="1946381">)</span><br>
<span class="lineno"></span><span class="op" id="1946383">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="1946386">func</span>&nbsp;<span class="ident" id="1946391">slicestringcopy</span><span class="op" id="1946406">(</span><span class="ident" id="1946407">to</span>&nbsp;<span class="op" id="1946410">[</span><span class="op" id="1946411">]</span><span class="builtintype" id="1946412">byte</span><span class="op" id="1946416">,</span>&nbsp;<span class="ident" id="1946418">fm</span>&nbsp;<span class="builtintype" id="1946421">string</span><span class="op" id="1946427">)</span>&nbsp;<span class="builtintype" id="1946429">int</span>&nbsp;<span class="op" id="1946433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946436">if</span>&nbsp;<span class="builtinfunc" id="1946439">len</span><span class="op" id="1946442">(</span><span class="ident" id="1946443"><a href="/runtime/slice.go.html#1946418">fm</a></span><span class="op" id="1946445">)</span>&nbsp;<span class="op" id="1946447">==</span>&nbsp;<span class="num" id="1946450">0</span>&nbsp;<span class="op" id="1946452">||</span>&nbsp;<span class="builtinfunc" id="1946455">len</span><span class="op" id="1946458">(</span><span class="ident" id="1946459"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946461">)</span>&nbsp;<span class="op" id="1946463">==</span>&nbsp;<span class="num" id="1946466">0</span>&nbsp;<span class="op" id="1946468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946472">return</span>&nbsp;<span class="num" id="1946479">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946482">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946486">n</span>&nbsp;<span class="op" id="1946488">:=</span>&nbsp;<span class="builtinfunc" id="1946491">len</span><span class="op" id="1946494">(</span><span class="ident" id="1946495"><a href="/runtime/slice.go.html#1946418">fm</a></span><span class="op" id="1946497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946500">if</span>&nbsp;<span class="builtinfunc" id="1946503">len</span><span class="op" id="1946506">(</span><span class="ident" id="1946507"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946509">)</span>&nbsp;<span class="op" id="1946511">&lt;</span>&nbsp;<span class="ident" id="1946513"><a href="/runtime/slice.go.html#1946486">n</a></span>&nbsp;<span class="op" id="1946515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946519"><a href="/runtime/slice.go.html#1946486">n</a></span>&nbsp;<span class="op" id="1946521">=</span>&nbsp;<span class="builtinfunc" id="1946523">len</span><span class="op" id="1946526">(</span><span class="ident" id="1946527"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946532">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946536">if</span>&nbsp;<span class="ident" id="1946539"><a href="/runtime/race0.go.html#1906481">raceenabled</a></span>&nbsp;<span class="op" id="1946551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946555">callerpc</span>&nbsp;<span class="op" id="1946564">:=</span>&nbsp;<span class="ident" id="1946567"><a href="/runtime/stubs.go.html#1976364">getcallerpc</a></span><span class="op" id="1946578">(</span><span class="ident" id="1946579"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1946585">.</span><span class="ident" id="1946586">Pointer</span><span class="op" id="1946593">(</span><span class="op" id="1946594">&amp;</span><span class="ident" id="1946595"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946597">)</span><span class="op" id="1946598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946602">pc</span>&nbsp;<span class="op" id="1946605">:=</span>&nbsp;<span class="ident" id="1946608"><a href="/runtime/proc.go.html#1905425">funcPC</a></span><span class="op" id="1946614">(</span><span class="ident" id="1946615"><a href="/runtime/slice.go.html#1946391">slicestringcopy</a></span><span class="op" id="1946630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946634"><a href="/runtime/race0.go.html#1907351">racewriterangepc</a></span><span class="op" id="1946650">(</span><span class="ident" id="1946651"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1946657">.</span><span class="ident" id="1946658">Pointer</span><span class="op" id="1946665">(</span><span class="op" id="1946666">&amp;</span><span class="ident" id="1946667"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946669">[</span><span class="num" id="1946670">0</span><span class="op" id="1946671">]</span><span class="op" id="1946672">)</span><span class="op" id="1946673">,</span>&nbsp;<span class="builtintype" id="1946675">uintptr</span><span class="op" id="1946682">(</span><span class="ident" id="1946683"><a href="/runtime/slice.go.html#1946486">n</a></span><span class="op" id="1946684">)</span><span class="op" id="1946685">,</span>&nbsp;<span class="ident" id="1946687"><a href="/runtime/slice.go.html#1946555">callerpc</a></span><span class="op" id="1946695">,</span>&nbsp;<span class="ident" id="1946697"><a href="/runtime/slice.go.html#1946602">pc</a></span><span class="op" id="1946699">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1946702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1946706"><a href="/runtime/stubs.go.html#1972675">memmove</a></span><span class="op" id="1946713">(</span><span class="ident" id="1946714"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1946720">.</span><span class="ident" id="1946721">Pointer</span><span class="op" id="1946728">(</span><span class="op" id="1946729">&amp;</span><span class="ident" id="1946730"><a href="/runtime/slice.go.html#1946407">to</a></span><span class="op" id="1946732">[</span><span class="num" id="1946733">0</span><span class="op" id="1946734">]</span><span class="op" id="1946735">)</span><span class="op" id="1946736">,</span>&nbsp;<span class="ident" id="1946738"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1946744">.</span><span class="ident" id="1946745">Pointer</span><span class="op" id="1946752">(</span><span class="op" id="1946753">(</span><span class="op" id="1946754">*</span><span class="ident" id="1946755"><a href="/runtime/string.go.html#1964684">stringStruct</a></span><span class="op" id="1946767">)</span><span class="op" id="1946768">(</span><span class="ident" id="1946769"><a href="/runtime/slice.go.html#1943306">unsafe</a></span><span class="op" id="1946775">.</span><span class="ident" id="1946776">Pointer</span><span class="op" id="1946783">(</span><span class="op" id="1946784">&amp;</span><span class="ident" id="1946785"><a href="/runtime/slice.go.html#1946418">fm</a></span><span class="op" id="1946787">)</span><span class="op" id="1946788">)</span><span class="op" id="1946789">.</span><span class="ident" id="1946790">str</span><span class="op" id="1946793">)</span><span class="op" id="1946794">,</span>&nbsp;<span class="builtintype" id="1946796">uintptr</span><span class="op" id="1946803">(</span><span class="ident" id="1946804"><a href="/runtime/slice.go.html#1946486">n</a></span><span class="op" id="1946805">)</span><span class="op" id="1946806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1946809">return</span>&nbsp;<span class="ident" id="1946816"><a href="/runtime/slice.go.html#1946486">n</a></span><br>
<span class="lineno"></span><span class="op" id="1946818">}</span>
</div>
</body>
</html>
