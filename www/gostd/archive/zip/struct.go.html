<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html" class="current">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5668115">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5668170">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5668224">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5668275">/*<br>
<span class="lineno"></span>Package&nbsp;zip&nbsp;provides&nbsp;support&nbsp;for&nbsp;reading&nbsp;and&nbsp;writing&nbsp;ZIP&nbsp;archives.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>See:&nbsp;http://www.pkware.com/documents/casestudies/APPNOTE.TXT<br>
<span class="lineno"></span><br>
<span class="lineno">10</span>This&nbsp;package&nbsp;does&nbsp;not&nbsp;support&nbsp;disk&nbsp;spanning.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;note&nbsp;about&nbsp;ZIP64:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>To&nbsp;be&nbsp;backwards&nbsp;compatible&nbsp;the&nbsp;FileHeader&nbsp;has&nbsp;both&nbsp;32&nbsp;and&nbsp;64&nbsp;bit&nbsp;Size<br>
<span class="lineno">15</span>fields.&nbsp;The&nbsp;64&nbsp;bit&nbsp;fields&nbsp;will&nbsp;always&nbsp;contain&nbsp;the&nbsp;correct&nbsp;value&nbsp;and<br>
<span class="lineno"></span>for&nbsp;normal&nbsp;archives&nbsp;both&nbsp;fields&nbsp;will&nbsp;be&nbsp;the&nbsp;same.&nbsp;For&nbsp;files&nbsp;requiring<br>
<span class="lineno"></span>the&nbsp;ZIP64&nbsp;format&nbsp;the&nbsp;32&nbsp;bit&nbsp;fields&nbsp;will&nbsp;be&nbsp;0xffffffff&nbsp;and&nbsp;the&nbsp;64&nbsp;bit<br>
<span class="lineno"></span>fields&nbsp;must&nbsp;be&nbsp;used&nbsp;instead.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno">20</span><span class="keyword" id="5668784">package</span>&nbsp;<span class="ident" id="5668792">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5668797">import</span>&nbsp;<span class="op" id="5668804">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5668807">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5668813">&#34;path&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5668821">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5668828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5668831">//&nbsp;Compression&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="5668855">const</span>&nbsp;<span class="op" id="5668861">(</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5668864">Store</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5668872">uint16</span>&nbsp;<span class="op" id="5668879">=</span>&nbsp;<span class="num" id="5668881">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5668884">Deflate</span>&nbsp;<span class="builtintype" id="5668892">uint16</span>&nbsp;<span class="op" id="5668899">=</span>&nbsp;<span class="num" id="5668901">8</span><br>
<span class="lineno"></span><span class="op" id="5668903">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5668906">const</span>&nbsp;<span class="op" id="5668912">(</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5668915">fileHeaderSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5668940">=</span>&nbsp;<span class="num" id="5668942">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5668954">directoryHeaderSignature</span>&nbsp;<span class="op" id="5668979">=</span>&nbsp;<span class="num" id="5668981">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5668993">directoryEndSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669018">=</span>&nbsp;<span class="num" id="5669020">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669032">directory64LocSignature</span>&nbsp;&nbsp;<span class="op" id="5669057">=</span>&nbsp;<span class="num" id="5669059">0x07064b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669071">directory64EndSignature</span>&nbsp;&nbsp;<span class="op" id="5669096">=</span>&nbsp;<span class="num" id="5669098">0x06064b50</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669110">dataDescriptorSignature</span>&nbsp;&nbsp;<span class="op" id="5669135">=</span>&nbsp;<span class="num" id="5669137">0x08074b50</span>&nbsp;<span class="comment" id="5669148">//&nbsp;de-facto&nbsp;standard;&nbsp;required&nbsp;by&nbsp;OS&nbsp;X&nbsp;Finder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669195">fileHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669220">=</span>&nbsp;<span class="num" id="5669222">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669233">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669256">directoryHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669281">=</span>&nbsp;<span class="num" id="5669283">46</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669294">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669327">directoryEndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669352">=</span>&nbsp;<span class="num" id="5669354">22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669365">//&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669379">dataDescriptorLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669404">=</span>&nbsp;<span class="num" id="5669406">16</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669417">//&nbsp;four&nbsp;uint32:&nbsp;descriptor&nbsp;signature,&nbsp;crc32,&nbsp;compressed&nbsp;size,&nbsp;size</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669485">dataDescriptor64Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669510">=</span>&nbsp;<span class="num" id="5669512">24</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669523">//&nbsp;descriptor&nbsp;with&nbsp;8&nbsp;byte&nbsp;sizes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669556">directory64LocLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669581">=</span>&nbsp;<span class="num" id="5669583">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669594">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669598">directory64EndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669623">=</span>&nbsp;<span class="num" id="5669625">56</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669636">//&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669649">//&nbsp;Constants&nbsp;for&nbsp;the&nbsp;first&nbsp;byte&nbsp;in&nbsp;CreatorVersion</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669700">creatorFAT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669714">=</span>&nbsp;<span class="num" id="5669716">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669719">creatorUnix</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5669733">=</span>&nbsp;<span class="num" id="5669735">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669738">creatorNTFS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5669752">=</span>&nbsp;<span class="num" id="5669754">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669758">creatorVFAT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5669772">=</span>&nbsp;<span class="num" id="5669774">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669778">creatorMacOSX</span>&nbsp;<span class="op" id="5669792">=</span>&nbsp;<span class="num" id="5669794">19</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669799">//&nbsp;version&nbsp;numbers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669819">zipVersion20</span>&nbsp;<span class="op" id="5669832">=</span>&nbsp;<span class="num" id="5669834">20</span>&nbsp;<span class="comment" id="5669837">//&nbsp;2.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669845">zipVersion45</span>&nbsp;<span class="op" id="5669858">=</span>&nbsp;<span class="num" id="5669860">45</span>&nbsp;<span class="comment" id="5669863">//&nbsp;4.5&nbsp;(reads&nbsp;and&nbsp;writes&nbsp;zip64&nbsp;archives)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669906">//&nbsp;limits&nbsp;for&nbsp;non&nbsp;zip64&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669937">uint16max</span>&nbsp;<span class="op" id="5669947">=</span>&nbsp;<span class="op" id="5669949">(</span><span class="num" id="5669950">1</span>&nbsp;<span class="op" id="5669952">&lt;&lt;</span>&nbsp;<span class="num" id="5669955">16</span><span class="op" id="5669957">)</span>&nbsp;<span class="op" id="5669959">-</span>&nbsp;<span class="num" id="5669961">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5669964">uint32max</span>&nbsp;<span class="op" id="5669974">=</span>&nbsp;<span class="op" id="5669976">(</span><span class="num" id="5669977">1</span>&nbsp;<span class="op" id="5669979">&lt;&lt;</span>&nbsp;<span class="num" id="5669982">32</span><span class="op" id="5669984">)</span>&nbsp;<span class="op" id="5669986">-</span>&nbsp;<span class="num" id="5669988">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5669992">//&nbsp;extra&nbsp;header&nbsp;id&#39;s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670014">zip64ExtraId</span>&nbsp;<span class="op" id="5670027">=</span>&nbsp;<span class="num" id="5670029">0x0001</span>&nbsp;<span class="comment" id="5670036">//&nbsp;zip64&nbsp;Extended&nbsp;Information&nbsp;Extra&nbsp;Field</span><br>
<span class="lineno"></span><span class="op" id="5670078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5670081">//&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;within&nbsp;a&nbsp;zip&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5670131">//&nbsp;See&nbsp;the&nbsp;zip&nbsp;spec&nbsp;for&nbsp;details.</span><br>
<span class="lineno">70</span><span class="keyword" id="5670164">type</span>&nbsp;<span class="ident" id="5670169">FileHeader</span>&nbsp;<span class="keyword" id="5670180">struct</span>&nbsp;<span class="op" id="5670187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5670190">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5670224">//&nbsp;It&nbsp;must&nbsp;be&nbsp;a&nbsp;relative&nbsp;path:&nbsp;it&nbsp;must&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;drive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5670287">//&nbsp;letter&nbsp;(e.g.&nbsp;C:)&nbsp;or&nbsp;leading&nbsp;slash,&nbsp;and&nbsp;only&nbsp;forward&nbsp;slashes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5670351">//&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670368">Name</span>&nbsp;<span class="builtintype" id="5670373">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670382">CreatorVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670401">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670409">ReaderVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670428">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670436">Flags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670455">uint16</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670463">Method</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670482">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670490">ModifiedTime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670509">uint16</span>&nbsp;<span class="comment" id="5670516">//&nbsp;MS-DOS&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670532">ModifiedDate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670551">uint16</span>&nbsp;<span class="comment" id="5670558">//&nbsp;MS-DOS&nbsp;date</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670574">CRC32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670593">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670601">CompressedSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670620">uint32</span>&nbsp;<span class="comment" id="5670627">//&nbsp;deprecated;&nbsp;use&nbsp;CompressedSize64</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670664">UncompressedSize</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670683">uint32</span>&nbsp;<span class="comment" id="5670690">//&nbsp;deprecated;&nbsp;use&nbsp;UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670729">CompressedSize64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670748">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670756">UncompressedSize64</span>&nbsp;<span class="builtintype" id="5670775">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670783">Extra</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5670802">[</span><span class="op" id="5670803">]</span><span class="builtintype" id="5670804">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670810">ExternalAttrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670829">uint32</span>&nbsp;<span class="comment" id="5670836">//&nbsp;Meaning&nbsp;depends&nbsp;on&nbsp;CreatorVersion</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5670874">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5670893">string</span><br>
<span class="lineno"></span><span class="op" id="5670900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5670903">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5670958">func</span>&nbsp;<span class="op" id="5670963">(</span><span class="ident" id="5670964">h</span>&nbsp;<span class="op" id="5670966">*</span><span class="ident" id="5670967"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5670977">)</span>&nbsp;<span class="ident" id="5670979">FileInfo</span><span class="op" id="5670987">(</span><span class="op" id="5670988">)</span>&nbsp;<span class="ident" id="5670990"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5670992">.</span><span class="ident" id="5670993"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span>&nbsp;<span class="op" id="5671002">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5671005">return</span>&nbsp;<span class="ident" id="5671012"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671026">{</span><span class="ident" id="5671027"><a href="/gostd/archive/zip/struct.go.html#5670964">h</a></span><span class="op" id="5671028">}</span><br>
<span class="lineno"></span><span class="op" id="5671030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5671033">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5671075">type</span>&nbsp;<span class="ident" id="5671080">headerFileInfo</span>&nbsp;<span class="keyword" id="5671095">struct</span>&nbsp;<span class="op" id="5671102">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5671105">fh</span>&nbsp;<span class="op" id="5671108">*</span><span class="ident" id="5671109"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><br>
<span class="lineno"></span><span class="op" id="5671120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5671123">func</span>&nbsp;<span class="op" id="5671128">(</span><span class="ident" id="5671129">fi</span>&nbsp;<span class="ident" id="5671132"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671146">)</span>&nbsp;<span class="ident" id="5671148">Name</span><span class="op" id="5671152">(</span><span class="op" id="5671153">)</span>&nbsp;<span class="builtintype" id="5671155">string</span>&nbsp;<span class="op" id="5671162">{</span>&nbsp;<span class="keyword" id="5671164">return</span>&nbsp;<span class="ident" id="5671171"><a href="/gostd/archive/zip/struct.go.html#5668813">path</a></span><span class="op" id="5671175">.</span><span class="ident" id="5671176"><a href="/gostd/path/path.go.html#3924660">Base</a></span><span class="op" id="5671180">(</span><span class="ident" id="5671181"><a href="/gostd/archive/zip/struct.go.html#5671129">fi</a></span><span class="op" id="5671183">.</span><span class="ident" id="5671184"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671186">.</span><span class="ident" id="5671187"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="5671191">)</span>&nbsp;<span class="op" id="5671193">}</span><br>
<span class="lineno"></span><span class="keyword" id="5671195">func</span>&nbsp;<span class="op" id="5671200">(</span><span class="ident" id="5671201">fi</span>&nbsp;<span class="ident" id="5671204"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671218">)</span>&nbsp;<span class="ident" id="5671220">Size</span><span class="op" id="5671224">(</span><span class="op" id="5671225">)</span>&nbsp;<span class="builtintype" id="5671227">int64</span>&nbsp;<span class="op" id="5671233">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5671236">if</span>&nbsp;<span class="ident" id="5671239"><a href="/gostd/archive/zip/struct.go.html#5671201">fi</a></span><span class="op" id="5671241">.</span><span class="ident" id="5671242"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671244">.</span><span class="ident" id="5671245"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span>&nbsp;<span class="op" id="5671264">&gt;</span>&nbsp;<span class="num" id="5671266">0</span>&nbsp;<span class="op" id="5671268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5671272">return</span>&nbsp;<span class="builtintype" id="5671279">int64</span><span class="op" id="5671284">(</span><span class="ident" id="5671285"><a href="/gostd/archive/zip/struct.go.html#5671201">fi</a></span><span class="op" id="5671287">.</span><span class="ident" id="5671288"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671290">.</span><span class="ident" id="5671291"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="5671309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5671312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5671315">return</span>&nbsp;<span class="builtintype" id="5671322">int64</span><span class="op" id="5671327">(</span><span class="ident" id="5671328"><a href="/gostd/archive/zip/struct.go.html#5671201">fi</a></span><span class="op" id="5671330">.</span><span class="ident" id="5671331"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671333">.</span><span class="ident" id="5671334"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span><span class="op" id="5671350">)</span><br>
<span class="lineno"></span><span class="op" id="5671352">}</span><br>
<span class="lineno">110</span><span class="keyword" id="5671354">func</span>&nbsp;<span class="op" id="5671359">(</span><span class="ident" id="5671360">fi</span>&nbsp;<span class="ident" id="5671363"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671377">)</span>&nbsp;<span class="ident" id="5671379">IsDir</span><span class="op" id="5671384">(</span><span class="op" id="5671385">)</span>&nbsp;<span class="builtintype" id="5671387">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5671399">{</span>&nbsp;<span class="keyword" id="5671401">return</span>&nbsp;<span class="ident" id="5671408"><a href="/gostd/archive/zip/struct.go.html#5671360">fi</a></span><span class="op" id="5671410">.</span><span class="ident" id="5671411"><a href="/gostd/archive/zip/struct.go.html#5671525">Mode</a></span><span class="op" id="5671415">(</span><span class="op" id="5671416">)</span><span class="op" id="5671417">.</span><span class="ident" id="5671418"><a href="/gostd/os/types.go.html#2475152">IsDir</a></span><span class="op" id="5671423">(</span><span class="op" id="5671424">)</span>&nbsp;<span class="op" id="5671426">}</span><br>
<span class="lineno"></span><span class="keyword" id="5671428">func</span>&nbsp;<span class="op" id="5671433">(</span><span class="ident" id="5671434">fi</span>&nbsp;<span class="ident" id="5671437"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671451">)</span>&nbsp;<span class="ident" id="5671453">ModTime</span><span class="op" id="5671460">(</span><span class="op" id="5671461">)</span>&nbsp;<span class="ident" id="5671463"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5671467">.</span><span class="ident" id="5671468"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="op" id="5671473">{</span>&nbsp;<span class="keyword" id="5671475">return</span>&nbsp;<span class="ident" id="5671482"><a href="/gostd/archive/zip/struct.go.html#5671434">fi</a></span><span class="op" id="5671484">.</span><span class="ident" id="5671485"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671487">.</span><span class="ident" id="5671488"><a href="/gostd/archive/zip/struct.go.html#5673632">ModTime</a></span><span class="op" id="5671495">(</span><span class="op" id="5671496">)</span>&nbsp;<span class="op" id="5671498">}</span><br>
<span class="lineno"></span><span class="keyword" id="5671500">func</span>&nbsp;<span class="op" id="5671505">(</span><span class="ident" id="5671506">fi</span>&nbsp;<span class="ident" id="5671509"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671523">)</span>&nbsp;<span class="ident" id="5671525">Mode</span><span class="op" id="5671529">(</span><span class="op" id="5671530">)</span>&nbsp;<span class="ident" id="5671532"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5671534">.</span><span class="ident" id="5671535"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span>&nbsp;&nbsp;<span class="op" id="5671545">{</span>&nbsp;<span class="keyword" id="5671547">return</span>&nbsp;<span class="ident" id="5671554"><a href="/gostd/archive/zip/struct.go.html#5671506">fi</a></span><span class="op" id="5671556">.</span><span class="ident" id="5671557"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span><span class="op" id="5671559">.</span><span class="ident" id="5671560"><a href="/gostd/archive/zip/struct.go.html#5674391">Mode</a></span><span class="op" id="5671564">(</span><span class="op" id="5671565">)</span>&nbsp;<span class="op" id="5671567">}</span><br>
<span class="lineno"></span><span class="keyword" id="5671569">func</span>&nbsp;<span class="op" id="5671574">(</span><span class="ident" id="5671575">fi</span>&nbsp;<span class="ident" id="5671578"><a href="/gostd/archive/zip/struct.go.html#5671080">headerFileInfo</a></span><span class="op" id="5671592">)</span>&nbsp;<span class="ident" id="5671594">Sys</span><span class="op" id="5671597">(</span><span class="op" id="5671598">)</span>&nbsp;<span class="keyword" id="5671600">interface</span><span class="op" id="5671609">{</span><span class="op" id="5671610">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5671614">{</span>&nbsp;<span class="keyword" id="5671616">return</span>&nbsp;<span class="ident" id="5671623"><a href="/gostd/archive/zip/struct.go.html#5671575">fi</a></span><span class="op" id="5671625">.</span><span class="ident" id="5671626"><a href="/gostd/archive/zip/struct.go.html#5671105">fh</a></span>&nbsp;<span class="op" id="5671629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5671632">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;FileHeader&nbsp;from&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5671699">//&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="comment" id="5671715">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5671782">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5671853">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno">120</span><span class="keyword" id="5671922">func</span>&nbsp;<span class="ident" id="5671927">FileInfoHeader</span><span class="op" id="5671941">(</span><span class="ident" id="5671942">fi</span>&nbsp;<span class="ident" id="5671945"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5671947">.</span><span class="ident" id="5671948"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5671956">)</span>&nbsp;<span class="op" id="5671958">(</span><span class="op" id="5671959">*</span><span class="ident" id="5671960"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5671970">,</span>&nbsp;<span class="builtintype" id="5671972">error</span><span class="op" id="5671977">)</span>&nbsp;<span class="op" id="5671979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5671982">size</span>&nbsp;<span class="op" id="5671987">:=</span>&nbsp;<span class="ident" id="5671990"><a href="/gostd/archive/zip/struct.go.html#5671942">fi</a></span><span class="op" id="5671992">.</span><span class="ident" id="5671993"><a href="/gostd/os/types.go.html#2472528">Size</a></span><span class="op" id="5671997">(</span><span class="op" id="5671998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672001">fh</span>&nbsp;<span class="op" id="5672004">:=</span>&nbsp;<span class="op" id="5672007">&amp;</span><span class="ident" id="5672008"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5672018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672022"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="5672026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672042"><a href="/gostd/archive/zip/struct.go.html#5671942">fi</a></span><span class="op" id="5672044">.</span><span class="ident" id="5672045"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="5672049">(</span><span class="op" id="5672050">)</span><span class="op" id="5672051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672055"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="5672073">:</span>&nbsp;<span class="builtintype" id="5672075">uint64</span><span class="op" id="5672081">(</span><span class="ident" id="5672082"><a href="/gostd/archive/zip/struct.go.html#5671982">size</a></span><span class="op" id="5672086">)</span><span class="op" id="5672087">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5672090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672093"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672095">.</span><span class="ident" id="5672096"><a href="/gostd/archive/zip/struct.go.html#5673845">SetModTime</a></span><span class="op" id="5672106">(</span><span class="ident" id="5672107"><a href="/gostd/archive/zip/struct.go.html#5671942">fi</a></span><span class="op" id="5672109">.</span><span class="ident" id="5672110"><a href="/gostd/os/types.go.html#2472654">ModTime</a></span><span class="op" id="5672117">(</span><span class="op" id="5672118">)</span><span class="op" id="5672119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672122"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672124">.</span><span class="ident" id="5672125"><a href="/gostd/archive/zip/struct.go.html#5674812">SetMode</a></span><span class="op" id="5672132">(</span><span class="ident" id="5672133"><a href="/gostd/archive/zip/struct.go.html#5671942">fi</a></span><span class="op" id="5672135">.</span><span class="ident" id="5672136"><a href="/gostd/os/types.go.html#2472615">Mode</a></span><span class="op" id="5672140">(</span><span class="op" id="5672141">)</span><span class="op" id="5672142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5672145">if</span>&nbsp;<span class="ident" id="5672148"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672150">.</span><span class="ident" id="5672151"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span>&nbsp;<span class="op" id="5672170">&gt;</span>&nbsp;<span class="ident" id="5672172"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span>&nbsp;<span class="op" id="5672182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672186"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672188">.</span><span class="ident" id="5672189"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span>&nbsp;<span class="op" id="5672206">=</span>&nbsp;<span class="ident" id="5672208"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5672219">}</span>&nbsp;<span class="keyword" id="5672221">else</span>&nbsp;<span class="op" id="5672226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672230"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672232">.</span><span class="ident" id="5672233"><a href="/gostd/archive/zip/struct.go.html#5670664">UncompressedSize</a></span>&nbsp;<span class="op" id="5672250">=</span>&nbsp;<span class="builtintype" id="5672252">uint32</span><span class="op" id="5672258">(</span><span class="ident" id="5672259"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672261">.</span><span class="ident" id="5672262"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span><span class="op" id="5672280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5672283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5672286">return</span>&nbsp;<span class="ident" id="5672293"><a href="/gostd/archive/zip/struct.go.html#5672001">fh</a></span><span class="op" id="5672295">,</span>&nbsp;<span class="builtintype" id="5672297">nil</span><br>
<span class="lineno"></span><span class="op" id="5672301">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="5672304">type</span>&nbsp;<span class="ident" id="5672309">directoryEnd</span>&nbsp;<span class="keyword" id="5672322">struct</span>&nbsp;<span class="op" id="5672329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672332">diskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672351">uint32</span>&nbsp;<span class="comment" id="5672358">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672369">dirDiskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672388">uint32</span>&nbsp;<span class="comment" id="5672395">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672406">dirRecordsThisDisk</span>&nbsp;<span class="builtintype" id="5672425">uint64</span>&nbsp;<span class="comment" id="5672432">//&nbsp;unused</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672443">directoryRecords</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672462">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672470">directorySize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672489">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672497">directoryOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672516">uint64</span>&nbsp;<span class="comment" id="5672523">//&nbsp;relative&nbsp;to&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672544">commentLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672563">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672571">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672590">string</span><br>
<span class="lineno">145</span><span class="op" id="5672597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5672600">//&nbsp;msDosTimeToTime&nbsp;converts&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time&nbsp;into&nbsp;a&nbsp;time.Time.</span><br>
<span class="lineno"></span><span class="comment" id="5672670">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="5672695">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724247(v=VS.85).aspx</span><br>
<span class="lineno">150</span><span class="keyword" id="5672766">func</span>&nbsp;<span class="ident" id="5672771">msDosTimeToTime</span><span class="op" id="5672786">(</span><span class="ident" id="5672787">dosDate</span><span class="op" id="5672794">,</span>&nbsp;<span class="ident" id="5672796">dosTime</span>&nbsp;<span class="builtintype" id="5672804">uint16</span><span class="op" id="5672810">)</span>&nbsp;<span class="ident" id="5672812"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5672816">.</span><span class="ident" id="5672817"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="op" id="5672822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5672825">return</span>&nbsp;<span class="ident" id="5672832"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5672836">.</span><span class="ident" id="5672837"><a href="/gostd/time/time.go.html#2750075">Date</a></span><span class="op" id="5672841">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5672845">//&nbsp;date&nbsp;bits&nbsp;0-4:&nbsp;day&nbsp;of&nbsp;month;&nbsp;5-8:&nbsp;month;&nbsp;9-15:&nbsp;years&nbsp;since&nbsp;1980</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672914">int</span><span class="op" id="5672917">(</span><span class="ident" id="5672918"><a href="/gostd/archive/zip/struct.go.html#5672787">dosDate</a></span><span class="op" id="5672925">&gt;&gt;</span><span class="num" id="5672927">9</span><span class="op" id="5672928">+</span><span class="num" id="5672929">1980</span><span class="op" id="5672933">)</span><span class="op" id="5672934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5672938"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5672942">.</span><span class="ident" id="5672943"><a href="/gostd/time/time.go.html#2723332">Month</a></span><span class="op" id="5672948">(</span><span class="ident" id="5672949"><a href="/gostd/archive/zip/struct.go.html#5672787">dosDate</a></span><span class="op" id="5672956">&gt;&gt;</span><span class="num" id="5672958">5</span><span class="op" id="5672959">&amp;</span><span class="num" id="5672960">0xf</span><span class="op" id="5672963">)</span><span class="op" id="5672964">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5672968">int</span><span class="op" id="5672971">(</span><span class="ident" id="5672972"><a href="/gostd/archive/zip/struct.go.html#5672787">dosDate</a></span><span class="op" id="5672979">&amp;</span><span class="num" id="5672980">0x1f</span><span class="op" id="5672984">)</span><span class="op" id="5672985">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5672990">//&nbsp;time&nbsp;bits&nbsp;0-4:&nbsp;second/2;&nbsp;5-10:&nbsp;minute;&nbsp;11-15:&nbsp;hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5673046">int</span><span class="op" id="5673049">(</span><span class="ident" id="5673050"><a href="/gostd/archive/zip/struct.go.html#5672796">dosTime</a></span><span class="op" id="5673057">&gt;&gt;</span><span class="num" id="5673059">11</span><span class="op" id="5673061">)</span><span class="op" id="5673062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5673066">int</span><span class="op" id="5673069">(</span><span class="ident" id="5673070"><a href="/gostd/archive/zip/struct.go.html#5672796">dosTime</a></span><span class="op" id="5673077">&gt;&gt;</span><span class="num" id="5673079">5</span><span class="op" id="5673080">&amp;</span><span class="num" id="5673081">0x3f</span><span class="op" id="5673085">)</span><span class="op" id="5673086">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5673090">int</span><span class="op" id="5673093">(</span><span class="ident" id="5673094"><a href="/gostd/archive/zip/struct.go.html#5672796">dosTime</a></span><span class="op" id="5673101">&amp;</span><span class="num" id="5673102">0x1f</span><span class="op" id="5673106">*</span><span class="num" id="5673107">2</span><span class="op" id="5673108">)</span><span class="op" id="5673109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="5673113">0</span><span class="op" id="5673114">,</span>&nbsp;<span class="comment" id="5673116">//&nbsp;nanoseconds</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5673134"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5673138">.</span><span class="ident" id="5673139"><a href="/gostd/time/zoneinfo.go.html#2756102">UTC</a></span><span class="op" id="5673142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5673145">)</span><br>
<span class="lineno">165</span><span class="op" id="5673147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5673150">//&nbsp;timeToMsDosTime&nbsp;converts&nbsp;a&nbsp;time.Time&nbsp;to&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="5673218">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="5673243">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724274(v=VS.85).aspx</span><br>
<span class="lineno">170</span><span class="keyword" id="5673314">func</span>&nbsp;<span class="ident" id="5673319">timeToMsDosTime</span><span class="op" id="5673334">(</span><span class="ident" id="5673335">t</span>&nbsp;<span class="ident" id="5673337"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5673341">.</span><span class="ident" id="5673342"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5673346">)</span>&nbsp;<span class="op" id="5673348">(</span><span class="ident" id="5673349">fDate</span>&nbsp;<span class="builtintype" id="5673355">uint16</span><span class="op" id="5673361">,</span>&nbsp;<span class="ident" id="5673363">fTime</span>&nbsp;<span class="builtintype" id="5673369">uint16</span><span class="op" id="5673375">)</span>&nbsp;<span class="op" id="5673377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5673380"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span>&nbsp;<span class="op" id="5673382">=</span>&nbsp;<span class="ident" id="5673384"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673385">.</span><span class="ident" id="5673386"><a href="/gostd/time/time.go.html#2743488">In</a></span><span class="op" id="5673388">(</span><span class="ident" id="5673389"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5673393">.</span><span class="ident" id="5673394"><a href="/gostd/time/zoneinfo.go.html#2756102">UTC</a></span><span class="op" id="5673397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5673400"><a href="/gostd/archive/zip/struct.go.html#5673349">fDate</a></span>&nbsp;<span class="op" id="5673406">=</span>&nbsp;<span class="builtintype" id="5673408">uint16</span><span class="op" id="5673414">(</span><span class="ident" id="5673415"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673416">.</span><span class="ident" id="5673417"><a href="/gostd/time/time.go.html#2730511">Day</a></span><span class="op" id="5673420">(</span><span class="op" id="5673421">)</span>&nbsp;<span class="op" id="5673423">+</span>&nbsp;<span class="builtintype" id="5673425">int</span><span class="op" id="5673428">(</span><span class="ident" id="5673429"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673430">.</span><span class="ident" id="5673431"><a href="/gostd/time/time.go.html#2730380">Month</a></span><span class="op" id="5673436">(</span><span class="op" id="5673437">)</span><span class="op" id="5673438">)</span><span class="op" id="5673439">&lt;&lt;</span><span class="num" id="5673441">5</span>&nbsp;<span class="op" id="5673443">+</span>&nbsp;<span class="op" id="5673445">(</span><span class="ident" id="5673446"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673447">.</span><span class="ident" id="5673448"><a href="/gostd/time/time.go.html#2730250">Year</a></span><span class="op" id="5673452">(</span><span class="op" id="5673453">)</span><span class="op" id="5673454">-</span><span class="num" id="5673455">1980</span><span class="op" id="5673459">)</span><span class="op" id="5673460">&lt;&lt;</span><span class="num" id="5673462">9</span><span class="op" id="5673463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5673466"><a href="/gostd/archive/zip/struct.go.html#5673363">fTime</a></span>&nbsp;<span class="op" id="5673472">=</span>&nbsp;<span class="builtintype" id="5673474">uint16</span><span class="op" id="5673480">(</span><span class="ident" id="5673481"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673482">.</span><span class="ident" id="5673483"><a href="/gostd/time/time.go.html#2733586">Second</a></span><span class="op" id="5673489">(</span><span class="op" id="5673490">)</span><span class="op" id="5673491">/</span><span class="num" id="5673492">2</span>&nbsp;<span class="op" id="5673494">+</span>&nbsp;<span class="ident" id="5673496"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673497">.</span><span class="ident" id="5673498"><a href="/gostd/time/time.go.html#2733407">Minute</a></span><span class="op" id="5673504">(</span><span class="op" id="5673505">)</span><span class="op" id="5673506">&lt;&lt;</span><span class="num" id="5673508">5</span>&nbsp;<span class="op" id="5673510">+</span>&nbsp;<span class="ident" id="5673512"><a href="/gostd/archive/zip/struct.go.html#5673335">t</a></span><span class="op" id="5673513">.</span><span class="ident" id="5673514"><a href="/gostd/time/time.go.html#2733235">Hour</a></span><span class="op" id="5673518">(</span><span class="op" id="5673519">)</span><span class="op" id="5673520">&lt;&lt;</span><span class="num" id="5673522">11</span><span class="op" id="5673524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5673527">return</span><br>
<span class="lineno">175</span><span class="op" id="5673534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5673537">//&nbsp;ModTime&nbsp;returns&nbsp;the&nbsp;modification&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="5673586">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="keyword" id="5673611">func</span>&nbsp;<span class="op" id="5673616">(</span><span class="ident" id="5673617">h</span>&nbsp;<span class="op" id="5673619">*</span><span class="ident" id="5673620"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5673630">)</span>&nbsp;<span class="ident" id="5673632">ModTime</span><span class="op" id="5673639">(</span><span class="op" id="5673640">)</span>&nbsp;<span class="ident" id="5673642"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5673646">.</span><span class="ident" id="5673647"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="op" id="5673652">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5673655">return</span>&nbsp;<span class="ident" id="5673662"><a href="/gostd/archive/zip/struct.go.html#5672771">msDosTimeToTime</a></span><span class="op" id="5673677">(</span><span class="ident" id="5673678"><a href="/gostd/archive/zip/struct.go.html#5673617">h</a></span><span class="op" id="5673679">.</span><span class="ident" id="5673680"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="5673692">,</span>&nbsp;<span class="ident" id="5673694"><a href="/gostd/archive/zip/struct.go.html#5673617">h</a></span><span class="op" id="5673695">.</span><span class="ident" id="5673696"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span><span class="op" id="5673708">)</span><br>
<span class="lineno"></span><span class="op" id="5673710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5673713">//&nbsp;SetModTime&nbsp;sets&nbsp;the&nbsp;ModifiedTime&nbsp;and&nbsp;ModifiedDate&nbsp;fields&nbsp;to&nbsp;the&nbsp;given&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="5673799">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno">185</span><span class="keyword" id="5673824">func</span>&nbsp;<span class="op" id="5673829">(</span><span class="ident" id="5673830">h</span>&nbsp;<span class="op" id="5673832">*</span><span class="ident" id="5673833"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5673843">)</span>&nbsp;<span class="ident" id="5673845">SetModTime</span><span class="op" id="5673855">(</span><span class="ident" id="5673856">t</span>&nbsp;<span class="ident" id="5673858"><a href="/gostd/archive/zip/struct.go.html#5668821">time</a></span><span class="op" id="5673862">.</span><span class="ident" id="5673863"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="5673867">)</span>&nbsp;<span class="op" id="5673869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5673872"><a href="/gostd/archive/zip/struct.go.html#5673830">h</a></span><span class="op" id="5673873">.</span><span class="ident" id="5673874"><a href="/gostd/archive/zip/struct.go.html#5670532">ModifiedDate</a></span><span class="op" id="5673886">,</span>&nbsp;<span class="ident" id="5673888"><a href="/gostd/archive/zip/struct.go.html#5673830">h</a></span><span class="op" id="5673889">.</span><span class="ident" id="5673890"><a href="/gostd/archive/zip/struct.go.html#5670490">ModifiedTime</a></span>&nbsp;<span class="op" id="5673903">=</span>&nbsp;<span class="ident" id="5673905"><a href="/gostd/archive/zip/struct.go.html#5673319">timeToMsDosTime</a></span><span class="op" id="5673920">(</span><span class="ident" id="5673921"><a href="/gostd/archive/zip/struct.go.html#5673856">t</a></span><span class="op" id="5673922">)</span><br>
<span class="lineno"></span><span class="op" id="5673924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5673927">const</span>&nbsp;<span class="op" id="5673933">(</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5673936">//&nbsp;Unix&nbsp;constants.&nbsp;The&nbsp;specification&nbsp;doesn&#39;t&nbsp;mention&nbsp;them,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5673996">//&nbsp;but&nbsp;these&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;values&nbsp;agreed&nbsp;on&nbsp;by&nbsp;tools.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674052">s_IFMT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5674061">=</span>&nbsp;<span class="num" id="5674063">0xf000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674071">s_IFSOCK</span>&nbsp;<span class="op" id="5674080">=</span>&nbsp;<span class="num" id="5674082">0xc000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674090">s_IFLNK</span>&nbsp;&nbsp;<span class="op" id="5674099">=</span>&nbsp;<span class="num" id="5674101">0xa000</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674109">s_IFREG</span>&nbsp;&nbsp;<span class="op" id="5674118">=</span>&nbsp;<span class="num" id="5674120">0x8000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674128">s_IFBLK</span>&nbsp;&nbsp;<span class="op" id="5674137">=</span>&nbsp;<span class="num" id="5674139">0x6000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674147">s_IFDIR</span>&nbsp;&nbsp;<span class="op" id="5674156">=</span>&nbsp;<span class="num" id="5674158">0x4000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674166">s_IFCHR</span>&nbsp;&nbsp;<span class="op" id="5674175">=</span>&nbsp;<span class="num" id="5674177">0x2000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674185">s_IFIFO</span>&nbsp;&nbsp;<span class="op" id="5674194">=</span>&nbsp;<span class="num" id="5674196">0x1000</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674204">s_ISUID</span>&nbsp;&nbsp;<span class="op" id="5674213">=</span>&nbsp;<span class="num" id="5674215">0x800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674222">s_ISGID</span>&nbsp;&nbsp;<span class="op" id="5674231">=</span>&nbsp;<span class="num" id="5674233">0x400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674240">s_ISVTX</span>&nbsp;&nbsp;<span class="op" id="5674249">=</span>&nbsp;<span class="num" id="5674251">0x200</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674259">msdosDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5674273">=</span>&nbsp;<span class="num" id="5674275">0x10</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674281">msdosReadOnly</span>&nbsp;<span class="op" id="5674295">=</span>&nbsp;<span class="num" id="5674297">0x01</span><br>
<span class="lineno"></span><span class="op" id="5674302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5674305">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5674370">func</span>&nbsp;<span class="op" id="5674375">(</span><span class="ident" id="5674376">h</span>&nbsp;<span class="op" id="5674378">*</span><span class="ident" id="5674379"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5674389">)</span>&nbsp;<span class="ident" id="5674391">Mode</span><span class="op" id="5674395">(</span><span class="op" id="5674396">)</span>&nbsp;<span class="op" id="5674398">(</span><span class="ident" id="5674399">mode</span>&nbsp;<span class="ident" id="5674404"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5674406">.</span><span class="ident" id="5674407"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5674415">)</span>&nbsp;<span class="op" id="5674417">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5674420">switch</span>&nbsp;<span class="ident" id="5674427"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674428">.</span><span class="ident" id="5674429"><a href="/gostd/archive/zip/struct.go.html#5670382">CreatorVersion</a></span>&nbsp;<span class="op" id="5674444">&gt;&gt;</span>&nbsp;<span class="num" id="5674447">8</span>&nbsp;<span class="op" id="5674449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5674452">case</span>&nbsp;<span class="ident" id="5674457"><a href="/gostd/archive/zip/struct.go.html#5669719">creatorUnix</a></span><span class="op" id="5674468">,</span>&nbsp;<span class="ident" id="5674470"><a href="/gostd/archive/zip/struct.go.html#5669778">creatorMacOSX</a></span><span class="op" id="5674483">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674487"><a href="/gostd/archive/zip/struct.go.html#5674399">mode</a></span>&nbsp;<span class="op" id="5674492">=</span>&nbsp;<span class="ident" id="5674494"><a href="/gostd/archive/zip/struct.go.html#5676053">unixModeToFileMode</a></span><span class="op" id="5674512">(</span><span class="ident" id="5674513"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674514">.</span><span class="ident" id="5674515"><a href="/gostd/archive/zip/struct.go.html#5670810">ExternalAttrs</a></span>&nbsp;<span class="op" id="5674529">&gt;&gt;</span>&nbsp;<span class="num" id="5674532">16</span><span class="op" id="5674534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5674537">case</span>&nbsp;<span class="ident" id="5674542"><a href="/gostd/archive/zip/struct.go.html#5669738">creatorNTFS</a></span><span class="op" id="5674553">,</span>&nbsp;<span class="ident" id="5674555"><a href="/gostd/archive/zip/struct.go.html#5669758">creatorVFAT</a></span><span class="op" id="5674566">,</span>&nbsp;<span class="ident" id="5674568"><a href="/gostd/archive/zip/struct.go.html#5669700">creatorFAT</a></span><span class="op" id="5674578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674582"><a href="/gostd/archive/zip/struct.go.html#5674399">mode</a></span>&nbsp;<span class="op" id="5674587">=</span>&nbsp;<span class="ident" id="5674589"><a href="/gostd/archive/zip/struct.go.html#5675318">msdosModeToFileMode</a></span><span class="op" id="5674608">(</span><span class="ident" id="5674609"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674610">.</span><span class="ident" id="5674611"><a href="/gostd/archive/zip/struct.go.html#5670810">ExternalAttrs</a></span><span class="op" id="5674624">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5674627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5674630">if</span>&nbsp;<span class="builtinfunc" id="5674633">len</span><span class="op" id="5674636">(</span><span class="ident" id="5674637"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674638">.</span><span class="ident" id="5674639"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="5674643">)</span>&nbsp;<span class="op" id="5674645">&gt;</span>&nbsp;<span class="num" id="5674647">0</span>&nbsp;<span class="op" id="5674649">&amp;&amp;</span>&nbsp;<span class="ident" id="5674652"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674653">.</span><span class="ident" id="5674654"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="5674658">[</span><span class="builtinfunc" id="5674659">len</span><span class="op" id="5674662">(</span><span class="ident" id="5674663"><a href="/gostd/archive/zip/struct.go.html#5674376">h</a></span><span class="op" id="5674664">.</span><span class="ident" id="5674665"><a href="/gostd/archive/zip/struct.go.html#5670368">Name</a></span><span class="op" id="5674669">)</span><span class="op" id="5674670">-</span><span class="num" id="5674671">1</span><span class="op" id="5674672">]</span>&nbsp;<span class="op" id="5674674">==</span>&nbsp;<span class="string" id="5674677">&#39;/&#39;</span>&nbsp;<span class="op" id="5674681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674685"><a href="/gostd/archive/zip/struct.go.html#5674399">mode</a></span>&nbsp;<span class="op" id="5674690">|=</span>&nbsp;<span class="ident" id="5674693"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5674695">.</span><span class="ident" id="5674696"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5674705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5674708">return</span>&nbsp;<span class="ident" id="5674715"><a href="/gostd/archive/zip/struct.go.html#5674399">mode</a></span><br>
<span class="lineno">220</span><span class="op" id="5674720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5674723">//&nbsp;SetMode&nbsp;changes&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="5674791">func</span>&nbsp;<span class="op" id="5674796">(</span><span class="ident" id="5674797">h</span>&nbsp;<span class="op" id="5674799">*</span><span class="ident" id="5674800"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5674810">)</span>&nbsp;<span class="ident" id="5674812">SetMode</span><span class="op" id="5674819">(</span><span class="ident" id="5674820">mode</span>&nbsp;<span class="ident" id="5674825"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5674827">.</span><span class="ident" id="5674828"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5674836">)</span>&nbsp;<span class="op" id="5674838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674841"><a href="/gostd/archive/zip/struct.go.html#5674797">h</a></span><span class="op" id="5674842">.</span><span class="ident" id="5674843"><a href="/gostd/archive/zip/struct.go.html#5670382">CreatorVersion</a></span>&nbsp;<span class="op" id="5674858">=</span>&nbsp;<span class="ident" id="5674860"><a href="/gostd/archive/zip/struct.go.html#5674797">h</a></span><span class="op" id="5674861">.</span><span class="ident" id="5674862"><a href="/gostd/archive/zip/struct.go.html#5670382">CreatorVersion</a></span><span class="op" id="5674876">&amp;</span><span class="num" id="5674877">0xff</span>&nbsp;<span class="op" id="5674882">|</span>&nbsp;<span class="ident" id="5674884"><a href="/gostd/archive/zip/struct.go.html#5669719">creatorUnix</a></span><span class="op" id="5674895">&lt;&lt;</span><span class="num" id="5674897">8</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5674900"><a href="/gostd/archive/zip/struct.go.html#5674797">h</a></span><span class="op" id="5674901">.</span><span class="ident" id="5674902"><a href="/gostd/archive/zip/struct.go.html#5670810">ExternalAttrs</a></span>&nbsp;<span class="op" id="5674916">=</span>&nbsp;<span class="ident" id="5674918"><a href="/gostd/archive/zip/struct.go.html#5675512">fileModeToUnixMode</a></span><span class="op" id="5674936">(</span><span class="ident" id="5674937"><a href="/gostd/archive/zip/struct.go.html#5674820">mode</a></span><span class="op" id="5674941">)</span>&nbsp;<span class="op" id="5674943">&lt;&lt;</span>&nbsp;<span class="num" id="5674946">16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5674951">//&nbsp;set&nbsp;MSDOS&nbsp;attributes&nbsp;too,&nbsp;as&nbsp;the&nbsp;original&nbsp;zip&nbsp;does.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675007">if</span>&nbsp;<span class="ident" id="5675010"><a href="/gostd/archive/zip/struct.go.html#5674820">mode</a></span><span class="op" id="5675014">&amp;</span><span class="ident" id="5675015"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675017">.</span><span class="ident" id="5675018"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span>&nbsp;<span class="op" id="5675026">!=</span>&nbsp;<span class="num" id="5675029">0</span>&nbsp;<span class="op" id="5675031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675035"><a href="/gostd/archive/zip/struct.go.html#5674797">h</a></span><span class="op" id="5675036">.</span><span class="ident" id="5675037"><a href="/gostd/archive/zip/struct.go.html#5670810">ExternalAttrs</a></span>&nbsp;<span class="op" id="5675051">|=</span>&nbsp;<span class="ident" id="5675054"><a href="/gostd/archive/zip/struct.go.html#5674259">msdosDir</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675067">if</span>&nbsp;<span class="ident" id="5675070"><a href="/gostd/archive/zip/struct.go.html#5674820">mode</a></span><span class="op" id="5675074">&amp;</span><span class="num" id="5675075">0200</span>&nbsp;<span class="op" id="5675080">==</span>&nbsp;<span class="num" id="5675083">0</span>&nbsp;<span class="op" id="5675085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675089"><a href="/gostd/archive/zip/struct.go.html#5674797">h</a></span><span class="op" id="5675090">.</span><span class="ident" id="5675091"><a href="/gostd/archive/zip/struct.go.html#5670810">ExternalAttrs</a></span>&nbsp;<span class="op" id="5675105">|=</span>&nbsp;<span class="ident" id="5675108"><a href="/gostd/archive/zip/struct.go.html#5674281">msdosReadOnly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675123">}</span><br>
<span class="lineno"></span><span class="op" id="5675125">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="5675128">//&nbsp;isZip64&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;exceeds&nbsp;the&nbsp;32&nbsp;bit&nbsp;limit</span><br>
<span class="lineno"></span><span class="keyword" id="5675194">func</span>&nbsp;<span class="op" id="5675199">(</span><span class="ident" id="5675200">fh</span>&nbsp;<span class="op" id="5675203">*</span><span class="ident" id="5675204"><a href="/gostd/archive/zip/struct.go.html#5670169">FileHeader</a></span><span class="op" id="5675214">)</span>&nbsp;<span class="ident" id="5675216">isZip64</span><span class="op" id="5675223">(</span><span class="op" id="5675224">)</span>&nbsp;<span class="builtintype" id="5675226">bool</span>&nbsp;<span class="op" id="5675231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675234">return</span>&nbsp;<span class="ident" id="5675241"><a href="/gostd/archive/zip/struct.go.html#5675200">fh</a></span><span class="op" id="5675243">.</span><span class="ident" id="5675244"><a href="/gostd/archive/zip/struct.go.html#5670729">CompressedSize64</a></span>&nbsp;<span class="op" id="5675261">&gt;</span>&nbsp;<span class="ident" id="5675263"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span>&nbsp;<span class="op" id="5675273">||</span>&nbsp;<span class="ident" id="5675276"><a href="/gostd/archive/zip/struct.go.html#5675200">fh</a></span><span class="op" id="5675278">.</span><span class="ident" id="5675279"><a href="/gostd/archive/zip/struct.go.html#5670756">UncompressedSize64</a></span>&nbsp;<span class="op" id="5675298">&gt;</span>&nbsp;<span class="ident" id="5675300"><a href="/gostd/archive/zip/struct.go.html#5669964">uint32max</a></span><br>
<span class="lineno"></span><span class="op" id="5675310">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="5675313">func</span>&nbsp;<span class="ident" id="5675318">msdosModeToFileMode</span><span class="op" id="5675337">(</span><span class="ident" id="5675338">m</span>&nbsp;<span class="builtintype" id="5675340">uint32</span><span class="op" id="5675346">)</span>&nbsp;<span class="op" id="5675348">(</span><span class="ident" id="5675349">mode</span>&nbsp;<span class="ident" id="5675354"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675356">.</span><span class="ident" id="5675357"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5675365">)</span>&nbsp;<span class="op" id="5675367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675370">if</span>&nbsp;<span class="ident" id="5675373"><a href="/gostd/archive/zip/struct.go.html#5675338">m</a></span><span class="op" id="5675374">&amp;</span><span class="ident" id="5675375"><a href="/gostd/archive/zip/struct.go.html#5674259">msdosDir</a></span>&nbsp;<span class="op" id="5675384">!=</span>&nbsp;<span class="num" id="5675387">0</span>&nbsp;<span class="op" id="5675389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675393"><a href="/gostd/archive/zip/struct.go.html#5675349">mode</a></span>&nbsp;<span class="op" id="5675398">=</span>&nbsp;<span class="ident" id="5675400"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675402">.</span><span class="ident" id="5675403"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span>&nbsp;<span class="op" id="5675411">|</span>&nbsp;<span class="num" id="5675413">0777</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675419">}</span>&nbsp;<span class="keyword" id="5675421">else</span>&nbsp;<span class="op" id="5675426">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675430"><a href="/gostd/archive/zip/struct.go.html#5675349">mode</a></span>&nbsp;<span class="op" id="5675435">=</span>&nbsp;<span class="num" id="5675437">0666</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675446">if</span>&nbsp;<span class="ident" id="5675449"><a href="/gostd/archive/zip/struct.go.html#5675338">m</a></span><span class="op" id="5675450">&amp;</span><span class="ident" id="5675451"><a href="/gostd/archive/zip/struct.go.html#5674281">msdosReadOnly</a></span>&nbsp;<span class="op" id="5675465">!=</span>&nbsp;<span class="num" id="5675468">0</span>&nbsp;<span class="op" id="5675470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675474"><a href="/gostd/archive/zip/struct.go.html#5675349">mode</a></span>&nbsp;<span class="op" id="5675479">&amp;^=</span>&nbsp;<span class="num" id="5675483">0222</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675489">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675492">return</span>&nbsp;<span class="ident" id="5675499"><a href="/gostd/archive/zip/struct.go.html#5675349">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5675504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5675507">func</span>&nbsp;<span class="ident" id="5675512">fileModeToUnixMode</span><span class="op" id="5675530">(</span><span class="ident" id="5675531">mode</span>&nbsp;<span class="ident" id="5675536"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675538">.</span><span class="ident" id="5675539"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5675547">)</span>&nbsp;<span class="builtintype" id="5675549">uint32</span>&nbsp;<span class="op" id="5675556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675559">var</span>&nbsp;<span class="ident" id="5675563">m</span>&nbsp;<span class="builtintype" id="5675565">uint32</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675573">switch</span>&nbsp;<span class="ident" id="5675580"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span>&nbsp;<span class="op" id="5675585">&amp;</span>&nbsp;<span class="ident" id="5675587"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675589">.</span><span class="ident" id="5675590"><a href="/gostd/os/types.go.html#2474498">ModeType</a></span>&nbsp;<span class="op" id="5675599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675602">default</span><span class="op" id="5675609">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675613"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675615">=</span>&nbsp;<span class="ident" id="5675617"><a href="/gostd/archive/zip/struct.go.html#5674109">s_IFREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675626">case</span>&nbsp;<span class="ident" id="5675631"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675633">.</span><span class="ident" id="5675634"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span><span class="op" id="5675641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675645"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675647">=</span>&nbsp;<span class="ident" id="5675649"><a href="/gostd/archive/zip/struct.go.html#5674147">s_IFDIR</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675658">case</span>&nbsp;<span class="ident" id="5675663"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675665">.</span><span class="ident" id="5675666"><a href="/gostd/os/types.go.html#2473870">ModeSymlink</a></span><span class="op" id="5675677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675681"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675683">=</span>&nbsp;<span class="ident" id="5675685"><a href="/gostd/archive/zip/struct.go.html#5674090">s_IFLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675694">case</span>&nbsp;<span class="ident" id="5675699"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675701">.</span><span class="ident" id="5675702"><a href="/gostd/os/types.go.html#2474004">ModeNamedPipe</a></span><span class="op" id="5675715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675719"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675721">=</span>&nbsp;<span class="ident" id="5675723"><a href="/gostd/archive/zip/struct.go.html#5674185">s_IFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675732">case</span>&nbsp;<span class="ident" id="5675737"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675739">.</span><span class="ident" id="5675740"><a href="/gostd/os/types.go.html#2474076">ModeSocket</a></span><span class="op" id="5675750">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675754"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675756">=</span>&nbsp;<span class="ident" id="5675758"><a href="/gostd/archive/zip/struct.go.html#5674071">s_IFSOCK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675768">case</span>&nbsp;<span class="ident" id="5675773"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675775">.</span><span class="ident" id="5675776"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><span class="op" id="5675786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675790">if</span>&nbsp;<span class="ident" id="5675793"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span><span class="op" id="5675797">&amp;</span><span class="ident" id="5675798"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675800">.</span><span class="ident" id="5675801"><a href="/gostd/os/types.go.html#2474271">ModeCharDevice</a></span>&nbsp;<span class="op" id="5675816">!=</span>&nbsp;<span class="num" id="5675819">0</span>&nbsp;<span class="op" id="5675821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675826"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675828">=</span>&nbsp;<span class="ident" id="5675830"><a href="/gostd/archive/zip/struct.go.html#5674166">s_IFCHR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675840">}</span>&nbsp;<span class="keyword" id="5675842">else</span>&nbsp;<span class="op" id="5675847">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675852"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675854">=</span>&nbsp;<span class="ident" id="5675856"><a href="/gostd/archive/zip/struct.go.html#5674128">s_IFBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675872">if</span>&nbsp;<span class="ident" id="5675875"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span><span class="op" id="5675879">&amp;</span><span class="ident" id="5675880"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675882">.</span><span class="ident" id="5675883"><a href="/gostd/os/types.go.html#2474149">ModeSetuid</a></span>&nbsp;<span class="op" id="5675894">!=</span>&nbsp;<span class="num" id="5675897">0</span>&nbsp;<span class="op" id="5675899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675903"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675905">|=</span>&nbsp;<span class="ident" id="5675908"><a href="/gostd/archive/zip/struct.go.html#5674204">s_ISUID</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675920">if</span>&nbsp;<span class="ident" id="5675923"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span><span class="op" id="5675927">&amp;</span><span class="ident" id="5675928"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675930">.</span><span class="ident" id="5675931"><a href="/gostd/os/types.go.html#2474210">ModeSetgid</a></span>&nbsp;<span class="op" id="5675942">!=</span>&nbsp;<span class="num" id="5675945">0</span>&nbsp;<span class="op" id="5675947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675951"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5675953">|=</span>&nbsp;<span class="ident" id="5675956"><a href="/gostd/archive/zip/struct.go.html#5674222">s_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5675965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5675968">if</span>&nbsp;<span class="ident" id="5675971"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span><span class="op" id="5675975">&amp;</span><span class="ident" id="5675976"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5675978">.</span><span class="ident" id="5675979"><a href="/gostd/os/types.go.html#2474371">ModeSticky</a></span>&nbsp;<span class="op" id="5675990">!=</span>&nbsp;<span class="num" id="5675993">0</span>&nbsp;<span class="op" id="5675995">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5675999"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5676001">|=</span>&nbsp;<span class="ident" id="5676004"><a href="/gostd/archive/zip/struct.go.html#5674240">s_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676016">return</span>&nbsp;<span class="ident" id="5676023"><a href="/gostd/archive/zip/struct.go.html#5675563">m</a></span>&nbsp;<span class="op" id="5676025">|</span>&nbsp;<span class="builtintype" id="5676027">uint32</span><span class="op" id="5676033">(</span><span class="ident" id="5676034"><a href="/gostd/archive/zip/struct.go.html#5675531">mode</a></span><span class="op" id="5676038">&amp;</span><span class="num" id="5676039">0777</span><span class="op" id="5676043">)</span><br>
<span class="lineno"></span><span class="op" id="5676045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5676048">func</span>&nbsp;<span class="ident" id="5676053">unixModeToFileMode</span><span class="op" id="5676071">(</span><span class="ident" id="5676072">m</span>&nbsp;<span class="builtintype" id="5676074">uint32</span><span class="op" id="5676080">)</span>&nbsp;<span class="ident" id="5676082"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676084">.</span><span class="ident" id="5676085"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span>&nbsp;<span class="op" id="5676094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676097">mode</span>&nbsp;<span class="op" id="5676102">:=</span>&nbsp;<span class="ident" id="5676105"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676107">.</span><span class="ident" id="5676108"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5676116">(</span><span class="ident" id="5676117"><a href="/gostd/archive/zip/struct.go.html#5676072">m</a></span>&nbsp;<span class="op" id="5676119">&amp;</span>&nbsp;<span class="num" id="5676121">0777</span><span class="op" id="5676125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676128">switch</span>&nbsp;<span class="ident" id="5676135"><a href="/gostd/archive/zip/struct.go.html#5676072">m</a></span>&nbsp;<span class="op" id="5676137">&amp;</span>&nbsp;<span class="ident" id="5676139"><a href="/gostd/archive/zip/struct.go.html#5674052">s_IFMT</a></span>&nbsp;<span class="op" id="5676146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676149">case</span>&nbsp;<span class="ident" id="5676154"><a href="/gostd/archive/zip/struct.go.html#5674128">s_IFBLK</a></span><span class="op" id="5676161">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676165"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676170">|=</span>&nbsp;<span class="ident" id="5676173"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676175">.</span><span class="ident" id="5676176"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676188">case</span>&nbsp;<span class="ident" id="5676193"><a href="/gostd/archive/zip/struct.go.html#5674166">s_IFCHR</a></span><span class="op" id="5676200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676204"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676209">|=</span>&nbsp;<span class="ident" id="5676212"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676214">.</span><span class="ident" id="5676215"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span>&nbsp;<span class="op" id="5676226">|</span>&nbsp;<span class="ident" id="5676228"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676230">.</span><span class="ident" id="5676231"><a href="/gostd/os/types.go.html#2474271">ModeCharDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676247">case</span>&nbsp;<span class="ident" id="5676252"><a href="/gostd/archive/zip/struct.go.html#5674147">s_IFDIR</a></span><span class="op" id="5676259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676263"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676268">|=</span>&nbsp;<span class="ident" id="5676271"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676273">.</span><span class="ident" id="5676274"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676283">case</span>&nbsp;<span class="ident" id="5676288"><a href="/gostd/archive/zip/struct.go.html#5674185">s_IFIFO</a></span><span class="op" id="5676295">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676299"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676304">|=</span>&nbsp;<span class="ident" id="5676307"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676309">.</span><span class="ident" id="5676310"><a href="/gostd/os/types.go.html#2474004">ModeNamedPipe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676325">case</span>&nbsp;<span class="ident" id="5676330"><a href="/gostd/archive/zip/struct.go.html#5674090">s_IFLNK</a></span><span class="op" id="5676337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676341"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676346">|=</span>&nbsp;<span class="ident" id="5676349"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676351">.</span><span class="ident" id="5676352"><a href="/gostd/os/types.go.html#2473870">ModeSymlink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676365">case</span>&nbsp;<span class="ident" id="5676370"><a href="/gostd/archive/zip/struct.go.html#5674109">s_IFREG</a></span><span class="op" id="5676377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5676381">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676399">case</span>&nbsp;<span class="ident" id="5676404"><a href="/gostd/archive/zip/struct.go.html#5674071">s_IFSOCK</a></span><span class="op" id="5676412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676416"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676421">|=</span>&nbsp;<span class="ident" id="5676424"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676426">.</span><span class="ident" id="5676427"><a href="/gostd/os/types.go.html#2474076">ModeSocket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676442">if</span>&nbsp;<span class="ident" id="5676445"><a href="/gostd/archive/zip/struct.go.html#5676072">m</a></span><span class="op" id="5676446">&amp;</span><span class="ident" id="5676447"><a href="/gostd/archive/zip/struct.go.html#5674222">s_ISGID</a></span>&nbsp;<span class="op" id="5676455">!=</span>&nbsp;<span class="num" id="5676458">0</span>&nbsp;<span class="op" id="5676460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676464"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676469">|=</span>&nbsp;<span class="ident" id="5676472"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676474">.</span><span class="ident" id="5676475"><a href="/gostd/os/types.go.html#2474210">ModeSetgid</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676490">if</span>&nbsp;<span class="ident" id="5676493"><a href="/gostd/archive/zip/struct.go.html#5676072">m</a></span><span class="op" id="5676494">&amp;</span><span class="ident" id="5676495"><a href="/gostd/archive/zip/struct.go.html#5674204">s_ISUID</a></span>&nbsp;<span class="op" id="5676503">!=</span>&nbsp;<span class="num" id="5676506">0</span>&nbsp;<span class="op" id="5676508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676512"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676517">|=</span>&nbsp;<span class="ident" id="5676520"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676522">.</span><span class="ident" id="5676523"><a href="/gostd/os/types.go.html#2474149">ModeSetuid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676538">if</span>&nbsp;<span class="ident" id="5676541"><a href="/gostd/archive/zip/struct.go.html#5676072">m</a></span><span class="op" id="5676542">&amp;</span><span class="ident" id="5676543"><a href="/gostd/archive/zip/struct.go.html#5674240">s_ISVTX</a></span>&nbsp;<span class="op" id="5676551">!=</span>&nbsp;<span class="num" id="5676554">0</span>&nbsp;<span class="op" id="5676556">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676560"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span>&nbsp;<span class="op" id="5676565">|=</span>&nbsp;<span class="ident" id="5676568"><a href="/gostd/archive/zip/struct.go.html#5668807">os</a></span><span class="op" id="5676570">.</span><span class="ident" id="5676571"><a href="/gostd/os/types.go.html#2474371">ModeSticky</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676586">return</span>&nbsp;<span class="ident" id="5676593"><a href="/gostd/archive/zip/struct.go.html#5676097">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5676598">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
