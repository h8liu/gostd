<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2935792">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2935847">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2935901">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2935952">package</span>&nbsp;<span class="ident" id="2935960">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2935969">import</span>&nbsp;<span class="op" id="2935976">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2935979">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2935987">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2935998">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2936007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2936010">const</span>&nbsp;<span class="ident" id="2936016">ptrSize</span>&nbsp;<span class="op" id="2936024">=</span>&nbsp;<span class="ident" id="2936026">unsafe</span><span class="op" id="2936032">.</span><span class="ident" id="2936033">Sizeof</span><span class="op" id="2936039">(</span><span class="op" id="2936040">(</span><span class="op" id="2936041">*</span><span class="builtintype" id="2936042">byte</span><span class="op" id="2936046">)</span><span class="op" id="2936047">(</span><span class="ident" id="2936048">nil</span><span class="op" id="2936051">)</span><span class="op" id="2936052">)</span><br>
<span class="lineno"></span><span class="keyword" id="2936054">const</span>&nbsp;<span class="ident" id="2936060">cannotSet</span>&nbsp;<span class="op" id="2936070">=</span>&nbsp;<span class="string" id="2936072">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2936130">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2936182">//</span><br>
<span class="lineno"></span><span class="comment" id="2936185">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2936249">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2936308">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2936368">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2936420">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2936482">//</span><br>
<span class="lineno"></span><span class="comment" id="2936485">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2936524">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2936594">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2936671">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2936732">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2936800">//</span><br>
<span class="lineno">30</span><span class="comment" id="2936803">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2936876">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2936947">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2936969">type</span>&nbsp;<span class="ident" id="2936974">Value</span>&nbsp;<span class="keyword" id="2936980">struct</span>&nbsp;<span class="op" id="2936987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2936990">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2937050">typ</span>&nbsp;<span class="op" id="2937054">*</span><span class="ident" id="2937055">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937063">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937129">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2937195">ptr</span>&nbsp;<span class="ident" id="2937199">unsafe</span><span class="op" id="2937205">.</span><span class="ident" id="2937206">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937216">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937257">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937292">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937350">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937399">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937453">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937492">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937543">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937597">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937664">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937734">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2937797">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937804">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937862">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937931">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2937998">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2938066">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2938097">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2938100">type</span>&nbsp;<span class="ident" id="2938105">flag</span>&nbsp;<span class="builtintype" id="2938110">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2938119">const</span>&nbsp;<span class="op" id="2938125">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938128">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938149">=</span>&nbsp;<span class="num" id="2938151">5</span>&nbsp;<span class="comment" id="2938153">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938176">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938192">flag</span>&nbsp;<span class="op" id="2938197">=</span>&nbsp;<span class="num" id="2938199">1</span><span class="op" id="2938200">&lt;&lt;</span><span class="ident" id="2938202">flagKindWidth</span>&nbsp;<span class="op" id="2938216">-</span>&nbsp;<span class="num" id="2938218">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938221">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938237">flag</span>&nbsp;<span class="op" id="2938242">=</span>&nbsp;<span class="num" id="2938244">1</span>&nbsp;<span class="op" id="2938246">&lt;&lt;</span>&nbsp;<span class="num" id="2938249">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938252">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938268">flag</span>&nbsp;<span class="op" id="2938273">=</span>&nbsp;<span class="num" id="2938275">1</span>&nbsp;<span class="op" id="2938277">&lt;&lt;</span>&nbsp;<span class="num" id="2938280">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938283">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938299">flag</span>&nbsp;<span class="op" id="2938304">=</span>&nbsp;<span class="num" id="2938306">1</span>&nbsp;<span class="op" id="2938308">&lt;&lt;</span>&nbsp;<span class="num" id="2938311">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938314">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2938330">flag</span>&nbsp;<span class="op" id="2938335">=</span>&nbsp;<span class="num" id="2938337">1</span>&nbsp;<span class="op" id="2938339">&lt;&lt;</span>&nbsp;<span class="num" id="2938342">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938345">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2938366">=</span>&nbsp;<span class="num" id="2938368">9</span><br>
<span class="lineno"></span><span class="op" id="2938370">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2938373">func</span>&nbsp;<span class="op" id="2938378">(</span><span class="ident" id="2938379">f</span>&nbsp;<span class="ident" id="2938381">flag</span><span class="op" id="2938385">)</span>&nbsp;<span class="ident" id="2938387">kind</span><span class="op" id="2938391">(</span><span class="op" id="2938392">)</span>&nbsp;<span class="ident" id="2938394">Kind</span>&nbsp;<span class="op" id="2938399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938402">return</span>&nbsp;<span class="ident" id="2938409">Kind</span><span class="op" id="2938413">(</span><span class="ident" id="2938414">f</span>&nbsp;<span class="op" id="2938416">&amp;</span>&nbsp;<span class="ident" id="2938418">flagKindMask</span><span class="op" id="2938430">)</span><br>
<span class="lineno">75</span><span class="op" id="2938432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938435">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2938495">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2938554">func</span>&nbsp;<span class="op" id="2938559">(</span><span class="ident" id="2938560">v</span>&nbsp;<span class="ident" id="2938562">Value</span><span class="op" id="2938567">)</span>&nbsp;<span class="ident" id="2938569">pointer</span><span class="op" id="2938576">(</span><span class="op" id="2938577">)</span>&nbsp;<span class="ident" id="2938579">unsafe</span><span class="op" id="2938585">.</span><span class="ident" id="2938586">Pointer</span>&nbsp;<span class="op" id="2938594">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938597">if</span>&nbsp;<span class="ident" id="2938600">v</span><span class="op" id="2938601">.</span><span class="ident" id="2938602">typ</span><span class="op" id="2938605">.</span><span class="ident" id="2938606">size</span>&nbsp;<span class="op" id="2938611">!=</span>&nbsp;<span class="ident" id="2938614">ptrSize</span>&nbsp;<span class="op" id="2938622">||</span>&nbsp;<span class="op" id="2938625">!</span><span class="ident" id="2938626">v</span><span class="op" id="2938627">.</span><span class="ident" id="2938628">typ</span><span class="op" id="2938631">.</span><span class="ident" id="2938632">pointers</span><span class="op" id="2938640">(</span><span class="op" id="2938641">)</span>&nbsp;<span class="op" id="2938643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2938647">panic</span><span class="op" id="2938652">(</span><span class="string" id="2938653">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2938696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2938699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938702">if</span>&nbsp;<span class="ident" id="2938705">v</span><span class="op" id="2938706">.</span><span class="ident" id="2938707">flag</span><span class="op" id="2938711">&amp;</span><span class="ident" id="2938712">flagIndir</span>&nbsp;<span class="op" id="2938722">!=</span>&nbsp;<span class="num" id="2938725">0</span>&nbsp;<span class="op" id="2938727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938731">return</span>&nbsp;<span class="op" id="2938738">*</span><span class="op" id="2938739">(</span><span class="op" id="2938740">*</span><span class="ident" id="2938741">unsafe</span><span class="op" id="2938747">.</span><span class="ident" id="2938748">Pointer</span><span class="op" id="2938755">)</span><span class="op" id="2938756">(</span><span class="ident" id="2938757">v</span><span class="op" id="2938758">.</span><span class="ident" id="2938759">ptr</span><span class="op" id="2938762">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2938765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938768">return</span>&nbsp;<span class="ident" id="2938775">v</span><span class="op" id="2938776">.</span><span class="ident" id="2938777">ptr</span><br>
<span class="lineno"></span><span class="op" id="2938781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2938784">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2938832">func</span>&nbsp;<span class="ident" id="2938837">packEface</span><span class="op" id="2938846">(</span><span class="ident" id="2938847">v</span>&nbsp;<span class="ident" id="2938849">Value</span><span class="op" id="2938854">)</span>&nbsp;<span class="keyword" id="2938856">interface</span><span class="op" id="2938865">{</span><span class="op" id="2938866">}</span>&nbsp;<span class="op" id="2938868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938871">t</span>&nbsp;<span class="op" id="2938873">:=</span>&nbsp;<span class="ident" id="2938876">v</span><span class="op" id="2938877">.</span><span class="ident" id="2938878">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2938883">var</span>&nbsp;<span class="ident" id="2938887">i</span>&nbsp;<span class="keyword" id="2938889">interface</span><span class="op" id="2938898">{</span><span class="op" id="2938899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2938902">e</span>&nbsp;<span class="op" id="2938904">:=</span>&nbsp;<span class="op" id="2938907">(</span><span class="op" id="2938908">*</span><span class="ident" id="2938909">emptyInterface</span><span class="op" id="2938923">)</span><span class="op" id="2938924">(</span><span class="ident" id="2938925">unsafe</span><span class="op" id="2938931">.</span><span class="ident" id="2938932">Pointer</span><span class="op" id="2938939">(</span><span class="op" id="2938940">&amp;</span><span class="ident" id="2938941">i</span><span class="op" id="2938942">)</span><span class="op" id="2938943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2938946">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939000">switch</span>&nbsp;<span class="op" id="2939007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939010">case</span>&nbsp;<span class="ident" id="2939015">ifaceIndir</span><span class="op" id="2939025">(</span><span class="ident" id="2939026">t</span><span class="op" id="2939027">)</span><span class="op" id="2939028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939032">if</span>&nbsp;<span class="ident" id="2939035">v</span><span class="op" id="2939036">.</span><span class="ident" id="2939037">flag</span><span class="op" id="2939041">&amp;</span><span class="ident" id="2939042">flagIndir</span>&nbsp;<span class="op" id="2939052">==</span>&nbsp;<span class="num" id="2939055">0</span>&nbsp;<span class="op" id="2939057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2939062">panic</span><span class="op" id="2939067">(</span><span class="string" id="2939068">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2939079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939083">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939087">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939149">ptr</span>&nbsp;<span class="op" id="2939153">:=</span>&nbsp;<span class="ident" id="2939156">v</span><span class="op" id="2939157">.</span><span class="ident" id="2939158">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939164">if</span>&nbsp;<span class="ident" id="2939167">v</span><span class="op" id="2939168">.</span><span class="ident" id="2939169">flag</span><span class="op" id="2939173">&amp;</span><span class="ident" id="2939174">flagAddr</span>&nbsp;<span class="op" id="2939183">!=</span>&nbsp;<span class="num" id="2939186">0</span>&nbsp;<span class="op" id="2939188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939193">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939246">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939289">c</span>&nbsp;<span class="op" id="2939291">:=</span>&nbsp;<span class="ident" id="2939294">unsafe_New</span><span class="op" id="2939304">(</span><span class="ident" id="2939305">t</span><span class="op" id="2939306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939311">memmove</span><span class="op" id="2939318">(</span><span class="ident" id="2939319">c</span><span class="op" id="2939320">,</span>&nbsp;<span class="ident" id="2939322">ptr</span><span class="op" id="2939325">,</span>&nbsp;<span class="ident" id="2939327">t</span><span class="op" id="2939328">.</span><span class="ident" id="2939329">size</span><span class="op" id="2939333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939338">ptr</span>&nbsp;<span class="op" id="2939342">=</span>&nbsp;<span class="ident" id="2939344">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939352">e</span><span class="op" id="2939353">.</span><span class="ident" id="2939354">word</span>&nbsp;<span class="op" id="2939359">=</span>&nbsp;<span class="ident" id="2939361">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939366">case</span>&nbsp;<span class="ident" id="2939371">v</span><span class="op" id="2939372">.</span><span class="ident" id="2939373">flag</span><span class="op" id="2939377">&amp;</span><span class="ident" id="2939378">flagIndir</span>&nbsp;<span class="op" id="2939388">!=</span>&nbsp;<span class="num" id="2939391">0</span><span class="op" id="2939392">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939396">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939454">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939515">e</span><span class="op" id="2939516">.</span><span class="ident" id="2939517">word</span>&nbsp;<span class="op" id="2939522">=</span>&nbsp;<span class="op" id="2939524">*</span><span class="op" id="2939525">(</span><span class="op" id="2939526">*</span><span class="ident" id="2939527">unsafe</span><span class="op" id="2939533">.</span><span class="ident" id="2939534">Pointer</span><span class="op" id="2939541">)</span><span class="op" id="2939542">(</span><span class="ident" id="2939543">v</span><span class="op" id="2939544">.</span><span class="ident" id="2939545">ptr</span><span class="op" id="2939548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939551">default</span><span class="op" id="2939558">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939562">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939609">e</span><span class="op" id="2939610">.</span><span class="ident" id="2939611">word</span>&nbsp;<span class="op" id="2939616">=</span>&nbsp;<span class="ident" id="2939618">v</span><span class="op" id="2939619">.</span><span class="ident" id="2939620">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2939625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939628">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939692">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939759">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2939828">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939849">e</span><span class="op" id="2939850">.</span><span class="ident" id="2939851">typ</span>&nbsp;<span class="op" id="2939855">=</span>&nbsp;<span class="ident" id="2939857">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2939860">return</span>&nbsp;<span class="ident" id="2939867">i</span><br>
<span class="lineno"></span><span class="op" id="2939869">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2939872">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2939930">func</span>&nbsp;<span class="ident" id="2939935">unpackEface</span><span class="op" id="2939946">(</span><span class="ident" id="2939947">i</span>&nbsp;<span class="keyword" id="2939949">interface</span><span class="op" id="2939958">{</span><span class="op" id="2939959">}</span><span class="op" id="2939960">)</span>&nbsp;<span class="ident" id="2939962">Value</span>&nbsp;<span class="op" id="2939968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2939971">e</span>&nbsp;<span class="op" id="2939973">:=</span>&nbsp;<span class="op" id="2939976">(</span><span class="op" id="2939977">*</span><span class="ident" id="2939978">emptyInterface</span><span class="op" id="2939992">)</span><span class="op" id="2939993">(</span><span class="ident" id="2939994">unsafe</span><span class="op" id="2940000">.</span><span class="ident" id="2940001">Pointer</span><span class="op" id="2940008">(</span><span class="op" id="2940009">&amp;</span><span class="ident" id="2940010">i</span><span class="op" id="2940011">)</span><span class="op" id="2940012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2940015">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940096">t</span>&nbsp;<span class="op" id="2940098">:=</span>&nbsp;<span class="ident" id="2940101">e</span><span class="op" id="2940102">.</span><span class="ident" id="2940103">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940108">if</span>&nbsp;<span class="ident" id="2940111">t</span>&nbsp;<span class="op" id="2940113">==</span>&nbsp;<span class="ident" id="2940116">nil</span>&nbsp;<span class="op" id="2940120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940124">return</span>&nbsp;<span class="ident" id="2940131">Value</span><span class="op" id="2940136">{</span><span class="op" id="2940137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940143">f</span>&nbsp;<span class="op" id="2940145">:=</span>&nbsp;<span class="ident" id="2940148">flag</span><span class="op" id="2940152">(</span><span class="ident" id="2940153">t</span><span class="op" id="2940154">.</span><span class="ident" id="2940155">Kind</span><span class="op" id="2940159">(</span><span class="op" id="2940160">)</span><span class="op" id="2940161">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940164">if</span>&nbsp;<span class="ident" id="2940167">ifaceIndir</span><span class="op" id="2940177">(</span><span class="ident" id="2940178">t</span><span class="op" id="2940179">)</span>&nbsp;<span class="op" id="2940181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940185">f</span>&nbsp;<span class="op" id="2940187">|=</span>&nbsp;<span class="ident" id="2940190">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940204">return</span>&nbsp;<span class="ident" id="2940211">Value</span><span class="op" id="2940216">{</span><span class="ident" id="2940217">t</span><span class="op" id="2940218">,</span>&nbsp;<span class="ident" id="2940220">unsafe</span><span class="op" id="2940226">.</span><span class="ident" id="2940227">Pointer</span><span class="op" id="2940234">(</span><span class="ident" id="2940235">e</span><span class="op" id="2940236">.</span><span class="ident" id="2940237">word</span><span class="op" id="2940241">)</span><span class="op" id="2940242">,</span>&nbsp;<span class="ident" id="2940244">f</span><span class="op" id="2940245">}</span><br>
<span class="lineno"></span><span class="op" id="2940247">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2940250">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2940307">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2940371">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2940409">type</span>&nbsp;<span class="ident" id="2940414">ValueError</span>&nbsp;<span class="keyword" id="2940425">struct</span>&nbsp;<span class="op" id="2940432">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940435">Method</span>&nbsp;<span class="builtintype" id="2940442">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940450">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2940457">Kind</span><br>
<span class="lineno"></span><span class="op" id="2940462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2940465">func</span>&nbsp;<span class="op" id="2940470">(</span><span class="ident" id="2940471">e</span>&nbsp;<span class="op" id="2940473">*</span><span class="ident" id="2940474">ValueError</span><span class="op" id="2940484">)</span>&nbsp;<span class="ident" id="2940486">Error</span><span class="op" id="2940491">(</span><span class="op" id="2940492">)</span>&nbsp;<span class="builtintype" id="2940494">string</span>&nbsp;<span class="op" id="2940501">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940504">if</span>&nbsp;<span class="ident" id="2940507">e</span><span class="op" id="2940508">.</span><span class="ident" id="2940509">Kind</span>&nbsp;<span class="op" id="2940514">==</span>&nbsp;<span class="num" id="2940517">0</span>&nbsp;<span class="op" id="2940519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940523">return</span>&nbsp;<span class="string" id="2940530">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2940550">+</span>&nbsp;<span class="ident" id="2940552">e</span><span class="op" id="2940553">.</span><span class="ident" id="2940554">Method</span>&nbsp;<span class="op" id="2940561">+</span>&nbsp;<span class="string" id="2940563">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940584">return</span>&nbsp;<span class="string" id="2940591">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2940611">+</span>&nbsp;<span class="ident" id="2940613">e</span><span class="op" id="2940614">.</span><span class="ident" id="2940615">Method</span>&nbsp;<span class="op" id="2940622">+</span>&nbsp;<span class="string" id="2940624">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2940631">+</span>&nbsp;<span class="ident" id="2940633">e</span><span class="op" id="2940634">.</span><span class="ident" id="2940635">Kind</span><span class="op" id="2940639">.</span><span class="ident" id="2940640">String</span><span class="op" id="2940646">(</span><span class="op" id="2940647">)</span>&nbsp;<span class="op" id="2940649">+</span>&nbsp;<span class="string" id="2940651">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2940660">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2940663">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2940717">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2940758">func</span>&nbsp;<span class="ident" id="2940763">methodName</span><span class="op" id="2940773">(</span><span class="op" id="2940774">)</span>&nbsp;<span class="builtintype" id="2940776">string</span>&nbsp;<span class="op" id="2940783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940786">pc</span><span class="op" id="2940788">,</span>&nbsp;<span class="ident" id="2940790">_</span><span class="op" id="2940791">,</span>&nbsp;<span class="ident" id="2940793">_</span><span class="op" id="2940794">,</span>&nbsp;<span class="ident" id="2940796">_</span>&nbsp;<span class="op" id="2940798">:=</span>&nbsp;<span class="ident" id="2940801">runtime</span><span class="op" id="2940808">.</span><span class="ident" id="2940809">Caller</span><span class="op" id="2940815">(</span><span class="num" id="2940816">2</span><span class="op" id="2940817">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940820">f</span>&nbsp;<span class="op" id="2940822">:=</span>&nbsp;<span class="ident" id="2940825">runtime</span><span class="op" id="2940832">.</span><span class="ident" id="2940833">FuncForPC</span><span class="op" id="2940842">(</span><span class="ident" id="2940843">pc</span><span class="op" id="2940845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940848">if</span>&nbsp;<span class="ident" id="2940851">f</span>&nbsp;<span class="op" id="2940853">==</span>&nbsp;<span class="ident" id="2940856">nil</span>&nbsp;<span class="op" id="2940860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940864">return</span>&nbsp;<span class="string" id="2940871">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2940889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2940892">return</span>&nbsp;<span class="ident" id="2940899">f</span><span class="op" id="2940900">.</span><span class="ident" id="2940901">Name</span><span class="op" id="2940905">(</span><span class="op" id="2940906">)</span><br>
<span class="lineno">165</span><span class="op" id="2940908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2940911">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2940969">type</span>&nbsp;<span class="ident" id="2940974">emptyInterface</span>&nbsp;<span class="keyword" id="2940989">struct</span>&nbsp;<span class="op" id="2940996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2940999">typ</span>&nbsp;&nbsp;<span class="op" id="2941004">*</span><span class="ident" id="2941005">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941012">word</span>&nbsp;<span class="ident" id="2941017">unsafe</span><span class="op" id="2941023">.</span><span class="ident" id="2941024">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2941032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2941035">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2941106">type</span>&nbsp;<span class="ident" id="2941111">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2941129">struct</span>&nbsp;<span class="op" id="2941136">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2941139">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941172">itab</span>&nbsp;<span class="op" id="2941177">*</span><span class="keyword" id="2941178">struct</span>&nbsp;<span class="op" id="2941185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941189">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2941196">*</span><span class="ident" id="2941197">rtype</span>&nbsp;<span class="comment" id="2941203">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941230">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2941237">*</span><span class="ident" id="2941238">rtype</span>&nbsp;<span class="comment" id="2941244">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941271">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2941278">unsafe</span><span class="op" id="2941284">.</span><span class="ident" id="2941285">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941295">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2941302">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941310">unused</span>&nbsp;<span class="builtintype" id="2941317">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941325">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2941332">[</span><span class="num" id="2941333">100000</span><span class="op" id="2941339">]</span><span class="ident" id="2941340">unsafe</span><span class="op" id="2941346">.</span><span class="ident" id="2941347">Pointer</span>&nbsp;<span class="comment" id="2941355">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2941375">word</span>&nbsp;<span class="ident" id="2941380">unsafe</span><span class="op" id="2941386">.</span><span class="ident" id="2941387">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2941395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2941398">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2941444">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2941496">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2941553">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2941611">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2941670">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2941713">func</span>&nbsp;<span class="op" id="2941718">(</span><span class="ident" id="2941719">f</span>&nbsp;<span class="ident" id="2941721">flag</span><span class="op" id="2941725">)</span>&nbsp;<span class="ident" id="2941727">mustBe</span><span class="op" id="2941733">(</span><span class="ident" id="2941734">expected</span>&nbsp;<span class="ident" id="2941743">Kind</span><span class="op" id="2941747">)</span>&nbsp;<span class="op" id="2941749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941752">if</span>&nbsp;<span class="ident" id="2941755">f</span><span class="op" id="2941756">.</span><span class="ident" id="2941757">kind</span><span class="op" id="2941761">(</span><span class="op" id="2941762">)</span>&nbsp;<span class="op" id="2941764">!=</span>&nbsp;<span class="ident" id="2941767">expected</span>&nbsp;<span class="op" id="2941776">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2941780">panic</span><span class="op" id="2941785">(</span><span class="op" id="2941786">&amp;</span><span class="ident" id="2941787">ValueError</span><span class="op" id="2941797">{</span><span class="ident" id="2941798">methodName</span><span class="op" id="2941808">(</span><span class="op" id="2941809">)</span><span class="op" id="2941810">,</span>&nbsp;<span class="ident" id="2941812">f</span><span class="op" id="2941813">.</span><span class="ident" id="2941814">kind</span><span class="op" id="2941818">(</span><span class="op" id="2941819">)</span><span class="op" id="2941820">}</span><span class="op" id="2941821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2941824">}</span><br>
<span class="lineno"></span><span class="op" id="2941826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2941829">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2941901">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2941925">func</span>&nbsp;<span class="op" id="2941930">(</span><span class="ident" id="2941931">f</span>&nbsp;<span class="ident" id="2941933">flag</span><span class="op" id="2941937">)</span>&nbsp;<span class="ident" id="2941939">mustBeExported</span><span class="op" id="2941953">(</span><span class="op" id="2941954">)</span>&nbsp;<span class="op" id="2941956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2941959">if</span>&nbsp;<span class="ident" id="2941962">f</span>&nbsp;<span class="op" id="2941964">==</span>&nbsp;<span class="num" id="2941967">0</span>&nbsp;<span class="op" id="2941969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2941973">panic</span><span class="op" id="2941978">(</span><span class="op" id="2941979">&amp;</span><span class="ident" id="2941980">ValueError</span><span class="op" id="2941990">{</span><span class="ident" id="2941991">methodName</span><span class="op" id="2942001">(</span><span class="op" id="2942002">)</span><span class="op" id="2942003">,</span>&nbsp;<span class="num" id="2942005">0</span><span class="op" id="2942006">}</span><span class="op" id="2942007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942010">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942013">if</span>&nbsp;<span class="ident" id="2942016">f</span><span class="op" id="2942017">&amp;</span><span class="ident" id="2942018">flagRO</span>&nbsp;<span class="op" id="2942025">!=</span>&nbsp;<span class="num" id="2942028">0</span>&nbsp;<span class="op" id="2942030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2942034">panic</span><span class="op" id="2942039">(</span><span class="string" id="2942040">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2942052">+</span>&nbsp;<span class="ident" id="2942054">methodName</span><span class="op" id="2942064">(</span><span class="op" id="2942065">)</span>&nbsp;<span class="op" id="2942067">+</span>&nbsp;<span class="string" id="2942069">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2942115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942118">}</span><br>
<span class="lineno"></span><span class="op" id="2942120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2942123">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2942197">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2942270">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2942299">func</span>&nbsp;<span class="op" id="2942304">(</span><span class="ident" id="2942305">f</span>&nbsp;<span class="ident" id="2942307">flag</span><span class="op" id="2942311">)</span>&nbsp;<span class="ident" id="2942313">mustBeAssignable</span><span class="op" id="2942329">(</span><span class="op" id="2942330">)</span>&nbsp;<span class="op" id="2942332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942335">if</span>&nbsp;<span class="ident" id="2942338">f</span>&nbsp;<span class="op" id="2942340">==</span>&nbsp;<span class="num" id="2942343">0</span>&nbsp;<span class="op" id="2942345">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2942349">panic</span><span class="op" id="2942354">(</span><span class="op" id="2942355">&amp;</span><span class="ident" id="2942356">ValueError</span><span class="op" id="2942366">{</span><span class="ident" id="2942367">methodName</span><span class="op" id="2942377">(</span><span class="op" id="2942378">)</span><span class="op" id="2942379">,</span>&nbsp;<span class="ident" id="2942381">Invalid</span><span class="op" id="2942388">}</span><span class="op" id="2942389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2942395">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942444">if</span>&nbsp;<span class="ident" id="2942447">f</span><span class="op" id="2942448">&amp;</span><span class="ident" id="2942449">flagRO</span>&nbsp;<span class="op" id="2942456">!=</span>&nbsp;<span class="num" id="2942459">0</span>&nbsp;<span class="op" id="2942461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2942465">panic</span><span class="op" id="2942470">(</span><span class="string" id="2942471">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2942483">+</span>&nbsp;<span class="ident" id="2942485">methodName</span><span class="op" id="2942495">(</span><span class="op" id="2942496">)</span>&nbsp;<span class="op" id="2942498">+</span>&nbsp;<span class="string" id="2942500">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2942546">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942552">if</span>&nbsp;<span class="ident" id="2942555">f</span><span class="op" id="2942556">&amp;</span><span class="ident" id="2942557">flagAddr</span>&nbsp;<span class="op" id="2942566">==</span>&nbsp;<span class="num" id="2942569">0</span>&nbsp;<span class="op" id="2942571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2942575">panic</span><span class="op" id="2942580">(</span><span class="string" id="2942581">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2942593">+</span>&nbsp;<span class="ident" id="2942595">methodName</span><span class="op" id="2942605">(</span><span class="op" id="2942606">)</span>&nbsp;<span class="op" id="2942608">+</span>&nbsp;<span class="string" id="2942610">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2942638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2942641">}</span><br>
<span class="lineno"></span><span class="op" id="2942643">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2942646">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2942709">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2942750">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2942814">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2942876">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2942897">func</span>&nbsp;<span class="op" id="2942902">(</span><span class="ident" id="2942903">v</span>&nbsp;<span class="ident" id="2942905">Value</span><span class="op" id="2942910">)</span>&nbsp;<span class="ident" id="2942912">Addr</span><span class="op" id="2942916">(</span><span class="op" id="2942917">)</span>&nbsp;<span class="ident" id="2942919">Value</span>&nbsp;<span class="op" id="2942925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2942928">if</span>&nbsp;<span class="ident" id="2942931">v</span><span class="op" id="2942932">.</span><span class="ident" id="2942933">flag</span><span class="op" id="2942937">&amp;</span><span class="ident" id="2942938">flagAddr</span>&nbsp;<span class="op" id="2942947">==</span>&nbsp;<span class="num" id="2942950">0</span>&nbsp;<span class="op" id="2942952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2942956">panic</span><span class="op" id="2942961">(</span><span class="string" id="2942962">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2943005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943008">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943011">return</span>&nbsp;<span class="ident" id="2943018">Value</span><span class="op" id="2943023">{</span><span class="ident" id="2943024">v</span><span class="op" id="2943025">.</span><span class="ident" id="2943026">typ</span><span class="op" id="2943029">.</span><span class="ident" id="2943030">ptrTo</span><span class="op" id="2943035">(</span><span class="op" id="2943036">)</span><span class="op" id="2943037">,</span>&nbsp;<span class="ident" id="2943039">v</span><span class="op" id="2943040">.</span><span class="ident" id="2943041">ptr</span><span class="op" id="2943044">,</span>&nbsp;<span class="op" id="2943046">(</span><span class="ident" id="2943047">v</span><span class="op" id="2943048">.</span><span class="ident" id="2943049">flag</span>&nbsp;<span class="op" id="2943054">&amp;</span>&nbsp;<span class="ident" id="2943056">flagRO</span><span class="op" id="2943062">)</span>&nbsp;<span class="op" id="2943064">|</span>&nbsp;<span class="ident" id="2943066">flag</span><span class="op" id="2943070">(</span><span class="ident" id="2943071">Ptr</span><span class="op" id="2943074">)</span><span class="op" id="2943075">}</span><br>
<span class="lineno"></span><span class="op" id="2943077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943080">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2943118">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2943156">func</span>&nbsp;<span class="op" id="2943161">(</span><span class="ident" id="2943162">v</span>&nbsp;<span class="ident" id="2943164">Value</span><span class="op" id="2943169">)</span>&nbsp;<span class="ident" id="2943171">Bool</span><span class="op" id="2943175">(</span><span class="op" id="2943176">)</span>&nbsp;<span class="builtintype" id="2943178">bool</span>&nbsp;<span class="op" id="2943183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943186">v</span><span class="op" id="2943187">.</span><span class="ident" id="2943188">mustBe</span><span class="op" id="2943194">(</span><span class="ident" id="2943195">Bool</span><span class="op" id="2943199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943202">return</span>&nbsp;<span class="op" id="2943209">*</span><span class="op" id="2943210">(</span><span class="op" id="2943211">*</span><span class="builtintype" id="2943212">bool</span><span class="op" id="2943216">)</span><span class="op" id="2943217">(</span><span class="ident" id="2943218">v</span><span class="op" id="2943219">.</span><span class="ident" id="2943220">ptr</span><span class="op" id="2943223">)</span><br>
<span class="lineno"></span><span class="op" id="2943225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2943228">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2943267">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2943329">func</span>&nbsp;<span class="op" id="2943334">(</span><span class="ident" id="2943335">v</span>&nbsp;<span class="ident" id="2943337">Value</span><span class="op" id="2943342">)</span>&nbsp;<span class="ident" id="2943344">Bytes</span><span class="op" id="2943349">(</span><span class="op" id="2943350">)</span>&nbsp;<span class="op" id="2943352">[</span><span class="op" id="2943353">]</span><span class="builtintype" id="2943354">byte</span>&nbsp;<span class="op" id="2943359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943362">v</span><span class="op" id="2943363">.</span><span class="ident" id="2943364">mustBe</span><span class="op" id="2943370">(</span><span class="ident" id="2943371">Slice</span><span class="op" id="2943376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943379">if</span>&nbsp;<span class="ident" id="2943382">v</span><span class="op" id="2943383">.</span><span class="ident" id="2943384">typ</span><span class="op" id="2943387">.</span><span class="ident" id="2943388">Elem</span><span class="op" id="2943392">(</span><span class="op" id="2943393">)</span><span class="op" id="2943394">.</span><span class="ident" id="2943395">Kind</span><span class="op" id="2943399">(</span><span class="op" id="2943400">)</span>&nbsp;<span class="op" id="2943402">!=</span>&nbsp;<span class="ident" id="2943405">Uint8</span>&nbsp;<span class="op" id="2943411">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2943415">panic</span><span class="op" id="2943420">(</span><span class="string" id="2943421">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2943460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2943466">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943524">return</span>&nbsp;<span class="op" id="2943531">*</span><span class="op" id="2943532">(</span><span class="op" id="2943533">*</span><span class="op" id="2943534">[</span><span class="op" id="2943535">]</span><span class="builtintype" id="2943536">byte</span><span class="op" id="2943540">)</span><span class="op" id="2943541">(</span><span class="ident" id="2943542">v</span><span class="op" id="2943543">.</span><span class="ident" id="2943544">ptr</span><span class="op" id="2943547">)</span><br>
<span class="lineno"></span><span class="op" id="2943549">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2943552">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2943591">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2943662">func</span>&nbsp;<span class="op" id="2943667">(</span><span class="ident" id="2943668">v</span>&nbsp;<span class="ident" id="2943670">Value</span><span class="op" id="2943675">)</span>&nbsp;<span class="ident" id="2943677">runes</span><span class="op" id="2943682">(</span><span class="op" id="2943683">)</span>&nbsp;<span class="op" id="2943685">[</span><span class="op" id="2943686">]</span><span class="builtintype" id="2943687">rune</span>&nbsp;<span class="op" id="2943692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2943695">v</span><span class="op" id="2943696">.</span><span class="ident" id="2943697">mustBe</span><span class="op" id="2943703">(</span><span class="ident" id="2943704">Slice</span><span class="op" id="2943709">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943712">if</span>&nbsp;<span class="ident" id="2943715">v</span><span class="op" id="2943716">.</span><span class="ident" id="2943717">typ</span><span class="op" id="2943720">.</span><span class="ident" id="2943721">Elem</span><span class="op" id="2943725">(</span><span class="op" id="2943726">)</span><span class="op" id="2943727">.</span><span class="ident" id="2943728">Kind</span><span class="op" id="2943732">(</span><span class="op" id="2943733">)</span>&nbsp;<span class="op" id="2943735">!=</span>&nbsp;<span class="ident" id="2943738">Int32</span>&nbsp;<span class="op" id="2943744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2943748">panic</span><span class="op" id="2943753">(</span><span class="string" id="2943754">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2943793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2943796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2943799">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2943857">return</span>&nbsp;<span class="op" id="2943864">*</span><span class="op" id="2943865">(</span><span class="op" id="2943866">*</span><span class="op" id="2943867">[</span><span class="op" id="2943868">]</span><span class="builtintype" id="2943869">rune</span><span class="op" id="2943873">)</span><span class="op" id="2943874">(</span><span class="ident" id="2943875">v</span><span class="op" id="2943876">.</span><span class="ident" id="2943877">ptr</span><span class="op" id="2943880">)</span><br>
<span class="lineno">265</span><span class="op" id="2943882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2943885">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2943959">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2944031">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2944093">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2944172">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2944226">func</span>&nbsp;<span class="op" id="2944231">(</span><span class="ident" id="2944232">v</span>&nbsp;<span class="ident" id="2944234">Value</span><span class="op" id="2944239">)</span>&nbsp;<span class="ident" id="2944241">CanAddr</span><span class="op" id="2944248">(</span><span class="op" id="2944249">)</span>&nbsp;<span class="builtintype" id="2944251">bool</span>&nbsp;<span class="op" id="2944256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944259">return</span>&nbsp;<span class="ident" id="2944266">v</span><span class="op" id="2944267">.</span><span class="ident" id="2944268">flag</span><span class="op" id="2944272">&amp;</span><span class="ident" id="2944273">flagAddr</span>&nbsp;<span class="op" id="2944282">!=</span>&nbsp;<span class="num" id="2944285">0</span><br>
<span class="lineno"></span><span class="op" id="2944287">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2944290">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2944347">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2944411">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2944463">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2944524">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2944572">func</span>&nbsp;<span class="op" id="2944577">(</span><span class="ident" id="2944578">v</span>&nbsp;<span class="ident" id="2944580">Value</span><span class="op" id="2944585">)</span>&nbsp;<span class="ident" id="2944587">CanSet</span><span class="op" id="2944593">(</span><span class="op" id="2944594">)</span>&nbsp;<span class="builtintype" id="2944596">bool</span>&nbsp;<span class="op" id="2944601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2944604">return</span>&nbsp;<span class="ident" id="2944611">v</span><span class="op" id="2944612">.</span><span class="ident" id="2944613">flag</span><span class="op" id="2944617">&amp;</span><span class="op" id="2944618">(</span><span class="ident" id="2944619">flagAddr</span><span class="op" id="2944627">|</span><span class="ident" id="2944628">flagRO</span><span class="op" id="2944634">)</span>&nbsp;<span class="op" id="2944636">==</span>&nbsp;<span class="ident" id="2944639">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2944648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2944651">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2944709">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2944800">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2944840">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2944884">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2944943">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2945000">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2945074">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2945122">func</span>&nbsp;<span class="op" id="2945127">(</span><span class="ident" id="2945128">v</span>&nbsp;<span class="ident" id="2945130">Value</span><span class="op" id="2945135">)</span>&nbsp;<span class="ident" id="2945137">Call</span><span class="op" id="2945141">(</span><span class="ident" id="2945142">in</span>&nbsp;<span class="op" id="2945145">[</span><span class="op" id="2945146">]</span><span class="ident" id="2945147">Value</span><span class="op" id="2945152">)</span>&nbsp;<span class="op" id="2945154">[</span><span class="op" id="2945155">]</span><span class="ident" id="2945156">Value</span>&nbsp;<span class="op" id="2945162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945165">v</span><span class="op" id="2945166">.</span><span class="ident" id="2945167">mustBe</span><span class="op" id="2945173">(</span><span class="ident" id="2945174">Func</span><span class="op" id="2945178">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945181">v</span><span class="op" id="2945182">.</span><span class="ident" id="2945183">mustBeExported</span><span class="op" id="2945197">(</span><span class="op" id="2945198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2945201">return</span>&nbsp;<span class="ident" id="2945208">v</span><span class="op" id="2945209">.</span><span class="ident" id="2945210">call</span><span class="op" id="2945214">(</span><span class="string" id="2945215">&#34;Call&#34;</span><span class="op" id="2945221">,</span>&nbsp;<span class="ident" id="2945223">in</span><span class="op" id="2945225">)</span><br>
<span class="lineno"></span><span class="op" id="2945227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2945230">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2945302">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2945371">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2945465">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2945529">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2945573">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2945632">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2945689">func</span>&nbsp;<span class="op" id="2945694">(</span><span class="ident" id="2945695">v</span>&nbsp;<span class="ident" id="2945697">Value</span><span class="op" id="2945702">)</span>&nbsp;<span class="ident" id="2945704">CallSlice</span><span class="op" id="2945713">(</span><span class="ident" id="2945714">in</span>&nbsp;<span class="op" id="2945717">[</span><span class="op" id="2945718">]</span><span class="ident" id="2945719">Value</span><span class="op" id="2945724">)</span>&nbsp;<span class="op" id="2945726">[</span><span class="op" id="2945727">]</span><span class="ident" id="2945728">Value</span>&nbsp;<span class="op" id="2945734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945737">v</span><span class="op" id="2945738">.</span><span class="ident" id="2945739">mustBe</span><span class="op" id="2945745">(</span><span class="ident" id="2945746">Func</span><span class="op" id="2945750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945753">v</span><span class="op" id="2945754">.</span><span class="ident" id="2945755">mustBeExported</span><span class="op" id="2945769">(</span><span class="op" id="2945770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2945773">return</span>&nbsp;<span class="ident" id="2945780">v</span><span class="op" id="2945781">.</span><span class="ident" id="2945782">call</span><span class="op" id="2945786">(</span><span class="string" id="2945787">&#34;CallSlice&#34;</span><span class="op" id="2945798">,</span>&nbsp;<span class="ident" id="2945800">in</span><span class="op" id="2945802">)</span><br>
<span class="lineno">310</span><span class="op" id="2945804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2945807">var</span>&nbsp;<span class="ident" id="2945811">callGC</span>&nbsp;<span class="builtintype" id="2945818">bool</span>&nbsp;<span class="comment" id="2945823">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2945863">func</span>&nbsp;<span class="op" id="2945868">(</span><span class="ident" id="2945869">v</span>&nbsp;<span class="ident" id="2945871">Value</span><span class="op" id="2945876">)</span>&nbsp;<span class="ident" id="2945878">call</span><span class="op" id="2945882">(</span><span class="ident" id="2945883">op</span>&nbsp;<span class="builtintype" id="2945886">string</span><span class="op" id="2945892">,</span>&nbsp;<span class="ident" id="2945894">in</span>&nbsp;<span class="op" id="2945897">[</span><span class="op" id="2945898">]</span><span class="ident" id="2945899">Value</span><span class="op" id="2945904">)</span>&nbsp;<span class="op" id="2945906">[</span><span class="op" id="2945907">]</span><span class="ident" id="2945908">Value</span>&nbsp;<span class="op" id="2945914">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2945917">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945949">t</span>&nbsp;<span class="op" id="2945951">:=</span>&nbsp;<span class="ident" id="2945954">v</span><span class="op" id="2945955">.</span><span class="ident" id="2945956">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2945961">var</span>&nbsp;<span class="op" id="2945965">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945969">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2945978">unsafe</span><span class="op" id="2945984">.</span><span class="ident" id="2945985">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2945995">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2946004">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946012">rcvrtype</span>&nbsp;<span class="op" id="2946021">*</span><span class="ident" id="2946022">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946032">if</span>&nbsp;<span class="ident" id="2946035">v</span><span class="op" id="2946036">.</span><span class="ident" id="2946037">flag</span><span class="op" id="2946041">&amp;</span><span class="ident" id="2946042">flagMethod</span>&nbsp;<span class="op" id="2946053">!=</span>&nbsp;<span class="num" id="2946056">0</span>&nbsp;<span class="op" id="2946058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946062">rcvr</span>&nbsp;<span class="op" id="2946067">=</span>&nbsp;<span class="ident" id="2946069">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946073">rcvrtype</span><span class="op" id="2946081">,</span>&nbsp;<span class="ident" id="2946083">t</span><span class="op" id="2946084">,</span>&nbsp;<span class="ident" id="2946086">fn</span>&nbsp;<span class="op" id="2946089">=</span>&nbsp;<span class="ident" id="2946091">methodReceiver</span><span class="op" id="2946105">(</span><span class="ident" id="2946106">op</span><span class="op" id="2946108">,</span>&nbsp;<span class="ident" id="2946110">v</span><span class="op" id="2946111">,</span>&nbsp;<span class="builtintype" id="2946113">int</span><span class="op" id="2946116">(</span><span class="ident" id="2946117">v</span><span class="op" id="2946118">.</span><span class="ident" id="2946119">flag</span><span class="op" id="2946123">)</span><span class="op" id="2946124">&gt;&gt;</span><span class="ident" id="2946126">flagMethodShift</span><span class="op" id="2946141">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946144">}</span>&nbsp;<span class="keyword" id="2946146">else</span>&nbsp;<span class="keyword" id="2946151">if</span>&nbsp;<span class="ident" id="2946154">v</span><span class="op" id="2946155">.</span><span class="ident" id="2946156">flag</span><span class="op" id="2946160">&amp;</span><span class="ident" id="2946161">flagIndir</span>&nbsp;<span class="op" id="2946171">!=</span>&nbsp;<span class="num" id="2946174">0</span>&nbsp;<span class="op" id="2946176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946180">fn</span>&nbsp;<span class="op" id="2946183">=</span>&nbsp;<span class="op" id="2946185">*</span><span class="op" id="2946186">(</span><span class="op" id="2946187">*</span><span class="ident" id="2946188">unsafe</span><span class="op" id="2946194">.</span><span class="ident" id="2946195">Pointer</span><span class="op" id="2946202">)</span><span class="op" id="2946203">(</span><span class="ident" id="2946204">v</span><span class="op" id="2946205">.</span><span class="ident" id="2946206">ptr</span><span class="op" id="2946209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946212">}</span>&nbsp;<span class="keyword" id="2946214">else</span>&nbsp;<span class="op" id="2946219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946223">fn</span>&nbsp;<span class="op" id="2946226">=</span>&nbsp;<span class="ident" id="2946228">v</span><span class="op" id="2946229">.</span><span class="ident" id="2946230">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946235">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946239">if</span>&nbsp;<span class="ident" id="2946242">fn</span>&nbsp;<span class="op" id="2946245">==</span>&nbsp;<span class="ident" id="2946248">nil</span>&nbsp;<span class="op" id="2946252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946256">panic</span><span class="op" id="2946261">(</span><span class="string" id="2946262">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2946304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946311">isSlice</span>&nbsp;<span class="op" id="2946319">:=</span>&nbsp;<span class="ident" id="2946322">op</span>&nbsp;<span class="op" id="2946325">==</span>&nbsp;<span class="string" id="2946328">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946341">n</span>&nbsp;<span class="op" id="2946343">:=</span>&nbsp;<span class="ident" id="2946346">t</span><span class="op" id="2946347">.</span><span class="ident" id="2946348">NumIn</span><span class="op" id="2946353">(</span><span class="op" id="2946354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946357">if</span>&nbsp;<span class="ident" id="2946360">isSlice</span>&nbsp;<span class="op" id="2946368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946372">if</span>&nbsp;<span class="op" id="2946375">!</span><span class="ident" id="2946376">t</span><span class="op" id="2946377">.</span><span class="ident" id="2946378">IsVariadic</span><span class="op" id="2946388">(</span><span class="op" id="2946389">)</span>&nbsp;<span class="op" id="2946391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946396">panic</span><span class="op" id="2946401">(</span><span class="string" id="2946402">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2946447">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946455">if</span>&nbsp;<span class="builtinfunc" id="2946458">len</span><span class="op" id="2946461">(</span><span class="ident" id="2946462">in</span><span class="op" id="2946464">)</span>&nbsp;<span class="op" id="2946466">&lt;</span>&nbsp;<span class="ident" id="2946468">n</span>&nbsp;<span class="op" id="2946470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946475">panic</span><span class="op" id="2946480">(</span><span class="string" id="2946481">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2946530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946538">if</span>&nbsp;<span class="builtinfunc" id="2946541">len</span><span class="op" id="2946544">(</span><span class="ident" id="2946545">in</span><span class="op" id="2946547">)</span>&nbsp;<span class="op" id="2946549">&gt;</span>&nbsp;<span class="ident" id="2946551">n</span>&nbsp;<span class="op" id="2946553">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946558">panic</span><span class="op" id="2946563">(</span><span class="string" id="2946564">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2946614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946621">}</span>&nbsp;<span class="keyword" id="2946623">else</span>&nbsp;<span class="op" id="2946628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946632">if</span>&nbsp;<span class="ident" id="2946635">t</span><span class="op" id="2946636">.</span><span class="ident" id="2946637">IsVariadic</span><span class="op" id="2946647">(</span><span class="op" id="2946648">)</span>&nbsp;<span class="op" id="2946650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2946655">n</span><span class="op" id="2946656">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946665">if</span>&nbsp;<span class="builtinfunc" id="2946668">len</span><span class="op" id="2946671">(</span><span class="ident" id="2946672">in</span><span class="op" id="2946674">)</span>&nbsp;<span class="op" id="2946676">&lt;</span>&nbsp;<span class="ident" id="2946678">n</span>&nbsp;<span class="op" id="2946680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946685">panic</span><span class="op" id="2946690">(</span><span class="string" id="2946691">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2946735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946743">if</span>&nbsp;<span class="op" id="2946746">!</span><span class="ident" id="2946747">t</span><span class="op" id="2946748">.</span><span class="ident" id="2946749">IsVariadic</span><span class="op" id="2946759">(</span><span class="op" id="2946760">)</span>&nbsp;<span class="op" id="2946762">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2946765">len</span><span class="op" id="2946768">(</span><span class="ident" id="2946769">in</span><span class="op" id="2946771">)</span>&nbsp;<span class="op" id="2946773">&gt;</span>&nbsp;<span class="ident" id="2946775">n</span>&nbsp;<span class="op" id="2946777">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946782">panic</span><span class="op" id="2946787">(</span><span class="string" id="2946788">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2946833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946843">for</span>&nbsp;<span class="ident" id="2946847">_</span><span class="op" id="2946848">,</span>&nbsp;<span class="ident" id="2946850">x</span>&nbsp;<span class="op" id="2946852">:=</span>&nbsp;<span class="keyword" id="2946855">range</span>&nbsp;<span class="ident" id="2946861">in</span>&nbsp;<span class="op" id="2946864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946868">if</span>&nbsp;<span class="ident" id="2946871">x</span><span class="op" id="2946872">.</span><span class="ident" id="2946873">Kind</span><span class="op" id="2946877">(</span><span class="op" id="2946878">)</span>&nbsp;<span class="op" id="2946880">==</span>&nbsp;<span class="ident" id="2946883">Invalid</span>&nbsp;<span class="op" id="2946891">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2946896">panic</span><span class="op" id="2946901">(</span><span class="string" id="2946902">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2946914">+</span>&nbsp;<span class="ident" id="2946916">op</span>&nbsp;<span class="op" id="2946919">+</span>&nbsp;<span class="string" id="2946921">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2946949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2946956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946959">for</span>&nbsp;<span class="ident" id="2946963">i</span>&nbsp;<span class="op" id="2946965">:=</span>&nbsp;<span class="num" id="2946968">0</span><span class="op" id="2946969">;</span>&nbsp;<span class="ident" id="2946971">i</span>&nbsp;<span class="op" id="2946973">&lt;</span>&nbsp;<span class="ident" id="2946975">n</span><span class="op" id="2946976">;</span>&nbsp;<span class="ident" id="2946978">i</span><span class="op" id="2946979">++</span>&nbsp;<span class="op" id="2946982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2946986">if</span>&nbsp;<span class="ident" id="2946989">xt</span><span class="op" id="2946991">,</span>&nbsp;<span class="ident" id="2946993">targ</span>&nbsp;<span class="op" id="2946998">:=</span>&nbsp;<span class="ident" id="2947001">in</span><span class="op" id="2947003">[</span><span class="ident" id="2947004">i</span><span class="op" id="2947005">]</span><span class="op" id="2947006">.</span><span class="ident" id="2947007">Type</span><span class="op" id="2947011">(</span><span class="op" id="2947012">)</span><span class="op" id="2947013">,</span>&nbsp;<span class="ident" id="2947015">t</span><span class="op" id="2947016">.</span><span class="ident" id="2947017">In</span><span class="op" id="2947019">(</span><span class="ident" id="2947020">i</span><span class="op" id="2947021">)</span><span class="op" id="2947022">;</span>&nbsp;<span class="op" id="2947024">!</span><span class="ident" id="2947025">xt</span><span class="op" id="2947027">.</span><span class="ident" id="2947028">AssignableTo</span><span class="op" id="2947040">(</span><span class="ident" id="2947041">targ</span><span class="op" id="2947045">)</span>&nbsp;<span class="op" id="2947047">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2947052">panic</span><span class="op" id="2947057">(</span><span class="string" id="2947058">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2947070">+</span>&nbsp;<span class="ident" id="2947072">op</span>&nbsp;<span class="op" id="2947075">+</span>&nbsp;<span class="string" id="2947077">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2947087">+</span>&nbsp;<span class="ident" id="2947089">xt</span><span class="op" id="2947091">.</span><span class="ident" id="2947092">String</span><span class="op" id="2947098">(</span><span class="op" id="2947099">)</span>&nbsp;<span class="op" id="2947101">+</span>&nbsp;<span class="string" id="2947103">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2947115">+</span>&nbsp;<span class="ident" id="2947117">targ</span><span class="op" id="2947121">.</span><span class="ident" id="2947122">String</span><span class="op" id="2947128">(</span><span class="op" id="2947129">)</span><span class="op" id="2947130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947140">if</span>&nbsp;<span class="op" id="2947143">!</span><span class="ident" id="2947144">isSlice</span>&nbsp;<span class="op" id="2947152">&amp;&amp;</span>&nbsp;<span class="ident" id="2947155">t</span><span class="op" id="2947156">.</span><span class="ident" id="2947157">IsVariadic</span><span class="op" id="2947167">(</span><span class="op" id="2947168">)</span>&nbsp;<span class="op" id="2947170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947174">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947214">m</span>&nbsp;<span class="op" id="2947216">:=</span>&nbsp;<span class="builtinfunc" id="2947219">len</span><span class="op" id="2947222">(</span><span class="ident" id="2947223">in</span><span class="op" id="2947225">)</span>&nbsp;<span class="op" id="2947227">-</span>&nbsp;<span class="ident" id="2947229">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947233">slice</span>&nbsp;<span class="op" id="2947239">:=</span>&nbsp;<span class="ident" id="2947242">MakeSlice</span><span class="op" id="2947251">(</span><span class="ident" id="2947252">t</span><span class="op" id="2947253">.</span><span class="ident" id="2947254">In</span><span class="op" id="2947256">(</span><span class="ident" id="2947257">n</span><span class="op" id="2947258">)</span><span class="op" id="2947259">,</span>&nbsp;<span class="ident" id="2947261">m</span><span class="op" id="2947262">,</span>&nbsp;<span class="ident" id="2947264">m</span><span class="op" id="2947265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947269">elem</span>&nbsp;<span class="op" id="2947274">:=</span>&nbsp;<span class="ident" id="2947277">t</span><span class="op" id="2947278">.</span><span class="ident" id="2947279">In</span><span class="op" id="2947281">(</span><span class="ident" id="2947282">n</span><span class="op" id="2947283">)</span><span class="op" id="2947284">.</span><span class="ident" id="2947285">Elem</span><span class="op" id="2947289">(</span><span class="op" id="2947290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947294">for</span>&nbsp;<span class="ident" id="2947298">i</span>&nbsp;<span class="op" id="2947300">:=</span>&nbsp;<span class="num" id="2947303">0</span><span class="op" id="2947304">;</span>&nbsp;<span class="ident" id="2947306">i</span>&nbsp;<span class="op" id="2947308">&lt;</span>&nbsp;<span class="ident" id="2947310">m</span><span class="op" id="2947311">;</span>&nbsp;<span class="ident" id="2947313">i</span><span class="op" id="2947314">++</span>&nbsp;<span class="op" id="2947317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947322">x</span>&nbsp;<span class="op" id="2947324">:=</span>&nbsp;<span class="ident" id="2947327">in</span><span class="op" id="2947329">[</span><span class="ident" id="2947330">n</span><span class="op" id="2947331">+</span><span class="ident" id="2947332">i</span><span class="op" id="2947333">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947338">if</span>&nbsp;<span class="ident" id="2947341">xt</span>&nbsp;<span class="op" id="2947344">:=</span>&nbsp;<span class="ident" id="2947347">x</span><span class="op" id="2947348">.</span><span class="ident" id="2947349">Type</span><span class="op" id="2947353">(</span><span class="op" id="2947354">)</span><span class="op" id="2947355">;</span>&nbsp;<span class="op" id="2947357">!</span><span class="ident" id="2947358">xt</span><span class="op" id="2947360">.</span><span class="ident" id="2947361">AssignableTo</span><span class="op" id="2947373">(</span><span class="ident" id="2947374">elem</span><span class="op" id="2947378">)</span>&nbsp;<span class="op" id="2947380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2947386">panic</span><span class="op" id="2947391">(</span><span class="string" id="2947392">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2947415">+</span>&nbsp;<span class="ident" id="2947417">xt</span><span class="op" id="2947419">.</span><span class="ident" id="2947420">String</span><span class="op" id="2947426">(</span><span class="op" id="2947427">)</span>&nbsp;<span class="op" id="2947429">+</span>&nbsp;<span class="string" id="2947431">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2947443">+</span>&nbsp;<span class="ident" id="2947445">elem</span><span class="op" id="2947449">.</span><span class="ident" id="2947450">String</span><span class="op" id="2947456">(</span><span class="op" id="2947457">)</span>&nbsp;<span class="op" id="2947459">+</span>&nbsp;<span class="string" id="2947461">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2947468">+</span>&nbsp;<span class="ident" id="2947470">op</span><span class="op" id="2947472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947482">slice</span><span class="op" id="2947487">.</span><span class="ident" id="2947488">Index</span><span class="op" id="2947493">(</span><span class="ident" id="2947494">i</span><span class="op" id="2947495">)</span><span class="op" id="2947496">.</span><span class="ident" id="2947497">Set</span><span class="op" id="2947500">(</span><span class="ident" id="2947501">x</span><span class="op" id="2947502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947506">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947510">origIn</span>&nbsp;<span class="op" id="2947517">:=</span>&nbsp;<span class="ident" id="2947520">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947525">in</span>&nbsp;<span class="op" id="2947528">=</span>&nbsp;<span class="builtinfunc" id="2947530">make</span><span class="op" id="2947534">(</span><span class="op" id="2947535">[</span><span class="op" id="2947536">]</span><span class="ident" id="2947537">Value</span><span class="op" id="2947542">,</span>&nbsp;<span class="ident" id="2947544">n</span><span class="op" id="2947545">+</span><span class="num" id="2947546">1</span><span class="op" id="2947547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2947551">copy</span><span class="op" id="2947555">(</span><span class="ident" id="2947556">in</span><span class="op" id="2947558">[</span><span class="op" id="2947559">:</span><span class="ident" id="2947560">n</span><span class="op" id="2947561">]</span><span class="op" id="2947562">,</span>&nbsp;<span class="ident" id="2947564">origIn</span><span class="op" id="2947570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947574">in</span><span class="op" id="2947576">[</span><span class="ident" id="2947577">n</span><span class="op" id="2947578">]</span>&nbsp;<span class="op" id="2947580">=</span>&nbsp;<span class="ident" id="2947582">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947589">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947593">nin</span>&nbsp;<span class="op" id="2947597">:=</span>&nbsp;<span class="builtinfunc" id="2947600">len</span><span class="op" id="2947603">(</span><span class="ident" id="2947604">in</span><span class="op" id="2947606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947609">if</span>&nbsp;<span class="ident" id="2947612">nin</span>&nbsp;<span class="op" id="2947616">!=</span>&nbsp;<span class="ident" id="2947619">t</span><span class="op" id="2947620">.</span><span class="ident" id="2947621">NumIn</span><span class="op" id="2947626">(</span><span class="op" id="2947627">)</span>&nbsp;<span class="op" id="2947629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2947633">panic</span><span class="op" id="2947638">(</span><span class="string" id="2947639">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2947681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947684">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947687">nout</span>&nbsp;<span class="op" id="2947692">:=</span>&nbsp;<span class="ident" id="2947695">t</span><span class="op" id="2947696">.</span><span class="ident" id="2947697">NumOut</span><span class="op" id="2947703">(</span><span class="op" id="2947704">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947708">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947769">frametype</span><span class="op" id="2947778">,</span>&nbsp;<span class="ident" id="2947780">_</span><span class="op" id="2947781">,</span>&nbsp;<span class="ident" id="2947783">retOffset</span><span class="op" id="2947792">,</span>&nbsp;<span class="ident" id="2947794">_</span>&nbsp;<span class="op" id="2947796">:=</span>&nbsp;<span class="ident" id="2947799">funcLayout</span><span class="op" id="2947809">(</span><span class="ident" id="2947810">t</span><span class="op" id="2947811">,</span>&nbsp;<span class="ident" id="2947813">rcvrtype</span><span class="op" id="2947821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947824">args</span>&nbsp;<span class="op" id="2947829">:=</span>&nbsp;<span class="ident" id="2947832">unsafe_New</span><span class="op" id="2947842">(</span><span class="ident" id="2947843">frametype</span><span class="op" id="2947852">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947855">off</span>&nbsp;<span class="op" id="2947859">:=</span>&nbsp;<span class="builtintype" id="2947862">uintptr</span><span class="op" id="2947869">(</span><span class="num" id="2947870">0</span><span class="op" id="2947871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947875">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947902">if</span>&nbsp;<span class="ident" id="2947905">rcvrtype</span>&nbsp;<span class="op" id="2947914">!=</span>&nbsp;<span class="ident" id="2947917">nil</span>&nbsp;<span class="op" id="2947921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947925">storeRcvr</span><span class="op" id="2947934">(</span><span class="ident" id="2947935">rcvr</span><span class="op" id="2947939">,</span>&nbsp;<span class="ident" id="2947941">args</span><span class="op" id="2947945">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947949">off</span>&nbsp;<span class="op" id="2947953">=</span>&nbsp;<span class="ident" id="2947955">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2947964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2947967">for</span>&nbsp;<span class="ident" id="2947971">i</span><span class="op" id="2947972">,</span>&nbsp;<span class="ident" id="2947974">v</span>&nbsp;<span class="op" id="2947976">:=</span>&nbsp;<span class="keyword" id="2947979">range</span>&nbsp;<span class="ident" id="2947985">in</span>&nbsp;<span class="op" id="2947988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2947992">v</span><span class="op" id="2947993">.</span><span class="ident" id="2947994">mustBeExported</span><span class="op" id="2948008">(</span><span class="op" id="2948009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948013">targ</span>&nbsp;<span class="op" id="2948018">:=</span>&nbsp;<span class="ident" id="2948021">t</span><span class="op" id="2948022">.</span><span class="ident" id="2948023">In</span><span class="op" id="2948025">(</span><span class="ident" id="2948026">i</span><span class="op" id="2948027">)</span><span class="op" id="2948028">.</span><span class="op" id="2948029">(</span><span class="op" id="2948030">*</span><span class="ident" id="2948031">rtype</span><span class="op" id="2948036">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948040">a</span>&nbsp;<span class="op" id="2948042">:=</span>&nbsp;<span class="builtintype" id="2948045">uintptr</span><span class="op" id="2948052">(</span><span class="ident" id="2948053">targ</span><span class="op" id="2948057">.</span><span class="ident" id="2948058">align</span><span class="op" id="2948063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948067">off</span>&nbsp;<span class="op" id="2948071">=</span>&nbsp;<span class="op" id="2948073">(</span><span class="ident" id="2948074">off</span>&nbsp;<span class="op" id="2948078">+</span>&nbsp;<span class="ident" id="2948080">a</span>&nbsp;<span class="op" id="2948082">-</span>&nbsp;<span class="num" id="2948084">1</span><span class="op" id="2948085">)</span>&nbsp;<span class="op" id="2948087">&amp;^</span>&nbsp;<span class="op" id="2948090">(</span><span class="ident" id="2948091">a</span>&nbsp;<span class="op" id="2948093">-</span>&nbsp;<span class="num" id="2948095">1</span><span class="op" id="2948096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948100">n</span>&nbsp;<span class="op" id="2948102">:=</span>&nbsp;<span class="ident" id="2948105">targ</span><span class="op" id="2948109">.</span><span class="ident" id="2948110">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948117">addr</span>&nbsp;<span class="op" id="2948122">:=</span>&nbsp;<span class="ident" id="2948125">unsafe</span><span class="op" id="2948131">.</span><span class="ident" id="2948132">Pointer</span><span class="op" id="2948139">(</span><span class="builtintype" id="2948140">uintptr</span><span class="op" id="2948147">(</span><span class="ident" id="2948148">args</span><span class="op" id="2948152">)</span>&nbsp;<span class="op" id="2948154">+</span>&nbsp;<span class="ident" id="2948156">off</span><span class="op" id="2948159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948163">v</span>&nbsp;<span class="op" id="2948165">=</span>&nbsp;<span class="ident" id="2948167">v</span><span class="op" id="2948168">.</span><span class="ident" id="2948169">assignTo</span><span class="op" id="2948177">(</span><span class="string" id="2948178">&#34;reflect.Value.Call&#34;</span><span class="op" id="2948198">,</span>&nbsp;<span class="ident" id="2948200">targ</span><span class="op" id="2948204">,</span>&nbsp;<span class="ident" id="2948206">addr</span><span class="op" id="2948210">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948214">if</span>&nbsp;<span class="ident" id="2948217">v</span><span class="op" id="2948218">.</span><span class="ident" id="2948219">flag</span><span class="op" id="2948223">&amp;</span><span class="ident" id="2948224">flagIndir</span>&nbsp;<span class="op" id="2948234">!=</span>&nbsp;<span class="num" id="2948237">0</span>&nbsp;<span class="op" id="2948239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948244">memmove</span><span class="op" id="2948251">(</span><span class="ident" id="2948252">addr</span><span class="op" id="2948256">,</span>&nbsp;<span class="ident" id="2948258">v</span><span class="op" id="2948259">.</span><span class="ident" id="2948260">ptr</span><span class="op" id="2948263">,</span>&nbsp;<span class="ident" id="2948265">n</span><span class="op" id="2948266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948270">}</span>&nbsp;<span class="keyword" id="2948272">else</span>&nbsp;<span class="op" id="2948277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948282">*</span><span class="op" id="2948283">(</span><span class="op" id="2948284">*</span><span class="ident" id="2948285">unsafe</span><span class="op" id="2948291">.</span><span class="ident" id="2948292">Pointer</span><span class="op" id="2948299">)</span><span class="op" id="2948300">(</span><span class="ident" id="2948301">addr</span><span class="op" id="2948305">)</span>&nbsp;<span class="op" id="2948307">=</span>&nbsp;<span class="ident" id="2948309">v</span><span class="op" id="2948310">.</span><span class="ident" id="2948311">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948317">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948321">off</span>&nbsp;<span class="op" id="2948325">+=</span>&nbsp;<span class="ident" id="2948328">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948335">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948345">call</span><span class="op" id="2948349">(</span><span class="ident" id="2948350">fn</span><span class="op" id="2948352">,</span>&nbsp;<span class="ident" id="2948354">args</span><span class="op" id="2948358">,</span>&nbsp;<span class="builtintype" id="2948360">uint32</span><span class="op" id="2948366">(</span><span class="ident" id="2948367">frametype</span><span class="op" id="2948376">.</span><span class="ident" id="2948377">size</span><span class="op" id="2948381">)</span><span class="op" id="2948382">,</span>&nbsp;<span class="builtintype" id="2948384">uint32</span><span class="op" id="2948390">(</span><span class="ident" id="2948391">retOffset</span><span class="op" id="2948400">)</span><span class="op" id="2948401">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948405">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948446">if</span>&nbsp;<span class="ident" id="2948449">callGC</span>&nbsp;<span class="op" id="2948456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948460">runtime</span><span class="op" id="2948467">.</span><span class="ident" id="2948468">GC</span><span class="op" id="2948470">(</span><span class="op" id="2948471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948474">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948478">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948514">ret</span>&nbsp;<span class="op" id="2948518">:=</span>&nbsp;<span class="builtinfunc" id="2948521">make</span><span class="op" id="2948525">(</span><span class="op" id="2948526">[</span><span class="op" id="2948527">]</span><span class="ident" id="2948528">Value</span><span class="op" id="2948533">,</span>&nbsp;<span class="ident" id="2948535">nout</span><span class="op" id="2948539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948542">off</span>&nbsp;<span class="op" id="2948546">=</span>&nbsp;<span class="ident" id="2948548">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948559">for</span>&nbsp;<span class="ident" id="2948563">i</span>&nbsp;<span class="op" id="2948565">:=</span>&nbsp;<span class="num" id="2948568">0</span><span class="op" id="2948569">;</span>&nbsp;<span class="ident" id="2948571">i</span>&nbsp;<span class="op" id="2948573">&lt;</span>&nbsp;<span class="ident" id="2948575">nout</span><span class="op" id="2948579">;</span>&nbsp;<span class="ident" id="2948581">i</span><span class="op" id="2948582">++</span>&nbsp;<span class="op" id="2948585">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948589">tv</span>&nbsp;<span class="op" id="2948592">:=</span>&nbsp;<span class="ident" id="2948595">t</span><span class="op" id="2948596">.</span><span class="ident" id="2948597">Out</span><span class="op" id="2948600">(</span><span class="ident" id="2948601">i</span><span class="op" id="2948602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948606">a</span>&nbsp;<span class="op" id="2948608">:=</span>&nbsp;<span class="builtintype" id="2948611">uintptr</span><span class="op" id="2948618">(</span><span class="ident" id="2948619">tv</span><span class="op" id="2948621">.</span><span class="ident" id="2948622">Align</span><span class="op" id="2948627">(</span><span class="op" id="2948628">)</span><span class="op" id="2948629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948633">off</span>&nbsp;<span class="op" id="2948637">=</span>&nbsp;<span class="op" id="2948639">(</span><span class="ident" id="2948640">off</span>&nbsp;<span class="op" id="2948644">+</span>&nbsp;<span class="ident" id="2948646">a</span>&nbsp;<span class="op" id="2948648">-</span>&nbsp;<span class="num" id="2948650">1</span><span class="op" id="2948651">)</span>&nbsp;<span class="op" id="2948653">&amp;^</span>&nbsp;<span class="op" id="2948656">(</span><span class="ident" id="2948657">a</span>&nbsp;<span class="op" id="2948659">-</span>&nbsp;<span class="num" id="2948661">1</span><span class="op" id="2948662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948666">fl</span>&nbsp;<span class="op" id="2948669">:=</span>&nbsp;<span class="ident" id="2948672">flagIndir</span>&nbsp;<span class="op" id="2948682">|</span>&nbsp;<span class="ident" id="2948684">flag</span><span class="op" id="2948688">(</span><span class="ident" id="2948689">tv</span><span class="op" id="2948691">.</span><span class="ident" id="2948692">Kind</span><span class="op" id="2948696">(</span><span class="op" id="2948697">)</span><span class="op" id="2948698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948702">ret</span><span class="op" id="2948705">[</span><span class="ident" id="2948706">i</span><span class="op" id="2948707">]</span>&nbsp;<span class="op" id="2948709">=</span>&nbsp;<span class="ident" id="2948711">Value</span><span class="op" id="2948716">{</span><span class="ident" id="2948717">tv</span><span class="op" id="2948719">.</span><span class="ident" id="2948720">common</span><span class="op" id="2948726">(</span><span class="op" id="2948727">)</span><span class="op" id="2948728">,</span>&nbsp;<span class="ident" id="2948730">unsafe</span><span class="op" id="2948736">.</span><span class="ident" id="2948737">Pointer</span><span class="op" id="2948744">(</span><span class="builtintype" id="2948745">uintptr</span><span class="op" id="2948752">(</span><span class="ident" id="2948753">args</span><span class="op" id="2948757">)</span>&nbsp;<span class="op" id="2948759">+</span>&nbsp;<span class="ident" id="2948761">off</span><span class="op" id="2948764">)</span><span class="op" id="2948765">,</span>&nbsp;<span class="ident" id="2948767">fl</span><span class="op" id="2948769">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948773">off</span>&nbsp;<span class="op" id="2948777">+=</span>&nbsp;<span class="ident" id="2948780">tv</span><span class="op" id="2948782">.</span><span class="ident" id="2948783">Size</span><span class="op" id="2948787">(</span><span class="op" id="2948788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2948791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948795">return</span>&nbsp;<span class="ident" id="2948802">ret</span><br>
<span class="lineno"></span><span class="op" id="2948806">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2948809">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2948870">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2948934">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2949008">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2949075">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2949145">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2949180">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2949251">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2949318">//</span><br>
<span class="lineno">450</span><span class="comment" id="2949321">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2949397">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2949469">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2949541">func</span>&nbsp;<span class="ident" id="2949546">callReflect</span><span class="op" id="2949557">(</span><span class="ident" id="2949558">ctxt</span>&nbsp;<span class="op" id="2949563">*</span><span class="ident" id="2949564">makeFuncImpl</span><span class="op" id="2949576">,</span>&nbsp;<span class="ident" id="2949578">frame</span>&nbsp;<span class="ident" id="2949584">unsafe</span><span class="op" id="2949590">.</span><span class="ident" id="2949591">Pointer</span><span class="op" id="2949598">)</span>&nbsp;<span class="op" id="2949600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949603">ftyp</span>&nbsp;<span class="op" id="2949608">:=</span>&nbsp;<span class="ident" id="2949611">ctxt</span><span class="op" id="2949615">.</span><span class="ident" id="2949616">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949621">f</span>&nbsp;<span class="op" id="2949623">:=</span>&nbsp;<span class="ident" id="2949626">ctxt</span><span class="op" id="2949630">.</span><span class="ident" id="2949631">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949636">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949673">ptr</span>&nbsp;<span class="op" id="2949677">:=</span>&nbsp;<span class="ident" id="2949680">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949687">off</span>&nbsp;<span class="op" id="2949691">:=</span>&nbsp;<span class="builtintype" id="2949694">uintptr</span><span class="op" id="2949701">(</span><span class="num" id="2949702">0</span><span class="op" id="2949703">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949706">in</span>&nbsp;<span class="op" id="2949709">:=</span>&nbsp;<span class="builtinfunc" id="2949712">make</span><span class="op" id="2949716">(</span><span class="op" id="2949717">[</span><span class="op" id="2949718">]</span><span class="ident" id="2949719">Value</span><span class="op" id="2949724">,</span>&nbsp;<span class="num" id="2949726">0</span><span class="op" id="2949727">,</span>&nbsp;<span class="builtinfunc" id="2949729">len</span><span class="op" id="2949732">(</span><span class="ident" id="2949733">ftyp</span><span class="op" id="2949737">.</span><span class="ident" id="2949738">in</span><span class="op" id="2949740">)</span><span class="op" id="2949741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949744">for</span>&nbsp;<span class="ident" id="2949748">_</span><span class="op" id="2949749">,</span>&nbsp;<span class="ident" id="2949751">arg</span>&nbsp;<span class="op" id="2949755">:=</span>&nbsp;<span class="keyword" id="2949758">range</span>&nbsp;<span class="ident" id="2949764">ftyp</span><span class="op" id="2949768">.</span><span class="ident" id="2949769">in</span>&nbsp;<span class="op" id="2949772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949776">typ</span>&nbsp;<span class="op" id="2949780">:=</span>&nbsp;<span class="ident" id="2949783">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949789">off</span>&nbsp;<span class="op" id="2949793">+=</span>&nbsp;<span class="op" id="2949796">-</span><span class="ident" id="2949797">off</span>&nbsp;<span class="op" id="2949801">&amp;</span>&nbsp;<span class="builtintype" id="2949803">uintptr</span><span class="op" id="2949810">(</span><span class="ident" id="2949811">typ</span><span class="op" id="2949814">.</span><span class="ident" id="2949815">align</span><span class="op" id="2949820">-</span><span class="num" id="2949821">1</span><span class="op" id="2949822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949826">addr</span>&nbsp;<span class="op" id="2949831">:=</span>&nbsp;<span class="ident" id="2949834">unsafe</span><span class="op" id="2949840">.</span><span class="ident" id="2949841">Pointer</span><span class="op" id="2949848">(</span><span class="builtintype" id="2949849">uintptr</span><span class="op" id="2949856">(</span><span class="ident" id="2949857">ptr</span><span class="op" id="2949860">)</span>&nbsp;<span class="op" id="2949862">+</span>&nbsp;<span class="ident" id="2949864">off</span><span class="op" id="2949867">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949871">v</span>&nbsp;<span class="op" id="2949873">:=</span>&nbsp;<span class="ident" id="2949876">Value</span><span class="op" id="2949881">{</span><span class="ident" id="2949882">typ</span><span class="op" id="2949885">,</span>&nbsp;<span class="ident" id="2949887">nil</span><span class="op" id="2949890">,</span>&nbsp;<span class="ident" id="2949892">flag</span><span class="op" id="2949896">(</span><span class="ident" id="2949897">typ</span><span class="op" id="2949900">.</span><span class="ident" id="2949901">Kind</span><span class="op" id="2949905">(</span><span class="op" id="2949906">)</span><span class="op" id="2949907">)</span><span class="op" id="2949908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949912">if</span>&nbsp;<span class="ident" id="2949915">ifaceIndir</span><span class="op" id="2949925">(</span><span class="ident" id="2949926">typ</span><span class="op" id="2949929">)</span>&nbsp;<span class="op" id="2949931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949936">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2949985">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950049">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950111">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950178">v</span><span class="op" id="2950179">.</span><span class="ident" id="2950180">ptr</span>&nbsp;<span class="op" id="2950184">=</span>&nbsp;<span class="ident" id="2950186">unsafe_New</span><span class="op" id="2950196">(</span><span class="ident" id="2950197">typ</span><span class="op" id="2950200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950205">memmove</span><span class="op" id="2950212">(</span><span class="ident" id="2950213">v</span><span class="op" id="2950214">.</span><span class="ident" id="2950215">ptr</span><span class="op" id="2950218">,</span>&nbsp;<span class="ident" id="2950220">addr</span><span class="op" id="2950224">,</span>&nbsp;<span class="ident" id="2950226">typ</span><span class="op" id="2950229">.</span><span class="ident" id="2950230">size</span><span class="op" id="2950234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950239">v</span><span class="op" id="2950240">.</span><span class="ident" id="2950241">flag</span>&nbsp;<span class="op" id="2950246">|=</span>&nbsp;<span class="ident" id="2950249">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950261">}</span>&nbsp;<span class="keyword" id="2950263">else</span>&nbsp;<span class="op" id="2950268">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950273">v</span><span class="op" id="2950274">.</span><span class="ident" id="2950275">ptr</span>&nbsp;<span class="op" id="2950279">=</span>&nbsp;<span class="op" id="2950281">*</span><span class="op" id="2950282">(</span><span class="op" id="2950283">*</span><span class="ident" id="2950284">unsafe</span><span class="op" id="2950290">.</span><span class="ident" id="2950291">Pointer</span><span class="op" id="2950298">)</span><span class="op" id="2950299">(</span><span class="ident" id="2950300">addr</span><span class="op" id="2950304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950312">in</span>&nbsp;<span class="op" id="2950315">=</span>&nbsp;<span class="builtinfunc" id="2950317">append</span><span class="op" id="2950323">(</span><span class="ident" id="2950324">in</span><span class="op" id="2950326">,</span>&nbsp;<span class="ident" id="2950328">v</span><span class="op" id="2950329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950333">off</span>&nbsp;<span class="op" id="2950337">+=</span>&nbsp;<span class="ident" id="2950340">typ</span><span class="op" id="2950343">.</span><span class="ident" id="2950344">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950350">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950354">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950384">out</span>&nbsp;<span class="op" id="2950388">:=</span>&nbsp;<span class="ident" id="2950391">f</span><span class="op" id="2950392">(</span><span class="ident" id="2950393">in</span><span class="op" id="2950395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950398">if</span>&nbsp;<span class="builtinfunc" id="2950401">len</span><span class="op" id="2950404">(</span><span class="ident" id="2950405">out</span><span class="op" id="2950408">)</span>&nbsp;<span class="op" id="2950410">!=</span>&nbsp;<span class="builtinfunc" id="2950413">len</span><span class="op" id="2950416">(</span><span class="ident" id="2950417">ftyp</span><span class="op" id="2950421">.</span><span class="ident" id="2950422">out</span><span class="op" id="2950425">)</span>&nbsp;<span class="op" id="2950427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2950431">panic</span><span class="op" id="2950436">(</span><span class="string" id="2950437">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2950500">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950507">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950550">if</span>&nbsp;<span class="builtinfunc" id="2950553">len</span><span class="op" id="2950556">(</span><span class="ident" id="2950557">ftyp</span><span class="op" id="2950561">.</span><span class="ident" id="2950562">out</span><span class="op" id="2950565">)</span>&nbsp;<span class="op" id="2950567">&gt;</span>&nbsp;<span class="num" id="2950569">0</span>&nbsp;<span class="op" id="2950571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950575">off</span>&nbsp;<span class="op" id="2950579">+=</span>&nbsp;<span class="op" id="2950582">-</span><span class="ident" id="2950583">off</span>&nbsp;<span class="op" id="2950587">&amp;</span>&nbsp;<span class="op" id="2950589">(</span><span class="ident" id="2950590">ptrSize</span>&nbsp;<span class="op" id="2950598">-</span>&nbsp;<span class="num" id="2950600">1</span><span class="op" id="2950601">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950605">if</span>&nbsp;<span class="ident" id="2950608">runtime</span><span class="op" id="2950615">.</span><span class="ident" id="2950616">GOARCH</span>&nbsp;<span class="op" id="2950623">==</span>&nbsp;<span class="string" id="2950626">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2950637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950642">off</span>&nbsp;<span class="op" id="2950646">=</span>&nbsp;<span class="ident" id="2950648">align</span><span class="op" id="2950653">(</span><span class="ident" id="2950654">off</span><span class="op" id="2950657">,</span>&nbsp;<span class="num" id="2950659">8</span><span class="op" id="2950660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950668">for</span>&nbsp;<span class="ident" id="2950672">i</span><span class="op" id="2950673">,</span>&nbsp;<span class="ident" id="2950675">arg</span>&nbsp;<span class="op" id="2950679">:=</span>&nbsp;<span class="keyword" id="2950682">range</span>&nbsp;<span class="ident" id="2950688">ftyp</span><span class="op" id="2950692">.</span><span class="ident" id="2950693">out</span>&nbsp;<span class="op" id="2950697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950702">typ</span>&nbsp;<span class="op" id="2950706">:=</span>&nbsp;<span class="ident" id="2950709">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950716">v</span>&nbsp;<span class="op" id="2950718">:=</span>&nbsp;<span class="ident" id="2950721">out</span><span class="op" id="2950724">[</span><span class="ident" id="2950725">i</span><span class="op" id="2950726">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950731">if</span>&nbsp;<span class="ident" id="2950734">v</span><span class="op" id="2950735">.</span><span class="ident" id="2950736">typ</span>&nbsp;<span class="op" id="2950740">!=</span>&nbsp;<span class="ident" id="2950743">typ</span>&nbsp;<span class="op" id="2950747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2950753">panic</span><span class="op" id="2950758">(</span><span class="string" id="2950759">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2950806">+</span>&nbsp;<span class="ident" id="2950808">funcName</span><span class="op" id="2950816">(</span><span class="ident" id="2950817">f</span><span class="op" id="2950818">)</span>&nbsp;<span class="op" id="2950820">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2950827">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2950857">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950864">out</span><span class="op" id="2950867">[</span><span class="ident" id="2950868">i</span><span class="op" id="2950869">]</span><span class="op" id="2950870">.</span><span class="ident" id="2950871">typ</span><span class="op" id="2950874">.</span><span class="ident" id="2950875">String</span><span class="op" id="2950881">(</span><span class="op" id="2950882">)</span>&nbsp;<span class="op" id="2950884">+</span>&nbsp;<span class="string" id="2950886">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2950894">+</span>&nbsp;<span class="ident" id="2950896">typ</span><span class="op" id="2950899">.</span><span class="ident" id="2950900">String</span><span class="op" id="2950906">(</span><span class="op" id="2950907">)</span><span class="op" id="2950908">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2950913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950918">if</span>&nbsp;<span class="ident" id="2950921">v</span><span class="op" id="2950922">.</span><span class="ident" id="2950923">flag</span><span class="op" id="2950927">&amp;</span><span class="ident" id="2950928">flagRO</span>&nbsp;<span class="op" id="2950935">!=</span>&nbsp;<span class="num" id="2950938">0</span>&nbsp;<span class="op" id="2950940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2950946">panic</span><span class="op" id="2950951">(</span><span class="string" id="2950952">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2950999">+</span>&nbsp;<span class="ident" id="2951001">funcName</span><span class="op" id="2951009">(</span><span class="ident" id="2951010">f</span><span class="op" id="2951011">)</span>&nbsp;<span class="op" id="2951013">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2951020">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2951068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951073">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951078">off</span>&nbsp;<span class="op" id="2951082">+=</span>&nbsp;<span class="op" id="2951085">-</span><span class="ident" id="2951086">off</span>&nbsp;<span class="op" id="2951090">&amp;</span>&nbsp;<span class="builtintype" id="2951092">uintptr</span><span class="op" id="2951099">(</span><span class="ident" id="2951100">typ</span><span class="op" id="2951103">.</span><span class="ident" id="2951104">align</span><span class="op" id="2951109">-</span><span class="num" id="2951110">1</span><span class="op" id="2951111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951116">addr</span>&nbsp;<span class="op" id="2951121">:=</span>&nbsp;<span class="ident" id="2951124">unsafe</span><span class="op" id="2951130">.</span><span class="ident" id="2951131">Pointer</span><span class="op" id="2951138">(</span><span class="builtintype" id="2951139">uintptr</span><span class="op" id="2951146">(</span><span class="ident" id="2951147">ptr</span><span class="op" id="2951150">)</span>&nbsp;<span class="op" id="2951152">+</span>&nbsp;<span class="ident" id="2951154">off</span><span class="op" id="2951157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951162">if</span>&nbsp;<span class="ident" id="2951165">v</span><span class="op" id="2951166">.</span><span class="ident" id="2951167">flag</span><span class="op" id="2951171">&amp;</span><span class="ident" id="2951172">flagIndir</span>&nbsp;<span class="op" id="2951182">!=</span>&nbsp;<span class="num" id="2951185">0</span>&nbsp;<span class="op" id="2951187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951193">memmove</span><span class="op" id="2951200">(</span><span class="ident" id="2951201">addr</span><span class="op" id="2951205">,</span>&nbsp;<span class="ident" id="2951207">v</span><span class="op" id="2951208">.</span><span class="ident" id="2951209">ptr</span><span class="op" id="2951212">,</span>&nbsp;<span class="ident" id="2951214">typ</span><span class="op" id="2951217">.</span><span class="ident" id="2951218">size</span><span class="op" id="2951222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951227">}</span>&nbsp;<span class="keyword" id="2951229">else</span>&nbsp;<span class="op" id="2951234">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951240">*</span><span class="op" id="2951241">(</span><span class="op" id="2951242">*</span><span class="ident" id="2951243">unsafe</span><span class="op" id="2951249">.</span><span class="ident" id="2951250">Pointer</span><span class="op" id="2951257">)</span><span class="op" id="2951258">(</span><span class="ident" id="2951259">addr</span><span class="op" id="2951263">)</span>&nbsp;<span class="op" id="2951265">=</span>&nbsp;<span class="ident" id="2951267">v</span><span class="op" id="2951268">.</span><span class="ident" id="2951269">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951281">off</span>&nbsp;<span class="op" id="2951285">+=</span>&nbsp;<span class="ident" id="2951288">typ</span><span class="op" id="2951291">.</span><span class="ident" id="2951292">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951302">}</span><br>
<span class="lineno">515</span><span class="op" id="2951304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2951307">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2951364">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2951419">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2951478">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2951494">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2951564">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2951642">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2951698">func</span>&nbsp;<span class="ident" id="2951703">methodReceiver</span><span class="op" id="2951717">(</span><span class="ident" id="2951718">op</span>&nbsp;<span class="builtintype" id="2951721">string</span><span class="op" id="2951727">,</span>&nbsp;<span class="ident" id="2951729">v</span>&nbsp;<span class="ident" id="2951731">Value</span><span class="op" id="2951736">,</span>&nbsp;<span class="ident" id="2951738">methodIndex</span>&nbsp;<span class="builtintype" id="2951750">int</span><span class="op" id="2951753">)</span>&nbsp;<span class="op" id="2951755">(</span><span class="ident" id="2951756">rcvrtype</span><span class="op" id="2951764">,</span>&nbsp;<span class="ident" id="2951766">t</span>&nbsp;<span class="op" id="2951768">*</span><span class="ident" id="2951769">rtype</span><span class="op" id="2951774">,</span>&nbsp;<span class="ident" id="2951776">fn</span>&nbsp;<span class="ident" id="2951779">unsafe</span><span class="op" id="2951785">.</span><span class="ident" id="2951786">Pointer</span><span class="op" id="2951793">)</span>&nbsp;<span class="op" id="2951795">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951798">i</span>&nbsp;<span class="op" id="2951800">:=</span>&nbsp;<span class="ident" id="2951803">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951816">if</span>&nbsp;<span class="ident" id="2951819">v</span><span class="op" id="2951820">.</span><span class="ident" id="2951821">typ</span><span class="op" id="2951824">.</span><span class="ident" id="2951825">Kind</span><span class="op" id="2951829">(</span><span class="op" id="2951830">)</span>&nbsp;<span class="op" id="2951832">==</span>&nbsp;<span class="ident" id="2951835">Interface</span>&nbsp;<span class="op" id="2951845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951849">tt</span>&nbsp;<span class="op" id="2951852">:=</span>&nbsp;<span class="op" id="2951855">(</span><span class="op" id="2951856">*</span><span class="ident" id="2951857">interfaceType</span><span class="op" id="2951870">)</span><span class="op" id="2951871">(</span><span class="ident" id="2951872">unsafe</span><span class="op" id="2951878">.</span><span class="ident" id="2951879">Pointer</span><span class="op" id="2951886">(</span><span class="ident" id="2951887">v</span><span class="op" id="2951888">.</span><span class="ident" id="2951889">typ</span><span class="op" id="2951892">)</span><span class="op" id="2951893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951897">if</span>&nbsp;<span class="builtintype" id="2951900">uint</span><span class="op" id="2951904">(</span><span class="ident" id="2951905">i</span><span class="op" id="2951906">)</span>&nbsp;<span class="op" id="2951908">&gt;=</span>&nbsp;<span class="builtintype" id="2951911">uint</span><span class="op" id="2951915">(</span><span class="builtinfunc" id="2951916">len</span><span class="op" id="2951919">(</span><span class="ident" id="2951920">tt</span><span class="op" id="2951922">.</span><span class="ident" id="2951923">methods</span><span class="op" id="2951930">)</span><span class="op" id="2951931">)</span>&nbsp;<span class="op" id="2951933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2951938">panic</span><span class="op" id="2951943">(</span><span class="string" id="2951944">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2951991">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951999">m</span>&nbsp;<span class="op" id="2952001">:=</span>&nbsp;<span class="op" id="2952004">&amp;</span><span class="ident" id="2952005">tt</span><span class="op" id="2952007">.</span><span class="ident" id="2952008">methods</span><span class="op" id="2952015">[</span><span class="ident" id="2952016">i</span><span class="op" id="2952017">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952021">if</span>&nbsp;<span class="ident" id="2952024">m</span><span class="op" id="2952025">.</span><span class="ident" id="2952026">pkgPath</span>&nbsp;<span class="op" id="2952034">!=</span>&nbsp;<span class="ident" id="2952037">nil</span>&nbsp;<span class="op" id="2952041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2952046">panic</span><span class="op" id="2952051">(</span><span class="string" id="2952052">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2952064">+</span>&nbsp;<span class="ident" id="2952066">op</span>&nbsp;<span class="op" id="2952069">+</span>&nbsp;<span class="string" id="2952071">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2952094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952098">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952102">iface</span>&nbsp;<span class="op" id="2952108">:=</span>&nbsp;<span class="op" id="2952111">(</span><span class="op" id="2952112">*</span><span class="ident" id="2952113">nonEmptyInterface</span><span class="op" id="2952130">)</span><span class="op" id="2952131">(</span><span class="ident" id="2952132">v</span><span class="op" id="2952133">.</span><span class="ident" id="2952134">ptr</span><span class="op" id="2952137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952141">if</span>&nbsp;<span class="ident" id="2952144">iface</span><span class="op" id="2952149">.</span><span class="ident" id="2952150">itab</span>&nbsp;<span class="op" id="2952155">==</span>&nbsp;<span class="ident" id="2952158">nil</span>&nbsp;<span class="op" id="2952162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2952167">panic</span><span class="op" id="2952172">(</span><span class="string" id="2952173">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2952185">+</span>&nbsp;<span class="ident" id="2952187">op</span>&nbsp;<span class="op" id="2952190">+</span>&nbsp;<span class="string" id="2952192">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2952227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952235">rcvrtype</span>&nbsp;<span class="op" id="2952244">=</span>&nbsp;<span class="ident" id="2952246">iface</span><span class="op" id="2952251">.</span><span class="ident" id="2952252">itab</span><span class="op" id="2952256">.</span><span class="ident" id="2952257">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952263">fn</span>&nbsp;<span class="op" id="2952266">=</span>&nbsp;<span class="ident" id="2952268">unsafe</span><span class="op" id="2952274">.</span><span class="ident" id="2952275">Pointer</span><span class="op" id="2952282">(</span><span class="op" id="2952283">&amp;</span><span class="ident" id="2952284">iface</span><span class="op" id="2952289">.</span><span class="ident" id="2952290">itab</span><span class="op" id="2952294">.</span><span class="ident" id="2952295">fun</span><span class="op" id="2952298">[</span><span class="ident" id="2952299">i</span><span class="op" id="2952300">]</span><span class="op" id="2952301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952305">t</span>&nbsp;<span class="op" id="2952307">=</span>&nbsp;<span class="ident" id="2952309">m</span><span class="op" id="2952310">.</span><span class="ident" id="2952311">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952316">}</span>&nbsp;<span class="keyword" id="2952318">else</span>&nbsp;<span class="op" id="2952323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952327">rcvrtype</span>&nbsp;<span class="op" id="2952336">=</span>&nbsp;<span class="ident" id="2952338">v</span><span class="op" id="2952339">.</span><span class="ident" id="2952340">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952346">ut</span>&nbsp;<span class="op" id="2952349">:=</span>&nbsp;<span class="ident" id="2952352">v</span><span class="op" id="2952353">.</span><span class="ident" id="2952354">typ</span><span class="op" id="2952357">.</span><span class="ident" id="2952358">uncommon</span><span class="op" id="2952366">(</span><span class="op" id="2952367">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952371">if</span>&nbsp;<span class="ident" id="2952374">ut</span>&nbsp;<span class="op" id="2952377">==</span>&nbsp;<span class="ident" id="2952380">nil</span>&nbsp;<span class="op" id="2952384">||</span>&nbsp;<span class="builtintype" id="2952387">uint</span><span class="op" id="2952391">(</span><span class="ident" id="2952392">i</span><span class="op" id="2952393">)</span>&nbsp;<span class="op" id="2952395">&gt;=</span>&nbsp;<span class="builtintype" id="2952398">uint</span><span class="op" id="2952402">(</span><span class="builtinfunc" id="2952403">len</span><span class="op" id="2952406">(</span><span class="ident" id="2952407">ut</span><span class="op" id="2952409">.</span><span class="ident" id="2952410">methods</span><span class="op" id="2952417">)</span><span class="op" id="2952418">)</span>&nbsp;<span class="op" id="2952420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2952425">panic</span><span class="op" id="2952430">(</span><span class="string" id="2952431">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2952478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952486">m</span>&nbsp;<span class="op" id="2952488">:=</span>&nbsp;<span class="op" id="2952491">&amp;</span><span class="ident" id="2952492">ut</span><span class="op" id="2952494">.</span><span class="ident" id="2952495">methods</span><span class="op" id="2952502">[</span><span class="ident" id="2952503">i</span><span class="op" id="2952504">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952508">if</span>&nbsp;<span class="ident" id="2952511">m</span><span class="op" id="2952512">.</span><span class="ident" id="2952513">pkgPath</span>&nbsp;<span class="op" id="2952521">!=</span>&nbsp;<span class="ident" id="2952524">nil</span>&nbsp;<span class="op" id="2952528">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2952533">panic</span><span class="op" id="2952538">(</span><span class="string" id="2952539">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2952551">+</span>&nbsp;<span class="ident" id="2952553">op</span>&nbsp;<span class="op" id="2952556">+</span>&nbsp;<span class="string" id="2952558">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2952581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952589">fn</span>&nbsp;<span class="op" id="2952592">=</span>&nbsp;<span class="ident" id="2952594">unsafe</span><span class="op" id="2952600">.</span><span class="ident" id="2952601">Pointer</span><span class="op" id="2952608">(</span><span class="op" id="2952609">&amp;</span><span class="ident" id="2952610">m</span><span class="op" id="2952611">.</span><span class="ident" id="2952612">ifn</span><span class="op" id="2952615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952619">t</span>&nbsp;<span class="op" id="2952621">=</span>&nbsp;<span class="ident" id="2952623">m</span><span class="op" id="2952624">.</span><span class="ident" id="2952625">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952631">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952634">return</span><br>
<span class="lineno"></span><span class="op" id="2952641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2952644">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2952709">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2952768">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2952823">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2952886">func</span>&nbsp;<span class="ident" id="2952891">storeRcvr</span><span class="op" id="2952900">(</span><span class="ident" id="2952901">v</span>&nbsp;<span class="ident" id="2952903">Value</span><span class="op" id="2952908">,</span>&nbsp;<span class="ident" id="2952910">p</span>&nbsp;<span class="ident" id="2952912">unsafe</span><span class="op" id="2952918">.</span><span class="ident" id="2952919">Pointer</span><span class="op" id="2952926">)</span>&nbsp;<span class="op" id="2952928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952931">t</span>&nbsp;<span class="op" id="2952933">:=</span>&nbsp;<span class="ident" id="2952936">v</span><span class="op" id="2952937">.</span><span class="ident" id="2952938">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952943">if</span>&nbsp;<span class="ident" id="2952946">t</span><span class="op" id="2952947">.</span><span class="ident" id="2952948">Kind</span><span class="op" id="2952952">(</span><span class="op" id="2952953">)</span>&nbsp;<span class="op" id="2952955">==</span>&nbsp;<span class="ident" id="2952958">Interface</span>&nbsp;<span class="op" id="2952968">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952972">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953027">iface</span>&nbsp;<span class="op" id="2953033">:=</span>&nbsp;<span class="op" id="2953036">(</span><span class="op" id="2953037">*</span><span class="ident" id="2953038">nonEmptyInterface</span><span class="op" id="2953055">)</span><span class="op" id="2953056">(</span><span class="ident" id="2953057">v</span><span class="op" id="2953058">.</span><span class="ident" id="2953059">ptr</span><span class="op" id="2953062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953066">*</span><span class="op" id="2953067">(</span><span class="op" id="2953068">*</span><span class="ident" id="2953069">unsafe</span><span class="op" id="2953075">.</span><span class="ident" id="2953076">Pointer</span><span class="op" id="2953083">)</span><span class="op" id="2953084">(</span><span class="ident" id="2953085">p</span><span class="op" id="2953086">)</span>&nbsp;<span class="op" id="2953088">=</span>&nbsp;<span class="ident" id="2953090">unsafe</span><span class="op" id="2953096">.</span><span class="ident" id="2953097">Pointer</span><span class="op" id="2953104">(</span><span class="ident" id="2953105">iface</span><span class="op" id="2953110">.</span><span class="ident" id="2953111">word</span><span class="op" id="2953115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953118">}</span>&nbsp;<span class="keyword" id="2953120">else</span>&nbsp;<span class="keyword" id="2953125">if</span>&nbsp;<span class="ident" id="2953128">v</span><span class="op" id="2953129">.</span><span class="ident" id="2953130">flag</span><span class="op" id="2953134">&amp;</span><span class="ident" id="2953135">flagIndir</span>&nbsp;<span class="op" id="2953145">!=</span>&nbsp;<span class="num" id="2953148">0</span>&nbsp;<span class="op" id="2953150">&amp;&amp;</span>&nbsp;<span class="op" id="2953153">!</span><span class="ident" id="2953154">ifaceIndir</span><span class="op" id="2953164">(</span><span class="ident" id="2953165">t</span><span class="op" id="2953166">)</span>&nbsp;<span class="op" id="2953168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953172">*</span><span class="op" id="2953173">(</span><span class="op" id="2953174">*</span><span class="ident" id="2953175">unsafe</span><span class="op" id="2953181">.</span><span class="ident" id="2953182">Pointer</span><span class="op" id="2953189">)</span><span class="op" id="2953190">(</span><span class="ident" id="2953191">p</span><span class="op" id="2953192">)</span>&nbsp;<span class="op" id="2953194">=</span>&nbsp;<span class="op" id="2953196">*</span><span class="op" id="2953197">(</span><span class="op" id="2953198">*</span><span class="ident" id="2953199">unsafe</span><span class="op" id="2953205">.</span><span class="ident" id="2953206">Pointer</span><span class="op" id="2953213">)</span><span class="op" id="2953214">(</span><span class="ident" id="2953215">v</span><span class="op" id="2953216">.</span><span class="ident" id="2953217">ptr</span><span class="op" id="2953220">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953223">}</span>&nbsp;<span class="keyword" id="2953225">else</span>&nbsp;<span class="op" id="2953230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953234">*</span><span class="op" id="2953235">(</span><span class="op" id="2953236">*</span><span class="ident" id="2953237">unsafe</span><span class="op" id="2953243">.</span><span class="ident" id="2953244">Pointer</span><span class="op" id="2953251">)</span><span class="op" id="2953252">(</span><span class="ident" id="2953253">p</span><span class="op" id="2953254">)</span>&nbsp;<span class="op" id="2953256">=</span>&nbsp;<span class="ident" id="2953258">v</span><span class="op" id="2953259">.</span><span class="ident" id="2953260">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953265">}</span><br>
<span class="lineno"></span><span class="op" id="2953267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2953270">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2953335">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2953364">func</span>&nbsp;<span class="ident" id="2953369">align</span><span class="op" id="2953374">(</span><span class="ident" id="2953375">x</span><span class="op" id="2953376">,</span>&nbsp;<span class="ident" id="2953378">n</span>&nbsp;<span class="builtintype" id="2953380">uintptr</span><span class="op" id="2953387">)</span>&nbsp;<span class="builtintype" id="2953389">uintptr</span>&nbsp;<span class="op" id="2953397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953400">return</span>&nbsp;<span class="op" id="2953407">(</span><span class="ident" id="2953408">x</span>&nbsp;<span class="op" id="2953410">+</span>&nbsp;<span class="ident" id="2953412">n</span>&nbsp;<span class="op" id="2953414">-</span>&nbsp;<span class="num" id="2953416">1</span><span class="op" id="2953417">)</span>&nbsp;<span class="op" id="2953419">&amp;^</span>&nbsp;<span class="op" id="2953422">(</span><span class="ident" id="2953423">n</span>&nbsp;<span class="op" id="2953425">-</span>&nbsp;<span class="num" id="2953427">1</span><span class="op" id="2953428">)</span><br>
<span class="lineno"></span><span class="op" id="2953430">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2953433">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2953502">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2953559">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2953632">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2953696">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2953749">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2953830">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2953904">//</span><br>
<span class="lineno"></span><span class="comment" id="2953907">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2953983">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2954055">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2954126">func</span>&nbsp;<span class="ident" id="2954131">callMethod</span><span class="op" id="2954141">(</span><span class="ident" id="2954142">ctxt</span>&nbsp;<span class="op" id="2954147">*</span><span class="ident" id="2954148">methodValue</span><span class="op" id="2954159">,</span>&nbsp;<span class="ident" id="2954161">frame</span>&nbsp;<span class="ident" id="2954167">unsafe</span><span class="op" id="2954173">.</span><span class="ident" id="2954174">Pointer</span><span class="op" id="2954181">)</span>&nbsp;<span class="op" id="2954183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954186">rcvr</span>&nbsp;<span class="op" id="2954191">:=</span>&nbsp;<span class="ident" id="2954194">ctxt</span><span class="op" id="2954198">.</span><span class="ident" id="2954199">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954205">rcvrtype</span><span class="op" id="2954213">,</span>&nbsp;<span class="ident" id="2954215">t</span><span class="op" id="2954216">,</span>&nbsp;<span class="ident" id="2954218">fn</span>&nbsp;<span class="op" id="2954221">:=</span>&nbsp;<span class="ident" id="2954224">methodReceiver</span><span class="op" id="2954238">(</span><span class="string" id="2954239">&#34;call&#34;</span><span class="op" id="2954245">,</span>&nbsp;<span class="ident" id="2954247">rcvr</span><span class="op" id="2954251">,</span>&nbsp;<span class="ident" id="2954253">ctxt</span><span class="op" id="2954257">.</span><span class="ident" id="2954258">method</span><span class="op" id="2954264">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954267">frametype</span><span class="op" id="2954276">,</span>&nbsp;<span class="ident" id="2954278">argSize</span><span class="op" id="2954285">,</span>&nbsp;<span class="ident" id="2954287">retOffset</span><span class="op" id="2954296">,</span>&nbsp;<span class="ident" id="2954298">_</span>&nbsp;<span class="op" id="2954300">:=</span>&nbsp;<span class="ident" id="2954303">funcLayout</span><span class="op" id="2954313">(</span><span class="ident" id="2954314">t</span><span class="op" id="2954315">,</span>&nbsp;<span class="ident" id="2954317">rcvrtype</span><span class="op" id="2954325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954329">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954404">args</span>&nbsp;<span class="op" id="2954409">:=</span>&nbsp;<span class="ident" id="2954412">unsafe_New</span><span class="op" id="2954422">(</span><span class="ident" id="2954423">frametype</span><span class="op" id="2954432">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954436">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954475">storeRcvr</span><span class="op" id="2954484">(</span><span class="ident" id="2954485">rcvr</span><span class="op" id="2954489">,</span>&nbsp;<span class="ident" id="2954491">args</span><span class="op" id="2954495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954498">memmove</span><span class="op" id="2954505">(</span><span class="ident" id="2954506">unsafe</span><span class="op" id="2954512">.</span><span class="ident" id="2954513">Pointer</span><span class="op" id="2954520">(</span><span class="builtintype" id="2954521">uintptr</span><span class="op" id="2954528">(</span><span class="ident" id="2954529">args</span><span class="op" id="2954533">)</span><span class="op" id="2954534">+</span><span class="ident" id="2954535">ptrSize</span><span class="op" id="2954542">)</span><span class="op" id="2954543">,</span>&nbsp;<span class="ident" id="2954545">frame</span><span class="op" id="2954550">,</span>&nbsp;<span class="ident" id="2954552">argSize</span><span class="op" id="2954559">-</span><span class="ident" id="2954560">ptrSize</span><span class="op" id="2954567">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954571">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954581">call</span><span class="op" id="2954585">(</span><span class="ident" id="2954586">fn</span><span class="op" id="2954588">,</span>&nbsp;<span class="ident" id="2954590">args</span><span class="op" id="2954594">,</span>&nbsp;<span class="builtintype" id="2954596">uint32</span><span class="op" id="2954602">(</span><span class="ident" id="2954603">frametype</span><span class="op" id="2954612">.</span><span class="ident" id="2954613">size</span><span class="op" id="2954617">)</span><span class="op" id="2954618">,</span>&nbsp;<span class="builtintype" id="2954620">uint32</span><span class="op" id="2954626">(</span><span class="ident" id="2954627">retOffset</span><span class="op" id="2954636">)</span><span class="op" id="2954637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954641">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954709">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954781">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954852">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954868">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954928">callerRetOffset</span>&nbsp;<span class="op" id="2954944">:=</span>&nbsp;<span class="ident" id="2954947">retOffset</span>&nbsp;<span class="op" id="2954957">-</span>&nbsp;<span class="ident" id="2954959">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954968">if</span>&nbsp;<span class="ident" id="2954971">runtime</span><span class="op" id="2954978">.</span><span class="ident" id="2954979">GOARCH</span>&nbsp;<span class="op" id="2954986">==</span>&nbsp;<span class="string" id="2954989">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2955000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955004">callerRetOffset</span>&nbsp;<span class="op" id="2955020">=</span>&nbsp;<span class="ident" id="2955022">align</span><span class="op" id="2955027">(</span><span class="ident" id="2955028">argSize</span><span class="op" id="2955035">-</span><span class="ident" id="2955036">ptrSize</span><span class="op" id="2955043">,</span>&nbsp;<span class="num" id="2955045">8</span><span class="op" id="2955046">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955052">memmove</span><span class="op" id="2955059">(</span><span class="ident" id="2955060">unsafe</span><span class="op" id="2955066">.</span><span class="ident" id="2955067">Pointer</span><span class="op" id="2955074">(</span><span class="builtintype" id="2955075">uintptr</span><span class="op" id="2955082">(</span><span class="ident" id="2955083">frame</span><span class="op" id="2955088">)</span><span class="op" id="2955089">+</span><span class="ident" id="2955090">callerRetOffset</span><span class="op" id="2955105">)</span><span class="op" id="2955106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955110">unsafe</span><span class="op" id="2955116">.</span><span class="ident" id="2955117">Pointer</span><span class="op" id="2955124">(</span><span class="builtintype" id="2955125">uintptr</span><span class="op" id="2955132">(</span><span class="ident" id="2955133">args</span><span class="op" id="2955137">)</span><span class="op" id="2955138">+</span><span class="ident" id="2955139">retOffset</span><span class="op" id="2955148">)</span><span class="op" id="2955149">,</span>&nbsp;<span class="ident" id="2955151">frametype</span><span class="op" id="2955160">.</span><span class="ident" id="2955161">size</span><span class="op" id="2955165">-</span><span class="ident" id="2955166">retOffset</span><span class="op" id="2955175">)</span><br>
<span class="lineno"></span><span class="op" id="2955177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2955180">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2955242">func</span>&nbsp;<span class="ident" id="2955247">funcName</span><span class="op" id="2955255">(</span><span class="ident" id="2955256">f</span>&nbsp;<span class="keyword" id="2955258">func</span><span class="op" id="2955262">(</span><span class="op" id="2955263">[</span><span class="op" id="2955264">]</span><span class="ident" id="2955265">Value</span><span class="op" id="2955270">)</span>&nbsp;<span class="op" id="2955272">[</span><span class="op" id="2955273">]</span><span class="ident" id="2955274">Value</span><span class="op" id="2955279">)</span>&nbsp;<span class="builtintype" id="2955281">string</span>&nbsp;<span class="op" id="2955288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955291">pc</span>&nbsp;<span class="op" id="2955294">:=</span>&nbsp;<span class="op" id="2955297">*</span><span class="op" id="2955298">(</span><span class="op" id="2955299">*</span><span class="builtintype" id="2955300">uintptr</span><span class="op" id="2955307">)</span><span class="op" id="2955308">(</span><span class="ident" id="2955309">unsafe</span><span class="op" id="2955315">.</span><span class="ident" id="2955316">Pointer</span><span class="op" id="2955323">(</span><span class="op" id="2955324">&amp;</span><span class="ident" id="2955325">f</span><span class="op" id="2955326">)</span><span class="op" id="2955327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955330">rf</span>&nbsp;<span class="op" id="2955333">:=</span>&nbsp;<span class="ident" id="2955336">runtime</span><span class="op" id="2955343">.</span><span class="ident" id="2955344">FuncForPC</span><span class="op" id="2955353">(</span><span class="ident" id="2955354">pc</span><span class="op" id="2955356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955359">if</span>&nbsp;<span class="ident" id="2955362">rf</span>&nbsp;<span class="op" id="2955365">!=</span>&nbsp;<span class="ident" id="2955368">nil</span>&nbsp;<span class="op" id="2955372">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955376">return</span>&nbsp;<span class="ident" id="2955383">rf</span><span class="op" id="2955385">.</span><span class="ident" id="2955386">Name</span><span class="op" id="2955390">(</span><span class="op" id="2955391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955397">return</span>&nbsp;<span class="string" id="2955404">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2955414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2955417">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2955446">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2955501">func</span>&nbsp;<span class="op" id="2955506">(</span><span class="ident" id="2955507">v</span>&nbsp;<span class="ident" id="2955509">Value</span><span class="op" id="2955514">)</span>&nbsp;<span class="ident" id="2955516">Cap</span><span class="op" id="2955519">(</span><span class="op" id="2955520">)</span>&nbsp;<span class="builtintype" id="2955522">int</span>&nbsp;<span class="op" id="2955526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955529">k</span>&nbsp;<span class="op" id="2955531">:=</span>&nbsp;<span class="ident" id="2955534">v</span><span class="op" id="2955535">.</span><span class="ident" id="2955536">kind</span><span class="op" id="2955540">(</span><span class="op" id="2955541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955544">switch</span>&nbsp;<span class="ident" id="2955551">k</span>&nbsp;<span class="op" id="2955553">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955556">case</span>&nbsp;<span class="ident" id="2955561">Array</span><span class="op" id="2955566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955570">return</span>&nbsp;<span class="ident" id="2955577">v</span><span class="op" id="2955578">.</span><span class="ident" id="2955579">typ</span><span class="op" id="2955582">.</span><span class="ident" id="2955583">Len</span><span class="op" id="2955586">(</span><span class="op" id="2955587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955590">case</span>&nbsp;<span class="ident" id="2955595">Chan</span><span class="op" id="2955599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955603">return</span>&nbsp;<span class="builtintype" id="2955610">int</span><span class="op" id="2955613">(</span><span class="ident" id="2955614">chancap</span><span class="op" id="2955621">(</span><span class="ident" id="2955622">v</span><span class="op" id="2955623">.</span><span class="ident" id="2955624">pointer</span><span class="op" id="2955631">(</span><span class="op" id="2955632">)</span><span class="op" id="2955633">)</span><span class="op" id="2955634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955637">case</span>&nbsp;<span class="ident" id="2955642">Slice</span><span class="op" id="2955647">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955651">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955710">return</span>&nbsp;<span class="op" id="2955717">(</span><span class="op" id="2955718">*</span><span class="ident" id="2955719">sliceHeader</span><span class="op" id="2955730">)</span><span class="op" id="2955731">(</span><span class="ident" id="2955732">v</span><span class="op" id="2955733">.</span><span class="ident" id="2955734">ptr</span><span class="op" id="2955737">)</span><span class="op" id="2955738">.</span><span class="ident" id="2955739">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2955747">panic</span><span class="op" id="2955752">(</span><span class="op" id="2955753">&amp;</span><span class="ident" id="2955754">ValueError</span><span class="op" id="2955764">{</span><span class="string" id="2955765">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2955784">,</span>&nbsp;<span class="ident" id="2955786">v</span><span class="op" id="2955787">.</span><span class="ident" id="2955788">kind</span><span class="op" id="2955792">(</span><span class="op" id="2955793">)</span><span class="op" id="2955794">}</span><span class="op" id="2955795">)</span><br>
<span class="lineno"></span><span class="op" id="2955797">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2955800">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2955831">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2955869">func</span>&nbsp;<span class="op" id="2955874">(</span><span class="ident" id="2955875">v</span>&nbsp;<span class="ident" id="2955877">Value</span><span class="op" id="2955882">)</span>&nbsp;<span class="ident" id="2955884">Close</span><span class="op" id="2955889">(</span><span class="op" id="2955890">)</span>&nbsp;<span class="op" id="2955892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955895">v</span><span class="op" id="2955896">.</span><span class="ident" id="2955897">mustBe</span><span class="op" id="2955903">(</span><span class="ident" id="2955904">Chan</span><span class="op" id="2955908">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955911">v</span><span class="op" id="2955912">.</span><span class="ident" id="2955913">mustBeExported</span><span class="op" id="2955927">(</span><span class="op" id="2955928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955931">chanclose</span><span class="op" id="2955940">(</span><span class="ident" id="2955941">v</span><span class="op" id="2955942">.</span><span class="ident" id="2955943">pointer</span><span class="op" id="2955950">(</span><span class="op" id="2955951">)</span><span class="op" id="2955952">)</span><br>
<span class="lineno"></span><span class="op" id="2955954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2955957">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2956015">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2956071">func</span>&nbsp;<span class="op" id="2956076">(</span><span class="ident" id="2956077">v</span>&nbsp;<span class="ident" id="2956079">Value</span><span class="op" id="2956084">)</span>&nbsp;<span class="ident" id="2956086">Complex</span><span class="op" id="2956093">(</span><span class="op" id="2956094">)</span>&nbsp;<span class="builtintype" id="2956096">complex128</span>&nbsp;<span class="op" id="2956107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956110">k</span>&nbsp;<span class="op" id="2956112">:=</span>&nbsp;<span class="ident" id="2956115">v</span><span class="op" id="2956116">.</span><span class="ident" id="2956117">kind</span><span class="op" id="2956121">(</span><span class="op" id="2956122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956125">switch</span>&nbsp;<span class="ident" id="2956132">k</span>&nbsp;<span class="op" id="2956134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956137">case</span>&nbsp;<span class="ident" id="2956142">Complex64</span><span class="op" id="2956151">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956155">return</span>&nbsp;<span class="builtintype" id="2956162">complex128</span><span class="op" id="2956172">(</span><span class="op" id="2956173">*</span><span class="op" id="2956174">(</span><span class="op" id="2956175">*</span><span class="builtintype" id="2956176">complex64</span><span class="op" id="2956185">)</span><span class="op" id="2956186">(</span><span class="ident" id="2956187">v</span><span class="op" id="2956188">.</span><span class="ident" id="2956189">ptr</span><span class="op" id="2956192">)</span><span class="op" id="2956193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956196">case</span>&nbsp;<span class="ident" id="2956201">Complex128</span><span class="op" id="2956211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956215">return</span>&nbsp;<span class="op" id="2956222">*</span><span class="op" id="2956223">(</span><span class="op" id="2956224">*</span><span class="builtintype" id="2956225">complex128</span><span class="op" id="2956235">)</span><span class="op" id="2956236">(</span><span class="ident" id="2956237">v</span><span class="op" id="2956238">.</span><span class="ident" id="2956239">ptr</span><span class="op" id="2956242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2956248">panic</span><span class="op" id="2956253">(</span><span class="op" id="2956254">&amp;</span><span class="ident" id="2956255">ValueError</span><span class="op" id="2956265">{</span><span class="string" id="2956266">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2956289">,</span>&nbsp;<span class="ident" id="2956291">v</span><span class="op" id="2956292">.</span><span class="ident" id="2956293">kind</span><span class="op" id="2956297">(</span><span class="op" id="2956298">)</span><span class="op" id="2956299">}</span><span class="op" id="2956300">)</span><br>
<span class="lineno">665</span><span class="op" id="2956302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956305">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2956361">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2956397">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2956447">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2956489">func</span>&nbsp;<span class="op" id="2956494">(</span><span class="ident" id="2956495">v</span>&nbsp;<span class="ident" id="2956497">Value</span><span class="op" id="2956502">)</span>&nbsp;<span class="ident" id="2956504">Elem</span><span class="op" id="2956508">(</span><span class="op" id="2956509">)</span>&nbsp;<span class="ident" id="2956511">Value</span>&nbsp;<span class="op" id="2956517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956520">k</span>&nbsp;<span class="op" id="2956522">:=</span>&nbsp;<span class="ident" id="2956525">v</span><span class="op" id="2956526">.</span><span class="ident" id="2956527">kind</span><span class="op" id="2956531">(</span><span class="op" id="2956532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956535">switch</span>&nbsp;<span class="ident" id="2956542">k</span>&nbsp;<span class="op" id="2956544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956547">case</span>&nbsp;<span class="ident" id="2956552">Interface</span><span class="op" id="2956561">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956565">var</span>&nbsp;<span class="ident" id="2956569">eface</span>&nbsp;<span class="keyword" id="2956575">interface</span><span class="op" id="2956584">{</span><span class="op" id="2956585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956589">if</span>&nbsp;<span class="ident" id="2956592">v</span><span class="op" id="2956593">.</span><span class="ident" id="2956594">typ</span><span class="op" id="2956597">.</span><span class="ident" id="2956598">NumMethod</span><span class="op" id="2956607">(</span><span class="op" id="2956608">)</span>&nbsp;<span class="op" id="2956610">==</span>&nbsp;<span class="num" id="2956613">0</span>&nbsp;<span class="op" id="2956615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956620">eface</span>&nbsp;<span class="op" id="2956626">=</span>&nbsp;<span class="op" id="2956628">*</span><span class="op" id="2956629">(</span><span class="op" id="2956630">*</span><span class="keyword" id="2956631">interface</span><span class="op" id="2956640">{</span><span class="op" id="2956641">}</span><span class="op" id="2956642">)</span><span class="op" id="2956643">(</span><span class="ident" id="2956644">v</span><span class="op" id="2956645">.</span><span class="ident" id="2956646">ptr</span><span class="op" id="2956649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956653">}</span>&nbsp;<span class="keyword" id="2956655">else</span>&nbsp;<span class="op" id="2956660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956665">eface</span>&nbsp;<span class="op" id="2956671">=</span>&nbsp;<span class="op" id="2956673">(</span><span class="keyword" id="2956674">interface</span><span class="op" id="2956683">{</span><span class="op" id="2956684">}</span><span class="op" id="2956685">)</span><span class="op" id="2956686">(</span><span class="op" id="2956687">*</span><span class="op" id="2956688">(</span><span class="op" id="2956689">*</span><span class="keyword" id="2956690">interface</span>&nbsp;<span class="op" id="2956700">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956706">M</span><span class="op" id="2956707">(</span><span class="op" id="2956708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956713">}</span><span class="op" id="2956714">)</span><span class="op" id="2956715">(</span><span class="ident" id="2956716">v</span><span class="op" id="2956717">.</span><span class="ident" id="2956718">ptr</span><span class="op" id="2956721">)</span><span class="op" id="2956722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956730">x</span>&nbsp;<span class="op" id="2956732">:=</span>&nbsp;<span class="ident" id="2956735">unpackEface</span><span class="op" id="2956746">(</span><span class="ident" id="2956747">eface</span><span class="op" id="2956752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956756">if</span>&nbsp;<span class="ident" id="2956759">x</span><span class="op" id="2956760">.</span><span class="ident" id="2956761">flag</span>&nbsp;<span class="op" id="2956766">!=</span>&nbsp;<span class="num" id="2956769">0</span>&nbsp;<span class="op" id="2956771">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956776">x</span><span class="op" id="2956777">.</span><span class="ident" id="2956778">flag</span>&nbsp;<span class="op" id="2956783">|=</span>&nbsp;<span class="ident" id="2956786">v</span><span class="op" id="2956787">.</span><span class="ident" id="2956788">flag</span>&nbsp;<span class="op" id="2956793">&amp;</span>&nbsp;<span class="ident" id="2956795">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956808">return</span>&nbsp;<span class="ident" id="2956815">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956818">case</span>&nbsp;<span class="ident" id="2956823">Ptr</span><span class="op" id="2956826">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956830">ptr</span>&nbsp;<span class="op" id="2956834">:=</span>&nbsp;<span class="ident" id="2956837">v</span><span class="op" id="2956838">.</span><span class="ident" id="2956839">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956845">if</span>&nbsp;<span class="ident" id="2956848">v</span><span class="op" id="2956849">.</span><span class="ident" id="2956850">flag</span><span class="op" id="2956854">&amp;</span><span class="ident" id="2956855">flagIndir</span>&nbsp;<span class="op" id="2956865">!=</span>&nbsp;<span class="num" id="2956868">0</span>&nbsp;<span class="op" id="2956870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956875">ptr</span>&nbsp;<span class="op" id="2956879">=</span>&nbsp;<span class="op" id="2956881">*</span><span class="op" id="2956882">(</span><span class="op" id="2956883">*</span><span class="ident" id="2956884">unsafe</span><span class="op" id="2956890">.</span><span class="ident" id="2956891">Pointer</span><span class="op" id="2956898">)</span><span class="op" id="2956899">(</span><span class="ident" id="2956900">ptr</span><span class="op" id="2956903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956911">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956959">if</span>&nbsp;<span class="ident" id="2956962">ptr</span>&nbsp;<span class="op" id="2956966">==</span>&nbsp;<span class="ident" id="2956969">nil</span>&nbsp;<span class="op" id="2956973">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956978">return</span>&nbsp;<span class="ident" id="2956985">Value</span><span class="op" id="2956990">{</span><span class="op" id="2956991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956999">tt</span>&nbsp;<span class="op" id="2957002">:=</span>&nbsp;<span class="op" id="2957005">(</span><span class="op" id="2957006">*</span><span class="ident" id="2957007">ptrType</span><span class="op" id="2957014">)</span><span class="op" id="2957015">(</span><span class="ident" id="2957016">unsafe</span><span class="op" id="2957022">.</span><span class="ident" id="2957023">Pointer</span><span class="op" id="2957030">(</span><span class="ident" id="2957031">v</span><span class="op" id="2957032">.</span><span class="ident" id="2957033">typ</span><span class="op" id="2957036">)</span><span class="op" id="2957037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957041">typ</span>&nbsp;<span class="op" id="2957045">:=</span>&nbsp;<span class="ident" id="2957048">tt</span><span class="op" id="2957050">.</span><span class="ident" id="2957051">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957058">fl</span>&nbsp;<span class="op" id="2957061">:=</span>&nbsp;<span class="ident" id="2957064">v</span><span class="op" id="2957065">.</span><span class="ident" id="2957066">flag</span><span class="op" id="2957070">&amp;</span><span class="ident" id="2957071">flagRO</span>&nbsp;<span class="op" id="2957078">|</span>&nbsp;<span class="ident" id="2957080">flagIndir</span>&nbsp;<span class="op" id="2957090">|</span>&nbsp;<span class="ident" id="2957092">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957103">fl</span>&nbsp;<span class="op" id="2957106">|=</span>&nbsp;<span class="ident" id="2957109">flag</span><span class="op" id="2957113">(</span><span class="ident" id="2957114">typ</span><span class="op" id="2957117">.</span><span class="ident" id="2957118">Kind</span><span class="op" id="2957122">(</span><span class="op" id="2957123">)</span><span class="op" id="2957124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957128">return</span>&nbsp;<span class="ident" id="2957135">Value</span><span class="op" id="2957140">{</span><span class="ident" id="2957141">typ</span><span class="op" id="2957144">,</span>&nbsp;<span class="ident" id="2957146">ptr</span><span class="op" id="2957149">,</span>&nbsp;<span class="ident" id="2957151">fl</span><span class="op" id="2957153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2957159">panic</span><span class="op" id="2957164">(</span><span class="op" id="2957165">&amp;</span><span class="ident" id="2957166">ValueError</span><span class="op" id="2957176">{</span><span class="string" id="2957177">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2957197">,</span>&nbsp;<span class="ident" id="2957199">v</span><span class="op" id="2957200">.</span><span class="ident" id="2957201">kind</span><span class="op" id="2957205">(</span><span class="op" id="2957206">)</span><span class="op" id="2957207">}</span><span class="op" id="2957208">)</span><br>
<span class="lineno"></span><span class="op" id="2957210">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2957213">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2957262">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2957323">func</span>&nbsp;<span class="op" id="2957328">(</span><span class="ident" id="2957329">v</span>&nbsp;<span class="ident" id="2957331">Value</span><span class="op" id="2957336">)</span>&nbsp;<span class="ident" id="2957338">Field</span><span class="op" id="2957343">(</span><span class="ident" id="2957344">i</span>&nbsp;<span class="builtintype" id="2957346">int</span><span class="op" id="2957349">)</span>&nbsp;<span class="ident" id="2957351">Value</span>&nbsp;<span class="op" id="2957357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957360">if</span>&nbsp;<span class="ident" id="2957363">v</span><span class="op" id="2957364">.</span><span class="ident" id="2957365">kind</span><span class="op" id="2957369">(</span><span class="op" id="2957370">)</span>&nbsp;<span class="op" id="2957372">!=</span>&nbsp;<span class="ident" id="2957375">Struct</span>&nbsp;<span class="op" id="2957382">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2957386">panic</span><span class="op" id="2957391">(</span><span class="op" id="2957392">&amp;</span><span class="ident" id="2957393">ValueError</span><span class="op" id="2957403">{</span><span class="string" id="2957404">&#34;reflect.Value.Field&#34;</span><span class="op" id="2957425">,</span>&nbsp;<span class="ident" id="2957427">v</span><span class="op" id="2957428">.</span><span class="ident" id="2957429">kind</span><span class="op" id="2957433">(</span><span class="op" id="2957434">)</span><span class="op" id="2957435">}</span><span class="op" id="2957436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957442">tt</span>&nbsp;<span class="op" id="2957445">:=</span>&nbsp;<span class="op" id="2957448">(</span><span class="op" id="2957449">*</span><span class="ident" id="2957450">structType</span><span class="op" id="2957460">)</span><span class="op" id="2957461">(</span><span class="ident" id="2957462">unsafe</span><span class="op" id="2957468">.</span><span class="ident" id="2957469">Pointer</span><span class="op" id="2957476">(</span><span class="ident" id="2957477">v</span><span class="op" id="2957478">.</span><span class="ident" id="2957479">typ</span><span class="op" id="2957482">)</span><span class="op" id="2957483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957486">if</span>&nbsp;<span class="builtintype" id="2957489">uint</span><span class="op" id="2957493">(</span><span class="ident" id="2957494">i</span><span class="op" id="2957495">)</span>&nbsp;<span class="op" id="2957497">&gt;=</span>&nbsp;<span class="builtintype" id="2957500">uint</span><span class="op" id="2957504">(</span><span class="builtinfunc" id="2957505">len</span><span class="op" id="2957508">(</span><span class="ident" id="2957509">tt</span><span class="op" id="2957511">.</span><span class="ident" id="2957512">fields</span><span class="op" id="2957518">)</span><span class="op" id="2957519">)</span>&nbsp;<span class="op" id="2957521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2957525">panic</span><span class="op" id="2957530">(</span><span class="string" id="2957531">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2957566">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957572">field</span>&nbsp;<span class="op" id="2957578">:=</span>&nbsp;<span class="op" id="2957581">&amp;</span><span class="ident" id="2957582">tt</span><span class="op" id="2957584">.</span><span class="ident" id="2957585">fields</span><span class="op" id="2957591">[</span><span class="ident" id="2957592">i</span><span class="op" id="2957593">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957596">typ</span>&nbsp;<span class="op" id="2957600">:=</span>&nbsp;<span class="ident" id="2957603">field</span><span class="op" id="2957608">.</span><span class="ident" id="2957609">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957615">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957651">fl</span>&nbsp;<span class="op" id="2957654">:=</span>&nbsp;<span class="ident" id="2957657">v</span><span class="op" id="2957658">.</span><span class="ident" id="2957659">flag</span><span class="op" id="2957663">&amp;</span><span class="op" id="2957664">(</span><span class="ident" id="2957665">flagRO</span><span class="op" id="2957671">|</span><span class="ident" id="2957672">flagIndir</span><span class="op" id="2957681">|</span><span class="ident" id="2957682">flagAddr</span><span class="op" id="2957690">)</span>&nbsp;<span class="op" id="2957692">|</span>&nbsp;<span class="ident" id="2957694">flag</span><span class="op" id="2957698">(</span><span class="ident" id="2957699">typ</span><span class="op" id="2957702">.</span><span class="ident" id="2957703">Kind</span><span class="op" id="2957707">(</span><span class="op" id="2957708">)</span><span class="op" id="2957709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957712">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957757">if</span>&nbsp;<span class="ident" id="2957760">field</span><span class="op" id="2957765">.</span><span class="ident" id="2957766">pkgPath</span>&nbsp;<span class="op" id="2957774">!=</span>&nbsp;<span class="ident" id="2957777">nil</span>&nbsp;<span class="op" id="2957781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957785">fl</span>&nbsp;<span class="op" id="2957788">|=</span>&nbsp;<span class="ident" id="2957791">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957799">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957802">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957858">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957923">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957971">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2958029">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958072">ptr</span>&nbsp;<span class="op" id="2958076">:=</span>&nbsp;<span class="ident" id="2958079">unsafe</span><span class="op" id="2958085">.</span><span class="ident" id="2958086">Pointer</span><span class="op" id="2958093">(</span><span class="builtintype" id="2958094">uintptr</span><span class="op" id="2958101">(</span><span class="ident" id="2958102">v</span><span class="op" id="2958103">.</span><span class="ident" id="2958104">ptr</span><span class="op" id="2958107">)</span>&nbsp;<span class="op" id="2958109">+</span>&nbsp;<span class="ident" id="2958111">field</span><span class="op" id="2958116">.</span><span class="ident" id="2958117">offset</span><span class="op" id="2958123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958126">return</span>&nbsp;<span class="ident" id="2958133">Value</span><span class="op" id="2958138">{</span><span class="ident" id="2958139">typ</span><span class="op" id="2958142">,</span>&nbsp;<span class="ident" id="2958144">ptr</span><span class="op" id="2958147">,</span>&nbsp;<span class="ident" id="2958149">fl</span><span class="op" id="2958151">}</span><br>
<span class="lineno"></span><span class="op" id="2958153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2958156">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2958221">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2958261">func</span>&nbsp;<span class="op" id="2958266">(</span><span class="ident" id="2958267">v</span>&nbsp;<span class="ident" id="2958269">Value</span><span class="op" id="2958274">)</span>&nbsp;<span class="ident" id="2958276">FieldByIndex</span><span class="op" id="2958288">(</span><span class="ident" id="2958289">index</span>&nbsp;<span class="op" id="2958295">[</span><span class="op" id="2958296">]</span><span class="builtintype" id="2958297">int</span><span class="op" id="2958300">)</span>&nbsp;<span class="ident" id="2958302">Value</span>&nbsp;<span class="op" id="2958308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958311">if</span>&nbsp;<span class="builtinfunc" id="2958314">len</span><span class="op" id="2958317">(</span><span class="ident" id="2958318">index</span><span class="op" id="2958323">)</span>&nbsp;<span class="op" id="2958325">==</span>&nbsp;<span class="num" id="2958328">1</span>&nbsp;<span class="op" id="2958330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958334">return</span>&nbsp;<span class="ident" id="2958341">v</span><span class="op" id="2958342">.</span><span class="ident" id="2958343">Field</span><span class="op" id="2958348">(</span><span class="ident" id="2958349">index</span><span class="op" id="2958354">[</span><span class="num" id="2958355">0</span><span class="op" id="2958356">]</span><span class="op" id="2958357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958360">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958363">v</span><span class="op" id="2958364">.</span><span class="ident" id="2958365">mustBe</span><span class="op" id="2958371">(</span><span class="ident" id="2958372">Struct</span><span class="op" id="2958378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958381">for</span>&nbsp;<span class="ident" id="2958385">i</span><span class="op" id="2958386">,</span>&nbsp;<span class="ident" id="2958388">x</span>&nbsp;<span class="op" id="2958390">:=</span>&nbsp;<span class="keyword" id="2958393">range</span>&nbsp;<span class="ident" id="2958399">index</span>&nbsp;<span class="op" id="2958405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958409">if</span>&nbsp;<span class="ident" id="2958412">i</span>&nbsp;<span class="op" id="2958414">&gt;</span>&nbsp;<span class="num" id="2958416">0</span>&nbsp;<span class="op" id="2958418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958423">if</span>&nbsp;<span class="ident" id="2958426">v</span><span class="op" id="2958427">.</span><span class="ident" id="2958428">Kind</span><span class="op" id="2958432">(</span><span class="op" id="2958433">)</span>&nbsp;<span class="op" id="2958435">==</span>&nbsp;<span class="ident" id="2958438">Ptr</span>&nbsp;<span class="op" id="2958442">&amp;&amp;</span>&nbsp;<span class="ident" id="2958445">v</span><span class="op" id="2958446">.</span><span class="ident" id="2958447">typ</span><span class="op" id="2958450">.</span><span class="ident" id="2958451">Elem</span><span class="op" id="2958455">(</span><span class="op" id="2958456">)</span><span class="op" id="2958457">.</span><span class="ident" id="2958458">Kind</span><span class="op" id="2958462">(</span><span class="op" id="2958463">)</span>&nbsp;<span class="op" id="2958465">==</span>&nbsp;<span class="ident" id="2958468">Struct</span>&nbsp;<span class="op" id="2958475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958481">if</span>&nbsp;<span class="ident" id="2958484">v</span><span class="op" id="2958485">.</span><span class="ident" id="2958486">IsNil</span><span class="op" id="2958491">(</span><span class="op" id="2958492">)</span>&nbsp;<span class="op" id="2958494">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2958501">panic</span><span class="op" id="2958506">(</span><span class="string" id="2958507">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2958568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958580">v</span>&nbsp;<span class="op" id="2958582">=</span>&nbsp;<span class="ident" id="2958584">v</span><span class="op" id="2958585">.</span><span class="ident" id="2958586">Elem</span><span class="op" id="2958590">(</span><span class="op" id="2958591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958600">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958604">v</span>&nbsp;<span class="op" id="2958606">=</span>&nbsp;<span class="ident" id="2958608">v</span><span class="op" id="2958609">.</span><span class="ident" id="2958610">Field</span><span class="op" id="2958615">(</span><span class="ident" id="2958616">x</span><span class="op" id="2958617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958623">return</span>&nbsp;<span class="ident" id="2958630">v</span><br>
<span class="lineno"></span><span class="op" id="2958632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2958635">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2958696">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2958748">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2958788">func</span>&nbsp;<span class="op" id="2958793">(</span><span class="ident" id="2958794">v</span>&nbsp;<span class="ident" id="2958796">Value</span><span class="op" id="2958801">)</span>&nbsp;<span class="ident" id="2958803">FieldByName</span><span class="op" id="2958814">(</span><span class="ident" id="2958815">name</span>&nbsp;<span class="builtintype" id="2958820">string</span><span class="op" id="2958826">)</span>&nbsp;<span class="ident" id="2958828">Value</span>&nbsp;<span class="op" id="2958834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958837">v</span><span class="op" id="2958838">.</span><span class="ident" id="2958839">mustBe</span><span class="op" id="2958845">(</span><span class="ident" id="2958846">Struct</span><span class="op" id="2958852">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958855">if</span>&nbsp;<span class="ident" id="2958858">f</span><span class="op" id="2958859">,</span>&nbsp;<span class="ident" id="2958861">ok</span>&nbsp;<span class="op" id="2958864">:=</span>&nbsp;<span class="ident" id="2958867">v</span><span class="op" id="2958868">.</span><span class="ident" id="2958869">typ</span><span class="op" id="2958872">.</span><span class="ident" id="2958873">FieldByName</span><span class="op" id="2958884">(</span><span class="ident" id="2958885">name</span><span class="op" id="2958889">)</span><span class="op" id="2958890">;</span>&nbsp;<span class="ident" id="2958892">ok</span>&nbsp;<span class="op" id="2958895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958899">return</span>&nbsp;<span class="ident" id="2958906">v</span><span class="op" id="2958907">.</span><span class="ident" id="2958908">FieldByIndex</span><span class="op" id="2958920">(</span><span class="ident" id="2958921">f</span><span class="op" id="2958922">.</span><span class="ident" id="2958923">Index</span><span class="op" id="2958928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958934">return</span>&nbsp;<span class="ident" id="2958941">Value</span><span class="op" id="2958946">{</span><span class="op" id="2958947">}</span><br>
<span class="lineno"></span><span class="op" id="2958949">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2958952">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2959008">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2959046">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2959086">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2959138">func</span>&nbsp;<span class="op" id="2959143">(</span><span class="ident" id="2959144">v</span>&nbsp;<span class="ident" id="2959146">Value</span><span class="op" id="2959151">)</span>&nbsp;<span class="ident" id="2959153">FieldByNameFunc</span><span class="op" id="2959168">(</span><span class="ident" id="2959169">match</span>&nbsp;<span class="keyword" id="2959175">func</span><span class="op" id="2959179">(</span><span class="builtintype" id="2959180">string</span><span class="op" id="2959186">)</span>&nbsp;<span class="builtintype" id="2959188">bool</span><span class="op" id="2959192">)</span>&nbsp;<span class="ident" id="2959194">Value</span>&nbsp;<span class="op" id="2959200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959203">if</span>&nbsp;<span class="ident" id="2959206">f</span><span class="op" id="2959207">,</span>&nbsp;<span class="ident" id="2959209">ok</span>&nbsp;<span class="op" id="2959212">:=</span>&nbsp;<span class="ident" id="2959215">v</span><span class="op" id="2959216">.</span><span class="ident" id="2959217">typ</span><span class="op" id="2959220">.</span><span class="ident" id="2959221">FieldByNameFunc</span><span class="op" id="2959236">(</span><span class="ident" id="2959237">match</span><span class="op" id="2959242">)</span><span class="op" id="2959243">;</span>&nbsp;<span class="ident" id="2959245">ok</span>&nbsp;<span class="op" id="2959248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959252">return</span>&nbsp;<span class="ident" id="2959259">v</span><span class="op" id="2959260">.</span><span class="ident" id="2959261">FieldByIndex</span><span class="op" id="2959273">(</span><span class="ident" id="2959274">f</span><span class="op" id="2959275">.</span><span class="ident" id="2959276">Index</span><span class="op" id="2959281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959287">return</span>&nbsp;<span class="ident" id="2959294">Value</span><span class="op" id="2959299">{</span><span class="op" id="2959300">}</span><br>
<span class="lineno">775</span><span class="op" id="2959302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2959305">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2959358">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2959409">func</span>&nbsp;<span class="op" id="2959414">(</span><span class="ident" id="2959415">v</span>&nbsp;<span class="ident" id="2959417">Value</span><span class="op" id="2959422">)</span>&nbsp;<span class="ident" id="2959424">Float</span><span class="op" id="2959429">(</span><span class="op" id="2959430">)</span>&nbsp;<span class="builtintype" id="2959432">float64</span>&nbsp;<span class="op" id="2959440">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959443">k</span>&nbsp;<span class="op" id="2959445">:=</span>&nbsp;<span class="ident" id="2959448">v</span><span class="op" id="2959449">.</span><span class="ident" id="2959450">kind</span><span class="op" id="2959454">(</span><span class="op" id="2959455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959458">switch</span>&nbsp;<span class="ident" id="2959465">k</span>&nbsp;<span class="op" id="2959467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959470">case</span>&nbsp;<span class="ident" id="2959475">Float32</span><span class="op" id="2959482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959486">return</span>&nbsp;<span class="builtintype" id="2959493">float64</span><span class="op" id="2959500">(</span><span class="op" id="2959501">*</span><span class="op" id="2959502">(</span><span class="op" id="2959503">*</span><span class="builtintype" id="2959504">float32</span><span class="op" id="2959511">)</span><span class="op" id="2959512">(</span><span class="ident" id="2959513">v</span><span class="op" id="2959514">.</span><span class="ident" id="2959515">ptr</span><span class="op" id="2959518">)</span><span class="op" id="2959519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959522">case</span>&nbsp;<span class="ident" id="2959527">Float64</span><span class="op" id="2959534">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959538">return</span>&nbsp;<span class="op" id="2959545">*</span><span class="op" id="2959546">(</span><span class="op" id="2959547">*</span><span class="builtintype" id="2959548">float64</span><span class="op" id="2959555">)</span><span class="op" id="2959556">(</span><span class="ident" id="2959557">v</span><span class="op" id="2959558">.</span><span class="ident" id="2959559">ptr</span><span class="op" id="2959562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2959568">panic</span><span class="op" id="2959573">(</span><span class="op" id="2959574">&amp;</span><span class="ident" id="2959575">ValueError</span><span class="op" id="2959585">{</span><span class="string" id="2959586">&#34;reflect.Value.Float&#34;</span><span class="op" id="2959607">,</span>&nbsp;<span class="ident" id="2959609">v</span><span class="op" id="2959610">.</span><span class="ident" id="2959611">kind</span><span class="op" id="2959615">(</span><span class="op" id="2959616">)</span><span class="op" id="2959617">}</span><span class="op" id="2959618">)</span><br>
<span class="lineno"></span><span class="op" id="2959620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2959623">var</span>&nbsp;<span class="ident" id="2959627">uint8Type</span>&nbsp;<span class="op" id="2959637">=</span>&nbsp;<span class="ident" id="2959639">TypeOf</span><span class="op" id="2959645">(</span><span class="builtintype" id="2959646">uint8</span><span class="op" id="2959651">(</span><span class="num" id="2959652">0</span><span class="op" id="2959653">)</span><span class="op" id="2959654">)</span><span class="op" id="2959655">.</span><span class="op" id="2959656">(</span><span class="op" id="2959657">*</span><span class="ident" id="2959658">rtype</span><span class="op" id="2959663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2959666">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2959701">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2959779">func</span>&nbsp;<span class="op" id="2959784">(</span><span class="ident" id="2959785">v</span>&nbsp;<span class="ident" id="2959787">Value</span><span class="op" id="2959792">)</span>&nbsp;<span class="ident" id="2959794">Index</span><span class="op" id="2959799">(</span><span class="ident" id="2959800">i</span>&nbsp;<span class="builtintype" id="2959802">int</span><span class="op" id="2959805">)</span>&nbsp;<span class="ident" id="2959807">Value</span>&nbsp;<span class="op" id="2959813">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959816">switch</span>&nbsp;<span class="ident" id="2959823">v</span><span class="op" id="2959824">.</span><span class="ident" id="2959825">kind</span><span class="op" id="2959829">(</span><span class="op" id="2959830">)</span>&nbsp;<span class="op" id="2959832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959835">case</span>&nbsp;<span class="ident" id="2959840">Array</span><span class="op" id="2959845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959849">tt</span>&nbsp;<span class="op" id="2959852">:=</span>&nbsp;<span class="op" id="2959855">(</span><span class="op" id="2959856">*</span><span class="ident" id="2959857">arrayType</span><span class="op" id="2959866">)</span><span class="op" id="2959867">(</span><span class="ident" id="2959868">unsafe</span><span class="op" id="2959874">.</span><span class="ident" id="2959875">Pointer</span><span class="op" id="2959882">(</span><span class="ident" id="2959883">v</span><span class="op" id="2959884">.</span><span class="ident" id="2959885">typ</span><span class="op" id="2959888">)</span><span class="op" id="2959889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959893">if</span>&nbsp;<span class="builtintype" id="2959896">uint</span><span class="op" id="2959900">(</span><span class="ident" id="2959901">i</span><span class="op" id="2959902">)</span>&nbsp;<span class="op" id="2959904">&gt;=</span>&nbsp;<span class="builtintype" id="2959907">uint</span><span class="op" id="2959911">(</span><span class="ident" id="2959912">tt</span><span class="op" id="2959914">.</span><span class="builtinfunc" id="2959915">len</span><span class="op" id="2959918">)</span>&nbsp;<span class="op" id="2959920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2959925">panic</span><span class="op" id="2959930">(</span><span class="string" id="2959931">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2959966">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959974">typ</span>&nbsp;<span class="op" id="2959978">:=</span>&nbsp;<span class="ident" id="2959981">tt</span><span class="op" id="2959983">.</span><span class="ident" id="2959984">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959991">offset</span>&nbsp;<span class="op" id="2959998">:=</span>&nbsp;<span class="builtintype" id="2960001">uintptr</span><span class="op" id="2960008">(</span><span class="ident" id="2960009">i</span><span class="op" id="2960010">)</span>&nbsp;<span class="op" id="2960012">*</span>&nbsp;<span class="ident" id="2960014">typ</span><span class="op" id="2960017">.</span><span class="ident" id="2960018">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960026">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960082">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960147">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960196">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960263">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960301">val</span>&nbsp;<span class="op" id="2960305">:=</span>&nbsp;<span class="ident" id="2960308">unsafe</span><span class="op" id="2960314">.</span><span class="ident" id="2960315">Pointer</span><span class="op" id="2960322">(</span><span class="builtintype" id="2960323">uintptr</span><span class="op" id="2960330">(</span><span class="ident" id="2960331">v</span><span class="op" id="2960332">.</span><span class="ident" id="2960333">ptr</span><span class="op" id="2960336">)</span>&nbsp;<span class="op" id="2960338">+</span>&nbsp;<span class="ident" id="2960340">offset</span><span class="op" id="2960346">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960350">fl</span>&nbsp;<span class="op" id="2960353">:=</span>&nbsp;<span class="ident" id="2960356">v</span><span class="op" id="2960357">.</span><span class="ident" id="2960358">flag</span><span class="op" id="2960362">&amp;</span><span class="op" id="2960363">(</span><span class="ident" id="2960364">flagRO</span><span class="op" id="2960370">|</span><span class="ident" id="2960371">flagIndir</span><span class="op" id="2960380">|</span><span class="ident" id="2960381">flagAddr</span><span class="op" id="2960389">)</span>&nbsp;<span class="op" id="2960391">|</span>&nbsp;<span class="ident" id="2960393">flag</span><span class="op" id="2960397">(</span><span class="ident" id="2960398">typ</span><span class="op" id="2960401">.</span><span class="ident" id="2960402">Kind</span><span class="op" id="2960406">(</span><span class="op" id="2960407">)</span><span class="op" id="2960408">)</span>&nbsp;<span class="comment" id="2960410">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960442">return</span>&nbsp;<span class="ident" id="2960449">Value</span><span class="op" id="2960454">{</span><span class="ident" id="2960455">typ</span><span class="op" id="2960458">,</span>&nbsp;<span class="ident" id="2960460">val</span><span class="op" id="2960463">,</span>&nbsp;<span class="ident" id="2960465">fl</span><span class="op" id="2960467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960471">case</span>&nbsp;<span class="ident" id="2960476">Slice</span><span class="op" id="2960481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960485">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960524">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960572">s</span>&nbsp;<span class="op" id="2960574">:=</span>&nbsp;<span class="op" id="2960577">(</span><span class="op" id="2960578">*</span><span class="ident" id="2960579">sliceHeader</span><span class="op" id="2960590">)</span><span class="op" id="2960591">(</span><span class="ident" id="2960592">v</span><span class="op" id="2960593">.</span><span class="ident" id="2960594">ptr</span><span class="op" id="2960597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960601">if</span>&nbsp;<span class="builtintype" id="2960604">uint</span><span class="op" id="2960608">(</span><span class="ident" id="2960609">i</span><span class="op" id="2960610">)</span>&nbsp;<span class="op" id="2960612">&gt;=</span>&nbsp;<span class="builtintype" id="2960615">uint</span><span class="op" id="2960619">(</span><span class="ident" id="2960620">s</span><span class="op" id="2960621">.</span><span class="ident" id="2960622">Len</span><span class="op" id="2960625">)</span>&nbsp;<span class="op" id="2960627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2960632">panic</span><span class="op" id="2960637">(</span><span class="string" id="2960638">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2960673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960677">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960681">tt</span>&nbsp;<span class="op" id="2960684">:=</span>&nbsp;<span class="op" id="2960687">(</span><span class="op" id="2960688">*</span><span class="ident" id="2960689">sliceType</span><span class="op" id="2960698">)</span><span class="op" id="2960699">(</span><span class="ident" id="2960700">unsafe</span><span class="op" id="2960706">.</span><span class="ident" id="2960707">Pointer</span><span class="op" id="2960714">(</span><span class="ident" id="2960715">v</span><span class="op" id="2960716">.</span><span class="ident" id="2960717">typ</span><span class="op" id="2960720">)</span><span class="op" id="2960721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960725">typ</span>&nbsp;<span class="op" id="2960729">:=</span>&nbsp;<span class="ident" id="2960732">tt</span><span class="op" id="2960734">.</span><span class="ident" id="2960735">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960742">val</span>&nbsp;<span class="op" id="2960746">:=</span>&nbsp;<span class="ident" id="2960749">unsafe</span><span class="op" id="2960755">.</span><span class="ident" id="2960756">Pointer</span><span class="op" id="2960763">(</span><span class="builtintype" id="2960764">uintptr</span><span class="op" id="2960771">(</span><span class="ident" id="2960772">s</span><span class="op" id="2960773">.</span><span class="ident" id="2960774">Data</span><span class="op" id="2960778">)</span>&nbsp;<span class="op" id="2960780">+</span>&nbsp;<span class="builtintype" id="2960782">uintptr</span><span class="op" id="2960789">(</span><span class="ident" id="2960790">i</span><span class="op" id="2960791">)</span><span class="op" id="2960792">*</span><span class="ident" id="2960793">typ</span><span class="op" id="2960796">.</span><span class="ident" id="2960797">size</span><span class="op" id="2960801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960805">fl</span>&nbsp;<span class="op" id="2960808">:=</span>&nbsp;<span class="ident" id="2960811">flagAddr</span>&nbsp;<span class="op" id="2960820">|</span>&nbsp;<span class="ident" id="2960822">flagIndir</span>&nbsp;<span class="op" id="2960832">|</span>&nbsp;<span class="ident" id="2960834">v</span><span class="op" id="2960835">.</span><span class="ident" id="2960836">flag</span><span class="op" id="2960840">&amp;</span><span class="ident" id="2960841">flagRO</span>&nbsp;<span class="op" id="2960848">|</span>&nbsp;<span class="ident" id="2960850">flag</span><span class="op" id="2960854">(</span><span class="ident" id="2960855">typ</span><span class="op" id="2960858">.</span><span class="ident" id="2960859">Kind</span><span class="op" id="2960863">(</span><span class="op" id="2960864">)</span><span class="op" id="2960865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960869">return</span>&nbsp;<span class="ident" id="2960876">Value</span><span class="op" id="2960881">{</span><span class="ident" id="2960882">typ</span><span class="op" id="2960885">,</span>&nbsp;<span class="ident" id="2960887">val</span><span class="op" id="2960890">,</span>&nbsp;<span class="ident" id="2960892">fl</span><span class="op" id="2960894">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960898">case</span>&nbsp;<span class="ident" id="2960903">String</span><span class="op" id="2960909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960913">s</span>&nbsp;<span class="op" id="2960915">:=</span>&nbsp;<span class="op" id="2960918">(</span><span class="op" id="2960919">*</span><span class="ident" id="2960920">stringHeader</span><span class="op" id="2960932">)</span><span class="op" id="2960933">(</span><span class="ident" id="2960934">v</span><span class="op" id="2960935">.</span><span class="ident" id="2960936">ptr</span><span class="op" id="2960939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960943">if</span>&nbsp;<span class="builtintype" id="2960946">uint</span><span class="op" id="2960950">(</span><span class="ident" id="2960951">i</span><span class="op" id="2960952">)</span>&nbsp;<span class="op" id="2960954">&gt;=</span>&nbsp;<span class="builtintype" id="2960957">uint</span><span class="op" id="2960961">(</span><span class="ident" id="2960962">s</span><span class="op" id="2960963">.</span><span class="ident" id="2960964">Len</span><span class="op" id="2960967">)</span>&nbsp;<span class="op" id="2960969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2960974">panic</span><span class="op" id="2960979">(</span><span class="string" id="2960980">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2961016">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961024">p</span>&nbsp;<span class="op" id="2961026">:=</span>&nbsp;<span class="ident" id="2961029">unsafe</span><span class="op" id="2961035">.</span><span class="ident" id="2961036">Pointer</span><span class="op" id="2961043">(</span><span class="builtintype" id="2961044">uintptr</span><span class="op" id="2961051">(</span><span class="ident" id="2961052">s</span><span class="op" id="2961053">.</span><span class="ident" id="2961054">Data</span><span class="op" id="2961058">)</span>&nbsp;<span class="op" id="2961060">+</span>&nbsp;<span class="builtintype" id="2961062">uintptr</span><span class="op" id="2961069">(</span><span class="ident" id="2961070">i</span><span class="op" id="2961071">)</span><span class="op" id="2961072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961076">fl</span>&nbsp;<span class="op" id="2961079">:=</span>&nbsp;<span class="ident" id="2961082">v</span><span class="op" id="2961083">.</span><span class="ident" id="2961084">flag</span><span class="op" id="2961088">&amp;</span><span class="ident" id="2961089">flagRO</span>&nbsp;<span class="op" id="2961096">|</span>&nbsp;<span class="ident" id="2961098">flag</span><span class="op" id="2961102">(</span><span class="ident" id="2961103">Uint8</span><span class="op" id="2961108">)</span>&nbsp;<span class="op" id="2961110">|</span>&nbsp;<span class="ident" id="2961112">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961124">return</span>&nbsp;<span class="ident" id="2961131">Value</span><span class="op" id="2961136">{</span><span class="ident" id="2961137">uint8Type</span><span class="op" id="2961146">,</span>&nbsp;<span class="ident" id="2961148">p</span><span class="op" id="2961149">,</span>&nbsp;<span class="ident" id="2961151">fl</span><span class="op" id="2961153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961156">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2961159">panic</span><span class="op" id="2961164">(</span><span class="op" id="2961165">&amp;</span><span class="ident" id="2961166">ValueError</span><span class="op" id="2961176">{</span><span class="string" id="2961177">&#34;reflect.Value.Index&#34;</span><span class="op" id="2961198">,</span>&nbsp;<span class="ident" id="2961200">v</span><span class="op" id="2961201">.</span><span class="ident" id="2961202">kind</span><span class="op" id="2961206">(</span><span class="op" id="2961207">)</span><span class="op" id="2961208">}</span><span class="op" id="2961209">)</span><br>
<span class="lineno"></span><span class="op" id="2961211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2961214">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2961264">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2961331">func</span>&nbsp;<span class="op" id="2961336">(</span><span class="ident" id="2961337">v</span>&nbsp;<span class="ident" id="2961339">Value</span><span class="op" id="2961344">)</span>&nbsp;<span class="ident" id="2961346">Int</span><span class="op" id="2961349">(</span><span class="op" id="2961350">)</span>&nbsp;<span class="ident" id="2961352">int64</span>&nbsp;<span class="op" id="2961358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961361">k</span>&nbsp;<span class="op" id="2961363">:=</span>&nbsp;<span class="ident" id="2961366">v</span><span class="op" id="2961367">.</span><span class="ident" id="2961368">kind</span><span class="op" id="2961372">(</span><span class="op" id="2961373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961376">p</span>&nbsp;<span class="op" id="2961378">:=</span>&nbsp;<span class="ident" id="2961381">v</span><span class="op" id="2961382">.</span><span class="ident" id="2961383">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961388">switch</span>&nbsp;<span class="ident" id="2961395">k</span>&nbsp;<span class="op" id="2961397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961400">case</span>&nbsp;<span class="ident" id="2961405">Int</span><span class="op" id="2961408">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961412">return</span>&nbsp;<span class="ident" id="2961419">int64</span><span class="op" id="2961424">(</span><span class="op" id="2961425">*</span><span class="op" id="2961426">(</span><span class="op" id="2961427">*</span><span class="builtintype" id="2961428">int</span><span class="op" id="2961431">)</span><span class="op" id="2961432">(</span><span class="ident" id="2961433">p</span><span class="op" id="2961434">)</span><span class="op" id="2961435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961438">case</span>&nbsp;<span class="ident" id="2961443">Int8</span><span class="op" id="2961447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961451">return</span>&nbsp;<span class="ident" id="2961458">int64</span><span class="op" id="2961463">(</span><span class="op" id="2961464">*</span><span class="op" id="2961465">(</span><span class="op" id="2961466">*</span><span class="builtintype" id="2961467">int8</span><span class="op" id="2961471">)</span><span class="op" id="2961472">(</span><span class="ident" id="2961473">p</span><span class="op" id="2961474">)</span><span class="op" id="2961475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961478">case</span>&nbsp;<span class="ident" id="2961483">Int16</span><span class="op" id="2961488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961492">return</span>&nbsp;<span class="ident" id="2961499">int64</span><span class="op" id="2961504">(</span><span class="op" id="2961505">*</span><span class="op" id="2961506">(</span><span class="op" id="2961507">*</span><span class="builtintype" id="2961508">int16</span><span class="op" id="2961513">)</span><span class="op" id="2961514">(</span><span class="ident" id="2961515">p</span><span class="op" id="2961516">)</span><span class="op" id="2961517">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961520">case</span>&nbsp;<span class="ident" id="2961525">Int32</span><span class="op" id="2961530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961534">return</span>&nbsp;<span class="ident" id="2961541">int64</span><span class="op" id="2961546">(</span><span class="op" id="2961547">*</span><span class="op" id="2961548">(</span><span class="op" id="2961549">*</span><span class="builtintype" id="2961550">int32</span><span class="op" id="2961555">)</span><span class="op" id="2961556">(</span><span class="ident" id="2961557">p</span><span class="op" id="2961558">)</span><span class="op" id="2961559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961562">case</span>&nbsp;<span class="ident" id="2961567">Int64</span><span class="op" id="2961572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961576">return</span>&nbsp;<span class="ident" id="2961583">int64</span><span class="op" id="2961588">(</span><span class="op" id="2961589">*</span><span class="op" id="2961590">(</span><span class="op" id="2961591">*</span><span class="ident" id="2961592">int64</span><span class="op" id="2961597">)</span><span class="op" id="2961598">(</span><span class="ident" id="2961599">p</span><span class="op" id="2961600">)</span><span class="op" id="2961601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961604">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2961607">panic</span><span class="op" id="2961612">(</span><span class="op" id="2961613">&amp;</span><span class="ident" id="2961614">ValueError</span><span class="op" id="2961624">{</span><span class="string" id="2961625">&#34;reflect.Value.Int&#34;</span><span class="op" id="2961644">,</span>&nbsp;<span class="ident" id="2961646">v</span><span class="op" id="2961647">.</span><span class="ident" id="2961648">kind</span><span class="op" id="2961652">(</span><span class="op" id="2961653">)</span><span class="op" id="2961654">}</span><span class="op" id="2961655">)</span><br>
<span class="lineno"></span><span class="op" id="2961657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2961660">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2961733">func</span>&nbsp;<span class="op" id="2961738">(</span><span class="ident" id="2961739">v</span>&nbsp;<span class="ident" id="2961741">Value</span><span class="op" id="2961746">)</span>&nbsp;<span class="ident" id="2961748">CanInterface</span><span class="op" id="2961760">(</span><span class="op" id="2961761">)</span>&nbsp;<span class="builtintype" id="2961763">bool</span>&nbsp;<span class="op" id="2961768">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961771">if</span>&nbsp;<span class="ident" id="2961774">v</span><span class="op" id="2961775">.</span><span class="ident" id="2961776">flag</span>&nbsp;<span class="op" id="2961781">==</span>&nbsp;<span class="num" id="2961784">0</span>&nbsp;<span class="op" id="2961786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2961790">panic</span><span class="op" id="2961795">(</span><span class="op" id="2961796">&amp;</span><span class="ident" id="2961797">ValueError</span><span class="op" id="2961807">{</span><span class="string" id="2961808">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2961836">,</span>&nbsp;<span class="ident" id="2961838">Invalid</span><span class="op" id="2961845">}</span><span class="op" id="2961846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961852">return</span>&nbsp;<span class="ident" id="2961859">v</span><span class="op" id="2961860">.</span><span class="ident" id="2961861">flag</span><span class="op" id="2961865">&amp;</span><span class="ident" id="2961866">flagRO</span>&nbsp;<span class="op" id="2961873">==</span>&nbsp;<span class="num" id="2961876">0</span><br>
<span class="lineno"></span><span class="op" id="2961878">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2961881">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2961939">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2961963">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2962009">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2962061">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2962090">func</span>&nbsp;<span class="op" id="2962095">(</span><span class="ident" id="2962096">v</span>&nbsp;<span class="ident" id="2962098">Value</span><span class="op" id="2962103">)</span>&nbsp;<span class="ident" id="2962105">Interface</span><span class="op" id="2962114">(</span><span class="op" id="2962115">)</span>&nbsp;<span class="op" id="2962117">(</span><span class="ident" id="2962118">i</span>&nbsp;<span class="keyword" id="2962120">interface</span><span class="op" id="2962129">{</span><span class="op" id="2962130">}</span><span class="op" id="2962131">)</span>&nbsp;<span class="op" id="2962133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962136">return</span>&nbsp;<span class="ident" id="2962143">valueInterface</span><span class="op" id="2962157">(</span><span class="ident" id="2962158">v</span><span class="op" id="2962159">,</span>&nbsp;<span class="builtintype" id="2962161">true</span><span class="op" id="2962165">)</span><br>
<span class="lineno"></span><span class="op" id="2962167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2962170">func</span>&nbsp;<span class="ident" id="2962175">valueInterface</span><span class="op" id="2962189">(</span><span class="ident" id="2962190">v</span>&nbsp;<span class="ident" id="2962192">Value</span><span class="op" id="2962197">,</span>&nbsp;<span class="ident" id="2962199">safe</span>&nbsp;<span class="builtintype" id="2962204">bool</span><span class="op" id="2962208">)</span>&nbsp;<span class="keyword" id="2962210">interface</span><span class="op" id="2962219">{</span><span class="op" id="2962220">}</span>&nbsp;<span class="op" id="2962222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962225">if</span>&nbsp;<span class="ident" id="2962228">v</span><span class="op" id="2962229">.</span><span class="ident" id="2962230">flag</span>&nbsp;<span class="op" id="2962235">==</span>&nbsp;<span class="num" id="2962238">0</span>&nbsp;<span class="op" id="2962240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2962244">panic</span><span class="op" id="2962249">(</span><span class="op" id="2962250">&amp;</span><span class="ident" id="2962251">ValueError</span><span class="op" id="2962261">{</span><span class="string" id="2962262">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2962287">,</span>&nbsp;<span class="num" id="2962289">0</span><span class="op" id="2962290">}</span><span class="op" id="2962291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962297">if</span>&nbsp;<span class="ident" id="2962300">safe</span>&nbsp;<span class="op" id="2962305">&amp;&amp;</span>&nbsp;<span class="ident" id="2962308">v</span><span class="op" id="2962309">.</span><span class="ident" id="2962310">flag</span><span class="op" id="2962314">&amp;</span><span class="ident" id="2962315">flagRO</span>&nbsp;<span class="op" id="2962322">!=</span>&nbsp;<span class="num" id="2962325">0</span>&nbsp;<span class="op" id="2962327">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962331">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962392">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962447">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2962513">panic</span><span class="op" id="2962518">(</span><span class="string" id="2962519">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2962606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962609">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962612">if</span>&nbsp;<span class="ident" id="2962615">v</span><span class="op" id="2962616">.</span><span class="ident" id="2962617">flag</span><span class="op" id="2962621">&amp;</span><span class="ident" id="2962622">flagMethod</span>&nbsp;<span class="op" id="2962633">!=</span>&nbsp;<span class="num" id="2962636">0</span>&nbsp;<span class="op" id="2962638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962642">v</span>&nbsp;<span class="op" id="2962644">=</span>&nbsp;<span class="ident" id="2962646">makeMethodValue</span><span class="op" id="2962661">(</span><span class="string" id="2962662">&#34;Interface&#34;</span><span class="op" id="2962673">,</span>&nbsp;<span class="ident" id="2962675">v</span><span class="op" id="2962676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962683">if</span>&nbsp;<span class="ident" id="2962686">v</span><span class="op" id="2962687">.</span><span class="ident" id="2962688">kind</span><span class="op" id="2962692">(</span><span class="op" id="2962693">)</span>&nbsp;<span class="op" id="2962695">==</span>&nbsp;<span class="ident" id="2962698">Interface</span>&nbsp;<span class="op" id="2962708">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962712">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962772">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962829">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962864">if</span>&nbsp;<span class="ident" id="2962867">v</span><span class="op" id="2962868">.</span><span class="ident" id="2962869">NumMethod</span><span class="op" id="2962878">(</span><span class="op" id="2962879">)</span>&nbsp;<span class="op" id="2962881">==</span>&nbsp;<span class="num" id="2962884">0</span>&nbsp;<span class="op" id="2962886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962891">return</span>&nbsp;<span class="op" id="2962898">*</span><span class="op" id="2962899">(</span><span class="op" id="2962900">*</span><span class="keyword" id="2962901">interface</span><span class="op" id="2962910">{</span><span class="op" id="2962911">}</span><span class="op" id="2962912">)</span><span class="op" id="2962913">(</span><span class="ident" id="2962914">v</span><span class="op" id="2962915">.</span><span class="ident" id="2962916">ptr</span><span class="op" id="2962919">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962927">return</span>&nbsp;<span class="op" id="2962934">*</span><span class="op" id="2962935">(</span><span class="op" id="2962936">*</span><span class="keyword" id="2962937">interface</span>&nbsp;<span class="op" id="2962947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962952">M</span><span class="op" id="2962953">(</span><span class="op" id="2962954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962958">}</span><span class="op" id="2962959">)</span><span class="op" id="2962960">(</span><span class="ident" id="2962961">v</span><span class="op" id="2962962">.</span><span class="ident" id="2962963">ptr</span><span class="op" id="2962966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962969">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962973">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963046">return</span>&nbsp;<span class="ident" id="2963053">packEface</span><span class="op" id="2963062">(</span><span class="ident" id="2963063">v</span><span class="op" id="2963064">)</span><br>
<span class="lineno"></span><span class="op" id="2963066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2963069">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2963137">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2963180">func</span>&nbsp;<span class="op" id="2963185">(</span><span class="ident" id="2963186">v</span>&nbsp;<span class="ident" id="2963188">Value</span><span class="op" id="2963193">)</span>&nbsp;<span class="ident" id="2963195">InterfaceData</span><span class="op" id="2963208">(</span><span class="op" id="2963209">)</span>&nbsp;<span class="op" id="2963211">[</span><span class="num" id="2963212">2</span><span class="op" id="2963213">]</span><span class="builtintype" id="2963214">uintptr</span>&nbsp;<span class="op" id="2963222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963225">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963250">v</span><span class="op" id="2963251">.</span><span class="ident" id="2963252">mustBe</span><span class="op" id="2963258">(</span><span class="ident" id="2963259">Interface</span><span class="op" id="2963268">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963271">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963322">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963374">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963427">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963451">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963519">return</span>&nbsp;<span class="op" id="2963526">*</span><span class="op" id="2963527">(</span><span class="op" id="2963528">*</span><span class="op" id="2963529">[</span><span class="num" id="2963530">2</span><span class="op" id="2963531">]</span><span class="builtintype" id="2963532">uintptr</span><span class="op" id="2963539">)</span><span class="op" id="2963540">(</span><span class="ident" id="2963541">v</span><span class="op" id="2963542">.</span><span class="ident" id="2963543">ptr</span><span class="op" id="2963546">)</span><br>
<span class="lineno"></span><span class="op" id="2963548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2963551">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2963620">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2963687">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2963755">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2963823">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2963889">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2963957">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2963967">func</span>&nbsp;<span class="op" id="2963972">(</span><span class="ident" id="2963973">v</span>&nbsp;<span class="ident" id="2963975">Value</span><span class="op" id="2963980">)</span>&nbsp;<span class="ident" id="2963982">IsNil</span><span class="op" id="2963987">(</span><span class="op" id="2963988">)</span>&nbsp;<span class="builtintype" id="2963990">bool</span>&nbsp;<span class="op" id="2963995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963998">k</span>&nbsp;<span class="op" id="2964000">:=</span>&nbsp;<span class="ident" id="2964003">v</span><span class="op" id="2964004">.</span><span class="ident" id="2964005">kind</span><span class="op" id="2964009">(</span><span class="op" id="2964010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964013">switch</span>&nbsp;<span class="ident" id="2964020">k</span>&nbsp;<span class="op" id="2964022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964025">case</span>&nbsp;<span class="ident" id="2964030">Chan</span><span class="op" id="2964034">,</span>&nbsp;<span class="ident" id="2964036">Func</span><span class="op" id="2964040">,</span>&nbsp;<span class="ident" id="2964042">Map</span><span class="op" id="2964045">,</span>&nbsp;<span class="ident" id="2964047">Ptr</span><span class="op" id="2964050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964054">if</span>&nbsp;<span class="ident" id="2964057">v</span><span class="op" id="2964058">.</span><span class="ident" id="2964059">flag</span><span class="op" id="2964063">&amp;</span><span class="ident" id="2964064">flagMethod</span>&nbsp;<span class="op" id="2964075">!=</span>&nbsp;<span class="num" id="2964078">0</span>&nbsp;<span class="op" id="2964080">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964085">return</span>&nbsp;<span class="builtintype" id="2964092">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964104">ptr</span>&nbsp;<span class="op" id="2964108">:=</span>&nbsp;<span class="ident" id="2964111">v</span><span class="op" id="2964112">.</span><span class="ident" id="2964113">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964119">if</span>&nbsp;<span class="ident" id="2964122">v</span><span class="op" id="2964123">.</span><span class="ident" id="2964124">flag</span><span class="op" id="2964128">&amp;</span><span class="ident" id="2964129">flagIndir</span>&nbsp;<span class="op" id="2964139">!=</span>&nbsp;<span class="num" id="2964142">0</span>&nbsp;<span class="op" id="2964144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964149">ptr</span>&nbsp;<span class="op" id="2964153">=</span>&nbsp;<span class="op" id="2964155">*</span><span class="op" id="2964156">(</span><span class="op" id="2964157">*</span><span class="ident" id="2964158">unsafe</span><span class="op" id="2964164">.</span><span class="ident" id="2964165">Pointer</span><span class="op" id="2964172">)</span><span class="op" id="2964173">(</span><span class="ident" id="2964174">ptr</span><span class="op" id="2964177">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964185">return</span>&nbsp;<span class="ident" id="2964192">ptr</span>&nbsp;<span class="op" id="2964196">==</span>&nbsp;<span class="ident" id="2964199">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964204">case</span>&nbsp;<span class="ident" id="2964209">Interface</span><span class="op" id="2964218">,</span>&nbsp;<span class="ident" id="2964220">Slice</span><span class="op" id="2964225">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964229">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2964287">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964346">return</span>&nbsp;<span class="op" id="2964353">*</span><span class="op" id="2964354">(</span><span class="op" id="2964355">*</span><span class="ident" id="2964356">unsafe</span><span class="op" id="2964362">.</span><span class="ident" id="2964363">Pointer</span><span class="op" id="2964370">)</span><span class="op" id="2964371">(</span><span class="ident" id="2964372">v</span><span class="op" id="2964373">.</span><span class="ident" id="2964374">ptr</span><span class="op" id="2964377">)</span>&nbsp;<span class="op" id="2964379">==</span>&nbsp;<span class="ident" id="2964382">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2964390">panic</span><span class="op" id="2964395">(</span><span class="op" id="2964396">&amp;</span><span class="ident" id="2964397">ValueError</span><span class="op" id="2964407">{</span><span class="string" id="2964408">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2964429">,</span>&nbsp;<span class="ident" id="2964431">v</span><span class="op" id="2964432">.</span><span class="ident" id="2964433">kind</span><span class="op" id="2964437">(</span><span class="op" id="2964438">)</span><span class="op" id="2964439">}</span><span class="op" id="2964440">)</span><br>
<span class="lineno"></span><span class="op" id="2964442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2964445">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2964494">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2964538">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2964606">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2964667">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2964735">func</span>&nbsp;<span class="op" id="2964740">(</span><span class="ident" id="2964741">v</span>&nbsp;<span class="ident" id="2964743">Value</span><span class="op" id="2964748">)</span>&nbsp;<span class="ident" id="2964750">IsValid</span><span class="op" id="2964757">(</span><span class="op" id="2964758">)</span>&nbsp;<span class="builtintype" id="2964760">bool</span>&nbsp;<span class="op" id="2964765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964768">return</span>&nbsp;<span class="ident" id="2964775">v</span><span class="op" id="2964776">.</span><span class="ident" id="2964777">flag</span>&nbsp;<span class="op" id="2964782">!=</span>&nbsp;<span class="num" id="2964785">0</span><br>
<span class="lineno"></span><span class="op" id="2964787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2964790">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2964816">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2964889">func</span>&nbsp;<span class="op" id="2964894">(</span><span class="ident" id="2964895">v</span>&nbsp;<span class="ident" id="2964897">Value</span><span class="op" id="2964902">)</span>&nbsp;<span class="ident" id="2964904">Kind</span><span class="op" id="2964908">(</span><span class="op" id="2964909">)</span>&nbsp;<span class="ident" id="2964911">Kind</span>&nbsp;<span class="op" id="2964916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964919">return</span>&nbsp;<span class="ident" id="2964926">v</span><span class="op" id="2964927">.</span><span class="ident" id="2964928">kind</span><span class="op" id="2964932">(</span><span class="op" id="2964933">)</span><br>
<span class="lineno"></span><span class="op" id="2964935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2964938">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2964965">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2965033">func</span>&nbsp;<span class="op" id="2965038">(</span><span class="ident" id="2965039">v</span>&nbsp;<span class="ident" id="2965041">Value</span><span class="op" id="2965046">)</span>&nbsp;<span class="ident" id="2965048">Len</span><span class="op" id="2965051">(</span><span class="op" id="2965052">)</span>&nbsp;<span class="builtintype" id="2965054">int</span>&nbsp;<span class="op" id="2965058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965061">k</span>&nbsp;<span class="op" id="2965063">:=</span>&nbsp;<span class="ident" id="2965066">v</span><span class="op" id="2965067">.</span><span class="ident" id="2965068">kind</span><span class="op" id="2965072">(</span><span class="op" id="2965073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965076">switch</span>&nbsp;<span class="ident" id="2965083">k</span>&nbsp;<span class="op" id="2965085">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965088">case</span>&nbsp;<span class="ident" id="2965093">Array</span><span class="op" id="2965098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965102">tt</span>&nbsp;<span class="op" id="2965105">:=</span>&nbsp;<span class="op" id="2965108">(</span><span class="op" id="2965109">*</span><span class="ident" id="2965110">arrayType</span><span class="op" id="2965119">)</span><span class="op" id="2965120">(</span><span class="ident" id="2965121">unsafe</span><span class="op" id="2965127">.</span><span class="ident" id="2965128">Pointer</span><span class="op" id="2965135">(</span><span class="ident" id="2965136">v</span><span class="op" id="2965137">.</span><span class="ident" id="2965138">typ</span><span class="op" id="2965141">)</span><span class="op" id="2965142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965146">return</span>&nbsp;<span class="builtintype" id="2965153">int</span><span class="op" id="2965156">(</span><span class="ident" id="2965157">tt</span><span class="op" id="2965159">.</span><span class="builtinfunc" id="2965160">len</span><span class="op" id="2965163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965166">case</span>&nbsp;<span class="ident" id="2965171">Chan</span><span class="op" id="2965175">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965179">return</span>&nbsp;<span class="ident" id="2965186">chanlen</span><span class="op" id="2965193">(</span><span class="ident" id="2965194">v</span><span class="op" id="2965195">.</span><span class="ident" id="2965196">pointer</span><span class="op" id="2965203">(</span><span class="op" id="2965204">)</span><span class="op" id="2965205">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965208">case</span>&nbsp;<span class="ident" id="2965213">Map</span><span class="op" id="2965216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965220">return</span>&nbsp;<span class="ident" id="2965227">maplen</span><span class="op" id="2965233">(</span><span class="ident" id="2965234">v</span><span class="op" id="2965235">.</span><span class="ident" id="2965236">pointer</span><span class="op" id="2965243">(</span><span class="op" id="2965244">)</span><span class="op" id="2965245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965248">case</span>&nbsp;<span class="ident" id="2965253">Slice</span><span class="op" id="2965258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965262">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965314">return</span>&nbsp;<span class="op" id="2965321">(</span><span class="op" id="2965322">*</span><span class="ident" id="2965323">sliceHeader</span><span class="op" id="2965334">)</span><span class="op" id="2965335">(</span><span class="ident" id="2965336">v</span><span class="op" id="2965337">.</span><span class="ident" id="2965338">ptr</span><span class="op" id="2965341">)</span><span class="op" id="2965342">.</span><span class="ident" id="2965343">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965348">case</span>&nbsp;<span class="ident" id="2965353">String</span><span class="op" id="2965359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965363">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965416">return</span>&nbsp;<span class="op" id="2965423">(</span><span class="op" id="2965424">*</span><span class="ident" id="2965425">stringHeader</span><span class="op" id="2965437">)</span><span class="op" id="2965438">(</span><span class="ident" id="2965439">v</span><span class="op" id="2965440">.</span><span class="ident" id="2965441">ptr</span><span class="op" id="2965444">)</span><span class="op" id="2965445">.</span><span class="ident" id="2965446">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2965454">panic</span><span class="op" id="2965459">(</span><span class="op" id="2965460">&amp;</span><span class="ident" id="2965461">ValueError</span><span class="op" id="2965471">{</span><span class="string" id="2965472">&#34;reflect.Value.Len&#34;</span><span class="op" id="2965491">,</span>&nbsp;<span class="ident" id="2965493">v</span><span class="op" id="2965494">.</span><span class="ident" id="2965495">kind</span><span class="op" id="2965499">(</span><span class="op" id="2965500">)</span><span class="op" id="2965501">}</span><span class="op" id="2965502">)</span><br>
<span class="lineno">980</span><span class="op" id="2965504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2965507">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2965571">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2965608">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2965698">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2965769">func</span>&nbsp;<span class="op" id="2965774">(</span><span class="ident" id="2965775">v</span>&nbsp;<span class="ident" id="2965777">Value</span><span class="op" id="2965782">)</span>&nbsp;<span class="ident" id="2965784">MapIndex</span><span class="op" id="2965792">(</span><span class="ident" id="2965793">key</span>&nbsp;<span class="ident" id="2965797">Value</span><span class="op" id="2965802">)</span>&nbsp;<span class="ident" id="2965804">Value</span>&nbsp;<span class="op" id="2965810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965813">v</span><span class="op" id="2965814">.</span><span class="ident" id="2965815">mustBe</span><span class="op" id="2965821">(</span><span class="ident" id="2965822">Map</span><span class="op" id="2965825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965828">tt</span>&nbsp;<span class="op" id="2965831">:=</span>&nbsp;<span class="op" id="2965834">(</span><span class="op" id="2965835">*</span><span class="ident" id="2965836">mapType</span><span class="op" id="2965843">)</span><span class="op" id="2965844">(</span><span class="ident" id="2965845">unsafe</span><span class="op" id="2965851">.</span><span class="ident" id="2965852">Pointer</span><span class="op" id="2965859">(</span><span class="ident" id="2965860">v</span><span class="op" id="2965861">.</span><span class="ident" id="2965862">typ</span><span class="op" id="2965865">)</span><span class="op" id="2965866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965870">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965927">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965983">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966040">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966097">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966153">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966210">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966236">key</span>&nbsp;<span class="op" id="2966240">=</span>&nbsp;<span class="ident" id="2966242">key</span><span class="op" id="2966245">.</span><span class="ident" id="2966246">assignTo</span><span class="op" id="2966254">(</span><span class="string" id="2966255">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2966279">,</span>&nbsp;<span class="ident" id="2966281">tt</span><span class="op" id="2966283">.</span><span class="ident" id="2966284">key</span><span class="op" id="2966287">,</span>&nbsp;<span class="ident" id="2966289">nil</span><span class="op" id="2966292">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966296">var</span>&nbsp;<span class="ident" id="2966300">k</span>&nbsp;<span class="ident" id="2966302">unsafe</span><span class="op" id="2966308">.</span><span class="ident" id="2966309">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966318">if</span>&nbsp;<span class="ident" id="2966321">key</span><span class="op" id="2966324">.</span><span class="ident" id="2966325">flag</span><span class="op" id="2966329">&amp;</span><span class="ident" id="2966330">flagIndir</span>&nbsp;<span class="op" id="2966340">!=</span>&nbsp;<span class="num" id="2966343">0</span>&nbsp;<span class="op" id="2966345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966349">k</span>&nbsp;<span class="op" id="2966351">=</span>&nbsp;<span class="ident" id="2966353">key</span><span class="op" id="2966356">.</span><span class="ident" id="2966357">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966362">}</span>&nbsp;<span class="keyword" id="2966364">else</span>&nbsp;<span class="op" id="2966369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966373">k</span>&nbsp;<span class="op" id="2966375">=</span>&nbsp;<span class="ident" id="2966377">unsafe</span><span class="op" id="2966383">.</span><span class="ident" id="2966384">Pointer</span><span class="op" id="2966391">(</span><span class="op" id="2966392">&amp;</span><span class="ident" id="2966393">key</span><span class="op" id="2966396">.</span><span class="ident" id="2966397">ptr</span><span class="op" id="2966400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966403">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966406">e</span>&nbsp;<span class="op" id="2966408">:=</span>&nbsp;<span class="ident" id="2966411">mapaccess</span><span class="op" id="2966420">(</span><span class="ident" id="2966421">v</span><span class="op" id="2966422">.</span><span class="ident" id="2966423">typ</span><span class="op" id="2966426">,</span>&nbsp;<span class="ident" id="2966428">v</span><span class="op" id="2966429">.</span><span class="ident" id="2966430">pointer</span><span class="op" id="2966437">(</span><span class="op" id="2966438">)</span><span class="op" id="2966439">,</span>&nbsp;<span class="ident" id="2966441">k</span><span class="op" id="2966442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966445">if</span>&nbsp;<span class="ident" id="2966448">e</span>&nbsp;<span class="op" id="2966450">==</span>&nbsp;<span class="ident" id="2966453">nil</span>&nbsp;<span class="op" id="2966457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966461">return</span>&nbsp;<span class="ident" id="2966468">Value</span><span class="op" id="2966473">{</span><span class="op" id="2966474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966480">typ</span>&nbsp;<span class="op" id="2966484">:=</span>&nbsp;<span class="ident" id="2966487">tt</span><span class="op" id="2966489">.</span><span class="ident" id="2966490">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966496">fl</span>&nbsp;<span class="op" id="2966499">:=</span>&nbsp;<span class="op" id="2966502">(</span><span class="ident" id="2966503">v</span><span class="op" id="2966504">.</span><span class="ident" id="2966505">flag</span>&nbsp;<span class="op" id="2966510">|</span>&nbsp;<span class="ident" id="2966512">key</span><span class="op" id="2966515">.</span><span class="ident" id="2966516">flag</span><span class="op" id="2966520">)</span>&nbsp;<span class="op" id="2966522">&amp;</span>&nbsp;<span class="ident" id="2966524">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966532">fl</span>&nbsp;<span class="op" id="2966535">|=</span>&nbsp;<span class="ident" id="2966538">flag</span><span class="op" id="2966542">(</span><span class="ident" id="2966543">typ</span><span class="op" id="2966546">.</span><span class="ident" id="2966547">Kind</span><span class="op" id="2966551">(</span><span class="op" id="2966552">)</span><span class="op" id="2966553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966556">if</span>&nbsp;<span class="ident" id="2966559">ifaceIndir</span><span class="op" id="2966569">(</span><span class="ident" id="2966570">typ</span><span class="op" id="2966573">)</span>&nbsp;<span class="op" id="2966575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966579">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966625">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966665">c</span>&nbsp;<span class="op" id="2966667">:=</span>&nbsp;<span class="ident" id="2966670">unsafe_New</span><span class="op" id="2966680">(</span><span class="ident" id="2966681">typ</span><span class="op" id="2966684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966688">memmove</span><span class="op" id="2966695">(</span><span class="ident" id="2966696">c</span><span class="op" id="2966697">,</span>&nbsp;<span class="ident" id="2966699">e</span><span class="op" id="2966700">,</span>&nbsp;<span class="ident" id="2966702">typ</span><span class="op" id="2966705">.</span><span class="ident" id="2966706">size</span><span class="op" id="2966710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966714">return</span>&nbsp;<span class="ident" id="2966721">Value</span><span class="op" id="2966726">{</span><span class="ident" id="2966727">typ</span><span class="op" id="2966730">,</span>&nbsp;<span class="ident" id="2966732">c</span><span class="op" id="2966733">,</span>&nbsp;<span class="ident" id="2966735">fl</span>&nbsp;<span class="op" id="2966738">|</span>&nbsp;<span class="ident" id="2966740">flagIndir</span><span class="op" id="2966749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966752">}</span>&nbsp;<span class="keyword" id="2966754">else</span>&nbsp;<span class="op" id="2966759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966763">return</span>&nbsp;<span class="ident" id="2966770">Value</span><span class="op" id="2966775">{</span><span class="ident" id="2966776">typ</span><span class="op" id="2966779">,</span>&nbsp;<span class="op" id="2966781">*</span><span class="op" id="2966782">(</span><span class="op" id="2966783">*</span><span class="ident" id="2966784">unsafe</span><span class="op" id="2966790">.</span><span class="ident" id="2966791">Pointer</span><span class="op" id="2966798">)</span><span class="op" id="2966799">(</span><span class="ident" id="2966800">e</span><span class="op" id="2966801">)</span><span class="op" id="2966802">,</span>&nbsp;<span class="ident" id="2966804">fl</span><span class="op" id="2966806">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966809">}</span><br>
<span class="lineno"></span><span class="op" id="2966811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2966814">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2966885">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2966910">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2966947">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2967003">func</span>&nbsp;<span class="op" id="2967008">(</span><span class="ident" id="2967009">v</span>&nbsp;<span class="ident" id="2967011">Value</span><span class="op" id="2967016">)</span>&nbsp;<span class="ident" id="2967018">MapKeys</span><span class="op" id="2967025">(</span><span class="op" id="2967026">)</span>&nbsp;<span class="op" id="2967028">[</span><span class="op" id="2967029">]</span><span class="ident" id="2967030">Value</span>&nbsp;<span class="op" id="2967036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967039">v</span><span class="op" id="2967040">.</span><span class="ident" id="2967041">mustBe</span><span class="op" id="2967047">(</span><span class="ident" id="2967048">Map</span><span class="op" id="2967051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967054">tt</span>&nbsp;<span class="op" id="2967057">:=</span>&nbsp;<span class="op" id="2967060">(</span><span class="op" id="2967061">*</span><span class="ident" id="2967062">mapType</span><span class="op" id="2967069">)</span><span class="op" id="2967070">(</span><span class="ident" id="2967071">unsafe</span><span class="op" id="2967077">.</span><span class="ident" id="2967078">Pointer</span><span class="op" id="2967085">(</span><span class="ident" id="2967086">v</span><span class="op" id="2967087">.</span><span class="ident" id="2967088">typ</span><span class="op" id="2967091">)</span><span class="op" id="2967092">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967095">keyType</span>&nbsp;<span class="op" id="2967103">:=</span>&nbsp;<span class="ident" id="2967106">tt</span><span class="op" id="2967108">.</span><span class="ident" id="2967109">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967115">fl</span>&nbsp;<span class="op" id="2967118">:=</span>&nbsp;<span class="ident" id="2967121">v</span><span class="op" id="2967122">.</span><span class="ident" id="2967123">flag</span><span class="op" id="2967127">&amp;</span><span class="ident" id="2967128">flagRO</span>&nbsp;<span class="op" id="2967135">|</span>&nbsp;<span class="ident" id="2967137">flag</span><span class="op" id="2967141">(</span><span class="ident" id="2967142">keyType</span><span class="op" id="2967149">.</span><span class="ident" id="2967150">Kind</span><span class="op" id="2967154">(</span><span class="op" id="2967155">)</span><span class="op" id="2967156">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967160">m</span>&nbsp;<span class="op" id="2967162">:=</span>&nbsp;<span class="ident" id="2967165">v</span><span class="op" id="2967166">.</span><span class="ident" id="2967167">pointer</span><span class="op" id="2967174">(</span><span class="op" id="2967175">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967178">mlen</span>&nbsp;<span class="op" id="2967183">:=</span>&nbsp;<span class="builtintype" id="2967186">int</span><span class="op" id="2967189">(</span><span class="num" id="2967190">0</span><span class="op" id="2967191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967194">if</span>&nbsp;<span class="ident" id="2967197">m</span>&nbsp;<span class="op" id="2967199">!=</span>&nbsp;<span class="ident" id="2967202">nil</span>&nbsp;<span class="op" id="2967206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967210">mlen</span>&nbsp;<span class="op" id="2967215">=</span>&nbsp;<span class="ident" id="2967217">maplen</span><span class="op" id="2967223">(</span><span class="ident" id="2967224">m</span><span class="op" id="2967225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967231">it</span>&nbsp;<span class="op" id="2967234">:=</span>&nbsp;<span class="ident" id="2967237">mapiterinit</span><span class="op" id="2967248">(</span><span class="ident" id="2967249">v</span><span class="op" id="2967250">.</span><span class="ident" id="2967251">typ</span><span class="op" id="2967254">,</span>&nbsp;<span class="ident" id="2967256">m</span><span class="op" id="2967257">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967260">a</span>&nbsp;<span class="op" id="2967262">:=</span>&nbsp;<span class="builtinfunc" id="2967265">make</span><span class="op" id="2967269">(</span><span class="op" id="2967270">[</span><span class="op" id="2967271">]</span><span class="ident" id="2967272">Value</span><span class="op" id="2967277">,</span>&nbsp;<span class="ident" id="2967279">mlen</span><span class="op" id="2967283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967286">var</span>&nbsp;<span class="ident" id="2967290">i</span>&nbsp;<span class="builtintype" id="2967292">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967297">for</span>&nbsp;<span class="ident" id="2967301">i</span>&nbsp;<span class="op" id="2967303">=</span>&nbsp;<span class="num" id="2967305">0</span><span class="op" id="2967306">;</span>&nbsp;<span class="ident" id="2967308">i</span>&nbsp;<span class="op" id="2967310">&lt;</span>&nbsp;<span class="builtinfunc" id="2967312">len</span><span class="op" id="2967315">(</span><span class="ident" id="2967316">a</span><span class="op" id="2967317">)</span><span class="op" id="2967318">;</span>&nbsp;<span class="ident" id="2967320">i</span><span class="op" id="2967321">++</span>&nbsp;<span class="op" id="2967324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967328">key</span>&nbsp;<span class="op" id="2967332">:=</span>&nbsp;<span class="ident" id="2967335">mapiterkey</span><span class="op" id="2967345">(</span><span class="ident" id="2967346">it</span><span class="op" id="2967348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967352">if</span>&nbsp;<span class="ident" id="2967355">key</span>&nbsp;<span class="op" id="2967359">==</span>&nbsp;<span class="ident" id="2967362">nil</span>&nbsp;<span class="op" id="2967366">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967371">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967424">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967482">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967508">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967516">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967520">if</span>&nbsp;<span class="ident" id="2967523">ifaceIndir</span><span class="op" id="2967533">(</span><span class="ident" id="2967534">keyType</span><span class="op" id="2967541">)</span>&nbsp;<span class="op" id="2967543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967548">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2967595">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967636">c</span>&nbsp;<span class="op" id="2967638">:=</span>&nbsp;<span class="ident" id="2967641">unsafe_New</span><span class="op" id="2967651">(</span><span class="ident" id="2967652">keyType</span><span class="op" id="2967659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967664">memmove</span><span class="op" id="2967671">(</span><span class="ident" id="2967672">c</span><span class="op" id="2967673">,</span>&nbsp;<span class="ident" id="2967675">key</span><span class="op" id="2967678">,</span>&nbsp;<span class="ident" id="2967680">keyType</span><span class="op" id="2967687">.</span><span class="ident" id="2967688">size</span><span class="op" id="2967692">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967697">a</span><span class="op" id="2967698">[</span><span class="ident" id="2967699">i</span><span class="op" id="2967700">]</span>&nbsp;<span class="op" id="2967702">=</span>&nbsp;<span class="ident" id="2967704">Value</span><span class="op" id="2967709">{</span><span class="ident" id="2967710">keyType</span><span class="op" id="2967717">,</span>&nbsp;<span class="ident" id="2967719">c</span><span class="op" id="2967720">,</span>&nbsp;<span class="ident" id="2967722">fl</span>&nbsp;<span class="op" id="2967725">|</span>&nbsp;<span class="ident" id="2967727">flagIndir</span><span class="op" id="2967736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967740">}</span>&nbsp;<span class="keyword" id="2967742">else</span>&nbsp;<span class="op" id="2967747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967752">a</span><span class="op" id="2967753">[</span><span class="ident" id="2967754">i</span><span class="op" id="2967755">]</span>&nbsp;<span class="op" id="2967757">=</span>&nbsp;<span class="ident" id="2967759">Value</span><span class="op" id="2967764">{</span><span class="ident" id="2967765">keyType</span><span class="op" id="2967772">,</span>&nbsp;<span class="op" id="2967774">*</span><span class="op" id="2967775">(</span><span class="op" id="2967776">*</span><span class="ident" id="2967777">unsafe</span><span class="op" id="2967783">.</span><span class="ident" id="2967784">Pointer</span><span class="op" id="2967791">)</span><span class="op" id="2967792">(</span><span class="ident" id="2967793">key</span><span class="op" id="2967796">)</span><span class="op" id="2967797">,</span>&nbsp;<span class="ident" id="2967799">fl</span><span class="op" id="2967801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967809">mapiternext</span><span class="op" id="2967820">(</span><span class="ident" id="2967821">it</span><span class="op" id="2967823">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967829">return</span>&nbsp;<span class="ident" id="2967836">a</span><span class="op" id="2967837">[</span><span class="op" id="2967838">:</span><span class="ident" id="2967839">i</span><span class="op" id="2967840">]</span><br>
<span class="lineno"></span><span class="op" id="2967842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2967845">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2967914">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2967985">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2968057">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2968129">func</span>&nbsp;<span class="op" id="2968134">(</span><span class="ident" id="2968135">v</span>&nbsp;<span class="ident" id="2968137">Value</span><span class="op" id="2968142">)</span>&nbsp;<span class="ident" id="2968144">Method</span><span class="op" id="2968150">(</span><span class="ident" id="2968151">i</span>&nbsp;<span class="builtintype" id="2968153">int</span><span class="op" id="2968156">)</span>&nbsp;<span class="ident" id="2968158">Value</span>&nbsp;<span class="op" id="2968164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968167">if</span>&nbsp;<span class="ident" id="2968170">v</span><span class="op" id="2968171">.</span><span class="ident" id="2968172">typ</span>&nbsp;<span class="op" id="2968176">==</span>&nbsp;<span class="ident" id="2968179">nil</span>&nbsp;<span class="op" id="2968183">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2968187">panic</span><span class="op" id="2968192">(</span><span class="op" id="2968193">&amp;</span><span class="ident" id="2968194">ValueError</span><span class="op" id="2968204">{</span><span class="string" id="2968205">&#34;reflect.Value.Method&#34;</span><span class="op" id="2968227">,</span>&nbsp;<span class="ident" id="2968229">Invalid</span><span class="op" id="2968236">}</span><span class="op" id="2968237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968243">if</span>&nbsp;<span class="ident" id="2968246">v</span><span class="op" id="2968247">.</span><span class="ident" id="2968248">flag</span><span class="op" id="2968252">&amp;</span><span class="ident" id="2968253">flagMethod</span>&nbsp;<span class="op" id="2968264">!=</span>&nbsp;<span class="num" id="2968267">0</span>&nbsp;<span class="op" id="2968269">||</span>&nbsp;<span class="builtintype" id="2968272">uint</span><span class="op" id="2968276">(</span><span class="ident" id="2968277">i</span><span class="op" id="2968278">)</span>&nbsp;<span class="op" id="2968280">&gt;=</span>&nbsp;<span class="builtintype" id="2968283">uint</span><span class="op" id="2968287">(</span><span class="ident" id="2968288">v</span><span class="op" id="2968289">.</span><span class="ident" id="2968290">typ</span><span class="op" id="2968293">.</span><span class="ident" id="2968294">NumMethod</span><span class="op" id="2968303">(</span><span class="op" id="2968304">)</span><span class="op" id="2968305">)</span>&nbsp;<span class="op" id="2968307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2968311">panic</span><span class="op" id="2968316">(</span><span class="string" id="2968317">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2968353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968356">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968359">if</span>&nbsp;<span class="ident" id="2968362">v</span><span class="op" id="2968363">.</span><span class="ident" id="2968364">typ</span><span class="op" id="2968367">.</span><span class="ident" id="2968368">Kind</span><span class="op" id="2968372">(</span><span class="op" id="2968373">)</span>&nbsp;<span class="op" id="2968375">==</span>&nbsp;<span class="ident" id="2968378">Interface</span>&nbsp;<span class="op" id="2968388">&amp;&amp;</span>&nbsp;<span class="ident" id="2968391">v</span><span class="op" id="2968392">.</span><span class="ident" id="2968393">IsNil</span><span class="op" id="2968398">(</span><span class="op" id="2968399">)</span>&nbsp;<span class="op" id="2968401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2968405">panic</span><span class="op" id="2968410">(</span><span class="string" id="2968411">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2968451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968457">fl</span>&nbsp;<span class="op" id="2968460">:=</span>&nbsp;<span class="ident" id="2968463">v</span><span class="op" id="2968464">.</span><span class="ident" id="2968465">flag</span>&nbsp;<span class="op" id="2968470">&amp;</span>&nbsp;<span class="op" id="2968472">(</span><span class="ident" id="2968473">flagRO</span>&nbsp;<span class="op" id="2968480">|</span>&nbsp;<span class="ident" id="2968482">flagIndir</span><span class="op" id="2968491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968494">fl</span>&nbsp;<span class="op" id="2968497">|=</span>&nbsp;<span class="ident" id="2968500">flag</span><span class="op" id="2968504">(</span><span class="ident" id="2968505">Func</span><span class="op" id="2968509">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968512">fl</span>&nbsp;<span class="op" id="2968515">|=</span>&nbsp;<span class="ident" id="2968518">flag</span><span class="op" id="2968522">(</span><span class="ident" id="2968523">i</span><span class="op" id="2968524">)</span><span class="op" id="2968525">&lt;&lt;</span><span class="ident" id="2968527">flagMethodShift</span>&nbsp;<span class="op" id="2968543">|</span>&nbsp;<span class="ident" id="2968545">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968557">return</span>&nbsp;<span class="ident" id="2968564">Value</span><span class="op" id="2968569">{</span><span class="ident" id="2968570">v</span><span class="op" id="2968571">.</span><span class="ident" id="2968572">typ</span><span class="op" id="2968575">,</span>&nbsp;<span class="ident" id="2968577">v</span><span class="op" id="2968578">.</span><span class="ident" id="2968579">ptr</span><span class="op" id="2968582">,</span>&nbsp;<span class="ident" id="2968584">fl</span><span class="op" id="2968586">}</span><br>
<span class="lineno"></span><span class="op" id="2968588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2968591">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2968661">func</span>&nbsp;<span class="op" id="2968666">(</span><span class="ident" id="2968667">v</span>&nbsp;<span class="ident" id="2968669">Value</span><span class="op" id="2968674">)</span>&nbsp;<span class="ident" id="2968676">NumMethod</span><span class="op" id="2968685">(</span><span class="op" id="2968686">)</span>&nbsp;<span class="builtintype" id="2968688">int</span>&nbsp;<span class="op" id="2968692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968695">if</span>&nbsp;<span class="ident" id="2968698">v</span><span class="op" id="2968699">.</span><span class="ident" id="2968700">typ</span>&nbsp;<span class="op" id="2968704">==</span>&nbsp;<span class="ident" id="2968707">nil</span>&nbsp;<span class="op" id="2968711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2968715">panic</span><span class="op" id="2968720">(</span><span class="op" id="2968721">&amp;</span><span class="ident" id="2968722">ValueError</span><span class="op" id="2968732">{</span><span class="string" id="2968733">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2968758">,</span>&nbsp;<span class="ident" id="2968760">Invalid</span><span class="op" id="2968767">}</span><span class="op" id="2968768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968774">if</span>&nbsp;<span class="ident" id="2968777">v</span><span class="op" id="2968778">.</span><span class="ident" id="2968779">flag</span><span class="op" id="2968783">&amp;</span><span class="ident" id="2968784">flagMethod</span>&nbsp;<span class="op" id="2968795">!=</span>&nbsp;<span class="num" id="2968798">0</span>&nbsp;<span class="op" id="2968800">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968804">return</span>&nbsp;<span class="num" id="2968811">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2968814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2968817">return</span>&nbsp;<span class="ident" id="2968824">v</span><span class="op" id="2968825">.</span><span class="ident" id="2968826">typ</span><span class="op" id="2968829">.</span><span class="ident" id="2968830">NumMethod</span><span class="op" id="2968839">(</span><span class="op" id="2968840">)</span><br>
<span class="lineno"></span><span class="op" id="2968842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2968845">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2968914">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2968943">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2969014">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2969086">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2969139">func</span>&nbsp;<span class="op" id="2969144">(</span><span class="ident" id="2969145">v</span>&nbsp;<span class="ident" id="2969147">Value</span><span class="op" id="2969152">)</span>&nbsp;<span class="ident" id="2969154">MethodByName</span><span class="op" id="2969166">(</span><span class="ident" id="2969167">name</span>&nbsp;<span class="builtintype" id="2969172">string</span><span class="op" id="2969178">)</span>&nbsp;<span class="ident" id="2969180">Value</span>&nbsp;<span class="op" id="2969186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969189">if</span>&nbsp;<span class="ident" id="2969192">v</span><span class="op" id="2969193">.</span><span class="ident" id="2969194">typ</span>&nbsp;<span class="op" id="2969198">==</span>&nbsp;<span class="ident" id="2969201">nil</span>&nbsp;<span class="op" id="2969205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2969209">panic</span><span class="op" id="2969214">(</span><span class="op" id="2969215">&amp;</span><span class="ident" id="2969216">ValueError</span><span class="op" id="2969226">{</span><span class="string" id="2969227">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2969255">,</span>&nbsp;<span class="ident" id="2969257">Invalid</span><span class="op" id="2969264">}</span><span class="op" id="2969265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969271">if</span>&nbsp;<span class="ident" id="2969274">v</span><span class="op" id="2969275">.</span><span class="ident" id="2969276">flag</span><span class="op" id="2969280">&amp;</span><span class="ident" id="2969281">flagMethod</span>&nbsp;<span class="op" id="2969292">!=</span>&nbsp;<span class="num" id="2969295">0</span>&nbsp;<span class="op" id="2969297">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969301">return</span>&nbsp;<span class="ident" id="2969308">Value</span><span class="op" id="2969313">{</span><span class="op" id="2969314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969320">m</span><span class="op" id="2969321">,</span>&nbsp;<span class="ident" id="2969323">ok</span>&nbsp;<span class="op" id="2969326">:=</span>&nbsp;<span class="ident" id="2969329">v</span><span class="op" id="2969330">.</span><span class="ident" id="2969331">typ</span><span class="op" id="2969334">.</span><span class="ident" id="2969335">MethodByName</span><span class="op" id="2969347">(</span><span class="ident" id="2969348">name</span><span class="op" id="2969352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969355">if</span>&nbsp;<span class="op" id="2969358">!</span><span class="ident" id="2969359">ok</span>&nbsp;<span class="op" id="2969362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969366">return</span>&nbsp;<span class="ident" id="2969373">Value</span><span class="op" id="2969378">{</span><span class="op" id="2969379">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969385">return</span>&nbsp;<span class="ident" id="2969392">v</span><span class="op" id="2969393">.</span><span class="ident" id="2969394">Method</span><span class="op" id="2969400">(</span><span class="ident" id="2969401">m</span><span class="op" id="2969402">.</span><span class="ident" id="2969403">Index</span><span class="op" id="2969408">)</span><br>
<span class="lineno"></span><span class="op" id="2969410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2969413">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2969471">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2969511">func</span>&nbsp;<span class="op" id="2969516">(</span><span class="ident" id="2969517">v</span>&nbsp;<span class="ident" id="2969519">Value</span><span class="op" id="2969524">)</span>&nbsp;<span class="ident" id="2969526">NumField</span><span class="op" id="2969534">(</span><span class="op" id="2969535">)</span>&nbsp;<span class="builtintype" id="2969537">int</span>&nbsp;<span class="op" id="2969541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969544">v</span><span class="op" id="2969545">.</span><span class="ident" id="2969546">mustBe</span><span class="op" id="2969552">(</span><span class="ident" id="2969553">Struct</span><span class="op" id="2969559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969562">tt</span>&nbsp;<span class="op" id="2969565">:=</span>&nbsp;<span class="op" id="2969568">(</span><span class="op" id="2969569">*</span><span class="ident" id="2969570">structType</span><span class="op" id="2969580">)</span><span class="op" id="2969581">(</span><span class="ident" id="2969582">unsafe</span><span class="op" id="2969588">.</span><span class="ident" id="2969589">Pointer</span><span class="op" id="2969596">(</span><span class="ident" id="2969597">v</span><span class="op" id="2969598">.</span><span class="ident" id="2969599">typ</span><span class="op" id="2969602">)</span><span class="op" id="2969603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969606">return</span>&nbsp;<span class="builtinfunc" id="2969613">len</span><span class="op" id="2969616">(</span><span class="ident" id="2969617">tt</span><span class="op" id="2969619">.</span><span class="ident" id="2969620">fields</span><span class="op" id="2969626">)</span><br>
<span class="lineno">1120</span><span class="op" id="2969628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2969631">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2969718">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2969775">func</span>&nbsp;<span class="op" id="2969780">(</span><span class="ident" id="2969781">v</span>&nbsp;<span class="ident" id="2969783">Value</span><span class="op" id="2969788">)</span>&nbsp;<span class="ident" id="2969790">OverflowComplex</span><span class="op" id="2969805">(</span><span class="ident" id="2969806">x</span>&nbsp;<span class="builtintype" id="2969808">complex128</span><span class="op" id="2969818">)</span>&nbsp;<span class="builtintype" id="2969820">bool</span>&nbsp;<span class="op" id="2969825">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969828">k</span>&nbsp;<span class="op" id="2969830">:=</span>&nbsp;<span class="ident" id="2969833">v</span><span class="op" id="2969834">.</span><span class="ident" id="2969835">kind</span><span class="op" id="2969839">(</span><span class="op" id="2969840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969843">switch</span>&nbsp;<span class="ident" id="2969850">k</span>&nbsp;<span class="op" id="2969852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969855">case</span>&nbsp;<span class="ident" id="2969860">Complex64</span><span class="op" id="2969869">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969873">return</span>&nbsp;<span class="ident" id="2969880">overflowFloat32</span><span class="op" id="2969895">(</span><span class="builtinfunc" id="2969896">real</span><span class="op" id="2969900">(</span><span class="ident" id="2969901">x</span><span class="op" id="2969902">)</span><span class="op" id="2969903">)</span>&nbsp;<span class="op" id="2969905">||</span>&nbsp;<span class="ident" id="2969908">overflowFloat32</span><span class="op" id="2969923">(</span><span class="builtinfunc" id="2969924">imag</span><span class="op" id="2969928">(</span><span class="ident" id="2969929">x</span><span class="op" id="2969930">)</span><span class="op" id="2969931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969934">case</span>&nbsp;<span class="ident" id="2969939">Complex128</span><span class="op" id="2969949">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969953">return</span>&nbsp;<span class="builtintype" id="2969960">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2969970">panic</span><span class="op" id="2969975">(</span><span class="op" id="2969976">&amp;</span><span class="ident" id="2969977">ValueError</span><span class="op" id="2969987">{</span><span class="string" id="2969988">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2970019">,</span>&nbsp;<span class="ident" id="2970021">v</span><span class="op" id="2970022">.</span><span class="ident" id="2970023">kind</span><span class="op" id="2970027">(</span><span class="op" id="2970028">)</span><span class="op" id="2970029">}</span><span class="op" id="2970030">)</span><br>
<span class="lineno"></span><span class="op" id="2970032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2970035">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2970117">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2970169">func</span>&nbsp;<span class="op" id="2970174">(</span><span class="ident" id="2970175">v</span>&nbsp;<span class="ident" id="2970177">Value</span><span class="op" id="2970182">)</span>&nbsp;<span class="ident" id="2970184">OverflowFloat</span><span class="op" id="2970197">(</span><span class="ident" id="2970198">x</span>&nbsp;<span class="builtintype" id="2970200">float64</span><span class="op" id="2970207">)</span>&nbsp;<span class="builtintype" id="2970209">bool</span>&nbsp;<span class="op" id="2970214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970217">k</span>&nbsp;<span class="op" id="2970219">:=</span>&nbsp;<span class="ident" id="2970222">v</span><span class="op" id="2970223">.</span><span class="ident" id="2970224">kind</span><span class="op" id="2970228">(</span><span class="op" id="2970229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970232">switch</span>&nbsp;<span class="ident" id="2970239">k</span>&nbsp;<span class="op" id="2970241">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970244">case</span>&nbsp;<span class="ident" id="2970249">Float32</span><span class="op" id="2970256">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970260">return</span>&nbsp;<span class="ident" id="2970267">overflowFloat32</span><span class="op" id="2970282">(</span><span class="ident" id="2970283">x</span><span class="op" id="2970284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970287">case</span>&nbsp;<span class="ident" id="2970292">Float64</span><span class="op" id="2970299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970303">return</span>&nbsp;<span class="builtintype" id="2970310">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970317">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2970320">panic</span><span class="op" id="2970325">(</span><span class="op" id="2970326">&amp;</span><span class="ident" id="2970327">ValueError</span><span class="op" id="2970337">{</span><span class="string" id="2970338">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2970367">,</span>&nbsp;<span class="ident" id="2970369">v</span><span class="op" id="2970370">.</span><span class="ident" id="2970371">kind</span><span class="op" id="2970375">(</span><span class="op" id="2970376">)</span><span class="op" id="2970377">}</span><span class="op" id="2970378">)</span><br>
<span class="lineno"></span><span class="op" id="2970380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2970383">func</span>&nbsp;<span class="ident" id="2970388">overflowFloat32</span><span class="op" id="2970403">(</span><span class="ident" id="2970404">x</span>&nbsp;<span class="builtintype" id="2970406">float64</span><span class="op" id="2970413">)</span>&nbsp;<span class="builtintype" id="2970415">bool</span>&nbsp;<span class="op" id="2970420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970423">if</span>&nbsp;<span class="ident" id="2970426">x</span>&nbsp;<span class="op" id="2970428">&lt;</span>&nbsp;<span class="num" id="2970430">0</span>&nbsp;<span class="op" id="2970432">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970436">x</span>&nbsp;<span class="op" id="2970438">=</span>&nbsp;<span class="op" id="2970440">-</span><span class="ident" id="2970441">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970447">return</span>&nbsp;<span class="ident" id="2970454">math</span><span class="op" id="2970458">.</span><span class="ident" id="2970459">MaxFloat32</span>&nbsp;<span class="op" id="2970470">&lt;</span>&nbsp;<span class="ident" id="2970472">x</span>&nbsp;<span class="op" id="2970474">&amp;&amp;</span>&nbsp;<span class="ident" id="2970477">x</span>&nbsp;<span class="op" id="2970479">&lt;=</span>&nbsp;<span class="ident" id="2970482">math</span><span class="op" id="2970486">.</span><span class="ident" id="2970487">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2970498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2970501">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2970579">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2970646">func</span>&nbsp;<span class="op" id="2970651">(</span><span class="ident" id="2970652">v</span>&nbsp;<span class="ident" id="2970654">Value</span><span class="op" id="2970659">)</span>&nbsp;<span class="ident" id="2970661">OverflowInt</span><span class="op" id="2970672">(</span><span class="ident" id="2970673">x</span>&nbsp;<span class="ident" id="2970675">int64</span><span class="op" id="2970680">)</span>&nbsp;<span class="builtintype" id="2970682">bool</span>&nbsp;<span class="op" id="2970687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970690">k</span>&nbsp;<span class="op" id="2970692">:=</span>&nbsp;<span class="ident" id="2970695">v</span><span class="op" id="2970696">.</span><span class="ident" id="2970697">kind</span><span class="op" id="2970701">(</span><span class="op" id="2970702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970705">switch</span>&nbsp;<span class="ident" id="2970712">k</span>&nbsp;<span class="op" id="2970714">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970717">case</span>&nbsp;<span class="ident" id="2970722">Int</span><span class="op" id="2970725">,</span>&nbsp;<span class="ident" id="2970727">Int8</span><span class="op" id="2970731">,</span>&nbsp;<span class="ident" id="2970733">Int16</span><span class="op" id="2970738">,</span>&nbsp;<span class="ident" id="2970740">Int32</span><span class="op" id="2970745">,</span>&nbsp;<span class="ident" id="2970747">Int64</span><span class="op" id="2970752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970756">bitSize</span>&nbsp;<span class="op" id="2970764">:=</span>&nbsp;<span class="ident" id="2970767">v</span><span class="op" id="2970768">.</span><span class="ident" id="2970769">typ</span><span class="op" id="2970772">.</span><span class="ident" id="2970773">size</span>&nbsp;<span class="op" id="2970778">*</span>&nbsp;<span class="num" id="2970780">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970784">trunc</span>&nbsp;<span class="op" id="2970790">:=</span>&nbsp;<span class="op" id="2970793">(</span><span class="ident" id="2970794">x</span>&nbsp;<span class="op" id="2970796">&lt;&lt;</span>&nbsp;<span class="op" id="2970799">(</span><span class="num" id="2970800">64</span>&nbsp;<span class="op" id="2970803">-</span>&nbsp;<span class="ident" id="2970805">bitSize</span><span class="op" id="2970812">)</span><span class="op" id="2970813">)</span>&nbsp;<span class="op" id="2970815">&gt;&gt;</span>&nbsp;<span class="op" id="2970818">(</span><span class="num" id="2970819">64</span>&nbsp;<span class="op" id="2970822">-</span>&nbsp;<span class="ident" id="2970824">bitSize</span><span class="op" id="2970831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970835">return</span>&nbsp;<span class="ident" id="2970842">x</span>&nbsp;<span class="op" id="2970844">!=</span>&nbsp;<span class="ident" id="2970847">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970854">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2970857">panic</span><span class="op" id="2970862">(</span><span class="op" id="2970863">&amp;</span><span class="ident" id="2970864">ValueError</span><span class="op" id="2970874">{</span><span class="string" id="2970875">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2970902">,</span>&nbsp;<span class="ident" id="2970904">v</span><span class="op" id="2970905">.</span><span class="ident" id="2970906">kind</span><span class="op" id="2970910">(</span><span class="op" id="2970911">)</span><span class="op" id="2970912">}</span><span class="op" id="2970913">)</span><br>
<span class="lineno"></span><span class="op" id="2970915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2970918">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2970998">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2971079">func</span>&nbsp;<span class="op" id="2971084">(</span><span class="ident" id="2971085">v</span>&nbsp;<span class="ident" id="2971087">Value</span><span class="op" id="2971092">)</span>&nbsp;<span class="ident" id="2971094">OverflowUint</span><span class="op" id="2971106">(</span><span class="ident" id="2971107">x</span>&nbsp;<span class="ident" id="2971109">uint64</span><span class="op" id="2971115">)</span>&nbsp;<span class="builtintype" id="2971117">bool</span>&nbsp;<span class="op" id="2971122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971125">k</span>&nbsp;<span class="op" id="2971127">:=</span>&nbsp;<span class="ident" id="2971130">v</span><span class="op" id="2971131">.</span><span class="ident" id="2971132">kind</span><span class="op" id="2971136">(</span><span class="op" id="2971137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971140">switch</span>&nbsp;<span class="ident" id="2971147">k</span>&nbsp;<span class="op" id="2971149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971152">case</span>&nbsp;<span class="ident" id="2971157">Uint</span><span class="op" id="2971161">,</span>&nbsp;<span class="ident" id="2971163">Uintptr</span><span class="op" id="2971170">,</span>&nbsp;<span class="ident" id="2971172">Uint8</span><span class="op" id="2971177">,</span>&nbsp;<span class="ident" id="2971179">Uint16</span><span class="op" id="2971185">,</span>&nbsp;<span class="ident" id="2971187">Uint32</span><span class="op" id="2971193">,</span>&nbsp;<span class="ident" id="2971195">Uint64</span><span class="op" id="2971201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971205">bitSize</span>&nbsp;<span class="op" id="2971213">:=</span>&nbsp;<span class="ident" id="2971216">v</span><span class="op" id="2971217">.</span><span class="ident" id="2971218">typ</span><span class="op" id="2971221">.</span><span class="ident" id="2971222">size</span>&nbsp;<span class="op" id="2971227">*</span>&nbsp;<span class="num" id="2971229">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971233">trunc</span>&nbsp;<span class="op" id="2971239">:=</span>&nbsp;<span class="op" id="2971242">(</span><span class="ident" id="2971243">x</span>&nbsp;<span class="op" id="2971245">&lt;&lt;</span>&nbsp;<span class="op" id="2971248">(</span><span class="num" id="2971249">64</span>&nbsp;<span class="op" id="2971252">-</span>&nbsp;<span class="ident" id="2971254">bitSize</span><span class="op" id="2971261">)</span><span class="op" id="2971262">)</span>&nbsp;<span class="op" id="2971264">&gt;&gt;</span>&nbsp;<span class="op" id="2971267">(</span><span class="num" id="2971268">64</span>&nbsp;<span class="op" id="2971271">-</span>&nbsp;<span class="ident" id="2971273">bitSize</span><span class="op" id="2971280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971284">return</span>&nbsp;<span class="ident" id="2971291">x</span>&nbsp;<span class="op" id="2971293">!=</span>&nbsp;<span class="ident" id="2971296">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2971306">panic</span><span class="op" id="2971311">(</span><span class="op" id="2971312">&amp;</span><span class="ident" id="2971313">ValueError</span><span class="op" id="2971323">{</span><span class="string" id="2971324">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2971352">,</span>&nbsp;<span class="ident" id="2971354">v</span><span class="op" id="2971355">.</span><span class="ident" id="2971356">kind</span><span class="op" id="2971360">(</span><span class="op" id="2971361">)</span><span class="op" id="2971362">}</span><span class="op" id="2971363">)</span><br>
<span class="lineno"></span><span class="op" id="2971365">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2971368">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2971411">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2971467">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2971519">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2971571">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2971650">//</span><br>
<span class="lineno"></span><span class="comment" id="2971653">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2971715">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2971773">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2971833">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2971889">//</span><br>
<span class="lineno"></span><span class="comment" id="2971892">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2971954">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2972019">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2972093">func</span>&nbsp;<span class="op" id="2972098">(</span><span class="ident" id="2972099">v</span>&nbsp;<span class="ident" id="2972101">Value</span><span class="op" id="2972106">)</span>&nbsp;<span class="ident" id="2972108">Pointer</span><span class="op" id="2972115">(</span><span class="op" id="2972116">)</span>&nbsp;<span class="builtintype" id="2972118">uintptr</span>&nbsp;<span class="op" id="2972126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972129">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972149">k</span>&nbsp;<span class="op" id="2972151">:=</span>&nbsp;<span class="ident" id="2972154">v</span><span class="op" id="2972155">.</span><span class="ident" id="2972156">kind</span><span class="op" id="2972160">(</span><span class="op" id="2972161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972164">switch</span>&nbsp;<span class="ident" id="2972171">k</span>&nbsp;<span class="op" id="2972173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972176">case</span>&nbsp;<span class="ident" id="2972181">Chan</span><span class="op" id="2972185">,</span>&nbsp;<span class="ident" id="2972187">Map</span><span class="op" id="2972190">,</span>&nbsp;<span class="ident" id="2972192">Ptr</span><span class="op" id="2972195">,</span>&nbsp;<span class="ident" id="2972197">UnsafePointer</span><span class="op" id="2972210">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972214">return</span>&nbsp;<span class="builtintype" id="2972221">uintptr</span><span class="op" id="2972228">(</span><span class="ident" id="2972229">v</span><span class="op" id="2972230">.</span><span class="ident" id="2972231">pointer</span><span class="op" id="2972238">(</span><span class="op" id="2972239">)</span><span class="op" id="2972240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972243">case</span>&nbsp;<span class="ident" id="2972248">Func</span><span class="op" id="2972252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972256">if</span>&nbsp;<span class="ident" id="2972259">v</span><span class="op" id="2972260">.</span><span class="ident" id="2972261">flag</span><span class="op" id="2972265">&amp;</span><span class="ident" id="2972266">flagMethod</span>&nbsp;<span class="op" id="2972277">!=</span>&nbsp;<span class="num" id="2972280">0</span>&nbsp;<span class="op" id="2972282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972287">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972345">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972405">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972471">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972536">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972599">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972644">f</span>&nbsp;<span class="op" id="2972646">:=</span>&nbsp;<span class="ident" id="2972649">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972668">return</span>&nbsp;<span class="op" id="2972675">*</span><span class="op" id="2972676">*</span><span class="op" id="2972677">(</span><span class="op" id="2972678">*</span><span class="op" id="2972679">*</span><span class="builtintype" id="2972680">uintptr</span><span class="op" id="2972687">)</span><span class="op" id="2972688">(</span><span class="ident" id="2972689">unsafe</span><span class="op" id="2972695">.</span><span class="ident" id="2972696">Pointer</span><span class="op" id="2972703">(</span><span class="op" id="2972704">&amp;</span><span class="ident" id="2972705">f</span><span class="op" id="2972706">)</span><span class="op" id="2972707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972715">p</span>&nbsp;<span class="op" id="2972717">:=</span>&nbsp;<span class="ident" id="2972720">v</span><span class="op" id="2972721">.</span><span class="ident" id="2972722">pointer</span><span class="op" id="2972729">(</span><span class="op" id="2972730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972734">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972780">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972826">if</span>&nbsp;<span class="ident" id="2972829">p</span>&nbsp;<span class="op" id="2972831">!=</span>&nbsp;<span class="ident" id="2972834">nil</span>&nbsp;<span class="op" id="2972838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972843">p</span>&nbsp;<span class="op" id="2972845">=</span>&nbsp;<span class="op" id="2972847">*</span><span class="op" id="2972848">(</span><span class="op" id="2972849">*</span><span class="ident" id="2972850">unsafe</span><span class="op" id="2972856">.</span><span class="ident" id="2972857">Pointer</span><span class="op" id="2972864">)</span><span class="op" id="2972865">(</span><span class="ident" id="2972866">p</span><span class="op" id="2972867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972875">return</span>&nbsp;<span class="builtintype" id="2972882">uintptr</span><span class="op" id="2972889">(</span><span class="ident" id="2972890">p</span><span class="op" id="2972891">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972895">case</span>&nbsp;<span class="ident" id="2972900">Slice</span><span class="op" id="2972905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972909">return</span>&nbsp;<span class="op" id="2972916">(</span><span class="op" id="2972917">*</span><span class="ident" id="2972918">SliceHeader</span><span class="op" id="2972929">)</span><span class="op" id="2972930">(</span><span class="ident" id="2972931">v</span><span class="op" id="2972932">.</span><span class="ident" id="2972933">ptr</span><span class="op" id="2972936">)</span><span class="op" id="2972937">.</span><span class="ident" id="2972938">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2972947">panic</span><span class="op" id="2972952">(</span><span class="op" id="2972953">&amp;</span><span class="ident" id="2972954">ValueError</span><span class="op" id="2972964">{</span><span class="string" id="2972965">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2972988">,</span>&nbsp;<span class="ident" id="2972990">v</span><span class="op" id="2972991">.</span><span class="ident" id="2972992">kind</span><span class="op" id="2972996">(</span><span class="op" id="2972997">)</span><span class="op" id="2972998">}</span><span class="op" id="2972999">)</span><br>
<span class="lineno"></span><span class="op" id="2973001">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2973004">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2973061">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2973099">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2973145">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2973214">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2973301">func</span>&nbsp;<span class="op" id="2973306">(</span><span class="ident" id="2973307">v</span>&nbsp;<span class="ident" id="2973309">Value</span><span class="op" id="2973314">)</span>&nbsp;<span class="ident" id="2973316">Recv</span><span class="op" id="2973320">(</span><span class="op" id="2973321">)</span>&nbsp;<span class="op" id="2973323">(</span><span class="ident" id="2973324">x</span>&nbsp;<span class="ident" id="2973326">Value</span><span class="op" id="2973331">,</span>&nbsp;<span class="ident" id="2973333">ok</span>&nbsp;<span class="builtintype" id="2973336">bool</span><span class="op" id="2973340">)</span>&nbsp;<span class="op" id="2973342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973345">v</span><span class="op" id="2973346">.</span><span class="ident" id="2973347">mustBe</span><span class="op" id="2973353">(</span><span class="ident" id="2973354">Chan</span><span class="op" id="2973358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973361">v</span><span class="op" id="2973362">.</span><span class="ident" id="2973363">mustBeExported</span><span class="op" id="2973377">(</span><span class="op" id="2973378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973381">return</span>&nbsp;<span class="ident" id="2973388">v</span><span class="op" id="2973389">.</span><span class="ident" id="2973390">recv</span><span class="op" id="2973394">(</span><span class="builtintype" id="2973395">false</span><span class="op" id="2973400">)</span><br>
<span class="lineno">1235</span><span class="op" id="2973402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2973405">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2973451">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2973482">func</span>&nbsp;<span class="op" id="2973487">(</span><span class="ident" id="2973488">v</span>&nbsp;<span class="ident" id="2973490">Value</span><span class="op" id="2973495">)</span>&nbsp;<span class="ident" id="2973497">recv</span><span class="op" id="2973501">(</span><span class="ident" id="2973502">nb</span>&nbsp;<span class="builtintype" id="2973505">bool</span><span class="op" id="2973509">)</span>&nbsp;<span class="op" id="2973511">(</span><span class="ident" id="2973512">val</span>&nbsp;<span class="ident" id="2973516">Value</span><span class="op" id="2973521">,</span>&nbsp;<span class="ident" id="2973523">ok</span>&nbsp;<span class="builtintype" id="2973526">bool</span><span class="op" id="2973530">)</span>&nbsp;<span class="op" id="2973532">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973535">tt</span>&nbsp;<span class="op" id="2973538">:=</span>&nbsp;<span class="op" id="2973541">(</span><span class="op" id="2973542">*</span><span class="ident" id="2973543">chanType</span><span class="op" id="2973551">)</span><span class="op" id="2973552">(</span><span class="ident" id="2973553">unsafe</span><span class="op" id="2973559">.</span><span class="ident" id="2973560">Pointer</span><span class="op" id="2973567">(</span><span class="ident" id="2973568">v</span><span class="op" id="2973569">.</span><span class="ident" id="2973570">typ</span><span class="op" id="2973573">)</span><span class="op" id="2973574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973577">if</span>&nbsp;<span class="ident" id="2973580">ChanDir</span><span class="op" id="2973587">(</span><span class="ident" id="2973588">tt</span><span class="op" id="2973590">.</span><span class="ident" id="2973591">dir</span><span class="op" id="2973594">)</span><span class="op" id="2973595">&amp;</span><span class="ident" id="2973596">RecvDir</span>&nbsp;<span class="op" id="2973604">==</span>&nbsp;<span class="num" id="2973607">0</span>&nbsp;<span class="op" id="2973609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2973613">panic</span><span class="op" id="2973618">(</span><span class="string" id="2973619">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2973655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973661">t</span>&nbsp;<span class="op" id="2973663">:=</span>&nbsp;<span class="ident" id="2973666">tt</span><span class="op" id="2973668">.</span><span class="ident" id="2973669">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973675">val</span>&nbsp;<span class="op" id="2973679">=</span>&nbsp;<span class="ident" id="2973681">Value</span><span class="op" id="2973686">{</span><span class="ident" id="2973687">t</span><span class="op" id="2973688">,</span>&nbsp;<span class="ident" id="2973690">nil</span><span class="op" id="2973693">,</span>&nbsp;<span class="ident" id="2973695">flag</span><span class="op" id="2973699">(</span><span class="ident" id="2973700">t</span><span class="op" id="2973701">.</span><span class="ident" id="2973702">Kind</span><span class="op" id="2973706">(</span><span class="op" id="2973707">)</span><span class="op" id="2973708">)</span><span class="op" id="2973709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973712">var</span>&nbsp;<span class="ident" id="2973716">p</span>&nbsp;<span class="ident" id="2973718">unsafe</span><span class="op" id="2973724">.</span><span class="ident" id="2973725">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973734">if</span>&nbsp;<span class="ident" id="2973737">ifaceIndir</span><span class="op" id="2973747">(</span><span class="ident" id="2973748">t</span><span class="op" id="2973749">)</span>&nbsp;<span class="op" id="2973751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973755">p</span>&nbsp;<span class="op" id="2973757">=</span>&nbsp;<span class="ident" id="2973759">unsafe_New</span><span class="op" id="2973769">(</span><span class="ident" id="2973770">t</span><span class="op" id="2973771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973775">val</span><span class="op" id="2973778">.</span><span class="ident" id="2973779">ptr</span>&nbsp;<span class="op" id="2973783">=</span>&nbsp;<span class="ident" id="2973785">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973789">val</span><span class="op" id="2973792">.</span><span class="ident" id="2973793">flag</span>&nbsp;<span class="op" id="2973798">|=</span>&nbsp;<span class="ident" id="2973801">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973812">}</span>&nbsp;<span class="keyword" id="2973814">else</span>&nbsp;<span class="op" id="2973819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973823">p</span>&nbsp;<span class="op" id="2973825">=</span>&nbsp;<span class="ident" id="2973827">unsafe</span><span class="op" id="2973833">.</span><span class="ident" id="2973834">Pointer</span><span class="op" id="2973841">(</span><span class="op" id="2973842">&amp;</span><span class="ident" id="2973843">val</span><span class="op" id="2973846">.</span><span class="ident" id="2973847">ptr</span><span class="op" id="2973850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973856">selected</span><span class="op" id="2973864">,</span>&nbsp;<span class="ident" id="2973866">ok</span>&nbsp;<span class="op" id="2973869">:=</span>&nbsp;<span class="ident" id="2973872">chanrecv</span><span class="op" id="2973880">(</span><span class="ident" id="2973881">v</span><span class="op" id="2973882">.</span><span class="ident" id="2973883">typ</span><span class="op" id="2973886">,</span>&nbsp;<span class="ident" id="2973888">v</span><span class="op" id="2973889">.</span><span class="ident" id="2973890">pointer</span><span class="op" id="2973897">(</span><span class="op" id="2973898">)</span><span class="op" id="2973899">,</span>&nbsp;<span class="ident" id="2973901">nb</span><span class="op" id="2973903">,</span>&nbsp;<span class="ident" id="2973905">p</span><span class="op" id="2973906">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973909">if</span>&nbsp;<span class="op" id="2973912">!</span><span class="ident" id="2973913">selected</span>&nbsp;<span class="op" id="2973922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2973926">val</span>&nbsp;<span class="op" id="2973930">=</span>&nbsp;<span class="ident" id="2973932">Value</span><span class="op" id="2973937">{</span><span class="op" id="2973938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2973941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2973944">return</span><br>
<span class="lineno"></span><span class="op" id="2973951">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2973954">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2973988">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2974082">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2974155">func</span>&nbsp;<span class="op" id="2974160">(</span><span class="ident" id="2974161">v</span>&nbsp;<span class="ident" id="2974163">Value</span><span class="op" id="2974168">)</span>&nbsp;<span class="ident" id="2974170">Send</span><span class="op" id="2974174">(</span><span class="ident" id="2974175">x</span>&nbsp;<span class="ident" id="2974177">Value</span><span class="op" id="2974182">)</span>&nbsp;<span class="op" id="2974184">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974187">v</span><span class="op" id="2974188">.</span><span class="ident" id="2974189">mustBe</span><span class="op" id="2974195">(</span><span class="ident" id="2974196">Chan</span><span class="op" id="2974200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974203">v</span><span class="op" id="2974204">.</span><span class="ident" id="2974205">mustBeExported</span><span class="op" id="2974219">(</span><span class="op" id="2974220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974223">v</span><span class="op" id="2974224">.</span><span class="ident" id="2974225">send</span><span class="op" id="2974229">(</span><span class="ident" id="2974230">x</span><span class="op" id="2974231">,</span>&nbsp;<span class="builtintype" id="2974233">false</span><span class="op" id="2974238">)</span><br>
<span class="lineno"></span><span class="op" id="2974240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2974243">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2974284">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2974315">func</span>&nbsp;<span class="op" id="2974320">(</span><span class="ident" id="2974321">v</span>&nbsp;<span class="ident" id="2974323">Value</span><span class="op" id="2974328">)</span>&nbsp;<span class="ident" id="2974330">send</span><span class="op" id="2974334">(</span><span class="ident" id="2974335">x</span>&nbsp;<span class="ident" id="2974337">Value</span><span class="op" id="2974342">,</span>&nbsp;<span class="ident" id="2974344">nb</span>&nbsp;<span class="builtintype" id="2974347">bool</span><span class="op" id="2974351">)</span>&nbsp;<span class="op" id="2974353">(</span><span class="ident" id="2974354">selected</span>&nbsp;<span class="builtintype" id="2974363">bool</span><span class="op" id="2974367">)</span>&nbsp;<span class="op" id="2974369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974372">tt</span>&nbsp;<span class="op" id="2974375">:=</span>&nbsp;<span class="op" id="2974378">(</span><span class="op" id="2974379">*</span><span class="ident" id="2974380">chanType</span><span class="op" id="2974388">)</span><span class="op" id="2974389">(</span><span class="ident" id="2974390">unsafe</span><span class="op" id="2974396">.</span><span class="ident" id="2974397">Pointer</span><span class="op" id="2974404">(</span><span class="ident" id="2974405">v</span><span class="op" id="2974406">.</span><span class="ident" id="2974407">typ</span><span class="op" id="2974410">)</span><span class="op" id="2974411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974414">if</span>&nbsp;<span class="ident" id="2974417">ChanDir</span><span class="op" id="2974424">(</span><span class="ident" id="2974425">tt</span><span class="op" id="2974427">.</span><span class="ident" id="2974428">dir</span><span class="op" id="2974431">)</span><span class="op" id="2974432">&amp;</span><span class="ident" id="2974433">SendDir</span>&nbsp;<span class="op" id="2974441">==</span>&nbsp;<span class="num" id="2974444">0</span>&nbsp;<span class="op" id="2974446">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2974450">panic</span><span class="op" id="2974455">(</span><span class="string" id="2974456">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2974492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974498">x</span><span class="op" id="2974499">.</span><span class="ident" id="2974500">mustBeExported</span><span class="op" id="2974514">(</span><span class="op" id="2974515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974518">x</span>&nbsp;<span class="op" id="2974520">=</span>&nbsp;<span class="ident" id="2974522">x</span><span class="op" id="2974523">.</span><span class="ident" id="2974524">assignTo</span><span class="op" id="2974532">(</span><span class="string" id="2974533">&#34;reflect.Value.Send&#34;</span><span class="op" id="2974553">,</span>&nbsp;<span class="ident" id="2974555">tt</span><span class="op" id="2974557">.</span><span class="ident" id="2974558">elem</span><span class="op" id="2974562">,</span>&nbsp;<span class="ident" id="2974564">nil</span><span class="op" id="2974567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974570">var</span>&nbsp;<span class="ident" id="2974574">p</span>&nbsp;<span class="ident" id="2974576">unsafe</span><span class="op" id="2974582">.</span><span class="ident" id="2974583">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974592">if</span>&nbsp;<span class="ident" id="2974595">x</span><span class="op" id="2974596">.</span><span class="ident" id="2974597">flag</span><span class="op" id="2974601">&amp;</span><span class="ident" id="2974602">flagIndir</span>&nbsp;<span class="op" id="2974612">!=</span>&nbsp;<span class="num" id="2974615">0</span>&nbsp;<span class="op" id="2974617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974621">p</span>&nbsp;<span class="op" id="2974623">=</span>&nbsp;<span class="ident" id="2974625">x</span><span class="op" id="2974626">.</span><span class="ident" id="2974627">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974632">}</span>&nbsp;<span class="keyword" id="2974634">else</span>&nbsp;<span class="op" id="2974639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974643">p</span>&nbsp;<span class="op" id="2974645">=</span>&nbsp;<span class="ident" id="2974647">unsafe</span><span class="op" id="2974653">.</span><span class="ident" id="2974654">Pointer</span><span class="op" id="2974661">(</span><span class="op" id="2974662">&amp;</span><span class="ident" id="2974663">x</span><span class="op" id="2974664">.</span><span class="ident" id="2974665">ptr</span><span class="op" id="2974668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2974671">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974674">return</span>&nbsp;<span class="ident" id="2974681">chansend</span><span class="op" id="2974689">(</span><span class="ident" id="2974690">v</span><span class="op" id="2974691">.</span><span class="ident" id="2974692">typ</span><span class="op" id="2974695">,</span>&nbsp;<span class="ident" id="2974697">v</span><span class="op" id="2974698">.</span><span class="ident" id="2974699">pointer</span><span class="op" id="2974706">(</span><span class="op" id="2974707">)</span><span class="op" id="2974708">,</span>&nbsp;<span class="ident" id="2974710">p</span><span class="op" id="2974711">,</span>&nbsp;<span class="ident" id="2974713">nb</span><span class="op" id="2974715">)</span><br>
<span class="lineno"></span><span class="op" id="2974717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2974720">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2974753">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2974791">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2974846">func</span>&nbsp;<span class="op" id="2974851">(</span><span class="ident" id="2974852">v</span>&nbsp;<span class="ident" id="2974854">Value</span><span class="op" id="2974859">)</span>&nbsp;<span class="ident" id="2974861">Set</span><span class="op" id="2974864">(</span><span class="ident" id="2974865">x</span>&nbsp;<span class="ident" id="2974867">Value</span><span class="op" id="2974872">)</span>&nbsp;<span class="op" id="2974874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974877">v</span><span class="op" id="2974878">.</span><span class="ident" id="2974879">mustBeAssignable</span><span class="op" id="2974895">(</span><span class="op" id="2974896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2974899">x</span><span class="op" id="2974900">.</span><span class="ident" id="2974901">mustBeExported</span><span class="op" id="2974915">(</span><span class="op" id="2974916">)</span>&nbsp;<span class="comment" id="2974918">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974951">var</span>&nbsp;<span class="ident" id="2974955">target</span>&nbsp;<span class="ident" id="2974962">unsafe</span><span class="op" id="2974968">.</span><span class="ident" id="2974969">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2974978">if</span>&nbsp;<span class="ident" id="2974981">v</span><span class="op" id="2974982">.</span><span class="ident" id="2974983">kind</span><span class="op" id="2974987">(</span><span class="op" id="2974988">)</span>&nbsp;<span class="op" id="2974990">==</span>&nbsp;<span class="ident" id="2974993">Interface</span>&nbsp;<span class="op" id="2975003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975007">target</span>&nbsp;<span class="op" id="2975014">=</span>&nbsp;<span class="ident" id="2975016">v</span><span class="op" id="2975017">.</span><span class="ident" id="2975018">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975026">x</span>&nbsp;<span class="op" id="2975028">=</span>&nbsp;<span class="ident" id="2975030">x</span><span class="op" id="2975031">.</span><span class="ident" id="2975032">assignTo</span><span class="op" id="2975040">(</span><span class="string" id="2975041">&#34;reflect.Set&#34;</span><span class="op" id="2975054">,</span>&nbsp;<span class="ident" id="2975056">v</span><span class="op" id="2975057">.</span><span class="ident" id="2975058">typ</span><span class="op" id="2975061">,</span>&nbsp;<span class="ident" id="2975063">target</span><span class="op" id="2975069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975072">if</span>&nbsp;<span class="ident" id="2975075">x</span><span class="op" id="2975076">.</span><span class="ident" id="2975077">flag</span><span class="op" id="2975081">&amp;</span><span class="ident" id="2975082">flagIndir</span>&nbsp;<span class="op" id="2975092">!=</span>&nbsp;<span class="num" id="2975095">0</span>&nbsp;<span class="op" id="2975097">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975101">memmove</span><span class="op" id="2975108">(</span><span class="ident" id="2975109">v</span><span class="op" id="2975110">.</span><span class="ident" id="2975111">ptr</span><span class="op" id="2975114">,</span>&nbsp;<span class="ident" id="2975116">x</span><span class="op" id="2975117">.</span><span class="ident" id="2975118">ptr</span><span class="op" id="2975121">,</span>&nbsp;<span class="ident" id="2975123">v</span><span class="op" id="2975124">.</span><span class="ident" id="2975125">typ</span><span class="op" id="2975128">.</span><span class="ident" id="2975129">size</span><span class="op" id="2975133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975136">}</span>&nbsp;<span class="keyword" id="2975138">else</span>&nbsp;<span class="op" id="2975143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975147">*</span><span class="op" id="2975148">(</span><span class="op" id="2975149">*</span><span class="ident" id="2975150">unsafe</span><span class="op" id="2975156">.</span><span class="ident" id="2975157">Pointer</span><span class="op" id="2975164">)</span><span class="op" id="2975165">(</span><span class="ident" id="2975166">v</span><span class="op" id="2975167">.</span><span class="ident" id="2975168">ptr</span><span class="op" id="2975171">)</span>&nbsp;<span class="op" id="2975173">=</span>&nbsp;<span class="ident" id="2975175">x</span><span class="op" id="2975176">.</span><span class="ident" id="2975177">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975182">}</span><br>
<span class="lineno"></span><span class="op" id="2975184">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2975187">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2975225">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2975287">func</span>&nbsp;<span class="op" id="2975292">(</span><span class="ident" id="2975293">v</span>&nbsp;<span class="ident" id="2975295">Value</span><span class="op" id="2975300">)</span>&nbsp;<span class="ident" id="2975302">SetBool</span><span class="op" id="2975309">(</span><span class="ident" id="2975310">x</span>&nbsp;<span class="builtintype" id="2975312">bool</span><span class="op" id="2975316">)</span>&nbsp;<span class="op" id="2975318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975321">v</span><span class="op" id="2975322">.</span><span class="ident" id="2975323">mustBeAssignable</span><span class="op" id="2975339">(</span><span class="op" id="2975340">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975343">v</span><span class="op" id="2975344">.</span><span class="ident" id="2975345">mustBe</span><span class="op" id="2975351">(</span><span class="ident" id="2975352">Bool</span><span class="op" id="2975356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975359">*</span><span class="op" id="2975360">(</span><span class="op" id="2975361">*</span><span class="builtintype" id="2975362">bool</span><span class="op" id="2975366">)</span><span class="op" id="2975367">(</span><span class="ident" id="2975368">v</span><span class="op" id="2975369">.</span><span class="ident" id="2975370">ptr</span><span class="op" id="2975373">)</span>&nbsp;<span class="op" id="2975375">=</span>&nbsp;<span class="ident" id="2975377">x</span><br>
<span class="lineno"></span><span class="op" id="2975379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2975382">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2975421">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2975483">func</span>&nbsp;<span class="op" id="2975488">(</span><span class="ident" id="2975489">v</span>&nbsp;<span class="ident" id="2975491">Value</span><span class="op" id="2975496">)</span>&nbsp;<span class="ident" id="2975498">SetBytes</span><span class="op" id="2975506">(</span><span class="ident" id="2975507">x</span>&nbsp;<span class="op" id="2975509">[</span><span class="op" id="2975510">]</span><span class="builtintype" id="2975511">byte</span><span class="op" id="2975515">)</span>&nbsp;<span class="op" id="2975517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975520">v</span><span class="op" id="2975521">.</span><span class="ident" id="2975522">mustBeAssignable</span><span class="op" id="2975538">(</span><span class="op" id="2975539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975542">v</span><span class="op" id="2975543">.</span><span class="ident" id="2975544">mustBe</span><span class="op" id="2975550">(</span><span class="ident" id="2975551">Slice</span><span class="op" id="2975556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975559">if</span>&nbsp;<span class="ident" id="2975562">v</span><span class="op" id="2975563">.</span><span class="ident" id="2975564">typ</span><span class="op" id="2975567">.</span><span class="ident" id="2975568">Elem</span><span class="op" id="2975572">(</span><span class="op" id="2975573">)</span><span class="op" id="2975574">.</span><span class="ident" id="2975575">Kind</span><span class="op" id="2975579">(</span><span class="op" id="2975580">)</span>&nbsp;<span class="op" id="2975582">!=</span>&nbsp;<span class="ident" id="2975585">Uint8</span>&nbsp;<span class="op" id="2975591">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2975595">panic</span><span class="op" id="2975600">(</span><span class="string" id="2975601">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2975643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975649">*</span><span class="op" id="2975650">(</span><span class="op" id="2975651">*</span><span class="op" id="2975652">[</span><span class="op" id="2975653">]</span><span class="builtintype" id="2975654">byte</span><span class="op" id="2975658">)</span><span class="op" id="2975659">(</span><span class="ident" id="2975660">v</span><span class="op" id="2975661">.</span><span class="ident" id="2975662">ptr</span><span class="op" id="2975665">)</span>&nbsp;<span class="op" id="2975667">=</span>&nbsp;<span class="ident" id="2975669">x</span><br>
<span class="lineno"></span><span class="op" id="2975671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2975674">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2975713">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2975784">func</span>&nbsp;<span class="op" id="2975789">(</span><span class="ident" id="2975790">v</span>&nbsp;<span class="ident" id="2975792">Value</span><span class="op" id="2975797">)</span>&nbsp;<span class="ident" id="2975799">setRunes</span><span class="op" id="2975807">(</span><span class="ident" id="2975808">x</span>&nbsp;<span class="op" id="2975810">[</span><span class="op" id="2975811">]</span><span class="builtintype" id="2975812">rune</span><span class="op" id="2975816">)</span>&nbsp;<span class="op" id="2975818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975821">v</span><span class="op" id="2975822">.</span><span class="ident" id="2975823">mustBeAssignable</span><span class="op" id="2975839">(</span><span class="op" id="2975840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2975843">v</span><span class="op" id="2975844">.</span><span class="ident" id="2975845">mustBe</span><span class="op" id="2975851">(</span><span class="ident" id="2975852">Slice</span><span class="op" id="2975857">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2975860">if</span>&nbsp;<span class="ident" id="2975863">v</span><span class="op" id="2975864">.</span><span class="ident" id="2975865">typ</span><span class="op" id="2975868">.</span><span class="ident" id="2975869">Elem</span><span class="op" id="2975873">(</span><span class="op" id="2975874">)</span><span class="op" id="2975875">.</span><span class="ident" id="2975876">Kind</span><span class="op" id="2975880">(</span><span class="op" id="2975881">)</span>&nbsp;<span class="op" id="2975883">!=</span>&nbsp;<span class="ident" id="2975886">Int32</span>&nbsp;<span class="op" id="2975892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2975896">panic</span><span class="op" id="2975901">(</span><span class="string" id="2975902">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2975944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2975950">*</span><span class="op" id="2975951">(</span><span class="op" id="2975952">*</span><span class="op" id="2975953">[</span><span class="op" id="2975954">]</span><span class="builtintype" id="2975955">rune</span><span class="op" id="2975959">)</span><span class="op" id="2975960">(</span><span class="ident" id="2975961">v</span><span class="op" id="2975962">.</span><span class="ident" id="2975963">ptr</span><span class="op" id="2975966">)</span>&nbsp;<span class="op" id="2975968">=</span>&nbsp;<span class="ident" id="2975970">x</span><br>
<span class="lineno"></span><span class="op" id="2975972">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2975975">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2976021">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2976103">func</span>&nbsp;<span class="op" id="2976108">(</span><span class="ident" id="2976109">v</span>&nbsp;<span class="ident" id="2976111">Value</span><span class="op" id="2976116">)</span>&nbsp;<span class="ident" id="2976118">SetComplex</span><span class="op" id="2976128">(</span><span class="ident" id="2976129">x</span>&nbsp;<span class="builtintype" id="2976131">complex128</span><span class="op" id="2976141">)</span>&nbsp;<span class="op" id="2976143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976146">v</span><span class="op" id="2976147">.</span><span class="ident" id="2976148">mustBeAssignable</span><span class="op" id="2976164">(</span><span class="op" id="2976165">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976168">switch</span>&nbsp;<span class="ident" id="2976175">k</span>&nbsp;<span class="op" id="2976177">:=</span>&nbsp;<span class="ident" id="2976180">v</span><span class="op" id="2976181">.</span><span class="ident" id="2976182">kind</span><span class="op" id="2976186">(</span><span class="op" id="2976187">)</span><span class="op" id="2976188">;</span>&nbsp;<span class="ident" id="2976190">k</span>&nbsp;<span class="op" id="2976192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976195">default</span><span class="op" id="2976202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2976206">panic</span><span class="op" id="2976211">(</span><span class="op" id="2976212">&amp;</span><span class="ident" id="2976213">ValueError</span><span class="op" id="2976223">{</span><span class="string" id="2976224">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2976250">,</span>&nbsp;<span class="ident" id="2976252">v</span><span class="op" id="2976253">.</span><span class="ident" id="2976254">kind</span><span class="op" id="2976258">(</span><span class="op" id="2976259">)</span><span class="op" id="2976260">}</span><span class="op" id="2976261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976264">case</span>&nbsp;<span class="ident" id="2976269">Complex64</span><span class="op" id="2976278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976282">*</span><span class="op" id="2976283">(</span><span class="op" id="2976284">*</span><span class="builtintype" id="2976285">complex64</span><span class="op" id="2976294">)</span><span class="op" id="2976295">(</span><span class="ident" id="2976296">v</span><span class="op" id="2976297">.</span><span class="ident" id="2976298">ptr</span><span class="op" id="2976301">)</span>&nbsp;<span class="op" id="2976303">=</span>&nbsp;<span class="builtintype" id="2976305">complex64</span><span class="op" id="2976314">(</span><span class="ident" id="2976315">x</span><span class="op" id="2976316">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976319">case</span>&nbsp;<span class="ident" id="2976324">Complex128</span><span class="op" id="2976334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976338">*</span><span class="op" id="2976339">(</span><span class="op" id="2976340">*</span><span class="builtintype" id="2976341">complex128</span><span class="op" id="2976351">)</span><span class="op" id="2976352">(</span><span class="ident" id="2976353">v</span><span class="op" id="2976354">.</span><span class="ident" id="2976355">ptr</span><span class="op" id="2976358">)</span>&nbsp;<span class="op" id="2976360">=</span>&nbsp;<span class="ident" id="2976362">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976365">}</span><br>
<span class="lineno"></span><span class="op" id="2976367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2976370">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2976414">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2976491">func</span>&nbsp;<span class="op" id="2976496">(</span><span class="ident" id="2976497">v</span>&nbsp;<span class="ident" id="2976499">Value</span><span class="op" id="2976504">)</span>&nbsp;<span class="ident" id="2976506">SetFloat</span><span class="op" id="2976514">(</span><span class="ident" id="2976515">x</span>&nbsp;<span class="builtintype" id="2976517">float64</span><span class="op" id="2976524">)</span>&nbsp;<span class="op" id="2976526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976529">v</span><span class="op" id="2976530">.</span><span class="ident" id="2976531">mustBeAssignable</span><span class="op" id="2976547">(</span><span class="op" id="2976548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976551">switch</span>&nbsp;<span class="ident" id="2976558">k</span>&nbsp;<span class="op" id="2976560">:=</span>&nbsp;<span class="ident" id="2976563">v</span><span class="op" id="2976564">.</span><span class="ident" id="2976565">kind</span><span class="op" id="2976569">(</span><span class="op" id="2976570">)</span><span class="op" id="2976571">;</span>&nbsp;<span class="ident" id="2976573">k</span>&nbsp;<span class="op" id="2976575">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976578">default</span><span class="op" id="2976585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2976589">panic</span><span class="op" id="2976594">(</span><span class="op" id="2976595">&amp;</span><span class="ident" id="2976596">ValueError</span><span class="op" id="2976606">{</span><span class="string" id="2976607">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2976631">,</span>&nbsp;<span class="ident" id="2976633">v</span><span class="op" id="2976634">.</span><span class="ident" id="2976635">kind</span><span class="op" id="2976639">(</span><span class="op" id="2976640">)</span><span class="op" id="2976641">}</span><span class="op" id="2976642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976645">case</span>&nbsp;<span class="ident" id="2976650">Float32</span><span class="op" id="2976657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976661">*</span><span class="op" id="2976662">(</span><span class="op" id="2976663">*</span><span class="builtintype" id="2976664">float32</span><span class="op" id="2976671">)</span><span class="op" id="2976672">(</span><span class="ident" id="2976673">v</span><span class="op" id="2976674">.</span><span class="ident" id="2976675">ptr</span><span class="op" id="2976678">)</span>&nbsp;<span class="op" id="2976680">=</span>&nbsp;<span class="builtintype" id="2976682">float32</span><span class="op" id="2976689">(</span><span class="ident" id="2976690">x</span><span class="op" id="2976691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976694">case</span>&nbsp;<span class="ident" id="2976699">Float64</span><span class="op" id="2976706">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976710">*</span><span class="op" id="2976711">(</span><span class="op" id="2976712">*</span><span class="builtintype" id="2976713">float64</span><span class="op" id="2976720">)</span><span class="op" id="2976721">(</span><span class="ident" id="2976722">v</span><span class="op" id="2976723">.</span><span class="ident" id="2976724">ptr</span><span class="op" id="2976727">)</span>&nbsp;<span class="op" id="2976729">=</span>&nbsp;<span class="ident" id="2976731">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2976734">}</span><br>
<span class="lineno"></span><span class="op" id="2976736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2976739">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2976781">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2976873">func</span>&nbsp;<span class="op" id="2976878">(</span><span class="ident" id="2976879">v</span>&nbsp;<span class="ident" id="2976881">Value</span><span class="op" id="2976886">)</span>&nbsp;<span class="ident" id="2976888">SetInt</span><span class="op" id="2976894">(</span><span class="ident" id="2976895">x</span>&nbsp;<span class="ident" id="2976897">int64</span><span class="op" id="2976902">)</span>&nbsp;<span class="op" id="2976904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2976907">v</span><span class="op" id="2976908">.</span><span class="ident" id="2976909">mustBeAssignable</span><span class="op" id="2976925">(</span><span class="op" id="2976926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976929">switch</span>&nbsp;<span class="ident" id="2976936">k</span>&nbsp;<span class="op" id="2976938">:=</span>&nbsp;<span class="ident" id="2976941">v</span><span class="op" id="2976942">.</span><span class="ident" id="2976943">kind</span><span class="op" id="2976947">(</span><span class="op" id="2976948">)</span><span class="op" id="2976949">;</span>&nbsp;<span class="ident" id="2976951">k</span>&nbsp;<span class="op" id="2976953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2976956">default</span><span class="op" id="2976963">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2976967">panic</span><span class="op" id="2976972">(</span><span class="op" id="2976973">&amp;</span><span class="ident" id="2976974">ValueError</span><span class="op" id="2976984">{</span><span class="string" id="2976985">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2977007">,</span>&nbsp;<span class="ident" id="2977009">v</span><span class="op" id="2977010">.</span><span class="ident" id="2977011">kind</span><span class="op" id="2977015">(</span><span class="op" id="2977016">)</span><span class="op" id="2977017">}</span><span class="op" id="2977018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977021">case</span>&nbsp;<span class="ident" id="2977026">Int</span><span class="op" id="2977029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977033">*</span><span class="op" id="2977034">(</span><span class="op" id="2977035">*</span><span class="builtintype" id="2977036">int</span><span class="op" id="2977039">)</span><span class="op" id="2977040">(</span><span class="ident" id="2977041">v</span><span class="op" id="2977042">.</span><span class="ident" id="2977043">ptr</span><span class="op" id="2977046">)</span>&nbsp;<span class="op" id="2977048">=</span>&nbsp;<span class="builtintype" id="2977050">int</span><span class="op" id="2977053">(</span><span class="ident" id="2977054">x</span><span class="op" id="2977055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977058">case</span>&nbsp;<span class="ident" id="2977063">Int8</span><span class="op" id="2977067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977071">*</span><span class="op" id="2977072">(</span><span class="op" id="2977073">*</span><span class="builtintype" id="2977074">int8</span><span class="op" id="2977078">)</span><span class="op" id="2977079">(</span><span class="ident" id="2977080">v</span><span class="op" id="2977081">.</span><span class="ident" id="2977082">ptr</span><span class="op" id="2977085">)</span>&nbsp;<span class="op" id="2977087">=</span>&nbsp;<span class="builtintype" id="2977089">int8</span><span class="op" id="2977093">(</span><span class="ident" id="2977094">x</span><span class="op" id="2977095">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977098">case</span>&nbsp;<span class="ident" id="2977103">Int16</span><span class="op" id="2977108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977112">*</span><span class="op" id="2977113">(</span><span class="op" id="2977114">*</span><span class="builtintype" id="2977115">int16</span><span class="op" id="2977120">)</span><span class="op" id="2977121">(</span><span class="ident" id="2977122">v</span><span class="op" id="2977123">.</span><span class="ident" id="2977124">ptr</span><span class="op" id="2977127">)</span>&nbsp;<span class="op" id="2977129">=</span>&nbsp;<span class="builtintype" id="2977131">int16</span><span class="op" id="2977136">(</span><span class="ident" id="2977137">x</span><span class="op" id="2977138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977141">case</span>&nbsp;<span class="ident" id="2977146">Int32</span><span class="op" id="2977151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977155">*</span><span class="op" id="2977156">(</span><span class="op" id="2977157">*</span><span class="builtintype" id="2977158">int32</span><span class="op" id="2977163">)</span><span class="op" id="2977164">(</span><span class="ident" id="2977165">v</span><span class="op" id="2977166">.</span><span class="ident" id="2977167">ptr</span><span class="op" id="2977170">)</span>&nbsp;<span class="op" id="2977172">=</span>&nbsp;<span class="builtintype" id="2977174">int32</span><span class="op" id="2977179">(</span><span class="ident" id="2977180">x</span><span class="op" id="2977181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977184">case</span>&nbsp;<span class="ident" id="2977189">Int64</span><span class="op" id="2977194">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977198">*</span><span class="op" id="2977199">(</span><span class="op" id="2977200">*</span><span class="ident" id="2977201">int64</span><span class="op" id="2977206">)</span><span class="op" id="2977207">(</span><span class="ident" id="2977208">v</span><span class="op" id="2977209">.</span><span class="ident" id="2977210">ptr</span><span class="op" id="2977213">)</span>&nbsp;<span class="op" id="2977215">=</span>&nbsp;<span class="ident" id="2977217">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977220">}</span><br>
<span class="lineno"></span><span class="op" id="2977222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2977225">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2977257">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2977318">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2977361">func</span>&nbsp;<span class="op" id="2977366">(</span><span class="ident" id="2977367">v</span>&nbsp;<span class="ident" id="2977369">Value</span><span class="op" id="2977374">)</span>&nbsp;<span class="ident" id="2977376">SetLen</span><span class="op" id="2977382">(</span><span class="ident" id="2977383">n</span>&nbsp;<span class="builtintype" id="2977385">int</span><span class="op" id="2977388">)</span>&nbsp;<span class="op" id="2977390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977393">v</span><span class="op" id="2977394">.</span><span class="ident" id="2977395">mustBeAssignable</span><span class="op" id="2977411">(</span><span class="op" id="2977412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977415">v</span><span class="op" id="2977416">.</span><span class="ident" id="2977417">mustBe</span><span class="op" id="2977423">(</span><span class="ident" id="2977424">Slice</span><span class="op" id="2977429">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977432">s</span>&nbsp;<span class="op" id="2977434">:=</span>&nbsp;<span class="op" id="2977437">(</span><span class="op" id="2977438">*</span><span class="ident" id="2977439">sliceHeader</span><span class="op" id="2977450">)</span><span class="op" id="2977451">(</span><span class="ident" id="2977452">v</span><span class="op" id="2977453">.</span><span class="ident" id="2977454">ptr</span><span class="op" id="2977457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977460">if</span>&nbsp;<span class="builtintype" id="2977463">uint</span><span class="op" id="2977467">(</span><span class="ident" id="2977468">n</span><span class="op" id="2977469">)</span>&nbsp;<span class="op" id="2977471">&gt;</span>&nbsp;<span class="builtintype" id="2977473">uint</span><span class="op" id="2977477">(</span><span class="ident" id="2977478">s</span><span class="op" id="2977479">.</span><span class="ident" id="2977480">Cap</span><span class="op" id="2977483">)</span>&nbsp;<span class="op" id="2977485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2977489">panic</span><span class="op" id="2977494">(</span><span class="string" id="2977495">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2977541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977547">s</span><span class="op" id="2977548">.</span><span class="ident" id="2977549">Len</span>&nbsp;<span class="op" id="2977553">=</span>&nbsp;<span class="ident" id="2977555">n</span><br>
<span class="lineno">1395</span><span class="op" id="2977557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2977560">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2977594">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2977670">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2977713">func</span>&nbsp;<span class="op" id="2977718">(</span><span class="ident" id="2977719">v</span>&nbsp;<span class="ident" id="2977721">Value</span><span class="op" id="2977726">)</span>&nbsp;<span class="ident" id="2977728">SetCap</span><span class="op" id="2977734">(</span><span class="ident" id="2977735">n</span>&nbsp;<span class="builtintype" id="2977737">int</span><span class="op" id="2977740">)</span>&nbsp;<span class="op" id="2977742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977745">v</span><span class="op" id="2977746">.</span><span class="ident" id="2977747">mustBeAssignable</span><span class="op" id="2977763">(</span><span class="op" id="2977764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977767">v</span><span class="op" id="2977768">.</span><span class="ident" id="2977769">mustBe</span><span class="op" id="2977775">(</span><span class="ident" id="2977776">Slice</span><span class="op" id="2977781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977784">s</span>&nbsp;<span class="op" id="2977786">:=</span>&nbsp;<span class="op" id="2977789">(</span><span class="op" id="2977790">*</span><span class="ident" id="2977791">sliceHeader</span><span class="op" id="2977802">)</span><span class="op" id="2977803">(</span><span class="ident" id="2977804">v</span><span class="op" id="2977805">.</span><span class="ident" id="2977806">ptr</span><span class="op" id="2977809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2977812">if</span>&nbsp;<span class="ident" id="2977815">n</span>&nbsp;<span class="op" id="2977817">&lt;</span>&nbsp;<span class="builtintype" id="2977819">int</span><span class="op" id="2977822">(</span><span class="ident" id="2977823">s</span><span class="op" id="2977824">.</span><span class="ident" id="2977825">Len</span><span class="op" id="2977828">)</span>&nbsp;<span class="op" id="2977830">||</span>&nbsp;<span class="ident" id="2977833">n</span>&nbsp;<span class="op" id="2977835">&gt;</span>&nbsp;<span class="builtintype" id="2977837">int</span><span class="op" id="2977840">(</span><span class="ident" id="2977841">s</span><span class="op" id="2977842">.</span><span class="ident" id="2977843">Cap</span><span class="op" id="2977846">)</span>&nbsp;<span class="op" id="2977848">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2977852">panic</span><span class="op" id="2977857">(</span><span class="string" id="2977858">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2977906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2977909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2977912">s</span><span class="op" id="2977913">.</span><span class="ident" id="2977914">Cap</span>&nbsp;<span class="op" id="2977918">=</span>&nbsp;<span class="ident" id="2977920">n</span><br>
<span class="lineno"></span><span class="op" id="2977922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2977925">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2977996">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2978033">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2978104">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2978163">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2978230">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2978293">func</span>&nbsp;<span class="op" id="2978298">(</span><span class="ident" id="2978299">v</span>&nbsp;<span class="ident" id="2978301">Value</span><span class="op" id="2978306">)</span>&nbsp;<span class="ident" id="2978308">SetMapIndex</span><span class="op" id="2978319">(</span><span class="ident" id="2978320">key</span><span class="op" id="2978323">,</span>&nbsp;<span class="ident" id="2978325">val</span>&nbsp;<span class="ident" id="2978329">Value</span><span class="op" id="2978334">)</span>&nbsp;<span class="op" id="2978336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978339">v</span><span class="op" id="2978340">.</span><span class="ident" id="2978341">mustBe</span><span class="op" id="2978347">(</span><span class="ident" id="2978348">Map</span><span class="op" id="2978351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978354">v</span><span class="op" id="2978355">.</span><span class="ident" id="2978356">mustBeExported</span><span class="op" id="2978370">(</span><span class="op" id="2978371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978374">key</span><span class="op" id="2978377">.</span><span class="ident" id="2978378">mustBeExported</span><span class="op" id="2978392">(</span><span class="op" id="2978393">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978396">tt</span>&nbsp;<span class="op" id="2978399">:=</span>&nbsp;<span class="op" id="2978402">(</span><span class="op" id="2978403">*</span><span class="ident" id="2978404">mapType</span><span class="op" id="2978411">)</span><span class="op" id="2978412">(</span><span class="ident" id="2978413">unsafe</span><span class="op" id="2978419">.</span><span class="ident" id="2978420">Pointer</span><span class="op" id="2978427">(</span><span class="ident" id="2978428">v</span><span class="op" id="2978429">.</span><span class="ident" id="2978430">typ</span><span class="op" id="2978433">)</span><span class="op" id="2978434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978437">key</span>&nbsp;<span class="op" id="2978441">=</span>&nbsp;<span class="ident" id="2978443">key</span><span class="op" id="2978446">.</span><span class="ident" id="2978447">assignTo</span><span class="op" id="2978455">(</span><span class="string" id="2978456">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2978483">,</span>&nbsp;<span class="ident" id="2978485">tt</span><span class="op" id="2978487">.</span><span class="ident" id="2978488">key</span><span class="op" id="2978491">,</span>&nbsp;<span class="ident" id="2978493">nil</span><span class="op" id="2978496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978499">var</span>&nbsp;<span class="ident" id="2978503">k</span>&nbsp;<span class="ident" id="2978505">unsafe</span><span class="op" id="2978511">.</span><span class="ident" id="2978512">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978521">if</span>&nbsp;<span class="ident" id="2978524">key</span><span class="op" id="2978527">.</span><span class="ident" id="2978528">flag</span><span class="op" id="2978532">&amp;</span><span class="ident" id="2978533">flagIndir</span>&nbsp;<span class="op" id="2978543">!=</span>&nbsp;<span class="num" id="2978546">0</span>&nbsp;<span class="op" id="2978548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978552">k</span>&nbsp;<span class="op" id="2978554">=</span>&nbsp;<span class="ident" id="2978556">key</span><span class="op" id="2978559">.</span><span class="ident" id="2978560">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978565">}</span>&nbsp;<span class="keyword" id="2978567">else</span>&nbsp;<span class="op" id="2978572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978576">k</span>&nbsp;<span class="op" id="2978578">=</span>&nbsp;<span class="ident" id="2978580">unsafe</span><span class="op" id="2978586">.</span><span class="ident" id="2978587">Pointer</span><span class="op" id="2978594">(</span><span class="op" id="2978595">&amp;</span><span class="ident" id="2978596">key</span><span class="op" id="2978599">.</span><span class="ident" id="2978600">ptr</span><span class="op" id="2978603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978609">if</span>&nbsp;<span class="ident" id="2978612">val</span><span class="op" id="2978615">.</span><span class="ident" id="2978616">typ</span>&nbsp;<span class="op" id="2978620">==</span>&nbsp;<span class="ident" id="2978623">nil</span>&nbsp;<span class="op" id="2978627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978631">mapdelete</span><span class="op" id="2978640">(</span><span class="ident" id="2978641">v</span><span class="op" id="2978642">.</span><span class="ident" id="2978643">typ</span><span class="op" id="2978646">,</span>&nbsp;<span class="ident" id="2978648">v</span><span class="op" id="2978649">.</span><span class="ident" id="2978650">pointer</span><span class="op" id="2978657">(</span><span class="op" id="2978658">)</span><span class="op" id="2978659">,</span>&nbsp;<span class="ident" id="2978661">k</span><span class="op" id="2978662">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978666">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978677">val</span><span class="op" id="2978680">.</span><span class="ident" id="2978681">mustBeExported</span><span class="op" id="2978695">(</span><span class="op" id="2978696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978699">val</span>&nbsp;<span class="op" id="2978703">=</span>&nbsp;<span class="ident" id="2978705">val</span><span class="op" id="2978708">.</span><span class="ident" id="2978709">assignTo</span><span class="op" id="2978717">(</span><span class="string" id="2978718">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2978745">,</span>&nbsp;<span class="ident" id="2978747">tt</span><span class="op" id="2978749">.</span><span class="ident" id="2978750">elem</span><span class="op" id="2978754">,</span>&nbsp;<span class="ident" id="2978756">nil</span><span class="op" id="2978759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978762">var</span>&nbsp;<span class="ident" id="2978766">e</span>&nbsp;<span class="ident" id="2978768">unsafe</span><span class="op" id="2978774">.</span><span class="ident" id="2978775">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2978784">if</span>&nbsp;<span class="ident" id="2978787">val</span><span class="op" id="2978790">.</span><span class="ident" id="2978791">flag</span><span class="op" id="2978795">&amp;</span><span class="ident" id="2978796">flagIndir</span>&nbsp;<span class="op" id="2978806">!=</span>&nbsp;<span class="num" id="2978809">0</span>&nbsp;<span class="op" id="2978811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978815">e</span>&nbsp;<span class="op" id="2978817">=</span>&nbsp;<span class="ident" id="2978819">val</span><span class="op" id="2978822">.</span><span class="ident" id="2978823">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978828">}</span>&nbsp;<span class="keyword" id="2978830">else</span>&nbsp;<span class="op" id="2978835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978839">e</span>&nbsp;<span class="op" id="2978841">=</span>&nbsp;<span class="ident" id="2978843">unsafe</span><span class="op" id="2978849">.</span><span class="ident" id="2978850">Pointer</span><span class="op" id="2978857">(</span><span class="op" id="2978858">&amp;</span><span class="ident" id="2978859">val</span><span class="op" id="2978862">.</span><span class="ident" id="2978863">ptr</span><span class="op" id="2978866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2978869">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2978872">mapassign</span><span class="op" id="2978881">(</span><span class="ident" id="2978882">v</span><span class="op" id="2978883">.</span><span class="ident" id="2978884">typ</span><span class="op" id="2978887">,</span>&nbsp;<span class="ident" id="2978889">v</span><span class="op" id="2978890">.</span><span class="ident" id="2978891">pointer</span><span class="op" id="2978898">(</span><span class="op" id="2978899">)</span><span class="op" id="2978900">,</span>&nbsp;<span class="ident" id="2978902">k</span><span class="op" id="2978903">,</span>&nbsp;<span class="ident" id="2978905">e</span><span class="op" id="2978906">)</span><br>
<span class="lineno"></span><span class="op" id="2978908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2978911">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2978954">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2979060">func</span>&nbsp;<span class="op" id="2979065">(</span><span class="ident" id="2979066">v</span>&nbsp;<span class="ident" id="2979068">Value</span><span class="op" id="2979073">)</span>&nbsp;<span class="ident" id="2979075">SetUint</span><span class="op" id="2979082">(</span><span class="ident" id="2979083">x</span>&nbsp;<span class="ident" id="2979085">uint64</span><span class="op" id="2979091">)</span>&nbsp;<span class="op" id="2979093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979096">v</span><span class="op" id="2979097">.</span><span class="ident" id="2979098">mustBeAssignable</span><span class="op" id="2979114">(</span><span class="op" id="2979115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979118">switch</span>&nbsp;<span class="ident" id="2979125">k</span>&nbsp;<span class="op" id="2979127">:=</span>&nbsp;<span class="ident" id="2979130">v</span><span class="op" id="2979131">.</span><span class="ident" id="2979132">kind</span><span class="op" id="2979136">(</span><span class="op" id="2979137">)</span><span class="op" id="2979138">;</span>&nbsp;<span class="ident" id="2979140">k</span>&nbsp;<span class="op" id="2979142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979145">default</span><span class="op" id="2979152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2979156">panic</span><span class="op" id="2979161">(</span><span class="op" id="2979162">&amp;</span><span class="ident" id="2979163">ValueError</span><span class="op" id="2979173">{</span><span class="string" id="2979174">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2979197">,</span>&nbsp;<span class="ident" id="2979199">v</span><span class="op" id="2979200">.</span><span class="ident" id="2979201">kind</span><span class="op" id="2979205">(</span><span class="op" id="2979206">)</span><span class="op" id="2979207">}</span><span class="op" id="2979208">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979211">case</span>&nbsp;<span class="ident" id="2979216">Uint</span><span class="op" id="2979220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979224">*</span><span class="op" id="2979225">(</span><span class="op" id="2979226">*</span><span class="builtintype" id="2979227">uint</span><span class="op" id="2979231">)</span><span class="op" id="2979232">(</span><span class="ident" id="2979233">v</span><span class="op" id="2979234">.</span><span class="ident" id="2979235">ptr</span><span class="op" id="2979238">)</span>&nbsp;<span class="op" id="2979240">=</span>&nbsp;<span class="builtintype" id="2979242">uint</span><span class="op" id="2979246">(</span><span class="ident" id="2979247">x</span><span class="op" id="2979248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979251">case</span>&nbsp;<span class="ident" id="2979256">Uint8</span><span class="op" id="2979261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979265">*</span><span class="op" id="2979266">(</span><span class="op" id="2979267">*</span><span class="builtintype" id="2979268">uint8</span><span class="op" id="2979273">)</span><span class="op" id="2979274">(</span><span class="ident" id="2979275">v</span><span class="op" id="2979276">.</span><span class="ident" id="2979277">ptr</span><span class="op" id="2979280">)</span>&nbsp;<span class="op" id="2979282">=</span>&nbsp;<span class="builtintype" id="2979284">uint8</span><span class="op" id="2979289">(</span><span class="ident" id="2979290">x</span><span class="op" id="2979291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979294">case</span>&nbsp;<span class="ident" id="2979299">Uint16</span><span class="op" id="2979305">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979309">*</span><span class="op" id="2979310">(</span><span class="op" id="2979311">*</span><span class="builtintype" id="2979312">uint16</span><span class="op" id="2979318">)</span><span class="op" id="2979319">(</span><span class="ident" id="2979320">v</span><span class="op" id="2979321">.</span><span class="ident" id="2979322">ptr</span><span class="op" id="2979325">)</span>&nbsp;<span class="op" id="2979327">=</span>&nbsp;<span class="builtintype" id="2979329">uint16</span><span class="op" id="2979335">(</span><span class="ident" id="2979336">x</span><span class="op" id="2979337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979340">case</span>&nbsp;<span class="ident" id="2979345">Uint32</span><span class="op" id="2979351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979355">*</span><span class="op" id="2979356">(</span><span class="op" id="2979357">*</span><span class="builtintype" id="2979358">uint32</span><span class="op" id="2979364">)</span><span class="op" id="2979365">(</span><span class="ident" id="2979366">v</span><span class="op" id="2979367">.</span><span class="ident" id="2979368">ptr</span><span class="op" id="2979371">)</span>&nbsp;<span class="op" id="2979373">=</span>&nbsp;<span class="builtintype" id="2979375">uint32</span><span class="op" id="2979381">(</span><span class="ident" id="2979382">x</span><span class="op" id="2979383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979386">case</span>&nbsp;<span class="ident" id="2979391">Uint64</span><span class="op" id="2979397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979401">*</span><span class="op" id="2979402">(</span><span class="op" id="2979403">*</span><span class="ident" id="2979404">uint64</span><span class="op" id="2979410">)</span><span class="op" id="2979411">(</span><span class="ident" id="2979412">v</span><span class="op" id="2979413">.</span><span class="ident" id="2979414">ptr</span><span class="op" id="2979417">)</span>&nbsp;<span class="op" id="2979419">=</span>&nbsp;<span class="ident" id="2979421">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2979424">case</span>&nbsp;<span class="ident" id="2979429">Uintptr</span><span class="op" id="2979436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979440">*</span><span class="op" id="2979441">(</span><span class="op" id="2979442">*</span><span class="builtintype" id="2979443">uintptr</span><span class="op" id="2979450">)</span><span class="op" id="2979451">(</span><span class="ident" id="2979452">v</span><span class="op" id="2979453">.</span><span class="ident" id="2979454">ptr</span><span class="op" id="2979457">)</span>&nbsp;<span class="op" id="2979459">=</span>&nbsp;<span class="builtintype" id="2979461">uintptr</span><span class="op" id="2979468">(</span><span class="ident" id="2979469">x</span><span class="op" id="2979470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979473">}</span><br>
<span class="lineno"></span><span class="op" id="2979475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2979478">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2979530">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2979577">func</span>&nbsp;<span class="op" id="2979582">(</span><span class="ident" id="2979583">v</span>&nbsp;<span class="ident" id="2979585">Value</span><span class="op" id="2979590">)</span>&nbsp;<span class="ident" id="2979592">SetPointer</span><span class="op" id="2979602">(</span><span class="ident" id="2979603">x</span>&nbsp;<span class="ident" id="2979605">unsafe</span><span class="op" id="2979611">.</span><span class="ident" id="2979612">Pointer</span><span class="op" id="2979619">)</span>&nbsp;<span class="op" id="2979621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979624">v</span><span class="op" id="2979625">.</span><span class="ident" id="2979626">mustBeAssignable</span><span class="op" id="2979642">(</span><span class="op" id="2979643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979646">v</span><span class="op" id="2979647">.</span><span class="ident" id="2979648">mustBe</span><span class="op" id="2979654">(</span><span class="ident" id="2979655">UnsafePointer</span><span class="op" id="2979668">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979671">*</span><span class="op" id="2979672">(</span><span class="op" id="2979673">*</span><span class="ident" id="2979674">unsafe</span><span class="op" id="2979680">.</span><span class="ident" id="2979681">Pointer</span><span class="op" id="2979688">)</span><span class="op" id="2979689">(</span><span class="ident" id="2979690">v</span><span class="op" id="2979691">.</span><span class="ident" id="2979692">ptr</span><span class="op" id="2979695">)</span>&nbsp;<span class="op" id="2979697">=</span>&nbsp;<span class="ident" id="2979699">x</span><br>
<span class="lineno"></span><span class="op" id="2979701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2979704">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2979749">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2979813">func</span>&nbsp;<span class="op" id="2979818">(</span><span class="ident" id="2979819">v</span>&nbsp;<span class="ident" id="2979821">Value</span><span class="op" id="2979826">)</span>&nbsp;<span class="ident" id="2979828">SetString</span><span class="op" id="2979837">(</span><span class="ident" id="2979838">x</span>&nbsp;<span class="builtintype" id="2979840">string</span><span class="op" id="2979846">)</span>&nbsp;<span class="op" id="2979848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979851">v</span><span class="op" id="2979852">.</span><span class="ident" id="2979853">mustBeAssignable</span><span class="op" id="2979869">(</span><span class="op" id="2979870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2979873">v</span><span class="op" id="2979874">.</span><span class="ident" id="2979875">mustBe</span><span class="op" id="2979881">(</span><span class="ident" id="2979882">String</span><span class="op" id="2979888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2979891">*</span><span class="op" id="2979892">(</span><span class="op" id="2979893">*</span><span class="builtintype" id="2979894">string</span><span class="op" id="2979900">)</span><span class="op" id="2979901">(</span><span class="ident" id="2979902">v</span><span class="op" id="2979903">.</span><span class="ident" id="2979904">ptr</span><span class="op" id="2979907">)</span>&nbsp;<span class="op" id="2979909">=</span>&nbsp;<span class="ident" id="2979911">x</span><br>
<span class="lineno"></span><span class="op" id="2979913">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2979916">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2979941">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2980032">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2980072">func</span>&nbsp;<span class="op" id="2980077">(</span><span class="ident" id="2980078">v</span>&nbsp;<span class="ident" id="2980080">Value</span><span class="op" id="2980085">)</span>&nbsp;<span class="ident" id="2980087">Slice</span><span class="op" id="2980092">(</span><span class="ident" id="2980093">i</span><span class="op" id="2980094">,</span>&nbsp;<span class="ident" id="2980096">j</span>&nbsp;<span class="builtintype" id="2980098">int</span><span class="op" id="2980101">)</span>&nbsp;<span class="ident" id="2980103">Value</span>&nbsp;<span class="op" id="2980109">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980112">var</span>&nbsp;<span class="op" id="2980116">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980120">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2980125">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980131">typ</span>&nbsp;&nbsp;<span class="op" id="2980136">*</span><span class="ident" id="2980137">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980149">base</span>&nbsp;<span class="ident" id="2980154">unsafe</span><span class="op" id="2980160">.</span><span class="ident" id="2980161">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980170">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980173">switch</span>&nbsp;<span class="ident" id="2980180">kind</span>&nbsp;<span class="op" id="2980185">:=</span>&nbsp;<span class="ident" id="2980188">v</span><span class="op" id="2980189">.</span><span class="ident" id="2980190">kind</span><span class="op" id="2980194">(</span><span class="op" id="2980195">)</span><span class="op" id="2980196">;</span>&nbsp;<span class="ident" id="2980198">kind</span>&nbsp;<span class="op" id="2980203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980206">default</span><span class="op" id="2980213">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980217">panic</span><span class="op" id="2980222">(</span><span class="op" id="2980223">&amp;</span><span class="ident" id="2980224">ValueError</span><span class="op" id="2980234">{</span><span class="string" id="2980235">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2980256">,</span>&nbsp;<span class="ident" id="2980258">v</span><span class="op" id="2980259">.</span><span class="ident" id="2980260">kind</span><span class="op" id="2980264">(</span><span class="op" id="2980265">)</span><span class="op" id="2980266">}</span><span class="op" id="2980267">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980271">case</span>&nbsp;<span class="ident" id="2980276">Array</span><span class="op" id="2980281">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980285">if</span>&nbsp;<span class="ident" id="2980288">v</span><span class="op" id="2980289">.</span><span class="ident" id="2980290">flag</span><span class="op" id="2980294">&amp;</span><span class="ident" id="2980295">flagAddr</span>&nbsp;<span class="op" id="2980304">==</span>&nbsp;<span class="num" id="2980307">0</span>&nbsp;<span class="op" id="2980309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980314">panic</span><span class="op" id="2980319">(</span><span class="string" id="2980320">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2980371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980379">tt</span>&nbsp;<span class="op" id="2980382">:=</span>&nbsp;<span class="op" id="2980385">(</span><span class="op" id="2980386">*</span><span class="ident" id="2980387">arrayType</span><span class="op" id="2980396">)</span><span class="op" id="2980397">(</span><span class="ident" id="2980398">unsafe</span><span class="op" id="2980404">.</span><span class="ident" id="2980405">Pointer</span><span class="op" id="2980412">(</span><span class="ident" id="2980413">v</span><span class="op" id="2980414">.</span><span class="ident" id="2980415">typ</span><span class="op" id="2980418">)</span><span class="op" id="2980419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980423">cap</span>&nbsp;<span class="op" id="2980427">=</span>&nbsp;<span class="builtintype" id="2980429">int</span><span class="op" id="2980432">(</span><span class="ident" id="2980433">tt</span><span class="op" id="2980435">.</span><span class="builtinfunc" id="2980436">len</span><span class="op" id="2980439">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980443">typ</span>&nbsp;<span class="op" id="2980447">=</span>&nbsp;<span class="op" id="2980449">(</span><span class="op" id="2980450">*</span><span class="ident" id="2980451">sliceType</span><span class="op" id="2980460">)</span><span class="op" id="2980461">(</span><span class="ident" id="2980462">unsafe</span><span class="op" id="2980468">.</span><span class="ident" id="2980469">Pointer</span><span class="op" id="2980476">(</span><span class="ident" id="2980477">tt</span><span class="op" id="2980479">.</span><span class="ident" id="2980480">slice</span><span class="op" id="2980485">)</span><span class="op" id="2980486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980490">base</span>&nbsp;<span class="op" id="2980495">=</span>&nbsp;<span class="ident" id="2980497">v</span><span class="op" id="2980498">.</span><span class="ident" id="2980499">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980505">case</span>&nbsp;<span class="ident" id="2980510">Slice</span><span class="op" id="2980515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980519">typ</span>&nbsp;<span class="op" id="2980523">=</span>&nbsp;<span class="op" id="2980525">(</span><span class="op" id="2980526">*</span><span class="ident" id="2980527">sliceType</span><span class="op" id="2980536">)</span><span class="op" id="2980537">(</span><span class="ident" id="2980538">unsafe</span><span class="op" id="2980544">.</span><span class="ident" id="2980545">Pointer</span><span class="op" id="2980552">(</span><span class="ident" id="2980553">v</span><span class="op" id="2980554">.</span><span class="ident" id="2980555">typ</span><span class="op" id="2980558">)</span><span class="op" id="2980559">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980563">s</span>&nbsp;<span class="op" id="2980565">:=</span>&nbsp;<span class="op" id="2980568">(</span><span class="op" id="2980569">*</span><span class="ident" id="2980570">sliceHeader</span><span class="op" id="2980581">)</span><span class="op" id="2980582">(</span><span class="ident" id="2980583">v</span><span class="op" id="2980584">.</span><span class="ident" id="2980585">ptr</span><span class="op" id="2980588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980592">base</span>&nbsp;<span class="op" id="2980597">=</span>&nbsp;<span class="ident" id="2980599">unsafe</span><span class="op" id="2980605">.</span><span class="ident" id="2980606">Pointer</span><span class="op" id="2980613">(</span><span class="ident" id="2980614">s</span><span class="op" id="2980615">.</span><span class="ident" id="2980616">Data</span><span class="op" id="2980620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980624">cap</span>&nbsp;<span class="op" id="2980628">=</span>&nbsp;<span class="ident" id="2980630">s</span><span class="op" id="2980631">.</span><span class="ident" id="2980632">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980638">case</span>&nbsp;<span class="ident" id="2980643">String</span><span class="op" id="2980649">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980653">s</span>&nbsp;<span class="op" id="2980655">:=</span>&nbsp;<span class="op" id="2980658">(</span><span class="op" id="2980659">*</span><span class="ident" id="2980660">stringHeader</span><span class="op" id="2980672">)</span><span class="op" id="2980673">(</span><span class="ident" id="2980674">v</span><span class="op" id="2980675">.</span><span class="ident" id="2980676">ptr</span><span class="op" id="2980679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980683">if</span>&nbsp;<span class="ident" id="2980686">i</span>&nbsp;<span class="op" id="2980688">&lt;</span>&nbsp;<span class="num" id="2980690">0</span>&nbsp;<span class="op" id="2980692">||</span>&nbsp;<span class="ident" id="2980695">j</span>&nbsp;<span class="op" id="2980697">&lt;</span>&nbsp;<span class="ident" id="2980699">i</span>&nbsp;<span class="op" id="2980701">||</span>&nbsp;<span class="ident" id="2980704">j</span>&nbsp;<span class="op" id="2980706">&gt;</span>&nbsp;<span class="ident" id="2980708">s</span><span class="op" id="2980709">.</span><span class="ident" id="2980710">Len</span>&nbsp;<span class="op" id="2980714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980719">panic</span><span class="op" id="2980724">(</span><span class="string" id="2980725">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2980780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2980788">t</span>&nbsp;<span class="op" id="2980790">:=</span>&nbsp;<span class="ident" id="2980793">stringHeader</span><span class="op" id="2980805">{</span><span class="ident" id="2980806">unsafe</span><span class="op" id="2980812">.</span><span class="ident" id="2980813">Pointer</span><span class="op" id="2980820">(</span><span class="builtintype" id="2980821">uintptr</span><span class="op" id="2980828">(</span><span class="ident" id="2980829">s</span><span class="op" id="2980830">.</span><span class="ident" id="2980831">Data</span><span class="op" id="2980835">)</span>&nbsp;<span class="op" id="2980837">+</span>&nbsp;<span class="builtintype" id="2980839">uintptr</span><span class="op" id="2980846">(</span><span class="ident" id="2980847">i</span><span class="op" id="2980848">)</span><span class="op" id="2980849">)</span><span class="op" id="2980850">,</span>&nbsp;<span class="ident" id="2980852">j</span>&nbsp;<span class="op" id="2980854">-</span>&nbsp;<span class="ident" id="2980856">i</span><span class="op" id="2980857">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980861">return</span>&nbsp;<span class="ident" id="2980868">Value</span><span class="op" id="2980873">{</span><span class="ident" id="2980874">v</span><span class="op" id="2980875">.</span><span class="ident" id="2980876">typ</span><span class="op" id="2980879">,</span>&nbsp;<span class="ident" id="2980881">unsafe</span><span class="op" id="2980887">.</span><span class="ident" id="2980888">Pointer</span><span class="op" id="2980895">(</span><span class="op" id="2980896">&amp;</span><span class="ident" id="2980897">t</span><span class="op" id="2980898">)</span><span class="op" id="2980899">,</span>&nbsp;<span class="ident" id="2980901">v</span><span class="op" id="2980902">.</span><span class="ident" id="2980903">flag</span><span class="op" id="2980907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2980910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2980914">if</span>&nbsp;<span class="ident" id="2980917">i</span>&nbsp;<span class="op" id="2980919">&lt;</span>&nbsp;<span class="num" id="2980921">0</span>&nbsp;<span class="op" id="2980923">||</span>&nbsp;<span class="ident" id="2980926">j</span>&nbsp;<span class="op" id="2980928">&lt;</span>&nbsp;<span class="ident" id="2980930">i</span>&nbsp;<span class="op" id="2980932">||</span>&nbsp;<span class="ident" id="2980935">j</span>&nbsp;<span class="op" id="2980937">&gt;</span>&nbsp;<span class="builtinfunc" id="2980939">cap</span>&nbsp;<span class="op" id="2980943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2980947">panic</span><span class="op" id="2980952">(</span><span class="string" id="2980953">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2981001">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2981004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981008">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981069">var</span>&nbsp;<span class="ident" id="2981073">x</span>&nbsp;<span class="op" id="2981075">[</span><span class="op" id="2981076">]</span><span class="ident" id="2981077">unsafe</span><span class="op" id="2981083">.</span><span class="ident" id="2981084">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981094">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981135">s</span>&nbsp;<span class="op" id="2981137">:=</span>&nbsp;<span class="op" id="2981140">(</span><span class="op" id="2981141">*</span><span class="ident" id="2981142">sliceHeader</span><span class="op" id="2981153">)</span><span class="op" id="2981154">(</span><span class="ident" id="2981155">unsafe</span><span class="op" id="2981161">.</span><span class="ident" id="2981162">Pointer</span><span class="op" id="2981169">(</span><span class="op" id="2981170">&amp;</span><span class="ident" id="2981171">x</span><span class="op" id="2981172">)</span><span class="op" id="2981173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981176">s</span><span class="op" id="2981177">.</span><span class="ident" id="2981178">Len</span>&nbsp;<span class="op" id="2981182">=</span>&nbsp;<span class="ident" id="2981184">j</span>&nbsp;<span class="op" id="2981186">-</span>&nbsp;<span class="ident" id="2981188">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981191">s</span><span class="op" id="2981192">.</span><span class="ident" id="2981193">Cap</span>&nbsp;<span class="op" id="2981197">=</span>&nbsp;<span class="builtinfunc" id="2981199">cap</span>&nbsp;<span class="op" id="2981203">-</span>&nbsp;<span class="ident" id="2981205">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981208">if</span>&nbsp;<span class="builtinfunc" id="2981211">cap</span><span class="op" id="2981214">-</span><span class="ident" id="2981215">i</span>&nbsp;<span class="op" id="2981217">&gt;</span>&nbsp;<span class="num" id="2981219">0</span>&nbsp;<span class="op" id="2981221">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981225">s</span><span class="op" id="2981226">.</span><span class="ident" id="2981227">Data</span>&nbsp;<span class="op" id="2981232">=</span>&nbsp;<span class="ident" id="2981234">unsafe</span><span class="op" id="2981240">.</span><span class="ident" id="2981241">Pointer</span><span class="op" id="2981248">(</span><span class="builtintype" id="2981249">uintptr</span><span class="op" id="2981256">(</span><span class="ident" id="2981257">base</span><span class="op" id="2981261">)</span>&nbsp;<span class="op" id="2981263">+</span>&nbsp;<span class="builtintype" id="2981265">uintptr</span><span class="op" id="2981272">(</span><span class="ident" id="2981273">i</span><span class="op" id="2981274">)</span><span class="op" id="2981275">*</span><span class="ident" id="2981276">typ</span><span class="op" id="2981279">.</span><span class="ident" id="2981280">elem</span><span class="op" id="2981284">.</span><span class="ident" id="2981285">Size</span><span class="op" id="2981289">(</span><span class="op" id="2981290">)</span><span class="op" id="2981291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2981294">}</span>&nbsp;<span class="keyword" id="2981296">else</span>&nbsp;<span class="op" id="2981301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2981305">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981372">s</span><span class="op" id="2981373">.</span><span class="ident" id="2981374">Data</span>&nbsp;<span class="op" id="2981379">=</span>&nbsp;<span class="ident" id="2981381">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2981387">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981391">fl</span>&nbsp;<span class="op" id="2981394">:=</span>&nbsp;<span class="ident" id="2981397">v</span><span class="op" id="2981398">.</span><span class="ident" id="2981399">flag</span><span class="op" id="2981403">&amp;</span><span class="ident" id="2981404">flagRO</span>&nbsp;<span class="op" id="2981411">|</span>&nbsp;<span class="ident" id="2981413">flagIndir</span>&nbsp;<span class="op" id="2981423">|</span>&nbsp;<span class="ident" id="2981425">flag</span><span class="op" id="2981429">(</span><span class="ident" id="2981430">Slice</span><span class="op" id="2981435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981438">return</span>&nbsp;<span class="ident" id="2981445">Value</span><span class="op" id="2981450">{</span><span class="ident" id="2981451">typ</span><span class="op" id="2981454">.</span><span class="ident" id="2981455">common</span><span class="op" id="2981461">(</span><span class="op" id="2981462">)</span><span class="op" id="2981463">,</span>&nbsp;<span class="ident" id="2981465">unsafe</span><span class="op" id="2981471">.</span><span class="ident" id="2981472">Pointer</span><span class="op" id="2981479">(</span><span class="op" id="2981480">&amp;</span><span class="ident" id="2981481">x</span><span class="op" id="2981482">)</span><span class="op" id="2981483">,</span>&nbsp;<span class="ident" id="2981485">fl</span><span class="op" id="2981487">}</span><br>
<span class="lineno"></span><span class="op" id="2981489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2981492">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2981567">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2981650">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2981690">func</span>&nbsp;<span class="op" id="2981695">(</span><span class="ident" id="2981696">v</span>&nbsp;<span class="ident" id="2981698">Value</span><span class="op" id="2981703">)</span>&nbsp;<span class="ident" id="2981705">Slice3</span><span class="op" id="2981711">(</span><span class="ident" id="2981712">i</span><span class="op" id="2981713">,</span>&nbsp;<span class="ident" id="2981715">j</span><span class="op" id="2981716">,</span>&nbsp;<span class="ident" id="2981718">k</span>&nbsp;<span class="builtintype" id="2981720">int</span><span class="op" id="2981723">)</span>&nbsp;<span class="ident" id="2981725">Value</span>&nbsp;<span class="op" id="2981731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981734">var</span>&nbsp;<span class="op" id="2981738">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2981742">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2981747">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981753">typ</span>&nbsp;&nbsp;<span class="op" id="2981758">*</span><span class="ident" id="2981759">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2981771">base</span>&nbsp;<span class="ident" id="2981776">unsafe</span><span class="op" id="2981782">.</span><span class="ident" id="2981783">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2981792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981795">switch</span>&nbsp;<span class="ident" id="2981802">kind</span>&nbsp;<span class="op" id="2981807">:=</span>&nbsp;<span class="ident" id="2981810">v</span><span class="op" id="2981811">.</span><span class="ident" id="2981812">kind</span><span class="op" id="2981816">(</span><span class="op" id="2981817">)</span><span class="op" id="2981818">;</span>&nbsp;<span class="ident" id="2981820">kind</span>&nbsp;<span class="op" id="2981825">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981828">default</span><span class="op" id="2981835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2981839">panic</span><span class="op" id="2981844">(</span><span class="op" id="2981845">&amp;</span><span class="ident" id="2981846">ValueError</span><span class="op" id="2981856">{</span><span class="string" id="2981857">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2981879">,</span>&nbsp;<span class="ident" id="2981881">v</span><span class="op" id="2981882">.</span><span class="ident" id="2981883">kind</span><span class="op" id="2981887">(</span><span class="op" id="2981888">)</span><span class="op" id="2981889">}</span><span class="op" id="2981890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981894">case</span>&nbsp;<span class="ident" id="2981899">Array</span><span class="op" id="2981904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2981908">if</span>&nbsp;<span class="ident" id="2981911">v</span><span class="op" id="2981912">.</span><span class="ident" id="2981913">flag</span><span class="op" id="2981917">&amp;</span><span class="ident" id="2981918">flagAddr</span>&nbsp;<span class="op" id="2981927">==</span>&nbsp;<span class="num" id="2981930">0</span>&nbsp;<span class="op" id="2981932">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2981937">panic</span><span class="op" id="2981942">(</span><span class="string" id="2981943">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2981995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2981999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982003">tt</span>&nbsp;<span class="op" id="2982006">:=</span>&nbsp;<span class="op" id="2982009">(</span><span class="op" id="2982010">*</span><span class="ident" id="2982011">arrayType</span><span class="op" id="2982020">)</span><span class="op" id="2982021">(</span><span class="ident" id="2982022">unsafe</span><span class="op" id="2982028">.</span><span class="ident" id="2982029">Pointer</span><span class="op" id="2982036">(</span><span class="ident" id="2982037">v</span><span class="op" id="2982038">.</span><span class="ident" id="2982039">typ</span><span class="op" id="2982042">)</span><span class="op" id="2982043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2982047">cap</span>&nbsp;<span class="op" id="2982051">=</span>&nbsp;<span class="builtintype" id="2982053">int</span><span class="op" id="2982056">(</span><span class="ident" id="2982057">tt</span><span class="op" id="2982059">.</span><span class="builtinfunc" id="2982060">len</span><span class="op" id="2982063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982067">typ</span>&nbsp;<span class="op" id="2982071">=</span>&nbsp;<span class="op" id="2982073">(</span><span class="op" id="2982074">*</span><span class="ident" id="2982075">sliceType</span><span class="op" id="2982084">)</span><span class="op" id="2982085">(</span><span class="ident" id="2982086">unsafe</span><span class="op" id="2982092">.</span><span class="ident" id="2982093">Pointer</span><span class="op" id="2982100">(</span><span class="ident" id="2982101">tt</span><span class="op" id="2982103">.</span><span class="ident" id="2982104">slice</span><span class="op" id="2982109">)</span><span class="op" id="2982110">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982114">base</span>&nbsp;<span class="op" id="2982119">=</span>&nbsp;<span class="ident" id="2982121">v</span><span class="op" id="2982122">.</span><span class="ident" id="2982123">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982129">case</span>&nbsp;<span class="ident" id="2982134">Slice</span><span class="op" id="2982139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982143">typ</span>&nbsp;<span class="op" id="2982147">=</span>&nbsp;<span class="op" id="2982149">(</span><span class="op" id="2982150">*</span><span class="ident" id="2982151">sliceType</span><span class="op" id="2982160">)</span><span class="op" id="2982161">(</span><span class="ident" id="2982162">unsafe</span><span class="op" id="2982168">.</span><span class="ident" id="2982169">Pointer</span><span class="op" id="2982176">(</span><span class="ident" id="2982177">v</span><span class="op" id="2982178">.</span><span class="ident" id="2982179">typ</span><span class="op" id="2982182">)</span><span class="op" id="2982183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982187">s</span>&nbsp;<span class="op" id="2982189">:=</span>&nbsp;<span class="op" id="2982192">(</span><span class="op" id="2982193">*</span><span class="ident" id="2982194">sliceHeader</span><span class="op" id="2982205">)</span><span class="op" id="2982206">(</span><span class="ident" id="2982207">v</span><span class="op" id="2982208">.</span><span class="ident" id="2982209">ptr</span><span class="op" id="2982212">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982216">base</span>&nbsp;<span class="op" id="2982221">=</span>&nbsp;<span class="ident" id="2982223">s</span><span class="op" id="2982224">.</span><span class="ident" id="2982225">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2982232">cap</span>&nbsp;<span class="op" id="2982236">=</span>&nbsp;<span class="ident" id="2982238">s</span><span class="op" id="2982239">.</span><span class="ident" id="2982240">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982249">if</span>&nbsp;<span class="ident" id="2982252">i</span>&nbsp;<span class="op" id="2982254">&lt;</span>&nbsp;<span class="num" id="2982256">0</span>&nbsp;<span class="op" id="2982258">||</span>&nbsp;<span class="ident" id="2982261">j</span>&nbsp;<span class="op" id="2982263">&lt;</span>&nbsp;<span class="ident" id="2982265">i</span>&nbsp;<span class="op" id="2982267">||</span>&nbsp;<span class="ident" id="2982270">k</span>&nbsp;<span class="op" id="2982272">&lt;</span>&nbsp;<span class="ident" id="2982274">j</span>&nbsp;<span class="op" id="2982276">||</span>&nbsp;<span class="ident" id="2982279">k</span>&nbsp;<span class="op" id="2982281">&gt;</span>&nbsp;<span class="builtinfunc" id="2982283">cap</span>&nbsp;<span class="op" id="2982287">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2982291">panic</span><span class="op" id="2982296">(</span><span class="string" id="2982297">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2982346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982353">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982401">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982437">var</span>&nbsp;<span class="ident" id="2982441">x</span>&nbsp;<span class="op" id="2982443">[</span><span class="op" id="2982444">]</span><span class="ident" id="2982445">unsafe</span><span class="op" id="2982451">.</span><span class="ident" id="2982452">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982462">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982503">s</span>&nbsp;<span class="op" id="2982505">:=</span>&nbsp;<span class="op" id="2982508">(</span><span class="op" id="2982509">*</span><span class="ident" id="2982510">sliceHeader</span><span class="op" id="2982521">)</span><span class="op" id="2982522">(</span><span class="ident" id="2982523">unsafe</span><span class="op" id="2982529">.</span><span class="ident" id="2982530">Pointer</span><span class="op" id="2982537">(</span><span class="op" id="2982538">&amp;</span><span class="ident" id="2982539">x</span><span class="op" id="2982540">)</span><span class="op" id="2982541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982544">s</span><span class="op" id="2982545">.</span><span class="ident" id="2982546">Len</span>&nbsp;<span class="op" id="2982550">=</span>&nbsp;<span class="ident" id="2982552">j</span>&nbsp;<span class="op" id="2982554">-</span>&nbsp;<span class="ident" id="2982556">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982559">s</span><span class="op" id="2982560">.</span><span class="ident" id="2982561">Cap</span>&nbsp;<span class="op" id="2982565">=</span>&nbsp;<span class="ident" id="2982567">k</span>&nbsp;<span class="op" id="2982569">-</span>&nbsp;<span class="ident" id="2982571">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982574">if</span>&nbsp;<span class="ident" id="2982577">k</span><span class="op" id="2982578">-</span><span class="ident" id="2982579">i</span>&nbsp;<span class="op" id="2982581">&gt;</span>&nbsp;<span class="num" id="2982583">0</span>&nbsp;<span class="op" id="2982585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982589">s</span><span class="op" id="2982590">.</span><span class="ident" id="2982591">Data</span>&nbsp;<span class="op" id="2982596">=</span>&nbsp;<span class="ident" id="2982598">unsafe</span><span class="op" id="2982604">.</span><span class="ident" id="2982605">Pointer</span><span class="op" id="2982612">(</span><span class="builtintype" id="2982613">uintptr</span><span class="op" id="2982620">(</span><span class="ident" id="2982621">base</span><span class="op" id="2982625">)</span>&nbsp;<span class="op" id="2982627">+</span>&nbsp;<span class="builtintype" id="2982629">uintptr</span><span class="op" id="2982636">(</span><span class="ident" id="2982637">i</span><span class="op" id="2982638">)</span><span class="op" id="2982639">*</span><span class="ident" id="2982640">typ</span><span class="op" id="2982643">.</span><span class="ident" id="2982644">elem</span><span class="op" id="2982648">.</span><span class="ident" id="2982649">Size</span><span class="op" id="2982653">(</span><span class="op" id="2982654">)</span><span class="op" id="2982655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982658">}</span>&nbsp;<span class="keyword" id="2982660">else</span>&nbsp;<span class="op" id="2982665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982669">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982736">s</span><span class="op" id="2982737">.</span><span class="ident" id="2982738">Data</span>&nbsp;<span class="op" id="2982743">=</span>&nbsp;<span class="ident" id="2982745">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982755">fl</span>&nbsp;<span class="op" id="2982758">:=</span>&nbsp;<span class="ident" id="2982761">v</span><span class="op" id="2982762">.</span><span class="ident" id="2982763">flag</span><span class="op" id="2982767">&amp;</span><span class="ident" id="2982768">flagRO</span>&nbsp;<span class="op" id="2982775">|</span>&nbsp;<span class="ident" id="2982777">flagIndir</span>&nbsp;<span class="op" id="2982787">|</span>&nbsp;<span class="ident" id="2982789">flag</span><span class="op" id="2982793">(</span><span class="ident" id="2982794">Slice</span><span class="op" id="2982799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982802">return</span>&nbsp;<span class="ident" id="2982809">Value</span><span class="op" id="2982814">{</span><span class="ident" id="2982815">typ</span><span class="op" id="2982818">.</span><span class="ident" id="2982819">common</span><span class="op" id="2982825">(</span><span class="op" id="2982826">)</span><span class="op" id="2982827">,</span>&nbsp;<span class="ident" id="2982829">unsafe</span><span class="op" id="2982835">.</span><span class="ident" id="2982836">Pointer</span><span class="op" id="2982843">(</span><span class="op" id="2982844">&amp;</span><span class="ident" id="2982845">x</span><span class="op" id="2982846">)</span><span class="op" id="2982847">,</span>&nbsp;<span class="ident" id="2982849">fl</span><span class="op" id="2982851">}</span><br>
<span class="lineno">1590</span><span class="op" id="2982853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2982856">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2982920">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2982990">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2983064">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2983141">func</span>&nbsp;<span class="op" id="2983146">(</span><span class="ident" id="2983147">v</span>&nbsp;<span class="ident" id="2983149">Value</span><span class="op" id="2983154">)</span>&nbsp;<span class="ident" id="2983156">String</span><span class="op" id="2983162">(</span><span class="op" id="2983163">)</span>&nbsp;<span class="builtintype" id="2983165">string</span>&nbsp;<span class="op" id="2983172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983175">switch</span>&nbsp;<span class="ident" id="2983182">k</span>&nbsp;<span class="op" id="2983184">:=</span>&nbsp;<span class="ident" id="2983187">v</span><span class="op" id="2983188">.</span><span class="ident" id="2983189">kind</span><span class="op" id="2983193">(</span><span class="op" id="2983194">)</span><span class="op" id="2983195">;</span>&nbsp;<span class="ident" id="2983197">k</span>&nbsp;<span class="op" id="2983199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983202">case</span>&nbsp;<span class="ident" id="2983207">Invalid</span><span class="op" id="2983214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983218">return</span>&nbsp;<span class="string" id="2983225">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983244">case</span>&nbsp;<span class="ident" id="2983249">String</span><span class="op" id="2983255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983259">return</span>&nbsp;<span class="op" id="2983266">*</span><span class="op" id="2983267">(</span><span class="op" id="2983268">*</span><span class="builtintype" id="2983269">string</span><span class="op" id="2983275">)</span><span class="op" id="2983276">(</span><span class="ident" id="2983277">v</span><span class="op" id="2983278">.</span><span class="ident" id="2983279">ptr</span><span class="op" id="2983282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983288">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983360">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983416">return</span>&nbsp;<span class="string" id="2983423">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2983427">+</span>&nbsp;<span class="ident" id="2983429">v</span><span class="op" id="2983430">.</span><span class="ident" id="2983431">Type</span><span class="op" id="2983435">(</span><span class="op" id="2983436">)</span><span class="op" id="2983437">.</span><span class="ident" id="2983438">String</span><span class="op" id="2983444">(</span><span class="op" id="2983445">)</span>&nbsp;<span class="op" id="2983447">+</span>&nbsp;<span class="string" id="2983449">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2983459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2983462">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2983540">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2983578">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2983657">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2983744">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2983841">func</span>&nbsp;<span class="op" id="2983846">(</span><span class="ident" id="2983847">v</span>&nbsp;<span class="ident" id="2983849">Value</span><span class="op" id="2983854">)</span>&nbsp;<span class="ident" id="2983856">TryRecv</span><span class="op" id="2983863">(</span><span class="op" id="2983864">)</span>&nbsp;<span class="op" id="2983866">(</span><span class="ident" id="2983867">x</span>&nbsp;<span class="ident" id="2983869">Value</span><span class="op" id="2983874">,</span>&nbsp;<span class="ident" id="2983876">ok</span>&nbsp;<span class="builtintype" id="2983879">bool</span><span class="op" id="2983883">)</span>&nbsp;<span class="op" id="2983885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983888">v</span><span class="op" id="2983889">.</span><span class="ident" id="2983890">mustBe</span><span class="op" id="2983896">(</span><span class="ident" id="2983897">Chan</span><span class="op" id="2983901">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983904">v</span><span class="op" id="2983905">.</span><span class="ident" id="2983906">mustBeExported</span><span class="op" id="2983920">(</span><span class="op" id="2983921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983924">return</span>&nbsp;<span class="ident" id="2983931">v</span><span class="op" id="2983932">.</span><span class="ident" id="2983933">recv</span><span class="op" id="2983937">(</span><span class="builtintype" id="2983938">true</span><span class="op" id="2983942">)</span><br>
<span class="lineno"></span><span class="op" id="2983944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2983947">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2984014">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2984052">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2984111">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2984184">func</span>&nbsp;<span class="op" id="2984189">(</span><span class="ident" id="2984190">v</span>&nbsp;<span class="ident" id="2984192">Value</span><span class="op" id="2984197">)</span>&nbsp;<span class="ident" id="2984199">TrySend</span><span class="op" id="2984206">(</span><span class="ident" id="2984207">x</span>&nbsp;<span class="ident" id="2984209">Value</span><span class="op" id="2984214">)</span>&nbsp;<span class="builtintype" id="2984216">bool</span>&nbsp;<span class="op" id="2984221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984224">v</span><span class="op" id="2984225">.</span><span class="ident" id="2984226">mustBe</span><span class="op" id="2984232">(</span><span class="ident" id="2984233">Chan</span><span class="op" id="2984237">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984240">v</span><span class="op" id="2984241">.</span><span class="ident" id="2984242">mustBeExported</span><span class="op" id="2984256">(</span><span class="op" id="2984257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984260">return</span>&nbsp;<span class="ident" id="2984267">v</span><span class="op" id="2984268">.</span><span class="ident" id="2984269">send</span><span class="op" id="2984273">(</span><span class="ident" id="2984274">x</span><span class="op" id="2984275">,</span>&nbsp;<span class="builtintype" id="2984277">true</span><span class="op" id="2984281">)</span><br>
<span class="lineno"></span><span class="op" id="2984283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2984286">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2984312">func</span>&nbsp;<span class="op" id="2984317">(</span><span class="ident" id="2984318">v</span>&nbsp;<span class="ident" id="2984320">Value</span><span class="op" id="2984325">)</span>&nbsp;<span class="ident" id="2984327">Type</span><span class="op" id="2984331">(</span><span class="op" id="2984332">)</span>&nbsp;<span class="ident" id="2984334">Type</span>&nbsp;<span class="op" id="2984339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984342">f</span>&nbsp;<span class="op" id="2984344">:=</span>&nbsp;<span class="ident" id="2984347">v</span><span class="op" id="2984348">.</span><span class="ident" id="2984349">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984355">if</span>&nbsp;<span class="ident" id="2984358">f</span>&nbsp;<span class="op" id="2984360">==</span>&nbsp;<span class="num" id="2984363">0</span>&nbsp;<span class="op" id="2984365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2984369">panic</span><span class="op" id="2984374">(</span><span class="op" id="2984375">&amp;</span><span class="ident" id="2984376">ValueError</span><span class="op" id="2984386">{</span><span class="string" id="2984387">&#34;reflect.Value.Type&#34;</span><span class="op" id="2984407">,</span>&nbsp;<span class="ident" id="2984409">Invalid</span><span class="op" id="2984416">}</span><span class="op" id="2984417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984420">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984423">if</span>&nbsp;<span class="ident" id="2984426">f</span><span class="op" id="2984427">&amp;</span><span class="ident" id="2984428">flagMethod</span>&nbsp;<span class="op" id="2984439">==</span>&nbsp;<span class="num" id="2984442">0</span>&nbsp;<span class="op" id="2984444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984448">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984463">return</span>&nbsp;<span class="ident" id="2984470">v</span><span class="op" id="2984471">.</span><span class="ident" id="2984472">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984481">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984499">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984554">i</span>&nbsp;<span class="op" id="2984556">:=</span>&nbsp;<span class="builtintype" id="2984559">int</span><span class="op" id="2984562">(</span><span class="ident" id="2984563">v</span><span class="op" id="2984564">.</span><span class="ident" id="2984565">flag</span><span class="op" id="2984569">)</span>&nbsp;<span class="op" id="2984571">&gt;&gt;</span>&nbsp;<span class="ident" id="2984574">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984591">if</span>&nbsp;<span class="ident" id="2984594">v</span><span class="op" id="2984595">.</span><span class="ident" id="2984596">typ</span><span class="op" id="2984599">.</span><span class="ident" id="2984600">Kind</span><span class="op" id="2984604">(</span><span class="op" id="2984605">)</span>&nbsp;<span class="op" id="2984607">==</span>&nbsp;<span class="ident" id="2984610">Interface</span>&nbsp;<span class="op" id="2984620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984624">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984650">tt</span>&nbsp;<span class="op" id="2984653">:=</span>&nbsp;<span class="op" id="2984656">(</span><span class="op" id="2984657">*</span><span class="ident" id="2984658">interfaceType</span><span class="op" id="2984671">)</span><span class="op" id="2984672">(</span><span class="ident" id="2984673">unsafe</span><span class="op" id="2984679">.</span><span class="ident" id="2984680">Pointer</span><span class="op" id="2984687">(</span><span class="ident" id="2984688">v</span><span class="op" id="2984689">.</span><span class="ident" id="2984690">typ</span><span class="op" id="2984693">)</span><span class="op" id="2984694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984698">if</span>&nbsp;<span class="builtintype" id="2984701">uint</span><span class="op" id="2984705">(</span><span class="ident" id="2984706">i</span><span class="op" id="2984707">)</span>&nbsp;<span class="op" id="2984709">&gt;=</span>&nbsp;<span class="builtintype" id="2984712">uint</span><span class="op" id="2984716">(</span><span class="builtinfunc" id="2984717">len</span><span class="op" id="2984720">(</span><span class="ident" id="2984721">tt</span><span class="op" id="2984723">.</span><span class="ident" id="2984724">methods</span><span class="op" id="2984731">)</span><span class="op" id="2984732">)</span>&nbsp;<span class="op" id="2984734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2984739">panic</span><span class="op" id="2984744">(</span><span class="string" id="2984745">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2984792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984800">m</span>&nbsp;<span class="op" id="2984802">:=</span>&nbsp;<span class="op" id="2984805">&amp;</span><span class="ident" id="2984806">tt</span><span class="op" id="2984808">.</span><span class="ident" id="2984809">methods</span><span class="op" id="2984816">[</span><span class="ident" id="2984817">i</span><span class="op" id="2984818">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984822">return</span>&nbsp;<span class="ident" id="2984829">m</span><span class="op" id="2984830">.</span><span class="ident" id="2984831">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984839">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984868">ut</span>&nbsp;<span class="op" id="2984871">:=</span>&nbsp;<span class="ident" id="2984874">v</span><span class="op" id="2984875">.</span><span class="ident" id="2984876">typ</span><span class="op" id="2984879">.</span><span class="ident" id="2984880">uncommon</span><span class="op" id="2984888">(</span><span class="op" id="2984889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984892">if</span>&nbsp;<span class="ident" id="2984895">ut</span>&nbsp;<span class="op" id="2984898">==</span>&nbsp;<span class="ident" id="2984901">nil</span>&nbsp;<span class="op" id="2984905">||</span>&nbsp;<span class="builtintype" id="2984908">uint</span><span class="op" id="2984912">(</span><span class="ident" id="2984913">i</span><span class="op" id="2984914">)</span>&nbsp;<span class="op" id="2984916">&gt;=</span>&nbsp;<span class="builtintype" id="2984919">uint</span><span class="op" id="2984923">(</span><span class="builtinfunc" id="2984924">len</span><span class="op" id="2984927">(</span><span class="ident" id="2984928">ut</span><span class="op" id="2984930">.</span><span class="ident" id="2984931">methods</span><span class="op" id="2984938">)</span><span class="op" id="2984939">)</span>&nbsp;<span class="op" id="2984941">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2984945">panic</span><span class="op" id="2984950">(</span><span class="string" id="2984951">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2984998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985004">m</span>&nbsp;<span class="op" id="2985006">:=</span>&nbsp;<span class="op" id="2985009">&amp;</span><span class="ident" id="2985010">ut</span><span class="op" id="2985012">.</span><span class="ident" id="2985013">methods</span><span class="op" id="2985020">[</span><span class="ident" id="2985021">i</span><span class="op" id="2985022">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985025">return</span>&nbsp;<span class="ident" id="2985032">m</span><span class="op" id="2985033">.</span><span class="ident" id="2985034">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2985039">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2985042">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2985093">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2985174">func</span>&nbsp;<span class="op" id="2985179">(</span><span class="ident" id="2985180">v</span>&nbsp;<span class="ident" id="2985182">Value</span><span class="op" id="2985187">)</span>&nbsp;<span class="ident" id="2985189">Uint</span><span class="op" id="2985193">(</span><span class="op" id="2985194">)</span>&nbsp;<span class="ident" id="2985196">uint64</span>&nbsp;<span class="op" id="2985203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985206">k</span>&nbsp;<span class="op" id="2985208">:=</span>&nbsp;<span class="ident" id="2985211">v</span><span class="op" id="2985212">.</span><span class="ident" id="2985213">kind</span><span class="op" id="2985217">(</span><span class="op" id="2985218">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985221">p</span>&nbsp;<span class="op" id="2985223">:=</span>&nbsp;<span class="ident" id="2985226">v</span><span class="op" id="2985227">.</span><span class="ident" id="2985228">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985233">switch</span>&nbsp;<span class="ident" id="2985240">k</span>&nbsp;<span class="op" id="2985242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985245">case</span>&nbsp;<span class="ident" id="2985250">Uint</span><span class="op" id="2985254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985258">return</span>&nbsp;<span class="ident" id="2985265">uint64</span><span class="op" id="2985271">(</span><span class="op" id="2985272">*</span><span class="op" id="2985273">(</span><span class="op" id="2985274">*</span><span class="builtintype" id="2985275">uint</span><span class="op" id="2985279">)</span><span class="op" id="2985280">(</span><span class="ident" id="2985281">p</span><span class="op" id="2985282">)</span><span class="op" id="2985283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985286">case</span>&nbsp;<span class="ident" id="2985291">Uint8</span><span class="op" id="2985296">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985300">return</span>&nbsp;<span class="ident" id="2985307">uint64</span><span class="op" id="2985313">(</span><span class="op" id="2985314">*</span><span class="op" id="2985315">(</span><span class="op" id="2985316">*</span><span class="builtintype" id="2985317">uint8</span><span class="op" id="2985322">)</span><span class="op" id="2985323">(</span><span class="ident" id="2985324">p</span><span class="op" id="2985325">)</span><span class="op" id="2985326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985329">case</span>&nbsp;<span class="ident" id="2985334">Uint16</span><span class="op" id="2985340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985344">return</span>&nbsp;<span class="ident" id="2985351">uint64</span><span class="op" id="2985357">(</span><span class="op" id="2985358">*</span><span class="op" id="2985359">(</span><span class="op" id="2985360">*</span><span class="builtintype" id="2985361">uint16</span><span class="op" id="2985367">)</span><span class="op" id="2985368">(</span><span class="ident" id="2985369">p</span><span class="op" id="2985370">)</span><span class="op" id="2985371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985374">case</span>&nbsp;<span class="ident" id="2985379">Uint32</span><span class="op" id="2985385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985389">return</span>&nbsp;<span class="ident" id="2985396">uint64</span><span class="op" id="2985402">(</span><span class="op" id="2985403">*</span><span class="op" id="2985404">(</span><span class="op" id="2985405">*</span><span class="builtintype" id="2985406">uint32</span><span class="op" id="2985412">)</span><span class="op" id="2985413">(</span><span class="ident" id="2985414">p</span><span class="op" id="2985415">)</span><span class="op" id="2985416">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985419">case</span>&nbsp;<span class="ident" id="2985424">Uint64</span><span class="op" id="2985430">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985434">return</span>&nbsp;<span class="ident" id="2985441">uint64</span><span class="op" id="2985447">(</span><span class="op" id="2985448">*</span><span class="op" id="2985449">(</span><span class="op" id="2985450">*</span><span class="ident" id="2985451">uint64</span><span class="op" id="2985457">)</span><span class="op" id="2985458">(</span><span class="ident" id="2985459">p</span><span class="op" id="2985460">)</span><span class="op" id="2985461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985464">case</span>&nbsp;<span class="ident" id="2985469">Uintptr</span><span class="op" id="2985476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985480">return</span>&nbsp;<span class="ident" id="2985487">uint64</span><span class="op" id="2985493">(</span><span class="op" id="2985494">*</span><span class="op" id="2985495">(</span><span class="op" id="2985496">*</span><span class="builtintype" id="2985497">uintptr</span><span class="op" id="2985504">)</span><span class="op" id="2985505">(</span><span class="ident" id="2985506">p</span><span class="op" id="2985507">)</span><span class="op" id="2985508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985511">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2985514">panic</span><span class="op" id="2985519">(</span><span class="op" id="2985520">&amp;</span><span class="ident" id="2985521">ValueError</span><span class="op" id="2985531">{</span><span class="string" id="2985532">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2985552">,</span>&nbsp;<span class="ident" id="2985554">v</span><span class="op" id="2985555">.</span><span class="ident" id="2985556">kind</span><span class="op" id="2985560">(</span><span class="op" id="2985561">)</span><span class="op" id="2985562">}</span><span class="op" id="2985563">)</span><br>
<span class="lineno"></span><span class="op" id="2985565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2985568">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2985613">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2985682">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2985720">func</span>&nbsp;<span class="op" id="2985725">(</span><span class="ident" id="2985726">v</span>&nbsp;<span class="ident" id="2985728">Value</span><span class="op" id="2985733">)</span>&nbsp;<span class="ident" id="2985735">UnsafeAddr</span><span class="op" id="2985745">(</span><span class="op" id="2985746">)</span>&nbsp;<span class="builtintype" id="2985748">uintptr</span>&nbsp;<span class="op" id="2985756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985759">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985779">if</span>&nbsp;<span class="ident" id="2985782">v</span><span class="op" id="2985783">.</span><span class="ident" id="2985784">typ</span>&nbsp;<span class="op" id="2985788">==</span>&nbsp;<span class="ident" id="2985791">nil</span>&nbsp;<span class="op" id="2985795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2985799">panic</span><span class="op" id="2985804">(</span><span class="op" id="2985805">&amp;</span><span class="ident" id="2985806">ValueError</span><span class="op" id="2985816">{</span><span class="string" id="2985817">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2985843">,</span>&nbsp;<span class="ident" id="2985845">Invalid</span><span class="op" id="2985852">}</span><span class="op" id="2985853">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985859">if</span>&nbsp;<span class="ident" id="2985862">v</span><span class="op" id="2985863">.</span><span class="ident" id="2985864">flag</span><span class="op" id="2985868">&amp;</span><span class="ident" id="2985869">flagAddr</span>&nbsp;<span class="op" id="2985878">==</span>&nbsp;<span class="num" id="2985881">0</span>&nbsp;<span class="op" id="2985883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2985887">panic</span><span class="op" id="2985892">(</span><span class="string" id="2985893">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2985942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985948">return</span>&nbsp;<span class="builtintype" id="2985955">uintptr</span><span class="op" id="2985962">(</span><span class="ident" id="2985963">v</span><span class="op" id="2985964">.</span><span class="ident" id="2985965">ptr</span><span class="op" id="2985968">)</span><br>
<span class="lineno">1695</span><span class="op" id="2985970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2985973">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2986032">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2986099">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2986129">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2986197">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2986267">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2986330">type</span>&nbsp;<span class="ident" id="2986335">StringHeader</span>&nbsp;<span class="keyword" id="2986348">struct</span>&nbsp;<span class="op" id="2986355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986358">Data</span>&nbsp;<span class="builtintype" id="2986363">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986372">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2986377">int</span><br>
<span class="lineno"></span><span class="op" id="2986381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986384">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2986460">type</span>&nbsp;<span class="ident" id="2986465">stringHeader</span>&nbsp;<span class="keyword" id="2986478">struct</span>&nbsp;<span class="op" id="2986485">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986488">Data</span>&nbsp;<span class="ident" id="2986493">unsafe</span><span class="op" id="2986499">.</span><span class="ident" id="2986500">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986509">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2986514">int</span><br>
<span class="lineno"></span><span class="op" id="2986518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986521">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2986578">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2986645">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2986675">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2986743">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2986813">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2986876">type</span>&nbsp;<span class="ident" id="2986881">SliceHeader</span>&nbsp;<span class="keyword" id="2986893">struct</span>&nbsp;<span class="op" id="2986900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986903">Data</span>&nbsp;<span class="builtintype" id="2986908">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986917">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2986922">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986927">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2986932">int</span><br>
<span class="lineno"></span><span class="op" id="2986936">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2986939">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2987013">type</span>&nbsp;<span class="ident" id="2987018">sliceHeader</span>&nbsp;<span class="keyword" id="2987030">struct</span>&nbsp;<span class="op" id="2987037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987040">Data</span>&nbsp;<span class="ident" id="2987045">unsafe</span><span class="op" id="2987051">.</span><span class="ident" id="2987052">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987061">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2987066">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987071">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2987076">int</span><br>
<span class="lineno"></span><span class="op" id="2987080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2987083">func</span>&nbsp;<span class="ident" id="2987088">typesMustMatch</span><span class="op" id="2987102">(</span><span class="ident" id="2987103">what</span>&nbsp;<span class="builtintype" id="2987108">string</span><span class="op" id="2987114">,</span>&nbsp;<span class="ident" id="2987116">t1</span><span class="op" id="2987118">,</span>&nbsp;<span class="ident" id="2987120">t2</span>&nbsp;<span class="ident" id="2987123">Type</span><span class="op" id="2987127">)</span>&nbsp;<span class="op" id="2987129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987132">if</span>&nbsp;<span class="ident" id="2987135">t1</span>&nbsp;<span class="op" id="2987138">!=</span>&nbsp;<span class="ident" id="2987141">t2</span>&nbsp;<span class="op" id="2987144">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2987148">panic</span><span class="op" id="2987153">(</span><span class="ident" id="2987154">what</span>&nbsp;<span class="op" id="2987159">+</span>&nbsp;<span class="string" id="2987161">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2987166">+</span>&nbsp;<span class="ident" id="2987168">t1</span><span class="op" id="2987170">.</span><span class="ident" id="2987171">String</span><span class="op" id="2987177">(</span><span class="op" id="2987178">)</span>&nbsp;<span class="op" id="2987180">+</span>&nbsp;<span class="string" id="2987182">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2987189">+</span>&nbsp;<span class="ident" id="2987191">t2</span><span class="op" id="2987193">.</span><span class="ident" id="2987194">String</span><span class="op" id="2987200">(</span><span class="op" id="2987201">)</span><span class="op" id="2987202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987205">}</span><br>
<span class="lineno"></span><span class="op" id="2987207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987210">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2987286">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2987361">func</span>&nbsp;<span class="ident" id="2987366">grow</span><span class="op" id="2987370">(</span><span class="ident" id="2987371">s</span>&nbsp;<span class="ident" id="2987373">Value</span><span class="op" id="2987378">,</span>&nbsp;<span class="ident" id="2987380">extra</span>&nbsp;<span class="builtintype" id="2987386">int</span><span class="op" id="2987389">)</span>&nbsp;<span class="op" id="2987391">(</span><span class="ident" id="2987392">Value</span><span class="op" id="2987397">,</span>&nbsp;<span class="builtintype" id="2987399">int</span><span class="op" id="2987402">,</span>&nbsp;<span class="builtintype" id="2987404">int</span><span class="op" id="2987407">)</span>&nbsp;<span class="op" id="2987409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987412">i0</span>&nbsp;<span class="op" id="2987415">:=</span>&nbsp;<span class="ident" id="2987418">s</span><span class="op" id="2987419">.</span><span class="ident" id="2987420">Len</span><span class="op" id="2987423">(</span><span class="op" id="2987424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987427">i1</span>&nbsp;<span class="op" id="2987430">:=</span>&nbsp;<span class="ident" id="2987433">i0</span>&nbsp;<span class="op" id="2987436">+</span>&nbsp;<span class="ident" id="2987438">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987445">if</span>&nbsp;<span class="ident" id="2987448">i1</span>&nbsp;<span class="op" id="2987451">&lt;</span>&nbsp;<span class="ident" id="2987453">i0</span>&nbsp;<span class="op" id="2987456">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2987460">panic</span><span class="op" id="2987465">(</span><span class="string" id="2987466">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2987498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987504">m</span>&nbsp;<span class="op" id="2987506">:=</span>&nbsp;<span class="ident" id="2987509">s</span><span class="op" id="2987510">.</span><span class="ident" id="2987511">Cap</span><span class="op" id="2987514">(</span><span class="op" id="2987515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987518">if</span>&nbsp;<span class="ident" id="2987521">i1</span>&nbsp;<span class="op" id="2987524">&lt;=</span>&nbsp;<span class="ident" id="2987527">m</span>&nbsp;<span class="op" id="2987529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987533">return</span>&nbsp;<span class="ident" id="2987540">s</span><span class="op" id="2987541">.</span><span class="ident" id="2987542">Slice</span><span class="op" id="2987547">(</span><span class="num" id="2987548">0</span><span class="op" id="2987549">,</span>&nbsp;<span class="ident" id="2987551">i1</span><span class="op" id="2987553">)</span><span class="op" id="2987554">,</span>&nbsp;<span class="ident" id="2987556">i0</span><span class="op" id="2987558">,</span>&nbsp;<span class="ident" id="2987560">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987567">if</span>&nbsp;<span class="ident" id="2987570">m</span>&nbsp;<span class="op" id="2987572">==</span>&nbsp;<span class="num" id="2987575">0</span>&nbsp;<span class="op" id="2987577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987581">m</span>&nbsp;<span class="op" id="2987583">=</span>&nbsp;<span class="ident" id="2987585">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987592">}</span>&nbsp;<span class="keyword" id="2987594">else</span>&nbsp;<span class="op" id="2987599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987603">for</span>&nbsp;<span class="ident" id="2987607">m</span>&nbsp;<span class="op" id="2987609">&lt;</span>&nbsp;<span class="ident" id="2987611">i1</span>&nbsp;<span class="op" id="2987614">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987619">if</span>&nbsp;<span class="ident" id="2987622">i0</span>&nbsp;<span class="op" id="2987625">&lt;</span>&nbsp;<span class="num" id="2987627">1024</span>&nbsp;<span class="op" id="2987632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987638">m</span>&nbsp;<span class="op" id="2987640">+=</span>&nbsp;<span class="ident" id="2987643">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987648">}</span>&nbsp;<span class="keyword" id="2987650">else</span>&nbsp;<span class="op" id="2987655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987661">m</span>&nbsp;<span class="op" id="2987663">+=</span>&nbsp;<span class="ident" id="2987666">m</span>&nbsp;<span class="op" id="2987668">/</span>&nbsp;<span class="num" id="2987670">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987675">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987685">t</span>&nbsp;<span class="op" id="2987687">:=</span>&nbsp;<span class="ident" id="2987690">MakeSlice</span><span class="op" id="2987699">(</span><span class="ident" id="2987700">s</span><span class="op" id="2987701">.</span><span class="ident" id="2987702">Type</span><span class="op" id="2987706">(</span><span class="op" id="2987707">)</span><span class="op" id="2987708">,</span>&nbsp;<span class="ident" id="2987710">i1</span><span class="op" id="2987712">,</span>&nbsp;<span class="ident" id="2987714">m</span><span class="op" id="2987715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987718">Copy</span><span class="op" id="2987722">(</span><span class="ident" id="2987723">t</span><span class="op" id="2987724">,</span>&nbsp;<span class="ident" id="2987726">s</span><span class="op" id="2987727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987730">return</span>&nbsp;<span class="ident" id="2987737">t</span><span class="op" id="2987738">,</span>&nbsp;<span class="ident" id="2987740">i0</span><span class="op" id="2987742">,</span>&nbsp;<span class="ident" id="2987744">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2987747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987750">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2987827">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2987903">func</span>&nbsp;<span class="ident" id="2987908">Append</span><span class="op" id="2987914">(</span><span class="ident" id="2987915">s</span>&nbsp;<span class="ident" id="2987917">Value</span><span class="op" id="2987922">,</span>&nbsp;<span class="ident" id="2987924">x</span>&nbsp;<span class="op" id="2987926">...</span><span class="ident" id="2987929">Value</span><span class="op" id="2987934">)</span>&nbsp;<span class="ident" id="2987936">Value</span>&nbsp;<span class="op" id="2987942">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987945">s</span><span class="op" id="2987946">.</span><span class="ident" id="2987947">mustBe</span><span class="op" id="2987953">(</span><span class="ident" id="2987954">Slice</span><span class="op" id="2987959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987962">s</span><span class="op" id="2987963">,</span>&nbsp;<span class="ident" id="2987965">i0</span><span class="op" id="2987967">,</span>&nbsp;<span class="ident" id="2987969">i1</span>&nbsp;<span class="op" id="2987972">:=</span>&nbsp;<span class="ident" id="2987975">grow</span><span class="op" id="2987979">(</span><span class="ident" id="2987980">s</span><span class="op" id="2987981">,</span>&nbsp;<span class="builtinfunc" id="2987983">len</span><span class="op" id="2987986">(</span><span class="ident" id="2987987">x</span><span class="op" id="2987988">)</span><span class="op" id="2987989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987992">for</span>&nbsp;<span class="ident" id="2987996">i</span><span class="op" id="2987997">,</span>&nbsp;<span class="ident" id="2987999">j</span>&nbsp;<span class="op" id="2988001">:=</span>&nbsp;<span class="ident" id="2988004">i0</span><span class="op" id="2988006">,</span>&nbsp;<span class="num" id="2988008">0</span><span class="op" id="2988009">;</span>&nbsp;<span class="ident" id="2988011">i</span>&nbsp;<span class="op" id="2988013">&lt;</span>&nbsp;<span class="ident" id="2988015">i1</span><span class="op" id="2988017">;</span>&nbsp;<span class="ident" id="2988019">i</span><span class="op" id="2988020">,</span>&nbsp;<span class="ident" id="2988022">j</span>&nbsp;<span class="op" id="2988024">=</span>&nbsp;<span class="ident" id="2988026">i</span><span class="op" id="2988027">+</span><span class="num" id="2988028">1</span><span class="op" id="2988029">,</span>&nbsp;<span class="ident" id="2988031">j</span><span class="op" id="2988032">+</span><span class="num" id="2988033">1</span>&nbsp;<span class="op" id="2988035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988039">s</span><span class="op" id="2988040">.</span><span class="ident" id="2988041">Index</span><span class="op" id="2988046">(</span><span class="ident" id="2988047">i</span><span class="op" id="2988048">)</span><span class="op" id="2988049">.</span><span class="ident" id="2988050">Set</span><span class="op" id="2988053">(</span><span class="ident" id="2988054">x</span><span class="op" id="2988055">[</span><span class="ident" id="2988056">j</span><span class="op" id="2988057">]</span><span class="op" id="2988058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988061">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988064">return</span>&nbsp;<span class="ident" id="2988071">s</span><br>
<span class="lineno"></span><span class="op" id="2988073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988076">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2988155">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2988210">func</span>&nbsp;<span class="ident" id="2988215">AppendSlice</span><span class="op" id="2988226">(</span><span class="ident" id="2988227">s</span><span class="op" id="2988228">,</span>&nbsp;<span class="ident" id="2988230">t</span>&nbsp;<span class="ident" id="2988232">Value</span><span class="op" id="2988237">)</span>&nbsp;<span class="ident" id="2988239">Value</span>&nbsp;<span class="op" id="2988245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988248">s</span><span class="op" id="2988249">.</span><span class="ident" id="2988250">mustBe</span><span class="op" id="2988256">(</span><span class="ident" id="2988257">Slice</span><span class="op" id="2988262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988265">t</span><span class="op" id="2988266">.</span><span class="ident" id="2988267">mustBe</span><span class="op" id="2988273">(</span><span class="ident" id="2988274">Slice</span><span class="op" id="2988279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988282">typesMustMatch</span><span class="op" id="2988296">(</span><span class="string" id="2988297">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2988318">,</span>&nbsp;<span class="ident" id="2988320">s</span><span class="op" id="2988321">.</span><span class="ident" id="2988322">Type</span><span class="op" id="2988326">(</span><span class="op" id="2988327">)</span><span class="op" id="2988328">.</span><span class="ident" id="2988329">Elem</span><span class="op" id="2988333">(</span><span class="op" id="2988334">)</span><span class="op" id="2988335">,</span>&nbsp;<span class="ident" id="2988337">t</span><span class="op" id="2988338">.</span><span class="ident" id="2988339">Type</span><span class="op" id="2988343">(</span><span class="op" id="2988344">)</span><span class="op" id="2988345">.</span><span class="ident" id="2988346">Elem</span><span class="op" id="2988350">(</span><span class="op" id="2988351">)</span><span class="op" id="2988352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988355">s</span><span class="op" id="2988356">,</span>&nbsp;<span class="ident" id="2988358">i0</span><span class="op" id="2988360">,</span>&nbsp;<span class="ident" id="2988362">i1</span>&nbsp;<span class="op" id="2988365">:=</span>&nbsp;<span class="ident" id="2988368">grow</span><span class="op" id="2988372">(</span><span class="ident" id="2988373">s</span><span class="op" id="2988374">,</span>&nbsp;<span class="ident" id="2988376">t</span><span class="op" id="2988377">.</span><span class="ident" id="2988378">Len</span><span class="op" id="2988381">(</span><span class="op" id="2988382">)</span><span class="op" id="2988383">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988386">Copy</span><span class="op" id="2988390">(</span><span class="ident" id="2988391">s</span><span class="op" id="2988392">.</span><span class="ident" id="2988393">Slice</span><span class="op" id="2988398">(</span><span class="ident" id="2988399">i0</span><span class="op" id="2988401">,</span>&nbsp;<span class="ident" id="2988403">i1</span><span class="op" id="2988405">)</span><span class="op" id="2988406">,</span>&nbsp;<span class="ident" id="2988408">t</span><span class="op" id="2988409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988412">return</span>&nbsp;<span class="ident" id="2988419">s</span><br>
<span class="lineno"></span><span class="op" id="2988421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988424">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2988481">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2988531">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2988576">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2988631">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2988679">func</span>&nbsp;<span class="ident" id="2988684">Copy</span><span class="op" id="2988688">(</span><span class="ident" id="2988689">dst</span><span class="op" id="2988692">,</span>&nbsp;<span class="ident" id="2988694">src</span>&nbsp;<span class="ident" id="2988698">Value</span><span class="op" id="2988703">)</span>&nbsp;<span class="builtintype" id="2988705">int</span>&nbsp;<span class="op" id="2988709">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988712">dk</span>&nbsp;<span class="op" id="2988715">:=</span>&nbsp;<span class="ident" id="2988718">dst</span><span class="op" id="2988721">.</span><span class="ident" id="2988722">kind</span><span class="op" id="2988726">(</span><span class="op" id="2988727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988730">if</span>&nbsp;<span class="ident" id="2988733">dk</span>&nbsp;<span class="op" id="2988736">!=</span>&nbsp;<span class="ident" id="2988739">Array</span>&nbsp;<span class="op" id="2988745">&amp;&amp;</span>&nbsp;<span class="ident" id="2988748">dk</span>&nbsp;<span class="op" id="2988751">!=</span>&nbsp;<span class="ident" id="2988754">Slice</span>&nbsp;<span class="op" id="2988760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2988764">panic</span><span class="op" id="2988769">(</span><span class="op" id="2988770">&amp;</span><span class="ident" id="2988771">ValueError</span><span class="op" id="2988781">{</span><span class="string" id="2988782">&#34;reflect.Copy&#34;</span><span class="op" id="2988796">,</span>&nbsp;<span class="ident" id="2988798">dk</span><span class="op" id="2988800">}</span><span class="op" id="2988801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988807">if</span>&nbsp;<span class="ident" id="2988810">dk</span>&nbsp;<span class="op" id="2988813">==</span>&nbsp;<span class="ident" id="2988816">Array</span>&nbsp;<span class="op" id="2988822">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988826">dst</span><span class="op" id="2988829">.</span><span class="ident" id="2988830">mustBeAssignable</span><span class="op" id="2988846">(</span><span class="op" id="2988847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988853">dst</span><span class="op" id="2988856">.</span><span class="ident" id="2988857">mustBeExported</span><span class="op" id="2988871">(</span><span class="op" id="2988872">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988876">sk</span>&nbsp;<span class="op" id="2988879">:=</span>&nbsp;<span class="ident" id="2988882">src</span><span class="op" id="2988885">.</span><span class="ident" id="2988886">kind</span><span class="op" id="2988890">(</span><span class="op" id="2988891">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988894">if</span>&nbsp;<span class="ident" id="2988897">sk</span>&nbsp;<span class="op" id="2988900">!=</span>&nbsp;<span class="ident" id="2988903">Array</span>&nbsp;<span class="op" id="2988909">&amp;&amp;</span>&nbsp;<span class="ident" id="2988912">sk</span>&nbsp;<span class="op" id="2988915">!=</span>&nbsp;<span class="ident" id="2988918">Slice</span>&nbsp;<span class="op" id="2988924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2988928">panic</span><span class="op" id="2988933">(</span><span class="op" id="2988934">&amp;</span><span class="ident" id="2988935">ValueError</span><span class="op" id="2988945">{</span><span class="string" id="2988946">&#34;reflect.Copy&#34;</span><span class="op" id="2988960">,</span>&nbsp;<span class="ident" id="2988962">sk</span><span class="op" id="2988964">}</span><span class="op" id="2988965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2988968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988971">src</span><span class="op" id="2988974">.</span><span class="ident" id="2988975">mustBeExported</span><span class="op" id="2988989">(</span><span class="op" id="2988990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2988994">de</span>&nbsp;<span class="op" id="2988997">:=</span>&nbsp;<span class="ident" id="2989000">dst</span><span class="op" id="2989003">.</span><span class="ident" id="2989004">typ</span><span class="op" id="2989007">.</span><span class="ident" id="2989008">Elem</span><span class="op" id="2989012">(</span><span class="op" id="2989013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989016">se</span>&nbsp;<span class="op" id="2989019">:=</span>&nbsp;<span class="ident" id="2989022">src</span><span class="op" id="2989025">.</span><span class="ident" id="2989026">typ</span><span class="op" id="2989029">.</span><span class="ident" id="2989030">Elem</span><span class="op" id="2989034">(</span><span class="op" id="2989035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989038">typesMustMatch</span><span class="op" id="2989052">(</span><span class="string" id="2989053">&#34;reflect.Copy&#34;</span><span class="op" id="2989067">,</span>&nbsp;<span class="ident" id="2989069">de</span><span class="op" id="2989071">,</span>&nbsp;<span class="ident" id="2989073">se</span><span class="op" id="2989075">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989079">n</span>&nbsp;<span class="op" id="2989081">:=</span>&nbsp;<span class="ident" id="2989084">dst</span><span class="op" id="2989087">.</span><span class="ident" id="2989088">Len</span><span class="op" id="2989091">(</span><span class="op" id="2989092">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989095">if</span>&nbsp;<span class="ident" id="2989098">sn</span>&nbsp;<span class="op" id="2989101">:=</span>&nbsp;<span class="ident" id="2989104">src</span><span class="op" id="2989107">.</span><span class="ident" id="2989108">Len</span><span class="op" id="2989111">(</span><span class="op" id="2989112">)</span><span class="op" id="2989113">;</span>&nbsp;<span class="ident" id="2989115">n</span>&nbsp;<span class="op" id="2989117">&gt;</span>&nbsp;<span class="ident" id="2989119">sn</span>&nbsp;<span class="op" id="2989122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989126">n</span>&nbsp;<span class="op" id="2989128">=</span>&nbsp;<span class="ident" id="2989130">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2989138">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989160">var</span>&nbsp;<span class="ident" id="2989164">da</span><span class="op" id="2989166">,</span>&nbsp;<span class="ident" id="2989168">sa</span>&nbsp;<span class="ident" id="2989171">unsafe</span><span class="op" id="2989177">.</span><span class="ident" id="2989178">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989187">if</span>&nbsp;<span class="ident" id="2989190">dk</span>&nbsp;<span class="op" id="2989193">==</span>&nbsp;<span class="ident" id="2989196">Array</span>&nbsp;<span class="op" id="2989202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989206">da</span>&nbsp;<span class="op" id="2989209">=</span>&nbsp;<span class="ident" id="2989211">dst</span><span class="op" id="2989214">.</span><span class="ident" id="2989215">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989220">}</span>&nbsp;<span class="keyword" id="2989222">else</span>&nbsp;<span class="op" id="2989227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989231">da</span>&nbsp;<span class="op" id="2989234">=</span>&nbsp;<span class="op" id="2989236">(</span><span class="op" id="2989237">*</span><span class="ident" id="2989238">sliceHeader</span><span class="op" id="2989249">)</span><span class="op" id="2989250">(</span><span class="ident" id="2989251">dst</span><span class="op" id="2989254">.</span><span class="ident" id="2989255">ptr</span><span class="op" id="2989258">)</span><span class="op" id="2989259">.</span><span class="ident" id="2989260">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989269">if</span>&nbsp;<span class="ident" id="2989272">src</span><span class="op" id="2989275">.</span><span class="ident" id="2989276">flag</span><span class="op" id="2989280">&amp;</span><span class="ident" id="2989281">flagIndir</span>&nbsp;<span class="op" id="2989291">==</span>&nbsp;<span class="num" id="2989294">0</span>&nbsp;<span class="op" id="2989296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989300">sa</span>&nbsp;<span class="op" id="2989303">=</span>&nbsp;<span class="ident" id="2989305">unsafe</span><span class="op" id="2989311">.</span><span class="ident" id="2989312">Pointer</span><span class="op" id="2989319">(</span><span class="op" id="2989320">&amp;</span><span class="ident" id="2989321">src</span><span class="op" id="2989324">.</span><span class="ident" id="2989325">ptr</span><span class="op" id="2989328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989331">}</span>&nbsp;<span class="keyword" id="2989333">else</span>&nbsp;<span class="keyword" id="2989338">if</span>&nbsp;<span class="ident" id="2989341">sk</span>&nbsp;<span class="op" id="2989344">==</span>&nbsp;<span class="ident" id="2989347">Array</span>&nbsp;<span class="op" id="2989353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989357">sa</span>&nbsp;<span class="op" id="2989360">=</span>&nbsp;<span class="ident" id="2989362">src</span><span class="op" id="2989365">.</span><span class="ident" id="2989366">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989371">}</span>&nbsp;<span class="keyword" id="2989373">else</span>&nbsp;<span class="op" id="2989378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989382">sa</span>&nbsp;<span class="op" id="2989385">=</span>&nbsp;<span class="op" id="2989387">(</span><span class="op" id="2989388">*</span><span class="ident" id="2989389">sliceHeader</span><span class="op" id="2989400">)</span><span class="op" id="2989401">(</span><span class="ident" id="2989402">src</span><span class="op" id="2989405">.</span><span class="ident" id="2989406">ptr</span><span class="op" id="2989409">)</span><span class="op" id="2989410">.</span><span class="ident" id="2989411">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2989417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989420">memmove</span><span class="op" id="2989427">(</span><span class="ident" id="2989428">da</span><span class="op" id="2989430">,</span>&nbsp;<span class="ident" id="2989432">sa</span><span class="op" id="2989434">,</span>&nbsp;<span class="builtintype" id="2989436">uintptr</span><span class="op" id="2989443">(</span><span class="ident" id="2989444">n</span><span class="op" id="2989445">)</span><span class="op" id="2989446">*</span><span class="ident" id="2989447">de</span><span class="op" id="2989449">.</span><span class="ident" id="2989450">Size</span><span class="op" id="2989454">(</span><span class="op" id="2989455">)</span><span class="op" id="2989456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2989459">return</span>&nbsp;<span class="ident" id="2989466">n</span><br>
<span class="lineno">1835</span><span class="op" id="2989468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2989471">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2989526">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2989581">type</span>&nbsp;<span class="ident" id="2989586">runtimeSelect</span>&nbsp;<span class="keyword" id="2989600">struct</span>&nbsp;<span class="op" id="2989607">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989610">dir</span>&nbsp;<span class="builtintype" id="2989614">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2989629">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989656">typ</span>&nbsp;<span class="op" id="2989660">*</span><span class="ident" id="2989661">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2989675">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989692">ch</span>&nbsp;&nbsp;<span class="ident" id="2989696">unsafe</span><span class="op" id="2989702">.</span><span class="ident" id="2989703">Pointer</span>&nbsp;<span class="comment" id="2989711">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2989723">val</span>&nbsp;<span class="ident" id="2989727">unsafe</span><span class="op" id="2989733">.</span><span class="ident" id="2989734">Pointer</span>&nbsp;<span class="comment" id="2989742">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2989802">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2989805">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2989873">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2989945">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2990015">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2990035">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2990049">func</span>&nbsp;<span class="ident" id="2990054">rselect</span><span class="op" id="2990061">(</span><span class="op" id="2990062">[</span><span class="op" id="2990063">]</span><span class="ident" id="2990064">runtimeSelect</span><span class="op" id="2990077">)</span>&nbsp;<span class="op" id="2990079">(</span><span class="ident" id="2990080">chosen</span>&nbsp;<span class="builtintype" id="2990087">int</span><span class="op" id="2990090">,</span>&nbsp;<span class="ident" id="2990092">recvOK</span>&nbsp;<span class="builtintype" id="2990099">bool</span><span class="op" id="2990103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2990106">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2990177">type</span>&nbsp;<span class="ident" id="2990182">SelectDir</span>&nbsp;<span class="builtintype" id="2990192">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2990197">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2990264">const</span>&nbsp;<span class="op" id="2990270">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990273">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2990287">SelectDir</span>&nbsp;<span class="op" id="2990297">=</span>&nbsp;<span class="ident" id="2990299">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990305">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2990329">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990351">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2990375">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2990392">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2990416">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2990427">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2990430">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2990493">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2990558">//</span><br>
<span class="lineno"></span><span class="comment" id="2990561">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2990625">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2990663">//</span><br>
<span class="lineno"></span><span class="comment" id="2990666">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2990729">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2990820">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2990909">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2991001">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2991017">//</span><br>
<span class="lineno"></span><span class="comment" id="2991020">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2991086">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2991171">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2991262">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2991345">//</span><br>
<span class="lineno"></span><span class="keyword" id="2991348">type</span>&nbsp;<span class="ident" id="2991353">SelectCase</span>&nbsp;<span class="keyword" id="2991364">struct</span>&nbsp;<span class="op" id="2991371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991374">Dir</span>&nbsp;&nbsp;<span class="ident" id="2991379">SelectDir</span>&nbsp;<span class="comment" id="2991389">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991411">Chan</span>&nbsp;<span class="ident" id="2991416">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2991426">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991467">Send</span>&nbsp;<span class="ident" id="2991472">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2991482">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2991510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2991513">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2991583">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2991658">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2991712">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2991784">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2991855">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2991932">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2992004">func</span>&nbsp;<span class="ident" id="2992009">Select</span><span class="op" id="2992015">(</span><span class="ident" id="2992016">cases</span>&nbsp;<span class="op" id="2992022">[</span><span class="op" id="2992023">]</span><span class="ident" id="2992024">SelectCase</span><span class="op" id="2992034">)</span>&nbsp;<span class="op" id="2992036">(</span><span class="ident" id="2992037">chosen</span>&nbsp;<span class="builtintype" id="2992044">int</span><span class="op" id="2992047">,</span>&nbsp;<span class="ident" id="2992049">recv</span>&nbsp;<span class="ident" id="2992054">Value</span><span class="op" id="2992059">,</span>&nbsp;<span class="ident" id="2992061">recvOK</span>&nbsp;<span class="builtintype" id="2992068">bool</span><span class="op" id="2992072">)</span>&nbsp;<span class="op" id="2992074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2992077">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2992151">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2992226">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992284">runcases</span>&nbsp;<span class="op" id="2992293">:=</span>&nbsp;<span class="builtinfunc" id="2992296">make</span><span class="op" id="2992300">(</span><span class="op" id="2992301">[</span><span class="op" id="2992302">]</span><span class="ident" id="2992303">runtimeSelect</span><span class="op" id="2992316">,</span>&nbsp;<span class="builtinfunc" id="2992318">len</span><span class="op" id="2992321">(</span><span class="ident" id="2992322">cases</span><span class="op" id="2992327">)</span><span class="op" id="2992328">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992331">haveDefault</span>&nbsp;<span class="op" id="2992343">:=</span>&nbsp;<span class="builtintype" id="2992346">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992353">for</span>&nbsp;<span class="ident" id="2992357">i</span><span class="op" id="2992358">,</span>&nbsp;<span class="ident" id="2992360">c</span>&nbsp;<span class="op" id="2992362">:=</span>&nbsp;<span class="keyword" id="2992365">range</span>&nbsp;<span class="ident" id="2992371">cases</span>&nbsp;<span class="op" id="2992377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992381">rc</span>&nbsp;<span class="op" id="2992384">:=</span>&nbsp;<span class="op" id="2992387">&amp;</span><span class="ident" id="2992388">runcases</span><span class="op" id="2992396">[</span><span class="ident" id="2992397">i</span><span class="op" id="2992398">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992402">rc</span><span class="op" id="2992404">.</span><span class="ident" id="2992405">dir</span>&nbsp;<span class="op" id="2992409">=</span>&nbsp;<span class="builtintype" id="2992411">uintptr</span><span class="op" id="2992418">(</span><span class="ident" id="2992419">c</span><span class="op" id="2992420">.</span><span class="ident" id="2992421">Dir</span><span class="op" id="2992424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992428">switch</span>&nbsp;<span class="ident" id="2992435">c</span><span class="op" id="2992436">.</span><span class="ident" id="2992437">Dir</span>&nbsp;<span class="op" id="2992441">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992445">default</span><span class="op" id="2992452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2992457">panic</span><span class="op" id="2992462">(</span><span class="string" id="2992463">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2992492">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992497">case</span>&nbsp;<span class="ident" id="2992502">SelectDefault</span><span class="op" id="2992515">:</span>&nbsp;<span class="comment" id="2992517">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992531">if</span>&nbsp;<span class="ident" id="2992534">haveDefault</span>&nbsp;<span class="op" id="2992546">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2992552">panic</span><span class="op" id="2992557">(</span><span class="string" id="2992558">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2992598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992608">haveDefault</span>&nbsp;<span class="op" id="2992620">=</span>&nbsp;<span class="builtintype" id="2992622">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992630">if</span>&nbsp;<span class="ident" id="2992633">c</span><span class="op" id="2992634">.</span><span class="ident" id="2992635">Chan</span><span class="op" id="2992639">.</span><span class="ident" id="2992640">IsValid</span><span class="op" id="2992647">(</span><span class="op" id="2992648">)</span>&nbsp;<span class="op" id="2992650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2992656">panic</span><span class="op" id="2992661">(</span><span class="string" id="2992662">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2992707">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992717">if</span>&nbsp;<span class="ident" id="2992720">c</span><span class="op" id="2992721">.</span><span class="ident" id="2992722">Send</span><span class="op" id="2992726">.</span><span class="ident" id="2992727">IsValid</span><span class="op" id="2992734">(</span><span class="op" id="2992735">)</span>&nbsp;<span class="op" id="2992737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2992743">panic</span><span class="op" id="2992748">(</span><span class="string" id="2992749">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2992794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992804">case</span>&nbsp;<span class="ident" id="2992809">SelectSend</span><span class="op" id="2992819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992824">ch</span>&nbsp;<span class="op" id="2992827">:=</span>&nbsp;<span class="ident" id="2992830">c</span><span class="op" id="2992831">.</span><span class="ident" id="2992832">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992840">if</span>&nbsp;<span class="op" id="2992843">!</span><span class="ident" id="2992844">ch</span><span class="op" id="2992846">.</span><span class="ident" id="2992847">IsValid</span><span class="op" id="2992854">(</span><span class="op" id="2992855">)</span>&nbsp;<span class="op" id="2992857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992863">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992872">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992877">ch</span><span class="op" id="2992879">.</span><span class="ident" id="2992880">mustBe</span><span class="op" id="2992886">(</span><span class="ident" id="2992887">Chan</span><span class="op" id="2992891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992896">ch</span><span class="op" id="2992898">.</span><span class="ident" id="2992899">mustBeExported</span><span class="op" id="2992913">(</span><span class="op" id="2992914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992919">tt</span>&nbsp;<span class="op" id="2992922">:=</span>&nbsp;<span class="op" id="2992925">(</span><span class="op" id="2992926">*</span><span class="ident" id="2992927">chanType</span><span class="op" id="2992935">)</span><span class="op" id="2992936">(</span><span class="ident" id="2992937">unsafe</span><span class="op" id="2992943">.</span><span class="ident" id="2992944">Pointer</span><span class="op" id="2992951">(</span><span class="ident" id="2992952">ch</span><span class="op" id="2992954">.</span><span class="ident" id="2992955">typ</span><span class="op" id="2992958">)</span><span class="op" id="2992959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992964">if</span>&nbsp;<span class="ident" id="2992967">ChanDir</span><span class="op" id="2992974">(</span><span class="ident" id="2992975">tt</span><span class="op" id="2992977">.</span><span class="ident" id="2992978">dir</span><span class="op" id="2992981">)</span><span class="op" id="2992982">&amp;</span><span class="ident" id="2992983">SendDir</span>&nbsp;<span class="op" id="2992991">==</span>&nbsp;<span class="num" id="2992994">0</span>&nbsp;<span class="op" id="2992996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2993002">panic</span><span class="op" id="2993007">(</span><span class="string" id="2993008">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2993062">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993072">rc</span><span class="op" id="2993074">.</span><span class="ident" id="2993075">ch</span>&nbsp;<span class="op" id="2993078">=</span>&nbsp;<span class="ident" id="2993080">ch</span><span class="op" id="2993082">.</span><span class="ident" id="2993083">pointer</span><span class="op" id="2993090">(</span><span class="op" id="2993091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993096">rc</span><span class="op" id="2993098">.</span><span class="ident" id="2993099">typ</span>&nbsp;<span class="op" id="2993103">=</span>&nbsp;<span class="op" id="2993105">&amp;</span><span class="ident" id="2993106">tt</span><span class="op" id="2993108">.</span><span class="ident" id="2993109">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993118">v</span>&nbsp;<span class="op" id="2993120">:=</span>&nbsp;<span class="ident" id="2993123">c</span><span class="op" id="2993124">.</span><span class="ident" id="2993125">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993133">if</span>&nbsp;<span class="op" id="2993136">!</span><span class="ident" id="2993137">v</span><span class="op" id="2993138">.</span><span class="ident" id="2993139">IsValid</span><span class="op" id="2993146">(</span><span class="op" id="2993147">)</span>&nbsp;<span class="op" id="2993149">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2993155">panic</span><span class="op" id="2993160">(</span><span class="string" id="2993161">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2993210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993220">v</span><span class="op" id="2993221">.</span><span class="ident" id="2993222">mustBeExported</span><span class="op" id="2993236">(</span><span class="op" id="2993237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993242">v</span>&nbsp;<span class="op" id="2993244">=</span>&nbsp;<span class="ident" id="2993246">v</span><span class="op" id="2993247">.</span><span class="ident" id="2993248">assignTo</span><span class="op" id="2993256">(</span><span class="string" id="2993257">&#34;reflect.Select&#34;</span><span class="op" id="2993273">,</span>&nbsp;<span class="ident" id="2993275">tt</span><span class="op" id="2993277">.</span><span class="ident" id="2993278">elem</span><span class="op" id="2993282">,</span>&nbsp;<span class="ident" id="2993284">nil</span><span class="op" id="2993287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993292">if</span>&nbsp;<span class="ident" id="2993295">v</span><span class="op" id="2993296">.</span><span class="ident" id="2993297">flag</span><span class="op" id="2993301">&amp;</span><span class="ident" id="2993302">flagIndir</span>&nbsp;<span class="op" id="2993312">!=</span>&nbsp;<span class="num" id="2993315">0</span>&nbsp;<span class="op" id="2993317">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993323">rc</span><span class="op" id="2993325">.</span><span class="ident" id="2993326">val</span>&nbsp;<span class="op" id="2993330">=</span>&nbsp;<span class="ident" id="2993332">v</span><span class="op" id="2993333">.</span><span class="ident" id="2993334">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993341">}</span>&nbsp;<span class="keyword" id="2993343">else</span>&nbsp;<span class="op" id="2993348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993354">rc</span><span class="op" id="2993356">.</span><span class="ident" id="2993357">val</span>&nbsp;<span class="op" id="2993361">=</span>&nbsp;<span class="ident" id="2993363">unsafe</span><span class="op" id="2993369">.</span><span class="ident" id="2993370">Pointer</span><span class="op" id="2993377">(</span><span class="op" id="2993378">&amp;</span><span class="ident" id="2993379">v</span><span class="op" id="2993380">.</span><span class="ident" id="2993381">ptr</span><span class="op" id="2993384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993394">case</span>&nbsp;<span class="ident" id="2993399">SelectRecv</span><span class="op" id="2993409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993414">if</span>&nbsp;<span class="ident" id="2993417">c</span><span class="op" id="2993418">.</span><span class="ident" id="2993419">Send</span><span class="op" id="2993423">.</span><span class="ident" id="2993424">IsValid</span><span class="op" id="2993431">(</span><span class="op" id="2993432">)</span>&nbsp;<span class="op" id="2993434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2993440">panic</span><span class="op" id="2993445">(</span><span class="string" id="2993446">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2993491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993501">ch</span>&nbsp;<span class="op" id="2993504">:=</span>&nbsp;<span class="ident" id="2993507">c</span><span class="op" id="2993508">.</span><span class="ident" id="2993509">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993517">if</span>&nbsp;<span class="op" id="2993520">!</span><span class="ident" id="2993521">ch</span><span class="op" id="2993523">.</span><span class="ident" id="2993524">IsValid</span><span class="op" id="2993531">(</span><span class="op" id="2993532">)</span>&nbsp;<span class="op" id="2993534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993540">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993554">ch</span><span class="op" id="2993556">.</span><span class="ident" id="2993557">mustBe</span><span class="op" id="2993563">(</span><span class="ident" id="2993564">Chan</span><span class="op" id="2993568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993573">ch</span><span class="op" id="2993575">.</span><span class="ident" id="2993576">mustBeExported</span><span class="op" id="2993590">(</span><span class="op" id="2993591">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993596">tt</span>&nbsp;<span class="op" id="2993599">:=</span>&nbsp;<span class="op" id="2993602">(</span><span class="op" id="2993603">*</span><span class="ident" id="2993604">chanType</span><span class="op" id="2993612">)</span><span class="op" id="2993613">(</span><span class="ident" id="2993614">unsafe</span><span class="op" id="2993620">.</span><span class="ident" id="2993621">Pointer</span><span class="op" id="2993628">(</span><span class="ident" id="2993629">ch</span><span class="op" id="2993631">.</span><span class="ident" id="2993632">typ</span><span class="op" id="2993635">)</span><span class="op" id="2993636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993641">if</span>&nbsp;<span class="ident" id="2993644">ChanDir</span><span class="op" id="2993651">(</span><span class="ident" id="2993652">tt</span><span class="op" id="2993654">.</span><span class="ident" id="2993655">dir</span><span class="op" id="2993658">)</span><span class="op" id="2993659">&amp;</span><span class="ident" id="2993660">RecvDir</span>&nbsp;<span class="op" id="2993668">==</span>&nbsp;<span class="num" id="2993671">0</span>&nbsp;<span class="op" id="2993673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2993679">panic</span><span class="op" id="2993684">(</span><span class="string" id="2993685">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2993739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993749">rc</span><span class="op" id="2993751">.</span><span class="ident" id="2993752">ch</span>&nbsp;<span class="op" id="2993755">=</span>&nbsp;<span class="ident" id="2993757">ch</span><span class="op" id="2993759">.</span><span class="ident" id="2993760">pointer</span><span class="op" id="2993767">(</span><span class="op" id="2993768">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993773">rc</span><span class="op" id="2993775">.</span><span class="ident" id="2993776">typ</span>&nbsp;<span class="op" id="2993780">=</span>&nbsp;<span class="op" id="2993782">&amp;</span><span class="ident" id="2993783">tt</span><span class="op" id="2993785">.</span><span class="ident" id="2993786">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993795">rc</span><span class="op" id="2993797">.</span><span class="ident" id="2993798">val</span>&nbsp;<span class="op" id="2993802">=</span>&nbsp;<span class="ident" id="2993804">unsafe_New</span><span class="op" id="2993814">(</span><span class="ident" id="2993815">tt</span><span class="op" id="2993817">.</span><span class="ident" id="2993818">elem</span><span class="op" id="2993822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993833">chosen</span><span class="op" id="2993839">,</span>&nbsp;<span class="ident" id="2993841">recvOK</span>&nbsp;<span class="op" id="2993848">=</span>&nbsp;<span class="ident" id="2993850">rselect</span><span class="op" id="2993857">(</span><span class="ident" id="2993858">runcases</span><span class="op" id="2993866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993869">if</span>&nbsp;<span class="ident" id="2993872">runcases</span><span class="op" id="2993880">[</span><span class="ident" id="2993881">chosen</span><span class="op" id="2993887">]</span><span class="op" id="2993888">.</span><span class="ident" id="2993889">dir</span>&nbsp;<span class="op" id="2993893">==</span>&nbsp;<span class="builtintype" id="2993896">uintptr</span><span class="op" id="2993903">(</span><span class="ident" id="2993904">SelectRecv</span><span class="op" id="2993914">)</span>&nbsp;<span class="op" id="2993916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993920">tt</span>&nbsp;<span class="op" id="2993923">:=</span>&nbsp;<span class="op" id="2993926">(</span><span class="op" id="2993927">*</span><span class="ident" id="2993928">chanType</span><span class="op" id="2993936">)</span><span class="op" id="2993937">(</span><span class="ident" id="2993938">unsafe</span><span class="op" id="2993944">.</span><span class="ident" id="2993945">Pointer</span><span class="op" id="2993952">(</span><span class="ident" id="2993953">runcases</span><span class="op" id="2993961">[</span><span class="ident" id="2993962">chosen</span><span class="op" id="2993968">]</span><span class="op" id="2993969">.</span><span class="ident" id="2993970">typ</span><span class="op" id="2993973">)</span><span class="op" id="2993974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993978">t</span>&nbsp;<span class="op" id="2993980">:=</span>&nbsp;<span class="ident" id="2993983">tt</span><span class="op" id="2993985">.</span><span class="ident" id="2993986">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993993">p</span>&nbsp;<span class="op" id="2993995">:=</span>&nbsp;<span class="ident" id="2993998">runcases</span><span class="op" id="2994006">[</span><span class="ident" id="2994007">chosen</span><span class="op" id="2994013">]</span><span class="op" id="2994014">.</span><span class="ident" id="2994015">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2994021">fl</span>&nbsp;<span class="op" id="2994024">:=</span>&nbsp;<span class="ident" id="2994027">flag</span><span class="op" id="2994031">(</span><span class="ident" id="2994032">t</span><span class="op" id="2994033">.</span><span class="ident" id="2994034">Kind</span><span class="op" id="2994038">(</span><span class="op" id="2994039">)</span><span class="op" id="2994040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994044">if</span>&nbsp;<span class="ident" id="2994047">ifaceIndir</span><span class="op" id="2994057">(</span><span class="ident" id="2994058">t</span><span class="op" id="2994059">)</span>&nbsp;<span class="op" id="2994061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2994066">recv</span>&nbsp;<span class="op" id="2994071">=</span>&nbsp;<span class="ident" id="2994073">Value</span><span class="op" id="2994078">{</span><span class="ident" id="2994079">t</span><span class="op" id="2994080">,</span>&nbsp;<span class="ident" id="2994082">p</span><span class="op" id="2994083">,</span>&nbsp;<span class="ident" id="2994085">fl</span>&nbsp;<span class="op" id="2994088">|</span>&nbsp;<span class="ident" id="2994090">flagIndir</span><span class="op" id="2994099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994103">}</span>&nbsp;<span class="keyword" id="2994105">else</span>&nbsp;<span class="op" id="2994110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2994115">recv</span>&nbsp;<span class="op" id="2994120">=</span>&nbsp;<span class="ident" id="2994122">Value</span><span class="op" id="2994127">{</span><span class="ident" id="2994128">t</span><span class="op" id="2994129">,</span>&nbsp;<span class="op" id="2994131">*</span><span class="op" id="2994132">(</span><span class="op" id="2994133">*</span><span class="ident" id="2994134">unsafe</span><span class="op" id="2994140">.</span><span class="ident" id="2994141">Pointer</span><span class="op" id="2994148">)</span><span class="op" id="2994149">(</span><span class="ident" id="2994150">p</span><span class="op" id="2994151">)</span><span class="op" id="2994152">,</span>&nbsp;<span class="ident" id="2994154">fl</span><span class="op" id="2994156">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994166">return</span>&nbsp;<span class="ident" id="2994173">chosen</span><span class="op" id="2994179">,</span>&nbsp;<span class="ident" id="2994181">recv</span><span class="op" id="2994185">,</span>&nbsp;<span class="ident" id="2994187">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2994194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2994197">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2994221">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2994255">func</span>&nbsp;<span class="ident" id="2994260">unsafe_New</span><span class="op" id="2994270">(</span><span class="op" id="2994271">*</span><span class="ident" id="2994272">rtype</span><span class="op" id="2994277">)</span>&nbsp;<span class="ident" id="2994279">unsafe</span><span class="op" id="2994285">.</span><span class="ident" id="2994286">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2994294">func</span>&nbsp;<span class="ident" id="2994299">unsafe_NewArray</span><span class="op" id="2994314">(</span><span class="op" id="2994315">*</span><span class="ident" id="2994316">rtype</span><span class="op" id="2994321">,</span>&nbsp;<span class="builtintype" id="2994323">int</span><span class="op" id="2994326">)</span>&nbsp;<span class="ident" id="2994328">unsafe</span><span class="op" id="2994334">.</span><span class="ident" id="2994335">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2994344">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2994400">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2994455">func</span>&nbsp;<span class="ident" id="2994460">MakeSlice</span><span class="op" id="2994469">(</span><span class="ident" id="2994470">typ</span>&nbsp;<span class="ident" id="2994474">Type</span><span class="op" id="2994478">,</span>&nbsp;<span class="builtinfunc" id="2994480">len</span><span class="op" id="2994483">,</span>&nbsp;<span class="builtinfunc" id="2994485">cap</span>&nbsp;<span class="builtintype" id="2994489">int</span><span class="op" id="2994492">)</span>&nbsp;<span class="ident" id="2994494">Value</span>&nbsp;<span class="op" id="2994500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994503">if</span>&nbsp;<span class="ident" id="2994506">typ</span><span class="op" id="2994509">.</span><span class="ident" id="2994510">Kind</span><span class="op" id="2994514">(</span><span class="op" id="2994515">)</span>&nbsp;<span class="op" id="2994517">!=</span>&nbsp;<span class="ident" id="2994520">Slice</span>&nbsp;<span class="op" id="2994526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2994530">panic</span><span class="op" id="2994535">(</span><span class="string" id="2994536">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2994573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994579">if</span>&nbsp;<span class="builtinfunc" id="2994582">len</span>&nbsp;<span class="op" id="2994586">&lt;</span>&nbsp;<span class="num" id="2994588">0</span>&nbsp;<span class="op" id="2994590">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2994594">panic</span><span class="op" id="2994599">(</span><span class="string" id="2994600">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2994633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994639">if</span>&nbsp;<span class="builtinfunc" id="2994642">cap</span>&nbsp;<span class="op" id="2994646">&lt;</span>&nbsp;<span class="num" id="2994648">0</span>&nbsp;<span class="op" id="2994650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2994654">panic</span><span class="op" id="2994659">(</span><span class="string" id="2994660">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2994693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994696">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994699">if</span>&nbsp;<span class="builtinfunc" id="2994702">len</span>&nbsp;<span class="op" id="2994706">&gt;</span>&nbsp;<span class="builtinfunc" id="2994708">cap</span>&nbsp;<span class="op" id="2994712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2994716">panic</span><span class="op" id="2994721">(</span><span class="string" id="2994722">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2994752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2994755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2994759">s</span>&nbsp;<span class="op" id="2994761">:=</span>&nbsp;<span class="ident" id="2994764">sliceHeader</span><span class="op" id="2994775">{</span><span class="ident" id="2994776">unsafe_NewArray</span><span class="op" id="2994791">(</span><span class="ident" id="2994792">typ</span><span class="op" id="2994795">.</span><span class="ident" id="2994796">Elem</span><span class="op" id="2994800">(</span><span class="op" id="2994801">)</span><span class="op" id="2994802">.</span><span class="op" id="2994803">(</span><span class="op" id="2994804">*</span><span class="ident" id="2994805">rtype</span><span class="op" id="2994810">)</span><span class="op" id="2994811">,</span>&nbsp;<span class="builtinfunc" id="2994813">cap</span><span class="op" id="2994816">)</span><span class="op" id="2994817">,</span>&nbsp;<span class="builtinfunc" id="2994819">len</span><span class="op" id="2994822">,</span>&nbsp;<span class="builtinfunc" id="2994824">cap</span><span class="op" id="2994827">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2994830">return</span>&nbsp;<span class="ident" id="2994837">Value</span><span class="op" id="2994842">{</span><span class="ident" id="2994843">typ</span><span class="op" id="2994846">.</span><span class="ident" id="2994847">common</span><span class="op" id="2994853">(</span><span class="op" id="2994854">)</span><span class="op" id="2994855">,</span>&nbsp;<span class="ident" id="2994857">unsafe</span><span class="op" id="2994863">.</span><span class="ident" id="2994864">Pointer</span><span class="op" id="2994871">(</span><span class="op" id="2994872">&amp;</span><span class="ident" id="2994873">s</span><span class="op" id="2994874">)</span><span class="op" id="2994875">,</span>&nbsp;<span class="ident" id="2994877">flagIndir</span>&nbsp;<span class="op" id="2994887">|</span>&nbsp;<span class="ident" id="2994889">flag</span><span class="op" id="2994893">(</span><span class="ident" id="2994894">Slice</span><span class="op" id="2994899">)</span><span class="op" id="2994900">}</span><br>
<span class="lineno"></span><span class="op" id="2994902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2994905">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2994980">func</span>&nbsp;<span class="ident" id="2994985">MakeChan</span><span class="op" id="2994993">(</span><span class="ident" id="2994994">typ</span>&nbsp;<span class="ident" id="2994998">Type</span><span class="op" id="2995002">,</span>&nbsp;<span class="ident" id="2995004">buffer</span>&nbsp;<span class="builtintype" id="2995011">int</span><span class="op" id="2995014">)</span>&nbsp;<span class="ident" id="2995016">Value</span>&nbsp;<span class="op" id="2995022">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995025">if</span>&nbsp;<span class="ident" id="2995028">typ</span><span class="op" id="2995031">.</span><span class="ident" id="2995032">Kind</span><span class="op" id="2995036">(</span><span class="op" id="2995037">)</span>&nbsp;<span class="op" id="2995039">!=</span>&nbsp;<span class="ident" id="2995042">Chan</span>&nbsp;<span class="op" id="2995047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2995051">panic</span><span class="op" id="2995056">(</span><span class="string" id="2995057">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2995092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2995095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995098">if</span>&nbsp;<span class="ident" id="2995101">buffer</span>&nbsp;<span class="op" id="2995108">&lt;</span>&nbsp;<span class="num" id="2995110">0</span>&nbsp;<span class="op" id="2995112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2995116">panic</span><span class="op" id="2995121">(</span><span class="string" id="2995122">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2995162">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2995165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995168">if</span>&nbsp;<span class="ident" id="2995171">typ</span><span class="op" id="2995174">.</span><span class="ident" id="2995175">ChanDir</span><span class="op" id="2995182">(</span><span class="op" id="2995183">)</span>&nbsp;<span class="op" id="2995185">!=</span>&nbsp;<span class="ident" id="2995188">BothDir</span>&nbsp;<span class="op" id="2995196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2995200">panic</span><span class="op" id="2995205">(</span><span class="string" id="2995206">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2995253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2995256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2995259">ch</span>&nbsp;<span class="op" id="2995262">:=</span>&nbsp;<span class="ident" id="2995265">makechan</span><span class="op" id="2995273">(</span><span class="ident" id="2995274">typ</span><span class="op" id="2995277">.</span><span class="op" id="2995278">(</span><span class="op" id="2995279">*</span><span class="ident" id="2995280">rtype</span><span class="op" id="2995285">)</span><span class="op" id="2995286">,</span>&nbsp;<span class="ident" id="2995288">uint64</span><span class="op" id="2995294">(</span><span class="ident" id="2995295">buffer</span><span class="op" id="2995301">)</span><span class="op" id="2995302">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995305">return</span>&nbsp;<span class="ident" id="2995312">Value</span><span class="op" id="2995317">{</span><span class="ident" id="2995318">typ</span><span class="op" id="2995321">.</span><span class="ident" id="2995322">common</span><span class="op" id="2995328">(</span><span class="op" id="2995329">)</span><span class="op" id="2995330">,</span>&nbsp;<span class="ident" id="2995332">ch</span><span class="op" id="2995334">,</span>&nbsp;<span class="ident" id="2995336">flag</span><span class="op" id="2995340">(</span><span class="ident" id="2995341">Chan</span><span class="op" id="2995345">)</span><span class="op" id="2995346">}</span><br>
<span class="lineno"></span><span class="op" id="2995348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2995351">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2995403">func</span>&nbsp;<span class="ident" id="2995408">MakeMap</span><span class="op" id="2995415">(</span><span class="ident" id="2995416">typ</span>&nbsp;<span class="ident" id="2995420">Type</span><span class="op" id="2995424">)</span>&nbsp;<span class="ident" id="2995426">Value</span>&nbsp;<span class="op" id="2995432">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995435">if</span>&nbsp;<span class="ident" id="2995438">typ</span><span class="op" id="2995441">.</span><span class="ident" id="2995442">Kind</span><span class="op" id="2995446">(</span><span class="op" id="2995447">)</span>&nbsp;<span class="op" id="2995449">!=</span>&nbsp;<span class="ident" id="2995452">Map</span>&nbsp;<span class="op" id="2995456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2995460">panic</span><span class="op" id="2995465">(</span><span class="string" id="2995466">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2995499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2995502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2995505">m</span>&nbsp;<span class="op" id="2995507">:=</span>&nbsp;<span class="ident" id="2995510">makemap</span><span class="op" id="2995517">(</span><span class="ident" id="2995518">typ</span><span class="op" id="2995521">.</span><span class="op" id="2995522">(</span><span class="op" id="2995523">*</span><span class="ident" id="2995524">rtype</span><span class="op" id="2995529">)</span><span class="op" id="2995530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995533">return</span>&nbsp;<span class="ident" id="2995540">Value</span><span class="op" id="2995545">{</span><span class="ident" id="2995546">typ</span><span class="op" id="2995549">.</span><span class="ident" id="2995550">common</span><span class="op" id="2995556">(</span><span class="op" id="2995557">)</span><span class="op" id="2995558">,</span>&nbsp;<span class="ident" id="2995560">m</span><span class="op" id="2995561">,</span>&nbsp;<span class="ident" id="2995563">flag</span><span class="op" id="2995567">(</span><span class="ident" id="2995568">Map</span><span class="op" id="2995571">)</span><span class="op" id="2995572">}</span><br>
<span class="lineno">2030</span><span class="op" id="2995574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2995577">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2995625">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2995682">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2995728">func</span>&nbsp;<span class="ident" id="2995733">Indirect</span><span class="op" id="2995741">(</span><span class="ident" id="2995742">v</span>&nbsp;<span class="ident" id="2995744">Value</span><span class="op" id="2995749">)</span>&nbsp;<span class="ident" id="2995751">Value</span>&nbsp;<span class="op" id="2995757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995760">if</span>&nbsp;<span class="ident" id="2995763">v</span><span class="op" id="2995764">.</span><span class="ident" id="2995765">Kind</span><span class="op" id="2995769">(</span><span class="op" id="2995770">)</span>&nbsp;<span class="op" id="2995772">!=</span>&nbsp;<span class="ident" id="2995775">Ptr</span>&nbsp;<span class="op" id="2995779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995783">return</span>&nbsp;<span class="ident" id="2995790">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2995793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995796">return</span>&nbsp;<span class="ident" id="2995803">v</span><span class="op" id="2995804">.</span><span class="ident" id="2995805">Elem</span><span class="op" id="2995809">(</span><span class="op" id="2995810">)</span><br>
<span class="lineno">2040</span><span class="op" id="2995812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2995815">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2995880">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2995948">func</span>&nbsp;<span class="ident" id="2995953">ValueOf</span><span class="op" id="2995960">(</span><span class="ident" id="2995961">i</span>&nbsp;<span class="keyword" id="2995963">interface</span><span class="op" id="2995972">{</span><span class="op" id="2995973">}</span><span class="op" id="2995974">)</span>&nbsp;<span class="ident" id="2995976">Value</span>&nbsp;<span class="op" id="2995982">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2995985">if</span>&nbsp;<span class="ident" id="2995988">i</span>&nbsp;<span class="op" id="2995990">==</span>&nbsp;<span class="ident" id="2995993">nil</span>&nbsp;<span class="op" id="2995997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996001">return</span>&nbsp;<span class="ident" id="2996008">Value</span><span class="op" id="2996013">{</span><span class="op" id="2996014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2996017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996021">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996066">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996120">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996168">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2996211">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996253">escapes</span><span class="op" id="2996260">(</span><span class="ident" id="2996261">i</span><span class="op" id="2996262">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996266">return</span>&nbsp;<span class="ident" id="2996273">unpackEface</span><span class="op" id="2996284">(</span><span class="ident" id="2996285">i</span><span class="op" id="2996286">)</span><br>
<span class="lineno"></span><span class="op" id="2996288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2996291">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2996367">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2996435">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2996472">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2996548">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2996607">func</span>&nbsp;<span class="ident" id="2996612">Zero</span><span class="op" id="2996616">(</span><span class="ident" id="2996617">typ</span>&nbsp;<span class="ident" id="2996621">Type</span><span class="op" id="2996625">)</span>&nbsp;<span class="ident" id="2996627">Value</span>&nbsp;<span class="op" id="2996633">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996636">if</span>&nbsp;<span class="ident" id="2996639">typ</span>&nbsp;<span class="op" id="2996643">==</span>&nbsp;<span class="ident" id="2996646">nil</span>&nbsp;<span class="op" id="2996650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2996654">panic</span><span class="op" id="2996659">(</span><span class="string" id="2996660">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2996680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2996683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996686">t</span>&nbsp;<span class="op" id="2996688">:=</span>&nbsp;<span class="ident" id="2996691">typ</span><span class="op" id="2996694">.</span><span class="ident" id="2996695">common</span><span class="op" id="2996701">(</span><span class="op" id="2996702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2996705">fl</span>&nbsp;<span class="op" id="2996708">:=</span>&nbsp;<span class="ident" id="2996711">flag</span><span class="op" id="2996715">(</span><span class="ident" id="2996716">t</span><span class="op" id="2996717">.</span><span class="ident" id="2996718">Kind</span><span class="op" id="2996722">(</span><span class="op" id="2996723">)</span><span class="op" id="2996724">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996727">if</span>&nbsp;<span class="ident" id="2996730">ifaceIndir</span><span class="op" id="2996740">(</span><span class="ident" id="2996741">t</span><span class="op" id="2996742">)</span>&nbsp;<span class="op" id="2996744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996748">return</span>&nbsp;<span class="ident" id="2996755">Value</span><span class="op" id="2996760">{</span><span class="ident" id="2996761">t</span><span class="op" id="2996762">,</span>&nbsp;<span class="ident" id="2996764">unsafe_New</span><span class="op" id="2996774">(</span><span class="ident" id="2996775">typ</span><span class="op" id="2996778">.</span><span class="op" id="2996779">(</span><span class="op" id="2996780">*</span><span class="ident" id="2996781">rtype</span><span class="op" id="2996786">)</span><span class="op" id="2996787">)</span><span class="op" id="2996788">,</span>&nbsp;<span class="ident" id="2996790">fl</span>&nbsp;<span class="op" id="2996793">|</span>&nbsp;<span class="ident" id="2996795">flagIndir</span><span class="op" id="2996804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2996807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2996810">return</span>&nbsp;<span class="ident" id="2996817">Value</span><span class="op" id="2996822">{</span><span class="ident" id="2996823">t</span><span class="op" id="2996824">,</span>&nbsp;<span class="ident" id="2996826">nil</span><span class="op" id="2996829">,</span>&nbsp;<span class="ident" id="2996831">fl</span><span class="op" id="2996833">}</span><br>
<span class="lineno"></span><span class="op" id="2996835">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2996838">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2996904">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2996982">func</span>&nbsp;<span class="ident" id="2996987">New</span><span class="op" id="2996990">(</span><span class="ident" id="2996991">typ</span>&nbsp;<span class="ident" id="2996995">Type</span><span class="op" id="2996999">)</span>&nbsp;<span class="ident" id="2997001">Value</span>&nbsp;<span class="op" id="2997007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997010">if</span>&nbsp;<span class="ident" id="2997013">typ</span>&nbsp;<span class="op" id="2997017">==</span>&nbsp;<span class="ident" id="2997020">nil</span>&nbsp;<span class="op" id="2997024">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2997028">panic</span><span class="op" id="2997033">(</span><span class="string" id="2997034">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2997053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997059">ptr</span>&nbsp;<span class="op" id="2997063">:=</span>&nbsp;<span class="ident" id="2997066">unsafe_New</span><span class="op" id="2997076">(</span><span class="ident" id="2997077">typ</span><span class="op" id="2997080">.</span><span class="op" id="2997081">(</span><span class="op" id="2997082">*</span><span class="ident" id="2997083">rtype</span><span class="op" id="2997088">)</span><span class="op" id="2997089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997092">fl</span>&nbsp;<span class="op" id="2997095">:=</span>&nbsp;<span class="ident" id="2997098">flag</span><span class="op" id="2997102">(</span><span class="ident" id="2997103">Ptr</span><span class="op" id="2997106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997109">return</span>&nbsp;<span class="ident" id="2997116">Value</span><span class="op" id="2997121">{</span><span class="ident" id="2997122">typ</span><span class="op" id="2997125">.</span><span class="ident" id="2997126">common</span><span class="op" id="2997132">(</span><span class="op" id="2997133">)</span><span class="op" id="2997134">.</span><span class="ident" id="2997135">ptrTo</span><span class="op" id="2997140">(</span><span class="op" id="2997141">)</span><span class="op" id="2997142">,</span>&nbsp;<span class="ident" id="2997144">ptr</span><span class="op" id="2997147">,</span>&nbsp;<span class="ident" id="2997149">fl</span><span class="op" id="2997151">}</span><br>
<span class="lineno">2085</span><span class="op" id="2997153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2997156">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2997222">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2997266">func</span>&nbsp;<span class="ident" id="2997271">NewAt</span><span class="op" id="2997276">(</span><span class="ident" id="2997277">typ</span>&nbsp;<span class="ident" id="2997281">Type</span><span class="op" id="2997285">,</span>&nbsp;<span class="ident" id="2997287">p</span>&nbsp;<span class="ident" id="2997289">unsafe</span><span class="op" id="2997295">.</span><span class="ident" id="2997296">Pointer</span><span class="op" id="2997303">)</span>&nbsp;<span class="ident" id="2997305">Value</span>&nbsp;<span class="op" id="2997311">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997314">fl</span>&nbsp;<span class="op" id="2997317">:=</span>&nbsp;<span class="ident" id="2997320">flag</span><span class="op" id="2997324">(</span><span class="ident" id="2997325">Ptr</span><span class="op" id="2997328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997331">return</span>&nbsp;<span class="ident" id="2997338">Value</span><span class="op" id="2997343">{</span><span class="ident" id="2997344">typ</span><span class="op" id="2997347">.</span><span class="ident" id="2997348">common</span><span class="op" id="2997354">(</span><span class="op" id="2997355">)</span><span class="op" id="2997356">.</span><span class="ident" id="2997357">ptrTo</span><span class="op" id="2997362">(</span><span class="op" id="2997363">)</span><span class="op" id="2997364">,</span>&nbsp;<span class="ident" id="2997366">p</span><span class="op" id="2997367">,</span>&nbsp;<span class="ident" id="2997369">fl</span><span class="op" id="2997371">}</span><br>
<span class="lineno"></span><span class="op" id="2997373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2997376">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2997444">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2997488">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2997574">func</span>&nbsp;<span class="op" id="2997579">(</span><span class="ident" id="2997580">v</span>&nbsp;<span class="ident" id="2997582">Value</span><span class="op" id="2997587">)</span>&nbsp;<span class="ident" id="2997589">assignTo</span><span class="op" id="2997597">(</span><span class="ident" id="2997598">context</span>&nbsp;<span class="builtintype" id="2997606">string</span><span class="op" id="2997612">,</span>&nbsp;<span class="ident" id="2997614">dst</span>&nbsp;<span class="op" id="2997618">*</span><span class="ident" id="2997619">rtype</span><span class="op" id="2997624">,</span>&nbsp;<span class="ident" id="2997626">target</span>&nbsp;<span class="ident" id="2997633">unsafe</span><span class="op" id="2997639">.</span><span class="ident" id="2997640">Pointer</span><span class="op" id="2997647">)</span>&nbsp;<span class="ident" id="2997649">Value</span>&nbsp;<span class="op" id="2997655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997658">if</span>&nbsp;<span class="ident" id="2997661">v</span><span class="op" id="2997662">.</span><span class="ident" id="2997663">flag</span><span class="op" id="2997667">&amp;</span><span class="ident" id="2997668">flagMethod</span>&nbsp;<span class="op" id="2997679">!=</span>&nbsp;<span class="num" id="2997682">0</span>&nbsp;<span class="op" id="2997684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997688">v</span>&nbsp;<span class="op" id="2997690">=</span>&nbsp;<span class="ident" id="2997692">makeMethodValue</span><span class="op" id="2997707">(</span><span class="ident" id="2997708">context</span><span class="op" id="2997715">,</span>&nbsp;<span class="ident" id="2997717">v</span><span class="op" id="2997718">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2997721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997725">switch</span>&nbsp;<span class="op" id="2997732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997735">case</span>&nbsp;<span class="ident" id="2997740">directlyAssignable</span><span class="op" id="2997758">(</span><span class="ident" id="2997759">dst</span><span class="op" id="2997762">,</span>&nbsp;<span class="ident" id="2997764">v</span><span class="op" id="2997765">.</span><span class="ident" id="2997766">typ</span><span class="op" id="2997769">)</span><span class="op" id="2997770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2997774">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2997814">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997856">v</span><span class="op" id="2997857">.</span><span class="ident" id="2997858">typ</span>&nbsp;<span class="op" id="2997862">=</span>&nbsp;<span class="ident" id="2997864">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997870">fl</span>&nbsp;<span class="op" id="2997873">:=</span>&nbsp;<span class="ident" id="2997876">v</span><span class="op" id="2997877">.</span><span class="ident" id="2997878">flag</span>&nbsp;<span class="op" id="2997883">&amp;</span>&nbsp;<span class="op" id="2997885">(</span><span class="ident" id="2997886">flagRO</span>&nbsp;<span class="op" id="2997893">|</span>&nbsp;<span class="ident" id="2997895">flagAddr</span>&nbsp;<span class="op" id="2997904">|</span>&nbsp;<span class="ident" id="2997906">flagIndir</span><span class="op" id="2997915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2997919">fl</span>&nbsp;<span class="op" id="2997922">|=</span>&nbsp;<span class="ident" id="2997925">flag</span><span class="op" id="2997929">(</span><span class="ident" id="2997930">dst</span><span class="op" id="2997933">.</span><span class="ident" id="2997934">Kind</span><span class="op" id="2997938">(</span><span class="op" id="2997939">)</span><span class="op" id="2997940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997944">return</span>&nbsp;<span class="ident" id="2997951">Value</span><span class="op" id="2997956">{</span><span class="ident" id="2997957">dst</span><span class="op" id="2997960">,</span>&nbsp;<span class="ident" id="2997962">v</span><span class="op" id="2997963">.</span><span class="ident" id="2997964">ptr</span><span class="op" id="2997967">,</span>&nbsp;<span class="ident" id="2997969">fl</span><span class="op" id="2997971">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2997975">case</span>&nbsp;<span class="ident" id="2997980">implements</span><span class="op" id="2997990">(</span><span class="ident" id="2997991">dst</span><span class="op" id="2997994">,</span>&nbsp;<span class="ident" id="2997996">v</span><span class="op" id="2997997">.</span><span class="ident" id="2997998">typ</span><span class="op" id="2998001">)</span><span class="op" id="2998002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998006">if</span>&nbsp;<span class="ident" id="2998009">target</span>&nbsp;<span class="op" id="2998016">==</span>&nbsp;<span class="ident" id="2998019">nil</span>&nbsp;<span class="op" id="2998023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998028">target</span>&nbsp;<span class="op" id="2998035">=</span>&nbsp;<span class="ident" id="2998037">unsafe_New</span><span class="op" id="2998047">(</span><span class="ident" id="2998048">dst</span><span class="op" id="2998051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998055">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998059">x</span>&nbsp;<span class="op" id="2998061">:=</span>&nbsp;<span class="ident" id="2998064">valueInterface</span><span class="op" id="2998078">(</span><span class="ident" id="2998079">v</span><span class="op" id="2998080">,</span>&nbsp;<span class="builtintype" id="2998082">false</span><span class="op" id="2998087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998091">if</span>&nbsp;<span class="ident" id="2998094">dst</span><span class="op" id="2998097">.</span><span class="ident" id="2998098">NumMethod</span><span class="op" id="2998107">(</span><span class="op" id="2998108">)</span>&nbsp;<span class="op" id="2998110">==</span>&nbsp;<span class="num" id="2998113">0</span>&nbsp;<span class="op" id="2998115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998120">*</span><span class="op" id="2998121">(</span><span class="op" id="2998122">*</span><span class="keyword" id="2998123">interface</span><span class="op" id="2998132">{</span><span class="op" id="2998133">}</span><span class="op" id="2998134">)</span><span class="op" id="2998135">(</span><span class="ident" id="2998136">target</span><span class="op" id="2998142">)</span>&nbsp;<span class="op" id="2998144">=</span>&nbsp;<span class="ident" id="2998146">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998150">}</span>&nbsp;<span class="keyword" id="2998152">else</span>&nbsp;<span class="op" id="2998157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998162">ifaceE2I</span><span class="op" id="2998170">(</span><span class="ident" id="2998171">dst</span><span class="op" id="2998174">,</span>&nbsp;<span class="ident" id="2998176">x</span><span class="op" id="2998177">,</span>&nbsp;<span class="ident" id="2998179">target</span><span class="op" id="2998185">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998193">return</span>&nbsp;<span class="ident" id="2998200">Value</span><span class="op" id="2998205">{</span><span class="ident" id="2998206">dst</span><span class="op" id="2998209">,</span>&nbsp;<span class="ident" id="2998211">target</span><span class="op" id="2998217">,</span>&nbsp;<span class="ident" id="2998219">flagIndir</span>&nbsp;<span class="op" id="2998229">|</span>&nbsp;<span class="ident" id="2998231">flag</span><span class="op" id="2998235">(</span><span class="ident" id="2998236">Interface</span><span class="op" id="2998245">)</span><span class="op" id="2998246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2998253">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2998265">panic</span><span class="op" id="2998270">(</span><span class="ident" id="2998271">context</span>&nbsp;<span class="op" id="2998279">+</span>&nbsp;<span class="string" id="2998281">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2998300">+</span>&nbsp;<span class="ident" id="2998302">v</span><span class="op" id="2998303">.</span><span class="ident" id="2998304">typ</span><span class="op" id="2998307">.</span><span class="ident" id="2998308">String</span><span class="op" id="2998314">(</span><span class="op" id="2998315">)</span>&nbsp;<span class="op" id="2998317">+</span>&nbsp;<span class="string" id="2998319">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2998349">+</span>&nbsp;<span class="ident" id="2998351">dst</span><span class="op" id="2998354">.</span><span class="ident" id="2998355">String</span><span class="op" id="2998361">(</span><span class="op" id="2998362">)</span><span class="op" id="2998363">)</span><br>
<span class="lineno"></span><span class="op" id="2998365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2998368">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2998420">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2998480">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2998525">func</span>&nbsp;<span class="op" id="2998530">(</span><span class="ident" id="2998531">v</span>&nbsp;<span class="ident" id="2998533">Value</span><span class="op" id="2998538">)</span>&nbsp;<span class="ident" id="2998540">Convert</span><span class="op" id="2998547">(</span><span class="ident" id="2998548">t</span>&nbsp;<span class="ident" id="2998550">Type</span><span class="op" id="2998554">)</span>&nbsp;<span class="ident" id="2998556">Value</span>&nbsp;<span class="op" id="2998562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998565">if</span>&nbsp;<span class="ident" id="2998568">v</span><span class="op" id="2998569">.</span><span class="ident" id="2998570">flag</span><span class="op" id="2998574">&amp;</span><span class="ident" id="2998575">flagMethod</span>&nbsp;<span class="op" id="2998586">!=</span>&nbsp;<span class="num" id="2998589">0</span>&nbsp;<span class="op" id="2998591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998595">v</span>&nbsp;<span class="op" id="2998597">=</span>&nbsp;<span class="ident" id="2998599">makeMethodValue</span><span class="op" id="2998614">(</span><span class="string" id="2998615">&#34;Convert&#34;</span><span class="op" id="2998624">,</span>&nbsp;<span class="ident" id="2998626">v</span><span class="op" id="2998627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998630">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2998633">op</span>&nbsp;<span class="op" id="2998636">:=</span>&nbsp;<span class="ident" id="2998639">convertOp</span><span class="op" id="2998648">(</span><span class="ident" id="2998649">t</span><span class="op" id="2998650">.</span><span class="ident" id="2998651">common</span><span class="op" id="2998657">(</span><span class="op" id="2998658">)</span><span class="op" id="2998659">,</span>&nbsp;<span class="ident" id="2998661">v</span><span class="op" id="2998662">.</span><span class="ident" id="2998663">typ</span><span class="op" id="2998666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998669">if</span>&nbsp;<span class="ident" id="2998672">op</span>&nbsp;<span class="op" id="2998675">==</span>&nbsp;<span class="ident" id="2998678">nil</span>&nbsp;<span class="op" id="2998682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2998686">panic</span><span class="op" id="2998691">(</span><span class="string" id="2998692">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2998732">+</span>&nbsp;<span class="ident" id="2998734">v</span><span class="op" id="2998735">.</span><span class="ident" id="2998736">typ</span><span class="op" id="2998739">.</span><span class="ident" id="2998740">String</span><span class="op" id="2998746">(</span><span class="op" id="2998747">)</span>&nbsp;<span class="op" id="2998749">+</span>&nbsp;<span class="string" id="2998751">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2998783">+</span>&nbsp;<span class="ident" id="2998785">t</span><span class="op" id="2998786">.</span><span class="ident" id="2998787">String</span><span class="op" id="2998793">(</span><span class="op" id="2998794">)</span><span class="op" id="2998795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2998798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2998801">return</span>&nbsp;<span class="ident" id="2998808">op</span><span class="op" id="2998810">(</span><span class="ident" id="2998811">v</span><span class="op" id="2998812">,</span>&nbsp;<span class="ident" id="2998814">t</span><span class="op" id="2998815">)</span><br>
<span class="lineno">2140</span><span class="op" id="2998817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2998820">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2998885">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2998965">func</span>&nbsp;<span class="ident" id="2998970">convertOp</span><span class="op" id="2998979">(</span><span class="ident" id="2998980">dst</span><span class="op" id="2998983">,</span>&nbsp;<span class="ident" id="2998985">src</span>&nbsp;<span class="op" id="2998989">*</span><span class="ident" id="2998990">rtype</span><span class="op" id="2998995">)</span>&nbsp;<span class="keyword" id="2998997">func</span><span class="op" id="2999001">(</span><span class="ident" id="2999002">Value</span><span class="op" id="2999007">,</span>&nbsp;<span class="ident" id="2999009">Type</span><span class="op" id="2999013">)</span>&nbsp;<span class="ident" id="2999015">Value</span>&nbsp;<span class="op" id="2999021">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999024">switch</span>&nbsp;<span class="ident" id="2999031">src</span><span class="op" id="2999034">.</span><span class="ident" id="2999035">Kind</span><span class="op" id="2999039">(</span><span class="op" id="2999040">)</span>&nbsp;<span class="op" id="2999042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999045">case</span>&nbsp;<span class="ident" id="2999050">Int</span><span class="op" id="2999053">,</span>&nbsp;<span class="ident" id="2999055">Int8</span><span class="op" id="2999059">,</span>&nbsp;<span class="ident" id="2999061">Int16</span><span class="op" id="2999066">,</span>&nbsp;<span class="ident" id="2999068">Int32</span><span class="op" id="2999073">,</span>&nbsp;<span class="ident" id="2999075">Int64</span><span class="op" id="2999080">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999084">switch</span>&nbsp;<span class="ident" id="2999091">dst</span><span class="op" id="2999094">.</span><span class="ident" id="2999095">Kind</span><span class="op" id="2999099">(</span><span class="op" id="2999100">)</span>&nbsp;<span class="op" id="2999102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999106">case</span>&nbsp;<span class="ident" id="2999111">Int</span><span class="op" id="2999114">,</span>&nbsp;<span class="ident" id="2999116">Int8</span><span class="op" id="2999120">,</span>&nbsp;<span class="ident" id="2999122">Int16</span><span class="op" id="2999127">,</span>&nbsp;<span class="ident" id="2999129">Int32</span><span class="op" id="2999134">,</span>&nbsp;<span class="ident" id="2999136">Int64</span><span class="op" id="2999141">,</span>&nbsp;<span class="ident" id="2999143">Uint</span><span class="op" id="2999147">,</span>&nbsp;<span class="ident" id="2999149">Uint8</span><span class="op" id="2999154">,</span>&nbsp;<span class="ident" id="2999156">Uint16</span><span class="op" id="2999162">,</span>&nbsp;<span class="ident" id="2999164">Uint32</span><span class="op" id="2999170">,</span>&nbsp;<span class="ident" id="2999172">Uint64</span><span class="op" id="2999178">,</span>&nbsp;<span class="ident" id="2999180">Uintptr</span><span class="op" id="2999187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999192">return</span>&nbsp;<span class="ident" id="2999199">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999208">case</span>&nbsp;<span class="ident" id="2999213">Float32</span><span class="op" id="2999220">,</span>&nbsp;<span class="ident" id="2999222">Float64</span><span class="op" id="2999229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999234">return</span>&nbsp;<span class="ident" id="2999241">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999255">case</span>&nbsp;<span class="ident" id="2999260">String</span><span class="op" id="2999266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999271">return</span>&nbsp;<span class="ident" id="2999278">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999293">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999297">case</span>&nbsp;<span class="ident" id="2999302">Uint</span><span class="op" id="2999306">,</span>&nbsp;<span class="ident" id="2999308">Uint8</span><span class="op" id="2999313">,</span>&nbsp;<span class="ident" id="2999315">Uint16</span><span class="op" id="2999321">,</span>&nbsp;<span class="ident" id="2999323">Uint32</span><span class="op" id="2999329">,</span>&nbsp;<span class="ident" id="2999331">Uint64</span><span class="op" id="2999337">,</span>&nbsp;<span class="ident" id="2999339">Uintptr</span><span class="op" id="2999346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999350">switch</span>&nbsp;<span class="ident" id="2999357">dst</span><span class="op" id="2999360">.</span><span class="ident" id="2999361">Kind</span><span class="op" id="2999365">(</span><span class="op" id="2999366">)</span>&nbsp;<span class="op" id="2999368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999372">case</span>&nbsp;<span class="ident" id="2999377">Int</span><span class="op" id="2999380">,</span>&nbsp;<span class="ident" id="2999382">Int8</span><span class="op" id="2999386">,</span>&nbsp;<span class="ident" id="2999388">Int16</span><span class="op" id="2999393">,</span>&nbsp;<span class="ident" id="2999395">Int32</span><span class="op" id="2999400">,</span>&nbsp;<span class="ident" id="2999402">Int64</span><span class="op" id="2999407">,</span>&nbsp;<span class="ident" id="2999409">Uint</span><span class="op" id="2999413">,</span>&nbsp;<span class="ident" id="2999415">Uint8</span><span class="op" id="2999420">,</span>&nbsp;<span class="ident" id="2999422">Uint16</span><span class="op" id="2999428">,</span>&nbsp;<span class="ident" id="2999430">Uint32</span><span class="op" id="2999436">,</span>&nbsp;<span class="ident" id="2999438">Uint64</span><span class="op" id="2999444">,</span>&nbsp;<span class="ident" id="2999446">Uintptr</span><span class="op" id="2999453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999458">return</span>&nbsp;<span class="ident" id="2999465">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999475">case</span>&nbsp;<span class="ident" id="2999480">Float32</span><span class="op" id="2999487">,</span>&nbsp;<span class="ident" id="2999489">Float64</span><span class="op" id="2999496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999501">return</span>&nbsp;<span class="ident" id="2999508">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999523">case</span>&nbsp;<span class="ident" id="2999528">String</span><span class="op" id="2999534">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999539">return</span>&nbsp;<span class="ident" id="2999546">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999562">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999566">case</span>&nbsp;<span class="ident" id="2999571">Float32</span><span class="op" id="2999578">,</span>&nbsp;<span class="ident" id="2999580">Float64</span><span class="op" id="2999587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999591">switch</span>&nbsp;<span class="ident" id="2999598">dst</span><span class="op" id="2999601">.</span><span class="ident" id="2999602">Kind</span><span class="op" id="2999606">(</span><span class="op" id="2999607">)</span>&nbsp;<span class="op" id="2999609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999613">case</span>&nbsp;<span class="ident" id="2999618">Int</span><span class="op" id="2999621">,</span>&nbsp;<span class="ident" id="2999623">Int8</span><span class="op" id="2999627">,</span>&nbsp;<span class="ident" id="2999629">Int16</span><span class="op" id="2999634">,</span>&nbsp;<span class="ident" id="2999636">Int32</span><span class="op" id="2999641">,</span>&nbsp;<span class="ident" id="2999643">Int64</span><span class="op" id="2999648">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999653">return</span>&nbsp;<span class="ident" id="2999660">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999674">case</span>&nbsp;<span class="ident" id="2999679">Uint</span><span class="op" id="2999683">,</span>&nbsp;<span class="ident" id="2999685">Uint8</span><span class="op" id="2999690">,</span>&nbsp;<span class="ident" id="2999692">Uint16</span><span class="op" id="2999698">,</span>&nbsp;<span class="ident" id="2999700">Uint32</span><span class="op" id="2999706">,</span>&nbsp;<span class="ident" id="2999708">Uint64</span><span class="op" id="2999714">,</span>&nbsp;<span class="ident" id="2999716">Uintptr</span><span class="op" id="2999723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999728">return</span>&nbsp;<span class="ident" id="2999735">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999750">case</span>&nbsp;<span class="ident" id="2999755">Float32</span><span class="op" id="2999762">,</span>&nbsp;<span class="ident" id="2999764">Float64</span><span class="op" id="2999771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999776">return</span>&nbsp;<span class="ident" id="2999783">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999794">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999798">case</span>&nbsp;<span class="ident" id="2999803">Complex64</span><span class="op" id="2999812">,</span>&nbsp;<span class="ident" id="2999814">Complex128</span><span class="op" id="2999824">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999828">switch</span>&nbsp;<span class="ident" id="2999835">dst</span><span class="op" id="2999838">.</span><span class="ident" id="2999839">Kind</span><span class="op" id="2999843">(</span><span class="op" id="2999844">)</span>&nbsp;<span class="op" id="2999846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999850">case</span>&nbsp;<span class="ident" id="2999855">Complex64</span><span class="op" id="2999864">,</span>&nbsp;<span class="ident" id="2999866">Complex128</span><span class="op" id="2999876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999881">return</span>&nbsp;<span class="ident" id="2999888">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2999901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999905">case</span>&nbsp;<span class="ident" id="2999910">String</span><span class="op" id="2999916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999920">if</span>&nbsp;<span class="ident" id="2999923">dst</span><span class="op" id="2999926">.</span><span class="ident" id="2999927">Kind</span><span class="op" id="2999931">(</span><span class="op" id="2999932">)</span>&nbsp;<span class="op" id="2999934">==</span>&nbsp;<span class="ident" id="2999937">Slice</span>&nbsp;<span class="op" id="2999943">&amp;&amp;</span>&nbsp;<span class="ident" id="2999946">dst</span><span class="op" id="2999949">.</span><span class="ident" id="2999950">Elem</span><span class="op" id="2999954">(</span><span class="op" id="2999955">)</span><span class="op" id="2999956">.</span><span class="ident" id="2999957">PkgPath</span><span class="op" id="2999964">(</span><span class="op" id="2999965">)</span>&nbsp;<span class="op" id="2999967">==</span>&nbsp;<span class="string" id="2999970">&#34;&#34;</span>&nbsp;<span class="op" id="2999973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2999978">switch</span>&nbsp;<span class="ident" id="2999985">dst</span><span class="op" id="2999988">.</span><span class="ident" id="2999989">Elem</span><span class="op" id="2999993">(</span><span class="op" id="2999994">)</span><span class="op" id="2999995">.</span><span class="ident" id="2999996">Kind</span><span class="op" id="3000000">(</span><span class="op" id="3000001">)</span>&nbsp;<span class="op" id="3000003">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000008">case</span>&nbsp;<span class="ident" id="3000013">Uint8</span><span class="op" id="3000018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000024">return</span>&nbsp;<span class="ident" id="3000031">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000049">case</span>&nbsp;<span class="ident" id="3000054">Int32</span><span class="op" id="3000059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000065">return</span>&nbsp;<span class="ident" id="3000072">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000090">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000098">case</span>&nbsp;<span class="ident" id="3000103">Slice</span><span class="op" id="3000108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000112">if</span>&nbsp;<span class="ident" id="3000115">dst</span><span class="op" id="3000118">.</span><span class="ident" id="3000119">Kind</span><span class="op" id="3000123">(</span><span class="op" id="3000124">)</span>&nbsp;<span class="op" id="3000126">==</span>&nbsp;<span class="ident" id="3000129">String</span>&nbsp;<span class="op" id="3000136">&amp;&amp;</span>&nbsp;<span class="ident" id="3000139">src</span><span class="op" id="3000142">.</span><span class="ident" id="3000143">Elem</span><span class="op" id="3000147">(</span><span class="op" id="3000148">)</span><span class="op" id="3000149">.</span><span class="ident" id="3000150">PkgPath</span><span class="op" id="3000157">(</span><span class="op" id="3000158">)</span>&nbsp;<span class="op" id="3000160">==</span>&nbsp;<span class="string" id="3000163">&#34;&#34;</span>&nbsp;<span class="op" id="3000166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000171">switch</span>&nbsp;<span class="ident" id="3000178">src</span><span class="op" id="3000181">.</span><span class="ident" id="3000182">Elem</span><span class="op" id="3000186">(</span><span class="op" id="3000187">)</span><span class="op" id="3000188">.</span><span class="ident" id="3000189">Kind</span><span class="op" id="3000193">(</span><span class="op" id="3000194">)</span>&nbsp;<span class="op" id="3000196">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000201">case</span>&nbsp;<span class="ident" id="3000206">Uint8</span><span class="op" id="3000211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000217">return</span>&nbsp;<span class="ident" id="3000224">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000242">case</span>&nbsp;<span class="ident" id="3000247">Int32</span><span class="op" id="3000252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000258">return</span>&nbsp;<span class="ident" id="3000265">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000283">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000294">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000337">if</span>&nbsp;<span class="ident" id="3000340">haveIdenticalUnderlyingType</span><span class="op" id="3000367">(</span><span class="ident" id="3000368">dst</span><span class="op" id="3000371">,</span>&nbsp;<span class="ident" id="3000373">src</span><span class="op" id="3000376">)</span>&nbsp;<span class="op" id="3000378">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000382">return</span>&nbsp;<span class="ident" id="3000389">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3000404">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000478">if</span>&nbsp;<span class="ident" id="3000481">dst</span><span class="op" id="3000484">.</span><span class="ident" id="3000485">Kind</span><span class="op" id="3000489">(</span><span class="op" id="3000490">)</span>&nbsp;<span class="op" id="3000492">==</span>&nbsp;<span class="ident" id="3000495">Ptr</span>&nbsp;<span class="op" id="3000499">&amp;&amp;</span>&nbsp;<span class="ident" id="3000502">dst</span><span class="op" id="3000505">.</span><span class="ident" id="3000506">Name</span><span class="op" id="3000510">(</span><span class="op" id="3000511">)</span>&nbsp;<span class="op" id="3000513">==</span>&nbsp;<span class="string" id="3000516">&#34;&#34;</span>&nbsp;<span class="op" id="3000519">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000524">src</span><span class="op" id="3000527">.</span><span class="ident" id="3000528">Kind</span><span class="op" id="3000532">(</span><span class="op" id="3000533">)</span>&nbsp;<span class="op" id="3000535">==</span>&nbsp;<span class="ident" id="3000538">Ptr</span>&nbsp;<span class="op" id="3000542">&amp;&amp;</span>&nbsp;<span class="ident" id="3000545">src</span><span class="op" id="3000548">.</span><span class="ident" id="3000549">Name</span><span class="op" id="3000553">(</span><span class="op" id="3000554">)</span>&nbsp;<span class="op" id="3000556">==</span>&nbsp;<span class="string" id="3000559">&#34;&#34;</span>&nbsp;<span class="op" id="3000562">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000567">haveIdenticalUnderlyingType</span><span class="op" id="3000594">(</span><span class="ident" id="3000595">dst</span><span class="op" id="3000598">.</span><span class="ident" id="3000599">Elem</span><span class="op" id="3000603">(</span><span class="op" id="3000604">)</span><span class="op" id="3000605">.</span><span class="ident" id="3000606">common</span><span class="op" id="3000612">(</span><span class="op" id="3000613">)</span><span class="op" id="3000614">,</span>&nbsp;<span class="ident" id="3000616">src</span><span class="op" id="3000619">.</span><span class="ident" id="3000620">Elem</span><span class="op" id="3000624">(</span><span class="op" id="3000625">)</span><span class="op" id="3000626">.</span><span class="ident" id="3000627">common</span><span class="op" id="3000633">(</span><span class="op" id="3000634">)</span><span class="op" id="3000635">)</span>&nbsp;<span class="op" id="3000637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000641">return</span>&nbsp;<span class="ident" id="3000648">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000663">if</span>&nbsp;<span class="ident" id="3000666">implements</span><span class="op" id="3000676">(</span><span class="ident" id="3000677">dst</span><span class="op" id="3000680">,</span>&nbsp;<span class="ident" id="3000682">src</span><span class="op" id="3000685">)</span>&nbsp;<span class="op" id="3000687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000691">if</span>&nbsp;<span class="ident" id="3000694">src</span><span class="op" id="3000697">.</span><span class="ident" id="3000698">Kind</span><span class="op" id="3000702">(</span><span class="op" id="3000703">)</span>&nbsp;<span class="op" id="3000705">==</span>&nbsp;<span class="ident" id="3000708">Interface</span>&nbsp;<span class="op" id="3000718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000723">return</span>&nbsp;<span class="ident" id="3000730">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000743">return</span>&nbsp;<span class="ident" id="3000750">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3000758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000762">return</span>&nbsp;<span class="ident" id="3000769">nil</span><br>
<span class="lineno"></span><span class="op" id="3000773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="3000776">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="3000849">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3000894">func</span>&nbsp;<span class="ident" id="3000899">makeInt</span><span class="op" id="3000906">(</span><span class="ident" id="3000907">f</span>&nbsp;<span class="ident" id="3000909">flag</span><span class="op" id="3000913">,</span>&nbsp;<span class="ident" id="3000915">bits</span>&nbsp;<span class="ident" id="3000920">uint64</span><span class="op" id="3000926">,</span>&nbsp;<span class="ident" id="3000928">t</span>&nbsp;<span class="ident" id="3000930">Type</span><span class="op" id="3000934">)</span>&nbsp;<span class="ident" id="3000936">Value</span>&nbsp;<span class="op" id="3000942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000945">typ</span>&nbsp;<span class="op" id="3000949">:=</span>&nbsp;<span class="ident" id="3000952">t</span><span class="op" id="3000953">.</span><span class="ident" id="3000954">common</span><span class="op" id="3000960">(</span><span class="op" id="3000961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3000964">ptr</span>&nbsp;<span class="op" id="3000968">:=</span>&nbsp;<span class="ident" id="3000971">unsafe_New</span><span class="op" id="3000981">(</span><span class="ident" id="3000982">typ</span><span class="op" id="3000985">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3000988">switch</span>&nbsp;<span class="ident" id="3000995">typ</span><span class="op" id="3000998">.</span><span class="ident" id="3000999">size</span>&nbsp;<span class="op" id="3001004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001007">case</span>&nbsp;<span class="num" id="3001012">1</span><span class="op" id="3001013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001017">*</span><span class="op" id="3001018">(</span><span class="op" id="3001019">*</span><span class="builtintype" id="3001020">uint8</span><span class="op" id="3001025">)</span><span class="op" id="3001026">(</span><span class="ident" id="3001027">unsafe</span><span class="op" id="3001033">.</span><span class="ident" id="3001034">Pointer</span><span class="op" id="3001041">(</span><span class="ident" id="3001042">ptr</span><span class="op" id="3001045">)</span><span class="op" id="3001046">)</span>&nbsp;<span class="op" id="3001048">=</span>&nbsp;<span class="builtintype" id="3001050">uint8</span><span class="op" id="3001055">(</span><span class="ident" id="3001056">bits</span><span class="op" id="3001060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001063">case</span>&nbsp;<span class="num" id="3001068">2</span><span class="op" id="3001069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001073">*</span><span class="op" id="3001074">(</span><span class="op" id="3001075">*</span><span class="builtintype" id="3001076">uint16</span><span class="op" id="3001082">)</span><span class="op" id="3001083">(</span><span class="ident" id="3001084">unsafe</span><span class="op" id="3001090">.</span><span class="ident" id="3001091">Pointer</span><span class="op" id="3001098">(</span><span class="ident" id="3001099">ptr</span><span class="op" id="3001102">)</span><span class="op" id="3001103">)</span>&nbsp;<span class="op" id="3001105">=</span>&nbsp;<span class="builtintype" id="3001107">uint16</span><span class="op" id="3001113">(</span><span class="ident" id="3001114">bits</span><span class="op" id="3001118">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001121">case</span>&nbsp;<span class="num" id="3001126">4</span><span class="op" id="3001127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001131">*</span><span class="op" id="3001132">(</span><span class="op" id="3001133">*</span><span class="builtintype" id="3001134">uint32</span><span class="op" id="3001140">)</span><span class="op" id="3001141">(</span><span class="ident" id="3001142">unsafe</span><span class="op" id="3001148">.</span><span class="ident" id="3001149">Pointer</span><span class="op" id="3001156">(</span><span class="ident" id="3001157">ptr</span><span class="op" id="3001160">)</span><span class="op" id="3001161">)</span>&nbsp;<span class="op" id="3001163">=</span>&nbsp;<span class="builtintype" id="3001165">uint32</span><span class="op" id="3001171">(</span><span class="ident" id="3001172">bits</span><span class="op" id="3001176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001179">case</span>&nbsp;<span class="num" id="3001184">8</span><span class="op" id="3001185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001189">*</span><span class="op" id="3001190">(</span><span class="op" id="3001191">*</span><span class="ident" id="3001192">uint64</span><span class="op" id="3001198">)</span><span class="op" id="3001199">(</span><span class="ident" id="3001200">unsafe</span><span class="op" id="3001206">.</span><span class="ident" id="3001207">Pointer</span><span class="op" id="3001214">(</span><span class="ident" id="3001215">ptr</span><span class="op" id="3001218">)</span><span class="op" id="3001219">)</span>&nbsp;<span class="op" id="3001221">=</span>&nbsp;<span class="ident" id="3001223">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001229">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001232">return</span>&nbsp;<span class="ident" id="3001239">Value</span><span class="op" id="3001244">{</span><span class="ident" id="3001245">typ</span><span class="op" id="3001248">,</span>&nbsp;<span class="ident" id="3001250">ptr</span><span class="op" id="3001253">,</span>&nbsp;<span class="ident" id="3001255">f</span>&nbsp;<span class="op" id="3001257">|</span>&nbsp;<span class="ident" id="3001259">flagIndir</span>&nbsp;<span class="op" id="3001269">|</span>&nbsp;<span class="ident" id="3001271">flag</span><span class="op" id="3001275">(</span><span class="ident" id="3001276">typ</span><span class="op" id="3001279">.</span><span class="ident" id="3001280">Kind</span><span class="op" id="3001284">(</span><span class="op" id="3001285">)</span><span class="op" id="3001286">)</span><span class="op" id="3001287">}</span><br>
<span class="lineno"></span><span class="op" id="3001289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3001292">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="3001375">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="3001416">func</span>&nbsp;<span class="ident" id="3001421">makeFloat</span><span class="op" id="3001430">(</span><span class="ident" id="3001431">f</span>&nbsp;<span class="ident" id="3001433">flag</span><span class="op" id="3001437">,</span>&nbsp;<span class="ident" id="3001439">v</span>&nbsp;<span class="builtintype" id="3001441">float64</span><span class="op" id="3001448">,</span>&nbsp;<span class="ident" id="3001450">t</span>&nbsp;<span class="ident" id="3001452">Type</span><span class="op" id="3001456">)</span>&nbsp;<span class="ident" id="3001458">Value</span>&nbsp;<span class="op" id="3001464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001467">typ</span>&nbsp;<span class="op" id="3001471">:=</span>&nbsp;<span class="ident" id="3001474">t</span><span class="op" id="3001475">.</span><span class="ident" id="3001476">common</span><span class="op" id="3001482">(</span><span class="op" id="3001483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001486">ptr</span>&nbsp;<span class="op" id="3001490">:=</span>&nbsp;<span class="ident" id="3001493">unsafe_New</span><span class="op" id="3001503">(</span><span class="ident" id="3001504">typ</span><span class="op" id="3001507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001510">switch</span>&nbsp;<span class="ident" id="3001517">typ</span><span class="op" id="3001520">.</span><span class="ident" id="3001521">size</span>&nbsp;<span class="op" id="3001526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001529">case</span>&nbsp;<span class="num" id="3001534">4</span><span class="op" id="3001535">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001539">*</span><span class="op" id="3001540">(</span><span class="op" id="3001541">*</span><span class="builtintype" id="3001542">float32</span><span class="op" id="3001549">)</span><span class="op" id="3001550">(</span><span class="ident" id="3001551">unsafe</span><span class="op" id="3001557">.</span><span class="ident" id="3001558">Pointer</span><span class="op" id="3001565">(</span><span class="ident" id="3001566">ptr</span><span class="op" id="3001569">)</span><span class="op" id="3001570">)</span>&nbsp;<span class="op" id="3001572">=</span>&nbsp;<span class="builtintype" id="3001574">float32</span><span class="op" id="3001581">(</span><span class="ident" id="3001582">v</span><span class="op" id="3001583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001586">case</span>&nbsp;<span class="num" id="3001591">8</span><span class="op" id="3001592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001596">*</span><span class="op" id="3001597">(</span><span class="op" id="3001598">*</span><span class="builtintype" id="3001599">float64</span><span class="op" id="3001606">)</span><span class="op" id="3001607">(</span><span class="ident" id="3001608">unsafe</span><span class="op" id="3001614">.</span><span class="ident" id="3001615">Pointer</span><span class="op" id="3001622">(</span><span class="ident" id="3001623">ptr</span><span class="op" id="3001626">)</span><span class="op" id="3001627">)</span>&nbsp;<span class="op" id="3001629">=</span>&nbsp;<span class="ident" id="3001631">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001637">return</span>&nbsp;<span class="ident" id="3001644">Value</span><span class="op" id="3001649">{</span><span class="ident" id="3001650">typ</span><span class="op" id="3001653">,</span>&nbsp;<span class="ident" id="3001655">ptr</span><span class="op" id="3001658">,</span>&nbsp;<span class="ident" id="3001660">f</span>&nbsp;<span class="op" id="3001662">|</span>&nbsp;<span class="ident" id="3001664">flagIndir</span>&nbsp;<span class="op" id="3001674">|</span>&nbsp;<span class="ident" id="3001676">flag</span><span class="op" id="3001680">(</span><span class="ident" id="3001681">typ</span><span class="op" id="3001684">.</span><span class="ident" id="3001685">Kind</span><span class="op" id="3001689">(</span><span class="op" id="3001690">)</span><span class="op" id="3001691">)</span><span class="op" id="3001692">}</span><br>
<span class="lineno">2255</span><span class="op" id="3001694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3001697">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="3001784">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3001830">func</span>&nbsp;<span class="ident" id="3001835">makeComplex</span><span class="op" id="3001846">(</span><span class="ident" id="3001847">f</span>&nbsp;<span class="ident" id="3001849">flag</span><span class="op" id="3001853">,</span>&nbsp;<span class="ident" id="3001855">v</span>&nbsp;<span class="builtintype" id="3001857">complex128</span><span class="op" id="3001867">,</span>&nbsp;<span class="ident" id="3001869">t</span>&nbsp;<span class="ident" id="3001871">Type</span><span class="op" id="3001875">)</span>&nbsp;<span class="ident" id="3001877">Value</span>&nbsp;<span class="op" id="3001883">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001886">typ</span>&nbsp;<span class="op" id="3001890">:=</span>&nbsp;<span class="ident" id="3001893">t</span><span class="op" id="3001894">.</span><span class="ident" id="3001895">common</span><span class="op" id="3001901">(</span><span class="op" id="3001902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3001905">ptr</span>&nbsp;<span class="op" id="3001909">:=</span>&nbsp;<span class="ident" id="3001912">unsafe_New</span><span class="op" id="3001922">(</span><span class="ident" id="3001923">typ</span><span class="op" id="3001926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001929">switch</span>&nbsp;<span class="ident" id="3001936">typ</span><span class="op" id="3001939">.</span><span class="ident" id="3001940">size</span>&nbsp;<span class="op" id="3001945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3001948">case</span>&nbsp;<span class="num" id="3001953">8</span><span class="op" id="3001954">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3001958">*</span><span class="op" id="3001959">(</span><span class="op" id="3001960">*</span><span class="builtintype" id="3001961">complex64</span><span class="op" id="3001970">)</span><span class="op" id="3001971">(</span><span class="ident" id="3001972">unsafe</span><span class="op" id="3001978">.</span><span class="ident" id="3001979">Pointer</span><span class="op" id="3001986">(</span><span class="ident" id="3001987">ptr</span><span class="op" id="3001990">)</span><span class="op" id="3001991">)</span>&nbsp;<span class="op" id="3001993">=</span>&nbsp;<span class="builtintype" id="3001995">complex64</span><span class="op" id="3002004">(</span><span class="ident" id="3002005">v</span><span class="op" id="3002006">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002009">case</span>&nbsp;<span class="num" id="3002014">16</span><span class="op" id="3002016">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002020">*</span><span class="op" id="3002021">(</span><span class="op" id="3002022">*</span><span class="builtintype" id="3002023">complex128</span><span class="op" id="3002033">)</span><span class="op" id="3002034">(</span><span class="ident" id="3002035">unsafe</span><span class="op" id="3002041">.</span><span class="ident" id="3002042">Pointer</span><span class="op" id="3002049">(</span><span class="ident" id="3002050">ptr</span><span class="op" id="3002053">)</span><span class="op" id="3002054">)</span>&nbsp;<span class="op" id="3002056">=</span>&nbsp;<span class="ident" id="3002058">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3002061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002064">return</span>&nbsp;<span class="ident" id="3002071">Value</span><span class="op" id="3002076">{</span><span class="ident" id="3002077">typ</span><span class="op" id="3002080">,</span>&nbsp;<span class="ident" id="3002082">ptr</span><span class="op" id="3002085">,</span>&nbsp;<span class="ident" id="3002087">f</span>&nbsp;<span class="op" id="3002089">|</span>&nbsp;<span class="ident" id="3002091">flagIndir</span>&nbsp;<span class="op" id="3002101">|</span>&nbsp;<span class="ident" id="3002103">flag</span><span class="op" id="3002107">(</span><span class="ident" id="3002108">typ</span><span class="op" id="3002111">.</span><span class="ident" id="3002112">Kind</span><span class="op" id="3002116">(</span><span class="op" id="3002117">)</span><span class="op" id="3002118">)</span><span class="op" id="3002119">}</span><br>
<span class="lineno"></span><span class="op" id="3002121">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="3002124">func</span>&nbsp;<span class="ident" id="3002129">makeString</span><span class="op" id="3002139">(</span><span class="ident" id="3002140">f</span>&nbsp;<span class="ident" id="3002142">flag</span><span class="op" id="3002146">,</span>&nbsp;<span class="ident" id="3002148">v</span>&nbsp;<span class="builtintype" id="3002150">string</span><span class="op" id="3002156">,</span>&nbsp;<span class="ident" id="3002158">t</span>&nbsp;<span class="ident" id="3002160">Type</span><span class="op" id="3002164">)</span>&nbsp;<span class="ident" id="3002166">Value</span>&nbsp;<span class="op" id="3002172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002175">ret</span>&nbsp;<span class="op" id="3002179">:=</span>&nbsp;<span class="ident" id="3002182">New</span><span class="op" id="3002185">(</span><span class="ident" id="3002186">t</span><span class="op" id="3002187">)</span><span class="op" id="3002188">.</span><span class="ident" id="3002189">Elem</span><span class="op" id="3002193">(</span><span class="op" id="3002194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002197">ret</span><span class="op" id="3002200">.</span><span class="ident" id="3002201">SetString</span><span class="op" id="3002210">(</span><span class="ident" id="3002211">v</span><span class="op" id="3002212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002215">ret</span><span class="op" id="3002218">.</span><span class="ident" id="3002219">flag</span>&nbsp;<span class="op" id="3002224">=</span>&nbsp;<span class="ident" id="3002226">ret</span><span class="op" id="3002229">.</span><span class="ident" id="3002230">flag</span><span class="op" id="3002234">&amp;^</span><span class="ident" id="3002236">flagAddr</span>&nbsp;<span class="op" id="3002245">|</span>&nbsp;<span class="ident" id="3002247">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002250">return</span>&nbsp;<span class="ident" id="3002257">ret</span><br>
<span class="lineno"></span><span class="op" id="3002261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3002264">func</span>&nbsp;<span class="ident" id="3002269">makeBytes</span><span class="op" id="3002278">(</span><span class="ident" id="3002279">f</span>&nbsp;<span class="ident" id="3002281">flag</span><span class="op" id="3002285">,</span>&nbsp;<span class="ident" id="3002287">v</span>&nbsp;<span class="op" id="3002289">[</span><span class="op" id="3002290">]</span><span class="builtintype" id="3002291">byte</span><span class="op" id="3002295">,</span>&nbsp;<span class="ident" id="3002297">t</span>&nbsp;<span class="ident" id="3002299">Type</span><span class="op" id="3002303">)</span>&nbsp;<span class="ident" id="3002305">Value</span>&nbsp;<span class="op" id="3002311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002314">ret</span>&nbsp;<span class="op" id="3002318">:=</span>&nbsp;<span class="ident" id="3002321">New</span><span class="op" id="3002324">(</span><span class="ident" id="3002325">t</span><span class="op" id="3002326">)</span><span class="op" id="3002327">.</span><span class="ident" id="3002328">Elem</span><span class="op" id="3002332">(</span><span class="op" id="3002333">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002336">ret</span><span class="op" id="3002339">.</span><span class="ident" id="3002340">SetBytes</span><span class="op" id="3002348">(</span><span class="ident" id="3002349">v</span><span class="op" id="3002350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002353">ret</span><span class="op" id="3002356">.</span><span class="ident" id="3002357">flag</span>&nbsp;<span class="op" id="3002362">=</span>&nbsp;<span class="ident" id="3002364">ret</span><span class="op" id="3002367">.</span><span class="ident" id="3002368">flag</span><span class="op" id="3002372">&amp;^</span><span class="ident" id="3002374">flagAddr</span>&nbsp;<span class="op" id="3002383">|</span>&nbsp;<span class="ident" id="3002385">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002388">return</span>&nbsp;<span class="ident" id="3002395">ret</span><br>
<span class="lineno"></span><span class="op" id="3002399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="3002402">func</span>&nbsp;<span class="ident" id="3002407">makeRunes</span><span class="op" id="3002416">(</span><span class="ident" id="3002417">f</span>&nbsp;<span class="ident" id="3002419">flag</span><span class="op" id="3002423">,</span>&nbsp;<span class="ident" id="3002425">v</span>&nbsp;<span class="op" id="3002427">[</span><span class="op" id="3002428">]</span><span class="builtintype" id="3002429">rune</span><span class="op" id="3002433">,</span>&nbsp;<span class="ident" id="3002435">t</span>&nbsp;<span class="ident" id="3002437">Type</span><span class="op" id="3002441">)</span>&nbsp;<span class="ident" id="3002443">Value</span>&nbsp;<span class="op" id="3002449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002452">ret</span>&nbsp;<span class="op" id="3002456">:=</span>&nbsp;<span class="ident" id="3002459">New</span><span class="op" id="3002462">(</span><span class="ident" id="3002463">t</span><span class="op" id="3002464">)</span><span class="op" id="3002465">.</span><span class="ident" id="3002466">Elem</span><span class="op" id="3002470">(</span><span class="op" id="3002471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002474">ret</span><span class="op" id="3002477">.</span><span class="ident" id="3002478">setRunes</span><span class="op" id="3002486">(</span><span class="ident" id="3002487">v</span><span class="op" id="3002488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3002491">ret</span><span class="op" id="3002494">.</span><span class="ident" id="3002495">flag</span>&nbsp;<span class="op" id="3002500">=</span>&nbsp;<span class="ident" id="3002502">ret</span><span class="op" id="3002505">.</span><span class="ident" id="3002506">flag</span><span class="op" id="3002510">&amp;^</span><span class="ident" id="3002512">flagAddr</span>&nbsp;<span class="op" id="3002521">|</span>&nbsp;<span class="ident" id="3002523">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002526">return</span>&nbsp;<span class="ident" id="3002533">ret</span><br>
<span class="lineno">2290</span><span class="op" id="3002537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3002540">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="3002596">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="3002668">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="3002740">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3002799">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="3002831">func</span>&nbsp;<span class="ident" id="3002836">cvtInt</span><span class="op" id="3002842">(</span><span class="ident" id="3002843">v</span>&nbsp;<span class="ident" id="3002845">Value</span><span class="op" id="3002850">,</span>&nbsp;<span class="ident" id="3002852">t</span>&nbsp;<span class="ident" id="3002854">Type</span><span class="op" id="3002858">)</span>&nbsp;<span class="ident" id="3002860">Value</span>&nbsp;<span class="op" id="3002866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002869">return</span>&nbsp;<span class="ident" id="3002876">makeInt</span><span class="op" id="3002883">(</span><span class="ident" id="3002884">v</span><span class="op" id="3002885">.</span><span class="ident" id="3002886">flag</span><span class="op" id="3002890">&amp;</span><span class="ident" id="3002891">flagRO</span><span class="op" id="3002897">,</span>&nbsp;<span class="ident" id="3002899">uint64</span><span class="op" id="3002905">(</span><span class="ident" id="3002906">v</span><span class="op" id="3002907">.</span><span class="ident" id="3002908">Int</span><span class="op" id="3002911">(</span><span class="op" id="3002912">)</span><span class="op" id="3002913">)</span><span class="op" id="3002914">,</span>&nbsp;<span class="ident" id="3002916">t</span><span class="op" id="3002917">)</span><br>
<span class="lineno">2300</span><span class="op" id="3002919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3002922">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="3002955">func</span>&nbsp;<span class="ident" id="3002960">cvtUint</span><span class="op" id="3002967">(</span><span class="ident" id="3002968">v</span>&nbsp;<span class="ident" id="3002970">Value</span><span class="op" id="3002975">,</span>&nbsp;<span class="ident" id="3002977">t</span>&nbsp;<span class="ident" id="3002979">Type</span><span class="op" id="3002983">)</span>&nbsp;<span class="ident" id="3002985">Value</span>&nbsp;<span class="op" id="3002991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3002994">return</span>&nbsp;<span class="ident" id="3003001">makeInt</span><span class="op" id="3003008">(</span><span class="ident" id="3003009">v</span><span class="op" id="3003010">.</span><span class="ident" id="3003011">flag</span><span class="op" id="3003015">&amp;</span><span class="ident" id="3003016">flagRO</span><span class="op" id="3003022">,</span>&nbsp;<span class="ident" id="3003024">v</span><span class="op" id="3003025">.</span><span class="ident" id="3003026">Uint</span><span class="op" id="3003030">(</span><span class="op" id="3003031">)</span><span class="op" id="3003032">,</span>&nbsp;<span class="ident" id="3003034">t</span><span class="op" id="3003035">)</span><br>
<span class="lineno">2305</span><span class="op" id="3003037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003040">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003071">func</span>&nbsp;<span class="ident" id="3003076">cvtFloatInt</span><span class="op" id="3003087">(</span><span class="ident" id="3003088">v</span>&nbsp;<span class="ident" id="3003090">Value</span><span class="op" id="3003095">,</span>&nbsp;<span class="ident" id="3003097">t</span>&nbsp;<span class="ident" id="3003099">Type</span><span class="op" id="3003103">)</span>&nbsp;<span class="ident" id="3003105">Value</span>&nbsp;<span class="op" id="3003111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003114">return</span>&nbsp;<span class="ident" id="3003121">makeInt</span><span class="op" id="3003128">(</span><span class="ident" id="3003129">v</span><span class="op" id="3003130">.</span><span class="ident" id="3003131">flag</span><span class="op" id="3003135">&amp;</span><span class="ident" id="3003136">flagRO</span><span class="op" id="3003142">,</span>&nbsp;<span class="ident" id="3003144">uint64</span><span class="op" id="3003150">(</span><span class="ident" id="3003151">int64</span><span class="op" id="3003156">(</span><span class="ident" id="3003157">v</span><span class="op" id="3003158">.</span><span class="ident" id="3003159">Float</span><span class="op" id="3003164">(</span><span class="op" id="3003165">)</span><span class="op" id="3003166">)</span><span class="op" id="3003167">)</span><span class="op" id="3003168">,</span>&nbsp;<span class="ident" id="3003170">t</span><span class="op" id="3003171">)</span><br>
<span class="lineno">2310</span><span class="op" id="3003173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003176">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003208">func</span>&nbsp;<span class="ident" id="3003213">cvtFloatUint</span><span class="op" id="3003225">(</span><span class="ident" id="3003226">v</span>&nbsp;<span class="ident" id="3003228">Value</span><span class="op" id="3003233">,</span>&nbsp;<span class="ident" id="3003235">t</span>&nbsp;<span class="ident" id="3003237">Type</span><span class="op" id="3003241">)</span>&nbsp;<span class="ident" id="3003243">Value</span>&nbsp;<span class="op" id="3003249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003252">return</span>&nbsp;<span class="ident" id="3003259">makeInt</span><span class="op" id="3003266">(</span><span class="ident" id="3003267">v</span><span class="op" id="3003268">.</span><span class="ident" id="3003269">flag</span><span class="op" id="3003273">&amp;</span><span class="ident" id="3003274">flagRO</span><span class="op" id="3003280">,</span>&nbsp;<span class="ident" id="3003282">uint64</span><span class="op" id="3003288">(</span><span class="ident" id="3003289">v</span><span class="op" id="3003290">.</span><span class="ident" id="3003291">Float</span><span class="op" id="3003296">(</span><span class="op" id="3003297">)</span><span class="op" id="3003298">)</span><span class="op" id="3003299">,</span>&nbsp;<span class="ident" id="3003301">t</span><span class="op" id="3003302">)</span><br>
<span class="lineno">2315</span><span class="op" id="3003304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003307">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003338">func</span>&nbsp;<span class="ident" id="3003343">cvtIntFloat</span><span class="op" id="3003354">(</span><span class="ident" id="3003355">v</span>&nbsp;<span class="ident" id="3003357">Value</span><span class="op" id="3003362">,</span>&nbsp;<span class="ident" id="3003364">t</span>&nbsp;<span class="ident" id="3003366">Type</span><span class="op" id="3003370">)</span>&nbsp;<span class="ident" id="3003372">Value</span>&nbsp;<span class="op" id="3003378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003381">return</span>&nbsp;<span class="ident" id="3003388">makeFloat</span><span class="op" id="3003397">(</span><span class="ident" id="3003398">v</span><span class="op" id="3003399">.</span><span class="ident" id="3003400">flag</span><span class="op" id="3003404">&amp;</span><span class="ident" id="3003405">flagRO</span><span class="op" id="3003411">,</span>&nbsp;<span class="builtintype" id="3003413">float64</span><span class="op" id="3003420">(</span><span class="ident" id="3003421">v</span><span class="op" id="3003422">.</span><span class="ident" id="3003423">Int</span><span class="op" id="3003426">(</span><span class="op" id="3003427">)</span><span class="op" id="3003428">)</span><span class="op" id="3003429">,</span>&nbsp;<span class="ident" id="3003431">t</span><span class="op" id="3003432">)</span><br>
<span class="lineno">2320</span><span class="op" id="3003434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003437">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003469">func</span>&nbsp;<span class="ident" id="3003474">cvtUintFloat</span><span class="op" id="3003486">(</span><span class="ident" id="3003487">v</span>&nbsp;<span class="ident" id="3003489">Value</span><span class="op" id="3003494">,</span>&nbsp;<span class="ident" id="3003496">t</span>&nbsp;<span class="ident" id="3003498">Type</span><span class="op" id="3003502">)</span>&nbsp;<span class="ident" id="3003504">Value</span>&nbsp;<span class="op" id="3003510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003513">return</span>&nbsp;<span class="ident" id="3003520">makeFloat</span><span class="op" id="3003529">(</span><span class="ident" id="3003530">v</span><span class="op" id="3003531">.</span><span class="ident" id="3003532">flag</span><span class="op" id="3003536">&amp;</span><span class="ident" id="3003537">flagRO</span><span class="op" id="3003543">,</span>&nbsp;<span class="builtintype" id="3003545">float64</span><span class="op" id="3003552">(</span><span class="ident" id="3003553">v</span><span class="op" id="3003554">.</span><span class="ident" id="3003555">Uint</span><span class="op" id="3003559">(</span><span class="op" id="3003560">)</span><span class="op" id="3003561">)</span><span class="op" id="3003562">,</span>&nbsp;<span class="ident" id="3003564">t</span><span class="op" id="3003565">)</span><br>
<span class="lineno">2325</span><span class="op" id="3003567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003570">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003603">func</span>&nbsp;<span class="ident" id="3003608">cvtFloat</span><span class="op" id="3003616">(</span><span class="ident" id="3003617">v</span>&nbsp;<span class="ident" id="3003619">Value</span><span class="op" id="3003624">,</span>&nbsp;<span class="ident" id="3003626">t</span>&nbsp;<span class="ident" id="3003628">Type</span><span class="op" id="3003632">)</span>&nbsp;<span class="ident" id="3003634">Value</span>&nbsp;<span class="op" id="3003640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003643">return</span>&nbsp;<span class="ident" id="3003650">makeFloat</span><span class="op" id="3003659">(</span><span class="ident" id="3003660">v</span><span class="op" id="3003661">.</span><span class="ident" id="3003662">flag</span><span class="op" id="3003666">&amp;</span><span class="ident" id="3003667">flagRO</span><span class="op" id="3003673">,</span>&nbsp;<span class="ident" id="3003675">v</span><span class="op" id="3003676">.</span><span class="ident" id="3003677">Float</span><span class="op" id="3003682">(</span><span class="op" id="3003683">)</span><span class="op" id="3003684">,</span>&nbsp;<span class="ident" id="3003686">t</span><span class="op" id="3003687">)</span><br>
<span class="lineno">2330</span><span class="op" id="3003689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003692">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="3003729">func</span>&nbsp;<span class="ident" id="3003734">cvtComplex</span><span class="op" id="3003744">(</span><span class="ident" id="3003745">v</span>&nbsp;<span class="ident" id="3003747">Value</span><span class="op" id="3003752">,</span>&nbsp;<span class="ident" id="3003754">t</span>&nbsp;<span class="ident" id="3003756">Type</span><span class="op" id="3003760">)</span>&nbsp;<span class="ident" id="3003762">Value</span>&nbsp;<span class="op" id="3003768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003771">return</span>&nbsp;<span class="ident" id="3003778">makeComplex</span><span class="op" id="3003789">(</span><span class="ident" id="3003790">v</span><span class="op" id="3003791">.</span><span class="ident" id="3003792">flag</span><span class="op" id="3003796">&amp;</span><span class="ident" id="3003797">flagRO</span><span class="op" id="3003803">,</span>&nbsp;<span class="ident" id="3003805">v</span><span class="op" id="3003806">.</span><span class="ident" id="3003807">Complex</span><span class="op" id="3003814">(</span><span class="op" id="3003815">)</span><span class="op" id="3003816">,</span>&nbsp;<span class="ident" id="3003818">t</span><span class="op" id="3003819">)</span><br>
<span class="lineno">2335</span><span class="op" id="3003821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003824">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="3003854">func</span>&nbsp;<span class="ident" id="3003859">cvtIntString</span><span class="op" id="3003871">(</span><span class="ident" id="3003872">v</span>&nbsp;<span class="ident" id="3003874">Value</span><span class="op" id="3003879">,</span>&nbsp;<span class="ident" id="3003881">t</span>&nbsp;<span class="ident" id="3003883">Type</span><span class="op" id="3003887">)</span>&nbsp;<span class="ident" id="3003889">Value</span>&nbsp;<span class="op" id="3003895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3003898">return</span>&nbsp;<span class="ident" id="3003905">makeString</span><span class="op" id="3003915">(</span><span class="ident" id="3003916">v</span><span class="op" id="3003917">.</span><span class="ident" id="3003918">flag</span><span class="op" id="3003922">&amp;</span><span class="ident" id="3003923">flagRO</span><span class="op" id="3003929">,</span>&nbsp;<span class="builtintype" id="3003931">string</span><span class="op" id="3003937">(</span><span class="ident" id="3003938">v</span><span class="op" id="3003939">.</span><span class="ident" id="3003940">Int</span><span class="op" id="3003943">(</span><span class="op" id="3003944">)</span><span class="op" id="3003945">)</span><span class="op" id="3003946">,</span>&nbsp;<span class="ident" id="3003948">t</span><span class="op" id="3003949">)</span><br>
<span class="lineno">2340</span><span class="op" id="3003951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3003954">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="3003985">func</span>&nbsp;<span class="ident" id="3003990">cvtUintString</span><span class="op" id="3004003">(</span><span class="ident" id="3004004">v</span>&nbsp;<span class="ident" id="3004006">Value</span><span class="op" id="3004011">,</span>&nbsp;<span class="ident" id="3004013">t</span>&nbsp;<span class="ident" id="3004015">Type</span><span class="op" id="3004019">)</span>&nbsp;<span class="ident" id="3004021">Value</span>&nbsp;<span class="op" id="3004027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004030">return</span>&nbsp;<span class="ident" id="3004037">makeString</span><span class="op" id="3004047">(</span><span class="ident" id="3004048">v</span><span class="op" id="3004049">.</span><span class="ident" id="3004050">flag</span><span class="op" id="3004054">&amp;</span><span class="ident" id="3004055">flagRO</span><span class="op" id="3004061">,</span>&nbsp;<span class="builtintype" id="3004063">string</span><span class="op" id="3004069">(</span><span class="ident" id="3004070">v</span><span class="op" id="3004071">.</span><span class="ident" id="3004072">Uint</span><span class="op" id="3004076">(</span><span class="op" id="3004077">)</span><span class="op" id="3004078">)</span><span class="op" id="3004079">,</span>&nbsp;<span class="ident" id="3004081">t</span><span class="op" id="3004082">)</span><br>
<span class="lineno">2345</span><span class="op" id="3004084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004087">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="3004118">func</span>&nbsp;<span class="ident" id="3004123">cvtBytesString</span><span class="op" id="3004137">(</span><span class="ident" id="3004138">v</span>&nbsp;<span class="ident" id="3004140">Value</span><span class="op" id="3004145">,</span>&nbsp;<span class="ident" id="3004147">t</span>&nbsp;<span class="ident" id="3004149">Type</span><span class="op" id="3004153">)</span>&nbsp;<span class="ident" id="3004155">Value</span>&nbsp;<span class="op" id="3004161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004164">return</span>&nbsp;<span class="ident" id="3004171">makeString</span><span class="op" id="3004181">(</span><span class="ident" id="3004182">v</span><span class="op" id="3004183">.</span><span class="ident" id="3004184">flag</span><span class="op" id="3004188">&amp;</span><span class="ident" id="3004189">flagRO</span><span class="op" id="3004195">,</span>&nbsp;<span class="builtintype" id="3004197">string</span><span class="op" id="3004203">(</span><span class="ident" id="3004204">v</span><span class="op" id="3004205">.</span><span class="ident" id="3004206">Bytes</span><span class="op" id="3004211">(</span><span class="op" id="3004212">)</span><span class="op" id="3004213">)</span><span class="op" id="3004214">,</span>&nbsp;<span class="ident" id="3004216">t</span><span class="op" id="3004217">)</span><br>
<span class="lineno">2350</span><span class="op" id="3004219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004222">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="3004253">func</span>&nbsp;<span class="ident" id="3004258">cvtStringBytes</span><span class="op" id="3004272">(</span><span class="ident" id="3004273">v</span>&nbsp;<span class="ident" id="3004275">Value</span><span class="op" id="3004280">,</span>&nbsp;<span class="ident" id="3004282">t</span>&nbsp;<span class="ident" id="3004284">Type</span><span class="op" id="3004288">)</span>&nbsp;<span class="ident" id="3004290">Value</span>&nbsp;<span class="op" id="3004296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004299">return</span>&nbsp;<span class="ident" id="3004306">makeBytes</span><span class="op" id="3004315">(</span><span class="ident" id="3004316">v</span><span class="op" id="3004317">.</span><span class="ident" id="3004318">flag</span><span class="op" id="3004322">&amp;</span><span class="ident" id="3004323">flagRO</span><span class="op" id="3004329">,</span>&nbsp;<span class="op" id="3004331">[</span><span class="op" id="3004332">]</span><span class="builtintype" id="3004333">byte</span><span class="op" id="3004337">(</span><span class="ident" id="3004338">v</span><span class="op" id="3004339">.</span><span class="ident" id="3004340">String</span><span class="op" id="3004346">(</span><span class="op" id="3004347">)</span><span class="op" id="3004348">)</span><span class="op" id="3004349">,</span>&nbsp;<span class="ident" id="3004351">t</span><span class="op" id="3004352">)</span><br>
<span class="lineno">2355</span><span class="op" id="3004354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004357">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="3004388">func</span>&nbsp;<span class="ident" id="3004393">cvtRunesString</span><span class="op" id="3004407">(</span><span class="ident" id="3004408">v</span>&nbsp;<span class="ident" id="3004410">Value</span><span class="op" id="3004415">,</span>&nbsp;<span class="ident" id="3004417">t</span>&nbsp;<span class="ident" id="3004419">Type</span><span class="op" id="3004423">)</span>&nbsp;<span class="ident" id="3004425">Value</span>&nbsp;<span class="op" id="3004431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004434">return</span>&nbsp;<span class="ident" id="3004441">makeString</span><span class="op" id="3004451">(</span><span class="ident" id="3004452">v</span><span class="op" id="3004453">.</span><span class="ident" id="3004454">flag</span><span class="op" id="3004458">&amp;</span><span class="ident" id="3004459">flagRO</span><span class="op" id="3004465">,</span>&nbsp;<span class="builtintype" id="3004467">string</span><span class="op" id="3004473">(</span><span class="ident" id="3004474">v</span><span class="op" id="3004475">.</span><span class="ident" id="3004476">runes</span><span class="op" id="3004481">(</span><span class="op" id="3004482">)</span><span class="op" id="3004483">)</span><span class="op" id="3004484">,</span>&nbsp;<span class="ident" id="3004486">t</span><span class="op" id="3004487">)</span><br>
<span class="lineno">2360</span><span class="op" id="3004489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004492">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="3004523">func</span>&nbsp;<span class="ident" id="3004528">cvtStringRunes</span><span class="op" id="3004542">(</span><span class="ident" id="3004543">v</span>&nbsp;<span class="ident" id="3004545">Value</span><span class="op" id="3004550">,</span>&nbsp;<span class="ident" id="3004552">t</span>&nbsp;<span class="ident" id="3004554">Type</span><span class="op" id="3004558">)</span>&nbsp;<span class="ident" id="3004560">Value</span>&nbsp;<span class="op" id="3004566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004569">return</span>&nbsp;<span class="ident" id="3004576">makeRunes</span><span class="op" id="3004585">(</span><span class="ident" id="3004586">v</span><span class="op" id="3004587">.</span><span class="ident" id="3004588">flag</span><span class="op" id="3004592">&amp;</span><span class="ident" id="3004593">flagRO</span><span class="op" id="3004599">,</span>&nbsp;<span class="op" id="3004601">[</span><span class="op" id="3004602">]</span><span class="builtintype" id="3004603">rune</span><span class="op" id="3004607">(</span><span class="ident" id="3004608">v</span><span class="op" id="3004609">.</span><span class="ident" id="3004610">String</span><span class="op" id="3004616">(</span><span class="op" id="3004617">)</span><span class="op" id="3004618">)</span><span class="op" id="3004619">,</span>&nbsp;<span class="ident" id="3004621">t</span><span class="op" id="3004622">)</span><br>
<span class="lineno">2365</span><span class="op" id="3004624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004627">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="3004653">func</span>&nbsp;<span class="ident" id="3004658">cvtDirect</span><span class="op" id="3004667">(</span><span class="ident" id="3004668">v</span>&nbsp;<span class="ident" id="3004670">Value</span><span class="op" id="3004675">,</span>&nbsp;<span class="ident" id="3004677">typ</span>&nbsp;<span class="ident" id="3004681">Type</span><span class="op" id="3004685">)</span>&nbsp;<span class="ident" id="3004687">Value</span>&nbsp;<span class="op" id="3004693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004696">f</span>&nbsp;<span class="op" id="3004698">:=</span>&nbsp;<span class="ident" id="3004701">v</span><span class="op" id="3004702">.</span><span class="ident" id="3004703">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004709">t</span>&nbsp;<span class="op" id="3004711">:=</span>&nbsp;<span class="ident" id="3004714">typ</span><span class="op" id="3004717">.</span><span class="ident" id="3004718">common</span><span class="op" id="3004724">(</span><span class="op" id="3004725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004728">ptr</span>&nbsp;<span class="op" id="3004732">:=</span>&nbsp;<span class="ident" id="3004735">v</span><span class="op" id="3004736">.</span><span class="ident" id="3004737">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004742">if</span>&nbsp;<span class="ident" id="3004745">f</span><span class="op" id="3004746">&amp;</span><span class="ident" id="3004747">flagAddr</span>&nbsp;<span class="op" id="3004756">!=</span>&nbsp;<span class="num" id="3004759">0</span>&nbsp;<span class="op" id="3004761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3004765">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004807">c</span>&nbsp;<span class="op" id="3004809">:=</span>&nbsp;<span class="ident" id="3004812">unsafe_New</span><span class="op" id="3004822">(</span><span class="ident" id="3004823">t</span><span class="op" id="3004824">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004828">memmove</span><span class="op" id="3004835">(</span><span class="ident" id="3004836">c</span><span class="op" id="3004837">,</span>&nbsp;<span class="ident" id="3004839">ptr</span><span class="op" id="3004842">,</span>&nbsp;<span class="ident" id="3004844">t</span><span class="op" id="3004845">.</span><span class="ident" id="3004846">size</span><span class="op" id="3004850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004854">ptr</span>&nbsp;<span class="op" id="3004858">=</span>&nbsp;<span class="ident" id="3004860">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3004864">f</span>&nbsp;<span class="op" id="3004866">&amp;^=</span>&nbsp;<span class="ident" id="3004870">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3004880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3004883">return</span>&nbsp;<span class="ident" id="3004890">Value</span><span class="op" id="3004895">{</span><span class="ident" id="3004896">t</span><span class="op" id="3004897">,</span>&nbsp;<span class="ident" id="3004899">ptr</span><span class="op" id="3004902">,</span>&nbsp;<span class="ident" id="3004904">v</span><span class="op" id="3004905">.</span><span class="ident" id="3004906">flag</span><span class="op" id="3004910">&amp;</span><span class="ident" id="3004911">flagRO</span>&nbsp;<span class="op" id="3004918">|</span>&nbsp;<span class="ident" id="3004920">f</span><span class="op" id="3004921">}</span>&nbsp;<span class="comment" id="3004923">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="3004948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3004951">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="3004987">func</span>&nbsp;<span class="ident" id="3004992">cvtT2I</span><span class="op" id="3004998">(</span><span class="ident" id="3004999">v</span>&nbsp;<span class="ident" id="3005001">Value</span><span class="op" id="3005006">,</span>&nbsp;<span class="ident" id="3005008">typ</span>&nbsp;<span class="ident" id="3005012">Type</span><span class="op" id="3005016">)</span>&nbsp;<span class="ident" id="3005018">Value</span>&nbsp;<span class="op" id="3005024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005027">target</span>&nbsp;<span class="op" id="3005034">:=</span>&nbsp;<span class="ident" id="3005037">unsafe_New</span><span class="op" id="3005047">(</span><span class="ident" id="3005048">typ</span><span class="op" id="3005051">.</span><span class="ident" id="3005052">common</span><span class="op" id="3005058">(</span><span class="op" id="3005059">)</span><span class="op" id="3005060">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005063">x</span>&nbsp;<span class="op" id="3005065">:=</span>&nbsp;<span class="ident" id="3005068">valueInterface</span><span class="op" id="3005082">(</span><span class="ident" id="3005083">v</span><span class="op" id="3005084">,</span>&nbsp;<span class="builtintype" id="3005086">false</span><span class="op" id="3005091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005094">if</span>&nbsp;<span class="ident" id="3005097">typ</span><span class="op" id="3005100">.</span><span class="ident" id="3005101">NumMethod</span><span class="op" id="3005110">(</span><span class="op" id="3005111">)</span>&nbsp;<span class="op" id="3005113">==</span>&nbsp;<span class="num" id="3005116">0</span>&nbsp;<span class="op" id="3005118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005122">*</span><span class="op" id="3005123">(</span><span class="op" id="3005124">*</span><span class="keyword" id="3005125">interface</span><span class="op" id="3005134">{</span><span class="op" id="3005135">}</span><span class="op" id="3005136">)</span><span class="op" id="3005137">(</span><span class="ident" id="3005138">target</span><span class="op" id="3005144">)</span>&nbsp;<span class="op" id="3005146">=</span>&nbsp;<span class="ident" id="3005148">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005151">}</span>&nbsp;<span class="keyword" id="3005153">else</span>&nbsp;<span class="op" id="3005158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005162">ifaceE2I</span><span class="op" id="3005170">(</span><span class="ident" id="3005171">typ</span><span class="op" id="3005174">.</span><span class="op" id="3005175">(</span><span class="op" id="3005176">*</span><span class="ident" id="3005177">rtype</span><span class="op" id="3005182">)</span><span class="op" id="3005183">,</span>&nbsp;<span class="ident" id="3005185">x</span><span class="op" id="3005186">,</span>&nbsp;<span class="ident" id="3005188">target</span><span class="op" id="3005194">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005200">return</span>&nbsp;<span class="ident" id="3005207">Value</span><span class="op" id="3005212">{</span><span class="ident" id="3005213">typ</span><span class="op" id="3005216">.</span><span class="ident" id="3005217">common</span><span class="op" id="3005223">(</span><span class="op" id="3005224">)</span><span class="op" id="3005225">,</span>&nbsp;<span class="ident" id="3005227">target</span><span class="op" id="3005233">,</span>&nbsp;<span class="ident" id="3005235">v</span><span class="op" id="3005236">.</span><span class="ident" id="3005237">flag</span><span class="op" id="3005241">&amp;</span><span class="ident" id="3005242">flagRO</span>&nbsp;<span class="op" id="3005249">|</span>&nbsp;<span class="ident" id="3005251">flagIndir</span>&nbsp;<span class="op" id="3005261">|</span>&nbsp;<span class="ident" id="3005263">flag</span><span class="op" id="3005267">(</span><span class="ident" id="3005268">Interface</span><span class="op" id="3005277">)</span><span class="op" id="3005278">}</span><br>
<span class="lineno"></span><span class="op" id="3005280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3005283">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="3005320">func</span>&nbsp;<span class="ident" id="3005325">cvtI2I</span><span class="op" id="3005331">(</span><span class="ident" id="3005332">v</span>&nbsp;<span class="ident" id="3005334">Value</span><span class="op" id="3005339">,</span>&nbsp;<span class="ident" id="3005341">typ</span>&nbsp;<span class="ident" id="3005345">Type</span><span class="op" id="3005349">)</span>&nbsp;<span class="ident" id="3005351">Value</span>&nbsp;<span class="op" id="3005357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005360">if</span>&nbsp;<span class="ident" id="3005363">v</span><span class="op" id="3005364">.</span><span class="ident" id="3005365">IsNil</span><span class="op" id="3005370">(</span><span class="op" id="3005371">)</span>&nbsp;<span class="op" id="3005373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005377">ret</span>&nbsp;<span class="op" id="3005381">:=</span>&nbsp;<span class="ident" id="3005384">Zero</span><span class="op" id="3005388">(</span><span class="ident" id="3005389">typ</span><span class="op" id="3005392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3005396">ret</span><span class="op" id="3005399">.</span><span class="ident" id="3005400">flag</span>&nbsp;<span class="op" id="3005405">|=</span>&nbsp;<span class="ident" id="3005408">v</span><span class="op" id="3005409">.</span><span class="ident" id="3005410">flag</span>&nbsp;<span class="op" id="3005415">&amp;</span>&nbsp;<span class="ident" id="3005417">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005426">return</span>&nbsp;<span class="ident" id="3005433">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3005438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3005441">return</span>&nbsp;<span class="ident" id="3005448">cvtT2I</span><span class="op" id="3005454">(</span><span class="ident" id="3005455">v</span><span class="op" id="3005456">.</span><span class="ident" id="3005457">Elem</span><span class="op" id="3005461">(</span><span class="op" id="3005462">)</span><span class="op" id="3005463">,</span>&nbsp;<span class="ident" id="3005465">typ</span><span class="op" id="3005468">)</span><br>
<span class="lineno"></span><span class="op" id="3005470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3005473">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="3005502">func</span>&nbsp;<span class="ident" id="3005507">chancap</span><span class="op" id="3005514">(</span><span class="ident" id="3005515">ch</span>&nbsp;<span class="ident" id="3005518">unsafe</span><span class="op" id="3005524">.</span><span class="ident" id="3005525">Pointer</span><span class="op" id="3005532">)</span>&nbsp;<span class="builtintype" id="3005534">int</span><br>
<span class="lineno"></span><span class="keyword" id="3005538">func</span>&nbsp;<span class="ident" id="3005543">chanclose</span><span class="op" id="3005552">(</span><span class="ident" id="3005553">ch</span>&nbsp;<span class="ident" id="3005556">unsafe</span><span class="op" id="3005562">.</span><span class="ident" id="3005563">Pointer</span><span class="op" id="3005570">)</span><br>
<span class="lineno"></span><span class="keyword" id="3005572">func</span>&nbsp;<span class="ident" id="3005577">chanlen</span><span class="op" id="3005584">(</span><span class="ident" id="3005585">ch</span>&nbsp;<span class="ident" id="3005588">unsafe</span><span class="op" id="3005594">.</span><span class="ident" id="3005595">Pointer</span><span class="op" id="3005602">)</span>&nbsp;<span class="builtintype" id="3005604">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3005609">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="3005623">func</span>&nbsp;<span class="ident" id="3005628">chanrecv</span><span class="op" id="3005636">(</span><span class="ident" id="3005637">t</span>&nbsp;<span class="op" id="3005639">*</span><span class="ident" id="3005640">rtype</span><span class="op" id="3005645">,</span>&nbsp;<span class="ident" id="3005647">ch</span>&nbsp;<span class="ident" id="3005650">unsafe</span><span class="op" id="3005656">.</span><span class="ident" id="3005657">Pointer</span><span class="op" id="3005664">,</span>&nbsp;<span class="ident" id="3005666">nb</span>&nbsp;<span class="builtintype" id="3005669">bool</span><span class="op" id="3005673">,</span>&nbsp;<span class="ident" id="3005675">val</span>&nbsp;<span class="ident" id="3005679">unsafe</span><span class="op" id="3005685">.</span><span class="ident" id="3005686">Pointer</span><span class="op" id="3005693">)</span>&nbsp;<span class="op" id="3005695">(</span><span class="ident" id="3005696">selected</span><span class="op" id="3005704">,</span>&nbsp;<span class="ident" id="3005706">received</span>&nbsp;<span class="builtintype" id="3005715">bool</span><span class="op" id="3005719">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3005722">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="3005736">func</span>&nbsp;<span class="ident" id="3005741">chansend</span><span class="op" id="3005749">(</span><span class="ident" id="3005750">t</span>&nbsp;<span class="op" id="3005752">*</span><span class="ident" id="3005753">rtype</span><span class="op" id="3005758">,</span>&nbsp;<span class="ident" id="3005760">ch</span>&nbsp;<span class="ident" id="3005763">unsafe</span><span class="op" id="3005769">.</span><span class="ident" id="3005770">Pointer</span><span class="op" id="3005777">,</span>&nbsp;<span class="ident" id="3005779">val</span>&nbsp;<span class="ident" id="3005783">unsafe</span><span class="op" id="3005789">.</span><span class="ident" id="3005790">Pointer</span><span class="op" id="3005797">,</span>&nbsp;<span class="ident" id="3005799">nb</span>&nbsp;<span class="builtintype" id="3005802">bool</span><span class="op" id="3005806">)</span>&nbsp;<span class="builtintype" id="3005808">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="3005814">func</span>&nbsp;<span class="ident" id="3005819">makechan</span><span class="op" id="3005827">(</span><span class="ident" id="3005828">typ</span>&nbsp;<span class="op" id="3005832">*</span><span class="ident" id="3005833">rtype</span><span class="op" id="3005838">,</span>&nbsp;<span class="ident" id="3005840">size</span>&nbsp;<span class="ident" id="3005845">uint64</span><span class="op" id="3005851">)</span>&nbsp;<span class="op" id="3005853">(</span><span class="ident" id="3005854">ch</span>&nbsp;<span class="ident" id="3005857">unsafe</span><span class="op" id="3005863">.</span><span class="ident" id="3005864">Pointer</span><span class="op" id="3005871">)</span><br>
<span class="lineno"></span><span class="keyword" id="3005873">func</span>&nbsp;<span class="ident" id="3005878">makemap</span><span class="op" id="3005885">(</span><span class="ident" id="3005886">t</span>&nbsp;<span class="op" id="3005888">*</span><span class="ident" id="3005889">rtype</span><span class="op" id="3005894">)</span>&nbsp;<span class="op" id="3005896">(</span><span class="ident" id="3005897">m</span>&nbsp;<span class="ident" id="3005899">unsafe</span><span class="op" id="3005905">.</span><span class="ident" id="3005906">Pointer</span><span class="op" id="3005913">)</span><br>
<span class="lineno"></span><span class="keyword" id="3005915">func</span>&nbsp;<span class="ident" id="3005920">mapaccess</span><span class="op" id="3005929">(</span><span class="ident" id="3005930">t</span>&nbsp;<span class="op" id="3005932">*</span><span class="ident" id="3005933">rtype</span><span class="op" id="3005938">,</span>&nbsp;<span class="ident" id="3005940">m</span>&nbsp;<span class="ident" id="3005942">unsafe</span><span class="op" id="3005948">.</span><span class="ident" id="3005949">Pointer</span><span class="op" id="3005956">,</span>&nbsp;<span class="ident" id="3005958">key</span>&nbsp;<span class="ident" id="3005962">unsafe</span><span class="op" id="3005968">.</span><span class="ident" id="3005969">Pointer</span><span class="op" id="3005976">)</span>&nbsp;<span class="op" id="3005978">(</span><span class="ident" id="3005979">val</span>&nbsp;<span class="ident" id="3005983">unsafe</span><span class="op" id="3005989">.</span><span class="ident" id="3005990">Pointer</span><span class="op" id="3005997">)</span><br>
<span class="lineno"></span><span class="keyword" id="3005999">func</span>&nbsp;<span class="ident" id="3006004">mapassign</span><span class="op" id="3006013">(</span><span class="ident" id="3006014">t</span>&nbsp;<span class="op" id="3006016">*</span><span class="ident" id="3006017">rtype</span><span class="op" id="3006022">,</span>&nbsp;<span class="ident" id="3006024">m</span>&nbsp;<span class="ident" id="3006026">unsafe</span><span class="op" id="3006032">.</span><span class="ident" id="3006033">Pointer</span><span class="op" id="3006040">,</span>&nbsp;<span class="ident" id="3006042">key</span><span class="op" id="3006045">,</span>&nbsp;<span class="ident" id="3006047">val</span>&nbsp;<span class="ident" id="3006051">unsafe</span><span class="op" id="3006057">.</span><span class="ident" id="3006058">Pointer</span><span class="op" id="3006065">)</span><br>
<span class="lineno"></span><span class="keyword" id="3006067">func</span>&nbsp;<span class="ident" id="3006072">mapdelete</span><span class="op" id="3006081">(</span><span class="ident" id="3006082">t</span>&nbsp;<span class="op" id="3006084">*</span><span class="ident" id="3006085">rtype</span><span class="op" id="3006090">,</span>&nbsp;<span class="ident" id="3006092">m</span>&nbsp;<span class="ident" id="3006094">unsafe</span><span class="op" id="3006100">.</span><span class="ident" id="3006101">Pointer</span><span class="op" id="3006108">,</span>&nbsp;<span class="ident" id="3006110">key</span>&nbsp;<span class="ident" id="3006114">unsafe</span><span class="op" id="3006120">.</span><span class="ident" id="3006121">Pointer</span><span class="op" id="3006128">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="3006130">func</span>&nbsp;<span class="ident" id="3006135">mapiterinit</span><span class="op" id="3006146">(</span><span class="ident" id="3006147">t</span>&nbsp;<span class="op" id="3006149">*</span><span class="ident" id="3006150">rtype</span><span class="op" id="3006155">,</span>&nbsp;<span class="ident" id="3006157">m</span>&nbsp;<span class="ident" id="3006159">unsafe</span><span class="op" id="3006165">.</span><span class="ident" id="3006166">Pointer</span><span class="op" id="3006173">)</span>&nbsp;<span class="ident" id="3006175">unsafe</span><span class="op" id="3006181">.</span><span class="ident" id="3006182">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="3006190">func</span>&nbsp;<span class="ident" id="3006195">mapiterkey</span><span class="op" id="3006205">(</span><span class="ident" id="3006206">it</span>&nbsp;<span class="ident" id="3006209">unsafe</span><span class="op" id="3006215">.</span><span class="ident" id="3006216">Pointer</span><span class="op" id="3006223">)</span>&nbsp;<span class="op" id="3006225">(</span><span class="ident" id="3006226">key</span>&nbsp;<span class="ident" id="3006230">unsafe</span><span class="op" id="3006236">.</span><span class="ident" id="3006237">Pointer</span><span class="op" id="3006244">)</span><br>
<span class="lineno"></span><span class="keyword" id="3006246">func</span>&nbsp;<span class="ident" id="3006251">mapiternext</span><span class="op" id="3006262">(</span><span class="ident" id="3006263">it</span>&nbsp;<span class="ident" id="3006266">unsafe</span><span class="op" id="3006272">.</span><span class="ident" id="3006273">Pointer</span><span class="op" id="3006280">)</span><br>
<span class="lineno"></span><span class="keyword" id="3006282">func</span>&nbsp;<span class="ident" id="3006287">maplen</span><span class="op" id="3006293">(</span><span class="ident" id="3006294">m</span>&nbsp;<span class="ident" id="3006296">unsafe</span><span class="op" id="3006302">.</span><span class="ident" id="3006303">Pointer</span><span class="op" id="3006310">)</span>&nbsp;<span class="builtintype" id="3006312">int</span><br>
<span class="lineno"></span><span class="keyword" id="3006316">func</span>&nbsp;<span class="ident" id="3006321">call</span><span class="op" id="3006325">(</span><span class="ident" id="3006326">fn</span><span class="op" id="3006328">,</span>&nbsp;<span class="ident" id="3006330">arg</span>&nbsp;<span class="ident" id="3006334">unsafe</span><span class="op" id="3006340">.</span><span class="ident" id="3006341">Pointer</span><span class="op" id="3006348">,</span>&nbsp;<span class="ident" id="3006350">n</span>&nbsp;<span class="builtintype" id="3006352">uint32</span><span class="op" id="3006358">,</span>&nbsp;<span class="ident" id="3006360">retoffset</span>&nbsp;<span class="builtintype" id="3006370">uint32</span><span class="op" id="3006376">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="3006379">func</span>&nbsp;<span class="ident" id="3006384">ifaceE2I</span><span class="op" id="3006392">(</span><span class="ident" id="3006393">t</span>&nbsp;<span class="op" id="3006395">*</span><span class="ident" id="3006396">rtype</span><span class="op" id="3006401">,</span>&nbsp;<span class="ident" id="3006403">src</span>&nbsp;<span class="keyword" id="3006407">interface</span><span class="op" id="3006416">{</span><span class="op" id="3006417">}</span><span class="op" id="3006418">,</span>&nbsp;<span class="ident" id="3006420">dst</span>&nbsp;<span class="ident" id="3006424">unsafe</span><span class="op" id="3006430">.</span><span class="ident" id="3006431">Pointer</span><span class="op" id="3006438">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3006441">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="3006455">func</span>&nbsp;<span class="ident" id="3006460">memmove</span><span class="op" id="3006467">(</span><span class="ident" id="3006468">adst</span><span class="op" id="3006472">,</span>&nbsp;<span class="ident" id="3006474">asrc</span>&nbsp;<span class="ident" id="3006479">unsafe</span><span class="op" id="3006485">.</span><span class="ident" id="3006486">Pointer</span><span class="op" id="3006493">,</span>&nbsp;<span class="ident" id="3006495">n</span>&nbsp;<span class="builtintype" id="3006497">uintptr</span><span class="op" id="3006504">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="3006507">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="3006561">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3006622">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="3006653">func</span>&nbsp;<span class="ident" id="3006658">escapes</span><span class="op" id="3006665">(</span><span class="ident" id="3006666">x</span>&nbsp;<span class="keyword" id="3006668">interface</span><span class="op" id="3006677">{</span><span class="op" id="3006678">}</span><span class="op" id="3006679">)</span>&nbsp;<span class="op" id="3006681">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3006684">if</span>&nbsp;<span class="ident" id="3006687">dummy</span><span class="op" id="3006692">.</span><span class="ident" id="3006693">b</span>&nbsp;<span class="op" id="3006695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006699">dummy</span><span class="op" id="3006704">.</span><span class="ident" id="3006705">x</span>&nbsp;<span class="op" id="3006707">=</span>&nbsp;<span class="ident" id="3006709">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3006712">}</span><br>
<span class="lineno"></span><span class="op" id="3006714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="3006717">var</span>&nbsp;<span class="ident" id="3006721">dummy</span>&nbsp;<span class="keyword" id="3006727">struct</span>&nbsp;<span class="op" id="3006734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006737">b</span>&nbsp;<span class="builtintype" id="3006739">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3006745">x</span>&nbsp;<span class="keyword" id="3006747">interface</span><span class="op" id="3006756">{</span><span class="op" id="3006757">}</span><br>
<span class="lineno"></span><span class="op" id="3006759">}</span>
</div>
</body>
</html>
