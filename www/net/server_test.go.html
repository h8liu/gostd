<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7954935">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7954990">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7955044">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7955095">package</span>&nbsp;<span class="ident" id="7955103">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955108">import</span>&nbsp;<span class="op" id="7955115">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955118">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955126">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955132">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955138">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955149">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955160">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7955167">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7955170">func</span>&nbsp;<span class="ident" id="7955175">skipServerTest</span><span class="op" id="7955189">(</span><span class="ident" id="7955190">net</span><span class="op" id="7955193">,</span>&nbsp;<span class="ident" id="7955195">unixsotype</span><span class="op" id="7955205">,</span>&nbsp;<span class="ident" id="7955207">addr</span>&nbsp;<span class="builtintype" id="7955212">string</span><span class="op" id="7955218">,</span>&nbsp;<span class="ident" id="7955220">ipv6</span><span class="op" id="7955224">,</span>&nbsp;<span class="ident" id="7955226">ipv4map</span><span class="op" id="7955233">,</span>&nbsp;<span class="ident" id="7955235">linuxOnly</span>&nbsp;<span class="builtintype" id="7955245">bool</span><span class="op" id="7955249">)</span>&nbsp;<span class="builtintype" id="7955251">bool</span>&nbsp;<span class="op" id="7955256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955259">switch</span>&nbsp;<span class="ident" id="7955266"><a href="/net/server_test.go.html#7955138">runtime</a></span><span class="op" id="7955273">.</span><span class="ident" id="7955274">GOOS</span>&nbsp;<span class="op" id="7955279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955282">case</span>&nbsp;<span class="string" id="7955287">&#34;linux&#34;</span><span class="op" id="7955294">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955297">case</span>&nbsp;<span class="string" id="7955302">&#34;nacl&#34;</span><span class="op" id="7955308">,</span>&nbsp;<span class="string" id="7955310">&#34;plan9&#34;</span><span class="op" id="7955317">,</span>&nbsp;<span class="string" id="7955319">&#34;windows&#34;</span><span class="op" id="7955328">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7955332">//&nbsp;&#34;unix&#34;&nbsp;sockets&nbsp;are&nbsp;not&nbsp;supported&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Plan&nbsp;9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955393">if</span>&nbsp;<span class="ident" id="7955396"><a href="/net/server_test.go.html#7955190">net</a></span>&nbsp;<span class="op" id="7955400">==</span>&nbsp;<span class="ident" id="7955403"><a href="/net/server_test.go.html#7955195">unixsotype</a></span>&nbsp;<span class="op" id="7955414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955419">return</span>&nbsp;<span class="builtintype" id="7955426">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955436">default</span><span class="op" id="7955443">:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955447">if</span>&nbsp;<span class="ident" id="7955450"><a href="/net/server_test.go.html#7955190">net</a></span>&nbsp;<span class="op" id="7955454">==</span>&nbsp;<span class="ident" id="7955457"><a href="/net/server_test.go.html#7955195">unixsotype</a></span>&nbsp;<span class="op" id="7955468">&amp;&amp;</span>&nbsp;<span class="ident" id="7955471"><a href="/net/server_test.go.html#7955235">linuxOnly</a></span>&nbsp;<span class="op" id="7955481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955486">return</span>&nbsp;<span class="builtintype" id="7955493">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955506">switch</span>&nbsp;<span class="ident" id="7955513"><a href="/net/server_test.go.html#7955207">addr</a></span>&nbsp;<span class="op" id="7955518">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955521">case</span>&nbsp;<span class="string" id="7955526">&#34;&#34;</span><span class="op" id="7955528">,</span>&nbsp;<span class="string" id="7955530">&#34;0.0.0.0&#34;</span><span class="op" id="7955539">,</span>&nbsp;<span class="string" id="7955541">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7955559">,</span>&nbsp;<span class="string" id="7955561">&#34;[::]&#34;</span><span class="op" id="7955567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955571">if</span>&nbsp;<span class="ident" id="7955574"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7955581">.</span><span class="ident" id="7955582">Short</span><span class="op" id="7955587">(</span><span class="op" id="7955588">)</span>&nbsp;<span class="op" id="7955590">||</span>&nbsp;<span class="op" id="7955593">!</span><span class="op" id="7955594">*</span><span class="ident" id="7955595"><a href="/net/lookup_test.go.html#7913432">testExternal</a></span>&nbsp;<span class="op" id="7955608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955613">return</span>&nbsp;<span class="builtintype" id="7955620">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955630">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955633">if</span>&nbsp;<span class="ident" id="7955636"><a href="/net/server_test.go.html#7955220">ipv6</a></span>&nbsp;<span class="op" id="7955641">&amp;&amp;</span>&nbsp;<span class="op" id="7955644">!</span><span class="ident" id="7955645"><a href="/net/ipsock.go.html#1440628">supportsIPv6</a></span>&nbsp;<span class="op" id="7955658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955662">return</span>&nbsp;<span class="builtintype" id="7955669">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955678">if</span>&nbsp;<span class="ident" id="7955681"><a href="/net/server_test.go.html#7955226">ipv4map</a></span>&nbsp;<span class="op" id="7955689">&amp;&amp;</span>&nbsp;<span class="op" id="7955692">!</span><span class="ident" id="7955693"><a href="/net/ipsock.go.html#1440829">supportsIPv4map</a></span>&nbsp;<span class="op" id="7955709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955713">return</span>&nbsp;<span class="builtintype" id="7955720">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7955729">return</span>&nbsp;<span class="builtintype" id="7955736">false</span><br>
<span class="lineno"></span><span class="op" id="7955742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955745">var</span>&nbsp;<span class="ident" id="7955749">streamConnServerTests</span>&nbsp;<span class="op" id="7955771">=</span>&nbsp;<span class="op" id="7955773">[</span><span class="op" id="7955774">]</span><span class="keyword" id="7955775">struct</span>&nbsp;<span class="op" id="7955782">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955785">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955795">string</span>&nbsp;<span class="comment" id="7955802">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955818">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955828">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955836">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955846">string</span>&nbsp;<span class="comment" id="7955853">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955869">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955887">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955897">bool</span>&nbsp;<span class="comment" id="7955902">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955943">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7955953">bool</span>&nbsp;<span class="comment" id="7955958">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956004">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7956014">bool</span>&nbsp;<span class="comment" id="7956019">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956044">linuxOnly</span>&nbsp;<span class="builtintype" id="7956054">bool</span>&nbsp;<span class="comment" id="7956059">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7956113">}</span><span class="op" id="7956114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956117">{</span><span class="ident" id="7956118">snet</span><span class="op" id="7956122">:</span>&nbsp;<span class="string" id="7956124">&#34;tcp&#34;</span><span class="op" id="7956129">,</span>&nbsp;<span class="ident" id="7956131">saddr</span><span class="op" id="7956136">:</span>&nbsp;<span class="string" id="7956138">&#34;&#34;</span><span class="op" id="7956140">,</span>&nbsp;<span class="ident" id="7956142">cnet</span><span class="op" id="7956146">:</span>&nbsp;<span class="string" id="7956148">&#34;tcp&#34;</span><span class="op" id="7956153">,</span>&nbsp;<span class="ident" id="7956155">caddr</span><span class="op" id="7956160">:</span>&nbsp;<span class="string" id="7956162">&#34;127.0.0.1&#34;</span><span class="op" id="7956173">}</span><span class="op" id="7956174">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956177">{</span><span class="ident" id="7956178">snet</span><span class="op" id="7956182">:</span>&nbsp;<span class="string" id="7956184">&#34;tcp&#34;</span><span class="op" id="7956189">,</span>&nbsp;<span class="ident" id="7956191">saddr</span><span class="op" id="7956196">:</span>&nbsp;<span class="string" id="7956198">&#34;0.0.0.0&#34;</span><span class="op" id="7956207">,</span>&nbsp;<span class="ident" id="7956209">cnet</span><span class="op" id="7956213">:</span>&nbsp;<span class="string" id="7956215">&#34;tcp&#34;</span><span class="op" id="7956220">,</span>&nbsp;<span class="ident" id="7956222">caddr</span><span class="op" id="7956227">:</span>&nbsp;<span class="string" id="7956229">&#34;127.0.0.1&#34;</span><span class="op" id="7956240">}</span><span class="op" id="7956241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956244">{</span><span class="ident" id="7956245">snet</span><span class="op" id="7956249">:</span>&nbsp;<span class="string" id="7956251">&#34;tcp&#34;</span><span class="op" id="7956256">,</span>&nbsp;<span class="ident" id="7956258">saddr</span><span class="op" id="7956263">:</span>&nbsp;<span class="string" id="7956265">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7956283">,</span>&nbsp;<span class="ident" id="7956285">cnet</span><span class="op" id="7956289">:</span>&nbsp;<span class="string" id="7956291">&#34;tcp&#34;</span><span class="op" id="7956296">,</span>&nbsp;<span class="ident" id="7956298">caddr</span><span class="op" id="7956303">:</span>&nbsp;<span class="string" id="7956305">&#34;127.0.0.1&#34;</span><span class="op" id="7956316">}</span><span class="op" id="7956317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956320">{</span><span class="ident" id="7956321">snet</span><span class="op" id="7956325">:</span>&nbsp;<span class="string" id="7956327">&#34;tcp&#34;</span><span class="op" id="7956332">,</span>&nbsp;<span class="ident" id="7956334">saddr</span><span class="op" id="7956339">:</span>&nbsp;<span class="string" id="7956341">&#34;[::]&#34;</span><span class="op" id="7956347">,</span>&nbsp;<span class="ident" id="7956349">cnet</span><span class="op" id="7956353">:</span>&nbsp;<span class="string" id="7956355">&#34;tcp&#34;</span><span class="op" id="7956360">,</span>&nbsp;<span class="ident" id="7956362">caddr</span><span class="op" id="7956367">:</span>&nbsp;<span class="string" id="7956369">&#34;[::1]&#34;</span><span class="op" id="7956376">,</span>&nbsp;<span class="ident" id="7956378">ipv6</span><span class="op" id="7956382">:</span>&nbsp;<span class="builtintype" id="7956384">true</span><span class="op" id="7956388">}</span><span class="op" id="7956389">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956393">{</span><span class="ident" id="7956394">snet</span><span class="op" id="7956398">:</span>&nbsp;<span class="string" id="7956400">&#34;tcp&#34;</span><span class="op" id="7956405">,</span>&nbsp;<span class="ident" id="7956407">saddr</span><span class="op" id="7956412">:</span>&nbsp;<span class="string" id="7956414">&#34;&#34;</span><span class="op" id="7956416">,</span>&nbsp;<span class="ident" id="7956418">cnet</span><span class="op" id="7956422">:</span>&nbsp;<span class="string" id="7956424">&#34;tcp&#34;</span><span class="op" id="7956429">,</span>&nbsp;<span class="ident" id="7956431">caddr</span><span class="op" id="7956436">:</span>&nbsp;<span class="string" id="7956438">&#34;[::1]&#34;</span><span class="op" id="7956445">,</span>&nbsp;<span class="ident" id="7956447">ipv4map</span><span class="op" id="7956454">:</span>&nbsp;<span class="builtintype" id="7956456">true</span><span class="op" id="7956460">}</span><span class="op" id="7956461">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956464">{</span><span class="ident" id="7956465">snet</span><span class="op" id="7956469">:</span>&nbsp;<span class="string" id="7956471">&#34;tcp&#34;</span><span class="op" id="7956476">,</span>&nbsp;<span class="ident" id="7956478">saddr</span><span class="op" id="7956483">:</span>&nbsp;<span class="string" id="7956485">&#34;0.0.0.0&#34;</span><span class="op" id="7956494">,</span>&nbsp;<span class="ident" id="7956496">cnet</span><span class="op" id="7956500">:</span>&nbsp;<span class="string" id="7956502">&#34;tcp&#34;</span><span class="op" id="7956507">,</span>&nbsp;<span class="ident" id="7956509">caddr</span><span class="op" id="7956514">:</span>&nbsp;<span class="string" id="7956516">&#34;[::1]&#34;</span><span class="op" id="7956523">,</span>&nbsp;<span class="ident" id="7956525">ipv4map</span><span class="op" id="7956532">:</span>&nbsp;<span class="builtintype" id="7956534">true</span><span class="op" id="7956538">}</span><span class="op" id="7956539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956542">{</span><span class="ident" id="7956543">snet</span><span class="op" id="7956547">:</span>&nbsp;<span class="string" id="7956549">&#34;tcp&#34;</span><span class="op" id="7956554">,</span>&nbsp;<span class="ident" id="7956556">saddr</span><span class="op" id="7956561">:</span>&nbsp;<span class="string" id="7956563">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7956581">,</span>&nbsp;<span class="ident" id="7956583">cnet</span><span class="op" id="7956587">:</span>&nbsp;<span class="string" id="7956589">&#34;tcp&#34;</span><span class="op" id="7956594">,</span>&nbsp;<span class="ident" id="7956596">caddr</span><span class="op" id="7956601">:</span>&nbsp;<span class="string" id="7956603">&#34;[::1]&#34;</span><span class="op" id="7956610">,</span>&nbsp;<span class="ident" id="7956612">ipv4map</span><span class="op" id="7956619">:</span>&nbsp;<span class="builtintype" id="7956621">true</span><span class="op" id="7956625">}</span><span class="op" id="7956626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956629">{</span><span class="ident" id="7956630">snet</span><span class="op" id="7956634">:</span>&nbsp;<span class="string" id="7956636">&#34;tcp&#34;</span><span class="op" id="7956641">,</span>&nbsp;<span class="ident" id="7956643">saddr</span><span class="op" id="7956648">:</span>&nbsp;<span class="string" id="7956650">&#34;[::]&#34;</span><span class="op" id="7956656">,</span>&nbsp;<span class="ident" id="7956658">cnet</span><span class="op" id="7956662">:</span>&nbsp;<span class="string" id="7956664">&#34;tcp&#34;</span><span class="op" id="7956669">,</span>&nbsp;<span class="ident" id="7956671">caddr</span><span class="op" id="7956676">:</span>&nbsp;<span class="string" id="7956678">&#34;127.0.0.1&#34;</span><span class="op" id="7956689">,</span>&nbsp;<span class="ident" id="7956691">ipv4map</span><span class="op" id="7956698">:</span>&nbsp;<span class="builtintype" id="7956700">true</span><span class="op" id="7956704">}</span><span class="op" id="7956705">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956709">{</span><span class="ident" id="7956710">snet</span><span class="op" id="7956714">:</span>&nbsp;<span class="string" id="7956716">&#34;tcp&#34;</span><span class="op" id="7956721">,</span>&nbsp;<span class="ident" id="7956723">saddr</span><span class="op" id="7956728">:</span>&nbsp;<span class="string" id="7956730">&#34;&#34;</span><span class="op" id="7956732">,</span>&nbsp;<span class="ident" id="7956734">cnet</span><span class="op" id="7956738">:</span>&nbsp;<span class="string" id="7956740">&#34;tcp4&#34;</span><span class="op" id="7956746">,</span>&nbsp;<span class="ident" id="7956748">caddr</span><span class="op" id="7956753">:</span>&nbsp;<span class="string" id="7956755">&#34;127.0.0.1&#34;</span><span class="op" id="7956766">}</span><span class="op" id="7956767">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956770">{</span><span class="ident" id="7956771">snet</span><span class="op" id="7956775">:</span>&nbsp;<span class="string" id="7956777">&#34;tcp&#34;</span><span class="op" id="7956782">,</span>&nbsp;<span class="ident" id="7956784">saddr</span><span class="op" id="7956789">:</span>&nbsp;<span class="string" id="7956791">&#34;0.0.0.0&#34;</span><span class="op" id="7956800">,</span>&nbsp;<span class="ident" id="7956802">cnet</span><span class="op" id="7956806">:</span>&nbsp;<span class="string" id="7956808">&#34;tcp4&#34;</span><span class="op" id="7956814">,</span>&nbsp;<span class="ident" id="7956816">caddr</span><span class="op" id="7956821">:</span>&nbsp;<span class="string" id="7956823">&#34;127.0.0.1&#34;</span><span class="op" id="7956834">}</span><span class="op" id="7956835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956838">{</span><span class="ident" id="7956839">snet</span><span class="op" id="7956843">:</span>&nbsp;<span class="string" id="7956845">&#34;tcp&#34;</span><span class="op" id="7956850">,</span>&nbsp;<span class="ident" id="7956852">saddr</span><span class="op" id="7956857">:</span>&nbsp;<span class="string" id="7956859">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7956877">,</span>&nbsp;<span class="ident" id="7956879">cnet</span><span class="op" id="7956883">:</span>&nbsp;<span class="string" id="7956885">&#34;tcp4&#34;</span><span class="op" id="7956891">,</span>&nbsp;<span class="ident" id="7956893">caddr</span><span class="op" id="7956898">:</span>&nbsp;<span class="string" id="7956900">&#34;127.0.0.1&#34;</span><span class="op" id="7956911">}</span><span class="op" id="7956912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956915">{</span><span class="ident" id="7956916">snet</span><span class="op" id="7956920">:</span>&nbsp;<span class="string" id="7956922">&#34;tcp&#34;</span><span class="op" id="7956927">,</span>&nbsp;<span class="ident" id="7956929">saddr</span><span class="op" id="7956934">:</span>&nbsp;<span class="string" id="7956936">&#34;[::]&#34;</span><span class="op" id="7956942">,</span>&nbsp;<span class="ident" id="7956944">cnet</span><span class="op" id="7956948">:</span>&nbsp;<span class="string" id="7956950">&#34;tcp6&#34;</span><span class="op" id="7956956">,</span>&nbsp;<span class="ident" id="7956958">caddr</span><span class="op" id="7956963">:</span>&nbsp;<span class="string" id="7956965">&#34;[::1]&#34;</span><span class="op" id="7956972">,</span>&nbsp;<span class="ident" id="7956974">ipv6</span><span class="op" id="7956978">:</span>&nbsp;<span class="builtintype" id="7956980">true</span><span class="op" id="7956984">}</span><span class="op" id="7956985">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956989">{</span><span class="ident" id="7956990">snet</span><span class="op" id="7956994">:</span>&nbsp;<span class="string" id="7956996">&#34;tcp&#34;</span><span class="op" id="7957001">,</span>&nbsp;<span class="ident" id="7957003">saddr</span><span class="op" id="7957008">:</span>&nbsp;<span class="string" id="7957010">&#34;&#34;</span><span class="op" id="7957012">,</span>&nbsp;<span class="ident" id="7957014">cnet</span><span class="op" id="7957018">:</span>&nbsp;<span class="string" id="7957020">&#34;tcp6&#34;</span><span class="op" id="7957026">,</span>&nbsp;<span class="ident" id="7957028">caddr</span><span class="op" id="7957033">:</span>&nbsp;<span class="string" id="7957035">&#34;[::1]&#34;</span><span class="op" id="7957042">,</span>&nbsp;<span class="ident" id="7957044">ipv4map</span><span class="op" id="7957051">:</span>&nbsp;<span class="builtintype" id="7957053">true</span><span class="op" id="7957057">}</span><span class="op" id="7957058">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957061">{</span><span class="ident" id="7957062">snet</span><span class="op" id="7957066">:</span>&nbsp;<span class="string" id="7957068">&#34;tcp&#34;</span><span class="op" id="7957073">,</span>&nbsp;<span class="ident" id="7957075">saddr</span><span class="op" id="7957080">:</span>&nbsp;<span class="string" id="7957082">&#34;0.0.0.0&#34;</span><span class="op" id="7957091">,</span>&nbsp;<span class="ident" id="7957093">cnet</span><span class="op" id="7957097">:</span>&nbsp;<span class="string" id="7957099">&#34;tcp6&#34;</span><span class="op" id="7957105">,</span>&nbsp;<span class="ident" id="7957107">caddr</span><span class="op" id="7957112">:</span>&nbsp;<span class="string" id="7957114">&#34;[::1]&#34;</span><span class="op" id="7957121">,</span>&nbsp;<span class="ident" id="7957123">ipv4map</span><span class="op" id="7957130">:</span>&nbsp;<span class="builtintype" id="7957132">true</span><span class="op" id="7957136">}</span><span class="op" id="7957137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957140">{</span><span class="ident" id="7957141">snet</span><span class="op" id="7957145">:</span>&nbsp;<span class="string" id="7957147">&#34;tcp&#34;</span><span class="op" id="7957152">,</span>&nbsp;<span class="ident" id="7957154">saddr</span><span class="op" id="7957159">:</span>&nbsp;<span class="string" id="7957161">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7957179">,</span>&nbsp;<span class="ident" id="7957181">cnet</span><span class="op" id="7957185">:</span>&nbsp;<span class="string" id="7957187">&#34;tcp6&#34;</span><span class="op" id="7957193">,</span>&nbsp;<span class="ident" id="7957195">caddr</span><span class="op" id="7957200">:</span>&nbsp;<span class="string" id="7957202">&#34;[::1]&#34;</span><span class="op" id="7957209">,</span>&nbsp;<span class="ident" id="7957211">ipv4map</span><span class="op" id="7957218">:</span>&nbsp;<span class="builtintype" id="7957220">true</span><span class="op" id="7957224">}</span><span class="op" id="7957225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957228">{</span><span class="ident" id="7957229">snet</span><span class="op" id="7957233">:</span>&nbsp;<span class="string" id="7957235">&#34;tcp&#34;</span><span class="op" id="7957240">,</span>&nbsp;<span class="ident" id="7957242">saddr</span><span class="op" id="7957247">:</span>&nbsp;<span class="string" id="7957249">&#34;[::]&#34;</span><span class="op" id="7957255">,</span>&nbsp;<span class="ident" id="7957257">cnet</span><span class="op" id="7957261">:</span>&nbsp;<span class="string" id="7957263">&#34;tcp4&#34;</span><span class="op" id="7957269">,</span>&nbsp;<span class="ident" id="7957271">caddr</span><span class="op" id="7957276">:</span>&nbsp;<span class="string" id="7957278">&#34;127.0.0.1&#34;</span><span class="op" id="7957289">,</span>&nbsp;<span class="ident" id="7957291">ipv4map</span><span class="op" id="7957298">:</span>&nbsp;<span class="builtintype" id="7957300">true</span><span class="op" id="7957304">}</span><span class="op" id="7957305">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957309">{</span><span class="ident" id="7957310">snet</span><span class="op" id="7957314">:</span>&nbsp;<span class="string" id="7957316">&#34;tcp&#34;</span><span class="op" id="7957321">,</span>&nbsp;<span class="ident" id="7957323">saddr</span><span class="op" id="7957328">:</span>&nbsp;<span class="string" id="7957330">&#34;127.0.0.1&#34;</span><span class="op" id="7957341">,</span>&nbsp;<span class="ident" id="7957343">cnet</span><span class="op" id="7957347">:</span>&nbsp;<span class="string" id="7957349">&#34;tcp&#34;</span><span class="op" id="7957354">,</span>&nbsp;<span class="ident" id="7957356">caddr</span><span class="op" id="7957361">:</span>&nbsp;<span class="string" id="7957363">&#34;127.0.0.1&#34;</span><span class="op" id="7957374">}</span><span class="op" id="7957375">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957378">{</span><span class="ident" id="7957379">snet</span><span class="op" id="7957383">:</span>&nbsp;<span class="string" id="7957385">&#34;tcp&#34;</span><span class="op" id="7957390">,</span>&nbsp;<span class="ident" id="7957392">saddr</span><span class="op" id="7957397">:</span>&nbsp;<span class="string" id="7957399">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7957419">,</span>&nbsp;<span class="ident" id="7957421">cnet</span><span class="op" id="7957425">:</span>&nbsp;<span class="string" id="7957427">&#34;tcp&#34;</span><span class="op" id="7957432">,</span>&nbsp;<span class="ident" id="7957434">caddr</span><span class="op" id="7957439">:</span>&nbsp;<span class="string" id="7957441">&#34;127.0.0.1&#34;</span><span class="op" id="7957452">}</span><span class="op" id="7957453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957456">{</span><span class="ident" id="7957457">snet</span><span class="op" id="7957461">:</span>&nbsp;<span class="string" id="7957463">&#34;tcp&#34;</span><span class="op" id="7957468">,</span>&nbsp;<span class="ident" id="7957470">saddr</span><span class="op" id="7957475">:</span>&nbsp;<span class="string" id="7957477">&#34;[::1]&#34;</span><span class="op" id="7957484">,</span>&nbsp;<span class="ident" id="7957486">cnet</span><span class="op" id="7957490">:</span>&nbsp;<span class="string" id="7957492">&#34;tcp&#34;</span><span class="op" id="7957497">,</span>&nbsp;<span class="ident" id="7957499">caddr</span><span class="op" id="7957504">:</span>&nbsp;<span class="string" id="7957506">&#34;[::1]&#34;</span><span class="op" id="7957513">,</span>&nbsp;<span class="ident" id="7957515">ipv6</span><span class="op" id="7957519">:</span>&nbsp;<span class="builtintype" id="7957521">true</span><span class="op" id="7957525">}</span><span class="op" id="7957526">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957530">{</span><span class="ident" id="7957531">snet</span><span class="op" id="7957535">:</span>&nbsp;<span class="string" id="7957537">&#34;tcp4&#34;</span><span class="op" id="7957543">,</span>&nbsp;<span class="ident" id="7957545">saddr</span><span class="op" id="7957550">:</span>&nbsp;<span class="string" id="7957552">&#34;&#34;</span><span class="op" id="7957554">,</span>&nbsp;<span class="ident" id="7957556">cnet</span><span class="op" id="7957560">:</span>&nbsp;<span class="string" id="7957562">&#34;tcp4&#34;</span><span class="op" id="7957568">,</span>&nbsp;<span class="ident" id="7957570">caddr</span><span class="op" id="7957575">:</span>&nbsp;<span class="string" id="7957577">&#34;127.0.0.1&#34;</span><span class="op" id="7957588">}</span><span class="op" id="7957589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957592">{</span><span class="ident" id="7957593">snet</span><span class="op" id="7957597">:</span>&nbsp;<span class="string" id="7957599">&#34;tcp4&#34;</span><span class="op" id="7957605">,</span>&nbsp;<span class="ident" id="7957607">saddr</span><span class="op" id="7957612">:</span>&nbsp;<span class="string" id="7957614">&#34;0.0.0.0&#34;</span><span class="op" id="7957623">,</span>&nbsp;<span class="ident" id="7957625">cnet</span><span class="op" id="7957629">:</span>&nbsp;<span class="string" id="7957631">&#34;tcp4&#34;</span><span class="op" id="7957637">,</span>&nbsp;<span class="ident" id="7957639">caddr</span><span class="op" id="7957644">:</span>&nbsp;<span class="string" id="7957646">&#34;127.0.0.1&#34;</span><span class="op" id="7957657">}</span><span class="op" id="7957658">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957661">{</span><span class="ident" id="7957662">snet</span><span class="op" id="7957666">:</span>&nbsp;<span class="string" id="7957668">&#34;tcp4&#34;</span><span class="op" id="7957674">,</span>&nbsp;<span class="ident" id="7957676">saddr</span><span class="op" id="7957681">:</span>&nbsp;<span class="string" id="7957683">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7957701">,</span>&nbsp;<span class="ident" id="7957703">cnet</span><span class="op" id="7957707">:</span>&nbsp;<span class="string" id="7957709">&#34;tcp4&#34;</span><span class="op" id="7957715">,</span>&nbsp;<span class="ident" id="7957717">caddr</span><span class="op" id="7957722">:</span>&nbsp;<span class="string" id="7957724">&#34;127.0.0.1&#34;</span><span class="op" id="7957735">}</span><span class="op" id="7957736">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957740">{</span><span class="ident" id="7957741">snet</span><span class="op" id="7957745">:</span>&nbsp;<span class="string" id="7957747">&#34;tcp4&#34;</span><span class="op" id="7957753">,</span>&nbsp;<span class="ident" id="7957755">saddr</span><span class="op" id="7957760">:</span>&nbsp;<span class="string" id="7957762">&#34;127.0.0.1&#34;</span><span class="op" id="7957773">,</span>&nbsp;<span class="ident" id="7957775">cnet</span><span class="op" id="7957779">:</span>&nbsp;<span class="string" id="7957781">&#34;tcp4&#34;</span><span class="op" id="7957787">,</span>&nbsp;<span class="ident" id="7957789">caddr</span><span class="op" id="7957794">:</span>&nbsp;<span class="string" id="7957796">&#34;127.0.0.1&#34;</span><span class="op" id="7957807">}</span><span class="op" id="7957808">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957812">{</span><span class="ident" id="7957813">snet</span><span class="op" id="7957817">:</span>&nbsp;<span class="string" id="7957819">&#34;tcp6&#34;</span><span class="op" id="7957825">,</span>&nbsp;<span class="ident" id="7957827">saddr</span><span class="op" id="7957832">:</span>&nbsp;<span class="string" id="7957834">&#34;&#34;</span><span class="op" id="7957836">,</span>&nbsp;<span class="ident" id="7957838">cnet</span><span class="op" id="7957842">:</span>&nbsp;<span class="string" id="7957844">&#34;tcp6&#34;</span><span class="op" id="7957850">,</span>&nbsp;<span class="ident" id="7957852">caddr</span><span class="op" id="7957857">:</span>&nbsp;<span class="string" id="7957859">&#34;[::1]&#34;</span><span class="op" id="7957866">,</span>&nbsp;<span class="ident" id="7957868">ipv6</span><span class="op" id="7957872">:</span>&nbsp;<span class="builtintype" id="7957874">true</span><span class="op" id="7957878">}</span><span class="op" id="7957879">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957882">{</span><span class="ident" id="7957883">snet</span><span class="op" id="7957887">:</span>&nbsp;<span class="string" id="7957889">&#34;tcp6&#34;</span><span class="op" id="7957895">,</span>&nbsp;<span class="ident" id="7957897">saddr</span><span class="op" id="7957902">:</span>&nbsp;<span class="string" id="7957904">&#34;[::]&#34;</span><span class="op" id="7957910">,</span>&nbsp;<span class="ident" id="7957912">cnet</span><span class="op" id="7957916">:</span>&nbsp;<span class="string" id="7957918">&#34;tcp6&#34;</span><span class="op" id="7957924">,</span>&nbsp;<span class="ident" id="7957926">caddr</span><span class="op" id="7957931">:</span>&nbsp;<span class="string" id="7957933">&#34;[::1]&#34;</span><span class="op" id="7957940">,</span>&nbsp;<span class="ident" id="7957942">ipv6</span><span class="op" id="7957946">:</span>&nbsp;<span class="builtintype" id="7957948">true</span><span class="op" id="7957952">}</span><span class="op" id="7957953">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957957">{</span><span class="ident" id="7957958">snet</span><span class="op" id="7957962">:</span>&nbsp;<span class="string" id="7957964">&#34;tcp6&#34;</span><span class="op" id="7957970">,</span>&nbsp;<span class="ident" id="7957972">saddr</span><span class="op" id="7957977">:</span>&nbsp;<span class="string" id="7957979">&#34;[::1]&#34;</span><span class="op" id="7957986">,</span>&nbsp;<span class="ident" id="7957988">cnet</span><span class="op" id="7957992">:</span>&nbsp;<span class="string" id="7957994">&#34;tcp6&#34;</span><span class="op" id="7958000">,</span>&nbsp;<span class="ident" id="7958002">caddr</span><span class="op" id="7958007">:</span>&nbsp;<span class="string" id="7958009">&#34;[::1]&#34;</span><span class="op" id="7958016">,</span>&nbsp;<span class="ident" id="7958018">ipv6</span><span class="op" id="7958022">:</span>&nbsp;<span class="builtintype" id="7958024">true</span><span class="op" id="7958028">}</span><span class="op" id="7958029">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958033">{</span><span class="ident" id="7958034">snet</span><span class="op" id="7958038">:</span>&nbsp;<span class="string" id="7958040">&#34;unix&#34;</span><span class="op" id="7958046">,</span>&nbsp;<span class="ident" id="7958048">saddr</span><span class="op" id="7958053">:</span>&nbsp;<span class="ident" id="7958055"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7958067">(</span><span class="op" id="7958068">)</span><span class="op" id="7958069">,</span>&nbsp;<span class="ident" id="7958071">cnet</span><span class="op" id="7958075">:</span>&nbsp;<span class="string" id="7958077">&#34;unix&#34;</span><span class="op" id="7958083">,</span>&nbsp;<span class="ident" id="7958085">caddr</span><span class="op" id="7958090">:</span>&nbsp;<span class="ident" id="7958092"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7958104">(</span><span class="op" id="7958105">)</span><span class="op" id="7958106">}</span><span class="op" id="7958107">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958110">{</span><span class="ident" id="7958111">snet</span><span class="op" id="7958115">:</span>&nbsp;<span class="string" id="7958117">&#34;unix&#34;</span><span class="op" id="7958123">,</span>&nbsp;<span class="ident" id="7958125">saddr</span><span class="op" id="7958130">:</span>&nbsp;<span class="string" id="7958132">&#34;@gotest2/net&#34;</span><span class="op" id="7958146">,</span>&nbsp;<span class="ident" id="7958148">cnet</span><span class="op" id="7958152">:</span>&nbsp;<span class="string" id="7958154">&#34;unix&#34;</span><span class="op" id="7958160">,</span>&nbsp;<span class="ident" id="7958162">caddr</span><span class="op" id="7958167">:</span>&nbsp;<span class="string" id="7958169">&#34;@gotest2/net.local&#34;</span><span class="op" id="7958189">,</span>&nbsp;<span class="ident" id="7958191">linuxOnly</span><span class="op" id="7958200">:</span>&nbsp;<span class="builtintype" id="7958202">true</span><span class="op" id="7958206">}</span><span class="op" id="7958207">,</span><br>
<span class="lineno"></span><span class="op" id="7958209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7958212">func</span>&nbsp;<span class="ident" id="7958217">TestStreamConnServer</span><span class="op" id="7958237">(</span><span class="ident" id="7958238">t</span>&nbsp;<span class="op" id="7958240">*</span><span class="ident" id="7958241"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7958248">.</span><span class="ident" id="7958249">T</span><span class="op" id="7958250">)</span>&nbsp;<span class="op" id="7958252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958255">for</span>&nbsp;<span class="ident" id="7958259">_</span><span class="op" id="7958260">,</span>&nbsp;<span class="ident" id="7958262">tt</span>&nbsp;<span class="op" id="7958265">:=</span>&nbsp;<span class="keyword" id="7958268">range</span>&nbsp;<span class="ident" id="7958274"><a href="/net/server_test.go.html#7955749">streamConnServerTests</a></span>&nbsp;<span class="op" id="7958296">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958300">if</span>&nbsp;<span class="ident" id="7958303"><a href="/net/server_test.go.html#7955175">skipServerTest</a></span><span class="op" id="7958317">(</span><span class="ident" id="7958318"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958320">.</span><span class="ident" id="7958321">snet</span><span class="op" id="7958325">,</span>&nbsp;<span class="string" id="7958327">&#34;unix&#34;</span><span class="op" id="7958333">,</span>&nbsp;<span class="ident" id="7958335"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958337">.</span><span class="ident" id="7958338">saddr</span><span class="op" id="7958343">,</span>&nbsp;<span class="ident" id="7958345"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958347">.</span><span class="ident" id="7958348">ipv6</span><span class="op" id="7958352">,</span>&nbsp;<span class="ident" id="7958354"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958356">.</span><span class="ident" id="7958357">ipv4map</span><span class="op" id="7958364">,</span>&nbsp;<span class="ident" id="7958366"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958368">.</span><span class="ident" id="7958369">linuxOnly</span><span class="op" id="7958378">)</span>&nbsp;<span class="op" id="7958380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958385">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958401">listening</span>&nbsp;<span class="op" id="7958411">:=</span>&nbsp;<span class="builtinfunc" id="7958414">make</span><span class="op" id="7958418">(</span><span class="keyword" id="7958419">chan</span>&nbsp;<span class="builtintype" id="7958424">string</span><span class="op" id="7958430">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958434">done</span>&nbsp;<span class="op" id="7958439">:=</span>&nbsp;<span class="builtinfunc" id="7958442">make</span><span class="op" id="7958446">(</span><span class="keyword" id="7958447">chan</span>&nbsp;<span class="builtintype" id="7958452">int</span><span class="op" id="7958455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958459">switch</span>&nbsp;<span class="ident" id="7958466"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958468">.</span><span class="ident" id="7958469">snet</span>&nbsp;<span class="op" id="7958474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958478">case</span>&nbsp;<span class="string" id="7958483">&#34;tcp&#34;</span><span class="op" id="7958488">,</span>&nbsp;<span class="string" id="7958490">&#34;tcp4&#34;</span><span class="op" id="7958496">,</span>&nbsp;<span class="string" id="7958498">&#34;tcp6&#34;</span><span class="op" id="7958504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958509"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958511">.</span><span class="ident" id="7958512">saddr</span>&nbsp;<span class="op" id="7958518">+=</span>&nbsp;<span class="string" id="7958521">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958528">case</span>&nbsp;<span class="string" id="7958533">&#34;unix&#34;</span><span class="op" id="7958539">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958544"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7958546">.</span><span class="ident" id="7958547">Remove</span><span class="op" id="7958553">(</span><span class="ident" id="7958554"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958556">.</span><span class="ident" id="7958557">saddr</span><span class="op" id="7958562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958567"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7958569">.</span><span class="ident" id="7958570">Remove</span><span class="op" id="7958576">(</span><span class="ident" id="7958577"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958579">.</span><span class="ident" id="7958580">caddr</span><span class="op" id="7958585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958594">go</span>&nbsp;<span class="ident" id="7958597"><a href="/net/server_test.go.html#7960312">runStreamConnServer</a></span><span class="op" id="7958616">(</span><span class="ident" id="7958617"><a href="/net/server_test.go.html#7958238">t</a></span><span class="op" id="7958618">,</span>&nbsp;<span class="ident" id="7958620"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958622">.</span><span class="ident" id="7958623">snet</span><span class="op" id="7958627">,</span>&nbsp;<span class="ident" id="7958629"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958631">.</span><span class="ident" id="7958632">saddr</span><span class="op" id="7958637">,</span>&nbsp;<span class="ident" id="7958639"><a href="/net/server_test.go.html#7958401">listening</a></span><span class="op" id="7958648">,</span>&nbsp;<span class="ident" id="7958650"><a href="/net/server_test.go.html#7958434">done</a></span><span class="op" id="7958654">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958658">taddr</span>&nbsp;<span class="op" id="7958664">:=</span>&nbsp;<span class="op" id="7958667">&lt;-</span><span class="ident" id="7958669"><a href="/net/server_test.go.html#7958401">listening</a></span>&nbsp;<span class="comment" id="7958679">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958710">switch</span>&nbsp;<span class="ident" id="7958717"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958719">.</span><span class="ident" id="7958720">cnet</span>&nbsp;<span class="op" id="7958725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958729">case</span>&nbsp;<span class="string" id="7958734">&#34;tcp&#34;</span><span class="op" id="7958739">,</span>&nbsp;<span class="string" id="7958741">&#34;tcp4&#34;</span><span class="op" id="7958747">,</span>&nbsp;<span class="string" id="7958749">&#34;tcp6&#34;</span><span class="op" id="7958755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958760">_</span><span class="op" id="7958761">,</span>&nbsp;<span class="ident" id="7958763">port</span><span class="op" id="7958767">,</span>&nbsp;<span class="ident" id="7958769">err</span>&nbsp;<span class="op" id="7958773">:=</span>&nbsp;<span class="ident" id="7958776"><a href="/net/ipsock.go.html#1444126">SplitHostPort</a></span><span class="op" id="7958789">(</span><span class="ident" id="7958790"><a href="/net/server_test.go.html#7958658">taddr</a></span><span class="op" id="7958795">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7958800">if</span>&nbsp;<span class="ident" id="7958803"><a href="/net/server_test.go.html#7958769">err</a></span>&nbsp;<span class="op" id="7958807">!=</span>&nbsp;<span class="ident" id="7958810">nil</span>&nbsp;<span class="op" id="7958814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958820"><a href="/net/server_test.go.html#7958238">t</a></span><span class="op" id="7958821">.</span><span class="ident" id="7958822">Fatalf</span><span class="op" id="7958828">(</span><span class="string" id="7958829">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7958859">,</span>&nbsp;<span class="ident" id="7958861"><a href="/net/server_test.go.html#7958658">taddr</a></span><span class="op" id="7958866">,</span>&nbsp;<span class="ident" id="7958868"><a href="/net/server_test.go.html#7958769">err</a></span><span class="op" id="7958871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958881"><a href="/net/server_test.go.html#7958658">taddr</a></span>&nbsp;<span class="op" id="7958887">=</span>&nbsp;<span class="ident" id="7958889"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958891">.</span><span class="ident" id="7958892">caddr</span>&nbsp;<span class="op" id="7958898">+</span>&nbsp;<span class="string" id="7958900">&#34;:&#34;</span>&nbsp;<span class="op" id="7958904">+</span>&nbsp;<span class="ident" id="7958906"><a href="/net/server_test.go.html#7958763">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958913">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958918"><a href="/net/server_test.go.html#7961085">runStreamConnClient</a></span><span class="op" id="7958937">(</span><span class="ident" id="7958938"><a href="/net/server_test.go.html#7958238">t</a></span><span class="op" id="7958939">,</span>&nbsp;<span class="ident" id="7958941"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958943">.</span><span class="ident" id="7958944">cnet</span><span class="op" id="7958948">,</span>&nbsp;<span class="ident" id="7958950"><a href="/net/server_test.go.html#7958658">taddr</a></span><span class="op" id="7958955">,</span>&nbsp;<span class="ident" id="7958957"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7958959">.</span><span class="ident" id="7958960">empty</span><span class="op" id="7958965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958969">&lt;-</span><span class="ident" id="7958971"><a href="/net/server_test.go.html#7958434">done</a></span>&nbsp;<span class="comment" id="7958976">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959007">switch</span>&nbsp;<span class="ident" id="7959014"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7959016">.</span><span class="ident" id="7959017">snet</span>&nbsp;<span class="op" id="7959022">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959026">case</span>&nbsp;<span class="string" id="7959031">&#34;unix&#34;</span><span class="op" id="7959037">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959042"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7959044">.</span><span class="ident" id="7959045">Remove</span><span class="op" id="7959051">(</span><span class="ident" id="7959052"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7959054">.</span><span class="ident" id="7959055">saddr</span><span class="op" id="7959060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959065"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7959067">.</span><span class="ident" id="7959068">Remove</span><span class="op" id="7959074">(</span><span class="ident" id="7959075"><a href="/net/server_test.go.html#7958262">tt</a></span><span class="op" id="7959077">.</span><span class="ident" id="7959078">caddr</span><span class="op" id="7959083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959090">}</span><br>
<span class="lineno">130</span><span class="op" id="7959092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7959095">var</span>&nbsp;<span class="ident" id="7959099">seqpacketConnServerTests</span>&nbsp;<span class="op" id="7959124">=</span>&nbsp;<span class="op" id="7959126">[</span><span class="op" id="7959127">]</span><span class="keyword" id="7959128">struct</span>&nbsp;<span class="op" id="7959135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959138">net</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7959148">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959156">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7959166">string</span>&nbsp;<span class="comment" id="7959173">//&nbsp;server&nbsp;address</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959192">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7959202">string</span>&nbsp;<span class="comment" id="7959209">//&nbsp;client&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959228">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7959238">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7959245">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959270">linuxOnly</span>&nbsp;<span class="builtintype" id="7959280">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7959287">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7959341">}</span><span class="op" id="7959342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959345">{</span><span class="ident" id="7959346">net</span><span class="op" id="7959349">:</span>&nbsp;<span class="string" id="7959351">&#34;unixpacket&#34;</span><span class="op" id="7959363">,</span>&nbsp;<span class="ident" id="7959365">saddr</span><span class="op" id="7959370">:</span>&nbsp;<span class="ident" id="7959372"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7959384">(</span><span class="op" id="7959385">)</span><span class="op" id="7959386">,</span>&nbsp;<span class="ident" id="7959388">caddr</span><span class="op" id="7959393">:</span>&nbsp;<span class="ident" id="7959395"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7959407">(</span><span class="op" id="7959408">)</span><span class="op" id="7959409">}</span><span class="op" id="7959410">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959413">{</span><span class="ident" id="7959414">net</span><span class="op" id="7959417">:</span>&nbsp;<span class="string" id="7959419">&#34;unixpacket&#34;</span><span class="op" id="7959431">,</span>&nbsp;<span class="ident" id="7959433">saddr</span><span class="op" id="7959438">:</span>&nbsp;<span class="string" id="7959440">&#34;@gotest4/net&#34;</span><span class="op" id="7959454">,</span>&nbsp;<span class="ident" id="7959456">caddr</span><span class="op" id="7959461">:</span>&nbsp;<span class="string" id="7959463">&#34;@gotest4/net.local&#34;</span><span class="op" id="7959483">,</span>&nbsp;<span class="ident" id="7959485">linuxOnly</span><span class="op" id="7959494">:</span>&nbsp;<span class="builtintype" id="7959496">true</span><span class="op" id="7959500">}</span><span class="op" id="7959501">,</span><br>
<span class="lineno"></span><span class="op" id="7959503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7959506">func</span>&nbsp;<span class="ident" id="7959511">TestSeqpacketConnServer</span><span class="op" id="7959534">(</span><span class="ident" id="7959535">t</span>&nbsp;<span class="op" id="7959537">*</span><span class="ident" id="7959538"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7959545">.</span><span class="ident" id="7959546">T</span><span class="op" id="7959547">)</span>&nbsp;<span class="op" id="7959549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959552">switch</span>&nbsp;<span class="ident" id="7959559"><a href="/net/server_test.go.html#7955138">runtime</a></span><span class="op" id="7959566">.</span><span class="ident" id="7959567">GOOS</span>&nbsp;<span class="op" id="7959572">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959575">case</span>&nbsp;<span class="string" id="7959580">&#34;darwin&#34;</span><span class="op" id="7959588">,</span>&nbsp;<span class="string" id="7959590">&#34;nacl&#34;</span><span class="op" id="7959596">,</span>&nbsp;<span class="string" id="7959598">&#34;openbsd&#34;</span><span class="op" id="7959607">,</span>&nbsp;<span class="string" id="7959609">&#34;plan9&#34;</span><span class="op" id="7959616">,</span>&nbsp;<span class="string" id="7959618">&#34;windows&#34;</span><span class="op" id="7959627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959631">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959644">case</span>&nbsp;<span class="string" id="7959649">&#34;freebsd&#34;</span><span class="op" id="7959658">:</span>&nbsp;<span class="comment" id="7959660">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959702"><a href="/net/server_test.go.html#7959535">t</a></span><span class="op" id="7959703">.</span><span class="ident" id="7959704">Skipf</span><span class="op" id="7959709">(</span><span class="string" id="7959710">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7959731">,</span>&nbsp;<span class="ident" id="7959733"><a href="/net/server_test.go.html#7955138">runtime</a></span><span class="op" id="7959740">.</span><span class="ident" id="7959741">GOOS</span><span class="op" id="7959745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959748">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959752">for</span>&nbsp;<span class="ident" id="7959756">_</span><span class="op" id="7959757">,</span>&nbsp;<span class="ident" id="7959759">tt</span>&nbsp;<span class="op" id="7959762">:=</span>&nbsp;<span class="keyword" id="7959765">range</span>&nbsp;<span class="ident" id="7959771"><a href="/net/server_test.go.html#7959099">seqpacketConnServerTests</a></span>&nbsp;<span class="op" id="7959796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959800">if</span>&nbsp;<span class="ident" id="7959803"><a href="/net/server_test.go.html#7955138">runtime</a></span><span class="op" id="7959810">.</span><span class="ident" id="7959811">GOOS</span>&nbsp;<span class="op" id="7959816">!=</span>&nbsp;<span class="string" id="7959819">&#34;linux&#34;</span>&nbsp;<span class="op" id="7959827">&amp;&amp;</span>&nbsp;<span class="ident" id="7959830"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7959832">.</span><span class="ident" id="7959833">linuxOnly</span>&nbsp;<span class="op" id="7959843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959848">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959859">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959863">listening</span>&nbsp;<span class="op" id="7959873">:=</span>&nbsp;<span class="builtinfunc" id="7959876">make</span><span class="op" id="7959880">(</span><span class="keyword" id="7959881">chan</span>&nbsp;<span class="builtintype" id="7959886">string</span><span class="op" id="7959892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959896">done</span>&nbsp;<span class="op" id="7959901">:=</span>&nbsp;<span class="builtinfunc" id="7959904">make</span><span class="op" id="7959908">(</span><span class="keyword" id="7959909">chan</span>&nbsp;<span class="builtintype" id="7959914">int</span><span class="op" id="7959917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959921">switch</span>&nbsp;<span class="ident" id="7959928"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7959930">.</span><span class="ident" id="7959931">net</span>&nbsp;<span class="op" id="7959935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7959939">case</span>&nbsp;<span class="string" id="7959944">&#34;unixpacket&#34;</span><span class="op" id="7959956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959961"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7959963">.</span><span class="ident" id="7959964">Remove</span><span class="op" id="7959970">(</span><span class="ident" id="7959971"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7959973">.</span><span class="ident" id="7959974">saddr</span><span class="op" id="7959979">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959984"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7959986">.</span><span class="ident" id="7959987">Remove</span><span class="op" id="7959993">(</span><span class="ident" id="7959994"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7959996">.</span><span class="ident" id="7959997">caddr</span><span class="op" id="7960002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960011">go</span>&nbsp;<span class="ident" id="7960014"><a href="/net/server_test.go.html#7960312">runStreamConnServer</a></span><span class="op" id="7960033">(</span><span class="ident" id="7960034"><a href="/net/server_test.go.html#7959535">t</a></span><span class="op" id="7960035">,</span>&nbsp;<span class="ident" id="7960037"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960039">.</span><span class="ident" id="7960040">net</span><span class="op" id="7960043">,</span>&nbsp;<span class="ident" id="7960045"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960047">.</span><span class="ident" id="7960048">saddr</span><span class="op" id="7960053">,</span>&nbsp;<span class="ident" id="7960055"><a href="/net/server_test.go.html#7959863">listening</a></span><span class="op" id="7960064">,</span>&nbsp;<span class="ident" id="7960066"><a href="/net/server_test.go.html#7959896">done</a></span><span class="op" id="7960070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960074">taddr</span>&nbsp;<span class="op" id="7960080">:=</span>&nbsp;<span class="op" id="7960083">&lt;-</span><span class="ident" id="7960085"><a href="/net/server_test.go.html#7959863">listening</a></span>&nbsp;<span class="comment" id="7960095">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960126"><a href="/net/server_test.go.html#7961085">runStreamConnClient</a></span><span class="op" id="7960145">(</span><span class="ident" id="7960146"><a href="/net/server_test.go.html#7959535">t</a></span><span class="op" id="7960147">,</span>&nbsp;<span class="ident" id="7960149"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960151">.</span><span class="ident" id="7960152">net</span><span class="op" id="7960155">,</span>&nbsp;<span class="ident" id="7960157"><a href="/net/server_test.go.html#7960074">taddr</a></span><span class="op" id="7960162">,</span>&nbsp;<span class="ident" id="7960164"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960166">.</span><span class="ident" id="7960167">empty</span><span class="op" id="7960172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960176">&lt;-</span><span class="ident" id="7960178"><a href="/net/server_test.go.html#7959896">done</a></span>&nbsp;<span class="comment" id="7960183">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960214">switch</span>&nbsp;<span class="ident" id="7960221"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960223">.</span><span class="ident" id="7960224">net</span>&nbsp;<span class="op" id="7960228">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960232">case</span>&nbsp;<span class="string" id="7960237">&#34;unixpacket&#34;</span><span class="op" id="7960249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960254"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7960256">.</span><span class="ident" id="7960257">Remove</span><span class="op" id="7960263">(</span><span class="ident" id="7960264"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960266">.</span><span class="ident" id="7960267">saddr</span><span class="op" id="7960272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960277"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7960279">.</span><span class="ident" id="7960280">Remove</span><span class="op" id="7960286">(</span><span class="ident" id="7960287"><a href="/net/server_test.go.html#7959759">tt</a></span><span class="op" id="7960289">.</span><span class="ident" id="7960290">caddr</span><span class="op" id="7960295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960302">}</span><br>
<span class="lineno">175</span><span class="op" id="7960304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7960307">func</span>&nbsp;<span class="ident" id="7960312">runStreamConnServer</span><span class="op" id="7960331">(</span><span class="ident" id="7960332">t</span>&nbsp;<span class="op" id="7960334">*</span><span class="ident" id="7960335"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7960342">.</span><span class="ident" id="7960343">T</span><span class="op" id="7960344">,</span>&nbsp;<span class="ident" id="7960346">net</span><span class="op" id="7960349">,</span>&nbsp;<span class="ident" id="7960351">laddr</span>&nbsp;<span class="builtintype" id="7960357">string</span><span class="op" id="7960363">,</span>&nbsp;<span class="ident" id="7960365">listening</span>&nbsp;<span class="keyword" id="7960375">chan</span><span class="op" id="7960379">&lt;-</span>&nbsp;<span class="builtintype" id="7960382">string</span><span class="op" id="7960388">,</span>&nbsp;<span class="ident" id="7960390">done</span>&nbsp;<span class="keyword" id="7960395">chan</span><span class="op" id="7960399">&lt;-</span>&nbsp;<span class="builtintype" id="7960402">int</span><span class="op" id="7960405">)</span>&nbsp;<span class="op" id="7960407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960410">defer</span>&nbsp;<span class="builtinfunc" id="7960416">close</span><span class="op" id="7960421">(</span><span class="ident" id="7960422"><a href="/net/server_test.go.html#7960390">done</a></span><span class="op" id="7960426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960429">l</span><span class="op" id="7960430">,</span>&nbsp;<span class="ident" id="7960432">err</span>&nbsp;<span class="op" id="7960436">:=</span>&nbsp;<span class="ident" id="7960439"><a href="/net/dial.go.html#1338035">Listen</a></span><span class="op" id="7960445">(</span><span class="ident" id="7960446"><a href="/net/server_test.go.html#7960346">net</a></span><span class="op" id="7960449">,</span>&nbsp;<span class="ident" id="7960451"><a href="/net/server_test.go.html#7960351">laddr</a></span><span class="op" id="7960456">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960459">if</span>&nbsp;<span class="ident" id="7960462"><a href="/net/server_test.go.html#7960432">err</a></span>&nbsp;<span class="op" id="7960466">!=</span>&nbsp;<span class="ident" id="7960469">nil</span>&nbsp;<span class="op" id="7960473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960477"><a href="/net/server_test.go.html#7960332">t</a></span><span class="op" id="7960478">.</span><span class="ident" id="7960479">Errorf</span><span class="op" id="7960485">(</span><span class="string" id="7960486">&#34;Listen(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7960513">,</span>&nbsp;<span class="ident" id="7960515"><a href="/net/server_test.go.html#7960346">net</a></span><span class="op" id="7960518">,</span>&nbsp;<span class="ident" id="7960520"><a href="/net/server_test.go.html#7960351">laddr</a></span><span class="op" id="7960525">,</span>&nbsp;<span class="ident" id="7960527"><a href="/net/server_test.go.html#7960432">err</a></span><span class="op" id="7960530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960534"><a href="/net/server_test.go.html#7960365">listening</a></span>&nbsp;<span class="op" id="7960544">&lt;-</span>&nbsp;<span class="string" id="7960547">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960557">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960565">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960568">defer</span>&nbsp;<span class="ident" id="7960574"><a href="/net/server_test.go.html#7960429">l</a></span><span class="op" id="7960575">.</span><span class="ident" id="7960576">Close</span><span class="op" id="7960581">(</span><span class="op" id="7960582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960585"><a href="/net/server_test.go.html#7960365">listening</a></span>&nbsp;<span class="op" id="7960595">&lt;-</span>&nbsp;<span class="ident" id="7960598"><a href="/net/server_test.go.html#7960429">l</a></span><span class="op" id="7960599">.</span><span class="ident" id="7960600">Addr</span><span class="op" id="7960604">(</span><span class="op" id="7960605">)</span><span class="op" id="7960606">.</span><span class="ident" id="7960607">String</span><span class="op" id="7960613">(</span><span class="op" id="7960614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960618">echo</span>&nbsp;<span class="op" id="7960623">:=</span>&nbsp;<span class="keyword" id="7960626">func</span><span class="op" id="7960630">(</span><span class="ident" id="7960631">rw</span>&nbsp;<span class="ident" id="7960634"><a href="/net/server_test.go.html#7955126">io</a></span><span class="op" id="7960636">.</span><span class="ident" id="7960637">ReadWriter</span><span class="op" id="7960647">,</span>&nbsp;<span class="ident" id="7960649">done</span>&nbsp;<span class="keyword" id="7960654">chan</span><span class="op" id="7960658">&lt;-</span>&nbsp;<span class="builtintype" id="7960661">int</span><span class="op" id="7960664">)</span>&nbsp;<span class="op" id="7960666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960670">buf</span>&nbsp;<span class="op" id="7960674">:=</span>&nbsp;<span class="builtinfunc" id="7960677">make</span><span class="op" id="7960681">(</span><span class="op" id="7960682">[</span><span class="op" id="7960683">]</span><span class="builtintype" id="7960684">byte</span><span class="op" id="7960688">,</span>&nbsp;<span class="num" id="7960690">1024</span><span class="op" id="7960694">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960698">for</span>&nbsp;<span class="op" id="7960702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960707">n</span><span class="op" id="7960708">,</span>&nbsp;<span class="ident" id="7960710">err</span>&nbsp;<span class="op" id="7960714">:=</span>&nbsp;<span class="ident" id="7960717"><a href="/net/server_test.go.html#7960631">rw</a></span><span class="op" id="7960719">.</span><span class="ident" id="7960720">Read</span><span class="op" id="7960724">(</span><span class="ident" id="7960725"><a href="/net/server_test.go.html#7960670">buf</a></span><span class="op" id="7960728">[</span><span class="num" id="7960729">0</span><span class="op" id="7960730">:</span><span class="op" id="7960731">]</span><span class="op" id="7960732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960737">if</span>&nbsp;<span class="ident" id="7960740"><a href="/net/server_test.go.html#7960710">err</a></span>&nbsp;<span class="op" id="7960744">!=</span>&nbsp;<span class="ident" id="7960747">nil</span>&nbsp;<span class="op" id="7960751">||</span>&nbsp;<span class="ident" id="7960754"><a href="/net/server_test.go.html#7960707">n</a></span>&nbsp;<span class="op" id="7960756">==</span>&nbsp;<span class="num" id="7960759">0</span>&nbsp;<span class="op" id="7960761">||</span>&nbsp;<span class="builtintype" id="7960764">string</span><span class="op" id="7960770">(</span><span class="ident" id="7960771"><a href="/net/server_test.go.html#7960670">buf</a></span><span class="op" id="7960774">[</span><span class="op" id="7960775">:</span><span class="ident" id="7960776"><a href="/net/server_test.go.html#7960707">n</a></span><span class="op" id="7960777">]</span><span class="op" id="7960778">)</span>&nbsp;<span class="op" id="7960780">==</span>&nbsp;<span class="string" id="7960783">&#34;END&#34;</span>&nbsp;<span class="op" id="7960789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960795">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960804">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960809"><a href="/net/server_test.go.html#7960631">rw</a></span><span class="op" id="7960811">.</span><span class="ident" id="7960812">Write</span><span class="op" id="7960817">(</span><span class="ident" id="7960818"><a href="/net/server_test.go.html#7960670">buf</a></span><span class="op" id="7960821">[</span><span class="num" id="7960822">0</span><span class="op" id="7960823">:</span><span class="ident" id="7960824"><a href="/net/server_test.go.html#7960707">n</a></span><span class="op" id="7960825">]</span><span class="op" id="7960826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7960834">close</span><span class="op" id="7960839">(</span><span class="ident" id="7960840"><a href="/net/server_test.go.html#7960649">done</a></span><span class="op" id="7960844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="7960850">run</span><span class="op" id="7960853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960856">for</span>&nbsp;<span class="op" id="7960860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960864">c</span><span class="op" id="7960865">,</span>&nbsp;<span class="ident" id="7960867">err</span>&nbsp;<span class="op" id="7960871">:=</span>&nbsp;<span class="ident" id="7960874"><a href="/net/server_test.go.html#7960429">l</a></span><span class="op" id="7960875">.</span><span class="ident" id="7960876">Accept</span><span class="op" id="7960882">(</span><span class="op" id="7960883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960887">if</span>&nbsp;<span class="ident" id="7960890"><a href="/net/server_test.go.html#7960867">err</a></span>&nbsp;<span class="op" id="7960894">!=</span>&nbsp;<span class="ident" id="7960897">nil</span>&nbsp;<span class="op" id="7960901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960906"><a href="/net/server_test.go.html#7960332">t</a></span><span class="op" id="7960907">.</span><span class="ident" id="7960908">Logf</span><span class="op" id="7960912">(</span><span class="string" id="7960913">&#34;Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7960932">,</span>&nbsp;<span class="ident" id="7960934"><a href="/net/server_test.go.html#7960867">err</a></span><span class="op" id="7960937">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960942">continue</span>&nbsp;<span class="ident" id="7960951">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960961">echodone</span>&nbsp;<span class="op" id="7960970">:=</span>&nbsp;<span class="builtinfunc" id="7960973">make</span><span class="op" id="7960977">(</span><span class="keyword" id="7960978">chan</span>&nbsp;<span class="builtintype" id="7960983">int</span><span class="op" id="7960986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960990">go</span>&nbsp;<span class="ident" id="7960993"><a href="/net/server_test.go.html#7960618">echo</a></span><span class="op" id="7960997">(</span><span class="ident" id="7960998"><a href="/net/server_test.go.html#7960864">c</a></span><span class="op" id="7960999">,</span>&nbsp;<span class="ident" id="7961001"><a href="/net/server_test.go.html#7960961">echodone</a></span><span class="op" id="7961009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961013">&lt;-</span><span class="ident" id="7961015"><a href="/net/server_test.go.html#7960961">echodone</a></span>&nbsp;<span class="comment" id="7961024">//&nbsp;make&nbsp;sure&nbsp;echo&nbsp;stopped</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961052"><a href="/net/server_test.go.html#7960864">c</a></span><span class="op" id="7961053">.</span><span class="ident" id="7961054">Close</span><span class="op" id="7961059">(</span><span class="op" id="7961060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961064">break</span>&nbsp;<span class="ident" id="7961070">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961075">}</span><br>
<span class="lineno"></span><span class="op" id="7961077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7961080">func</span>&nbsp;<span class="ident" id="7961085">runStreamConnClient</span><span class="op" id="7961104">(</span><span class="ident" id="7961105">t</span>&nbsp;<span class="op" id="7961107">*</span><span class="ident" id="7961108"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7961115">.</span><span class="ident" id="7961116">T</span><span class="op" id="7961117">,</span>&nbsp;<span class="ident" id="7961119">net</span><span class="op" id="7961122">,</span>&nbsp;<span class="ident" id="7961124">taddr</span>&nbsp;<span class="builtintype" id="7961130">string</span><span class="op" id="7961136">,</span>&nbsp;<span class="ident" id="7961138">isEmpty</span>&nbsp;<span class="builtintype" id="7961146">bool</span><span class="op" id="7961150">)</span>&nbsp;<span class="op" id="7961152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961155">c</span><span class="op" id="7961156">,</span>&nbsp;<span class="ident" id="7961158">err</span>&nbsp;<span class="op" id="7961162">:=</span>&nbsp;<span class="ident" id="7961165"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="7961169">(</span><span class="ident" id="7961170"><a href="/net/server_test.go.html#7961119">net</a></span><span class="op" id="7961173">,</span>&nbsp;<span class="ident" id="7961175"><a href="/net/server_test.go.html#7961124">taddr</a></span><span class="op" id="7961180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961183">if</span>&nbsp;<span class="ident" id="7961186"><a href="/net/server_test.go.html#7961158">err</a></span>&nbsp;<span class="op" id="7961190">!=</span>&nbsp;<span class="ident" id="7961193">nil</span>&nbsp;<span class="op" id="7961197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961201"><a href="/net/server_test.go.html#7961105">t</a></span><span class="op" id="7961202">.</span><span class="ident" id="7961203">Fatalf</span><span class="op" id="7961209">(</span><span class="string" id="7961210">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7961235">,</span>&nbsp;<span class="ident" id="7961237"><a href="/net/server_test.go.html#7961119">net</a></span><span class="op" id="7961240">,</span>&nbsp;<span class="ident" id="7961242"><a href="/net/server_test.go.html#7961124">taddr</a></span><span class="op" id="7961247">,</span>&nbsp;<span class="ident" id="7961249"><a href="/net/server_test.go.html#7961158">err</a></span><span class="op" id="7961252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961255">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961258">defer</span>&nbsp;<span class="ident" id="7961264"><a href="/net/server_test.go.html#7961155">c</a></span><span class="op" id="7961265">.</span><span class="ident" id="7961266">Close</span><span class="op" id="7961271">(</span><span class="op" id="7961272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961275"><a href="/net/server_test.go.html#7961155">c</a></span><span class="op" id="7961276">.</span><span class="ident" id="7961277">SetReadDeadline</span><span class="op" id="7961292">(</span><span class="ident" id="7961293"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7961297">.</span><span class="ident" id="7961298">Now</span><span class="op" id="7961301">(</span><span class="op" id="7961302">)</span><span class="op" id="7961303">.</span><span class="ident" id="7961304">Add</span><span class="op" id="7961307">(</span><span class="num" id="7961308">1</span>&nbsp;<span class="op" id="7961310">*</span>&nbsp;<span class="ident" id="7961312"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7961316">.</span><span class="ident" id="7961317">Second</span><span class="op" id="7961323">)</span><span class="op" id="7961324">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961328">var</span>&nbsp;<span class="ident" id="7961332">wb</span>&nbsp;<span class="op" id="7961335">[</span><span class="op" id="7961336">]</span><span class="builtintype" id="7961337">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961343">if</span>&nbsp;<span class="op" id="7961346">!</span><span class="ident" id="7961347"><a href="/net/server_test.go.html#7961138">isEmpty</a></span>&nbsp;<span class="op" id="7961355">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961359"><a href="/net/server_test.go.html#7961332">wb</a></span>&nbsp;<span class="op" id="7961362">=</span>&nbsp;<span class="op" id="7961364">[</span><span class="op" id="7961365">]</span><span class="builtintype" id="7961366">byte</span><span class="op" id="7961370">(</span><span class="string" id="7961371">&#34;StreamConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7961399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961405">if</span>&nbsp;<span class="ident" id="7961408">n</span><span class="op" id="7961409">,</span>&nbsp;<span class="ident" id="7961411">err</span>&nbsp;<span class="op" id="7961415">:=</span>&nbsp;<span class="ident" id="7961418"><a href="/net/server_test.go.html#7961155">c</a></span><span class="op" id="7961419">.</span><span class="ident" id="7961420">Write</span><span class="op" id="7961425">(</span><span class="ident" id="7961426"><a href="/net/server_test.go.html#7961332">wb</a></span><span class="op" id="7961428">)</span><span class="op" id="7961429">;</span>&nbsp;<span class="ident" id="7961431"><a href="/net/server_test.go.html#7961411">err</a></span>&nbsp;<span class="op" id="7961435">!=</span>&nbsp;<span class="ident" id="7961438">nil</span>&nbsp;<span class="op" id="7961442">||</span>&nbsp;<span class="ident" id="7961445"><a href="/net/server_test.go.html#7961408">n</a></span>&nbsp;<span class="op" id="7961447">!=</span>&nbsp;<span class="builtinfunc" id="7961450">len</span><span class="op" id="7961453">(</span><span class="ident" id="7961454"><a href="/net/server_test.go.html#7961332">wb</a></span><span class="op" id="7961456">)</span>&nbsp;<span class="op" id="7961458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961462"><a href="/net/server_test.go.html#7961105">t</a></span><span class="op" id="7961463">.</span><span class="ident" id="7961464">Fatalf</span><span class="op" id="7961470">(</span><span class="string" id="7961471">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7961509">,</span>&nbsp;<span class="ident" id="7961511"><a href="/net/server_test.go.html#7961408">n</a></span><span class="op" id="7961512">,</span>&nbsp;<span class="ident" id="7961514"><a href="/net/server_test.go.html#7961411">err</a></span><span class="op" id="7961517">,</span>&nbsp;<span class="builtinfunc" id="7961519">len</span><span class="op" id="7961522">(</span><span class="ident" id="7961523"><a href="/net/server_test.go.html#7961332">wb</a></span><span class="op" id="7961525">)</span><span class="op" id="7961526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961529">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961533">rb</span>&nbsp;<span class="op" id="7961536">:=</span>&nbsp;<span class="builtinfunc" id="7961539">make</span><span class="op" id="7961543">(</span><span class="op" id="7961544">[</span><span class="op" id="7961545">]</span><span class="builtintype" id="7961546">byte</span><span class="op" id="7961550">,</span>&nbsp;<span class="num" id="7961552">1024</span><span class="op" id="7961556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961559">if</span>&nbsp;<span class="ident" id="7961562">n</span><span class="op" id="7961563">,</span>&nbsp;<span class="ident" id="7961565">err</span>&nbsp;<span class="op" id="7961569">:=</span>&nbsp;<span class="ident" id="7961572"><a href="/net/server_test.go.html#7961155">c</a></span><span class="op" id="7961573">.</span><span class="ident" id="7961574">Read</span><span class="op" id="7961578">(</span><span class="ident" id="7961579"><a href="/net/server_test.go.html#7961533">rb</a></span><span class="op" id="7961581">[</span><span class="num" id="7961582">0</span><span class="op" id="7961583">:</span><span class="op" id="7961584">]</span><span class="op" id="7961585">)</span><span class="op" id="7961586">;</span>&nbsp;<span class="ident" id="7961588"><a href="/net/server_test.go.html#7961565">err</a></span>&nbsp;<span class="op" id="7961592">!=</span>&nbsp;<span class="ident" id="7961595">nil</span>&nbsp;<span class="op" id="7961599">||</span>&nbsp;<span class="ident" id="7961602"><a href="/net/server_test.go.html#7961562">n</a></span>&nbsp;<span class="op" id="7961604">!=</span>&nbsp;<span class="builtinfunc" id="7961607">len</span><span class="op" id="7961610">(</span><span class="ident" id="7961611"><a href="/net/server_test.go.html#7961332">wb</a></span><span class="op" id="7961613">)</span>&nbsp;<span class="op" id="7961615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961619"><a href="/net/server_test.go.html#7961105">t</a></span><span class="op" id="7961620">.</span><span class="ident" id="7961621">Fatalf</span><span class="op" id="7961627">(</span><span class="string" id="7961628">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7961665">,</span>&nbsp;<span class="ident" id="7961667"><a href="/net/server_test.go.html#7961562">n</a></span><span class="op" id="7961668">,</span>&nbsp;<span class="ident" id="7961670"><a href="/net/server_test.go.html#7961565">err</a></span><span class="op" id="7961673">,</span>&nbsp;<span class="builtinfunc" id="7961675">len</span><span class="op" id="7961678">(</span><span class="ident" id="7961679"><a href="/net/server_test.go.html#7961332">wb</a></span><span class="op" id="7961681">)</span><span class="op" id="7961682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961685">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7961689">//&nbsp;Send&nbsp;explicit&nbsp;ending&nbsp;for&nbsp;unixpacket.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7961730">//&nbsp;Older&nbsp;Linux&nbsp;kernels&nbsp;do&nbsp;not&nbsp;stop&nbsp;reads&nbsp;on&nbsp;close.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961782">switch</span>&nbsp;<span class="ident" id="7961789"><a href="/net/server_test.go.html#7961119">net</a></span>&nbsp;<span class="op" id="7961793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961796">case</span>&nbsp;<span class="string" id="7961801">&#34;unixpacket&#34;</span><span class="op" id="7961813">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961817"><a href="/net/server_test.go.html#7961155">c</a></span><span class="op" id="7961818">.</span><span class="ident" id="7961819">Write</span><span class="op" id="7961824">(</span><span class="op" id="7961825">[</span><span class="op" id="7961826">]</span><span class="builtintype" id="7961827">byte</span><span class="op" id="7961831">(</span><span class="string" id="7961832">&#34;END&#34;</span><span class="op" id="7961837">)</span><span class="op" id="7961838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961841">}</span><br>
<span class="lineno"></span><span class="op" id="7961843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7961846">//&nbsp;Do&nbsp;not&nbsp;test&nbsp;empty&nbsp;datagrams&nbsp;by&nbsp;default.</span><br>
<span class="lineno">245</span><span class="comment" id="7961889">//&nbsp;It&nbsp;causes&nbsp;unexplained&nbsp;timeouts&nbsp;on&nbsp;some&nbsp;systems,</span><br>
<span class="lineno"></span><span class="comment" id="7961940">//&nbsp;including&nbsp;Snow&nbsp;Leopard.&nbsp;&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;kernel</span><br>
<span class="lineno"></span><span class="comment" id="7961992">//&nbsp;doesn&#39;t&nbsp;quite&nbsp;expect&nbsp;them.</span><br>
<span class="lineno"></span><span class="keyword" id="7962022">var</span>&nbsp;<span class="ident" id="7962026">testDatagram</span>&nbsp;<span class="op" id="7962039">=</span>&nbsp;<span class="ident" id="7962041"><a href="/net/server_test.go.html#7955118">flag</a></span><span class="op" id="7962045">.</span><span class="ident" id="7962046">Bool</span><span class="op" id="7962050">(</span><span class="string" id="7962051">&#34;datagram&#34;</span><span class="op" id="7962061">,</span>&nbsp;<span class="builtintype" id="7962063">false</span><span class="op" id="7962068">,</span>&nbsp;<span class="string" id="7962070">&#34;whether&nbsp;to&nbsp;test&nbsp;udp&nbsp;and&nbsp;unixgram&#34;</span><span class="op" id="7962104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7962107">var</span>&nbsp;<span class="ident" id="7962111">datagramPacketConnServerTests</span>&nbsp;<span class="op" id="7962141">=</span>&nbsp;<span class="op" id="7962143">[</span><span class="op" id="7962144">]</span><span class="keyword" id="7962145">struct</span>&nbsp;<span class="op" id="7962152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962155">snet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962165">string</span>&nbsp;<span class="comment" id="7962172">//&nbsp;server&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962188">saddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962198">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962206">cnet</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962216">string</span>&nbsp;<span class="comment" id="7962223">//&nbsp;client&nbsp;side</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962239">caddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962249">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962257">ipv6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962267">bool</span>&nbsp;<span class="comment" id="7962272">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962313">ipv4map</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962323">bool</span>&nbsp;<span class="comment" id="7962328">//&nbsp;test&nbsp;with&nbsp;IPv6&nbsp;IPv4-mapping&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962374">dial</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962384">bool</span>&nbsp;<span class="comment" id="7962389">//&nbsp;test&nbsp;with&nbsp;Dial&nbsp;or&nbsp;DialUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962420">empty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7962430">bool</span>&nbsp;<span class="comment" id="7962435">//&nbsp;test&nbsp;with&nbsp;empty&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962460">linuxOnly</span>&nbsp;<span class="builtintype" id="7962470">bool</span>&nbsp;<span class="comment" id="7962475">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno">260</span><span class="op" id="7962529">}</span><span class="op" id="7962530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962533">{</span><span class="ident" id="7962534">snet</span><span class="op" id="7962538">:</span>&nbsp;<span class="string" id="7962540">&#34;udp&#34;</span><span class="op" id="7962545">,</span>&nbsp;<span class="ident" id="7962547">saddr</span><span class="op" id="7962552">:</span>&nbsp;<span class="string" id="7962554">&#34;&#34;</span><span class="op" id="7962556">,</span>&nbsp;<span class="ident" id="7962558">cnet</span><span class="op" id="7962562">:</span>&nbsp;<span class="string" id="7962564">&#34;udp&#34;</span><span class="op" id="7962569">,</span>&nbsp;<span class="ident" id="7962571">caddr</span><span class="op" id="7962576">:</span>&nbsp;<span class="string" id="7962578">&#34;127.0.0.1&#34;</span><span class="op" id="7962589">}</span><span class="op" id="7962590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962593">{</span><span class="ident" id="7962594">snet</span><span class="op" id="7962598">:</span>&nbsp;<span class="string" id="7962600">&#34;udp&#34;</span><span class="op" id="7962605">,</span>&nbsp;<span class="ident" id="7962607">saddr</span><span class="op" id="7962612">:</span>&nbsp;<span class="string" id="7962614">&#34;0.0.0.0&#34;</span><span class="op" id="7962623">,</span>&nbsp;<span class="ident" id="7962625">cnet</span><span class="op" id="7962629">:</span>&nbsp;<span class="string" id="7962631">&#34;udp&#34;</span><span class="op" id="7962636">,</span>&nbsp;<span class="ident" id="7962638">caddr</span><span class="op" id="7962643">:</span>&nbsp;<span class="string" id="7962645">&#34;127.0.0.1&#34;</span><span class="op" id="7962656">}</span><span class="op" id="7962657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962660">{</span><span class="ident" id="7962661">snet</span><span class="op" id="7962665">:</span>&nbsp;<span class="string" id="7962667">&#34;udp&#34;</span><span class="op" id="7962672">,</span>&nbsp;<span class="ident" id="7962674">saddr</span><span class="op" id="7962679">:</span>&nbsp;<span class="string" id="7962681">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7962699">,</span>&nbsp;<span class="ident" id="7962701">cnet</span><span class="op" id="7962705">:</span>&nbsp;<span class="string" id="7962707">&#34;udp&#34;</span><span class="op" id="7962712">,</span>&nbsp;<span class="ident" id="7962714">caddr</span><span class="op" id="7962719">:</span>&nbsp;<span class="string" id="7962721">&#34;127.0.0.1&#34;</span><span class="op" id="7962732">}</span><span class="op" id="7962733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962736">{</span><span class="ident" id="7962737">snet</span><span class="op" id="7962741">:</span>&nbsp;<span class="string" id="7962743">&#34;udp&#34;</span><span class="op" id="7962748">,</span>&nbsp;<span class="ident" id="7962750">saddr</span><span class="op" id="7962755">:</span>&nbsp;<span class="string" id="7962757">&#34;[::]&#34;</span><span class="op" id="7962763">,</span>&nbsp;<span class="ident" id="7962765">cnet</span><span class="op" id="7962769">:</span>&nbsp;<span class="string" id="7962771">&#34;udp&#34;</span><span class="op" id="7962776">,</span>&nbsp;<span class="ident" id="7962778">caddr</span><span class="op" id="7962783">:</span>&nbsp;<span class="string" id="7962785">&#34;[::1]&#34;</span><span class="op" id="7962792">,</span>&nbsp;<span class="ident" id="7962794">ipv6</span><span class="op" id="7962798">:</span>&nbsp;<span class="builtintype" id="7962800">true</span><span class="op" id="7962804">}</span><span class="op" id="7962805">,</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962809">{</span><span class="ident" id="7962810">snet</span><span class="op" id="7962814">:</span>&nbsp;<span class="string" id="7962816">&#34;udp&#34;</span><span class="op" id="7962821">,</span>&nbsp;<span class="ident" id="7962823">saddr</span><span class="op" id="7962828">:</span>&nbsp;<span class="string" id="7962830">&#34;&#34;</span><span class="op" id="7962832">,</span>&nbsp;<span class="ident" id="7962834">cnet</span><span class="op" id="7962838">:</span>&nbsp;<span class="string" id="7962840">&#34;udp&#34;</span><span class="op" id="7962845">,</span>&nbsp;<span class="ident" id="7962847">caddr</span><span class="op" id="7962852">:</span>&nbsp;<span class="string" id="7962854">&#34;[::1]&#34;</span><span class="op" id="7962861">,</span>&nbsp;<span class="ident" id="7962863">ipv4map</span><span class="op" id="7962870">:</span>&nbsp;<span class="builtintype" id="7962872">true</span><span class="op" id="7962876">}</span><span class="op" id="7962877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962880">{</span><span class="ident" id="7962881">snet</span><span class="op" id="7962885">:</span>&nbsp;<span class="string" id="7962887">&#34;udp&#34;</span><span class="op" id="7962892">,</span>&nbsp;<span class="ident" id="7962894">saddr</span><span class="op" id="7962899">:</span>&nbsp;<span class="string" id="7962901">&#34;0.0.0.0&#34;</span><span class="op" id="7962910">,</span>&nbsp;<span class="ident" id="7962912">cnet</span><span class="op" id="7962916">:</span>&nbsp;<span class="string" id="7962918">&#34;udp&#34;</span><span class="op" id="7962923">,</span>&nbsp;<span class="ident" id="7962925">caddr</span><span class="op" id="7962930">:</span>&nbsp;<span class="string" id="7962932">&#34;[::1]&#34;</span><span class="op" id="7962939">,</span>&nbsp;<span class="ident" id="7962941">ipv4map</span><span class="op" id="7962948">:</span>&nbsp;<span class="builtintype" id="7962950">true</span><span class="op" id="7962954">}</span><span class="op" id="7962955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962958">{</span><span class="ident" id="7962959">snet</span><span class="op" id="7962963">:</span>&nbsp;<span class="string" id="7962965">&#34;udp&#34;</span><span class="op" id="7962970">,</span>&nbsp;<span class="ident" id="7962972">saddr</span><span class="op" id="7962977">:</span>&nbsp;<span class="string" id="7962979">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7962997">,</span>&nbsp;<span class="ident" id="7962999">cnet</span><span class="op" id="7963003">:</span>&nbsp;<span class="string" id="7963005">&#34;udp&#34;</span><span class="op" id="7963010">,</span>&nbsp;<span class="ident" id="7963012">caddr</span><span class="op" id="7963017">:</span>&nbsp;<span class="string" id="7963019">&#34;[::1]&#34;</span><span class="op" id="7963026">,</span>&nbsp;<span class="ident" id="7963028">ipv4map</span><span class="op" id="7963035">:</span>&nbsp;<span class="builtintype" id="7963037">true</span><span class="op" id="7963041">}</span><span class="op" id="7963042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963045">{</span><span class="ident" id="7963046">snet</span><span class="op" id="7963050">:</span>&nbsp;<span class="string" id="7963052">&#34;udp&#34;</span><span class="op" id="7963057">,</span>&nbsp;<span class="ident" id="7963059">saddr</span><span class="op" id="7963064">:</span>&nbsp;<span class="string" id="7963066">&#34;[::]&#34;</span><span class="op" id="7963072">,</span>&nbsp;<span class="ident" id="7963074">cnet</span><span class="op" id="7963078">:</span>&nbsp;<span class="string" id="7963080">&#34;udp&#34;</span><span class="op" id="7963085">,</span>&nbsp;<span class="ident" id="7963087">caddr</span><span class="op" id="7963092">:</span>&nbsp;<span class="string" id="7963094">&#34;127.0.0.1&#34;</span><span class="op" id="7963105">,</span>&nbsp;<span class="ident" id="7963107">ipv4map</span><span class="op" id="7963114">:</span>&nbsp;<span class="builtintype" id="7963116">true</span><span class="op" id="7963120">}</span><span class="op" id="7963121">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963125">{</span><span class="ident" id="7963126">snet</span><span class="op" id="7963130">:</span>&nbsp;<span class="string" id="7963132">&#34;udp&#34;</span><span class="op" id="7963137">,</span>&nbsp;<span class="ident" id="7963139">saddr</span><span class="op" id="7963144">:</span>&nbsp;<span class="string" id="7963146">&#34;&#34;</span><span class="op" id="7963148">,</span>&nbsp;<span class="ident" id="7963150">cnet</span><span class="op" id="7963154">:</span>&nbsp;<span class="string" id="7963156">&#34;udp4&#34;</span><span class="op" id="7963162">,</span>&nbsp;<span class="ident" id="7963164">caddr</span><span class="op" id="7963169">:</span>&nbsp;<span class="string" id="7963171">&#34;127.0.0.1&#34;</span><span class="op" id="7963182">}</span><span class="op" id="7963183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963186">{</span><span class="ident" id="7963187">snet</span><span class="op" id="7963191">:</span>&nbsp;<span class="string" id="7963193">&#34;udp&#34;</span><span class="op" id="7963198">,</span>&nbsp;<span class="ident" id="7963200">saddr</span><span class="op" id="7963205">:</span>&nbsp;<span class="string" id="7963207">&#34;0.0.0.0&#34;</span><span class="op" id="7963216">,</span>&nbsp;<span class="ident" id="7963218">cnet</span><span class="op" id="7963222">:</span>&nbsp;<span class="string" id="7963224">&#34;udp4&#34;</span><span class="op" id="7963230">,</span>&nbsp;<span class="ident" id="7963232">caddr</span><span class="op" id="7963237">:</span>&nbsp;<span class="string" id="7963239">&#34;127.0.0.1&#34;</span><span class="op" id="7963250">}</span><span class="op" id="7963251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963254">{</span><span class="ident" id="7963255">snet</span><span class="op" id="7963259">:</span>&nbsp;<span class="string" id="7963261">&#34;udp&#34;</span><span class="op" id="7963266">,</span>&nbsp;<span class="ident" id="7963268">saddr</span><span class="op" id="7963273">:</span>&nbsp;<span class="string" id="7963275">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7963293">,</span>&nbsp;<span class="ident" id="7963295">cnet</span><span class="op" id="7963299">:</span>&nbsp;<span class="string" id="7963301">&#34;udp4&#34;</span><span class="op" id="7963307">,</span>&nbsp;<span class="ident" id="7963309">caddr</span><span class="op" id="7963314">:</span>&nbsp;<span class="string" id="7963316">&#34;127.0.0.1&#34;</span><span class="op" id="7963327">}</span><span class="op" id="7963328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963331">{</span><span class="ident" id="7963332">snet</span><span class="op" id="7963336">:</span>&nbsp;<span class="string" id="7963338">&#34;udp&#34;</span><span class="op" id="7963343">,</span>&nbsp;<span class="ident" id="7963345">saddr</span><span class="op" id="7963350">:</span>&nbsp;<span class="string" id="7963352">&#34;[::]&#34;</span><span class="op" id="7963358">,</span>&nbsp;<span class="ident" id="7963360">cnet</span><span class="op" id="7963364">:</span>&nbsp;<span class="string" id="7963366">&#34;udp6&#34;</span><span class="op" id="7963372">,</span>&nbsp;<span class="ident" id="7963374">caddr</span><span class="op" id="7963379">:</span>&nbsp;<span class="string" id="7963381">&#34;[::1]&#34;</span><span class="op" id="7963388">,</span>&nbsp;<span class="ident" id="7963390">ipv6</span><span class="op" id="7963394">:</span>&nbsp;<span class="builtintype" id="7963396">true</span><span class="op" id="7963400">}</span><span class="op" id="7963401">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963405">{</span><span class="ident" id="7963406">snet</span><span class="op" id="7963410">:</span>&nbsp;<span class="string" id="7963412">&#34;udp&#34;</span><span class="op" id="7963417">,</span>&nbsp;<span class="ident" id="7963419">saddr</span><span class="op" id="7963424">:</span>&nbsp;<span class="string" id="7963426">&#34;&#34;</span><span class="op" id="7963428">,</span>&nbsp;<span class="ident" id="7963430">cnet</span><span class="op" id="7963434">:</span>&nbsp;<span class="string" id="7963436">&#34;udp6&#34;</span><span class="op" id="7963442">,</span>&nbsp;<span class="ident" id="7963444">caddr</span><span class="op" id="7963449">:</span>&nbsp;<span class="string" id="7963451">&#34;[::1]&#34;</span><span class="op" id="7963458">,</span>&nbsp;<span class="ident" id="7963460">ipv4map</span><span class="op" id="7963467">:</span>&nbsp;<span class="builtintype" id="7963469">true</span><span class="op" id="7963473">}</span><span class="op" id="7963474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963477">{</span><span class="ident" id="7963478">snet</span><span class="op" id="7963482">:</span>&nbsp;<span class="string" id="7963484">&#34;udp&#34;</span><span class="op" id="7963489">,</span>&nbsp;<span class="ident" id="7963491">saddr</span><span class="op" id="7963496">:</span>&nbsp;<span class="string" id="7963498">&#34;0.0.0.0&#34;</span><span class="op" id="7963507">,</span>&nbsp;<span class="ident" id="7963509">cnet</span><span class="op" id="7963513">:</span>&nbsp;<span class="string" id="7963515">&#34;udp6&#34;</span><span class="op" id="7963521">,</span>&nbsp;<span class="ident" id="7963523">caddr</span><span class="op" id="7963528">:</span>&nbsp;<span class="string" id="7963530">&#34;[::1]&#34;</span><span class="op" id="7963537">,</span>&nbsp;<span class="ident" id="7963539">ipv4map</span><span class="op" id="7963546">:</span>&nbsp;<span class="builtintype" id="7963548">true</span><span class="op" id="7963552">}</span><span class="op" id="7963553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963556">{</span><span class="ident" id="7963557">snet</span><span class="op" id="7963561">:</span>&nbsp;<span class="string" id="7963563">&#34;udp&#34;</span><span class="op" id="7963568">,</span>&nbsp;<span class="ident" id="7963570">saddr</span><span class="op" id="7963575">:</span>&nbsp;<span class="string" id="7963577">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7963595">,</span>&nbsp;<span class="ident" id="7963597">cnet</span><span class="op" id="7963601">:</span>&nbsp;<span class="string" id="7963603">&#34;udp6&#34;</span><span class="op" id="7963609">,</span>&nbsp;<span class="ident" id="7963611">caddr</span><span class="op" id="7963616">:</span>&nbsp;<span class="string" id="7963618">&#34;[::1]&#34;</span><span class="op" id="7963625">,</span>&nbsp;<span class="ident" id="7963627">ipv4map</span><span class="op" id="7963634">:</span>&nbsp;<span class="builtintype" id="7963636">true</span><span class="op" id="7963640">}</span><span class="op" id="7963641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963644">{</span><span class="ident" id="7963645">snet</span><span class="op" id="7963649">:</span>&nbsp;<span class="string" id="7963651">&#34;udp&#34;</span><span class="op" id="7963656">,</span>&nbsp;<span class="ident" id="7963658">saddr</span><span class="op" id="7963663">:</span>&nbsp;<span class="string" id="7963665">&#34;[::]&#34;</span><span class="op" id="7963671">,</span>&nbsp;<span class="ident" id="7963673">cnet</span><span class="op" id="7963677">:</span>&nbsp;<span class="string" id="7963679">&#34;udp4&#34;</span><span class="op" id="7963685">,</span>&nbsp;<span class="ident" id="7963687">caddr</span><span class="op" id="7963692">:</span>&nbsp;<span class="string" id="7963694">&#34;127.0.0.1&#34;</span><span class="op" id="7963705">,</span>&nbsp;<span class="ident" id="7963707">ipv4map</span><span class="op" id="7963714">:</span>&nbsp;<span class="builtintype" id="7963716">true</span><span class="op" id="7963720">}</span><span class="op" id="7963721">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963725">{</span><span class="ident" id="7963726">snet</span><span class="op" id="7963730">:</span>&nbsp;<span class="string" id="7963732">&#34;udp&#34;</span><span class="op" id="7963737">,</span>&nbsp;<span class="ident" id="7963739">saddr</span><span class="op" id="7963744">:</span>&nbsp;<span class="string" id="7963746">&#34;127.0.0.1&#34;</span><span class="op" id="7963757">,</span>&nbsp;<span class="ident" id="7963759">cnet</span><span class="op" id="7963763">:</span>&nbsp;<span class="string" id="7963765">&#34;udp&#34;</span><span class="op" id="7963770">,</span>&nbsp;<span class="ident" id="7963772">caddr</span><span class="op" id="7963777">:</span>&nbsp;<span class="string" id="7963779">&#34;127.0.0.1&#34;</span><span class="op" id="7963790">}</span><span class="op" id="7963791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963794">{</span><span class="ident" id="7963795">snet</span><span class="op" id="7963799">:</span>&nbsp;<span class="string" id="7963801">&#34;udp&#34;</span><span class="op" id="7963806">,</span>&nbsp;<span class="ident" id="7963808">saddr</span><span class="op" id="7963813">:</span>&nbsp;<span class="string" id="7963815">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7963835">,</span>&nbsp;<span class="ident" id="7963837">cnet</span><span class="op" id="7963841">:</span>&nbsp;<span class="string" id="7963843">&#34;udp&#34;</span><span class="op" id="7963848">,</span>&nbsp;<span class="ident" id="7963850">caddr</span><span class="op" id="7963855">:</span>&nbsp;<span class="string" id="7963857">&#34;127.0.0.1&#34;</span><span class="op" id="7963868">}</span><span class="op" id="7963869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963872">{</span><span class="ident" id="7963873">snet</span><span class="op" id="7963877">:</span>&nbsp;<span class="string" id="7963879">&#34;udp&#34;</span><span class="op" id="7963884">,</span>&nbsp;<span class="ident" id="7963886">saddr</span><span class="op" id="7963891">:</span>&nbsp;<span class="string" id="7963893">&#34;[::1]&#34;</span><span class="op" id="7963900">,</span>&nbsp;<span class="ident" id="7963902">cnet</span><span class="op" id="7963906">:</span>&nbsp;<span class="string" id="7963908">&#34;udp&#34;</span><span class="op" id="7963913">,</span>&nbsp;<span class="ident" id="7963915">caddr</span><span class="op" id="7963920">:</span>&nbsp;<span class="string" id="7963922">&#34;[::1]&#34;</span><span class="op" id="7963929">,</span>&nbsp;<span class="ident" id="7963931">ipv6</span><span class="op" id="7963935">:</span>&nbsp;<span class="builtintype" id="7963937">true</span><span class="op" id="7963941">}</span><span class="op" id="7963942">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963946">{</span><span class="ident" id="7963947">snet</span><span class="op" id="7963951">:</span>&nbsp;<span class="string" id="7963953">&#34;udp4&#34;</span><span class="op" id="7963959">,</span>&nbsp;<span class="ident" id="7963961">saddr</span><span class="op" id="7963966">:</span>&nbsp;<span class="string" id="7963968">&#34;&#34;</span><span class="op" id="7963970">,</span>&nbsp;<span class="ident" id="7963972">cnet</span><span class="op" id="7963976">:</span>&nbsp;<span class="string" id="7963978">&#34;udp4&#34;</span><span class="op" id="7963984">,</span>&nbsp;<span class="ident" id="7963986">caddr</span><span class="op" id="7963991">:</span>&nbsp;<span class="string" id="7963993">&#34;127.0.0.1&#34;</span><span class="op" id="7964004">}</span><span class="op" id="7964005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964008">{</span><span class="ident" id="7964009">snet</span><span class="op" id="7964013">:</span>&nbsp;<span class="string" id="7964015">&#34;udp4&#34;</span><span class="op" id="7964021">,</span>&nbsp;<span class="ident" id="7964023">saddr</span><span class="op" id="7964028">:</span>&nbsp;<span class="string" id="7964030">&#34;0.0.0.0&#34;</span><span class="op" id="7964039">,</span>&nbsp;<span class="ident" id="7964041">cnet</span><span class="op" id="7964045">:</span>&nbsp;<span class="string" id="7964047">&#34;udp4&#34;</span><span class="op" id="7964053">,</span>&nbsp;<span class="ident" id="7964055">caddr</span><span class="op" id="7964060">:</span>&nbsp;<span class="string" id="7964062">&#34;127.0.0.1&#34;</span><span class="op" id="7964073">}</span><span class="op" id="7964074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964077">{</span><span class="ident" id="7964078">snet</span><span class="op" id="7964082">:</span>&nbsp;<span class="string" id="7964084">&#34;udp4&#34;</span><span class="op" id="7964090">,</span>&nbsp;<span class="ident" id="7964092">saddr</span><span class="op" id="7964097">:</span>&nbsp;<span class="string" id="7964099">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7964117">,</span>&nbsp;<span class="ident" id="7964119">cnet</span><span class="op" id="7964123">:</span>&nbsp;<span class="string" id="7964125">&#34;udp4&#34;</span><span class="op" id="7964131">,</span>&nbsp;<span class="ident" id="7964133">caddr</span><span class="op" id="7964138">:</span>&nbsp;<span class="string" id="7964140">&#34;127.0.0.1&#34;</span><span class="op" id="7964151">}</span><span class="op" id="7964152">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964156">{</span><span class="ident" id="7964157">snet</span><span class="op" id="7964161">:</span>&nbsp;<span class="string" id="7964163">&#34;udp4&#34;</span><span class="op" id="7964169">,</span>&nbsp;<span class="ident" id="7964171">saddr</span><span class="op" id="7964176">:</span>&nbsp;<span class="string" id="7964178">&#34;127.0.0.1&#34;</span><span class="op" id="7964189">,</span>&nbsp;<span class="ident" id="7964191">cnet</span><span class="op" id="7964195">:</span>&nbsp;<span class="string" id="7964197">&#34;udp4&#34;</span><span class="op" id="7964203">,</span>&nbsp;<span class="ident" id="7964205">caddr</span><span class="op" id="7964210">:</span>&nbsp;<span class="string" id="7964212">&#34;127.0.0.1&#34;</span><span class="op" id="7964223">}</span><span class="op" id="7964224">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964228">{</span><span class="ident" id="7964229">snet</span><span class="op" id="7964233">:</span>&nbsp;<span class="string" id="7964235">&#34;udp6&#34;</span><span class="op" id="7964241">,</span>&nbsp;<span class="ident" id="7964243">saddr</span><span class="op" id="7964248">:</span>&nbsp;<span class="string" id="7964250">&#34;&#34;</span><span class="op" id="7964252">,</span>&nbsp;<span class="ident" id="7964254">cnet</span><span class="op" id="7964258">:</span>&nbsp;<span class="string" id="7964260">&#34;udp6&#34;</span><span class="op" id="7964266">,</span>&nbsp;<span class="ident" id="7964268">caddr</span><span class="op" id="7964273">:</span>&nbsp;<span class="string" id="7964275">&#34;[::1]&#34;</span><span class="op" id="7964282">,</span>&nbsp;<span class="ident" id="7964284">ipv6</span><span class="op" id="7964288">:</span>&nbsp;<span class="builtintype" id="7964290">true</span><span class="op" id="7964294">}</span><span class="op" id="7964295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964298">{</span><span class="ident" id="7964299">snet</span><span class="op" id="7964303">:</span>&nbsp;<span class="string" id="7964305">&#34;udp6&#34;</span><span class="op" id="7964311">,</span>&nbsp;<span class="ident" id="7964313">saddr</span><span class="op" id="7964318">:</span>&nbsp;<span class="string" id="7964320">&#34;[::]&#34;</span><span class="op" id="7964326">,</span>&nbsp;<span class="ident" id="7964328">cnet</span><span class="op" id="7964332">:</span>&nbsp;<span class="string" id="7964334">&#34;udp6&#34;</span><span class="op" id="7964340">,</span>&nbsp;<span class="ident" id="7964342">caddr</span><span class="op" id="7964347">:</span>&nbsp;<span class="string" id="7964349">&#34;[::1]&#34;</span><span class="op" id="7964356">,</span>&nbsp;<span class="ident" id="7964358">ipv6</span><span class="op" id="7964362">:</span>&nbsp;<span class="builtintype" id="7964364">true</span><span class="op" id="7964368">}</span><span class="op" id="7964369">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964373">{</span><span class="ident" id="7964374">snet</span><span class="op" id="7964378">:</span>&nbsp;<span class="string" id="7964380">&#34;udp6&#34;</span><span class="op" id="7964386">,</span>&nbsp;<span class="ident" id="7964388">saddr</span><span class="op" id="7964393">:</span>&nbsp;<span class="string" id="7964395">&#34;[::1]&#34;</span><span class="op" id="7964402">,</span>&nbsp;<span class="ident" id="7964404">cnet</span><span class="op" id="7964408">:</span>&nbsp;<span class="string" id="7964410">&#34;udp6&#34;</span><span class="op" id="7964416">,</span>&nbsp;<span class="ident" id="7964418">caddr</span><span class="op" id="7964423">:</span>&nbsp;<span class="string" id="7964425">&#34;[::1]&#34;</span><span class="op" id="7964432">,</span>&nbsp;<span class="ident" id="7964434">ipv6</span><span class="op" id="7964438">:</span>&nbsp;<span class="builtintype" id="7964440">true</span><span class="op" id="7964444">}</span><span class="op" id="7964445">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964449">{</span><span class="ident" id="7964450">snet</span><span class="op" id="7964454">:</span>&nbsp;<span class="string" id="7964456">&#34;udp&#34;</span><span class="op" id="7964461">,</span>&nbsp;<span class="ident" id="7964463">saddr</span><span class="op" id="7964468">:</span>&nbsp;<span class="string" id="7964470">&#34;127.0.0.1&#34;</span><span class="op" id="7964481">,</span>&nbsp;<span class="ident" id="7964483">cnet</span><span class="op" id="7964487">:</span>&nbsp;<span class="string" id="7964489">&#34;udp&#34;</span><span class="op" id="7964494">,</span>&nbsp;<span class="ident" id="7964496">caddr</span><span class="op" id="7964501">:</span>&nbsp;<span class="string" id="7964503">&#34;127.0.0.1&#34;</span><span class="op" id="7964514">,</span>&nbsp;<span class="ident" id="7964516">dial</span><span class="op" id="7964520">:</span>&nbsp;<span class="builtintype" id="7964522">true</span><span class="op" id="7964526">}</span><span class="op" id="7964527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964530">{</span><span class="ident" id="7964531">snet</span><span class="op" id="7964535">:</span>&nbsp;<span class="string" id="7964537">&#34;udp&#34;</span><span class="op" id="7964542">,</span>&nbsp;<span class="ident" id="7964544">saddr</span><span class="op" id="7964549">:</span>&nbsp;<span class="string" id="7964551">&#34;127.0.0.1&#34;</span><span class="op" id="7964562">,</span>&nbsp;<span class="ident" id="7964564">cnet</span><span class="op" id="7964568">:</span>&nbsp;<span class="string" id="7964570">&#34;udp&#34;</span><span class="op" id="7964575">,</span>&nbsp;<span class="ident" id="7964577">caddr</span><span class="op" id="7964582">:</span>&nbsp;<span class="string" id="7964584">&#34;127.0.0.1&#34;</span><span class="op" id="7964595">,</span>&nbsp;<span class="ident" id="7964597">empty</span><span class="op" id="7964602">:</span>&nbsp;<span class="builtintype" id="7964604">true</span><span class="op" id="7964608">}</span><span class="op" id="7964609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964612">{</span><span class="ident" id="7964613">snet</span><span class="op" id="7964617">:</span>&nbsp;<span class="string" id="7964619">&#34;udp&#34;</span><span class="op" id="7964624">,</span>&nbsp;<span class="ident" id="7964626">saddr</span><span class="op" id="7964631">:</span>&nbsp;<span class="string" id="7964633">&#34;127.0.0.1&#34;</span><span class="op" id="7964644">,</span>&nbsp;<span class="ident" id="7964646">cnet</span><span class="op" id="7964650">:</span>&nbsp;<span class="string" id="7964652">&#34;udp&#34;</span><span class="op" id="7964657">,</span>&nbsp;<span class="ident" id="7964659">caddr</span><span class="op" id="7964664">:</span>&nbsp;<span class="string" id="7964666">&#34;127.0.0.1&#34;</span><span class="op" id="7964677">,</span>&nbsp;<span class="ident" id="7964679">dial</span><span class="op" id="7964683">:</span>&nbsp;<span class="builtintype" id="7964685">true</span><span class="op" id="7964689">,</span>&nbsp;<span class="ident" id="7964691">empty</span><span class="op" id="7964696">:</span>&nbsp;<span class="builtintype" id="7964698">true</span><span class="op" id="7964702">}</span><span class="op" id="7964703">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964707">{</span><span class="ident" id="7964708">snet</span><span class="op" id="7964712">:</span>&nbsp;<span class="string" id="7964714">&#34;udp&#34;</span><span class="op" id="7964719">,</span>&nbsp;<span class="ident" id="7964721">saddr</span><span class="op" id="7964726">:</span>&nbsp;<span class="string" id="7964728">&#34;[::1]&#34;</span><span class="op" id="7964735">,</span>&nbsp;<span class="ident" id="7964737">cnet</span><span class="op" id="7964741">:</span>&nbsp;<span class="string" id="7964743">&#34;udp&#34;</span><span class="op" id="7964748">,</span>&nbsp;<span class="ident" id="7964750">caddr</span><span class="op" id="7964755">:</span>&nbsp;<span class="string" id="7964757">&#34;[::1]&#34;</span><span class="op" id="7964764">,</span>&nbsp;<span class="ident" id="7964766">ipv6</span><span class="op" id="7964770">:</span>&nbsp;<span class="builtintype" id="7964772">true</span><span class="op" id="7964776">,</span>&nbsp;<span class="ident" id="7964778">dial</span><span class="op" id="7964782">:</span>&nbsp;<span class="builtintype" id="7964784">true</span><span class="op" id="7964788">}</span><span class="op" id="7964789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964792">{</span><span class="ident" id="7964793">snet</span><span class="op" id="7964797">:</span>&nbsp;<span class="string" id="7964799">&#34;udp&#34;</span><span class="op" id="7964804">,</span>&nbsp;<span class="ident" id="7964806">saddr</span><span class="op" id="7964811">:</span>&nbsp;<span class="string" id="7964813">&#34;[::1]&#34;</span><span class="op" id="7964820">,</span>&nbsp;<span class="ident" id="7964822">cnet</span><span class="op" id="7964826">:</span>&nbsp;<span class="string" id="7964828">&#34;udp&#34;</span><span class="op" id="7964833">,</span>&nbsp;<span class="ident" id="7964835">caddr</span><span class="op" id="7964840">:</span>&nbsp;<span class="string" id="7964842">&#34;[::1]&#34;</span><span class="op" id="7964849">,</span>&nbsp;<span class="ident" id="7964851">ipv6</span><span class="op" id="7964855">:</span>&nbsp;<span class="builtintype" id="7964857">true</span><span class="op" id="7964861">,</span>&nbsp;<span class="ident" id="7964863">empty</span><span class="op" id="7964868">:</span>&nbsp;<span class="builtintype" id="7964870">true</span><span class="op" id="7964874">}</span><span class="op" id="7964875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964878">{</span><span class="ident" id="7964879">snet</span><span class="op" id="7964883">:</span>&nbsp;<span class="string" id="7964885">&#34;udp&#34;</span><span class="op" id="7964890">,</span>&nbsp;<span class="ident" id="7964892">saddr</span><span class="op" id="7964897">:</span>&nbsp;<span class="string" id="7964899">&#34;[::1]&#34;</span><span class="op" id="7964906">,</span>&nbsp;<span class="ident" id="7964908">cnet</span><span class="op" id="7964912">:</span>&nbsp;<span class="string" id="7964914">&#34;udp&#34;</span><span class="op" id="7964919">,</span>&nbsp;<span class="ident" id="7964921">caddr</span><span class="op" id="7964926">:</span>&nbsp;<span class="string" id="7964928">&#34;[::1]&#34;</span><span class="op" id="7964935">,</span>&nbsp;<span class="ident" id="7964937">ipv6</span><span class="op" id="7964941">:</span>&nbsp;<span class="builtintype" id="7964943">true</span><span class="op" id="7964947">,</span>&nbsp;<span class="ident" id="7964949">dial</span><span class="op" id="7964953">:</span>&nbsp;<span class="builtintype" id="7964955">true</span><span class="op" id="7964959">,</span>&nbsp;<span class="ident" id="7964961">empty</span><span class="op" id="7964966">:</span>&nbsp;<span class="builtintype" id="7964968">true</span><span class="op" id="7964972">}</span><span class="op" id="7964973">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964977">{</span><span class="ident" id="7964978">snet</span><span class="op" id="7964982">:</span>&nbsp;<span class="string" id="7964984">&#34;unixgram&#34;</span><span class="op" id="7964994">,</span>&nbsp;<span class="ident" id="7964996">saddr</span><span class="op" id="7965001">:</span>&nbsp;<span class="ident" id="7965003"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965015">(</span><span class="op" id="7965016">)</span><span class="op" id="7965017">,</span>&nbsp;<span class="ident" id="7965019">cnet</span><span class="op" id="7965023">:</span>&nbsp;<span class="string" id="7965025">&#34;unixgram&#34;</span><span class="op" id="7965035">,</span>&nbsp;<span class="ident" id="7965037">caddr</span><span class="op" id="7965042">:</span>&nbsp;<span class="ident" id="7965044"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965056">(</span><span class="op" id="7965057">)</span><span class="op" id="7965058">}</span><span class="op" id="7965059">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965062">{</span><span class="ident" id="7965063">snet</span><span class="op" id="7965067">:</span>&nbsp;<span class="string" id="7965069">&#34;unixgram&#34;</span><span class="op" id="7965079">,</span>&nbsp;<span class="ident" id="7965081">saddr</span><span class="op" id="7965086">:</span>&nbsp;<span class="ident" id="7965088"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965100">(</span><span class="op" id="7965101">)</span><span class="op" id="7965102">,</span>&nbsp;<span class="ident" id="7965104">cnet</span><span class="op" id="7965108">:</span>&nbsp;<span class="string" id="7965110">&#34;unixgram&#34;</span><span class="op" id="7965120">,</span>&nbsp;<span class="ident" id="7965122">caddr</span><span class="op" id="7965127">:</span>&nbsp;<span class="ident" id="7965129"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965141">(</span><span class="op" id="7965142">)</span><span class="op" id="7965143">,</span>&nbsp;<span class="ident" id="7965145">dial</span><span class="op" id="7965149">:</span>&nbsp;<span class="builtintype" id="7965151">true</span><span class="op" id="7965155">}</span><span class="op" id="7965156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965159">{</span><span class="ident" id="7965160">snet</span><span class="op" id="7965164">:</span>&nbsp;<span class="string" id="7965166">&#34;unixgram&#34;</span><span class="op" id="7965176">,</span>&nbsp;<span class="ident" id="7965178">saddr</span><span class="op" id="7965183">:</span>&nbsp;<span class="ident" id="7965185"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965197">(</span><span class="op" id="7965198">)</span><span class="op" id="7965199">,</span>&nbsp;<span class="ident" id="7965201">cnet</span><span class="op" id="7965205">:</span>&nbsp;<span class="string" id="7965207">&#34;unixgram&#34;</span><span class="op" id="7965217">,</span>&nbsp;<span class="ident" id="7965219">caddr</span><span class="op" id="7965224">:</span>&nbsp;<span class="ident" id="7965226"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965238">(</span><span class="op" id="7965239">)</span><span class="op" id="7965240">,</span>&nbsp;<span class="ident" id="7965242">empty</span><span class="op" id="7965247">:</span>&nbsp;<span class="builtintype" id="7965249">true</span><span class="op" id="7965253">}</span><span class="op" id="7965254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965257">{</span><span class="ident" id="7965258">snet</span><span class="op" id="7965262">:</span>&nbsp;<span class="string" id="7965264">&#34;unixgram&#34;</span><span class="op" id="7965274">,</span>&nbsp;<span class="ident" id="7965276">saddr</span><span class="op" id="7965281">:</span>&nbsp;<span class="ident" id="7965283"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965295">(</span><span class="op" id="7965296">)</span><span class="op" id="7965297">,</span>&nbsp;<span class="ident" id="7965299">cnet</span><span class="op" id="7965303">:</span>&nbsp;<span class="string" id="7965305">&#34;unixgram&#34;</span><span class="op" id="7965315">,</span>&nbsp;<span class="ident" id="7965317">caddr</span><span class="op" id="7965322">:</span>&nbsp;<span class="ident" id="7965324"><a href="/net/protoconn_test.go.html#7945768">testUnixAddr</a></span><span class="op" id="7965336">(</span><span class="op" id="7965337">)</span><span class="op" id="7965338">,</span>&nbsp;<span class="ident" id="7965340">dial</span><span class="op" id="7965344">:</span>&nbsp;<span class="builtintype" id="7965346">true</span><span class="op" id="7965350">,</span>&nbsp;<span class="ident" id="7965352">empty</span><span class="op" id="7965357">:</span>&nbsp;<span class="builtintype" id="7965359">true</span><span class="op" id="7965363">}</span><span class="op" id="7965364">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965368">{</span><span class="ident" id="7965369">snet</span><span class="op" id="7965373">:</span>&nbsp;<span class="string" id="7965375">&#34;unixgram&#34;</span><span class="op" id="7965385">,</span>&nbsp;<span class="ident" id="7965387">saddr</span><span class="op" id="7965392">:</span>&nbsp;<span class="string" id="7965394">&#34;@gotest6/net&#34;</span><span class="op" id="7965408">,</span>&nbsp;<span class="ident" id="7965410">cnet</span><span class="op" id="7965414">:</span>&nbsp;<span class="string" id="7965416">&#34;unixgram&#34;</span><span class="op" id="7965426">,</span>&nbsp;<span class="ident" id="7965428">caddr</span><span class="op" id="7965433">:</span>&nbsp;<span class="string" id="7965435">&#34;@gotest6/net.local&#34;</span><span class="op" id="7965455">,</span>&nbsp;<span class="ident" id="7965457">linuxOnly</span><span class="op" id="7965466">:</span>&nbsp;<span class="builtintype" id="7965468">true</span><span class="op" id="7965472">}</span><span class="op" id="7965473">,</span><br>
<span class="lineno">310</span><span class="op" id="7965475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7965478">func</span>&nbsp;<span class="ident" id="7965483">TestDatagramPacketConnServer</span><span class="op" id="7965511">(</span><span class="ident" id="7965512">t</span>&nbsp;<span class="op" id="7965514">*</span><span class="ident" id="7965515"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7965522">.</span><span class="ident" id="7965523">T</span><span class="op" id="7965524">)</span>&nbsp;<span class="op" id="7965526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965529">if</span>&nbsp;<span class="op" id="7965532">!</span><span class="op" id="7965533">*</span><span class="ident" id="7965534"><a href="/net/server_test.go.html#7962026">testDatagram</a></span>&nbsp;<span class="op" id="7965547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965551">return</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965563">for</span>&nbsp;<span class="ident" id="7965567">_</span><span class="op" id="7965568">,</span>&nbsp;<span class="ident" id="7965570">tt</span>&nbsp;<span class="op" id="7965573">:=</span>&nbsp;<span class="keyword" id="7965576">range</span>&nbsp;<span class="ident" id="7965582"><a href="/net/server_test.go.html#7962111">datagramPacketConnServerTests</a></span>&nbsp;<span class="op" id="7965612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965616">if</span>&nbsp;<span class="ident" id="7965619"><a href="/net/server_test.go.html#7955175">skipServerTest</a></span><span class="op" id="7965633">(</span><span class="ident" id="7965634"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965636">.</span><span class="ident" id="7965637">snet</span><span class="op" id="7965641">,</span>&nbsp;<span class="string" id="7965643">&#34;unixgram&#34;</span><span class="op" id="7965653">,</span>&nbsp;<span class="ident" id="7965655"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965657">.</span><span class="ident" id="7965658">saddr</span><span class="op" id="7965663">,</span>&nbsp;<span class="ident" id="7965665"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965667">.</span><span class="ident" id="7965668">ipv6</span><span class="op" id="7965672">,</span>&nbsp;<span class="ident" id="7965674"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965676">.</span><span class="ident" id="7965677">ipv4map</span><span class="op" id="7965684">,</span>&nbsp;<span class="ident" id="7965686"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965688">.</span><span class="ident" id="7965689">linuxOnly</span><span class="op" id="7965698">)</span>&nbsp;<span class="op" id="7965700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965705">continue</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965721">listening</span>&nbsp;<span class="op" id="7965731">:=</span>&nbsp;<span class="builtinfunc" id="7965734">make</span><span class="op" id="7965738">(</span><span class="keyword" id="7965739">chan</span>&nbsp;<span class="builtintype" id="7965744">string</span><span class="op" id="7965750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965754">done</span>&nbsp;<span class="op" id="7965759">:=</span>&nbsp;<span class="builtinfunc" id="7965762">make</span><span class="op" id="7965766">(</span><span class="keyword" id="7965767">chan</span>&nbsp;<span class="builtintype" id="7965772">int</span><span class="op" id="7965775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965779">switch</span>&nbsp;<span class="ident" id="7965786"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965788">.</span><span class="ident" id="7965789">snet</span>&nbsp;<span class="op" id="7965794">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965798">case</span>&nbsp;<span class="string" id="7965803">&#34;udp&#34;</span><span class="op" id="7965808">,</span>&nbsp;<span class="string" id="7965810">&#34;udp4&#34;</span><span class="op" id="7965816">,</span>&nbsp;<span class="string" id="7965818">&#34;udp6&#34;</span><span class="op" id="7965824">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965829"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965831">.</span><span class="ident" id="7965832">saddr</span>&nbsp;<span class="op" id="7965838">+=</span>&nbsp;<span class="string" id="7965841">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965848">case</span>&nbsp;<span class="string" id="7965853">&#34;unixgram&#34;</span><span class="op" id="7965863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965868"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7965870">.</span><span class="ident" id="7965871">Remove</span><span class="op" id="7965877">(</span><span class="ident" id="7965878"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965880">.</span><span class="ident" id="7965881">saddr</span><span class="op" id="7965886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965891"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7965893">.</span><span class="ident" id="7965894">Remove</span><span class="op" id="7965900">(</span><span class="ident" id="7965901"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965903">.</span><span class="ident" id="7965904">caddr</span><span class="op" id="7965909">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965918">go</span>&nbsp;<span class="ident" id="7965921"><a href="/net/server_test.go.html#7966600">runDatagramPacketConnServer</a></span><span class="op" id="7965948">(</span><span class="ident" id="7965949"><a href="/net/server_test.go.html#7965512">t</a></span><span class="op" id="7965950">,</span>&nbsp;<span class="ident" id="7965952"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965954">.</span><span class="ident" id="7965955">snet</span><span class="op" id="7965959">,</span>&nbsp;<span class="ident" id="7965961"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7965963">.</span><span class="ident" id="7965964">saddr</span><span class="op" id="7965969">,</span>&nbsp;<span class="ident" id="7965971"><a href="/net/server_test.go.html#7965721">listening</a></span><span class="op" id="7965980">,</span>&nbsp;<span class="ident" id="7965982"><a href="/net/server_test.go.html#7965754">done</a></span><span class="op" id="7965986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965990">taddr</span>&nbsp;<span class="op" id="7965996">:=</span>&nbsp;<span class="op" id="7965999">&lt;-</span><span class="ident" id="7966001"><a href="/net/server_test.go.html#7965721">listening</a></span>&nbsp;<span class="comment" id="7966011">//&nbsp;wait&nbsp;for&nbsp;server&nbsp;to&nbsp;start</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966042">switch</span>&nbsp;<span class="ident" id="7966049"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966051">.</span><span class="ident" id="7966052">cnet</span>&nbsp;<span class="op" id="7966057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966061">case</span>&nbsp;<span class="string" id="7966066">&#34;udp&#34;</span><span class="op" id="7966071">,</span>&nbsp;<span class="string" id="7966073">&#34;udp4&#34;</span><span class="op" id="7966079">,</span>&nbsp;<span class="string" id="7966081">&#34;udp6&#34;</span><span class="op" id="7966087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966092">_</span><span class="op" id="7966093">,</span>&nbsp;<span class="ident" id="7966095">port</span><span class="op" id="7966099">,</span>&nbsp;<span class="ident" id="7966101">err</span>&nbsp;<span class="op" id="7966105">:=</span>&nbsp;<span class="ident" id="7966108"><a href="/net/ipsock.go.html#1444126">SplitHostPort</a></span><span class="op" id="7966121">(</span><span class="ident" id="7966122"><a href="/net/server_test.go.html#7965990">taddr</a></span><span class="op" id="7966127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966132">if</span>&nbsp;<span class="ident" id="7966135"><a href="/net/server_test.go.html#7966101">err</a></span>&nbsp;<span class="op" id="7966139">!=</span>&nbsp;<span class="ident" id="7966142">nil</span>&nbsp;<span class="op" id="7966146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966152"><a href="/net/server_test.go.html#7965512">t</a></span><span class="op" id="7966153">.</span><span class="ident" id="7966154">Fatalf</span><span class="op" id="7966160">(</span><span class="string" id="7966161">&#34;SplitHostPort(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7966191">,</span>&nbsp;<span class="ident" id="7966193"><a href="/net/server_test.go.html#7965990">taddr</a></span><span class="op" id="7966198">,</span>&nbsp;<span class="ident" id="7966200"><a href="/net/server_test.go.html#7966101">err</a></span><span class="op" id="7966203">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966213"><a href="/net/server_test.go.html#7965990">taddr</a></span>&nbsp;<span class="op" id="7966219">=</span>&nbsp;<span class="ident" id="7966221"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966223">.</span><span class="ident" id="7966224">caddr</span>&nbsp;<span class="op" id="7966230">+</span>&nbsp;<span class="string" id="7966232">&#34;:&#34;</span>&nbsp;<span class="op" id="7966236">+</span>&nbsp;<span class="ident" id="7966238"><a href="/net/server_test.go.html#7966095">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966246"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966248">.</span><span class="ident" id="7966249">caddr</span>&nbsp;<span class="op" id="7966255">+=</span>&nbsp;<span class="string" id="7966258">&#34;:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966269">if</span>&nbsp;<span class="ident" id="7966272"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966274">.</span><span class="ident" id="7966275">dial</span>&nbsp;<span class="op" id="7966280">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966285"><a href="/net/server_test.go.html#7967366">runDatagramConnClient</a></span><span class="op" id="7966306">(</span><span class="ident" id="7966307"><a href="/net/server_test.go.html#7965512">t</a></span><span class="op" id="7966308">,</span>&nbsp;<span class="ident" id="7966310"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966312">.</span><span class="ident" id="7966313">cnet</span><span class="op" id="7966317">,</span>&nbsp;<span class="ident" id="7966319"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966321">.</span><span class="ident" id="7966322">caddr</span><span class="op" id="7966327">,</span>&nbsp;<span class="ident" id="7966329"><a href="/net/server_test.go.html#7965990">taddr</a></span><span class="op" id="7966334">,</span>&nbsp;<span class="ident" id="7966336"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966338">.</span><span class="ident" id="7966339">empty</span><span class="op" id="7966344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966348">}</span>&nbsp;<span class="keyword" id="7966350">else</span>&nbsp;<span class="op" id="7966355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966360"><a href="/net/server_test.go.html#7968273">runDatagramPacketConnClient</a></span><span class="op" id="7966387">(</span><span class="ident" id="7966388"><a href="/net/server_test.go.html#7965512">t</a></span><span class="op" id="7966389">,</span>&nbsp;<span class="ident" id="7966391"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966393">.</span><span class="ident" id="7966394">cnet</span><span class="op" id="7966398">,</span>&nbsp;<span class="ident" id="7966400"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966402">.</span><span class="ident" id="7966403">caddr</span><span class="op" id="7966408">,</span>&nbsp;<span class="ident" id="7966410"><a href="/net/server_test.go.html#7965990">taddr</a></span><span class="op" id="7966415">,</span>&nbsp;<span class="ident" id="7966417"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966419">.</span><span class="ident" id="7966420">empty</span><span class="op" id="7966425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966433">&lt;-</span><span class="ident" id="7966435"><a href="/net/server_test.go.html#7965754">done</a></span>&nbsp;<span class="comment" id="7966440">//&nbsp;tell&nbsp;server&nbsp;to&nbsp;stop</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966465">&lt;-</span><span class="ident" id="7966467"><a href="/net/server_test.go.html#7965754">done</a></span>&nbsp;<span class="comment" id="7966472">//&nbsp;make&nbsp;sure&nbsp;server&nbsp;stopped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966503">switch</span>&nbsp;<span class="ident" id="7966510"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966512">.</span><span class="ident" id="7966513">snet</span>&nbsp;<span class="op" id="7966518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966522">case</span>&nbsp;<span class="string" id="7966527">&#34;unixgram&#34;</span><span class="op" id="7966537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966542"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7966544">.</span><span class="ident" id="7966545">Remove</span><span class="op" id="7966551">(</span><span class="ident" id="7966552"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966554">.</span><span class="ident" id="7966555">saddr</span><span class="op" id="7966560">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966565"><a href="/net/server_test.go.html#7955132">os</a></span><span class="op" id="7966567">.</span><span class="ident" id="7966568">Remove</span><span class="op" id="7966574">(</span><span class="ident" id="7966575"><a href="/net/server_test.go.html#7965570">tt</a></span><span class="op" id="7966577">.</span><span class="ident" id="7966578">caddr</span><span class="op" id="7966583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966590">}</span><br>
<span class="lineno"></span><span class="op" id="7966592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="7966595">func</span>&nbsp;<span class="ident" id="7966600">runDatagramPacketConnServer</span><span class="op" id="7966627">(</span><span class="ident" id="7966628">t</span>&nbsp;<span class="op" id="7966630">*</span><span class="ident" id="7966631"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7966638">.</span><span class="ident" id="7966639">T</span><span class="op" id="7966640">,</span>&nbsp;<span class="ident" id="7966642">net</span><span class="op" id="7966645">,</span>&nbsp;<span class="ident" id="7966647">laddr</span>&nbsp;<span class="builtintype" id="7966653">string</span><span class="op" id="7966659">,</span>&nbsp;<span class="ident" id="7966661">listening</span>&nbsp;<span class="keyword" id="7966671">chan</span><span class="op" id="7966675">&lt;-</span>&nbsp;<span class="builtintype" id="7966678">string</span><span class="op" id="7966684">,</span>&nbsp;<span class="ident" id="7966686">done</span>&nbsp;<span class="keyword" id="7966691">chan</span><span class="op" id="7966695">&lt;-</span>&nbsp;<span class="builtintype" id="7966698">int</span><span class="op" id="7966701">)</span>&nbsp;<span class="op" id="7966703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966706">c</span><span class="op" id="7966707">,</span>&nbsp;<span class="ident" id="7966709">err</span>&nbsp;<span class="op" id="7966713">:=</span>&nbsp;<span class="ident" id="7966716"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7966728">(</span><span class="ident" id="7966729"><a href="/net/server_test.go.html#7966642">net</a></span><span class="op" id="7966732">,</span>&nbsp;<span class="ident" id="7966734"><a href="/net/server_test.go.html#7966647">laddr</a></span><span class="op" id="7966739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966742">if</span>&nbsp;<span class="ident" id="7966745"><a href="/net/server_test.go.html#7966709">err</a></span>&nbsp;<span class="op" id="7966749">!=</span>&nbsp;<span class="ident" id="7966752">nil</span>&nbsp;<span class="op" id="7966756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966760"><a href="/net/server_test.go.html#7966628">t</a></span><span class="op" id="7966761">.</span><span class="ident" id="7966762">Errorf</span><span class="op" id="7966768">(</span><span class="string" id="7966769">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7966802">,</span>&nbsp;<span class="ident" id="7966804"><a href="/net/server_test.go.html#7966642">net</a></span><span class="op" id="7966807">,</span>&nbsp;<span class="ident" id="7966809"><a href="/net/server_test.go.html#7966647">laddr</a></span><span class="op" id="7966814">,</span>&nbsp;<span class="ident" id="7966816"><a href="/net/server_test.go.html#7966709">err</a></span><span class="op" id="7966819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966823"><a href="/net/server_test.go.html#7966661">listening</a></span>&nbsp;<span class="op" id="7966833">&lt;-</span>&nbsp;<span class="string" id="7966836">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966846"><a href="/net/server_test.go.html#7966686">done</a></span>&nbsp;<span class="op" id="7966851">&lt;-</span>&nbsp;<span class="num" id="7966854">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966858">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966869">defer</span>&nbsp;<span class="ident" id="7966875"><a href="/net/server_test.go.html#7966706">c</a></span><span class="op" id="7966876">.</span><span class="ident" id="7966877">Close</span><span class="op" id="7966882">(</span><span class="op" id="7966883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966886"><a href="/net/server_test.go.html#7966661">listening</a></span>&nbsp;<span class="op" id="7966896">&lt;-</span>&nbsp;<span class="ident" id="7966899"><a href="/net/server_test.go.html#7966706">c</a></span><span class="op" id="7966900">.</span><span class="ident" id="7966901">LocalAddr</span><span class="op" id="7966910">(</span><span class="op" id="7966911">)</span><span class="op" id="7966912">.</span><span class="ident" id="7966913">String</span><span class="op" id="7966919">(</span><span class="op" id="7966920">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966924">buf</span>&nbsp;<span class="op" id="7966928">:=</span>&nbsp;<span class="builtinfunc" id="7966931">make</span><span class="op" id="7966935">(</span><span class="op" id="7966936">[</span><span class="op" id="7966937">]</span><span class="builtintype" id="7966938">byte</span><span class="op" id="7966942">,</span>&nbsp;<span class="num" id="7966944">1024</span><span class="op" id="7966948">)</span><br>
<span class="lineno"></span><span class="ident" id="7966950">run</span><span class="op" id="7966953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966956">for</span>&nbsp;<span class="op" id="7966960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966964"><a href="/net/server_test.go.html#7966706">c</a></span><span class="op" id="7966965">.</span><span class="ident" id="7966966">SetReadDeadline</span><span class="op" id="7966981">(</span><span class="ident" id="7966982"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7966986">.</span><span class="ident" id="7966987">Now</span><span class="op" id="7966990">(</span><span class="op" id="7966991">)</span><span class="op" id="7966992">.</span><span class="ident" id="7966993">Add</span><span class="op" id="7966996">(</span><span class="num" id="7966997">10</span>&nbsp;<span class="op" id="7967000">*</span>&nbsp;<span class="ident" id="7967002"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7967006">.</span><span class="ident" id="7967007">Millisecond</span><span class="op" id="7967018">)</span><span class="op" id="7967019">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967023">n</span><span class="op" id="7967024">,</span>&nbsp;<span class="ident" id="7967026">ra</span><span class="op" id="7967028">,</span>&nbsp;<span class="ident" id="7967030">err</span>&nbsp;<span class="op" id="7967034">:=</span>&nbsp;<span class="ident" id="7967037"><a href="/net/server_test.go.html#7966706">c</a></span><span class="op" id="7967038">.</span><span class="ident" id="7967039">ReadFrom</span><span class="op" id="7967047">(</span><span class="ident" id="7967048"><a href="/net/server_test.go.html#7966924">buf</a></span><span class="op" id="7967051">[</span><span class="num" id="7967052">0</span><span class="op" id="7967053">:</span><span class="op" id="7967054">]</span><span class="op" id="7967055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967059">if</span>&nbsp;<span class="ident" id="7967062">nerr</span><span class="op" id="7967066">,</span>&nbsp;<span class="ident" id="7967068">ok</span>&nbsp;<span class="op" id="7967071">:=</span>&nbsp;<span class="ident" id="7967074"><a href="/net/server_test.go.html#7967030">err</a></span><span class="op" id="7967077">.</span><span class="op" id="7967078">(</span><span class="ident" id="7967079"><a href="/net/net.go.html#1469488">Error</a></span><span class="op" id="7967084">)</span><span class="op" id="7967085">;</span>&nbsp;<span class="ident" id="7967087"><a href="/net/server_test.go.html#7967068">ok</a></span>&nbsp;<span class="op" id="7967090">&amp;&amp;</span>&nbsp;<span class="ident" id="7967093"><a href="/net/server_test.go.html#7967062">nerr</a></span><span class="op" id="7967097">.</span><span class="ident" id="7967098">Timeout</span><span class="op" id="7967105">(</span><span class="op" id="7967106">)</span>&nbsp;<span class="op" id="7967108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967113">select</span>&nbsp;<span class="op" id="7967120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967125">case</span>&nbsp;<span class="ident" id="7967130"><a href="/net/server_test.go.html#7966686">done</a></span>&nbsp;<span class="op" id="7967135">&lt;-</span>&nbsp;<span class="num" id="7967138">1</span><span class="op" id="7967139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967145">break</span>&nbsp;<span class="ident" id="7967151">run</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967158">default</span><span class="op" id="7967165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967171">continue</span>&nbsp;<span class="ident" id="7967180">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967195">if</span>&nbsp;<span class="ident" id="7967198"><a href="/net/server_test.go.html#7967030">err</a></span>&nbsp;<span class="op" id="7967202">!=</span>&nbsp;<span class="ident" id="7967205">nil</span>&nbsp;<span class="op" id="7967209">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967214">break</span>&nbsp;<span class="ident" id="7967220">run</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967230">if</span>&nbsp;<span class="ident" id="7967233">_</span><span class="op" id="7967234">,</span>&nbsp;<span class="ident" id="7967236"><a href="/net/server_test.go.html#7967030">err</a></span>&nbsp;<span class="op" id="7967240">=</span>&nbsp;<span class="ident" id="7967242"><a href="/net/server_test.go.html#7966706">c</a></span><span class="op" id="7967243">.</span><span class="ident" id="7967244">WriteTo</span><span class="op" id="7967251">(</span><span class="ident" id="7967252"><a href="/net/server_test.go.html#7966924">buf</a></span><span class="op" id="7967255">[</span><span class="num" id="7967256">0</span><span class="op" id="7967257">:</span><span class="ident" id="7967258"><a href="/net/server_test.go.html#7967023">n</a></span><span class="op" id="7967259">]</span><span class="op" id="7967260">,</span>&nbsp;<span class="ident" id="7967262"><a href="/net/server_test.go.html#7967026">ra</a></span><span class="op" id="7967264">)</span><span class="op" id="7967265">;</span>&nbsp;<span class="ident" id="7967267"><a href="/net/server_test.go.html#7967030">err</a></span>&nbsp;<span class="op" id="7967271">!=</span>&nbsp;<span class="ident" id="7967274">nil</span>&nbsp;<span class="op" id="7967278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967283"><a href="/net/server_test.go.html#7966628">t</a></span><span class="op" id="7967284">.</span><span class="ident" id="7967285">Errorf</span><span class="op" id="7967291">(</span><span class="string" id="7967292">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7967316">,</span>&nbsp;<span class="ident" id="7967318"><a href="/net/server_test.go.html#7967026">ra</a></span><span class="op" id="7967320">,</span>&nbsp;<span class="ident" id="7967322"><a href="/net/server_test.go.html#7967030">err</a></span><span class="op" id="7967325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967330">break</span>&nbsp;<span class="ident" id="7967336">run</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967348"><a href="/net/server_test.go.html#7966686">done</a></span>&nbsp;<span class="op" id="7967353">&lt;-</span>&nbsp;<span class="num" id="7967356">1</span><br>
<span class="lineno"></span><span class="op" id="7967358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">395</span><span class="keyword" id="7967361">func</span>&nbsp;<span class="ident" id="7967366">runDatagramConnClient</span><span class="op" id="7967387">(</span><span class="ident" id="7967388">t</span>&nbsp;<span class="op" id="7967390">*</span><span class="ident" id="7967391"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7967398">.</span><span class="ident" id="7967399">T</span><span class="op" id="7967400">,</span>&nbsp;<span class="ident" id="7967402">net</span><span class="op" id="7967405">,</span>&nbsp;<span class="ident" id="7967407">laddr</span><span class="op" id="7967412">,</span>&nbsp;<span class="ident" id="7967414">taddr</span>&nbsp;<span class="builtintype" id="7967420">string</span><span class="op" id="7967426">,</span>&nbsp;<span class="ident" id="7967428">isEmpty</span>&nbsp;<span class="builtintype" id="7967436">bool</span><span class="op" id="7967440">)</span>&nbsp;<span class="op" id="7967442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967445">var</span>&nbsp;<span class="ident" id="7967449">c</span>&nbsp;<span class="ident" id="7967451"><a href="/net/net.go.html#1465335">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967457">var</span>&nbsp;<span class="ident" id="7967461">err</span>&nbsp;<span class="builtintype" id="7967465">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967472">switch</span>&nbsp;<span class="ident" id="7967479"><a href="/net/server_test.go.html#7967402">net</a></span>&nbsp;<span class="op" id="7967483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967486">case</span>&nbsp;<span class="string" id="7967491">&#34;udp&#34;</span><span class="op" id="7967496">,</span>&nbsp;<span class="string" id="7967498">&#34;udp4&#34;</span><span class="op" id="7967504">,</span>&nbsp;<span class="string" id="7967506">&#34;udp6&#34;</span><span class="op" id="7967512">:</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967516"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7967517">,</span>&nbsp;<span class="ident" id="7967519"><a href="/net/server_test.go.html#7967461">err</a></span>&nbsp;<span class="op" id="7967523">=</span>&nbsp;<span class="ident" id="7967525"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="7967529">(</span><span class="ident" id="7967530"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967533">,</span>&nbsp;<span class="ident" id="7967535"><a href="/net/server_test.go.html#7967414">taddr</a></span><span class="op" id="7967540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967544">if</span>&nbsp;<span class="ident" id="7967547"><a href="/net/server_test.go.html#7967461">err</a></span>&nbsp;<span class="op" id="7967551">!=</span>&nbsp;<span class="ident" id="7967554">nil</span>&nbsp;<span class="op" id="7967558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967563"><a href="/net/server_test.go.html#7967388">t</a></span><span class="op" id="7967564">.</span><span class="ident" id="7967565">Fatalf</span><span class="op" id="7967571">(</span><span class="string" id="7967572">&#34;Dial(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7967597">,</span>&nbsp;<span class="ident" id="7967599"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967602">,</span>&nbsp;<span class="ident" id="7967604"><a href="/net/server_test.go.html#7967414">taddr</a></span><span class="op" id="7967609">,</span>&nbsp;<span class="ident" id="7967611"><a href="/net/server_test.go.html#7967461">err</a></span><span class="op" id="7967614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967621">case</span>&nbsp;<span class="string" id="7967626">&#34;unixgram&#34;</span><span class="op" id="7967636">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967640"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7967641">,</span>&nbsp;<span class="ident" id="7967643"><a href="/net/server_test.go.html#7967461">err</a></span>&nbsp;<span class="op" id="7967647">=</span>&nbsp;<span class="ident" id="7967649"><a href="/net/unixsock_posix.go.html#1533427">DialUnix</a></span><span class="op" id="7967657">(</span><span class="ident" id="7967658"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967661">,</span>&nbsp;<span class="op" id="7967663">&amp;</span><span class="ident" id="7967664"><a href="/net/unixsock.go.html#1526419">UnixAddr</a></span><span class="op" id="7967672">{</span><span class="ident" id="7967673">Name</span><span class="op" id="7967677">:</span>&nbsp;<span class="ident" id="7967679"><a href="/net/server_test.go.html#7967407">laddr</a></span><span class="op" id="7967684">,</span>&nbsp;<span class="ident" id="7967686">Net</span><span class="op" id="7967689">:</span>&nbsp;<span class="ident" id="7967691"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967694">}</span><span class="op" id="7967695">,</span>&nbsp;<span class="op" id="7967697">&amp;</span><span class="ident" id="7967698"><a href="/net/unixsock.go.html#1526419">UnixAddr</a></span><span class="op" id="7967706">{</span><span class="ident" id="7967707">Name</span><span class="op" id="7967711">:</span>&nbsp;<span class="ident" id="7967713"><a href="/net/server_test.go.html#7967414">taddr</a></span><span class="op" id="7967718">,</span>&nbsp;<span class="ident" id="7967720">Net</span><span class="op" id="7967723">:</span>&nbsp;<span class="ident" id="7967725"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967728">}</span><span class="op" id="7967729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967733">if</span>&nbsp;<span class="ident" id="7967736"><a href="/net/server_test.go.html#7967461">err</a></span>&nbsp;<span class="op" id="7967740">!=</span>&nbsp;<span class="ident" id="7967743">nil</span>&nbsp;<span class="op" id="7967747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967752"><a href="/net/server_test.go.html#7967388">t</a></span><span class="op" id="7967753">.</span><span class="ident" id="7967754">Fatalf</span><span class="op" id="7967760">(</span><span class="string" id="7967761">&#34;DialUnix(%q,&nbsp;{%q,&nbsp;%q})&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7967796">,</span>&nbsp;<span class="ident" id="7967798"><a href="/net/server_test.go.html#7967402">net</a></span><span class="op" id="7967801">,</span>&nbsp;<span class="ident" id="7967803"><a href="/net/server_test.go.html#7967407">laddr</a></span><span class="op" id="7967808">,</span>&nbsp;<span class="ident" id="7967810"><a href="/net/server_test.go.html#7967414">taddr</a></span><span class="op" id="7967815">,</span>&nbsp;<span class="ident" id="7967817"><a href="/net/server_test.go.html#7967461">err</a></span><span class="op" id="7967820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967827">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967830">defer</span>&nbsp;<span class="ident" id="7967836"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7967837">.</span><span class="ident" id="7967838">Close</span><span class="op" id="7967843">(</span><span class="op" id="7967844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967847"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7967848">.</span><span class="ident" id="7967849">SetReadDeadline</span><span class="op" id="7967864">(</span><span class="ident" id="7967865"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7967869">.</span><span class="ident" id="7967870">Now</span><span class="op" id="7967873">(</span><span class="op" id="7967874">)</span><span class="op" id="7967875">.</span><span class="ident" id="7967876">Add</span><span class="op" id="7967879">(</span><span class="num" id="7967880">1</span>&nbsp;<span class="op" id="7967882">*</span>&nbsp;<span class="ident" id="7967884"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7967888">.</span><span class="ident" id="7967889">Second</span><span class="op" id="7967895">)</span><span class="op" id="7967896">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967900">var</span>&nbsp;<span class="ident" id="7967904">wb</span>&nbsp;<span class="op" id="7967907">[</span><span class="op" id="7967908">]</span><span class="builtintype" id="7967909">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967915">if</span>&nbsp;<span class="op" id="7967918">!</span><span class="ident" id="7967919"><a href="/net/server_test.go.html#7967428">isEmpty</a></span>&nbsp;<span class="op" id="7967927">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967931"><a href="/net/server_test.go.html#7967904">wb</a></span>&nbsp;<span class="op" id="7967934">=</span>&nbsp;<span class="op" id="7967936">[</span><span class="op" id="7967937">]</span><span class="builtintype" id="7967938">byte</span><span class="op" id="7967942">(</span><span class="string" id="7967943">&#34;DatagramConnClient&nbsp;by&nbsp;Dial\n&#34;</span><span class="op" id="7967973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967979">if</span>&nbsp;<span class="ident" id="7967982">n</span><span class="op" id="7967983">,</span>&nbsp;<span class="ident" id="7967985">err</span>&nbsp;<span class="op" id="7967989">:=</span>&nbsp;<span class="ident" id="7967992"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7967993">.</span><span class="ident" id="7967994">Write</span><span class="op" id="7967999">(</span><span class="ident" id="7968000"><a href="/net/server_test.go.html#7967904">wb</a></span><span class="op" id="7968002">[</span><span class="num" id="7968003">0</span><span class="op" id="7968004">:</span><span class="op" id="7968005">]</span><span class="op" id="7968006">)</span><span class="op" id="7968007">;</span>&nbsp;<span class="ident" id="7968009"><a href="/net/server_test.go.html#7967985">err</a></span>&nbsp;<span class="op" id="7968013">!=</span>&nbsp;<span class="ident" id="7968016">nil</span>&nbsp;<span class="op" id="7968020">||</span>&nbsp;<span class="ident" id="7968023"><a href="/net/server_test.go.html#7967982">n</a></span>&nbsp;<span class="op" id="7968025">!=</span>&nbsp;<span class="builtinfunc" id="7968028">len</span><span class="op" id="7968031">(</span><span class="ident" id="7968032"><a href="/net/server_test.go.html#7967904">wb</a></span><span class="op" id="7968034">)</span>&nbsp;<span class="op" id="7968036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968040"><a href="/net/server_test.go.html#7967388">t</a></span><span class="op" id="7968041">.</span><span class="ident" id="7968042">Fatalf</span><span class="op" id="7968048">(</span><span class="string" id="7968049">&#34;Write&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7968087">,</span>&nbsp;<span class="ident" id="7968089"><a href="/net/server_test.go.html#7967982">n</a></span><span class="op" id="7968090">,</span>&nbsp;<span class="ident" id="7968092"><a href="/net/server_test.go.html#7967985">err</a></span><span class="op" id="7968095">,</span>&nbsp;<span class="builtinfunc" id="7968097">len</span><span class="op" id="7968100">(</span><span class="ident" id="7968101"><a href="/net/server_test.go.html#7967904">wb</a></span><span class="op" id="7968103">)</span><span class="op" id="7968104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968107">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968111">rb</span>&nbsp;<span class="op" id="7968114">:=</span>&nbsp;<span class="builtinfunc" id="7968117">make</span><span class="op" id="7968121">(</span><span class="op" id="7968122">[</span><span class="op" id="7968123">]</span><span class="builtintype" id="7968124">byte</span><span class="op" id="7968128">,</span>&nbsp;<span class="num" id="7968130">1024</span><span class="op" id="7968134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968137">if</span>&nbsp;<span class="ident" id="7968140">n</span><span class="op" id="7968141">,</span>&nbsp;<span class="ident" id="7968143">err</span>&nbsp;<span class="op" id="7968147">:=</span>&nbsp;<span class="ident" id="7968150"><a href="/net/server_test.go.html#7967449">c</a></span><span class="op" id="7968151">.</span><span class="ident" id="7968152">Read</span><span class="op" id="7968156">(</span><span class="ident" id="7968157"><a href="/net/server_test.go.html#7968111">rb</a></span><span class="op" id="7968159">[</span><span class="num" id="7968160">0</span><span class="op" id="7968161">:</span><span class="op" id="7968162">]</span><span class="op" id="7968163">)</span><span class="op" id="7968164">;</span>&nbsp;<span class="ident" id="7968166"><a href="/net/server_test.go.html#7968143">err</a></span>&nbsp;<span class="op" id="7968170">!=</span>&nbsp;<span class="ident" id="7968173">nil</span>&nbsp;<span class="op" id="7968177">||</span>&nbsp;<span class="ident" id="7968180"><a href="/net/server_test.go.html#7968140">n</a></span>&nbsp;<span class="op" id="7968182">!=</span>&nbsp;<span class="builtinfunc" id="7968185">len</span><span class="op" id="7968188">(</span><span class="ident" id="7968189"><a href="/net/server_test.go.html#7967904">wb</a></span><span class="op" id="7968191">)</span>&nbsp;<span class="op" id="7968193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968197"><a href="/net/server_test.go.html#7967388">t</a></span><span class="op" id="7968198">.</span><span class="ident" id="7968199">Fatalf</span><span class="op" id="7968205">(</span><span class="string" id="7968206">&#34;Read&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7968243">,</span>&nbsp;<span class="ident" id="7968245"><a href="/net/server_test.go.html#7968140">n</a></span><span class="op" id="7968246">,</span>&nbsp;<span class="ident" id="7968248"><a href="/net/server_test.go.html#7968143">err</a></span><span class="op" id="7968251">,</span>&nbsp;<span class="builtinfunc" id="7968253">len</span><span class="op" id="7968256">(</span><span class="ident" id="7968257"><a href="/net/server_test.go.html#7967904">wb</a></span><span class="op" id="7968259">)</span><span class="op" id="7968260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968263">}</span><br>
<span class="lineno">425</span><span class="op" id="7968265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7968268">func</span>&nbsp;<span class="ident" id="7968273">runDatagramPacketConnClient</span><span class="op" id="7968300">(</span><span class="ident" id="7968301">t</span>&nbsp;<span class="op" id="7968303">*</span><span class="ident" id="7968304"><a href="/net/server_test.go.html#7955149">testing</a></span><span class="op" id="7968311">.</span><span class="ident" id="7968312">T</span><span class="op" id="7968313">,</span>&nbsp;<span class="ident" id="7968315">net</span><span class="op" id="7968318">,</span>&nbsp;<span class="ident" id="7968320">laddr</span><span class="op" id="7968325">,</span>&nbsp;<span class="ident" id="7968327">taddr</span>&nbsp;<span class="builtintype" id="7968333">string</span><span class="op" id="7968339">,</span>&nbsp;<span class="ident" id="7968341">isEmpty</span>&nbsp;<span class="builtintype" id="7968349">bool</span><span class="op" id="7968353">)</span>&nbsp;<span class="op" id="7968355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968358">var</span>&nbsp;<span class="ident" id="7968362">ra</span>&nbsp;<span class="ident" id="7968365"><a href="/net/net.go.html#1465097">Addr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968371">var</span>&nbsp;<span class="ident" id="7968375">err</span>&nbsp;<span class="builtintype" id="7968379">error</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968386">switch</span>&nbsp;<span class="ident" id="7968393"><a href="/net/server_test.go.html#7968315">net</a></span>&nbsp;<span class="op" id="7968397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968400">case</span>&nbsp;<span class="string" id="7968405">&#34;udp&#34;</span><span class="op" id="7968410">,</span>&nbsp;<span class="string" id="7968412">&#34;udp4&#34;</span><span class="op" id="7968418">,</span>&nbsp;<span class="string" id="7968420">&#34;udp6&#34;</span><span class="op" id="7968426">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968430"><a href="/net/server_test.go.html#7968362">ra</a></span><span class="op" id="7968432">,</span>&nbsp;<span class="ident" id="7968434"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968438">=</span>&nbsp;<span class="ident" id="7968440"><a href="/net/udpsock.go.html#1517608">ResolveUDPAddr</a></span><span class="op" id="7968454">(</span><span class="ident" id="7968455"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968458">,</span>&nbsp;<span class="ident" id="7968460"><a href="/net/server_test.go.html#7968327">taddr</a></span><span class="op" id="7968465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968469">if</span>&nbsp;<span class="ident" id="7968472"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968476">!=</span>&nbsp;<span class="ident" id="7968479">nil</span>&nbsp;<span class="op" id="7968483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968488"><a href="/net/server_test.go.html#7968301">t</a></span><span class="op" id="7968489">.</span><span class="ident" id="7968490">Fatalf</span><span class="op" id="7968496">(</span><span class="string" id="7968497">&#34;ResolveUDPAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7968532">,</span>&nbsp;<span class="ident" id="7968534"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968537">,</span>&nbsp;<span class="ident" id="7968539"><a href="/net/server_test.go.html#7968327">taddr</a></span><span class="op" id="7968544">,</span>&nbsp;<span class="ident" id="7968546"><a href="/net/server_test.go.html#7968375">err</a></span><span class="op" id="7968549">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968556">case</span>&nbsp;<span class="string" id="7968561">&#34;unixgram&#34;</span><span class="op" id="7968571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968575"><a href="/net/server_test.go.html#7968362">ra</a></span><span class="op" id="7968577">,</span>&nbsp;<span class="ident" id="7968579"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968583">=</span>&nbsp;<span class="ident" id="7968585"><a href="/net/unixsock.go.html#1526926">ResolveUnixAddr</a></span><span class="op" id="7968600">(</span><span class="ident" id="7968601"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968604">,</span>&nbsp;<span class="ident" id="7968606"><a href="/net/server_test.go.html#7968327">taddr</a></span><span class="op" id="7968611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968615">if</span>&nbsp;<span class="ident" id="7968618"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968622">!=</span>&nbsp;<span class="ident" id="7968625">nil</span>&nbsp;<span class="op" id="7968629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968634"><a href="/net/server_test.go.html#7968301">t</a></span><span class="op" id="7968635">.</span><span class="ident" id="7968636">Fatalf</span><span class="op" id="7968642">(</span><span class="string" id="7968643">&#34;ResolveUxixAddr(%q,&nbsp;%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7968679">,</span>&nbsp;<span class="ident" id="7968681"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968684">,</span>&nbsp;<span class="ident" id="7968686"><a href="/net/server_test.go.html#7968327">taddr</a></span><span class="op" id="7968691">,</span>&nbsp;<span class="ident" id="7968693"><a href="/net/server_test.go.html#7968375">err</a></span><span class="op" id="7968696">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968706">c</span><span class="op" id="7968707">,</span>&nbsp;<span class="ident" id="7968709"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968713">:=</span>&nbsp;<span class="ident" id="7968716"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7968728">(</span><span class="ident" id="7968729"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968732">,</span>&nbsp;<span class="ident" id="7968734"><a href="/net/server_test.go.html#7968320">laddr</a></span><span class="op" id="7968739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968742">if</span>&nbsp;<span class="ident" id="7968745"><a href="/net/server_test.go.html#7968375">err</a></span>&nbsp;<span class="op" id="7968749">!=</span>&nbsp;<span class="ident" id="7968752">nil</span>&nbsp;<span class="op" id="7968756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968760"><a href="/net/server_test.go.html#7968301">t</a></span><span class="op" id="7968761">.</span><span class="ident" id="7968762">Fatalf</span><span class="op" id="7968768">(</span><span class="string" id="7968769">&#34;ListenPacket(%q,&nbsp;%q)&nbsp;faild:&nbsp;%v&#34;</span><span class="op" id="7968801">,</span>&nbsp;<span class="ident" id="7968803"><a href="/net/server_test.go.html#7968315">net</a></span><span class="op" id="7968806">,</span>&nbsp;<span class="ident" id="7968808"><a href="/net/server_test.go.html#7968320">laddr</a></span><span class="op" id="7968813">,</span>&nbsp;<span class="ident" id="7968815"><a href="/net/server_test.go.html#7968375">err</a></span><span class="op" id="7968818">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968824">defer</span>&nbsp;<span class="ident" id="7968830"><a href="/net/server_test.go.html#7968706">c</a></span><span class="op" id="7968831">.</span><span class="ident" id="7968832">Close</span><span class="op" id="7968837">(</span><span class="op" id="7968838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968841"><a href="/net/server_test.go.html#7968706">c</a></span><span class="op" id="7968842">.</span><span class="ident" id="7968843">SetReadDeadline</span><span class="op" id="7968858">(</span><span class="ident" id="7968859"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7968863">.</span><span class="ident" id="7968864">Now</span><span class="op" id="7968867">(</span><span class="op" id="7968868">)</span><span class="op" id="7968869">.</span><span class="ident" id="7968870">Add</span><span class="op" id="7968873">(</span><span class="num" id="7968874">1</span>&nbsp;<span class="op" id="7968876">*</span>&nbsp;<span class="ident" id="7968878"><a href="/net/server_test.go.html#7955160">time</a></span><span class="op" id="7968882">.</span><span class="ident" id="7968883">Second</span><span class="op" id="7968889">)</span><span class="op" id="7968890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968894">var</span>&nbsp;<span class="ident" id="7968898">wb</span>&nbsp;<span class="op" id="7968901">[</span><span class="op" id="7968902">]</span><span class="builtintype" id="7968903">byte</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968909">if</span>&nbsp;<span class="op" id="7968912">!</span><span class="ident" id="7968913"><a href="/net/server_test.go.html#7968341">isEmpty</a></span>&nbsp;<span class="op" id="7968921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968925"><a href="/net/server_test.go.html#7968898">wb</a></span>&nbsp;<span class="op" id="7968928">=</span>&nbsp;<span class="op" id="7968930">[</span><span class="op" id="7968931">]</span><span class="builtintype" id="7968932">byte</span><span class="op" id="7968936">(</span><span class="string" id="7968937">&#34;DatagramPacketConnClient&nbsp;by&nbsp;ListenPacket\n&#34;</span><span class="op" id="7968981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968987">if</span>&nbsp;<span class="ident" id="7968990">n</span><span class="op" id="7968991">,</span>&nbsp;<span class="ident" id="7968993">err</span>&nbsp;<span class="op" id="7968997">:=</span>&nbsp;<span class="ident" id="7969000"><a href="/net/server_test.go.html#7968706">c</a></span><span class="op" id="7969001">.</span><span class="ident" id="7969002">WriteTo</span><span class="op" id="7969009">(</span><span class="ident" id="7969010"><a href="/net/server_test.go.html#7968898">wb</a></span><span class="op" id="7969012">[</span><span class="num" id="7969013">0</span><span class="op" id="7969014">:</span><span class="op" id="7969015">]</span><span class="op" id="7969016">,</span>&nbsp;<span class="ident" id="7969018"><a href="/net/server_test.go.html#7968362">ra</a></span><span class="op" id="7969020">)</span><span class="op" id="7969021">;</span>&nbsp;<span class="ident" id="7969023"><a href="/net/server_test.go.html#7968993">err</a></span>&nbsp;<span class="op" id="7969027">!=</span>&nbsp;<span class="ident" id="7969030">nil</span>&nbsp;<span class="op" id="7969034">||</span>&nbsp;<span class="ident" id="7969037"><a href="/net/server_test.go.html#7968990">n</a></span>&nbsp;<span class="op" id="7969039">!=</span>&nbsp;<span class="builtinfunc" id="7969042">len</span><span class="op" id="7969045">(</span><span class="ident" id="7969046"><a href="/net/server_test.go.html#7968898">wb</a></span><span class="op" id="7969048">)</span>&nbsp;<span class="op" id="7969050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969054"><a href="/net/server_test.go.html#7968301">t</a></span><span class="op" id="7969055">.</span><span class="ident" id="7969056">Fatalf</span><span class="op" id="7969062">(</span><span class="string" id="7969063">&#34;WriteTo(%v)&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7969107">,</span>&nbsp;<span class="ident" id="7969109"><a href="/net/server_test.go.html#7968362">ra</a></span><span class="op" id="7969111">,</span>&nbsp;<span class="ident" id="7969113"><a href="/net/server_test.go.html#7968990">n</a></span><span class="op" id="7969114">,</span>&nbsp;<span class="ident" id="7969116"><a href="/net/server_test.go.html#7968993">err</a></span><span class="op" id="7969119">,</span>&nbsp;<span class="builtinfunc" id="7969121">len</span><span class="op" id="7969124">(</span><span class="ident" id="7969125"><a href="/net/server_test.go.html#7968898">wb</a></span><span class="op" id="7969127">)</span><span class="op" id="7969128">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969135">rb</span>&nbsp;<span class="op" id="7969138">:=</span>&nbsp;<span class="builtinfunc" id="7969141">make</span><span class="op" id="7969145">(</span><span class="op" id="7969146">[</span><span class="op" id="7969147">]</span><span class="builtintype" id="7969148">byte</span><span class="op" id="7969152">,</span>&nbsp;<span class="num" id="7969154">1024</span><span class="op" id="7969158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969161">if</span>&nbsp;<span class="ident" id="7969164">n</span><span class="op" id="7969165">,</span>&nbsp;<span class="ident" id="7969167">_</span><span class="op" id="7969168">,</span>&nbsp;<span class="ident" id="7969170">err</span>&nbsp;<span class="op" id="7969174">:=</span>&nbsp;<span class="ident" id="7969177"><a href="/net/server_test.go.html#7968706">c</a></span><span class="op" id="7969178">.</span><span class="ident" id="7969179">ReadFrom</span><span class="op" id="7969187">(</span><span class="ident" id="7969188"><a href="/net/server_test.go.html#7969135">rb</a></span><span class="op" id="7969190">[</span><span class="num" id="7969191">0</span><span class="op" id="7969192">:</span><span class="op" id="7969193">]</span><span class="op" id="7969194">)</span><span class="op" id="7969195">;</span>&nbsp;<span class="ident" id="7969197"><a href="/net/server_test.go.html#7969170">err</a></span>&nbsp;<span class="op" id="7969201">!=</span>&nbsp;<span class="ident" id="7969204">nil</span>&nbsp;<span class="op" id="7969208">||</span>&nbsp;<span class="ident" id="7969211"><a href="/net/server_test.go.html#7969164">n</a></span>&nbsp;<span class="op" id="7969213">!=</span>&nbsp;<span class="builtinfunc" id="7969216">len</span><span class="op" id="7969219">(</span><span class="ident" id="7969220"><a href="/net/server_test.go.html#7968898">wb</a></span><span class="op" id="7969222">)</span>&nbsp;<span class="op" id="7969224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969228"><a href="/net/server_test.go.html#7968301">t</a></span><span class="op" id="7969229">.</span><span class="ident" id="7969230">Fatalf</span><span class="op" id="7969236">(</span><span class="string" id="7969237">&#34;ReadFrom&nbsp;failed:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;&lt;nil&gt;&#34;</span><span class="op" id="7969278">,</span>&nbsp;<span class="ident" id="7969280"><a href="/net/server_test.go.html#7969164">n</a></span><span class="op" id="7969281">,</span>&nbsp;<span class="ident" id="7969283"><a href="/net/server_test.go.html#7969170">err</a></span><span class="op" id="7969286">,</span>&nbsp;<span class="builtinfunc" id="7969288">len</span><span class="op" id="7969291">(</span><span class="ident" id="7969292"><a href="/net/server_test.go.html#7968898">wb</a></span><span class="op" id="7969294">)</span><span class="op" id="7969295">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969298">}</span><br>
<span class="lineno"></span><span class="op" id="7969300">}</span>
</div>
</body>
</html>
