<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7506084">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7506139">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7506193">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7506244">package</span>&nbsp;<span class="ident" id="7506252">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7506257">import</span>&nbsp;<span class="op" id="7506264">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506267">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506276">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506290">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506297">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506303">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506316">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506322">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506333">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506344">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506355">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7506362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7506365">type</span>&nbsp;<span class="ident" id="7506370">untarTest</span>&nbsp;<span class="keyword" id="7506380">struct</span>&nbsp;<span class="op" id="7506387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506390">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7506398">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506406">headers</span>&nbsp;<span class="op" id="7506414">[</span><span class="op" id="7506415">]</span><span class="op" id="7506416">*</span><span class="ident" id="7506417">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506425">cksums</span>&nbsp;&nbsp;<span class="op" id="7506433">[</span><span class="op" id="7506434">]</span><span class="builtintype" id="7506435">string</span><br>
<span class="lineno"></span><span class="op" id="7506442">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7506445">var</span>&nbsp;<span class="ident" id="7506449">gnuTarTest</span>&nbsp;<span class="op" id="7506460">=</span>&nbsp;<span class="op" id="7506462">&amp;</span><span class="ident" id="7506463">untarTest</span><span class="op" id="7506472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506475">file</span><span class="op" id="7506479">:</span>&nbsp;<span class="string" id="7506481">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7506499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506502">headers</span><span class="op" id="7506509">:</span>&nbsp;<span class="op" id="7506511">[</span><span class="op" id="7506512">]</span><span class="op" id="7506513">*</span><span class="ident" id="7506514">Header</span><span class="op" id="7506520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506524">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506529">Name</span><span class="op" id="7506533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506539">&#34;small.txt&#34;</span><span class="op" id="7506550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506555">Mode</span><span class="op" id="7506559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506565">0640</span><span class="op" id="7506569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506574">Uid</span><span class="op" id="7506577">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506584">73025</span><span class="op" id="7506589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506594">Gid</span><span class="op" id="7506597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506604">5000</span><span class="op" id="7506608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506613">Size</span><span class="op" id="7506617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506623">5</span><span class="op" id="7506624">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506629">ModTime</span><span class="op" id="7506636">:</span>&nbsp;&nbsp;<span class="ident" id="7506639">time</span><span class="op" id="7506643">.</span><span class="ident" id="7506644">Unix</span><span class="op" id="7506648">(</span><span class="num" id="7506649">1244428340</span><span class="op" id="7506659">,</span>&nbsp;<span class="num" id="7506661">0</span><span class="op" id="7506662">)</span><span class="op" id="7506663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506668">Typeflag</span><span class="op" id="7506676">:</span>&nbsp;<span class="string" id="7506678">&#39;0&#39;</span><span class="op" id="7506681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506686">Uname</span><span class="op" id="7506691">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506696">&#34;dsymonds&#34;</span><span class="op" id="7506706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506711">Gname</span><span class="op" id="7506716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506721">&#34;eng&#34;</span><span class="op" id="7506726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506730">}</span><span class="op" id="7506731">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506740">Name</span><span class="op" id="7506744">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506750">&#34;small2.txt&#34;</span><span class="op" id="7506762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506767">Mode</span><span class="op" id="7506771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506777">0640</span><span class="op" id="7506781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506786">Uid</span><span class="op" id="7506789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506796">73025</span><span class="op" id="7506801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506806">Gid</span><span class="op" id="7506809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506816">5000</span><span class="op" id="7506820">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506825">Size</span><span class="op" id="7506829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7506835">11</span><span class="op" id="7506837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506842">ModTime</span><span class="op" id="7506849">:</span>&nbsp;&nbsp;<span class="ident" id="7506852">time</span><span class="op" id="7506856">.</span><span class="ident" id="7506857">Unix</span><span class="op" id="7506861">(</span><span class="num" id="7506862">1244436044</span><span class="op" id="7506872">,</span>&nbsp;<span class="num" id="7506874">0</span><span class="op" id="7506875">)</span><span class="op" id="7506876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506881">Typeflag</span><span class="op" id="7506889">:</span>&nbsp;<span class="string" id="7506891">&#39;0&#39;</span><span class="op" id="7506894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506899">Uname</span><span class="op" id="7506904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506909">&#34;dsymonds&#34;</span><span class="op" id="7506919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506924">Gname</span><span class="op" id="7506929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7506934">&#34;eng&#34;</span><span class="op" id="7506939">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506943">}</span><span class="op" id="7506944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7506947">}</span><span class="op" id="7506948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7506951">cksums</span><span class="op" id="7506957">:</span>&nbsp;<span class="op" id="7506959">[</span><span class="op" id="7506960">]</span><span class="builtintype" id="7506961">string</span><span class="op" id="7506967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7506971">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7507005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7507009">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7507043">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507046">}</span><span class="op" id="7507047">,</span><br>
<span class="lineno"></span><span class="op" id="7507049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7507052">var</span>&nbsp;<span class="ident" id="7507056">sparseTarTest</span>&nbsp;<span class="op" id="7507070">=</span>&nbsp;<span class="op" id="7507072">&amp;</span><span class="ident" id="7507073">untarTest</span><span class="op" id="7507082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507085">file</span><span class="op" id="7507089">:</span>&nbsp;<span class="string" id="7507091">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7507120">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507123">headers</span><span class="op" id="7507130">:</span>&nbsp;<span class="op" id="7507132">[</span><span class="op" id="7507133">]</span><span class="op" id="7507134">*</span><span class="ident" id="7507135">Header</span><span class="op" id="7507141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507150">Name</span><span class="op" id="7507154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507160">&#34;sparse-gnu&#34;</span><span class="op" id="7507172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507177">Mode</span><span class="op" id="7507181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507187">420</span><span class="op" id="7507190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507195">Uid</span><span class="op" id="7507198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507205">1000</span><span class="op" id="7507209">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507214">Gid</span><span class="op" id="7507217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507224">1000</span><span class="op" id="7507228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507233">Size</span><span class="op" id="7507237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507243">200</span><span class="op" id="7507246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507251">ModTime</span><span class="op" id="7507258">:</span>&nbsp;&nbsp;<span class="ident" id="7507261">time</span><span class="op" id="7507265">.</span><span class="ident" id="7507266">Unix</span><span class="op" id="7507270">(</span><span class="num" id="7507271">1392395740</span><span class="op" id="7507281">,</span>&nbsp;<span class="num" id="7507283">0</span><span class="op" id="7507284">)</span><span class="op" id="7507285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507290">Typeflag</span><span class="op" id="7507298">:</span>&nbsp;<span class="num" id="7507300">0x53</span><span class="op" id="7507304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507309">Linkname</span><span class="op" id="7507317">:</span>&nbsp;<span class="string" id="7507319">&#34;&#34;</span><span class="op" id="7507321">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507326">Uname</span><span class="op" id="7507331">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507336">&#34;david&#34;</span><span class="op" id="7507343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507348">Gname</span><span class="op" id="7507353">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507358">&#34;david&#34;</span><span class="op" id="7507365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507370">Devmajor</span><span class="op" id="7507378">:</span>&nbsp;<span class="num" id="7507380">0</span><span class="op" id="7507381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507386">Devminor</span><span class="op" id="7507394">:</span>&nbsp;<span class="num" id="7507396">0</span><span class="op" id="7507397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507401">}</span><span class="op" id="7507402">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507411">Name</span><span class="op" id="7507415">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507421">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7507439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507444">Mode</span><span class="op" id="7507448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507454">420</span><span class="op" id="7507457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507462">Uid</span><span class="op" id="7507465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507472">1000</span><span class="op" id="7507476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507481">Gid</span><span class="op" id="7507484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507491">1000</span><span class="op" id="7507495">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507500">Size</span><span class="op" id="7507504">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507510">200</span><span class="op" id="7507513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507518">ModTime</span><span class="op" id="7507525">:</span>&nbsp;&nbsp;<span class="ident" id="7507528">time</span><span class="op" id="7507532">.</span><span class="ident" id="7507533">Unix</span><span class="op" id="7507537">(</span><span class="num" id="7507538">1392342187</span><span class="op" id="7507548">,</span>&nbsp;<span class="num" id="7507550">0</span><span class="op" id="7507551">)</span><span class="op" id="7507552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507557">Typeflag</span><span class="op" id="7507565">:</span>&nbsp;<span class="num" id="7507567">0x30</span><span class="op" id="7507571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507576">Linkname</span><span class="op" id="7507584">:</span>&nbsp;<span class="string" id="7507586">&#34;&#34;</span><span class="op" id="7507588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507593">Uname</span><span class="op" id="7507598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507603">&#34;david&#34;</span><span class="op" id="7507610">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507615">Gname</span><span class="op" id="7507620">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507625">&#34;david&#34;</span><span class="op" id="7507632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507637">Devmajor</span><span class="op" id="7507645">:</span>&nbsp;<span class="num" id="7507647">0</span><span class="op" id="7507648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507653">Devminor</span><span class="op" id="7507661">:</span>&nbsp;<span class="num" id="7507663">0</span><span class="op" id="7507664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507668">}</span><span class="op" id="7507669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507673">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507678">Name</span><span class="op" id="7507682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507688">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7507706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507711">Mode</span><span class="op" id="7507715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507721">420</span><span class="op" id="7507724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507729">Uid</span><span class="op" id="7507732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507739">1000</span><span class="op" id="7507743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507748">Gid</span><span class="op" id="7507751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507758">1000</span><span class="op" id="7507762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507767">Size</span><span class="op" id="7507771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507777">200</span><span class="op" id="7507780">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507785">ModTime</span><span class="op" id="7507792">:</span>&nbsp;&nbsp;<span class="ident" id="7507795">time</span><span class="op" id="7507799">.</span><span class="ident" id="7507800">Unix</span><span class="op" id="7507804">(</span><span class="num" id="7507805">1392340456</span><span class="op" id="7507815">,</span>&nbsp;<span class="num" id="7507817">0</span><span class="op" id="7507818">)</span><span class="op" id="7507819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507824">Typeflag</span><span class="op" id="7507832">:</span>&nbsp;<span class="num" id="7507834">0x30</span><span class="op" id="7507838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507843">Linkname</span><span class="op" id="7507851">:</span>&nbsp;<span class="string" id="7507853">&#34;&#34;</span><span class="op" id="7507855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507860">Uname</span><span class="op" id="7507865">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507870">&#34;david&#34;</span><span class="op" id="7507877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507882">Gname</span><span class="op" id="7507887">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507892">&#34;david&#34;</span><span class="op" id="7507899">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507904">Devmajor</span><span class="op" id="7507912">:</span>&nbsp;<span class="num" id="7507914">0</span><span class="op" id="7507915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507920">Devminor</span><span class="op" id="7507928">:</span>&nbsp;<span class="num" id="7507930">0</span><span class="op" id="7507931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507935">}</span><span class="op" id="7507936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7507940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507945">Name</span><span class="op" id="7507949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7507955">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7507973">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507978">Mode</span><span class="op" id="7507982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7507988">420</span><span class="op" id="7507991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507996">Uid</span><span class="op" id="7507999">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508006">1000</span><span class="op" id="7508010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508015">Gid</span><span class="op" id="7508018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508025">1000</span><span class="op" id="7508029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508034">Size</span><span class="op" id="7508038">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508044">200</span><span class="op" id="7508047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508052">ModTime</span><span class="op" id="7508059">:</span>&nbsp;&nbsp;<span class="ident" id="7508062">time</span><span class="op" id="7508066">.</span><span class="ident" id="7508067">Unix</span><span class="op" id="7508071">(</span><span class="num" id="7508072">1392337404</span><span class="op" id="7508082">,</span>&nbsp;<span class="num" id="7508084">0</span><span class="op" id="7508085">)</span><span class="op" id="7508086">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508091">Typeflag</span><span class="op" id="7508099">:</span>&nbsp;<span class="num" id="7508101">0x30</span><span class="op" id="7508105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508110">Linkname</span><span class="op" id="7508118">:</span>&nbsp;<span class="string" id="7508120">&#34;&#34;</span><span class="op" id="7508122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508127">Uname</span><span class="op" id="7508132">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508137">&#34;david&#34;</span><span class="op" id="7508144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508149">Gname</span><span class="op" id="7508154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508159">&#34;david&#34;</span><span class="op" id="7508166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508171">Devmajor</span><span class="op" id="7508179">:</span>&nbsp;<span class="num" id="7508181">0</span><span class="op" id="7508182">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508187">Devminor</span><span class="op" id="7508195">:</span>&nbsp;<span class="num" id="7508197">0</span><span class="op" id="7508198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508202">}</span><span class="op" id="7508203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508212">Name</span><span class="op" id="7508216">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508222">&#34;end&#34;</span><span class="op" id="7508227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508232">Mode</span><span class="op" id="7508236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508242">420</span><span class="op" id="7508245">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508250">Uid</span><span class="op" id="7508253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508260">1000</span><span class="op" id="7508264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508269">Gid</span><span class="op" id="7508272">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508279">1000</span><span class="op" id="7508283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508288">Size</span><span class="op" id="7508292">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508298">4</span><span class="op" id="7508299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508304">ModTime</span><span class="op" id="7508311">:</span>&nbsp;&nbsp;<span class="ident" id="7508314">time</span><span class="op" id="7508318">.</span><span class="ident" id="7508319">Unix</span><span class="op" id="7508323">(</span><span class="num" id="7508324">1392398319</span><span class="op" id="7508334">,</span>&nbsp;<span class="num" id="7508336">0</span><span class="op" id="7508337">)</span><span class="op" id="7508338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508343">Typeflag</span><span class="op" id="7508351">:</span>&nbsp;<span class="num" id="7508353">0x30</span><span class="op" id="7508357">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508362">Linkname</span><span class="op" id="7508370">:</span>&nbsp;<span class="string" id="7508372">&#34;&#34;</span><span class="op" id="7508374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508379">Uname</span><span class="op" id="7508384">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508389">&#34;david&#34;</span><span class="op" id="7508396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508401">Gname</span><span class="op" id="7508406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508411">&#34;david&#34;</span><span class="op" id="7508418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508423">Devmajor</span><span class="op" id="7508431">:</span>&nbsp;<span class="num" id="7508433">0</span><span class="op" id="7508434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508439">Devminor</span><span class="op" id="7508447">:</span>&nbsp;<span class="num" id="7508449">0</span><span class="op" id="7508450">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508454">}</span><span class="op" id="7508455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508458">}</span><span class="op" id="7508459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508462">cksums</span><span class="op" id="7508468">:</span>&nbsp;<span class="op" id="7508470">[</span><span class="op" id="7508471">]</span><span class="builtintype" id="7508472">string</span><span class="op" id="7508478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7508482">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7508516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7508520">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7508554">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7508558">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7508592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7508596">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7508630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7508634">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7508668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508671">}</span><span class="op" id="7508672">,</span><br>
<span class="lineno"></span><span class="op" id="7508674">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7508677">var</span>&nbsp;<span class="ident" id="7508681">untarTests</span>&nbsp;<span class="op" id="7508692">=</span>&nbsp;<span class="op" id="7508694">[</span><span class="op" id="7508695">]</span><span class="op" id="7508696">*</span><span class="ident" id="7508697">untarTest</span><span class="op" id="7508706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508709">gnuTarTest</span><span class="op" id="7508719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508722">sparseTarTest</span><span class="op" id="7508735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508738">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508742">file</span><span class="op" id="7508746">:</span>&nbsp;<span class="string" id="7508748">&#34;testdata/star.tar&#34;</span><span class="op" id="7508767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508771">headers</span><span class="op" id="7508778">:</span>&nbsp;<span class="op" id="7508780">[</span><span class="op" id="7508781">]</span><span class="op" id="7508782">*</span><span class="ident" id="7508783">Header</span><span class="op" id="7508789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508800">Name</span><span class="op" id="7508804">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508812">&#34;small.txt&#34;</span><span class="op" id="7508823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508829">Mode</span><span class="op" id="7508833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508841">0640</span><span class="op" id="7508845">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508851">Uid</span><span class="op" id="7508854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508863">73025</span><span class="op" id="7508868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508874">Gid</span><span class="op" id="7508877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508886">5000</span><span class="op" id="7508890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508896">Size</span><span class="op" id="7508900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7508908">5</span><span class="op" id="7508909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508915">ModTime</span><span class="op" id="7508922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7508927">time</span><span class="op" id="7508931">.</span><span class="ident" id="7508932">Unix</span><span class="op" id="7508936">(</span><span class="num" id="7508937">1244592783</span><span class="op" id="7508947">,</span>&nbsp;<span class="num" id="7508949">0</span><span class="op" id="7508950">)</span><span class="op" id="7508951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508957">Typeflag</span><span class="op" id="7508965">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7508969">&#39;0&#39;</span><span class="op" id="7508972">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508978">Uname</span><span class="op" id="7508983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7508990">&#34;dsymonds&#34;</span><span class="op" id="7509000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509006">Gname</span><span class="op" id="7509011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509018">&#34;eng&#34;</span><span class="op" id="7509023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509029">AccessTime</span><span class="op" id="7509039">:</span>&nbsp;<span class="ident" id="7509041">time</span><span class="op" id="7509045">.</span><span class="ident" id="7509046">Unix</span><span class="op" id="7509050">(</span><span class="num" id="7509051">1244592783</span><span class="op" id="7509061">,</span>&nbsp;<span class="num" id="7509063">0</span><span class="op" id="7509064">)</span><span class="op" id="7509065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509071">ChangeTime</span><span class="op" id="7509081">:</span>&nbsp;<span class="ident" id="7509083">time</span><span class="op" id="7509087">.</span><span class="ident" id="7509088">Unix</span><span class="op" id="7509092">(</span><span class="num" id="7509093">1244592783</span><span class="op" id="7509103">,</span>&nbsp;<span class="num" id="7509105">0</span><span class="op" id="7509106">)</span><span class="op" id="7509107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509112">}</span><span class="op" id="7509113">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509124">Name</span><span class="op" id="7509128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509136">&#34;small2.txt&#34;</span><span class="op" id="7509148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509154">Mode</span><span class="op" id="7509158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509166">0640</span><span class="op" id="7509170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509176">Uid</span><span class="op" id="7509179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509188">73025</span><span class="op" id="7509193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509199">Gid</span><span class="op" id="7509202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509211">5000</span><span class="op" id="7509215">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509221">Size</span><span class="op" id="7509225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509233">11</span><span class="op" id="7509235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509241">ModTime</span><span class="op" id="7509248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7509253">time</span><span class="op" id="7509257">.</span><span class="ident" id="7509258">Unix</span><span class="op" id="7509262">(</span><span class="num" id="7509263">1244592783</span><span class="op" id="7509273">,</span>&nbsp;<span class="num" id="7509275">0</span><span class="op" id="7509276">)</span><span class="op" id="7509277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509283">Typeflag</span><span class="op" id="7509291">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7509295">&#39;0&#39;</span><span class="op" id="7509298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509304">Uname</span><span class="op" id="7509309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509316">&#34;dsymonds&#34;</span><span class="op" id="7509326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509332">Gname</span><span class="op" id="7509337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509344">&#34;eng&#34;</span><span class="op" id="7509349">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509355">AccessTime</span><span class="op" id="7509365">:</span>&nbsp;<span class="ident" id="7509367">time</span><span class="op" id="7509371">.</span><span class="ident" id="7509372">Unix</span><span class="op" id="7509376">(</span><span class="num" id="7509377">1244592783</span><span class="op" id="7509387">,</span>&nbsp;<span class="num" id="7509389">0</span><span class="op" id="7509390">)</span><span class="op" id="7509391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509397">ChangeTime</span><span class="op" id="7509407">:</span>&nbsp;<span class="ident" id="7509409">time</span><span class="op" id="7509413">.</span><span class="ident" id="7509414">Unix</span><span class="op" id="7509418">(</span><span class="num" id="7509419">1244592783</span><span class="op" id="7509429">,</span>&nbsp;<span class="num" id="7509431">0</span><span class="op" id="7509432">)</span><span class="op" id="7509433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509438">}</span><span class="op" id="7509439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509443">}</span><span class="op" id="7509444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509447">}</span><span class="op" id="7509448">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509455">file</span><span class="op" id="7509459">:</span>&nbsp;<span class="string" id="7509461">&#34;testdata/v7.tar&#34;</span><span class="op" id="7509478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509482">headers</span><span class="op" id="7509489">:</span>&nbsp;<span class="op" id="7509491">[</span><span class="op" id="7509492">]</span><span class="op" id="7509493">*</span><span class="ident" id="7509494">Header</span><span class="op" id="7509500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509511">Name</span><span class="op" id="7509515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509521">&#34;small.txt&#34;</span><span class="op" id="7509532">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509538">Mode</span><span class="op" id="7509542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509548">0444</span><span class="op" id="7509552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509558">Uid</span><span class="op" id="7509561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509568">73025</span><span class="op" id="7509573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509579">Gid</span><span class="op" id="7509582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509589">5000</span><span class="op" id="7509593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509599">Size</span><span class="op" id="7509603">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509609">5</span><span class="op" id="7509610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509616">ModTime</span><span class="op" id="7509623">:</span>&nbsp;&nbsp;<span class="ident" id="7509626">time</span><span class="op" id="7509630">.</span><span class="ident" id="7509631">Unix</span><span class="op" id="7509635">(</span><span class="num" id="7509636">1244593104</span><span class="op" id="7509646">,</span>&nbsp;<span class="num" id="7509648">0</span><span class="op" id="7509649">)</span><span class="op" id="7509650">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509656">Typeflag</span><span class="op" id="7509664">:</span>&nbsp;<span class="string" id="7509666">&#39;\x00&#39;</span><span class="op" id="7509672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509677">}</span><span class="op" id="7509678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509689">Name</span><span class="op" id="7509693">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509699">&#34;small2.txt&#34;</span><span class="op" id="7509711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509717">Mode</span><span class="op" id="7509721">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509727">0444</span><span class="op" id="7509731">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509737">Uid</span><span class="op" id="7509740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509747">73025</span><span class="op" id="7509752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509758">Gid</span><span class="op" id="7509761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509768">5000</span><span class="op" id="7509772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509778">Size</span><span class="op" id="7509782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7509788">11</span><span class="op" id="7509790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509796">ModTime</span><span class="op" id="7509803">:</span>&nbsp;&nbsp;<span class="ident" id="7509806">time</span><span class="op" id="7509810">.</span><span class="ident" id="7509811">Unix</span><span class="op" id="7509815">(</span><span class="num" id="7509816">1244593104</span><span class="op" id="7509826">,</span>&nbsp;<span class="num" id="7509828">0</span><span class="op" id="7509829">)</span><span class="op" id="7509830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509836">Typeflag</span><span class="op" id="7509844">:</span>&nbsp;<span class="string" id="7509846">&#39;\x00&#39;</span><span class="op" id="7509852">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509857">}</span><span class="op" id="7509858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509862">}</span><span class="op" id="7509863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509866">}</span><span class="op" id="7509867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509874">file</span><span class="op" id="7509878">:</span>&nbsp;<span class="string" id="7509880">&#34;testdata/pax.tar&#34;</span><span class="op" id="7509898">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509902">headers</span><span class="op" id="7509909">:</span>&nbsp;<span class="op" id="7509911">[</span><span class="op" id="7509912">]</span><span class="op" id="7509913">*</span><span class="ident" id="7509914">Header</span><span class="op" id="7509920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7509931">Name</span><span class="op" id="7509935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7509943">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7510139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510145">Mode</span><span class="op" id="7510149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510157">0664</span><span class="op" id="7510161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510167">Uid</span><span class="op" id="7510170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510179">1000</span><span class="op" id="7510183">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510189">Gid</span><span class="op" id="7510192">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510201">1000</span><span class="op" id="7510205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510211">Uname</span><span class="op" id="7510216">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7510223">&#34;shane&#34;</span><span class="op" id="7510230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510236">Gname</span><span class="op" id="7510241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7510248">&#34;shane&#34;</span><span class="op" id="7510255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510261">Size</span><span class="op" id="7510265">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510273">7</span><span class="op" id="7510274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510280">ModTime</span><span class="op" id="7510287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7510292">time</span><span class="op" id="7510296">.</span><span class="ident" id="7510297">Unix</span><span class="op" id="7510301">(</span><span class="num" id="7510302">1350244992</span><span class="op" id="7510312">,</span>&nbsp;<span class="num" id="7510314">23960108</span><span class="op" id="7510322">)</span><span class="op" id="7510323">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510329">ChangeTime</span><span class="op" id="7510339">:</span>&nbsp;<span class="ident" id="7510341">time</span><span class="op" id="7510345">.</span><span class="ident" id="7510346">Unix</span><span class="op" id="7510350">(</span><span class="num" id="7510351">1350244992</span><span class="op" id="7510361">,</span>&nbsp;<span class="num" id="7510363">23960108</span><span class="op" id="7510371">)</span><span class="op" id="7510372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510378">AccessTime</span><span class="op" id="7510388">:</span>&nbsp;<span class="ident" id="7510390">time</span><span class="op" id="7510394">.</span><span class="ident" id="7510395">Unix</span><span class="op" id="7510399">(</span><span class="num" id="7510400">1350244992</span><span class="op" id="7510410">,</span>&nbsp;<span class="num" id="7510412">23960108</span><span class="op" id="7510420">)</span><span class="op" id="7510421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510427">Typeflag</span><span class="op" id="7510435">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7510439">TypeReg</span><span class="op" id="7510446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7510451">}</span><span class="op" id="7510452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7510457">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510463">Name</span><span class="op" id="7510467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7510475">&#34;a/b&#34;</span><span class="op" id="7510480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510486">Mode</span><span class="op" id="7510490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510498">0777</span><span class="op" id="7510502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510508">Uid</span><span class="op" id="7510511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510520">1000</span><span class="op" id="7510524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510530">Gid</span><span class="op" id="7510533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510542">1000</span><span class="op" id="7510546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510552">Uname</span><span class="op" id="7510557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7510564">&#34;shane&#34;</span><span class="op" id="7510571">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510577">Gname</span><span class="op" id="7510582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7510589">&#34;shane&#34;</span><span class="op" id="7510596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510602">Size</span><span class="op" id="7510606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7510614">0</span><span class="op" id="7510615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510621">ModTime</span><span class="op" id="7510628">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7510633">time</span><span class="op" id="7510637">.</span><span class="ident" id="7510638">Unix</span><span class="op" id="7510642">(</span><span class="num" id="7510643">1350266320</span><span class="op" id="7510653">,</span>&nbsp;<span class="num" id="7510655">910238425</span><span class="op" id="7510664">)</span><span class="op" id="7510665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510671">ChangeTime</span><span class="op" id="7510681">:</span>&nbsp;<span class="ident" id="7510683">time</span><span class="op" id="7510687">.</span><span class="ident" id="7510688">Unix</span><span class="op" id="7510692">(</span><span class="num" id="7510693">1350266320</span><span class="op" id="7510703">,</span>&nbsp;<span class="num" id="7510705">910238425</span><span class="op" id="7510714">)</span><span class="op" id="7510715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510721">AccessTime</span><span class="op" id="7510731">:</span>&nbsp;<span class="ident" id="7510733">time</span><span class="op" id="7510737">.</span><span class="ident" id="7510738">Unix</span><span class="op" id="7510742">(</span><span class="num" id="7510743">1350266320</span><span class="op" id="7510753">,</span>&nbsp;<span class="num" id="7510755">910238425</span><span class="op" id="7510764">)</span><span class="op" id="7510765">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510771">Typeflag</span><span class="op" id="7510779">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7510783">TypeSymlink</span><span class="op" id="7510794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7510800">Linkname</span><span class="op" id="7510808">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7510812">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7511006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511011">}</span><span class="op" id="7511012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511016">}</span><span class="op" id="7511017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511020">}</span><span class="op" id="7511021">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511028">file</span><span class="op" id="7511032">:</span>&nbsp;<span class="string" id="7511034">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7511056">,</span>&nbsp;<span class="comment" id="7511058">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511085">headers</span><span class="op" id="7511092">:</span>&nbsp;<span class="op" id="7511094">[</span><span class="op" id="7511095">]</span><span class="op" id="7511096">*</span><span class="ident" id="7511097">Header</span><span class="op" id="7511103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511114">Name</span><span class="op" id="7511118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511124">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7511142">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511148">Mode</span><span class="op" id="7511152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511158">0664</span><span class="op" id="7511162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511168">Uid</span><span class="op" id="7511171">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511178">0</span><span class="op" id="7511179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511185">Gid</span><span class="op" id="7511188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511195">0</span><span class="op" id="7511196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511202">Size</span><span class="op" id="7511206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511212">14</span><span class="op" id="7511214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511220">ModTime</span><span class="op" id="7511227">:</span>&nbsp;&nbsp;<span class="ident" id="7511230">time</span><span class="op" id="7511234">.</span><span class="ident" id="7511235">Unix</span><span class="op" id="7511239">(</span><span class="num" id="7511240">1365454838</span><span class="op" id="7511250">,</span>&nbsp;<span class="num" id="7511252">0</span><span class="op" id="7511253">)</span><span class="op" id="7511254">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511260">Typeflag</span><span class="op" id="7511268">:</span>&nbsp;<span class="ident" id="7511270">TypeReg</span><span class="op" id="7511277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511283">Linkname</span><span class="op" id="7511291">:</span>&nbsp;<span class="string" id="7511293">&#34;&#34;</span><span class="op" id="7511295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511301">Uname</span><span class="op" id="7511306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511311">&#34;eyefi&#34;</span><span class="op" id="7511318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511324">Gname</span><span class="op" id="7511329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511334">&#34;eyefi&#34;</span><span class="op" id="7511341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511347">Devmajor</span><span class="op" id="7511355">:</span>&nbsp;<span class="num" id="7511357">0</span><span class="op" id="7511358">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511364">Devminor</span><span class="op" id="7511372">:</span>&nbsp;<span class="num" id="7511374">0</span><span class="op" id="7511375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511380">}</span><span class="op" id="7511381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511385">}</span><span class="op" id="7511386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511389">}</span><span class="op" id="7511390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511393">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511397">file</span><span class="op" id="7511401">:</span>&nbsp;<span class="string" id="7511403">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7511424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511428">headers</span><span class="op" id="7511435">:</span>&nbsp;<span class="op" id="7511437">[</span><span class="op" id="7511438">]</span><span class="op" id="7511439">*</span><span class="ident" id="7511440">Header</span><span class="op" id="7511446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7511451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511457">Name</span><span class="op" id="7511461">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511469">&#34;small.txt&#34;</span><span class="op" id="7511480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511486">Mode</span><span class="op" id="7511490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511498">0644</span><span class="op" id="7511502">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511508">Uid</span><span class="op" id="7511511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511520">1000</span><span class="op" id="7511524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511530">Gid</span><span class="op" id="7511533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511542">10</span><span class="op" id="7511544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511550">Size</span><span class="op" id="7511554">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7511562">5</span><span class="op" id="7511563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511569">ModTime</span><span class="op" id="7511576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7511581">time</span><span class="op" id="7511585">.</span><span class="ident" id="7511586">Unix</span><span class="op" id="7511590">(</span><span class="num" id="7511591">1386065770</span><span class="op" id="7511601">,</span>&nbsp;<span class="num" id="7511603">448252320</span><span class="op" id="7511612">)</span><span class="op" id="7511613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511619">Typeflag</span><span class="op" id="7511627">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7511631">&#39;0&#39;</span><span class="op" id="7511634">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511640">Uname</span><span class="op" id="7511645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511652">&#34;alex&#34;</span><span class="op" id="7511658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511664">Gname</span><span class="op" id="7511669">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7511676">&#34;wheel&#34;</span><span class="op" id="7511683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511689">AccessTime</span><span class="op" id="7511699">:</span>&nbsp;<span class="ident" id="7511701">time</span><span class="op" id="7511705">.</span><span class="ident" id="7511706">Unix</span><span class="op" id="7511710">(</span><span class="num" id="7511711">1389782991</span><span class="op" id="7511721">,</span>&nbsp;<span class="num" id="7511723">419875220</span><span class="op" id="7511732">)</span><span class="op" id="7511733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511739">ChangeTime</span><span class="op" id="7511749">:</span>&nbsp;<span class="ident" id="7511751">time</span><span class="op" id="7511755">.</span><span class="ident" id="7511756">Unix</span><span class="op" id="7511760">(</span><span class="num" id="7511761">1389782956</span><span class="op" id="7511771">,</span>&nbsp;<span class="num" id="7511773">794414986</span><span class="op" id="7511782">)</span><span class="op" id="7511783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7511789">Xattrs</span><span class="op" id="7511795">:</span>&nbsp;<span class="keyword" id="7511797">map</span><span class="op" id="7511800">[</span><span class="builtintype" id="7511801">string</span><span class="op" id="7511807">]</span><span class="builtintype" id="7511808">string</span><span class="op" id="7511814">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7511821">&#34;user.key&#34;</span><span class="op" id="7511831">:</span>&nbsp;&nbsp;<span class="string" id="7511834">&#34;value&#34;</span><span class="op" id="7511841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7511848">&#34;user.key2&#34;</span><span class="op" id="7511859">:</span>&nbsp;<span class="string" id="7511861">&#34;value2&#34;</span><span class="op" id="7511869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7511876">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7511953">&#34;security.selinux&#34;</span><span class="op" id="7511971">:</span>&nbsp;<span class="string" id="7511973">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7512013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512019">}</span><span class="op" id="7512020">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512025">}</span><span class="op" id="7512026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512037">Name</span><span class="op" id="7512041">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512049">&#34;small2.txt&#34;</span><span class="op" id="7512061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512067">Mode</span><span class="op" id="7512071">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512079">0644</span><span class="op" id="7512083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512089">Uid</span><span class="op" id="7512092">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512101">1000</span><span class="op" id="7512105">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512111">Gid</span><span class="op" id="7512114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512123">10</span><span class="op" id="7512125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512131">Size</span><span class="op" id="7512135">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7512143">11</span><span class="op" id="7512145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512151">ModTime</span><span class="op" id="7512158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7512163">time</span><span class="op" id="7512167">.</span><span class="ident" id="7512168">Unix</span><span class="op" id="7512172">(</span><span class="num" id="7512173">1386065770</span><span class="op" id="7512183">,</span>&nbsp;<span class="num" id="7512185">449252304</span><span class="op" id="7512194">)</span><span class="op" id="7512195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512201">Typeflag</span><span class="op" id="7512209">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7512213">&#39;0&#39;</span><span class="op" id="7512216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512222">Uname</span><span class="op" id="7512227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512234">&#34;alex&#34;</span><span class="op" id="7512240">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512246">Gname</span><span class="op" id="7512251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7512258">&#34;wheel&#34;</span><span class="op" id="7512265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512271">AccessTime</span><span class="op" id="7512281">:</span>&nbsp;<span class="ident" id="7512283">time</span><span class="op" id="7512287">.</span><span class="ident" id="7512288">Unix</span><span class="op" id="7512292">(</span><span class="num" id="7512293">1389782991</span><span class="op" id="7512303">,</span>&nbsp;<span class="num" id="7512305">419875220</span><span class="op" id="7512314">)</span><span class="op" id="7512315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512321">ChangeTime</span><span class="op" id="7512331">:</span>&nbsp;<span class="ident" id="7512333">time</span><span class="op" id="7512337">.</span><span class="ident" id="7512338">Unix</span><span class="op" id="7512342">(</span><span class="num" id="7512343">1386065770</span><span class="op" id="7512353">,</span>&nbsp;<span class="num" id="7512355">449252304</span><span class="op" id="7512364">)</span><span class="op" id="7512365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512371">Xattrs</span><span class="op" id="7512377">:</span>&nbsp;<span class="keyword" id="7512379">map</span><span class="op" id="7512382">[</span><span class="builtintype" id="7512383">string</span><span class="op" id="7512389">]</span><span class="builtintype" id="7512390">string</span><span class="op" id="7512396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7512403">&#34;security.selinux&#34;</span><span class="op" id="7512421">:</span>&nbsp;<span class="string" id="7512423">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7512463">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512469">}</span><span class="op" id="7512470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512475">}</span><span class="op" id="7512476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512480">}</span><span class="op" id="7512481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512484">}</span><span class="op" id="7512485">,</span><br>
<span class="lineno"></span><span class="op" id="7512487">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7512490">func</span>&nbsp;<span class="ident" id="7512495">TestReader</span><span class="op" id="7512505">(</span><span class="ident" id="7512506">t</span>&nbsp;<span class="op" id="7512508">*</span><span class="ident" id="7512509">testing</span><span class="op" id="7512516">.</span><span class="ident" id="7512517">T</span><span class="op" id="7512518">)</span>&nbsp;<span class="op" id="7512520">{</span><br>
<span class="lineno"></span><span class="ident" id="7512522">testLoop</span><span class="op" id="7512530">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512533">for</span>&nbsp;<span class="ident" id="7512537">i</span><span class="op" id="7512538">,</span>&nbsp;<span class="ident" id="7512540">test</span>&nbsp;<span class="op" id="7512545">:=</span>&nbsp;<span class="keyword" id="7512548">range</span>&nbsp;<span class="ident" id="7512554">untarTests</span>&nbsp;<span class="op" id="7512565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512569">f</span><span class="op" id="7512570">,</span>&nbsp;<span class="ident" id="7512572">err</span>&nbsp;<span class="op" id="7512576">:=</span>&nbsp;<span class="ident" id="7512579">os</span><span class="op" id="7512581">.</span><span class="ident" id="7512582">Open</span><span class="op" id="7512586">(</span><span class="ident" id="7512587">test</span><span class="op" id="7512591">.</span><span class="ident" id="7512592">file</span><span class="op" id="7512596">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512600">if</span>&nbsp;<span class="ident" id="7512603">err</span>&nbsp;<span class="op" id="7512607">!=</span>&nbsp;<span class="ident" id="7512610">nil</span>&nbsp;<span class="op" id="7512614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512619">t</span><span class="op" id="7512620">.</span><span class="ident" id="7512621">Errorf</span><span class="op" id="7512627">(</span><span class="string" id="7512628">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7512659">,</span>&nbsp;<span class="ident" id="7512661">i</span><span class="op" id="7512662">,</span>&nbsp;<span class="ident" id="7512664">err</span><span class="op" id="7512667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512672">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512687">defer</span>&nbsp;<span class="ident" id="7512693">f</span><span class="op" id="7512694">.</span><span class="ident" id="7512695">Close</span><span class="op" id="7512700">(</span><span class="op" id="7512701">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512705">tr</span>&nbsp;<span class="op" id="7512708">:=</span>&nbsp;<span class="ident" id="7512711">NewReader</span><span class="op" id="7512720">(</span><span class="ident" id="7512721">f</span><span class="op" id="7512722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512726">for</span>&nbsp;<span class="ident" id="7512730">j</span><span class="op" id="7512731">,</span>&nbsp;<span class="ident" id="7512733">header</span>&nbsp;<span class="op" id="7512740">:=</span>&nbsp;<span class="keyword" id="7512743">range</span>&nbsp;<span class="ident" id="7512749">test</span><span class="op" id="7512753">.</span><span class="ident" id="7512754">headers</span>&nbsp;<span class="op" id="7512762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512767">hdr</span><span class="op" id="7512770">,</span>&nbsp;<span class="ident" id="7512772">err</span>&nbsp;<span class="op" id="7512776">:=</span>&nbsp;<span class="ident" id="7512779">tr</span><span class="op" id="7512781">.</span><span class="ident" id="7512782">Next</span><span class="op" id="7512786">(</span><span class="op" id="7512787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512792">if</span>&nbsp;<span class="ident" id="7512795">err</span>&nbsp;<span class="op" id="7512799">!=</span>&nbsp;<span class="ident" id="7512802">nil</span>&nbsp;<span class="op" id="7512806">||</span>&nbsp;<span class="ident" id="7512809">hdr</span>&nbsp;<span class="op" id="7512813">==</span>&nbsp;<span class="ident" id="7512816">nil</span>&nbsp;<span class="op" id="7512820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512826">t</span><span class="op" id="7512827">.</span><span class="ident" id="7512828">Errorf</span><span class="op" id="7512834">(</span><span class="string" id="7512835">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7512876">,</span>&nbsp;<span class="ident" id="7512878">i</span><span class="op" id="7512879">,</span>&nbsp;<span class="ident" id="7512881">j</span><span class="op" id="7512882">,</span>&nbsp;<span class="ident" id="7512884">err</span><span class="op" id="7512887">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512893">f</span><span class="op" id="7512894">.</span><span class="ident" id="7512895">Close</span><span class="op" id="7512900">(</span><span class="op" id="7512901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512907">continue</span>&nbsp;<span class="ident" id="7512916">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7512928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7512933">if</span>&nbsp;<span class="op" id="7512936">!</span><span class="ident" id="7512937">reflect</span><span class="op" id="7512944">.</span><span class="ident" id="7512945">DeepEqual</span><span class="op" id="7512954">(</span><span class="op" id="7512955">*</span><span class="ident" id="7512956">hdr</span><span class="op" id="7512959">,</span>&nbsp;<span class="op" id="7512961">*</span><span class="ident" id="7512962">header</span><span class="op" id="7512968">)</span>&nbsp;<span class="op" id="7512970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7512976">t</span><span class="op" id="7512977">.</span><span class="ident" id="7512978">Errorf</span><span class="op" id="7512984">(</span><span class="string" id="7512985">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7513043">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513050">i</span><span class="op" id="7513051">,</span>&nbsp;<span class="ident" id="7513053">j</span><span class="op" id="7513054">,</span>&nbsp;<span class="op" id="7513056">*</span><span class="ident" id="7513057">hdr</span><span class="op" id="7513060">,</span>&nbsp;<span class="op" id="7513062">*</span><span class="ident" id="7513063">header</span><span class="op" id="7513069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513082">hdr</span><span class="op" id="7513085">,</span>&nbsp;<span class="ident" id="7513087">err</span>&nbsp;<span class="op" id="7513091">:=</span>&nbsp;<span class="ident" id="7513094">tr</span><span class="op" id="7513096">.</span><span class="ident" id="7513097">Next</span><span class="op" id="7513101">(</span><span class="op" id="7513102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513106">if</span>&nbsp;<span class="ident" id="7513109">err</span>&nbsp;<span class="op" id="7513113">==</span>&nbsp;<span class="ident" id="7513116">io</span><span class="op" id="7513118">.</span><span class="ident" id="7513119">EOF</span>&nbsp;<span class="op" id="7513123">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513128">continue</span>&nbsp;<span class="ident" id="7513137">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513152">if</span>&nbsp;<span class="ident" id="7513155">hdr</span>&nbsp;<span class="op" id="7513159">!=</span>&nbsp;<span class="ident" id="7513162">nil</span>&nbsp;<span class="op" id="7513166">||</span>&nbsp;<span class="ident" id="7513169">err</span>&nbsp;<span class="op" id="7513173">!=</span>&nbsp;<span class="ident" id="7513176">nil</span>&nbsp;<span class="op" id="7513180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513185">t</span><span class="op" id="7513186">.</span><span class="ident" id="7513187">Errorf</span><span class="op" id="7513193">(</span><span class="string" id="7513194">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7513245">,</span>&nbsp;<span class="ident" id="7513247">i</span><span class="op" id="7513248">,</span>&nbsp;<span class="ident" id="7513250">hdr</span><span class="op" id="7513253">,</span>&nbsp;<span class="ident" id="7513255">err</span><span class="op" id="7513258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513262">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513265">}</span><br>
<span class="lineno"></span><span class="op" id="7513267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7513270">func</span>&nbsp;<span class="ident" id="7513275">TestPartialRead</span><span class="op" id="7513290">(</span><span class="ident" id="7513291">t</span>&nbsp;<span class="op" id="7513293">*</span><span class="ident" id="7513294">testing</span><span class="op" id="7513301">.</span><span class="ident" id="7513302">T</span><span class="op" id="7513303">)</span>&nbsp;<span class="op" id="7513305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513308">f</span><span class="op" id="7513309">,</span>&nbsp;<span class="ident" id="7513311">err</span>&nbsp;<span class="op" id="7513315">:=</span>&nbsp;<span class="ident" id="7513318">os</span><span class="op" id="7513320">.</span><span class="ident" id="7513321">Open</span><span class="op" id="7513325">(</span><span class="string" id="7513326">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7513344">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513347">if</span>&nbsp;<span class="ident" id="7513350">err</span>&nbsp;<span class="op" id="7513354">!=</span>&nbsp;<span class="ident" id="7513357">nil</span>&nbsp;<span class="op" id="7513361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513365">t</span><span class="op" id="7513366">.</span><span class="ident" id="7513367">Fatalf</span><span class="op" id="7513373">(</span><span class="string" id="7513374">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7513396">,</span>&nbsp;<span class="ident" id="7513398">err</span><span class="op" id="7513401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513407">defer</span>&nbsp;<span class="ident" id="7513413">f</span><span class="op" id="7513414">.</span><span class="ident" id="7513415">Close</span><span class="op" id="7513420">(</span><span class="op" id="7513421">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513425">tr</span>&nbsp;<span class="op" id="7513428">:=</span>&nbsp;<span class="ident" id="7513431">NewReader</span><span class="op" id="7513440">(</span><span class="ident" id="7513441">f</span><span class="op" id="7513442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7513446">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513511">hdr</span><span class="op" id="7513514">,</span>&nbsp;<span class="ident" id="7513516">err</span>&nbsp;<span class="op" id="7513520">:=</span>&nbsp;<span class="ident" id="7513523">tr</span><span class="op" id="7513525">.</span><span class="ident" id="7513526">Next</span><span class="op" id="7513530">(</span><span class="op" id="7513531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513534">if</span>&nbsp;<span class="ident" id="7513537">err</span>&nbsp;<span class="op" id="7513541">!=</span>&nbsp;<span class="ident" id="7513544">nil</span>&nbsp;<span class="op" id="7513548">||</span>&nbsp;<span class="ident" id="7513551">hdr</span>&nbsp;<span class="op" id="7513555">==</span>&nbsp;<span class="ident" id="7513558">nil</span>&nbsp;<span class="op" id="7513562">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513566">t</span><span class="op" id="7513567">.</span><span class="ident" id="7513568">Fatalf</span><span class="op" id="7513574">(</span><span class="string" id="7513575">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7513602">,</span>&nbsp;<span class="ident" id="7513604">err</span><span class="op" id="7513607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513613">buf</span>&nbsp;<span class="op" id="7513617">:=</span>&nbsp;<span class="builtinfunc" id="7513620">make</span><span class="op" id="7513624">(</span><span class="op" id="7513625">[</span><span class="op" id="7513626">]</span><span class="builtintype" id="7513627">byte</span><span class="op" id="7513631">,</span>&nbsp;<span class="num" id="7513633">4</span><span class="op" id="7513634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513637">if</span>&nbsp;<span class="ident" id="7513640">_</span><span class="op" id="7513641">,</span>&nbsp;<span class="ident" id="7513643">err</span>&nbsp;<span class="op" id="7513647">:=</span>&nbsp;<span class="ident" id="7513650">io</span><span class="op" id="7513652">.</span><span class="ident" id="7513653">ReadFull</span><span class="op" id="7513661">(</span><span class="ident" id="7513662">tr</span><span class="op" id="7513664">,</span>&nbsp;<span class="ident" id="7513666">buf</span><span class="op" id="7513669">)</span><span class="op" id="7513670">;</span>&nbsp;<span class="ident" id="7513672">err</span>&nbsp;<span class="op" id="7513676">!=</span>&nbsp;<span class="ident" id="7513679">nil</span>&nbsp;<span class="op" id="7513683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513687">t</span><span class="op" id="7513688">.</span><span class="ident" id="7513689">Fatalf</span><span class="op" id="7513695">(</span><span class="string" id="7513696">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7513718">,</span>&nbsp;<span class="ident" id="7513720">err</span><span class="op" id="7513723">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513729">if</span>&nbsp;<span class="ident" id="7513732">expected</span>&nbsp;<span class="op" id="7513741">:=</span>&nbsp;<span class="op" id="7513744">[</span><span class="op" id="7513745">]</span><span class="builtintype" id="7513746">byte</span><span class="op" id="7513750">(</span><span class="string" id="7513751">&#34;Kilt&#34;</span><span class="op" id="7513757">)</span><span class="op" id="7513758">;</span>&nbsp;<span class="op" id="7513760">!</span><span class="ident" id="7513761">bytes</span><span class="op" id="7513766">.</span><span class="ident" id="7513767">Equal</span><span class="op" id="7513772">(</span><span class="ident" id="7513773">buf</span><span class="op" id="7513776">,</span>&nbsp;<span class="ident" id="7513778">expected</span><span class="op" id="7513786">)</span>&nbsp;<span class="op" id="7513788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513792">t</span><span class="op" id="7513793">.</span><span class="ident" id="7513794">Errorf</span><span class="op" id="7513800">(</span><span class="string" id="7513801">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7513825">,</span>&nbsp;<span class="ident" id="7513827">buf</span><span class="op" id="7513830">,</span>&nbsp;<span class="ident" id="7513832">expected</span><span class="op" id="7513840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7513847">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513863">hdr</span><span class="op" id="7513866">,</span>&nbsp;<span class="ident" id="7513868">err</span>&nbsp;<span class="op" id="7513872">=</span>&nbsp;<span class="ident" id="7513874">tr</span><span class="op" id="7513876">.</span><span class="ident" id="7513877">Next</span><span class="op" id="7513881">(</span><span class="op" id="7513882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513885">if</span>&nbsp;<span class="ident" id="7513888">err</span>&nbsp;<span class="op" id="7513892">!=</span>&nbsp;<span class="ident" id="7513895">nil</span>&nbsp;<span class="op" id="7513899">||</span>&nbsp;<span class="ident" id="7513902">hdr</span>&nbsp;<span class="op" id="7513906">==</span>&nbsp;<span class="ident" id="7513909">nil</span>&nbsp;<span class="op" id="7513913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513917">t</span><span class="op" id="7513918">.</span><span class="ident" id="7513919">Fatalf</span><span class="op" id="7513925">(</span><span class="string" id="7513926">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7513954">,</span>&nbsp;<span class="ident" id="7513956">err</span><span class="op" id="7513959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7513962">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7513965">buf</span>&nbsp;<span class="op" id="7513969">=</span>&nbsp;<span class="builtinfunc" id="7513971">make</span><span class="op" id="7513975">(</span><span class="op" id="7513976">[</span><span class="op" id="7513977">]</span><span class="builtintype" id="7513978">byte</span><span class="op" id="7513982">,</span>&nbsp;<span class="num" id="7513984">6</span><span class="op" id="7513985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7513988">if</span>&nbsp;<span class="ident" id="7513991">_</span><span class="op" id="7513992">,</span>&nbsp;<span class="ident" id="7513994">err</span>&nbsp;<span class="op" id="7513998">:=</span>&nbsp;<span class="ident" id="7514001">io</span><span class="op" id="7514003">.</span><span class="ident" id="7514004">ReadFull</span><span class="op" id="7514012">(</span><span class="ident" id="7514013">tr</span><span class="op" id="7514015">,</span>&nbsp;<span class="ident" id="7514017">buf</span><span class="op" id="7514020">)</span><span class="op" id="7514021">;</span>&nbsp;<span class="ident" id="7514023">err</span>&nbsp;<span class="op" id="7514027">!=</span>&nbsp;<span class="ident" id="7514030">nil</span>&nbsp;<span class="op" id="7514034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514038">t</span><span class="op" id="7514039">.</span><span class="ident" id="7514040">Fatalf</span><span class="op" id="7514046">(</span><span class="string" id="7514047">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7514069">,</span>&nbsp;<span class="ident" id="7514071">err</span><span class="op" id="7514074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514080">if</span>&nbsp;<span class="ident" id="7514083">expected</span>&nbsp;<span class="op" id="7514092">:=</span>&nbsp;<span class="op" id="7514095">[</span><span class="op" id="7514096">]</span><span class="builtintype" id="7514097">byte</span><span class="op" id="7514101">(</span><span class="string" id="7514102">&#34;Google&#34;</span><span class="op" id="7514110">)</span><span class="op" id="7514111">;</span>&nbsp;<span class="op" id="7514113">!</span><span class="ident" id="7514114">bytes</span><span class="op" id="7514119">.</span><span class="ident" id="7514120">Equal</span><span class="op" id="7514125">(</span><span class="ident" id="7514126">buf</span><span class="op" id="7514129">,</span>&nbsp;<span class="ident" id="7514131">expected</span><span class="op" id="7514139">)</span>&nbsp;<span class="op" id="7514141">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514145">t</span><span class="op" id="7514146">.</span><span class="ident" id="7514147">Errorf</span><span class="op" id="7514153">(</span><span class="string" id="7514154">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7514178">,</span>&nbsp;<span class="ident" id="7514180">buf</span><span class="op" id="7514183">,</span>&nbsp;<span class="ident" id="7514185">expected</span><span class="op" id="7514193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514196">}</span><br>
<span class="lineno"></span><span class="op" id="7514198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7514201">func</span>&nbsp;<span class="ident" id="7514206">TestIncrementalRead</span><span class="op" id="7514225">(</span><span class="ident" id="7514226">t</span>&nbsp;<span class="op" id="7514228">*</span><span class="ident" id="7514229">testing</span><span class="op" id="7514236">.</span><span class="ident" id="7514237">T</span><span class="op" id="7514238">)</span>&nbsp;<span class="op" id="7514240">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514243">test</span>&nbsp;<span class="op" id="7514248">:=</span>&nbsp;<span class="ident" id="7514251">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514263">f</span><span class="op" id="7514264">,</span>&nbsp;<span class="ident" id="7514266">err</span>&nbsp;<span class="op" id="7514270">:=</span>&nbsp;<span class="ident" id="7514273">os</span><span class="op" id="7514275">.</span><span class="ident" id="7514276">Open</span><span class="op" id="7514280">(</span><span class="ident" id="7514281">test</span><span class="op" id="7514285">.</span><span class="ident" id="7514286">file</span><span class="op" id="7514290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514293">if</span>&nbsp;<span class="ident" id="7514296">err</span>&nbsp;<span class="op" id="7514300">!=</span>&nbsp;<span class="ident" id="7514303">nil</span>&nbsp;<span class="op" id="7514307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514311">t</span><span class="op" id="7514312">.</span><span class="ident" id="7514313">Fatalf</span><span class="op" id="7514319">(</span><span class="string" id="7514320">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7514342">,</span>&nbsp;<span class="ident" id="7514344">err</span><span class="op" id="7514347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514350">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514353">defer</span>&nbsp;<span class="ident" id="7514359">f</span><span class="op" id="7514360">.</span><span class="ident" id="7514361">Close</span><span class="op" id="7514366">(</span><span class="op" id="7514367">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514371">tr</span>&nbsp;<span class="op" id="7514374">:=</span>&nbsp;<span class="ident" id="7514377">NewReader</span><span class="op" id="7514386">(</span><span class="ident" id="7514387">f</span><span class="op" id="7514388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514392">headers</span>&nbsp;<span class="op" id="7514400">:=</span>&nbsp;<span class="ident" id="7514403">test</span><span class="op" id="7514407">.</span><span class="ident" id="7514408">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514417">cksums</span>&nbsp;<span class="op" id="7514424">:=</span>&nbsp;<span class="ident" id="7514427">test</span><span class="op" id="7514431">.</span><span class="ident" id="7514432">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514440">nread</span>&nbsp;<span class="op" id="7514446">:=</span>&nbsp;<span class="num" id="7514449">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7514453">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514477">for</span>&nbsp;<span class="op" id="7514481">;</span>&nbsp;<span class="op" id="7514483">;</span>&nbsp;<span class="ident" id="7514485">nread</span><span class="op" id="7514490">++</span>&nbsp;<span class="op" id="7514493">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514497">hdr</span><span class="op" id="7514500">,</span>&nbsp;<span class="ident" id="7514502">err</span>&nbsp;<span class="op" id="7514506">:=</span>&nbsp;<span class="ident" id="7514509">tr</span><span class="op" id="7514511">.</span><span class="ident" id="7514512">Next</span><span class="op" id="7514516">(</span><span class="op" id="7514517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514521">if</span>&nbsp;<span class="ident" id="7514524">hdr</span>&nbsp;<span class="op" id="7514528">==</span>&nbsp;<span class="ident" id="7514531">nil</span>&nbsp;<span class="op" id="7514535">||</span>&nbsp;<span class="ident" id="7514538">err</span>&nbsp;<span class="op" id="7514542">==</span>&nbsp;<span class="ident" id="7514545">io</span><span class="op" id="7514547">.</span><span class="ident" id="7514548">EOF</span>&nbsp;<span class="op" id="7514552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514557">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7514570">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514592">if</span>&nbsp;<span class="op" id="7514595">!</span><span class="ident" id="7514596">reflect</span><span class="op" id="7514603">.</span><span class="ident" id="7514604">DeepEqual</span><span class="op" id="7514613">(</span><span class="op" id="7514614">*</span><span class="ident" id="7514615">hdr</span><span class="op" id="7514618">,</span>&nbsp;<span class="op" id="7514620">*</span><span class="ident" id="7514621">headers</span><span class="op" id="7514628">[</span><span class="ident" id="7514629">nread</span><span class="op" id="7514634">]</span><span class="op" id="7514635">)</span>&nbsp;<span class="op" id="7514637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514642">t</span><span class="op" id="7514643">.</span><span class="ident" id="7514644">Errorf</span><span class="op" id="7514650">(</span><span class="string" id="7514651">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7514690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514696">*</span><span class="ident" id="7514697">hdr</span><span class="op" id="7514700">,</span>&nbsp;<span class="ident" id="7514702">headers</span><span class="op" id="7514709">[</span><span class="ident" id="7514710">nread</span><span class="op" id="7514715">]</span><span class="op" id="7514716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514720">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7514725">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7514771">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514801">h</span>&nbsp;<span class="op" id="7514803">:=</span>&nbsp;<span class="ident" id="7514806">md5</span><span class="op" id="7514809">.</span><span class="ident" id="7514810">New</span><span class="op" id="7514813">(</span><span class="op" id="7514814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514818">rdbuf</span>&nbsp;<span class="op" id="7514824">:=</span>&nbsp;<span class="builtinfunc" id="7514827">make</span><span class="op" id="7514831">(</span><span class="op" id="7514832">[</span><span class="op" id="7514833">]</span><span class="builtintype" id="7514834">uint8</span><span class="op" id="7514839">,</span>&nbsp;<span class="num" id="7514841">8</span><span class="op" id="7514842">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514846">for</span>&nbsp;<span class="op" id="7514850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514855">nr</span><span class="op" id="7514857">,</span>&nbsp;<span class="ident" id="7514859">err</span>&nbsp;<span class="op" id="7514863">:=</span>&nbsp;<span class="ident" id="7514866">tr</span><span class="op" id="7514868">.</span><span class="ident" id="7514869">Read</span><span class="op" id="7514873">(</span><span class="ident" id="7514874">rdbuf</span><span class="op" id="7514879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514884">if</span>&nbsp;<span class="ident" id="7514887">err</span>&nbsp;<span class="op" id="7514891">==</span>&nbsp;<span class="ident" id="7514894">io</span><span class="op" id="7514896">.</span><span class="ident" id="7514897">EOF</span>&nbsp;<span class="op" id="7514901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514907">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514916">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514921">if</span>&nbsp;<span class="ident" id="7514924">err</span>&nbsp;<span class="op" id="7514928">!=</span>&nbsp;<span class="ident" id="7514931">nil</span>&nbsp;<span class="op" id="7514935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7514941">t</span><span class="op" id="7514942">.</span><span class="ident" id="7514943">Errorf</span><span class="op" id="7514949">(</span><span class="string" id="7514950">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7514979">,</span>&nbsp;<span class="ident" id="7514981">err</span><span class="op" id="7514984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7514990">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7514999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515004">h</span><span class="op" id="7515005">.</span><span class="ident" id="7515006">Write</span><span class="op" id="7515011">(</span><span class="ident" id="7515012">rdbuf</span><span class="op" id="7515017">[</span><span class="num" id="7515018">0</span><span class="op" id="7515019">:</span><span class="ident" id="7515020">nr</span><span class="op" id="7515022">]</span><span class="op" id="7515023">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7515031">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515052">have</span>&nbsp;<span class="op" id="7515057">:=</span>&nbsp;<span class="ident" id="7515060">fmt</span><span class="op" id="7515063">.</span><span class="ident" id="7515064">Sprintf</span><span class="op" id="7515071">(</span><span class="string" id="7515072">&#34;%x&#34;</span><span class="op" id="7515076">,</span>&nbsp;<span class="ident" id="7515078">h</span><span class="op" id="7515079">.</span><span class="ident" id="7515080">Sum</span><span class="op" id="7515083">(</span><span class="ident" id="7515084">nil</span><span class="op" id="7515087">)</span><span class="op" id="7515088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515092">want</span>&nbsp;<span class="op" id="7515097">:=</span>&nbsp;<span class="ident" id="7515100">cksums</span><span class="op" id="7515106">[</span><span class="ident" id="7515107">nread</span><span class="op" id="7515112">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515116">if</span>&nbsp;<span class="ident" id="7515119">want</span>&nbsp;<span class="op" id="7515124">!=</span>&nbsp;<span class="ident" id="7515127">have</span>&nbsp;<span class="op" id="7515132">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515137">t</span><span class="op" id="7515138">.</span><span class="ident" id="7515139">Errorf</span><span class="op" id="7515145">(</span><span class="string" id="7515146">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7515192">,</span>&nbsp;<span class="ident" id="7515194">hdr</span><span class="op" id="7515197">.</span><span class="ident" id="7515198">Name</span><span class="op" id="7515202">,</span>&nbsp;<span class="ident" id="7515204">have</span><span class="op" id="7515208">,</span>&nbsp;<span class="ident" id="7515210">want</span><span class="op" id="7515214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515224">if</span>&nbsp;<span class="ident" id="7515227">nread</span>&nbsp;<span class="op" id="7515233">!=</span>&nbsp;<span class="builtinfunc" id="7515236">len</span><span class="op" id="7515239">(</span><span class="ident" id="7515240">headers</span><span class="op" id="7515247">)</span>&nbsp;<span class="op" id="7515249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515253">t</span><span class="op" id="7515254">.</span><span class="ident" id="7515255">Errorf</span><span class="op" id="7515261">(</span><span class="string" id="7515262">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7515318">,</span>&nbsp;<span class="builtinfunc" id="7515320">len</span><span class="op" id="7515323">(</span><span class="ident" id="7515324">headers</span><span class="op" id="7515331">)</span><span class="op" id="7515332">,</span>&nbsp;<span class="ident" id="7515334">nread</span><span class="op" id="7515339">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515342">}</span><br>
<span class="lineno"></span><span class="op" id="7515344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7515347">func</span>&nbsp;<span class="ident" id="7515352">TestNonSeekable</span><span class="op" id="7515367">(</span><span class="ident" id="7515368">t</span>&nbsp;<span class="op" id="7515370">*</span><span class="ident" id="7515371">testing</span><span class="op" id="7515378">.</span><span class="ident" id="7515379">T</span><span class="op" id="7515380">)</span>&nbsp;<span class="op" id="7515382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515385">test</span>&nbsp;<span class="op" id="7515390">:=</span>&nbsp;<span class="ident" id="7515393">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515405">f</span><span class="op" id="7515406">,</span>&nbsp;<span class="ident" id="7515408">err</span>&nbsp;<span class="op" id="7515412">:=</span>&nbsp;<span class="ident" id="7515415">os</span><span class="op" id="7515417">.</span><span class="ident" id="7515418">Open</span><span class="op" id="7515422">(</span><span class="ident" id="7515423">test</span><span class="op" id="7515427">.</span><span class="ident" id="7515428">file</span><span class="op" id="7515432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515435">if</span>&nbsp;<span class="ident" id="7515438">err</span>&nbsp;<span class="op" id="7515442">!=</span>&nbsp;<span class="ident" id="7515445">nil</span>&nbsp;<span class="op" id="7515449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515453">t</span><span class="op" id="7515454">.</span><span class="ident" id="7515455">Fatalf</span><span class="op" id="7515461">(</span><span class="string" id="7515462">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7515484">,</span>&nbsp;<span class="ident" id="7515486">err</span><span class="op" id="7515489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515495">defer</span>&nbsp;<span class="ident" id="7515501">f</span><span class="op" id="7515502">.</span><span class="ident" id="7515503">Close</span><span class="op" id="7515508">(</span><span class="op" id="7515509">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515513">type</span>&nbsp;<span class="ident" id="7515518">readerOnly</span>&nbsp;<span class="keyword" id="7515529">struct</span>&nbsp;<span class="op" id="7515536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515540">io</span><span class="op" id="7515542">.</span><span class="ident" id="7515543">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515554">tr</span>&nbsp;<span class="op" id="7515557">:=</span>&nbsp;<span class="ident" id="7515560">NewReader</span><span class="op" id="7515569">(</span><span class="ident" id="7515570">readerOnly</span><span class="op" id="7515580">{</span><span class="ident" id="7515581">f</span><span class="op" id="7515582">}</span><span class="op" id="7515583">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515586">nread</span>&nbsp;<span class="op" id="7515592">:=</span>&nbsp;<span class="num" id="7515595">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515599">for</span>&nbsp;<span class="op" id="7515603">;</span>&nbsp;<span class="op" id="7515605">;</span>&nbsp;<span class="ident" id="7515607">nread</span><span class="op" id="7515612">++</span>&nbsp;<span class="op" id="7515615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515619">_</span><span class="op" id="7515620">,</span>&nbsp;<span class="ident" id="7515622">err</span>&nbsp;<span class="op" id="7515626">:=</span>&nbsp;<span class="ident" id="7515629">tr</span><span class="op" id="7515631">.</span><span class="ident" id="7515632">Next</span><span class="op" id="7515636">(</span><span class="op" id="7515637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515641">if</span>&nbsp;<span class="ident" id="7515644">err</span>&nbsp;<span class="op" id="7515648">==</span>&nbsp;<span class="ident" id="7515651">io</span><span class="op" id="7515653">.</span><span class="ident" id="7515654">EOF</span>&nbsp;<span class="op" id="7515658">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515663">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515675">if</span>&nbsp;<span class="ident" id="7515678">err</span>&nbsp;<span class="op" id="7515682">!=</span>&nbsp;<span class="ident" id="7515685">nil</span>&nbsp;<span class="op" id="7515689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515694">t</span><span class="op" id="7515695">.</span><span class="ident" id="7515696">Fatalf</span><span class="op" id="7515702">(</span><span class="string" id="7515703">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7515725">,</span>&nbsp;<span class="ident" id="7515727">err</span><span class="op" id="7515730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515734">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7515741">if</span>&nbsp;<span class="ident" id="7515744">nread</span>&nbsp;<span class="op" id="7515750">!=</span>&nbsp;<span class="builtinfunc" id="7515753">len</span><span class="op" id="7515756">(</span><span class="ident" id="7515757">test</span><span class="op" id="7515761">.</span><span class="ident" id="7515762">headers</span><span class="op" id="7515769">)</span>&nbsp;<span class="op" id="7515771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515775">t</span><span class="op" id="7515776">.</span><span class="ident" id="7515777">Errorf</span><span class="op" id="7515783">(</span><span class="string" id="7515784">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7515840">,</span>&nbsp;<span class="builtinfunc" id="7515842">len</span><span class="op" id="7515845">(</span><span class="ident" id="7515846">test</span><span class="op" id="7515850">.</span><span class="ident" id="7515851">headers</span><span class="op" id="7515858">)</span><span class="op" id="7515859">,</span>&nbsp;<span class="ident" id="7515861">nread</span><span class="op" id="7515866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515869">}</span><br>
<span class="lineno">440</span><span class="op" id="7515871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7515874">func</span>&nbsp;<span class="ident" id="7515879">TestParsePAXHeader</span><span class="op" id="7515897">(</span><span class="ident" id="7515898">t</span>&nbsp;<span class="op" id="7515900">*</span><span class="ident" id="7515901">testing</span><span class="op" id="7515908">.</span><span class="ident" id="7515909">T</span><span class="op" id="7515910">)</span>&nbsp;<span class="op" id="7515912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7515915">paxTests</span>&nbsp;<span class="op" id="7515924">:=</span>&nbsp;<span class="op" id="7515927">[</span><span class="op" id="7515928">]</span><span class="op" id="7515929">[</span><span class="num" id="7515930">3</span><span class="op" id="7515931">]</span><span class="builtintype" id="7515932">string</span><span class="op" id="7515938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7515942">{</span><span class="string" id="7515943">&#34;a&#34;</span><span class="op" id="7515946">,</span>&nbsp;<span class="string" id="7515948">&#34;a=name&#34;</span><span class="op" id="7515956">,</span>&nbsp;<span class="string" id="7515958">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7515971">}</span><span class="op" id="7515972">,</span>&nbsp;<span class="comment" id="7515974">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516027">{</span><span class="string" id="7516028">&#34;a&#34;</span><span class="op" id="7516031">,</span>&nbsp;<span class="string" id="7516033">&#34;a=name&#34;</span><span class="op" id="7516041">,</span>&nbsp;<span class="string" id="7516043">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7516055">}</span><span class="op" id="7516056">,</span>&nbsp;&nbsp;<span class="comment" id="7516059">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516111">{</span><span class="string" id="7516112">&#34;mtime&#34;</span><span class="op" id="7516119">,</span>&nbsp;<span class="string" id="7516121">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7516149">,</span>&nbsp;<span class="string" id="7516151">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7516184">}</span><span class="op" id="7516185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516188">for</span>&nbsp;<span class="ident" id="7516192">_</span><span class="op" id="7516193">,</span>&nbsp;<span class="ident" id="7516195">test</span>&nbsp;<span class="op" id="7516200">:=</span>&nbsp;<span class="keyword" id="7516203">range</span>&nbsp;<span class="ident" id="7516209">paxTests</span>&nbsp;<span class="op" id="7516218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516222">key</span><span class="op" id="7516225">,</span>&nbsp;<span class="ident" id="7516227">expected</span><span class="op" id="7516235">,</span>&nbsp;<span class="ident" id="7516237">raw</span>&nbsp;<span class="op" id="7516241">:=</span>&nbsp;<span class="ident" id="7516244">test</span><span class="op" id="7516248">[</span><span class="num" id="7516249">0</span><span class="op" id="7516250">]</span><span class="op" id="7516251">,</span>&nbsp;<span class="ident" id="7516253">test</span><span class="op" id="7516257">[</span><span class="num" id="7516258">1</span><span class="op" id="7516259">]</span><span class="op" id="7516260">,</span>&nbsp;<span class="ident" id="7516262">test</span><span class="op" id="7516266">[</span><span class="num" id="7516267">2</span><span class="op" id="7516268">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516272">reader</span>&nbsp;<span class="op" id="7516279">:=</span>&nbsp;<span class="ident" id="7516282">bytes</span><span class="op" id="7516287">.</span><span class="ident" id="7516288">NewReader</span><span class="op" id="7516297">(</span><span class="op" id="7516298">[</span><span class="op" id="7516299">]</span><span class="builtintype" id="7516300">byte</span><span class="op" id="7516304">(</span><span class="ident" id="7516305">raw</span><span class="op" id="7516308">)</span><span class="op" id="7516309">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516313">headers</span><span class="op" id="7516320">,</span>&nbsp;<span class="ident" id="7516322">err</span>&nbsp;<span class="op" id="7516326">:=</span>&nbsp;<span class="ident" id="7516329">parsePAX</span><span class="op" id="7516337">(</span><span class="ident" id="7516338">reader</span><span class="op" id="7516344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516348">if</span>&nbsp;<span class="ident" id="7516351">err</span>&nbsp;<span class="op" id="7516355">!=</span>&nbsp;<span class="ident" id="7516358">nil</span>&nbsp;<span class="op" id="7516362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516367">t</span><span class="op" id="7516368">.</span><span class="ident" id="7516369">Errorf</span><span class="op" id="7516375">(</span><span class="string" id="7516376">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7516424">,</span>&nbsp;<span class="ident" id="7516426">err</span><span class="op" id="7516429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516434">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516445">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516449">if</span>&nbsp;<span class="ident" id="7516452">strings</span><span class="op" id="7516459">.</span><span class="ident" id="7516460">EqualFold</span><span class="op" id="7516469">(</span><span class="ident" id="7516470">headers</span><span class="op" id="7516477">[</span><span class="ident" id="7516478">key</span><span class="op" id="7516481">]</span><span class="op" id="7516482">,</span>&nbsp;<span class="ident" id="7516484">expected</span><span class="op" id="7516492">)</span>&nbsp;<span class="op" id="7516494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516499">t</span><span class="op" id="7516500">.</span><span class="ident" id="7516501">Errorf</span><span class="op" id="7516507">(</span><span class="string" id="7516508">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7516560">,</span>&nbsp;<span class="ident" id="7516562">headers</span><span class="op" id="7516569">[</span><span class="ident" id="7516570">key</span><span class="op" id="7516573">]</span><span class="op" id="7516574">,</span>&nbsp;<span class="ident" id="7516576">expected</span><span class="op" id="7516584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516589">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516604">trailer</span>&nbsp;<span class="op" id="7516612">:=</span>&nbsp;<span class="builtinfunc" id="7516615">make</span><span class="op" id="7516619">(</span><span class="op" id="7516620">[</span><span class="op" id="7516621">]</span><span class="builtintype" id="7516622">byte</span><span class="op" id="7516626">,</span>&nbsp;<span class="num" id="7516628">100</span><span class="op" id="7516631">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516635">n</span><span class="op" id="7516636">,</span>&nbsp;<span class="ident" id="7516638">err</span>&nbsp;<span class="op" id="7516642">:=</span>&nbsp;<span class="ident" id="7516645">reader</span><span class="op" id="7516651">.</span><span class="ident" id="7516652">Read</span><span class="op" id="7516656">(</span><span class="ident" id="7516657">trailer</span><span class="op" id="7516664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516668">if</span>&nbsp;<span class="ident" id="7516671">err</span>&nbsp;<span class="op" id="7516675">!=</span>&nbsp;<span class="ident" id="7516678">io</span><span class="op" id="7516680">.</span><span class="ident" id="7516681">EOF</span>&nbsp;<span class="op" id="7516685">||</span>&nbsp;<span class="ident" id="7516688">n</span>&nbsp;<span class="op" id="7516690">!=</span>&nbsp;<span class="num" id="7516693">0</span>&nbsp;<span class="op" id="7516695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516700">t</span><span class="op" id="7516701">.</span><span class="ident" id="7516702">Error</span><span class="op" id="7516707">(</span><span class="string" id="7516708">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7516732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516739">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516742">badHeader</span>&nbsp;<span class="op" id="7516752">:=</span>&nbsp;<span class="ident" id="7516755">bytes</span><span class="op" id="7516760">.</span><span class="ident" id="7516761">NewReader</span><span class="op" id="7516770">(</span><span class="op" id="7516771">[</span><span class="op" id="7516772">]</span><span class="builtintype" id="7516773">byte</span><span class="op" id="7516777">(</span><span class="string" id="7516778">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7516794">)</span><span class="op" id="7516795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7516798">if</span>&nbsp;<span class="ident" id="7516801">_</span><span class="op" id="7516802">,</span>&nbsp;<span class="ident" id="7516804">err</span>&nbsp;<span class="op" id="7516808">:=</span>&nbsp;<span class="ident" id="7516811">parsePAX</span><span class="op" id="7516819">(</span><span class="ident" id="7516820">badHeader</span><span class="op" id="7516829">)</span><span class="op" id="7516830">;</span>&nbsp;<span class="ident" id="7516832">err</span>&nbsp;<span class="op" id="7516836">!=</span>&nbsp;<span class="ident" id="7516839">ErrHeader</span>&nbsp;<span class="op" id="7516849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516853">t</span><span class="op" id="7516854">.</span><span class="ident" id="7516855">Fatal</span><span class="op" id="7516860">(</span><span class="string" id="7516861">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7516905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7516908">}</span><br>
<span class="lineno"></span><span class="op" id="7516910">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7516913">func</span>&nbsp;<span class="ident" id="7516918">TestParsePAXTime</span><span class="op" id="7516934">(</span><span class="ident" id="7516935">t</span>&nbsp;<span class="op" id="7516937">*</span><span class="ident" id="7516938">testing</span><span class="op" id="7516945">.</span><span class="ident" id="7516946">T</span><span class="op" id="7516947">)</span>&nbsp;<span class="op" id="7516949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7516952">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7516983">timestamps</span>&nbsp;<span class="op" id="7516994">:=</span>&nbsp;<span class="keyword" id="7516997">map</span><span class="op" id="7517000">[</span><span class="builtintype" id="7517001">string</span><span class="op" id="7517007">]</span><span class="ident" id="7517008">time</span><span class="op" id="7517012">.</span><span class="ident" id="7517013">Time</span><span class="op" id="7517017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517021">&#34;1350244992.023960108&#34;</span><span class="op" id="7517043">:</span>&nbsp;&nbsp;<span class="ident" id="7517046">time</span><span class="op" id="7517050">.</span><span class="ident" id="7517051">Unix</span><span class="op" id="7517055">(</span><span class="num" id="7517056">1350244992</span><span class="op" id="7517066">,</span>&nbsp;<span class="num" id="7517068">23960108</span><span class="op" id="7517076">)</span><span class="op" id="7517077">,</span>&nbsp;<span class="comment" id="7517079">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517100">&#34;1350244992.02396010&#34;</span><span class="op" id="7517121">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7517125">time</span><span class="op" id="7517129">.</span><span class="ident" id="7517130">Unix</span><span class="op" id="7517134">(</span><span class="num" id="7517135">1350244992</span><span class="op" id="7517145">,</span>&nbsp;<span class="num" id="7517147">23960100</span><span class="op" id="7517155">)</span><span class="op" id="7517156">,</span>&nbsp;<span class="comment" id="7517158">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517185">&#34;1350244992.0239601089&#34;</span><span class="op" id="7517208">:</span>&nbsp;<span class="ident" id="7517210">time</span><span class="op" id="7517214">.</span><span class="ident" id="7517215">Unix</span><span class="op" id="7517219">(</span><span class="num" id="7517220">1350244992</span><span class="op" id="7517230">,</span>&nbsp;<span class="num" id="7517232">23960108</span><span class="op" id="7517240">)</span><span class="op" id="7517241">,</span>&nbsp;<span class="comment" id="7517243">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517271">&#34;1350244992&#34;</span><span class="op" id="7517283">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7517296">time</span><span class="op" id="7517300">.</span><span class="ident" id="7517301">Unix</span><span class="op" id="7517305">(</span><span class="num" id="7517306">1350244992</span><span class="op" id="7517316">,</span>&nbsp;<span class="num" id="7517318">0</span><span class="op" id="7517319">)</span><span class="op" id="7517320">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7517329">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517356">for</span>&nbsp;<span class="ident" id="7517360">input</span><span class="op" id="7517365">,</span>&nbsp;<span class="ident" id="7517367">expected</span>&nbsp;<span class="op" id="7517376">:=</span>&nbsp;<span class="keyword" id="7517379">range</span>&nbsp;<span class="ident" id="7517385">timestamps</span>&nbsp;<span class="op" id="7517396">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517400">ts</span><span class="op" id="7517402">,</span>&nbsp;<span class="ident" id="7517404">err</span>&nbsp;<span class="op" id="7517408">:=</span>&nbsp;<span class="ident" id="7517411">parsePAXTime</span><span class="op" id="7517423">(</span><span class="ident" id="7517424">input</span><span class="op" id="7517429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517433">if</span>&nbsp;<span class="ident" id="7517436">err</span>&nbsp;<span class="op" id="7517440">!=</span>&nbsp;<span class="ident" id="7517443">nil</span>&nbsp;<span class="op" id="7517447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517452">t</span><span class="op" id="7517453">.</span><span class="ident" id="7517454">Fatal</span><span class="op" id="7517459">(</span><span class="ident" id="7517460">err</span><span class="op" id="7517463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517471">if</span>&nbsp;<span class="op" id="7517474">!</span><span class="ident" id="7517475">ts</span><span class="op" id="7517477">.</span><span class="ident" id="7517478">Equal</span><span class="op" id="7517483">(</span><span class="ident" id="7517484">expected</span><span class="op" id="7517492">)</span>&nbsp;<span class="op" id="7517494">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517499">t</span><span class="op" id="7517500">.</span><span class="ident" id="7517501">Fatalf</span><span class="op" id="7517507">(</span><span class="string" id="7517508">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7517536">,</span>&nbsp;<span class="ident" id="7517538">ts</span><span class="op" id="7517540">,</span>&nbsp;<span class="ident" id="7517542">expected</span><span class="op" id="7517550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517557">}</span><br>
<span class="lineno"></span><span class="op" id="7517559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7517562">func</span>&nbsp;<span class="ident" id="7517567">TestMergePAX</span><span class="op" id="7517579">(</span><span class="ident" id="7517580">t</span>&nbsp;<span class="op" id="7517582">*</span><span class="ident" id="7517583">testing</span><span class="op" id="7517590">.</span><span class="ident" id="7517591">T</span><span class="op" id="7517592">)</span>&nbsp;<span class="op" id="7517594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517597">hdr</span>&nbsp;<span class="op" id="7517601">:=</span>&nbsp;<span class="builtinfunc" id="7517604">new</span><span class="op" id="7517607">(</span><span class="ident" id="7517608">Header</span><span class="op" id="7517614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7517617">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517667">headers</span>&nbsp;<span class="op" id="7517675">:=</span>&nbsp;<span class="keyword" id="7517678">map</span><span class="op" id="7517681">[</span><span class="builtintype" id="7517682">string</span><span class="op" id="7517688">]</span><span class="builtintype" id="7517689">string</span><span class="op" id="7517695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517699">&#34;path&#34;</span><span class="op" id="7517705">:</span>&nbsp;&nbsp;<span class="string" id="7517708">&#34;a/b/c&#34;</span><span class="op" id="7517715">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517719">&#34;uid&#34;</span><span class="op" id="7517724">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7517728">&#34;1000&#34;</span><span class="op" id="7517734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7517738">&#34;mtime&#34;</span><span class="op" id="7517745">:</span>&nbsp;<span class="string" id="7517747">&#34;1350244992.023960108&#34;</span><span class="op" id="7517769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517775">err</span>&nbsp;<span class="op" id="7517779">:=</span>&nbsp;<span class="ident" id="7517782">mergePAX</span><span class="op" id="7517790">(</span><span class="ident" id="7517791">hdr</span><span class="op" id="7517794">,</span>&nbsp;<span class="ident" id="7517796">headers</span><span class="op" id="7517803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517806">if</span>&nbsp;<span class="ident" id="7517809">err</span>&nbsp;<span class="op" id="7517813">!=</span>&nbsp;<span class="ident" id="7517816">nil</span>&nbsp;<span class="op" id="7517820">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517824">t</span><span class="op" id="7517825">.</span><span class="ident" id="7517826">Fatal</span><span class="op" id="7517831">(</span><span class="ident" id="7517832">err</span><span class="op" id="7517835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517841">want</span>&nbsp;<span class="op" id="7517846">:=</span>&nbsp;<span class="op" id="7517849">&amp;</span><span class="ident" id="7517850">Header</span><span class="op" id="7517856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517860">Name</span><span class="op" id="7517864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7517869">&#34;a/b/c&#34;</span><span class="op" id="7517876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517880">Uid</span><span class="op" id="7517883">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7517889">1000</span><span class="op" id="7517893">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517897">ModTime</span><span class="op" id="7517904">:</span>&nbsp;<span class="ident" id="7517906">time</span><span class="op" id="7517910">.</span><span class="ident" id="7517911">Unix</span><span class="op" id="7517915">(</span><span class="num" id="7517916">1350244992</span><span class="op" id="7517926">,</span>&nbsp;<span class="num" id="7517928">23960108</span><span class="op" id="7517936">)</span><span class="op" id="7517937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7517940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7517943">if</span>&nbsp;<span class="op" id="7517946">!</span><span class="ident" id="7517947">reflect</span><span class="op" id="7517954">.</span><span class="ident" id="7517955">DeepEqual</span><span class="op" id="7517964">(</span><span class="ident" id="7517965">hdr</span><span class="op" id="7517968">,</span>&nbsp;<span class="ident" id="7517970">want</span><span class="op" id="7517974">)</span>&nbsp;<span class="op" id="7517976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7517980">t</span><span class="op" id="7517981">.</span><span class="ident" id="7517982">Errorf</span><span class="op" id="7517988">(</span><span class="string" id="7517989">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7518025">,</span>&nbsp;<span class="ident" id="7518027">hdr</span><span class="op" id="7518030">,</span>&nbsp;<span class="ident" id="7518032">want</span><span class="op" id="7518036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518039">}</span><br>
<span class="lineno">510</span><span class="op" id="7518041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7518044">func</span>&nbsp;<span class="ident" id="7518049">TestSparseEndToEnd</span><span class="op" id="7518067">(</span><span class="ident" id="7518068">t</span>&nbsp;<span class="op" id="7518070">*</span><span class="ident" id="7518071">testing</span><span class="op" id="7518078">.</span><span class="ident" id="7518079">T</span><span class="op" id="7518080">)</span>&nbsp;<span class="op" id="7518082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518085">test</span>&nbsp;<span class="op" id="7518090">:=</span>&nbsp;<span class="ident" id="7518093">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518108">f</span><span class="op" id="7518109">,</span>&nbsp;<span class="ident" id="7518111">err</span>&nbsp;<span class="op" id="7518115">:=</span>&nbsp;<span class="ident" id="7518118">os</span><span class="op" id="7518120">.</span><span class="ident" id="7518121">Open</span><span class="op" id="7518125">(</span><span class="ident" id="7518126">test</span><span class="op" id="7518130">.</span><span class="ident" id="7518131">file</span><span class="op" id="7518135">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518138">if</span>&nbsp;<span class="ident" id="7518141">err</span>&nbsp;<span class="op" id="7518145">!=</span>&nbsp;<span class="ident" id="7518148">nil</span>&nbsp;<span class="op" id="7518152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518156">t</span><span class="op" id="7518157">.</span><span class="ident" id="7518158">Fatalf</span><span class="op" id="7518164">(</span><span class="string" id="7518165">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7518187">,</span>&nbsp;<span class="ident" id="7518189">err</span><span class="op" id="7518192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518198">defer</span>&nbsp;<span class="ident" id="7518204">f</span><span class="op" id="7518205">.</span><span class="ident" id="7518206">Close</span><span class="op" id="7518211">(</span><span class="op" id="7518212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518216">tr</span>&nbsp;<span class="op" id="7518219">:=</span>&nbsp;<span class="ident" id="7518222">NewReader</span><span class="op" id="7518231">(</span><span class="ident" id="7518232">f</span><span class="op" id="7518233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518237">headers</span>&nbsp;<span class="op" id="7518245">:=</span>&nbsp;<span class="ident" id="7518248">test</span><span class="op" id="7518252">.</span><span class="ident" id="7518253">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518262">cksums</span>&nbsp;<span class="op" id="7518269">:=</span>&nbsp;<span class="ident" id="7518272">test</span><span class="op" id="7518276">.</span><span class="ident" id="7518277">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518285">nread</span>&nbsp;<span class="op" id="7518291">:=</span>&nbsp;<span class="num" id="7518294">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7518298">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518322">for</span>&nbsp;<span class="op" id="7518326">;</span>&nbsp;<span class="op" id="7518328">;</span>&nbsp;<span class="ident" id="7518330">nread</span><span class="op" id="7518335">++</span>&nbsp;<span class="op" id="7518338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518342">hdr</span><span class="op" id="7518345">,</span>&nbsp;<span class="ident" id="7518347">err</span>&nbsp;<span class="op" id="7518351">:=</span>&nbsp;<span class="ident" id="7518354">tr</span><span class="op" id="7518356">.</span><span class="ident" id="7518357">Next</span><span class="op" id="7518361">(</span><span class="op" id="7518362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518366">if</span>&nbsp;<span class="ident" id="7518369">hdr</span>&nbsp;<span class="op" id="7518373">==</span>&nbsp;<span class="ident" id="7518376">nil</span>&nbsp;<span class="op" id="7518380">||</span>&nbsp;<span class="ident" id="7518383">err</span>&nbsp;<span class="op" id="7518387">==</span>&nbsp;<span class="ident" id="7518390">io</span><span class="op" id="7518392">.</span><span class="ident" id="7518393">EOF</span>&nbsp;<span class="op" id="7518397">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518402">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7518415">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518437">if</span>&nbsp;<span class="op" id="7518440">!</span><span class="ident" id="7518441">reflect</span><span class="op" id="7518448">.</span><span class="ident" id="7518449">DeepEqual</span><span class="op" id="7518458">(</span><span class="op" id="7518459">*</span><span class="ident" id="7518460">hdr</span><span class="op" id="7518463">,</span>&nbsp;<span class="op" id="7518465">*</span><span class="ident" id="7518466">headers</span><span class="op" id="7518473">[</span><span class="ident" id="7518474">nread</span><span class="op" id="7518479">]</span><span class="op" id="7518480">)</span>&nbsp;<span class="op" id="7518482">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518487">t</span><span class="op" id="7518488">.</span><span class="ident" id="7518489">Errorf</span><span class="op" id="7518495">(</span><span class="string" id="7518496">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7518535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518541">*</span><span class="ident" id="7518542">hdr</span><span class="op" id="7518545">,</span>&nbsp;<span class="ident" id="7518547">headers</span><span class="op" id="7518554">[</span><span class="ident" id="7518555">nread</span><span class="op" id="7518560">]</span><span class="op" id="7518561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7518570">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518607">h</span>&nbsp;<span class="op" id="7518609">:=</span>&nbsp;<span class="ident" id="7518612">md5</span><span class="op" id="7518615">.</span><span class="ident" id="7518616">New</span><span class="op" id="7518619">(</span><span class="op" id="7518620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518624">_</span><span class="op" id="7518625">,</span>&nbsp;<span class="ident" id="7518627">err</span>&nbsp;<span class="op" id="7518631">=</span>&nbsp;<span class="ident" id="7518633">io</span><span class="op" id="7518635">.</span><span class="ident" id="7518636">Copy</span><span class="op" id="7518640">(</span><span class="ident" id="7518641">h</span><span class="op" id="7518642">,</span>&nbsp;<span class="ident" id="7518644">tr</span><span class="op" id="7518646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518650">if</span>&nbsp;<span class="ident" id="7518653">err</span>&nbsp;<span class="op" id="7518657">!=</span>&nbsp;<span class="ident" id="7518660">nil</span>&nbsp;<span class="op" id="7518664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518669">t</span><span class="op" id="7518670">.</span><span class="ident" id="7518671">Fatalf</span><span class="op" id="7518677">(</span><span class="string" id="7518678">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7518700">,</span>&nbsp;<span class="ident" id="7518702">err</span><span class="op" id="7518705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518709">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7518714">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518735">have</span>&nbsp;<span class="op" id="7518740">:=</span>&nbsp;<span class="ident" id="7518743">fmt</span><span class="op" id="7518746">.</span><span class="ident" id="7518747">Sprintf</span><span class="op" id="7518754">(</span><span class="string" id="7518755">&#34;%x&#34;</span><span class="op" id="7518759">,</span>&nbsp;<span class="ident" id="7518761">h</span><span class="op" id="7518762">.</span><span class="ident" id="7518763">Sum</span><span class="op" id="7518766">(</span><span class="ident" id="7518767">nil</span><span class="op" id="7518770">)</span><span class="op" id="7518771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518775">want</span>&nbsp;<span class="op" id="7518780">:=</span>&nbsp;<span class="ident" id="7518783">cksums</span><span class="op" id="7518789">[</span><span class="ident" id="7518790">nread</span><span class="op" id="7518795">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518799">if</span>&nbsp;<span class="ident" id="7518802">want</span>&nbsp;<span class="op" id="7518807">!=</span>&nbsp;<span class="ident" id="7518810">have</span>&nbsp;<span class="op" id="7518815">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518820">t</span><span class="op" id="7518821">.</span><span class="ident" id="7518822">Errorf</span><span class="op" id="7518828">(</span><span class="string" id="7518829">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7518875">,</span>&nbsp;<span class="ident" id="7518877">hdr</span><span class="op" id="7518880">.</span><span class="ident" id="7518881">Name</span><span class="op" id="7518885">,</span>&nbsp;<span class="ident" id="7518887">have</span><span class="op" id="7518891">,</span>&nbsp;<span class="ident" id="7518893">want</span><span class="op" id="7518897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518907">if</span>&nbsp;<span class="ident" id="7518910">nread</span>&nbsp;<span class="op" id="7518916">!=</span>&nbsp;<span class="builtinfunc" id="7518919">len</span><span class="op" id="7518922">(</span><span class="ident" id="7518923">headers</span><span class="op" id="7518930">)</span>&nbsp;<span class="op" id="7518932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518936">t</span><span class="op" id="7518937">.</span><span class="ident" id="7518938">Errorf</span><span class="op" id="7518944">(</span><span class="string" id="7518945">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7519001">,</span>&nbsp;<span class="builtinfunc" id="7519003">len</span><span class="op" id="7519006">(</span><span class="ident" id="7519007">headers</span><span class="op" id="7519014">)</span><span class="op" id="7519015">,</span>&nbsp;<span class="ident" id="7519017">nread</span><span class="op" id="7519022">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519025">}</span><br>
<span class="lineno"></span><span class="op" id="7519027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7519030">type</span>&nbsp;<span class="ident" id="7519035">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7519054">struct</span>&nbsp;<span class="op" id="7519061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519064">sparseData</span>&nbsp;<span class="op" id="7519075">[</span><span class="op" id="7519076">]</span><span class="builtintype" id="7519077">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519083">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7519094">[</span><span class="op" id="7519095">]</span><span class="ident" id="7519096">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519109">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7519120">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519127">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7519138">[</span><span class="op" id="7519139">]</span><span class="builtintype" id="7519140">byte</span><br>
<span class="lineno"></span><span class="op" id="7519145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7519148">var</span>&nbsp;<span class="ident" id="7519152">sparseFileReadTests</span>&nbsp;<span class="op" id="7519172">=</span>&nbsp;<span class="op" id="7519174">[</span><span class="op" id="7519175">]</span><span class="ident" id="7519176">sparseFileReadTest</span><span class="op" id="7519194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519201">sparseData</span><span class="op" id="7519211">:</span>&nbsp;<span class="op" id="7519213">[</span><span class="op" id="7519214">]</span><span class="builtintype" id="7519215">byte</span><span class="op" id="7519219">(</span><span class="string" id="7519220">&#34;abcde&#34;</span><span class="op" id="7519227">)</span><span class="op" id="7519228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519232">sparseMap</span><span class="op" id="7519241">:</span>&nbsp;<span class="op" id="7519243">[</span><span class="op" id="7519244">]</span><span class="ident" id="7519245">sparseEntry</span><span class="op" id="7519256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519261">{</span><span class="ident" id="7519262">offset</span><span class="op" id="7519268">:</span>&nbsp;<span class="num" id="7519270">0</span><span class="op" id="7519271">,</span>&nbsp;<span class="ident" id="7519273">numBytes</span><span class="op" id="7519281">:</span>&nbsp;<span class="num" id="7519283">2</span><span class="op" id="7519284">}</span><span class="op" id="7519285">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519290">{</span><span class="ident" id="7519291">offset</span><span class="op" id="7519297">:</span>&nbsp;<span class="num" id="7519299">5</span><span class="op" id="7519300">,</span>&nbsp;<span class="ident" id="7519302">numBytes</span><span class="op" id="7519310">:</span>&nbsp;<span class="num" id="7519312">3</span><span class="op" id="7519313">}</span><span class="op" id="7519314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519318">}</span><span class="op" id="7519319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519323">realSize</span><span class="op" id="7519331">:</span>&nbsp;<span class="num" id="7519333">8</span><span class="op" id="7519334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519338">expected</span><span class="op" id="7519346">:</span>&nbsp;<span class="op" id="7519348">[</span><span class="op" id="7519349">]</span><span class="builtintype" id="7519350">byte</span><span class="op" id="7519354">(</span><span class="string" id="7519355">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7519374">)</span><span class="op" id="7519375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519378">}</span><span class="op" id="7519379">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519386">sparseData</span><span class="op" id="7519396">:</span>&nbsp;<span class="op" id="7519398">[</span><span class="op" id="7519399">]</span><span class="builtintype" id="7519400">byte</span><span class="op" id="7519404">(</span><span class="string" id="7519405">&#34;abcde&#34;</span><span class="op" id="7519412">)</span><span class="op" id="7519413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519417">sparseMap</span><span class="op" id="7519426">:</span>&nbsp;<span class="op" id="7519428">[</span><span class="op" id="7519429">]</span><span class="ident" id="7519430">sparseEntry</span><span class="op" id="7519441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519446">{</span><span class="ident" id="7519447">offset</span><span class="op" id="7519453">:</span>&nbsp;<span class="num" id="7519455">0</span><span class="op" id="7519456">,</span>&nbsp;<span class="ident" id="7519458">numBytes</span><span class="op" id="7519466">:</span>&nbsp;<span class="num" id="7519468">2</span><span class="op" id="7519469">}</span><span class="op" id="7519470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519475">{</span><span class="ident" id="7519476">offset</span><span class="op" id="7519482">:</span>&nbsp;<span class="num" id="7519484">5</span><span class="op" id="7519485">,</span>&nbsp;<span class="ident" id="7519487">numBytes</span><span class="op" id="7519495">:</span>&nbsp;<span class="num" id="7519497">3</span><span class="op" id="7519498">}</span><span class="op" id="7519499">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519503">}</span><span class="op" id="7519504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519508">realSize</span><span class="op" id="7519516">:</span>&nbsp;<span class="num" id="7519518">10</span><span class="op" id="7519520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519524">expected</span><span class="op" id="7519532">:</span>&nbsp;<span class="op" id="7519534">[</span><span class="op" id="7519535">]</span><span class="builtintype" id="7519536">byte</span><span class="op" id="7519540">(</span><span class="string" id="7519541">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7519568">)</span><span class="op" id="7519569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519572">}</span><span class="op" id="7519573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519576">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519580">sparseData</span><span class="op" id="7519590">:</span>&nbsp;<span class="op" id="7519592">[</span><span class="op" id="7519593">]</span><span class="builtintype" id="7519594">byte</span><span class="op" id="7519598">(</span><span class="string" id="7519599">&#34;abcde&#34;</span><span class="op" id="7519606">)</span><span class="op" id="7519607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519611">sparseMap</span><span class="op" id="7519620">:</span>&nbsp;<span class="op" id="7519622">[</span><span class="op" id="7519623">]</span><span class="ident" id="7519624">sparseEntry</span><span class="op" id="7519635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519640">{</span><span class="ident" id="7519641">offset</span><span class="op" id="7519647">:</span>&nbsp;<span class="num" id="7519649">1</span><span class="op" id="7519650">,</span>&nbsp;<span class="ident" id="7519652">numBytes</span><span class="op" id="7519660">:</span>&nbsp;<span class="num" id="7519662">3</span><span class="op" id="7519663">}</span><span class="op" id="7519664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519669">{</span><span class="ident" id="7519670">offset</span><span class="op" id="7519676">:</span>&nbsp;<span class="num" id="7519678">6</span><span class="op" id="7519679">,</span>&nbsp;<span class="ident" id="7519681">numBytes</span><span class="op" id="7519689">:</span>&nbsp;<span class="num" id="7519691">2</span><span class="op" id="7519692">}</span><span class="op" id="7519693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519697">}</span><span class="op" id="7519698">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519702">realSize</span><span class="op" id="7519710">:</span>&nbsp;<span class="num" id="7519712">8</span><span class="op" id="7519713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519717">expected</span><span class="op" id="7519725">:</span>&nbsp;<span class="op" id="7519727">[</span><span class="op" id="7519728">]</span><span class="builtintype" id="7519729">byte</span><span class="op" id="7519733">(</span><span class="string" id="7519734">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7519753">)</span><span class="op" id="7519754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519757">}</span><span class="op" id="7519758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519765">sparseData</span><span class="op" id="7519775">:</span>&nbsp;<span class="op" id="7519777">[</span><span class="op" id="7519778">]</span><span class="builtintype" id="7519779">byte</span><span class="op" id="7519783">(</span><span class="string" id="7519784">&#34;abcde&#34;</span><span class="op" id="7519791">)</span><span class="op" id="7519792">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519796">sparseMap</span><span class="op" id="7519805">:</span>&nbsp;<span class="op" id="7519807">[</span><span class="op" id="7519808">]</span><span class="ident" id="7519809">sparseEntry</span><span class="op" id="7519820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519825">{</span><span class="ident" id="7519826">offset</span><span class="op" id="7519832">:</span>&nbsp;<span class="num" id="7519834">1</span><span class="op" id="7519835">,</span>&nbsp;<span class="ident" id="7519837">numBytes</span><span class="op" id="7519845">:</span>&nbsp;<span class="num" id="7519847">3</span><span class="op" id="7519848">}</span><span class="op" id="7519849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519854">{</span><span class="ident" id="7519855">offset</span><span class="op" id="7519861">:</span>&nbsp;<span class="num" id="7519863">6</span><span class="op" id="7519864">,</span>&nbsp;<span class="ident" id="7519866">numBytes</span><span class="op" id="7519874">:</span>&nbsp;<span class="num" id="7519876">2</span><span class="op" id="7519877">}</span><span class="op" id="7519878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519882">}</span><span class="op" id="7519883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519887">realSize</span><span class="op" id="7519895">:</span>&nbsp;<span class="num" id="7519897">10</span><span class="op" id="7519899">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519903">expected</span><span class="op" id="7519911">:</span>&nbsp;<span class="op" id="7519913">[</span><span class="op" id="7519914">]</span><span class="builtintype" id="7519915">byte</span><span class="op" id="7519919">(</span><span class="string" id="7519920">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7519947">)</span><span class="op" id="7519948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519951">}</span><span class="op" id="7519952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7519955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519959">sparseData</span><span class="op" id="7519969">:</span>&nbsp;<span class="op" id="7519971">[</span><span class="op" id="7519972">]</span><span class="builtintype" id="7519973">byte</span><span class="op" id="7519977">(</span><span class="string" id="7519978">&#34;&#34;</span><span class="op" id="7519980">)</span><span class="op" id="7519981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7519985">sparseMap</span><span class="op" id="7519994">:</span>&nbsp;&nbsp;<span class="ident" id="7519997">nil</span><span class="op" id="7520000">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520004">realSize</span><span class="op" id="7520012">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7520016">2</span><span class="op" id="7520017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520021">expected</span><span class="op" id="7520029">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7520033">[</span><span class="op" id="7520034">]</span><span class="builtintype" id="7520035">byte</span><span class="op" id="7520039">(</span><span class="string" id="7520040">&#34;\x00\x00&#34;</span><span class="op" id="7520050">)</span><span class="op" id="7520051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520054">}</span><span class="op" id="7520055">,</span><br>
<span class="lineno"></span><span class="op" id="7520057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7520060">func</span>&nbsp;<span class="ident" id="7520065">TestSparseFileReader</span><span class="op" id="7520085">(</span><span class="ident" id="7520086">t</span>&nbsp;<span class="op" id="7520088">*</span><span class="ident" id="7520089">testing</span><span class="op" id="7520096">.</span><span class="ident" id="7520097">T</span><span class="op" id="7520098">)</span>&nbsp;<span class="op" id="7520100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7520103">for</span>&nbsp;<span class="ident" id="7520107">i</span><span class="op" id="7520108">,</span>&nbsp;<span class="ident" id="7520110">test</span>&nbsp;<span class="op" id="7520115">:=</span>&nbsp;<span class="keyword" id="7520118">range</span>&nbsp;<span class="ident" id="7520124">sparseFileReadTests</span>&nbsp;<span class="op" id="7520144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520148">r</span>&nbsp;<span class="op" id="7520150">:=</span>&nbsp;<span class="ident" id="7520153">bytes</span><span class="op" id="7520158">.</span><span class="ident" id="7520159">NewReader</span><span class="op" id="7520168">(</span><span class="ident" id="7520169">test</span><span class="op" id="7520173">.</span><span class="ident" id="7520174">sparseData</span><span class="op" id="7520184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520188">nb</span>&nbsp;<span class="op" id="7520191">:=</span>&nbsp;<span class="ident" id="7520194">int64</span><span class="op" id="7520199">(</span><span class="ident" id="7520200">r</span><span class="op" id="7520201">.</span><span class="ident" id="7520202">Len</span><span class="op" id="7520205">(</span><span class="op" id="7520206">)</span><span class="op" id="7520207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520211">sfr</span>&nbsp;<span class="op" id="7520215">:=</span>&nbsp;<span class="op" id="7520218">&amp;</span><span class="ident" id="7520219">sparseFileReader</span><span class="op" id="7520235">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520240">rfr</span><span class="op" id="7520243">:</span>&nbsp;<span class="op" id="7520245">&amp;</span><span class="ident" id="7520246">regFileReader</span><span class="op" id="7520259">{</span><span class="ident" id="7520260">r</span><span class="op" id="7520261">:</span>&nbsp;<span class="ident" id="7520263">r</span><span class="op" id="7520264">,</span>&nbsp;<span class="ident" id="7520266">nb</span><span class="op" id="7520268">:</span>&nbsp;<span class="ident" id="7520270">nb</span><span class="op" id="7520272">}</span><span class="op" id="7520273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520278">sp</span><span class="op" id="7520280">:</span>&nbsp;&nbsp;<span class="ident" id="7520283">test</span><span class="op" id="7520287">.</span><span class="ident" id="7520288">sparseMap</span><span class="op" id="7520297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520302">pos</span><span class="op" id="7520305">:</span>&nbsp;<span class="num" id="7520307">0</span><span class="op" id="7520308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520313">tot</span><span class="op" id="7520316">:</span>&nbsp;<span class="ident" id="7520318">test</span><span class="op" id="7520322">.</span><span class="ident" id="7520323">realSize</span><span class="op" id="7520331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520335">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7520339">if</span>&nbsp;<span class="ident" id="7520342">sfr</span><span class="op" id="7520345">.</span><span class="ident" id="7520346">numBytes</span><span class="op" id="7520354">(</span><span class="op" id="7520355">)</span>&nbsp;<span class="op" id="7520357">!=</span>&nbsp;<span class="ident" id="7520360">nb</span>&nbsp;<span class="op" id="7520363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520368">t</span><span class="op" id="7520369">.</span><span class="ident" id="7520370">Errorf</span><span class="op" id="7520376">(</span><span class="string" id="7520377">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7520432">,</span>&nbsp;<span class="ident" id="7520434">i</span><span class="op" id="7520435">,</span>&nbsp;<span class="ident" id="7520437">sfr</span><span class="op" id="7520440">.</span><span class="ident" id="7520441">numBytes</span><span class="op" id="7520449">(</span><span class="op" id="7520450">)</span><span class="op" id="7520451">,</span>&nbsp;<span class="ident" id="7520453">nb</span><span class="op" id="7520455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520463">buf</span><span class="op" id="7520466">,</span>&nbsp;<span class="ident" id="7520468">err</span>&nbsp;<span class="op" id="7520472">:=</span>&nbsp;<span class="ident" id="7520475">ioutil</span><span class="op" id="7520481">.</span><span class="ident" id="7520482">ReadAll</span><span class="op" id="7520489">(</span><span class="ident" id="7520490">sfr</span><span class="op" id="7520493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7520497">if</span>&nbsp;<span class="ident" id="7520500">err</span>&nbsp;<span class="op" id="7520504">!=</span>&nbsp;<span class="ident" id="7520507">nil</span>&nbsp;<span class="op" id="7520511">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520516">t</span><span class="op" id="7520517">.</span><span class="ident" id="7520518">Errorf</span><span class="op" id="7520524">(</span><span class="string" id="7520525">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7520556">,</span>&nbsp;<span class="ident" id="7520558">i</span><span class="op" id="7520559">,</span>&nbsp;<span class="ident" id="7520561">err</span><span class="op" id="7520564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7520572">if</span>&nbsp;<span class="ident" id="7520575">e</span>&nbsp;<span class="op" id="7520577">:=</span>&nbsp;<span class="ident" id="7520580">test</span><span class="op" id="7520584">.</span><span class="ident" id="7520585">expected</span><span class="op" id="7520593">;</span>&nbsp;<span class="op" id="7520595">!</span><span class="ident" id="7520596">bytes</span><span class="op" id="7520601">.</span><span class="ident" id="7520602">Equal</span><span class="op" id="7520607">(</span><span class="ident" id="7520608">buf</span><span class="op" id="7520611">,</span>&nbsp;<span class="ident" id="7520613">e</span><span class="op" id="7520614">)</span>&nbsp;<span class="op" id="7520616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520621">t</span><span class="op" id="7520622">.</span><span class="ident" id="7520623">Errorf</span><span class="op" id="7520629">(</span><span class="string" id="7520630">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7520663">,</span>&nbsp;<span class="ident" id="7520665">i</span><span class="op" id="7520666">,</span>&nbsp;<span class="ident" id="7520668">buf</span><span class="op" id="7520671">,</span>&nbsp;<span class="ident" id="7520673">e</span><span class="op" id="7520674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520678">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7520682">if</span>&nbsp;<span class="ident" id="7520685">sfr</span><span class="op" id="7520688">.</span><span class="ident" id="7520689">numBytes</span><span class="op" id="7520697">(</span><span class="op" id="7520698">)</span>&nbsp;<span class="op" id="7520700">!=</span>&nbsp;<span class="num" id="7520703">0</span>&nbsp;<span class="op" id="7520705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520710">t</span><span class="op" id="7520711">.</span><span class="ident" id="7520712">Errorf</span><span class="op" id="7520718">(</span><span class="string" id="7520719">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7520779">,</span>&nbsp;<span class="ident" id="7520781">i</span><span class="op" id="7520782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7520789">}</span><br>
<span class="lineno"></span><span class="op" id="7520791">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7520794">func</span>&nbsp;<span class="ident" id="7520799">TestSparseIncrementalRead</span><span class="op" id="7520824">(</span><span class="ident" id="7520825">t</span>&nbsp;<span class="op" id="7520827">*</span><span class="ident" id="7520828">testing</span><span class="op" id="7520835">.</span><span class="ident" id="7520836">T</span><span class="op" id="7520837">)</span>&nbsp;<span class="op" id="7520839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520842">sparseMap</span>&nbsp;<span class="op" id="7520852">:=</span>&nbsp;<span class="op" id="7520855">[</span><span class="op" id="7520856">]</span><span class="ident" id="7520857">sparseEntry</span><span class="op" id="7520868">{</span><span class="op" id="7520869">{</span><span class="num" id="7520870">10</span><span class="op" id="7520872">,</span>&nbsp;<span class="num" id="7520874">2</span><span class="op" id="7520875">}</span><span class="op" id="7520876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520879">sparseData</span>&nbsp;<span class="op" id="7520890">:=</span>&nbsp;<span class="op" id="7520893">[</span><span class="op" id="7520894">]</span><span class="builtintype" id="7520895">byte</span><span class="op" id="7520899">(</span><span class="string" id="7520900">&#34;Go&#34;</span><span class="op" id="7520904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520907">expected</span>&nbsp;<span class="op" id="7520916">:=</span>&nbsp;<span class="string" id="7520919">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7520998">r</span>&nbsp;<span class="op" id="7521000">:=</span>&nbsp;<span class="ident" id="7521003">bytes</span><span class="op" id="7521008">.</span><span class="ident" id="7521009">NewReader</span><span class="op" id="7521018">(</span><span class="ident" id="7521019">sparseData</span><span class="op" id="7521029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521032">nb</span>&nbsp;<span class="op" id="7521035">:=</span>&nbsp;<span class="ident" id="7521038">int64</span><span class="op" id="7521043">(</span><span class="ident" id="7521044">r</span><span class="op" id="7521045">.</span><span class="ident" id="7521046">Len</span><span class="op" id="7521049">(</span><span class="op" id="7521050">)</span><span class="op" id="7521051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521054">sfr</span>&nbsp;<span class="op" id="7521058">:=</span>&nbsp;<span class="op" id="7521061">&amp;</span><span class="ident" id="7521062">sparseFileReader</span><span class="op" id="7521078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521082">rfr</span><span class="op" id="7521085">:</span>&nbsp;<span class="op" id="7521087">&amp;</span><span class="ident" id="7521088">regFileReader</span><span class="op" id="7521101">{</span><span class="ident" id="7521102">r</span><span class="op" id="7521103">:</span>&nbsp;<span class="ident" id="7521105">r</span><span class="op" id="7521106">,</span>&nbsp;<span class="ident" id="7521108">nb</span><span class="op" id="7521110">:</span>&nbsp;<span class="ident" id="7521112">nb</span><span class="op" id="7521114">}</span><span class="op" id="7521115">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521119">sp</span><span class="op" id="7521121">:</span>&nbsp;&nbsp;<span class="ident" id="7521124">sparseMap</span><span class="op" id="7521133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521137">pos</span><span class="op" id="7521140">:</span>&nbsp;<span class="num" id="7521142">0</span><span class="op" id="7521143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521147">tot</span><span class="op" id="7521150">:</span>&nbsp;<span class="ident" id="7521152">int64</span><span class="op" id="7521157">(</span><span class="builtinfunc" id="7521158">len</span><span class="op" id="7521161">(</span><span class="ident" id="7521162">expected</span><span class="op" id="7521170">)</span><span class="op" id="7521171">)</span><span class="op" id="7521172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7521179">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7521248">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521296">var</span>&nbsp;<span class="ident" id="7521300">outputBuf</span>&nbsp;<span class="ident" id="7521310">bytes</span><span class="op" id="7521315">.</span><span class="ident" id="7521316">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521324">buf</span>&nbsp;<span class="op" id="7521328">:=</span>&nbsp;<span class="builtinfunc" id="7521331">make</span><span class="op" id="7521335">(</span><span class="op" id="7521336">[</span><span class="op" id="7521337">]</span><span class="builtintype" id="7521338">byte</span><span class="op" id="7521342">,</span>&nbsp;<span class="num" id="7521344">6</span><span class="op" id="7521345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521348">for</span>&nbsp;<span class="op" id="7521352">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521356">n</span><span class="op" id="7521357">,</span>&nbsp;<span class="ident" id="7521359">err</span>&nbsp;<span class="op" id="7521363">:=</span>&nbsp;<span class="ident" id="7521366">sfr</span><span class="op" id="7521369">.</span><span class="ident" id="7521370">Read</span><span class="op" id="7521374">(</span><span class="ident" id="7521375">buf</span><span class="op" id="7521378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521382">if</span>&nbsp;<span class="ident" id="7521385">err</span>&nbsp;<span class="op" id="7521389">==</span>&nbsp;<span class="ident" id="7521392">io</span><span class="op" id="7521394">.</span><span class="ident" id="7521395">EOF</span>&nbsp;<span class="op" id="7521399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521404">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521416">if</span>&nbsp;<span class="ident" id="7521419">err</span>&nbsp;<span class="op" id="7521423">!=</span>&nbsp;<span class="ident" id="7521426">nil</span>&nbsp;<span class="op" id="7521430">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521435">t</span><span class="op" id="7521436">.</span><span class="ident" id="7521437">Errorf</span><span class="op" id="7521443">(</span><span class="string" id="7521444">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7521473">,</span>&nbsp;<span class="ident" id="7521475">err</span><span class="op" id="7521478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521486">if</span>&nbsp;<span class="ident" id="7521489">n</span>&nbsp;<span class="op" id="7521491">&gt;</span>&nbsp;<span class="num" id="7521493">0</span>&nbsp;<span class="op" id="7521495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521500">_</span><span class="op" id="7521501">,</span>&nbsp;<span class="ident" id="7521503">err</span>&nbsp;<span class="op" id="7521507">:=</span>&nbsp;<span class="ident" id="7521510">outputBuf</span><span class="op" id="7521519">.</span><span class="ident" id="7521520">Write</span><span class="op" id="7521525">(</span><span class="ident" id="7521526">buf</span><span class="op" id="7521529">[</span><span class="op" id="7521530">:</span><span class="ident" id="7521531">n</span><span class="op" id="7521532">]</span><span class="op" id="7521533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521538">if</span>&nbsp;<span class="ident" id="7521541">err</span>&nbsp;<span class="op" id="7521545">!=</span>&nbsp;<span class="ident" id="7521548">nil</span>&nbsp;<span class="op" id="7521552">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521558">t</span><span class="op" id="7521559">.</span><span class="ident" id="7521560">Errorf</span><span class="op" id="7521566">(</span><span class="string" id="7521567">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7521597">,</span>&nbsp;<span class="ident" id="7521599">err</span><span class="op" id="7521602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521617">got</span>&nbsp;<span class="op" id="7521621">:=</span>&nbsp;<span class="ident" id="7521624">outputBuf</span><span class="op" id="7521633">.</span><span class="ident" id="7521634">String</span><span class="op" id="7521640">(</span><span class="op" id="7521641">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7521644">if</span>&nbsp;<span class="ident" id="7521647">got</span>&nbsp;<span class="op" id="7521651">!=</span>&nbsp;<span class="ident" id="7521654">expected</span>&nbsp;<span class="op" id="7521663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521667">t</span><span class="op" id="7521668">.</span><span class="ident" id="7521669">Errorf</span><span class="op" id="7521675">(</span><span class="string" id="7521676">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7521700">,</span>&nbsp;<span class="ident" id="7521702">got</span><span class="op" id="7521705">,</span>&nbsp;<span class="ident" id="7521707">expected</span><span class="op" id="7521715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521718">}</span><br>
<span class="lineno"></span><span class="op" id="7521720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7521723">func</span>&nbsp;<span class="ident" id="7521728">TestReadGNUSparseMap0x1</span><span class="op" id="7521751">(</span><span class="ident" id="7521752">t</span>&nbsp;<span class="op" id="7521754">*</span><span class="ident" id="7521755">testing</span><span class="op" id="7521762">.</span><span class="ident" id="7521763">T</span><span class="op" id="7521764">)</span>&nbsp;<span class="op" id="7521766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521769">headers</span>&nbsp;<span class="op" id="7521777">:=</span>&nbsp;<span class="keyword" id="7521780">map</span><span class="op" id="7521783">[</span><span class="builtintype" id="7521784">string</span><span class="op" id="7521790">]</span><span class="builtintype" id="7521791">string</span><span class="op" id="7521797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521801">paxGNUSparseNumBlocks</span><span class="op" id="7521822">:</span>&nbsp;<span class="string" id="7521824">&#34;4&#34;</span><span class="op" id="7521827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521831">paxGNUSparseMap</span><span class="op" id="7521846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7521854">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7521874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521877">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7521880">expected</span>&nbsp;<span class="op" id="7521889">:=</span>&nbsp;<span class="op" id="7521892">[</span><span class="op" id="7521893">]</span><span class="ident" id="7521894">sparseEntry</span><span class="op" id="7521905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521909">{</span><span class="ident" id="7521910">offset</span><span class="op" id="7521916">:</span>&nbsp;<span class="num" id="7521918">0</span><span class="op" id="7521919">,</span>&nbsp;<span class="ident" id="7521921">numBytes</span><span class="op" id="7521929">:</span>&nbsp;<span class="num" id="7521931">5</span><span class="op" id="7521932">}</span><span class="op" id="7521933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521937">{</span><span class="ident" id="7521938">offset</span><span class="op" id="7521944">:</span>&nbsp;<span class="num" id="7521946">10</span><span class="op" id="7521948">,</span>&nbsp;<span class="ident" id="7521950">numBytes</span><span class="op" id="7521958">:</span>&nbsp;<span class="num" id="7521960">5</span><span class="op" id="7521961">}</span><span class="op" id="7521962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521966">{</span><span class="ident" id="7521967">offset</span><span class="op" id="7521973">:</span>&nbsp;<span class="num" id="7521975">20</span><span class="op" id="7521977">,</span>&nbsp;<span class="ident" id="7521979">numBytes</span><span class="op" id="7521987">:</span>&nbsp;<span class="num" id="7521989">5</span><span class="op" id="7521990">}</span><span class="op" id="7521991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7521995">{</span><span class="ident" id="7521996">offset</span><span class="op" id="7522002">:</span>&nbsp;<span class="num" id="7522004">30</span><span class="op" id="7522006">,</span>&nbsp;<span class="ident" id="7522008">numBytes</span><span class="op" id="7522016">:</span>&nbsp;<span class="num" id="7522018">5</span><span class="op" id="7522019">}</span><span class="op" id="7522020">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7522023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522027">sp</span><span class="op" id="7522029">,</span>&nbsp;<span class="ident" id="7522031">err</span>&nbsp;<span class="op" id="7522035">:=</span>&nbsp;<span class="ident" id="7522038">readGNUSparseMap0x1</span><span class="op" id="7522057">(</span><span class="ident" id="7522058">headers</span><span class="op" id="7522065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7522068">if</span>&nbsp;<span class="ident" id="7522071">err</span>&nbsp;<span class="op" id="7522075">!=</span>&nbsp;<span class="ident" id="7522078">nil</span>&nbsp;<span class="op" id="7522082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522086">t</span><span class="op" id="7522087">.</span><span class="ident" id="7522088">Errorf</span><span class="op" id="7522094">(</span><span class="string" id="7522095">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7522117">,</span>&nbsp;<span class="ident" id="7522119">err</span><span class="op" id="7522122">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7522125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7522128">if</span>&nbsp;<span class="op" id="7522131">!</span><span class="ident" id="7522132">reflect</span><span class="op" id="7522139">.</span><span class="ident" id="7522140">DeepEqual</span><span class="op" id="7522149">(</span><span class="ident" id="7522150">sp</span><span class="op" id="7522152">,</span>&nbsp;<span class="ident" id="7522154">expected</span><span class="op" id="7522162">)</span>&nbsp;<span class="op" id="7522164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522168">t</span><span class="op" id="7522169">.</span><span class="ident" id="7522170">Errorf</span><span class="op" id="7522176">(</span><span class="string" id="7522177">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7522218">,</span>&nbsp;<span class="ident" id="7522220">sp</span><span class="op" id="7522222">,</span>&nbsp;<span class="ident" id="7522224">expected</span><span class="op" id="7522232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7522235">}</span><br>
<span class="lineno"></span><span class="op" id="7522237">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7522240">func</span>&nbsp;<span class="ident" id="7522245">TestReadGNUSparseMap1x0</span><span class="op" id="7522268">(</span><span class="ident" id="7522269">t</span>&nbsp;<span class="op" id="7522271">*</span><span class="ident" id="7522272">testing</span><span class="op" id="7522279">.</span><span class="ident" id="7522280">T</span><span class="op" id="7522281">)</span>&nbsp;<span class="op" id="7522283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7522286">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522370">numEntries</span>&nbsp;<span class="op" id="7522381">:=</span>&nbsp;<span class="num" id="7522384">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522389">expected</span>&nbsp;<span class="op" id="7522398">:=</span>&nbsp;<span class="builtinfunc" id="7522401">make</span><span class="op" id="7522405">(</span><span class="op" id="7522406">[</span><span class="op" id="7522407">]</span><span class="ident" id="7522408">sparseEntry</span><span class="op" id="7522419">,</span>&nbsp;<span class="num" id="7522421">0</span><span class="op" id="7522422">,</span>&nbsp;<span class="ident" id="7522424">numEntries</span><span class="op" id="7522434">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522437">sparseMap</span>&nbsp;<span class="op" id="7522447">:=</span>&nbsp;<span class="builtinfunc" id="7522450">new</span><span class="op" id="7522453">(</span><span class="ident" id="7522454">bytes</span><span class="op" id="7522459">.</span><span class="ident" id="7522460">Buffer</span><span class="op" id="7522466">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522470">fmt</span><span class="op" id="7522473">.</span><span class="ident" id="7522474">Fprintf</span><span class="op" id="7522481">(</span><span class="ident" id="7522482">sparseMap</span><span class="op" id="7522491">,</span>&nbsp;<span class="string" id="7522493">&#34;%d\n&#34;</span><span class="op" id="7522499">,</span>&nbsp;<span class="ident" id="7522501">numEntries</span><span class="op" id="7522511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7522514">for</span>&nbsp;<span class="ident" id="7522518">i</span>&nbsp;<span class="op" id="7522520">:=</span>&nbsp;<span class="num" id="7522523">0</span><span class="op" id="7522524">;</span>&nbsp;<span class="ident" id="7522526">i</span>&nbsp;<span class="op" id="7522528">&lt;</span>&nbsp;<span class="ident" id="7522530">numEntries</span><span class="op" id="7522540">;</span>&nbsp;<span class="ident" id="7522542">i</span><span class="op" id="7522543">++</span>&nbsp;<span class="op" id="7522546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522550">offset</span>&nbsp;<span class="op" id="7522557">:=</span>&nbsp;<span class="ident" id="7522560">int64</span><span class="op" id="7522565">(</span><span class="num" id="7522566">2048</span>&nbsp;<span class="op" id="7522571">*</span>&nbsp;<span class="ident" id="7522573">i</span><span class="op" id="7522574">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522578">numBytes</span>&nbsp;<span class="op" id="7522587">:=</span>&nbsp;<span class="ident" id="7522590">int64</span><span class="op" id="7522595">(</span><span class="num" id="7522596">1024</span><span class="op" id="7522600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522604">expected</span>&nbsp;<span class="op" id="7522613">=</span>&nbsp;<span class="builtinfunc" id="7522615">append</span><span class="op" id="7522621">(</span><span class="ident" id="7522622">expected</span><span class="op" id="7522630">,</span>&nbsp;<span class="ident" id="7522632">sparseEntry</span><span class="op" id="7522643">{</span><span class="ident" id="7522644">offset</span><span class="op" id="7522650">:</span>&nbsp;<span class="ident" id="7522652">offset</span><span class="op" id="7522658">,</span>&nbsp;<span class="ident" id="7522660">numBytes</span><span class="op" id="7522668">:</span>&nbsp;<span class="ident" id="7522670">numBytes</span><span class="op" id="7522678">}</span><span class="op" id="7522679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522683">fmt</span><span class="op" id="7522686">.</span><span class="ident" id="7522687">Fprintf</span><span class="op" id="7522694">(</span><span class="ident" id="7522695">sparseMap</span><span class="op" id="7522704">,</span>&nbsp;<span class="string" id="7522706">&#34;%d\n%d\n&#34;</span><span class="op" id="7522716">,</span>&nbsp;<span class="ident" id="7522718">offset</span><span class="op" id="7522724">,</span>&nbsp;<span class="ident" id="7522726">numBytes</span><span class="op" id="7522734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7522737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7522741">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522820">headerBlocks</span>&nbsp;<span class="op" id="7522833">:=</span>&nbsp;<span class="op" id="7522836">(</span><span class="ident" id="7522837">sparseMap</span><span class="op" id="7522846">.</span><span class="ident" id="7522847">Len</span><span class="op" id="7522850">(</span><span class="op" id="7522851">)</span>&nbsp;<span class="op" id="7522853">+</span>&nbsp;<span class="ident" id="7522855">blockSize</span>&nbsp;<span class="op" id="7522865">-</span>&nbsp;<span class="num" id="7522867">1</span><span class="op" id="7522868">)</span>&nbsp;<span class="op" id="7522870">/</span>&nbsp;<span class="ident" id="7522872">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522883">bufLen</span>&nbsp;<span class="op" id="7522890">:=</span>&nbsp;<span class="ident" id="7522893">blockSize</span>&nbsp;<span class="op" id="7522903">*</span>&nbsp;<span class="ident" id="7522905">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7522919">buf</span>&nbsp;<span class="op" id="7522923">:=</span>&nbsp;<span class="builtinfunc" id="7522926">make</span><span class="op" id="7522930">(</span><span class="op" id="7522931">[</span><span class="op" id="7522932">]</span><span class="builtintype" id="7522933">byte</span><span class="op" id="7522937">,</span>&nbsp;<span class="ident" id="7522939">bufLen</span><span class="op" id="7522945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7522948">copy</span><span class="op" id="7522952">(</span><span class="ident" id="7522953">buf</span><span class="op" id="7522956">,</span>&nbsp;<span class="ident" id="7522958">sparseMap</span><span class="op" id="7522967">.</span><span class="ident" id="7522968">Bytes</span><span class="op" id="7522973">(</span><span class="op" id="7522974">)</span><span class="op" id="7522975">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7522979">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523020">r</span>&nbsp;<span class="op" id="7523022">:=</span>&nbsp;<span class="ident" id="7523025">bytes</span><span class="op" id="7523030">.</span><span class="ident" id="7523031">NewReader</span><span class="op" id="7523040">(</span><span class="ident" id="7523041">buf</span><span class="op" id="7523044">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7523048">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523072">sp</span><span class="op" id="7523074">,</span>&nbsp;<span class="ident" id="7523076">err</span>&nbsp;<span class="op" id="7523080">:=</span>&nbsp;<span class="ident" id="7523083">readGNUSparseMap1x0</span><span class="op" id="7523102">(</span><span class="ident" id="7523103">r</span><span class="op" id="7523104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523107">if</span>&nbsp;<span class="ident" id="7523110">err</span>&nbsp;<span class="op" id="7523114">!=</span>&nbsp;<span class="ident" id="7523117">nil</span>&nbsp;<span class="op" id="7523121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523125">t</span><span class="op" id="7523126">.</span><span class="ident" id="7523127">Errorf</span><span class="op" id="7523133">(</span><span class="string" id="7523134">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7523156">,</span>&nbsp;<span class="ident" id="7523158">err</span><span class="op" id="7523161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7523164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523167">if</span>&nbsp;<span class="op" id="7523170">!</span><span class="ident" id="7523171">reflect</span><span class="op" id="7523178">.</span><span class="ident" id="7523179">DeepEqual</span><span class="op" id="7523188">(</span><span class="ident" id="7523189">sp</span><span class="op" id="7523191">,</span>&nbsp;<span class="ident" id="7523193">expected</span><span class="op" id="7523201">)</span>&nbsp;<span class="op" id="7523203">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523207">t</span><span class="op" id="7523208">.</span><span class="ident" id="7523209">Errorf</span><span class="op" id="7523215">(</span><span class="string" id="7523216">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7523257">,</span>&nbsp;<span class="ident" id="7523259">sp</span><span class="op" id="7523261">,</span>&nbsp;<span class="ident" id="7523263">expected</span><span class="op" id="7523271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7523274">}</span><br>
<span class="lineno"></span><span class="op" id="7523276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7523279">func</span>&nbsp;<span class="ident" id="7523284">TestUninitializedRead</span><span class="op" id="7523305">(</span><span class="ident" id="7523306">t</span>&nbsp;<span class="op" id="7523308">*</span><span class="ident" id="7523309">testing</span><span class="op" id="7523316">.</span><span class="ident" id="7523317">T</span><span class="op" id="7523318">)</span>&nbsp;<span class="op" id="7523320">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523323">test</span>&nbsp;<span class="op" id="7523328">:=</span>&nbsp;<span class="ident" id="7523331">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523343">f</span><span class="op" id="7523344">,</span>&nbsp;<span class="ident" id="7523346">err</span>&nbsp;<span class="op" id="7523350">:=</span>&nbsp;<span class="ident" id="7523353">os</span><span class="op" id="7523355">.</span><span class="ident" id="7523356">Open</span><span class="op" id="7523360">(</span><span class="ident" id="7523361">test</span><span class="op" id="7523365">.</span><span class="ident" id="7523366">file</span><span class="op" id="7523370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523373">if</span>&nbsp;<span class="ident" id="7523376">err</span>&nbsp;<span class="op" id="7523380">!=</span>&nbsp;<span class="ident" id="7523383">nil</span>&nbsp;<span class="op" id="7523387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523391">t</span><span class="op" id="7523392">.</span><span class="ident" id="7523393">Fatalf</span><span class="op" id="7523399">(</span><span class="string" id="7523400">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7523422">,</span>&nbsp;<span class="ident" id="7523424">err</span><span class="op" id="7523427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7523430">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523433">defer</span>&nbsp;<span class="ident" id="7523439">f</span><span class="op" id="7523440">.</span><span class="ident" id="7523441">Close</span><span class="op" id="7523446">(</span><span class="op" id="7523447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523451">tr</span>&nbsp;<span class="op" id="7523454">:=</span>&nbsp;<span class="ident" id="7523457">NewReader</span><span class="op" id="7523466">(</span><span class="ident" id="7523467">f</span><span class="op" id="7523468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523471">_</span><span class="op" id="7523472">,</span>&nbsp;<span class="ident" id="7523474">err</span>&nbsp;<span class="op" id="7523478">=</span>&nbsp;<span class="ident" id="7523480">tr</span><span class="op" id="7523482">.</span><span class="ident" id="7523483">Read</span><span class="op" id="7523487">(</span><span class="op" id="7523488">[</span><span class="op" id="7523489">]</span><span class="builtintype" id="7523490">byte</span><span class="op" id="7523494">{</span><span class="op" id="7523495">}</span><span class="op" id="7523496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7523499">if</span>&nbsp;<span class="ident" id="7523502">err</span>&nbsp;<span class="op" id="7523506">==</span>&nbsp;<span class="ident" id="7523509">nil</span>&nbsp;<span class="op" id="7523513">||</span>&nbsp;<span class="ident" id="7523516">err</span>&nbsp;<span class="op" id="7523520">!=</span>&nbsp;<span class="ident" id="7523523">io</span><span class="op" id="7523525">.</span><span class="ident" id="7523526">EOF</span>&nbsp;<span class="op" id="7523530">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7523534">t</span><span class="op" id="7523535">.</span><span class="ident" id="7523536">Errorf</span><span class="op" id="7523542">(</span><span class="string" id="7523543">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7523576">,</span>&nbsp;<span class="ident" id="7523578">err</span><span class="op" id="7523581">,</span>&nbsp;<span class="ident" id="7523583">io</span><span class="op" id="7523585">.</span><span class="ident" id="7523586">EOF</span><span class="op" id="7523589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7523592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7523595">}</span>
</div>
</body>
</html>
