<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html" class="current">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1214762">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1214817">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1214871">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1214922">package</span>&nbsp;<span class="ident" id="1214930">template_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1214945">import</span>&nbsp;<span class="op" id="1214952">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1214955">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1214961">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1214974">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1214981">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1214987">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1215004">&#34;text/template&#34;</span><br>
<span class="lineno"></span><span class="op" id="1215020">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1215023">//&nbsp;templateFile&nbsp;defines&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;template&nbsp;to&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;file,&nbsp;for&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="1215111">type</span>&nbsp;<span class="ident" id="1215116">templateFile</span>&nbsp;<span class="keyword" id="1215129">struct</span>&nbsp;<span class="op" id="1215136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215139">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1215148">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215156">contents</span>&nbsp;<span class="builtintype" id="1215165">string</span><br>
<span class="lineno">20</span><span class="op" id="1215172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1215175">func</span>&nbsp;<span class="ident" id="1215180">createTestDir</span><span class="op" id="1215193">(</span><span class="ident" id="1215194">files</span>&nbsp;<span class="op" id="1215200">[</span><span class="op" id="1215201">]</span><span class="ident" id="1215202">templateFile</span><span class="op" id="1215214">)</span>&nbsp;<span class="builtintype" id="1215216">string</span>&nbsp;<span class="op" id="1215223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215226">dir</span><span class="op" id="1215229">,</span>&nbsp;<span class="ident" id="1215231">err</span>&nbsp;<span class="op" id="1215235">:=</span>&nbsp;<span class="ident" id="1215238">ioutil</span><span class="op" id="1215244">.</span><span class="ident" id="1215245">TempDir</span><span class="op" id="1215252">(</span><span class="string" id="1215253">&#34;&#34;</span><span class="op" id="1215255">,</span>&nbsp;<span class="string" id="1215257">&#34;template&#34;</span><span class="op" id="1215267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215270">if</span>&nbsp;<span class="ident" id="1215273">err</span>&nbsp;<span class="op" id="1215277">!=</span>&nbsp;<span class="builtintype" id="1215280">nil</span>&nbsp;<span class="op" id="1215284">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215288">log</span><span class="op" id="1215291">.</span><span class="ident" id="1215292">Fatal</span><span class="op" id="1215297">(</span><span class="ident" id="1215298">err</span><span class="op" id="1215301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1215304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215307">for</span>&nbsp;<span class="ident" id="1215311">_</span><span class="op" id="1215312">,</span>&nbsp;<span class="ident" id="1215314">file</span>&nbsp;<span class="op" id="1215319">:=</span>&nbsp;<span class="keyword" id="1215322">range</span>&nbsp;<span class="ident" id="1215328">files</span>&nbsp;<span class="op" id="1215334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215338">f</span><span class="op" id="1215339">,</span>&nbsp;<span class="ident" id="1215341">err</span>&nbsp;<span class="op" id="1215345">:=</span>&nbsp;<span class="ident" id="1215348">os</span><span class="op" id="1215350">.</span><span class="ident" id="1215351">Create</span><span class="op" id="1215357">(</span><span class="ident" id="1215358">filepath</span><span class="op" id="1215366">.</span><span class="ident" id="1215367">Join</span><span class="op" id="1215371">(</span><span class="ident" id="1215372">dir</span><span class="op" id="1215375">,</span>&nbsp;<span class="ident" id="1215377">file</span><span class="op" id="1215381">.</span><span class="ident" id="1215382">name</span><span class="op" id="1215386">)</span><span class="op" id="1215387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215391">if</span>&nbsp;<span class="ident" id="1215394">err</span>&nbsp;<span class="op" id="1215398">!=</span>&nbsp;<span class="builtintype" id="1215401">nil</span>&nbsp;<span class="op" id="1215405">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215410">log</span><span class="op" id="1215413">.</span><span class="ident" id="1215414">Fatal</span><span class="op" id="1215419">(</span><span class="ident" id="1215420">err</span><span class="op" id="1215423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1215427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215431">defer</span>&nbsp;<span class="ident" id="1215437">f</span><span class="op" id="1215438">.</span><span class="ident" id="1215439">Close</span><span class="op" id="1215444">(</span><span class="op" id="1215445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215449">_</span><span class="op" id="1215450">,</span>&nbsp;<span class="ident" id="1215452">err</span>&nbsp;<span class="op" id="1215456">=</span>&nbsp;<span class="ident" id="1215458">io</span><span class="op" id="1215460">.</span><span class="ident" id="1215461">WriteString</span><span class="op" id="1215472">(</span><span class="ident" id="1215473">f</span><span class="op" id="1215474">,</span>&nbsp;<span class="ident" id="1215476">file</span><span class="op" id="1215480">.</span><span class="ident" id="1215481">contents</span><span class="op" id="1215489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215493">if</span>&nbsp;<span class="ident" id="1215496">err</span>&nbsp;<span class="op" id="1215500">!=</span>&nbsp;<span class="builtintype" id="1215503">nil</span>&nbsp;<span class="op" id="1215507">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215512">log</span><span class="op" id="1215515">.</span><span class="ident" id="1215516">Fatal</span><span class="op" id="1215521">(</span><span class="ident" id="1215522">err</span><span class="op" id="1215525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1215529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1215532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1215535">return</span>&nbsp;<span class="ident" id="1215542">dir</span><br>
<span class="lineno"></span><span class="op" id="1215546">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="1215549">//&nbsp;Here&nbsp;we&nbsp;demonstrate&nbsp;loading&nbsp;a&nbsp;set&nbsp;of&nbsp;templates&nbsp;from&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="1215617">func</span>&nbsp;<span class="ident" id="1215622">ExampleTemplate_glob</span><span class="op" id="1215642">(</span><span class="op" id="1215643">)</span>&nbsp;<span class="op" id="1215645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1215648">//&nbsp;Here&nbsp;we&nbsp;create&nbsp;a&nbsp;temporary&nbsp;directory&nbsp;and&nbsp;populate&nbsp;it&nbsp;with&nbsp;our&nbsp;sample</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1215721">//&nbsp;template&nbsp;definition&nbsp;files;&nbsp;usually&nbsp;the&nbsp;template&nbsp;files&nbsp;would&nbsp;already</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1215793">//&nbsp;exist&nbsp;in&nbsp;some&nbsp;location&nbsp;known&nbsp;to&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1215842">dir</span>&nbsp;<span class="op" id="1215846">:=</span>&nbsp;<span class="ident" id="1215849">createTestDir</span><span class="op" id="1215862">(</span><span class="op" id="1215863">[</span><span class="op" id="1215864">]</span><span class="ident" id="1215865">templateFile</span><span class="op" id="1215877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1215881">//&nbsp;T0.tmpl&nbsp;is&nbsp;a&nbsp;plain&nbsp;template&nbsp;file&nbsp;that&nbsp;just&nbsp;invokes&nbsp;T1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1215941">{</span><span class="string" id="1215942">&#34;T0.tmpl&#34;</span><span class="op" id="1215951">,</span>&nbsp;<span class="string" id="1215953">`T0&nbsp;invokes&nbsp;T1:&nbsp;({{template&nbsp;&#34;T1&#34;}})`</span><span class="op" id="1215989">}</span><span class="op" id="1215990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1215994">//&nbsp;T1.tmpl&nbsp;defines&nbsp;a&nbsp;template,&nbsp;T1&nbsp;that&nbsp;invokes&nbsp;T2.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1216047">{</span><span class="string" id="1216048">&#34;T1.tmpl&#34;</span><span class="op" id="1216057">,</span>&nbsp;<span class="string" id="1216059">`{{define&nbsp;&#34;T1&#34;}}T1&nbsp;invokes&nbsp;T2:&nbsp;({{template&nbsp;&#34;T2&#34;}}){{end}}`</span><span class="op" id="1216117">}</span><span class="op" id="1216118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216122">//&nbsp;T2.tmpl&nbsp;defines&nbsp;a&nbsp;template&nbsp;T2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1216158">{</span><span class="string" id="1216159">&#34;T2.tmpl&#34;</span><span class="op" id="1216168">,</span>&nbsp;<span class="string" id="1216170">`{{define&nbsp;&#34;T2&#34;}}This&nbsp;is&nbsp;T2{{end}}`</span><span class="op" id="1216204">}</span><span class="op" id="1216205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1216208">}</span><span class="op" id="1216209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216212">//&nbsp;Clean&nbsp;up&nbsp;after&nbsp;the&nbsp;test;&nbsp;another&nbsp;quirk&nbsp;of&nbsp;running&nbsp;as&nbsp;an&nbsp;example.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1216281">defer</span>&nbsp;<span class="ident" id="1216287">os</span><span class="op" id="1216289">.</span><span class="ident" id="1216290">RemoveAll</span><span class="op" id="1216299">(</span><span class="ident" id="1216300">dir</span><span class="op" id="1216303">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216307">//&nbsp;pattern&nbsp;is&nbsp;the&nbsp;glob&nbsp;pattern&nbsp;used&nbsp;to&nbsp;find&nbsp;all&nbsp;the&nbsp;template&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1216376">pattern</span>&nbsp;<span class="op" id="1216384">:=</span>&nbsp;<span class="ident" id="1216387">filepath</span><span class="op" id="1216395">.</span><span class="ident" id="1216396">Join</span><span class="op" id="1216400">(</span><span class="ident" id="1216401">dir</span><span class="op" id="1216404">,</span>&nbsp;<span class="string" id="1216406">&#34;*.tmpl&#34;</span><span class="op" id="1216414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216418">//&nbsp;Here&nbsp;starts&nbsp;the&nbsp;example&nbsp;proper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216454">//&nbsp;T0.tmpl&nbsp;is&nbsp;the&nbsp;first&nbsp;name&nbsp;matched,&nbsp;so&nbsp;it&nbsp;becomes&nbsp;the&nbsp;starting&nbsp;template,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216530">//&nbsp;the&nbsp;value&nbsp;returned&nbsp;by&nbsp;ParseGlob.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1216567">tmpl</span>&nbsp;<span class="op" id="1216572">:=</span>&nbsp;<span class="ident" id="1216575">template</span><span class="op" id="1216583">.</span><span class="ident" id="1216584">Must</span><span class="op" id="1216588">(</span><span class="ident" id="1216589">template</span><span class="op" id="1216597">.</span><span class="ident" id="1216598">ParseGlob</span><span class="op" id="1216607">(</span><span class="ident" id="1216608">pattern</span><span class="op" id="1216615">)</span><span class="op" id="1216616">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1216620">err</span>&nbsp;<span class="op" id="1216624">:=</span>&nbsp;<span class="ident" id="1216627">tmpl</span><span class="op" id="1216631">.</span><span class="ident" id="1216632">Execute</span><span class="op" id="1216639">(</span><span class="ident" id="1216640">os</span><span class="op" id="1216642">.</span><span class="ident" id="1216643">Stdout</span><span class="op" id="1216649">,</span>&nbsp;<span class="builtintype" id="1216651">nil</span><span class="op" id="1216654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1216657">if</span>&nbsp;<span class="ident" id="1216660">err</span>&nbsp;<span class="op" id="1216664">!=</span>&nbsp;<span class="builtintype" id="1216667">nil</span>&nbsp;<span class="op" id="1216671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1216675">log</span><span class="op" id="1216678">.</span><span class="ident" id="1216679">Fatalf</span><span class="op" id="1216685">(</span><span class="string" id="1216686">&#34;template&nbsp;execution:&nbsp;%s&#34;</span><span class="op" id="1216710">,</span>&nbsp;<span class="ident" id="1216712">err</span><span class="op" id="1216715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1216718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216721">//&nbsp;Output:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1216733">//&nbsp;T0&nbsp;invokes&nbsp;T1:&nbsp;(T1&nbsp;invokes&nbsp;T2:&nbsp;(This&nbsp;is&nbsp;T2))</span><br>
<span class="lineno"></span><span class="op" id="1216781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1216784">//&nbsp;This&nbsp;example&nbsp;demonstrates&nbsp;one&nbsp;way&nbsp;to&nbsp;share&nbsp;some&nbsp;templates</span><br>
<span class="lineno"></span><span class="comment" id="1216845">//&nbsp;and&nbsp;use&nbsp;them&nbsp;in&nbsp;different&nbsp;contexts.&nbsp;In&nbsp;this&nbsp;variant&nbsp;we&nbsp;add&nbsp;multiple&nbsp;driver</span><br>
<span class="lineno">75</span><span class="comment" id="1216923">//&nbsp;templates&nbsp;by&nbsp;hand&nbsp;to&nbsp;an&nbsp;existing&nbsp;bundle&nbsp;of&nbsp;templates.</span><br>
<span class="lineno"></span><span class="keyword" id="1216980">func</span>&nbsp;<span class="ident" id="1216985">ExampleTemplate_helpers</span><span class="op" id="1217008">(</span><span class="op" id="1217009">)</span>&nbsp;<span class="op" id="1217011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217014">//&nbsp;Here&nbsp;we&nbsp;create&nbsp;a&nbsp;temporary&nbsp;directory&nbsp;and&nbsp;populate&nbsp;it&nbsp;with&nbsp;our&nbsp;sample</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217087">//&nbsp;template&nbsp;definition&nbsp;files;&nbsp;usually&nbsp;the&nbsp;template&nbsp;files&nbsp;would&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217159">//&nbsp;exist&nbsp;in&nbsp;some&nbsp;location&nbsp;known&nbsp;to&nbsp;the&nbsp;program.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1217208">dir</span>&nbsp;<span class="op" id="1217212">:=</span>&nbsp;<span class="ident" id="1217215">createTestDir</span><span class="op" id="1217228">(</span><span class="op" id="1217229">[</span><span class="op" id="1217230">]</span><span class="ident" id="1217231">templateFile</span><span class="op" id="1217243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217247">//&nbsp;T1.tmpl&nbsp;defines&nbsp;a&nbsp;template,&nbsp;T1&nbsp;that&nbsp;invokes&nbsp;T2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1217300">{</span><span class="string" id="1217301">&#34;T1.tmpl&#34;</span><span class="op" id="1217310">,</span>&nbsp;<span class="string" id="1217312">`{{define&nbsp;&#34;T1&#34;}}T1&nbsp;invokes&nbsp;T2:&nbsp;({{template&nbsp;&#34;T2&#34;}}){{end}}`</span><span class="op" id="1217370">}</span><span class="op" id="1217371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217375">//&nbsp;T2.tmpl&nbsp;defines&nbsp;a&nbsp;template&nbsp;T2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1217411">{</span><span class="string" id="1217412">&#34;T2.tmpl&#34;</span><span class="op" id="1217421">,</span>&nbsp;<span class="string" id="1217423">`{{define&nbsp;&#34;T2&#34;}}This&nbsp;is&nbsp;T2{{end}}`</span><span class="op" id="1217457">}</span><span class="op" id="1217458">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1217461">}</span><span class="op" id="1217462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217465">//&nbsp;Clean&nbsp;up&nbsp;after&nbsp;the&nbsp;test;&nbsp;another&nbsp;quirk&nbsp;of&nbsp;running&nbsp;as&nbsp;an&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1217534">defer</span>&nbsp;<span class="ident" id="1217540">os</span><span class="op" id="1217542">.</span><span class="ident" id="1217543">RemoveAll</span><span class="op" id="1217552">(</span><span class="ident" id="1217553">dir</span><span class="op" id="1217556">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217560">//&nbsp;pattern&nbsp;is&nbsp;the&nbsp;glob&nbsp;pattern&nbsp;used&nbsp;to&nbsp;find&nbsp;all&nbsp;the&nbsp;template&nbsp;files.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1217629">pattern</span>&nbsp;<span class="op" id="1217637">:=</span>&nbsp;<span class="ident" id="1217640">filepath</span><span class="op" id="1217648">.</span><span class="ident" id="1217649">Join</span><span class="op" id="1217653">(</span><span class="ident" id="1217654">dir</span><span class="op" id="1217657">,</span>&nbsp;<span class="string" id="1217659">&#34;*.tmpl&#34;</span><span class="op" id="1217667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217671">//&nbsp;Here&nbsp;starts&nbsp;the&nbsp;example&nbsp;proper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217707">//&nbsp;Load&nbsp;the&nbsp;helpers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1217729">templates</span>&nbsp;<span class="op" id="1217739">:=</span>&nbsp;<span class="ident" id="1217742">template</span><span class="op" id="1217750">.</span><span class="ident" id="1217751">Must</span><span class="op" id="1217755">(</span><span class="ident" id="1217756">template</span><span class="op" id="1217764">.</span><span class="ident" id="1217765">ParseGlob</span><span class="op" id="1217774">(</span><span class="ident" id="1217775">pattern</span><span class="op" id="1217782">)</span><span class="op" id="1217783">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1217786">//&nbsp;Add&nbsp;one&nbsp;driver&nbsp;template&nbsp;to&nbsp;the&nbsp;bunch;&nbsp;we&nbsp;do&nbsp;this&nbsp;with&nbsp;an&nbsp;explicit&nbsp;template&nbsp;definition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1217877">_</span><span class="op" id="1217878">,</span>&nbsp;<span class="ident" id="1217880">err</span>&nbsp;<span class="op" id="1217884">:=</span>&nbsp;<span class="ident" id="1217887">templates</span><span class="op" id="1217896">.</span><span class="ident" id="1217897">Parse</span><span class="op" id="1217902">(</span><span class="string" id="1217903">&#34;{{define&nbsp;`driver1`}}Driver&nbsp;1&nbsp;calls&nbsp;T1:&nbsp;({{template&nbsp;`T1`}})\n{{end}}&#34;</span><span class="op" id="1217972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1217975">if</span>&nbsp;<span class="ident" id="1217978">err</span>&nbsp;<span class="op" id="1217982">!=</span>&nbsp;<span class="builtintype" id="1217985">nil</span>&nbsp;<span class="op" id="1217989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1217993">log</span><span class="op" id="1217996">.</span><span class="ident" id="1217997">Fatal</span><span class="op" id="1218002">(</span><span class="string" id="1218003">&#34;parsing&nbsp;driver1:&nbsp;&#34;</span><span class="op" id="1218022">,</span>&nbsp;<span class="ident" id="1218024">err</span><span class="op" id="1218027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1218030">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218033">//&nbsp;Add&nbsp;another&nbsp;driver&nbsp;template.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218066">_</span><span class="op" id="1218067">,</span>&nbsp;<span class="ident" id="1218069">err</span>&nbsp;<span class="op" id="1218073">=</span>&nbsp;<span class="ident" id="1218075">templates</span><span class="op" id="1218084">.</span><span class="ident" id="1218085">Parse</span><span class="op" id="1218090">(</span><span class="string" id="1218091">&#34;{{define&nbsp;`driver2`}}Driver&nbsp;2&nbsp;calls&nbsp;T2:&nbsp;({{template&nbsp;`T2`}})\n{{end}}&#34;</span><span class="op" id="1218160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1218163">if</span>&nbsp;<span class="ident" id="1218166">err</span>&nbsp;<span class="op" id="1218170">!=</span>&nbsp;<span class="builtintype" id="1218173">nil</span>&nbsp;<span class="op" id="1218177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218181">log</span><span class="op" id="1218184">.</span><span class="ident" id="1218185">Fatal</span><span class="op" id="1218190">(</span><span class="string" id="1218191">&#34;parsing&nbsp;driver2:&nbsp;&#34;</span><span class="op" id="1218210">,</span>&nbsp;<span class="ident" id="1218212">err</span><span class="op" id="1218215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1218218">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218221">//&nbsp;We&nbsp;load&nbsp;all&nbsp;the&nbsp;templates&nbsp;before&nbsp;execution.&nbsp;This&nbsp;package&nbsp;does&nbsp;not&nbsp;require</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218299">//&nbsp;that&nbsp;behavior&nbsp;but&nbsp;html/template&#39;s&nbsp;escaping&nbsp;does,&nbsp;so&nbsp;it&#39;s&nbsp;a&nbsp;good&nbsp;habit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218374">err</span>&nbsp;<span class="op" id="1218378">=</span>&nbsp;<span class="ident" id="1218380">templates</span><span class="op" id="1218389">.</span><span class="ident" id="1218390">ExecuteTemplate</span><span class="op" id="1218405">(</span><span class="ident" id="1218406">os</span><span class="op" id="1218408">.</span><span class="ident" id="1218409">Stdout</span><span class="op" id="1218415">,</span>&nbsp;<span class="string" id="1218417">&#34;driver1&#34;</span><span class="op" id="1218426">,</span>&nbsp;<span class="builtintype" id="1218428">nil</span><span class="op" id="1218431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1218434">if</span>&nbsp;<span class="ident" id="1218437">err</span>&nbsp;<span class="op" id="1218441">!=</span>&nbsp;<span class="builtintype" id="1218444">nil</span>&nbsp;<span class="op" id="1218448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218452">log</span><span class="op" id="1218455">.</span><span class="ident" id="1218456">Fatalf</span><span class="op" id="1218462">(</span><span class="string" id="1218463">&#34;driver1&nbsp;execution:&nbsp;%s&#34;</span><span class="op" id="1218486">,</span>&nbsp;<span class="ident" id="1218488">err</span><span class="op" id="1218491">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1218494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218497">err</span>&nbsp;<span class="op" id="1218501">=</span>&nbsp;<span class="ident" id="1218503">templates</span><span class="op" id="1218512">.</span><span class="ident" id="1218513">ExecuteTemplate</span><span class="op" id="1218528">(</span><span class="ident" id="1218529">os</span><span class="op" id="1218531">.</span><span class="ident" id="1218532">Stdout</span><span class="op" id="1218538">,</span>&nbsp;<span class="string" id="1218540">&#34;driver2&#34;</span><span class="op" id="1218549">,</span>&nbsp;<span class="builtintype" id="1218551">nil</span><span class="op" id="1218554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1218557">if</span>&nbsp;<span class="ident" id="1218560">err</span>&nbsp;<span class="op" id="1218564">!=</span>&nbsp;<span class="builtintype" id="1218567">nil</span>&nbsp;<span class="op" id="1218571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1218575">log</span><span class="op" id="1218578">.</span><span class="ident" id="1218579">Fatalf</span><span class="op" id="1218585">(</span><span class="string" id="1218586">&#34;driver2&nbsp;execution:&nbsp;%s&#34;</span><span class="op" id="1218609">,</span>&nbsp;<span class="ident" id="1218611">err</span><span class="op" id="1218614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1218617">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218620">//&nbsp;Output:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218632">//&nbsp;Driver&nbsp;1&nbsp;calls&nbsp;T1:&nbsp;(T1&nbsp;invokes&nbsp;T2:&nbsp;(This&nbsp;is&nbsp;T2))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218685">//&nbsp;Driver&nbsp;2&nbsp;calls&nbsp;T2:&nbsp;(This&nbsp;is&nbsp;T2)</span><br>
<span class="lineno"></span><span class="op" id="1218720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="1218723">//&nbsp;This&nbsp;example&nbsp;demonstrates&nbsp;how&nbsp;to&nbsp;use&nbsp;one&nbsp;group&nbsp;of&nbsp;driver</span><br>
<span class="lineno"></span><span class="comment" id="1218783">//&nbsp;templates&nbsp;with&nbsp;distinct&nbsp;sets&nbsp;of&nbsp;helper&nbsp;templates.</span><br>
<span class="lineno"></span><span class="keyword" id="1218836">func</span>&nbsp;<span class="ident" id="1218841">ExampleTemplate_share</span><span class="op" id="1218862">(</span><span class="op" id="1218863">)</span>&nbsp;<span class="op" id="1218865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218868">//&nbsp;Here&nbsp;we&nbsp;create&nbsp;a&nbsp;temporary&nbsp;directory&nbsp;and&nbsp;populate&nbsp;it&nbsp;with&nbsp;our&nbsp;sample</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1218941">//&nbsp;template&nbsp;definition&nbsp;files;&nbsp;usually&nbsp;the&nbsp;template&nbsp;files&nbsp;would&nbsp;already</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219013">//&nbsp;exist&nbsp;in&nbsp;some&nbsp;location&nbsp;known&nbsp;to&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1219062">dir</span>&nbsp;<span class="op" id="1219066">:=</span>&nbsp;<span class="ident" id="1219069">createTestDir</span><span class="op" id="1219082">(</span><span class="op" id="1219083">[</span><span class="op" id="1219084">]</span><span class="ident" id="1219085">templateFile</span><span class="op" id="1219097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219101">//&nbsp;T0.tmpl&nbsp;is&nbsp;a&nbsp;plain&nbsp;template&nbsp;file&nbsp;that&nbsp;just&nbsp;invokes&nbsp;T1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1219161">{</span><span class="string" id="1219162">&#34;T0.tmpl&#34;</span><span class="op" id="1219171">,</span>&nbsp;<span class="string" id="1219173">&#34;T0&nbsp;({{.}}&nbsp;version)&nbsp;invokes&nbsp;T1:&nbsp;({{template&nbsp;`T1`}})\n&#34;</span><span class="op" id="1219227">}</span><span class="op" id="1219228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219232">//&nbsp;T1.tmpl&nbsp;defines&nbsp;a&nbsp;template,&nbsp;T1&nbsp;that&nbsp;invokes&nbsp;T2.&nbsp;Note&nbsp;T2&nbsp;is&nbsp;not&nbsp;defined</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1219308">{</span><span class="string" id="1219309">&#34;T1.tmpl&#34;</span><span class="op" id="1219318">,</span>&nbsp;<span class="string" id="1219320">`{{define&nbsp;&#34;T1&#34;}}T1&nbsp;invokes&nbsp;T2:&nbsp;({{template&nbsp;&#34;T2&#34;}}){{end}}`</span><span class="op" id="1219378">}</span><span class="op" id="1219379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1219382">}</span><span class="op" id="1219383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219386">//&nbsp;Clean&nbsp;up&nbsp;after&nbsp;the&nbsp;test;&nbsp;another&nbsp;quirk&nbsp;of&nbsp;running&nbsp;as&nbsp;an&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1219455">defer</span>&nbsp;<span class="ident" id="1219461">os</span><span class="op" id="1219463">.</span><span class="ident" id="1219464">RemoveAll</span><span class="op" id="1219473">(</span><span class="ident" id="1219474">dir</span><span class="op" id="1219477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219481">//&nbsp;pattern&nbsp;is&nbsp;the&nbsp;glob&nbsp;pattern&nbsp;used&nbsp;to&nbsp;find&nbsp;all&nbsp;the&nbsp;template&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1219550">pattern</span>&nbsp;<span class="op" id="1219558">:=</span>&nbsp;<span class="ident" id="1219561">filepath</span><span class="op" id="1219569">.</span><span class="ident" id="1219570">Join</span><span class="op" id="1219574">(</span><span class="ident" id="1219575">dir</span><span class="op" id="1219578">,</span>&nbsp;<span class="string" id="1219580">&#34;*.tmpl&#34;</span><span class="op" id="1219588">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219592">//&nbsp;Here&nbsp;starts&nbsp;the&nbsp;example&nbsp;proper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219628">//&nbsp;Load&nbsp;the&nbsp;drivers.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1219650">drivers</span>&nbsp;<span class="op" id="1219658">:=</span>&nbsp;<span class="ident" id="1219661">template</span><span class="op" id="1219669">.</span><span class="ident" id="1219670">Must</span><span class="op" id="1219674">(</span><span class="ident" id="1219675">template</span><span class="op" id="1219683">.</span><span class="ident" id="1219684">ParseGlob</span><span class="op" id="1219693">(</span><span class="ident" id="1219694">pattern</span><span class="op" id="1219701">)</span><span class="op" id="1219702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219706">//&nbsp;We&nbsp;must&nbsp;define&nbsp;an&nbsp;implementation&nbsp;of&nbsp;the&nbsp;T2&nbsp;template.&nbsp;First&nbsp;we&nbsp;clone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219778">//&nbsp;the&nbsp;drivers,&nbsp;then&nbsp;add&nbsp;a&nbsp;definition&nbsp;of&nbsp;T2&nbsp;to&nbsp;the&nbsp;template&nbsp;name&nbsp;space.</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1219852">//&nbsp;1.&nbsp;Clone&nbsp;the&nbsp;helper&nbsp;set&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;name&nbsp;space&nbsp;from&nbsp;which&nbsp;to&nbsp;run&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1219931">first</span><span class="op" id="1219936">,</span>&nbsp;<span class="ident" id="1219938">err</span>&nbsp;<span class="op" id="1219942">:=</span>&nbsp;<span class="ident" id="1219945">drivers</span><span class="op" id="1219952">.</span><span class="ident" id="1219953">Clone</span><span class="op" id="1219958">(</span><span class="op" id="1219959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1219962">if</span>&nbsp;<span class="ident" id="1219965">err</span>&nbsp;<span class="op" id="1219969">!=</span>&nbsp;<span class="builtintype" id="1219972">nil</span>&nbsp;<span class="op" id="1219976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1219980">log</span><span class="op" id="1219983">.</span><span class="ident" id="1219984">Fatal</span><span class="op" id="1219989">(</span><span class="string" id="1219990">&#34;cloning&nbsp;helpers:&nbsp;&#34;</span><span class="op" id="1220009">,</span>&nbsp;<span class="ident" id="1220011">err</span><span class="op" id="1220014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220017">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220020">//&nbsp;2.&nbsp;Define&nbsp;T2,&nbsp;version&nbsp;A,&nbsp;and&nbsp;parse&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220063">_</span><span class="op" id="1220064">,</span>&nbsp;<span class="ident" id="1220066">err</span>&nbsp;<span class="op" id="1220070">=</span>&nbsp;<span class="ident" id="1220072">first</span><span class="op" id="1220077">.</span><span class="ident" id="1220078">Parse</span><span class="op" id="1220083">(</span><span class="string" id="1220084">&#34;{{define&nbsp;`T2`}}T2,&nbsp;version&nbsp;A{{end}}&#34;</span><span class="op" id="1220121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1220124">if</span>&nbsp;<span class="ident" id="1220127">err</span>&nbsp;<span class="op" id="1220131">!=</span>&nbsp;<span class="builtintype" id="1220134">nil</span>&nbsp;<span class="op" id="1220138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220142">log</span><span class="op" id="1220145">.</span><span class="ident" id="1220146">Fatal</span><span class="op" id="1220151">(</span><span class="string" id="1220152">&#34;parsing&nbsp;T2:&nbsp;&#34;</span><span class="op" id="1220166">,</span>&nbsp;<span class="ident" id="1220168">err</span><span class="op" id="1220171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220174">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220178">//&nbsp;Now&nbsp;repeat&nbsp;the&nbsp;whole&nbsp;thing,&nbsp;using&nbsp;a&nbsp;different&nbsp;version&nbsp;of&nbsp;T2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220243">//&nbsp;1.&nbsp;Clone&nbsp;the&nbsp;drivers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220269">second</span><span class="op" id="1220275">,</span>&nbsp;<span class="ident" id="1220277">err</span>&nbsp;<span class="op" id="1220281">:=</span>&nbsp;<span class="ident" id="1220284">drivers</span><span class="op" id="1220291">.</span><span class="ident" id="1220292">Clone</span><span class="op" id="1220297">(</span><span class="op" id="1220298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1220301">if</span>&nbsp;<span class="ident" id="1220304">err</span>&nbsp;<span class="op" id="1220308">!=</span>&nbsp;<span class="builtintype" id="1220311">nil</span>&nbsp;<span class="op" id="1220315">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220319">log</span><span class="op" id="1220322">.</span><span class="ident" id="1220323">Fatal</span><span class="op" id="1220328">(</span><span class="string" id="1220329">&#34;cloning&nbsp;drivers:&nbsp;&#34;</span><span class="op" id="1220348">,</span>&nbsp;<span class="ident" id="1220350">err</span><span class="op" id="1220353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220359">//&nbsp;2.&nbsp;Define&nbsp;T2,&nbsp;version&nbsp;B,&nbsp;and&nbsp;parse&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220402">_</span><span class="op" id="1220403">,</span>&nbsp;<span class="ident" id="1220405">err</span>&nbsp;<span class="op" id="1220409">=</span>&nbsp;<span class="ident" id="1220411">second</span><span class="op" id="1220417">.</span><span class="ident" id="1220418">Parse</span><span class="op" id="1220423">(</span><span class="string" id="1220424">&#34;{{define&nbsp;`T2`}}T2,&nbsp;version&nbsp;B{{end}}&#34;</span><span class="op" id="1220461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1220464">if</span>&nbsp;<span class="ident" id="1220467">err</span>&nbsp;<span class="op" id="1220471">!=</span>&nbsp;<span class="builtintype" id="1220474">nil</span>&nbsp;<span class="op" id="1220478">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220482">log</span><span class="op" id="1220485">.</span><span class="ident" id="1220486">Fatal</span><span class="op" id="1220491">(</span><span class="string" id="1220492">&#34;parsing&nbsp;T2:&nbsp;&#34;</span><span class="op" id="1220506">,</span>&nbsp;<span class="ident" id="1220508">err</span><span class="op" id="1220511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220518">//&nbsp;Execute&nbsp;the&nbsp;templates&nbsp;in&nbsp;the&nbsp;reverse&nbsp;order&nbsp;to&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220579">//&nbsp;first&nbsp;is&nbsp;unaffected&nbsp;by&nbsp;the&nbsp;second.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220618">err</span>&nbsp;<span class="op" id="1220622">=</span>&nbsp;<span class="ident" id="1220624">second</span><span class="op" id="1220630">.</span><span class="ident" id="1220631">ExecuteTemplate</span><span class="op" id="1220646">(</span><span class="ident" id="1220647">os</span><span class="op" id="1220649">.</span><span class="ident" id="1220650">Stdout</span><span class="op" id="1220656">,</span>&nbsp;<span class="string" id="1220658">&#34;T0.tmpl&#34;</span><span class="op" id="1220667">,</span>&nbsp;<span class="string" id="1220669">&#34;second&#34;</span><span class="op" id="1220677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1220680">if</span>&nbsp;<span class="ident" id="1220683">err</span>&nbsp;<span class="op" id="1220687">!=</span>&nbsp;<span class="builtintype" id="1220690">nil</span>&nbsp;<span class="op" id="1220694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220698">log</span><span class="op" id="1220701">.</span><span class="ident" id="1220702">Fatalf</span><span class="op" id="1220708">(</span><span class="string" id="1220709">&#34;second&nbsp;execution:&nbsp;%s&#34;</span><span class="op" id="1220731">,</span>&nbsp;<span class="ident" id="1220733">err</span><span class="op" id="1220736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220742">err</span>&nbsp;<span class="op" id="1220746">=</span>&nbsp;<span class="ident" id="1220748">first</span><span class="op" id="1220753">.</span><span class="ident" id="1220754">ExecuteTemplate</span><span class="op" id="1220769">(</span><span class="ident" id="1220770">os</span><span class="op" id="1220772">.</span><span class="ident" id="1220773">Stdout</span><span class="op" id="1220779">,</span>&nbsp;<span class="string" id="1220781">&#34;T0.tmpl&#34;</span><span class="op" id="1220790">,</span>&nbsp;<span class="string" id="1220792">&#34;first&#34;</span><span class="op" id="1220799">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1220802">if</span>&nbsp;<span class="ident" id="1220805">err</span>&nbsp;<span class="op" id="1220809">!=</span>&nbsp;<span class="builtintype" id="1220812">nil</span>&nbsp;<span class="op" id="1220816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1220820">log</span><span class="op" id="1220823">.</span><span class="ident" id="1220824">Fatalf</span><span class="op" id="1220830">(</span><span class="string" id="1220831">&#34;first:&nbsp;execution:&nbsp;%s&#34;</span><span class="op" id="1220853">,</span>&nbsp;<span class="ident" id="1220855">err</span><span class="op" id="1220858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1220861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220865">//&nbsp;Output:</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220877">//&nbsp;T0&nbsp;(second&nbsp;version)&nbsp;invokes&nbsp;T1:&nbsp;(T1&nbsp;invokes&nbsp;T2:&nbsp;(T2,&nbsp;version&nbsp;B))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1220946">//&nbsp;T0&nbsp;(first&nbsp;version)&nbsp;invokes&nbsp;T1:&nbsp;(T1&nbsp;invokes&nbsp;T2:&nbsp;(T2,&nbsp;version&nbsp;A))</span><br>
<span class="lineno"></span><span class="op" id="1221013">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
