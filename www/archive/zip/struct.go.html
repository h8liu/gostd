<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6402641">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6402696">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6402750">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6402801">/*<br>
<span class="lineno"></span>Package&nbsp;zip&nbsp;provides&nbsp;support&nbsp;for&nbsp;reading&nbsp;and&nbsp;writing&nbsp;ZIP&nbsp;archives.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>See:&nbsp;http://www.pkware.com/documents/casestudies/APPNOTE.TXT<br>
<span class="lineno"></span><br>
<span class="lineno">10</span>This&nbsp;package&nbsp;does&nbsp;not&nbsp;support&nbsp;disk&nbsp;spanning.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>A&nbsp;note&nbsp;about&nbsp;ZIP64:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>To&nbsp;be&nbsp;backwards&nbsp;compatible&nbsp;the&nbsp;FileHeader&nbsp;has&nbsp;both&nbsp;32&nbsp;and&nbsp;64&nbsp;bit&nbsp;Size<br>
<span class="lineno">15</span>fields.&nbsp;The&nbsp;64&nbsp;bit&nbsp;fields&nbsp;will&nbsp;always&nbsp;contain&nbsp;the&nbsp;correct&nbsp;value&nbsp;and<br>
<span class="lineno"></span>for&nbsp;normal&nbsp;archives&nbsp;both&nbsp;fields&nbsp;will&nbsp;be&nbsp;the&nbsp;same.&nbsp;For&nbsp;files&nbsp;requiring<br>
<span class="lineno"></span>the&nbsp;ZIP64&nbsp;format&nbsp;the&nbsp;32&nbsp;bit&nbsp;fields&nbsp;will&nbsp;be&nbsp;0xffffffff&nbsp;and&nbsp;the&nbsp;64&nbsp;bit<br>
<span class="lineno"></span>fields&nbsp;must&nbsp;be&nbsp;used&nbsp;instead.<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno">20</span><span class="keyword" id="6403310">package</span>&nbsp;<span class="ident" id="6403318">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6403323">import</span>&nbsp;<span class="op" id="6403330">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6403333">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6403339">&#34;path&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6403347">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6403354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6403357">//&nbsp;Compression&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6403381">const</span>&nbsp;<span class="op" id="6403387">(</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403390">Store</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6403398">uint16</span>&nbsp;<span class="op" id="6403405">=</span>&nbsp;<span class="num" id="6403407">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403410">Deflate</span>&nbsp;<span class="builtintype" id="6403418">uint16</span>&nbsp;<span class="op" id="6403425">=</span>&nbsp;<span class="num" id="6403427">8</span><br>
<span class="lineno"></span><span class="op" id="6403429">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6403432">const</span>&nbsp;<span class="op" id="6403438">(</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403441">fileHeaderSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403466">=</span>&nbsp;<span class="num" id="6403468">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403480">directoryHeaderSignature</span>&nbsp;<span class="op" id="6403505">=</span>&nbsp;<span class="num" id="6403507">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403519">directoryEndSignature</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403544">=</span>&nbsp;<span class="num" id="6403546">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403558">directory64LocSignature</span>&nbsp;&nbsp;<span class="op" id="6403583">=</span>&nbsp;<span class="num" id="6403585">0x07064b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403597">directory64EndSignature</span>&nbsp;&nbsp;<span class="op" id="6403622">=</span>&nbsp;<span class="num" id="6403624">0x06064b50</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403636">dataDescriptorSignature</span>&nbsp;&nbsp;<span class="op" id="6403661">=</span>&nbsp;<span class="num" id="6403663">0x08074b50</span>&nbsp;<span class="comment" id="6403674">//&nbsp;de-facto&nbsp;standard;&nbsp;required&nbsp;by&nbsp;OS&nbsp;X&nbsp;Finder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403721">fileHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403746">=</span>&nbsp;<span class="num" id="6403748">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6403759">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403782">directoryHeaderLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403807">=</span>&nbsp;<span class="num" id="6403809">46</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6403820">//&nbsp;+&nbsp;filename&nbsp;+&nbsp;extra&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403853">directoryEndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403878">=</span>&nbsp;<span class="num" id="6403880">22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6403891">//&nbsp;+&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6403905">dataDescriptorLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403930">=</span>&nbsp;<span class="num" id="6403932">16</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6403943">//&nbsp;four&nbsp;uint32:&nbsp;descriptor&nbsp;signature,&nbsp;crc32,&nbsp;compressed&nbsp;size,&nbsp;size</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404011">dataDescriptor64Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6404036">=</span>&nbsp;<span class="num" id="6404038">24</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6404049">//&nbsp;descriptor&nbsp;with&nbsp;8&nbsp;byte&nbsp;sizes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404082">directory64LocLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6404107">=</span>&nbsp;<span class="num" id="6404109">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6404120">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404124">directory64EndLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6404149">=</span>&nbsp;<span class="num" id="6404151">56</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6404162">//&nbsp;+&nbsp;extra</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404175">//&nbsp;Constants&nbsp;for&nbsp;the&nbsp;first&nbsp;byte&nbsp;in&nbsp;CreatorVersion</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404226">creatorFAT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6404240">=</span>&nbsp;<span class="num" id="6404242">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404245">creatorUnix</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6404259">=</span>&nbsp;<span class="num" id="6404261">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404264">creatorNTFS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6404278">=</span>&nbsp;<span class="num" id="6404280">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404284">creatorVFAT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6404298">=</span>&nbsp;<span class="num" id="6404300">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404304">creatorMacOSX</span>&nbsp;<span class="op" id="6404318">=</span>&nbsp;<span class="num" id="6404320">19</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404325">//&nbsp;version&nbsp;numbers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404345">zipVersion20</span>&nbsp;<span class="op" id="6404358">=</span>&nbsp;<span class="num" id="6404360">20</span>&nbsp;<span class="comment" id="6404363">//&nbsp;2.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404371">zipVersion45</span>&nbsp;<span class="op" id="6404384">=</span>&nbsp;<span class="num" id="6404386">45</span>&nbsp;<span class="comment" id="6404389">//&nbsp;4.5&nbsp;(reads&nbsp;and&nbsp;writes&nbsp;zip64&nbsp;archives)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404432">//&nbsp;limits&nbsp;for&nbsp;non&nbsp;zip64&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404463">uint16max</span>&nbsp;<span class="op" id="6404473">=</span>&nbsp;<span class="op" id="6404475">(</span><span class="num" id="6404476">1</span>&nbsp;<span class="op" id="6404478">&lt;&lt;</span>&nbsp;<span class="num" id="6404481">16</span><span class="op" id="6404483">)</span>&nbsp;<span class="op" id="6404485">-</span>&nbsp;<span class="num" id="6404487">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404490">uint32max</span>&nbsp;<span class="op" id="6404500">=</span>&nbsp;<span class="op" id="6404502">(</span><span class="num" id="6404503">1</span>&nbsp;<span class="op" id="6404505">&lt;&lt;</span>&nbsp;<span class="num" id="6404508">32</span><span class="op" id="6404510">)</span>&nbsp;<span class="op" id="6404512">-</span>&nbsp;<span class="num" id="6404514">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404518">//&nbsp;extra&nbsp;header&nbsp;id&#39;s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404540">zip64ExtraId</span>&nbsp;<span class="op" id="6404553">=</span>&nbsp;<span class="num" id="6404555">0x0001</span>&nbsp;<span class="comment" id="6404562">//&nbsp;zip64&nbsp;Extended&nbsp;Information&nbsp;Extra&nbsp;Field</span><br>
<span class="lineno"></span><span class="op" id="6404604">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6404607">//&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;within&nbsp;a&nbsp;zip&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6404657">//&nbsp;See&nbsp;the&nbsp;zip&nbsp;spec&nbsp;for&nbsp;details.</span><br>
<span class="lineno">70</span><span class="keyword" id="6404690">type</span>&nbsp;<span class="ident" id="6404695">FileHeader</span>&nbsp;<span class="keyword" id="6404706">struct</span>&nbsp;<span class="op" id="6404713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404716">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404750">//&nbsp;It&nbsp;must&nbsp;be&nbsp;a&nbsp;relative&nbsp;path:&nbsp;it&nbsp;must&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;drive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404813">//&nbsp;letter&nbsp;(e.g.&nbsp;C:)&nbsp;or&nbsp;leading&nbsp;slash,&nbsp;and&nbsp;only&nbsp;forward&nbsp;slashes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6404877">//&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404894">Name</span>&nbsp;<span class="builtintype" id="6404899">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404908">CreatorVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6404927">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404935">ReaderVersion</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6404954">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404962">Flags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6404981">uint16</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6404989">Method</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405008">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405016">ModifiedTime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405035">uint16</span>&nbsp;<span class="comment" id="6405042">//&nbsp;MS-DOS&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405058">ModifiedDate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405077">uint16</span>&nbsp;<span class="comment" id="6405084">//&nbsp;MS-DOS&nbsp;date</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405100">CRC32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405119">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405127">CompressedSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405146">uint32</span>&nbsp;<span class="comment" id="6405153">//&nbsp;deprecated;&nbsp;use&nbsp;CompressedSize64</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405190">UncompressedSize</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405209">uint32</span>&nbsp;<span class="comment" id="6405216">//&nbsp;deprecated;&nbsp;use&nbsp;UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405255">CompressedSize64</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6405274">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405282">UncompressedSize64</span>&nbsp;<span class="ident" id="6405301">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405309">Extra</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405328">[</span><span class="op" id="6405329">]</span><span class="builtintype" id="6405330">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405336">ExternalAttrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405355">uint32</span>&nbsp;<span class="comment" id="6405362">//&nbsp;Meaning&nbsp;depends&nbsp;on&nbsp;CreatorVersion</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405400">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6405419">string</span><br>
<span class="lineno"></span><span class="op" id="6405426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6405429">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="6405484">func</span>&nbsp;<span class="op" id="6405489">(</span><span class="ident" id="6405490">h</span>&nbsp;<span class="op" id="6405492">*</span><span class="ident" id="6405493"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6405503">)</span>&nbsp;<span class="ident" id="6405505">FileInfo</span><span class="op" id="6405513">(</span><span class="op" id="6405514">)</span>&nbsp;<span class="ident" id="6405516"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6405518">.</span><span class="ident" id="6405519">FileInfo</span>&nbsp;<span class="op" id="6405528">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405531">return</span>&nbsp;<span class="ident" id="6405538"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6405552">{</span><span class="ident" id="6405553"><a href="/archive/zip/struct.go.html#6405490">h</a></span><span class="op" id="6405554">}</span><br>
<span class="lineno"></span><span class="op" id="6405556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6405559">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="6405601">type</span>&nbsp;<span class="ident" id="6405606">headerFileInfo</span>&nbsp;<span class="keyword" id="6405621">struct</span>&nbsp;<span class="op" id="6405628">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405631">fh</span>&nbsp;<span class="op" id="6405634">*</span><span class="ident" id="6405635"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><br>
<span class="lineno"></span><span class="op" id="6405646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405649">func</span>&nbsp;<span class="op" id="6405654">(</span><span class="ident" id="6405655">fi</span>&nbsp;<span class="ident" id="6405658"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6405672">)</span>&nbsp;<span class="ident" id="6405674">Name</span><span class="op" id="6405678">(</span><span class="op" id="6405679">)</span>&nbsp;<span class="builtintype" id="6405681">string</span>&nbsp;<span class="op" id="6405688">{</span>&nbsp;<span class="keyword" id="6405690">return</span>&nbsp;<span class="ident" id="6405697"><a href="/archive/zip/struct.go.html#6403339">path</a></span><span class="op" id="6405701">.</span><span class="ident" id="6405702">Base</span><span class="op" id="6405706">(</span><span class="ident" id="6405707"><a href="/archive/zip/struct.go.html#6405655">fi</a></span><span class="op" id="6405709">.</span><span class="ident" id="6405710">fh</span><span class="op" id="6405712">.</span><span class="ident" id="6405713">Name</span><span class="op" id="6405717">)</span>&nbsp;<span class="op" id="6405719">}</span><br>
<span class="lineno"></span><span class="keyword" id="6405721">func</span>&nbsp;<span class="op" id="6405726">(</span><span class="ident" id="6405727">fi</span>&nbsp;<span class="ident" id="6405730"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6405744">)</span>&nbsp;<span class="ident" id="6405746">Size</span><span class="op" id="6405750">(</span><span class="op" id="6405751">)</span>&nbsp;<span class="ident" id="6405753">int64</span>&nbsp;<span class="op" id="6405759">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405762">if</span>&nbsp;<span class="ident" id="6405765"><a href="/archive/zip/struct.go.html#6405727">fi</a></span><span class="op" id="6405767">.</span><span class="ident" id="6405768">fh</span><span class="op" id="6405770">.</span><span class="ident" id="6405771">UncompressedSize64</span>&nbsp;<span class="op" id="6405790">&gt;</span>&nbsp;<span class="num" id="6405792">0</span>&nbsp;<span class="op" id="6405794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405798">return</span>&nbsp;<span class="ident" id="6405805">int64</span><span class="op" id="6405810">(</span><span class="ident" id="6405811"><a href="/archive/zip/struct.go.html#6405727">fi</a></span><span class="op" id="6405813">.</span><span class="ident" id="6405814">fh</span><span class="op" id="6405816">.</span><span class="ident" id="6405817">UncompressedSize64</span><span class="op" id="6405835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405841">return</span>&nbsp;<span class="ident" id="6405848">int64</span><span class="op" id="6405853">(</span><span class="ident" id="6405854"><a href="/archive/zip/struct.go.html#6405727">fi</a></span><span class="op" id="6405856">.</span><span class="ident" id="6405857">fh</span><span class="op" id="6405859">.</span><span class="ident" id="6405860">UncompressedSize</span><span class="op" id="6405876">)</span><br>
<span class="lineno"></span><span class="op" id="6405878">}</span><br>
<span class="lineno">110</span><span class="keyword" id="6405880">func</span>&nbsp;<span class="op" id="6405885">(</span><span class="ident" id="6405886">fi</span>&nbsp;<span class="ident" id="6405889"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6405903">)</span>&nbsp;<span class="ident" id="6405905">IsDir</span><span class="op" id="6405910">(</span><span class="op" id="6405911">)</span>&nbsp;<span class="builtintype" id="6405913">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6405925">{</span>&nbsp;<span class="keyword" id="6405927">return</span>&nbsp;<span class="ident" id="6405934"><a href="/archive/zip/struct.go.html#6405886">fi</a></span><span class="op" id="6405936">.</span><span class="ident" id="6405937">Mode</span><span class="op" id="6405941">(</span><span class="op" id="6405942">)</span><span class="op" id="6405943">.</span><span class="ident" id="6405944">IsDir</span><span class="op" id="6405949">(</span><span class="op" id="6405950">)</span>&nbsp;<span class="op" id="6405952">}</span><br>
<span class="lineno"></span><span class="keyword" id="6405954">func</span>&nbsp;<span class="op" id="6405959">(</span><span class="ident" id="6405960">fi</span>&nbsp;<span class="ident" id="6405963"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6405977">)</span>&nbsp;<span class="ident" id="6405979">ModTime</span><span class="op" id="6405986">(</span><span class="op" id="6405987">)</span>&nbsp;<span class="ident" id="6405989"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6405993">.</span><span class="ident" id="6405994">Time</span>&nbsp;<span class="op" id="6405999">{</span>&nbsp;<span class="keyword" id="6406001">return</span>&nbsp;<span class="ident" id="6406008"><a href="/archive/zip/struct.go.html#6405960">fi</a></span><span class="op" id="6406010">.</span><span class="ident" id="6406011">fh</span><span class="op" id="6406013">.</span><span class="ident" id="6406014">ModTime</span><span class="op" id="6406021">(</span><span class="op" id="6406022">)</span>&nbsp;<span class="op" id="6406024">}</span><br>
<span class="lineno"></span><span class="keyword" id="6406026">func</span>&nbsp;<span class="op" id="6406031">(</span><span class="ident" id="6406032">fi</span>&nbsp;<span class="ident" id="6406035"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6406049">)</span>&nbsp;<span class="ident" id="6406051">Mode</span><span class="op" id="6406055">(</span><span class="op" id="6406056">)</span>&nbsp;<span class="ident" id="6406058"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6406060">.</span><span class="ident" id="6406061">FileMode</span>&nbsp;&nbsp;<span class="op" id="6406071">{</span>&nbsp;<span class="keyword" id="6406073">return</span>&nbsp;<span class="ident" id="6406080"><a href="/archive/zip/struct.go.html#6406032">fi</a></span><span class="op" id="6406082">.</span><span class="ident" id="6406083">fh</span><span class="op" id="6406085">.</span><span class="ident" id="6406086">Mode</span><span class="op" id="6406090">(</span><span class="op" id="6406091">)</span>&nbsp;<span class="op" id="6406093">}</span><br>
<span class="lineno"></span><span class="keyword" id="6406095">func</span>&nbsp;<span class="op" id="6406100">(</span><span class="ident" id="6406101">fi</span>&nbsp;<span class="ident" id="6406104"><a href="/archive/zip/struct.go.html#6405606">headerFileInfo</a></span><span class="op" id="6406118">)</span>&nbsp;<span class="ident" id="6406120">Sys</span><span class="op" id="6406123">(</span><span class="op" id="6406124">)</span>&nbsp;<span class="keyword" id="6406126">interface</span><span class="op" id="6406135">{</span><span class="op" id="6406136">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6406140">{</span>&nbsp;<span class="keyword" id="6406142">return</span>&nbsp;<span class="ident" id="6406149"><a href="/archive/zip/struct.go.html#6406101">fi</a></span><span class="op" id="6406151">.</span><span class="ident" id="6406152">fh</span>&nbsp;<span class="op" id="6406155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6406158">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;FileHeader&nbsp;from&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6406225">//&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="comment" id="6406241">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6406308">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6406379">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno">120</span><span class="keyword" id="6406448">func</span>&nbsp;<span class="ident" id="6406453">FileInfoHeader</span><span class="op" id="6406467">(</span><span class="ident" id="6406468">fi</span>&nbsp;<span class="ident" id="6406471"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6406473">.</span><span class="ident" id="6406474">FileInfo</span><span class="op" id="6406482">)</span>&nbsp;<span class="op" id="6406484">(</span><span class="op" id="6406485">*</span><span class="ident" id="6406486"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6406496">,</span>&nbsp;<span class="builtintype" id="6406498">error</span><span class="op" id="6406503">)</span>&nbsp;<span class="op" id="6406505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406508">size</span>&nbsp;<span class="op" id="6406513">:=</span>&nbsp;<span class="ident" id="6406516"><a href="/archive/zip/struct.go.html#6406468">fi</a></span><span class="op" id="6406518">.</span><span class="ident" id="6406519">Size</span><span class="op" id="6406523">(</span><span class="op" id="6406524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406527">fh</span>&nbsp;<span class="op" id="6406530">:=</span>&nbsp;<span class="op" id="6406533">&amp;</span><span class="ident" id="6406534"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6406544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406548">Name</span><span class="op" id="6406552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6406568"><a href="/archive/zip/struct.go.html#6406468">fi</a></span><span class="op" id="6406570">.</span><span class="ident" id="6406571">Name</span><span class="op" id="6406575">(</span><span class="op" id="6406576">)</span><span class="op" id="6406577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406581">UncompressedSize64</span><span class="op" id="6406599">:</span>&nbsp;<span class="ident" id="6406601">uint64</span><span class="op" id="6406607">(</span><span class="ident" id="6406608"><a href="/archive/zip/struct.go.html#6406508">size</a></span><span class="op" id="6406612">)</span><span class="op" id="6406613">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406619"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406621">.</span><span class="ident" id="6406622">SetModTime</span><span class="op" id="6406632">(</span><span class="ident" id="6406633"><a href="/archive/zip/struct.go.html#6406468">fi</a></span><span class="op" id="6406635">.</span><span class="ident" id="6406636">ModTime</span><span class="op" id="6406643">(</span><span class="op" id="6406644">)</span><span class="op" id="6406645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406648"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406650">.</span><span class="ident" id="6406651">SetMode</span><span class="op" id="6406658">(</span><span class="ident" id="6406659"><a href="/archive/zip/struct.go.html#6406468">fi</a></span><span class="op" id="6406661">.</span><span class="ident" id="6406662">Mode</span><span class="op" id="6406666">(</span><span class="op" id="6406667">)</span><span class="op" id="6406668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406671">if</span>&nbsp;<span class="ident" id="6406674"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406676">.</span><span class="ident" id="6406677">UncompressedSize64</span>&nbsp;<span class="op" id="6406696">&gt;</span>&nbsp;<span class="ident" id="6406698"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6406708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406712"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406714">.</span><span class="ident" id="6406715">UncompressedSize</span>&nbsp;<span class="op" id="6406732">=</span>&nbsp;<span class="ident" id="6406734"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406745">}</span>&nbsp;<span class="keyword" id="6406747">else</span>&nbsp;<span class="op" id="6406752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406756"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406758">.</span><span class="ident" id="6406759">UncompressedSize</span>&nbsp;<span class="op" id="6406776">=</span>&nbsp;<span class="builtintype" id="6406778">uint32</span><span class="op" id="6406784">(</span><span class="ident" id="6406785"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406787">.</span><span class="ident" id="6406788">UncompressedSize64</span><span class="op" id="6406806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406812">return</span>&nbsp;<span class="ident" id="6406819"><a href="/archive/zip/struct.go.html#6406527">fh</a></span><span class="op" id="6406821">,</span>&nbsp;<span class="ident" id="6406823">nil</span><br>
<span class="lineno"></span><span class="op" id="6406827">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="6406830">type</span>&nbsp;<span class="ident" id="6406835">directoryEnd</span>&nbsp;<span class="keyword" id="6406848">struct</span>&nbsp;<span class="op" id="6406855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406858">diskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6406877">uint32</span>&nbsp;<span class="comment" id="6406884">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406895">dirDiskNbr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6406914">uint32</span>&nbsp;<span class="comment" id="6406921">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406932">dirRecordsThisDisk</span>&nbsp;<span class="ident" id="6406951">uint64</span>&nbsp;<span class="comment" id="6406958">//&nbsp;unused</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406969">directoryRecords</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6406988">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406996">directorySize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407015">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407023">directoryOffset</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407042">uint64</span>&nbsp;<span class="comment" id="6407049">//&nbsp;relative&nbsp;to&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407070">commentLen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6407089">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407097">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6407116">string</span><br>
<span class="lineno">145</span><span class="op" id="6407123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6407126">//&nbsp;msDosTimeToTime&nbsp;converts&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time&nbsp;into&nbsp;a&nbsp;time.Time.</span><br>
<span class="lineno"></span><span class="comment" id="6407196">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="6407221">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724247(v=VS.85).aspx</span><br>
<span class="lineno">150</span><span class="keyword" id="6407292">func</span>&nbsp;<span class="ident" id="6407297">msDosTimeToTime</span><span class="op" id="6407312">(</span><span class="ident" id="6407313">dosDate</span><span class="op" id="6407320">,</span>&nbsp;<span class="ident" id="6407322">dosTime</span>&nbsp;<span class="builtintype" id="6407330">uint16</span><span class="op" id="6407336">)</span>&nbsp;<span class="ident" id="6407338"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407342">.</span><span class="ident" id="6407343">Time</span>&nbsp;<span class="op" id="6407348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407351">return</span>&nbsp;<span class="ident" id="6407358"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407362">.</span><span class="ident" id="6407363">Date</span><span class="op" id="6407367">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6407371">//&nbsp;date&nbsp;bits&nbsp;0-4:&nbsp;day&nbsp;of&nbsp;month;&nbsp;5-8:&nbsp;month;&nbsp;9-15:&nbsp;years&nbsp;since&nbsp;1980</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6407440">int</span><span class="op" id="6407443">(</span><span class="ident" id="6407444"><a href="/archive/zip/struct.go.html#6407313">dosDate</a></span><span class="op" id="6407451">&gt;&gt;</span><span class="num" id="6407453">9</span><span class="op" id="6407454">+</span><span class="num" id="6407455">1980</span><span class="op" id="6407459">)</span><span class="op" id="6407460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407464"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407468">.</span><span class="ident" id="6407469">Month</span><span class="op" id="6407474">(</span><span class="ident" id="6407475"><a href="/archive/zip/struct.go.html#6407313">dosDate</a></span><span class="op" id="6407482">&gt;&gt;</span><span class="num" id="6407484">5</span><span class="op" id="6407485">&amp;</span><span class="num" id="6407486">0xf</span><span class="op" id="6407489">)</span><span class="op" id="6407490">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6407494">int</span><span class="op" id="6407497">(</span><span class="ident" id="6407498"><a href="/archive/zip/struct.go.html#6407313">dosDate</a></span><span class="op" id="6407505">&amp;</span><span class="num" id="6407506">0x1f</span><span class="op" id="6407510">)</span><span class="op" id="6407511">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6407516">//&nbsp;time&nbsp;bits&nbsp;0-4:&nbsp;second/2;&nbsp;5-10:&nbsp;minute;&nbsp;11-15:&nbsp;hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6407572">int</span><span class="op" id="6407575">(</span><span class="ident" id="6407576"><a href="/archive/zip/struct.go.html#6407322">dosTime</a></span><span class="op" id="6407583">&gt;&gt;</span><span class="num" id="6407585">11</span><span class="op" id="6407587">)</span><span class="op" id="6407588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6407592">int</span><span class="op" id="6407595">(</span><span class="ident" id="6407596"><a href="/archive/zip/struct.go.html#6407322">dosTime</a></span><span class="op" id="6407603">&gt;&gt;</span><span class="num" id="6407605">5</span><span class="op" id="6407606">&amp;</span><span class="num" id="6407607">0x3f</span><span class="op" id="6407611">)</span><span class="op" id="6407612">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6407616">int</span><span class="op" id="6407619">(</span><span class="ident" id="6407620"><a href="/archive/zip/struct.go.html#6407322">dosTime</a></span><span class="op" id="6407627">&amp;</span><span class="num" id="6407628">0x1f</span><span class="op" id="6407632">*</span><span class="num" id="6407633">2</span><span class="op" id="6407634">)</span><span class="op" id="6407635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6407639">0</span><span class="op" id="6407640">,</span>&nbsp;<span class="comment" id="6407642">//&nbsp;nanoseconds</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407660"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407664">.</span><span class="ident" id="6407665">UTC</span><span class="op" id="6407668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407671">)</span><br>
<span class="lineno">165</span><span class="op" id="6407673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6407676">//&nbsp;timeToMsDosTime&nbsp;converts&nbsp;a&nbsp;time.Time&nbsp;to&nbsp;an&nbsp;MS-DOS&nbsp;date&nbsp;and&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="6407744">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="comment" id="6407769">//&nbsp;See:&nbsp;http://msdn.microsoft.com/en-us/library/ms724274(v=VS.85).aspx</span><br>
<span class="lineno">170</span><span class="keyword" id="6407840">func</span>&nbsp;<span class="ident" id="6407845">timeToMsDosTime</span><span class="op" id="6407860">(</span><span class="ident" id="6407861">t</span>&nbsp;<span class="ident" id="6407863"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407867">.</span><span class="ident" id="6407868">Time</span><span class="op" id="6407872">)</span>&nbsp;<span class="op" id="6407874">(</span><span class="ident" id="6407875">fDate</span>&nbsp;<span class="builtintype" id="6407881">uint16</span><span class="op" id="6407887">,</span>&nbsp;<span class="ident" id="6407889">fTime</span>&nbsp;<span class="builtintype" id="6407895">uint16</span><span class="op" id="6407901">)</span>&nbsp;<span class="op" id="6407903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407906"><a href="/archive/zip/struct.go.html#6407861">t</a></span>&nbsp;<span class="op" id="6407908">=</span>&nbsp;<span class="ident" id="6407910"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6407911">.</span><span class="ident" id="6407912">In</span><span class="op" id="6407914">(</span><span class="ident" id="6407915"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6407919">.</span><span class="ident" id="6407920">UTC</span><span class="op" id="6407923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407926"><a href="/archive/zip/struct.go.html#6407875">fDate</a></span>&nbsp;<span class="op" id="6407932">=</span>&nbsp;<span class="builtintype" id="6407934">uint16</span><span class="op" id="6407940">(</span><span class="ident" id="6407941"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6407942">.</span><span class="ident" id="6407943">Day</span><span class="op" id="6407946">(</span><span class="op" id="6407947">)</span>&nbsp;<span class="op" id="6407949">+</span>&nbsp;<span class="builtintype" id="6407951">int</span><span class="op" id="6407954">(</span><span class="ident" id="6407955"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6407956">.</span><span class="ident" id="6407957">Month</span><span class="op" id="6407962">(</span><span class="op" id="6407963">)</span><span class="op" id="6407964">)</span><span class="op" id="6407965">&lt;&lt;</span><span class="num" id="6407967">5</span>&nbsp;<span class="op" id="6407969">+</span>&nbsp;<span class="op" id="6407971">(</span><span class="ident" id="6407972"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6407973">.</span><span class="ident" id="6407974">Year</span><span class="op" id="6407978">(</span><span class="op" id="6407979">)</span><span class="op" id="6407980">-</span><span class="num" id="6407981">1980</span><span class="op" id="6407985">)</span><span class="op" id="6407986">&lt;&lt;</span><span class="num" id="6407988">9</span><span class="op" id="6407989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407992"><a href="/archive/zip/struct.go.html#6407889">fTime</a></span>&nbsp;<span class="op" id="6407998">=</span>&nbsp;<span class="builtintype" id="6408000">uint16</span><span class="op" id="6408006">(</span><span class="ident" id="6408007"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6408008">.</span><span class="ident" id="6408009">Second</span><span class="op" id="6408015">(</span><span class="op" id="6408016">)</span><span class="op" id="6408017">/</span><span class="num" id="6408018">2</span>&nbsp;<span class="op" id="6408020">+</span>&nbsp;<span class="ident" id="6408022"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6408023">.</span><span class="ident" id="6408024">Minute</span><span class="op" id="6408030">(</span><span class="op" id="6408031">)</span><span class="op" id="6408032">&lt;&lt;</span><span class="num" id="6408034">5</span>&nbsp;<span class="op" id="6408036">+</span>&nbsp;<span class="ident" id="6408038"><a href="/archive/zip/struct.go.html#6407861">t</a></span><span class="op" id="6408039">.</span><span class="ident" id="6408040">Hour</span><span class="op" id="6408044">(</span><span class="op" id="6408045">)</span><span class="op" id="6408046">&lt;&lt;</span><span class="num" id="6408048">11</span><span class="op" id="6408050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408053">return</span><br>
<span class="lineno">175</span><span class="op" id="6408060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6408063">//&nbsp;ModTime&nbsp;returns&nbsp;the&nbsp;modification&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="6408112">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno"></span><span class="keyword" id="6408137">func</span>&nbsp;<span class="op" id="6408142">(</span><span class="ident" id="6408143">h</span>&nbsp;<span class="op" id="6408145">*</span><span class="ident" id="6408146"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6408156">)</span>&nbsp;<span class="ident" id="6408158">ModTime</span><span class="op" id="6408165">(</span><span class="op" id="6408166">)</span>&nbsp;<span class="ident" id="6408168"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6408172">.</span><span class="ident" id="6408173">Time</span>&nbsp;<span class="op" id="6408178">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408181">return</span>&nbsp;<span class="ident" id="6408188"><a href="/archive/zip/struct.go.html#6407297">msDosTimeToTime</a></span><span class="op" id="6408203">(</span><span class="ident" id="6408204"><a href="/archive/zip/struct.go.html#6408143">h</a></span><span class="op" id="6408205">.</span><span class="ident" id="6408206">ModifiedDate</span><span class="op" id="6408218">,</span>&nbsp;<span class="ident" id="6408220"><a href="/archive/zip/struct.go.html#6408143">h</a></span><span class="op" id="6408221">.</span><span class="ident" id="6408222">ModifiedTime</span><span class="op" id="6408234">)</span><br>
<span class="lineno"></span><span class="op" id="6408236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6408239">//&nbsp;SetModTime&nbsp;sets&nbsp;the&nbsp;ModifiedTime&nbsp;and&nbsp;ModifiedDate&nbsp;fields&nbsp;to&nbsp;the&nbsp;given&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="6408325">//&nbsp;The&nbsp;resolution&nbsp;is&nbsp;2s.</span><br>
<span class="lineno">185</span><span class="keyword" id="6408350">func</span>&nbsp;<span class="op" id="6408355">(</span><span class="ident" id="6408356">h</span>&nbsp;<span class="op" id="6408358">*</span><span class="ident" id="6408359"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6408369">)</span>&nbsp;<span class="ident" id="6408371">SetModTime</span><span class="op" id="6408381">(</span><span class="ident" id="6408382">t</span>&nbsp;<span class="ident" id="6408384"><a href="/archive/zip/struct.go.html#6403347">time</a></span><span class="op" id="6408388">.</span><span class="ident" id="6408389">Time</span><span class="op" id="6408393">)</span>&nbsp;<span class="op" id="6408395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408398"><a href="/archive/zip/struct.go.html#6408356">h</a></span><span class="op" id="6408399">.</span><span class="ident" id="6408400">ModifiedDate</span><span class="op" id="6408412">,</span>&nbsp;<span class="ident" id="6408414"><a href="/archive/zip/struct.go.html#6408356">h</a></span><span class="op" id="6408415">.</span><span class="ident" id="6408416">ModifiedTime</span>&nbsp;<span class="op" id="6408429">=</span>&nbsp;<span class="ident" id="6408431"><a href="/archive/zip/struct.go.html#6407845">timeToMsDosTime</a></span><span class="op" id="6408446">(</span><span class="ident" id="6408447"><a href="/archive/zip/struct.go.html#6408382">t</a></span><span class="op" id="6408448">)</span><br>
<span class="lineno"></span><span class="op" id="6408450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6408453">const</span>&nbsp;<span class="op" id="6408459">(</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6408462">//&nbsp;Unix&nbsp;constants.&nbsp;The&nbsp;specification&nbsp;doesn&#39;t&nbsp;mention&nbsp;them,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6408522">//&nbsp;but&nbsp;these&nbsp;seem&nbsp;to&nbsp;be&nbsp;the&nbsp;values&nbsp;agreed&nbsp;on&nbsp;by&nbsp;tools.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408578">s_IFMT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6408587">=</span>&nbsp;<span class="num" id="6408589">0xf000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408597">s_IFSOCK</span>&nbsp;<span class="op" id="6408606">=</span>&nbsp;<span class="num" id="6408608">0xc000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408616">s_IFLNK</span>&nbsp;&nbsp;<span class="op" id="6408625">=</span>&nbsp;<span class="num" id="6408627">0xa000</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408635">s_IFREG</span>&nbsp;&nbsp;<span class="op" id="6408644">=</span>&nbsp;<span class="num" id="6408646">0x8000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408654">s_IFBLK</span>&nbsp;&nbsp;<span class="op" id="6408663">=</span>&nbsp;<span class="num" id="6408665">0x6000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408673">s_IFDIR</span>&nbsp;&nbsp;<span class="op" id="6408682">=</span>&nbsp;<span class="num" id="6408684">0x4000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408692">s_IFCHR</span>&nbsp;&nbsp;<span class="op" id="6408701">=</span>&nbsp;<span class="num" id="6408703">0x2000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408711">s_IFIFO</span>&nbsp;&nbsp;<span class="op" id="6408720">=</span>&nbsp;<span class="num" id="6408722">0x1000</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408730">s_ISUID</span>&nbsp;&nbsp;<span class="op" id="6408739">=</span>&nbsp;<span class="num" id="6408741">0x800</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408748">s_ISGID</span>&nbsp;&nbsp;<span class="op" id="6408757">=</span>&nbsp;<span class="num" id="6408759">0x400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408766">s_ISVTX</span>&nbsp;&nbsp;<span class="op" id="6408775">=</span>&nbsp;<span class="num" id="6408777">0x200</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408785">msdosDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408799">=</span>&nbsp;<span class="num" id="6408801">0x10</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408807">msdosReadOnly</span>&nbsp;<span class="op" id="6408821">=</span>&nbsp;<span class="num" id="6408823">0x01</span><br>
<span class="lineno"></span><span class="op" id="6408828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6408831">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="6408896">func</span>&nbsp;<span class="op" id="6408901">(</span><span class="ident" id="6408902">h</span>&nbsp;<span class="op" id="6408904">*</span><span class="ident" id="6408905"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6408915">)</span>&nbsp;<span class="ident" id="6408917">Mode</span><span class="op" id="6408921">(</span><span class="op" id="6408922">)</span>&nbsp;<span class="op" id="6408924">(</span><span class="ident" id="6408925">mode</span>&nbsp;<span class="ident" id="6408930"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6408932">.</span><span class="ident" id="6408933">FileMode</span><span class="op" id="6408941">)</span>&nbsp;<span class="op" id="6408943">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408946">switch</span>&nbsp;<span class="ident" id="6408953"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6408954">.</span><span class="ident" id="6408955">CreatorVersion</span>&nbsp;<span class="op" id="6408970">&gt;&gt;</span>&nbsp;<span class="num" id="6408973">8</span>&nbsp;<span class="op" id="6408975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408978">case</span>&nbsp;<span class="ident" id="6408983"><a href="/archive/zip/struct.go.html#6404245">creatorUnix</a></span><span class="op" id="6408994">,</span>&nbsp;<span class="ident" id="6408996"><a href="/archive/zip/struct.go.html#6404304">creatorMacOSX</a></span><span class="op" id="6409009">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409013"><a href="/archive/zip/struct.go.html#6408925">mode</a></span>&nbsp;<span class="op" id="6409018">=</span>&nbsp;<span class="ident" id="6409020"><a href="/archive/zip/struct.go.html#6410579">unixModeToFileMode</a></span><span class="op" id="6409038">(</span><span class="ident" id="6409039"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6409040">.</span><span class="ident" id="6409041">ExternalAttrs</span>&nbsp;<span class="op" id="6409055">&gt;&gt;</span>&nbsp;<span class="num" id="6409058">16</span><span class="op" id="6409060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409063">case</span>&nbsp;<span class="ident" id="6409068"><a href="/archive/zip/struct.go.html#6404264">creatorNTFS</a></span><span class="op" id="6409079">,</span>&nbsp;<span class="ident" id="6409081"><a href="/archive/zip/struct.go.html#6404284">creatorVFAT</a></span><span class="op" id="6409092">,</span>&nbsp;<span class="ident" id="6409094"><a href="/archive/zip/struct.go.html#6404226">creatorFAT</a></span><span class="op" id="6409104">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409108"><a href="/archive/zip/struct.go.html#6408925">mode</a></span>&nbsp;<span class="op" id="6409113">=</span>&nbsp;<span class="ident" id="6409115"><a href="/archive/zip/struct.go.html#6409844">msdosModeToFileMode</a></span><span class="op" id="6409134">(</span><span class="ident" id="6409135"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6409136">.</span><span class="ident" id="6409137">ExternalAttrs</span><span class="op" id="6409150">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409156">if</span>&nbsp;<span class="builtinfunc" id="6409159">len</span><span class="op" id="6409162">(</span><span class="ident" id="6409163"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6409164">.</span><span class="ident" id="6409165">Name</span><span class="op" id="6409169">)</span>&nbsp;<span class="op" id="6409171">&gt;</span>&nbsp;<span class="num" id="6409173">0</span>&nbsp;<span class="op" id="6409175">&amp;&amp;</span>&nbsp;<span class="ident" id="6409178"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6409179">.</span><span class="ident" id="6409180">Name</span><span class="op" id="6409184">[</span><span class="builtinfunc" id="6409185">len</span><span class="op" id="6409188">(</span><span class="ident" id="6409189"><a href="/archive/zip/struct.go.html#6408902">h</a></span><span class="op" id="6409190">.</span><span class="ident" id="6409191">Name</span><span class="op" id="6409195">)</span><span class="op" id="6409196">-</span><span class="num" id="6409197">1</span><span class="op" id="6409198">]</span>&nbsp;<span class="op" id="6409200">==</span>&nbsp;<span class="string" id="6409203">&#39;/&#39;</span>&nbsp;<span class="op" id="6409207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409211"><a href="/archive/zip/struct.go.html#6408925">mode</a></span>&nbsp;<span class="op" id="6409216">|=</span>&nbsp;<span class="ident" id="6409219"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6409221">.</span><span class="ident" id="6409222">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409234">return</span>&nbsp;<span class="ident" id="6409241"><a href="/archive/zip/struct.go.html#6408925">mode</a></span><br>
<span class="lineno">220</span><span class="op" id="6409246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6409249">//&nbsp;SetMode&nbsp;changes&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;FileHeader.</span><br>
<span class="lineno"></span><span class="keyword" id="6409317">func</span>&nbsp;<span class="op" id="6409322">(</span><span class="ident" id="6409323">h</span>&nbsp;<span class="op" id="6409325">*</span><span class="ident" id="6409326"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6409336">)</span>&nbsp;<span class="ident" id="6409338">SetMode</span><span class="op" id="6409345">(</span><span class="ident" id="6409346">mode</span>&nbsp;<span class="ident" id="6409351"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6409353">.</span><span class="ident" id="6409354">FileMode</span><span class="op" id="6409362">)</span>&nbsp;<span class="op" id="6409364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409367"><a href="/archive/zip/struct.go.html#6409323">h</a></span><span class="op" id="6409368">.</span><span class="ident" id="6409369">CreatorVersion</span>&nbsp;<span class="op" id="6409384">=</span>&nbsp;<span class="ident" id="6409386"><a href="/archive/zip/struct.go.html#6409323">h</a></span><span class="op" id="6409387">.</span><span class="ident" id="6409388">CreatorVersion</span><span class="op" id="6409402">&amp;</span><span class="num" id="6409403">0xff</span>&nbsp;<span class="op" id="6409408">|</span>&nbsp;<span class="ident" id="6409410"><a href="/archive/zip/struct.go.html#6404245">creatorUnix</a></span><span class="op" id="6409421">&lt;&lt;</span><span class="num" id="6409423">8</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409426"><a href="/archive/zip/struct.go.html#6409323">h</a></span><span class="op" id="6409427">.</span><span class="ident" id="6409428">ExternalAttrs</span>&nbsp;<span class="op" id="6409442">=</span>&nbsp;<span class="ident" id="6409444"><a href="/archive/zip/struct.go.html#6410038">fileModeToUnixMode</a></span><span class="op" id="6409462">(</span><span class="ident" id="6409463"><a href="/archive/zip/struct.go.html#6409346">mode</a></span><span class="op" id="6409467">)</span>&nbsp;<span class="op" id="6409469">&lt;&lt;</span>&nbsp;<span class="num" id="6409472">16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6409477">//&nbsp;set&nbsp;MSDOS&nbsp;attributes&nbsp;too,&nbsp;as&nbsp;the&nbsp;original&nbsp;zip&nbsp;does.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409533">if</span>&nbsp;<span class="ident" id="6409536"><a href="/archive/zip/struct.go.html#6409346">mode</a></span><span class="op" id="6409540">&amp;</span><span class="ident" id="6409541"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6409543">.</span><span class="ident" id="6409544">ModeDir</span>&nbsp;<span class="op" id="6409552">!=</span>&nbsp;<span class="num" id="6409555">0</span>&nbsp;<span class="op" id="6409557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409561"><a href="/archive/zip/struct.go.html#6409323">h</a></span><span class="op" id="6409562">.</span><span class="ident" id="6409563">ExternalAttrs</span>&nbsp;<span class="op" id="6409577">|=</span>&nbsp;<span class="ident" id="6409580"><a href="/archive/zip/struct.go.html#6408785">msdosDir</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409593">if</span>&nbsp;<span class="ident" id="6409596"><a href="/archive/zip/struct.go.html#6409346">mode</a></span><span class="op" id="6409600">&amp;</span><span class="num" id="6409601">0200</span>&nbsp;<span class="op" id="6409606">==</span>&nbsp;<span class="num" id="6409609">0</span>&nbsp;<span class="op" id="6409611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409615"><a href="/archive/zip/struct.go.html#6409323">h</a></span><span class="op" id="6409616">.</span><span class="ident" id="6409617">ExternalAttrs</span>&nbsp;<span class="op" id="6409631">|=</span>&nbsp;<span class="ident" id="6409634"><a href="/archive/zip/struct.go.html#6408807">msdosReadOnly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409649">}</span><br>
<span class="lineno"></span><span class="op" id="6409651">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="6409654">//&nbsp;isZip64&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;exceeds&nbsp;the&nbsp;32&nbsp;bit&nbsp;limit</span><br>
<span class="lineno"></span><span class="keyword" id="6409720">func</span>&nbsp;<span class="op" id="6409725">(</span><span class="ident" id="6409726">fh</span>&nbsp;<span class="op" id="6409729">*</span><span class="ident" id="6409730"><a href="/archive/zip/struct.go.html#6404695">FileHeader</a></span><span class="op" id="6409740">)</span>&nbsp;<span class="ident" id="6409742">isZip64</span><span class="op" id="6409749">(</span><span class="op" id="6409750">)</span>&nbsp;<span class="builtintype" id="6409752">bool</span>&nbsp;<span class="op" id="6409757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409760">return</span>&nbsp;<span class="ident" id="6409767"><a href="/archive/zip/struct.go.html#6409726">fh</a></span><span class="op" id="6409769">.</span><span class="ident" id="6409770">CompressedSize64</span>&nbsp;<span class="op" id="6409787">&gt;</span>&nbsp;<span class="ident" id="6409789"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span>&nbsp;<span class="op" id="6409799">||</span>&nbsp;<span class="ident" id="6409802"><a href="/archive/zip/struct.go.html#6409726">fh</a></span><span class="op" id="6409804">.</span><span class="ident" id="6409805">UncompressedSize64</span>&nbsp;<span class="op" id="6409824">&gt;</span>&nbsp;<span class="ident" id="6409826"><a href="/archive/zip/struct.go.html#6404490">uint32max</a></span><br>
<span class="lineno"></span><span class="op" id="6409836">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="6409839">func</span>&nbsp;<span class="ident" id="6409844">msdosModeToFileMode</span><span class="op" id="6409863">(</span><span class="ident" id="6409864">m</span>&nbsp;<span class="builtintype" id="6409866">uint32</span><span class="op" id="6409872">)</span>&nbsp;<span class="op" id="6409874">(</span><span class="ident" id="6409875">mode</span>&nbsp;<span class="ident" id="6409880"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6409882">.</span><span class="ident" id="6409883">FileMode</span><span class="op" id="6409891">)</span>&nbsp;<span class="op" id="6409893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409896">if</span>&nbsp;<span class="ident" id="6409899"><a href="/archive/zip/struct.go.html#6409864">m</a></span><span class="op" id="6409900">&amp;</span><span class="ident" id="6409901"><a href="/archive/zip/struct.go.html#6408785">msdosDir</a></span>&nbsp;<span class="op" id="6409910">!=</span>&nbsp;<span class="num" id="6409913">0</span>&nbsp;<span class="op" id="6409915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409919"><a href="/archive/zip/struct.go.html#6409875">mode</a></span>&nbsp;<span class="op" id="6409924">=</span>&nbsp;<span class="ident" id="6409926"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6409928">.</span><span class="ident" id="6409929">ModeDir</span>&nbsp;<span class="op" id="6409937">|</span>&nbsp;<span class="num" id="6409939">0777</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409945">}</span>&nbsp;<span class="keyword" id="6409947">else</span>&nbsp;<span class="op" id="6409952">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409956"><a href="/archive/zip/struct.go.html#6409875">mode</a></span>&nbsp;<span class="op" id="6409961">=</span>&nbsp;<span class="num" id="6409963">0666</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409972">if</span>&nbsp;<span class="ident" id="6409975"><a href="/archive/zip/struct.go.html#6409864">m</a></span><span class="op" id="6409976">&amp;</span><span class="ident" id="6409977"><a href="/archive/zip/struct.go.html#6408807">msdosReadOnly</a></span>&nbsp;<span class="op" id="6409991">!=</span>&nbsp;<span class="num" id="6409994">0</span>&nbsp;<span class="op" id="6409996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410000"><a href="/archive/zip/struct.go.html#6409875">mode</a></span>&nbsp;<span class="op" id="6410005">&amp;^=</span>&nbsp;<span class="num" id="6410009">0222</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410015">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410018">return</span>&nbsp;<span class="ident" id="6410025"><a href="/archive/zip/struct.go.html#6409875">mode</a></span><br>
<span class="lineno"></span><span class="op" id="6410030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6410033">func</span>&nbsp;<span class="ident" id="6410038">fileModeToUnixMode</span><span class="op" id="6410056">(</span><span class="ident" id="6410057">mode</span>&nbsp;<span class="ident" id="6410062"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410064">.</span><span class="ident" id="6410065">FileMode</span><span class="op" id="6410073">)</span>&nbsp;<span class="builtintype" id="6410075">uint32</span>&nbsp;<span class="op" id="6410082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410085">var</span>&nbsp;<span class="ident" id="6410089">m</span>&nbsp;<span class="builtintype" id="6410091">uint32</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410099">switch</span>&nbsp;<span class="ident" id="6410106"><a href="/archive/zip/struct.go.html#6410057">mode</a></span>&nbsp;<span class="op" id="6410111">&amp;</span>&nbsp;<span class="ident" id="6410113"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410115">.</span><span class="ident" id="6410116">ModeType</span>&nbsp;<span class="op" id="6410125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410128">default</span><span class="op" id="6410135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410139"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410141">=</span>&nbsp;<span class="ident" id="6410143"><a href="/archive/zip/struct.go.html#6408635">s_IFREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410152">case</span>&nbsp;<span class="ident" id="6410157"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410159">.</span><span class="ident" id="6410160">ModeDir</span><span class="op" id="6410167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410171"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410173">=</span>&nbsp;<span class="ident" id="6410175"><a href="/archive/zip/struct.go.html#6408673">s_IFDIR</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410184">case</span>&nbsp;<span class="ident" id="6410189"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410191">.</span><span class="ident" id="6410192">ModeSymlink</span><span class="op" id="6410203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410207"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410209">=</span>&nbsp;<span class="ident" id="6410211"><a href="/archive/zip/struct.go.html#6408616">s_IFLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410220">case</span>&nbsp;<span class="ident" id="6410225"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410227">.</span><span class="ident" id="6410228">ModeNamedPipe</span><span class="op" id="6410241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410245"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410247">=</span>&nbsp;<span class="ident" id="6410249"><a href="/archive/zip/struct.go.html#6408711">s_IFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410258">case</span>&nbsp;<span class="ident" id="6410263"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410265">.</span><span class="ident" id="6410266">ModeSocket</span><span class="op" id="6410276">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410280"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410282">=</span>&nbsp;<span class="ident" id="6410284"><a href="/archive/zip/struct.go.html#6408597">s_IFSOCK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410294">case</span>&nbsp;<span class="ident" id="6410299"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410301">.</span><span class="ident" id="6410302">ModeDevice</span><span class="op" id="6410312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410316">if</span>&nbsp;<span class="ident" id="6410319"><a href="/archive/zip/struct.go.html#6410057">mode</a></span><span class="op" id="6410323">&amp;</span><span class="ident" id="6410324"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410326">.</span><span class="ident" id="6410327">ModeCharDevice</span>&nbsp;<span class="op" id="6410342">!=</span>&nbsp;<span class="num" id="6410345">0</span>&nbsp;<span class="op" id="6410347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410352"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410354">=</span>&nbsp;<span class="ident" id="6410356"><a href="/archive/zip/struct.go.html#6408692">s_IFCHR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410366">}</span>&nbsp;<span class="keyword" id="6410368">else</span>&nbsp;<span class="op" id="6410373">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410378"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410380">=</span>&nbsp;<span class="ident" id="6410382"><a href="/archive/zip/struct.go.html#6408654">s_IFBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410398">if</span>&nbsp;<span class="ident" id="6410401"><a href="/archive/zip/struct.go.html#6410057">mode</a></span><span class="op" id="6410405">&amp;</span><span class="ident" id="6410406"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410408">.</span><span class="ident" id="6410409">ModeSetuid</span>&nbsp;<span class="op" id="6410420">!=</span>&nbsp;<span class="num" id="6410423">0</span>&nbsp;<span class="op" id="6410425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410429"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410431">|=</span>&nbsp;<span class="ident" id="6410434"><a href="/archive/zip/struct.go.html#6408730">s_ISUID</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410446">if</span>&nbsp;<span class="ident" id="6410449"><a href="/archive/zip/struct.go.html#6410057">mode</a></span><span class="op" id="6410453">&amp;</span><span class="ident" id="6410454"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410456">.</span><span class="ident" id="6410457">ModeSetgid</span>&nbsp;<span class="op" id="6410468">!=</span>&nbsp;<span class="num" id="6410471">0</span>&nbsp;<span class="op" id="6410473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410477"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410479">|=</span>&nbsp;<span class="ident" id="6410482"><a href="/archive/zip/struct.go.html#6408748">s_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410494">if</span>&nbsp;<span class="ident" id="6410497"><a href="/archive/zip/struct.go.html#6410057">mode</a></span><span class="op" id="6410501">&amp;</span><span class="ident" id="6410502"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410504">.</span><span class="ident" id="6410505">ModeSticky</span>&nbsp;<span class="op" id="6410516">!=</span>&nbsp;<span class="num" id="6410519">0</span>&nbsp;<span class="op" id="6410521">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410525"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410527">|=</span>&nbsp;<span class="ident" id="6410530"><a href="/archive/zip/struct.go.html#6408766">s_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410542">return</span>&nbsp;<span class="ident" id="6410549"><a href="/archive/zip/struct.go.html#6410089">m</a></span>&nbsp;<span class="op" id="6410551">|</span>&nbsp;<span class="builtintype" id="6410553">uint32</span><span class="op" id="6410559">(</span><span class="ident" id="6410560"><a href="/archive/zip/struct.go.html#6410057">mode</a></span><span class="op" id="6410564">&amp;</span><span class="num" id="6410565">0777</span><span class="op" id="6410569">)</span><br>
<span class="lineno"></span><span class="op" id="6410571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="6410574">func</span>&nbsp;<span class="ident" id="6410579">unixModeToFileMode</span><span class="op" id="6410597">(</span><span class="ident" id="6410598">m</span>&nbsp;<span class="builtintype" id="6410600">uint32</span><span class="op" id="6410606">)</span>&nbsp;<span class="ident" id="6410608"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410610">.</span><span class="ident" id="6410611">FileMode</span>&nbsp;<span class="op" id="6410620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410623">mode</span>&nbsp;<span class="op" id="6410628">:=</span>&nbsp;<span class="ident" id="6410631"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410633">.</span><span class="ident" id="6410634">FileMode</span><span class="op" id="6410642">(</span><span class="ident" id="6410643"><a href="/archive/zip/struct.go.html#6410598">m</a></span>&nbsp;<span class="op" id="6410645">&amp;</span>&nbsp;<span class="num" id="6410647">0777</span><span class="op" id="6410651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410654">switch</span>&nbsp;<span class="ident" id="6410661"><a href="/archive/zip/struct.go.html#6410598">m</a></span>&nbsp;<span class="op" id="6410663">&amp;</span>&nbsp;<span class="ident" id="6410665"><a href="/archive/zip/struct.go.html#6408578">s_IFMT</a></span>&nbsp;<span class="op" id="6410672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410675">case</span>&nbsp;<span class="ident" id="6410680"><a href="/archive/zip/struct.go.html#6408654">s_IFBLK</a></span><span class="op" id="6410687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410691"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410696">|=</span>&nbsp;<span class="ident" id="6410699"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410701">.</span><span class="ident" id="6410702">ModeDevice</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410714">case</span>&nbsp;<span class="ident" id="6410719"><a href="/archive/zip/struct.go.html#6408692">s_IFCHR</a></span><span class="op" id="6410726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410730"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410735">|=</span>&nbsp;<span class="ident" id="6410738"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410740">.</span><span class="ident" id="6410741">ModeDevice</span>&nbsp;<span class="op" id="6410752">|</span>&nbsp;<span class="ident" id="6410754"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410756">.</span><span class="ident" id="6410757">ModeCharDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410773">case</span>&nbsp;<span class="ident" id="6410778"><a href="/archive/zip/struct.go.html#6408673">s_IFDIR</a></span><span class="op" id="6410785">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410789"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410794">|=</span>&nbsp;<span class="ident" id="6410797"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410799">.</span><span class="ident" id="6410800">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410809">case</span>&nbsp;<span class="ident" id="6410814"><a href="/archive/zip/struct.go.html#6408711">s_IFIFO</a></span><span class="op" id="6410821">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410825"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410830">|=</span>&nbsp;<span class="ident" id="6410833"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410835">.</span><span class="ident" id="6410836">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410851">case</span>&nbsp;<span class="ident" id="6410856"><a href="/archive/zip/struct.go.html#6408616">s_IFLNK</a></span><span class="op" id="6410863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410867"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410872">|=</span>&nbsp;<span class="ident" id="6410875"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410877">.</span><span class="ident" id="6410878">ModeSymlink</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410891">case</span>&nbsp;<span class="ident" id="6410896"><a href="/archive/zip/struct.go.html#6408635">s_IFREG</a></span><span class="op" id="6410903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6410907">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410925">case</span>&nbsp;<span class="ident" id="6410930"><a href="/archive/zip/struct.go.html#6408597">s_IFSOCK</a></span><span class="op" id="6410938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410942"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410947">|=</span>&nbsp;<span class="ident" id="6410950"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6410952">.</span><span class="ident" id="6410953">ModeSocket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410968">if</span>&nbsp;<span class="ident" id="6410971"><a href="/archive/zip/struct.go.html#6410598">m</a></span><span class="op" id="6410972">&amp;</span><span class="ident" id="6410973"><a href="/archive/zip/struct.go.html#6408748">s_ISGID</a></span>&nbsp;<span class="op" id="6410981">!=</span>&nbsp;<span class="num" id="6410984">0</span>&nbsp;<span class="op" id="6410986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410990"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6410995">|=</span>&nbsp;<span class="ident" id="6410998"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6411000">.</span><span class="ident" id="6411001">ModeSetgid</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411016">if</span>&nbsp;<span class="ident" id="6411019"><a href="/archive/zip/struct.go.html#6410598">m</a></span><span class="op" id="6411020">&amp;</span><span class="ident" id="6411021"><a href="/archive/zip/struct.go.html#6408730">s_ISUID</a></span>&nbsp;<span class="op" id="6411029">!=</span>&nbsp;<span class="num" id="6411032">0</span>&nbsp;<span class="op" id="6411034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411038"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6411043">|=</span>&nbsp;<span class="ident" id="6411046"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6411048">.</span><span class="ident" id="6411049">ModeSetuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411064">if</span>&nbsp;<span class="ident" id="6411067"><a href="/archive/zip/struct.go.html#6410598">m</a></span><span class="op" id="6411068">&amp;</span><span class="ident" id="6411069"><a href="/archive/zip/struct.go.html#6408766">s_ISVTX</a></span>&nbsp;<span class="op" id="6411077">!=</span>&nbsp;<span class="num" id="6411080">0</span>&nbsp;<span class="op" id="6411082">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411086"><a href="/archive/zip/struct.go.html#6410623">mode</a></span>&nbsp;<span class="op" id="6411091">|=</span>&nbsp;<span class="ident" id="6411094"><a href="/archive/zip/struct.go.html#6403333">os</a></span><span class="op" id="6411096">.</span><span class="ident" id="6411097">ModeSticky</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411112">return</span>&nbsp;<span class="ident" id="6411119"><a href="/archive/zip/struct.go.html#6410623">mode</a></span><br>
<span class="lineno"></span><span class="op" id="6411124">}</span>
</div>
</body>
</html>
