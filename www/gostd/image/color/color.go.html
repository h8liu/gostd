<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5543196">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5543251">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5543305">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5543356">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5543407">package</span>&nbsp;<span class="ident" id="5543415">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5543422">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5543499">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5543531">type</span>&nbsp;<span class="ident" id="5543536">Color</span>&nbsp;<span class="keyword" id="5543542">interface</span>&nbsp;<span class="op" id="5543552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5543555">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5543630">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5543706">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5543782">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5543796">RGBA</span><span class="op" id="5543800">(</span><span class="op" id="5543801">)</span>&nbsp;<span class="op" id="5543803">(</span><span class="ident" id="5543804">r</span><span class="op" id="5543805">,</span>&nbsp;<span class="ident" id="5543807">g</span><span class="op" id="5543808">,</span>&nbsp;<span class="ident" id="5543810">b</span><span class="op" id="5543811">,</span>&nbsp;<span class="ident" id="5543813">a</span>&nbsp;<span class="builtintype" id="5543815">uint32</span><span class="op" id="5543821">)</span><br>
<span class="lineno"></span><span class="op" id="5543823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5543826">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5543893">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5543950">type</span>&nbsp;<span class="ident" id="5543955">RGBA</span>&nbsp;<span class="keyword" id="5543960">struct</span>&nbsp;<span class="op" id="5543967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5543970">R</span><span class="op" id="5543971">,</span>&nbsp;<span class="ident" id="5543973">G</span><span class="op" id="5543974">,</span>&nbsp;<span class="ident" id="5543976">B</span><span class="op" id="5543977">,</span>&nbsp;<span class="ident" id="5543979">A</span>&nbsp;<span class="builtintype" id="5543981">uint8</span><br>
<span class="lineno"></span><span class="op" id="5543987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5543990">func</span>&nbsp;<span class="op" id="5543995">(</span><span class="ident" id="5543996">c</span>&nbsp;<span class="ident" id="5543998">RGBA</span><span class="op" id="5544002">)</span>&nbsp;<span class="ident" id="5544004">RGBA</span><span class="op" id="5544008">(</span><span class="op" id="5544009">)</span>&nbsp;<span class="op" id="5544011">(</span><span class="ident" id="5544012">r</span><span class="op" id="5544013">,</span>&nbsp;<span class="ident" id="5544015">g</span><span class="op" id="5544016">,</span>&nbsp;<span class="ident" id="5544018">b</span><span class="op" id="5544019">,</span>&nbsp;<span class="ident" id="5544021">a</span>&nbsp;<span class="builtintype" id="5544023">uint32</span><span class="op" id="5544029">)</span>&nbsp;<span class="op" id="5544031">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544034">r</span>&nbsp;<span class="op" id="5544036">=</span>&nbsp;<span class="builtintype" id="5544038">uint32</span><span class="op" id="5544044">(</span><span class="ident" id="5544045">c</span><span class="op" id="5544046">.</span><span class="ident" id="5544047">R</span><span class="op" id="5544048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544051">r</span>&nbsp;<span class="op" id="5544053">|=</span>&nbsp;<span class="ident" id="5544056">r</span>&nbsp;<span class="op" id="5544058">&lt;&lt;</span>&nbsp;<span class="num" id="5544061">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544064">g</span>&nbsp;<span class="op" id="5544066">=</span>&nbsp;<span class="builtintype" id="5544068">uint32</span><span class="op" id="5544074">(</span><span class="ident" id="5544075">c</span><span class="op" id="5544076">.</span><span class="ident" id="5544077">G</span><span class="op" id="5544078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544081">g</span>&nbsp;<span class="op" id="5544083">|=</span>&nbsp;<span class="ident" id="5544086">g</span>&nbsp;<span class="op" id="5544088">&lt;&lt;</span>&nbsp;<span class="num" id="5544091">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544094">b</span>&nbsp;<span class="op" id="5544096">=</span>&nbsp;<span class="builtintype" id="5544098">uint32</span><span class="op" id="5544104">(</span><span class="ident" id="5544105">c</span><span class="op" id="5544106">.</span><span class="ident" id="5544107">B</span><span class="op" id="5544108">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544111">b</span>&nbsp;<span class="op" id="5544113">|=</span>&nbsp;<span class="ident" id="5544116">b</span>&nbsp;<span class="op" id="5544118">&lt;&lt;</span>&nbsp;<span class="num" id="5544121">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544124">a</span>&nbsp;<span class="op" id="5544126">=</span>&nbsp;<span class="builtintype" id="5544128">uint32</span><span class="op" id="5544134">(</span><span class="ident" id="5544135">c</span><span class="op" id="5544136">.</span><span class="ident" id="5544137">A</span><span class="op" id="5544138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544141">a</span>&nbsp;<span class="op" id="5544143">|=</span>&nbsp;<span class="ident" id="5544146">a</span>&nbsp;<span class="op" id="5544148">&lt;&lt;</span>&nbsp;<span class="num" id="5544151">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544154">return</span><br>
<span class="lineno"></span><span class="op" id="5544161">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5544164">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5544221">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5544279">type</span>&nbsp;<span class="ident" id="5544284">RGBA64</span>&nbsp;<span class="keyword" id="5544291">struct</span>&nbsp;<span class="op" id="5544298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544301">R</span><span class="op" id="5544302">,</span>&nbsp;<span class="ident" id="5544304">G</span><span class="op" id="5544305">,</span>&nbsp;<span class="ident" id="5544307">B</span><span class="op" id="5544308">,</span>&nbsp;<span class="ident" id="5544310">A</span>&nbsp;<span class="builtintype" id="5544312">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5544319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5544322">func</span>&nbsp;<span class="op" id="5544327">(</span><span class="ident" id="5544328">c</span>&nbsp;<span class="ident" id="5544330">RGBA64</span><span class="op" id="5544336">)</span>&nbsp;<span class="ident" id="5544338">RGBA</span><span class="op" id="5544342">(</span><span class="op" id="5544343">)</span>&nbsp;<span class="op" id="5544345">(</span><span class="ident" id="5544346">r</span><span class="op" id="5544347">,</span>&nbsp;<span class="ident" id="5544349">g</span><span class="op" id="5544350">,</span>&nbsp;<span class="ident" id="5544352">b</span><span class="op" id="5544353">,</span>&nbsp;<span class="ident" id="5544355">a</span>&nbsp;<span class="builtintype" id="5544357">uint32</span><span class="op" id="5544363">)</span>&nbsp;<span class="op" id="5544365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544368">return</span>&nbsp;<span class="builtintype" id="5544375">uint32</span><span class="op" id="5544381">(</span><span class="ident" id="5544382">c</span><span class="op" id="5544383">.</span><span class="ident" id="5544384">R</span><span class="op" id="5544385">)</span><span class="op" id="5544386">,</span>&nbsp;<span class="builtintype" id="5544388">uint32</span><span class="op" id="5544394">(</span><span class="ident" id="5544395">c</span><span class="op" id="5544396">.</span><span class="ident" id="5544397">G</span><span class="op" id="5544398">)</span><span class="op" id="5544399">,</span>&nbsp;<span class="builtintype" id="5544401">uint32</span><span class="op" id="5544407">(</span><span class="ident" id="5544408">c</span><span class="op" id="5544409">.</span><span class="ident" id="5544410">B</span><span class="op" id="5544411">)</span><span class="op" id="5544412">,</span>&nbsp;<span class="builtintype" id="5544414">uint32</span><span class="op" id="5544420">(</span><span class="ident" id="5544421">c</span><span class="op" id="5544422">.</span><span class="ident" id="5544423">A</span><span class="op" id="5544424">)</span><br>
<span class="lineno"></span><span class="op" id="5544426">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5544429">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5544489">type</span>&nbsp;<span class="ident" id="5544494">NRGBA</span>&nbsp;<span class="keyword" id="5544500">struct</span>&nbsp;<span class="op" id="5544507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544510">R</span><span class="op" id="5544511">,</span>&nbsp;<span class="ident" id="5544513">G</span><span class="op" id="5544514">,</span>&nbsp;<span class="ident" id="5544516">B</span><span class="op" id="5544517">,</span>&nbsp;<span class="ident" id="5544519">A</span>&nbsp;<span class="builtintype" id="5544521">uint8</span><br>
<span class="lineno"></span><span class="op" id="5544527">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5544530">func</span>&nbsp;<span class="op" id="5544535">(</span><span class="ident" id="5544536">c</span>&nbsp;<span class="ident" id="5544538">NRGBA</span><span class="op" id="5544543">)</span>&nbsp;<span class="ident" id="5544545">RGBA</span><span class="op" id="5544549">(</span><span class="op" id="5544550">)</span>&nbsp;<span class="op" id="5544552">(</span><span class="ident" id="5544553">r</span><span class="op" id="5544554">,</span>&nbsp;<span class="ident" id="5544556">g</span><span class="op" id="5544557">,</span>&nbsp;<span class="ident" id="5544559">b</span><span class="op" id="5544560">,</span>&nbsp;<span class="ident" id="5544562">a</span>&nbsp;<span class="builtintype" id="5544564">uint32</span><span class="op" id="5544570">)</span>&nbsp;<span class="op" id="5544572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544575">r</span>&nbsp;<span class="op" id="5544577">=</span>&nbsp;<span class="builtintype" id="5544579">uint32</span><span class="op" id="5544585">(</span><span class="ident" id="5544586">c</span><span class="op" id="5544587">.</span><span class="ident" id="5544588">R</span><span class="op" id="5544589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544592">r</span>&nbsp;<span class="op" id="5544594">|=</span>&nbsp;<span class="ident" id="5544597">r</span>&nbsp;<span class="op" id="5544599">&lt;&lt;</span>&nbsp;<span class="num" id="5544602">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544605">r</span>&nbsp;<span class="op" id="5544607">*=</span>&nbsp;<span class="builtintype" id="5544610">uint32</span><span class="op" id="5544616">(</span><span class="ident" id="5544617">c</span><span class="op" id="5544618">.</span><span class="ident" id="5544619">A</span><span class="op" id="5544620">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544623">r</span>&nbsp;<span class="op" id="5544625">/=</span>&nbsp;<span class="num" id="5544628">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544634">g</span>&nbsp;<span class="op" id="5544636">=</span>&nbsp;<span class="builtintype" id="5544638">uint32</span><span class="op" id="5544644">(</span><span class="ident" id="5544645">c</span><span class="op" id="5544646">.</span><span class="ident" id="5544647">G</span><span class="op" id="5544648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544651">g</span>&nbsp;<span class="op" id="5544653">|=</span>&nbsp;<span class="ident" id="5544656">g</span>&nbsp;<span class="op" id="5544658">&lt;&lt;</span>&nbsp;<span class="num" id="5544661">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544664">g</span>&nbsp;<span class="op" id="5544666">*=</span>&nbsp;<span class="builtintype" id="5544669">uint32</span><span class="op" id="5544675">(</span><span class="ident" id="5544676">c</span><span class="op" id="5544677">.</span><span class="ident" id="5544678">A</span><span class="op" id="5544679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544682">g</span>&nbsp;<span class="op" id="5544684">/=</span>&nbsp;<span class="num" id="5544687">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544693">b</span>&nbsp;<span class="op" id="5544695">=</span>&nbsp;<span class="builtintype" id="5544697">uint32</span><span class="op" id="5544703">(</span><span class="ident" id="5544704">c</span><span class="op" id="5544705">.</span><span class="ident" id="5544706">B</span><span class="op" id="5544707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544710">b</span>&nbsp;<span class="op" id="5544712">|=</span>&nbsp;<span class="ident" id="5544715">b</span>&nbsp;<span class="op" id="5544717">&lt;&lt;</span>&nbsp;<span class="num" id="5544720">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544723">b</span>&nbsp;<span class="op" id="5544725">*=</span>&nbsp;<span class="builtintype" id="5544728">uint32</span><span class="op" id="5544734">(</span><span class="ident" id="5544735">c</span><span class="op" id="5544736">.</span><span class="ident" id="5544737">A</span><span class="op" id="5544738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544741">b</span>&nbsp;<span class="op" id="5544743">/=</span>&nbsp;<span class="num" id="5544746">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544752">a</span>&nbsp;<span class="op" id="5544754">=</span>&nbsp;<span class="builtintype" id="5544756">uint32</span><span class="op" id="5544762">(</span><span class="ident" id="5544763">c</span><span class="op" id="5544764">.</span><span class="ident" id="5544765">A</span><span class="op" id="5544766">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544769">a</span>&nbsp;<span class="op" id="5544771">|=</span>&nbsp;<span class="ident" id="5544774">a</span>&nbsp;<span class="op" id="5544776">&lt;&lt;</span>&nbsp;<span class="num" id="5544779">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5544782">return</span><br>
<span class="lineno"></span><span class="op" id="5544789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5544792">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5544854">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5544912">type</span>&nbsp;<span class="ident" id="5544917">NRGBA64</span>&nbsp;<span class="keyword" id="5544925">struct</span>&nbsp;<span class="op" id="5544932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5544935">R</span><span class="op" id="5544936">,</span>&nbsp;<span class="ident" id="5544938">G</span><span class="op" id="5544939">,</span>&nbsp;<span class="ident" id="5544941">B</span><span class="op" id="5544942">,</span>&nbsp;<span class="ident" id="5544944">A</span>&nbsp;<span class="builtintype" id="5544946">uint16</span><br>
<span class="lineno"></span><span class="op" id="5544953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5544956">func</span>&nbsp;<span class="op" id="5544961">(</span><span class="ident" id="5544962">c</span>&nbsp;<span class="ident" id="5544964">NRGBA64</span><span class="op" id="5544971">)</span>&nbsp;<span class="ident" id="5544973">RGBA</span><span class="op" id="5544977">(</span><span class="op" id="5544978">)</span>&nbsp;<span class="op" id="5544980">(</span><span class="ident" id="5544981">r</span><span class="op" id="5544982">,</span>&nbsp;<span class="ident" id="5544984">g</span><span class="op" id="5544985">,</span>&nbsp;<span class="ident" id="5544987">b</span><span class="op" id="5544988">,</span>&nbsp;<span class="ident" id="5544990">a</span>&nbsp;<span class="builtintype" id="5544992">uint32</span><span class="op" id="5544998">)</span>&nbsp;<span class="op" id="5545000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545003">r</span>&nbsp;<span class="op" id="5545005">=</span>&nbsp;<span class="builtintype" id="5545007">uint32</span><span class="op" id="5545013">(</span><span class="ident" id="5545014">c</span><span class="op" id="5545015">.</span><span class="ident" id="5545016">R</span><span class="op" id="5545017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545020">r</span>&nbsp;<span class="op" id="5545022">*=</span>&nbsp;<span class="builtintype" id="5545025">uint32</span><span class="op" id="5545031">(</span><span class="ident" id="5545032">c</span><span class="op" id="5545033">.</span><span class="ident" id="5545034">A</span><span class="op" id="5545035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545038">r</span>&nbsp;<span class="op" id="5545040">/=</span>&nbsp;<span class="num" id="5545043">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545051">g</span>&nbsp;<span class="op" id="5545053">=</span>&nbsp;<span class="builtintype" id="5545055">uint32</span><span class="op" id="5545061">(</span><span class="ident" id="5545062">c</span><span class="op" id="5545063">.</span><span class="ident" id="5545064">G</span><span class="op" id="5545065">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545068">g</span>&nbsp;<span class="op" id="5545070">*=</span>&nbsp;<span class="builtintype" id="5545073">uint32</span><span class="op" id="5545079">(</span><span class="ident" id="5545080">c</span><span class="op" id="5545081">.</span><span class="ident" id="5545082">A</span><span class="op" id="5545083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545086">g</span>&nbsp;<span class="op" id="5545088">/=</span>&nbsp;<span class="num" id="5545091">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545099">b</span>&nbsp;<span class="op" id="5545101">=</span>&nbsp;<span class="builtintype" id="5545103">uint32</span><span class="op" id="5545109">(</span><span class="ident" id="5545110">c</span><span class="op" id="5545111">.</span><span class="ident" id="5545112">B</span><span class="op" id="5545113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545116">b</span>&nbsp;<span class="op" id="5545118">*=</span>&nbsp;<span class="builtintype" id="5545121">uint32</span><span class="op" id="5545127">(</span><span class="ident" id="5545128">c</span><span class="op" id="5545129">.</span><span class="ident" id="5545130">A</span><span class="op" id="5545131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545134">b</span>&nbsp;<span class="op" id="5545136">/=</span>&nbsp;<span class="num" id="5545139">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545147">a</span>&nbsp;<span class="op" id="5545149">=</span>&nbsp;<span class="builtintype" id="5545151">uint32</span><span class="op" id="5545157">(</span><span class="ident" id="5545158">c</span><span class="op" id="5545159">.</span><span class="ident" id="5545160">A</span><span class="op" id="5545161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545164">return</span><br>
<span class="lineno"></span><span class="op" id="5545171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5545174">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5545216">type</span>&nbsp;<span class="ident" id="5545221">Alpha</span>&nbsp;<span class="keyword" id="5545227">struct</span>&nbsp;<span class="op" id="5545234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545237">A</span>&nbsp;<span class="builtintype" id="5545239">uint8</span><br>
<span class="lineno"></span><span class="op" id="5545245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5545248">func</span>&nbsp;<span class="op" id="5545253">(</span><span class="ident" id="5545254">c</span>&nbsp;<span class="ident" id="5545256">Alpha</span><span class="op" id="5545261">)</span>&nbsp;<span class="ident" id="5545263">RGBA</span><span class="op" id="5545267">(</span><span class="op" id="5545268">)</span>&nbsp;<span class="op" id="5545270">(</span><span class="ident" id="5545271">r</span><span class="op" id="5545272">,</span>&nbsp;<span class="ident" id="5545274">g</span><span class="op" id="5545275">,</span>&nbsp;<span class="ident" id="5545277">b</span><span class="op" id="5545278">,</span>&nbsp;<span class="ident" id="5545280">a</span>&nbsp;<span class="builtintype" id="5545282">uint32</span><span class="op" id="5545288">)</span>&nbsp;<span class="op" id="5545290">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545293">a</span>&nbsp;<span class="op" id="5545295">=</span>&nbsp;<span class="builtintype" id="5545297">uint32</span><span class="op" id="5545303">(</span><span class="ident" id="5545304">c</span><span class="op" id="5545305">.</span><span class="ident" id="5545306">A</span><span class="op" id="5545307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545310">a</span>&nbsp;<span class="op" id="5545312">|=</span>&nbsp;<span class="ident" id="5545315">a</span>&nbsp;<span class="op" id="5545317">&lt;&lt;</span>&nbsp;<span class="num" id="5545320">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545323">return</span>&nbsp;<span class="ident" id="5545330">a</span><span class="op" id="5545331">,</span>&nbsp;<span class="ident" id="5545333">a</span><span class="op" id="5545334">,</span>&nbsp;<span class="ident" id="5545336">a</span><span class="op" id="5545337">,</span>&nbsp;<span class="ident" id="5545339">a</span><br>
<span class="lineno"></span><span class="op" id="5545341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5545344">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5545388">type</span>&nbsp;<span class="ident" id="5545393">Alpha16</span>&nbsp;<span class="keyword" id="5545401">struct</span>&nbsp;<span class="op" id="5545408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545411">A</span>&nbsp;<span class="builtintype" id="5545413">uint16</span><br>
<span class="lineno"></span><span class="op" id="5545420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5545423">func</span>&nbsp;<span class="op" id="5545428">(</span><span class="ident" id="5545429">c</span>&nbsp;<span class="ident" id="5545431">Alpha16</span><span class="op" id="5545438">)</span>&nbsp;<span class="ident" id="5545440">RGBA</span><span class="op" id="5545444">(</span><span class="op" id="5545445">)</span>&nbsp;<span class="op" id="5545447">(</span><span class="ident" id="5545448">r</span><span class="op" id="5545449">,</span>&nbsp;<span class="ident" id="5545451">g</span><span class="op" id="5545452">,</span>&nbsp;<span class="ident" id="5545454">b</span><span class="op" id="5545455">,</span>&nbsp;<span class="ident" id="5545457">a</span>&nbsp;<span class="builtintype" id="5545459">uint32</span><span class="op" id="5545465">)</span>&nbsp;<span class="op" id="5545467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545470">a</span>&nbsp;<span class="op" id="5545472">=</span>&nbsp;<span class="builtintype" id="5545474">uint32</span><span class="op" id="5545480">(</span><span class="ident" id="5545481">c</span><span class="op" id="5545482">.</span><span class="ident" id="5545483">A</span><span class="op" id="5545484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545487">return</span>&nbsp;<span class="ident" id="5545494">a</span><span class="op" id="5545495">,</span>&nbsp;<span class="ident" id="5545497">a</span><span class="op" id="5545498">,</span>&nbsp;<span class="ident" id="5545500">a</span><span class="op" id="5545501">,</span>&nbsp;<span class="ident" id="5545503">a</span><br>
<span class="lineno"></span><span class="op" id="5545505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5545508">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5545553">type</span>&nbsp;<span class="ident" id="5545558">Gray</span>&nbsp;<span class="keyword" id="5545563">struct</span>&nbsp;<span class="op" id="5545570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545573">Y</span>&nbsp;<span class="builtintype" id="5545575">uint8</span><br>
<span class="lineno"></span><span class="op" id="5545581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5545584">func</span>&nbsp;<span class="op" id="5545589">(</span><span class="ident" id="5545590">c</span>&nbsp;<span class="ident" id="5545592">Gray</span><span class="op" id="5545596">)</span>&nbsp;<span class="ident" id="5545598">RGBA</span><span class="op" id="5545602">(</span><span class="op" id="5545603">)</span>&nbsp;<span class="op" id="5545605">(</span><span class="ident" id="5545606">r</span><span class="op" id="5545607">,</span>&nbsp;<span class="ident" id="5545609">g</span><span class="op" id="5545610">,</span>&nbsp;<span class="ident" id="5545612">b</span><span class="op" id="5545613">,</span>&nbsp;<span class="ident" id="5545615">a</span>&nbsp;<span class="builtintype" id="5545617">uint32</span><span class="op" id="5545623">)</span>&nbsp;<span class="op" id="5545625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545628">y</span>&nbsp;<span class="op" id="5545630">:=</span>&nbsp;<span class="builtintype" id="5545633">uint32</span><span class="op" id="5545639">(</span><span class="ident" id="5545640">c</span><span class="op" id="5545641">.</span><span class="ident" id="5545642">Y</span><span class="op" id="5545643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545646">y</span>&nbsp;<span class="op" id="5545648">|=</span>&nbsp;<span class="ident" id="5545651">y</span>&nbsp;<span class="op" id="5545653">&lt;&lt;</span>&nbsp;<span class="num" id="5545656">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545659">return</span>&nbsp;<span class="ident" id="5545666">y</span><span class="op" id="5545667">,</span>&nbsp;<span class="ident" id="5545669">y</span><span class="op" id="5545670">,</span>&nbsp;<span class="ident" id="5545672">y</span><span class="op" id="5545673">,</span>&nbsp;<span class="num" id="5545675">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5545682">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5545685">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5545732">type</span>&nbsp;<span class="ident" id="5545737">Gray16</span>&nbsp;<span class="keyword" id="5545744">struct</span>&nbsp;<span class="op" id="5545751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545754">Y</span>&nbsp;<span class="builtintype" id="5545756">uint16</span><br>
<span class="lineno"></span><span class="op" id="5545763">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5545766">func</span>&nbsp;<span class="op" id="5545771">(</span><span class="ident" id="5545772">c</span>&nbsp;<span class="ident" id="5545774">Gray16</span><span class="op" id="5545780">)</span>&nbsp;<span class="ident" id="5545782">RGBA</span><span class="op" id="5545786">(</span><span class="op" id="5545787">)</span>&nbsp;<span class="op" id="5545789">(</span><span class="ident" id="5545790">r</span><span class="op" id="5545791">,</span>&nbsp;<span class="ident" id="5545793">g</span><span class="op" id="5545794">,</span>&nbsp;<span class="ident" id="5545796">b</span><span class="op" id="5545797">,</span>&nbsp;<span class="ident" id="5545799">a</span>&nbsp;<span class="builtintype" id="5545801">uint32</span><span class="op" id="5545807">)</span>&nbsp;<span class="op" id="5545809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545812">y</span>&nbsp;<span class="op" id="5545814">:=</span>&nbsp;<span class="builtintype" id="5545817">uint32</span><span class="op" id="5545823">(</span><span class="ident" id="5545824">c</span><span class="op" id="5545825">.</span><span class="ident" id="5545826">Y</span><span class="op" id="5545827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5545830">return</span>&nbsp;<span class="ident" id="5545837">y</span><span class="op" id="5545838">,</span>&nbsp;<span class="ident" id="5545840">y</span><span class="op" id="5545841">,</span>&nbsp;<span class="ident" id="5545843">y</span><span class="op" id="5545844">,</span>&nbsp;<span class="num" id="5545846">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5545853">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5545856">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5545935">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5545952">type</span>&nbsp;<span class="ident" id="5545957">Model</span>&nbsp;<span class="keyword" id="5545963">interface</span>&nbsp;<span class="op" id="5545973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5545976">Convert</span><span class="op" id="5545983">(</span><span class="ident" id="5545984">c</span>&nbsp;<span class="ident" id="5545986">Color</span><span class="op" id="5545991">)</span>&nbsp;<span class="ident" id="5545993">Color</span><br>
<span class="lineno">135</span><span class="op" id="5545999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5546002">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5546075">func</span>&nbsp;<span class="ident" id="5546080">ModelFunc</span><span class="op" id="5546089">(</span><span class="ident" id="5546090">f</span>&nbsp;<span class="keyword" id="5546092">func</span><span class="op" id="5546096">(</span><span class="ident" id="5546097">Color</span><span class="op" id="5546102">)</span>&nbsp;<span class="ident" id="5546104">Color</span><span class="op" id="5546109">)</span>&nbsp;<span class="ident" id="5546111">Model</span>&nbsp;<span class="op" id="5546117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5546120">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5546169">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5546218">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5546268">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5546318">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5546348">return</span>&nbsp;<span class="op" id="5546355">&amp;</span><span class="ident" id="5546356">modelFunc</span><span class="op" id="5546365">{</span><span class="ident" id="5546366">f</span><span class="op" id="5546367">}</span><br>
<span class="lineno">145</span><span class="op" id="5546369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5546372">type</span>&nbsp;<span class="ident" id="5546377">modelFunc</span>&nbsp;<span class="keyword" id="5546387">struct</span>&nbsp;<span class="op" id="5546394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546397">f</span>&nbsp;<span class="keyword" id="5546399">func</span><span class="op" id="5546403">(</span><span class="ident" id="5546404">Color</span><span class="op" id="5546409">)</span>&nbsp;<span class="ident" id="5546411">Color</span><br>
<span class="lineno"></span><span class="op" id="5546417">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5546420">func</span>&nbsp;<span class="op" id="5546425">(</span><span class="ident" id="5546426">m</span>&nbsp;<span class="op" id="5546428">*</span><span class="ident" id="5546429">modelFunc</span><span class="op" id="5546438">)</span>&nbsp;<span class="ident" id="5546440">Convert</span><span class="op" id="5546447">(</span><span class="ident" id="5546448">c</span>&nbsp;<span class="ident" id="5546450">Color</span><span class="op" id="5546455">)</span>&nbsp;<span class="ident" id="5546457">Color</span>&nbsp;<span class="op" id="5546463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5546466">return</span>&nbsp;<span class="ident" id="5546473">m</span><span class="op" id="5546474">.</span><span class="ident" id="5546475">f</span><span class="op" id="5546476">(</span><span class="ident" id="5546477">c</span><span class="op" id="5546478">)</span><br>
<span class="lineno"></span><span class="op" id="5546480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5546483">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5546523">var</span>&nbsp;<span class="op" id="5546527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546530">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5546543">Model</span>&nbsp;<span class="op" id="5546549">=</span>&nbsp;<span class="ident" id="5546551">ModelFunc</span><span class="op" id="5546560">(</span><span class="ident" id="5546561">rgbaModel</span><span class="op" id="5546570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546573">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5546586">Model</span>&nbsp;<span class="op" id="5546592">=</span>&nbsp;<span class="ident" id="5546594">ModelFunc</span><span class="op" id="5546603">(</span><span class="ident" id="5546604">rgba64Model</span><span class="op" id="5546615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546618">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5546631">Model</span>&nbsp;<span class="op" id="5546637">=</span>&nbsp;<span class="ident" id="5546639">ModelFunc</span><span class="op" id="5546648">(</span><span class="ident" id="5546649">nrgbaModel</span><span class="op" id="5546659">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546662">NRGBA64Model</span>&nbsp;<span class="ident" id="5546675">Model</span>&nbsp;<span class="op" id="5546681">=</span>&nbsp;<span class="ident" id="5546683">ModelFunc</span><span class="op" id="5546692">(</span><span class="ident" id="5546693">nrgba64Model</span><span class="op" id="5546705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546708">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5546721">Model</span>&nbsp;<span class="op" id="5546727">=</span>&nbsp;<span class="ident" id="5546729">ModelFunc</span><span class="op" id="5546738">(</span><span class="ident" id="5546739">alphaModel</span><span class="op" id="5546749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546752">Alpha16Model</span>&nbsp;<span class="ident" id="5546765">Model</span>&nbsp;<span class="op" id="5546771">=</span>&nbsp;<span class="ident" id="5546773">ModelFunc</span><span class="op" id="5546782">(</span><span class="ident" id="5546783">alpha16Model</span><span class="op" id="5546795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546798">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5546811">Model</span>&nbsp;<span class="op" id="5546817">=</span>&nbsp;<span class="ident" id="5546819">ModelFunc</span><span class="op" id="5546828">(</span><span class="ident" id="5546829">grayModel</span><span class="op" id="5546838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546841">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5546854">Model</span>&nbsp;<span class="op" id="5546860">=</span>&nbsp;<span class="ident" id="5546862">ModelFunc</span><span class="op" id="5546871">(</span><span class="ident" id="5546872">gray16Model</span><span class="op" id="5546883">)</span><br>
<span class="lineno">165</span><span class="op" id="5546885">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5546888">func</span>&nbsp;<span class="ident" id="5546893">rgbaModel</span><span class="op" id="5546902">(</span><span class="ident" id="5546903">c</span>&nbsp;<span class="ident" id="5546905">Color</span><span class="op" id="5546910">)</span>&nbsp;<span class="ident" id="5546912">Color</span>&nbsp;<span class="op" id="5546918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5546921">if</span>&nbsp;<span class="ident" id="5546924">_</span><span class="op" id="5546925">,</span>&nbsp;<span class="ident" id="5546927">ok</span>&nbsp;<span class="op" id="5546930">:=</span>&nbsp;<span class="ident" id="5546933">c</span><span class="op" id="5546934">.</span><span class="op" id="5546935">(</span><span class="ident" id="5546936">RGBA</span><span class="op" id="5546940">)</span><span class="op" id="5546941">;</span>&nbsp;<span class="ident" id="5546943">ok</span>&nbsp;<span class="op" id="5546946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5546950">return</span>&nbsp;<span class="ident" id="5546957">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5546960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5546963">r</span><span class="op" id="5546964">,</span>&nbsp;<span class="ident" id="5546966">g</span><span class="op" id="5546967">,</span>&nbsp;<span class="ident" id="5546969">b</span><span class="op" id="5546970">,</span>&nbsp;<span class="ident" id="5546972">a</span>&nbsp;<span class="op" id="5546974">:=</span>&nbsp;<span class="ident" id="5546977">c</span><span class="op" id="5546978">.</span><span class="ident" id="5546979">RGBA</span><span class="op" id="5546983">(</span><span class="op" id="5546984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5546987">return</span>&nbsp;<span class="ident" id="5546994">RGBA</span><span class="op" id="5546998">{</span><span class="builtintype" id="5546999">uint8</span><span class="op" id="5547004">(</span><span class="ident" id="5547005">r</span>&nbsp;<span class="op" id="5547007">&gt;&gt;</span>&nbsp;<span class="num" id="5547010">8</span><span class="op" id="5547011">)</span><span class="op" id="5547012">,</span>&nbsp;<span class="builtintype" id="5547014">uint8</span><span class="op" id="5547019">(</span><span class="ident" id="5547020">g</span>&nbsp;<span class="op" id="5547022">&gt;&gt;</span>&nbsp;<span class="num" id="5547025">8</span><span class="op" id="5547026">)</span><span class="op" id="5547027">,</span>&nbsp;<span class="builtintype" id="5547029">uint8</span><span class="op" id="5547034">(</span><span class="ident" id="5547035">b</span>&nbsp;<span class="op" id="5547037">&gt;&gt;</span>&nbsp;<span class="num" id="5547040">8</span><span class="op" id="5547041">)</span><span class="op" id="5547042">,</span>&nbsp;<span class="builtintype" id="5547044">uint8</span><span class="op" id="5547049">(</span><span class="ident" id="5547050">a</span>&nbsp;<span class="op" id="5547052">&gt;&gt;</span>&nbsp;<span class="num" id="5547055">8</span><span class="op" id="5547056">)</span><span class="op" id="5547057">}</span><br>
<span class="lineno"></span><span class="op" id="5547059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5547062">func</span>&nbsp;<span class="ident" id="5547067">rgba64Model</span><span class="op" id="5547078">(</span><span class="ident" id="5547079">c</span>&nbsp;<span class="ident" id="5547081">Color</span><span class="op" id="5547086">)</span>&nbsp;<span class="ident" id="5547088">Color</span>&nbsp;<span class="op" id="5547094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547097">if</span>&nbsp;<span class="ident" id="5547100">_</span><span class="op" id="5547101">,</span>&nbsp;<span class="ident" id="5547103">ok</span>&nbsp;<span class="op" id="5547106">:=</span>&nbsp;<span class="ident" id="5547109">c</span><span class="op" id="5547110">.</span><span class="op" id="5547111">(</span><span class="ident" id="5547112">RGBA64</span><span class="op" id="5547118">)</span><span class="op" id="5547119">;</span>&nbsp;<span class="ident" id="5547121">ok</span>&nbsp;<span class="op" id="5547124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547128">return</span>&nbsp;<span class="ident" id="5547135">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547141">r</span><span class="op" id="5547142">,</span>&nbsp;<span class="ident" id="5547144">g</span><span class="op" id="5547145">,</span>&nbsp;<span class="ident" id="5547147">b</span><span class="op" id="5547148">,</span>&nbsp;<span class="ident" id="5547150">a</span>&nbsp;<span class="op" id="5547152">:=</span>&nbsp;<span class="ident" id="5547155">c</span><span class="op" id="5547156">.</span><span class="ident" id="5547157">RGBA</span><span class="op" id="5547161">(</span><span class="op" id="5547162">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547165">return</span>&nbsp;<span class="ident" id="5547172">RGBA64</span><span class="op" id="5547178">{</span><span class="builtintype" id="5547179">uint16</span><span class="op" id="5547185">(</span><span class="ident" id="5547186">r</span><span class="op" id="5547187">)</span><span class="op" id="5547188">,</span>&nbsp;<span class="builtintype" id="5547190">uint16</span><span class="op" id="5547196">(</span><span class="ident" id="5547197">g</span><span class="op" id="5547198">)</span><span class="op" id="5547199">,</span>&nbsp;<span class="builtintype" id="5547201">uint16</span><span class="op" id="5547207">(</span><span class="ident" id="5547208">b</span><span class="op" id="5547209">)</span><span class="op" id="5547210">,</span>&nbsp;<span class="builtintype" id="5547212">uint16</span><span class="op" id="5547218">(</span><span class="ident" id="5547219">a</span><span class="op" id="5547220">)</span><span class="op" id="5547221">}</span><br>
<span class="lineno"></span><span class="op" id="5547223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5547226">func</span>&nbsp;<span class="ident" id="5547231">nrgbaModel</span><span class="op" id="5547241">(</span><span class="ident" id="5547242">c</span>&nbsp;<span class="ident" id="5547244">Color</span><span class="op" id="5547249">)</span>&nbsp;<span class="ident" id="5547251">Color</span>&nbsp;<span class="op" id="5547257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547260">if</span>&nbsp;<span class="ident" id="5547263">_</span><span class="op" id="5547264">,</span>&nbsp;<span class="ident" id="5547266">ok</span>&nbsp;<span class="op" id="5547269">:=</span>&nbsp;<span class="ident" id="5547272">c</span><span class="op" id="5547273">.</span><span class="op" id="5547274">(</span><span class="ident" id="5547275">NRGBA</span><span class="op" id="5547280">)</span><span class="op" id="5547281">;</span>&nbsp;<span class="ident" id="5547283">ok</span>&nbsp;<span class="op" id="5547286">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547290">return</span>&nbsp;<span class="ident" id="5547297">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547303">r</span><span class="op" id="5547304">,</span>&nbsp;<span class="ident" id="5547306">g</span><span class="op" id="5547307">,</span>&nbsp;<span class="ident" id="5547309">b</span><span class="op" id="5547310">,</span>&nbsp;<span class="ident" id="5547312">a</span>&nbsp;<span class="op" id="5547314">:=</span>&nbsp;<span class="ident" id="5547317">c</span><span class="op" id="5547318">.</span><span class="ident" id="5547319">RGBA</span><span class="op" id="5547323">(</span><span class="op" id="5547324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547327">if</span>&nbsp;<span class="ident" id="5547330">a</span>&nbsp;<span class="op" id="5547332">==</span>&nbsp;<span class="num" id="5547335">0xffff</span>&nbsp;<span class="op" id="5547342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547346">return</span>&nbsp;<span class="ident" id="5547353">NRGBA</span><span class="op" id="5547358">{</span><span class="builtintype" id="5547359">uint8</span><span class="op" id="5547364">(</span><span class="ident" id="5547365">r</span>&nbsp;<span class="op" id="5547367">&gt;&gt;</span>&nbsp;<span class="num" id="5547370">8</span><span class="op" id="5547371">)</span><span class="op" id="5547372">,</span>&nbsp;<span class="builtintype" id="5547374">uint8</span><span class="op" id="5547379">(</span><span class="ident" id="5547380">g</span>&nbsp;<span class="op" id="5547382">&gt;&gt;</span>&nbsp;<span class="num" id="5547385">8</span><span class="op" id="5547386">)</span><span class="op" id="5547387">,</span>&nbsp;<span class="builtintype" id="5547389">uint8</span><span class="op" id="5547394">(</span><span class="ident" id="5547395">b</span>&nbsp;<span class="op" id="5547397">&gt;&gt;</span>&nbsp;<span class="num" id="5547400">8</span><span class="op" id="5547401">)</span><span class="op" id="5547402">,</span>&nbsp;<span class="num" id="5547404">0xff</span><span class="op" id="5547408">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547414">if</span>&nbsp;<span class="ident" id="5547417">a</span>&nbsp;<span class="op" id="5547419">==</span>&nbsp;<span class="num" id="5547422">0</span>&nbsp;<span class="op" id="5547424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547428">return</span>&nbsp;<span class="ident" id="5547435">NRGBA</span><span class="op" id="5547440">{</span><span class="num" id="5547441">0</span><span class="op" id="5547442">,</span>&nbsp;<span class="num" id="5547444">0</span><span class="op" id="5547445">,</span>&nbsp;<span class="num" id="5547447">0</span><span class="op" id="5547448">,</span>&nbsp;<span class="num" id="5547450">0</span><span class="op" id="5547451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5547457">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547558">r</span>&nbsp;<span class="op" id="5547560">=</span>&nbsp;<span class="op" id="5547562">(</span><span class="ident" id="5547563">r</span>&nbsp;<span class="op" id="5547565">*</span>&nbsp;<span class="num" id="5547567">0xffff</span><span class="op" id="5547573">)</span>&nbsp;<span class="op" id="5547575">/</span>&nbsp;<span class="ident" id="5547577">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547580">g</span>&nbsp;<span class="op" id="5547582">=</span>&nbsp;<span class="op" id="5547584">(</span><span class="ident" id="5547585">g</span>&nbsp;<span class="op" id="5547587">*</span>&nbsp;<span class="num" id="5547589">0xffff</span><span class="op" id="5547595">)</span>&nbsp;<span class="op" id="5547597">/</span>&nbsp;<span class="ident" id="5547599">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547602">b</span>&nbsp;<span class="op" id="5547604">=</span>&nbsp;<span class="op" id="5547606">(</span><span class="ident" id="5547607">b</span>&nbsp;<span class="op" id="5547609">*</span>&nbsp;<span class="num" id="5547611">0xffff</span><span class="op" id="5547617">)</span>&nbsp;<span class="op" id="5547619">/</span>&nbsp;<span class="ident" id="5547621">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547624">return</span>&nbsp;<span class="ident" id="5547631">NRGBA</span><span class="op" id="5547636">{</span><span class="builtintype" id="5547637">uint8</span><span class="op" id="5547642">(</span><span class="ident" id="5547643">r</span>&nbsp;<span class="op" id="5547645">&gt;&gt;</span>&nbsp;<span class="num" id="5547648">8</span><span class="op" id="5547649">)</span><span class="op" id="5547650">,</span>&nbsp;<span class="builtintype" id="5547652">uint8</span><span class="op" id="5547657">(</span><span class="ident" id="5547658">g</span>&nbsp;<span class="op" id="5547660">&gt;&gt;</span>&nbsp;<span class="num" id="5547663">8</span><span class="op" id="5547664">)</span><span class="op" id="5547665">,</span>&nbsp;<span class="builtintype" id="5547667">uint8</span><span class="op" id="5547672">(</span><span class="ident" id="5547673">b</span>&nbsp;<span class="op" id="5547675">&gt;&gt;</span>&nbsp;<span class="num" id="5547678">8</span><span class="op" id="5547679">)</span><span class="op" id="5547680">,</span>&nbsp;<span class="builtintype" id="5547682">uint8</span><span class="op" id="5547687">(</span><span class="ident" id="5547688">a</span>&nbsp;<span class="op" id="5547690">&gt;&gt;</span>&nbsp;<span class="num" id="5547693">8</span><span class="op" id="5547694">)</span><span class="op" id="5547695">}</span><br>
<span class="lineno"></span><span class="op" id="5547697">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5547700">func</span>&nbsp;<span class="ident" id="5547705">nrgba64Model</span><span class="op" id="5547717">(</span><span class="ident" id="5547718">c</span>&nbsp;<span class="ident" id="5547720">Color</span><span class="op" id="5547725">)</span>&nbsp;<span class="ident" id="5547727">Color</span>&nbsp;<span class="op" id="5547733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547736">if</span>&nbsp;<span class="ident" id="5547739">_</span><span class="op" id="5547740">,</span>&nbsp;<span class="ident" id="5547742">ok</span>&nbsp;<span class="op" id="5547745">:=</span>&nbsp;<span class="ident" id="5547748">c</span><span class="op" id="5547749">.</span><span class="op" id="5547750">(</span><span class="ident" id="5547751">NRGBA64</span><span class="op" id="5547758">)</span><span class="op" id="5547759">;</span>&nbsp;<span class="ident" id="5547761">ok</span>&nbsp;<span class="op" id="5547764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547768">return</span>&nbsp;<span class="ident" id="5547775">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547778">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5547781">r</span><span class="op" id="5547782">,</span>&nbsp;<span class="ident" id="5547784">g</span><span class="op" id="5547785">,</span>&nbsp;<span class="ident" id="5547787">b</span><span class="op" id="5547788">,</span>&nbsp;<span class="ident" id="5547790">a</span>&nbsp;<span class="op" id="5547792">:=</span>&nbsp;<span class="ident" id="5547795">c</span><span class="op" id="5547796">.</span><span class="ident" id="5547797">RGBA</span><span class="op" id="5547801">(</span><span class="op" id="5547802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547805">if</span>&nbsp;<span class="ident" id="5547808">a</span>&nbsp;<span class="op" id="5547810">==</span>&nbsp;<span class="num" id="5547813">0xffff</span>&nbsp;<span class="op" id="5547820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547824">return</span>&nbsp;<span class="ident" id="5547831">NRGBA64</span><span class="op" id="5547838">{</span><span class="builtintype" id="5547839">uint16</span><span class="op" id="5547845">(</span><span class="ident" id="5547846">r</span><span class="op" id="5547847">)</span><span class="op" id="5547848">,</span>&nbsp;<span class="builtintype" id="5547850">uint16</span><span class="op" id="5547856">(</span><span class="ident" id="5547857">g</span><span class="op" id="5547858">)</span><span class="op" id="5547859">,</span>&nbsp;<span class="builtintype" id="5547861">uint16</span><span class="op" id="5547867">(</span><span class="ident" id="5547868">b</span><span class="op" id="5547869">)</span><span class="op" id="5547870">,</span>&nbsp;<span class="num" id="5547872">0xffff</span><span class="op" id="5547878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547884">if</span>&nbsp;<span class="ident" id="5547887">a</span>&nbsp;<span class="op" id="5547889">==</span>&nbsp;<span class="num" id="5547892">0</span>&nbsp;<span class="op" id="5547894">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5547898">return</span>&nbsp;<span class="ident" id="5547905">NRGBA64</span><span class="op" id="5547912">{</span><span class="num" id="5547913">0</span><span class="op" id="5547914">,</span>&nbsp;<span class="num" id="5547916">0</span><span class="op" id="5547917">,</span>&nbsp;<span class="num" id="5547919">0</span><span class="op" id="5547920">,</span>&nbsp;<span class="num" id="5547922">0</span><span class="op" id="5547923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5547926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5547929">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548030">r</span>&nbsp;<span class="op" id="5548032">=</span>&nbsp;<span class="op" id="5548034">(</span><span class="ident" id="5548035">r</span>&nbsp;<span class="op" id="5548037">*</span>&nbsp;<span class="num" id="5548039">0xffff</span><span class="op" id="5548045">)</span>&nbsp;<span class="op" id="5548047">/</span>&nbsp;<span class="ident" id="5548049">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548052">g</span>&nbsp;<span class="op" id="5548054">=</span>&nbsp;<span class="op" id="5548056">(</span><span class="ident" id="5548057">g</span>&nbsp;<span class="op" id="5548059">*</span>&nbsp;<span class="num" id="5548061">0xffff</span><span class="op" id="5548067">)</span>&nbsp;<span class="op" id="5548069">/</span>&nbsp;<span class="ident" id="5548071">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548074">b</span>&nbsp;<span class="op" id="5548076">=</span>&nbsp;<span class="op" id="5548078">(</span><span class="ident" id="5548079">b</span>&nbsp;<span class="op" id="5548081">*</span>&nbsp;<span class="num" id="5548083">0xffff</span><span class="op" id="5548089">)</span>&nbsp;<span class="op" id="5548091">/</span>&nbsp;<span class="ident" id="5548093">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548096">return</span>&nbsp;<span class="ident" id="5548103">NRGBA64</span><span class="op" id="5548110">{</span><span class="builtintype" id="5548111">uint16</span><span class="op" id="5548117">(</span><span class="ident" id="5548118">r</span><span class="op" id="5548119">)</span><span class="op" id="5548120">,</span>&nbsp;<span class="builtintype" id="5548122">uint16</span><span class="op" id="5548128">(</span><span class="ident" id="5548129">g</span><span class="op" id="5548130">)</span><span class="op" id="5548131">,</span>&nbsp;<span class="builtintype" id="5548133">uint16</span><span class="op" id="5548139">(</span><span class="ident" id="5548140">b</span><span class="op" id="5548141">)</span><span class="op" id="5548142">,</span>&nbsp;<span class="builtintype" id="5548144">uint16</span><span class="op" id="5548150">(</span><span class="ident" id="5548151">a</span><span class="op" id="5548152">)</span><span class="op" id="5548153">}</span><br>
<span class="lineno"></span><span class="op" id="5548155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5548158">func</span>&nbsp;<span class="ident" id="5548163">alphaModel</span><span class="op" id="5548173">(</span><span class="ident" id="5548174">c</span>&nbsp;<span class="ident" id="5548176">Color</span><span class="op" id="5548181">)</span>&nbsp;<span class="ident" id="5548183">Color</span>&nbsp;<span class="op" id="5548189">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548192">if</span>&nbsp;<span class="ident" id="5548195">_</span><span class="op" id="5548196">,</span>&nbsp;<span class="ident" id="5548198">ok</span>&nbsp;<span class="op" id="5548201">:=</span>&nbsp;<span class="ident" id="5548204">c</span><span class="op" id="5548205">.</span><span class="op" id="5548206">(</span><span class="ident" id="5548207">Alpha</span><span class="op" id="5548212">)</span><span class="op" id="5548213">;</span>&nbsp;<span class="ident" id="5548215">ok</span>&nbsp;<span class="op" id="5548218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548222">return</span>&nbsp;<span class="ident" id="5548229">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5548232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548235">_</span><span class="op" id="5548236">,</span>&nbsp;<span class="ident" id="5548238">_</span><span class="op" id="5548239">,</span>&nbsp;<span class="ident" id="5548241">_</span><span class="op" id="5548242">,</span>&nbsp;<span class="ident" id="5548244">a</span>&nbsp;<span class="op" id="5548246">:=</span>&nbsp;<span class="ident" id="5548249">c</span><span class="op" id="5548250">.</span><span class="ident" id="5548251">RGBA</span><span class="op" id="5548255">(</span><span class="op" id="5548256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548259">return</span>&nbsp;<span class="ident" id="5548266">Alpha</span><span class="op" id="5548271">{</span><span class="builtintype" id="5548272">uint8</span><span class="op" id="5548277">(</span><span class="ident" id="5548278">a</span>&nbsp;<span class="op" id="5548280">&gt;&gt;</span>&nbsp;<span class="num" id="5548283">8</span><span class="op" id="5548284">)</span><span class="op" id="5548285">}</span><br>
<span class="lineno">225</span><span class="op" id="5548287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5548290">func</span>&nbsp;<span class="ident" id="5548295">alpha16Model</span><span class="op" id="5548307">(</span><span class="ident" id="5548308">c</span>&nbsp;<span class="ident" id="5548310">Color</span><span class="op" id="5548315">)</span>&nbsp;<span class="ident" id="5548317">Color</span>&nbsp;<span class="op" id="5548323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548326">if</span>&nbsp;<span class="ident" id="5548329">_</span><span class="op" id="5548330">,</span>&nbsp;<span class="ident" id="5548332">ok</span>&nbsp;<span class="op" id="5548335">:=</span>&nbsp;<span class="ident" id="5548338">c</span><span class="op" id="5548339">.</span><span class="op" id="5548340">(</span><span class="ident" id="5548341">Alpha16</span><span class="op" id="5548348">)</span><span class="op" id="5548349">;</span>&nbsp;<span class="ident" id="5548351">ok</span>&nbsp;<span class="op" id="5548354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548358">return</span>&nbsp;<span class="ident" id="5548365">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5548368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548371">_</span><span class="op" id="5548372">,</span>&nbsp;<span class="ident" id="5548374">_</span><span class="op" id="5548375">,</span>&nbsp;<span class="ident" id="5548377">_</span><span class="op" id="5548378">,</span>&nbsp;<span class="ident" id="5548380">a</span>&nbsp;<span class="op" id="5548382">:=</span>&nbsp;<span class="ident" id="5548385">c</span><span class="op" id="5548386">.</span><span class="ident" id="5548387">RGBA</span><span class="op" id="5548391">(</span><span class="op" id="5548392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548395">return</span>&nbsp;<span class="ident" id="5548402">Alpha16</span><span class="op" id="5548409">{</span><span class="builtintype" id="5548410">uint16</span><span class="op" id="5548416">(</span><span class="ident" id="5548417">a</span><span class="op" id="5548418">)</span><span class="op" id="5548419">}</span><br>
<span class="lineno"></span><span class="op" id="5548421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5548424">func</span>&nbsp;<span class="ident" id="5548429">grayModel</span><span class="op" id="5548438">(</span><span class="ident" id="5548439">c</span>&nbsp;<span class="ident" id="5548441">Color</span><span class="op" id="5548446">)</span>&nbsp;<span class="ident" id="5548448">Color</span>&nbsp;<span class="op" id="5548454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548457">if</span>&nbsp;<span class="ident" id="5548460">_</span><span class="op" id="5548461">,</span>&nbsp;<span class="ident" id="5548463">ok</span>&nbsp;<span class="op" id="5548466">:=</span>&nbsp;<span class="ident" id="5548469">c</span><span class="op" id="5548470">.</span><span class="op" id="5548471">(</span><span class="ident" id="5548472">Gray</span><span class="op" id="5548476">)</span><span class="op" id="5548477">;</span>&nbsp;<span class="ident" id="5548479">ok</span>&nbsp;<span class="op" id="5548482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548486">return</span>&nbsp;<span class="ident" id="5548493">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5548496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548499">r</span><span class="op" id="5548500">,</span>&nbsp;<span class="ident" id="5548502">g</span><span class="op" id="5548503">,</span>&nbsp;<span class="ident" id="5548505">b</span><span class="op" id="5548506">,</span>&nbsp;<span class="ident" id="5548508">_</span>&nbsp;<span class="op" id="5548510">:=</span>&nbsp;<span class="ident" id="5548513">c</span><span class="op" id="5548514">.</span><span class="ident" id="5548515">RGBA</span><span class="op" id="5548519">(</span><span class="op" id="5548520">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548523">y</span>&nbsp;<span class="op" id="5548525">:=</span>&nbsp;<span class="op" id="5548528">(</span><span class="num" id="5548529">299</span><span class="op" id="5548532">*</span><span class="ident" id="5548533">r</span>&nbsp;<span class="op" id="5548535">+</span>&nbsp;<span class="num" id="5548537">587</span><span class="op" id="5548540">*</span><span class="ident" id="5548541">g</span>&nbsp;<span class="op" id="5548543">+</span>&nbsp;<span class="num" id="5548545">114</span><span class="op" id="5548548">*</span><span class="ident" id="5548549">b</span>&nbsp;<span class="op" id="5548551">+</span>&nbsp;<span class="num" id="5548553">500</span><span class="op" id="5548556">)</span>&nbsp;<span class="op" id="5548558">/</span>&nbsp;<span class="num" id="5548560">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548566">return</span>&nbsp;<span class="ident" id="5548573">Gray</span><span class="op" id="5548577">{</span><span class="builtintype" id="5548578">uint8</span><span class="op" id="5548583">(</span><span class="ident" id="5548584">y</span>&nbsp;<span class="op" id="5548586">&gt;&gt;</span>&nbsp;<span class="num" id="5548589">8</span><span class="op" id="5548590">)</span><span class="op" id="5548591">}</span><br>
<span class="lineno"></span><span class="op" id="5548593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5548596">func</span>&nbsp;<span class="ident" id="5548601">gray16Model</span><span class="op" id="5548612">(</span><span class="ident" id="5548613">c</span>&nbsp;<span class="ident" id="5548615">Color</span><span class="op" id="5548620">)</span>&nbsp;<span class="ident" id="5548622">Color</span>&nbsp;<span class="op" id="5548628">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548631">if</span>&nbsp;<span class="ident" id="5548634">_</span><span class="op" id="5548635">,</span>&nbsp;<span class="ident" id="5548637">ok</span>&nbsp;<span class="op" id="5548640">:=</span>&nbsp;<span class="ident" id="5548643">c</span><span class="op" id="5548644">.</span><span class="op" id="5548645">(</span><span class="ident" id="5548646">Gray16</span><span class="op" id="5548652">)</span><span class="op" id="5548653">;</span>&nbsp;<span class="ident" id="5548655">ok</span>&nbsp;<span class="op" id="5548658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548662">return</span>&nbsp;<span class="ident" id="5548669">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5548672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548675">r</span><span class="op" id="5548676">,</span>&nbsp;<span class="ident" id="5548678">g</span><span class="op" id="5548679">,</span>&nbsp;<span class="ident" id="5548681">b</span><span class="op" id="5548682">,</span>&nbsp;<span class="ident" id="5548684">_</span>&nbsp;<span class="op" id="5548686">:=</span>&nbsp;<span class="ident" id="5548689">c</span><span class="op" id="5548690">.</span><span class="ident" id="5548691">RGBA</span><span class="op" id="5548695">(</span><span class="op" id="5548696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5548699">y</span>&nbsp;<span class="op" id="5548701">:=</span>&nbsp;<span class="op" id="5548704">(</span><span class="num" id="5548705">299</span><span class="op" id="5548708">*</span><span class="ident" id="5548709">r</span>&nbsp;<span class="op" id="5548711">+</span>&nbsp;<span class="num" id="5548713">587</span><span class="op" id="5548716">*</span><span class="ident" id="5548717">g</span>&nbsp;<span class="op" id="5548719">+</span>&nbsp;<span class="num" id="5548721">114</span><span class="op" id="5548724">*</span><span class="ident" id="5548725">b</span>&nbsp;<span class="op" id="5548727">+</span>&nbsp;<span class="num" id="5548729">500</span><span class="op" id="5548732">)</span>&nbsp;<span class="op" id="5548734">/</span>&nbsp;<span class="num" id="5548736">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548742">return</span>&nbsp;<span class="ident" id="5548749">Gray16</span><span class="op" id="5548755">{</span><span class="builtintype" id="5548756">uint16</span><span class="op" id="5548762">(</span><span class="ident" id="5548763">y</span><span class="op" id="5548764">)</span><span class="op" id="5548765">}</span><br>
<span class="lineno"></span><span class="op" id="5548767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5548770">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5548805">type</span>&nbsp;<span class="ident" id="5548810">Palette</span>&nbsp;<span class="op" id="5548818">[</span><span class="op" id="5548819">]</span><span class="ident" id="5548820">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5548827">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5548903">func</span>&nbsp;<span class="op" id="5548908">(</span><span class="ident" id="5548909">p</span>&nbsp;<span class="ident" id="5548911">Palette</span><span class="op" id="5548918">)</span>&nbsp;<span class="ident" id="5548920">Convert</span><span class="op" id="5548927">(</span><span class="ident" id="5548928">c</span>&nbsp;<span class="ident" id="5548930">Color</span><span class="op" id="5548935">)</span>&nbsp;<span class="ident" id="5548937">Color</span>&nbsp;<span class="op" id="5548943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548946">if</span>&nbsp;<span class="builtinfunc" id="5548949">len</span><span class="op" id="5548952">(</span><span class="ident" id="5548953">p</span><span class="op" id="5548954">)</span>&nbsp;<span class="op" id="5548956">==</span>&nbsp;<span class="num" id="5548959">0</span>&nbsp;<span class="op" id="5548961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548965">return</span>&nbsp;<span class="ident" id="5548972">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5548977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5548980">return</span>&nbsp;<span class="ident" id="5548987">p</span><span class="op" id="5548988">[</span><span class="ident" id="5548989">p</span><span class="op" id="5548990">.</span><span class="ident" id="5548991">Index</span><span class="op" id="5548996">(</span><span class="ident" id="5548997">c</span><span class="op" id="5548998">)</span><span class="op" id="5548999">]</span><br>
<span class="lineno"></span><span class="op" id="5549001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5549004">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5549078">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5549094">func</span>&nbsp;<span class="op" id="5549099">(</span><span class="ident" id="5549100">p</span>&nbsp;<span class="ident" id="5549102">Palette</span><span class="op" id="5549109">)</span>&nbsp;<span class="ident" id="5549111">Index</span><span class="op" id="5549116">(</span><span class="ident" id="5549117">c</span>&nbsp;<span class="ident" id="5549119">Color</span><span class="op" id="5549124">)</span>&nbsp;<span class="builtintype" id="5549126">int</span>&nbsp;<span class="op" id="5549130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5549133">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549200">cr</span><span class="op" id="5549202">,</span>&nbsp;<span class="ident" id="5549204">cg</span><span class="op" id="5549206">,</span>&nbsp;<span class="ident" id="5549208">cb</span><span class="op" id="5549210">,</span>&nbsp;<span class="ident" id="5549212">_</span>&nbsp;<span class="op" id="5549214">:=</span>&nbsp;<span class="ident" id="5549217">c</span><span class="op" id="5549218">.</span><span class="ident" id="5549219">RGBA</span><span class="op" id="5549223">(</span><span class="op" id="5549224">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549227">ret</span><span class="op" id="5549230">,</span>&nbsp;<span class="ident" id="5549232">bestSSD</span>&nbsp;<span class="op" id="5549240">:=</span>&nbsp;<span class="num" id="5549243">0</span><span class="op" id="5549244">,</span>&nbsp;<span class="builtintype" id="5549246">uint32</span><span class="op" id="5549252">(</span><span class="num" id="5549253">1</span><span class="op" id="5549254">&lt;&lt;</span><span class="num" id="5549256">32</span><span class="op" id="5549258">-</span><span class="num" id="5549259">1</span><span class="op" id="5549260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5549263">for</span>&nbsp;<span class="ident" id="5549267">i</span><span class="op" id="5549268">,</span>&nbsp;<span class="ident" id="5549270">v</span>&nbsp;<span class="op" id="5549272">:=</span>&nbsp;<span class="keyword" id="5549275">range</span>&nbsp;<span class="ident" id="5549281">p</span>&nbsp;<span class="op" id="5549283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549287">vr</span><span class="op" id="5549289">,</span>&nbsp;<span class="ident" id="5549291">vg</span><span class="op" id="5549293">,</span>&nbsp;<span class="ident" id="5549295">vb</span><span class="op" id="5549297">,</span>&nbsp;<span class="ident" id="5549299">_</span>&nbsp;<span class="op" id="5549301">:=</span>&nbsp;<span class="ident" id="5549304">v</span><span class="op" id="5549305">.</span><span class="ident" id="5549306">RGBA</span><span class="op" id="5549310">(</span><span class="op" id="5549311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5549315">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5549376">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549405">delta</span>&nbsp;<span class="op" id="5549411">:=</span>&nbsp;<span class="op" id="5549414">(</span><span class="builtintype" id="5549415">int32</span><span class="op" id="5549420">(</span><span class="ident" id="5549421">cr</span><span class="op" id="5549423">)</span>&nbsp;<span class="op" id="5549425">-</span>&nbsp;<span class="builtintype" id="5549427">int32</span><span class="op" id="5549432">(</span><span class="ident" id="5549433">vr</span><span class="op" id="5549435">)</span><span class="op" id="5549436">)</span>&nbsp;<span class="op" id="5549438">&gt;&gt;</span>&nbsp;<span class="num" id="5549441">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549445">ssd</span>&nbsp;<span class="op" id="5549449">:=</span>&nbsp;<span class="builtintype" id="5549452">uint32</span><span class="op" id="5549458">(</span><span class="ident" id="5549459">delta</span>&nbsp;<span class="op" id="5549465">*</span>&nbsp;<span class="ident" id="5549467">delta</span><span class="op" id="5549472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549476">delta</span>&nbsp;<span class="op" id="5549482">=</span>&nbsp;<span class="op" id="5549484">(</span><span class="builtintype" id="5549485">int32</span><span class="op" id="5549490">(</span><span class="ident" id="5549491">cg</span><span class="op" id="5549493">)</span>&nbsp;<span class="op" id="5549495">-</span>&nbsp;<span class="builtintype" id="5549497">int32</span><span class="op" id="5549502">(</span><span class="ident" id="5549503">vg</span><span class="op" id="5549505">)</span><span class="op" id="5549506">)</span>&nbsp;<span class="op" id="5549508">&gt;&gt;</span>&nbsp;<span class="num" id="5549511">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549515">ssd</span>&nbsp;<span class="op" id="5549519">+=</span>&nbsp;<span class="builtintype" id="5549522">uint32</span><span class="op" id="5549528">(</span><span class="ident" id="5549529">delta</span>&nbsp;<span class="op" id="5549535">*</span>&nbsp;<span class="ident" id="5549537">delta</span><span class="op" id="5549542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549546">delta</span>&nbsp;<span class="op" id="5549552">=</span>&nbsp;<span class="op" id="5549554">(</span><span class="builtintype" id="5549555">int32</span><span class="op" id="5549560">(</span><span class="ident" id="5549561">cb</span><span class="op" id="5549563">)</span>&nbsp;<span class="op" id="5549565">-</span>&nbsp;<span class="builtintype" id="5549567">int32</span><span class="op" id="5549572">(</span><span class="ident" id="5549573">vb</span><span class="op" id="5549575">)</span><span class="op" id="5549576">)</span>&nbsp;<span class="op" id="5549578">&gt;&gt;</span>&nbsp;<span class="num" id="5549581">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549585">ssd</span>&nbsp;<span class="op" id="5549589">+=</span>&nbsp;<span class="builtintype" id="5549592">uint32</span><span class="op" id="5549598">(</span><span class="ident" id="5549599">delta</span>&nbsp;<span class="op" id="5549605">*</span>&nbsp;<span class="ident" id="5549607">delta</span><span class="op" id="5549612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5549616">if</span>&nbsp;<span class="ident" id="5549619">ssd</span>&nbsp;<span class="op" id="5549623">&lt;</span>&nbsp;<span class="ident" id="5549625">bestSSD</span>&nbsp;<span class="op" id="5549633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5549638">if</span>&nbsp;<span class="ident" id="5549641">ssd</span>&nbsp;<span class="op" id="5549645">==</span>&nbsp;<span class="num" id="5549648">0</span>&nbsp;<span class="op" id="5549650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5549656">return</span>&nbsp;<span class="ident" id="5549663">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5549668">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549673">ret</span><span class="op" id="5549676">,</span>&nbsp;<span class="ident" id="5549678">bestSSD</span>&nbsp;<span class="op" id="5549686">=</span>&nbsp;<span class="ident" id="5549688">i</span><span class="op" id="5549689">,</span>&nbsp;<span class="ident" id="5549691">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5549697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5549700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5549703">return</span>&nbsp;<span class="ident" id="5549710">ret</span><br>
<span class="lineno"></span><span class="op" id="5549714">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5549717">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5549737">var</span>&nbsp;<span class="op" id="5549741">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549744">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5549756">=</span>&nbsp;<span class="ident" id="5549758">Gray16</span><span class="op" id="5549764">{</span><span class="num" id="5549765">0</span><span class="op" id="5549766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549769">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5549781">=</span>&nbsp;<span class="ident" id="5549783">Gray16</span><span class="op" id="5549789">{</span><span class="num" id="5549790">0xffff</span><span class="op" id="5549796">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549799">Transparent</span>&nbsp;<span class="op" id="5549811">=</span>&nbsp;<span class="ident" id="5549813">Alpha16</span><span class="op" id="5549820">{</span><span class="num" id="5549821">0</span><span class="op" id="5549822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5549825">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5549837">=</span>&nbsp;<span class="ident" id="5549839">Alpha16</span><span class="op" id="5549846">{</span><span class="num" id="5549847">0xffff</span><span class="op" id="5549853">}</span><br>
<span class="lineno"></span><span class="op" id="5549855">)</span>
</div>
</body>
</html>
