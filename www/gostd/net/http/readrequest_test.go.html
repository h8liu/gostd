<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8351436">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8351492">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8351546">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8351597">package</span>&nbsp;<span class="ident" id="8351605">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8351611">import</span>&nbsp;<span class="op" id="8351618">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351621">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351630">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351639">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351646">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351652">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351663">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351674">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351685">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8351695">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8351698">type</span>&nbsp;<span class="ident" id="8351703">reqTest</span>&nbsp;<span class="keyword" id="8351711">struct</span>&nbsp;<span class="op" id="8351718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351721">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8351729">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351737">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8351745">*</span><span class="ident" id="8351746">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351755">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8351763">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351771">Trailer</span>&nbsp;<span class="ident" id="8351779">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8351787">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8351795">string</span><br>
<span class="lineno"></span><span class="op" id="8351802">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8351805">var</span>&nbsp;<span class="ident" id="8351809">noError</span>&nbsp;<span class="op" id="8351817">=</span>&nbsp;<span class="string" id="8351819">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8351822">var</span>&nbsp;<span class="ident" id="8351826">noBody</span>&nbsp;<span class="op" id="8351833">=</span>&nbsp;<span class="string" id="8351835">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8351838">var</span>&nbsp;<span class="ident" id="8351842">noTrailer</span>&nbsp;<span class="ident" id="8351852">Header</span>&nbsp;<span class="op" id="8351859">=</span>&nbsp;<span class="ident" id="8351861">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8351866">var</span>&nbsp;<span class="ident" id="8351870">reqTests</span>&nbsp;<span class="op" id="8351879">=</span>&nbsp;<span class="op" id="8351881">[</span><span class="op" id="8351882">]</span><span class="ident" id="8351883">reqTest</span><span class="op" id="8351890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8351893">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8351957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8351961">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8352007">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352012">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="8352043">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352048">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="8352071">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352076">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="8352154">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352159">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="8352197">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352202">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="8352238">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352243">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="8352296">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352301">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="8352323">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352328">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="8352352">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352357">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8352396">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352401">&#34;abcdef\n???&#34;</span><span class="op" id="8352414">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352419">&amp;</span><span class="ident" id="8352420">Request</span><span class="op" id="8352427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352432">Method</span><span class="op" id="8352438">:</span>&nbsp;<span class="string" id="8352440">&#34;GET&#34;</span><span class="op" id="8352445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352450">URL</span><span class="op" id="8352453">:</span>&nbsp;<span class="op" id="8352455">&amp;</span><span class="ident" id="8352456">url</span><span class="op" id="8352459">.</span><span class="ident" id="8352460">URL</span><span class="op" id="8352463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352469">Scheme</span><span class="op" id="8352475">:</span>&nbsp;<span class="string" id="8352477">&#34;http&#34;</span><span class="op" id="8352483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352489">Host</span><span class="op" id="8352493">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8352497">&#34;www.techcrunch.com&#34;</span><span class="op" id="8352517">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352523">Path</span><span class="op" id="8352527">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8352531">&#34;/&#34;</span><span class="op" id="8352534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8352539">}</span><span class="op" id="8352540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352545">Proto</span><span class="op" id="8352550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8352557">&#34;HTTP/1.1&#34;</span><span class="op" id="8352567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352572">ProtoMajor</span><span class="op" id="8352582">:</span>&nbsp;<span class="num" id="8352584">1</span><span class="op" id="8352585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352590">ProtoMinor</span><span class="op" id="8352600">:</span>&nbsp;<span class="num" id="8352602">1</span><span class="op" id="8352603">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8352608">Header</span><span class="op" id="8352614">:</span>&nbsp;<span class="ident" id="8352616">Header</span><span class="op" id="8352622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352628">&#34;Accept&#34;</span><span class="op" id="8352636">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8352648">{</span><span class="string" id="8352649">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="8352714">}</span><span class="op" id="8352715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352721">&#34;Accept-Language&#34;</span><span class="op" id="8352738">:</span>&nbsp;&nbsp;<span class="op" id="8352741">{</span><span class="string" id="8352742">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="8352758">}</span><span class="op" id="8352759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352765">&#34;Accept-Encoding&#34;</span><span class="op" id="8352782">:</span>&nbsp;&nbsp;<span class="op" id="8352785">{</span><span class="string" id="8352786">&#34;gzip,deflate&#34;</span><span class="op" id="8352800">}</span><span class="op" id="8352801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352807">&#34;Accept-Charset&#34;</span><span class="op" id="8352823">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8352827">{</span><span class="string" id="8352828">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="8352860">}</span><span class="op" id="8352861">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352867">&#34;Keep-Alive&#34;</span><span class="op" id="8352879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8352887">{</span><span class="string" id="8352888">&#34;300&#34;</span><span class="op" id="8352893">}</span><span class="op" id="8352894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352900">&#34;Proxy-Connection&#34;</span><span class="op" id="8352918">:</span>&nbsp;<span class="op" id="8352920">{</span><span class="string" id="8352921">&#34;keep-alive&#34;</span><span class="op" id="8352933">}</span><span class="op" id="8352934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352940">&#34;Content-Length&#34;</span><span class="op" id="8352956">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8352960">{</span><span class="string" id="8352961">&#34;7&#34;</span><span class="op" id="8352964">}</span><span class="op" id="8352965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8352971">&#34;User-Agent&#34;</span><span class="op" id="8352983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8352991">{</span><span class="string" id="8352992">&#34;Fake&#34;</span><span class="op" id="8352998">}</span><span class="op" id="8352999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353004">}</span><span class="op" id="8353005">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353010">Close</span><span class="op" id="8353015">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8353025">false</span><span class="op" id="8353030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353035">ContentLength</span><span class="op" id="8353048">:</span>&nbsp;<span class="num" id="8353050">7</span><span class="op" id="8353051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353056">Host</span><span class="op" id="8353060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353071">&#34;www.techcrunch.com&#34;</span><span class="op" id="8353091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353096">RequestURI</span><span class="op" id="8353106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353111">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="8353139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353143">}</span><span class="op" id="8353144">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8353149">&#34;abcdef\n&#34;</span><span class="op" id="8353159">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353164">noTrailer</span><span class="op" id="8353173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353177">noError</span><span class="op" id="8353184">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353187">}</span><span class="op" id="8353188">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8353192">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8353243">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8353264">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8353269">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="8353292">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353297">&amp;</span><span class="ident" id="8353298">Request</span><span class="op" id="8353305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353310">Method</span><span class="op" id="8353316">:</span>&nbsp;<span class="string" id="8353318">&#34;GET&#34;</span><span class="op" id="8353323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353328">URL</span><span class="op" id="8353331">:</span>&nbsp;<span class="op" id="8353333">&amp;</span><span class="ident" id="8353334">url</span><span class="op" id="8353337">.</span><span class="ident" id="8353338">URL</span><span class="op" id="8353341">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353347">Path</span><span class="op" id="8353351">:</span>&nbsp;<span class="string" id="8353353">&#34;/&#34;</span><span class="op" id="8353356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353361">}</span><span class="op" id="8353362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353367">Proto</span><span class="op" id="8353372">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353382">&#34;HTTP/1.1&#34;</span><span class="op" id="8353392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353397">ProtoMajor</span><span class="op" id="8353407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8353412">1</span><span class="op" id="8353413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353418">ProtoMinor</span><span class="op" id="8353428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8353433">1</span><span class="op" id="8353434">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353439">Header</span><span class="op" id="8353445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8353454">Header</span><span class="op" id="8353460">{</span><span class="op" id="8353461">}</span><span class="op" id="8353462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353467">Close</span><span class="op" id="8353472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8353482">false</span><span class="op" id="8353487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353492">ContentLength</span><span class="op" id="8353505">:</span>&nbsp;<span class="num" id="8353507">0</span><span class="op" id="8353508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353513">Host</span><span class="op" id="8353517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353528">&#34;foo.com&#34;</span><span class="op" id="8353537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353542">RequestURI</span><span class="op" id="8353552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353557">&#34;/&#34;</span><span class="op" id="8353560">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353564">}</span><span class="op" id="8353565">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353570">noBody</span><span class="op" id="8353576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353580">noTrailer</span><span class="op" id="8353589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353593">noError</span><span class="op" id="8353600">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353603">}</span><span class="op" id="8353604">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8353608">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8353663">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353713">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8353717">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8353768">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8353773">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8353793">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353798">&amp;</span><span class="ident" id="8353799">Request</span><span class="op" id="8353806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353811">Method</span><span class="op" id="8353817">:</span>&nbsp;<span class="string" id="8353819">&#34;GET&#34;</span><span class="op" id="8353824">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353829">URL</span><span class="op" id="8353832">:</span>&nbsp;<span class="op" id="8353834">&amp;</span><span class="ident" id="8353835">url</span><span class="op" id="8353838">.</span><span class="ident" id="8353839">URL</span><span class="op" id="8353842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353848">Path</span><span class="op" id="8353852">:</span>&nbsp;<span class="string" id="8353854">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8353887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8353892">}</span><span class="op" id="8353893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353898">Proto</span><span class="op" id="8353903">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8353913">&#34;HTTP/1.1&#34;</span><span class="op" id="8353923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353928">ProtoMajor</span><span class="op" id="8353938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8353943">1</span><span class="op" id="8353944">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353949">ProtoMinor</span><span class="op" id="8353959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8353964">1</span><span class="op" id="8353965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353970">Header</span><span class="op" id="8353976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8353985">Header</span><span class="op" id="8353991">{</span><span class="op" id="8353992">}</span><span class="op" id="8353993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8353998">Close</span><span class="op" id="8354003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8354013">false</span><span class="op" id="8354018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354023">ContentLength</span><span class="op" id="8354036">:</span>&nbsp;<span class="num" id="8354038">0</span><span class="op" id="8354039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354044">Host</span><span class="op" id="8354048">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8354059">&#34;test&#34;</span><span class="op" id="8354065">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354070">RequestURI</span><span class="op" id="8354080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8354085">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8354118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354122">}</span><span class="op" id="8354123">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354128">noBody</span><span class="op" id="8354134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354138">noTrailer</span><span class="op" id="8354147">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354151">noError</span><span class="op" id="8354158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354161">}</span><span class="op" id="8354162">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8354166">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354238">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354242">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8354284">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354289">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8354309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354313">nil</span><span class="op" id="8354316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354320">noBody</span><span class="op" id="8354326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354330">noTrailer</span><span class="op" id="8354339">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354343">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="8354398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354401">}</span><span class="op" id="8354402">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8354406">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354429">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354433">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8354453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354458">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8354478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354482">nil</span><span class="op" id="8354485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354489">noBody</span><span class="op" id="8354495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354499">noTrailer</span><span class="op" id="8354508">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354512">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="8354531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354534">}</span><span class="op" id="8354535">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8354539">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354576">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354580">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8354602">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354607">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="8354627">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354632">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8354669">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354674">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="8354689">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354694">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="8354709">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354714">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8354722">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354727">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="8354760">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8354765">&#34;\r\n&#34;</span><span class="op" id="8354771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354775">&amp;</span><span class="ident" id="8354776">Request</span><span class="op" id="8354783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354788">Method</span><span class="op" id="8354794">:</span>&nbsp;<span class="string" id="8354796">&#34;POST&#34;</span><span class="op" id="8354802">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354807">URL</span><span class="op" id="8354810">:</span>&nbsp;<span class="op" id="8354812">&amp;</span><span class="ident" id="8354813">url</span><span class="op" id="8354816">.</span><span class="ident" id="8354817">URL</span><span class="op" id="8354820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354826">Path</span><span class="op" id="8354830">:</span>&nbsp;<span class="string" id="8354832">&#34;/&#34;</span><span class="op" id="8354835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8354840">}</span><span class="op" id="8354841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354846">TransferEncoding</span><span class="op" id="8354862">:</span>&nbsp;<span class="op" id="8354864">[</span><span class="op" id="8354865">]</span><span class="builtintype" id="8354866">string</span><span class="op" id="8354872">{</span><span class="string" id="8354873">&#34;chunked&#34;</span><span class="op" id="8354882">}</span><span class="op" id="8354883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354888">Proto</span><span class="op" id="8354893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8354906">&#34;HTTP/1.1&#34;</span><span class="op" id="8354916">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354921">ProtoMajor</span><span class="op" id="8354931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8354939">1</span><span class="op" id="8354940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354945">ProtoMinor</span><span class="op" id="8354955">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8354963">1</span><span class="op" id="8354964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8354969">Header</span><span class="op" id="8354975">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8354987">Header</span><span class="op" id="8354993">{</span><span class="op" id="8354994">}</span><span class="op" id="8354995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355000">ContentLength</span><span class="op" id="8355013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8355018">-</span><span class="num" id="8355019">1</span><span class="op" id="8355020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355025">Host</span><span class="op" id="8355029">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355043">&#34;foo.com&#34;</span><span class="op" id="8355052">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355057">RequestURI</span><span class="op" id="8355067">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355075">&#34;/&#34;</span><span class="op" id="8355078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355082">}</span><span class="op" id="8355083">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8355088">&#34;foobar&#34;</span><span class="op" id="8355096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355100">Header</span><span class="op" id="8355106">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8355111">&#34;Trailer-Key&#34;</span><span class="op" id="8355124">:</span>&nbsp;<span class="op" id="8355126">{</span><span class="string" id="8355127">&#34;Trailer-Value&#34;</span><span class="op" id="8355142">}</span><span class="op" id="8355143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355147">}</span><span class="op" id="8355148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355152">noError</span><span class="op" id="8355159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355162">}</span><span class="op" id="8355163">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8355167">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8355209">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8355254">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355259">&amp;</span><span class="ident" id="8355260">Request</span><span class="op" id="8355267">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355272">Method</span><span class="op" id="8355278">:</span>&nbsp;<span class="string" id="8355280">&#34;CONNECT&#34;</span><span class="op" id="8355289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355294">URL</span><span class="op" id="8355297">:</span>&nbsp;<span class="op" id="8355299">&amp;</span><span class="ident" id="8355300">url</span><span class="op" id="8355303">.</span><span class="ident" id="8355304">URL</span><span class="op" id="8355307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355313">Host</span><span class="op" id="8355317">:</span>&nbsp;<span class="string" id="8355319">&#34;www.google.com:443&#34;</span><span class="op" id="8355339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355344">}</span><span class="op" id="8355345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355350">Proto</span><span class="op" id="8355355">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355365">&#34;HTTP/1.1&#34;</span><span class="op" id="8355375">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355380">ProtoMajor</span><span class="op" id="8355390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8355395">1</span><span class="op" id="8355396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355401">ProtoMinor</span><span class="op" id="8355411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8355416">1</span><span class="op" id="8355417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355422">Header</span><span class="op" id="8355428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8355437">Header</span><span class="op" id="8355443">{</span><span class="op" id="8355444">}</span><span class="op" id="8355445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355450">Close</span><span class="op" id="8355455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8355465">false</span><span class="op" id="8355470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355475">ContentLength</span><span class="op" id="8355488">:</span>&nbsp;<span class="num" id="8355490">0</span><span class="op" id="8355491">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355496">Host</span><span class="op" id="8355500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355511">&#34;www.google.com:443&#34;</span><span class="op" id="8355531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355536">RequestURI</span><span class="op" id="8355546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355551">&#34;www.google.com:443&#34;</span><span class="op" id="8355571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355575">}</span><span class="op" id="8355576">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355581">noBody</span><span class="op" id="8355587">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355591">noTrailer</span><span class="op" id="8355600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355604">noError</span><span class="op" id="8355611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355614">}</span><span class="op" id="8355615">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8355619">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8355660">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8355701">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355706">&amp;</span><span class="ident" id="8355707">Request</span><span class="op" id="8355714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355719">Method</span><span class="op" id="8355725">:</span>&nbsp;<span class="string" id="8355727">&#34;CONNECT&#34;</span><span class="op" id="8355736">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355741">URL</span><span class="op" id="8355744">:</span>&nbsp;<span class="op" id="8355746">&amp;</span><span class="ident" id="8355747">url</span><span class="op" id="8355750">.</span><span class="ident" id="8355751">URL</span><span class="op" id="8355754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355760">Host</span><span class="op" id="8355764">:</span>&nbsp;<span class="string" id="8355766">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8355782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8355787">}</span><span class="op" id="8355788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355793">Proto</span><span class="op" id="8355798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355808">&#34;HTTP/1.1&#34;</span><span class="op" id="8355818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355823">ProtoMajor</span><span class="op" id="8355833">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8355838">1</span><span class="op" id="8355839">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355844">ProtoMinor</span><span class="op" id="8355854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8355859">1</span><span class="op" id="8355860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355865">Header</span><span class="op" id="8355871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8355880">Header</span><span class="op" id="8355886">{</span><span class="op" id="8355887">}</span><span class="op" id="8355888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355893">Close</span><span class="op" id="8355898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8355908">false</span><span class="op" id="8355913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355918">ContentLength</span><span class="op" id="8355931">:</span>&nbsp;<span class="num" id="8355933">0</span><span class="op" id="8355934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355939">Host</span><span class="op" id="8355943">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355954">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8355970">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8355975">RequestURI</span><span class="op" id="8355985">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8355990">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8356006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356010">}</span><span class="op" id="8356011">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356016">noBody</span><span class="op" id="8356022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356026">noTrailer</span><span class="op" id="8356035">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356039">noError</span><span class="op" id="8356046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356049">}</span><span class="op" id="8356050">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8356054">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356083">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8356087">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8356122">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356127">&amp;</span><span class="ident" id="8356128">Request</span><span class="op" id="8356135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356140">Method</span><span class="op" id="8356146">:</span>&nbsp;<span class="string" id="8356148">&#34;CONNECT&#34;</span><span class="op" id="8356157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356162">URL</span><span class="op" id="8356165">:</span>&nbsp;<span class="op" id="8356167">&amp;</span><span class="ident" id="8356168">url</span><span class="op" id="8356171">.</span><span class="ident" id="8356172">URL</span><span class="op" id="8356175">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356181">Path</span><span class="op" id="8356185">:</span>&nbsp;<span class="string" id="8356187">&#34;/_goRPC_&#34;</span><span class="op" id="8356197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356202">}</span><span class="op" id="8356203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356208">Proto</span><span class="op" id="8356213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8356223">&#34;HTTP/1.1&#34;</span><span class="op" id="8356233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356238">ProtoMajor</span><span class="op" id="8356248">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8356253">1</span><span class="op" id="8356254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356259">ProtoMinor</span><span class="op" id="8356269">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8356274">1</span><span class="op" id="8356275">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356280">Header</span><span class="op" id="8356286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8356295">Header</span><span class="op" id="8356301">{</span><span class="op" id="8356302">}</span><span class="op" id="8356303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356308">Close</span><span class="op" id="8356313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8356323">false</span><span class="op" id="8356328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356333">ContentLength</span><span class="op" id="8356346">:</span>&nbsp;<span class="num" id="8356348">0</span><span class="op" id="8356349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356354">Host</span><span class="op" id="8356358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8356369">&#34;&#34;</span><span class="op" id="8356371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356376">RequestURI</span><span class="op" id="8356386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8356391">&#34;/_goRPC_&#34;</span><span class="op" id="8356401">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356405">}</span><span class="op" id="8356406">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356411">noBody</span><span class="op" id="8356417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356421">noTrailer</span><span class="op" id="8356430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356434">noError</span><span class="op" id="8356441">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356444">}</span><span class="op" id="8356445">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8356449">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8356500">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8356542">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356546">&amp;</span><span class="ident" id="8356547">Request</span><span class="op" id="8356554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356559">Method</span><span class="op" id="8356565">:</span>&nbsp;<span class="string" id="8356567">&#34;NOTIFY&#34;</span><span class="op" id="8356575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356580">URL</span><span class="op" id="8356583">:</span>&nbsp;<span class="op" id="8356585">&amp;</span><span class="ident" id="8356586">url</span><span class="op" id="8356589">.</span><span class="ident" id="8356590">URL</span><span class="op" id="8356593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356599">Path</span><span class="op" id="8356603">:</span>&nbsp;<span class="string" id="8356605">&#34;*&#34;</span><span class="op" id="8356608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356613">}</span><span class="op" id="8356614">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356619">Proto</span><span class="op" id="8356624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8356631">&#34;HTTP/1.1&#34;</span><span class="op" id="8356641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356646">ProtoMajor</span><span class="op" id="8356656">:</span>&nbsp;<span class="num" id="8356658">1</span><span class="op" id="8356659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356664">ProtoMinor</span><span class="op" id="8356674">:</span>&nbsp;<span class="num" id="8356676">1</span><span class="op" id="8356677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356682">Header</span><span class="op" id="8356688">:</span>&nbsp;<span class="ident" id="8356690">Header</span><span class="op" id="8356696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8356702">&#34;Server&#34;</span><span class="op" id="8356710">:</span>&nbsp;<span class="op" id="8356712">[</span><span class="op" id="8356713">]</span><span class="builtintype" id="8356714">string</span><span class="op" id="8356720">{</span><span class="string" id="8356721">&#34;foo&#34;</span><span class="op" id="8356726">}</span><span class="op" id="8356727">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356732">}</span><span class="op" id="8356733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356738">Close</span><span class="op" id="8356743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8356753">false</span><span class="op" id="8356758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356763">ContentLength</span><span class="op" id="8356776">:</span>&nbsp;<span class="num" id="8356778">0</span><span class="op" id="8356779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356784">RequestURI</span><span class="op" id="8356794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8356799">&#34;*&#34;</span><span class="op" id="8356802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356806">}</span><span class="op" id="8356807">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356812">noBody</span><span class="op" id="8356818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356822">noTrailer</span><span class="op" id="8356831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356835">noError</span><span class="op" id="8356842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356845">}</span><span class="op" id="8356846">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8356850">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8356908">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8356951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8356955">&amp;</span><span class="ident" id="8356956">Request</span><span class="op" id="8356963">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356968">Method</span><span class="op" id="8356974">:</span>&nbsp;<span class="string" id="8356976">&#34;OPTIONS&#34;</span><span class="op" id="8356985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8356990">URL</span><span class="op" id="8356993">:</span>&nbsp;<span class="op" id="8356995">&amp;</span><span class="ident" id="8356996">url</span><span class="op" id="8356999">.</span><span class="ident" id="8357000">URL</span><span class="op" id="8357003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357009">Path</span><span class="op" id="8357013">:</span>&nbsp;<span class="string" id="8357015">&#34;*&#34;</span><span class="op" id="8357018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357023">}</span><span class="op" id="8357024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357029">Proto</span><span class="op" id="8357034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8357041">&#34;HTTP/1.1&#34;</span><span class="op" id="8357051">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357056">ProtoMajor</span><span class="op" id="8357066">:</span>&nbsp;<span class="num" id="8357068">1</span><span class="op" id="8357069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357074">ProtoMinor</span><span class="op" id="8357084">:</span>&nbsp;<span class="num" id="8357086">1</span><span class="op" id="8357087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357092">Header</span><span class="op" id="8357098">:</span>&nbsp;<span class="ident" id="8357100">Header</span><span class="op" id="8357106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357112">&#34;Server&#34;</span><span class="op" id="8357120">:</span>&nbsp;<span class="op" id="8357122">[</span><span class="op" id="8357123">]</span><span class="builtintype" id="8357124">string</span><span class="op" id="8357130">{</span><span class="string" id="8357131">&#34;foo&#34;</span><span class="op" id="8357136">}</span><span class="op" id="8357137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357142">}</span><span class="op" id="8357143">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357148">Close</span><span class="op" id="8357153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8357163">false</span><span class="op" id="8357168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357173">ContentLength</span><span class="op" id="8357186">:</span>&nbsp;<span class="num" id="8357188">0</span><span class="op" id="8357189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357194">RequestURI</span><span class="op" id="8357204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8357209">&#34;*&#34;</span><span class="op" id="8357212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357216">}</span><span class="op" id="8357217">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357222">noBody</span><span class="op" id="8357228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357232">noTrailer</span><span class="op" id="8357241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357245">noError</span><span class="op" id="8357252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357255">}</span><span class="op" id="8357256">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8357260">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357309">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="8357377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357381">&amp;</span><span class="ident" id="8357382">Request</span><span class="op" id="8357389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357394">Method</span><span class="op" id="8357400">:</span>&nbsp;<span class="string" id="8357402">&#34;GET&#34;</span><span class="op" id="8357407">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357412">URL</span><span class="op" id="8357415">:</span>&nbsp;<span class="op" id="8357417">&amp;</span><span class="ident" id="8357418">url</span><span class="op" id="8357421">.</span><span class="ident" id="8357422">URL</span><span class="op" id="8357425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357431">Path</span><span class="op" id="8357435">:</span>&nbsp;<span class="string" id="8357437">&#34;/&#34;</span><span class="op" id="8357440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357445">}</span><span class="op" id="8357446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357451">Header</span><span class="op" id="8357457">:</span>&nbsp;<span class="ident" id="8357459">Header</span><span class="op" id="8357465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8357471">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8357513">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8357553">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8357571">&#34;Connection&#34;</span><span class="op" id="8357583">:</span>&nbsp;<span class="op" id="8357585">[</span><span class="op" id="8357586">]</span><span class="builtintype" id="8357587">string</span><span class="op" id="8357593">{</span><span class="string" id="8357594">&#34;close&#34;</span><span class="op" id="8357601">}</span><span class="op" id="8357602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357607">}</span><span class="op" id="8357608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357613">Host</span><span class="op" id="8357617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8357625">&#34;issue8261.com&#34;</span><span class="op" id="8357640">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357645">Proto</span><span class="op" id="8357650">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8357657">&#34;HTTP/1.1&#34;</span><span class="op" id="8357667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357672">ProtoMajor</span><span class="op" id="8357682">:</span>&nbsp;<span class="num" id="8357684">1</span><span class="op" id="8357685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357690">ProtoMinor</span><span class="op" id="8357700">:</span>&nbsp;<span class="num" id="8357702">1</span><span class="op" id="8357703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357708">Close</span><span class="op" id="8357713">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8357720">true</span><span class="op" id="8357724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357729">RequestURI</span><span class="op" id="8357739">:</span>&nbsp;<span class="string" id="8357741">&#34;/&#34;</span><span class="op" id="8357744">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357748">}</span><span class="op" id="8357749">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357754">noBody</span><span class="op" id="8357760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357764">noTrailer</span><span class="op" id="8357773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357777">noError</span><span class="op" id="8357784">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8357787">}</span><span class="op" id="8357788">,</span><br>
<span class="lineno"></span><span class="op" id="8357790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8357793">func</span>&nbsp;<span class="ident" id="8357798">TestReadRequest</span><span class="op" id="8357813">(</span><span class="ident" id="8357814">t</span>&nbsp;<span class="op" id="8357816">*</span><span class="ident" id="8357817">testing</span><span class="op" id="8357824">.</span><span class="ident" id="8357825">T</span><span class="op" id="8357826">)</span>&nbsp;<span class="op" id="8357828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357831">for</span>&nbsp;<span class="ident" id="8357835">i</span>&nbsp;<span class="op" id="8357837">:=</span>&nbsp;<span class="keyword" id="8357840">range</span>&nbsp;<span class="ident" id="8357846">reqTests</span>&nbsp;<span class="op" id="8357855">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357859">tt</span>&nbsp;<span class="op" id="8357862">:=</span>&nbsp;<span class="op" id="8357865">&amp;</span><span class="ident" id="8357866">reqTests</span><span class="op" id="8357874">[</span><span class="ident" id="8357875">i</span><span class="op" id="8357876">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8357880">req</span><span class="op" id="8357883">,</span>&nbsp;<span class="ident" id="8357885">err</span>&nbsp;<span class="op" id="8357889">:=</span>&nbsp;<span class="ident" id="8357892">ReadRequest</span><span class="op" id="8357903">(</span><span class="ident" id="8357904">bufio</span><span class="op" id="8357909">.</span><span class="ident" id="8357910">NewReader</span><span class="op" id="8357919">(</span><span class="ident" id="8357920">strings</span><span class="op" id="8357927">.</span><span class="ident" id="8357928">NewReader</span><span class="op" id="8357937">(</span><span class="ident" id="8357938">tt</span><span class="op" id="8357940">.</span><span class="ident" id="8357941">Raw</span><span class="op" id="8357944">)</span><span class="op" id="8357945">)</span><span class="op" id="8357946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357950">if</span>&nbsp;<span class="ident" id="8357953">err</span>&nbsp;<span class="op" id="8357957">!=</span>&nbsp;<span class="ident" id="8357960">nil</span>&nbsp;<span class="op" id="8357964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8357969">if</span>&nbsp;<span class="ident" id="8357972">err</span><span class="op" id="8357975">.</span><span class="ident" id="8357976">Error</span><span class="op" id="8357981">(</span><span class="op" id="8357982">)</span>&nbsp;<span class="op" id="8357984">!=</span>&nbsp;<span class="ident" id="8357987">tt</span><span class="op" id="8357989">.</span><span class="ident" id="8357990">Error</span>&nbsp;<span class="op" id="8357996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358002">t</span><span class="op" id="8358003">.</span><span class="ident" id="8358004">Errorf</span><span class="op" id="8358010">(</span><span class="string" id="8358011">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8358041">,</span>&nbsp;<span class="ident" id="8358043">i</span><span class="op" id="8358044">,</span>&nbsp;<span class="ident" id="8358046">err</span><span class="op" id="8358049">.</span><span class="ident" id="8358050">Error</span><span class="op" id="8358055">(</span><span class="op" id="8358056">)</span><span class="op" id="8358057">,</span>&nbsp;<span class="ident" id="8358059">tt</span><span class="op" id="8358061">.</span><span class="ident" id="8358062">Error</span><span class="op" id="8358067">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358077">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358092">rbody</span>&nbsp;<span class="op" id="8358098">:=</span>&nbsp;<span class="ident" id="8358101">req</span><span class="op" id="8358104">.</span><span class="ident" id="8358105">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358112">req</span><span class="op" id="8358115">.</span><span class="ident" id="8358116">Body</span>&nbsp;<span class="op" id="8358121">=</span>&nbsp;<span class="ident" id="8358123">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358129">testName</span>&nbsp;<span class="op" id="8358138">:=</span>&nbsp;<span class="ident" id="8358141">fmt</span><span class="op" id="8358144">.</span><span class="ident" id="8358145">Sprintf</span><span class="op" id="8358152">(</span><span class="string" id="8358153">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="8358167">,</span>&nbsp;<span class="ident" id="8358169">i</span><span class="op" id="8358170">,</span>&nbsp;<span class="ident" id="8358172">tt</span><span class="op" id="8358174">.</span><span class="ident" id="8358175">Raw</span><span class="op" id="8358178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358182">diff</span><span class="op" id="8358186">(</span><span class="ident" id="8358187">t</span><span class="op" id="8358188">,</span>&nbsp;<span class="ident" id="8358190">testName</span><span class="op" id="8358198">,</span>&nbsp;<span class="ident" id="8358200">req</span><span class="op" id="8358203">,</span>&nbsp;<span class="ident" id="8358205">tt</span><span class="op" id="8358207">.</span><span class="ident" id="8358208">Req</span><span class="op" id="8358211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358215">var</span>&nbsp;<span class="ident" id="8358219">bout</span>&nbsp;<span class="ident" id="8358224">bytes</span><span class="op" id="8358229">.</span><span class="ident" id="8358230">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358239">if</span>&nbsp;<span class="ident" id="8358242">rbody</span>&nbsp;<span class="op" id="8358248">!=</span>&nbsp;<span class="ident" id="8358251">nil</span>&nbsp;<span class="op" id="8358255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358260">_</span><span class="op" id="8358261">,</span>&nbsp;<span class="ident" id="8358263">err</span>&nbsp;<span class="op" id="8358267">:=</span>&nbsp;<span class="ident" id="8358270">io</span><span class="op" id="8358272">.</span><span class="ident" id="8358273">Copy</span><span class="op" id="8358277">(</span><span class="op" id="8358278">&amp;</span><span class="ident" id="8358279">bout</span><span class="op" id="8358283">,</span>&nbsp;<span class="ident" id="8358285">rbody</span><span class="op" id="8358290">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358295">if</span>&nbsp;<span class="ident" id="8358298">err</span>&nbsp;<span class="op" id="8358302">!=</span>&nbsp;<span class="ident" id="8358305">nil</span>&nbsp;<span class="op" id="8358309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358315">t</span><span class="op" id="8358316">.</span><span class="ident" id="8358317">Fatalf</span><span class="op" id="8358323">(</span><span class="string" id="8358324">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8358346">,</span>&nbsp;<span class="ident" id="8358348">testName</span><span class="op" id="8358356">,</span>&nbsp;<span class="ident" id="8358358">err</span><span class="op" id="8358361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358371">rbody</span><span class="op" id="8358376">.</span><span class="ident" id="8358377">Close</span><span class="op" id="8358382">(</span><span class="op" id="8358383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358387">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358391">body</span>&nbsp;<span class="op" id="8358396">:=</span>&nbsp;<span class="ident" id="8358399">bout</span><span class="op" id="8358403">.</span><span class="ident" id="8358404">String</span><span class="op" id="8358410">(</span><span class="op" id="8358411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358415">if</span>&nbsp;<span class="ident" id="8358418">body</span>&nbsp;<span class="op" id="8358423">!=</span>&nbsp;<span class="ident" id="8358426">tt</span><span class="op" id="8358428">.</span><span class="ident" id="8358429">Body</span>&nbsp;<span class="op" id="8358434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358439">t</span><span class="op" id="8358440">.</span><span class="ident" id="8358441">Errorf</span><span class="op" id="8358447">(</span><span class="string" id="8358448">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8358471">,</span>&nbsp;<span class="ident" id="8358473">testName</span><span class="op" id="8358481">,</span>&nbsp;<span class="ident" id="8358483">body</span><span class="op" id="8358487">,</span>&nbsp;<span class="ident" id="8358489">tt</span><span class="op" id="8358491">.</span><span class="ident" id="8358492">Body</span><span class="op" id="8358496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8358504">if</span>&nbsp;<span class="op" id="8358507">!</span><span class="ident" id="8358508">reflect</span><span class="op" id="8358515">.</span><span class="ident" id="8358516">DeepEqual</span><span class="op" id="8358525">(</span><span class="ident" id="8358526">tt</span><span class="op" id="8358528">.</span><span class="ident" id="8358529">Trailer</span><span class="op" id="8358536">,</span>&nbsp;<span class="ident" id="8358538">req</span><span class="op" id="8358541">.</span><span class="ident" id="8358542">Trailer</span><span class="op" id="8358549">)</span>&nbsp;<span class="op" id="8358551">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8358556">t</span><span class="op" id="8358557">.</span><span class="ident" id="8358558">Errorf</span><span class="op" id="8358564">(</span><span class="string" id="8358565">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8358607">,</span>&nbsp;<span class="ident" id="8358609">testName</span><span class="op" id="8358617">,</span>&nbsp;<span class="ident" id="8358619">req</span><span class="op" id="8358622">.</span><span class="ident" id="8358623">Trailer</span><span class="op" id="8358630">,</span>&nbsp;<span class="ident" id="8358632">tt</span><span class="op" id="8358634">.</span><span class="ident" id="8358635">Trailer</span><span class="op" id="8358642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8358649">}</span><br>
<span class="lineno"></span><span class="op" id="8358651">}</span>
</div>
</body>
</html>
