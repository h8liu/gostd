<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6465917">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6465972">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6466026">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6466077">package</span>&nbsp;<span class="ident" id="6466085">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6466090">import</span>&nbsp;<span class="op" id="6466097">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466100">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466109">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466122">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466128">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466136">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466147">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466158">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6466169">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6466176">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6466179">func</span>&nbsp;<span class="ident" id="6466184">TestFileInfoHeader</span><span class="op" id="6466202">(</span><span class="ident" id="6466203">t</span>&nbsp;<span class="op" id="6466205">*</span><span class="ident" id="6466206">testing</span><span class="op" id="6466213">.</span><span class="ident" id="6466214">T</span><span class="op" id="6466215">)</span>&nbsp;<span class="op" id="6466217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466220">fi</span><span class="op" id="6466222">,</span>&nbsp;<span class="ident" id="6466224">err</span>&nbsp;<span class="op" id="6466228">:=</span>&nbsp;<span class="ident" id="6466231">os</span><span class="op" id="6466233">.</span><span class="ident" id="6466234">Stat</span><span class="op" id="6466238">(</span><span class="string" id="6466239">&#34;testdata/small.txt&#34;</span><span class="op" id="6466259">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466262">if</span>&nbsp;<span class="ident" id="6466265">err</span>&nbsp;<span class="op" id="6466269">!=</span>&nbsp;<span class="ident" id="6466272">nil</span>&nbsp;<span class="op" id="6466276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466280">t</span><span class="op" id="6466281">.</span><span class="ident" id="6466282">Fatal</span><span class="op" id="6466287">(</span><span class="ident" id="6466288">err</span><span class="op" id="6466291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466297">h</span><span class="op" id="6466298">,</span>&nbsp;<span class="ident" id="6466300">err</span>&nbsp;<span class="op" id="6466304">:=</span>&nbsp;<span class="ident" id="6466307">FileInfoHeader</span><span class="op" id="6466321">(</span><span class="ident" id="6466322">fi</span><span class="op" id="6466324">,</span>&nbsp;<span class="string" id="6466326">&#34;&#34;</span><span class="op" id="6466328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466331">if</span>&nbsp;<span class="ident" id="6466334">err</span>&nbsp;<span class="op" id="6466338">!=</span>&nbsp;<span class="ident" id="6466341">nil</span>&nbsp;<span class="op" id="6466345">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466349">t</span><span class="op" id="6466350">.</span><span class="ident" id="6466351">Fatalf</span><span class="op" id="6466357">(</span><span class="string" id="6466358">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="6466378">,</span>&nbsp;<span class="ident" id="6466380">err</span><span class="op" id="6466383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466389">if</span>&nbsp;<span class="ident" id="6466392">g</span><span class="op" id="6466393">,</span>&nbsp;<span class="ident" id="6466395">e</span>&nbsp;<span class="op" id="6466397">:=</span>&nbsp;<span class="ident" id="6466400">h</span><span class="op" id="6466401">.</span><span class="ident" id="6466402">Name</span><span class="op" id="6466406">,</span>&nbsp;<span class="string" id="6466408">&#34;small.txt&#34;</span><span class="op" id="6466419">;</span>&nbsp;<span class="ident" id="6466421">g</span>&nbsp;<span class="op" id="6466423">!=</span>&nbsp;<span class="ident" id="6466426">e</span>&nbsp;<span class="op" id="6466428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466432">t</span><span class="op" id="6466433">.</span><span class="ident" id="6466434">Errorf</span><span class="op" id="6466440">(</span><span class="string" id="6466441">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6466461">,</span>&nbsp;<span class="ident" id="6466463">g</span><span class="op" id="6466464">,</span>&nbsp;<span class="ident" id="6466466">e</span><span class="op" id="6466467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466470">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466473">if</span>&nbsp;<span class="ident" id="6466476">g</span><span class="op" id="6466477">,</span>&nbsp;<span class="ident" id="6466479">e</span>&nbsp;<span class="op" id="6466481">:=</span>&nbsp;<span class="ident" id="6466484">h</span><span class="op" id="6466485">.</span><span class="ident" id="6466486">Mode</span><span class="op" id="6466490">,</span>&nbsp;<span class="ident" id="6466492">int64</span><span class="op" id="6466497">(</span><span class="ident" id="6466498">fi</span><span class="op" id="6466500">.</span><span class="ident" id="6466501">Mode</span><span class="op" id="6466505">(</span><span class="op" id="6466506">)</span><span class="op" id="6466507">.</span><span class="ident" id="6466508">Perm</span><span class="op" id="6466512">(</span><span class="op" id="6466513">)</span><span class="op" id="6466514">)</span><span class="op" id="6466515">|</span><span class="ident" id="6466516">c_ISREG</span><span class="op" id="6466523">;</span>&nbsp;<span class="ident" id="6466525">g</span>&nbsp;<span class="op" id="6466527">!=</span>&nbsp;<span class="ident" id="6466530">e</span>&nbsp;<span class="op" id="6466532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466536">t</span><span class="op" id="6466537">.</span><span class="ident" id="6466538">Errorf</span><span class="op" id="6466544">(</span><span class="string" id="6466545">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="6466567">,</span>&nbsp;<span class="ident" id="6466569">g</span><span class="op" id="6466570">,</span>&nbsp;<span class="ident" id="6466572">e</span><span class="op" id="6466573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466579">if</span>&nbsp;<span class="ident" id="6466582">g</span><span class="op" id="6466583">,</span>&nbsp;<span class="ident" id="6466585">e</span>&nbsp;<span class="op" id="6466587">:=</span>&nbsp;<span class="ident" id="6466590">h</span><span class="op" id="6466591">.</span><span class="ident" id="6466592">Size</span><span class="op" id="6466596">,</span>&nbsp;<span class="ident" id="6466598">int64</span><span class="op" id="6466603">(</span><span class="num" id="6466604">5</span><span class="op" id="6466605">)</span><span class="op" id="6466606">;</span>&nbsp;<span class="ident" id="6466608">g</span>&nbsp;<span class="op" id="6466610">!=</span>&nbsp;<span class="ident" id="6466613">e</span>&nbsp;<span class="op" id="6466615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466619">t</span><span class="op" id="6466620">.</span><span class="ident" id="6466621">Errorf</span><span class="op" id="6466627">(</span><span class="string" id="6466628">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6466648">,</span>&nbsp;<span class="ident" id="6466650">g</span><span class="op" id="6466651">,</span>&nbsp;<span class="ident" id="6466653">e</span><span class="op" id="6466654">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466660">if</span>&nbsp;<span class="ident" id="6466663">g</span><span class="op" id="6466664">,</span>&nbsp;<span class="ident" id="6466666">e</span>&nbsp;<span class="op" id="6466668">:=</span>&nbsp;<span class="ident" id="6466671">h</span><span class="op" id="6466672">.</span><span class="ident" id="6466673">ModTime</span><span class="op" id="6466680">,</span>&nbsp;<span class="ident" id="6466682">fi</span><span class="op" id="6466684">.</span><span class="ident" id="6466685">ModTime</span><span class="op" id="6466692">(</span><span class="op" id="6466693">)</span><span class="op" id="6466694">;</span>&nbsp;<span class="op" id="6466696">!</span><span class="ident" id="6466697">g</span><span class="op" id="6466698">.</span><span class="ident" id="6466699">Equal</span><span class="op" id="6466704">(</span><span class="ident" id="6466705">e</span><span class="op" id="6466706">)</span>&nbsp;<span class="op" id="6466708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466712">t</span><span class="op" id="6466713">.</span><span class="ident" id="6466714">Errorf</span><span class="op" id="6466720">(</span><span class="string" id="6466721">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6466744">,</span>&nbsp;<span class="ident" id="6466746">g</span><span class="op" id="6466747">,</span>&nbsp;<span class="ident" id="6466749">e</span><span class="op" id="6466750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6466756">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466814">if</span>&nbsp;<span class="ident" id="6466817">_</span><span class="op" id="6466818">,</span>&nbsp;<span class="ident" id="6466820">err</span>&nbsp;<span class="op" id="6466824">:=</span>&nbsp;<span class="ident" id="6466827">FileInfoHeader</span><span class="op" id="6466841">(</span><span class="ident" id="6466842">nil</span><span class="op" id="6466845">,</span>&nbsp;<span class="string" id="6466847">&#34;&#34;</span><span class="op" id="6466849">)</span><span class="op" id="6466850">;</span>&nbsp;<span class="ident" id="6466852">err</span>&nbsp;<span class="op" id="6466856">==</span>&nbsp;<span class="ident" id="6466859">nil</span>&nbsp;<span class="op" id="6466863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466867">t</span><span class="op" id="6466868">.</span><span class="ident" id="6466869">Fatalf</span><span class="op" id="6466875">(</span><span class="string" id="6466876">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="6466927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6466930">}</span><br>
<span class="lineno"></span><span class="op" id="6466932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6466935">func</span>&nbsp;<span class="ident" id="6466940">TestFileInfoHeaderDir</span><span class="op" id="6466961">(</span><span class="ident" id="6466962">t</span>&nbsp;<span class="op" id="6466964">*</span><span class="ident" id="6466965">testing</span><span class="op" id="6466972">.</span><span class="ident" id="6466973">T</span><span class="op" id="6466974">)</span>&nbsp;<span class="op" id="6466976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466979">fi</span><span class="op" id="6466981">,</span>&nbsp;<span class="ident" id="6466983">err</span>&nbsp;<span class="op" id="6466987">:=</span>&nbsp;<span class="ident" id="6466990">os</span><span class="op" id="6466992">.</span><span class="ident" id="6466993">Stat</span><span class="op" id="6466997">(</span><span class="string" id="6466998">&#34;testdata&#34;</span><span class="op" id="6467008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467011">if</span>&nbsp;<span class="ident" id="6467014">err</span>&nbsp;<span class="op" id="6467018">!=</span>&nbsp;<span class="ident" id="6467021">nil</span>&nbsp;<span class="op" id="6467025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467029">t</span><span class="op" id="6467030">.</span><span class="ident" id="6467031">Fatal</span><span class="op" id="6467036">(</span><span class="ident" id="6467037">err</span><span class="op" id="6467040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467043">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467046">h</span><span class="op" id="6467047">,</span>&nbsp;<span class="ident" id="6467049">err</span>&nbsp;<span class="op" id="6467053">:=</span>&nbsp;<span class="ident" id="6467056">FileInfoHeader</span><span class="op" id="6467070">(</span><span class="ident" id="6467071">fi</span><span class="op" id="6467073">,</span>&nbsp;<span class="string" id="6467075">&#34;&#34;</span><span class="op" id="6467077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467080">if</span>&nbsp;<span class="ident" id="6467083">err</span>&nbsp;<span class="op" id="6467087">!=</span>&nbsp;<span class="ident" id="6467090">nil</span>&nbsp;<span class="op" id="6467094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467098">t</span><span class="op" id="6467099">.</span><span class="ident" id="6467100">Fatalf</span><span class="op" id="6467106">(</span><span class="string" id="6467107">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="6467127">,</span>&nbsp;<span class="ident" id="6467129">err</span><span class="op" id="6467132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467138">if</span>&nbsp;<span class="ident" id="6467141">g</span><span class="op" id="6467142">,</span>&nbsp;<span class="ident" id="6467144">e</span>&nbsp;<span class="op" id="6467146">:=</span>&nbsp;<span class="ident" id="6467149">h</span><span class="op" id="6467150">.</span><span class="ident" id="6467151">Name</span><span class="op" id="6467155">,</span>&nbsp;<span class="string" id="6467157">&#34;testdata/&#34;</span><span class="op" id="6467168">;</span>&nbsp;<span class="ident" id="6467170">g</span>&nbsp;<span class="op" id="6467172">!=</span>&nbsp;<span class="ident" id="6467175">e</span>&nbsp;<span class="op" id="6467177">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467181">t</span><span class="op" id="6467182">.</span><span class="ident" id="6467183">Errorf</span><span class="op" id="6467189">(</span><span class="string" id="6467190">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6467210">,</span>&nbsp;<span class="ident" id="6467212">g</span><span class="op" id="6467213">,</span>&nbsp;<span class="ident" id="6467215">e</span><span class="op" id="6467216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6467222">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467269">if</span>&nbsp;<span class="ident" id="6467272">g</span><span class="op" id="6467273">,</span>&nbsp;<span class="ident" id="6467275">e</span>&nbsp;<span class="op" id="6467277">:=</span>&nbsp;<span class="ident" id="6467280">h</span><span class="op" id="6467281">.</span><span class="ident" id="6467282">Mode</span><span class="op" id="6467286">&amp;^</span><span class="ident" id="6467288">c_ISGID</span><span class="op" id="6467295">,</span>&nbsp;<span class="ident" id="6467297">int64</span><span class="op" id="6467302">(</span><span class="ident" id="6467303">fi</span><span class="op" id="6467305">.</span><span class="ident" id="6467306">Mode</span><span class="op" id="6467310">(</span><span class="op" id="6467311">)</span><span class="op" id="6467312">.</span><span class="ident" id="6467313">Perm</span><span class="op" id="6467317">(</span><span class="op" id="6467318">)</span><span class="op" id="6467319">)</span><span class="op" id="6467320">|</span><span class="ident" id="6467321">c_ISDIR</span><span class="op" id="6467328">;</span>&nbsp;<span class="ident" id="6467330">g</span>&nbsp;<span class="op" id="6467332">!=</span>&nbsp;<span class="ident" id="6467335">e</span>&nbsp;<span class="op" id="6467337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467341">t</span><span class="op" id="6467342">.</span><span class="ident" id="6467343">Errorf</span><span class="op" id="6467349">(</span><span class="string" id="6467350">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="6467372">,</span>&nbsp;<span class="ident" id="6467374">g</span><span class="op" id="6467375">,</span>&nbsp;<span class="ident" id="6467377">e</span><span class="op" id="6467378">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467384">if</span>&nbsp;<span class="ident" id="6467387">g</span><span class="op" id="6467388">,</span>&nbsp;<span class="ident" id="6467390">e</span>&nbsp;<span class="op" id="6467392">:=</span>&nbsp;<span class="ident" id="6467395">h</span><span class="op" id="6467396">.</span><span class="ident" id="6467397">Size</span><span class="op" id="6467401">,</span>&nbsp;<span class="ident" id="6467403">int64</span><span class="op" id="6467408">(</span><span class="num" id="6467409">0</span><span class="op" id="6467410">)</span><span class="op" id="6467411">;</span>&nbsp;<span class="ident" id="6467413">g</span>&nbsp;<span class="op" id="6467415">!=</span>&nbsp;<span class="ident" id="6467418">e</span>&nbsp;<span class="op" id="6467420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467424">t</span><span class="op" id="6467425">.</span><span class="ident" id="6467426">Errorf</span><span class="op" id="6467432">(</span><span class="string" id="6467433">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6467453">,</span>&nbsp;<span class="ident" id="6467455">g</span><span class="op" id="6467456">,</span>&nbsp;<span class="ident" id="6467458">e</span><span class="op" id="6467459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467465">if</span>&nbsp;<span class="ident" id="6467468">g</span><span class="op" id="6467469">,</span>&nbsp;<span class="ident" id="6467471">e</span>&nbsp;<span class="op" id="6467473">:=</span>&nbsp;<span class="ident" id="6467476">h</span><span class="op" id="6467477">.</span><span class="ident" id="6467478">ModTime</span><span class="op" id="6467485">,</span>&nbsp;<span class="ident" id="6467487">fi</span><span class="op" id="6467489">.</span><span class="ident" id="6467490">ModTime</span><span class="op" id="6467497">(</span><span class="op" id="6467498">)</span><span class="op" id="6467499">;</span>&nbsp;<span class="op" id="6467501">!</span><span class="ident" id="6467502">g</span><span class="op" id="6467503">.</span><span class="ident" id="6467504">Equal</span><span class="op" id="6467509">(</span><span class="ident" id="6467510">e</span><span class="op" id="6467511">)</span>&nbsp;<span class="op" id="6467513">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467517">t</span><span class="op" id="6467518">.</span><span class="ident" id="6467519">Errorf</span><span class="op" id="6467525">(</span><span class="string" id="6467526">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6467549">,</span>&nbsp;<span class="ident" id="6467551">g</span><span class="op" id="6467552">,</span>&nbsp;<span class="ident" id="6467554">e</span><span class="op" id="6467555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467558">}</span><br>
<span class="lineno"></span><span class="op" id="6467560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6467563">func</span>&nbsp;<span class="ident" id="6467568">TestFileInfoHeaderSymlink</span><span class="op" id="6467593">(</span><span class="ident" id="6467594">t</span>&nbsp;<span class="op" id="6467596">*</span><span class="ident" id="6467597">testing</span><span class="op" id="6467604">.</span><span class="ident" id="6467605">T</span><span class="op" id="6467606">)</span>&nbsp;<span class="op" id="6467608">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467611">h</span><span class="op" id="6467612">,</span>&nbsp;<span class="ident" id="6467614">err</span>&nbsp;<span class="op" id="6467618">:=</span>&nbsp;<span class="ident" id="6467621">FileInfoHeader</span><span class="op" id="6467635">(</span><span class="ident" id="6467636">symlink</span><span class="op" id="6467643">{</span><span class="op" id="6467644">}</span><span class="op" id="6467645">,</span>&nbsp;<span class="string" id="6467647">&#34;some-target&#34;</span><span class="op" id="6467660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467663">if</span>&nbsp;<span class="ident" id="6467666">err</span>&nbsp;<span class="op" id="6467670">!=</span>&nbsp;<span class="ident" id="6467673">nil</span>&nbsp;<span class="op" id="6467677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467681">t</span><span class="op" id="6467682">.</span><span class="ident" id="6467683">Fatal</span><span class="op" id="6467688">(</span><span class="ident" id="6467689">err</span><span class="op" id="6467692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467698">if</span>&nbsp;<span class="ident" id="6467701">g</span><span class="op" id="6467702">,</span>&nbsp;<span class="ident" id="6467704">e</span>&nbsp;<span class="op" id="6467706">:=</span>&nbsp;<span class="ident" id="6467709">h</span><span class="op" id="6467710">.</span><span class="ident" id="6467711">Name</span><span class="op" id="6467715">,</span>&nbsp;<span class="string" id="6467717">&#34;some-symlink&#34;</span><span class="op" id="6467731">;</span>&nbsp;<span class="ident" id="6467733">g</span>&nbsp;<span class="op" id="6467735">!=</span>&nbsp;<span class="ident" id="6467738">e</span>&nbsp;<span class="op" id="6467740">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467744">t</span><span class="op" id="6467745">.</span><span class="ident" id="6467746">Errorf</span><span class="op" id="6467752">(</span><span class="string" id="6467753">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6467773">,</span>&nbsp;<span class="ident" id="6467775">g</span><span class="op" id="6467776">,</span>&nbsp;<span class="ident" id="6467778">e</span><span class="op" id="6467779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467785">if</span>&nbsp;<span class="ident" id="6467788">g</span><span class="op" id="6467789">,</span>&nbsp;<span class="ident" id="6467791">e</span>&nbsp;<span class="op" id="6467793">:=</span>&nbsp;<span class="ident" id="6467796">h</span><span class="op" id="6467797">.</span><span class="ident" id="6467798">Linkname</span><span class="op" id="6467806">,</span>&nbsp;<span class="string" id="6467808">&#34;some-target&#34;</span><span class="op" id="6467821">;</span>&nbsp;<span class="ident" id="6467823">g</span>&nbsp;<span class="op" id="6467825">!=</span>&nbsp;<span class="ident" id="6467828">e</span>&nbsp;<span class="op" id="6467830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467834">t</span><span class="op" id="6467835">.</span><span class="ident" id="6467836">Errorf</span><span class="op" id="6467842">(</span><span class="string" id="6467843">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6467867">,</span>&nbsp;<span class="ident" id="6467869">g</span><span class="op" id="6467870">,</span>&nbsp;<span class="ident" id="6467872">e</span><span class="op" id="6467873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6467876">}</span><br>
<span class="lineno">80</span><span class="op" id="6467878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6467881">type</span>&nbsp;<span class="ident" id="6467886">symlink</span>&nbsp;<span class="keyword" id="6467894">struct</span><span class="op" id="6467900">{</span><span class="op" id="6467901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6467904">func</span>&nbsp;<span class="op" id="6467909">(</span><span class="ident" id="6467910">symlink</span><span class="op" id="6467917">)</span>&nbsp;<span class="ident" id="6467919">Name</span><span class="op" id="6467923">(</span><span class="op" id="6467924">)</span>&nbsp;<span class="builtintype" id="6467926">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6467939">{</span>&nbsp;<span class="keyword" id="6467941">return</span>&nbsp;<span class="string" id="6467948">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="6467963">}</span><br>
<span class="lineno">85</span><span class="keyword" id="6467965">func</span>&nbsp;<span class="op" id="6467970">(</span><span class="ident" id="6467971">symlink</span><span class="op" id="6467978">)</span>&nbsp;<span class="ident" id="6467980">Size</span><span class="op" id="6467984">(</span><span class="op" id="6467985">)</span>&nbsp;<span class="ident" id="6467987">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6468000">{</span>&nbsp;<span class="keyword" id="6468002">return</span>&nbsp;<span class="num" id="6468009">0</span>&nbsp;<span class="op" id="6468011">}</span><br>
<span class="lineno"></span><span class="keyword" id="6468013">func</span>&nbsp;<span class="op" id="6468018">(</span><span class="ident" id="6468019">symlink</span><span class="op" id="6468026">)</span>&nbsp;<span class="ident" id="6468028">Mode</span><span class="op" id="6468032">(</span><span class="op" id="6468033">)</span>&nbsp;<span class="ident" id="6468035">os</span><span class="op" id="6468037">.</span><span class="ident" id="6468038">FileMode</span>&nbsp;&nbsp;<span class="op" id="6468048">{</span>&nbsp;<span class="keyword" id="6468050">return</span>&nbsp;<span class="ident" id="6468057">os</span><span class="op" id="6468059">.</span><span class="ident" id="6468060">ModeSymlink</span>&nbsp;<span class="op" id="6468072">}</span><br>
<span class="lineno"></span><span class="keyword" id="6468074">func</span>&nbsp;<span class="op" id="6468079">(</span><span class="ident" id="6468080">symlink</span><span class="op" id="6468087">)</span>&nbsp;<span class="ident" id="6468089">ModTime</span><span class="op" id="6468096">(</span><span class="op" id="6468097">)</span>&nbsp;<span class="ident" id="6468099">time</span><span class="op" id="6468103">.</span><span class="ident" id="6468104">Time</span>&nbsp;<span class="op" id="6468109">{</span>&nbsp;<span class="keyword" id="6468111">return</span>&nbsp;<span class="ident" id="6468118">time</span><span class="op" id="6468122">.</span><span class="ident" id="6468123">Time</span><span class="op" id="6468127">{</span><span class="op" id="6468128">}</span>&nbsp;<span class="op" id="6468130">}</span><br>
<span class="lineno"></span><span class="keyword" id="6468132">func</span>&nbsp;<span class="op" id="6468137">(</span><span class="ident" id="6468138">symlink</span><span class="op" id="6468145">)</span>&nbsp;<span class="ident" id="6468147">IsDir</span><span class="op" id="6468152">(</span><span class="op" id="6468153">)</span>&nbsp;<span class="builtintype" id="6468155">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6468167">{</span>&nbsp;<span class="keyword" id="6468169">return</span>&nbsp;<span class="builtintype" id="6468176">false</span>&nbsp;<span class="op" id="6468182">}</span><br>
<span class="lineno"></span><span class="keyword" id="6468184">func</span>&nbsp;<span class="op" id="6468189">(</span><span class="ident" id="6468190">symlink</span><span class="op" id="6468197">)</span>&nbsp;<span class="ident" id="6468199">Sys</span><span class="op" id="6468202">(</span><span class="op" id="6468203">)</span>&nbsp;<span class="keyword" id="6468205">interface</span><span class="op" id="6468214">{</span><span class="op" id="6468215">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6468219">{</span>&nbsp;<span class="keyword" id="6468221">return</span>&nbsp;<span class="ident" id="6468228">nil</span>&nbsp;<span class="op" id="6468232">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="6468235">func</span>&nbsp;<span class="ident" id="6468240">TestRoundTrip</span><span class="op" id="6468253">(</span><span class="ident" id="6468254">t</span>&nbsp;<span class="op" id="6468256">*</span><span class="ident" id="6468257">testing</span><span class="op" id="6468264">.</span><span class="ident" id="6468265">T</span><span class="op" id="6468266">)</span>&nbsp;<span class="op" id="6468268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468271">data</span>&nbsp;<span class="op" id="6468276">:=</span>&nbsp;<span class="op" id="6468279">[</span><span class="op" id="6468280">]</span><span class="builtintype" id="6468281">byte</span><span class="op" id="6468285">(</span><span class="string" id="6468286">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="6468306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468310">var</span>&nbsp;<span class="ident" id="6468314">b</span>&nbsp;<span class="ident" id="6468316">bytes</span><span class="op" id="6468321">.</span><span class="ident" id="6468322">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468330">tw</span>&nbsp;<span class="op" id="6468333">:=</span>&nbsp;<span class="ident" id="6468336">NewWriter</span><span class="op" id="6468345">(</span><span class="op" id="6468346">&amp;</span><span class="ident" id="6468347">b</span><span class="op" id="6468348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468351">hdr</span>&nbsp;<span class="op" id="6468355">:=</span>&nbsp;<span class="op" id="6468358">&amp;</span><span class="ident" id="6468359">Header</span><span class="op" id="6468365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468369">Name</span><span class="op" id="6468373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6468378">&#34;file.txt&#34;</span><span class="op" id="6468388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468392">Uid</span><span class="op" id="6468395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6468401">1</span>&nbsp;<span class="op" id="6468403">&lt;&lt;</span>&nbsp;<span class="num" id="6468406">21</span><span class="op" id="6468408">,</span>&nbsp;<span class="comment" id="6468410">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468442">Size</span><span class="op" id="6468446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6468451">int64</span><span class="op" id="6468456">(</span><span class="builtinfunc" id="6468457">len</span><span class="op" id="6468460">(</span><span class="ident" id="6468461">data</span><span class="op" id="6468465">)</span><span class="op" id="6468466">)</span><span class="op" id="6468467">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468471">ModTime</span><span class="op" id="6468478">:</span>&nbsp;<span class="ident" id="6468480">time</span><span class="op" id="6468484">.</span><span class="ident" id="6468485">Now</span><span class="op" id="6468488">(</span><span class="op" id="6468489">)</span><span class="op" id="6468490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6468496">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468536">hdr</span><span class="op" id="6468539">.</span><span class="ident" id="6468540">ModTime</span>&nbsp;<span class="op" id="6468548">=</span>&nbsp;<span class="ident" id="6468550">hdr</span><span class="op" id="6468553">.</span><span class="ident" id="6468554">ModTime</span><span class="op" id="6468561">.</span><span class="ident" id="6468562">Add</span><span class="op" id="6468565">(</span><span class="op" id="6468566">-</span><span class="ident" id="6468567">time</span><span class="op" id="6468571">.</span><span class="ident" id="6468572">Duration</span><span class="op" id="6468580">(</span><span class="ident" id="6468581">hdr</span><span class="op" id="6468584">.</span><span class="ident" id="6468585">ModTime</span><span class="op" id="6468592">.</span><span class="ident" id="6468593">Nanosecond</span><span class="op" id="6468603">(</span><span class="op" id="6468604">)</span><span class="op" id="6468605">)</span>&nbsp;<span class="op" id="6468607">*</span>&nbsp;<span class="ident" id="6468609">time</span><span class="op" id="6468613">.</span><span class="ident" id="6468614">Nanosecond</span><span class="op" id="6468624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468627">if</span>&nbsp;<span class="ident" id="6468630">err</span>&nbsp;<span class="op" id="6468634">:=</span>&nbsp;<span class="ident" id="6468637">tw</span><span class="op" id="6468639">.</span><span class="ident" id="6468640">WriteHeader</span><span class="op" id="6468651">(</span><span class="ident" id="6468652">hdr</span><span class="op" id="6468655">)</span><span class="op" id="6468656">;</span>&nbsp;<span class="ident" id="6468658">err</span>&nbsp;<span class="op" id="6468662">!=</span>&nbsp;<span class="ident" id="6468665">nil</span>&nbsp;<span class="op" id="6468669">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468673">t</span><span class="op" id="6468674">.</span><span class="ident" id="6468675">Fatalf</span><span class="op" id="6468681">(</span><span class="string" id="6468682">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="6468702">,</span>&nbsp;<span class="ident" id="6468704">err</span><span class="op" id="6468707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468713">if</span>&nbsp;<span class="ident" id="6468716">_</span><span class="op" id="6468717">,</span>&nbsp;<span class="ident" id="6468719">err</span>&nbsp;<span class="op" id="6468723">:=</span>&nbsp;<span class="ident" id="6468726">tw</span><span class="op" id="6468728">.</span><span class="ident" id="6468729">Write</span><span class="op" id="6468734">(</span><span class="ident" id="6468735">data</span><span class="op" id="6468739">)</span><span class="op" id="6468740">;</span>&nbsp;<span class="ident" id="6468742">err</span>&nbsp;<span class="op" id="6468746">!=</span>&nbsp;<span class="ident" id="6468749">nil</span>&nbsp;<span class="op" id="6468753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468757">t</span><span class="op" id="6468758">.</span><span class="ident" id="6468759">Fatalf</span><span class="op" id="6468765">(</span><span class="string" id="6468766">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="6468780">,</span>&nbsp;<span class="ident" id="6468782">err</span><span class="op" id="6468785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468788">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468791">if</span>&nbsp;<span class="ident" id="6468794">err</span>&nbsp;<span class="op" id="6468798">:=</span>&nbsp;<span class="ident" id="6468801">tw</span><span class="op" id="6468803">.</span><span class="ident" id="6468804">Close</span><span class="op" id="6468809">(</span><span class="op" id="6468810">)</span><span class="op" id="6468811">;</span>&nbsp;<span class="ident" id="6468813">err</span>&nbsp;<span class="op" id="6468817">!=</span>&nbsp;<span class="ident" id="6468820">nil</span>&nbsp;<span class="op" id="6468824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468828">t</span><span class="op" id="6468829">.</span><span class="ident" id="6468830">Fatalf</span><span class="op" id="6468836">(</span><span class="string" id="6468837">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="6468851">,</span>&nbsp;<span class="ident" id="6468853">err</span><span class="op" id="6468856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6468863">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468881">tr</span>&nbsp;<span class="op" id="6468884">:=</span>&nbsp;<span class="ident" id="6468887">NewReader</span><span class="op" id="6468896">(</span><span class="op" id="6468897">&amp;</span><span class="ident" id="6468898">b</span><span class="op" id="6468899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468902">rHdr</span><span class="op" id="6468906">,</span>&nbsp;<span class="ident" id="6468908">err</span>&nbsp;<span class="op" id="6468912">:=</span>&nbsp;<span class="ident" id="6468915">tr</span><span class="op" id="6468917">.</span><span class="ident" id="6468918">Next</span><span class="op" id="6468922">(</span><span class="op" id="6468923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468926">if</span>&nbsp;<span class="ident" id="6468929">err</span>&nbsp;<span class="op" id="6468933">!=</span>&nbsp;<span class="ident" id="6468936">nil</span>&nbsp;<span class="op" id="6468940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468944">t</span><span class="op" id="6468945">.</span><span class="ident" id="6468946">Fatalf</span><span class="op" id="6468952">(</span><span class="string" id="6468953">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="6468966">,</span>&nbsp;<span class="ident" id="6468968">err</span><span class="op" id="6468971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468974">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468977">if</span>&nbsp;<span class="op" id="6468980">!</span><span class="ident" id="6468981">reflect</span><span class="op" id="6468988">.</span><span class="ident" id="6468989">DeepEqual</span><span class="op" id="6468998">(</span><span class="ident" id="6468999">rHdr</span><span class="op" id="6469003">,</span>&nbsp;<span class="ident" id="6469005">hdr</span><span class="op" id="6469008">)</span>&nbsp;<span class="op" id="6469010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469014">t</span><span class="op" id="6469015">.</span><span class="ident" id="6469016">Errorf</span><span class="op" id="6469022">(</span><span class="string" id="6469023">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6469061">,</span>&nbsp;<span class="ident" id="6469063">rHdr</span><span class="op" id="6469067">,</span>&nbsp;<span class="ident" id="6469069">hdr</span><span class="op" id="6469072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469078">rData</span><span class="op" id="6469083">,</span>&nbsp;<span class="ident" id="6469085">err</span>&nbsp;<span class="op" id="6469089">:=</span>&nbsp;<span class="ident" id="6469092">ioutil</span><span class="op" id="6469098">.</span><span class="ident" id="6469099">ReadAll</span><span class="op" id="6469106">(</span><span class="ident" id="6469107">tr</span><span class="op" id="6469109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469112">if</span>&nbsp;<span class="ident" id="6469115">err</span>&nbsp;<span class="op" id="6469119">!=</span>&nbsp;<span class="ident" id="6469122">nil</span>&nbsp;<span class="op" id="6469126">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469130">t</span><span class="op" id="6469131">.</span><span class="ident" id="6469132">Fatalf</span><span class="op" id="6469138">(</span><span class="string" id="6469139">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="6469149">,</span>&nbsp;<span class="ident" id="6469151">err</span><span class="op" id="6469154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469160">if</span>&nbsp;<span class="op" id="6469163">!</span><span class="ident" id="6469164">bytes</span><span class="op" id="6469169">.</span><span class="ident" id="6469170">Equal</span><span class="op" id="6469175">(</span><span class="ident" id="6469176">rData</span><span class="op" id="6469181">,</span>&nbsp;<span class="ident" id="6469183">data</span><span class="op" id="6469187">)</span>&nbsp;<span class="op" id="6469189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469193">t</span><span class="op" id="6469194">.</span><span class="ident" id="6469195">Errorf</span><span class="op" id="6469201">(</span><span class="string" id="6469202">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="6469236">,</span>&nbsp;<span class="ident" id="6469238">rData</span><span class="op" id="6469243">,</span>&nbsp;<span class="ident" id="6469245">data</span><span class="op" id="6469249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469252">}</span><br>
<span class="lineno">130</span><span class="op" id="6469254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6469257">type</span>&nbsp;<span class="ident" id="6469262">headerRoundTripTest</span>&nbsp;<span class="keyword" id="6469282">struct</span>&nbsp;<span class="op" id="6469289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469292">h</span>&nbsp;&nbsp;<span class="op" id="6469295">*</span><span class="ident" id="6469296">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469304">fm</span>&nbsp;<span class="ident" id="6469307">os</span><span class="op" id="6469309">.</span><span class="ident" id="6469310">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="6469319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6469322">func</span>&nbsp;<span class="ident" id="6469327">TestHeaderRoundTrip</span><span class="op" id="6469346">(</span><span class="ident" id="6469347">t</span>&nbsp;<span class="op" id="6469349">*</span><span class="ident" id="6469350">testing</span><span class="op" id="6469357">.</span><span class="ident" id="6469358">T</span><span class="op" id="6469359">)</span>&nbsp;<span class="op" id="6469361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469364">golden</span>&nbsp;<span class="op" id="6469371">:=</span>&nbsp;<span class="op" id="6469374">[</span><span class="op" id="6469375">]</span><span class="ident" id="6469376">headerRoundTripTest</span><span class="op" id="6469395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469399">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469423">h</span><span class="op" id="6469424">:</span>&nbsp;<span class="op" id="6469426">&amp;</span><span class="ident" id="6469427">Header</span><span class="op" id="6469433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469439">Name</span><span class="op" id="6469443">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6469449">&#34;test.txt&#34;</span><span class="op" id="6469459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469465">Mode</span><span class="op" id="6469469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469475">0644</span>&nbsp;<span class="op" id="6469480">|</span>&nbsp;<span class="ident" id="6469482">c_ISREG</span><span class="op" id="6469489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469495">Size</span><span class="op" id="6469499">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469505">12</span><span class="op" id="6469507">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469513">ModTime</span><span class="op" id="6469520">:</span>&nbsp;&nbsp;<span class="ident" id="6469523">time</span><span class="op" id="6469527">.</span><span class="ident" id="6469528">Unix</span><span class="op" id="6469532">(</span><span class="num" id="6469533">1360600916</span><span class="op" id="6469543">,</span>&nbsp;<span class="num" id="6469545">0</span><span class="op" id="6469546">)</span><span class="op" id="6469547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469553">Typeflag</span><span class="op" id="6469561">:</span>&nbsp;<span class="ident" id="6469563">TypeReg</span><span class="op" id="6469570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469575">}</span><span class="op" id="6469576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469581">fm</span><span class="op" id="6469583">:</span>&nbsp;<span class="num" id="6469585">0644</span><span class="op" id="6469589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469593">}</span><span class="op" id="6469594">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469598">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469619">h</span><span class="op" id="6469620">:</span>&nbsp;<span class="op" id="6469622">&amp;</span><span class="ident" id="6469623">Header</span><span class="op" id="6469629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469635">Name</span><span class="op" id="6469639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6469645">&#34;hard.txt&#34;</span><span class="op" id="6469655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469661">Mode</span><span class="op" id="6469665">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469671">0644</span>&nbsp;<span class="op" id="6469676">|</span>&nbsp;<span class="ident" id="6469678">c_ISLNK</span><span class="op" id="6469685">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469691">Size</span><span class="op" id="6469695">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469701">0</span><span class="op" id="6469702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469708">ModTime</span><span class="op" id="6469715">:</span>&nbsp;&nbsp;<span class="ident" id="6469718">time</span><span class="op" id="6469722">.</span><span class="ident" id="6469723">Unix</span><span class="op" id="6469727">(</span><span class="num" id="6469728">1360600916</span><span class="op" id="6469738">,</span>&nbsp;<span class="num" id="6469740">0</span><span class="op" id="6469741">)</span><span class="op" id="6469742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469748">Typeflag</span><span class="op" id="6469756">:</span>&nbsp;<span class="ident" id="6469758">TypeLink</span><span class="op" id="6469766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469771">}</span><span class="op" id="6469772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469777">fm</span><span class="op" id="6469779">:</span>&nbsp;<span class="num" id="6469781">0644</span>&nbsp;<span class="op" id="6469786">|</span>&nbsp;<span class="ident" id="6469788">os</span><span class="op" id="6469790">.</span><span class="ident" id="6469791">ModeSymlink</span><span class="op" id="6469802">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469806">}</span><span class="op" id="6469807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469811">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469836">h</span><span class="op" id="6469837">:</span>&nbsp;<span class="op" id="6469839">&amp;</span><span class="ident" id="6469840">Header</span><span class="op" id="6469846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469852">Name</span><span class="op" id="6469856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6469862">&#34;link.txt&#34;</span><span class="op" id="6469872">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469878">Mode</span><span class="op" id="6469882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469888">0777</span>&nbsp;<span class="op" id="6469893">|</span>&nbsp;<span class="ident" id="6469895">c_ISLNK</span><span class="op" id="6469902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469908">Size</span><span class="op" id="6469912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6469918">0</span><span class="op" id="6469919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469925">ModTime</span><span class="op" id="6469932">:</span>&nbsp;&nbsp;<span class="ident" id="6469935">time</span><span class="op" id="6469939">.</span><span class="ident" id="6469940">Unix</span><span class="op" id="6469944">(</span><span class="num" id="6469945">1360600852</span><span class="op" id="6469955">,</span>&nbsp;<span class="num" id="6469957">0</span><span class="op" id="6469958">)</span><span class="op" id="6469959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469965">Typeflag</span><span class="op" id="6469973">:</span>&nbsp;<span class="ident" id="6469975">TypeSymlink</span><span class="op" id="6469986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469991">}</span><span class="op" id="6469992">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469997">fm</span><span class="op" id="6469999">:</span>&nbsp;<span class="num" id="6470001">0777</span>&nbsp;<span class="op" id="6470006">|</span>&nbsp;<span class="ident" id="6470008">os</span><span class="op" id="6470010">.</span><span class="ident" id="6470011">ModeSymlink</span><span class="op" id="6470022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470026">}</span><span class="op" id="6470027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470031">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470064">h</span><span class="op" id="6470065">:</span>&nbsp;<span class="op" id="6470067">&amp;</span><span class="ident" id="6470068">Header</span><span class="op" id="6470074">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470080">Name</span><span class="op" id="6470084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6470090">&#34;dev/null&#34;</span><span class="op" id="6470100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470106">Mode</span><span class="op" id="6470110">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470116">0666</span>&nbsp;<span class="op" id="6470121">|</span>&nbsp;<span class="ident" id="6470123">c_ISCHR</span><span class="op" id="6470130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470136">Size</span><span class="op" id="6470140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470146">0</span><span class="op" id="6470147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470153">ModTime</span><span class="op" id="6470160">:</span>&nbsp;&nbsp;<span class="ident" id="6470163">time</span><span class="op" id="6470167">.</span><span class="ident" id="6470168">Unix</span><span class="op" id="6470172">(</span><span class="num" id="6470173">1360578951</span><span class="op" id="6470183">,</span>&nbsp;<span class="num" id="6470185">0</span><span class="op" id="6470186">)</span><span class="op" id="6470187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470193">Typeflag</span><span class="op" id="6470201">:</span>&nbsp;<span class="ident" id="6470203">TypeChar</span><span class="op" id="6470211">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470216">}</span><span class="op" id="6470217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470222">fm</span><span class="op" id="6470224">:</span>&nbsp;<span class="num" id="6470226">0666</span>&nbsp;<span class="op" id="6470231">|</span>&nbsp;<span class="ident" id="6470233">os</span><span class="op" id="6470235">.</span><span class="ident" id="6470236">ModeDevice</span>&nbsp;<span class="op" id="6470247">|</span>&nbsp;<span class="ident" id="6470249">os</span><span class="op" id="6470251">.</span><span class="ident" id="6470252">ModeCharDevice</span><span class="op" id="6470266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470270">}</span><span class="op" id="6470271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470275">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470299">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470304">h</span><span class="op" id="6470305">:</span>&nbsp;<span class="op" id="6470307">&amp;</span><span class="ident" id="6470308">Header</span><span class="op" id="6470314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470320">Name</span><span class="op" id="6470324">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6470330">&#34;dev/sda&#34;</span><span class="op" id="6470339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470345">Mode</span><span class="op" id="6470349">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470355">0660</span>&nbsp;<span class="op" id="6470360">|</span>&nbsp;<span class="ident" id="6470362">c_ISBLK</span><span class="op" id="6470369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470375">Size</span><span class="op" id="6470379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470385">0</span><span class="op" id="6470386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470392">ModTime</span><span class="op" id="6470399">:</span>&nbsp;&nbsp;<span class="ident" id="6470402">time</span><span class="op" id="6470406">.</span><span class="ident" id="6470407">Unix</span><span class="op" id="6470411">(</span><span class="num" id="6470412">1360578954</span><span class="op" id="6470422">,</span>&nbsp;<span class="num" id="6470424">0</span><span class="op" id="6470425">)</span><span class="op" id="6470426">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470432">Typeflag</span><span class="op" id="6470440">:</span>&nbsp;<span class="ident" id="6470442">TypeBlock</span><span class="op" id="6470451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470456">}</span><span class="op" id="6470457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470462">fm</span><span class="op" id="6470464">:</span>&nbsp;<span class="num" id="6470466">0660</span>&nbsp;<span class="op" id="6470471">|</span>&nbsp;<span class="ident" id="6470473">os</span><span class="op" id="6470475">.</span><span class="ident" id="6470476">ModeDevice</span><span class="op" id="6470486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470490">}</span><span class="op" id="6470491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470495">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470516">h</span><span class="op" id="6470517">:</span>&nbsp;<span class="op" id="6470519">&amp;</span><span class="ident" id="6470520">Header</span><span class="op" id="6470526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470532">Name</span><span class="op" id="6470536">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6470542">&#34;dir/&#34;</span><span class="op" id="6470548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470554">Mode</span><span class="op" id="6470558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470564">0755</span>&nbsp;<span class="op" id="6470569">|</span>&nbsp;<span class="ident" id="6470571">c_ISDIR</span><span class="op" id="6470578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470584">Size</span><span class="op" id="6470588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470594">0</span><span class="op" id="6470595">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470601">ModTime</span><span class="op" id="6470608">:</span>&nbsp;&nbsp;<span class="ident" id="6470611">time</span><span class="op" id="6470615">.</span><span class="ident" id="6470616">Unix</span><span class="op" id="6470620">(</span><span class="num" id="6470621">1360601116</span><span class="op" id="6470631">,</span>&nbsp;<span class="num" id="6470633">0</span><span class="op" id="6470634">)</span><span class="op" id="6470635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470641">Typeflag</span><span class="op" id="6470649">:</span>&nbsp;<span class="ident" id="6470651">TypeDir</span><span class="op" id="6470658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470663">}</span><span class="op" id="6470664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470669">fm</span><span class="op" id="6470671">:</span>&nbsp;<span class="num" id="6470673">0755</span>&nbsp;<span class="op" id="6470678">|</span>&nbsp;<span class="ident" id="6470680">os</span><span class="op" id="6470682">.</span><span class="ident" id="6470683">ModeDir</span><span class="op" id="6470690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470694">}</span><span class="op" id="6470695">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470699">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470720">h</span><span class="op" id="6470721">:</span>&nbsp;<span class="op" id="6470723">&amp;</span><span class="ident" id="6470724">Header</span><span class="op" id="6470730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470736">Name</span><span class="op" id="6470740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6470746">&#34;dev/initctl&#34;</span><span class="op" id="6470759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470765">Mode</span><span class="op" id="6470769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470775">0600</span>&nbsp;<span class="op" id="6470780">|</span>&nbsp;<span class="ident" id="6470782">c_ISFIFO</span><span class="op" id="6470790">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470796">Size</span><span class="op" id="6470800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470806">0</span><span class="op" id="6470807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470813">ModTime</span><span class="op" id="6470820">:</span>&nbsp;&nbsp;<span class="ident" id="6470823">time</span><span class="op" id="6470827">.</span><span class="ident" id="6470828">Unix</span><span class="op" id="6470832">(</span><span class="num" id="6470833">1360578949</span><span class="op" id="6470843">,</span>&nbsp;<span class="num" id="6470845">0</span><span class="op" id="6470846">)</span><span class="op" id="6470847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470853">Typeflag</span><span class="op" id="6470861">:</span>&nbsp;<span class="ident" id="6470863">TypeFifo</span><span class="op" id="6470871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470876">}</span><span class="op" id="6470877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470882">fm</span><span class="op" id="6470884">:</span>&nbsp;<span class="num" id="6470886">0600</span>&nbsp;<span class="op" id="6470891">|</span>&nbsp;<span class="ident" id="6470893">os</span><span class="op" id="6470895">.</span><span class="ident" id="6470896">ModeNamedPipe</span><span class="op" id="6470909">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470913">}</span><span class="op" id="6470914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470918">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470936">h</span><span class="op" id="6470937">:</span>&nbsp;<span class="op" id="6470939">&amp;</span><span class="ident" id="6470940">Header</span><span class="op" id="6470946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470952">Name</span><span class="op" id="6470956">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6470962">&#34;bin/su&#34;</span><span class="op" id="6470970">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470976">Mode</span><span class="op" id="6470980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6470986">0755</span>&nbsp;<span class="op" id="6470991">|</span>&nbsp;<span class="ident" id="6470993">c_ISREG</span>&nbsp;<span class="op" id="6471001">|</span>&nbsp;<span class="ident" id="6471003">c_ISUID</span><span class="op" id="6471010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471016">Size</span><span class="op" id="6471020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6471026">23232</span><span class="op" id="6471031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471037">ModTime</span><span class="op" id="6471044">:</span>&nbsp;&nbsp;<span class="ident" id="6471047">time</span><span class="op" id="6471051">.</span><span class="ident" id="6471052">Unix</span><span class="op" id="6471056">(</span><span class="num" id="6471057">1355405093</span><span class="op" id="6471067">,</span>&nbsp;<span class="num" id="6471069">0</span><span class="op" id="6471070">)</span><span class="op" id="6471071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471077">Typeflag</span><span class="op" id="6471085">:</span>&nbsp;<span class="ident" id="6471087">TypeReg</span><span class="op" id="6471094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471099">}</span><span class="op" id="6471100">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471105">fm</span><span class="op" id="6471107">:</span>&nbsp;<span class="num" id="6471109">0755</span>&nbsp;<span class="op" id="6471114">|</span>&nbsp;<span class="ident" id="6471116">os</span><span class="op" id="6471118">.</span><span class="ident" id="6471119">ModeSetuid</span><span class="op" id="6471129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471133">}</span><span class="op" id="6471134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471138">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471157">h</span><span class="op" id="6471158">:</span>&nbsp;<span class="op" id="6471160">&amp;</span><span class="ident" id="6471161">Header</span><span class="op" id="6471167">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471173">Name</span><span class="op" id="6471177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6471183">&#34;group.txt&#34;</span><span class="op" id="6471194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471200">Mode</span><span class="op" id="6471204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6471210">0750</span>&nbsp;<span class="op" id="6471215">|</span>&nbsp;<span class="ident" id="6471217">c_ISREG</span>&nbsp;<span class="op" id="6471225">|</span>&nbsp;<span class="ident" id="6471227">c_ISGID</span><span class="op" id="6471234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471240">Size</span><span class="op" id="6471244">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6471250">0</span><span class="op" id="6471251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471257">ModTime</span><span class="op" id="6471264">:</span>&nbsp;&nbsp;<span class="ident" id="6471267">time</span><span class="op" id="6471271">.</span><span class="ident" id="6471272">Unix</span><span class="op" id="6471276">(</span><span class="num" id="6471277">1360602346</span><span class="op" id="6471287">,</span>&nbsp;<span class="num" id="6471289">0</span><span class="op" id="6471290">)</span><span class="op" id="6471291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471297">Typeflag</span><span class="op" id="6471305">:</span>&nbsp;<span class="ident" id="6471307">TypeReg</span><span class="op" id="6471314">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471319">}</span><span class="op" id="6471320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471325">fm</span><span class="op" id="6471327">:</span>&nbsp;<span class="num" id="6471329">0750</span>&nbsp;<span class="op" id="6471334">|</span>&nbsp;<span class="ident" id="6471336">os</span><span class="op" id="6471338">.</span><span class="ident" id="6471339">ModeSetgid</span><span class="op" id="6471349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471353">}</span><span class="op" id="6471354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471358">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471371">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471376">h</span><span class="op" id="6471377">:</span>&nbsp;<span class="op" id="6471379">&amp;</span><span class="ident" id="6471380">Header</span><span class="op" id="6471386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471392">Name</span><span class="op" id="6471396">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6471402">&#34;sticky.txt&#34;</span><span class="op" id="6471414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471420">Mode</span><span class="op" id="6471424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6471430">0600</span>&nbsp;<span class="op" id="6471435">|</span>&nbsp;<span class="ident" id="6471437">c_ISREG</span>&nbsp;<span class="op" id="6471445">|</span>&nbsp;<span class="ident" id="6471447">c_ISVTX</span><span class="op" id="6471454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471460">Size</span><span class="op" id="6471464">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6471470">7</span><span class="op" id="6471471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471477">ModTime</span><span class="op" id="6471484">:</span>&nbsp;&nbsp;<span class="ident" id="6471487">time</span><span class="op" id="6471491">.</span><span class="ident" id="6471492">Unix</span><span class="op" id="6471496">(</span><span class="num" id="6471497">1360602540</span><span class="op" id="6471507">,</span>&nbsp;<span class="num" id="6471509">0</span><span class="op" id="6471510">)</span><span class="op" id="6471511">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471517">Typeflag</span><span class="op" id="6471525">:</span>&nbsp;<span class="ident" id="6471527">TypeReg</span><span class="op" id="6471534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471539">}</span><span class="op" id="6471540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471545">fm</span><span class="op" id="6471547">:</span>&nbsp;<span class="num" id="6471549">0600</span>&nbsp;<span class="op" id="6471554">|</span>&nbsp;<span class="ident" id="6471556">os</span><span class="op" id="6471558">.</span><span class="ident" id="6471559">ModeSticky</span><span class="op" id="6471569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471573">}</span><span class="op" id="6471574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471577">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471581">for</span>&nbsp;<span class="ident" id="6471585">i</span><span class="op" id="6471586">,</span>&nbsp;<span class="ident" id="6471588">g</span>&nbsp;<span class="op" id="6471590">:=</span>&nbsp;<span class="keyword" id="6471593">range</span>&nbsp;<span class="ident" id="6471599">golden</span>&nbsp;<span class="op" id="6471606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471610">fi</span>&nbsp;<span class="op" id="6471613">:=</span>&nbsp;<span class="ident" id="6471616">g</span><span class="op" id="6471617">.</span><span class="ident" id="6471618">h</span><span class="op" id="6471619">.</span><span class="ident" id="6471620">FileInfo</span><span class="op" id="6471628">(</span><span class="op" id="6471629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471633">h2</span><span class="op" id="6471635">,</span>&nbsp;<span class="ident" id="6471637">err</span>&nbsp;<span class="op" id="6471641">:=</span>&nbsp;<span class="ident" id="6471644">FileInfoHeader</span><span class="op" id="6471658">(</span><span class="ident" id="6471659">fi</span><span class="op" id="6471661">,</span>&nbsp;<span class="string" id="6471663">&#34;&#34;</span><span class="op" id="6471665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471669">if</span>&nbsp;<span class="ident" id="6471672">err</span>&nbsp;<span class="op" id="6471676">!=</span>&nbsp;<span class="ident" id="6471679">nil</span>&nbsp;<span class="op" id="6471683">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471688">t</span><span class="op" id="6471689">.</span><span class="ident" id="6471690">Error</span><span class="op" id="6471695">(</span><span class="ident" id="6471696">err</span><span class="op" id="6471699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471704">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471719">if</span>&nbsp;<span class="ident" id="6471722">strings</span><span class="op" id="6471729">.</span><span class="ident" id="6471730">Contains</span><span class="op" id="6471738">(</span><span class="ident" id="6471739">fi</span><span class="op" id="6471741">.</span><span class="ident" id="6471742">Name</span><span class="op" id="6471746">(</span><span class="op" id="6471747">)</span><span class="op" id="6471748">,</span>&nbsp;<span class="string" id="6471750">&#34;/&#34;</span><span class="op" id="6471753">)</span>&nbsp;<span class="op" id="6471755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471760">t</span><span class="op" id="6471761">.</span><span class="ident" id="6471762">Errorf</span><span class="op" id="6471768">(</span><span class="string" id="6471769">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="6471804">,</span>&nbsp;<span class="ident" id="6471806">g</span><span class="op" id="6471807">.</span><span class="ident" id="6471808">h</span><span class="op" id="6471809">.</span><span class="ident" id="6471810">Name</span><span class="op" id="6471814">,</span>&nbsp;<span class="ident" id="6471816">fi</span><span class="op" id="6471818">.</span><span class="ident" id="6471819">Name</span><span class="op" id="6471823">(</span><span class="op" id="6471824">)</span><span class="op" id="6471825">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471833">name</span>&nbsp;<span class="op" id="6471838">:=</span>&nbsp;<span class="ident" id="6471841">path</span><span class="op" id="6471845">.</span><span class="ident" id="6471846">Base</span><span class="op" id="6471850">(</span><span class="ident" id="6471851">g</span><span class="op" id="6471852">.</span><span class="ident" id="6471853">h</span><span class="op" id="6471854">.</span><span class="ident" id="6471855">Name</span><span class="op" id="6471859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471863">if</span>&nbsp;<span class="ident" id="6471866">fi</span><span class="op" id="6471868">.</span><span class="ident" id="6471869">IsDir</span><span class="op" id="6471874">(</span><span class="op" id="6471875">)</span>&nbsp;<span class="op" id="6471877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471882">name</span>&nbsp;<span class="op" id="6471887">+=</span>&nbsp;<span class="string" id="6471890">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471896">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471900">if</span>&nbsp;<span class="ident" id="6471903">got</span><span class="op" id="6471906">,</span>&nbsp;<span class="ident" id="6471908">want</span>&nbsp;<span class="op" id="6471913">:=</span>&nbsp;<span class="ident" id="6471916">h2</span><span class="op" id="6471918">.</span><span class="ident" id="6471919">Name</span><span class="op" id="6471923">,</span>&nbsp;<span class="ident" id="6471925">name</span><span class="op" id="6471929">;</span>&nbsp;<span class="ident" id="6471931">got</span>&nbsp;<span class="op" id="6471935">!=</span>&nbsp;<span class="ident" id="6471938">want</span>&nbsp;<span class="op" id="6471943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471948">t</span><span class="op" id="6471949">.</span><span class="ident" id="6471950">Errorf</span><span class="op" id="6471956">(</span><span class="string" id="6471957">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6471986">,</span>&nbsp;<span class="ident" id="6471988">i</span><span class="op" id="6471989">,</span>&nbsp;<span class="ident" id="6471991">got</span><span class="op" id="6471994">,</span>&nbsp;<span class="ident" id="6471996">want</span><span class="op" id="6472000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472008">if</span>&nbsp;<span class="ident" id="6472011">got</span><span class="op" id="6472014">,</span>&nbsp;<span class="ident" id="6472016">want</span>&nbsp;<span class="op" id="6472021">:=</span>&nbsp;<span class="ident" id="6472024">h2</span><span class="op" id="6472026">.</span><span class="ident" id="6472027">Size</span><span class="op" id="6472031">,</span>&nbsp;<span class="ident" id="6472033">g</span><span class="op" id="6472034">.</span><span class="ident" id="6472035">h</span><span class="op" id="6472036">.</span><span class="ident" id="6472037">Size</span><span class="op" id="6472041">;</span>&nbsp;<span class="ident" id="6472043">got</span>&nbsp;<span class="op" id="6472047">!=</span>&nbsp;<span class="ident" id="6472050">want</span>&nbsp;<span class="op" id="6472055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472060">t</span><span class="op" id="6472061">.</span><span class="ident" id="6472062">Errorf</span><span class="op" id="6472068">(</span><span class="string" id="6472069">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6472098">,</span>&nbsp;<span class="ident" id="6472100">i</span><span class="op" id="6472101">,</span>&nbsp;<span class="ident" id="6472103">got</span><span class="op" id="6472106">,</span>&nbsp;<span class="ident" id="6472108">want</span><span class="op" id="6472112">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472120">if</span>&nbsp;<span class="ident" id="6472123">got</span><span class="op" id="6472126">,</span>&nbsp;<span class="ident" id="6472128">want</span>&nbsp;<span class="op" id="6472133">:=</span>&nbsp;<span class="ident" id="6472136">h2</span><span class="op" id="6472138">.</span><span class="ident" id="6472139">Mode</span><span class="op" id="6472143">,</span>&nbsp;<span class="ident" id="6472145">g</span><span class="op" id="6472146">.</span><span class="ident" id="6472147">h</span><span class="op" id="6472148">.</span><span class="ident" id="6472149">Mode</span><span class="op" id="6472153">;</span>&nbsp;<span class="ident" id="6472155">got</span>&nbsp;<span class="op" id="6472159">!=</span>&nbsp;<span class="ident" id="6472162">want</span>&nbsp;<span class="op" id="6472167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472172">t</span><span class="op" id="6472173">.</span><span class="ident" id="6472174">Errorf</span><span class="op" id="6472180">(</span><span class="string" id="6472181">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="6472210">,</span>&nbsp;<span class="ident" id="6472212">i</span><span class="op" id="6472213">,</span>&nbsp;<span class="ident" id="6472215">got</span><span class="op" id="6472218">,</span>&nbsp;<span class="ident" id="6472220">want</span><span class="op" id="6472224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472232">if</span>&nbsp;<span class="ident" id="6472235">got</span><span class="op" id="6472238">,</span>&nbsp;<span class="ident" id="6472240">want</span>&nbsp;<span class="op" id="6472245">:=</span>&nbsp;<span class="ident" id="6472248">fi</span><span class="op" id="6472250">.</span><span class="ident" id="6472251">Mode</span><span class="op" id="6472255">(</span><span class="op" id="6472256">)</span><span class="op" id="6472257">,</span>&nbsp;<span class="ident" id="6472259">g</span><span class="op" id="6472260">.</span><span class="ident" id="6472261">fm</span><span class="op" id="6472263">;</span>&nbsp;<span class="ident" id="6472265">got</span>&nbsp;<span class="op" id="6472269">!=</span>&nbsp;<span class="ident" id="6472272">want</span>&nbsp;<span class="op" id="6472277">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472282">t</span><span class="op" id="6472283">.</span><span class="ident" id="6472284">Errorf</span><span class="op" id="6472290">(</span><span class="string" id="6472291">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="6472323">,</span>&nbsp;<span class="ident" id="6472325">i</span><span class="op" id="6472326">,</span>&nbsp;<span class="ident" id="6472328">got</span><span class="op" id="6472331">,</span>&nbsp;<span class="ident" id="6472333">want</span><span class="op" id="6472337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472345">if</span>&nbsp;<span class="ident" id="6472348">got</span><span class="op" id="6472351">,</span>&nbsp;<span class="ident" id="6472353">want</span>&nbsp;<span class="op" id="6472358">:=</span>&nbsp;<span class="ident" id="6472361">h2</span><span class="op" id="6472363">.</span><span class="ident" id="6472364">ModTime</span><span class="op" id="6472371">,</span>&nbsp;<span class="ident" id="6472373">g</span><span class="op" id="6472374">.</span><span class="ident" id="6472375">h</span><span class="op" id="6472376">.</span><span class="ident" id="6472377">ModTime</span><span class="op" id="6472384">;</span>&nbsp;<span class="ident" id="6472386">got</span>&nbsp;<span class="op" id="6472390">!=</span>&nbsp;<span class="ident" id="6472393">want</span>&nbsp;<span class="op" id="6472398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472403">t</span><span class="op" id="6472404">.</span><span class="ident" id="6472405">Errorf</span><span class="op" id="6472411">(</span><span class="string" id="6472412">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6472444">,</span>&nbsp;<span class="ident" id="6472446">i</span><span class="op" id="6472447">,</span>&nbsp;<span class="ident" id="6472449">got</span><span class="op" id="6472452">,</span>&nbsp;<span class="ident" id="6472454">want</span><span class="op" id="6472458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472462">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472466">if</span>&nbsp;<span class="ident" id="6472469">sysh</span><span class="op" id="6472473">,</span>&nbsp;<span class="ident" id="6472475">ok</span>&nbsp;<span class="op" id="6472478">:=</span>&nbsp;<span class="ident" id="6472481">fi</span><span class="op" id="6472483">.</span><span class="ident" id="6472484">Sys</span><span class="op" id="6472487">(</span><span class="op" id="6472488">)</span><span class="op" id="6472489">.</span><span class="op" id="6472490">(</span><span class="op" id="6472491">*</span><span class="ident" id="6472492">Header</span><span class="op" id="6472498">)</span><span class="op" id="6472499">;</span>&nbsp;<span class="op" id="6472501">!</span><span class="ident" id="6472502">ok</span>&nbsp;<span class="op" id="6472505">||</span>&nbsp;<span class="ident" id="6472508">sysh</span>&nbsp;<span class="op" id="6472513">!=</span>&nbsp;<span class="ident" id="6472516">g</span><span class="op" id="6472517">.</span><span class="ident" id="6472518">h</span>&nbsp;<span class="op" id="6472520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472525">t</span><span class="op" id="6472526">.</span><span class="ident" id="6472527">Errorf</span><span class="op" id="6472533">(</span><span class="string" id="6472534">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="6472576">,</span>&nbsp;<span class="ident" id="6472578">i</span><span class="op" id="6472579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472586">}</span><br>
<span class="lineno"></span><span class="op" id="6472588">}</span>
</div>
</body>
</html>
