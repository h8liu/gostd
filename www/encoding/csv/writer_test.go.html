<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8586498">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8586553">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8586607">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8586658">package</span>&nbsp;<span class="ident" id="8586666">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8586671">import</span>&nbsp;<span class="op" id="8586678">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8586681">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8586690">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8586700">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8586710">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8586713">var</span>&nbsp;<span class="ident" id="8586717">writeTests</span>&nbsp;<span class="op" id="8586728">=</span>&nbsp;<span class="op" id="8586730">[</span><span class="op" id="8586731">]</span><span class="keyword" id="8586732">struct</span>&nbsp;<span class="op" id="8586739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586742">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8586750">[</span><span class="op" id="8586751">]</span><span class="op" id="8586752">[</span><span class="op" id="8586753">]</span><span class="builtintype" id="8586754">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586762">Output</span>&nbsp;&nbsp;<span class="builtintype" id="8586770">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8586778">UseCRLF</span>&nbsp;<span class="builtintype" id="8586786">bool</span><br>
<span class="lineno"></span><span class="op" id="8586791">}</span><span class="op" id="8586792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586795">{</span><span class="ident" id="8586796">Input</span><span class="op" id="8586801">:</span>&nbsp;<span class="op" id="8586803">[</span><span class="op" id="8586804">]</span><span class="op" id="8586805">[</span><span class="op" id="8586806">]</span><span class="builtintype" id="8586807">string</span><span class="op" id="8586813">{</span><span class="op" id="8586814">{</span><span class="string" id="8586815">&#34;abc&#34;</span><span class="op" id="8586820">}</span><span class="op" id="8586821">}</span><span class="op" id="8586822">,</span>&nbsp;<span class="ident" id="8586824">Output</span><span class="op" id="8586830">:</span>&nbsp;<span class="string" id="8586832">&#34;abc\n&#34;</span><span class="op" id="8586839">}</span><span class="op" id="8586840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586843">{</span><span class="ident" id="8586844">Input</span><span class="op" id="8586849">:</span>&nbsp;<span class="op" id="8586851">[</span><span class="op" id="8586852">]</span><span class="op" id="8586853">[</span><span class="op" id="8586854">]</span><span class="builtintype" id="8586855">string</span><span class="op" id="8586861">{</span><span class="op" id="8586862">{</span><span class="string" id="8586863">&#34;abc&#34;</span><span class="op" id="8586868">}</span><span class="op" id="8586869">}</span><span class="op" id="8586870">,</span>&nbsp;<span class="ident" id="8586872">Output</span><span class="op" id="8586878">:</span>&nbsp;<span class="string" id="8586880">&#34;abc\r\n&#34;</span><span class="op" id="8586889">,</span>&nbsp;<span class="ident" id="8586891">UseCRLF</span><span class="op" id="8586898">:</span>&nbsp;<span class="ident" id="8586900">true</span><span class="op" id="8586904">}</span><span class="op" id="8586905">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586908">{</span><span class="ident" id="8586909">Input</span><span class="op" id="8586914">:</span>&nbsp;<span class="op" id="8586916">[</span><span class="op" id="8586917">]</span><span class="op" id="8586918">[</span><span class="op" id="8586919">]</span><span class="builtintype" id="8586920">string</span><span class="op" id="8586926">{</span><span class="op" id="8586927">{</span><span class="string" id="8586928">`&#34;abc&#34;`</span><span class="op" id="8586935">}</span><span class="op" id="8586936">}</span><span class="op" id="8586937">,</span>&nbsp;<span class="ident" id="8586939">Output</span><span class="op" id="8586945">:</span>&nbsp;<span class="string" id="8586947">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8586959">+</span>&nbsp;<span class="string" id="8586961">&#34;\n&#34;</span><span class="op" id="8586965">}</span><span class="op" id="8586966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8586969">{</span><span class="ident" id="8586970">Input</span><span class="op" id="8586975">:</span>&nbsp;<span class="op" id="8586977">[</span><span class="op" id="8586978">]</span><span class="op" id="8586979">[</span><span class="op" id="8586980">]</span><span class="builtintype" id="8586981">string</span><span class="op" id="8586987">{</span><span class="op" id="8586988">{</span><span class="string" id="8586989">`a&#34;b`</span><span class="op" id="8586994">}</span><span class="op" id="8586995">}</span><span class="op" id="8586996">,</span>&nbsp;<span class="ident" id="8586998">Output</span><span class="op" id="8587004">:</span>&nbsp;<span class="string" id="8587006">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="8587015">+</span>&nbsp;<span class="string" id="8587017">&#34;\n&#34;</span><span class="op" id="8587021">}</span><span class="op" id="8587022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587025">{</span><span class="ident" id="8587026">Input</span><span class="op" id="8587031">:</span>&nbsp;<span class="op" id="8587033">[</span><span class="op" id="8587034">]</span><span class="op" id="8587035">[</span><span class="op" id="8587036">]</span><span class="builtintype" id="8587037">string</span><span class="op" id="8587043">{</span><span class="op" id="8587044">{</span><span class="string" id="8587045">`&#34;a&#34;b&#34;`</span><span class="op" id="8587052">}</span><span class="op" id="8587053">}</span><span class="op" id="8587054">,</span>&nbsp;<span class="ident" id="8587056">Output</span><span class="op" id="8587062">:</span>&nbsp;<span class="string" id="8587064">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8587077">+</span>&nbsp;<span class="string" id="8587079">&#34;\n&#34;</span><span class="op" id="8587083">}</span><span class="op" id="8587084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587087">{</span><span class="ident" id="8587088">Input</span><span class="op" id="8587093">:</span>&nbsp;<span class="op" id="8587095">[</span><span class="op" id="8587096">]</span><span class="op" id="8587097">[</span><span class="op" id="8587098">]</span><span class="builtintype" id="8587099">string</span><span class="op" id="8587105">{</span><span class="op" id="8587106">{</span><span class="string" id="8587107">&#34;&nbsp;abc&#34;</span><span class="op" id="8587113">}</span><span class="op" id="8587114">}</span><span class="op" id="8587115">,</span>&nbsp;<span class="ident" id="8587117">Output</span><span class="op" id="8587123">:</span>&nbsp;<span class="string" id="8587125">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="8587134">+</span>&nbsp;<span class="string" id="8587136">&#34;\n&#34;</span><span class="op" id="8587140">}</span><span class="op" id="8587141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587144">{</span><span class="ident" id="8587145">Input</span><span class="op" id="8587150">:</span>&nbsp;<span class="op" id="8587152">[</span><span class="op" id="8587153">]</span><span class="op" id="8587154">[</span><span class="op" id="8587155">]</span><span class="builtintype" id="8587156">string</span><span class="op" id="8587162">{</span><span class="op" id="8587163">{</span><span class="string" id="8587164">&#34;abc,def&#34;</span><span class="op" id="8587173">}</span><span class="op" id="8587174">}</span><span class="op" id="8587175">,</span>&nbsp;<span class="ident" id="8587177">Output</span><span class="op" id="8587183">:</span>&nbsp;<span class="string" id="8587185">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="8587197">+</span>&nbsp;<span class="string" id="8587199">&#34;\n&#34;</span><span class="op" id="8587203">}</span><span class="op" id="8587204">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587207">{</span><span class="ident" id="8587208">Input</span><span class="op" id="8587213">:</span>&nbsp;<span class="op" id="8587215">[</span><span class="op" id="8587216">]</span><span class="op" id="8587217">[</span><span class="op" id="8587218">]</span><span class="builtintype" id="8587219">string</span><span class="op" id="8587225">{</span><span class="op" id="8587226">{</span><span class="string" id="8587227">&#34;abc&#34;</span><span class="op" id="8587232">,</span>&nbsp;<span class="string" id="8587234">&#34;def&#34;</span><span class="op" id="8587239">}</span><span class="op" id="8587240">}</span><span class="op" id="8587241">,</span>&nbsp;<span class="ident" id="8587243">Output</span><span class="op" id="8587249">:</span>&nbsp;<span class="string" id="8587251">&#34;abc,def\n&#34;</span><span class="op" id="8587262">}</span><span class="op" id="8587263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587266">{</span><span class="ident" id="8587267">Input</span><span class="op" id="8587272">:</span>&nbsp;<span class="op" id="8587274">[</span><span class="op" id="8587275">]</span><span class="op" id="8587276">[</span><span class="op" id="8587277">]</span><span class="builtintype" id="8587278">string</span><span class="op" id="8587284">{</span><span class="op" id="8587285">{</span><span class="string" id="8587286">&#34;abc&#34;</span><span class="op" id="8587291">}</span><span class="op" id="8587292">,</span>&nbsp;<span class="op" id="8587294">{</span><span class="string" id="8587295">&#34;def&#34;</span><span class="op" id="8587300">}</span><span class="op" id="8587301">}</span><span class="op" id="8587302">,</span>&nbsp;<span class="ident" id="8587304">Output</span><span class="op" id="8587310">:</span>&nbsp;<span class="string" id="8587312">&#34;abc\ndef\n&#34;</span><span class="op" id="8587324">}</span><span class="op" id="8587325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587328">{</span><span class="ident" id="8587329">Input</span><span class="op" id="8587334">:</span>&nbsp;<span class="op" id="8587336">[</span><span class="op" id="8587337">]</span><span class="op" id="8587338">[</span><span class="op" id="8587339">]</span><span class="builtintype" id="8587340">string</span><span class="op" id="8587346">{</span><span class="op" id="8587347">{</span><span class="string" id="8587348">&#34;abc\ndef&#34;</span><span class="op" id="8587358">}</span><span class="op" id="8587359">}</span><span class="op" id="8587360">,</span>&nbsp;<span class="ident" id="8587362">Output</span><span class="op" id="8587368">:</span>&nbsp;<span class="string" id="8587370">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="8587386">}</span><span class="op" id="8587387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587390">{</span><span class="ident" id="8587391">Input</span><span class="op" id="8587396">:</span>&nbsp;<span class="op" id="8587398">[</span><span class="op" id="8587399">]</span><span class="op" id="8587400">[</span><span class="op" id="8587401">]</span><span class="builtintype" id="8587402">string</span><span class="op" id="8587408">{</span><span class="op" id="8587409">{</span><span class="string" id="8587410">&#34;abc\ndef&#34;</span><span class="op" id="8587420">}</span><span class="op" id="8587421">}</span><span class="op" id="8587422">,</span>&nbsp;<span class="ident" id="8587424">Output</span><span class="op" id="8587430">:</span>&nbsp;<span class="string" id="8587432">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="8587452">,</span>&nbsp;<span class="ident" id="8587454">UseCRLF</span><span class="op" id="8587461">:</span>&nbsp;<span class="ident" id="8587463">true</span><span class="op" id="8587467">}</span><span class="op" id="8587468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587471">{</span><span class="ident" id="8587472">Input</span><span class="op" id="8587477">:</span>&nbsp;<span class="op" id="8587479">[</span><span class="op" id="8587480">]</span><span class="op" id="8587481">[</span><span class="op" id="8587482">]</span><span class="builtintype" id="8587483">string</span><span class="op" id="8587489">{</span><span class="op" id="8587490">{</span><span class="string" id="8587491">&#34;abc\rdef&#34;</span><span class="op" id="8587501">}</span><span class="op" id="8587502">}</span><span class="op" id="8587503">,</span>&nbsp;<span class="ident" id="8587505">Output</span><span class="op" id="8587511">:</span>&nbsp;<span class="string" id="8587513">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="8587529">,</span>&nbsp;<span class="ident" id="8587531">UseCRLF</span><span class="op" id="8587538">:</span>&nbsp;<span class="ident" id="8587540">true</span><span class="op" id="8587544">}</span><span class="op" id="8587545">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587548">{</span><span class="ident" id="8587549">Input</span><span class="op" id="8587554">:</span>&nbsp;<span class="op" id="8587556">[</span><span class="op" id="8587557">]</span><span class="op" id="8587558">[</span><span class="op" id="8587559">]</span><span class="builtintype" id="8587560">string</span><span class="op" id="8587566">{</span><span class="op" id="8587567">{</span><span class="string" id="8587568">&#34;abc\rdef&#34;</span><span class="op" id="8587578">}</span><span class="op" id="8587579">}</span><span class="op" id="8587580">,</span>&nbsp;<span class="ident" id="8587582">Output</span><span class="op" id="8587588">:</span>&nbsp;<span class="string" id="8587590">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="8587606">,</span>&nbsp;<span class="ident" id="8587608">UseCRLF</span><span class="op" id="8587615">:</span>&nbsp;<span class="ident" id="8587617">false</span><span class="op" id="8587622">}</span><span class="op" id="8587623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587626">{</span><span class="ident" id="8587627">Input</span><span class="op" id="8587632">:</span>&nbsp;<span class="op" id="8587634">[</span><span class="op" id="8587635">]</span><span class="op" id="8587636">[</span><span class="op" id="8587637">]</span><span class="builtintype" id="8587638">string</span><span class="op" id="8587644">{</span><span class="op" id="8587645">{</span><span class="string" id="8587646">&#34;&#34;</span><span class="op" id="8587648">}</span><span class="op" id="8587649">}</span><span class="op" id="8587650">,</span>&nbsp;<span class="ident" id="8587652">Output</span><span class="op" id="8587658">:</span>&nbsp;<span class="string" id="8587660">&#34;\n&#34;</span><span class="op" id="8587664">}</span><span class="op" id="8587665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587668">{</span><span class="ident" id="8587669">Input</span><span class="op" id="8587674">:</span>&nbsp;<span class="op" id="8587676">[</span><span class="op" id="8587677">]</span><span class="op" id="8587678">[</span><span class="op" id="8587679">]</span><span class="builtintype" id="8587680">string</span><span class="op" id="8587686">{</span><span class="op" id="8587687">{</span><span class="string" id="8587688">&#34;&#34;</span><span class="op" id="8587690">,</span>&nbsp;<span class="string" id="8587692">&#34;&#34;</span><span class="op" id="8587694">}</span><span class="op" id="8587695">}</span><span class="op" id="8587696">,</span>&nbsp;<span class="ident" id="8587698">Output</span><span class="op" id="8587704">:</span>&nbsp;<span class="string" id="8587706">&#34;,\n&#34;</span><span class="op" id="8587711">}</span><span class="op" id="8587712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587715">{</span><span class="ident" id="8587716">Input</span><span class="op" id="8587721">:</span>&nbsp;<span class="op" id="8587723">[</span><span class="op" id="8587724">]</span><span class="op" id="8587725">[</span><span class="op" id="8587726">]</span><span class="builtintype" id="8587727">string</span><span class="op" id="8587733">{</span><span class="op" id="8587734">{</span><span class="string" id="8587735">&#34;&#34;</span><span class="op" id="8587737">,</span>&nbsp;<span class="string" id="8587739">&#34;&#34;</span><span class="op" id="8587741">,</span>&nbsp;<span class="string" id="8587743">&#34;&#34;</span><span class="op" id="8587745">}</span><span class="op" id="8587746">}</span><span class="op" id="8587747">,</span>&nbsp;<span class="ident" id="8587749">Output</span><span class="op" id="8587755">:</span>&nbsp;<span class="string" id="8587757">&#34;,,\n&#34;</span><span class="op" id="8587763">}</span><span class="op" id="8587764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587767">{</span><span class="ident" id="8587768">Input</span><span class="op" id="8587773">:</span>&nbsp;<span class="op" id="8587775">[</span><span class="op" id="8587776">]</span><span class="op" id="8587777">[</span><span class="op" id="8587778">]</span><span class="builtintype" id="8587779">string</span><span class="op" id="8587785">{</span><span class="op" id="8587786">{</span><span class="string" id="8587787">&#34;&#34;</span><span class="op" id="8587789">,</span>&nbsp;<span class="string" id="8587791">&#34;&#34;</span><span class="op" id="8587793">,</span>&nbsp;<span class="string" id="8587795">&#34;a&#34;</span><span class="op" id="8587798">}</span><span class="op" id="8587799">}</span><span class="op" id="8587800">,</span>&nbsp;<span class="ident" id="8587802">Output</span><span class="op" id="8587808">:</span>&nbsp;<span class="string" id="8587810">&#34;,,a\n&#34;</span><span class="op" id="8587817">}</span><span class="op" id="8587818">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587821">{</span><span class="ident" id="8587822">Input</span><span class="op" id="8587827">:</span>&nbsp;<span class="op" id="8587829">[</span><span class="op" id="8587830">]</span><span class="op" id="8587831">[</span><span class="op" id="8587832">]</span><span class="builtintype" id="8587833">string</span><span class="op" id="8587839">{</span><span class="op" id="8587840">{</span><span class="string" id="8587841">&#34;&#34;</span><span class="op" id="8587843">,</span>&nbsp;<span class="string" id="8587845">&#34;a&#34;</span><span class="op" id="8587848">,</span>&nbsp;<span class="string" id="8587850">&#34;&#34;</span><span class="op" id="8587852">}</span><span class="op" id="8587853">}</span><span class="op" id="8587854">,</span>&nbsp;<span class="ident" id="8587856">Output</span><span class="op" id="8587862">:</span>&nbsp;<span class="string" id="8587864">&#34;,a,\n&#34;</span><span class="op" id="8587871">}</span><span class="op" id="8587872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587875">{</span><span class="ident" id="8587876">Input</span><span class="op" id="8587881">:</span>&nbsp;<span class="op" id="8587883">[</span><span class="op" id="8587884">]</span><span class="op" id="8587885">[</span><span class="op" id="8587886">]</span><span class="builtintype" id="8587887">string</span><span class="op" id="8587893">{</span><span class="op" id="8587894">{</span><span class="string" id="8587895">&#34;&#34;</span><span class="op" id="8587897">,</span>&nbsp;<span class="string" id="8587899">&#34;a&#34;</span><span class="op" id="8587902">,</span>&nbsp;<span class="string" id="8587904">&#34;a&#34;</span><span class="op" id="8587907">}</span><span class="op" id="8587908">}</span><span class="op" id="8587909">,</span>&nbsp;<span class="ident" id="8587911">Output</span><span class="op" id="8587917">:</span>&nbsp;<span class="string" id="8587919">&#34;,a,a\n&#34;</span><span class="op" id="8587927">}</span><span class="op" id="8587928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587931">{</span><span class="ident" id="8587932">Input</span><span class="op" id="8587937">:</span>&nbsp;<span class="op" id="8587939">[</span><span class="op" id="8587940">]</span><span class="op" id="8587941">[</span><span class="op" id="8587942">]</span><span class="builtintype" id="8587943">string</span><span class="op" id="8587949">{</span><span class="op" id="8587950">{</span><span class="string" id="8587951">&#34;a&#34;</span><span class="op" id="8587954">,</span>&nbsp;<span class="string" id="8587956">&#34;&#34;</span><span class="op" id="8587958">,</span>&nbsp;<span class="string" id="8587960">&#34;&#34;</span><span class="op" id="8587962">}</span><span class="op" id="8587963">}</span><span class="op" id="8587964">,</span>&nbsp;<span class="ident" id="8587966">Output</span><span class="op" id="8587972">:</span>&nbsp;<span class="string" id="8587974">&#34;a,,\n&#34;</span><span class="op" id="8587981">}</span><span class="op" id="8587982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8587985">{</span><span class="ident" id="8587986">Input</span><span class="op" id="8587991">:</span>&nbsp;<span class="op" id="8587993">[</span><span class="op" id="8587994">]</span><span class="op" id="8587995">[</span><span class="op" id="8587996">]</span><span class="builtintype" id="8587997">string</span><span class="op" id="8588003">{</span><span class="op" id="8588004">{</span><span class="string" id="8588005">&#34;a&#34;</span><span class="op" id="8588008">,</span>&nbsp;<span class="string" id="8588010">&#34;&#34;</span><span class="op" id="8588012">,</span>&nbsp;<span class="string" id="8588014">&#34;a&#34;</span><span class="op" id="8588017">}</span><span class="op" id="8588018">}</span><span class="op" id="8588019">,</span>&nbsp;<span class="ident" id="8588021">Output</span><span class="op" id="8588027">:</span>&nbsp;<span class="string" id="8588029">&#34;a,,a\n&#34;</span><span class="op" id="8588037">}</span><span class="op" id="8588038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588041">{</span><span class="ident" id="8588042">Input</span><span class="op" id="8588047">:</span>&nbsp;<span class="op" id="8588049">[</span><span class="op" id="8588050">]</span><span class="op" id="8588051">[</span><span class="op" id="8588052">]</span><span class="builtintype" id="8588053">string</span><span class="op" id="8588059">{</span><span class="op" id="8588060">{</span><span class="string" id="8588061">&#34;a&#34;</span><span class="op" id="8588064">,</span>&nbsp;<span class="string" id="8588066">&#34;a&#34;</span><span class="op" id="8588069">,</span>&nbsp;<span class="string" id="8588071">&#34;&#34;</span><span class="op" id="8588073">}</span><span class="op" id="8588074">}</span><span class="op" id="8588075">,</span>&nbsp;<span class="ident" id="8588077">Output</span><span class="op" id="8588083">:</span>&nbsp;<span class="string" id="8588085">&#34;a,a,\n&#34;</span><span class="op" id="8588093">}</span><span class="op" id="8588094">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588097">{</span><span class="ident" id="8588098">Input</span><span class="op" id="8588103">:</span>&nbsp;<span class="op" id="8588105">[</span><span class="op" id="8588106">]</span><span class="op" id="8588107">[</span><span class="op" id="8588108">]</span><span class="builtintype" id="8588109">string</span><span class="op" id="8588115">{</span><span class="op" id="8588116">{</span><span class="string" id="8588117">&#34;a&#34;</span><span class="op" id="8588120">,</span>&nbsp;<span class="string" id="8588122">&#34;a&#34;</span><span class="op" id="8588125">,</span>&nbsp;<span class="string" id="8588127">&#34;a&#34;</span><span class="op" id="8588130">}</span><span class="op" id="8588131">}</span><span class="op" id="8588132">,</span>&nbsp;<span class="ident" id="8588134">Output</span><span class="op" id="8588140">:</span>&nbsp;<span class="string" id="8588142">&#34;a,a,a\n&#34;</span><span class="op" id="8588151">}</span><span class="op" id="8588152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588155">{</span><span class="ident" id="8588156">Input</span><span class="op" id="8588161">:</span>&nbsp;<span class="op" id="8588163">[</span><span class="op" id="8588164">]</span><span class="op" id="8588165">[</span><span class="op" id="8588166">]</span><span class="builtintype" id="8588167">string</span><span class="op" id="8588173">{</span><span class="op" id="8588174">{</span><span class="string" id="8588175">`\.`</span><span class="op" id="8588179">}</span><span class="op" id="8588180">}</span><span class="op" id="8588181">,</span>&nbsp;<span class="ident" id="8588183">Output</span><span class="op" id="8588189">:</span>&nbsp;<span class="string" id="8588191">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="8588202">}</span><span class="op" id="8588203">,</span><br>
<span class="lineno"></span><span class="op" id="8588205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8588208">func</span>&nbsp;<span class="ident" id="8588213">TestWrite</span><span class="op" id="8588222">(</span><span class="ident" id="8588223">t</span>&nbsp;<span class="op" id="8588225">*</span><span class="ident" id="8588226"><a href="/encoding/csv/writer_test.go.html#8586700">testing</a></span><span class="op" id="8588233">.</span><span class="ident" id="8588234">T</span><span class="op" id="8588235">)</span>&nbsp;<span class="op" id="8588237">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588240">for</span>&nbsp;<span class="ident" id="8588244">n</span><span class="op" id="8588245">,</span>&nbsp;<span class="ident" id="8588247">tt</span>&nbsp;<span class="op" id="8588250">:=</span>&nbsp;<span class="keyword" id="8588253">range</span>&nbsp;<span class="ident" id="8588259"><a href="/encoding/csv/writer_test.go.html#8586717">writeTests</a></span>&nbsp;<span class="op" id="8588270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588274">b</span>&nbsp;<span class="op" id="8588276">:=</span>&nbsp;<span class="op" id="8588279">&amp;</span><span class="ident" id="8588280"><a href="/encoding/csv/writer_test.go.html#8586681">bytes</a></span><span class="op" id="8588285">.</span><span class="ident" id="8588286">Buffer</span><span class="op" id="8588292">{</span><span class="op" id="8588293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588297">f</span>&nbsp;<span class="op" id="8588299">:=</span>&nbsp;<span class="ident" id="8588302"><a href="/encoding/csv/writer.go.html#6289613">NewWriter</a></span><span class="op" id="8588311">(</span><span class="ident" id="8588312"><a href="/encoding/csv/writer_test.go.html#8588274">b</a></span><span class="op" id="8588313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588317"><a href="/encoding/csv/writer_test.go.html#8588297">f</a></span><span class="op" id="8588318">.</span><span class="ident" id="8588319">UseCRLF</span>&nbsp;<span class="op" id="8588327">=</span>&nbsp;<span class="ident" id="8588329"><a href="/encoding/csv/writer_test.go.html#8588247">tt</a></span><span class="op" id="8588331">.</span><span class="ident" id="8588332">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588342">err</span>&nbsp;<span class="op" id="8588346">:=</span>&nbsp;<span class="ident" id="8588349"><a href="/encoding/csv/writer_test.go.html#8588297">f</a></span><span class="op" id="8588350">.</span><span class="ident" id="8588351">WriteAll</span><span class="op" id="8588359">(</span><span class="ident" id="8588360"><a href="/encoding/csv/writer_test.go.html#8588247">tt</a></span><span class="op" id="8588362">.</span><span class="ident" id="8588363">Input</span><span class="op" id="8588368">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588372">if</span>&nbsp;<span class="ident" id="8588375"><a href="/encoding/csv/writer_test.go.html#8588342">err</a></span>&nbsp;<span class="op" id="8588379">!=</span>&nbsp;<span class="ident" id="8588382">nil</span>&nbsp;<span class="op" id="8588386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588391"><a href="/encoding/csv/writer_test.go.html#8588223">t</a></span><span class="op" id="8588392">.</span><span class="ident" id="8588393">Errorf</span><span class="op" id="8588399">(</span><span class="string" id="8588400">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8588424">,</span>&nbsp;<span class="ident" id="8588426"><a href="/encoding/csv/writer_test.go.html#8588342">err</a></span><span class="op" id="8588429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588437">out</span>&nbsp;<span class="op" id="8588441">:=</span>&nbsp;<span class="ident" id="8588444"><a href="/encoding/csv/writer_test.go.html#8588274">b</a></span><span class="op" id="8588445">.</span><span class="ident" id="8588446">String</span><span class="op" id="8588452">(</span><span class="op" id="8588453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588457">if</span>&nbsp;<span class="ident" id="8588460"><a href="/encoding/csv/writer_test.go.html#8588437">out</a></span>&nbsp;<span class="op" id="8588464">!=</span>&nbsp;<span class="ident" id="8588467"><a href="/encoding/csv/writer_test.go.html#8588247">tt</a></span><span class="op" id="8588469">.</span><span class="ident" id="8588470">Output</span>&nbsp;<span class="op" id="8588477">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588482"><a href="/encoding/csv/writer_test.go.html#8588223">t</a></span><span class="op" id="8588483">.</span><span class="ident" id="8588484">Errorf</span><span class="op" id="8588490">(</span><span class="string" id="8588491">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8588512">,</span>&nbsp;<span class="ident" id="8588514"><a href="/encoding/csv/writer_test.go.html#8588244">n</a></span><span class="op" id="8588515">,</span>&nbsp;<span class="ident" id="8588517"><a href="/encoding/csv/writer_test.go.html#8588437">out</a></span><span class="op" id="8588520">,</span>&nbsp;<span class="ident" id="8588522"><a href="/encoding/csv/writer_test.go.html#8588247">tt</a></span><span class="op" id="8588524">.</span><span class="ident" id="8588525">Output</span><span class="op" id="8588531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588538">}</span><br>
<span class="lineno"></span><span class="op" id="8588540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8588543">type</span>&nbsp;<span class="ident" id="8588548">errorWriter</span>&nbsp;<span class="keyword" id="8588560">struct</span><span class="op" id="8588566">{</span><span class="op" id="8588567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8588570">func</span>&nbsp;<span class="op" id="8588575">(</span><span class="ident" id="8588576">e</span>&nbsp;<span class="ident" id="8588578"><a href="/encoding/csv/writer_test.go.html#8588548">errorWriter</a></span><span class="op" id="8588589">)</span>&nbsp;<span class="ident" id="8588591">Write</span><span class="op" id="8588596">(</span><span class="ident" id="8588597">b</span>&nbsp;<span class="op" id="8588599">[</span><span class="op" id="8588600">]</span><span class="builtintype" id="8588601">byte</span><span class="op" id="8588605">)</span>&nbsp;<span class="op" id="8588607">(</span><span class="builtintype" id="8588608">int</span><span class="op" id="8588611">,</span>&nbsp;<span class="builtintype" id="8588613">error</span><span class="op" id="8588618">)</span>&nbsp;<span class="op" id="8588620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588623">return</span>&nbsp;<span class="num" id="8588630">0</span><span class="op" id="8588631">,</span>&nbsp;<span class="ident" id="8588633"><a href="/encoding/csv/writer_test.go.html#8586690">errors</a></span><span class="op" id="8588639">.</span><span class="ident" id="8588640">New</span><span class="op" id="8588643">(</span><span class="string" id="8588644">&#34;Test&#34;</span><span class="op" id="8588650">)</span><br>
<span class="lineno"></span><span class="op" id="8588652">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8588655">func</span>&nbsp;<span class="ident" id="8588660">TestError</span><span class="op" id="8588669">(</span><span class="ident" id="8588670">t</span>&nbsp;<span class="op" id="8588672">*</span><span class="ident" id="8588673"><a href="/encoding/csv/writer_test.go.html#8586700">testing</a></span><span class="op" id="8588680">.</span><span class="ident" id="8588681">T</span><span class="op" id="8588682">)</span>&nbsp;<span class="op" id="8588684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588687">b</span>&nbsp;<span class="op" id="8588689">:=</span>&nbsp;<span class="op" id="8588692">&amp;</span><span class="ident" id="8588693"><a href="/encoding/csv/writer_test.go.html#8586681">bytes</a></span><span class="op" id="8588698">.</span><span class="ident" id="8588699">Buffer</span><span class="op" id="8588705">{</span><span class="op" id="8588706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588709">f</span>&nbsp;<span class="op" id="8588711">:=</span>&nbsp;<span class="ident" id="8588714"><a href="/encoding/csv/writer.go.html#6289613">NewWriter</a></span><span class="op" id="8588723">(</span><span class="ident" id="8588724"><a href="/encoding/csv/writer_test.go.html#8588687">b</a></span><span class="op" id="8588725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588728"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588729">.</span><span class="ident" id="8588730">Write</span><span class="op" id="8588735">(</span><span class="op" id="8588736">[</span><span class="op" id="8588737">]</span><span class="builtintype" id="8588738">string</span><span class="op" id="8588744">{</span><span class="string" id="8588745">&#34;abc&#34;</span><span class="op" id="8588750">}</span><span class="op" id="8588751">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588754"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588755">.</span><span class="ident" id="8588756">Flush</span><span class="op" id="8588761">(</span><span class="op" id="8588762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588765">err</span>&nbsp;<span class="op" id="8588769">:=</span>&nbsp;<span class="ident" id="8588772"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588773">.</span><span class="ident" id="8588774">Error</span><span class="op" id="8588779">(</span><span class="op" id="8588780">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588784">if</span>&nbsp;<span class="ident" id="8588787"><a href="/encoding/csv/writer_test.go.html#8588765">err</a></span>&nbsp;<span class="op" id="8588791">!=</span>&nbsp;<span class="ident" id="8588794">nil</span>&nbsp;<span class="op" id="8588798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588802"><a href="/encoding/csv/writer_test.go.html#8588670">t</a></span><span class="op" id="8588803">.</span><span class="ident" id="8588804">Errorf</span><span class="op" id="8588810">(</span><span class="string" id="8588811">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8588835">,</span>&nbsp;<span class="ident" id="8588837"><a href="/encoding/csv/writer_test.go.html#8588765">err</a></span><span class="op" id="8588840">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588847"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span>&nbsp;<span class="op" id="8588849">=</span>&nbsp;<span class="ident" id="8588851"><a href="/encoding/csv/writer.go.html#6289613">NewWriter</a></span><span class="op" id="8588860">(</span><span class="ident" id="8588861"><a href="/encoding/csv/writer_test.go.html#8588548">errorWriter</a></span><span class="op" id="8588872">{</span><span class="op" id="8588873">}</span><span class="op" id="8588874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588877"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588878">.</span><span class="ident" id="8588879">Write</span><span class="op" id="8588884">(</span><span class="op" id="8588885">[</span><span class="op" id="8588886">]</span><span class="builtintype" id="8588887">string</span><span class="op" id="8588893">{</span><span class="string" id="8588894">&#34;abc&#34;</span><span class="op" id="8588899">}</span><span class="op" id="8588900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588903"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588904">.</span><span class="ident" id="8588905">Flush</span><span class="op" id="8588910">(</span><span class="op" id="8588911">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588914"><a href="/encoding/csv/writer_test.go.html#8588765">err</a></span>&nbsp;<span class="op" id="8588918">=</span>&nbsp;<span class="ident" id="8588920"><a href="/encoding/csv/writer_test.go.html#8588709">f</a></span><span class="op" id="8588921">.</span><span class="ident" id="8588922">Error</span><span class="op" id="8588927">(</span><span class="op" id="8588928">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8588932">if</span>&nbsp;<span class="ident" id="8588935"><a href="/encoding/csv/writer_test.go.html#8588765">err</a></span>&nbsp;<span class="op" id="8588939">==</span>&nbsp;<span class="ident" id="8588942">nil</span>&nbsp;<span class="op" id="8588946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8588950"><a href="/encoding/csv/writer_test.go.html#8588670">t</a></span><span class="op" id="8588951">.</span><span class="ident" id="8588952">Error</span><span class="op" id="8588957">(</span><span class="string" id="8588958">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="8588983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8588986">}</span><br>
<span class="lineno">85</span><span class="op" id="8588988">}</span>
</div>
</body>
</html>
