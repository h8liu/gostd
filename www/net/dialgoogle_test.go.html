<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6783604">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6783659">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6783713">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6783764">package</span>&nbsp;<span class="ident" id="6783772">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6783777">import</span>&nbsp;<span class="op" id="6783784">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783787">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783795">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783802">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783808">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783819">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6783830">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6783840">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6783843">//&nbsp;If&nbsp;an&nbsp;IPv6&nbsp;tunnel&nbsp;is&nbsp;running,&nbsp;we&nbsp;can&nbsp;try&nbsp;dialing&nbsp;a&nbsp;real&nbsp;IPv6&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="6783916">var</span>&nbsp;<span class="ident" id="6783920">testIPv6</span>&nbsp;<span class="op" id="6783929">=</span>&nbsp;<span class="ident" id="6783931"><a href="/net/dialgoogle_test.go.html#6783787">flag</a></span><span class="op" id="6783935">.</span><span class="ident" id="6783936">Bool</span><span class="op" id="6783940">(</span><span class="string" id="6783941">&#34;ipv6&#34;</span><span class="op" id="6783947">,</span>&nbsp;<span class="ident" id="6783949">false</span><span class="op" id="6783954">,</span>&nbsp;<span class="string" id="6783956">&#34;assume&nbsp;ipv6&nbsp;tunnel&nbsp;is&nbsp;present&#34;</span><span class="op" id="6783987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6783990">func</span>&nbsp;<span class="ident" id="6783995">TestResolveGoogle</span><span class="op" id="6784012">(</span><span class="ident" id="6784013">t</span>&nbsp;<span class="op" id="6784015">*</span><span class="ident" id="6784016"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6784023">.</span><span class="ident" id="6784024">T</span><span class="op" id="6784025">)</span>&nbsp;<span class="op" id="6784027">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784030">if</span>&nbsp;<span class="ident" id="6784033"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6784040">.</span><span class="ident" id="6784041">Short</span><span class="op" id="6784046">(</span><span class="op" id="6784047">)</span>&nbsp;<span class="op" id="6784049">||</span>&nbsp;<span class="op" id="6784052">!</span><span class="op" id="6784053">*</span><span class="ident" id="6784054"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6784067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784071"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784072">.</span><span class="ident" id="6784073">Skip</span><span class="op" id="6784077">(</span><span class="string" id="6784078">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6784119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784126">for</span>&nbsp;<span class="ident" id="6784130">_</span><span class="op" id="6784131">,</span>&nbsp;<span class="ident" id="6784133">network</span>&nbsp;<span class="op" id="6784141">:=</span>&nbsp;<span class="keyword" id="6784144">range</span>&nbsp;<span class="op" id="6784150">[</span><span class="op" id="6784151">]</span><span class="builtintype" id="6784152">string</span><span class="op" id="6784158">{</span><span class="string" id="6784159">&#34;tcp&#34;</span><span class="op" id="6784164">,</span>&nbsp;<span class="string" id="6784166">&#34;tcp4&#34;</span><span class="op" id="6784172">,</span>&nbsp;<span class="string" id="6784174">&#34;tcp6&#34;</span><span class="op" id="6784180">}</span>&nbsp;<span class="op" id="6784182">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784186">addr</span><span class="op" id="6784190">,</span>&nbsp;<span class="ident" id="6784192">err</span>&nbsp;<span class="op" id="6784196">:=</span>&nbsp;<span class="ident" id="6784199"><a href="/net/tcpsock.go.html#2692376">ResolveTCPAddr</a></span><span class="op" id="6784213">(</span><span class="ident" id="6784214"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span><span class="op" id="6784221">,</span>&nbsp;<span class="string" id="6784223">&#34;www.google.com:http&#34;</span><span class="op" id="6784244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784248">if</span>&nbsp;<span class="ident" id="6784251"><a href="/net/dialgoogle_test.go.html#6784192">err</a></span>&nbsp;<span class="op" id="6784255">!=</span>&nbsp;<span class="ident" id="6784258">nil</span>&nbsp;<span class="op" id="6784262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784267">if</span>&nbsp;<span class="op" id="6784270">(</span><span class="ident" id="6784271"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784279">==</span>&nbsp;<span class="string" id="6784282">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6784288">||</span>&nbsp;<span class="ident" id="6784291"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784299">==</span>&nbsp;<span class="string" id="6784302">&#34;tcp4&#34;</span><span class="op" id="6784308">)</span>&nbsp;<span class="op" id="6784310">&amp;&amp;</span>&nbsp;<span class="op" id="6784313">!</span><span class="ident" id="6784314"><a href="/net/ipsock.go.html#2627659">supportsIPv4</a></span>&nbsp;<span class="op" id="6784327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784333"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784334">.</span><span class="ident" id="6784335">Logf</span><span class="op" id="6784339">(</span><span class="string" id="6784340">&#34;ipv4&nbsp;is&nbsp;not&nbsp;supported:&nbsp;%v&#34;</span><span class="op" id="6784367">,</span>&nbsp;<span class="ident" id="6784369"><a href="/net/dialgoogle_test.go.html#6784192">err</a></span><span class="op" id="6784372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784377">}</span>&nbsp;<span class="keyword" id="6784379">else</span>&nbsp;<span class="keyword" id="6784384">if</span>&nbsp;<span class="ident" id="6784387"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784395">==</span>&nbsp;<span class="string" id="6784398">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6784405">&amp;&amp;</span>&nbsp;<span class="op" id="6784408">!</span><span class="ident" id="6784409"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6784422">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784428"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784429">.</span><span class="ident" id="6784430">Logf</span><span class="op" id="6784434">(</span><span class="string" id="6784435">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported:&nbsp;%v&#34;</span><span class="op" id="6784462">,</span>&nbsp;<span class="ident" id="6784464"><a href="/net/dialgoogle_test.go.html#6784192">err</a></span><span class="op" id="6784467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784472">}</span>&nbsp;<span class="keyword" id="6784474">else</span>&nbsp;<span class="op" id="6784479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784485"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784486">.</span><span class="ident" id="6784487">Errorf</span><span class="op" id="6784493">(</span><span class="string" id="6784494">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6784521">,</span>&nbsp;<span class="ident" id="6784523"><a href="/net/dialgoogle_test.go.html#6784192">err</a></span><span class="op" id="6784526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784536">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784551">if</span>&nbsp;<span class="op" id="6784554">(</span><span class="ident" id="6784555"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784563">==</span>&nbsp;<span class="string" id="6784566">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6784572">||</span>&nbsp;<span class="ident" id="6784575"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784583">==</span>&nbsp;<span class="string" id="6784586">&#34;tcp4&#34;</span><span class="op" id="6784592">)</span>&nbsp;<span class="op" id="6784594">&amp;&amp;</span>&nbsp;<span class="ident" id="6784597"><a href="/net/dialgoogle_test.go.html#6784186">addr</a></span><span class="op" id="6784601">.</span><span class="ident" id="6784602">IP</span><span class="op" id="6784604">.</span><span class="ident" id="6784605">To4</span><span class="op" id="6784608">(</span><span class="op" id="6784609">)</span>&nbsp;<span class="op" id="6784611">==</span>&nbsp;<span class="ident" id="6784614">nil</span>&nbsp;<span class="op" id="6784618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784623"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784624">.</span><span class="ident" id="6784625">Errorf</span><span class="op" id="6784631">(</span><span class="string" id="6784632">&#34;got&nbsp;%v;&nbsp;expected&nbsp;an&nbsp;IPv4&nbsp;address&nbsp;on&nbsp;%v&#34;</span><span class="op" id="6784672">,</span>&nbsp;<span class="ident" id="6784674"><a href="/net/dialgoogle_test.go.html#6784186">addr</a></span><span class="op" id="6784678">,</span>&nbsp;<span class="ident" id="6784680"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span><span class="op" id="6784687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784691">}</span>&nbsp;<span class="keyword" id="6784693">else</span>&nbsp;<span class="keyword" id="6784698">if</span>&nbsp;<span class="ident" id="6784701"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span>&nbsp;<span class="op" id="6784709">==</span>&nbsp;<span class="string" id="6784712">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6784719">&amp;&amp;</span>&nbsp;<span class="op" id="6784722">(</span><span class="ident" id="6784723"><a href="/net/dialgoogle_test.go.html#6784186">addr</a></span><span class="op" id="6784727">.</span><span class="ident" id="6784728">IP</span><span class="op" id="6784730">.</span><span class="ident" id="6784731">To16</span><span class="op" id="6784735">(</span><span class="op" id="6784736">)</span>&nbsp;<span class="op" id="6784738">==</span>&nbsp;<span class="ident" id="6784741">nil</span>&nbsp;<span class="op" id="6784745">||</span>&nbsp;<span class="ident" id="6784748"><a href="/net/dialgoogle_test.go.html#6784186">addr</a></span><span class="op" id="6784752">.</span><span class="ident" id="6784753">IP</span><span class="op" id="6784755">.</span><span class="ident" id="6784756">To4</span><span class="op" id="6784759">(</span><span class="op" id="6784760">)</span>&nbsp;<span class="op" id="6784762">!=</span>&nbsp;<span class="ident" id="6784765">nil</span><span class="op" id="6784768">)</span>&nbsp;<span class="op" id="6784770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784775"><a href="/net/dialgoogle_test.go.html#6784013">t</a></span><span class="op" id="6784776">.</span><span class="ident" id="6784777">Errorf</span><span class="op" id="6784783">(</span><span class="string" id="6784784">&#34;got&nbsp;%v;&nbsp;expected&nbsp;an&nbsp;IPv6&nbsp;address&nbsp;on&nbsp;%v&#34;</span><span class="op" id="6784824">,</span>&nbsp;<span class="ident" id="6784826"><a href="/net/dialgoogle_test.go.html#6784186">addr</a></span><span class="op" id="6784830">,</span>&nbsp;<span class="ident" id="6784832"><a href="/net/dialgoogle_test.go.html#6784133">network</a></span><span class="op" id="6784839">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784846">}</span><br>
<span class="lineno"></span><span class="op" id="6784848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6784851">func</span>&nbsp;<span class="ident" id="6784856">TestDialGoogle</span><span class="op" id="6784870">(</span><span class="ident" id="6784871">t</span>&nbsp;<span class="op" id="6784873">*</span><span class="ident" id="6784874"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6784881">.</span><span class="ident" id="6784882">T</span><span class="op" id="6784883">)</span>&nbsp;<span class="op" id="6784885">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6784888">if</span>&nbsp;<span class="ident" id="6784891"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6784898">.</span><span class="ident" id="6784899">Short</span><span class="op" id="6784904">(</span><span class="op" id="6784905">)</span>&nbsp;<span class="op" id="6784907">||</span>&nbsp;<span class="op" id="6784910">!</span><span class="op" id="6784911">*</span><span class="ident" id="6784912"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6784925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784929"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6784930">.</span><span class="ident" id="6784931">Skip</span><span class="op" id="6784935">(</span><span class="string" id="6784936">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6784977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6784980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6784984">d</span>&nbsp;<span class="op" id="6784986">:=</span>&nbsp;<span class="op" id="6784989">&amp;</span><span class="ident" id="6784990"><a href="/net/dial.go.html#2517815">Dialer</a></span><span class="op" id="6784996">{</span><span class="ident" id="6784997">DualStack</span><span class="op" id="6785006">:</span>&nbsp;<span class="ident" id="6785008">true</span><span class="op" id="6785012">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785015">for</span>&nbsp;<span class="ident" id="6785019">_</span><span class="op" id="6785020">,</span>&nbsp;<span class="ident" id="6785022">network</span>&nbsp;<span class="op" id="6785030">:=</span>&nbsp;<span class="keyword" id="6785033">range</span>&nbsp;<span class="op" id="6785039">[</span><span class="op" id="6785040">]</span><span class="builtintype" id="6785041">string</span><span class="op" id="6785047">{</span><span class="string" id="6785048">&#34;tcp&#34;</span><span class="op" id="6785053">,</span>&nbsp;<span class="string" id="6785055">&#34;tcp4&#34;</span><span class="op" id="6785061">,</span>&nbsp;<span class="string" id="6785063">&#34;tcp6&#34;</span><span class="op" id="6785069">}</span>&nbsp;<span class="op" id="6785071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785075">if</span>&nbsp;<span class="ident" id="6785078"><a href="/net/dialgoogle_test.go.html#6785022">network</a></span>&nbsp;<span class="op" id="6785086">==</span>&nbsp;<span class="string" id="6785089">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6785095">&amp;&amp;</span>&nbsp;<span class="op" id="6785098">!</span><span class="ident" id="6785099"><a href="/net/ipsock.go.html#2627659">supportsIPv4</a></span>&nbsp;<span class="op" id="6785112">&amp;&amp;</span>&nbsp;<span class="op" id="6785115">!</span><span class="ident" id="6785116"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6785129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785134"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6785135">.</span><span class="ident" id="6785136">Logf</span><span class="op" id="6785140">(</span><span class="string" id="6785141">&#34;skipping&nbsp;test;&nbsp;both&nbsp;ipv4&nbsp;and&nbsp;ipv6&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6785194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785199">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785210">}</span>&nbsp;<span class="keyword" id="6785212">else</span>&nbsp;<span class="keyword" id="6785217">if</span>&nbsp;<span class="ident" id="6785220"><a href="/net/dialgoogle_test.go.html#6785022">network</a></span>&nbsp;<span class="op" id="6785228">==</span>&nbsp;<span class="string" id="6785231">&#34;tcp4&#34;</span>&nbsp;<span class="op" id="6785238">&amp;&amp;</span>&nbsp;<span class="op" id="6785241">!</span><span class="ident" id="6785242"><a href="/net/ipsock.go.html#2627659">supportsIPv4</a></span>&nbsp;<span class="op" id="6785255">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785260"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6785261">.</span><span class="ident" id="6785262">Logf</span><span class="op" id="6785266">(</span><span class="string" id="6785267">&#34;skipping&nbsp;test;&nbsp;ipv4&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6785305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785310">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785321">}</span>&nbsp;<span class="keyword" id="6785323">else</span>&nbsp;<span class="keyword" id="6785328">if</span>&nbsp;<span class="ident" id="6785331"><a href="/net/dialgoogle_test.go.html#6785022">network</a></span>&nbsp;<span class="op" id="6785339">==</span>&nbsp;<span class="string" id="6785342">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6785349">&amp;&amp;</span>&nbsp;<span class="op" id="6785352">!</span><span class="ident" id="6785353"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6785366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785371"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6785372">.</span><span class="ident" id="6785373">Logf</span><span class="op" id="6785377">(</span><span class="string" id="6785378">&#34;skipping&nbsp;test;&nbsp;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6785416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785421">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785432">}</span>&nbsp;<span class="keyword" id="6785434">else</span>&nbsp;<span class="keyword" id="6785439">if</span>&nbsp;<span class="ident" id="6785442"><a href="/net/dialgoogle_test.go.html#6785022">network</a></span>&nbsp;<span class="op" id="6785450">==</span>&nbsp;<span class="string" id="6785453">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6785460">&amp;&amp;</span>&nbsp;<span class="op" id="6785463">!</span><span class="op" id="6785464">*</span><span class="ident" id="6785465"><a href="/net/dialgoogle_test.go.html#6783920">testIPv6</a></span>&nbsp;<span class="op" id="6785474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785479"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6785480">.</span><span class="ident" id="6785481">Logf</span><span class="op" id="6785485">(</span><span class="string" id="6785486">&#34;test&nbsp;disabled;&nbsp;use&nbsp;-ipv6&nbsp;to&nbsp;enable&#34;</span><span class="op" id="6785522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785527">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6785542">if</span>&nbsp;<span class="ident" id="6785545">c</span><span class="op" id="6785546">,</span>&nbsp;<span class="ident" id="6785548">err</span>&nbsp;<span class="op" id="6785552">:=</span>&nbsp;<span class="ident" id="6785555"><a href="/net/dialgoogle_test.go.html#6784984">d</a></span><span class="op" id="6785556">.</span><span class="ident" id="6785557">Dial</span><span class="op" id="6785561">(</span><span class="ident" id="6785562"><a href="/net/dialgoogle_test.go.html#6785022">network</a></span><span class="op" id="6785569">,</span>&nbsp;<span class="string" id="6785571">&#34;www.google.com:http&#34;</span><span class="op" id="6785592">)</span><span class="op" id="6785593">;</span>&nbsp;<span class="ident" id="6785595"><a href="/net/dialgoogle_test.go.html#6785548">err</a></span>&nbsp;<span class="op" id="6785599">!=</span>&nbsp;<span class="ident" id="6785602">nil</span>&nbsp;<span class="op" id="6785606">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785611"><a href="/net/dialgoogle_test.go.html#6784871">t</a></span><span class="op" id="6785612">.</span><span class="ident" id="6785613">Errorf</span><span class="op" id="6785619">(</span><span class="string" id="6785620">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6785637">,</span>&nbsp;<span class="ident" id="6785639"><a href="/net/dialgoogle_test.go.html#6785548">err</a></span><span class="op" id="6785642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785646">}</span>&nbsp;<span class="keyword" id="6785648">else</span>&nbsp;<span class="op" id="6785653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785658"><a href="/net/dialgoogle_test.go.html#6785545">c</a></span><span class="op" id="6785659">.</span><span class="ident" id="6785660">Close</span><span class="op" id="6785665">(</span><span class="op" id="6785666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6785673">}</span><br>
<span class="lineno">70</span><span class="op" id="6785675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6785678">//&nbsp;fd&nbsp;is&nbsp;already&nbsp;connected&nbsp;to&nbsp;the&nbsp;destination,&nbsp;port&nbsp;80.</span><br>
<span class="lineno"></span><span class="comment" id="6785734">//&nbsp;Run&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;to&nbsp;fetch&nbsp;the&nbsp;appropriate&nbsp;page.</span><br>
<span class="lineno"></span><span class="keyword" id="6785788">func</span>&nbsp;<span class="ident" id="6785793">fetchGoogle</span><span class="op" id="6785804">(</span><span class="ident" id="6785805">t</span>&nbsp;<span class="op" id="6785807">*</span><span class="ident" id="6785808"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6785815">.</span><span class="ident" id="6785816">T</span><span class="op" id="6785817">,</span>&nbsp;<span class="ident" id="6785819">fd</span>&nbsp;<span class="ident" id="6785822"><a href="/net/net.go.html#2652476">Conn</a></span><span class="op" id="6785826">,</span>&nbsp;<span class="ident" id="6785828">network</span><span class="op" id="6785835">,</span>&nbsp;<span class="ident" id="6785837">addr</span>&nbsp;<span class="builtintype" id="6785842">string</span><span class="op" id="6785848">)</span>&nbsp;<span class="op" id="6785850">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785853">req</span>&nbsp;<span class="op" id="6785857">:=</span>&nbsp;<span class="op" id="6785860">[</span><span class="op" id="6785861">]</span><span class="builtintype" id="6785862">byte</span><span class="op" id="6785866">(</span><span class="string" id="6785867">&#34;GET&nbsp;/robots.txt&nbsp;HTTP/1.0\r\nHost:&nbsp;www.google.com\r\n\r\n&#34;</span><span class="op" id="6785925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785928">n</span><span class="op" id="6785929">,</span>&nbsp;<span class="ident" id="6785931">err</span>&nbsp;<span class="op" id="6785935">:=</span>&nbsp;<span class="ident" id="6785938"><a href="/net/dialgoogle_test.go.html#6785819">fd</a></span><span class="op" id="6785940">.</span><span class="ident" id="6785941">Write</span><span class="op" id="6785946">(</span><span class="ident" id="6785947"><a href="/net/dialgoogle_test.go.html#6785853">req</a></span><span class="op" id="6785950">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785954">buf</span>&nbsp;<span class="op" id="6785958">:=</span>&nbsp;<span class="builtinfunc" id="6785961">make</span><span class="op" id="6785965">(</span><span class="op" id="6785966">[</span><span class="op" id="6785967">]</span><span class="builtintype" id="6785968">byte</span><span class="op" id="6785972">,</span>&nbsp;<span class="num" id="6785974">1000</span><span class="op" id="6785978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6785981"><a href="/net/dialgoogle_test.go.html#6785928">n</a></span><span class="op" id="6785982">,</span>&nbsp;<span class="ident" id="6785984"><a href="/net/dialgoogle_test.go.html#6785931">err</a></span>&nbsp;<span class="op" id="6785988">=</span>&nbsp;<span class="ident" id="6785990"><a href="/net/dialgoogle_test.go.html#6783802">io</a></span><span class="op" id="6785992">.</span><span class="ident" id="6785993">ReadFull</span><span class="op" id="6786001">(</span><span class="ident" id="6786002"><a href="/net/dialgoogle_test.go.html#6785819">fd</a></span><span class="op" id="6786004">,</span>&nbsp;<span class="ident" id="6786006"><a href="/net/dialgoogle_test.go.html#6785954">buf</a></span><span class="op" id="6786009">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786013">if</span>&nbsp;<span class="ident" id="6786016"><a href="/net/dialgoogle_test.go.html#6785928">n</a></span>&nbsp;<span class="op" id="6786018">&lt;</span>&nbsp;<span class="num" id="6786020">1000</span>&nbsp;<span class="op" id="6786025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786029"><a href="/net/dialgoogle_test.go.html#6785805">t</a></span><span class="op" id="6786030">.</span><span class="ident" id="6786031">Errorf</span><span class="op" id="6786037">(</span><span class="string" id="6786038">&#34;fetchGoogle:&nbsp;short&nbsp;HTTP&nbsp;read&nbsp;from&nbsp;%s&nbsp;%s&nbsp;-&nbsp;%v&#34;</span><span class="op" id="6786084">,</span>&nbsp;<span class="ident" id="6786086"><a href="/net/dialgoogle_test.go.html#6785828">network</a></span><span class="op" id="6786093">,</span>&nbsp;<span class="ident" id="6786095"><a href="/net/dialgoogle_test.go.html#6785837">addr</a></span><span class="op" id="6786099">,</span>&nbsp;<span class="ident" id="6786101"><a href="/net/dialgoogle_test.go.html#6785931">err</a></span><span class="op" id="6786104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786108">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786116">}</span><br>
<span class="lineno">85</span><span class="op" id="6786118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786121">func</span>&nbsp;<span class="ident" id="6786126">doDial</span><span class="op" id="6786132">(</span><span class="ident" id="6786133">t</span>&nbsp;<span class="op" id="6786135">*</span><span class="ident" id="6786136"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6786143">.</span><span class="ident" id="6786144">T</span><span class="op" id="6786145">,</span>&nbsp;<span class="ident" id="6786147">network</span><span class="op" id="6786154">,</span>&nbsp;<span class="ident" id="6786156">addr</span>&nbsp;<span class="builtintype" id="6786161">string</span><span class="op" id="6786167">)</span>&nbsp;<span class="op" id="6786169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786172">fd</span><span class="op" id="6786174">,</span>&nbsp;<span class="ident" id="6786176">err</span>&nbsp;<span class="op" id="6786180">:=</span>&nbsp;<span class="ident" id="6786183"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6786187">(</span><span class="ident" id="6786188"><a href="/net/dialgoogle_test.go.html#6786147">network</a></span><span class="op" id="6786195">,</span>&nbsp;<span class="ident" id="6786197"><a href="/net/dialgoogle_test.go.html#6786156">addr</a></span><span class="op" id="6786201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786204">if</span>&nbsp;<span class="ident" id="6786207"><a href="/net/dialgoogle_test.go.html#6786176">err</a></span>&nbsp;<span class="op" id="6786211">!=</span>&nbsp;<span class="ident" id="6786214">nil</span>&nbsp;<span class="op" id="6786218">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786222"><a href="/net/dialgoogle_test.go.html#6786133">t</a></span><span class="op" id="6786223">.</span><span class="ident" id="6786224">Errorf</span><span class="op" id="6786230">(</span><span class="string" id="6786231">&#34;Dial(%q,&nbsp;%q,&nbsp;%q)&nbsp;=&nbsp;_,&nbsp;%v&#34;</span><span class="op" id="6786257">,</span>&nbsp;<span class="ident" id="6786259"><a href="/net/dialgoogle_test.go.html#6786147">network</a></span><span class="op" id="6786266">,</span>&nbsp;<span class="string" id="6786268">&#34;&#34;</span><span class="op" id="6786270">,</span>&nbsp;<span class="ident" id="6786272"><a href="/net/dialgoogle_test.go.html#6786156">addr</a></span><span class="op" id="6786276">,</span>&nbsp;<span class="ident" id="6786278"><a href="/net/dialgoogle_test.go.html#6786176">err</a></span><span class="op" id="6786281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786285">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786296"><a href="/net/dialgoogle_test.go.html#6785793">fetchGoogle</a></span><span class="op" id="6786307">(</span><span class="ident" id="6786308"><a href="/net/dialgoogle_test.go.html#6786133">t</a></span><span class="op" id="6786309">,</span>&nbsp;<span class="ident" id="6786311"><a href="/net/dialgoogle_test.go.html#6786172">fd</a></span><span class="op" id="6786313">,</span>&nbsp;<span class="ident" id="6786315"><a href="/net/dialgoogle_test.go.html#6786147">network</a></span><span class="op" id="6786322">,</span>&nbsp;<span class="ident" id="6786324"><a href="/net/dialgoogle_test.go.html#6786156">addr</a></span><span class="op" id="6786328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786331"><a href="/net/dialgoogle_test.go.html#6786172">fd</a></span><span class="op" id="6786333">.</span><span class="ident" id="6786334">Close</span><span class="op" id="6786339">(</span><span class="op" id="6786340">)</span><br>
<span class="lineno">95</span><span class="op" id="6786342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6786345">var</span>&nbsp;<span class="ident" id="6786349">googleaddrsipv4</span>&nbsp;<span class="op" id="6786365">=</span>&nbsp;<span class="op" id="6786367">[</span><span class="op" id="6786368">]</span><span class="builtintype" id="6786369">string</span><span class="op" id="6786375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786378">&#34;%d.%d.%d.%d:80&#34;</span><span class="op" id="6786394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786397">&#34;www.google.com:80&#34;</span><span class="op" id="6786416">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786419">&#34;%d.%d.%d.%d:http&#34;</span><span class="op" id="6786437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786440">&#34;www.google.com:http&#34;</span><span class="op" id="6786461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786464">&#34;%03d.%03d.%03d.%03d:0080&#34;</span><span class="op" id="6786490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786493">&#34;[::ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6786518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786521">&#34;[::ffff:%02x%02x:%02x%02x]:80&#34;</span><span class="op" id="6786552">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786555">&#34;[0:0:0:0:0000:ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6786591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786594">&#34;[0:0:0:0:000000:ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6786632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6786635">&#34;[0:0:0:0::ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6786667">,</span><br>
<span class="lineno"></span><span class="op" id="6786669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="6786672">func</span>&nbsp;<span class="ident" id="6786677">TestDialGoogleIPv4</span><span class="op" id="6786695">(</span><span class="ident" id="6786696">t</span>&nbsp;<span class="op" id="6786698">*</span><span class="ident" id="6786699"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6786706">.</span><span class="ident" id="6786707">T</span><span class="op" id="6786708">)</span>&nbsp;<span class="op" id="6786710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786713">if</span>&nbsp;<span class="ident" id="6786716"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6786723">.</span><span class="ident" id="6786724">Short</span><span class="op" id="6786729">(</span><span class="op" id="6786730">)</span>&nbsp;<span class="op" id="6786732">||</span>&nbsp;<span class="op" id="6786735">!</span><span class="op" id="6786736">*</span><span class="ident" id="6786737"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6786750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786754"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6786755">.</span><span class="ident" id="6786756">Skip</span><span class="op" id="6786760">(</span><span class="string" id="6786761">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6786802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6786809">//&nbsp;Insert&nbsp;an&nbsp;actual&nbsp;IPv4&nbsp;address&nbsp;for&nbsp;google.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6786858">//&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786878">addrs</span><span class="op" id="6786883">,</span>&nbsp;<span class="ident" id="6786885">err</span>&nbsp;<span class="op" id="6786889">:=</span>&nbsp;<span class="ident" id="6786892"><a href="/net/lookup.go.html#2642100">LookupIP</a></span><span class="op" id="6786900">(</span><span class="string" id="6786901">&#34;www.google.com&#34;</span><span class="op" id="6786917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786920">if</span>&nbsp;<span class="ident" id="6786923"><a href="/net/dialgoogle_test.go.html#6786885">err</a></span>&nbsp;<span class="op" id="6786927">!=</span>&nbsp;<span class="ident" id="6786930">nil</span>&nbsp;<span class="op" id="6786934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6786938"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6786939">.</span><span class="ident" id="6786940">Fatalf</span><span class="op" id="6786946">(</span><span class="string" id="6786947">&#34;lookup&nbsp;www.google.com:&nbsp;%v&#34;</span><span class="op" id="6786974">,</span>&nbsp;<span class="ident" id="6786976"><a href="/net/dialgoogle_test.go.html#6786885">err</a></span><span class="op" id="6786979">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6786982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786985">var</span>&nbsp;<span class="ident" id="6786989">ip</span>&nbsp;<span class="ident" id="6786992"><a href="/net/ip.go.html#2604330">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6786996">for</span>&nbsp;<span class="ident" id="6787000">_</span><span class="op" id="6787001">,</span>&nbsp;<span class="ident" id="6787003">addr</span>&nbsp;<span class="op" id="6787008">:=</span>&nbsp;<span class="keyword" id="6787011">range</span>&nbsp;<span class="ident" id="6787017"><a href="/net/dialgoogle_test.go.html#6786878">addrs</a></span>&nbsp;<span class="op" id="6787023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787027">if</span>&nbsp;<span class="ident" id="6787030">x</span>&nbsp;<span class="op" id="6787032">:=</span>&nbsp;<span class="ident" id="6787035"><a href="/net/dialgoogle_test.go.html#6787003">addr</a></span><span class="op" id="6787039">.</span><span class="ident" id="6787040">To4</span><span class="op" id="6787043">(</span><span class="op" id="6787044">)</span><span class="op" id="6787045">;</span>&nbsp;<span class="ident" id="6787047"><a href="/net/dialgoogle_test.go.html#6787030">x</a></span>&nbsp;<span class="op" id="6787049">!=</span>&nbsp;<span class="ident" id="6787052">nil</span>&nbsp;<span class="op" id="6787056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787061"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span>&nbsp;<span class="op" id="6787064">=</span>&nbsp;<span class="ident" id="6787066"><a href="/net/dialgoogle_test.go.html#6787030">x</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787071">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787085">if</span>&nbsp;<span class="ident" id="6787088"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span>&nbsp;<span class="op" id="6787091">==</span>&nbsp;<span class="ident" id="6787094">nil</span>&nbsp;<span class="op" id="6787098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787102"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787103">.</span><span class="ident" id="6787104">Fatalf</span><span class="op" id="6787110">(</span><span class="string" id="6787111">&#34;no&nbsp;IPv4&nbsp;addresses&nbsp;for&nbsp;www.google.com&#34;</span><span class="op" id="6787149">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787156">for</span>&nbsp;<span class="ident" id="6787160">i</span><span class="op" id="6787161">,</span>&nbsp;<span class="ident" id="6787163">s</span>&nbsp;<span class="op" id="6787165">:=</span>&nbsp;<span class="keyword" id="6787168">range</span>&nbsp;<span class="ident" id="6787174"><a href="/net/dialgoogle_test.go.html#6786349">googleaddrsipv4</a></span>&nbsp;<span class="op" id="6787190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787194">if</span>&nbsp;<span class="ident" id="6787197"><a href="/net/dialgoogle_test.go.html#6783808">strings</a></span><span class="op" id="6787204">.</span><span class="ident" id="6787205">Contains</span><span class="op" id="6787213">(</span><span class="ident" id="6787214"><a href="/net/dialgoogle_test.go.html#6787163">s</a></span><span class="op" id="6787215">,</span>&nbsp;<span class="string" id="6787217">&#34;%&#34;</span><span class="op" id="6787220">)</span>&nbsp;<span class="op" id="6787222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787227"><a href="/net/dialgoogle_test.go.html#6786349">googleaddrsipv4</a></span><span class="op" id="6787242">[</span><span class="ident" id="6787243"><a href="/net/dialgoogle_test.go.html#6787160">i</a></span><span class="op" id="6787244">]</span>&nbsp;<span class="op" id="6787246">=</span>&nbsp;<span class="ident" id="6787248"><a href="/net/dialgoogle_test.go.html#6783795">fmt</a></span><span class="op" id="6787251">.</span><span class="ident" id="6787252">Sprintf</span><span class="op" id="6787259">(</span><span class="ident" id="6787260"><a href="/net/dialgoogle_test.go.html#6787163">s</a></span><span class="op" id="6787261">,</span>&nbsp;<span class="ident" id="6787263"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span><span class="op" id="6787265">[</span><span class="num" id="6787266">0</span><span class="op" id="6787267">]</span><span class="op" id="6787268">,</span>&nbsp;<span class="ident" id="6787270"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span><span class="op" id="6787272">[</span><span class="num" id="6787273">1</span><span class="op" id="6787274">]</span><span class="op" id="6787275">,</span>&nbsp;<span class="ident" id="6787277"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span><span class="op" id="6787279">[</span><span class="num" id="6787280">2</span><span class="op" id="6787281">]</span><span class="op" id="6787282">,</span>&nbsp;<span class="ident" id="6787284"><a href="/net/dialgoogle_test.go.html#6786989">ip</a></span><span class="op" id="6787286">[</span><span class="num" id="6787287">3</span><span class="op" id="6787288">]</span><span class="op" id="6787289">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787300">for</span>&nbsp;<span class="ident" id="6787304">i</span>&nbsp;<span class="op" id="6787306">:=</span>&nbsp;<span class="num" id="6787309">0</span><span class="op" id="6787310">;</span>&nbsp;<span class="ident" id="6787312"><a href="/net/dialgoogle_test.go.html#6787304">i</a></span>&nbsp;<span class="op" id="6787314">&lt;</span>&nbsp;<span class="builtinfunc" id="6787316">len</span><span class="op" id="6787319">(</span><span class="ident" id="6787320"><a href="/net/dialgoogle_test.go.html#6786349">googleaddrsipv4</a></span><span class="op" id="6787335">)</span><span class="op" id="6787336">;</span>&nbsp;<span class="ident" id="6787338"><a href="/net/dialgoogle_test.go.html#6787304">i</a></span><span class="op" id="6787339">++</span>&nbsp;<span class="op" id="6787342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787346">addr</span>&nbsp;<span class="op" id="6787351">:=</span>&nbsp;<span class="ident" id="6787354"><a href="/net/dialgoogle_test.go.html#6786349">googleaddrsipv4</a></span><span class="op" id="6787369">[</span><span class="ident" id="6787370"><a href="/net/dialgoogle_test.go.html#6787304">i</a></span><span class="op" id="6787371">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787375">if</span>&nbsp;<span class="ident" id="6787378"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span>&nbsp;<span class="op" id="6787383">==</span>&nbsp;<span class="string" id="6787386">&#34;&#34;</span>&nbsp;<span class="op" id="6787389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787394">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787409"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787410">.</span><span class="ident" id="6787411">Logf</span><span class="op" id="6787415">(</span><span class="string" id="6787416">&#34;--&nbsp;%s&nbsp;--&#34;</span><span class="op" id="6787426">,</span>&nbsp;<span class="ident" id="6787428"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787436"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6787442">(</span><span class="ident" id="6787443"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787444">,</span>&nbsp;<span class="string" id="6787446">&#34;tcp&#34;</span><span class="op" id="6787451">,</span>&nbsp;<span class="ident" id="6787453"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787457">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787461">if</span>&nbsp;<span class="ident" id="6787464"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787468">[</span><span class="num" id="6787469">0</span><span class="op" id="6787470">]</span>&nbsp;<span class="op" id="6787472">!=</span>&nbsp;<span class="string" id="6787475">&#39;[&#39;</span>&nbsp;<span class="op" id="6787479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787484"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6787490">(</span><span class="ident" id="6787491"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787492">,</span>&nbsp;<span class="string" id="6787494">&#34;tcp4&#34;</span><span class="op" id="6787500">,</span>&nbsp;<span class="ident" id="6787502"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6787511">if</span>&nbsp;<span class="ident" id="6787514"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6787527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6787533">//&nbsp;make&nbsp;sure&nbsp;syscall.SocketDisableIPv6&nbsp;flag&nbsp;works.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787588"><a href="/net/dialgoogle_test.go.html#6783819">syscall</a></span><span class="op" id="6787595">.</span><span class="ident" id="6787596">SocketDisableIPv6</span>&nbsp;<span class="op" id="6787614">=</span>&nbsp;<span class="ident" id="6787616">true</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787625"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6787631">(</span><span class="ident" id="6787632"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787633">,</span>&nbsp;<span class="string" id="6787635">&#34;tcp&#34;</span><span class="op" id="6787640">,</span>&nbsp;<span class="ident" id="6787642"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787652"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6787658">(</span><span class="ident" id="6787659"><a href="/net/dialgoogle_test.go.html#6786696">t</a></span><span class="op" id="6787660">,</span>&nbsp;<span class="string" id="6787662">&#34;tcp4&#34;</span><span class="op" id="6787668">,</span>&nbsp;<span class="ident" id="6787670"><a href="/net/dialgoogle_test.go.html#6787346">addr</a></span><span class="op" id="6787674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6787680"><a href="/net/dialgoogle_test.go.html#6783819">syscall</a></span><span class="op" id="6787687">.</span><span class="ident" id="6787688">SocketDisableIPv6</span>&nbsp;<span class="op" id="6787706">=</span>&nbsp;<span class="ident" id="6787708">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787721">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6787724">}</span><br>
<span class="lineno"></span><span class="op" id="6787726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6787729">var</span>&nbsp;<span class="ident" id="6787733">googleaddrsipv6</span>&nbsp;<span class="op" id="6787749">=</span>&nbsp;<span class="op" id="6787751">[</span><span class="op" id="6787752">]</span><span class="builtintype" id="6787753">string</span><span class="op" id="6787759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6787762">&#34;[%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x]:80&#34;</span><span class="op" id="6787840">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6787843">&#34;ipv6.google.com:80&#34;</span><span class="op" id="6787863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6787866">&#34;[%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x]:http&#34;</span><span class="op" id="6787946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6787949">&#34;ipv6.google.com:http&#34;</span><span class="op" id="6787971">,</span><br>
<span class="lineno"></span><span class="op" id="6787973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6787976">func</span>&nbsp;<span class="ident" id="6787981">TestDialGoogleIPv6</span><span class="op" id="6787999">(</span><span class="ident" id="6788000">t</span>&nbsp;<span class="op" id="6788002">*</span><span class="ident" id="6788003"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6788010">.</span><span class="ident" id="6788011">T</span><span class="op" id="6788012">)</span>&nbsp;<span class="op" id="6788014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788017">if</span>&nbsp;<span class="ident" id="6788020"><a href="/net/dialgoogle_test.go.html#6783830">testing</a></span><span class="op" id="6788027">.</span><span class="ident" id="6788028">Short</span><span class="op" id="6788033">(</span><span class="op" id="6788034">)</span>&nbsp;<span class="op" id="6788036">||</span>&nbsp;<span class="op" id="6788039">!</span><span class="op" id="6788040">*</span><span class="ident" id="6788041"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6788054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788058"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788059">.</span><span class="ident" id="6788060">Skip</span><span class="op" id="6788064">(</span><span class="string" id="6788065">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6788106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6788112">//&nbsp;Only&nbsp;run&nbsp;tcp6&nbsp;if&nbsp;the&nbsp;kernel&nbsp;will&nbsp;take&nbsp;it.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788158">if</span>&nbsp;<span class="op" id="6788161">!</span><span class="ident" id="6788162"><a href="/net/ipsock.go.html#2627769">supportsIPv6</a></span>&nbsp;<span class="op" id="6788175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788179"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788180">.</span><span class="ident" id="6788181">Skip</span><span class="op" id="6788185">(</span><span class="string" id="6788186">&#34;skipping&nbsp;test;&nbsp;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6788224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788230">if</span>&nbsp;<span class="op" id="6788233">!</span><span class="op" id="6788234">*</span><span class="ident" id="6788235"><a href="/net/dialgoogle_test.go.html#6783920">testIPv6</a></span>&nbsp;<span class="op" id="6788244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788248"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788249">.</span><span class="ident" id="6788250">Skip</span><span class="op" id="6788254">(</span><span class="string" id="6788255">&#34;test&nbsp;disabled;&nbsp;use&nbsp;-ipv6&nbsp;to&nbsp;enable&#34;</span><span class="op" id="6788291">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6788298">//&nbsp;Insert&nbsp;an&nbsp;actual&nbsp;IPv6&nbsp;address&nbsp;for&nbsp;ipv6.google.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6788352">//&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788372">addrs</span><span class="op" id="6788377">,</span>&nbsp;<span class="ident" id="6788379">err</span>&nbsp;<span class="op" id="6788383">:=</span>&nbsp;<span class="ident" id="6788386"><a href="/net/lookup.go.html#2642100">LookupIP</a></span><span class="op" id="6788394">(</span><span class="string" id="6788395">&#34;ipv6.google.com&#34;</span><span class="op" id="6788412">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788415">if</span>&nbsp;<span class="ident" id="6788418"><a href="/net/dialgoogle_test.go.html#6788379">err</a></span>&nbsp;<span class="op" id="6788422">!=</span>&nbsp;<span class="ident" id="6788425">nil</span>&nbsp;<span class="op" id="6788429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788433"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788434">.</span><span class="ident" id="6788435">Fatalf</span><span class="op" id="6788441">(</span><span class="string" id="6788442">&#34;lookup&nbsp;ipv6.google.com:&nbsp;%v&#34;</span><span class="op" id="6788470">,</span>&nbsp;<span class="ident" id="6788472"><a href="/net/dialgoogle_test.go.html#6788379">err</a></span><span class="op" id="6788475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788481">var</span>&nbsp;<span class="ident" id="6788485">ip</span>&nbsp;<span class="ident" id="6788488"><a href="/net/ip.go.html#2604330">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788492">for</span>&nbsp;<span class="ident" id="6788496">_</span><span class="op" id="6788497">,</span>&nbsp;<span class="ident" id="6788499">addr</span>&nbsp;<span class="op" id="6788504">:=</span>&nbsp;<span class="keyword" id="6788507">range</span>&nbsp;<span class="ident" id="6788513"><a href="/net/dialgoogle_test.go.html#6788372">addrs</a></span>&nbsp;<span class="op" id="6788519">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788523">if</span>&nbsp;<span class="ident" id="6788526">x</span>&nbsp;<span class="op" id="6788528">:=</span>&nbsp;<span class="ident" id="6788531"><a href="/net/dialgoogle_test.go.html#6788499">addr</a></span><span class="op" id="6788535">.</span><span class="ident" id="6788536">To16</span><span class="op" id="6788540">(</span><span class="op" id="6788541">)</span><span class="op" id="6788542">;</span>&nbsp;<span class="ident" id="6788544"><a href="/net/dialgoogle_test.go.html#6788526">x</a></span>&nbsp;<span class="op" id="6788546">!=</span>&nbsp;<span class="ident" id="6788549">nil</span>&nbsp;<span class="op" id="6788553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788558"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span>&nbsp;<span class="op" id="6788561">=</span>&nbsp;<span class="ident" id="6788563"><a href="/net/dialgoogle_test.go.html#6788526">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788568">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788579">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788582">if</span>&nbsp;<span class="ident" id="6788585"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span>&nbsp;<span class="op" id="6788588">==</span>&nbsp;<span class="ident" id="6788591">nil</span>&nbsp;<span class="op" id="6788595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788599"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788600">.</span><span class="ident" id="6788601">Fatalf</span><span class="op" id="6788607">(</span><span class="string" id="6788608">&#34;no&nbsp;IPv6&nbsp;addresses&nbsp;for&nbsp;ipv6.google.com&#34;</span><span class="op" id="6788647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788654">for</span>&nbsp;<span class="ident" id="6788658">i</span><span class="op" id="6788659">,</span>&nbsp;<span class="ident" id="6788661">s</span>&nbsp;<span class="op" id="6788663">:=</span>&nbsp;<span class="keyword" id="6788666">range</span>&nbsp;<span class="ident" id="6788672"><a href="/net/dialgoogle_test.go.html#6787733">googleaddrsipv6</a></span>&nbsp;<span class="op" id="6788688">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788692">if</span>&nbsp;<span class="ident" id="6788695"><a href="/net/dialgoogle_test.go.html#6783808">strings</a></span><span class="op" id="6788702">.</span><span class="ident" id="6788703">Contains</span><span class="op" id="6788711">(</span><span class="ident" id="6788712"><a href="/net/dialgoogle_test.go.html#6788661">s</a></span><span class="op" id="6788713">,</span>&nbsp;<span class="string" id="6788715">&#34;%&#34;</span><span class="op" id="6788718">)</span>&nbsp;<span class="op" id="6788720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788725"><a href="/net/dialgoogle_test.go.html#6787733">googleaddrsipv6</a></span><span class="op" id="6788740">[</span><span class="ident" id="6788741"><a href="/net/dialgoogle_test.go.html#6788658">i</a></span><span class="op" id="6788742">]</span>&nbsp;<span class="op" id="6788744">=</span>&nbsp;<span class="ident" id="6788746"><a href="/net/dialgoogle_test.go.html#6783795">fmt</a></span><span class="op" id="6788749">.</span><span class="ident" id="6788750">Sprintf</span><span class="op" id="6788757">(</span><span class="ident" id="6788758"><a href="/net/dialgoogle_test.go.html#6788661">s</a></span><span class="op" id="6788759">,</span>&nbsp;<span class="ident" id="6788761"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788763">[</span><span class="num" id="6788764">0</span><span class="op" id="6788765">]</span><span class="op" id="6788766">,</span>&nbsp;<span class="ident" id="6788768"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788770">[</span><span class="num" id="6788771">1</span><span class="op" id="6788772">]</span><span class="op" id="6788773">,</span>&nbsp;<span class="ident" id="6788775"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788777">[</span><span class="num" id="6788778">2</span><span class="op" id="6788779">]</span><span class="op" id="6788780">,</span>&nbsp;<span class="ident" id="6788782"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788784">[</span><span class="num" id="6788785">3</span><span class="op" id="6788786">]</span><span class="op" id="6788787">,</span>&nbsp;<span class="ident" id="6788789"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788791">[</span><span class="num" id="6788792">4</span><span class="op" id="6788793">]</span><span class="op" id="6788794">,</span>&nbsp;<span class="ident" id="6788796"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788798">[</span><span class="num" id="6788799">5</span><span class="op" id="6788800">]</span><span class="op" id="6788801">,</span>&nbsp;<span class="ident" id="6788803"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788805">[</span><span class="num" id="6788806">6</span><span class="op" id="6788807">]</span><span class="op" id="6788808">,</span>&nbsp;<span class="ident" id="6788810"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788812">[</span><span class="num" id="6788813">7</span><span class="op" id="6788814">]</span><span class="op" id="6788815">,</span>&nbsp;<span class="ident" id="6788817"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788819">[</span><span class="num" id="6788820">8</span><span class="op" id="6788821">]</span><span class="op" id="6788822">,</span>&nbsp;<span class="ident" id="6788824"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788826">[</span><span class="num" id="6788827">9</span><span class="op" id="6788828">]</span><span class="op" id="6788829">,</span>&nbsp;<span class="ident" id="6788831"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788833">[</span><span class="num" id="6788834">10</span><span class="op" id="6788836">]</span><span class="op" id="6788837">,</span>&nbsp;<span class="ident" id="6788839"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788841">[</span><span class="num" id="6788842">11</span><span class="op" id="6788844">]</span><span class="op" id="6788845">,</span>&nbsp;<span class="ident" id="6788847"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788849">[</span><span class="num" id="6788850">12</span><span class="op" id="6788852">]</span><span class="op" id="6788853">,</span>&nbsp;<span class="ident" id="6788855"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788857">[</span><span class="num" id="6788858">13</span><span class="op" id="6788860">]</span><span class="op" id="6788861">,</span>&nbsp;<span class="ident" id="6788863"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788865">[</span><span class="num" id="6788866">14</span><span class="op" id="6788868">]</span><span class="op" id="6788869">,</span>&nbsp;<span class="ident" id="6788871"><a href="/net/dialgoogle_test.go.html#6788485">ip</a></span><span class="op" id="6788873">[</span><span class="num" id="6788874">15</span><span class="op" id="6788876">]</span><span class="op" id="6788877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788888">for</span>&nbsp;<span class="ident" id="6788892">i</span>&nbsp;<span class="op" id="6788894">:=</span>&nbsp;<span class="num" id="6788897">0</span><span class="op" id="6788898">;</span>&nbsp;<span class="ident" id="6788900"><a href="/net/dialgoogle_test.go.html#6788892">i</a></span>&nbsp;<span class="op" id="6788902">&lt;</span>&nbsp;<span class="builtinfunc" id="6788904">len</span><span class="op" id="6788907">(</span><span class="ident" id="6788908"><a href="/net/dialgoogle_test.go.html#6787733">googleaddrsipv6</a></span><span class="op" id="6788923">)</span><span class="op" id="6788924">;</span>&nbsp;<span class="ident" id="6788926"><a href="/net/dialgoogle_test.go.html#6788892">i</a></span><span class="op" id="6788927">++</span>&nbsp;<span class="op" id="6788930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788934">addr</span>&nbsp;<span class="op" id="6788939">:=</span>&nbsp;<span class="ident" id="6788942"><a href="/net/dialgoogle_test.go.html#6787733">googleaddrsipv6</a></span><span class="op" id="6788957">[</span><span class="ident" id="6788958"><a href="/net/dialgoogle_test.go.html#6788892">i</a></span><span class="op" id="6788959">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788963">if</span>&nbsp;<span class="ident" id="6788966"><a href="/net/dialgoogle_test.go.html#6788934">addr</a></span>&nbsp;<span class="op" id="6788971">==</span>&nbsp;<span class="string" id="6788974">&#34;&#34;</span>&nbsp;<span class="op" id="6788977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6788982">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6788993">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6788997"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6788998">.</span><span class="ident" id="6788999">Logf</span><span class="op" id="6789003">(</span><span class="string" id="6789004">&#34;--&nbsp;%s&nbsp;--&#34;</span><span class="op" id="6789014">,</span>&nbsp;<span class="ident" id="6789016"><a href="/net/dialgoogle_test.go.html#6788934">addr</a></span><span class="op" id="6789020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789024"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6789030">(</span><span class="ident" id="6789031"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6789032">,</span>&nbsp;<span class="string" id="6789034">&#34;tcp&#34;</span><span class="op" id="6789039">,</span>&nbsp;<span class="ident" id="6789041"><a href="/net/dialgoogle_test.go.html#6788934">addr</a></span><span class="op" id="6789045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6789049"><a href="/net/dialgoogle_test.go.html#6786126">doDial</a></span><span class="op" id="6789055">(</span><span class="ident" id="6789056"><a href="/net/dialgoogle_test.go.html#6788000">t</a></span><span class="op" id="6789057">,</span>&nbsp;<span class="string" id="6789059">&#34;tcp6&#34;</span><span class="op" id="6789065">,</span>&nbsp;<span class="ident" id="6789067"><a href="/net/dialgoogle_test.go.html#6788934">addr</a></span><span class="op" id="6789071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6789074">}</span><br>
<span class="lineno"></span><span class="op" id="6789076">}</span>
</div>
</body>
</html>
