<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html" class="current">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7960744">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7960800">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7960854">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7960905">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7960984">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7960993">package</span>&nbsp;<span class="ident" id="7961001">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7961006">import</span>&nbsp;<span class="op" id="7961013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7961016">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7961022">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7961033">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7961044">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7961051">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7961054">var</span>&nbsp;<span class="ident" id="7961058">connTests</span>&nbsp;<span class="op" id="7961068">=</span>&nbsp;<span class="op" id="7961070">[</span><span class="op" id="7961071">]</span><span class="keyword" id="7961072">struct</span>&nbsp;<span class="op" id="7961079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7961082">net</span>&nbsp;&nbsp;<span class="builtintype" id="7961087">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7961095">addr</span>&nbsp;<span class="builtintype" id="7961100">string</span><br>
<span class="lineno">20</span><span class="op" id="7961107">}</span><span class="op" id="7961108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961111">{</span><span class="string" id="7961112">&#34;tcp&#34;</span><span class="op" id="7961117">,</span>&nbsp;<span class="string" id="7961119">&#34;127.0.0.1:0&#34;</span><span class="op" id="7961132">}</span><span class="op" id="7961133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961136">{</span><span class="string" id="7961137">&#34;unix&#34;</span><span class="op" id="7961143">,</span>&nbsp;<span class="ident" id="7961145">testUnixAddr</span><span class="op" id="7961157">(</span><span class="op" id="7961158">)</span><span class="op" id="7961159">}</span><span class="op" id="7961160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961163">{</span><span class="string" id="7961164">&#34;unixpacket&#34;</span><span class="op" id="7961176">,</span>&nbsp;<span class="ident" id="7961178">testUnixAddr</span><span class="op" id="7961190">(</span><span class="op" id="7961191">)</span><span class="op" id="7961192">}</span><span class="op" id="7961193">,</span><br>
<span class="lineno"></span><span class="op" id="7961195">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="7961198">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="7961264">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="7961327">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="7961375">const</span>&nbsp;<span class="ident" id="7961381">someTimeout</span>&nbsp;<span class="op" id="7961393">=</span>&nbsp;<span class="num" id="7961395">10</span>&nbsp;<span class="op" id="7961398">*</span>&nbsp;<span class="ident" id="7961400">time</span><span class="op" id="7961404">.</span><span class="ident" id="7961405">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="7961413">func</span>&nbsp;<span class="ident" id="7961418">TestConnAndListener</span><span class="op" id="7961437">(</span><span class="ident" id="7961438">t</span>&nbsp;<span class="op" id="7961440">*</span><span class="ident" id="7961441">testing</span><span class="op" id="7961448">.</span><span class="ident" id="7961449">T</span><span class="op" id="7961450">)</span>&nbsp;<span class="op" id="7961452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961455">for</span>&nbsp;<span class="ident" id="7961459">_</span><span class="op" id="7961460">,</span>&nbsp;<span class="ident" id="7961462">tt</span>&nbsp;<span class="op" id="7961465">:=</span>&nbsp;<span class="keyword" id="7961468">range</span>&nbsp;<span class="ident" id="7961474">connTests</span>&nbsp;<span class="op" id="7961484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961488">switch</span>&nbsp;<span class="ident" id="7961495">tt</span><span class="op" id="7961497">.</span><span class="ident" id="7961498">net</span>&nbsp;<span class="op" id="7961502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961506">case</span>&nbsp;<span class="string" id="7961511">&#34;unix&#34;</span><span class="op" id="7961517">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961522">switch</span>&nbsp;<span class="ident" id="7961529">runtime</span><span class="op" id="7961536">.</span><span class="ident" id="7961537">GOOS</span>&nbsp;<span class="op" id="7961542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961547">case</span>&nbsp;<span class="string" id="7961552">&#34;nacl&#34;</span><span class="op" id="7961558">,</span>&nbsp;<span class="string" id="7961560">&#34;plan9&#34;</span><span class="op" id="7961567">,</span>&nbsp;<span class="string" id="7961569">&#34;windows&#34;</span><span class="op" id="7961578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961584">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961600">case</span>&nbsp;<span class="string" id="7961605">&#34;unixpacket&#34;</span><span class="op" id="7961617">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961622">switch</span>&nbsp;<span class="ident" id="7961629">runtime</span><span class="op" id="7961636">.</span><span class="ident" id="7961637">GOOS</span>&nbsp;<span class="op" id="7961642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961647">case</span>&nbsp;<span class="string" id="7961652">&#34;android&#34;</span><span class="op" id="7961661">,</span>&nbsp;<span class="string" id="7961663">&#34;darwin&#34;</span><span class="op" id="7961671">,</span>&nbsp;<span class="string" id="7961673">&#34;nacl&#34;</span><span class="op" id="7961679">,</span>&nbsp;<span class="string" id="7961681">&#34;openbsd&#34;</span><span class="op" id="7961690">,</span>&nbsp;<span class="string" id="7961692">&#34;plan9&#34;</span><span class="op" id="7961699">,</span>&nbsp;<span class="string" id="7961701">&#34;windows&#34;</span><span class="op" id="7961710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961716">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961728">case</span>&nbsp;<span class="string" id="7961733">&#34;freebsd&#34;</span><span class="op" id="7961742">:</span>&nbsp;<span class="comment" id="7961744">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961788">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7961809">ln</span><span class="op" id="7961811">,</span>&nbsp;<span class="ident" id="7961813">err</span>&nbsp;<span class="op" id="7961817">:=</span>&nbsp;<span class="ident" id="7961820">Listen</span><span class="op" id="7961826">(</span><span class="ident" id="7961827">tt</span><span class="op" id="7961829">.</span><span class="ident" id="7961830">net</span><span class="op" id="7961833">,</span>&nbsp;<span class="ident" id="7961835">tt</span><span class="op" id="7961837">.</span><span class="ident" id="7961838">addr</span><span class="op" id="7961842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961846">if</span>&nbsp;<span class="ident" id="7961849">err</span>&nbsp;<span class="op" id="7961853">!=</span>&nbsp;<span class="ident" id="7961856">nil</span>&nbsp;<span class="op" id="7961860">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7961865">t</span><span class="op" id="7961866">.</span><span class="ident" id="7961867">Fatalf</span><span class="op" id="7961873">(</span><span class="string" id="7961874">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7961893">,</span>&nbsp;<span class="ident" id="7961895">err</span><span class="op" id="7961898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7961902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961906">defer</span>&nbsp;<span class="keyword" id="7961912">func</span><span class="op" id="7961916">(</span><span class="ident" id="7961917">ln</span>&nbsp;<span class="ident" id="7961920">Listener</span><span class="op" id="7961928">,</span>&nbsp;<span class="ident" id="7961930">net</span><span class="op" id="7961933">,</span>&nbsp;<span class="ident" id="7961935">addr</span>&nbsp;<span class="builtintype" id="7961940">string</span><span class="op" id="7961946">)</span>&nbsp;<span class="op" id="7961948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7961953">ln</span><span class="op" id="7961955">.</span><span class="ident" id="7961956">Close</span><span class="op" id="7961961">(</span><span class="op" id="7961962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961967">switch</span>&nbsp;<span class="ident" id="7961974">net</span>&nbsp;<span class="op" id="7961978">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7961983">case</span>&nbsp;<span class="string" id="7961988">&#34;unix&#34;</span><span class="op" id="7961994">,</span>&nbsp;<span class="string" id="7961996">&#34;unixpacket&#34;</span><span class="op" id="7962008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962014">os</span><span class="op" id="7962016">.</span><span class="ident" id="7962017">Remove</span><span class="op" id="7962023">(</span><span class="ident" id="7962024">addr</span><span class="op" id="7962028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962037">}</span><span class="op" id="7962038">(</span><span class="ident" id="7962039">ln</span><span class="op" id="7962041">,</span>&nbsp;<span class="ident" id="7962043">tt</span><span class="op" id="7962045">.</span><span class="ident" id="7962046">net</span><span class="op" id="7962049">,</span>&nbsp;<span class="ident" id="7962051">tt</span><span class="op" id="7962053">.</span><span class="ident" id="7962054">addr</span><span class="op" id="7962058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962062">if</span>&nbsp;<span class="ident" id="7962065">ln</span><span class="op" id="7962067">.</span><span class="ident" id="7962068">Addr</span><span class="op" id="7962072">(</span><span class="op" id="7962073">)</span><span class="op" id="7962074">.</span><span class="ident" id="7962075">Network</span><span class="op" id="7962082">(</span><span class="op" id="7962083">)</span>&nbsp;<span class="op" id="7962085">!=</span>&nbsp;<span class="ident" id="7962088">tt</span><span class="op" id="7962090">.</span><span class="ident" id="7962091">net</span>&nbsp;<span class="op" id="7962095">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962100">t</span><span class="op" id="7962101">.</span><span class="ident" id="7962102">Fatalf</span><span class="op" id="7962108">(</span><span class="string" id="7962109">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7962130">,</span>&nbsp;<span class="ident" id="7962132">ln</span><span class="op" id="7962134">.</span><span class="ident" id="7962135">Addr</span><span class="op" id="7962139">(</span><span class="op" id="7962140">)</span><span class="op" id="7962141">.</span><span class="ident" id="7962142">Network</span><span class="op" id="7962149">(</span><span class="op" id="7962150">)</span><span class="op" id="7962151">,</span>&nbsp;<span class="ident" id="7962153">tt</span><span class="op" id="7962155">.</span><span class="ident" id="7962156">net</span><span class="op" id="7962159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962168">done</span>&nbsp;<span class="op" id="7962173">:=</span>&nbsp;<span class="builtinfunc" id="7962176">make</span><span class="op" id="7962180">(</span><span class="keyword" id="7962181">chan</span>&nbsp;<span class="builtintype" id="7962186">int</span><span class="op" id="7962189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962193">go</span>&nbsp;<span class="ident" id="7962196">transponder</span><span class="op" id="7962207">(</span><span class="ident" id="7962208">t</span><span class="op" id="7962209">,</span>&nbsp;<span class="ident" id="7962211">ln</span><span class="op" id="7962213">,</span>&nbsp;<span class="ident" id="7962215">done</span><span class="op" id="7962219">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962224">c</span><span class="op" id="7962225">,</span>&nbsp;<span class="ident" id="7962227">err</span>&nbsp;<span class="op" id="7962231">:=</span>&nbsp;<span class="ident" id="7962234">Dial</span><span class="op" id="7962238">(</span><span class="ident" id="7962239">tt</span><span class="op" id="7962241">.</span><span class="ident" id="7962242">net</span><span class="op" id="7962245">,</span>&nbsp;<span class="ident" id="7962247">ln</span><span class="op" id="7962249">.</span><span class="ident" id="7962250">Addr</span><span class="op" id="7962254">(</span><span class="op" id="7962255">)</span><span class="op" id="7962256">.</span><span class="ident" id="7962257">String</span><span class="op" id="7962263">(</span><span class="op" id="7962264">)</span><span class="op" id="7962265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962269">if</span>&nbsp;<span class="ident" id="7962272">err</span>&nbsp;<span class="op" id="7962276">!=</span>&nbsp;<span class="ident" id="7962279">nil</span>&nbsp;<span class="op" id="7962283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962288">t</span><span class="op" id="7962289">.</span><span class="ident" id="7962290">Fatalf</span><span class="op" id="7962296">(</span><span class="string" id="7962297">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7962314">,</span>&nbsp;<span class="ident" id="7962316">err</span><span class="op" id="7962319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962323">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962327">defer</span>&nbsp;<span class="ident" id="7962333">c</span><span class="op" id="7962334">.</span><span class="ident" id="7962335">Close</span><span class="op" id="7962340">(</span><span class="op" id="7962341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962345">if</span>&nbsp;<span class="ident" id="7962348">c</span><span class="op" id="7962349">.</span><span class="ident" id="7962350">LocalAddr</span><span class="op" id="7962359">(</span><span class="op" id="7962360">)</span><span class="op" id="7962361">.</span><span class="ident" id="7962362">Network</span><span class="op" id="7962369">(</span><span class="op" id="7962370">)</span>&nbsp;<span class="op" id="7962372">!=</span>&nbsp;<span class="ident" id="7962375">tt</span><span class="op" id="7962377">.</span><span class="ident" id="7962378">net</span>&nbsp;<span class="op" id="7962382">||</span>&nbsp;<span class="ident" id="7962385">c</span><span class="op" id="7962386">.</span><span class="ident" id="7962387">LocalAddr</span><span class="op" id="7962396">(</span><span class="op" id="7962397">)</span><span class="op" id="7962398">.</span><span class="ident" id="7962399">Network</span><span class="op" id="7962406">(</span><span class="op" id="7962407">)</span>&nbsp;<span class="op" id="7962409">!=</span>&nbsp;<span class="ident" id="7962412">tt</span><span class="op" id="7962414">.</span><span class="ident" id="7962415">net</span>&nbsp;<span class="op" id="7962419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962424">t</span><span class="op" id="7962425">.</span><span class="ident" id="7962426">Fatalf</span><span class="op" id="7962432">(</span><span class="string" id="7962433">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7962462">,</span>&nbsp;<span class="ident" id="7962464">c</span><span class="op" id="7962465">.</span><span class="ident" id="7962466">LocalAddr</span><span class="op" id="7962475">(</span><span class="op" id="7962476">)</span><span class="op" id="7962477">.</span><span class="ident" id="7962478">Network</span><span class="op" id="7962485">(</span><span class="op" id="7962486">)</span><span class="op" id="7962487">,</span>&nbsp;<span class="ident" id="7962489">c</span><span class="op" id="7962490">.</span><span class="ident" id="7962491">RemoteAddr</span><span class="op" id="7962501">(</span><span class="op" id="7962502">)</span><span class="op" id="7962503">.</span><span class="ident" id="7962504">Network</span><span class="op" id="7962511">(</span><span class="op" id="7962512">)</span><span class="op" id="7962513">,</span>&nbsp;<span class="ident" id="7962515">tt</span><span class="op" id="7962517">.</span><span class="ident" id="7962518">net</span><span class="op" id="7962521">,</span>&nbsp;<span class="ident" id="7962523">tt</span><span class="op" id="7962525">.</span><span class="ident" id="7962526">net</span><span class="op" id="7962529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962537">c</span><span class="op" id="7962538">.</span><span class="ident" id="7962539">SetDeadline</span><span class="op" id="7962550">(</span><span class="ident" id="7962551">time</span><span class="op" id="7962555">.</span><span class="ident" id="7962556">Now</span><span class="op" id="7962559">(</span><span class="op" id="7962560">)</span><span class="op" id="7962561">.</span><span class="ident" id="7962562">Add</span><span class="op" id="7962565">(</span><span class="ident" id="7962566">someTimeout</span><span class="op" id="7962577">)</span><span class="op" id="7962578">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962582">c</span><span class="op" id="7962583">.</span><span class="ident" id="7962584">SetReadDeadline</span><span class="op" id="7962599">(</span><span class="ident" id="7962600">time</span><span class="op" id="7962604">.</span><span class="ident" id="7962605">Now</span><span class="op" id="7962608">(</span><span class="op" id="7962609">)</span><span class="op" id="7962610">.</span><span class="ident" id="7962611">Add</span><span class="op" id="7962614">(</span><span class="ident" id="7962615">someTimeout</span><span class="op" id="7962626">)</span><span class="op" id="7962627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962631">c</span><span class="op" id="7962632">.</span><span class="ident" id="7962633">SetWriteDeadline</span><span class="op" id="7962649">(</span><span class="ident" id="7962650">time</span><span class="op" id="7962654">.</span><span class="ident" id="7962655">Now</span><span class="op" id="7962658">(</span><span class="op" id="7962659">)</span><span class="op" id="7962660">.</span><span class="ident" id="7962661">Add</span><span class="op" id="7962664">(</span><span class="ident" id="7962665">someTimeout</span><span class="op" id="7962676">)</span><span class="op" id="7962677">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962682">if</span>&nbsp;<span class="ident" id="7962685">_</span><span class="op" id="7962686">,</span>&nbsp;<span class="ident" id="7962688">err</span>&nbsp;<span class="op" id="7962692">:=</span>&nbsp;<span class="ident" id="7962695">c</span><span class="op" id="7962696">.</span><span class="ident" id="7962697">Write</span><span class="op" id="7962702">(</span><span class="op" id="7962703">[</span><span class="op" id="7962704">]</span><span class="builtintype" id="7962705">byte</span><span class="op" id="7962709">(</span><span class="string" id="7962710">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="7962721">)</span><span class="op" id="7962722">)</span><span class="op" id="7962723">;</span>&nbsp;<span class="ident" id="7962725">err</span>&nbsp;<span class="op" id="7962729">!=</span>&nbsp;<span class="ident" id="7962732">nil</span>&nbsp;<span class="op" id="7962736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962741">t</span><span class="op" id="7962742">.</span><span class="ident" id="7962743">Fatalf</span><span class="op" id="7962749">(</span><span class="string" id="7962750">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7962773">,</span>&nbsp;<span class="ident" id="7962775">err</span><span class="op" id="7962778">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962786">rb</span>&nbsp;<span class="op" id="7962789">:=</span>&nbsp;<span class="builtinfunc" id="7962792">make</span><span class="op" id="7962796">(</span><span class="op" id="7962797">[</span><span class="op" id="7962798">]</span><span class="builtintype" id="7962799">byte</span><span class="op" id="7962803">,</span>&nbsp;<span class="num" id="7962805">128</span><span class="op" id="7962808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962812">if</span>&nbsp;<span class="ident" id="7962815">_</span><span class="op" id="7962816">,</span>&nbsp;<span class="ident" id="7962818">err</span>&nbsp;<span class="op" id="7962822">:=</span>&nbsp;<span class="ident" id="7962825">c</span><span class="op" id="7962826">.</span><span class="ident" id="7962827">Read</span><span class="op" id="7962831">(</span><span class="ident" id="7962832">rb</span><span class="op" id="7962834">)</span><span class="op" id="7962835">;</span>&nbsp;<span class="ident" id="7962837">err</span>&nbsp;<span class="op" id="7962841">!=</span>&nbsp;<span class="ident" id="7962844">nil</span>&nbsp;<span class="op" id="7962848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7962853">t</span><span class="op" id="7962854">.</span><span class="ident" id="7962855">Fatalf</span><span class="op" id="7962861">(</span><span class="string" id="7962862">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7962884">,</span>&nbsp;<span class="ident" id="7962886">err</span><span class="op" id="7962889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962893">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962898">&lt;-</span><span class="ident" id="7962900">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7962906">}</span><br>
<span class="lineno"></span><span class="op" id="7962908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7962911">func</span>&nbsp;<span class="ident" id="7962916">transponder</span><span class="op" id="7962927">(</span><span class="ident" id="7962928">t</span>&nbsp;<span class="op" id="7962930">*</span><span class="ident" id="7962931">testing</span><span class="op" id="7962938">.</span><span class="ident" id="7962939">T</span><span class="op" id="7962940">,</span>&nbsp;<span class="ident" id="7962942">ln</span>&nbsp;<span class="ident" id="7962945">Listener</span><span class="op" id="7962953">,</span>&nbsp;<span class="ident" id="7962955">done</span>&nbsp;<span class="keyword" id="7962960">chan</span><span class="op" id="7962964">&lt;-</span>&nbsp;<span class="builtintype" id="7962967">int</span><span class="op" id="7962970">)</span>&nbsp;<span class="op" id="7962972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7962975">defer</span>&nbsp;<span class="keyword" id="7962981">func</span><span class="op" id="7962985">(</span><span class="op" id="7962986">)</span>&nbsp;<span class="op" id="7962988">{</span>&nbsp;<span class="ident" id="7962990">done</span>&nbsp;<span class="op" id="7962995">&lt;-</span>&nbsp;<span class="num" id="7962998">1</span>&nbsp;<span class="op" id="7963000">}</span><span class="op" id="7963001">(</span><span class="op" id="7963002">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963006">switch</span>&nbsp;<span class="ident" id="7963013">ln</span>&nbsp;<span class="op" id="7963016">:=</span>&nbsp;<span class="ident" id="7963019">ln</span><span class="op" id="7963021">.</span><span class="op" id="7963022">(</span><span class="keyword" id="7963023">type</span><span class="op" id="7963027">)</span>&nbsp;<span class="op" id="7963029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963032">case</span>&nbsp;<span class="op" id="7963037">*</span><span class="ident" id="7963038">TCPListener</span><span class="op" id="7963049">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963053">ln</span><span class="op" id="7963055">.</span><span class="ident" id="7963056">SetDeadline</span><span class="op" id="7963067">(</span><span class="ident" id="7963068">time</span><span class="op" id="7963072">.</span><span class="ident" id="7963073">Now</span><span class="op" id="7963076">(</span><span class="op" id="7963077">)</span><span class="op" id="7963078">.</span><span class="ident" id="7963079">Add</span><span class="op" id="7963082">(</span><span class="ident" id="7963083">someTimeout</span><span class="op" id="7963094">)</span><span class="op" id="7963095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963098">case</span>&nbsp;<span class="op" id="7963103">*</span><span class="ident" id="7963104">UnixListener</span><span class="op" id="7963116">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963120">ln</span><span class="op" id="7963122">.</span><span class="ident" id="7963123">SetDeadline</span><span class="op" id="7963134">(</span><span class="ident" id="7963135">time</span><span class="op" id="7963139">.</span><span class="ident" id="7963140">Now</span><span class="op" id="7963143">(</span><span class="op" id="7963144">)</span><span class="op" id="7963145">.</span><span class="ident" id="7963146">Add</span><span class="op" id="7963149">(</span><span class="ident" id="7963150">someTimeout</span><span class="op" id="7963161">)</span><span class="op" id="7963162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7963165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963168">c</span><span class="op" id="7963169">,</span>&nbsp;<span class="ident" id="7963171">err</span>&nbsp;<span class="op" id="7963175">:=</span>&nbsp;<span class="ident" id="7963178">ln</span><span class="op" id="7963180">.</span><span class="ident" id="7963181">Accept</span><span class="op" id="7963187">(</span><span class="op" id="7963188">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963191">if</span>&nbsp;<span class="ident" id="7963194">err</span>&nbsp;<span class="op" id="7963198">!=</span>&nbsp;<span class="ident" id="7963201">nil</span>&nbsp;<span class="op" id="7963205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963209">t</span><span class="op" id="7963210">.</span><span class="ident" id="7963211">Errorf</span><span class="op" id="7963217">(</span><span class="string" id="7963218">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7963246">,</span>&nbsp;<span class="ident" id="7963248">err</span><span class="op" id="7963251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963255">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7963263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963266">defer</span>&nbsp;<span class="ident" id="7963272">c</span><span class="op" id="7963273">.</span><span class="ident" id="7963274">Close</span><span class="op" id="7963279">(</span><span class="op" id="7963280">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963283">network</span>&nbsp;<span class="op" id="7963291">:=</span>&nbsp;<span class="ident" id="7963294">ln</span><span class="op" id="7963296">.</span><span class="ident" id="7963297">Addr</span><span class="op" id="7963301">(</span><span class="op" id="7963302">)</span><span class="op" id="7963303">.</span><span class="ident" id="7963304">Network</span><span class="op" id="7963311">(</span><span class="op" id="7963312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963315">if</span>&nbsp;<span class="ident" id="7963318">c</span><span class="op" id="7963319">.</span><span class="ident" id="7963320">LocalAddr</span><span class="op" id="7963329">(</span><span class="op" id="7963330">)</span><span class="op" id="7963331">.</span><span class="ident" id="7963332">Network</span><span class="op" id="7963339">(</span><span class="op" id="7963340">)</span>&nbsp;<span class="op" id="7963342">!=</span>&nbsp;<span class="ident" id="7963345">network</span>&nbsp;<span class="op" id="7963353">||</span>&nbsp;<span class="ident" id="7963356">c</span><span class="op" id="7963357">.</span><span class="ident" id="7963358">LocalAddr</span><span class="op" id="7963367">(</span><span class="op" id="7963368">)</span><span class="op" id="7963369">.</span><span class="ident" id="7963370">Network</span><span class="op" id="7963377">(</span><span class="op" id="7963378">)</span>&nbsp;<span class="op" id="7963380">!=</span>&nbsp;<span class="ident" id="7963383">network</span>&nbsp;<span class="op" id="7963391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963395">t</span><span class="op" id="7963396">.</span><span class="ident" id="7963397">Errorf</span><span class="op" id="7963403">(</span><span class="string" id="7963404">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7963433">,</span>&nbsp;<span class="ident" id="7963435">c</span><span class="op" id="7963436">.</span><span class="ident" id="7963437">LocalAddr</span><span class="op" id="7963446">(</span><span class="op" id="7963447">)</span><span class="op" id="7963448">.</span><span class="ident" id="7963449">Network</span><span class="op" id="7963456">(</span><span class="op" id="7963457">)</span><span class="op" id="7963458">,</span>&nbsp;<span class="ident" id="7963460">c</span><span class="op" id="7963461">.</span><span class="ident" id="7963462">RemoteAddr</span><span class="op" id="7963472">(</span><span class="op" id="7963473">)</span><span class="op" id="7963474">.</span><span class="ident" id="7963475">Network</span><span class="op" id="7963482">(</span><span class="op" id="7963483">)</span><span class="op" id="7963484">,</span>&nbsp;<span class="ident" id="7963486">network</span><span class="op" id="7963493">,</span>&nbsp;<span class="ident" id="7963495">network</span><span class="op" id="7963502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963506">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7963514">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963517">c</span><span class="op" id="7963518">.</span><span class="ident" id="7963519">SetDeadline</span><span class="op" id="7963530">(</span><span class="ident" id="7963531">time</span><span class="op" id="7963535">.</span><span class="ident" id="7963536">Now</span><span class="op" id="7963539">(</span><span class="op" id="7963540">)</span><span class="op" id="7963541">.</span><span class="ident" id="7963542">Add</span><span class="op" id="7963545">(</span><span class="ident" id="7963546">someTimeout</span><span class="op" id="7963557">)</span><span class="op" id="7963558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963561">c</span><span class="op" id="7963562">.</span><span class="ident" id="7963563">SetReadDeadline</span><span class="op" id="7963578">(</span><span class="ident" id="7963579">time</span><span class="op" id="7963583">.</span><span class="ident" id="7963584">Now</span><span class="op" id="7963587">(</span><span class="op" id="7963588">)</span><span class="op" id="7963589">.</span><span class="ident" id="7963590">Add</span><span class="op" id="7963593">(</span><span class="ident" id="7963594">someTimeout</span><span class="op" id="7963605">)</span><span class="op" id="7963606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963609">c</span><span class="op" id="7963610">.</span><span class="ident" id="7963611">SetWriteDeadline</span><span class="op" id="7963627">(</span><span class="ident" id="7963628">time</span><span class="op" id="7963632">.</span><span class="ident" id="7963633">Now</span><span class="op" id="7963636">(</span><span class="op" id="7963637">)</span><span class="op" id="7963638">.</span><span class="ident" id="7963639">Add</span><span class="op" id="7963642">(</span><span class="ident" id="7963643">someTimeout</span><span class="op" id="7963654">)</span><span class="op" id="7963655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963659">b</span>&nbsp;<span class="op" id="7963661">:=</span>&nbsp;<span class="builtinfunc" id="7963664">make</span><span class="op" id="7963668">(</span><span class="op" id="7963669">[</span><span class="op" id="7963670">]</span><span class="builtintype" id="7963671">byte</span><span class="op" id="7963675">,</span>&nbsp;<span class="num" id="7963677">128</span><span class="op" id="7963680">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963683">n</span><span class="op" id="7963684">,</span>&nbsp;<span class="ident" id="7963686">err</span>&nbsp;<span class="op" id="7963690">:=</span>&nbsp;<span class="ident" id="7963693">c</span><span class="op" id="7963694">.</span><span class="ident" id="7963695">Read</span><span class="op" id="7963699">(</span><span class="ident" id="7963700">b</span><span class="op" id="7963701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963704">if</span>&nbsp;<span class="ident" id="7963707">err</span>&nbsp;<span class="op" id="7963711">!=</span>&nbsp;<span class="ident" id="7963714">nil</span>&nbsp;<span class="op" id="7963718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963722">t</span><span class="op" id="7963723">.</span><span class="ident" id="7963724">Errorf</span><span class="op" id="7963730">(</span><span class="string" id="7963731">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7963753">,</span>&nbsp;<span class="ident" id="7963755">err</span><span class="op" id="7963758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963762">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7963770">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963773">if</span>&nbsp;<span class="ident" id="7963776">_</span><span class="op" id="7963777">,</span>&nbsp;<span class="ident" id="7963779">err</span>&nbsp;<span class="op" id="7963783">:=</span>&nbsp;<span class="ident" id="7963786">c</span><span class="op" id="7963787">.</span><span class="ident" id="7963788">Write</span><span class="op" id="7963793">(</span><span class="ident" id="7963794">b</span><span class="op" id="7963795">[</span><span class="op" id="7963796">:</span><span class="ident" id="7963797">n</span><span class="op" id="7963798">]</span><span class="op" id="7963799">)</span><span class="op" id="7963800">;</span>&nbsp;<span class="ident" id="7963802">err</span>&nbsp;<span class="op" id="7963806">!=</span>&nbsp;<span class="ident" id="7963809">nil</span>&nbsp;<span class="op" id="7963813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963817">t</span><span class="op" id="7963818">.</span><span class="ident" id="7963819">Errorf</span><span class="op" id="7963825">(</span><span class="string" id="7963826">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7963849">,</span>&nbsp;<span class="ident" id="7963851">err</span><span class="op" id="7963854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7963858">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7963866">}</span><br>
<span class="lineno"></span><span class="op" id="7963868">}</span>
</div>
</body>
</html>
